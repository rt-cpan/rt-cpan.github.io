diff -Naur Test-XML-0.06.orig/lib/Test/XML/XPath.pm Test-XML-0.06/lib/Test/XML/XPath.pm
--- Test-XML-0.06.orig/lib/Test/XML/XPath.pm	Fri May 16 23:37:10 2003
+++ Test-XML-0.06/lib/Test/XML/XPath.pm	Tue May 17 12:36:41 2005
@@ -97,7 +97,12 @@
         $Test->diag( "  Parse Failure: $@" );
         return 0;
     } else {
-        my $retval = $Test->is_eq( $got, $expected, $test_name );
+        my $retval;
+        if (ref $got eq "XML::XPath::Number") {
+            $retval = $Test->is_num( $got, $expected, $test_name );
+        } else {
+            $retval = $Test->is_eq( $got, $expected, $test_name );
+        }
         unless ( $retval ) {
             diag( "  evaluating: $statement" );
             diag( "     against: $input" );
diff -Naur Test-XML-0.06.orig/t/xpath.t Test-XML-0.06/t/xpath.t
--- Test-XML-0.06.orig/t/xpath.t	Fri May 16 23:36:23 2003
+++ Test-XML-0.06/t/xpath.t	Tue May 17 12:35:40 2005
@@ -12,7 +12,7 @@
         $processors{ $_ }++ unless $@;
     }
     plan skip_all => "no available xpath processors" unless %processors;
-    plan tests => (4 + 30 * scalar(keys(%processors)));
+    plan tests => (4 + 32 * scalar(keys(%processors)));
 }
 
 BEGIN {
@@ -65,6 +65,7 @@
         [ $silly_xml,       '/foo/bish/bosh'       => 'pub' ],
         [ $silly_xml,       '/foo/@attrib'         => '1' ],
         [ $silly_xml,       '/foo/bish/bosh/@args' => '42' ],
+        [ '<foo>bar</foo>', 'count(/foo)'          => 1 ],
         # Uncomment this to see a sample failure.
         #[ '<foo>bar</foo>', '/bar'                 => 'foo' ],
     );
