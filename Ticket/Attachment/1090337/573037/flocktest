#!perl
use warnings;
use strict;
use Fcntl qw(:flock);

open(FILE, ">thisfile.txt") or die $!;
flock(FILE, LOCK_EX) or die $!;
flock(FILE, LOCK_UN) or die $!;
flock(FILE, LOCK_SH) or die $!;
flock(FILE, LOCK_UN) or die $!;
flock(FILE, LOCK_EX) or die $!;
close(FILE);
