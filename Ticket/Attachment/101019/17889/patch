diff -ru Digest-SHA1-2.09/SHA1.xs Digest-SHA1-2.09.new/SHA1.xs
--- Digest-SHA1-2.09/SHA1.xs	2004-04-01 13:17:18.000000000 -0600
+++ Digest-SHA1-2.09.new/SHA1.xs	2004-04-04 11:26:51.000000000 -0500
@@ -7,6 +7,8 @@
 #include "EXTERN.h"
 #include "perl.h"
 #include "XSUB.h"
+#include "ppport.h"
+
 #ifdef __cplusplus
 }
 #endif
@@ -31,25 +33,6 @@
    #define DOWARN PL_dowarn
 #endif
 
-#ifdef SvPVbyte
-   #if PERL_REVISION == 5 && PERL_VERSION < 7
-       /* SvPVbyte does not work in perl-5.6.1, borrowed version for 5.7.3 */
-       #undef SvPVbyte
-       #define SvPVbyte(sv, lp) \
-          ((SvFLAGS(sv) & (SVf_POK|SVf_UTF8)) == (SVf_POK) \
-           ? ((lp = SvCUR(sv)), SvPVX(sv)) : my_sv_2pvbyte(aTHX_ sv, &lp))
-
-       static char *
-       my_sv_2pvbyte(pTHX_ register SV *sv, STRLEN *lp)
-       {
-           sv_utf8_downgrade(sv,0);
-           return SvPV(sv,*lp);
-       }
-   #endif
-#else
-   #define SvPVbyte SvPV
-#endif
-
 /* NIST Secure Hash Algorithm */
 /* heavily modified by Uwe Hollerbach <uh@alumni.caltech edu> */
 /* from Peter C. Gutmann's implementation as found in */
Only in Digest-SHA1-2.09.new/: ppport.h
