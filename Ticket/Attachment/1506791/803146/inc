#!/usr/bin/perl


use strict;
use warnings;

unshift @INC, \&myinc;

sub myinc
{
    my( $self, $package ) = @_;
    return unless $package eq 'Something';
    print "including $package\n";
    return *DATA;
}

require "Something";

something();

__DATA__

sub something 
{
    print "This is ", __FILE__, " line ", __LINE__, "\n";
    warn "This is a warning";
}

1;
