#!/usr/bin/perl

binmode(STDOUT, ':utf8');

# the small letter a with diaresis (Ã¤) as an example
my $in = pack('U', 0x00e4);

use XML::LibXML;
my $doc = XML::LibXML::Document->new();

my $node = XML::LibXML::Element->new('test');
$node->setAttribute(contents => $in);
$doc->setDocumentElement($node);

print $doc->toString(1);

$doc->setEncoding('utf-8');
print $doc->toString(1);

