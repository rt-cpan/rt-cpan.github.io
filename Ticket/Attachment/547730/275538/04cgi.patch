--- 04cgi.t	2008-03-20 19:18:00.000000000 +0000
+++ 04cgi.new	2008-12-27 13:32:48.250270400 +0000
@@ -1,3 +1,5 @@
+# -*- perl -*-
+
 use Test::More;
 use Socket;
 use strict;
@@ -38,7 +40,7 @@
 
   like($pid, '/^-?\d+$/', 'pid is numeric');
 
-  select(undef,undef,undef,0.2); # wait a sec
+  sleep 3; # wait a sec
   like(fetch("GET / HTTP/1.1",""), '/NOFILE/', 'no file');
 
   foreach my $method (keys(%methods)) {
@@ -60,13 +62,13 @@
   }
 
   like(
-       fetch("GET /cgitest/REQUEST_URI?foo%3Fbar",""),
+       fetch("GET /cgitest/REQUEST_URI?foo%3Fbar HTTP/1.0",""),
        qr/foo%3Fbar/,
        "Didn't decode already"
       );
 
   like(
-       fetch("GET /cgitest/foo%2Fbar/PATH_INFO",""),
+       fetch("GET /cgitest/foo%2Fbar/PATH_INFO HTTP/1.0",""),
        qr|foo/bar|,
        "Did decode already"
       );
