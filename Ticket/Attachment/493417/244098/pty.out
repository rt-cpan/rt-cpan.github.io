PERL_DL_NONLAZY=1 /bin/perl "-MExtUtils::Command::MM" "-e" "test_harness(1, 'blib/lib', 'blib/arch')" t/pty.t
t/pty....1..32
# Running under perl version 5.008002 for aix
# Current time local: Tue Aug  5 09:13:43 2008
# Current time GMT:   Tue Aug  5 13:13:43 2008
# Using Test.pm version 1.25
# Using IO::Tty 1.07
# Using IO::Pty 1.07
ok 1 # skip aix deadlocks on this test
IPC::Run 0000 0123-------- [#1(430194)]: debugging fd is 3
ok 2 # skip aix deadlocks on this test
ok 3 # skip aix deadlocks on this test
IPC::Run 0000 0123-------- [#1(430194)]: ****** harnessing *****
ok 4 # skip aix deadlocks on this test
ok 5 # skip aix deadlocks on this test
ok 6 # skip aix deadlocks on this test
IPC::Run 0000 0123-------- [#1(430194)]: parsing [ '/bin/perl', '-e', '$| = 1 ;
IPC::Run 0000 0123-------- [#1(430194)]: $s = select STDERR ; $| = 1 ; select $s ;
IPC::Run 0000 0123-------- [#1(430194)]: while (<>) {
IPC::Run 0000 0123-------- [#1(430194)]:    print STDERR uc $_ ;
IPC::Run 0000 0123-------- [#1(430194)]:    print ;
IPC::Run 0000 0123-------- [#1(430194)]:    last if /quit/ ;
IPC::Run 0000 0123-------- [#1(430194)]: }
IPC::Run 0000 0123-------- [#1(430194)]: ' ]
ok 7 # skip aix deadlocks on this test
ok 8 # skip aix deadlocks on this test
IPC::Run 0000 0123-------- [#1(430194)]: parsing SCALAR
ok 9 # skip aix deadlocks on this test
IPC::Run 0000 0123-------- [#1(430194)]: assuming '0<'
IPC::Run 0000 0123-------- [#1(430194)]: parsing '>pty>'
IPC::Run 0000 0123-------- [#1(430194)]: ** starting
IPC::Run 0000 0123-------- [#1(430194)]: opening pty '0'
IPC::Run 0000 012345------ [#1(430194)]: pty() = ( 4, 5 )
IPC::Run 0000 012345------ [#1(430194)]: '/bin/perl' is absolute
IPC::Run 0000 012345------ [#1(430194)]: kid 1 to read 0 from SCALAR
IPC::Run 0000 01234567---- [#1(430194)]: pipe_nb pipe() = ( 6, 7 )
IPC::Run 0000 01234567---- [#1(430194)]: fcntl( 7, F_SETFL, O_NONBLOCK )
IPC::Run 0000 012345678--- [#1(430194)]: dup( 6 ) = 8
IPC::Run 0000 0123456789-- [#1(430194)]: dup( 7 ) = 9
IPC::Run 0000 0123456789-- [#1(430194)]: pipe_nb() = ( 8, 9 )
IPC::Run 0000 012345--89-- [#1(430194)]: kid 1 to write 1 to SCALAR via pty '0'
IPC::Run 0000 012345--89-- [#1(430194)]: kid 1[]'s 0 is my 9
IPC::Run 0000 012345--89-- [#1(430194)]: kid 1[]'s 1 is my 4
IPC::Run 0000 012345--89-- [#1(430194)]: child: `'/bin/perl' -e '$| = 1 ;
IPC::Run 0000 012345--89-- [#1(430194)]: $s = select STDERR ; $| = 1 ; select $s ;
IPC::Run 0000 012345--89-- [#1(430194)]: while (<>) {
IPC::Run 0000 012345--89-- [#1(430194)]:    print STDERR uc $_ ;
IPC::Run 0000 012345--89-- [#1(430194)]:    print ;
IPC::Run 0000 012345--89-- [#1(430194)]:    last if /quit/ ;
IPC::Run 0000 012345--89-- [#1(430194)]: }
IPC::Run 0000 012345--89-- [#1(430194)]: '`
IPC::Run 0000 012345--89-- [#1(430194)]: opening sync pipe 
IPC::Run 0000 0123456789-- [#1(430194)]: pipe() = ( 6, 7 ) 
IPC::Run 0000 0123456789-- [#1(430194)]: fork() = 258536
IPC::Run 0000 0123456-89-- [#1(430194)]: close( 7 ) = 0
IPC::Run 0000 0123456789-- [#1(258536) perl]: Cleaning up parent's ptty '0'
IPC::Run 0000 0123-56789-- [#1(258536) perl]: closing stdin, out, err
IPC::Run 0000 ---3-56789-- [#1(258536) perl]: open fds: 6 8 4 7 9 5
IPC::Run 0000 ---3-5-789-- [#1(258536) perl]: close( 6 ) = 0
IPC::Run 0000 ---3-5-78--- [#1(258536) perl]: close( 9 ) = 0
IPC::Run 0000 0--3-5-78--- [#1(258536) perl]: dup2( 8, 0 ) = 0
IPC::Run 0000 01-3-5-78--- [#1(258536) perl]: dup2( 5, 1 ) = 1
IPC::Run 0000 0123-5-78--- [#1(258536) perl]: dup2( 1, 2 ) = 2
IPC::Run 0000 0123-5-7---- [#1(258536) perl]: close( 8 ) = 0
IPC::Run 0000 0123---7---- [#1(258536) perl]: close( 5 ) = 0
IPC::Run 0000 0123---7---- [#1(258536) perl]: execing /bin/perl -e '$| = 1 ;
IPC::Run 0000 0123---7---- [#1(258536) perl]: $s = select STDERR ; $| = 1 ; select $s ;
IPC::Run 0000 0123---7---- [#1(258536) perl]: while (<>) {
IPC::Run 0000 0123---7---- [#1(258536) perl]:    print STDERR uc $_ ;
IPC::Run 0000 0123---7---- [#1(258536) perl]:    print ;
IPC::Run 0000 0123---7---- [#1(258536) perl]:    last if /quit/ ;
IPC::Run 0000 0123---7---- [#1(258536) perl]: }
IPC::Run 0000 0123---7---- [#1(258536) perl]: '
IPC::Run 0000 0123---7---- [#1(258536) perl]: exec()ing '/bin/perl' '-e' '$| = 1 ;
IPC::Run 0000 0123---7---- [#1(258536) perl]: $s = select STDERR ; $| = 1 ; select $s ;
IPC::Run 0000 0123---7---- [#1(258536) perl]: while (<>) {
IPC::Run 0000 0123---7---- [#1(258536) perl]:    print STDERR uc $_ ;
IPC::Run 0000 0123---7---- [#1(258536) perl]:    print ;
IPC::Run 0000 0123---7---- [#1(258536) perl]:    last if /quit/ ;
IPC::Run 0000 0123---7---- [#1(258536) perl]: }
IPC::Run 0000 0123---7---- [#1(258536) perl]: '
IPC::Run 0000 0123456-89-- [#1(430194)]: read( 6 ) = 0 but true chars ''
IPC::Run 0000 012345--89-- [#1(430194)]: close( 6 ) = 0
IPC::Run 0000 01234----9-- [#1(430194)]: close( 8 ) = 0
IPC::Run 0000 01234----9-- [#1(430194)]: ** pumping
IPC::Run 0000 01234----9-- [#1(430194)]: fds for select: ----r----w--
IPC::Run 0000 01234----9-- [#1(430194)]: timeout=forever
IPC::Run 0000 01234----9-- [#1(430194)]: selected  ---------w--
IPC::Run 0000 01234----9-- [#1(430194)]: filtering data to fd 9 (kid's stdin)
IPC::Run 0000 01234----9-- [#1(430194)]: writing to fd 9 (kid's stdin)
IPC::Run 0000 01234----9-- [#1(430194)]: write( 9, 'hello
IPC::Run 0000 01234----9-- [#1(430194)]: ' ) = 6
IPC::Run 0000 01234----9-- [#1(430194)]: exiting _select(): io occured and break_on_io set
IPC::Run 0000 01234----9-- [#1(430194)]: ** pumping
IPC::Run 0000 01234----9-- [#1(430194)]: fds for select: ----r----w--
IPC::Run 0000 01234----9-- [#1(430194)]: timeout=forever
IPC::Run 0000 01234----9-- [#1(430194)]: selected  ----r----w--
IPC::Run 0000 01234----9-- [#1(430194)]: filtering data to fd 9 (kid's stdin)
IPC::Run 0000 01234----9-- [#1(430194)]: pausing fd 9 (kid's stdin)
IPC::Run 0000 01234----9-- [#1(430194)]: filtering data from fd 4 (kid's stdout)
IPC::Run 0000 01234----9-- [#1(430194)]: reading from fd 4 (kid's stdout)
IPC::Run 0000 01234----9-- [#1(430194)]: read( 4 ) = 14 chars 'HELLO
IPC::Run 0000 01234----9-- [#1(430194)]: hello
IPC::Run 0000 01234----9-- [#1(430194)]: '
IPC::Run 0000 01234----9-- [#1(430194)]: exiting _select(): io occured and break_on_io set
ok 10
ok 11
IPC::Run 0000 01234----9-- [#1(430194)]: ** pumping
IPC::Run 0000 01234----9-- [#1(430194)]: checking for more input fd 9 (kid's stdin)
IPC::Run 0000 01234----9-- [#1(430194)]: writing to fd 9 (kid's stdin)
IPC::Run 0000 01234----9-- [#1(430194)]: write( 9, 'world
IPC::Run 0000 01234----9-- [#1(430194)]: ' ) = 6
IPC::Run 0000 01234----9-- [#1(430194)]: fds for select: ----r----p--
IPC::Run 0000 01234----9-- [#1(430194)]: timeout=forever
IPC::Run 0000 01234----9-- [#1(430194)]: selected  ----r-------
IPC::Run 0000 01234----9-- [#1(430194)]: filtering data from fd 4 (kid's stdout)
IPC::Run 0000 01234----9-- [#1(430194)]: reading from fd 4 (kid's stdout)
IPC::Run 0000 01234----9-- [#1(430194)]: read( 4 ) = 14 chars 'WORLD
IPC::Run 0000 01234----9-- [#1(430194)]: world
IPC::Run 0000 01234----9-- [#1(430194)]: '
IPC::Run 0000 01234----9-- [#1(430194)]: exiting _select(): io occured and break_on_io set
ok 12
ok 13
IPC::Run 0000 01234----9-- [#1(430194)]: ** finishing
IPC::Run 0000 01234----9-- [#1(430194)]: checking for more input fd 9 (kid's stdin)
IPC::Run 0000 01234----9-- [#1(430194)]: writing to fd 9 (kid's stdin)
IPC::Run 0000 01234----9-- [#1(430194)]: write( 9, 'quit
IPC::Run 0000 01234----9-- [#1(430194)]: ' ) = 5
IPC::Run 0000 01234----9-- [#1(430194)]: closing fd 9 (kid's stdin)
IPC::Run 0000 01234------- [#1(430194)]: close( 9 ) = 0
IPC::Run 0000 01234------- [#1(430194)]: fds for select: ----r-------
IPC::Run 0000 01234------- [#1(430194)]: timeout=0.01
IPC::Run 0000 01234------- [#1(430194)]: selected  ----r-------
IPC::Run 0000 01234------- [#1(430194)]: filtering data from fd 4 (kid's stdout)
IPC::Run 0000 01234------- [#1(430194)]: reading from fd 4 (kid's stdout)
IPC::Run 0000 01234------- [#1(430194)]: read( 4 ) = 12 chars 'QUIT
IPC::Run 0000 01234------- [#1(430194)]: quit
IPC::Run 0000 01234------- [#1(430194)]: '
IPC::Run 0000 01234------- [#1(430194)]: fds for select: ----r-------
IPC::Run 0000 01234------- [#1(430194)]: timeout=forever
IPC::Run 0000 01234------- [#1(430194)]: selected  ----r-------
IPC::Run 0000 01234------- [#1(430194)]: filtering data from fd 4 (kid's stdout)
IPC::Run 0000 01234------- [#1(430194)]: reading from fd 4 (kid's stdout)
ack I/O error: read( 4 ) at /home/vchepkov/src/IPC-Run-0.80/blib/lib/IPC/Run/IO.pm line 551
dubious
	Test returned status 255 (wstat 65280, 0xff00)
DIED. FAILED tests 14-32
	Failed 19/32 tests, 40.62% okay (less 9 skipped tests: 4 okay, 12.50%)
Failed 1/1 test scripts, 0.00% okay. 19/32 subtests failed, 40.62% okay.
Failed Test Stat Wstat Total Fail  Failed  List of Failed
-------------------------------------------------------------------------------
t/pty.t      255 65280    32   38 118.75%  14-32
9 subtests skipped.
make: *** [test_dynamic] Error 2
