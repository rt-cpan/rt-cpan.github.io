#!/usr/bin/perl

package cat_test;

use warnings;
use strict;

use Catalyst::Runtime;
use Catalyst;

use Catalyst::Engine::HTTP;

my ($port, $char);
=begin this DOES NOT WORK (but does not throw an exception)
$ENV{CATALYST_ENGINE} ||= 'HTTP';
$port = 3000;
$char = "'\x{F0}'";
=cut

=begin this DOES NOT work (exception)
$ENV{CATALYST_ENGINE} ||= 'HTTP';
$port = 3000;
$char="'\x{F00}'";
=cut

=begin this WORKS (tested under apache 2.2)
$ENV{CATALYST_ENGINE} ||= 'FastCGI';
$char="'\x{F0}' and even '\x{F00}'";
=cut


__PACKAGE__->setup();
__PACKAGE__->run($port);

sub default : Private {
    my ($self, $c) = @_;
    $c->response->body ("This string contains a wide character: $char");
}
