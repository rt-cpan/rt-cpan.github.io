--- ./Data/Dumper.pm.orig	2005-02-22 20:17:13.000000000 -0800
+++ ./Data/Dumper.pm	2005-02-22 20:16:47.000000000 -0800
@@ -405,7 +405,7 @@
 
     my $ref = \$_[1];
     # first, catalog the scalar
-    if ($name ne '') {
+    if ($s->{deepcopy} and ($name ne '')) {
       ($id) = ("$ref" =~ /\(([^\(]*)\)$/);
       if (exists $s->{seen}{$id}) {
         if ($s->{seen}{$id}[2]) {
