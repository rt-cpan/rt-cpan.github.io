--- cpanstats.pl.txt	2003-02-05 20:01:23.000000000 +0000
+++ cpanstats.pl	2003-02-06 11:34:59.000000000 +0000
@@ -7,9 +7,24 @@
 use HTTP::Request::Common;
 use LWP::UserAgent;
 use Storable qw(nfreeze);
+use Data::Dumper;
+use Getopt::Long;
 my $VERSION = "0.12";
 my $APIVERSION = 3;
 
+# get command line options
+my $dryrun;  # just print results, don't post them back
+my @ignore;  # modules to ignore
+GetOptions("dryrun"   => \$dryrun,
+           "ignore=s" => \@ignore);
+
+# do we want to just do a dry run?
+if ($dryrun)
+{
+  print Dumper fetch_data();
+  exit;
+}
+
 # The uid is generated by the program itself
 my $uid = undef;
 
@@ -59,8 +74,15 @@
 
   my %seen;
   my @packages;
-  foreach my $file (sort grep { !$seen{$_}++ } @files) {
+  FILES: foreach my $file (sort grep { !$seen{$_}++ } @files) {
     my($package, $version) = find_version($file);
+
+    # skip modules we're ignoring
+    if (defined($package)) {
+      foreach my $ignore (@ignore)
+        { next FILES if $package =~ /$ignore/; }
+    }
+
     push @packages, {
       package => $package,
       version => $version,
@@ -177,6 +199,28 @@
 request. It checks to see if it is up to date and will warn you if a
 new version is available.
 
+There are several command line option, all of which can be run with
+the standard "--" long option prefix
+
+=over 4
+
+=item dryrun
+
+Just prints out (with Data::Dumper) the data gathered on the system,
+does not actually submit data back to the server.
+
+=item ignore
+
+Allows you to specify modules to ignore by specifying regualar
+expessions of modules to ignore.  This is useful if you have inhouse
+modules installed you do not want to admit the existance of to the
+outside world.  For example, to ignore all the Profero modules Profero
+use the following command.
+
+  cpanstats.pl --ignore ^Profero
+
+=back
+
 =head1 AUTHOR
 
 Leon Brocard <acme@astray.com>
