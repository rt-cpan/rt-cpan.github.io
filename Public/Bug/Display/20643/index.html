<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #20643 for Error: $Error::THROWN takes precedence over $@</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #20643 for Error: $Error::THROWN takes precedence over $@</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Error/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Error/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Error/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Error/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Error">Error CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">20643</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">15 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Error/Active/">Error</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">SHLOMIF [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
Marek.Rouchal [...] gmx.net

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-12246-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.15    </td>
  </tr>
  <tr id="CF-12247-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;24&nbsp;10:30:53&nbsp;2006</span>
    <span class="description">Marek.Rouchal [...] gmx.net -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> $Error::THROWN takes precedence over $@</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have perl-5.8.8, the latest Error &#40;0.17&#41; running on Solaris 8 Sparc 
and RedHat Enterprise Linux 3.0. I have this somewhat weird situation:
I override CORE::GLOBAL::die to make sure all exceptions &#40;from 
whatever Perl module they come from&#41; are throwing some My::Error 
exceptions, which are derived from the Error base class. Reason: this 
way I can get the full stack trace of the exception. This however does 
not work perfectly for some unknown reason - I failed to find that 
out. Anyway, the resulting problem is this:
try {
  ... some code that has its own eval { die ... }, where the
    die is redirected to My::Error-&gt;throw, such that $Error::THROWN
    contains the exception object &#40;1&#41; ...
  ... more code ...
  ... code that uses Carp::croak, and that mysteriously does not
    take the detour via My::Error-&gt;throw &#40;2&#41; ...
  ... more code, but not reached in this case...
} catch Error with {
  ... the usual print and exit ...
};
The problem is that the catch block will report the exception &#40;1&#41; and 
not &#40;2&#41;. This is because of this code in Error.pm:
   $err = defined&#40;$Error::THROWN&#41; ? $Error::THROWN : $@;
...which clearly prefers the content of Error::THROWN over $@.

I am wondering why that does not read:
   if&#40;$ok&#41; {
     next CATCHLOOP if $more;
     undef $err;
     undef $Error::THROWN;
   }
   elsif&#40;$@&#41; {
     $err = ref&#40;$@&#41; ? $@ : 
                      $Error::ObjectifyCallback-&gt;&#40;{&#39;text&#39; =&gt;$@}&#41;;
   }
   elsif&#40;defined $Error::THROWN&#41; {
     # this is always an object
     $err = $Error::THROWN;
   }
   last CATCH;

This way an actual exception caught by the eval{} will always be 
preferred, and the $Error::THROWN is just a fallback, or it may even 
be obsolete. Or do I miss anything fundamental here?

Note that some Perl modules &#40;AutoLoader, File::Temp&#41; temporarily set 
$SIG{__DIE__} which seems to cause some confusion. I think overriding 
CORE::GLOBAL::die by a custom My::Error::dieReplacement&#40;&#41;, which does 
a My::Error-&gt;throw is OK, but it is not perfect, as some exceptions 
&#40;those by Carp::croak? I have seen the problem where &#40;2&#41; was 
XML::LibXML, which croaks on an XML parse error&#41; do not seem to be 
redirectable this way. And abusing $SIG{__DIE__} for that purpose is 
explicitely discoraged in the Perl docs.

Sorry, I cannot easily generate a test example - I hope you get the 
idea, if not, do not hesitate to reply.

Cheers,

Marek
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;08&nbsp;14:07:58&nbsp;2006</span>
    <span class="description">leonerd-cpan [...] leonerd.org.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jul 24 10:30:53 2006, MAREKR wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Note that some Perl modules &#40;AutoLoader, File::Temp&#41; temporarily set 
&gt; $SIG{__DIE__} which seems to cause some confusion. I think overriding 
&gt; CORE::GLOBAL::die by a custom My::Error::dieReplacement&#40;&#41;, which does 
&gt; a My::Error-&gt;throw is OK, but it is not perfect, as some exceptions 
&gt; &#40;those by Carp::croak? I have seen the problem where &#40;2&#41; was 
&gt; XML::LibXML, which croaks on an XML parse error&#41; do not seem to be 
&gt; redirectable this way. And abusing $SIG{__DIE__} for that purpose is 
&gt; explicitely discoraged in the Perl docs.
</div>
Have you seen the new :warndie tag in Error version 0.17? That might be
more what you&#39;re wanting to do here.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sorry, I cannot easily generate a test example - I hope you get the 
&gt; idea, if not, do not hesitate to reply.
</div>
I&#39;ve had a play about with the idea, but I&#39;m afraid I can&#39;t easily
replicate what you mean with the code. Take a look at [the attached],
and let me know if that&#39;s what you mean. If not, feel free to modify it
as required, and send it back.

When I run it, the output I get is:

-----
DIAG:0
DIAG:1
DIAG:2
eval{} returned a :
Error from internal eval{} block at ./bug-rt_20643-test.pl line 27.

but we&#39;ll ignore it
DIAG:3
catch block has caught A different error from the try{} block at
/usr/local/share/perl/5.8.8/Error.pm line 417.

-----

Let me know how you get on with that...

-- 

Paul Evans
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl -w

use strict;

use Error qw&#40;:try&#41;;
use Carp;

print STDERR &#34;DIAG:0\n&#34;;

{
   no warnings;
   *CORE::GLOBAL::die = sub {
      print STDERR &#34;Overridden die&#40;&#41; handler activated\n&#34;;
      my $e = $@;

      print STDERR &#34;Overridden die&#40;&#41; handler has caught $e\n&#34;;

      throw Error&#40; -text =&gt; &#34;Exception from the overridden die&#40;&#41; handler&#34; &#41;;
   };
}

try {
   print STDERR &#34;DIAG:1\n&#34;;

   eval {
      print STDERR &#34;DIAG:2\n&#34;;
      die &#34;Error from internal eval{} block&#34;;
      warn &#34;NOTREACH&#34;;
   };

   print STDERR &#34;eval{} returned a &#34; . ref&#40;$@&#41; . &#34;:\n$@\n&#34;;
   print STDERR &#34;but we&#39;ll ignore it\n&#34;;

   print STDERR &#34;DIAG:3\n&#34;;

   Carp::croak&#40; &#34;A different error from the try{} block\n&#34; &#41;;

   warn &#34;NOTREACH&#34;;
}
catch Error with {
   my $e = shift;
   print STDERR &#34;catch block has caught $e\n&#34;;
};

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;08&nbsp;14:09:22&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;09&nbsp;09:33:51&nbsp;2006</span>
    <span class="description">Marek.Rouchal [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Aug 08 14:07:58 2006, PEVANS wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Have you seen the new :warndie tag in Error version 0.17? That might 
</div>be
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; more what you&#39;re wanting to do here.
</div>
Yes, but I also saw the objectify callback, and that is likely to 
become the way to go for me, since it allows me to turn the textual 
exceptions of die/croak into an exception object of my own class.

But there is a major downside: I cannot get the stack trace! Only when 
I override the die &#40;with CORE::GOBAL::die&#41; I can use the caller&#40;&#41; 
funtion in the override sub to determine the stack trace, and put that 
in the object, which is then thrown by CORE::die. That is the ultimate 
rationale for this ticket.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Sorry, I cannot easily generate a test example - I hope you get 
</div></div>the 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; idea, if not, do not hesitate to reply.
</div>&gt; 
&gt; I&#39;ve had a play about with the idea, but I&#39;m afraid I can&#39;t easily
&gt; replicate what you mean with the code. Take a look at [the attached],
&gt; and let me know if that&#39;s what you mean. If not, feel free to modify 
</div>it
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; as required, and send it back.
</div>
Many thanks - that was an excellent starting point for the adapted 
version, which you can find attached - it generates the error that I 
observed in my system originally. Major change: I had to put the 
CORE::GLOBAL::die definition in a BEGIN{} block, as I &#34;use MyError&#34;, 
the derived class, where the override is done. And I put in some more 
diagnostics.
But I do not understand why the override of die is only active in this 
script, and not in the Carp module - the second exception 
&#40;Carp::croak&#41; should also trigger the CORE::GLOBAL::die sub, but I do 
not see the diagnostic messages.
Anyway, the good thing is that Perl seems to automatically disable the 
override of &#34;die&#34; withing the overriding sub, so we do not end up in a 
deep recursion.
I tried to play with the order of the BEGIN{} block and the &#34;use Carp&#34; 
line, but that did not change anything. I must admit that I do not 
fully understand what is going on there - I hope you are more 
successful...

Thanks a lot anyway for looking into this,

Marek
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/opt/perl_5.8.8/bin/perl -w

use strict;

print STDERR &#34;DIAG:0: Start\n&#34;;
use Error qw&#40;:try&#41;;

BEGIN{
   no warnings;
   *CORE::GLOBAL::die = sub {
      my $e = $_[0];

      print STDERR &#34;Overridden die&#40;&#41; handler has caught &#39;$e&#39;\n&#34;;

      throw Error::Simple&#40;&#34;Exception thrown by the overridden die&#40;&#41; handler: &#39;$e&#39;&#34;&#41;;
   };
}

use Carp;

print STDERR &#34;DIAG:0: Start\n&#34;;

try {
   print STDERR &#34;DIAG:1: Start of the try{} block\n&#34;;

   eval {
      print STDERR &#34;DIAG:2: die &#39;Error from internal eval{} block&#39;\n&#34;;
      die &#34;Error from internal eval{} block&#34;;
      warn &#34;NOTREACH&#34;;
   };

   print STDERR &#34;eval{} returned a &#34; . ref&#40;$@&#41; . &#34;:\n$@\n&#34;;
   print STDERR &#34;but we&#39;ll ignore it\n&#34;;

   print STDERR &#34;DIAG:3: throwing &#39;A different error from the try{} block&#39;\n&#34;;

   Carp::croak&#40; &#34;A different error from the try{} block\n&#34; &#41;;
   #die &#34;A different error from the try{} block\n&#34;;

   warn &#34;NOTREACH&#34;;
}
catch Error with {
   my $e = shift;
   print STDERR &#34;catch block has caught: &#39;$e&#39;\n&#34;;
};

print STDERR &#34;DIAG:4: we should see caught exception &#39;A different error from the try{} block&#39;\n&#34;;


</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;17&nbsp;16:11:26&nbsp;2006</span>
    <span class="description">leonerd-cpan [...] leonerd.org.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Aug 09 09:33:51 2006, MAREKR wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; But there is a major downside: I cannot get the stack trace! Only when 
&gt; I override the die &#40;with CORE::GOBAL::die&#41; I can use the caller&#40;&#41; 
&gt; funtion in the override sub to determine the stack trace, and put that 
&gt; in the object, which is then thrown by CORE::die. That is the ultimate 
&gt; rationale for this ticket.
</div>
$Error::DEBUG = 1;

Now all Error-derived exceptions will store a stack trace.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Many thanks - that was an excellent starting point for the adapted 
&gt; version, which you can find attached - it generates the error that I 
&gt; observed in my system originally. Major change: I had to put the 
&gt; CORE::GLOBAL::die definition in a BEGIN{} block, as I &#34;use MyError&#34;, 
&gt; the derived class, where the override is done. And I put in some more 
&gt; diagnostics.
</div>
I see your problem.

Read &#34;perldoc perlvars&#34; on the $^S variable. Then do the following:

   *CORE::GLOBAL::die = sub {
      die @_ if $^S;

      my $e = $_[0];

That die line is the magic that all __DIE__ handlers need to start with,
so that they don&#39;t break during inner eval{} exception handling. I added
that line to your supplied script, and I get the expected behaviour.

-- 

Paul Evans
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;20&nbsp;15:37:47&nbsp;2006</span>
    <span class="description">leonerd-cpan [...] leonerd.org.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Aug 17 16:11:26 2006, PEVANS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; That die line is the magic that all __DIE__ handlers need to start with,
&gt; so that they don&#39;t break during inner eval{} exception handling. I added
&gt; that line to your supplied script, and I get the expected behaviour.
</div>
Is this bug all sorted now? Can I close it, or are there still
outstanding issues?

-- 

Paul Evans
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;21&nbsp;10:02:26&nbsp;2006</span>
    <span class="description">Marek.Rouchal [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> MAREKR [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Aug 20 15:37:47 2006, PEVANS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Is this bug all sorted now? Can I close it, or are there still
&gt; outstanding issues?
</div>
Yes - thank you very much for the pointer to $^S, that was unknown to 
me. I can confirm that with this trick things work as expected.

Just one final word to this one:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; But there is a major downside: I cannot get the stack trace! Only 
</div></div>when 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; I override the die &#40;with CORE::GOBAL::die&#41; I can use the caller&#40;&#41; 
&gt;&gt; funtion in the override sub to determine the stack trace, and put 
</div></div>that 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; in the object, which is then thrown by CORE::die. That is the 
</div></div>ultimate 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; rationale for this ticket.
</div>&gt;
&gt;$Error::DEBUG = 1;
&gt;Now all Error-derived exceptions will store a stack trace.
</div>
Correct - but I do not only want stack traces for Error-derived 
exceptions, but for _all_ exceptions - and that is why I 
CORE::GLOBALly override die&#40;&#41; with the Error-&gt;throw; and certainly, I 
set $Error::DEBUG=1 to get the trace.

Anyway - there is no bug any more now; perhaps you can consider to 
give the user a possibility to do the override of die&#40;&#41; using
CORE::GLOBAL::die to turn all die&#40;&#41;s into Error-&gt;throws, e.g.
with
    use Error qw&#40;:die&#41;;
but what exception object to use? Probably Error::Simple. Maybe it 
would be better to say:
    use Error qw&#40;:try&#41;;
    Error-&gt;die_as&#40;&#39;Error::Simple&#39;&#41;;
with

sub die_as
{
  my &#40;$self,$class&#41; = @_;
  *CORE::GLOBAL::die = sub {
    CORE::die @_ if $^S;
    $class-&gt;throw&#40;$_[0]&#41;;
  };
  1;
}

Did not test it yet, though.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;24&nbsp;03:37:35&nbsp;2006</span>
    <span class="description">Marek.Rouchal [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> lds [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have played with this subject a little more - and I am afraid there 
is no clean solution.

One general suggestion, that hopefully won&#39;t hurt anybody: The &#34;die&#34; 
in Error::throw should be written as CORE::die, since at this point we 
do not want any more interaction with other exception handling systems 
etc.

Then I saw that CGI::Carp tries to do similar things as I do, and I 
read this:

1.26 Replaced CORE::GLOBAL::die with the evil $SIG{__DIE__} because the
     former isn&#39;t working in some people&#39;s hands.  There is no such 
thing
     as reliable exception handling in Perl.

Looking at my test script again, one thing puzzles me: 
CORE::GLOBAL::die cannot override the die in Carp::croak! Maybe this 
is what Lincoln meant with the above...

-Marek
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;24&nbsp;17:23:30&nbsp;2006</span>
    <span class="description">LDS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> LDS [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I found the handling of $SIG{__DIE__} and $CORE::GLOBAL::die to be
inconsistent among Perl versions and sometimes inconsistent with what I
thought the documentation was saying &#40;not that I am sure that this
wasn&#39;t my misunderstanding&#41;. In any case, I got tired of getting
CGI::Carp to work properly in all cases, and there are still situations
when it doesn&#39;t do the right thing when responding to an eval { die }

I would welcome any help that people can offer in modifying CGI::Carp so
that it works properly in all cases.

Lincoln
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;14&nbsp;05:47:16&nbsp;2006</span>
    <span class="description">Marek.Rouchal [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On So. 20. Aug. 2006, 15:37:47, PEVANS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Is this bug all sorted now? Can I close it, or are there still
&gt; outstanding issues?
</div>
Finally here is some news on this topic:
$^S unfortunately does not help at all - I found that during a more 
thorough analysis. Since the try{} block in fact is an eval{}, $^S
is always true inside that block, and my original requirements are not 
fulfilled at all. To remember, here they are again:
- I want to use Error exception handling throughout the application
- I want to force all modules throwing Error exceptions
- I want to have the possibility to debug stack traces &#40;for that I 
need the above&#41;.

Obviously I cannot force everybody to use Error exceptions in all 
their CPAN modules. So the only way is to play with $SIG{__DIE__} or 
CORE::GLOBAL::die. The former is deprecated in the manuals, the latter 
seems to work OK. So I can do something like this:
  BEGIN {
    *CORE::GLOBAL::die = sub { Error::Simple-&gt;throw&#40;shift&#41; };
  }
and all should be fine &#40;note that this requires Error::throw to use 
explicitely CORE::die, otherwise we end up in an endless loop&#41;.

But alas, there is a gotcha... when in some module there is an eval{} 
around some code that does a die&#40;&#41;, then $Error::THROWN is set - and 
not cleared. And that masks any CORE::die exception &#40;which may occur 
e.g. when an XS module fails to load its binary *.so part - such an 
exception does not go through CORE::GLOBAL::die&#41;. Try this script:

#!/opt/perl_5.8.8/bin/perl -w

use Error qw&#40;:try&#41;;

BEGIN {
  *CORE::GLOBAL::die = sub { Error::Simple-&gt;throw&#40;shift&#41; };
  *Error::die = sub { CORE::die @_ };
}

try {
  # this contains an eval { ... } around some code which
  # throws an Error::Simple exception because of the
  # above CORE::GLOBAL::die override. $Error::THROWN is
  # set
  require File::Temp;

  # this is an alternative way to produce this situation:
  #eval {
  #  Error::Simple-&gt;throw&#40;&#34;This is caught by a simple eval&#34;&#41;;
  #};
  
  print &#34;Error::THROWN = $Error::THROWN\n&#34;;

  # this exception is caught nicely:
  #Error::Simple-&gt;throw&#40;&#34;thrown exception&#34;&#41;;

  # also this is caught with the right text:
  # since it triggers the CORE::GLOBAL::die
  #die &#34;ARGH&#34;;

  # this one is masked by the $Error::THROWN
  CORE::die &#34;Do you see me?&#34;;
}
otherwise {
  my $E = shift;
  print &#34;Caught exception:\n$E\n&#34;;
};

exit 0;
__END__

Uncomment and try the other exceptions - however, you won&#39;t see 
the &#34;Do you see me?&#34; exception.
I looked at the code around line 358 in Error.pm:

  else {
    $err = defined&#40;$Error::THROWN&#41;
      ? $Error::THROWN : $@;
    $err = $Error::ObjectifyCallback-&gt;&#40;{&#39;text&#39; =&gt;$err}&#41;
      unless ref&#40;$err&#41;;
  }

I am wondering, why $Error::THROWN is preferred over $@, which 
actually contains the exception that caused the eval{} to abort. Why 
not rewrite it like this &#40;attention, also on lines 393 and 433 etc.&#41;:

  else {
    $err = $Error::THROWN = defined&#40;$@&#41; ? $@ : $Error::THROWN;
    $err = $Error::ObjectifyCallback-&gt;&#40;{&#39;text&#39; =&gt;$err}&#41;
      unless ref&#40;$err&#41;;
  }

All the regression tests in the Error package pass OK with this 
change, and my requirements would be fulfilled as well.

Thank you for your patience and best regards,

Marek
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;16&nbsp;11:40:56&nbsp;2007</span>
    <span class="description">Marek.Rouchal [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> gbarr [...] pobox.com,peter [...] weblogic.com,jglick [...] sig.bsh.com,leonerd [...] leonerd.org.uk,shlomif [...] iglu.org.il,u_arunkumar [...] yahoo.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear all,

did you notice my previous posting, especially the suggestion at the 
end? I think this would be a valid and safe change, without losing any 
functionality of this module. Can you consider updating Error 
accordingly?

Cheers,

Marek

On Do. 14. Dez. 2006, 05:47:16, MAREKR wrote:
...
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I am wondering, why $Error::THROWN is preferred over $@, which 
&gt; actually contains the exception that caused the eval{} to abort. Why 
&gt; not rewrite it like this &#40;attention, also on lines 393 and 433 etc.&#41;:
&gt; 
&gt;   else {
&gt;     $err = $Error::THROWN = defined&#40;$@&#41; ? $@ : $Error::THROWN;
&gt;     $err = $Error::ObjectifyCallback-&gt;&#40;{&#39;text&#39; =&gt;$err}&#41;
&gt;       unless ref&#40;$err&#41;;
&gt;   }
&gt; 
&gt; All the regression tests in the Error package pass OK with this 
&gt; change, and my requirements would be fulfilled as well.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;28&nbsp;07:42:14&nbsp;2007</span>
    <span class="description">Marek.Rouchal [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> gbarr [...] pobox.com,peter [...] weblogic.com,jglick [...] sig.bsh.com,leonerd [...] leonerd.org.uk,shlomif [...] iglu.org.il,u_arunkumar [...] yahoo.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear all,

after some more investigations I have now prepared a patch, which 
solves my problem &#40;to 80% - the problem that Carp::croak&#40;&#41; still won&#39;t 
produce Error::Simple exceptions when I override CORE::GLOBAL::die is 
still there&#41;. The patch consists of the actual code change and a new 
test &#40;12wrong.t&#41; that will fail with version 0.17008 of Error and pass 
with the patched code. From that test you can easily see what the 
problem is. The test reproduces &#40;with simple means&#41; a much more 
complex situation, where the first exception occurs while processing 
a &#34;use File::Temp&#34;, and the second exception occurs elsewhere deep 
inside some other CPAN module.

Anyway, all other tests pass &#40;together the tests have a 75% statement 
coverage&#41; with the patch, and I do not see right now why one shouldn&#39;t 
examine $@ instead of $Error::THROWN after the eval{} in try&#40;&#41; - since 
$@ is the ultimate source of whether an exception occurred or not. Or 
do I miss anything?

Cheers,

Marek
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -ruN Error-0.17008/lib/Error.pm Error-0.17008p1/lib/Error.pm
--- Error-0.17008/lib/Error.pm	2006-10-25 22:10:14.000000000 +0200
+++ Error-0.17008p1/lib/Error.pm	2007-08-27 17:12:18.459970000 +0200
@@ -15,7 +15,7 @@
 use vars qw&#40;$VERSION&#41;;
 use 5.004;
 
-$VERSION = &#34;0.17008&#34;; 
+$VERSION = &#34;0.17008_01&#34;; 
 
 use overload &#40;
 	&#39;&#34;&#34;&#39;	   =&gt;	&#39;stringify&#39;,
@@ -356,8 +356,7 @@
 			    undef $err;
 			}
 			else {
-			    $err = defined&#40;$Error::THROWN&#41;
-				    ? $Error::THROWN : $@;
+			    $err = $@ || $Error::THROWN;
 				$err = $Error::ObjectifyCallback-&gt;&#40;{&#39;text&#39; =&gt;$err}&#41;
 					unless ref&#40;$err&#41;;
 			}
@@ -391,8 +390,7 @@
 		undef $err;
 	    }
 	    else {
-		$err = defined&#40;$Error::THROWN&#41;
-			? $Error::THROWN : $@;
+		$err = $@ || $Error::THROWN;
 
 		$err = $Error::ObjectifyCallback-&gt;&#40;{&#39;text&#39; =&gt;$err}&#41; 
 			unless ref&#40;$err&#41;;
@@ -430,7 +428,7 @@
 	    1;
 	};
 
-	$err = defined&#40;$Error::THROWN&#41; ? $Error::THROWN : $@
+	$err = $@ || $Error::THROWN
 	    unless $ok;
     };
 
diff -ruN Error-0.17008/MANIFEST Error-0.17008p1/MANIFEST
--- Error-0.17008/MANIFEST	2006-10-25 22:10:14.000000000 +0200
+++ Error-0.17008p1/MANIFEST	2007-08-28 08:19:25.582681000 +0200
@@ -25,6 +25,7 @@
 t/09dollar-at.t
 t/10throw-in-catch.t
 t/11rethrow.t
+t/12wrong.t
 t/lib/MyDie.pm
 t/pod-coverage.t
 t/pod.t
diff -ruN Error-0.17008/t/12wrong.t Error-0.17008p1/t/12wrong.t
--- Error-0.17008/t/12wrong.t	1970-01-01 01:00:00.000000000 +0100
+++ Error-0.17008p1/t/12wrong.t	2007-08-28 08:18:41.624772000 +0200
@@ -0,0 +1,38 @@
+#!/usr/bin/perl -w
+
+use Error qw&#40;:try&#41;;
+
+print &#34;1..2\n&#34;;
+
+try {
+  eval {
+   throw Error::Simple &#34;This is caught by eval, not by try.&#34;;
+  };
+
+  if&#40;$@ &#38;&#38; $@ =~ /This is caught by eval, not by try/&#41; {
+    print &#34;ok 1\n&#34;;
+  } else {
+    print &#34;not ok 1\n&#34;;
+  }
+
+  print &#34;# Error::THROWN = $Error::THROWN\n&#34;;
+
+  die &#34;This is a simple &#39;die&#39; exception.&#34;;
+
+  # not reached
+}
+otherwise {
+  my $E = shift;
+  my $t = $Error::THROWN ? &#34;$Error::THROWN&#34; : &#39;&#39;;
+  print &#34;# Error::THROWN = $t\n&#34;;
+  $E ||= &#39;&#39;;
+  print &#34;# E = $E\n&#34;;
+  if&#40;&#34;$E&#34; =~ /This is a simple &#39;die&#39; exception/&#41; {
+    print &#34;ok 2\n&#34;;
+  } else {
+    print &#34;not ok 2\n&#34;;
+  }
+};
+
+exit 0;
+
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;28&nbsp;12:38:55&nbsp;2007</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">15 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Aug 28 07:42:14 2007, MAREKR wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Dear all,
&gt; 
&gt; after some more investigations I have now prepared a patch, which 
&gt; solves my problem &#40;to 80% - the problem that Carp::croak&#40;&#41; still 
</div>won&#39;t 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; produce Error::Simple exceptions when I override CORE::GLOBAL::die 
</div>is 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; still there&#41;. The patch consists of the actual code change and a new 
&gt; test &#40;12wrong.t&#41; that will fail with version 0.17008 of Error and 
</div>pass 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; with the patched code. From that test you can easily see what the 
&gt; problem is. The test reproduces &#40;with simple means&#41; a much more 
&gt; complex situation, where the first exception occurs while processing 
&gt; a &#34;use File::Temp&#34;, and the second exception occurs elsewhere deep 
&gt; inside some other CPAN module.
&gt; 
&gt; Anyway, all other tests pass &#40;together the tests have a 75% 
</div>statement 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; coverage&#41; with the patch, and I do not see right now why one 
</div>shouldn&#39;t 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; examine $@ instead of $Error::THROWN after the eval{} in try&#40;&#41; - 
</div>since 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; $@ is the ultimate source of whether an exception occurred or not. 
</div>Or 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; do I miss anything?
&gt; 
&gt; Cheers,
&gt; 
&gt; Marek
</div>
Hi Marek!

Thanks for your persistence. I applied a modified version of your 
patch to Error-0.17009, which I just uploaded to CPAN. After I 
inspected the tests I understood that the behaviour at the moment was 
wrong.

Regards,

      Shlomi Fish
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;28&nbsp;12:38:59&nbsp;2007</span>
    <span class="description">SHLOMIF [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;28&nbsp;12:39:03&nbsp;2007</span>
    <span class="description">SHLOMIF [...] cpan.org -  Given to SHLOMIF</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
