<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #118679 for Control-CLI: Too many open files</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #118679 for Control-CLI: Too many open files</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Control-CLI">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Control-CLI">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Control-CLI">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Control-CLI">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Control-CLI">Control-CLI CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">118679</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Control-CLI">Control-CLI</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">LSTEVENS [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
quakehunter5225 [...] yahoo.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-237888-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-237889-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
2.04    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=118679">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681624" href="/Public/Bug/Display.html?id=118679#txn-1681624">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;08&nbsp;14:41:34&nbsp;2016</span>
    <span class="description">quakehunter5225 [...] yahoo.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Too many open files</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 8 Nov 2016 19:37:29 +0000 &#40;UTC&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Control-CLI [...] rt.cpan.org&#34; &lt;bug-Control-CLI [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jon Wolfert &lt;quakehunter5225 [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681624/902703/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902703">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
In running a script which connects to about 1200 network devices, it got to ~650, and then had the below error when it went to create the next session.  I checked how many Input/Output/Dump files had been written in the director so far and it was just shy of ~2,000 .  I believe the number of open files is a limit of the OS, but as each of the SSH sessions is closed, I would expect the file handles to be closed as well.  Below is the code 

&#34;problem creating ./XXXX - Test-Input.txt: Too many open files at D:/Strawberry/perl/site/lib/Control/CLI.pm line 869&#34;

Below is the code I&#39;m using, &#39;conn&#39; is a method I use that just attempts a Telnet session, if that fails it attempts an SSH connection, but the variable $conn is now the Control::CLI object and I am able to throw all commands at it without issue.  The object is not stored in any way outside of this &#39;for&#39; loop, but is there a chance the file handlers are not being closed upon &#39;disconnect&#39;?  Thank you as always for any insight in to this!



for my $ip_address &#40;@ip_list&#41; {
    #Attempt to connect to device
    if&#40;conn&#40;\$conn, $ip_address, $username, $login_pass, $enable_pass&#41;&#41; {
        print &#34;Connection successful to $ip_address.\n&#34;
    } else { next; }

    #Check if device is already in device list
    if&#40;!exists $devices{$ip_address}&#41; {
        ...
    } else { print &#34;Error: Device&#40;$ip_address&#41; should not exist already\n&#34;; }

    #Close SSH/Telnet session
    $conn-&gt;disconnect;
}

J. Wolfert
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681624/902704/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902704">with headers</a>
<br />
<span class="downloadcontenttype">text/html 3.2k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682061" href="/Public/Bug/Display.html?id=118679#txn-1682061">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;10&nbsp;16:22:04&nbsp;2016</span>
    <span class="description">LSTEVENS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1682061/902961/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902961">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi

Indeed, the disconnect method does not close the logging file handles.
The input/output/dump _log methods are pretty much a copy of the same Net::Telnet methods; for Telnet connections Control::CLI even calls the Net::Telnet ones.
The Net::Telnet documentation does actually state that the logging file handles are not closed if logging is disabled &#40;which I need to add to Control::CLI&#39;s pod&#41;. The Net::Telnet::close method &#40;equivalent to disconnect here&#41; also does not close those file handles...
I think the intent is that you can pass your own file handles to the logging methods, so the logging and close methods defer from closing them.

Maybe it might be best to close them in the Control::CLI&#39;s DESTROY method.
I take it when you re-assign $conn to a new Control::CLI object, the previous object is not referenced anymore in your for loop.

Until I suss it out, as a workaround you should be able to close the file handles just before doing disconnect:

    #Close SSH/Telnet session
    close $conn-&gt;input_log if defined $conn-&gt;input_log;
    close $conn-&gt;output_log if defined $conn-&gt;output_log;
    close $conn-&gt;dump_log if defined $conn-&gt;dump_log;
    $conn-&gt;disconnect;

Best regards
Ludovico Stevens


On Tue Nov 08 14:41:34 2016, quakehunter5225@yahoo.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; In running a script which connects to about 1200 network devices, it
&gt; got to ~650, and then had the below error when it went to create the
&gt; next session.  I checked how many Input/Output/Dump files had been
&gt; written in the director so far and it was just shy of ~2,000 .  I
&gt; believe the number of open files is a limit of the OS, but as each of
&gt; the SSH sessions is closed, I would expect the file handles to be
&gt; closed as well.  Below is the code
&gt; 
&gt; &#34;problem creating ./XXXX - Test-Input.txt: Too many open files at
&gt; D:/Strawberry/perl/site/lib/Control/CLI.pm line 869&#34;
&gt; 
&gt; Below is the code I&#39;m using, &#39;conn&#39; is a method I use that just
&gt; attempts a Telnet session, if that fails it attempts an SSH
&gt; connection, but the variable $conn is now the Control::CLI object and
&gt; I am able to throw all commands at it without issue.  The object is
&gt; not stored in any way outside of this &#39;for&#39; loop, but is there a
&gt; chance the file handlers are not being closed upon &#39;disconnect&#39;? 
&gt; Thank you as always for any insight in to this!
&gt; 
&gt; 
&gt; 
&gt; for my $ip_address &#40;@ip_list&#41; {
&gt;     #Attempt to connect to device
&gt;     if&#40;conn&#40;\$conn, $ip_address, $username, $login_pass,
&gt; $enable_pass&#41;&#41; {
&gt;         print &#34;Connection successful to $ip_address.\n&#34;
&gt;     } else { next; }
&gt; 
&gt;     #Check if device is already in device list
&gt;     if&#40;!exists $devices{$ip_address}&#41; {
&gt;         ...
&gt;     } else { print &#34;Error: Device&#40;$ip_address&#41; should not exist
&gt; already\n&#34;; }
&gt; 
&gt;     #Close SSH/Telnet session
&gt;     $conn-&gt;disconnect;
&gt; }
&gt; 
&gt; J. Wolfert
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682062" href="/Public/Bug/Display.html?id=118679#txn-1682062">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;10&nbsp;16:22:04&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682064" href="/Public/Bug/Display.html?id=118679#txn-1682064">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;10&nbsp;16:22:09&nbsp;2016</span>
    <span class="description">LSTEVENS [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1732759" href="/Public/Bug/Display.html?id=118679#txn-1732759">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;14&nbsp;15:58:50&nbsp;2017</span>
    <span class="description">LSTEVENS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1732759/931692/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/931692">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi

Sorry, slow turn around..!
I have posted a new version where you can now pass a close_logs flag into the disconnect&#40;&#41; method.
This maintains the existing default behaviour while giving you a shorthand option to make sure all logging files get closed on disconnect.

Best regards
Ludovico Stevens

On Thu Nov 10 16:22:04 2016, LSTEVENS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi
&gt; 
&gt; Indeed, the disconnect method does not close the logging file handles.
&gt; The input/output/dump _log methods are pretty much a copy of the same
&gt; Net::Telnet methods; for Telnet connections Control::CLI even calls
&gt; the Net::Telnet ones.
&gt; The Net::Telnet documentation does actually state that the logging
&gt; file handles are not closed if logging is disabled &#40;which I need to
&gt; add to Control::CLI&#39;s pod&#41;. The Net::Telnet::close method &#40;equivalent
&gt; to disconnect here&#41; also does not close those file handles...
&gt; I think the intent is that you can pass your own file handles to the
&gt; logging methods, so the logging and close methods defer from closing
&gt; them.
&gt; 
&gt; Maybe it might be best to close them in the Control::CLI&#39;s DESTROY
&gt; method.
&gt; I take it when you re-assign $conn to a new Control::CLI object, the
&gt; previous object is not referenced anymore in your for loop.
&gt; 
&gt; Until I suss it out, as a workaround you should be able to close the
&gt; file handles just before doing disconnect:
&gt; 
&gt; #Close SSH/Telnet session
&gt; close $conn-&gt;input_log if defined $conn-&gt;input_log;
&gt; close $conn-&gt;output_log if defined $conn-&gt;output_log;
&gt; close $conn-&gt;dump_log if defined $conn-&gt;dump_log;
&gt; $conn-&gt;disconnect;
&gt; 
&gt; Best regards
&gt; Ludovico Stevens
&gt; 
&gt; 
&gt; On Tue Nov 08 14:41:34 2016, quakehunter5225@yahoo.com wrote:
<div class="message-stanza open">&gt; &gt;
&gt; &gt; In running a script which connects to about 1200 network devices, it
&gt; &gt; got to ~650, and then had the below error when it went to create the
&gt; &gt; next session.  I checked how many Input/Output/Dump files had been
&gt; &gt; written in the director so far and it was just shy of ~2,000 .  I
&gt; &gt; believe the number of open files is a limit of the OS, but as each of
&gt; &gt; the SSH sessions is closed, I would expect the file handles to be
&gt; &gt; closed as well.  Below is the code
&gt; &gt;
&gt; &gt; &#34;problem creating ./XXXX - Test-Input.txt: Too many open files at
&gt; &gt; D:/Strawberry/perl/site/lib/Control/CLI.pm line 869&#34;
&gt; &gt;
&gt; &gt; Below is the code I&#39;m using, &#39;conn&#39; is a method I use that just
&gt; &gt; attempts a Telnet session, if that fails it attempts an SSH
&gt; &gt; connection, but the variable $conn is now the Control::CLI object and
&gt; &gt; I am able to throw all commands at it without issue.  The object is
&gt; &gt; not stored in any way outside of this &#39;for&#39; loop, but is there a
&gt; &gt;  chance the file handlers are not being closed upon &#39;disconnect&#39;?
&gt; &gt; Thank you as always for any insight in to this!
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; for my $ip_address &#40;@ip_list&#41; {
&gt; &gt;     #Attempt to connect to device
&gt; &gt;     if&#40;conn&#40;\$conn, $ip_address, $username, $login_pass,
&gt; &gt; $enable_pass&#41;&#41; {
&gt; &gt;         print &#34;Connection successful to $ip_address.\n&#34;
&gt; &gt;     } else { next; }
&gt; &gt;
&gt; &gt;     #Check if device is already in device list
&gt; &gt;     if&#40;!exists $devices{$ip_address}&#41; {
&gt; &gt;         ...
&gt; &gt;     } else { print &#34;Error: Device&#40;$ip_address&#41; should not exist
&gt; &gt; already\n&#34;; }
&gt; &gt;
&gt; &gt;     #Close SSH/Telnet session
&gt; &gt;     $conn-&gt;disconnect;
&gt; &gt; }
&gt; &gt;
&gt; &gt; J. Wolfert
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1732761" href="/Public/Bug/Display.html?id=118679#txn-1732761">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;14&nbsp;15:58:51&nbsp;2017</span>
    <span class="description">LSTEVENS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1732763" href="/Public/Bug/Display.html?id=118679#txn-1732763">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;14&nbsp;15:58:56&nbsp;2017</span>
    <span class="description">LSTEVENS [...] cpan.org -  Fixed in 2.04 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.317619</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
