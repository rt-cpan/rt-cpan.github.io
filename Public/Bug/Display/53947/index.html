<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #53947 for Test-Pod-Coverage: One Minor Test Issue</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #53947 for Test-Pod-Coverage: One Minor Test Issue</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Test-Pod-Coverage/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Test-Pod-Coverage/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Test-Pod-Coverage/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Test-Pod-Coverage/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Test-Pod-Coverage">Test-Pod-Coverage CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">53947</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Test-Pod-Coverage/Active/">Test-Pod-Coverage</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">NEILB [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
pete.a64 [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-31550-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.08    </td>
  </tr>
  <tr id="CF-31551-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.10    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;23&nbsp;22:37:29&nbsp;2010</span>
    <span class="description">pete.a64 [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> One Minor Test Issue</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">In the Test-Pod-Coverage 1.08 test nosymbols.t there are three tests.
The last 2 tests use the Test Harnesses HARNESS_VERBOSE variable the
first of the test assumes that the environment variable HARNESS_VERBOSE
= 0 or is not defined. The last test sets the local test variable
HARNESS_VERBOSE = 1. Both of these these tests are reading from
Nosymbols.pm which is a Pod containing no symbols.

The problem is if a user has the Perl Test::Harness variable
HARNESS_VERBOSE set to 1 then the NO_VERBOSE test fails:
&#40;Test Ran under Windows NT 5.1 with MinGW 3.4.5 and dmake&#41;

E:\usr\cpan\build\Test\Test-Pod-Coverage-1.08&gt;tst
E:\usr\bin\perl.exe &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34; &#34;test_harness&#40;0,
&#39;blib\lib&#39;, &#39;blib\arch&#39;&#41;&#34; t/*.t
[19:27:31] t/00.load.t .............. # Testing Test::Pod::Coverage 1.08
[19:27:31] t/00.load.t .............. ok      268 ms
[19:27:32] t/all_modules.t .......... ok      342 ms
[19:27:32] t/all_pod_coverage_ok.t .. ok      513 ms
[19:27:32] t/alt_class.t ............ ok      564 ms
[19:27:33] t/nopod.t ................ ok      580 ms
[19:27:34] t/nosymbols.t ............ 1/3
#   Failed test &#39;Handles files with no symbols&#39;
#   at t/nosymbols.t line 16.
# STDERR is:
# # Nosymbols: no public symbols defined
#
# not:
#
# as expected
[19:27:34] t/nosymbols.t ............ Failed 1/3 subtests
[19:27:34] t/parms.t ................ ok      533 ms
[19:27:35] t/pod.t .................. ok      361 ms
[19:27:35] t/privates.t ............. ok      575 ms
[19:27:36] t/self.t ................. ok      497 ms
[19:27:36] t/simple.t ............... ok      580 ms
[19:27:37]

Test Summary Report
-------------------
t/nosymbols.t          &#40;Wstat: 0 Tests: 3 Failed: 1&#41;
  Failed test:  2
Files=11, Tests=23,  6 wallclock secs &#40; 0.19 usr +  0.03 sys =  0.22 CPU&#41;
Result: FAIL
Failed 1/11 test programs. 1/23 subtests failed.
dmake:  Error code 255, while making &#39;test_dynamic&#39;

If I add the local $ENV{HARNESS_VERBOSE} = 0 if defined
$ENV{HARNESS_VERBOSE}; nosymbols.t as shown below we pass no matter what
the users Perl Environment settings are:

NO_VERBOSE: {
    local $ENV{HARNESS_VERBOSE} = 0 if defined $ENV{HARNESS_VERBOSE};
    test_out&#40; &#34;ok 1 - Checking Nosymbols&#34; &#41;;
    pod_coverage_ok&#40; &#34;Nosymbols&#34;, &#34;Checking Nosymbols&#34; &#41;;
    test_test&#40; &#34;Handles files with no symbols&#34; &#41;;
}

This is a minor issue but caught me off-guard for some time and then I
realized what the problem was.

Additionally, the line I added may not be the best alternative for
catching this but it works.

Appreciate any feedback on this small problem and perhaps a minor change
should be added to the next version to catch this issue that may catch
others when testing this module.

Attached is the patched nosymbols.t test file.

Thanks for your assistance.
-- 
Regards,
Pete Armstrong
pete.a64@gmail.com
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> nosymbols.t</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!perl -T

use strict;
use lib &#34;t&#34;;
use Test::More tests =&gt; 3;
use Test::Builder::Tester;

BEGIN {
    use_ok&#40; &#39;Test::Pod::Coverage&#39; &#41;;
}

NO_VERBOSE: {
    local $ENV{HARNESS_VERBOSE} = 0 if defined $ENV{HARNESS_VERBOSE};
    test_out&#40; &#34;ok 1 - Checking Nosymbols&#34; &#41;;
    pod_coverage_ok&#40; &#34;Nosymbols&#34;, &#34;Checking Nosymbols&#34; &#41;;
    test_test&#40; &#34;Handles files with no symbols&#34; &#41;;
}

VERBOSE: {
    local $ENV{HARNESS_VERBOSE} = 1;
    test_out&#40; &#34;ok 1 - Checking Nosymbols&#34; &#41;;
    test_diag&#40; &#34;Nosymbols: no public symbols defined&#34; &#41;;
    pod_coverage_ok&#40; &#34;Nosymbols&#34;, &#34;Checking Nosymbols&#34; &#41;;
    test_test&#40; &#34;Handles files with no symbols&#34; &#41;;
}
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;20&nbsp;17:09:48&nbsp;2014</span>
    <span class="description">NEILB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks -- fixed in 1.10.

Cheers,
Neil
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;20&nbsp;17:09:49&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;20&nbsp;17:09:49&nbsp;2014</span>
    <span class="description">NEILB [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;20&nbsp;17:09:49&nbsp;2014</span>
    <span class="description">NEILB [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;20&nbsp;17:09:49&nbsp;2014</span>
    <span class="description">NEILB [...] cpan.org -  Fixed in 1.10 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
