<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #72471 for DBD-Oracle: Scary warning during install against 11.2 Oracle database server</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #72471 for DBD-Oracle: Scary warning during install against 11.2 Oracle database server</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-Oracle/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-Oracle/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-Oracle/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-Oracle/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/pythian/DBD-Oracle/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-Oracle">DBD-Oracle CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">72471</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-Oracle/Active/">DBD-Oracle</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
cj10 [...] cam.ac.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-10192-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10193-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;16&nbsp;12:40:11&nbsp;2011</span>
    <span class="description">cj10 [...] cam.ac.uk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Scary warning during install against 11.2 Oracle database server</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Versions: Platform: SLES 11 SP 1 on Intel x86-64
          Perl:     5.14.2 64-bit
          Oracle:   11.2.0.3.0 64-bit

While building DBD::Oracle 1.34 against a 64-bit database server
ORACLE_HOME, I received the following message from Makefile.PL.

WARNING: Oracle /oracle/base/orahome/11.2.0.3.0/rdbms/lib/ins_rdbms.mk
doesn&#39;t define a &#39;build&#39; rule.

WARNING: I will now try to guess how to build and link DBD::Oracle for you.
         This kind of guess work is very error prone and Oracle-version
sensitive.
         It is possible that it won&#39;t be supported in future versions of
DBD::Oracle.
         *PLEASE* notify dbi-users about exactly _why_ you had to build
it this way.

Despite this message, an apparently working DBD::Oracle was built.

Experiment shows the same result as above for a 64-bit full client install.
The behaviour with a 32-bit full client install is the subject of RT#72463.

Instant Client builds, of course, work quite differently.

I did not find the warning message particularly useful, not did I learn much
from dbi-users, so did a bit of research.

Two things together cause the warning.

1. The make file Oracle recommend for building OCI applications
for Oracle 11 is $ORACLE_HOME/rdbms/demo/.
See <span class="clickylink"><a target="new" rel="nofollow" href="http://download.oracle.com/doc">http://download.oracle.com/doc</a></span> s/cd/E11882_01/server.112/e108
39/prcmp_cll_int.htm#BABDGIDJ
This file is not shipped as part of either the full client or the server,
so I did not have it at the time of the above events. &#40;This file is now
bundled into the optional &#39;Database Examples&#39;, which can be installed
as a extra in server, or full client ORACLE_HOMEs&#41;.

2. The list of suitable make files in @mk_oci64 &#40;near the top of
find_mkfile&#40;&#41;&#41;
in Makefile.PL includes rdbms/lib/ins_rdbms.mk. This is not a make file
for building OCI applications. I presume it is for installing Oracle server
software.

The warning happens because the chosen make file is useless, and Makefile.PL
has to fall back on other means of working out how to build an OCI
application.
It internally sets the dangerous -b=0 option, and continues.

I solved this problem for myself by installing the &#39;Database Examples&#39; &#40;from
disc 7 of 7&#41; in my server Oracle Home. This caused Makefile.PL to use
the Oracle-recommended make file, and not to hector me.

My first thought was the best way forward would be to remove the useless
rdbms/lib/ins_rdbms.mk from the list in find_mkfile&#40;&#41;. This would cause a
different route through Makefile.PL to lead to a fatal error with a message
like:

        Unable to locate an oracle.mk or other suitable *.mk
        file in your Oracle installation.  &#40;I looked in
        &lt;blah&gt; under &lt;blah&gt;&#41;

        The oracle.mk &#40;or demo_rdbms.mk&#41; file is part of the Oracle
        RDBMS product.  You need to build DBD::Oracle on a
        system which has one of these Oracle components installed.
        &#40;Other *.mk files such as the env_*.mk files will not work.&#41;
        Alternatively you can use Oracle Instant Client.

        In the unlikely event that a suitable *.mk file is installed
        somewhere non-standard you can specify where it is using the -m
option:
                perl Makefile.PL -m /path/to/your.mk

        See the appropriate README file for your OS for more information
and some alternatives.

This message could, in the case of Oracle 11 on Unix, be extended to
advise the user either to use the Instant Client or to install the
Database Examples.

The only reason I have hesitated in producing such a patch is that the
Database Examples take up more than 600 Mb of disk and its installer
does not offer subsets. That is a lot of disk for one file!

What do the maintainers of DBD::Oracle think about this? How serious is
the threat that, &#34;This kind of guess work is very error prone and
Oracle-version sensitive. It is possible that it won&#39;t be supported in
future versions of DBD::Oracle.&#34;?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;16&nbsp;12:56:56&nbsp;2011</span>
    <span class="description">champoux [...] pythian.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #72471] Scary warning during install against 11.2 Oracle database server</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 16 Nov 2011 12:56:44 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-Oracle [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Yanick Champoux &lt;champoux [...] pythian.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 11/16/11 12:40, Charles Jardine via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; What do the maintainers of DBD::Oracle think about this? How serious is
&gt; the threat that, &#34;This kind of guess work is very error prone and
&gt; Oracle-version sensitive. It is possible that it won&#39;t be supported in
&gt; future versions of DBD::Oracle.&#34;?
</div>
     The &#34;error prone&#34; part is the most serious. It&#39;s basically another 
wording for &#34;okay, we didn&#39;t recognize your setting, so we&#39;re going to 
use heuristics, make guesses and generally try the best we can.  Your 
mileage will vary. &#34;

     As for that option going to be removed. Until we find a way to 
ensure DBD::Oracle is going to compile out of the box for all platforms, 
it&#39;s unlikely. :-&#41;

     Of course, now that we know that the files have changes for 11.2 
&#40;yaaaaay....&#41;, we&#39;ll try to tweak the Makefile.PL so that it recognizes 
that new case.

Cheers,
`/anick

-- 
Yanick Champoux, Senior Perl Developer
The Pythian Group - love your data
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.pythian.com">http://www.pythian.com</a></span>

--
Pythian proud winner of Oracle North America Titan Award for Exadata Solution...watch the video on pythian.com
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;16&nbsp;12:56:58&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;17&nbsp;19:40:29&nbsp;2011</span>
    <span class="description">http://prodlife.wordpress.com/ -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Gwen Shapira</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;      Of course, now that we know that the files have changes for 11.2 
&gt; &#40;yaaaaay....&#41;, we&#39;ll try to tweak the Makefile.PL so that it recognizes 
&gt; that new case.
</div>
Not simple.

We should, as the OP said, remove ins_rdbms.mk from the &#34;good makefiles&#34;
list. It is not, and never will be, a good mk file for us to use.

The problem remains that in 11.2 and up, the mk files we need are not in
the standard package and nearly everyone will get the scary message.
It used to indicate a &#34;strange and unusual&#34; problem with the Oracle
installation, but now this error happens on every 11.2 mainstream install.

99% of the time, the &#34;guessing&#34; works quiet well. The only time I
remember an issue was on Solaris with serious mismatches between the
environment in which Perl was build and the environment in which we
attempted building DBD::Oracle - i.e. a bad situation to begin with.

I&#39;d like to: 
1. Making the message significantly less scary. I don&#39;t see a point in
scaring all our users just to give dubiously useful information to the
minority that will run into issues. Oracle will not bring the makefiles
back into the standard install package.

2. Add to the warning and to the troubleshooting guide the information
that the makefiles you are looking for are in a separate installation CD
&#40;that is - a zip file. Why does Oracle still pretends there are
installation CDs?&#41;.

3. Remove the ins_rdbms.mk from the list, as mentioned above.

Does it look like this will solve the issue?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;23&nbsp;07:20:12&nbsp;2011</span>
    <span class="description">cj10 [...] cam.ac.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> cj10 [...] cam.ac.uk</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Nov 17 19:40:29 2011, <span class="clickylink"><a target="new" rel="nofollow" href="http://prodlife.wordpress.com/">http://prodlife.wordpress.com/</a></span> wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt;      Of course, now that we know that the files have changes for 11.2 
&gt; &gt; &#40;yaaaaay....&#41;, we&#39;ll try to tweak the Makefile.PL so that it recognizes 
&gt; &gt; that new case.
</div>&gt; 
&gt; Not simple.
&gt; 
&gt; We should, as the OP said, remove ins_rdbms.mk from the &#34;good makefiles&#34;
&gt; list. It is not, and never will be, a good mk file for us to use.
</div>
The effect of removing ins_rdbms.mk from the list in find_mkfile&#40;&#41;, and
doing nothing else, would be unsatisfactory. find_mkfile&#40;&#41; does not
return if it can&#39;t find a make file.

I have looked more carefully at what happens after find_mkfile&#40;&#41; has
selected ins_rdbms.mk. Between the return of find_mkfile&#40;&#41; and the
generation of the scary message, some useful information is extracted
from the make file.

I have looked at the code in question, and it scares me. I don&#39;t understand
it. I don&#39;t have the time to learn to understand it.

Regrettably, I declare myself out of my depth. Although I have raised the
problem, but I don&#39;t feel competent to advise how it should be fixed. I will
continue to circumvent it be installing the Database Examples.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;03&nbsp;17:00:55&nbsp;2013</span>
    <span class="description">champoux [...] pythian.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">At this point, there is no plan to remove the warning. Things will change once we begin refactoring the Makefile.PL in earnest.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;May&nbsp;03&nbsp;17:00:55&nbsp;2013</span>
    <span class="description">champoux [...] pythian.com -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
