<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #56875 for Filter: Filter::exec segv on __DATA__</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #56875 for Filter: Filter::exec segv on __DATA__</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Filter">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Filter">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Filter">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Filter">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Filter">Filter CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">56875</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Filter">Filter</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
user42 [...] zip.com.au

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-13338-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-13339-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




0001-Fix-tee-and-all-tests-to-work-with-Perl-5.14-and-hig.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1035231/540384/0001-Fix-tee-and-all-tests-to-work-with-Perl-5.14-and-hig.patch">
Thu Feb 09 23:57:03 2012 (2.6k) by RURBAN [...] cpan.org
</a>
</font></li>
</ul>


0002-bump-version-to-1.40.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1035231/540385/0002-bump-version-to-1.40.patch">
Thu Feb 09 23:57:03 2012 (3.1k) by RURBAN [...] cpan.org
</a>
</font></li>
</ul>


foo.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/767479/397115/foo.pl">
Fri Apr 23 21:18:36 2010 (33b) by user42 [...] zip.com.au
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=56875">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-767479" href="/Public/Bug/Display.html?id=56875#txn-767479">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;23&nbsp;21:18:36&nbsp;2010</span>
    <span class="description">user42 [...] zip.com.au -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Filter::exec segv on __DATA__</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 24 Apr 2010 11:16:59 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Filter [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/767479/397114/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/397114">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 392b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">With recent debian i386 packaged perl 5.10.1 the program foo.pl below
gets a segv.

gdb and libc claim it&#39;s a bad pointer to a free&#40;&#41; in an sv_clear&#40;&#41;
somewhere under Perl_parser_free&#40;&#41;.

I&#39;m not sure the __DATA__ token quite works with the way Filter::exec
connects the input up to the subprocess, but I hoped it wouldn&#39;t
segfault, especially when the DATA file handle as such is not used.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/767479/397115/foo.pl">Download foo.pl</a><br />
<span class="downloadcontenttype">text/x-perl 33b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">use Filter::exec &#39;cat&#39;;
__DATA__
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1035231" href="/Public/Bug/Display.html?id=56875#txn-1035231">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;09&nbsp;23:57:03&nbsp;2012</span>
    <span class="description">RURBAN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [PATCH] Filter::exec segv on __DATA__</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> perl5-porters [...] perl.org</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1035231/540383/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/540383">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 272b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Finally I fixed the remaining Filter bugs.
The problems were caused by using the SvIV for the generated SvIO filter stream object.
I replaced that to use the unused IoOFP field, which is only used for printing.

Patches attached.
May I have have co-maint?
-- 
Reini Urban
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0001-Fix-tee-and-all-tests-to-work-with-Perl-5.14-and-hig.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1035231/540384/0001-Fix-tee-and-all-tests-to-work-with-Perl-5.14-and-hig.patch">Download 0001-Fix-tee-and-all-tests-to-work-with-Perl-5.14-and-hig.patch</a><br />
<span class="downloadcontenttype">text/x-diff 2.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From b247d7fdded6a702f4fc9b7c1e6d40b76d517f0d Mon Sep 17 00:00:00 2001
From: Reini Urban &lt;rurban@cpanel.net&gt;
Date: Thu, 9 Feb 2012 22:50:26 -0600
Subject: [PATCH 1/2] Fix tee and all tests to work with Perl 5.14 and higher.

PVIO has no IV field anymore, so abuse now the empty IoOFP,
which is only used for printing, not reading.
Fixes [RT #56875] and more.

Tested for 5.6.2, 5.8.4, 5.8.5, 5.8.8, 5.8.9, 5.10.1, 5.12.4,
5.14.2, 5.15.7
---
 Changes     |    9 +++++++++
 Makefile.PL |    2 +-
 tee/tee.xs  |   20 ++++++++++++++++----
 3 files changed, 26 insertions&#40;+&#41;, 5 deletions&#40;-&#41;

diff --git a/Changes b/Changes
index a3ab719..73d6694 100644
--- a/Changes
+++ b/Changes
@@ -326,3 +326,12 @@
   * Fix decrypt to work with Perl 5.14
     [RT #67656]
 
+1.40 9 Feb 2012 rurban
+----
+
+  * Fix tee and all tests to work with Perl 5.14 and higher.
+    PVIO has no IV field anymore, so abuse the empty IoOFP,
+    which is only used for printing, not reading.
+    Fixes [RT #56875] and more.
+    Tested for 5.6.2, 5.8.4, 5.8.5, 5.8.8, 5.8.9, 5.10.1, 5.12.4,
+    5.14.2, 5.15.7
diff --git a/Makefile.PL b/Makefile.PL
index 0fd41b5..517e203 100644
--- a/Makefile.PL
+++ b/Makefile.PL
@@ -50,7 +50,7 @@ else
 
 WriteMakefile&#40;
 	NAME      =&gt; &#39;Filter&#39;,
-	VERSION   =&gt; &#39;1.39&#39;,
+	VERSION   =&gt; &#39;1.40&#39;,
 	&#39;linkext&#39;   =&gt; {LINKTYPE =&gt; &#39;&#39;},
 	&#39;dist&#39;	  =&gt;	{COMPRESS=&gt;&#39;gzip&#39;, SUFFIX=&gt;&#39;gz&#39;,
 			DIST_DEFAULT =&gt; &#39;tardist&#39;},
diff --git a/tee/tee.xs b/tee/tee.xs
index 0d1b347..3906b17 100644
--- a/tee/tee.xs
+++ b/tee/tee.xs
@@ -16,7 +16,11 @@ static I32
 filter_tee&#40;pTHX_ int idx, SV *buf_sv, int maxlen&#41;
 {
     I32 len;
-    PerlIO * fil = &#40;PerlIO*&#41; SvIV&#40;FILTER_DATA&#40;idx&#41;&#41; ;
+#if PERL_VERSION &gt; 8 || &#40;PERL_VERSION == 8 &#38;&#38; PERL_SUBVERSION &gt; 8&#41;
+    PerlIO * fil = &#40;PerlIO*&#41; IoOFP&#40;FILTER_DATA&#40;idx&#41;&#41;;
+#else
+    PerlIO * fil = &#40;PerlIO*&#41; SvIV&#40;FILTER_DATA&#40;idx&#41;&#41;;
+#endif
     int old_len = SvCUR&#40;buf_sv&#41; ;
  
     if &#40; &#40;len = FILTER_READ&#40;idx+1, buf_sv, maxlen&#41;&#41; &lt;=0 &#41; {
@@ -41,7 +45,11 @@ import&#40;module, filename&#41;
     SV *	module = NO_INIT
     char *	filename
     CODE:
-	SV   * stream = newSViv&#40;0&#41; ;
+#if PERL_VERSION &gt; 8 || &#40;PERL_VERSION == 8 &#38;&#38; PERL_SUBVERSION &gt; 8&#41;
+	SV   * stream = newSV_type&#40;SVt_PVIO&#41;;
+#else
+        SV   * stream = newSViv&#40;0&#41;;
+#endif
 	PerlIO * fil ;
 	char * mode = &#34;wb&#34; ;
 
@@ -58,6 +66,10 @@ import&#40;module, filename&#41;
 	    croak&#40;&#34;Filter::tee - cannot open file &#39;%s&#39;: %s&#34;, 
 			filename, Strerror&#40;errno&#41;&#41; ;
 
-	/* save the tee&#39;d file handle */
-	SvIV_set&#40;stream, &#40;IV&#41;fil&#41; ;
+	/* save the tee&#39;d file handle. */
+#if PERL_VERSION &gt; 8 || &#40;PERL_VERSION == 8 &#38;&#38; PERL_SUBVERSION &gt; 8&#41;
+        IoOFP&#40;stream&#41; = &#40;PerlIO*&#41; fil;
+#else
+	SvIV_set&#40;stream, &#40;PerlIO*&#41; fil&#41;;
+#endif
 
-- 
1.7.7.4

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0002-bump-version-to-1.40.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1035231/540385/0002-bump-version-to-1.40.patch">Download 0002-bump-version-to-1.40.patch</a><br />
<span class="downloadcontenttype">text/x-diff 3.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From c1458d7e2e28c83485272fe8c90fc83de25406cb Mon Sep 17 00:00:00 2001
From: Reini Urban &lt;rurban@cpanel.net&gt;
Date: Thu, 9 Feb 2012 22:52:37 -0600
Subject: [PATCH 2/2] bump version to 1.40

---
 Call/Call.pm       |    2 +-
 Call/Call.xs       |    2 +-
 Exec/Exec.pm       |    2 +-
 META.yml           |    2 +-
 decrypt/decrypt.pm |    2 +-
 lib/Filter/cpp.pm  |    2 +-
 lib/Filter/exec.pm |    2 +-
 lib/Filter/sh.pm   |    2 +-
 tee/tee.pm         |    2 +-
 9 files changed, 9 insertions&#40;+&#41;, 9 deletions&#40;-&#41;

diff --git a/Call/Call.pm b/Call/Call.pm
index 7fe63fa..a502575 100644
--- a/Call/Call.pm
+++ b/Call/Call.pm
@@ -18,7 +18,7 @@ use vars qw&#40;$VERSION @ISA @EXPORT&#41; ;
 
 @ISA = qw&#40;Exporter DynaLoader&#41;;
 @EXPORT = qw&#40; filter_add filter_del filter_read filter_read_exact&#41; ;
-$VERSION = &#34;1.39&#34; ;
+$VERSION = &#34;1.40&#34; ;
 
 sub filter_read_exact&#40;$&#41;
 {
diff --git a/Call/Call.xs b/Call/Call.xs
index 2871190..69f677d 100644
--- a/Call/Call.xs
+++ b/Call/Call.xs
@@ -3,7 +3,7 @@
  * 
  * Author   : Paul Marquess 
  * Date     : 24th April 2011
- * Version  : 1.39
+ * Version  : 1.40
  *
  *    Copyright &#40;c&#41; 1995-2011 Paul Marquess. All rights reserved.
  *       This program is free software; you can redistribute it and/or
diff --git a/Exec/Exec.pm b/Exec/Exec.pm
index 97a3700..fbeca72 100644
--- a/Exec/Exec.pm
+++ b/Exec/Exec.pm
@@ -6,7 +6,7 @@ use strict;
 use warnings;
 use vars qw&#40;@ISA $VERSION&#41; ;
 @ISA = qw&#40;DynaLoader&#41;;
-$VERSION = &#34;1.39&#34; ;
+$VERSION = &#34;1.40&#34; ;
 
 bootstrap Filter::Util::Exec ;
 1 ;
diff --git a/META.yml b/META.yml
index d002bc6..b398ceb 100644
--- a/META.yml
+++ b/META.yml
@@ -1,6 +1,6 @@
 --- #YAML:1.0
 name:               Filter
-version:            1.39
+version:            1.40
 abstract:           Source Filters
 author:
     - Paul Marquess &lt;pmqs@cpan.org&gt;
diff --git a/decrypt/decrypt.pm b/decrypt/decrypt.pm
index 827eb09..a1ec218 100644
--- a/decrypt/decrypt.pm
+++ b/decrypt/decrypt.pm
@@ -6,7 +6,7 @@ use strict;
 use warnings;
 use vars qw&#40;@ISA $VERSION&#41;;
 @ISA = qw&#40;DynaLoader&#41;;
-$VERSION = &#34;1.39&#34; ;
+$VERSION = &#34;1.40&#34; ;
 
 bootstrap Filter::decrypt ;
 1;
diff --git a/lib/Filter/cpp.pm b/lib/Filter/cpp.pm
index ff08d43..6f42714 100644
--- a/lib/Filter/cpp.pm
+++ b/lib/Filter/cpp.pm
@@ -7,7 +7,7 @@ use strict;
 use warnings;
 use vars qw&#40;$VERSION&#41;;
 
-$VERSION = &#39;1.39&#39; ;
+$VERSION = &#39;1.40&#39; ;
 
 my $cpp;
 my $sep;
diff --git a/lib/Filter/exec.pm b/lib/Filter/exec.pm
index 4920b9b..76308db 100644
--- a/lib/Filter/exec.pm
+++ b/lib/Filter/exec.pm
@@ -6,7 +6,7 @@ use strict ;
 use warnings ;
 use vars qw&#40;$VERSION&#41; ;
 
-$VERSION = &#34;1.39&#34; ;
+$VERSION = &#34;1.40&#34; ;
 
 sub import
 {
diff --git a/lib/Filter/sh.pm b/lib/Filter/sh.pm
index c90a41a..314f6bf 100644
--- a/lib/Filter/sh.pm
+++ b/lib/Filter/sh.pm
@@ -4,7 +4,7 @@ use Carp ;
 use strict ;
 use warnings ;
 use vars qw&#40;$VERSION&#41; ;
-$VERSION = &#34;1.39&#34; ;
+$VERSION = &#34;1.40&#34; ;
 
 use Filter::Util::Exec ;
 
diff --git a/tee/tee.pm b/tee/tee.pm
index ed610ef..a0d4cf3 100644
--- a/tee/tee.pm
+++ b/tee/tee.pm
@@ -6,7 +6,7 @@ use strict;
 use warnings;
 use vars qw&#40; @ISA $VERSION&#41;;
 @ISA = qw&#40;DynaLoader&#41;;
-$VERSION = &#34;1.39&#34; ;
+$VERSION = &#34;1.40&#34; ;
 
 bootstrap Filter::tee ;
 
-- 
1.7.7.4

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1035235" href="/Public/Bug/Display.html?id=56875#txn-1035235">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;09&nbsp;23:57:05&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1035796" href="/Public/Bug/Display.html?id=56875#txn-1035796">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;11&nbsp;09:01:49&nbsp;2012</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1035796/540718/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/540718">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 475b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Feb 09 23:57:03 2012, RURBAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Finally I fixed the remaining Filter bugs.
&gt; The problems were caused by using the SvIV for the generated SvIO
&gt; filter stream object.
&gt; I replaced that to use the unused IoOFP field, which is only used for
&gt; printing.
</div>
Good stuff. Can I sugest adding a test to the test harness to check the
patch works?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Patches attached.
&gt; May I have have co-maint?
</div>
Certainly. Not sure how you get given it, but I have no objections.

Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1038342" href="/Public/Bug/Display.html?id=56875#txn-1038342">#</a>      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;15&nbsp;16:38:34&nbsp;2012</span>
    <span class="description">Paul.Marquess [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &lt;perl5-porters [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #56875] [PATCH] Filter::exec segv on __DATA__ </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Feb 2012 21:36:42 -0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Filter [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Paul Marquess&#34; &lt;Paul.Marquess [...] ntlworld.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1038342/542125/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/542125">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 689b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I don&#39;t have any problems with giving Reni co-maint on the Filter
distribution. 

Who is the keeper of the keys that can make this happen?

Paul

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Reini Urban via RT [mailto:bug-Filter@rt.cpan.org] 
Sent: 10 February 2012 04:57
Cc: perl5-porters@perl.org
Subject: [rt.cpan.org #56875] [PATCH] Filter::exec segv on __DATA__ 

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=56875">https://rt.cpan.org/Ticket/Display.html?id=56875</a></span> &gt;

Finally I fixed the remaining Filter bugs.
The problems were caused by using the SvIV for the generated SvIO filter
stream object.
I replaced that to use the unused IoOFP field, which is only used for
printing.

Patches attached.
May I have have co-maint?
-- 
Reini Urban
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1038380" href="/Public/Bug/Display.html?id=56875#txn-1038380">#</a>      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;15&nbsp;17:13:39&nbsp;2012</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> Paul.Marquess [...] ntlworld.com, perl5-porters [...] perl.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1038380/542150/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/542150">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 897b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Feb 15 16:38:34 2012, Paul.Marquess@ntlworld.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I don&#39;t have any problems with giving Reni co-maint on the Filter
&gt; distribution. 
&gt; 
&gt; Who is the keeper of the keys that can make this happen?
&gt; 
&gt; Paul
</div>
You are.  Go to &lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://pause.perl.org/pause/authenquery?ACTION=share_perms">https://pause.perl.org/pause/authenquery?ACTION=share_perms</a></span>&gt;.  Look 
at section 3 on that page.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; -----Original Message-----
&gt; From: Reini Urban via RT [mailto:bug-Filter@rt.cpan.org] 
&gt; Sent: 10 February 2012 04:57
&gt; Cc: perl5-porters@perl.org
&gt; Subject: [rt.cpan.org #56875] [PATCH] Filter::exec segv on __DATA__ 
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=56875">https://rt.cpan.org/Ticket/Display.html?id=56875</a></span> &gt;
&gt; 
&gt; Finally I fixed the remaining Filter bugs.
&gt; The problems were caused by using the SvIV for the generated SvIO filter
&gt; stream object.
&gt; I replaced that to use the unused IoOFP field, which is only used for
&gt; printing.
&gt; 
&gt; Patches attached.
&gt; May I have have co-maint?
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1038396" href="/Public/Bug/Display.html?id=56875#txn-1038396">#</a>      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;15&nbsp;17:27:43&nbsp;2012</span>
    <span class="description">Paul.Marquess [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &lt;perl5-porters [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #56875] Filter::exec segv on __DATA__ </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Feb 2012 22:27:26 -0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Filter [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Paul Marquess&#34; &lt;Paul.Marquess [...] ntlworld.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1038396/542160/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/542160">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Father Chrysostomos via RT [mailto:bug-Filter@rt.cpan.org] 
Sent: 15 February 2012 22:14
Cc: Paul.Marquess@ntlworld.com; perl5-porters@perl.org
Subject: [rt.cpan.org #56875] Filter::exec segv on __DATA__ 

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=56875">https://rt.cpan.org/Ticket/Display.html?id=56875</a></span> &gt;

On Wed Feb 15 16:38:34 2012, Paul.Marquess@ntlworld.com wrote:
<div class="message-stanza open">&gt; I don&#39;t have any problems with giving Reni co-maint on the Filter 
&gt; distribution.
&gt; 
&gt; Who is the keeper of the keys that can make this happen?
&gt; 
&gt; Paul
</div>
You are.  Go to &lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://pause.perl.org/pause/authenquery?ACTION=share_perms">https://pause.perl.org/pause/authenquery?ACTION=share_perms</a></span>&gt;.  Look at section 3 on that page.

<div class="message-stanza open">&gt; 
&gt; -----Original Message-----
&gt; From: Reini Urban via RT [mailto:bug-Filter@rt.cpan.org]
&gt; Sent: 10 February 2012 04:57
&gt; Cc: perl5-porters@perl.org
&gt; Subject: [rt.cpan.org #56875] [PATCH] Filter::exec segv on __DATA__
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=56875">https://rt.cpan.org/Ticket/Display.html?id=56875</a></span> &gt;
&gt; 
&gt; Finally I fixed the remaining Filter bugs.
&gt; The problems were caused by using the SvIV for the generated SvIO 
&gt; filter stream object.
&gt; I replaced that to use the unused IoOFP field, which is only used for 
&gt; printing.
&gt; 
&gt; Patches attached.
&gt; May I have have co-maint?
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1039278" href="/Public/Bug/Display.html?id=56875#txn-1039278">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;17&nbsp;22:56:22&nbsp;2012</span>
    <span class="description">RURBAN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> Paul.Marquess [...] ntlworld.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1039278/542664/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/542664">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 80b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed with 1.40, which I just uploaded.

Thanks for the report.
-- 
Reini Urban
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1039282" href="/Public/Bug/Display.html?id=56875#txn-1039282">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;17&nbsp;22:56:24&nbsp;2012</span>
    <span class="description">RURBAN [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.619691</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
