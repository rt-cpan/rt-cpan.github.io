<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #33438 for CPANPLUS: After &#39;i Term::ReadKey&#39; an immediate &#39;u Term::ReadKey&#39; fails</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #33438 for CPANPLUS: After &#39;i Term::ReadKey&#39; an immediate &#39;u Term::ReadKey&#39; fails</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/CPANPLUS/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/CPANPLUS/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/CPANPLUS/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/CPANPLUS/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/CPANPLUS">CPANPLUS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">33438</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/CPANPLUS/Active/">CPANPLUS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dick.hogaboom [...] gestalt-llc.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-8270-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-8271-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;19&nbsp;14:43:22&nbsp;2008</span>
    <span class="description">dick.hogaboom [...] gestalt-llc.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> After &#39;i Term::ReadKey&#39; an immediate &#39;u Term::ReadKey&#39; fails</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 19 Feb 2008 14:46:14 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-cpanplus [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Dick Hogaboom&#34; &lt;dick.hogaboom [...] gestalt-llc.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sirs:

I&#39;ve installed a local copy of 5.10.0 and set my path to perl as
/home/hogaboom/awsim_rth/perl5/bin/perl.  I want to use cpanp to
install and uninstall CPAN modules to my local 5.10.0 directory.  I used
&#39;s reconfigure&#39; to set the lib directory.  The CPANPLUS::Config::User
file is attached.  But, when I do a successfull install and then try
an immediate uninstall it says the module is not installed&#40;?&#41;.  I
would think that if an install works then an uninstall should work
without having to change anything.  The install/uninstall session
is attached.

Richard A. Hogaboom
Gestalt, LLC
450 Bedford Rd. 02421
Lexington, MA
W781-357-1422
F781-357-1401
dick.hogaboom@gestalt-llc.com
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;20&nbsp;04:41:54&nbsp;2008</span>
    <span class="description">jos [...] dwim.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #33438] After &#39;i Term::ReadKey&#39; an immediate &#39;u Term::ReadKey&#39; fails </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 20 Feb 2008 10:41:19 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPANPLUS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jos I. Boumans&#34; &lt;jos [...] dwim.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On 19 Feb 2008, at 20:43, Dick Hogaboom via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sirs:
&gt;
&gt; I&#39;ve installed a local copy of 5.10.0 and set my path to perl as
&gt; /home/hogaboom/awsim_rth/perl5/bin/perl.  I want to use cpanp to
&gt; install and uninstall CPAN modules to my local 5.10.0 directory.  I  
&gt; used
&gt; &#39;s reconfigure&#39; to set the lib directory.  The CPANPLUS::Config::User
&gt; file is attached.  But, when I do a successfull install and then try
&gt; an immediate uninstall it says the module is not installed&#40;?&#41;.  I
&gt; would think that if an install works then an uninstall should work
&gt; without having to change anything.  The install/uninstall session
&gt; is attached.
</div>
We use ExtUtils::Installed to find out what files are installed
as part of a package. Those are the files we&#39;ll unlink when you
issue the &#39;uninstall&#39; directive.

Apparently, EU::I is not finding the packages installed in your
homedir. You can try yourself to see if this works:

   ExtUtils::Installed-&gt;new-&gt;files&#40; &#39;Term::ReadKey&#39;, &#39;all&#39; &#41;;

If that finds some files, then CPANPLUS shoudl be able to uninstall
the package. If not, your EU::I needs to be educated somehow....


--

   Jos Boumans

   How do I prove I&#39;m not crazy to people who are?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;20&nbsp;04:41:56&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;21&nbsp;07:38:08&nbsp;2008</span>
    <span class="description">dick.hogaboom [...] gestalt-llc.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #33438] After &#39;i Term::ReadKey&#39; an immediate &#39;u Term::ReadKey&#39; fails </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 21 Feb 2008 07:40:23 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-CPANPLUS [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Dick Hogaboom&#34; &lt;dick.hogaboom [...] gestalt-llc.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Jos:

Thanx, I got it to work, BUT:

cpanp u only works when you install to one of the four directories that are in
@INC.  Doing a &#34;perl -e&#39;use X;&#39;&#34; gives:

king:/home/hogaboom[1005] perl -e&#39;use X;&#39;
Can&#39;t locate X.pm in @INC &#40;@INC contains: /home/hogaboom/awsim_rth/perl5/lib/5.10.0/i686-linux /home/hogaboom/awsim_rth/perl5/lib/5.10.0 /home/hogaboom/awsim_rth/perl5/lib/site_perl/5.10.0/i686-linux /home/hogaboom/awsim_rth/perl5/lib/site_perl/5.10.0 .&#41; at -e line 1.
BEGIN failed--compilation aborted at -e line 1.
king:/home/hogaboom[1006]

which shows these dirs.  An i followed by a u will always work and a &#39;use X;&#39; will not need a &#39;use lib &#34;&#34;;&#39; directive.  If the LIB path
is set with &#39;s reconfigure&#39; or &#39;s edit&#39; to NOT one of the above then an i will work and a &#39;use lib &#34;&#34;;&#39; directive will be required
to find it, but the u will not work.  Evidently EU::I starts it&#39;s search for .packlist files from one of the above four paths.

The &#39;s reconfigure&#39; suggests for local module installs a LIB of ~/perl/lib, but this is not one of the four and the u won&#39;t work.  I
suggest modifying the u search to start at whatever the user specifies for LIB&#40;in the CPANPLUS::Config::User file&#41; when the user does
an &#39;s reconfigure&#39;.  Also, for changes to CPANPLUS::Config::User done by &#39;s reconfigure&#39; they take effect immediately, but for changes
to the same file done by &#39;s edit&#39; you have to exit cpanp and restart to take effect.

In the present situation in most cases the limitation to one of the above four paths is OK.  Most people will want to install to the
perl distribution directory.  But in some cases&#40;mine&#41; I want to install to a private dir and use a &#39;use lib &#34;&#34;;&#39; directive and the
system installation of perl.  This allows the sysadmin to install perl to it&#39;s usual location and me to install to a local user dir
which I can bundle with my software.  At present I can use cpanp to install to my local dir, but have to manually delete them.

Anyway, Thanx! for the help!


Richard A. Hogaboom
Gestalt, LLC
450 Bedford Rd. 02421
Lexington, MA
W781-357-1422
F781-357-1401
dick.hogaboom@gestalt-llc.com



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Jos I. Boumans via RT [mailto:bug-CPANPLUS@rt.cpan.org]
Sent: Wed 2/20/2008 4:41 AM
To: Dick Hogaboom
Subject: Re: [rt.cpan.org #33438] After &#39;i Term::ReadKey&#39; an immediate &#39;u Term::ReadKey&#39; fails 
 

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=33438">http://rt.cpan.org/Ticket/Display.html?id=33438</a></span> &gt;


On 19 Feb 2008, at 20:43, Dick Hogaboom via RT wrote:
<div class="message-stanza open">&gt; Sirs:
&gt;
&gt; I&#39;ve installed a local copy of 5.10.0 and set my path to perl as
&gt; /home/hogaboom/awsim_rth/perl5/bin/perl.  I want to use cpanp to
&gt; install and uninstall CPAN modules to my local 5.10.0 directory.  I  
&gt; used
&gt; &#39;s reconfigure&#39; to set the lib directory.  The CPANPLUS::Config::User
&gt; file is attached.  But, when I do a successfull install and then try
&gt; an immediate uninstall it says the module is not installed&#40;?&#41;.  I
&gt; would think that if an install works then an uninstall should work
&gt; without having to change anything.  The install/uninstall session
&gt; is attached.
</div>
We use ExtUtils::Installed to find out what files are installed
as part of a package. Those are the files we&#39;ll unlink when you
issue the &#39;uninstall&#39; directive.

Apparently, EU::I is not finding the packages installed in your
homedir. You can try yourself to see if this works:

   ExtUtils::Installed-&gt;new-&gt;files&#40; &#39;Term::ReadKey&#39;, &#39;all&#39; &#41;;

If that finds some files, then CPANPLUS shoudl be able to uninstall
the package. If not, your EU::I needs to be educated somehow....


--

   Jos Boumans

   How do I prove I&#39;m not crazy to people who are?
</div></div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;22&nbsp;10:50:56&nbsp;2008</span>
    <span class="description">kane [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Feb 21 07:38:08 2008, dick.hogaboom@gestalt-llc.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; an &#39;s reconfigure&#39;.  Also, for changes to CPANPLUS::Config::User done
&gt;    by &#39;s reconfigure&#39; they take effect immediately, but for changes
&gt; to the same file done by &#39;s edit&#39; you have to exit cpanp and restart
&gt;    to take effect.
</div>
It only doesn&#39;t take effect for the &#39;lib&#39; parameter, because it was implemented
slightly different. This is now fixed.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;   At present I can use cpanp to
&gt;    install to my local dir, but have to manually delete them.
</div>
WIth EU::Install 1.42, and a bit of clever directory magic in CPANPLUS, we
are now able to uninstall files that are part of your private installation, provided
you&#39;ve added them to the &#39;lib&#39; directive in the CPANPLUS config.

This will be part of 0.86.

Thanks for reporting,
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;22&nbsp;10:51:05&nbsp;2008</span>
    <span class="description">kane [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
