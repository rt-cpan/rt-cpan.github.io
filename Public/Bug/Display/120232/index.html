<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #120232 for Geo-Proj4: Installation Problem On Windows 10</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #120232 for Geo-Proj4: Installation Problem On Windows 10</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Geo-Proj4/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Geo-Proj4/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Geo-Proj4/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Geo-Proj4/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Geo-Proj4">Geo-Proj4 CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">120232</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Geo-Proj4/Active/">Geo-Proj4</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
JRushworth [...] divestco.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-14510-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-14511-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;13&nbsp;13:46:10&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 13 Feb 2017 11:12:17 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

I&#39;m trying to install Geo::Proj4 on Windows 10 with Strawberry Perl 
5.24.1 and OSGeo4W64.

I set the environment variable FWTOOLS_DIR=C:\OSGeo4W64 and the
perl Makefile.PL command doesn&#39;t complain:

C:\Users\james\perl_modules\Geo-Proj4-1.05&gt;echo %FWTOOLS_DIR%
C:\OSGeo4W64

C:\Users\james\perl_modules\Geo-Proj4-1.05&gt;perl Makefile.PL
Checking if your kit is complete...
Looks good
Generating a dmake-style Makefile
Writing Makefile for Geo::Proj4
Writing MYMETA.yml and MYMETA.json

but the dmake after that generates the attached errors.

 From reading on the internet the:

        Warning: corrupt .drectve at end of def file

message looks like it might be incompatible library files but it doesn&#39;t 
look like that is the problem from the error message.

Any ideas?

ttfn

jr
-- 
James P. Rushworth
Senior Support Analyst

Divestco Geomatics

P: 587-952-8168  www.divestco.com
C: 403-370-0519  300, 520 - 3 Avenue SW
F: 587-952-8372  Calgary, AB  T2P 0R3

This e-mail is intended solely for the person or entity to which it is
addressed and may contain confidential or privileged information.  Any
use of this e-mail by any other person is prohibited.  If you have
received this e-mail in error, please contact the sender. We honour
similar requests relating to the privacy of email communications.
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;13&nbsp;15:09:12&nbsp;2017</span>
    <span class="description">Mark [...] Overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 13 Feb 2017 20:52:36 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;James P. Rushworth via RT&#34; &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;mark [...] overmeer.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">* James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170213 18:46]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Mon Feb 13 13:46:10 2017: Request 120232 was acted upon.
&gt; Transaction: Ticket created by JRushworth@divestco.com
&gt;        Queue: Geo-Proj4
&gt;      Subject: Installation Problem On Windows 10
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
</div>
Hi James,

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Proj4.c:164:0: warning: &#34;NO_ERROR&#34; redefined
&gt;  #define NO_ERROR &#34;no error&#34;
&gt;  ^
&gt; C:/Perl64/c/x86_64-w64-mingw32/include/winerror.h:44:0: note: this is the location of the previous definition
&gt;  #define NO_ERROR __MSABI_LONG&#40;0&#41;
&gt;  ^
</div>
At least, this is a problem: collission of macro names.  I will rename
my definition in the next release.

Please, change NO_ERROR on the two spots in Proj4.xs and try again.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Warning: corrupt .drectve at end of def file
</div>
I never use Windows.  Maybe this helps you
<span class="clickylink"><a target="new" rel="nofollow" href="http://stackoverflow.com/questions/25161814/warning-corrupt-drectve-at-end-of-def-file">http://stackoverflow.com/questions/25161814/warning-corrupt-drectve-at-end-of-def-file</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://stackoverflow.com/questions/23240158/sdl-2-0-linking-error">http://stackoverflow.com/questions/23240158/sdl-2-0-linking-error</a></span>
-- 
Success,
               MarkOv

------------------------------------------------------------------------
drs Mark A.C.J. Overmeer                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;13&nbsp;15:09:13&nbsp;2017</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;13&nbsp;17:46:26&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 13 Feb 2017 15:11:57 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Mark,

On thing I forgot to mention is that your Makefile.PL tries to create a 
symlink which works fine on a computer but never works on Windows.

I just tried installing Geo::Proj4 version 1.05 on my 32bit Windows 7 
machine and when I set FWTOOLS_DIR to Proj4 version 4.8.0 and commented 
the symlink bit out of your Makefile.PL &#40;OSGeo4W includes projects.h&#41; it 
compiled and installed fine.

ttfn

jr


Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;
&gt; * James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170213 18:46]:
<div class="message-stanza open">&gt;&gt; Mon Feb 13 13:46:10 2017: Request 120232 was acted upon.
&gt;&gt; Transaction: Ticket created by JRushworth@divestco.com
&gt;&gt;         Queue: Geo-Proj4
&gt;&gt;       Subject: Installation Problem On Windows 10
&gt;&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
</div>&gt;
&gt; Hi James,
&gt;
<div class="message-stanza open">&gt;&gt; Proj4.c:164:0: warning: &#34;NO_ERROR&#34; redefined
&gt;&gt;   #define NO_ERROR &#34;no error&#34;
&gt;&gt;   ^
&gt;&gt; C:/Perl64/c/x86_64-w64-mingw32/include/winerror.h:44:0: note: this is the location of the previous definition
&gt;&gt;   #define NO_ERROR __MSABI_LONG&#40;0&#41;
&gt;&gt;   ^
</div>&gt;
&gt; At least, this is a problem: collission of macro names.  I will rename
&gt; my definition in the next release.
&gt;
&gt; Please, change NO_ERROR on the two spots in Proj4.xs and try again.
&gt;
<div class="message-stanza open">&gt;&gt; Warning: corrupt .drectve at end of def file
</div>&gt;
&gt; I never use Windows.  Maybe this helps you
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://stackoverflow.com/questions/25161814/warning-corrupt-drectve-at-end-of-def-file">http://stackoverflow.com/questions/25161814/warning-corrupt-drectve-at-end-of-def-file</a></span>
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://stackoverflow.com/questions/23240158/sdl-2-0-linking-error">http://stackoverflow.com/questions/23240158/sdl-2-0-linking-error</a></span>
&gt;
</div>



-- 
James P. Rushworth
Senior Support Analyst

Divestco Geomatics

P: 587-952-8168  www.divestco.com
C: 403-370-0519  300, 520 - 3 Avenue SW
F: 587-952-8372  Calgary, AB  T2P 0R3

This e-mail is intended solely for the person or entity to which it is
addressed and may contain confidential or privileged information.  Any
use of this e-mail by any other person is prohibited.  If you have
received this e-mail in error, please contact the sender. We honour
similar requests relating to the privacy of email communications.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;13&nbsp;18:18:25&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 13 Feb 2017 14:44:05 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Mark,

Once I changed the macro name in Proj4.xs I didn&#39;t get that error message.

I don&#39;t use Windows either I write everything on Linux &#40;Gentoo&#41; but all 
my users run everything on Windows. Installing Geo::Proj4 on Linux is 
easy and seems to be nearly impossible on Windows. The last time I got 
it to install on Windows was version 1.04 on ActiveState Perl 5.14.3 
under Windows 7 &#40;32 bit&#41; using gcc 3.4.5.

I got the same error messages as previously and your links seem to be 
dealing with things way more complicated than what I need.

ttfn

jr

Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;
&gt; * James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170213 18:46]:
<div class="message-stanza open">&gt;&gt; Mon Feb 13 13:46:10 2017: Request 120232 was acted upon.
&gt;&gt; Transaction: Ticket created by JRushworth@divestco.com
&gt;&gt;         Queue: Geo-Proj4
&gt;&gt;       Subject: Installation Problem On Windows 10
&gt;&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
</div>&gt;
&gt; Hi James,
&gt;
<div class="message-stanza open">&gt;&gt; Proj4.c:164:0: warning: &#34;NO_ERROR&#34; redefined
&gt;&gt;   #define NO_ERROR &#34;no error&#34;
&gt;&gt;   ^
&gt;&gt; C:/Perl64/c/x86_64-w64-mingw32/include/winerror.h:44:0: note: this is the location of the previous definition
&gt;&gt;   #define NO_ERROR __MSABI_LONG&#40;0&#41;
&gt;&gt;   ^
</div>&gt;
&gt; At least, this is a problem: collission of macro names.  I will rename
&gt; my definition in the next release.
&gt;
&gt; Please, change NO_ERROR on the two spots in Proj4.xs and try again.
&gt;
<div class="message-stanza open">&gt;&gt; Warning: corrupt .drectve at end of def file
</div>&gt;
&gt; I never use Windows.  Maybe this helps you
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://stackoverflow.com/questions/25161814/warning-corrupt-drectve-at-end-of-def-file">http://stackoverflow.com/questions/25161814/warning-corrupt-drectve-at-end-of-def-file</a></span>
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://stackoverflow.com/questions/23240158/sdl-2-0-linking-error">http://stackoverflow.com/questions/23240158/sdl-2-0-linking-error</a></span>
&gt;
</div>

-- 
James P. Rushworth
Senior Support Analyst

Divestco Geomatics

P: 587-952-8168  www.divestco.com
C: 403-370-0519  300, 520 - 3 Avenue SW
F: 587-952-8372  Calgary, AB  T2P 0R3

This e-mail is intended solely for the person or entity to which it is
addressed and may contain confidential or privileged information.  Any
use of this e-mail by any other person is prohibited.  If you have
received this e-mail in error, please contact the sender. We honour
similar requests relating to the privacy of email communications.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;14&nbsp;03:51:25&nbsp;2017</span>
    <span class="description">Mark [...] Overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 14 Feb 2017 09:50:41 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;James P. Rushworth via RT&#34; &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;mark [...] overmeer.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">* James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170213 23:18]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Geo-Proj4
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt; 
&gt; [...] Installing Geo::Proj4 on Linux is 
&gt; easy and seems to be nearly impossible on Windows. The last time I got 
&gt; it to install on Windows was version 1.04 on ActiveState Perl 5.14.3 
&gt; under Windows 7 &#40;32 bit&#41; using gcc 3.4.5.
&gt; 
&gt; I got the same error messages as previously and your links seem to be 
&gt; dealing with things way more complicated than what I need.
</div>
So, you still didn&#39;t get it to work?  That&#39;s unclear from your message.
-- 
greetz,
               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;14&nbsp;10:48:09&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 14 Feb 2017 08:31:58 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Mark,

I got 1.05 to work on ActiveState Windows 7 32 bit, I haven&#39;t got it to 
work on ActiveState Windows 7 64 bit. On Windows 10 I&#39;m using Strawberry 
Perl 32 and 64 bit and I haven&#39;t got that to work yet. Next I&#39;m going to 
see if I can get 1.05 on ActiveState Windows 7 64 bit to work.

I&#39;m switching to Strawberry Perl and PAR::Packer because ActiveState has 
stopped offering the Perl Development Kit without a ridiculous license 
fee. I use PDK strictly to package executables for Windows so I don&#39;t 
need whatever else their Enterprise and OEM editions provide and 
overcharge for.

Strawberry Perl seems to me to be a better implementation of Perl 
because their aim is to be able to use CPAN as well as any UNIX system 
whereas ActiveState thinks you should be dependant on their PPM system. 
That doesn&#39;t work because not all packages on CPAN are available in the 
PPM system and so you need to use CPAN anyway.

ttfn

jr


Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;
&gt; * James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170213 23:18]:
<div class="message-stanza open">&gt;&gt;         Queue: Geo-Proj4
&gt;&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;&gt;
&gt;&gt; [...] Installing Geo::Proj4 on Linux is
&gt;&gt; easy and seems to be nearly impossible on Windows. The last time I got
&gt;&gt; it to install on Windows was version 1.04 on ActiveState Perl 5.14.3
&gt;&gt; under Windows 7 &#40;32 bit&#41; using gcc 3.4.5.
&gt;&gt;
&gt;&gt; I got the same error messages as previously and your links seem to be
&gt;&gt; dealing with things way more complicated than what I need.
</div>&gt;
&gt; So, you still didn&#39;t get it to work?  That&#39;s unclear from your message.
&gt;
</div>



-- 
James P. Rushworth
Senior Support Analyst

Divestco Geomatics

P: 587-952-8168  www.divestco.com
C: 403-370-0519  300, 520 - 3 Avenue SW
F: 587-952-8372  Calgary, AB  T2P 0R3

This e-mail is intended solely for the person or entity to which it is
addressed and may contain confidential or privileged information.  Any
use of this e-mail by any other person is prohibited.  If you have
received this e-mail in error, please contact the sender. We honour
similar requests relating to the privacy of email communications.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;15&nbsp;12:19:55&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Feb 2017 09:59:31 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Mark,

I&#39;m trying to get Geo::Proj4 version 1.05 to install on my 64 bit 
Windows 7 machine and to that end I built my own working version of PROJ 
4.8.0 using MINGW64 and now I&#39;m getting errors from projects.h &#40;I&#39;m 
using the one included with Geo::Proj4&#41;:

In file included from Proj4.xs:7:0:
  C:\proj4/include/projects.h:161:47: error: conflicting types for &#39;PVALUE&#39;

also see attached.

ttfn

jr


Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;
&gt; * James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170213 23:18]:
<div class="message-stanza open">&gt;&gt;         Queue: Geo-Proj4
&gt;&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;&gt;
&gt;&gt; [...] Installing Geo::Proj4 on Linux is
&gt;&gt; easy and seems to be nearly impossible on Windows. The last time I got
&gt;&gt; it to install on Windows was version 1.04 on ActiveState Perl 5.14.3
&gt;&gt; under Windows 7 &#40;32 bit&#41; using gcc 3.4.5.
&gt;&gt;
&gt;&gt; I got the same error messages as previously and your links seem to be
&gt;&gt; dealing with things way more complicated than what I need.
</div>&gt;
&gt; So, you still didn&#39;t get it to work?  That&#39;s unclear from your message.
&gt;
</div>



-- 
James P. Rushworth
Senior Support Analyst

Divestco Geomatics

P: 587-952-8168  www.divestco.com
C: 403-370-0519  300, 520 - 3 Avenue SW
F: 587-952-8372  Calgary, AB  T2P 0R3

This e-mail is intended solely for the person or entity to which it is
addressed and may contain confidential or privileged information.  Any
use of this e-mail by any other person is prohibited.  If you have
received this e-mail in error, please contact the sender. We honour
similar requests relating to the privacy of email communications.
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;15&nbsp;13:44:49&nbsp;2017</span>
    <span class="description">Mark [...] Overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Feb 2017 19:44:23 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;James P. Rushworth via RT&#34; &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;mark [...] overmeer.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">* James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170215 17:20]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt; 
&gt; C:\proj4/include/projects.h:161:47: error: conflicting types for &#39;PVALUE&#39;
&gt;  typedef union { double  f; int  i; char *s; } PVALUE;
&gt;                                                ^
&gt; C:/mingw64/x86_64-w64-mingw32/include/winreg.h:75:3: note: previous declaration of &#39;PVALUE&#39; was here
&gt;    __MINGW_TYPEDEF_AW&#40;PVALUE&#41;
&gt;    ^
</div>
Two libraries which are not under my control have a namespace collission.
Both define a different meaning for PVALUE.

When I look at proj4 version 4.9.3 &#40;latest&#41;, this is fixed.  Why are
you installing the old 4.8.0?
-- 
greetz,
               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;15&nbsp;13:54:16&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Feb 2017 11:53:48 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Mark,

On my GENTOO box PROJ 4.8.0 is what I have installed so I figured I 
would try building that.

On my 64 bit Windows 7 machine I have the latest OSGeo4W64 which has 
PROJ 9.2.2 which Geo::Proj4 won&#39;t install against, it will install on my 
32 bit Windows 7 machine with the same version of PROJ.

ttfn

jr



Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;
&gt; * James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170215 17:20]:
<div class="message-stanza open">&gt;&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;&gt;
&gt;&gt; C:\proj4/include/projects.h:161:47: error: conflicting types for &#39;PVALUE&#39;
&gt;&gt;   typedef union { double  f; int  i; char *s; } PVALUE;
&gt;&gt;                                                 ^
&gt;&gt; C:/mingw64/x86_64-w64-mingw32/include/winreg.h:75:3: note: previous declaration of &#39;PVALUE&#39; was here
&gt;&gt;     __MINGW_TYPEDEF_AW&#40;PVALUE&#41;
&gt;&gt;     ^
</div>&gt;
&gt; Two libraries which are not under my control have a namespace collission.
&gt; Both define a different meaning for PVALUE.
&gt;
&gt; When I look at proj4 version 4.9.3 &#40;latest&#41;, this is fixed.  Why are
&gt; you installing the old 4.8.0?
&gt;
</div>




-- 
James P. Rushworth
Senior Support Analyst

Divestco Geomatics

P: 587-952-8168  www.divestco.com
C: 403-370-0519  300, 520 - 3 Avenue SW
F: 587-952-8372  Calgary, AB  T2P 0R3

This e-mail is intended solely for the person or entity to which it is
addressed and may contain confidential or privileged information.  Any
use of this e-mail by any other person is prohibited.  If you have
received this e-mail in error, please contact the sender. We honour
similar requests relating to the privacy of email communications.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;15&nbsp;14:42:16&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Feb 2017 12:41:50 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Mark,

I built PROJ 4.9.3 and got same PVALUE error which leads to the:

C:/mingw64/x86_64-w64-mingw32/include/winreg.h:75:3: note: previous 
declaration of &#39;PVALUE&#39; was here
    __MINGW_TYPEDEF_AW&#40;PVALUE&#41;
    ^
In file included from Proj4.xs:7:0:
C:\proj4/include/projects.h:386:7: error: conflicting types for 
&#39;pj_open_lib&#39;
  FILE *pj_open_lib&#40;projCtx, char *, char *&#41;;
        ^
In file included from C:\proj4/include/projects.h:266:0,
                  from Proj4.xs:7:
C:\proj4/include/proj_api.h:148:8: note: previous declaration of 
&#39;pj_open_lib&#39; was here
  PAFile pj_open_lib&#40;projCtx, const char *, const char *&#41;;
         ^
dmake.exe:  Error code 129, while making &#39;Proj4.o&#39;

errors coming from projects.h and proj_api.h.

ttfn

jr


Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;
&gt; * James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170215 17:20]:
<div class="message-stanza open">&gt;&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;&gt;
&gt;&gt; C:\proj4/include/projects.h:161:47: error: conflicting types for &#39;PVALUE&#39;
&gt;&gt;   typedef union { double  f; int  i; char *s; } PVALUE;
&gt;&gt;                                                 ^
&gt;&gt; C:/mingw64/x86_64-w64-mingw32/include/winreg.h:75:3: note: previous declaration of &#39;PVALUE&#39; was here
&gt;&gt;     __MINGW_TYPEDEF_AW&#40;PVALUE&#41;
&gt;&gt;     ^
</div>&gt;
&gt; Two libraries which are not under my control have a namespace collission.
&gt; Both define a different meaning for PVALUE.
&gt;
&gt; When I look at proj4 version 4.9.3 &#40;latest&#41;, this is fixed.  Why are
&gt; you installing the old 4.8.0?
&gt;
</div>




-- 
James P. Rushworth
Senior Support Analyst

Divestco Geomatics

P: 587-952-8168  www.divestco.com
C: 403-370-0519  300, 520 - 3 Avenue SW
F: 587-952-8372  Calgary, AB  T2P 0R3

This e-mail is intended solely for the person or entity to which it is
addressed and may contain confidential or privileged information.  Any
use of this e-mail by any other person is prohibited.  If you have
received this e-mail in error, please contact the sender. We honour
similar requests relating to the privacy of email communications.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;15&nbsp;15:05:57&nbsp;2017</span>
    <span class="description">Mark [...] Overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Feb 2017 21:05:33 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;James P. Rushworth via RT&#34; &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;mark [...] overmeer.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">* James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170215 19:42]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Geo-Proj4
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt; 
&gt; I built PROJ 4.9.3 and got same PVALUE error which leads to the:
&gt; 
&gt; C:/mingw64/x86_64-w64-mingw32/include/winreg.h:75:3: note: previous 
&gt; declaration of &#39;PVALUE&#39; was here
&gt;     __MINGW_TYPEDEF_AW&#40;PVALUE&#41;
&gt;     ^
&gt; In file included from Proj4.xs:7:0:
&gt; C:\proj4/include/projects.h:386:7: error: conflicting types for 
&gt; &#39;pj_open_lib&#39;
&gt;   FILE *pj_open_lib&#40;projCtx, char *, char *&#41;;
&gt;         ^
&gt; In file included from C:\proj4/include/projects.h:266:0,
&gt;                   from Proj4.xs:7:
&gt; C:\proj4/include/proj_api.h:148:8: note: previous declaration of 
&gt; &#39;pj_open_lib&#39; was here
&gt;   PAFile pj_open_lib&#40;projCtx, const char *, const char *&#41;;
&gt;          ^
&gt; dmake.exe:  Error code 129, while making &#39;Proj4.o&#39;
&gt; 
&gt; errors coming from projects.h and proj_api.h.
</div>
I am now very sure that your projects.h is from a different release
as your proj_api.h   I have unpacked the sources of 4.9.3, and did
not find the PVALUE nor the pj_open_lib in the projects.h file.

Maybe you have to configure the library search path by hand.

If I remember correctly, the proj_api.h is only used for internal
functions, and projects.h for programs who link to the libary.
It happens that functions move between the two interfaces.  When
you then use an incompatible set of headers, it breaks.
-- 
Regards,
               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;15&nbsp;16:10:49&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Feb 2017 13:55:28 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Mark,

I copied the projects.h and proj_api.h files from the PROJ 4.9.3 
distribution into the Geo::Proj4-1.05 build directory and
perl Makefile.PL gave me the &#34;mostly harmless&#34; warnings but dmake gave 
me the attached &#34;undefined reference&#34; errors.

ttfn

jr


Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;
&gt; * James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170215 19:42]:
<div class="message-stanza open">&gt;&gt;         Queue: Geo-Proj4
&gt;&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;&gt;
&gt;&gt; I built PROJ 4.9.3 and got same PVALUE error which leads to the:
&gt;&gt;
&gt;&gt; C:/mingw64/x86_64-w64-mingw32/include/winreg.h:75:3: note: previous
&gt;&gt; declaration of &#39;PVALUE&#39; was here
&gt;&gt;      __MINGW_TYPEDEF_AW&#40;PVALUE&#41;
&gt;&gt;      ^
&gt;&gt; In file included from Proj4.xs:7:0:
&gt;&gt; C:\proj4/include/projects.h:386:7: error: conflicting types for
&gt;&gt; &#39;pj_open_lib&#39;
&gt;&gt;    FILE *pj_open_lib&#40;projCtx, char *, char *&#41;;
&gt;&gt;          ^
&gt;&gt; In file included from C:\proj4/include/projects.h:266:0,
&gt;&gt;                    from Proj4.xs:7:
&gt;&gt; C:\proj4/include/proj_api.h:148:8: note: previous declaration of
&gt;&gt; &#39;pj_open_lib&#39; was here
&gt;&gt;    PAFile pj_open_lib&#40;projCtx, const char *, const char *&#41;;
&gt;&gt;           ^
&gt;&gt; dmake.exe:  Error code 129, while making &#39;Proj4.o&#39;
&gt;&gt;
&gt;&gt; errors coming from projects.h and proj_api.h.
</div>&gt;
&gt; I am now very sure that your projects.h is from a different release
&gt; as your proj_api.h   I have unpacked the sources of 4.9.3, and did
&gt; not find the PVALUE nor the pj_open_lib in the projects.h file.
&gt;
&gt; Maybe you have to configure the library search path by hand.
&gt;
&gt; If I remember correctly, the proj_api.h is only used for internal
&gt; functions, and projects.h for programs who link to the libary.
&gt; It happens that functions move between the two interfaces.  When
&gt; you then use an incompatible set of headers, it breaks.
&gt;
</div>




-- 
James P. Rushworth
Senior Support Analyst

Divestco Geomatics

P: 587-952-8168  www.divestco.com
C: 403-370-0519  300, 520 - 3 Avenue SW
F: 587-952-8372  Calgary, AB  T2P 0R3

This e-mail is intended solely for the person or entity to which it is
addressed and may contain confidential or privileged information.  Any
use of this e-mail by any other person is prohibited.  If you have
received this e-mail in error, please contact the sender. We honour
similar requests relating to the privacy of email communications.
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;15&nbsp;16:43:51&nbsp;2017</span>
    <span class="description">Mark [...] Overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Feb 2017 22:43:26 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;James P. Rushworth via RT&#34; &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;mark [...] overmeer.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">* James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170215 21:11]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Geo-Proj4
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt; 
&gt; I copied the projects.h and proj_api.h files from the PROJ 4.9.3 
&gt; distribution into the Geo::Proj4-1.05 build directory and
&gt; perl Makefile.PL gave me the &#34;mostly harmless&#34; warnings but dmake gave 
&gt; me the attached &#34;undefined reference&#34; errors.
</div>
You&#39;re probably linking the wrong library.  No-one around you who
has experiences in compiling and linking?

Look very careful to the lines of the compilation, and match
that with your expectations.
-- 
greetz,
               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;15&nbsp;18:09:17&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Feb 2017 16:08:51 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Mark,

Thanks. Works now.

I should have installed MINGW at C:\mingw instead of C:\mingw64 plus 
installing PROJ by trying to guess what files are required and where 
didn&#39;t help. Problem is copying files all over the place means I&#39;m not 
sure what worked and what I don&#39;t really need. When I get some time I&#39;ll 
make a new clean VM and try it from scratch but for now I&#39;m going to see 
if I can get anywhere with the Strawberry Perl.

ttfn

jr


Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;
&gt; * James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170215 21:11]:
<div class="message-stanza open">&gt;&gt;         Queue: Geo-Proj4
&gt;&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;&gt;
&gt;&gt; I copied the projects.h and proj_api.h files from the PROJ 4.9.3
&gt;&gt; distribution into the Geo::Proj4-1.05 build directory and
&gt;&gt; perl Makefile.PL gave me the &#34;mostly harmless&#34; warnings but dmake gave
&gt;&gt; me the attached &#34;undefined reference&#34; errors.
</div>&gt;
&gt; You&#39;re probably linking the wrong library.  No-one around you who
&gt; has experiences in compiling and linking?
&gt;
&gt; Look very careful to the lines of the compilation, and match
&gt; that with your expectations.
&gt;
</div>



-- 
James P. Rushworth
Senior Support Analyst

Divestco Geomatics

P: 587-952-8168  www.divestco.com
C: 403-370-0519  300, 520 - 3 Avenue SW
F: 587-952-8372  Calgary, AB  T2P 0R3

This e-mail is intended solely for the person or entity to which it is
addressed and may contain confidential or privileged information.  Any
use of this e-mail by any other person is prohibited.  If you have
received this e-mail in error, please contact the sender. We honour
similar requests relating to the privacy of email communications.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;22&nbsp;14:41:47&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 22 Feb 2017 12:39:56 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Geo-Proj4 [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Mark,

I got Geo::Proj4 installed with 64 bit Strawberry Perl on Windows 10 and 
then I ran into a problem that seems to be related to one I ran into 
previously on Linux:

*** Error in `perl&#39;: realloc&#40;&#41;: invalid next size: 0x0000000001784b50 ***

which I used to cure by doing:

export MALLOC_CHECK_=0;

before running the program.

Obviously my program that uses Geo::Proj4 is still experimental. I don&#39;t 
have the same error on Solaris and didn&#39;t have it on Windows ActiveState 
Perl &#40;earlier versions than 5.24.1&#41;

The attached output is from your examples/test_list.pl script from the 
Gen::Proj4 1.05 distribution on Linux.

 From my testing program the error is caused at:

Geo::Proj4-&gt;listTypes&#40;&#41;;

but the very next subroutine call:

Geo::Proj4-&gt;typeInfo&#40;$id&#41;

has no problem.

On the machines I&#39;m trying to run these programs on proj -l has no 
problem running which means I suppose I could use system or readpipe to 
get the output of proj -l as work around.

I&#39;ve tried your script with the same kind of result on Linux 3.12.13, 
4.4.6, 4.9.6, 4.4.26, 4.4.39 &#40;mixture of 32 and 64 bit&#41;.

ttfn

jr


Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;
&gt; * James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170215 21:11]:
<div class="message-stanza open">&gt;&gt;         Queue: Geo-Proj4
&gt;&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;&gt;
&gt;&gt; I copied the projects.h and proj_api.h files from the PROJ 4.9.3
&gt;&gt; distribution into the Geo::Proj4-1.05 build directory and
&gt;&gt; perl Makefile.PL gave me the &#34;mostly harmless&#34; warnings but dmake gave
&gt;&gt; me the attached &#34;undefined reference&#34; errors.
</div>&gt;
&gt; You&#39;re probably linking the wrong library.  No-one around you who
&gt; has experiences in compiling and linking?
&gt;
&gt; Look very careful to the lines of the compilation, and match
&gt; that with your expectations.
&gt;
</div>




-- 
James P. Rushworth
Senior Support Analyst

Divestco Geomatics

P: 587-952-8168  www.divestco.com
C: 403-370-0519  300, 520 - 3 Avenue SW
F: 587-952-8372  Calgary, AB  T2P 0R3

This e-mail is intended solely for the person or entity to which it is
addressed and may contain confidential or privileged information.  Any
use of this e-mail by any other person is prohibited.  If you have
received this e-mail in error, please contact the sender. We honour
similar requests relating to the privacy of email communications.
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;22&nbsp;15:57:48&nbsp;2017</span>
    <span class="description">Mark [...] Overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 22 Feb 2017 21:57:24 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;James P. Rushworth via RT&#34; &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;mark [...] overmeer.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">* James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170222 19:42]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Geo-Proj4
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt; 
&gt; I got Geo::Proj4 installed with 64 bit Strawberry Perl on Windows 10 and 
&gt; then I ran into a problem that seems to be related to one I ran into 
&gt; previously on Linux:
&gt; 
&gt; *** Error in `perl&#39;: realloc&#40;&#41;: invalid next size: 0x0000000001784b50 ***
&gt; which I used to cure by doing:
&gt; export MALLOC_CHECK_=0;
&gt; before running the program.
</div>
Well, it seems that the memory structures get corrupted by an overflow
somewhere.  When you disable the checks, the corruption will probably
not disappear just hidden.  Any part of the program allocates memory.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; From my testing program the error is caused at:
&gt; Geo::Proj4-&gt;listTypes&#40;&#41;;
</div>
The code in Proj.xs is rather straightforward

    for&#40;type = pj_get_list_ref&#40;&#41;; type-&gt;id; type++&#41;
    {   /* same as &#34;proj -l&#34; does */
        if&#40;   strcmp&#40;type-&gt;id,&#34;latlong&#34;&#41;==0
           || strcmp&#40;type-&gt;id,&#34;longlat&#34;&#41;==0
           || strcmp&#40;type-&gt;id,&#34;geocent&#34;&#41;==0
          &#41; continue;

        PUSHs&#40;sv_2mortal&#40;newSVpv&#40;type-&gt;id, 0&#41;&#41;&#41;;
    }

I am not very certain in XS, but I believe this is correct.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;   wag7: Wagner VII
&gt;       Misc Sph
&gt;   : 
&gt;       &#40;has inverse&#41;
&gt;   : 
&gt;       &#40;has inverse&#41;
&gt;   : 
&gt;       &#40;has inverse&#41;
&gt;   : 
&gt;       &#40;has inverse&#41;
</div>
Wow, these are not as expected.  The related code is

  print &#34;\nProjections:\n&#34;;
  my @types = Geo::Proj4-&gt;listTypes;
  foreach my $type &#40;@types&#41;
  {   my $def = Geo::Proj4-&gt;typeInfo&#40;$type&#41;;
      my $descr = $def-&gt;{description} || &#39;&#39;;

What are the @types where it goes wrong?  Maybe typeInfo does
not handle it correctly.  In xs function type_proj4&#40;&#41; I see a
dangerous  *type-&gt;descr    &#40;hum, why is that &#39;*&#39; there?&#41;
-- 
Regards,
               MarkOv

------------------------------------------------------------------------
drs Mark A.C.J. Overmeer                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;22&nbsp;16:32:26&nbsp;2017</span>
    <span class="description">Mark [...] Overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 22 Feb 2017 22:32:04 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;James P. Rushworth via RT&#34; &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;mark [...] overmeer.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">* James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170222 19:42]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; *** Error in `perl&#39;: realloc&#40;&#41;: invalid next size: 0x0000000001784b50 ***
</div>
I love stack checking.  My linux also crashes on the example script, as
it did not years ago.

Rereading the perlguts manpage, I seem to mis EXTEND&#40;&#41; before PUSH in
a number of functions.  Can you try the attached XS file?
-- 
               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;22&nbsp;16:41:44&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 22 Feb 2017 14:07:34 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Mark,

 From my test program the very first call to:

        Geo::Proj4-&gt;listTypes;

causes the realloc&#40;&#41;: invalid next size: error.

I tried the:

        readpipe &#39;proj -l&#39;;

workaround and the program works as before with no errors.

That program is for testing PROJ-4 so it makes lots of different 
subroutine calls to collect and display the parameters available to PROJ-4.

ttfn

jr

Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;
&gt; * James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170222 19:42]:
<div class="message-stanza open">&gt;&gt;         Queue: Geo-Proj4
&gt;&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;&gt;
&gt;&gt; I got Geo::Proj4 installed with 64 bit Strawberry Perl on Windows 10 and
&gt;&gt; then I ran into a problem that seems to be related to one I ran into
&gt;&gt; previously on Linux:
&gt;&gt;
&gt;&gt; *** Error in `perl&#39;: realloc&#40;&#41;: invalid next size: 0x0000000001784b50 ***
&gt;&gt; which I used to cure by doing:
&gt;&gt; export MALLOC_CHECK_=0;
&gt;&gt; before running the program.
</div>&gt;
&gt; Well, it seems that the memory structures get corrupted by an overflow
&gt; somewhere.  When you disable the checks, the corruption will probably
&gt; not disappear just hidden.  Any part of the program allocates memory.
&gt;
<div class="message-stanza open">&gt;&gt;  From my testing program the error is caused at:
&gt;&gt; Geo::Proj4-&gt;listTypes&#40;&#41;;
</div>&gt;
&gt; The code in Proj.xs is rather straightforward
&gt;
&gt;      for&#40;type = pj_get_list_ref&#40;&#41;; type-&gt;id; type++&#41;
&gt;      {   /* same as &#34;proj -l&#34; does */
&gt;          if&#40;   strcmp&#40;type-&gt;id,&#34;latlong&#34;&#41;==0
&gt;             || strcmp&#40;type-&gt;id,&#34;longlat&#34;&#41;==0
&gt;             || strcmp&#40;type-&gt;id,&#34;geocent&#34;&#41;==0
&gt;            &#41; continue;
&gt;
&gt;          PUSHs&#40;sv_2mortal&#40;newSVpv&#40;type-&gt;id, 0&#41;&#41;&#41;;
&gt;      }
&gt;
&gt; I am not very certain in XS, but I believe this is correct.
&gt;
<div class="message-stanza open">&gt;&gt;    wag7: Wagner VII
&gt;&gt;        Misc Sph
&gt;&gt;    :
&gt;&gt;        &#40;has inverse&#41;
&gt;&gt;    :
&gt;&gt;        &#40;has inverse&#41;
&gt;&gt;    :
&gt;&gt;        &#40;has inverse&#41;
&gt;&gt;    :
&gt;&gt;        &#40;has inverse&#41;
</div>&gt;
&gt; Wow, these are not as expected.  The related code is
&gt;
&gt;    print &#34;\nProjections:\n&#34;;
&gt;    my @types = Geo::Proj4-&gt;listTypes;
&gt;    foreach my $type &#40;@types&#41;
&gt;    {   my $def = Geo::Proj4-&gt;typeInfo&#40;$type&#41;;
&gt;        my $descr = $def-&gt;{description} || &#39;&#39;;
&gt;
&gt; What are the @types where it goes wrong?  Maybe typeInfo does
&gt; not handle it correctly.  In xs function type_proj4&#40;&#41; I see a
&gt; dangerous  *type-&gt;descr    &#40;hum, why is that &#39;*&#39; there?&#41;
&gt;
</div>




-- 
James P. Rushworth
Senior Support Analyst

Divestco Geomatics

P: 587-952-8168  www.divestco.com
C: 403-370-0519  300, 520 - 3 Avenue SW
F: 587-952-8372  Calgary, AB  T2P 0R3

This e-mail is intended solely for the person or entity to which it is
addressed and may contain confidential or privileged information.  Any
use of this e-mail by any other person is prohibited.  If you have
received this e-mail in error, please contact the sender. We honour
similar requests relating to the privacy of email communications.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;22&nbsp;16:57:31&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 22 Feb 2017 14:42:31 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Geo-Proj4 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Mark,

I installed Geo::Proj4 using your Proj4.xs file and I no longer get that 
error. I just did it on Linux, I&#39;ll see what happens on Windows &#40; also 
need to install it on a bunch more Linux boxes and create my own 
distribution&#41;.

Thanks.

ttfn

jr


Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;
&gt; * James P. Rushworth via RT &#40;bug-Geo-Proj4@rt.cpan.org&#41; [170222 19:42]:
<div class="message-stanza open">&gt;&gt; *** Error in `perl&#39;: realloc&#40;&#41;: invalid next size: 0x0000000001784b50 ***
</div>&gt;
&gt; I love stack checking.  My linux also crashes on the example script, as
&gt; it did not years ago.
&gt;
&gt; Rereading the perlguts manpage, I seem to mis EXTEND&#40;&#41; before PUSH in
&gt; a number of functions.  Can you try the attached XS file?
&gt;
</div>




-- 
James P. Rushworth
Senior Support Analyst

Divestco Geomatics

P: 587-952-8168  www.divestco.com
C: 403-370-0519  300, 520 - 3 Avenue SW
F: 587-952-8372  Calgary, AB  T2P 0R3

This e-mail is intended solely for the person or entity to which it is
addressed and may contain confidential or privileged information.  Any
use of this e-mail by any other person is prohibited.  If you have
received this e-mail in error, please contact the sender. We honour
similar requests relating to the privacy of email communications.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;23&nbsp;04:28:25&nbsp;2017</span>
    <span class="description">MARKOV [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have released 1.06 to CPAN, which contains all fixes for issues you reported last week.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;23&nbsp;04:28:35&nbsp;2017</span>
    <span class="description">MARKOV [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;23&nbsp;10:43:56&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120232] Installation Problem On Windows 10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 23 Feb 2017 08:35:52 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Geo-Proj4 [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Mark,

Thanks for letting me know.

ttfn

jr


Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120232">https://rt.cpan.org/Ticket/Display.html?id=120232</a></span> &gt;
&gt;
&gt; I have released 1.06 to CPAN, which contains all fixes for issues you reported last week.
&gt;
</div>


-- 
James P. Rushworth
Senior Support Analyst

Divestco Geomatics

P: 587-952-8168  www.divestco.com
C: 403-370-0519  300, 520 - 3 Avenue SW
F: 587-952-8372  Calgary, AB  T2P 0R3

This e-mail is intended solely for the person or entity to which it is
addressed and may contain confidential or privileged information.  Any
use of this e-mail by any other person is prohibited.  If you have
received this e-mail in error, please contact the sender. We honour
similar requests relating to the privacy of email communications.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
