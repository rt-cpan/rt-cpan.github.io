<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #116340 for Config-General: Testing Config::General consumes extreme amounts of memory</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #116340 for Config-General: Testing Config::General consumes extreme amounts of memory</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Config-General/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Config-General/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Config-General/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Config-General/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Config-General">Config-General CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">116340</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Config-General/Active/">Config-General</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
sinan [...] unur.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-7696-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-7697-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;20&nbsp;09:59:09&nbsp;2016</span>
    <span class="description">sinan [...] unur.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Testing Config::General consumes extreme amounts of memory</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 20 Jul 2016 09:58:54 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Config-General [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">With Config-General-2.62, running tests causes memory consumption to
increase first linearly. My 4 GB laptop became unusable pretty
quickly. My 12 GB laptop took a longer time to get there, but did
eventually crash with &#34;Out of Memory&#34; after

cpanm Config::General

exhausted all available physical and virtual memory &#40;total committed
is close to 30 GB&#41;. After that, the computers were unusable for an
extended period of time.

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/9fadc536-6d07-1014-8f72-e9fd0d0b81cc">http://www.cpantesters.org/cpan/report/9fadc536-6d07-1014-8f72-e9fd0d0b81cc</a></span>

I only observe this on 64-bit Windows 10 machines with perl 5.24 built
using MSVC 2013 with Config::General 2.62.

I did not observe it on my ArchLinux install with perl 5.24 and
Config::General 2.62, so it could be a perl bug that only shows up in
a specific set of circumstances, but I decided to first report it here
because I did not have any problems with Config::General 2.61.

Thank you.

-- Sinan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;20&nbsp;10:38:56&nbsp;2016</span>
    <span class="description">sinan [...] unur.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #116340] AutoReply: Testing Config::General consumes extreme amounts of memory</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 20 Jul 2016 10:38:47 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Config-General [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Interestingly, adding:

sub _open {
  #
  # open the config file, or expand a directory or glob or include
  #
  print STDERR &#34;&#39;$_&#39;\n&#34; for @_; sleep 1;

enables the first 52 tests to run without expanding memory use &#40;under
550MB footprint&#41;. The test seems to stall at #52 with:

t\run.t .. 52/78 &#39;Config::General::Interpolated=HASH&#40;0x179464ee770&#41;&#39;
&#39;t/complex.cfg&#39;
&#39;Config::General::Interpolated=HASH&#40;0x179464ee770&#41;&#39;
&#39;complex/n*.cfg&#39;
&#39;t/&#39;
&#39;Config::General::Interpolated=HASH&#40;0x179464ee770&#41;&#39;
&#39;t\complex\n1.cfg&#39;
&#39;Config::General::Interpolated=HASH&#40;0x179464ee770&#41;&#39;
&#39;t\complex\n1.cfg&#39;
&#39;Config::General::Interpolated=HASH&#40;0x179464ee770&#41;&#39;
&#39;t\complex\n1.cfg&#39;
&#39;Config::General::Interpolated=HASH&#40;0x179464ee770&#41;&#39;
&#39;t\complex\n1.cfg&#39;
&#39;Config::General::Interpolated=HASH&#40;0x179464ee770&#41;&#39;
&#39;t\complex\n1.cfg&#39;
&#39;Config::General::Interpolated=HASH&#40;0x179464ee770&#41;&#39;
&#39;t\complex\n1.cfg&#39;
&#39;Config::General::Interpolated=HASH&#40;0x179464ee770&#41;&#39;
&#39;t\complex\n1.cfg&#39;
&#39;Config::General::Interpolated=HASH&#40;0x179464ee770&#41;&#39;
&#39;t\complex\n1.cfg&#39;
&#39;Config::General::Interpolated=HASH&#40;0x179464ee770&#41;&#39;
&#39;t\complex\n1.cfg&#39;
&#39;Config::General::Interpolated=HASH&#40;0x179464ee770&#41;&#39;
&#39;t\complex\n1.cfg&#39;
&#39;Config::General::Interpolated=HASH&#40;0x179464ee770&#41;&#39;
&#39;t\complex\n1.cfg&#39;
&#39;Config::General::Interpolated=HASH&#40;0x179464ee770&#41;&#39;
&#39;t\complex\n1.cfg&#39;
&#39;Config::General::Interpolated=HASH&#40;0x179464ee770&#41;&#39;
&#39;t\complex\n1.cfg&#39;

....
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;20&nbsp;10:47:16&nbsp;2016</span>
    <span class="description">sinan [...] unur.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> bug-Config-General [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #116340] AutoReply: Testing Config::General consumes extreme amounts of memory</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 20 Jul 2016 10:47:07 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">So, we have:

C:\...\Config-General-2.62&gt; dir t\complex\n* /b
n1.cfg
n2.cfg

But, it seems, when `&#39;complex/n*.cfg&#39;` are requested, `_open` gets
stuck loading n1.cfg over and over and over again.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;25&nbsp;05:06:46&nbsp;2016</span>
    <span class="description">tlinden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

unfortunately I can&#39; reproduce, because I don&#39;t have access to such a system.

Attached you&#39;ll find 2 patches:

glob-bsd.patch: please apply this one first on a fresh copy of General.pm and re-run the unit tests.

If it fails &#40;which I suspect&#41;, then apply the patch glob-debug.patch &#40;on a fresh copy of General.pm as well&#41;, re-run the unit tests and post the output.


Thanks,
Tom
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> glob-bsd.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">*** General.pm~	2016-07-25 10:56:41.704657624 +0200
--- General.pm	2016-07-25 10:57:20.914656375 +0200
***************
*** 19,25 ****
  use IO::File;
  use FileHandle;
  use File::Spec::Functions qw&#40;splitpath file_name_is_absolute catfile catpath&#41;;
! use File::Glob qw/:glob/;
  
  
  # on debian with perl &gt; 5.8.4 croak&#40;&#41; doesn&#39;t work anymore without this.
--- 19,25 ----
  use IO::File;
  use FileHandle;
  use File::Spec::Functions qw&#40;splitpath file_name_is_absolute catfile catpath&#41;;
! use File::Glob qw/:bsd_glob/;
  
  
  # on debian with perl &gt; 5.8.4 croak&#40;&#41; doesn&#39;t work anymore without this.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> glob-debug.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">*** General.pm~	2016-07-25 10:56:41.704657624 +0200
--- General.pm	2016-07-25 11:00:37.018657451 +0200
***************
*** 19,25 ****
  use IO::File;
  use FileHandle;
  use File::Spec::Functions qw&#40;splitpath file_name_is_absolute catfile catpath&#41;;
! use File::Glob qw/:glob/;
  
  
  # on debian with perl &gt; 5.8.4 croak&#40;&#41; doesn&#39;t work anymore without this.
--- 19,25 ----
  use IO::File;
  use FileHandle;
  use File::Spec::Functions qw&#40;splitpath file_name_is_absolute catfile catpath&#41;;
! use File::Glob qw/:bsd_glob/;
  
  
  # on debian with perl &gt; 5.8.4 croak&#40;&#41; doesn&#39;t work anymore without this.
***************
*** 470,475 ****
--- 470,478 ----
        }
      }
  
+     # test
+     print STDERR &#34;include: &lt;$_&gt;\n&#34; for @include;
+     die &#34;done\n&#34;;
      # Multiple results or no expansion results &#40;which is fine,
      # include foo/* shouldn&#39;t fail if there isn&#39;t anything matching&#41;
      # rt.cpan.org#79869: local $this-&gt;{IncludeGlob};
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;25&nbsp;05:06:47&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;25&nbsp;10:06:24&nbsp;2016</span>
    <span class="description">sinan [...] unur.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #116340] Testing Config::General consumes extreme amounts of memory</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 25 Jul 2016 10:06:09 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Config-General [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello and thank you for your response.

glob-bsd.patch does not fix the problem, and here is what I with the
glob-debug.patch applied to fresh copy:

C:\Users\sinan\src\Config-General&gt; nmake test

Microsoft &#40;R&#41; Program Maintenance Utility Version 12.00.21005.1
Copyright &#40;C&#41; Microsoft Corporation.  All rights reserved.

        &#34;C:\opt\perl\5.24.0\bin\perl.exe&#34; &#34;-MExtUtils::Command::MM&#34;
&#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches;
test_harness&#40;0, &#39;blib\lib&#39;, &#39;blib\a
rch&#39;&#41;&#34; t\*.t
t\run.t .. 1/78 include: &lt;t/sub1/cfg.sub1c&gt;
include: &lt;t/sub1/cfg.sub1d&gt;
include: &lt;t/sub1/cfg.sub1e&gt;
done
# Looks like you planned 78 tests but ran 26.
# Looks like your test exited with 255 just after 26.
t\run.t .. Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
Failed 52/78 subtests

Test Summary Report
-------------------
t\run.t &#40;Wstat: 65280 Tests: 26 Failed: 0&#41;
  Non-zero exit status: 255
  Parse errors: Bad plan.  You planned 78 tests but ran 26.
Files=1, Tests=26,  1 wallclock secs &#40; 0.08 usr +  0.01 sys =  0.09 CPU&#41;
Result: FAIL
Failed 1/1 test programs. 0/26 subtests failed.
NMAKE : fatal error U1077: &#39;C:\opt\perl\5.24.0\bin\perl.exe&#39; : return
code &#39;0xff&#39;
Stop.


On Mon, Jul 25, 2016 at 5:06 AM, T. Linden via RT
&lt;bug-Config-General@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=116340">https://rt.cpan.org/Ticket/Display.html?id=116340</a></span> &gt;
&gt;
&gt; Hi,
&gt;
&gt; unfortunately I can&#39; reproduce, because I don&#39;t have access to such a system.
&gt;
&gt; Attached you&#39;ll find 2 patches:
&gt;
&gt; glob-bsd.patch: please apply this one first on a fresh copy of General.pm and re-run the unit tests.
&gt;
&gt; If it fails &#40;which I suspect&#41;, then apply the patch glob-debug.patch &#40;on a fresh copy of General.pm as well&#41;, re-run the unit tests and post the output.
&gt;
&gt;
&gt; Thanks,
&gt; Tom
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;25&nbsp;10:57:23&nbsp;2016</span>
    <span class="description">tlinden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Args, my bad. Of course there are other tests before the failing one.

So, please try this: create a script t.pl &#40;or whatever&#41; inside the source directory:


#!/usr/bin/perl
use lib qw&#40;t blib/lib&#41;;
use Config::General;
my $conf47 = new Config::General&#40;
                                 -ConfigFile =&gt; &#34;t/complex.cfg&#34;,
                                 -InterPolateVars =&gt; 1,
                                 -DefaultConfig =&gt; { this =&gt; &#34;that&#34;, default =&gt; &#34;imported&#34; },
                                 -MergeDuplicateBlocks =&gt; 1,
                                 -MergeDuplicateOptions =&gt; 1,
                                 -StrictVars =&gt; 1,
                                 -SplitPolicy =&gt; &#39;custom&#39;,
                                 -SplitDelimiter =&gt; &#39;\s*=\s*&#39;,
                                 -IncludeGlob =&gt; 1,
                                 -IncludeAgain =&gt; 1,
                                 -IncludeRelative =&gt; 1,
                                 -AutoTrue =&gt; 1,
                                 -FlagBits =&gt; { someflags =&gt; { LOCK =&gt; 1, RW =&gt; 2, TAINT =&gt; 3 } },
                                 -StoreDelimiter =&gt; &#39; = &#39;,
                                 -SlashIsDirectory =&gt; 1,
                                 -SaveSorted =&gt; 1
                                &#41;;

execute it with the patched General.pm and post the output.

And - if you could be so kind, then please do the same with the previous version 1.61, which you said works, with the attached patch applied and also send the output.


Thanks,
Tom
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> glob-1.61.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">*** General-2.61~.pm	2016-07-25 16:53:25.645656594 +0200
--- General.pm	2016-07-25 16:53:40.435656425 +0200
***************
*** 442,448 ****
          }
        }
      }
! 
      if &#40;@include == 1&#41; {
        $configfile = $include[0];
      }
--- 442,449 ----
          }
        }
      }
!     print STDERR &#34;include: &lt;$_&gt;\n&#34; for @include;
!     die &#34;done\n&#34;;
      if &#40;@include == 1&#41; {
        $configfile = $include[0];
      }
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;25&nbsp;11:34:11&nbsp;2016</span>
    <span class="description">sinan [...] unur.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #116340] Testing Config::General consumes extreme amounts of memory</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 25 Jul 2016 11:33:52 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Config-General [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">That prints, as one would expect:

C:\Users\sinan\src\Config-General&gt; perl t.pl
include: &lt;t\complex\n1.cfg&gt;
include: &lt;t\complex\n2.cfg&gt;
done

This makes me wonder: Are those filenames eval&#39;ed or interpolated into
a regex pattern on the affected code path?

And, now with Config-General-2.61 &#40;probably too much output, apologies&#41;

C:\Users\sinan\AppData\Local\Temp&gt; cd Config-General-2.61

C:\Users\sinan\AppData\Local\Temp\Config-General-2.61&gt; perl Makefile.PL
Checking if your kit is complete...
Looks good
Generating a nmake-style Makefile
Writing Makefile for Config::General
Writing MYMETA.yml and MYMETA.json

C:\Users\sinan\AppData\Local\Temp\Config-General-2.61&gt; nmake test

Microsoft &#40;R&#41; Program Maintenance Utility Version 12.00.21005.1
Copyright &#40;C&#41; Microsoft Corporation.  All rights reserved.

cp General.pm blib\lib\Config\General.pm
cp General/Interpolated.pm blib\lib\Config\General\Interpolated.pm
cp General/Extended.pm blib\lib\Config\General\Extended.pm
        &#34;C:\opt\perl\5.24.0\bin\perl.exe&#34; &#34;-MExtUtils::Command::MM&#34;
&#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches;
test_harness&#40;0, &#39;blib\lib&#39;, &#39;blib\arch&#39;&#41;&#34; t\*.t
t\run.t .. ok
All tests successful.
Files=1, Tests=75,  1 wallclock secs &#40; 0.06 usr +  0.03 sys =  0.09 CPU&#41;
Result: PASS


Now, with the patch applied:

C:\Users\sinan\AppData\Local\Temp\Config-General-2.61&gt; nmake clean

Microsoft &#40;R&#41; Program Maintenance Utility Version 12.00.21005.1
Copyright &#40;C&#41; Microsoft Corporation.  All rights reserved.

        &#34;C:\opt\perl\5.24.0\bin\perl.exe&#34; -MExtUtils::Command -e rm_f
--  General.bso General.def  General.exp General.x
blib\arch\auto\Config\General\extral
ibs.all  blib\arch\auto\Config\General\extralibs.ld Makefile.aperl
*.lib *.obj  *perl.core MYMETA.json  MYMETA.yml blibdirs.ts  core
core.*perl.*.?  core.[0-9
] core.[0-9][0-9]  core.[0-9][0-9][0-9] core.[0-9][0-9][0-9][0-9]
core.[0-9][0-9][0-9][0-9][0-9] libGeneral.def  mon.out perl  perl.exe
perl.exe  perlmain.c p
m_to_blib  pm_to_blib.ts so_locations  tmon.out
        &#34;C:\opt\perl\5.24.0\bin\perl.exe&#34; -MExtUtils::Command -e rm_rf
--  *.pdb */*~  *~ blib  t/*.out t/test.cfg
        &#34;C:\opt\perl\5.24.0\bin\perl.exe&#34; -MExtUtils::Command -e mv --
Makefile Makefile.old &gt; NUL

C:\Users\sinan\AppData\Local\Temp\Config-General-2.61&gt; patch -p0 &lt;
/Users/sinan/Downloads/glob-1.61.patch
&#40;Stripping trailing CRs from patch; use --binary to disable.&#41;
patching file General.pm

C:\Users\sinan\AppData\Local\Temp\Config-General-2.61&gt; perl Makefile.PL
Checking if your kit is complete...
Looks good
Generating a nmake-style Makefile
Writing Makefile for Config::General
Writing MYMETA.yml and MYMETA.json

C:\Users\sinan\AppData\Local\Temp\Config-General-2.61&gt; nmake test

Microsoft &#40;R&#41; Program Maintenance Utility Version 12.00.21005.1
Copyright &#40;C&#41; Microsoft Corporation.  All rights reserved.

cp General/Extended.pm blib\lib\Config\General\Extended.pm
cp General.pm blib\lib\Config\General.pm
cp General/Interpolated.pm blib\lib\Config\General\Interpolated.pm
        &#34;C:\opt\perl\5.24.0\bin\perl.exe&#34; &#34;-MExtUtils::Command::MM&#34;
&#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches;
test_harness&#40;0, &#39;blib\lib&#39;, &#39;blib\a
rch&#39;&#41;&#34; t\*.t
t\run.t .. 1/75 include: &lt;t/sub1/cfg.sub1c&gt;
include: &lt;t/sub1/cfg.sub1d&gt;
include: &lt;t/sub1/cfg.sub1e&gt;
done
# Looks like you planned 75 tests but ran 26.
# Looks like your test exited with 255 just after 26.
t\run.t .. Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
Failed 49/75 subtests

Test Summary Report
-------------------
t\run.t &#40;Wstat: 65280 Tests: 26 Failed: 0&#41;
  Non-zero exit status: 255
  Parse errors: Bad plan.  You planned 75 tests but ran 26.
Files=1, Tests=26,  1 wallclock secs &#40; 0.03 usr +  0.05 sys =  0.08 CPU&#41;
Result: FAIL
Failed 1/1 test programs. 0/26 subtests failed.
NMAKE : fatal error U1077: &#39;C:\opt\perl\5.24.0\bin\perl.exe&#39; : return
code &#39;0xff&#39;
Stop.

C:\Users\sinan\AppData\Local\Temp\Config-General-2.61&gt; perl t.pl
include: &lt;t\complex\n1.cfg&gt;
include: &lt;t\complex\n2.cfg&gt;
done

*-*-*-*-*

I am sorry, I am not sure if this helps at all. Please let me know
anything else you&#39;d like me to try.

-- Sinan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;25&nbsp;12:19:57&nbsp;2016</span>
    <span class="description">sinan [...] unur.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> bug-Config-General [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #116340] Testing Config::General consumes extreme amounts of memory</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 25 Jul 2016 12:19:43 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here is what happens when I run under the debugger. I never get
control back, and I have to kill the script via Windows&#39; Task Manager.
When I do, I see that we are yo-yo&#39;ing back and forth between two
parts of the code.

1220:     my &#40;$this, $hook, @arguments&#41; = @_;
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1221&#41;:
1221:     if&#40;exists $this-&gt;{Plug}-&gt;{$hook}&#41; {
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1226&#41;:
1226:     return &#40;1, @arguments&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:445&#41;:
445:      return if&#40;!$cont&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:447&#41;:
447:      my&#40;$fh, $configfile&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:449&#41;:
449:      if&#40;$basepath&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:454&#41;:
454:        $configfile = $basefile;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:457&#41;:
457:      if &#40;$this-&gt;{IncludeGlob} and $configfile =~ /[*?\[\{\\]/&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:460&#41;:
460:        my @include = grep { -f $_ } bsd_glob&#40;$configfile,
GLOB_BRACE | GLOB_QUOTE&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:460&#41;:
460:        my @include = grep { -f $_ } bsd_glob&#40;$configfile,
GLOB_BRACE | GLOB_QUOTE&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:463&#41;:
463:        if &#40; !@include &#38;&#38; defined $this-&gt;{ConfigPath} &#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:476&#41;:
476:        for &#40;@include&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:477&#41;:
477:          $this-&gt;_open&#40;$_&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:441&#41;:
441:      my&#40;$this, $basefile, $basepath&#41; = @_;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:442&#41;:
442:      my $cont;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:444&#41;:
444:      &#40;$cont, $basefile, $basepath&#41; = $this-&gt;_hook&#40;&#39;pre_open&#39;,
$basefile, $basepath&#41;;
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1220&#41;:
1220:     my &#40;$this, $hook, @arguments&#41; = @_;
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1221&#41;:
1221:     if&#40;exists $this-&gt;{Plug}-&gt;{$hook}&#41; {
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1226&#41;:
1226:     return &#40;1, @arguments&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:445&#41;:
445:      return if&#40;!$cont&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:447&#41;:
447:      my&#40;$fh, $configfile&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:449&#41;:
449:      if&#40;$basepath&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:454&#41;:
454:        $configfile = $basefile;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:457&#41;:
457:      if &#40;$this-&gt;{IncludeGlob} and $configfile =~ /[*?\[\{\\]/&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:460&#41;:
460:        my @include = grep { -f $_ } bsd_glob&#40;$configfile,
GLOB_BRACE | GLOB_QUOTE&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:460&#41;:
460:        my @include = grep { -f $_ } bsd_glob&#40;$configfile,
GLOB_BRACE | GLOB_QUOTE&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:463&#41;:
463:        if &#40; !@include &#38;&#38; defined $this-&gt;{ConfigPath} &#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:476&#41;:
476:        for &#40;@include&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:477&#41;:
477:          $this-&gt;_open&#40;$_&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:441&#41;:
441:      my&#40;$this, $basefile, $basepath&#41; = @_;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:442&#41;:
442:      my $cont;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:444&#41;:
444:      &#40;$cont, $basefile, $basepath&#41; = $this-&gt;_hook&#40;&#39;pre_open&#39;,
$basefile, $basepath&#41;;
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1220&#41;:
1220:     my &#40;$this, $hook, @arguments&#41; = @_;
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1221&#41;:
1221:     if&#40;exists $this-&gt;{Plug}-&gt;{$hook}&#41; {
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1226&#41;:
1226:     return &#40;1, @arguments&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:445&#41;:
445:      return if&#40;!$cont&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:447&#41;:
447:      my&#40;$fh, $configfile&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:449&#41;:
449:      if&#40;$basepath&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:454&#41;:
454:        $configfile = $basefile;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:457&#41;:
457:      if &#40;$this-&gt;{IncludeGlob} and $configfile =~ /[*?\[\{\\]/&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:460&#41;:
460:        my @include = grep { -f $_ } bsd_glob&#40;$configfile,
GLOB_BRACE | GLOB_QUOTE&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:460&#41;:
460:        my @include = grep { -f $_ } bsd_glob&#40;$configfile,
GLOB_BRACE | GLOB_QUOTE&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:463&#41;:
463:        if &#40; !@include &#38;&#38; defined $this-&gt;{ConfigPath} &#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:476&#41;:
476:        for &#40;@include&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:477&#41;:
477:          $this-&gt;_open&#40;$_&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:441&#41;:
441:      my&#40;$this, $basefile, $basepath&#41; = @_;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:442&#41;:
442:      my $cont;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:444&#41;:
444:      &#40;$cont, $basefile, $basepath&#41; = $this-&gt;_hook&#40;&#39;pre_open&#39;,
$basefile, $basepath&#41;;
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1220&#41;:
1220:     my &#40;$this, $hook, @arguments&#41; = @_;
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1221&#41;:
1221:     if&#40;exists $this-&gt;{Plug}-&gt;{$hook}&#41; {
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1226&#41;:
1226:     return &#40;1, @arguments&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:445&#41;:
445:      return if&#40;!$cont&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:447&#41;:
447:      my&#40;$fh, $configfile&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:449&#41;:
449:      if&#40;$basepath&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:454&#41;:
454:        $configfile = $basefile;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:457&#41;:
457:      if &#40;$this-&gt;{IncludeGlob} and $configfile =~ /[*?\[\{\\]/&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:460&#41;:
460:        my @include = grep { -f $_ } bsd_glob&#40;$configfile,
GLOB_BRACE | GLOB_QUOTE&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:460&#41;:
460:        my @include = grep { -f $_ } bsd_glob&#40;$configfile,
GLOB_BRACE | GLOB_QUOTE&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:463&#41;:
463:        if &#40; !@include &#38;&#38; defined $this-&gt;{ConfigPath} &#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:476&#41;:
476:        for &#40;@include&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:477&#41;:
477:          $this-&gt;_open&#40;$_&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:441&#41;:
441:      my&#40;$this, $basefile, $basepath&#41; = @_;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:442&#41;:
442:      my $cont;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:444&#41;:
444:      &#40;$cont, $basefile, $basepath&#41; = $this-&gt;_hook&#40;&#39;pre_open&#39;,
$basefile, $basepath&#41;;
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1220&#41;:
1220:     my &#40;$this, $hook, @arguments&#41; = @_;
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1221&#41;:
1221:     if&#40;exists $this-&gt;{Plug}-&gt;{$hook}&#41; {
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1226&#41;:
1226:     return &#40;1, @arguments&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:445&#41;:
445:      return if&#40;!$cont&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:447&#41;:
447:      my&#40;$fh, $configfile&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:449&#41;:
449:      if&#40;$basepath&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:454&#41;:
454:        $configfile = $basefile;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:457&#41;:
457:      if &#40;$this-&gt;{IncludeGlob} and $configfile =~ /[*?\[\{\\]/&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:460&#41;:
460:        my @include = grep { -f $_ } bsd_glob&#40;$configfile,
GLOB_BRACE | GLOB_QUOTE&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:460&#41;:
460:        my @include = grep { -f $_ } bsd_glob&#40;$configfile,
GLOB_BRACE | GLOB_QUOTE&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:463&#41;:
463:        if &#40; !@include &#38;&#38; defined $this-&gt;{ConfigPath} &#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:476&#41;:
476:        for &#40;@include&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:477&#41;:
477:          $this-&gt;_open&#40;$_&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:441&#41;:
441:      my&#40;$this, $basefile, $basepath&#41; = @_;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:442&#41;:
442:      my $cont;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:444&#41;:
444:      &#40;$cont, $basefile, $basepath&#41; = $this-&gt;_hook&#40;&#39;pre_open&#39;,
$basefile, $basepath&#41;;
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1220&#41;:
1220:     my &#40;$this, $hook, @arguments&#41; = @_;
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1221&#41;:
1221:     if&#40;exists $this-&gt;{Plug}-&gt;{$hook}&#41; {
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1226&#41;:
1226:     return &#40;1, @arguments&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:445&#41;:
445:      return if&#40;!$cont&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:447&#41;:
447:      my&#40;$fh, $configfile&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:449&#41;:
449:      if&#40;$basepath&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:454&#41;:
454:        $configfile = $basefile;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:457&#41;:
457:      if &#40;$this-&gt;{IncludeGlob} and $configfile =~ /[*?\[\{\\]/&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:460&#41;:
460:        my @include = grep { -f $_ } bsd_glob&#40;$configfile,
GLOB_BRACE | GLOB_QUOTE&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:460&#41;:
460:        my @include = grep { -f $_ } bsd_glob&#40;$configfile,
GLOB_BRACE | GLOB_QUOTE&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:463&#41;:
463:        if &#40; !@include &#38;&#38; defined $this-&gt;{ConfigPath} &#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:476&#41;:
476:        for &#40;@include&#41; {
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:477&#41;:
477:          $this-&gt;_open&#40;$_&#41;;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:441&#41;:
441:      my&#40;$this, $basefile, $basepath&#41; = @_;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:442&#41;:
442:      my $cont;
  DB&lt;1&gt; Config::General::_open&#40;blib\lib/Config/General.pm:444&#41;:
444:      &#40;$cont, $basefile, $basepath&#41; = $this-&gt;_hook&#40;&#39;pre_open&#39;,
$basefile, $basepath&#41;;
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1220&#41;:
1220:     my &#40;$this, $hook, @arguments&#41; = @_;
  DB&lt;1&gt; Config::General::_hook&#40;blib\lib/Config/General.pm:1221&#41;:
1221:     if&#40;exists $this-&gt;{Plug}-&gt;{$hook}&#41; {
  DB&lt;1&gt;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;25&nbsp;12:37:23&nbsp;2016</span>
    <span class="description">sinan [...] unur.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> bug-Config-General [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #116340] Testing Config::General consumes extreme amounts of memory</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 25 Jul 2016 12:37:11 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The docs for File::Glob say:

&#34;Win32 users should use the real slash.&#34;

So, I did this:

Index: General.pm
===================================================================
--- General.pm  &#40;revision 111&#41;
+++ General.pm  &#40;working copy&#41;

 # on debian with perl &gt; 5.8.4 croak&#40;&#41; doesn&#39;t work anymore without this.
@@ -448,7 +448,7 @@

   if&#40;$basepath&#41; {
     # if this doesn&#39;t work we can still try later the global config path to use
-    $configfile = catfile&#40;$basepath, $basefile&#41;;
+    $configfile = &#34;$basepath/$basefile&#34;;
   }
   else {
     $configfile = $basefile;
@@ -464,7 +464,7 @@
       foreach my $dir &#40;@{$this-&gt;{ConfigPath}}&#41; {
         my &#40;$volume, $path, undef&#41; = splitpath&#40;$basefile&#41;;
         if &#40; -d catfile&#40; $dir, $path &#41;  &#41; {
-          push @include, grep { -f $_ } bsd_glob&#40;catfile&#40;$dir,
$basefile&#41;, GLOB_BRACE | GLOB_QUOTE&#41;;
+          push @include, grep { -f $_ } bsd_glob&#40; &#34;$dir/$basefile&#34;,
GLOB_BRACE | GLOB_QUOTE&#41;;
           last;
         }
       }

With that, I get:

C:\Users\sinan\src\Config-General&gt; nmake test

Microsoft &#40;R&#41; Program Maintenance Utility Version 12.00.21005.1
Copyright &#40;C&#41; Microsoft Corporation.  All rights reserved.

        &#34;C:\opt\perl\5.24.0\bin\perl.exe&#34; &#34;-MExtUtils::Command::MM&#34;
&#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches;
test_harness&#40;0, &#39;blib\lib&#39;, &#39;blib\a
rch&#39;&#41;&#34; t\*.t
t\run.t .. ok
All tests successful.
Files=1, Tests=78,  1 wallclock secs &#40; 0.06 usr +  0.03 sys =  0.09 CPU&#41;
Result: PASS

HTH,

-- Sinan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;26&nbsp;06:58:05&nbsp;2016</span>
    <span class="description">tlinden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you very much for the tests! The backslash/slash issue is indeed weird, but I do not understand the underlying mechanics. That is, why does it work with a slash and not with backslash?

Because, whichever way I try on a w32 system, the output is the same in both cases:

  DB&lt;3&gt; $dir = &#34;t&#34;

  DB&lt;4&gt; $basefile = &#34;a*&#34;

  DB&lt;7&gt; p Dumper&#40;bsd_glob&#40;catfile&#40;$dir, $basefile&#41;, GLOB_BRACE | GLOB_QUOTE&#41;&#41;
$VAR1 = &#39;t/a1&#39;;
$VAR2 = &#39;t/a2&#39;;
$VAR3 = &#39;t/a3&#39;;

  DB&lt;11&gt; p Dumper&#40;bsd_glob&#40;&#34;$dir/$basefile&#34;, GLOB_BRACE | GLOB_QUOTE&#41;&#41;;
$VAR1 = &#39;t/a1&#39;;
$VAR2 = &#39;t/a2&#39;;
$VAR3 = &#39;t/a3&#39;;

What I find much more illustrative is the debug output. _open&#40;&#41; seems to keep working on the glob pattern all the time, it keeps calling itself with $_ as parameter which seems not to be the current file, but the glob pattern instead. So - maybe - it is a scoping problem. Or, the glob is not being resolved, but we alread printed @included after the bsd_glob&#40;&#41; call which showed the valid file list.

Therefore, here&#39;s one more test: again apply the attached patch to an unmodified General.pm and retry. If this doesn&#39;t help, I&#39;ll see if I can implement this backslash thing in a portable way, but I&#39;d like to avoid that and to understand the issue.


Thanks in advance,
Tom
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> glob-local.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">*** General.pm~	2016-07-26 12:52:03.631656544 +0200
--- General.pm	2016-07-26 12:56:05.247656524 +0200
***************
*** 457,462 ****
--- 457,463 ----
    if &#40;$this-&gt;{IncludeGlob} and $configfile =~ /[*?\[\{\\]/&#41; {
      # Something like: *.conf &#40;or maybe dir/*.conf&#41; was included; expand it and
      # pass each expansion through this method again.
+     local $_;
      my @include = grep { -f $_ } bsd_glob&#40;$configfile, GLOB_BRACE | GLOB_QUOTE&#41;;
  
      # applied patch by AlexK fixing rt.cpan.org#41030
***************
*** 473,480 ****
      # Multiple results or no expansion results &#40;which is fine,
      # include foo/* shouldn&#39;t fail if there isn&#39;t anything matching&#41;
      # rt.cpan.org#79869: local $this-&gt;{IncludeGlob};
!     for &#40;@include&#41; {
!       $this-&gt;_open&#40;$_&#41;;
      }
      return;
    }
--- 474,482 ----
      # Multiple results or no expansion results &#40;which is fine,
      # include foo/* shouldn&#39;t fail if there isn&#39;t anything matching&#41;
      # rt.cpan.org#79869: local $this-&gt;{IncludeGlob};
!     foreach my $file &#40;@include&#41; {
!       print STDERR &#34;CALLING __open&#40;$file&#41;\n&#34;;
!       $this-&gt;_open&#40;$file&#41;;
      }
      return;
    }
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;26&nbsp;07:13:33&nbsp;2016</span>
    <span class="description">sinan [...] unur.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #116340] Testing Config::General consumes extreme amounts of memory</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 26 Jul 2016 07:13:20 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Config-General [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, Jul 26, 2016 at 6:58 AM, T. Linden via RT
&lt;bug-Config-General@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Therefore, here&#39;s one more test: again apply the attached patch to an unmodified General.pm and retry. If this doesn&#39;t help, I&#39;ll see if I can implement this backslash thing in a portable way, but I&#39;d like to avoid that and to understand the issue.
</div>
I&#39;ll try it as soon as I get a chance which probably will be later today.

I am puzzled by the whole thing as well. By the way, &#34;$dir/$file&#34; is
perfectly fine on Windows for internal calls. The canonical form using
&#34;\&#34; is important when interfacing with the shell or external
utilities.

However, I am not proposing those two small changes as &#34;the&#34; solution,
but, instead offering the fact that tests run to completion when
catfile is replaces as a data point in our quest to find the
underlying problem.

Thank you for your work.

-- Sinan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;26&nbsp;07:49:18&nbsp;2016</span>
    <span class="description">sinan [...] unur.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #116340] Testing Config::General consumes extreme amounts of memory</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 26 Jul 2016 07:49:05 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Config-General [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, Jul 26, 2016 at 6:58 AM, T. Linden via RT
&lt;bug-Config-General@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=116340">https://rt.cpan.org/Ticket/Display.html?id=116340</a></span> &gt;
</div>
...

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Therefore, here&#39;s one more test: again apply the attached patch to an unmodified General.pm and retry.
</div>
Here is what I get with both `nmake test` and by running your short script.

CALLING __open&#40;t\complex\n1.cfg&#41;
... many many times
CALLING __open&#40;t\complex\n1.cfg&#41;
CALLING __open&#40;t\complex\n1.cfg&#41;
...

If I press CTRL-C in time, I get to observe:

...
CALLING __open&#40;t\complex\n1.cfg&#41;
# WARN: Deep recursion on subroutine &#34;Config::General::_open&#34; at
C:\Users\sinan\AppData\Local\Temp\Config-General-2.62\blib\lib/Config/General.pm
line 479, &lt;GEN55&gt; line 28.
CALLING __open&#40;t\complex\n1.cfg&#41;
CALLING __open&#40;t\complex\n1.cfg&#41;
CALLING __open&#40;t\complex\n1.cfg&#41;
...

Curious.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;26&nbsp;08:02:47&nbsp;2016</span>
    <span class="description">tlinden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Oha, here&#39;s the problem:

if &#40;$this-&gt;{IncludeGlob} and $configfile =~ /[*?\[\{\\]/&#41; {

This looks if the configfile contains any glob meta characters as of:

   META CHARACTERS
         \       Quote the next metacharacter
         []      Character class
         {}      Multiple pattern
         *       Match any string of characters
         ?       Match any single character
         ~       User name home directory

Backslash is part of the list and the file, _open&#40;&#41; gets called with, contains multiple backslashes.

So, I need to modify the regex so that it only matches a backslash if it occurs in front of another meta character.

That&#39;s also the reason why it works if you replace catfile with &#34;$dir/$file&#34; :&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;26&nbsp;08:27:55&nbsp;2016</span>
    <span class="description">tlinden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ok, I&#39;d propose this patch to fix the issue. It modifies the regex which looks if a given filename contains a glob. On windows systems it ignores the backslash as meta character unless it occurs in front of other meta characters.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> glob-fix1.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">*** General.pm~	2016-07-26 12:52:03.631656544 +0200
--- General.pm	2016-07-26 14:22:33.120658169 +0200
***************
*** 454,462 ****
      $configfile = $basefile;
    }
  
!   if &#40;$this-&gt;{IncludeGlob} and $configfile =~ /[*?\[\{\\]/&#41; {
      # Something like: *.conf &#40;or maybe dir/*.conf&#41; was included; expand it and
      # pass each expansion through this method again.
      my @include = grep { -f $_ } bsd_glob&#40;$configfile, GLOB_BRACE | GLOB_QUOTE&#41;;
  
      # applied patch by AlexK fixing rt.cpan.org#41030
--- 454,468 ----
      $configfile = $basefile;
    }
  
!   my $glob = qr/[*?\[\{\\]/;
!   if &#40;$^O =~ /win/i&#41; {
!     $glob = qr/&#40;\\[*?\[\{\\]|[*?\[\{]&#41;/;
!   }
! 
!   if &#40;$this-&gt;{IncludeGlob} and $configfile =~ /$glob/&#41; {
      # Something like: *.conf &#40;or maybe dir/*.conf&#41; was included; expand it and
      # pass each expansion through this method again.
+     local $_;
      my @include = grep { -f $_ } bsd_glob&#40;$configfile, GLOB_BRACE | GLOB_QUOTE&#41;;
  
      # applied patch by AlexK fixing rt.cpan.org#41030
***************
*** 473,480 ****
      # Multiple results or no expansion results &#40;which is fine,
      # include foo/* shouldn&#39;t fail if there isn&#39;t anything matching&#41;
      # rt.cpan.org#79869: local $this-&gt;{IncludeGlob};
!     for &#40;@include&#41; {
!       $this-&gt;_open&#40;$_&#41;;
      }
      return;
    }
--- 479,487 ----
      # Multiple results or no expansion results &#40;which is fine,
      # include foo/* shouldn&#39;t fail if there isn&#39;t anything matching&#41;
      # rt.cpan.org#79869: local $this-&gt;{IncludeGlob};
!     foreach my $file &#40;@include&#41; {
!       print STDERR &#34;CALLING __open&#40;$file&#41;\n&#34;;
!       $this-&gt;_open&#40;$file&#41;;
      }
      return;
    }
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;26&nbsp;08:48:08&nbsp;2016</span>
    <span class="description">sinan [...] unur.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #116340] Testing Config::General consumes extreme amounts of memory</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 26 Jul 2016 08:47:55 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Config-General [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you. I missed that pattern because ... Let&#39;s blame syntax-highlighting ;-&#41;

In any case, I won&#39;t be in front of a Windows system for a while, but
I&#39;ll check out your patch the moment I get a chance.

-- Sinan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;26&nbsp;12:52:22&nbsp;2016</span>
    <span class="description">sinan [...] unur.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> bug-Config-General [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #116340] Testing Config::General consumes extreme amounts of memory</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 26 Jul 2016 12:52:09 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">It works!

C:\Users\sinan\AppData\Local\Temp&gt; cd Config-General-2.62

C:\Users\sinan\AppData\Local\Temp\Config-General-2.62&gt; copy
&#34;..\..\..\..\Downloads\glob-fix1.patch&#34;
        1 file&#40;s&#41; copied.

C:\Users\sinan\AppData\Local\Temp\Config-General-2.62&gt; patch -p0 &lt;
glob-fix1.patch
&#40;Stripping trailing CRs from patch; use --binary to disable.&#41;
patching file General.pm

C:\Users\sinan\AppData\Local\Temp\Config-General-2.62&gt; perl Makefile.PL
Checking if your kit is complete...
Looks good
Generating a nmake-style Makefile
Writing Makefile for Config::General
Writing MYMETA.yml and MYMETA.json

C:\Users\sinan\AppData\Local\Temp\Config-General-2.62&gt; nmake test

Microsoft &#40;R&#41; Program Maintenance Utility Version 12.00.21005.1
Copyright &#40;C&#41; Microsoft Corporation.  All rights reserved.

cp General.pm blib\lib\Config\General.pm
cp General/Interpolated.pm blib\lib\Config\General\Interpolated.pm
cp General/Extended.pm blib\lib\Config\General\Extended.pm
        &#34;C:\opt\perl\5.24.0\bin\perl.exe&#34; &#34;-MExtUtils::Command::MM&#34;
&#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches;
test_harness&#40;0, &#39;blib\lib&#39;, &#39;blib\a
rch&#39;&#41;&#34; t\*.t
t\run.t .. 11/78
CALLING __open&#40;t/sub1/cfg.sub1c&#41;
CALLING __open&#40;t/sub1/cfg.sub1d&#41;
CALLING __open&#40;t/sub1/cfg.sub1e&#41;
CALLING __open&#40;t/included.conf&#41;
CALLING __open&#40;t\complex\n1.cfg&#41;
CALLING __open&#40;t\complex\n2.cfg&#41;
t\run.t .. ok
All tests successful.
Files=1, Tests=78,  1 wallclock secs &#40; 0.08 usr +  0.01 sys =  0.09 CPU&#41;
Result: PASS
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;29&nbsp;02:13:13&nbsp;2016</span>
    <span class="description">tlinden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed in 2.63. Thanks again for reporting and your support to track it down!


best regards,
Tom
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;29&nbsp;02:13:13&nbsp;2016</span>
    <span class="description">tlinden [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;29&nbsp;10:35:22&nbsp;2016</span>
    <span class="description">sinan [...] unur.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #116340] Testing Config::General consumes extreme amounts of memory</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 29 Jul 2016 10:35:11 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Config-General [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur&#34; &lt;sinan [...] unur.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, Jul 29, 2016 at 2:13 AM, T. Linden via RT
&lt;bug-Config-General@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=116340">https://rt.cpan.org/Ticket/Display.html?id=116340</a></span> &gt;
&gt;
&gt; Fixed in 2.63. Thanks again for reporting and your support to track it down!
</div>
Thank you very much for your work.

Have a good weekend.

-- Sinan
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
