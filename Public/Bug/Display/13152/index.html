<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #13152 for Image-Epeg: various small fixes patched</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #13152 for Image-Epeg: various small fixes patched</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Image-Epeg/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Image-Epeg/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Image-Epeg/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Image-Epeg/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Image-Epeg">Image-Epeg CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">13152</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Image-Epeg/Active/">Image-Epeg</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
qef [...] ungwe.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-16620-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.06    </td>
  </tr>
  <tr id="CF-16621-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;08&nbsp;13:26:02&nbsp;2005</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> various small fixes patched</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Thanks for this module, it&#39;s exactly what I want :-&#41;

I&#39;ve attached a patch against Image::Epeg 0.06 which fixes some build problems and other things.  It now builds out of the box for me on Debian unstable and Debian woody.

The patch makes the following fixes &#40;listed here in the order they can be found in the patch&#41;:

Epeg.pm: minor code simplification &#40;no change to behaviour&#41;, and a correction to the POD NAME section to prevent a warning from MakeMaker.

Epeg.xs: removed indentation from before preprocessor directives, because that&#39;s not strictly allowed in ANSI C &#40;although compilers tend to ignore it&#41;, and removed path from the Epeg.h include.  Instead of the path we rely on the right compiler directives being found from the epeg-config program in Makefile.PL.

Makefile.PL: run epeg-config to find the right include and library options to use, rather than hard-coding them.

t/epeg_basic.t: make a test slightly more strict, just in case, and avoid running &#39;rm&#39; in case someone tries to build this on Windows or something.

hope that helps,
   qef
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -ur Epeg.orig/Epeg.pm Epeg/Epeg.pm
--- Epeg.orig/Epeg.pm	2005-05-27 00:39:06.000000000 +0100
+++ Epeg/Epeg.pm	2005-06-08 17:40:24.637196106 +0100
@@ -148,7 +148,7 @@
 {
 	my $self = shift;
 	my $data = Image::Epeg::_epeg_get_data&#40; $self-&gt;img &#41;;
-	return defined $data ? $data : undef;
+	return $data;
 }
 
 
@@ -168,7 +168,7 @@
 
 =head1 NAME
 
-Epeg - Thumbnail jpegs at lightning speed
+Image::Epeg - Thumbnail jpegs at lightning speed
 
 =head1 SYNOPSIS
 
diff -ur Epeg.orig/Epeg.xs Epeg/Epeg.xs
--- Epeg.orig/Epeg.xs	2005-04-27 18:30:14.000000000 +0100
+++ Epeg/Epeg.xs	2005-06-08 17:57:57.252919748 +0100
@@ -1,11 +1,11 @@
 #ifdef __cplusplus
 extern &#34;C&#34;
 {
-	#endif
-	#include &#34;EXTERN.h&#34;
-	#include &#34;perl.h&#34;
-	#include &#34;XSUB.h&#34;
-	#ifdef __cplusplus
+#endif
+#include &#34;EXTERN.h&#34;
+#include &#34;perl.h&#34;
+#include &#34;XSUB.h&#34;
+#ifdef __cplusplus
 }
 #endif
 
@@ -17,7 +17,7 @@
 //	Epeg Headers
 //
 
-#include &lt;/usr/local/include/Epeg.h&gt;
+#include &lt;Epeg.h&gt;
 
 
 static int
diff -ur Epeg.orig/Makefile.PL Epeg/Makefile.PL
--- Epeg.orig/Makefile.PL	2005-04-17 06:13:53.000000000 +0100
+++ Epeg/Makefile.PL	2005-06-08 17:21:41.683698393 +0100
@@ -1,6 +1,9 @@
+use warnings;
+use strict;
 use ExtUtils::MakeMaker;
 
-$ROOT       = &#34;/usr/local&#34;;
+my $cflags = qx&#40;epeg-config --cflags&#41;;
+my $libs = qx&#40;epeg-config --libs&#41;;
 
 WriteMakefile
 &#40;
@@ -11,7 +14,7 @@
 		&#40;ABSTRACT_FROM	=&gt; &#39;Epeg.pm&#39;,
 		AUTHOR			=&gt; &#39;Michael Curtis &#40;mcurtis@yahoo-inc.com&#41;&#39;&#41; : &#40;&#41;&#41;,
 	&#39;LIBS&#39;			=&gt; [&#39;&#39;],
-	&#39;LIBS&#39;			=&gt; &#34;-L$ROOT/lib -lepeg&#34; . &#34;$LDLIBS&#34;,
+	&#39;LIBS&#39;			=&gt; $libs,
 	&#39;DEFINE&#39;		=&gt; &#39;&#39;,
-	&#39;INC&#39;			=&gt; &#39;&#39;
+	&#39;INC&#39;			=&gt; $cflags,
 &#41;;
diff -ur Epeg.orig/t/epeg_basic.t Epeg/t/epeg_basic.t
--- Epeg.orig/t/epeg_basic.t	2005-05-03 19:33:05.000000000 +0100
+++ Epeg/t/epeg_basic.t	2005-06-08 17:49:20.601348436 +0100
@@ -16,7 +16,7 @@
 
 # Test 1: new&#40; [reference] &#41;
 my $epeg = new Image::Epeg&#40; \$f &#41;;
-print defined $epeg ? &#34;ok\n&#34; : &#34;nok\n&#34;;
+print ref $epeg &#38;&#38; ref $epeg eq &#39;Image::Epeg&#39; ? &#34;ok\n&#34; : &#34;nok\n&#34;;
 
 # Test 2: get_width&#40;&#41;
 print $epeg-&gt;get_width&#40;&#41; == 640 ? &#34;ok\n&#34; : &#34;nok\n&#34;;
@@ -54,6 +54,6 @@
 my $data = $epeg-&gt;get_data&#40;&#41;;
 print $data &#38;&#38; length&#40;$data&#41; == 1083 ? &#34;ok\n&#34; : &#34;nok\n&#34;;
 
-system &#34;rm t/test2.jpg&#34;;
+unlink &#34;t/test2.jpg&#34; or die &#34;error deleting output: $!&#34;;
 
 exit 0;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;19&nbsp;05:10:42&nbsp;2009</span>
    <span class="description">tokuhirom+cpan [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The issue is resolved by 0.08, I hope.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;19&nbsp;05:10:46&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;19&nbsp;05:10:49&nbsp;2009</span>
    <span class="description">tokuhirom+cpan [...] gmail.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
