<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #38385 for WWW-Myspace: send_friend_request&#40;&#41; brokenness</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #38385 for WWW-Myspace: send_friend_request&#40;&#41; brokenness</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=WWW-Myspace">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=WWW-Myspace">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=WWW-Myspace">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=WWW-Myspace">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/WWW-Myspace">WWW-Myspace CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">38385</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=WWW-Myspace">WWW-Myspace</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
john [...] deedevelopments.com

<br />
jworkman [...] pimpworks.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-38014-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.82    </td>
  </tr>
  <tr id="CF-38015-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.84    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Myspace.pm.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/496578/245815/Myspace.pm.patch">
Tue Aug 12 07:45:56 2008 (2.4k) by jworkman [...] pimpworks.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=38385">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-496094" href="/Public/Bug/Display.html?id=38385#txn-496094">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;11&nbsp;00:05:43&nbsp;2008</span>
    <span class="description">john [...] deedevelopments.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> msend_friend_request broke aswell?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 11 Aug 2008 12:04:55 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-WWW-Myspace [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Hale &lt;john [...] deedevelopments.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/496094/245586/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/245586">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am doing the following code:

my @friends;

@friends = $myspace-&gt;friends_from_profile&#40;&#39;157631228&#39;&#41;;
warn $myspace-&gt;error if &#40; $myspace-&gt;error &#41;;

  # Send a bunch of friend requests
  my @posted = &#40;&#41;;
  my @failed = &#40;&#41;;
  foreach my $friend &#40; @friends &#41; {
    print &#34;Posting to $friend: &#34;;

         my $status = $myspace-&gt;send_friend_request&#40; $friend &#41;;

    if &#40; $status =~ /^P/ &#41; {
        print &#34;Succeeded\n&#34;;
        push &#40; @posted, $friend &#41;;
    } else {
        print &#34;Failed with code $status\n&#34;;
        push &#40; @failed, $friend &#41;;
    }

    # Stop if we got a CAPTCHA request.
    last if $status eq &#39;FC&#39;;
  }
  # Do what you want with @posted and @failed.


print &#34;Accpted Friends\n&#34;;
print @posted;





  Posting to 107240945: Failed with code FN
No Add to Friends button on form!
Posting to 112723355: Failed with code F
No Add to Friends button on form!
Posting to 113369715: Failed with code F
No Add to Friends button on form!
Posting to 11598097: Failed with code F
Posting to 117992667: Failed with code FA
No Add to Friends button on form!
Posting to 118653445: Failed with code F
No Add to Friends button on form!
Posting to 122950073: Failed with code F
No Add to Friends button on form!
Posting to 125398943: Failed with code F
No Add to Friends button on form!
Posting to 125673768: Failed with code F
No Add to Friends button on form!
Posting to 132314966: Failed with code F
No Add to Friends button on form!
Posting to 132630082: Failed with code F
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-496451" href="/Public/Bug/Display.html?id=38385#txn-496451">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;11&nbsp;21:13:25&nbsp;2008</span>
    <span class="description">steven [...] pyro.eu.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> send_friend_request broke aswell?</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/496451/245763/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/245763">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 623b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Thanks for reporting this.  Some changes at Myspace had broken the
function completely.  It seems there are no tests for this function
either, so it wasn&#39;t immediately obvious that something was wrong.

I committed a fix to SVN as R-611 and I&#39;ve manually verified that it now
sends a friend request.  It also sends the note/message along with
request.  Please let us know if you notice any other problems with the
function.

I&#39;m unable to tell right now if the correct status codes are returned in
response to various eventualities &#40;like receiving a CAPTCHA&#41;.  Hopefully
some tests can be written soon.

Thanks again.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-496452" href="/Public/Bug/Display.html?id=38385#txn-496452">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;11&nbsp;21:13:36&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-496455" href="/Public/Bug/Display.html?id=38385#txn-496455">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;11&nbsp;21:13:42&nbsp;2008</span>
    <span class="description">steven [...] pyro.eu.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-496503" href="/Public/Bug/Display.html?id=38385#txn-496503">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;12&nbsp;01:13:53&nbsp;2008</span>
    <span class="description">john [...] deedevelopments.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #38385] send_friend_request broke aswell? </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 12 Aug 2008 13:13:04 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-WWW-Myspace [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Hale &lt;john [...] deedevelopments.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/496503/245771/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/245771">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Seems to work a bit more now :&#41;

osting to 148357100: Failed with code FN
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Parsing of undecoded UTF-8 will give garbage when decoding entities  
at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
PullParser.pm line 83.
Posting to 148670411: Failed with code FN
Posting to 149009045: Failed with code FU
Posting to 151318023: Failed with code FU
Posting to 153440060: Failed with code FU
Posting to 155725926: Failed with code FU
Posting to 156442553: Failed with code FU
Posting to 157631228: Failed with code FU
Posting to 157633604: Failed with code FU


Getting alot of these failed codes.



On Aug 12, 2008, at 9:13 AM, Steven Chamberlain via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=38385">http://rt.cpan.org/Ticket/Display.html?id=38385</a></span> &gt;
&gt;
&gt; Hi,
&gt;
&gt; Thanks for reporting this.  Some changes at Myspace had broken the
&gt; function completely.  It seems there are no tests for this function
&gt; either, so it wasn&#39;t immediately obvious that something was wrong.
&gt;
&gt; I committed a fix to SVN as R-611 and I&#39;ve manually verified that it  
&gt; now
&gt; sends a friend request.  It also sends the note/message along with
&gt; request.  Please let us know if you notice any other problems with the
&gt; function.
&gt;
&gt; I&#39;m unable to tell right now if the correct status codes are  
&gt; returned in
&gt; response to various eventualities &#40;like receiving a CAPTCHA&#41;.   
&gt; Hopefully
&gt; some tests can be written soon.
&gt;
&gt; Thanks again.
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-496504" href="/Public/Bug/Display.html?id=38385#txn-496504">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;12&nbsp;01:13:59&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-496578" href="/Public/Bug/Display.html?id=38385#txn-496578">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;12&nbsp;07:45:56&nbsp;2008</span>
    <span class="description">jworkman [...] pimpworks.org - Ticket #38418:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> send_friend_request&#40;&#41; brokenness</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/496578/245812/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/245812">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 324b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Myspace has made several changes to their site that breaks Myspace.pm.
Among them:  

1.  They changed the name of the form button to submit a friend request.
2.  They changed the confirmation string when a friend request has been
successfully sent.

I have attached a patch against SVN which aims to fix these two problems.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Myspace.pm.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/496578/245815/Myspace.pm.patch">Download Myspace.pm.patch</a><br />
<span class="downloadcontenttype">text/x-diff 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">*** Myspace.pm.bak	Mon Aug 11 15:52:53 2008
--- Myspace.pm	Mon Aug 11 22:44:38 2008
***************
*** 4941,4947 ****
          # You might want to change this whole section to:
          # do { $res = $self-&gt;get_page ... ;
          # $attempts++; } until &#40; &#40; $attempts &gt; 20 &#41; || &#40; $page =~ /&lt;input type=&#34;submit&#34; ...&#41; &#41;;
!         elsif &#40; $page !~ /ctl00\$cpMain\$btnAddToFriends/io &#41; {
              $return_code =&#39;F&#39;;
              warn &#34;No Add to Friends button on form!\n&#34;;
          }
--- 4941,4947 ----
          # You might want to change this whole section to:
          # do { $res = $self-&gt;get_page ... ;
          # $attempts++; } until &#40; &#40; $attempts &gt; 20 &#41; || &#40; $page =~ /&lt;input type=&#34;submit&#34; ...&#41; &#41;;
!         elsif &#40; $page !~ /\$AddFriendRequestButtons\$btnAddToFriends/io &#41; {
              $return_code =&#39;F&#39;;
              warn &#34;No Add to Friends button on form!\n&#34;;
          }
***************
*** 4972,4981 ****
          } else {
               $res = $self-&gt;submit_form&#40; {
                      form_name =&gt; &#39;aspnetForm&#39;,
!                     button =&gt; &#39;ctl00$cpMain$btnAddToFriends&#39;,
                      no_click =&gt; 1,
                      fields_ref =&gt; {
!                         &#39;__EVENTTARGET&#39; =&gt; &#39;ctl00$cpMain$btnAddToFriends&#39;,
                          &#39;ctl00$cpMain$NoteToFriend$Note&#39; =&gt; $message
                      }
                  } &#41;;
--- 4972,4981 ----
          } else {
               $res = $self-&gt;submit_form&#40; {
                      form_name =&gt; &#39;aspnetForm&#39;,
!                     button =&gt; &#39;ctl00$ctl00$ctl00$cpMain$cpMain$cpfMainBody$AddFriendRequestButtons$btnAddToFriends&#39;,
                      no_click =&gt; 1,
                      fields_ref =&gt; {
!                         &#39;__EVENTTARGET&#39; =&gt; &#39;ctl00$ctl00$ctl00$cpMain$cpMain$cpfMainBody$AddFriendRequestButtons$btnAddToFriends&#39;,
                          &#39;ctl00$cpMain$NoteToFriend$Note&#39; =&gt; $message
                      }
                  } &#41;;
***************
*** 4995,5001 ****
          $page =~ s/[ \t\n\r]+/ /go;
  
          # Check for success
!         if &#40; $page =~ /An email has been sent to the user/io &#41; {
              $return_code = &#39;P&#39;;
              last;
          }
--- 4995,5001 ----
          $page =~ s/[ \t\n\r]+/ /go;
  
          # Check for success
!         if &#40; $page =~ /A friend request has been sent to this user/io &#41; {
              $return_code = &#39;P&#39;;
              last;
          }
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-496674" href="/Public/Bug/Display.html?id=38385#txn-496674">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;12&nbsp;13:41:26&nbsp;2008</span>
    <span class="description">steven [...] pyro.eu.org - Ticket #38418:  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Developer communication list &lt;www-myspace-devel [...] lists.sourceforge.net&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #38418] send_friend_request&#40;&#41; brokenness</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 12 Aug 2008 18:41:08 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-WWW-Myspace [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Steven Chamberlain &lt;steven [...] pyro.eu.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/496674/245878/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/245878">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Jeff Workman via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Myspace has made several changes to their site that breaks Myspace.pm.
&gt; Among them:  
&gt; 
&gt; 1.  They changed the name of the form button to submit a friend request.
&gt; 2.  They changed the confirmation string when a friend request has been
&gt; successfully sent.
&gt; 
&gt; I have attached a patch against SVN which aims to fix these two problems.
</div>
Hi,

You&#39;re absolutely right, and your patch fixes those two problems, but 
I&#39;m sorry to say that I&#39;d already committed a fix to SVN some hours 
earlier as R-611.

Thank you anyway for your patch.

There was also a change in the form input name for the note/message sent 
with the friend request;  commit R-611 should have fixed that also.

The problem was reported as RT#38385 which I marked as closed after 
committing the fix to SVN.  It has since been re-opened as it seems 
there could still be other problems.
   <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=38385">http://rt.cpan.org/Ticket/Display.html?id=38385</a></span>

Perhaps it is best in future for us not to mark a bug as resolved in RT 
until a new release has been published via CPAN containing the fix?

Regardless, I think a 0.83 release is necessary soon because this 
important feature and others are broken in 0.82.  There are a few other 
minor features broken as shown by &#39;make test&#39; which I&#39;ll try to fix now.

Regards,
-- 
Steven Chamberlain
steven@pyro.eu.org
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-496675" href="/Public/Bug/Display.html?id=38385#txn-496675">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;12&nbsp;13:41:28&nbsp;2008</span>
    <span class="description">The RT System itself - Ticket #38418:  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-496685" href="/Public/Bug/Display.html?id=38385#txn-496685">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;12&nbsp;14:00:21&nbsp;2008</span>
    <span class="description">steven [...] pyro.eu.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #38385] send_friend_request broke aswell?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 12 Aug 2008 18:59:59 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-WWW-Myspace [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Steven Chamberlain &lt;steven [...] pyro.eu.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/496685/245884/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/245884">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">John Hale via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Seems to work a bit more now :&#41;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Parsing of undecoded UTF-8 will give garbage when decoding entities  
&gt; at /System/Library/Perl/Extras/5.8.8/darwin-thread-multi-2level/HTML/ 
&gt; PullParser.pm line 83.
</div>
BTW, those warnings can be ignored for now, but we&#39;re looking to get rid 
of them.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Posting to 148670411: Failed with code FN
</div>
&#34;Failed, network error&#34; may happen occasionally.  I believe only one 
attempt is made to send the friend request, but eventually the function 
should be modified to do that itself.  Until then you could perhaps 
alter your script to retry a few times if it receives an &#34;FN&#34; response.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Posting to 149009045: Failed with code FU
&gt; Posting to 151318023: Failed with code FU
&gt; Posting to 153440060: Failed with code FU
&gt; Posting to 155725926: Failed with code FU
&gt; Posting to 156442553: Failed with code FU
&gt; Posting to 157631228: Failed with code FU
&gt; Posting to 157633604: Failed with code FU
</div>
&#34;Failed, CAPTCHA response required by user&#34;

I&#39;ve checked one of these accounts manually and it didn&#39;t require a 
CAPTCHA.  I suspect that you&#39;d made a certain number of friend requests, 
and Myspace was requesting that you answer a CAPTCHA before you could 
send any more.  The function should have been returning &#34;FC&#34; instead, 
but it&#39;s possible that it&#39;s returning the wrong code at the moment.

If that&#39;s what&#39;s happening, you should be able to log into the account 
manually and try adding one of those friend IDs.  I suspect it would 
show you a CAPTCHA, and after you complete it, your script should work 
normally again for some time, until the next time it happens.

Regards,
-- 
Steven Chamberlain
steven@pyro.eu.org
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-497087" href="/Public/Bug/Display.html?id=38385#txn-497087">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;13&nbsp;21:28:12&nbsp;2008</span>
    <span class="description">steven [...] pyro.eu.org - Ticket #38418:  Merged into ticket #38385</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-497088" href="/Public/Bug/Display.html?id=38385#txn-497088">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;13&nbsp;21:28:13&nbsp;2008</span>
    <span class="description">steven [...] pyro.eu.org -  Merged into ticket #38385</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-497089" href="/Public/Bug/Display.html?id=38385#txn-497089">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;13&nbsp;21:28:13&nbsp;2008</span>
    <span class="description">steven [...] pyro.eu.org -  Subject changed from &#39;msend_friend_request broke aswell?&#39; to &#39;send_friend_request&#40;&#41; brokenness&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-497090" href="/Public/Bug/Display.html?id=38385#txn-497090">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;13&nbsp;21:29:28&nbsp;2008</span>
    <span class="description">steven [...] pyro.eu.org -  Severity Important added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-497091" href="/Public/Bug/Display.html?id=38385#txn-497091">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;13&nbsp;21:29:28&nbsp;2008</span>
    <span class="description">steven [...] pyro.eu.org -  Broken in 0.82 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-498323" href="/Public/Bug/Display.html?id=38385#txn-498323">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;17&nbsp;04:11:48&nbsp;2008</span>
    <span class="description">steven [...] pyro.eu.org -  Fixed in 0.84 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-498324" href="/Public/Bug/Display.html?id=38385#txn-498324">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;17&nbsp;04:11:49&nbsp;2008</span>
    <span class="description">steven [...] pyro.eu.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.726402</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
