<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #46331 for Gnome2-VFS: t/GnomeVFSDirectory.t and t/GnomeVFSOps.t Dies With NFS</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #46331 for Gnome2-VFS: t/GnomeVFSDirectory.t and t/GnomeVFSOps.t Dies With NFS</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Gnome2-VFS">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Gnome2-VFS">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Gnome2-VFS">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Gnome2-VFS">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Gnome2-VFS">Gnome2-VFS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">46331</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">stalled</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Gnome2-VFS">Gnome2-VFS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">XAOC [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
imacat [...] mail.imacat.idv.tw

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-14848-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.081    </td>
  </tr>
  <tr id="CF-14849-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=46331">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-609445" href="/Public/Bug/Display.html?id=46331#txn-609445">#</a>      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;24&nbsp;13:09:46&nbsp;2009</span>
    <span class="description">imacat [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> t/GnomeVFSDirectory.t and t/GnomeVFSOps.t Dies With NFS</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/609445/309020/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/309020">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear Torsten Schönfeld,

    Hi.  This is imacat from Taiwan.  I found that t/GnomeVFSDirectory.t
and t/GnomeVFSDirectory.t in your Gnome2-VFS-1.081 dies when building on
NFS-mounted disk.  I tried to dig further.  It seems that there are
hidden files created and left &#40;NFS lock files?&#41; in the temporary working
directory, and the final rmdir&#40;&#41; call fails with the “directory not
empty” error.

    The terminal log is attached below.  I inserted a “print TMP; system
&#34;ls -a &#34;.TMP;” before the rmdir&#40;&#41; call.  My home directory is mounted on
NFS.

    Hope that this helps.  Please tell me if you need any more
information, or if I could be of any help.  Thank you.

imacat@cotton build/Gnome2-VFS-1.081-3bSR5A % make test
t/GnomeVFS.t ........... ok   
t/GnomeVFSAddress.t .... ok   
t/GnomeVFSDirectory.t .. 1/38 Urgh, couldn&#39;t delete the scratch
directory: Directory not empty
# Looks like your test exited with 39 just after 38.
t/GnomeVFSDirectory.t .. Dubious, test returned 39 &#40;wstat 9984, 0x2700&#41;
All 38 subtests passed 
t/GnomeVFSFileInfo.t ... ok     
t/GnomeVFSOps.t ........ 1/48 Urgh, couldn&#39;t delete the scratch
directory: Directory not empty
# Looks like your test exited with 39 just after 48.
t/GnomeVFSOps.t ........ Dubious, test returned 39 &#40;wstat 9984, 0x2700&#41;
All 48 subtests passed 
t/GnomeVFSResolve.t .... ok   
t/GnomeVFSURI.t ........ ok     
t/GnomeVFSUtils.t ...... ok     
t/GnomeVFSXfer.t ....... ok     

Test Summary Report
-------------------
t/GnomeVFSDirectory.t &#40;Wstat: 9984 Tests: 38 Failed: 0&#41;
  Non-zero exit status: 39
t/GnomeVFSOps.t      &#40;Wstat: 9984 Tests: 48 Failed: 0&#41;
  Non-zero exit status: 39
Files=9, Tests=180,  4 wallclock secs &#40; 0.31 usr  0.03 sys +  1.58 cusr
 0.27 csys =  2.19 CPU&#41;
Result: FAIL
Failed 2/9 test programs. 0/180 subtests failed.
make: *** [test_dynamic] Error 255
imacat@cotton build/Gnome2-VFS-1.081-3bSR5A % perl -Mblib
t/GnomeVFSDirectory.t
1..38
ok 1
ok 2 - The object isa Gnome2::VFS::Directory::Handle
ok 3
ok 4
ok 5 - The object isa Gnome2::VFS::Directory::Handle
ok 6
ok 7
ok 8
ok 9
ok 10
ok 11
ok 12
ok 13
ok 14
ok 15
ok 16
ok 17
ok 18
ok 19
ok 20
ok 21
ok 22
ok 23
ok 24
ok 25
ok 26
ok 27
ok 28
ok 29
ok 30
ok 31
ok 32
ok 33
ok 34
ok 35
ok 36
ok 37
ok 38
/home/imacat/.cpan/build/Gnome2-VFS-1.081-3bSR5A/tmp
total 8
drwxr-xr-x 2 imacat users 4096 May 25 01:06 .
drwx------ 8 imacat users 4096 May 25 01:06 ..
-rw-r--r-- 1 imacat users    0 May 25 01:06 .nfs00000000002d431400000044
-rw-r--r-- 1 imacat users    0 May 25 01:06 .nfs00000000002d431500000043
Urgh, couldn&#39;t delete the scratch directory: Directory not empty
# Looks like your test exited with 39 just after 38.
imacat@cotton build/Gnome2-VFS-1.081-3bSR5A % perl -Mblib
t/GnomeVFSOps.t      
1..48
ok 1
ok 2 - The object isa Gnome2::VFS::Handle
ok 3
ok 4
ok 5 - The object isa Gnome2::VFS::Handle
ok 6
ok 7
ok 8 - The object isa Gnome2::VFS::Handle
ok 9
ok 10
ok 11 - The object isa Gnome2::VFS::Handle
ok 12
ok 13
ok 14
ok 15
ok 16
ok 17
ok 18
ok 19
ok 20
ok 21
ok 22
ok 23
ok 24
ok 25
ok 26
ok 27
ok 28
ok 29
ok 30
ok 31
ok 32
ok 33
ok 34
ok 35
ok 36
ok 37
ok 38
ok 39
ok 40
ok 41
ok 42 - The object isa Gnome2::VFS::FilePermissions
ok 43
ok 44
ok 45
ok 46
ok 47
ok 48
/home/imacat/.cpan/build/Gnome2-VFS-1.081-3bSR5A/tmp
total 12
drwxr-xr-x 2 imacat users 4096 May 25 01:07 .
drwx------ 8 imacat users 4096 May 25 01:06 ..
-rw-r--r-- 1 imacat users    4 May 25 01:07 .nfs00000000002d431400000045
Urgh, couldn&#39;t delete the scratch directory: Directory not empty
# Looks like your test exited with 39 just after 48.
imacat@cotton build/Gnome2-VFS-1.081-3bSR5A % df $PWD
Filesystem           1K-blocks      Used Available Use% Mounted on
rinse:/home           80961536  13720064  63128832  18% /home
imacat@cotton build/Gnome2-VFS-1.081-3bSR5A % 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1912874" href="/Public/Bug/Display.html?id=46331#txn-1912874">#</a>      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;25&nbsp;10:55:08&nbsp;2020</span>
    <span class="description">XAOC [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1912875" href="/Public/Bug/Display.html?id=46331#txn-1912875">#</a>      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;25&nbsp;10:57:51&nbsp;2020</span>
    <span class="description">XAOC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1912875/1024568/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1024568">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 670b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun May 24 13:09:46 2009, IMACAT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Dear Torsten Schönfeld,
&gt; 
&gt;     Hi.  This is imacat from Taiwan.  I found that t/GnomeVFSDirectory.t
&gt; and t/GnomeVFSDirectory.t in your Gnome2-VFS-1.081 dies when building on
&gt; NFS-mounted disk.  I tried to dig further.  It seems that there are
&gt; hidden files created and left &#40;NFS lock files?&#41; in the temporary working
&gt; directory, and the final rmdir&#40;&#41; call fails with the “directory not
&gt; empty” error.
</div>
Is this still an issue?

1&#41; It would not be trivial to handle NFS-mounted home directories as a use case when building this module.

2&#41; This module will be deprecated by the Gtk-Perl team in the next few months.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1912876" href="/Public/Bug/Display.html?id=46331#txn-1912876">#</a>      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;25&nbsp;10:57:52&nbsp;2020</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1912879" href="/Public/Bug/Display.html?id=46331#txn-1912879">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;25&nbsp;10:57:52&nbsp;2020</span>
    <span class="description">XAOC [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.29275</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
