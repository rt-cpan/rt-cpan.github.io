<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #19992 for Net-UPS: Cannot get address suggestions</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #19992 for Net-UPS: Cannot get address suggestions</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-UPS/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-UPS/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-UPS/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-UPS/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-UPS">Net-UPS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">19992</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-UPS/Active/">Net-UPS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
tomt [...] webscope.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-23376-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-23377-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;19&nbsp;17:32:13&nbsp;2006</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Cannot get address suggestions</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">UPS Tools now seems to support XML based access method ONLY since the 
tools were moved to new server&#40;s&#41; a while ago... so I&#39;m trying to make 
use of Net::UPS for a e-commerce site.

Problem: I can&#39;t get any suggestions for an invalid address via the 
validate_address&#40;&#41; method. The array that is supposed contain the 
suggestions is empty while it should contain &#40;in my case&#41; 3 
suggestions.

$address is the UPS address object with the following information:
city: valley
state: ny
zip: 11580

The invalid parameter is the name of the city. The actual city name 
is &#39;Valley Stream&#39; not &#39;Valley&#39;.

Here is my code:

$ups = Net::UPS-&gt;new&#40;$my_userid, $my_passwd, $my_access_key&#41;;
my $addresses = $ups-&gt;validate_address&#40;$address&#41;;
unless &#40; defined $addresses &#41; {
        die $ups-&gt;errstr;
}
unless &#40; @$addresses &#41; {
        die &#34;The speciified address is not correct, and there are no 
suggestions.\n&#34;;
}
if &#40; $addresses-&gt;[0]-&gt;is_match &#41; {
        print &#34;Address Matches Exactly!\n&#34;;
}
else {
        print &#34;Your address didn&#39;t match exactly. Following are some 
valid suggestions\n&#34;;
        for&#40; @$addresses &#41; {
                printf&#40;&#34;%s, %s %s\n&#34;, $_-&gt;city, $_-&gt;state, $_-
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;postal_code&#41;;
</div>        }
}


It may be worth noting that if the supplied address is an exact match, 
the addresses array contains 3 elements where the 1st is the exact 
match and the other 2 are close matches.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;19&nbsp;20:58:57&nbsp;2006</span>
    <span class="description">sherzodr [...] handalak.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #19992] Cannot get address suggestions </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 19 Jun 2006 20:57:43 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-UPS [...] rt.cpan.org&gt;, &lt;&#34;undisclosed-recipients:&#34; [...] bestpractical.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Sherzod Ruzmetov&#34; &lt;sherzodr [...] handalak.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">If $addresses doesn&#39;t contain any matches, it means the quality of the matches does not meet the tolerance threshold. You have to loosen it up.

Try setting the threshold to 0.75, may be. If that still doesn&#39;t return anything, set it to 1, although I donâ€™t recommend that.

Again, there is nothing wrong if no suggestions can be provided, as long as it detects that address is invalid, that&#39;s enough most of the time.

If verrifying addresses and providing address suggestions is the major function of your application, look into Net::USPS instead in the future, which will do better job.


Sherzod




<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; -----Original Message-----
&gt; From: Guest via RT [mailto:bug-Net-UPS@rt.cpan.org] 
&gt; Sent: Monday, June 19, 2006 5:32 PM
&gt; To: undisclosed-recipients:
&gt; Subject: [rt.cpan.org #19992] Cannot get address suggestions 
&gt; 
&gt; 
&gt; 
&gt; Mon Jun 19 17:32:13 2006: Request 19992 was acted upon.
&gt; Transaction: Ticket created by guest
&gt;        Queue: Net-UPS
&gt;      Subject: Cannot get address suggestions
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: Important
&gt;        Owner: Nobody
&gt;   Requestors: tomt@webscope.com
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=19992">http://rt.cpan.org/Ticket/Display.html?id=19992</a></span> &gt;
&gt; 
&gt; 
&gt; UPS Tools now seems to support XML based access method ONLY since the 
&gt; tools were moved to new server&#40;s&#41; a while ago... so I&#39;m 
&gt; trying to make 
&gt; use of Net::UPS for a e-commerce site.
&gt; 
&gt; Problem: I can&#39;t get any suggestions for an invalid address via the 
&gt; validate_address&#40;&#41; method. The array that is supposed contain the 
&gt; suggestions is empty while it should contain &#40;in my case&#41; 3 
&gt; suggestions.
&gt; 
&gt; $address is the UPS address object with the following information:
&gt; city: valley
&gt; state: ny
&gt; zip: 11580
&gt; 
&gt; The invalid parameter is the name of the city. The actual city name 
&gt; is &#39;Valley Stream&#39; not &#39;Valley&#39;.
&gt; 
&gt; Here is my code:
&gt; 
&gt; $ups = Net::UPS-&gt;new&#40;$my_userid, $my_passwd, $my_access_key&#41;;
&gt; my $addresses = $ups-&gt;validate_address&#40;$address&#41;;
&gt; unless &#40; defined $addresses &#41; {
&gt;       die $ups-&gt;errstr;
&gt; }
&gt; unless &#40; @$addresses &#41; {
&gt;       die &#34;The speciified address is not correct, and there are no 
&gt; suggestions.\n&#34;;
&gt; }
&gt; if &#40; $addresses-&gt;[0]-&gt;is_match &#41; {
&gt;       print &#34;Address Matches Exactly!\n&#34;;
&gt; }
&gt; else {
&gt;       print &#34;Your address didn&#39;t match exactly. Following are some 
&gt; valid suggestions\n&#34;;
&gt;       for&#40; @$addresses &#41; {
&gt;               printf&#40;&#34;%s, %s %s\n&#34;, $_-&gt;city, $_-&gt;state, $_-
<div class="message-stanza open">&gt; &gt;postal_code&#41;;
</div>&gt;       }
&gt; }
&gt; 
&gt; 
&gt; It may be worth noting that if the supplied address is an 
&gt; exact match, 
&gt; the addresses array contains 3 elements where the 1st is the exact 
&gt; match and the other 2 are close matches.
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;19&nbsp;20:58:58&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;15&nbsp;09:57:34&nbsp;2013</span>
    <span class="description">DAKKAR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">this does not look like a bug, and it&#39;s been here for ages, closing.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;15&nbsp;09:57:35&nbsp;2013</span>
    <span class="description">DAKKAR [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
