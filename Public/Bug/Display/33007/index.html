<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #33007 for Test-Harness: prove incompatibilities with 2.64</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #33007 for Test-Harness: prove incompatibilities with 2.64</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Test-Harness/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Test-Harness/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Test-Harness/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Test-Harness/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Test-Harness">Test-Harness CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">33007</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Test-Harness/Active/">Test-Harness</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">andy [...] hexten.net
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
david.pitt [...] nab.com.au

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-31430-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
3.07    </td>
  </tr>
  <tr id="CF-31431-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;08&nbsp;01:09:35&nbsp;2008</span>
    <span class="description">david.pitt [...] nab.com.au -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> prove incompatibilities with 2.64</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">1&#41; &#39;prove --dry&#39; no longer supported &#40;wishlist&#41;.

2&#41; &#39;prove -r&#39; doesn&#39;t recurse into all directories, only &#39;t&#39; 
directory. 2.64 recursed into all directories. Have to use &#39;prove -
r .&#39; which leads to:

3&#41; Unsupported YAMLish syntax
$ prove -r --state=save .
...
$ prove -V
Unsupported YAMLish syntax: &#39;./Ledger/t/02_legal_entity.t:&#39; 
at /opt/perl/5.8.8/lib/site_perl/TAP/Parser/YAMLish/Reader.pm line 
191, &lt;FH&gt; line 4.
$ head -20 .prove
/vobs/kalm/src/perl/lib/KALM&gt; head -20 .prove
---
generation: 2
tests:
  ./Ledger/t/02_legal_entity.t:
    elapsed: 2.85970997810364
    gen: 2
    last_pass_time: 1202445672.63701
    last_result: 0
    last_run_time: 1202445672.63701
    last_todo: 0
    seq: 68
    total_passes: 1
  ./Oracle/t/xfer.t:
    elapsed: 14.821683883667
    gen: 2
    last_fail_time: 1202445666.09779
    last_result: 6
    last_run_time: 1202445666.09779
    last_todo: 0
    mtime: 1201838189

Environment:
$ prove -V
TAP::Harness v3.07 and Perl v5.8.8
$ perl -V
Summary of my perl5 &#40;revision 5 version 8 subversion 8&#41; configuration:
  Platform:
    osname=linux, osvers=2.6.9-42.0.3.elsmp, archname=x86_64-linux
    uname=&#39;linux melladgte01 2.6.9-42.0.3.elsmp #1 smp mon sep 25 
17:24:31 edt 2006 x86_64 x86_64 x86_64 gnulinux &#39;
    config_args=&#39;-Duseshrplib -Doptimize=-O2 -g -pipe -m64 -
Duse64bitall -Dprefix=/opt/perl/5.8.8 -Dscriptdir=/opt/perl/5.8.8/bin -
Dinstallprefix=/var/tmp/build_perl/5.8.8/core/dist//opt/perl/5.8.8 -
Darchlib=/opt/perl/5.8.8/lib/x86_64-linux -
Dprivlib=/opt/perl/5.8.8/lib -
Dsitearch=/opt/perl/5.8.8/lib/site_perl/x86_64-linux -
Dsitelib=/opt/perl/5.8.8/lib/site_perl -
Dlocincpth=/opt/local/include /usr/local/BerkeleyDB/include -
Dloclibpth=/opt/local/lib /usr/local/BerkeleyDB/lib -
Dperl5=/opt/perl/5.8.8/bin/perl -des&#39;
    hint=recommended, useposix=true, d_sigaction=define
    usethreads=undef use5005threads=undef useithreads=undef 
usemultiplicity=undef
    useperlio=define d_sfio=undef uselargefiles=define usesocks=undef
    use64bitint=define use64bitall=define uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;cc&#39;, ccflags =&#39;-DDEBUGGING -fno-strict-aliasing -pipe -
Wdeclaration-after-statement -D_LARGEFILE_SOURCE -
D_FILE_OFFSET_BITS=64&#39;,
    optimize=&#39;-O2 -g -pipe -m64&#39;,
    cppflags=&#39;-DDEBUGGING -fno-strict-aliasing -pipe -Wdeclaration-
after-statement&#39;
    ccversion=&#39;&#39;, gccversion=&#39;3.4.6 20060404 &#40;Red Hat 3.4.6-3&#41;&#39;, 
gccosandvers=&#39;&#39;
    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
    ivtype=&#39;long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;, 
lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;cc&#39;, ldflags =&#39;&#39;
    libpth=/lib /usr/lib /usr/local/lib
    libs=-lnsl -ldl -lm -lcrypt -lutil -lc
    perllibs=-lnsl -ldl -lm -lcrypt -lutil -lc
    libc=/lib/libc-2.3.4.so, so=so, useshrplib=true, libperl=libperl.so
    gnulibc_version=&#39;2.3.4&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags=&#39;-Wl,-E -
Wl,-rpath,/opt/perl/5.8.8/lib/x86_64-linux/CORE&#39;
    cccdlflags=&#39;-fpic&#39;, lddlflags=&#39;-shared&#39;


Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options: DEBUGGING PERL_MALLOC_WRAP USE_64_BIT_ALL
                        USE_64_BIT_INT USE_LARGE_FILES USE_PERLIO
  Built under linux
  Compiled at Dec 19 2007 12:21:06
  %ENV:
    PERL5LIB=&#34;/vobs/irm/src/perl/lib:/vobs/kalm/src/perl/lib&#34;
  @INC:
    /vobs/irm/src/perl/lib
    /vobs/kalm/src/perl/lib
    /opt/perl/5.8.8/lib/x86_64-linux
    /opt/perl/5.8.8/lib
    /opt/perl/5.8.8/lib/site_perl/x86_64-linux
    /opt/perl/5.8.8/lib/site_perl
    /opt/perl/5.8.8/lib/site_perl
    .

Possible &#40;untested&#41; patch for &#40;2&#41;:

App/Prove/State.pm:
227c227
&lt;        @argv = &#39;t&#39;;
---
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        @argv = $recurse ? &#39;.&#39; : &#39;t&#39;;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;08&nbsp;14:43:23&nbsp;2008</span>
    <span class="description">andy [...] hexten.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Dave,

--dry wishlist noted - I&#39;ll try to get it done in the next few days.

The bug with prove -r . is already fixed in the SVN sitting on my machine. 3.08 will get the 
fix.

Thanks for the report :&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;08&nbsp;14:43:25&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;08&nbsp;14:43:26&nbsp;2008</span>
    <span class="description">andy [...] hexten.net -  Given to ANDYA</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;08&nbsp;15:31:40&nbsp;2008</span>
    <span class="description">andy [...] hexten.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Feb 08 14:43:23 2008, ANDYA wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Dave,
&gt; 
&gt; --dry wishlist noted - I&#39;ll try to get it done in the next few days.
&gt; 
&gt; The bug with prove -r . is already fixed in the SVN sitting on my
&gt; machine. 3.08 will get the
&gt; fix.
&gt; 
&gt; Thanks for the report :&#41;
</div>
3.08 is on its way to the CPAN. It fixes the -r . problem and adds a --dry switch.

Thanks again.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;08&nbsp;15:32:21&nbsp;2008</span>
    <span class="description">andy [...] hexten.net -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;11&nbsp;18:15:19&nbsp;2008</span>
    <span class="description">david.pitt [...] nab.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #33007] prove incompatibilities with 2.64</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 12 Feb 2008 10:14:09 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-Harness [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David.Pitt [...] nab.com.au</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Andy,

Thanks for the prompt response. Can confirm that --dry works fine.
Unfortunately I don&#39;t think you&#39;ve fixed the problem with -r:

&#40;1&#41; ~/CPAN/Test-Harness-3.09&gt; PERL5LIB=blib/lib perl ./bin/prove -r -D
t/000-load.t
...
t/yamlish.t

&#40;2&#41; ~/CPAN/Test-Harness-3.09&gt; PERL5LIB=blib/lib perl ./bin/prove -r -D .
./examples/t/10-stuff.t
./examples/t/ruby.t
./t/000-load.t
...
./t/yamlish.t
./xt/author/pod-coverage.t
./xt/author/pod.t
./xt/author/stdin.t
./xt/perls/harness_perl.t

I expect &#40;1&#41; to run the same tests as &#40;2&#41;.

I also discovered that the --state option doesn&#39;t seem to play well
combined with -r . :

&#40;3&#41; ~/CPAN/Test-Harness-3.09&gt; PERL5LIB=blib/lib perl ./bin/prove -r
--state=save .
./examples/t/10-stuff...............1/?
#   Failed test &#39;this is_deeply test fails&#39;
#   in ./examples/t/10-stuff.t at line 7.
#     Structures begin differing at:
#          $got-&gt;[0] = &#39;2&#39;
#     $expected-&gt;[0] = &#39;3&#39;
# Looks like you failed 1 test of 6.
./examples/t/10-stuff............... Dubious, test returned 1 &#40;wstat 256,
0x100&#41;
 Failed 1/6 subtests
        &#40;less 2 skipped subtests: 3 okay&#41;
        &#40;1 TODO test unexpectedly succeeded&#41;
./examples/t/ruby...................Undefined subroutine &#38;main::puts called
at ./examples/t/ruby.t line 1.
./examples/t/ruby................... Dubious, test returned 255 &#40;wstat
65280, 0xff00&#41;
 No subtests run
./t/000-load........................59/60 # Testing Test::Harness 3.09,
Perl 5.008008, /opt/perl/5.8.8/bin/perl
./t/000-load........................ok
./t/aggregator......................ok
./t/bailout.........................ok
./t/base............................ok
./t/callbacks.......................ok
./t/compat/env......................ok
./t/compat/failure..................ok
./t/compat/inc-propagation..........ok
./t/compat/inc_taint................ok
./t/compat/nonumbers................ok
./t/compat/regression...............ok
./t/compat/test-harness-compat......ok
./t/compat/version..................ok
./t/console.........................ok
./t/errors..........................ok
./t/grammar.........................ok
./t/harness.........................ok
./t/iterators.......................ok
./t/multiplexer.....................ok
./t/nofork-mux......................ok
./t/nofork..........................ok
./t/parse...........................ok
./t/premature-bailout...............ok
./t/process.........................ok
./t/prove...........................ok
./t/proverc.........................ok
./t/proverun........................ok
./t/regression......................ok
./t/results.........................ok
./t/source..........................ok
./t/spool...........................ok
./t/state...........................ok
./t/streams.........................ok
./t/taint...........................ok
./t/testargs........................ok
./t/unicode.........................ok
./t/utils...........................ok
./t/yamlish-output..................ok
./t/yamlish-writer..................ok
./t/yamlish.........................ok
./xt/author/pod-coverage............ok
./xt/author/pod.....................ok
./xt/author/stdin...................ok
./xt/perls/harness_perl.............skipped: no perls found in
&#39;/usr/local/stow/&#39;

Test Summary Report
-------------------
./examples/t/10-stuff.t         &#40;Wstat: 256 Tests: 6 Failed: 1&#41;
  Failed test:  2
  TODO passed:   6
  Non-zero exit status: 1
./examples/t/ruby.t             &#40;Wstat: 65280 Tests: 0 Failed: 0&#41;
  Non-zero exit status: 255
  Parse errors: No plan found in TAP output
Files=46, Tests=10410, 30 wallclock secs &#40; 2.32 usr  1.35 sys + 13.38 cusr
11.14 csys = 28.19 CPU&#41;
Result: FAIL

&#40;4&#41; ~/CPAN/Test-Harness-3.09&gt; PERL5LIB=blib/lib perl ./bin/prove -r
--state=failed,save .
./examples/t/10-stuff...............1/?
#   Failed test &#39;this is_deeply test fails&#39;
#   in ./examples/t/10-stuff.t at line 7.
#     Structures begin differing at:
#          $got-&gt;[0] = &#39;2&#39;
#     $expected-&gt;[0] = &#39;3&#39;
# Looks like you failed 1 test of 6.
./examples/t/10-stuff............... Dubious, test returned 1 &#40;wstat 256,
0x100&#41;
 Failed 1/6 subtests
        &#40;less 2 skipped subtests: 3 okay&#41;
        &#40;1 TODO test unexpectedly succeeded&#41;
./examples/t/ruby...................Undefined subroutine &#38;main::puts called
at ./examples/t/ruby.t line 1.
./examples/t/ruby................... Dubious, test returned 255 &#40;wstat
65280, 0xff00&#41;
 No subtests run
./t/000-load........................3/60 # Testing Test::Harness 3.09, Perl
5.008008, /opt/perl/5.8.8/bin/perl
./t/000-load........................ok
./t/aggregator......................ok
./t/bailout.........................ok
./t/base............................ok
./t/callbacks.......................ok
./t/compat/env......................ok
./t/compat/failure..................ok
./t/compat/inc-propagation..........ok
./t/compat/inc_taint................ok
./t/compat/nonumbers................ok
./t/compat/regression...............ok
./t/compat/test-harness-compat......ok
./t/compat/version..................ok
./t/console.........................ok
./t/errors..........................ok
./t/grammar.........................ok
./t/harness.........................ok
./t/iterators.......................ok
./t/multiplexer.....................ok
./t/nofork-mux......................ok
./t/nofork..........................ok
./t/parse...........................ok
./t/premature-bailout...............ok
./t/process.........................ok
./t/prove...........................ok
./t/proverc.........................ok
./t/proverun........................ok
./t/regression......................ok
./t/results.........................ok
./t/source..........................ok
./t/spool...........................ok
./t/state...........................ok
./t/streams.........................ok
./t/taint...........................ok
./t/testargs........................ok
./t/unicode.........................ok
./t/utils...........................ok
./t/yamlish-output..................ok
./t/yamlish-writer..................ok
./t/yamlish.........................ok
./xt/author/pod-coverage............ok
./xt/author/pod.....................ok
./xt/author/stdin...................ok
./xt/perls/harness_perl.............skipped: no perls found in
&#39;/usr/local/stow/&#39;

Test Summary Report
-------------------
./examples/t/10-stuff.t         &#40;Wstat: 256 Tests: 6 Failed: 1&#41;
  Failed test:  2
  TODO passed:   6
  Non-zero exit status: 1
./examples/t/ruby.t             &#40;Wstat: 65280 Tests: 0 Failed: 0&#41;
  Non-zero exit status: 255
  Parse errors: No plan found in TAP output
Files=46, Tests=10410, 30 wallclock secs &#40; 2.22 usr  1.29 sys + 14.55 cusr
10.81 csys = 28.87 CPU&#41;
Result: FAIL

Seems to run all the tests again, rather than skipping the passed tests.
This may be related to the  quoted test names in .prove.

Regards,

David Pitt  | Enterprise Services Technology | National Australia Bank
Limited
Phone +61 3 8641 2014 | Email david.pitt@nab.com.au | Level 26, 500 Bourke
Street, Melbourne


                                                                           
             &#34;Andy Armstrong                                               
             via RT&#34;                                                       
             &lt;bug-Test-Harness                                          To 
             @rt.cpan.org&gt;             david.pitt@nab.com.au               
                                                                        cc 
             09/02/2008 07:31                                              
             AM                                                    Subject 
                                       [rt.cpan.org #33007] prove          
                                       incompatibilities with 2.64         
             Please respond to                                             
             bug-Test-Harness@                                             
                rt.cpan.org                                                
                                                                           
                                                                           
                                                                           





&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=33007">http://rt.cpan.org/Ticket/Display.html?id=33007</a></span> &gt;

On Fri Feb 08 14:43:23 2008, ANDYA wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Dave,
&gt;
&gt; --dry wishlist noted - I&#39;ll try to get it done in the next few days.
&gt;
&gt; The bug with prove -r . is already fixed in the SVN sitting on my
&gt; machine. 3.08 will get the
&gt; fix.
&gt;
&gt; Thanks for the report :&#41;
</div>
3.08 is on its way to the CPAN. It fixes the -r . problem and adds a --dry
switch.

Thanks again.






National Australia Bank Ltd - ABN 12 004 044 937
This email may contain confidential information. If you are not the intended
recipient, please immediately notify us at postmaster@nab.com.au or by replying to
the sender, and then destroy all copies of this email. Except where this email
indicates otherwise, views expressed in this email are those of the sender and not
of National Australia Bank Ltd. Advice in this email does not take account of your
objectives, financial situation, or needs. It is important for you to consider these
matters and, if the e-mail refers to a product&#40;s&#41;, you should read the relevant
Product Disclosure Statement&#40;s&#41;/other disclosure document&#40;s&#41; before making any
decisions. If you do not want email marketing from us in future, forward this email
with &#34;unsubscribe&#34; in the subject line to Unsubscriptions@nab.com.au in order to
stop marketing emails from this sender. National Australia Bank Ltd does not
represent that this email is free of errors, viruses or interference.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;11&nbsp;18:15:22&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;26&nbsp;20:45:49&nbsp;2008</span>
    <span class="description">andy [...] hexten.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Feb 11 18:15:19 2008, david.pitt@nab.com.au wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Andy,
&gt; 
&gt; Thanks for the prompt response. Can confirm that --dry works fine.
&gt; Unfortunately I don&#39;t think you&#39;ve fixed the problem with -r:
&gt; 
&gt; &#40;1&#41; ~/CPAN/Test-Harness-3.09&gt; PERL5LIB=blib/lib perl ./bin/prove -r -D
&gt; t/000-load.t
&gt; ...
&gt; t/yamlish.t
&gt; 
&gt; &#40;2&#41; ~/CPAN/Test-Harness-3.09&gt; PERL5LIB=blib/lib perl ./bin/prove -r -D
&gt; .
&gt; ./examples/t/10-stuff.t
&gt; ./examples/t/ruby.t
&gt; ./t/000-load.t
&gt; ...
&gt; ./t/yamlish.t
&gt; ./xt/author/pod-coverage.t
&gt; ./xt/author/pod.t
&gt; ./xt/author/stdin.t
&gt; ./xt/perls/harness_perl.t
&gt; 
&gt; I expect &#40;1&#41; to run the same tests as &#40;2&#41;.
</div>
I&#39;ve just committed a change to svn that fixes this. It&#39;ll show up in T::H 3.11 which will 
probably be released in a week or so.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I also discovered that the --state option doesn&#39;t seem to play well
&gt; combined with -r . :
</div>
[snip]

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Seems to run all the tests again, rather than skipping the passed
&gt; tests. This may be related to the quoted test names in .prove.
</div>
No, that&#39;s expected behaviour. If you specify any files they&#39;re
*added* to the files contributed by the stored state. The tests run
are the union of any files you specified on the command line and any
remembered by state. I&#39;m sure the documentation could be clearer on that point.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;26&nbsp;20:45:54&nbsp;2008</span>
    <span class="description">andy [...] hexten.net -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
