<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #76579 for Data-Page: new patch</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #76579 for Data-Page: new patch</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Data-Page/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Data-Page/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Data-Page/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Data-Page/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Data-Page">Data-Page CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">76579</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">stalled</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Data-Page/Active/">Data-Page</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mineiro [...] live.nl

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-9184-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.02    </td>
  </tr>
  <tr id="CF-9185-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;15&nbsp;17:54:00&nbsp;2012</span>
    <span class="description">mineiro [...] live.nl -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> new patch</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m sending out new methods

method total_numbers: gets and sets, total numbers in the paging
$page-&gt;total_entries&#40;50&#41;;
$page-&gt;entries_per_page&#40;2&#41;;
$page-&gt;current_page&#40;15&#41;;
$page-&gt;total_numbers&#40;6&#41;; # default 10

method home_number: gets, home number
method end_number: gets, end number
for&#40;my $i=$self-&gt;home_number; $i&lt;=$self-&gt;end_number; $i++&#41;{
print $i . &#39; &#39;;
}
result: 12 13 14 15 16 17 18

method array_numbers: gets, array numbers
foreach my $row &#40;$self-&gt;array_numbers&#41;{
print $row . &#39; &#39;;
}
result: 12 13 14 15 16 17 18
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Page.pm</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">package Data::Page;
use Carp;
use strict;
use base &#39;Class::Accessor::Chained::Fast&#39;;
__PACKAGE__-&gt;mk_accessors&#40;qw&#40;total_entries entries_per_page current_page total_numbers&#41;&#41;;

use vars qw&#40;$VERSION&#41;;
$VERSION = &#39;2.02&#39;;

sub new {
    my $class = shift;
    my $self  = {};
    bless&#40; $self, $class &#41;;

    my &#40; $total_entries, $entries_per_page, $current_page, $total_numbers &#41; = @_;
    $self-&gt;total_entries&#40; $total_entries       || 0 &#41;;
    $self-&gt;entries_per_page&#40; $entries_per_page || 10 &#41;;
    $self-&gt;current_page&#40; $current_page         || 1 &#41;;
    $self-&gt;total_numbers&#40; $total_numbers       || 10 &#41;;
    return $self;
}

sub entries_per_page {
    my $self             = shift;
    my $entries_per_page = $_[0];
    if &#40;@_&#41; {
        croak&#40;&#34;Fewer than one entry per page!&#34;&#41; if $entries_per_page &lt; 1;
        return $self-&gt;_entries_per_page_accessor&#40;@_&#41;;
    }
    return $self-&gt;_entries_per_page_accessor&#40;&#41;;
}

sub current_page {
    my $self = shift;
    if &#40;@_&#41; {
        return $self-&gt;_current_page_accessor&#40;@_&#41;;
    }
    return $self-&gt;first_page unless defined $self-&gt;_current_page_accessor;
    return $self-&gt;first_page
        if $self-&gt;_current_page_accessor &lt; $self-&gt;first_page;
    return $self-&gt;last_page
        if $self-&gt;_current_page_accessor &gt; $self-&gt;last_page;
    return $self-&gt;_current_page_accessor&#40;&#41;;
}

sub total_entries {
    my $self = shift;
    if &#40;@_&#41; {
        return $self-&gt;_total_entries_accessor&#40;@_&#41;;
    }
    return $self-&gt;_total_entries_accessor;
}

sub total_numbers {
    my $self = shift;
    if &#40;@_&#41; {
        return $self-&gt;_total_numbers_accessor&#40;@_&#41;;
    }
    return $self-&gt;_total_numbers_accessor;
}

sub entries_on_this_page {
    my $self = shift;

    if &#40; $self-&gt;total_entries == 0 &#41; {
        return 0;
    } else {
        return $self-&gt;last - $self-&gt;first + 1;
    }
}

sub first_page {
    my $self = shift;

    return 1;
}

sub last_page {
    my $self = shift;

    my $pages = $self-&gt;total_entries / $self-&gt;entries_per_page;
    my $last_page;

    if &#40; $pages == int $pages &#41; {
        $last_page = $pages;
    } else {
        $last_page = 1 + int&#40;$pages&#41;;
    }

    $last_page = 1 if $last_page &lt; 1;
    return $last_page;
}

sub first {
    my $self = shift;

    if &#40; $self-&gt;total_entries == 0 &#41; {
        return 0;
    } else {
        return &#40; &#40; $self-&gt;current_page - 1 &#41; * $self-&gt;entries_per_page &#41; + 1;
    }
}

sub last {
    my $self = shift;

    if &#40; $self-&gt;current_page == $self-&gt;last_page &#41; {
        return $self-&gt;total_entries;
    } else {
        return &#40; $self-&gt;current_page * $self-&gt;entries_per_page &#41;;
    }
}

sub previous_page {
    my $self = shift;

    if &#40; $self-&gt;current_page &gt; 1 &#41; {
        return $self-&gt;current_page - 1;
    } else {
        return undef;
    }
}

sub next_page {
    my $self = shift;

    $self-&gt;current_page &lt; $self-&gt;last_page ? $self-&gt;current_page + 1 : undef;
}

# This method would probably be better named &#39;select&#39; or &#39;slice&#39; or
# something, because it doesn&#39;t modify the array the way
# CORE::splice&#40;&#41; does.
sub splice {
    my &#40; $self, $array &#41; = @_;
    my $top = @$array &gt; $self-&gt;last ? $self-&gt;last : @$array;
    return &#40;&#41; if $top == 0;    # empty
    return @{$array}[ $self-&gt;first - 1 .. $top - 1 ];
}

sub skipped {
    my $self = shift;

    my $skipped = $self-&gt;first - 1;
    return 0 if $skipped &lt; 0;
    return $skipped;
}

sub change_entries_per_page {
    my &#40; $self, $new_epp &#41; = @_;

    use integer;
    croak&#40;&#34;Fewer than one entry per page!&#34;&#41; if $new_epp &lt; 1;
    my $new_page = 1 + &#40; $self-&gt;first / $new_epp &#41;;
    $self-&gt;entries_per_page&#40;$new_epp&#41;;
    $self-&gt;current_page&#40;$new_page&#41;;
}

sub home_number {
    my $self = shift;
    
    my $number = int &#40;$self-&gt;total_numbers / 2&#41;;
    
    if&#40;$self-&gt;current_page &gt; $number&#41;{
        if&#40;&#40;$self-&gt;current_page + $number&#41; &gt; $self-&gt;last_page&#41;{
            return &#40;$self-&gt;last_page - $self-&gt;total_numbers&#41;;
        }else{
            return &#40;$self-&gt;current_page - $number&#41;;
        }
    }else{
        return 1;
    }
}

sub end_number {
    my $self = shift;
    
    my $number = int &#40;$self-&gt;total_numbers / 2&#41;;
    
    if&#40;$self-&gt;last_page &gt; &#40;$self-&gt;current_page + $number&#41;&#41;{
        if&#40;$self-&gt;current_page &lt;= $number&#41;{
            return &#40;$self-&gt;total_numbers + 1&#41;;
        }else{
            return &#40;$self-&gt;current_page + $number&#41;;
        }
    }else{
        return $self-&gt;last_page;
    }
}

sub array_numbers {
    my $self = shift;
    
    my @array = &#40;$self-&gt;home_number .. $self-&gt;end_number&#41;;
    return @array;
}

1;

__END__

=head1 NAME

Data::Page - help when paging through sets of results

=head1 SYNOPSIS

  use Data::Page;

  my $page = Data::Page-&gt;new&#40;&#41;;
  $page-&gt;total_entries&#40;$total_entries&#41;;
  $page-&gt;entries_per_page&#40;$entries_per_page&#41;;
  $page-&gt;current_page&#40;$current_page&#41;;

  print &#34;         First page: &#34;, $page-&gt;first_page, &#34;\n&#34;;
  print &#34;          Last page: &#34;, $page-&gt;last_page, &#34;\n&#34;;
  print &#34;First entry on page: &#34;, $page-&gt;first, &#34;\n&#34;;
  print &#34; Last entry on page: &#34;, $page-&gt;last, &#34;\n&#34;;

=head1 DESCRIPTION

When searching through large amounts of data, it is often the case
that a result set is returned that is larger than we want to display
on one page. This results in wanting to page through various pages of
data. The maths behind this is unfortunately fiddly, hence this
module.

The main concept is that you pass in the number of total entries, the
number of entries per page, and the current page number. You can then
call methods to find out how many pages of information there are, and
what number the first and last entries on the current page really are.

For example, say we wished to page through the integers from 1 to 100
with 20 entries per page. The first page would consist of 1-20, the
second page from 21-40, the third page from 41-60, the fourth page
from 61-80 and the fifth page from 81-100. This module would help you
work this out.

=head1 METHODS

=head2 new

This is the constructor, which takes no arguments.

  my $page = Data::Page-&gt;new&#40;&#41;;

There is also an old, deprecated constructor, which currently takes
two mandatory arguments, the total number of entries and the number of
entries per page. It also optionally takes the current page number:

  my $page = Data::Page-&gt;new&#40;$total_entries, $entries_per_page, $current_page&#41;;

=head2 total_entries

This method get or sets the total number of entries:

  print &#34;Entries:&#34;, $page-&gt;total_entries, &#34;\n&#34;;

=head2 entries_per_page

This method gets or sets the total number of entries per page &#40;which
defaults to 10&#41;:

  print &#34;Per page:&#34;, $page-&gt;entries_per_page, &#34;\n&#34;;

=head2 current_page

This method gets or sets the current page number &#40;which defaults to 1&#41;:

  print &#34;Page: &#34;, $page-&gt;current_page, &#34;\n&#34;;

=head2 entries_on_this_page

This methods returns the number of entries on the current page:

  print &#34;There are &#34;, $page-&gt;entries_on_this_page, &#34; entries displayed\n&#34;;

=head2 first_page

This method returns the first page. This is put in for reasons of
symmetry with last_page, as it always returns 1:

  print &#34;Pages range from: &#34;, $page-&gt;first_page, &#34;\n&#34;;

=head2 last_page

This method returns the total number of pages of information:

  print &#34;Pages range to: &#34;, $page-&gt;last_page, &#34;\n&#34;;

=head2 first

This method returns the number of the first entry on the current page:

  print &#34;Showing entries from: &#34;, $page-&gt;first, &#34;\n&#34;;

=head2 last

This method returns the number of the last entry on the current page:

  print &#34;Showing entries to: &#34;, $page-&gt;last, &#34;\n&#34;;

=head2 previous_page

This method returns the previous page number, if one exists. Otherwise
it returns undefined:

  if &#40;$page-&gt;previous_page&#41; {
    print &#34;Previous page number: &#34;, $page-&gt;previous_page, &#34;\n&#34;;
  }

=head2 next_page

This method returns the next page number, if one exists. Otherwise
it returns undefined:

  if &#40;$page-&gt;next_page&#41; {
    print &#34;Next page number: &#34;, $page-&gt;next_page, &#34;\n&#34;;
  }

=head2 splice

This method takes in a listref, and returns only the values which are
on the current page:

  @visible_holidays = $page-&gt;splice&#40;\@holidays&#41;;

=head2 skipped

This method is useful paging through data in a database using SQL
LIMIT clauses. It is simply $page-&gt;first - 1:

  $sth = $dbh-&gt;prepare&#40;
    q{SELECT * FROM table ORDER BY rec_date LIMIT ?, ?}
  &#41;;
  $sth-&gt;execute&#40;$page-&gt;skipped, $page-&gt;entries_per_page&#41;;

=head2 change_entries_per_page

This method changes the number of entries per page and the current page number
such that the L&lt;first&gt; item on the current page will be present on the new page.

 $page-&gt;total_entries&#40;50&#41;;
 $page-&gt;entries_per_page&#40;20&#41;;
 $page-&gt;current_page&#40;3&#41;;
 print $page-&gt;first; # 41
 $page-&gt;change_entries_per_page&#40;30&#41;;
 print $page-&gt;current_page; # 2 - the page that item 41 will show in

=head1 NOTES

It has been said before that this code is &#34;too simple&#34; for CPAN, but I
must disagree. I have seen people write this kind of code over and
over again and they always get it wrong. Perhaps now they will spend
more time getting the rest of their code right...

=head1 SEE ALSO

Related modules which may be of interest: L&lt;Data::Pageset&gt;,
L&lt;Data::Page::Tied&gt;, L&lt;Data::SpreadPagination&gt;.

=head1 AUTHOR

Based on code originally by Leo Lapworth, with many changes added by
by Leon Brocard &lt;acme@astray.com&gt;.

=head1 CONTRIBUTORS

James Laver &#40;ELPENGUIN&#41;

=head1 COPYRIGHT

Copyright &#40;C&#41; 2000-9, Leon Brocard

=head1 LICENSE

This module is free software; you can redistribute it or modify it
under the same terms as Perl itself.


</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;15&nbsp;19:30:37&nbsp;2012</span>
    <span class="description">mineiro [...] live.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">correct file
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Page.pm</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">package Data::Page;
use Carp;
use strict;
use base &#39;Class::Accessor::Chained::Fast&#39;;
__PACKAGE__-&gt;mk_accessors&#40;qw&#40;total_entries entries_per_page current_page total_numbers&#41;&#41;;

use vars qw&#40;$VERSION&#41;;
$VERSION = &#39;2.02&#39;;

sub new {
    my $class = shift;
    my $self  = {};
    bless&#40; $self, $class &#41;;

    my &#40; $total_entries, $entries_per_page, $current_page, $total_numbers &#41; = @_;
    $self-&gt;total_entries&#40; $total_entries       || 0 &#41;;
    $self-&gt;entries_per_page&#40; $entries_per_page || 10 &#41;;
    $self-&gt;current_page&#40; $current_page         || 1 &#41;;
    $self-&gt;total_numbers&#40; $total_numbers       || 10 &#41;;
    return $self;
}

sub entries_per_page {
    my $self             = shift;
    my $entries_per_page = $_[0];
    if &#40;@_&#41; {
        croak&#40;&#34;Fewer than one entry per page!&#34;&#41; if $entries_per_page &lt; 1;
        return $self-&gt;_entries_per_page_accessor&#40;@_&#41;;
    }
    return $self-&gt;_entries_per_page_accessor&#40;&#41;;
}

sub current_page {
    my $self = shift;
    if &#40;@_&#41; {
        return $self-&gt;_current_page_accessor&#40;@_&#41;;
    }
    return $self-&gt;first_page unless defined $self-&gt;_current_page_accessor;
    return $self-&gt;first_page
        if $self-&gt;_current_page_accessor &lt; $self-&gt;first_page;
    return $self-&gt;last_page
        if $self-&gt;_current_page_accessor &gt; $self-&gt;last_page;
    return $self-&gt;_current_page_accessor&#40;&#41;;
}

sub total_entries {
    my $self = shift;
    if &#40;@_&#41; {
        return $self-&gt;_total_entries_accessor&#40;@_&#41;;
    }
    return $self-&gt;_total_entries_accessor;
}

sub total_numbers {
    my $self = shift;
    if &#40;@_&#41; {
        return $self-&gt;_total_numbers_accessor&#40;@_&#41;;
    }
    return $self-&gt;_total_numbers_accessor;
}

sub entries_on_this_page {
    my $self = shift;

    if &#40; $self-&gt;total_entries == 0 &#41; {
        return 0;
    } else {
        return $self-&gt;last - $self-&gt;first + 1;
    }
}

sub first_page {
    my $self = shift;

    return 1;
}

sub last_page {
    my $self = shift;

    my $pages = $self-&gt;total_entries / $self-&gt;entries_per_page;
    my $last_page;

    if &#40; $pages == int $pages &#41; {
        $last_page = $pages;
    } else {
        $last_page = 1 + int&#40;$pages&#41;;
    }

    $last_page = 1 if $last_page &lt; 1;
    return $last_page;
}

sub first {
    my $self = shift;

    if &#40; $self-&gt;total_entries == 0 &#41; {
        return 0;
    } else {
        return &#40; &#40; $self-&gt;current_page - 1 &#41; * $self-&gt;entries_per_page &#41; + 1;
    }
}

sub last {
    my $self = shift;

    if &#40; $self-&gt;current_page == $self-&gt;last_page &#41; {
        return $self-&gt;total_entries;
    } else {
        return &#40; $self-&gt;current_page * $self-&gt;entries_per_page &#41;;
    }
}

sub previous_page {
    my $self = shift;

    if &#40; $self-&gt;current_page &gt; 1 &#41; {
        return $self-&gt;current_page - 1;
    } else {
        return undef;
    }
}

sub next_page {
    my $self = shift;

    $self-&gt;current_page &lt; $self-&gt;last_page ? $self-&gt;current_page + 1 : undef;
}

# This method would probably be better named &#39;select&#39; or &#39;slice&#39; or
# something, because it doesn&#39;t modify the array the way
# CORE::splice&#40;&#41; does.
sub splice {
    my &#40; $self, $array &#41; = @_;
    my $top = @$array &gt; $self-&gt;last ? $self-&gt;last : @$array;
    return &#40;&#41; if $top == 0;    # empty
    return @{$array}[ $self-&gt;first - 1 .. $top - 1 ];
}

sub skipped {
    my $self = shift;

    my $skipped = $self-&gt;first - 1;
    return 0 if $skipped &lt; 0;
    return $skipped;
}

sub change_entries_per_page {
    my &#40; $self, $new_epp &#41; = @_;

    use integer;
    croak&#40;&#34;Fewer than one entry per page!&#34;&#41; if $new_epp &lt; 1;
    my $new_page = 1 + &#40; $self-&gt;first / $new_epp &#41;;
    $self-&gt;entries_per_page&#40;$new_epp&#41;;
    $self-&gt;current_page&#40;$new_page&#41;;
}

sub home_number {
    my $self = shift;
    
    my $number = int &#40;$self-&gt;total_numbers / 2&#41;;
    
    if&#40;$self-&gt;current_page &gt; $number&#41;{
        if&#40;&#40;$self-&gt;current_page + $number&#41; &gt; $self-&gt;last_page&#41;{
            if&#40;$self-&gt;last_page &gt; $self-&gt;total_numbers&#41;{
                return $self-&gt;last_page - $self-&gt;total_numbers;
            }else{
                return 1;
            }
        }else{
            return $self-&gt;current_page - $number;
        }
    }else{
        return 1;
    }
}

sub end_number {
    my $self = shift;
    
    my $number = int &#40;$self-&gt;total_numbers / 2&#41;;
    
    if&#40;$self-&gt;last_page &gt; &#40;$self-&gt;current_page + $number&#41;&#41;{
        if&#40;$self-&gt;current_page &lt;= $number&#41;{
            if&#40;$self-&gt;last_page &gt; $self-&gt;total_numbers&#41;{
                return $self-&gt;total_numbers + 1;
            }else{
                return $self-&gt;last_page;
            }
        }else{
            return $self-&gt;current_page + $number;
        }
    }else{
        return $self-&gt;last_page;
    }
}

sub array_numbers {
    my $self = shift;
    
    my @array = &#40;$self-&gt;home_number .. $self-&gt;end_number&#41;;
    return @array;
}

1;

__END__

=head1 NAME

Data::Page - help when paging through sets of results

=head1 SYNOPSIS

  use Data::Page;

  my $page = Data::Page-&gt;new&#40;&#41;;
  $page-&gt;total_entries&#40;$total_entries&#41;;
  $page-&gt;entries_per_page&#40;$entries_per_page&#41;;
  $page-&gt;current_page&#40;$current_page&#41;;

  print &#34;         First page: &#34;, $page-&gt;first_page, &#34;\n&#34;;
  print &#34;          Last page: &#34;, $page-&gt;last_page, &#34;\n&#34;;
  print &#34;First entry on page: &#34;, $page-&gt;first, &#34;\n&#34;;
  print &#34; Last entry on page: &#34;, $page-&gt;last, &#34;\n&#34;;

=head1 DESCRIPTION

When searching through large amounts of data, it is often the case
that a result set is returned that is larger than we want to display
on one page. This results in wanting to page through various pages of
data. The maths behind this is unfortunately fiddly, hence this
module.

The main concept is that you pass in the number of total entries, the
number of entries per page, and the current page number. You can then
call methods to find out how many pages of information there are, and
what number the first and last entries on the current page really are.

For example, say we wished to page through the integers from 1 to 100
with 20 entries per page. The first page would consist of 1-20, the
second page from 21-40, the third page from 41-60, the fourth page
from 61-80 and the fifth page from 81-100. This module would help you
work this out.

=head1 METHODS

=head2 new

This is the constructor, which takes no arguments.

  my $page = Data::Page-&gt;new&#40;&#41;;

There is also an old, deprecated constructor, which currently takes
two mandatory arguments, the total number of entries and the number of
entries per page. It also optionally takes the current page number:

  my $page = Data::Page-&gt;new&#40;$total_entries, $entries_per_page, $current_page&#41;;

=head2 total_entries

This method get or sets the total number of entries:

  print &#34;Entries:&#34;, $page-&gt;total_entries, &#34;\n&#34;;

=head2 entries_per_page

This method gets or sets the total number of entries per page &#40;which
defaults to 10&#41;:

  print &#34;Per page:&#34;, $page-&gt;entries_per_page, &#34;\n&#34;;

=head2 current_page

This method gets or sets the current page number &#40;which defaults to 1&#41;:

  print &#34;Page: &#34;, $page-&gt;current_page, &#34;\n&#34;;

=head2 entries_on_this_page

This methods returns the number of entries on the current page:

  print &#34;There are &#34;, $page-&gt;entries_on_this_page, &#34; entries displayed\n&#34;;

=head2 first_page

This method returns the first page. This is put in for reasons of
symmetry with last_page, as it always returns 1:

  print &#34;Pages range from: &#34;, $page-&gt;first_page, &#34;\n&#34;;

=head2 last_page

This method returns the total number of pages of information:

  print &#34;Pages range to: &#34;, $page-&gt;last_page, &#34;\n&#34;;

=head2 first

This method returns the number of the first entry on the current page:

  print &#34;Showing entries from: &#34;, $page-&gt;first, &#34;\n&#34;;

=head2 last

This method returns the number of the last entry on the current page:

  print &#34;Showing entries to: &#34;, $page-&gt;last, &#34;\n&#34;;

=head2 previous_page

This method returns the previous page number, if one exists. Otherwise
it returns undefined:

  if &#40;$page-&gt;previous_page&#41; {
    print &#34;Previous page number: &#34;, $page-&gt;previous_page, &#34;\n&#34;;
  }

=head2 next_page

This method returns the next page number, if one exists. Otherwise
it returns undefined:

  if &#40;$page-&gt;next_page&#41; {
    print &#34;Next page number: &#34;, $page-&gt;next_page, &#34;\n&#34;;
  }

=head2 splice

This method takes in a listref, and returns only the values which are
on the current page:

  @visible_holidays = $page-&gt;splice&#40;\@holidays&#41;;

=head2 skipped

This method is useful paging through data in a database using SQL
LIMIT clauses. It is simply $page-&gt;first - 1:

  $sth = $dbh-&gt;prepare&#40;
    q{SELECT * FROM table ORDER BY rec_date LIMIT ?, ?}
  &#41;;
  $sth-&gt;execute&#40;$page-&gt;skipped, $page-&gt;entries_per_page&#41;;

=head2 change_entries_per_page

This method changes the number of entries per page and the current page number
such that the L&lt;first&gt; item on the current page will be present on the new page.

 $page-&gt;total_entries&#40;50&#41;;
 $page-&gt;entries_per_page&#40;20&#41;;
 $page-&gt;current_page&#40;3&#41;;
 print $page-&gt;first; # 41
 $page-&gt;change_entries_per_page&#40;30&#41;;
 print $page-&gt;current_page; # 2 - the page that item 41 will show in

=head1 NOTES

It has been said before that this code is &#34;too simple&#34; for CPAN, but I
must disagree. I have seen people write this kind of code over and
over again and they always get it wrong. Perhaps now they will spend
more time getting the rest of their code right...

=head1 SEE ALSO

Related modules which may be of interest: L&lt;Data::Pageset&gt;,
L&lt;Data::Page::Tied&gt;, L&lt;Data::SpreadPagination&gt;.

=head1 AUTHOR

Based on code originally by Leo Lapworth, with many changes added by
by Leon Brocard &lt;acme@astray.com&gt;.

=head1 CONTRIBUTORS

James Laver &#40;ELPENGUIN&#41;

=head1 COPYRIGHT

Copyright &#40;C&#41; 2000-9, Leon Brocard

=head1 LICENSE

This module is free software; you can redistribute it or modify it
under the same terms as Perl itself.


</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;15&nbsp;19:30:38&nbsp;2012</span>
    <span class="description">mineiro [...] live.nl -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;16&nbsp;13:23:46&nbsp;2019</span>
    <span class="description">ether [...] cpan.org -  Fixed in 2.02 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;16&nbsp;13:27:02&nbsp;2019</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2012-04-15 14:54:00, LUCAS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m sending out new methods
&gt; 
&gt; method total_numbers: gets and sets, total numbers in the paging
&gt; $page-&gt;total_entries&#40;50&#41;;
&gt; $page-&gt;entries_per_page&#40;2&#41;;
&gt; $page-&gt;current_page&#40;15&#41;;
&gt; $page-&gt;total_numbers&#40;6&#41;; # default 10
&gt; 
&gt; method home_number: gets, home number
&gt; method end_number: gets, end number
&gt; for&#40;my $i=$self-&gt;home_number; $i&lt;=$self-&gt;end_number; $i++&#41;{
&gt; print $i . &#39; &#39;;
&gt; }
&gt; result: 12 13 14 15 16 17 18
&gt; 
&gt; method array_numbers: gets, array numbers
&gt; foreach my $row &#40;$self-&gt;array_numbers&#41;{
&gt; print $row . &#39; &#39;;
&gt; }
&gt; result: 12 13 14 15 16 17 18
</div>
Thank you for your contribution, but it is unclear what your intent is here. Would you like to add documentation and tests for your patch? You can send it as a github pull request to  <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/karenetheridge/Data-Page">https://github.com/karenetheridge/Data-Page</a></span> -- see <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/ETHER/Data-Page-2.03/CONTRIBUTING">https://metacpan.org/source/ETHER/Data-Page-2.03/CONTRIBUTING</a></span>.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;20&nbsp;00:47:19&nbsp;2019</span>
    <span class="description">ether [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
