<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #47515 for Net-DNS: Net::DNS debug off, returns different structure</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #47515 for Net-DNS: Net::DNS debug off, returns different structure</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-DNS/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-DNS">Net-DNS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">47515</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-DNS/Active/">Net-DNS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
corycartwright [...] sbcglobal.net

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-22454-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.65    </td>
  </tr>
  <tr id="CF-22455-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




I was working on looking up NAPTR records with Net.rtf<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/627303/319291/I%20was%20working%20on%20looking%20up%20NAPTR%20records%20with%20Net.rtf">
Thu Jul 02 13:02:25 2009 (39.8k) by corycartwright [...] sbcglobal.net
</a>
</font></li>
</ul>


PGP.sig<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/655198/335950/PGP.sig">
Sat Aug 29 05:03:54 2009 (235b) by olaf [...] dacht.net
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/628992/320218/PGP.sig">
Mon Jul 06 15:19:30 2009 (235b) by olaf [...] dacht.net
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/627377/319333/PGP.sig">
Thu Jul 02 15:30:14 2009 (235b) by olaf [...] dacht.net
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;02&nbsp;13:02:25&nbsp;2009</span>
    <span class="description">corycartwright [...] sbcglobal.net -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Net::DNS debug off, returns different structure</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,
I was working on looking up NAPTR records with Net::DNS. I have some
simple code and I&#39;m using e164.org to demonstrate, but this will be used
on a private ENUM server. The problem is a the data structure that is
returned from a query seem to only be correct is debug is on. Bellow is
my sample code, and below that is the returned data with and without
debug on. Thanks, Cory  PM <span class="clickylink"><a target="new" rel="nofollow" href="http://perlmonks.org/?node_id=775110">http://perlmonks.org/?node_id=775110</a></span>

#!/usr/bin/perl # use strict; use warnings; use Data::Dumper; use
Net::DNS; my $domain = &#34;.e164.org&#34;; my $number =
join&#40;&#39;.&#39;,&#40;reverse&#40;split&#40;//,&#34;18604850042&#34;&#41;&#41;&#41;&#41; . $domain; print
&#34;$number\n&#34;; my $res = Net::DNS::Resolver-&gt;new&#40; nameservers =&gt;
[&#39;e164.org&#39;], recurse =&gt; 0, debug =&gt; 0, &#41;; my $NAPTR =
$res-&gt;query&#40;$number,&#39;NAPTR&#39;&#41;; print Dumper&#40;$NAPTR&#41;; print &#34;*** &#34; .
$NAPTR-&gt;{&#39;answer&#39;}-&gt;[1]-&gt;{&#39;regexp&#39;} . &#34;\n&#34;;
[download]

With debug off

$VAR1 = bless&#40; { &#39;answer&#39; =&gt; [], &#39;buffer&#39; =&gt; \&#39;üv 24005840681e164org#À
#&lt;Md E2U+X-ADDRESS7!^.*$!data:,CN=Cory C Cartwright;ST=CT;C=United
States!À #&lt;Gd
uE2U+SIP7!^\\+18604850042$!sip:6200@superiordesign.homelinux.net!&#39;,
&#39;question&#39; =&gt; [ bless&#40; { &#39;qclass&#39; =&gt; &#39;IN&#39;, &#39;qname&#39; =&gt; &#39;2.4.0.0.5.8.4.0.
+6.8.1.e164.org&#39;, &#39;qtype&#39; =&gt; &#39;NAPTR&#39; }, &#39;Net::DNS::Question&#39; &#41; ],
&#39;answerfrom&#39; =&gt; &#39;208.70.151.161&#39;, &#39;answersize&#39; =&gt; 220, &#39;additional&#39; =&gt;
[], &#39;authority&#39; =&gt; [], &#39;header&#39; =&gt; bless&#40; { &#39;nscount&#39; =&gt; 0, &#39;cd&#39; =&gt; 0,
&#39;qdcount&#39; =&gt; 1, &#39;ancount&#39; =&gt; 2, &#39;rcode&#39; =&gt; &#39;NOERROR&#39;, &#39;tc&#39; =&gt; 0,
&#39;opcode&#39; =&gt; &#39;QUERY&#39;, &#39;ad&#39; =&gt; 0, &#39;ra&#39; =&gt; 0, &#39;qr&#39; =&gt; 1, &#39;arcount&#39; =&gt; 0,
&#39;id&#39; =&gt; 64630, &#39;aa&#39; =&gt; 1, &#39;rd&#39; =&gt; 0 }, &#39;Net::DNS::Header&#39; &#41;, &#39;offset&#39; =&gt;
48 }, &#39;Net::DNS::Packet&#39; &#41;;
[download]

With debug on

;; query&#40;2.4.0.0.5.8.4.0.6.8.1.e164.org, NAPTR&#41; ;; Trying to set up a
AF_INET6&#40;&#41; family type UDP socket with srcaddr: +0.0.0.0 ... done ;;
setting up an AF_INET&#40;&#41; family type UDP socket ;;
send_udp&#40;208.70.151.161:53&#41; ;; answer from 208.70.151.161:53 : 220 bytes
;; HEADER SECTION ;; id = 1301 ;; qr = 1 opcode = QUERY aa = 1 tc = 0 rd
= 0 ;; ra = 0 ad = 0 cd = 0 rcode = NOERROR ;; qdcount = 1 ancount = 2
nscount = 0 arcount = 0 ;; QUESTION SECTION &#40;1 record&#41; ;;
2.4.0.0.5.8.4.0.6.8.1.e164.org. IN NAPTR ;; ANSWER SECTION &#40;2 records&#41;
2.4.0.0.5.8.4.0.6.8.1.e164.org. 60 IN NAPTR 100 10 &#34;u&#34; &#34;E2 +U+X-ADDRESS&#34;
&#34;!^.*$!data:,CN=Cory C Cartwright;ST=CT;C=United States! +&#34; .
2.4.0.0.5.8.4.0.6.8.1.e164.org. 60 IN NAPTR 100 10 &#34;u&#34; &#34;E2 +U+SIP&#34;
&#34;!^\+18604850042$!sip:6200@superiordesign.homelinux.net!&#34; . ;; AUTHORITY
SECTION &#40;0 records&#41; ;; ADDITIONAL SECTION &#40;0 records&#41; $VAR1 = bless&#40; {
&#39;answer&#39; =&gt; [ bless&#40; { &#39;flags&#39; =&gt; &#39;u&#39;, &#39;ttl&#39; =&gt; 60, &#39;name&#39; =&gt;
&#39;2.4.0.0.5.8.4.0.6.8 +.1.e164.org&#39;, &#39;service&#39; =&gt; &#39;E2U+X-ADDRESS&#39;,
&#39;rdata&#39; =&gt; &#39;d E2U+X-ADDRESS7!^.*$!data:,CN=Cory C
Cartwright;ST=CT;C=United States!&#39; +, &#39;preference&#39; =&gt; 10, &#39;rdlength&#39; =&gt;
77, &#39;regexp&#39; =&gt; &#39;!^.*$!data:,CN=Co +ry C Cartwright;ST=CT;C=United
States!&#39;, &#39;order&#39; =&gt; 100, &#39;type&#39; =&gt; &#39;NAPTR&#39;, &#39;class&#39; =&gt; &#39;IN&#39;,
&#39;replacement&#39; =&gt; &#39;&#39; }, &#39;Net::DNS::RR::NAPTR&#39; &#41;, bless&#40; { &#39;flags&#39; =&gt; &#39;u&#39;,
&#39;ttl&#39; =&gt; 60, &#39;name&#39; =&gt; &#39;2.4.0.0.5.8.4.0.6.8 +.1.e164.org&#39;, &#39;service&#39; =&gt;
&#39;E2U+SIP&#39;, &#39;rdata&#39; =&gt; &#39;d
uE2U+SIP7!^\\+18604850042$!sip:6200@superiordesign.homelinux.net!&#39;,
&#39;preference&#39; =&gt; 10, &#39;rdlength&#39; =&gt; 71, &#39;regexp&#39; =&gt; &#39;!^\\+18604850042$
+!sip:6200@superiordesign.homelinux.net!&#39;, &#39;order&#39; =&gt; 100, &#39;type&#39; =&gt;
&#39;NAPTR&#39;, &#39;class&#39; =&gt; &#39;IN&#39;, &#39;replacement&#39; =&gt; &#39;&#39; }, &#39;Net::DNS::RR::NAPTR&#39; &#41;
], &#39;buffer&#39; =&gt; undef, &#39;question&#39; =&gt; [ bless&#40; { &#39;qclass&#39; =&gt; &#39;IN&#39;, &#39;qname&#39;
=&gt; &#39;2.4.0.0.5.8.4.0. +6.8.1.e164.org&#39;, &#39;qtype&#39; =&gt; &#39;NAPTR&#39; },
&#39;Net::DNS::Question&#39; &#41; ], &#39;answerfrom&#39; =&gt; &#39;208.70.151.161&#39;, &#39;answersize&#39;
=&gt; 220, &#39;additional&#39; =&gt; [], &#39;authority&#39; =&gt; [], &#39;header&#39; =&gt; bless&#40; {
&#39;nscount&#39; =&gt; 0, &#39;cd&#39; =&gt; 0, &#39;qdcount&#39; =&gt; 1, &#39;ancount&#39; =&gt; 2, &#39;rcode&#39; =&gt;
&#39;NOERROR&#39;, &#39;tc&#39; =&gt; 0, &#39;opcode&#39; =&gt; &#39;QUERY&#39;, &#39;ad&#39; =&gt; 0, &#39;ra&#39; =&gt; 0, &#39;qr&#39; =&gt;
1, &#39;arcount&#39; =&gt; 0, &#39;id&#39; =&gt; 1301, &#39;aa&#39; =&gt; 1, &#39;rd&#39; =&gt; 0 },
&#39;Net::DNS::Header&#39; &#41;, &#39;offset&#39; =&gt; undef }, &#39;Net::DNS::Packet&#39; &#41;; ***
!^\+18604850042$!sip:6200@superiordesign.homelinux.net!
[download]
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> I was working on looking up NAPTR records with Net.rtf</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/627303/319291/I%20was%20working%20on%20looking%20up%20NAPTR%20records%20with%20Net.rtf">Download I was working on looking up NAPTR records with Net.rtf</a><br />
<span class="downloadcontenttype">application/msword 39.8k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;02&nbsp;13:04:06&nbsp;2009</span>
    <span class="description">corycartwright [...] sbcglobal.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">update:
Linux esacdev 2.6.27.21-78.2.41.fc9.i686 #1 SMP Mon Mar 23 23:45:58 EDT
2009 i686 i686 i386 GNU/Linux

This is perl, v5.10.0 built for i386-linux-thread-multi


bind ver, not sure e164.org


On Thu Jul 02 13:02:25 2009, corycartwright wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,
&gt; I was working on looking up NAPTR records with Net::DNS. I have some
&gt; simple code and I&#39;m using e164.org to demonstrate, but this will be used
&gt; on a private ENUM server. The problem is a the data structure that is
&gt; returned from a query seem to only be correct is debug is on. Bellow is
&gt; my sample code, and below that is the returned data with and without
&gt; debug on. Thanks, Cory  PM <span class="clickylink"><a target="new" rel="nofollow" href="http://perlmonks.org/?node_id=775110">http://perlmonks.org/?node_id=775110</a></span>
&gt; 
&gt; #!/usr/bin/perl # use strict; use warnings; use Data::Dumper; use
&gt; Net::DNS; my $domain = &#34;.e164.org&#34;; my $number =
&gt; join&#40;&#39;.&#39;,&#40;reverse&#40;split&#40;//,&#34;18604850042&#34;&#41;&#41;&#41;&#41; . $domain; print
&gt; &#34;$number\n&#34;; my $res = Net::DNS::Resolver-&gt;new&#40; nameservers =&gt;
&gt; [&#39;e164.org&#39;], recurse =&gt; 0, debug =&gt; 0, &#41;; my $NAPTR =
&gt; $res-&gt;query&#40;$number,&#39;NAPTR&#39;&#41;; print Dumper&#40;$NAPTR&#41;; print &#34;*** &#34; .
&gt; $NAPTR-&gt;{&#39;answer&#39;}-&gt;[1]-&gt;{&#39;regexp&#39;} . &#34;\n&#34;;
&gt; [download]
&gt; 
&gt; With debug off
&gt; 
&gt; $VAR1 = bless&#40; { &#39;answer&#39; =&gt; [], &#39;buffer&#39; =&gt; \&#39;üv 24005840681e164org#À
&gt; #&lt;Md E2U+X-ADDRESS7!^.*$!data:,CN=Cory C Cartwright;ST=CT;C=United
&gt; States!À #&lt;Gd
&gt; uE2U+SIP7!^\\+18604850042$!sip:6200@superiordesign.homelinux.net!&#39;,
&gt; &#39;question&#39; =&gt; [ bless&#40; { &#39;qclass&#39; =&gt; &#39;IN&#39;, &#39;qname&#39; =&gt; &#39;2.4.0.0.5.8.4.0.
&gt; +6.8.1.e164.org&#39;, &#39;qtype&#39; =&gt; &#39;NAPTR&#39; }, &#39;Net::DNS::Question&#39; &#41; ],
&gt; &#39;answerfrom&#39; =&gt; &#39;208.70.151.161&#39;, &#39;answersize&#39; =&gt; 220, &#39;additional&#39; =&gt;
&gt; [], &#39;authority&#39; =&gt; [], &#39;header&#39; =&gt; bless&#40; { &#39;nscount&#39; =&gt; 0, &#39;cd&#39; =&gt; 0,
&gt; &#39;qdcount&#39; =&gt; 1, &#39;ancount&#39; =&gt; 2, &#39;rcode&#39; =&gt; &#39;NOERROR&#39;, &#39;tc&#39; =&gt; 0,
&gt; &#39;opcode&#39; =&gt; &#39;QUERY&#39;, &#39;ad&#39; =&gt; 0, &#39;ra&#39; =&gt; 0, &#39;qr&#39; =&gt; 1, &#39;arcount&#39; =&gt; 0,
&gt; &#39;id&#39; =&gt; 64630, &#39;aa&#39; =&gt; 1, &#39;rd&#39; =&gt; 0 }, &#39;Net::DNS::Header&#39; &#41;, &#39;offset&#39; =&gt;
&gt; 48 }, &#39;Net::DNS::Packet&#39; &#41;;
&gt; [download]
&gt; 
&gt; With debug on
&gt; 
&gt; ;; query&#40;2.4.0.0.5.8.4.0.6.8.1.e164.org, NAPTR&#41; ;; Trying to set up a
&gt; AF_INET6&#40;&#41; family type UDP socket with srcaddr: +0.0.0.0 ... done ;;
&gt; setting up an AF_INET&#40;&#41; family type UDP socket ;;
&gt; send_udp&#40;208.70.151.161:53&#41; ;; answer from 208.70.151.161:53 : 220 bytes
&gt; ;; HEADER SECTION ;; id = 1301 ;; qr = 1 opcode = QUERY aa = 1 tc = 0 rd
&gt; = 0 ;; ra = 0 ad = 0 cd = 0 rcode = NOERROR ;; qdcount = 1 ancount = 2
&gt; nscount = 0 arcount = 0 ;; QUESTION SECTION &#40;1 record&#41; ;;
&gt; 2.4.0.0.5.8.4.0.6.8.1.e164.org. IN NAPTR ;; ANSWER SECTION &#40;2 records&#41;
&gt; 2.4.0.0.5.8.4.0.6.8.1.e164.org. 60 IN NAPTR 100 10 &#34;u&#34; &#34;E2 +U+X-ADDRESS&#34;
&gt; &#34;!^.*$!data:,CN=Cory C Cartwright;ST=CT;C=United States! +&#34; .
&gt; 2.4.0.0.5.8.4.0.6.8.1.e164.org. 60 IN NAPTR 100 10 &#34;u&#34; &#34;E2 +U+SIP&#34;
&gt; &#34;!^\+18604850042$!sip:6200@superiordesign.homelinux.net!&#34; . ;; AUTHORITY
&gt; SECTION &#40;0 records&#41; ;; ADDITIONAL SECTION &#40;0 records&#41; $VAR1 = bless&#40; {
&gt; &#39;answer&#39; =&gt; [ bless&#40; { &#39;flags&#39; =&gt; &#39;u&#39;, &#39;ttl&#39; =&gt; 60, &#39;name&#39; =&gt;
&gt; &#39;2.4.0.0.5.8.4.0.6.8 +.1.e164.org&#39;, &#39;service&#39; =&gt; &#39;E2U+X-ADDRESS&#39;,
&gt; &#39;rdata&#39; =&gt; &#39;d E2U+X-ADDRESS7!^.*$!data:,CN=Cory C
&gt; Cartwright;ST=CT;C=United States!&#39; +, &#39;preference&#39; =&gt; 10, &#39;rdlength&#39; =&gt;
&gt; 77, &#39;regexp&#39; =&gt; &#39;!^.*$!data:,CN=Co +ry C Cartwright;ST=CT;C=United
&gt; States!&#39;, &#39;order&#39; =&gt; 100, &#39;type&#39; =&gt; &#39;NAPTR&#39;, &#39;class&#39; =&gt; &#39;IN&#39;,
&gt; &#39;replacement&#39; =&gt; &#39;&#39; }, &#39;Net::DNS::RR::NAPTR&#39; &#41;, bless&#40; { &#39;flags&#39; =&gt; &#39;u&#39;,
&gt; &#39;ttl&#39; =&gt; 60, &#39;name&#39; =&gt; &#39;2.4.0.0.5.8.4.0.6.8 +.1.e164.org&#39;, &#39;service&#39; =&gt;
&gt; &#39;E2U+SIP&#39;, &#39;rdata&#39; =&gt; &#39;d
&gt; uE2U+SIP7!^\\+18604850042$!sip:6200@superiordesign.homelinux.net!&#39;,
&gt; &#39;preference&#39; =&gt; 10, &#39;rdlength&#39; =&gt; 71, &#39;regexp&#39; =&gt; &#39;!^\\+18604850042$
&gt; +!sip:6200@superiordesign.homelinux.net!&#39;, &#39;order&#39; =&gt; 100, &#39;type&#39; =&gt;
&gt; &#39;NAPTR&#39;, &#39;class&#39; =&gt; &#39;IN&#39;, &#39;replacement&#39; =&gt; &#39;&#39; }, &#39;Net::DNS::RR::NAPTR&#39; &#41;
&gt; ], &#39;buffer&#39; =&gt; undef, &#39;question&#39; =&gt; [ bless&#40; { &#39;qclass&#39; =&gt; &#39;IN&#39;, &#39;qname&#39;
&gt; =&gt; &#39;2.4.0.0.5.8.4.0. +6.8.1.e164.org&#39;, &#39;qtype&#39; =&gt; &#39;NAPTR&#39; },
&gt; &#39;Net::DNS::Question&#39; &#41; ], &#39;answerfrom&#39; =&gt; &#39;208.70.151.161&#39;, &#39;answersize&#39;
&gt; =&gt; 220, &#39;additional&#39; =&gt; [], &#39;authority&#39; =&gt; [], &#39;header&#39; =&gt; bless&#40; {
&gt; &#39;nscount&#39; =&gt; 0, &#39;cd&#39; =&gt; 0, &#39;qdcount&#39; =&gt; 1, &#39;ancount&#39; =&gt; 2, &#39;rcode&#39; =&gt;
&gt; &#39;NOERROR&#39;, &#39;tc&#39; =&gt; 0, &#39;opcode&#39; =&gt; &#39;QUERY&#39;, &#39;ad&#39; =&gt; 0, &#39;ra&#39; =&gt; 0, &#39;qr&#39; =&gt;
&gt; 1, &#39;arcount&#39; =&gt; 0, &#39;id&#39; =&gt; 1301, &#39;aa&#39; =&gt; 1, &#39;rd&#39; =&gt; 0 },
&gt; &#39;Net::DNS::Header&#39; &#41;, &#39;offset&#39; =&gt; undef }, &#39;Net::DNS::Packet&#39; &#41;; ***
&gt; !^\+18604850042$!sip:6200@superiordesign.homelinux.net!
&gt; [download]
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;02&nbsp;13:04:08&nbsp;2009</span>
    <span class="description">corycartwright [...] sbcglobal.net -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;02&nbsp;15:30:13&nbsp;2009</span>
    <span class="description">olaf [...] dacht.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #47515] Net::DNS debug off, returns different structure </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 2 Jul 2009 21:29:41 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Olaf Kolkman &lt;olaf [...] dacht.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
The reason why they are different is because some parsing off the off- 
the-wire data &#40;that lives in the buffer&#41; is only parsed to various  
attributes of the structure when that data is needed. When in debug  
mode that data is apparently needed by the debug code.


The reason to have objects and classes is to provide the data through  
all kind of methods. In this case you can digest the packet by  using  
the answer&#40;&#41; method and access the RRs therein via the methods  
available in Net::DNS::RR.

--Olaf


On 2 jul 2009, at 19:02, Cory via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thu Jul 02 13:02:25 2009: Request 47515 was acted upon.
&gt; Transaction: Ticket created by corycartwright
&gt;       Queue: Net-DNS
&gt;     Subject: Net::DNS debug off, returns different structure
&gt;   Broken in: 0.65
&gt;    Severity: Important
&gt;       Owner: Nobody
&gt;  Requestors: corycartwright@sbcglobal.net
&gt;      Status: new
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=47515">https://rt.cpan.org/Ticket/Display.html?id=47515</a></span> &gt;
&gt;
&gt;
&gt; Hello,
&gt; I was working on looking up NAPTR records with Net::DNS. I have some
&gt; simple code and I&#39;m using e164.org to demonstrate, but this will be  
&gt; used
&gt; on a private ENUM server. The problem is a the data structure that is
&gt; returned from a query seem to only be correct is debug is on. Bellow  
&gt; is
&gt; my sample code, and below that is the returned data with and without
&gt; debug on. Thanks, Cory  PM <span class="clickylink"><a target="new" rel="nofollow" href="http://perlmonks.org/?node_id=775110">http://perlmonks.org/?node_id=775110</a></span>
&gt;
&gt; #!/usr/bin/perl # use strict; use warnings; use Data::Dumper; use
&gt; Net::DNS; my $domain = &#34;.e164.org&#34;; my $number =
&gt; join&#40;&#39;.&#39;,&#40;reverse&#40;split&#40;//,&#34;18604850042&#34;&#41;&#41;&#41;&#41; . $domain; print
&gt; &#34;$number\n&#34;; my $res = Net::DNS::Resolver-&gt;new&#40; nameservers =&gt;
&gt; [&#39;e164.org&#39;], recurse =&gt; 0, debug =&gt; 0, &#41;; my $NAPTR =
&gt; $res-&gt;query&#40;$number,&#39;NAPTR&#39;&#41;; print Dumper&#40;$NAPTR&#41;; print &#34;*** &#34; .
&gt; $NAPTR-&gt;{&#39;answer&#39;}-&gt;[1]-&gt;{&#39;regexp&#39;} . &#34;\n&#34;;
&gt; [download]
&gt;
&gt; With debug off
&gt;
&gt; $VAR1 = bless&#40; { &#39;answer&#39; =&gt; [], &#39;buffer&#39; =&gt; \&#39;üv 24005840681e164org#À
&gt; #&lt;Md E2U+X-ADDRESS7!^.*$!data:,CN=Cory C Cartwright;ST=CT;C=United
&gt; States!À #&lt;Gd
&gt; uE2U+SIP7!^\\+18604850042$!sip:6200@superiordesign.homelinux.net!&#39;,
&gt; &#39;question&#39; =&gt; [ bless&#40; { &#39;qclass&#39; =&gt; &#39;IN&#39;, &#39;qname&#39; =&gt;  
&gt; &#39;2.4.0.0.5.8.4.0.
&gt; +6.8.1.e164.org&#39;, &#39;qtype&#39; =&gt; &#39;NAPTR&#39; }, &#39;Net::DNS::Question&#39; &#41; ],
&gt; &#39;answerfrom&#39; =&gt; &#39;208.70.151.161&#39;, &#39;answersize&#39; =&gt; 220, &#39;additional&#39; =&gt;
&gt; [], &#39;authority&#39; =&gt; [], &#39;header&#39; =&gt; bless&#40; { &#39;nscount&#39; =&gt; 0, &#39;cd&#39; =&gt; 0,
&gt; &#39;qdcount&#39; =&gt; 1, &#39;ancount&#39; =&gt; 2, &#39;rcode&#39; =&gt; &#39;NOERROR&#39;, &#39;tc&#39; =&gt; 0,
&gt; &#39;opcode&#39; =&gt; &#39;QUERY&#39;, &#39;ad&#39; =&gt; 0, &#39;ra&#39; =&gt; 0, &#39;qr&#39; =&gt; 1, &#39;arcount&#39; =&gt; 0,
&gt; &#39;id&#39; =&gt; 64630, &#39;aa&#39; =&gt; 1, &#39;rd&#39; =&gt; 0 }, &#39;Net::DNS::Header&#39; &#41;,  
&gt; &#39;offset&#39; =&gt;
&gt; 48 }, &#39;Net::DNS::Packet&#39; &#41;;
&gt; [download]
&gt;
&gt; With debug on
&gt;
&gt; ;; query&#40;2.4.0.0.5.8.4.0.6.8.1.e164.org, NAPTR&#41; ;; Trying to set up a
&gt; AF_INET6&#40;&#41; family type UDP socket with srcaddr: +0.0.0.0 ... done ;;
&gt; setting up an AF_INET&#40;&#41; family type UDP socket ;;
&gt; send_udp&#40;208.70.151.161:53&#41; ;; answer from 208.70.151.161:53 : 220  
&gt; bytes
&gt; ;; HEADER SECTION ;; id = 1301 ;; qr = 1 opcode = QUERY aa = 1 tc =  
&gt; 0 rd
&gt; = 0 ;; ra = 0 ad = 0 cd = 0 rcode = NOERROR ;; qdcount = 1 ancount = 2
&gt; nscount = 0 arcount = 0 ;; QUESTION SECTION &#40;1 record&#41; ;;
&gt; 2.4.0.0.5.8.4.0.6.8.1.e164.org. IN NAPTR ;; ANSWER SECTION &#40;2 records&#41;
&gt; 2.4.0.0.5.8.4.0.6.8.1.e164.org. 60 IN NAPTR 100 10 &#34;u&#34; &#34;E2 +U+X- 
&gt; ADDRESS&#34;
&gt; &#34;!^.*$!data:,CN=Cory C Cartwright;ST=CT;C=United States! +&#34; .
&gt; 2.4.0.0.5.8.4.0.6.8.1.e164.org. 60 IN NAPTR 100 10 &#34;u&#34; &#34;E2 +U+SIP&#34;
&gt; &#34;!^\+18604850042$!sip:6200@superiordesign.homelinux.net!&#34; . ;;  
&gt; AUTHORITY
&gt; SECTION &#40;0 records&#41; ;; ADDITIONAL SECTION &#40;0 records&#41; $VAR1 = bless&#40; {
&gt; &#39;answer&#39; =&gt; [ bless&#40; { &#39;flags&#39; =&gt; &#39;u&#39;, &#39;ttl&#39; =&gt; 60, &#39;name&#39; =&gt;
&gt; &#39;2.4.0.0.5.8.4.0.6.8 +.1.e164.org&#39;, &#39;service&#39; =&gt; &#39;E2U+X-ADDRESS&#39;,
&gt; &#39;rdata&#39; =&gt; &#39;d E2U+X-ADDRESS7!^.*$!data:,CN=Cory C
&gt; Cartwright;ST=CT;C=United States!&#39; +, &#39;preference&#39; =&gt; 10, &#39;rdlength&#39;  
&gt; =&gt;
&gt; 77, &#39;regexp&#39; =&gt; &#39;!^.*$!data:,CN=Co +ry C Cartwright;ST=CT;C=United
&gt; States!&#39;, &#39;order&#39; =&gt; 100, &#39;type&#39; =&gt; &#39;NAPTR&#39;, &#39;class&#39; =&gt; &#39;IN&#39;,
&gt; &#39;replacement&#39; =&gt; &#39;&#39; }, &#39;Net::DNS::RR::NAPTR&#39; &#41;, bless&#40; { &#39;flags&#39; =&gt;  
&gt; &#39;u&#39;,
&gt; &#39;ttl&#39; =&gt; 60, &#39;name&#39; =&gt; &#39;2.4.0.0.5.8.4.0.6.8 +.1.e164.org&#39;, &#39;service&#39;  
&gt; =&gt;
&gt; &#39;E2U+SIP&#39;, &#39;rdata&#39; =&gt; &#39;d
&gt; uE2U+SIP7!^\\+18604850042$!sip:6200@superiordesign.homelinux.net!&#39;,
&gt; &#39;preference&#39; =&gt; 10, &#39;rdlength&#39; =&gt; 71, &#39;regexp&#39; =&gt; &#39;!^\\+18604850042$
&gt; +!sip:6200@superiordesign.homelinux.net!&#39;, &#39;order&#39; =&gt; 100, &#39;type&#39; =&gt;
&gt; &#39;NAPTR&#39;, &#39;class&#39; =&gt; &#39;IN&#39;, &#39;replacement&#39; =&gt; &#39;&#39; },  
&gt; &#39;Net::DNS::RR::NAPTR&#39; &#41;
&gt; ], &#39;buffer&#39; =&gt; undef, &#39;question&#39; =&gt; [ bless&#40; { &#39;qclass&#39; =&gt; &#39;IN&#39;,  
&gt; &#39;qname&#39;
&gt; =&gt; &#39;2.4.0.0.5.8.4.0. +6.8.1.e164.org&#39;, &#39;qtype&#39; =&gt; &#39;NAPTR&#39; },
&gt; &#39;Net::DNS::Question&#39; &#41; ], &#39;answerfrom&#39; =&gt; &#39;208.70.151.161&#39;,  
&gt; &#39;answersize&#39;
&gt; =&gt; 220, &#39;additional&#39; =&gt; [], &#39;authority&#39; =&gt; [], &#39;header&#39; =&gt; bless&#40; {
&gt; &#39;nscount&#39; =&gt; 0, &#39;cd&#39; =&gt; 0, &#39;qdcount&#39; =&gt; 1, &#39;ancount&#39; =&gt; 2, &#39;rcode&#39; =&gt;
&gt; &#39;NOERROR&#39;, &#39;tc&#39; =&gt; 0, &#39;opcode&#39; =&gt; &#39;QUERY&#39;, &#39;ad&#39; =&gt; 0, &#39;ra&#39; =&gt; 0,  
&gt; &#39;qr&#39; =&gt;
&gt; 1, &#39;arcount&#39; =&gt; 0, &#39;id&#39; =&gt; 1301, &#39;aa&#39; =&gt; 1, &#39;rd&#39; =&gt; 0 },
&gt; &#39;Net::DNS::Header&#39; &#41;, &#39;offset&#39; =&gt; undef }, &#39;Net::DNS::Packet&#39; &#41;; ***
&gt; !^\+18604850042$!sip:6200@superiordesign.homelinux.net!
&gt; [download]
&gt;
&gt;
&gt; &lt;I was working on looking up NAPTR records with Net.rtf&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/627377/319333/PGP.sig">Download PGP.sig</a><br />
<span class="downloadcontenttype">application/pgp-signature 235b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;06&nbsp;09:49:00&nbsp;2009</span>
    <span class="description">corycartwright [...] sbcglobal.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Olaf,

So is this a bug?  I will install Net::DNS::RR and try it that way.

Thanks,
Cory

On Thu Jul 02 15:30:13 2009, olaf@dacht.net wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; The reason why they are different is because some parsing off the off- 
&gt; the-wire data &#40;that lives in the buffer&#41; is only parsed to various  
&gt; attributes of the structure when that data is needed. When in debug  
&gt; mode that data is apparently needed by the debug code.
&gt; 
&gt; 
&gt; The reason to have objects and classes is to provide the data through  
&gt; all kind of methods. In this case you can digest the packet by  using  
&gt; the answer&#40;&#41; method and access the RRs therein via the methods  
&gt; available in Net::DNS::RR.
&gt; 
&gt; --Olaf
&gt; 
&gt; 
&gt; On 2 jul 2009, at 19:02, Cory via RT wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; Thu Jul 02 13:02:25 2009: Request 47515 was acted upon.
&gt; &gt; Transaction: Ticket created by corycartwright
&gt; &gt;       Queue: Net-DNS
&gt; &gt;     Subject: Net::DNS debug off, returns different structure
&gt; &gt;   Broken in: 0.65
&gt; &gt;    Severity: Important
&gt; &gt;       Owner: Nobody
&gt; &gt;  Requestors: corycartwright@sbcglobal.net
&gt; &gt;      Status: new
&gt; &gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=47515">https://rt.cpan.org/Ticket/Display.html?id=47515</a></span> &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; Hello,
&gt; &gt; I was working on looking up NAPTR records with Net::DNS. I have some
&gt; &gt; simple code and I&#39;m using e164.org to demonstrate, but this will be  
&gt; &gt; used
&gt; &gt; on a private ENUM server. The problem is a the data structure that is
&gt; &gt; returned from a query seem to only be correct is debug is on. Bellow  
&gt; &gt; is
&gt; &gt; my sample code, and below that is the returned data with and without
&gt; &gt; debug on. Thanks, Cory  PM <span class="clickylink"><a target="new" rel="nofollow" href="http://perlmonks.org/?node_id=775110">http://perlmonks.org/?node_id=775110</a></span>
&gt; &gt;
&gt; &gt; #!/usr/bin/perl # use strict; use warnings; use Data::Dumper; use
&gt; &gt; Net::DNS; my $domain = &#34;.e164.org&#34;; my $number =
&gt; &gt; join&#40;&#39;.&#39;,&#40;reverse&#40;split&#40;//,&#34;18604850042&#34;&#41;&#41;&#41;&#41; . $domain; print
&gt; &gt; &#34;$number\n&#34;; my $res = Net::DNS::Resolver-&gt;new&#40; nameservers =&gt;
&gt; &gt; [&#39;e164.org&#39;], recurse =&gt; 0, debug =&gt; 0, &#41;; my $NAPTR =
&gt; &gt; $res-&gt;query&#40;$number,&#39;NAPTR&#39;&#41;; print Dumper&#40;$NAPTR&#41;; print &#34;*** &#34; .
&gt; &gt; $NAPTR-&gt;{&#39;answer&#39;}-&gt;[1]-&gt;{&#39;regexp&#39;} . &#34;\n&#34;;
&gt; &gt; [download]
&gt; &gt;
&gt; &gt; With debug off
&gt; &gt;
&gt; &gt; $VAR1 = bless&#40; { &#39;answer&#39; =&gt; [], &#39;buffer&#39; =&gt; \&#39;üv 24005840681e164org#À
&gt; &gt; #&lt;Md E2U+X-ADDRESS7!^.*$!data:,CN=Cory C Cartwright;ST=CT;C=United
&gt; &gt; States!À #&lt;Gd
&gt; &gt; uE2U+SIP7!^\\+18604850042$!sip:6200@superiordesign.homelinux.net!&#39;,
&gt; &gt; &#39;question&#39; =&gt; [ bless&#40; { &#39;qclass&#39; =&gt; &#39;IN&#39;, &#39;qname&#39; =&gt;  
&gt; &gt; &#39;2.4.0.0.5.8.4.0.
&gt; &gt; +6.8.1.e164.org&#39;, &#39;qtype&#39; =&gt; &#39;NAPTR&#39; }, &#39;Net::DNS::Question&#39; &#41; ],
&gt; &gt; &#39;answerfrom&#39; =&gt; &#39;208.70.151.161&#39;, &#39;answersize&#39; =&gt; 220, &#39;additional&#39; =&gt;
&gt; &gt; [], &#39;authority&#39; =&gt; [], &#39;header&#39; =&gt; bless&#40; { &#39;nscount&#39; =&gt; 0, &#39;cd&#39; =&gt; 0,
&gt; &gt; &#39;qdcount&#39; =&gt; 1, &#39;ancount&#39; =&gt; 2, &#39;rcode&#39; =&gt; &#39;NOERROR&#39;, &#39;tc&#39; =&gt; 0,
&gt; &gt; &#39;opcode&#39; =&gt; &#39;QUERY&#39;, &#39;ad&#39; =&gt; 0, &#39;ra&#39; =&gt; 0, &#39;qr&#39; =&gt; 1, &#39;arcount&#39; =&gt; 0,
&gt; &gt; &#39;id&#39; =&gt; 64630, &#39;aa&#39; =&gt; 1, &#39;rd&#39; =&gt; 0 }, &#39;Net::DNS::Header&#39; &#41;,  
&gt; &gt; &#39;offset&#39; =&gt;
&gt; &gt; 48 }, &#39;Net::DNS::Packet&#39; &#41;;
&gt; &gt; [download]
&gt; &gt;
&gt; &gt; With debug on
&gt; &gt;
&gt; &gt; ;; query&#40;2.4.0.0.5.8.4.0.6.8.1.e164.org, NAPTR&#41; ;; Trying to set up a
&gt; &gt; AF_INET6&#40;&#41; family type UDP socket with srcaddr: +0.0.0.0 ... done ;;
&gt; &gt; setting up an AF_INET&#40;&#41; family type UDP socket ;;
&gt; &gt; send_udp&#40;208.70.151.161:53&#41; ;; answer from 208.70.151.161:53 : 220  
&gt; &gt; bytes
&gt; &gt; ;; HEADER SECTION ;; id = 1301 ;; qr = 1 opcode = QUERY aa = 1 tc =  
&gt; &gt; 0 rd
&gt; &gt; = 0 ;; ra = 0 ad = 0 cd = 0 rcode = NOERROR ;; qdcount = 1 ancount = 2
&gt; &gt; nscount = 0 arcount = 0 ;; QUESTION SECTION &#40;1 record&#41; ;;
&gt; &gt; 2.4.0.0.5.8.4.0.6.8.1.e164.org. IN NAPTR ;; ANSWER SECTION &#40;2 records&#41;
&gt; &gt; 2.4.0.0.5.8.4.0.6.8.1.e164.org. 60 IN NAPTR 100 10 &#34;u&#34; &#34;E2 +U+X- 
&gt; &gt; ADDRESS&#34;
&gt; &gt; &#34;!^.*$!data:,CN=Cory C Cartwright;ST=CT;C=United States! +&#34; .
&gt; &gt; 2.4.0.0.5.8.4.0.6.8.1.e164.org. 60 IN NAPTR 100 10 &#34;u&#34; &#34;E2 +U+SIP&#34;
&gt; &gt; &#34;!^\+18604850042$!sip:6200@superiordesign.homelinux.net!&#34; . ;;  
&gt; &gt; AUTHORITY
&gt; &gt; SECTION &#40;0 records&#41; ;; ADDITIONAL SECTION &#40;0 records&#41; $VAR1 = bless&#40; {
&gt; &gt; &#39;answer&#39; =&gt; [ bless&#40; { &#39;flags&#39; =&gt; &#39;u&#39;, &#39;ttl&#39; =&gt; 60, &#39;name&#39; =&gt;
&gt; &gt; &#39;2.4.0.0.5.8.4.0.6.8 +.1.e164.org&#39;, &#39;service&#39; =&gt; &#39;E2U+X-ADDRESS&#39;,
&gt; &gt; &#39;rdata&#39; =&gt; &#39;d E2U+X-ADDRESS7!^.*$!data:,CN=Cory C
&gt; &gt; Cartwright;ST=CT;C=United States!&#39; +, &#39;preference&#39; =&gt; 10, &#39;rdlength&#39;  
&gt; &gt; =&gt;
&gt; &gt; 77, &#39;regexp&#39; =&gt; &#39;!^.*$!data:,CN=Co +ry C Cartwright;ST=CT;C=United
&gt; &gt; States!&#39;, &#39;order&#39; =&gt; 100, &#39;type&#39; =&gt; &#39;NAPTR&#39;, &#39;class&#39; =&gt; &#39;IN&#39;,
&gt; &gt; &#39;replacement&#39; =&gt; &#39;&#39; }, &#39;Net::DNS::RR::NAPTR&#39; &#41;, bless&#40; { &#39;flags&#39; =&gt;  
&gt; &gt; &#39;u&#39;,
&gt; &gt; &#39;ttl&#39; =&gt; 60, &#39;name&#39; =&gt; &#39;2.4.0.0.5.8.4.0.6.8 +.1.e164.org&#39;, &#39;service&#39;  
&gt; &gt; =&gt;
&gt; &gt; &#39;E2U+SIP&#39;, &#39;rdata&#39; =&gt; &#39;d
&gt; &gt; uE2U+SIP7!^\\+18604850042$!sip:6200@superiordesign.homelinux.net!&#39;,
&gt; &gt; &#39;preference&#39; =&gt; 10, &#39;rdlength&#39; =&gt; 71, &#39;regexp&#39; =&gt; &#39;!^\\+18604850042$
&gt; &gt; +!sip:6200@superiordesign.homelinux.net!&#39;, &#39;order&#39; =&gt; 100, &#39;type&#39; =&gt;
&gt; &gt; &#39;NAPTR&#39;, &#39;class&#39; =&gt; &#39;IN&#39;, &#39;replacement&#39; =&gt; &#39;&#39; },  
&gt; &gt; &#39;Net::DNS::RR::NAPTR&#39; &#41;
&gt; &gt; ], &#39;buffer&#39; =&gt; undef, &#39;question&#39; =&gt; [ bless&#40; { &#39;qclass&#39; =&gt; &#39;IN&#39;,  
&gt; &gt; &#39;qname&#39;
&gt; &gt; =&gt; &#39;2.4.0.0.5.8.4.0. +6.8.1.e164.org&#39;, &#39;qtype&#39; =&gt; &#39;NAPTR&#39; },
&gt; &gt; &#39;Net::DNS::Question&#39; &#41; ], &#39;answerfrom&#39; =&gt; &#39;208.70.151.161&#39;,  
&gt; &gt; &#39;answersize&#39;
&gt; &gt; =&gt; 220, &#39;additional&#39; =&gt; [], &#39;authority&#39; =&gt; [], &#39;header&#39; =&gt; bless&#40; {
&gt; &gt; &#39;nscount&#39; =&gt; 0, &#39;cd&#39; =&gt; 0, &#39;qdcount&#39; =&gt; 1, &#39;ancount&#39; =&gt; 2, &#39;rcode&#39; =&gt;
&gt; &gt; &#39;NOERROR&#39;, &#39;tc&#39; =&gt; 0, &#39;opcode&#39; =&gt; &#39;QUERY&#39;, &#39;ad&#39; =&gt; 0, &#39;ra&#39; =&gt; 0,  
&gt; &gt; &#39;qr&#39; =&gt;
&gt; &gt; 1, &#39;arcount&#39; =&gt; 0, &#39;id&#39; =&gt; 1301, &#39;aa&#39; =&gt; 1, &#39;rd&#39; =&gt; 0 },
&gt; &gt; &#39;Net::DNS::Header&#39; &#41;, &#39;offset&#39; =&gt; undef }, &#39;Net::DNS::Packet&#39; &#41;; ***
&gt; &gt; !^\+18604850042$!sip:6200@superiordesign.homelinux.net!
&gt; &gt; [download]
&gt; &gt;
&gt; &gt;
&gt; &gt; &lt;I was working on looking up NAPTR records with Net.rtf&gt;
</div>&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;06&nbsp;15:19:30&nbsp;2009</span>
    <span class="description">olaf [...] dacht.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #47515] Net::DNS debug off, returns different structure </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 6 Jul 2009 21:18:52 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Olaf Kolkman &lt;olaf [...] dacht.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On 6 jul 2009, at 15:49, Cory via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; So is this a bug?
</div>

No its not a bug.. its a feature..

what you could also do is call $packet-&gt;string and then look at the  
dump. I would bet the dumps would be similar.



--Olaf
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/628992/320218/PGP.sig">Download PGP.sig</a><br />
<span class="downloadcontenttype">application/pgp-signature 235b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;28&nbsp;13:12:04&nbsp;2009</span>
    <span class="description">ramsdell [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;28&nbsp;16:34:13&nbsp;2009</span>
    <span class="description">olaf [...] dacht.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #47515] Net::DNS debug off, returns different structure </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 28 Aug 2009 22:33:53 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Net-DNS [...] rt.cpan.org&#34; &lt;bug-Net-DNS [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Olaf Kolkman &lt;olaf [...] dacht.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;28&nbsp;16:46:06&nbsp;2009</span>
    <span class="description">corycartwright [...] sbcglobal.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #47515] Net::DNS debug off, returns different structure</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 28 Aug 2009 16:45:41 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Cory Cartwright &lt;corycartwright [...] sbcglobal.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;29&nbsp;05:03:54&nbsp;2009</span>
    <span class="description">olaf [...] dacht.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #47515] Net::DNS debug off, returns different structure </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Aug 2009 11:03:24 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Olaf Kolkman &lt;olaf [...] dacht.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Aug 28, 2009, at 10:34 PM, Olaf M. Kolkman via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;       Queue: Net-DNS
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=47515">http://rt.cpan.org/Ticket/Display.html?id=47515</a></span> &gt;
&gt;
&gt; Try to compare the results after accessing them via the appropriate
&gt; methods.
&gt;
&gt; Instead of dumping the anonymous hash try accessing it&#39;s content with
&gt; e.g.  $answer-&gt;print&#40;&#41;;
&gt;
&gt; If those results differ then there is a problem.
&gt;
&gt; --Olaf
&gt;
&gt; Sent from a phone; appologies for the telegram style this message
&gt; might have.
</div>


The somewhat longer explanation is that the data from the packet is  
stored in the buffer attribute of the object. For performance  
optimization the data contained in the packet is only parsed from wire  
format to presentation format when the various accessor methods are  
called. The results of the parsing is then also stored for future use.

Looking at the internal data storage using Dumper is not the way you  
would like to study the content of the objects. The whole reason for  
using objects is to abstract that internal structure.

Hope this helps,

--Olaf
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/655198/335950/PGP.sig">Download PGP.sig</a><br />
<span class="downloadcontenttype">application/pgp-signature 235b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;31&nbsp;02:24:43&nbsp;2009</span>
    <span class="description">rwfranks [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
More practically, the rationale underpinning data hiding and object
abstraction is to ensure that programs will not break whenever the
implementation changes.

--Dick
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;31&nbsp;09:52:35&nbsp;2009</span>
    <span class="description">ramsdell [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Aug 29 05:03:54 2009, olaf@dacht.net wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; On Aug 28, 2009, at 10:34 PM, Olaf M. Kolkman via RT wrote:
&gt; 
<div class="message-stanza open">&gt; &gt;       Queue: Net-DNS
&gt; &gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=47515">http://rt.cpan.org/Ticket/Display.html?id=47515</a></span> &gt;
&gt; &gt;
&gt; &gt; Try to compare the results after accessing them via the appropriate
&gt; &gt; methods.
&gt; &gt;
&gt; &gt; Instead of dumping the anonymous hash try accessing it&#39;s content 
</div></div>with
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; e.g.  $answer-&gt;print&#40;&#41;;
&gt; &gt;
&gt; &gt; If those results differ then there is a problem.
&gt; &gt;
&gt; &gt; --Olaf
&gt; &gt;
&gt; &gt; Sent from a phone; appologies for the telegram style this message
&gt; &gt; might have.
</div>&gt; 
&gt; 
&gt; 
&gt; The somewhat longer explanation is that the data from the packet is  
&gt; stored in the buffer attribute of the object. For performance  
&gt; optimization the data contained in the packet is only parsed from 
</div>wire  
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; format to presentation format when the various accessor methods are  
&gt; called. The results of the parsing is then also stored for future use.
&gt; 
&gt; Looking at the internal data storage using Dumper is not the way you  
&gt; would like to study the content of the objects. The whole reason for  
&gt; using objects is to abstract that internal structure.
&gt; 
&gt; Hope this helps,
&gt; 
&gt; --Olaf
</div>
Thanks Olaf!

So, once I use $answer-&gt;print &#40;or $answer-&gt;string&#41;, the contents of 
$answer-&gt;{&#39;answer&#39;} gets populated.  It is not clear to me why $answer-&gt;
{&#39;answer&#39;} doesn&#39;t get populated before I access $answer-&gt;print.  Based 
on the docs using $answer-&gt;print shouldn&#39;t be required.

As $answer-&gt;{&#39;answer&#39;} previously was populated without $answer-&gt;print, 
it would seem that there is something amiss with my local machine 
configuration.  I did try this code on a different machine &#40;mac os x 
instead of windows XP&#41; and it worked as expected.

At least I now have a way of getting the results I need!

Thanks, again!

- Bob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;31&nbsp;13:26:48&nbsp;2009</span>
    <span class="description">rwfranks [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Aug 31 09:52:35 2009, bobramsdell wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat Aug 29 05:03:54 2009, olaf@dacht.net wrote:
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; On Aug 28, 2009, at 10:34 PM, Olaf M. Kolkman via RT wrote:
&gt; &gt; 
<div class="message-stanza open">&gt; &gt; &gt;       Queue: Net-DNS
&gt; &gt; &gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=47515">http://rt.cpan.org/Ticket/Display.html?id=47515</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Try to compare the results after accessing them via the appropriate
&gt; &gt; &gt; methods.
&gt; &gt; &gt;
&gt; &gt; &gt; Instead of dumping the anonymous hash try accessing it&#39;s content 
</div></div>&gt; with
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; e.g.  $answer-&gt;print&#40;&#41;;
&gt; &gt; &gt;
&gt; &gt; &gt; If those results differ then there is a problem.
&gt; &gt; &gt;
&gt; &gt; &gt; --Olaf
&gt; &gt; &gt;
&gt; &gt; &gt; Sent from a phone; appologies for the telegram style this message
&gt; &gt; &gt; might have.
</div>&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; The somewhat longer explanation is that the data from the packet is  
&gt; &gt; stored in the buffer attribute of the object. For performance  
&gt; &gt; optimization the data contained in the packet is only parsed from 
</div>&gt; wire  
<div class="message-stanza open">&gt; &gt; format to presentation format when the various accessor methods are  
&gt; &gt; called. The results of the parsing is then also stored for future use.
&gt; &gt; 
&gt; &gt; Looking at the internal data storage using Dumper is not the way you  
&gt; &gt; would like to study the content of the objects. The whole reason for  
&gt; &gt; using objects is to abstract that internal structure.
&gt; &gt; 
&gt; &gt; Hope this helps,
&gt; &gt; 
&gt; &gt; --Olaf
</div>&gt; 
&gt; Thanks Olaf!
&gt; 
&gt; So, once I use $answer-&gt;print &#40;or $answer-&gt;string&#41;, the contents of 
&gt; $answer-&gt;{&#39;answer&#39;} gets populated.  It is not clear to me why $answer-&gt;
&gt; {&#39;answer&#39;} doesn&#39;t get populated before I access $answer-&gt;print.  Based 
&gt; on the docs using $answer-&gt;print shouldn&#39;t be required.
&gt; 
&gt; As $answer-&gt;{&#39;answer&#39;} previously was populated without $answer-&gt;print, 
&gt; it would seem that there is something amiss with my local machine 
&gt; configuration.  I did try this code on a different machine &#40;mac os x 
&gt; instead of windows XP&#41; and it worked as expected.
&gt; 
&gt; At least I now have a way of getting the results I need!
&gt; 
&gt; Thanks, again!
&gt; 
&gt; - Bob
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;31&nbsp;14:51:02&nbsp;2009</span>
    <span class="description">rwfranks [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Aug 31 09:52:35 2009, bobramsdell wrote:

Sorry for the mouse fumble!
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So, once I use $answer-&gt;print &#40;or $answer-&gt;string&#41;, the contents of 
&gt; $answer-&gt;{&#39;answer&#39;} gets populated.  It is not clear to me why $answer-&gt;
&gt; {&#39;answer&#39;} doesn&#39;t get populated before I access $answer-&gt;print.  Based 
&gt; on the docs using $answer-&gt;print shouldn&#39;t be required.
&gt; 
&gt; As $answer-&gt;{&#39;answer&#39;} previously was populated without $answer-&gt;print, 
&gt; it would seem that there is something amiss with my local machine 
&gt; configuration.  I did try this code on a different machine &#40;mac os x 
&gt; instead of windows XP&#41; and it worked as expected.
&gt; 
&gt; At least I now have a way of getting the results I need!
&gt; 
&gt; Thanks, again!
&gt; 
&gt; - Bob
</div>
I doubt there is anything wrong with your machine.

First thing to do is take Olaf&#39;s advice and forget about Data::Dumper
and use ONLY the published access methods.

Your original example then becomes something like this:


#!/usr/bin/perl -w

use Net::DNS;

my $resolver = Net::DNS::Resolver-&gt;new;

my $query = new Net::DNS::Packet&#40;&#39;66.39.76.93&#39;, &#39;PTR&#39;&#41;;         #
Net::DNS knows how to do reverse IP lookup 

foreach $qr &#40; $query-&gt;question &#41; {      # list of Question objects

        print $qr-&gt;qname, &#34;\n&#34;;         # get name using object&#39;s qname
method

}

print &#34;Resolving ...\n&#34;;

my $reply = $resolver-&gt;send&#40; $query &#41;;  # reply &#40;if any&#41; is unparsed in
a buffer inside packet object

if &#40; $reply &#41; {         # important to check if reply packet arrived

        foreach $rr &#40; $reply-&gt;answer &#41; {        # answer parsed and
returned as list of RR objects

                $rr-&gt;print;                     # invoke RR object&#39;s
print method

        }

} else {

        print &#34;no response\n&#34;;

}

exit; 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;20&nbsp;07:48:56&nbsp;2009</span>
    <span class="description">OLAF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Closing the ticket as it is not further actionable 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;20&nbsp;07:48:57&nbsp;2009</span>
    <span class="description">OLAF [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
