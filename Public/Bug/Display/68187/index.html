<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #68187 for Prima: open_help&#40;&#41; raise window</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #68187 for Prima: open_help&#40;&#41; raise window</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Prima/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Prima/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Prima/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Prima/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Prima">Prima CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">68187</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Prima/Active/">Prima</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
user42 [...] zip.com.au

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-27120-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-27121-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;13&nbsp;22:00:47&nbsp;2011</span>
    <span class="description">user42 [...] zip.com.au -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> open_help&#40;&#41; raise window</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 14 May 2011 12:00:27 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Prima [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">In my help menu I open_help&#40;&#41; to stuff about current settings, or to the
main application pod.  If the help window is already open but buried
under other windows I think I&#39;d like to raise it up.  Is there something
for that hidden somewhere?  The Prima::Application docs of open_help&#40;&#41;
could cross-reference if I&#39;ve missed it.

I see the focus is moved to the help window, but it can be underneath
other windows.  I don&#39;t think the window manager is supposed to raise
automatically for a focus move.  Not sure if the NETWM spec fancy ideas
about raising or presenting another window within a client.  I use fvwm
which does some or most of netwm I think, but for plain ICCCM wm&#39;s I
suppose just a raise would the thing.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;14&nbsp;02:11:18&nbsp;2011</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Птн Май 13 22:00:47 2011, user42@zip.com.au писал:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In my help menu I open_help&#40;&#41; to stuff about current settings, or to the
&gt; main application pod.  If the help window is already open but buried
&gt; under other windows I think I&#39;d like to raise it up.  
</div>
Good idea, agree.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I see the focus is moved to the help window, but it can be underneath
&gt; other windows.  I don&#39;t think the window manager is supposed to raise
&gt; automatically for a focus move. 
</div>
No, absolutely - that&#39;s just focus. Window::bring_to_front got to be
called for that.

BTW we&#39;re now on github &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/dk/Prima&#41;">https://github.com/dk/Prima&#41;</a></span>, so if you feel
like playing with the code and sending a patch, you&#39;re mostly welcome.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;14&nbsp;02:11:18&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;15&nbsp;19:01:32&nbsp;2011</span>
    <span class="description">user42 [...] zip.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #68187] open_help&#40;&#41; raise window</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 16 May 2011 09:00:38 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Prima [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;KARASIK via RT&#34; &lt;bug-Prima@rt.cpan.org&gt; writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; a patch
</div>
Oh, well, I was unsure if open_help&#40;&#41; ought to raise, or if that was a
matter for the menu/context/etc it was called from.

I suspect if open_help&#40;&#41; moves the focus then it ought to do something
toward making that window visible.  I&#39;d probably start with a plain
raise and worry later if something subtle like only put it on top of the
application&#39;s own windows, not other client windows.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;21&nbsp;03:56:20&nbsp;2011</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Finally got around to the bug. Indeed, I couldn&#39;t figure it out long
time because it seems that all just works on win32. At last I&#39;ve got an
Ubuntu installation that indeed reproduces the problem where help viewer
&#40;and other windows using select&#40;&#41;&#41; don&#39;t pop up to the front, but just
got focused. 

The problem is, that XMapRaised&#40;&#41; call that supposed to bring an X
window on top of window stack, can be &#40;and apparently is&#41; ignored by
Ubuntu&#39;s default window manager. Not a problem by itself, because window
managers are supposed to be doing just that - intercept top-level window
positioning, sizing etc requests. But there&#39;s an inconsistency.

Interestingly enough, I couldn&#39;t find a working X incantation that
actually would bring a window forward. It seems, that if a window
manager is hell-bent on not letting a program doing that, one just
cannot by using standard X11 calls. I&#39;m guessing there are netwm- or
other extensions, that let the programmer doing that, but I don&#39;t know any. 

But so far the behavior in such particular X11 environment is at least
consistent with other X11 applications. So I see no point in fighting a
WM here, and thus pausing the bug until a reliable way to bring forward
a top-level window is found.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;21&nbsp;03:56:23&nbsp;2011</span>
    <span class="description">KARASIK [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;22&nbsp;18:58:43&nbsp;2011</span>
    <span class="description">user42 [...] zip.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #68187] open_help&#40;&#41; raise window</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 23 Jul 2011 08:58:37 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Prima [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;KARASIK via RT&#34; &lt;bug-Prima@rt.cpan.org&gt; writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; win32
</div>
It always raises the focused toplevel or something does it?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The problem is, that XMapRaised&#40;&#41; call that supposed to bring an X
&gt; window on top of window stack, can be &#40;and apparently is&#41; ignored by
&gt; Ubuntu&#39;s default window manager.
</div>
Are you sure?  Which wm is that?

I tried the program below doing a bring_to_front&#40;&#41; and it has the effect
I think I want, under fvwm at least.  Clicking on &#34;open_help&#34; moves the
focus to the help window but doesn&#39;t raise it, whereas clicking
&#34;open_help and raise&#34; does raise it.

Might open_help&#40;&#41; do a bring_to_front&#40;&#41; like that?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It seems, that if a window
&gt; manager is hell-bent on not letting a program doing that, one just
&gt; cannot by using standard X11 calls.
</div>
That&#39;s so, but it&#39;s supposed to have a reason for doing or not doing of
course :-&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m guessing there are netwm- or
&gt; other extensions, that let the programmer doing that, but I don&#39;t know any. 
</div>
My reading of the netwm is that applications can/should use the normal
ConfigureRequest for stacking order.

There&#39;s a _NET_WM_USER_TIME thing which is supposed to prevent a badly
lagged application from raising or focusing away from something else
you&#39;ve switched to in the interim, but if I&#39;m not mistaken you never set
that so it shouldn&#39;t apply.
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl -w
use strict;
use Prima &#39;Buttons&#39;, &#39;Application&#39;;

my $w = Prima::MainWindow-&gt;create &#40;height    =&gt; 100,
                                   width     =&gt; 200&#41;;
$w-&gt;insert&#40;Button =&gt;
           origin =&gt; [  0,50],
           selectable =&gt; 1,
           text =&gt; &#34;open_help&#34;,
           onClick    =&gt; sub {
             $::application-&gt;open_help &#40;&#34;Prima&#34;&#41;;
           },
          &#41;;
$w-&gt;insert&#40;Button =&gt;
           origin =&gt; [  0,0],
           selectable =&gt; 1,
           text =&gt; &#34;open_help and raise&#34;,
           onClick    =&gt; sub {
             $::application-&gt;open_help &#40;&#34;Prima&#34;&#41;;
             my $help = $Prima::HelpViewer::helpWindows[0];
             $help-&gt;bring_to_front;
           },
          &#41;;
Prima-&gt;run;
exit 0;
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">


-- 
These prestigious wrought-iron security gates are bullet-proof,
bomb-proof, and battering-ram resistant.
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;22&nbsp;18:58:44&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;23&nbsp;13:44:58&nbsp;2011</span>
    <span class="description">dmitry [...] karasik.eu.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #68187] open_help&#40;&#41; raise window</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 23 Jul 2011 19:44:47 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Kevin Ryde via RT &lt;bug-Prima [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dmitry Karasik &lt;dmitry [...] karasik.eu.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, Jul 22, 2011 at 06:58:44PM -0400, Kevin Ryde via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Prima
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=68187">https://rt.cpan.org/Ticket/Display.html?id=68187</a></span> &gt;
&gt; 
&gt; &#34;KARASIK via RT&#34; &lt;bug-Prima@rt.cpan.org&gt; writes:
<div class="message-stanza open">&gt; &gt;
&gt; &gt; win32
</div>&gt; 
&gt; It always raises the focused toplevel or something does it?
</div>
Always, and automatically.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; The problem is, that XMapRaised&#40;&#41; call that supposed to bring an X
&gt; &gt; window on top of window stack, can be &#40;and apparently is&#41; ignored by
&gt; &gt; Ubuntu&#39;s default window manager.
</div>&gt; Are you sure?  Which wm is that?
</div>
Almost sure. I did all kinds of debug prints and added XMapRaised and XRaiseWindow calls
in arbitrary places in the code. The WM is metacity.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; It seems, that if a window
&gt; &gt; manager is hell-bent on not letting a program doing that, one just
&gt; &gt; cannot by using standard X11 calls.
</div>&gt; That&#39;s so, but it&#39;s supposed to have a reason for doing or not doing of
&gt; course :-&#41;.
</div>
It works fine when XMapRaised is called on a hidden window.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; My reading of the netwm is that applications can/should use the normal
&gt; ConfigureRequest for stacking order.
</div>
Indeed. Metacity does an interesting thing - when I do bring_to_front 
on the only window in the Prima app, its icon blinks on the taskbar, and
as soon I navigate the mouse outside the currently focused app, it brings
the Prima app up the stack. However, when I do that on a two-window Prima app,
the icon still blinks, but metacity doesn&#39;t bring forward the window.

But anyways. I&#39;ve committed an extra bring_to_front in HelpViewer.pm, which even
though doesn&#39;t do much, still feels in line with the expected behavior.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There&#39;s a _NET_WM_USER_TIME thing which is supposed to prevent a badly
&gt; lagged application from raising or focusing away from something else
&gt; you&#39;ve switched to in the interim, but if I&#39;m not mistaken you never set
&gt; that so it shouldn&#39;t apply.
</div>
Agree, it&#39;s kind of too much.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 
&gt; 
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; #!/usr/bin/perl -w
&gt; use strict;
&gt; use Prima &#39;Buttons&#39;, &#39;Application&#39;;
&gt; 
&gt; my $w = Prima::MainWindow-&gt;create &#40;height    =&gt; 100,
&gt;                                    width     =&gt; 200&#41;;
&gt; $w-&gt;insert&#40;Button =&gt;
&gt;            origin =&gt; [  0,50],
&gt;            selectable =&gt; 1,
&gt;            text =&gt; &#34;open_help&#34;,
&gt;            onClick    =&gt; sub {
&gt;              $::application-&gt;open_help &#40;&#34;Prima&#34;&#41;;
&gt;            },
&gt;           &#41;;
&gt; $w-&gt;insert&#40;Button =&gt;
&gt;            origin =&gt; [  0,0],
&gt;            selectable =&gt; 1,
&gt;            text =&gt; &#34;open_help and raise&#34;,
&gt;            onClick    =&gt; sub {
&gt;              $::application-&gt;open_help &#40;&#34;Prima&#34;&#41;;
&gt;              my $help = $Prima::HelpViewer::helpWindows[0];
&gt;              $help-&gt;bring_to_front;
&gt;            },
&gt;           &#41;;
&gt; Prima-&gt;run;
&gt; exit 0;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; These prestigious wrought-iron security gates are bullet-proof,
&gt; bomb-proof, and battering-ram resistant.
</div>

-- 
Sincerely,
        Dmitry Karasik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;24&nbsp;21:19:34&nbsp;2011</span>
    <span class="description">user42 [...] zip.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #68187] open_help&#40;&#41; raise window</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 25 Jul 2011 11:19:21 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Prima [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Dmitry Karasik via RT&#34; &lt;bug-Prima@rt.cpan.org&gt; writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Almost sure. I did all kinds of debug prints and added XMapRaised and XRaiseWindow calls
&gt; in arbitrary places in the code.
</div>
There&#39;s a cute &#34;xwit&#34; program to experiment with things externally, like
&#34;xwit -raise -id 12345&#34;.  Normally any client can act on any window.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Indeed. Metacity does an interesting thing - when I do bring_to_front 
&gt; on the only window in the Prima app, its icon blinks on the taskbar, and
&gt; as soon I navigate the mouse outside the currently focused app, it brings
&gt; the Prima app up the stack. However, when I do that on a two-window Prima app,
&gt; the icon still blinks, but metacity doesn&#39;t bring forward the window.
</div>
Sounds like a bug.  For the help I had the prima main win as the focused
window and open_help from there.  You&#39;d have to want the wm to allow a
raise of a newly focused window belonging to the same app.

I wonder if the window_group field of the WM_HINTS property would tell
it the help belongs to the mainwin -- if that&#39;s not already what you do
and if it doesn&#39;t already work that out ...

Do you use the WM_TAKE_FOCUS thingie too?  That might be slightly
unusual so maybe you&#39;re exploring interesting corners of the wm :-&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; But anyways. I&#39;ve committed an extra bring_to_front in HelpViewer.pm, which even
&gt; though doesn&#39;t do much, still feels in line with the expected behavior.
</div>
Should work for sensible ones like fvwm, I&#39;ll try the next release.





-- 
The sigfile food series:  &#40;Jackie French&#41;
&#34;Carob&#34; -- Doesn&#39;t have chocolate&#39;s caffine, its theobromine, or its taste.
On the other hand it&#39;s brown, can be made sweet, and has roughly the same
texture.  The same might be said for dog droppings.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;25&nbsp;03:28:16&nbsp;2011</span>
    <span class="description">dmitry [...] karasik.eu.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #68187] open_help&#40;&#41; raise window</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 25 Jul 2011 09:28:06 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Kevin Ryde via RT &lt;bug-Prima [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dmitry Karasik &lt;dmitry [...] karasik.eu.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There&#39;s a cute &#34;xwit&#34; program to experiment with things externally, like
&gt; &#34;xwit -raise -id 12345&#34;.  Normally any client can act on any window.
</div>
Ooh cool! Thanks! That should help a lot.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sounds like a bug.  For the help I had the prima main win as the focused
&gt; window and open_help from there.  You&#39;d have to want the wm to allow a
&gt; raise of a newly focused window belonging to the same app.
</div>
Or a default behavior that can be changed somewhere in WM settings...

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I wonder if the window_group field of the WM_HINTS property would tell
&gt; it the help belongs to the mainwin -- if that&#39;s not already what you do
&gt; and if it doesn&#39;t already work that out ...
</div>
No, that&#39;s not I&#39;m doing. Frankly, I never paid attention to window_group
before, I guess that needs experimenting how it works with different window
managers. This quote is though a bit unnerving: &#34;or example, if a single
application manipulates multiple top- level windows, this allows you to provide
enough information that a window manager can iconify all of the windows rather
than just the one window.&#34; . Which raises a question, is that a good idea to
use that field at all? Is it something that WM always does, or one can count on
WM doing that, or ... ?


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Do you use the WM_TAKE_FOCUS thingie too?  That might be slightly
&gt; unusual so maybe you&#39;re exploring interesting corners of the wm :-&#41;
</div>
Yes, I&#39;m handling that. It&#39;s not that important a message, if I ignore that, the WM
raises a window anyway ... it just helps to assign the focus to the last focused
widget in the hierarchy inside the window.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Should work for sensible ones like fvwm, I&#39;ll try the next release.
</div>
You&#39;re very welcome to try the github version before it hits CPAN. Also, if you could
give me your github ID, I add you to the collaborators there &#40;if you don&#39;t mind that of course&#41;.

-- 
Sincerely,
        Dmitry Karasik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;30&nbsp;07:11:20&nbsp;2011</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Just tested your suggestions. Behaviors with and without window_group
hints are identical. xwit got me a glimpse of hope because of its &#34;-pop&#34;
and &#34;-raise&#34; options, where the latter called
XConfigureWindow&#40;CWStackMode:Above&#41; while I do XMapRaised&#40;&#41;. But
studying x11 source revealed that these are just identical. And yes,
xwit couldn&#39;t bring forward a window too; metacity just blinks the
window and that&#39;s it. So I guess that&#39;s just metacity stuff, not a
general problem. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;05&nbsp;21:00:14&nbsp;2011</span>
    <span class="description">user42 [...] zip.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #68187] open_help&#40;&#41; raise window</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 06 Aug 2011 11:00:13 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Prima [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Dmitry Karasik via RT&#34; &lt;bug-Prima@rt.cpan.org&gt; writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; &#34;or example, if a single application manipulates multiple top- level
&gt; windows, this allows you to provide enough information that a window
&gt; manager can iconify all of the windows rather than just the one
&gt; window.&#34;
</div>
Might be a good thing to iconify a help window together with the main
window it&#39;s helping ... sometimes at least.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Which raises a question, is that a good idea to use that
&gt; field at all?
</div>
Dunno.  Just wondered if metacity needed it somehow.  Leave it out for
now if unsure.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; github version
</div>
I forgot I&#39;d already downloaded that too :&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; XConfigureWindow&#40;CWStackMode:Above&#41; while I do XMapRaised&#40;&#41;. But
&gt; studying x11 source revealed that these are just identical.
</div>
Yes, I think so.  The xlib docs aren&#39;t very clear on such things.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So I guess that&#39;s just metacity stuff, not a general problem.
</div>
Alas.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;06&nbsp;10:12:28&nbsp;2011</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Птн Авг 05 21:00:14 2011, user42@zip.com.au писал:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#34;Dmitry Karasik via RT&#34; &lt;bug-Prima@rt.cpan.org&gt; writes:
<div class="message-stanza open">&gt; &gt;
&gt; &gt; &#34;or example, if a single application manipulates multiple top- level
&gt; &gt; windows, this allows you to provide enough information that a window
&gt; &gt; manager can iconify all of the windows rather than just the one
&gt; &gt; window.&#34;
</div>&gt; 
&gt; Might be a good thing to iconify a help window together with the main
&gt; window it&#39;s helping ... sometimes at least.
</div>
Indeed, we can&#39;t do &#40;or at least propose&#41; that feature using window
grouping. OTOH HelpViewer can be smart enough to track main window&#39;s
onWindowState, but that&#39;s another story.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
<div class="message-stanza open">&gt; &gt; Which raises a question, is that a good idea to use that
&gt; &gt; field at all?
</div>&gt; 
&gt; Dunno.  Just wondered if metacity needed it somehow.  Leave it out for
&gt; now if unsure.
&gt; 
<div class="message-stanza open">&gt; &gt; github version
</div>&gt; 
&gt; I forgot I&#39;d already downloaded that too :&#41;.
&gt; 
<div class="message-stanza open">&gt; &gt; XConfigureWindow&#40;CWStackMode:Above&#41; while I do XMapRaised&#40;&#41;. But
&gt; &gt; studying x11 source revealed that these are just identical.
</div>&gt; 
&gt; Yes, I think so.  The xlib docs aren&#39;t very clear on such things.
&gt; 
<div class="message-stanza open">&gt; &gt; So I guess that&#39;s just metacity stuff, not a general problem.
</div>&gt; 
&gt; Alas.
</div>

Ok, closing then
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;06&nbsp;10:12:28&nbsp;2011</span>
    <span class="description">KARASIK [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
