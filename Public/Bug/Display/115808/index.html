<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #115808 for List-MoreUtils: Tries to load code from cwd</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #115808 for List-MoreUtils: Tries to load code from cwd</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/List-MoreUtils/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/List-MoreUtils/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/List-MoreUtils/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/List-MoreUtils/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/List-MoreUtils">List-MoreUtils CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">115808</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/List-MoreUtils/Active/">List-MoreUtils</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
CARNIL [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
AVENJ [...] cpan.org

<br />
ether [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19166-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19167-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.416    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;02&nbsp;11:10:28&nbsp;2016</span>
    <span class="description">CARNIL [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> CARNIL [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> liblist-moreutils-perl: tries to load code from cwd</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">We have the following bug reported to the Debian package of
List-MoreUtils &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://bugs.debian.org/829138&#41;">https://bugs.debian.org/829138&#41;</a></span>:

This is idependent on perl including . in @INC as demonstrated by the
bugreporter:


------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----
List::MoreUtils tries to load code from a subdirectory of the current 
working directory. This could lead to execution of arbitrary code if 
cwd is untrusted.

Proof of concept:

$ mkdir -p &#39;&#40;eval 1&#41;/auto/List/MoreUtils/&#39;
$ gcc -Wall -fPIC -shared moo.c -o &#39;&#40;eval 1&#41;/auto/List/MoreUtils/MoreUtils.so&#39;
$ perl -e &#39;no lib &#34;.&#34;; use List::MoreUtils&#39;
                &#40;__&#41;
                &#40;oo&#41;
          /------\/
         / |    ||
        *  /\---/\
           ~~   ~~
...&#34;Have you mooed today?&#34;...
Segmentation fault
------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----

Where moo.c to have a testcase looks like:

----cut---------cut---------cut---------cut---------cut---------cut-----
void __attribute__&#40;&#40;constructor&#41;&#41; moo&#40;&#41; {
        system&#40;&#34;apt-get moo&#34;&#41;;
        kill&#40;0, SIGSEGV&#41;;
}
----cut---------cut---------cut---------cut---------cut---------cut-----

Regards,
Salvatore
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;02&nbsp;11:37:05&nbsp;2016</span>
    <span class="description">CARNIL [...] cpan.org -  Subject changed from &#39;liblist-moreutils-perl: tries to load code from cwd&#39; to &#39;Tries to load code from cwd&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;02&nbsp;16:26:45&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Cc ETHER added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;02&nbsp;20:07:57&nbsp;2016</span>
    <span class="description">AVENJ [...] cpan.org -  Cc AVENJ added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;02&nbsp;20:42:51&nbsp;2016</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Please read &#34;perldoc lib&#34;. It has nothing to do with Cwd but with insane use of lib.

Imagine &#34;LD_LIBRARY_PATH=.:LD_LIBRARY_PATH ...&#34;. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;02&nbsp;20:42:52&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;02&nbsp;20:42:52&nbsp;2016</span>
    <span class="description">REHSACK [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;02&nbsp;20:55:14&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jul 02 20:42:51 2016, REHSACK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Please read &#34;perldoc lib&#34;. It has nothing to do with Cwd but with
&gt; insane use of lib.
&gt; 
&gt; Imagine &#34;LD_LIBRARY_PATH=.:LD_LIBRARY_PATH ...&#34;.
</div>
Even if I don’t use lib or touch @INC, I can reproduce the problem.  That doesn’t mean it’s a List::MoreUtils bug, though.  It may be in XSLoader.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;02&nbsp;21:05:17&nbsp;2016</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jul 02 20:55:14 2016, SPROUT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat Jul 02 20:42:51 2016, REHSACK wrote:
<div class="message-stanza open">&gt; &gt; Please read &#34;perldoc lib&#34;. It has nothing to do with Cwd but with
&gt; &gt; insane use of lib.
&gt; &gt;
&gt; &gt; Imagine &#34;LD_LIBRARY_PATH=.:LD_LIBRARY_PATH ...&#34;.
</div>&gt; 
&gt; Even if I don’t use lib or touch @INC, I can reproduce the problem.
</div>
Show me! Doesn&#39;t sound reasonable. Check your PERL5LIB.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; That doesn’t mean it’s a List::MoreUtils bug, though.  It may be in
&gt; XSLoader.
</div>
You can try knocking on their door. It might be possible, even unlikely.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;02&nbsp;21:43:29&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jul 02 21:05:17 2016, REHSACK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat Jul 02 20:55:14 2016, SPROUT wrote:
<div class="message-stanza open">&gt; &gt; On Sat Jul 02 20:42:51 2016, REHSACK wrote:
<div class="message-stanza open">&gt; &gt; &gt; Please read &#34;perldoc lib&#34;. It has nothing to do with Cwd but with
&gt; &gt; &gt; insane use of lib.
&gt; &gt; &gt;
&gt; &gt; &gt; Imagine &#34;LD_LIBRARY_PATH=.:LD_LIBRARY_PATH ...&#34;.
</div>&gt; &gt; 
&gt; &gt; Even if I don’t use lib or touch @INC, I can reproduce the problem.
</div>&gt; 
&gt; Show me! Doesn&#39;t sound reasonable. Check your PERL5LIB.
</div>
I’m reproducing this under the CPAN shell &#40;with ‘look List::MoreUtils’&#41; after testing several modules, so PERL5LIB is huge:

/Users/sprout/.cpan/build/List-MoreUtils-0.415-CTkZjK/blib/arch:/Users/sprout/.cpan/build/List-MoreUtils-0.415-CTkZjK/blib/lib:/Users/sprout/.cpan/build/Exporter-Tiny-0.042-kdbuNG/blib/arch:/Users/sprout/.cpan/build/Exporter-Tiny-0.042-kdbuNG/blib/lib:/Users/sprout/.cpan/build/Tie-SecureHash-1.10-pERDdy/blib/arch:/Users/sprout/.cpan/build/Tie-SecureHash-1.10-pERDdy/blib/lib:/Users/sprout/.cpan/build/Sub-Attributes-0.02-AD9F0P/blib/arch:/Users/sprout/.cpan/build/Sub-Attributes-0.02-AD9F0P/blib/lib:/Users/sprout/.cpan/build/Devel-DebugHooks-0.02-4LFCO4/blib/arch:/Users/sprout/.cpan/build/Devel-DebugHooks-0.02-4LFCO4/blib/lib:/Users/sprout/.cpan/build/Data-Dump-1.23-ULwHY5/blib/arch:/Users/sprout/.cpan/build/Data-Dump-1.23-ULwHY5/blib/lib:/Users/sprout/.cpan/build/Data-Section-Simple-0.07-dTupfF/blib/arch:/Users/sprout/.cpan/build/Data-Section-Simple-0.07-dTupfF/blib/lib:/Users/sprout/.cpan/build/Test-Requires-0.10-hoE7fE/blib/arch:/Users/sprout/.cpan/build/Test-Requires-0.10-hoE7fE/blib/lib:/Users/sprout/.cpan/build/Test-Differences-0.64-5doKuc/blib/arch:/Users/sprout/.cpan/build/Test-Differences-0.64-5doKuc/blib/lib:/Users/sprout/.cpan/build/Text-Diff-1.44-48i5w6/blib/arch:/Users/sprout/.cpan/build/Text-Diff-1.44-48i5w6/blib/lib:/Users/sprout/.cpan/build/Algorithm-Diff-1.1903-cVmSPL/blib/arch:/Users/sprout/.cpan/build/Algorithm-Diff-1.1903-cVmSPL/blib/lib:/Users/sprout/.cpan/build/Guard-1.023-mQqrS7/blib/arch:/Users/sprout/.cpan/build/Guard-1.023-mQqrS7/blib/lib:/Users/sprout/.cpan/build/Test-Output-1.03-ok9_8N/blib/arch:/Users/sprout/.cpan/build/Test-Output-1.03-ok9_8N/blib/lib:/Users/sprout/.cpan/build/Capture-Tiny-0.42-5FXy22/blib/arch:/Users/sprout/.cpan/build/Capture-Tiny-0.42-5FXy22/blib/lib:/Users/sprout/.cpan/build/Sub-Exporter-0.987-ZQUXJy/blib/arch:/Users/sprout/.cpan/build/Sub-Exporter-0.987-ZQUXJy/blib/lib:/Users/sprout/.cpan/build/Data-OptList-0.110-bl41NG/blib/arch:/Users/sprout/.cpan/build/Data-OptList-0.110-bl41NG/blib/lib:/Users/sprout/.cpan/build/Sub-Install-0.928-mdDVbc/blib/arch:/Users/sprout/.cpan/build/Sub-Install-0.928-mdDVbc/blib/lib:/Users/sprout/.cpan/build/Params-Util-1.07-w809Vf/blib/arch:/Users/sprout/.cpan/build/Params-Util-1.07-w809Vf/blib/lib:/Users/sprout/.cpan/build/XML-DOM-Lite-0.15-U3W4E9/blib/arch:/Users/sprout/.cpan/build/XML-DOM-Lite-0.15-U3W4E9/blib/lib:/Users/sprout/.cpan/build/constant-lexical-2.0002-xTYIno/blib/arch:/Users/sprout/.cpan/build/constant-lexical-2.0002-xTYIno/blib/lib:/Users/sprout/.cpan/build/WWW-Scripter-Plugin-JavaScript-0.009-odgHnt/blib/arch:/Users/sprout/.cpan/build/WWW-Scripter-Plugin-JavaScript-0.009-odgHnt/blib/lib:/Users/sprout/.cpan/build/Hash-Util-FieldHash-Compat-0.11-asgN0B/blib/arch:/Users/sprout/.cpan/build/Hash-Util-FieldHash-Compat-0.11-asgN0B/blib/lib:/Users/sprout/.cpan/build/WWW-Scripter-0.031-yo7Ha2/blib/arch:/Users/sprout/.cpan/build/WWW-Scripter-0.031-yo7Ha2/blib/lib:/Users/sprout/.cpan/build/WWW-Mechanize-1.75-MZRJyX/blib/arch:/Users/sprout/.cpan/build/WWW-Mechanize-1.75-MZRJyX/blib/lib:/Users/sprout/.cpan/build/HTML-Form-6.03-RX58s6/blib/arch:/Users/sprout/.cpan/build/HTML-Form-6.03-RX58s6/blib/lib:/Users/sprout/.cpan/build/HTTP-Server-Simple-0.51-XvOJSq/blib/arch:/Users/sprout/.cpan/build/HTTP-Server-Simple-0.51-XvOJSq/blib/lib:/Users/sprout/.cpan/build/CGI-4.31-gdLCPv/blib/arch:/Users/sprout/.cpan/build/CGI-4.31-gdLCPv/blib/lib:/Users/sprout/.cpan/build/Test-Deep-1.120-VHt5Z4/blib/arch:/Users/sprout/.cpan/build/Test-Deep-1.120-VHt5Z4/blib/lib:/Users/sprout/.cpan/build/Test-Simple-1.302030-QFfUEb/blib/arch:/Users/sprout/.cpan/build/Test-Simple-1.302030-QFfUEb/blib/lib:/Users/sprout/.cpan/build/Test-Warn-0.30-TtNnP9/blib/arch:/Users/sprout/.cpan/build/Test-Warn-0.30-TtNnP9/blib/lib:/Users/sprout/.cpan/build/Sub-Uplevel-0.25-dKKo0N/blib/arch:/Users/sprout/.cpan/build/Sub-Uplevel-0.25-dKKo0N/blib/lib:/Users/sprout/.cpan/build/HTML-Tree-5.03-OZ1Hi9/blib/arch:/Users/sprout/.cpan/build/HTML-Tree-5.03-OZ1Hi9/blib/lib:/Users/sprout/.cpan/build/Test-Fatal-0.014-hU9Lgh/blib/arch:/Users/sprout/.cpan/build/Test-Fatal-0.014-hU9Lgh/blib/lib:/Users/sprout/.cpan/build/Try-Tiny-0.24-1xKXA_/blib/arch:/Users/sprout/.cpan/build/Try-Tiny-0.24-1xKXA_/blib/lib:/Users/sprout/.cpan/build/Module-Build-0.4218-7XEPDK/blib/arch:/Users/sprout/.cpan/build/Module-Build-0.4218-7XEPDK/blib/lib:/Users/sprout/.cpan/build/CPAN-Meta-2.150005-ncCfOU/blib/arch:/Users/sprout/.cpan/build/CPAN-Meta-2.150005-ncCfOU/blib/lib:/Users/sprout/.cpan/build/libwww-perl-6.15-V9JWfm/blib/arch:/Users/sprout/.cpan/build/libwww-perl-6.15-V9JWfm/blib/lib:/Users/sprout/.cpan/build/WWW-RobotRules-6.02-YA6oBO/blib/arch:/Users/sprout/.cpan/build/WWW-RobotRules-6.02-YA6oBO/blib/lib:/Users/sprout/.cpan/build/HTTP-Negotiate-6.01-FmYGqw/blib/arch:/Users/sprout/.cpan/build/HTTP-Negotiate-6.01-FmYGqw/blib/lib:/Users/sprout/.cpan/build/File-Listing-6.04-eTJjcl/blib/arch:/Users/sprout/.cpan/build/File-Listing-6.04-eTJjcl/blib/lib:/Users/sprout/.cpan/build/Net-HTTP-6.09-qwmGZ5/blib/arch:/Users/sprout/.cpan/build/Net-HTTP-6.09-qwmGZ5/blib/lib:/Users/sprout/.cpan/build/JE-0.066-QVt71a/blib/arch:/Users/sprout/.cpan/build/JE-0.066-QVt71a/blib/lib:/Users/sprout/.cpan/build/HTML-DOM-0.056-jLRcjO/blib/arch:/Users/sprout/.cpan/build/HTML-DOM-0.056-jLRcjO/blib/lib:/Users/sprout/.cpan/build/TimeDate-2.30-c_ggkF/blib/arch:/Users/sprout/.cpan/build/TimeDate-2.30-c_ggkF/blib/lib:/Users/sprout/.cpan/build/HTML-Encoding-0.61-CRo9H7/blib/arch:/Users/sprout/.cpan/build/HTML-Encoding-0.61-CRo9H7/blib/lib:/Users/sprout/.cpan/build/CSS-DOM-0.16-KR6L9O/blib/arch:/Users/sprout/.cpan/build/CSS-DOM-0.16-KR6L9O/blib/lib:/Users/sprout/.cpan/build/Clone-0.38-9vLHRf/blib/arch:/Users/sprout/.cpan/build/Clone-0.38-9vLHRf/blib/lib:/Users/sprout/.cpan/build/HTML-Parser-3.72-9PPLkd/blib/arch:/Users/sprout/.cpan/build/HTML-Parser-3.72-9PPLkd/blib/lib:/Users/sprout/.cpan/build/HTML-Tagset-3.20-9h1_zh/blib/arch:/Users/sprout/.cpan/build/HTML-Tagset-3.20-9h1_zh/blib/lib:/Users/sprout/.cpan/build/HTTP-Daemon-6.01-fiKf42/blib/arch:/Users/sprout/.cpan/build/HTTP-Daemon-6.01-fiKf42/blib/lib:/Users/sprout/.cpan/build/HTTP-Cookies-6.01-dEwKpm/blib/arch:/Users/sprout/.cpan/build/HTTP-Cookies-6.01-dEwKpm/blib/lib:/Users/sprout/.cpan/build/HTTP-Message-6.11-mjjDTP/blib/arch:/Users/sprout/.cpan/build/HTTP-Message-6.11-mjjDTP/blib/lib:/Users/sprout/.cpan/build/IO-HTML-1.001-iLv6MQ/blib/arch:/Users/sprout/.cpan/build/IO-HTML-1.001-iLv6MQ/blib/lib:/Users/sprout/.cpan/build/Encode-Locale-1.05-snH7DD/blib/arch:/Users/sprout/.cpan/build/Encode-Locale-1.05-snH7DD/blib/lib:/Users/sprout/.cpan/build/HTTP-Date-6.02-GRb_o3/blib/arch:/Users/sprout/.cpan/build/HTTP-Date-6.02-GRb_o3/blib/lib:/Users/sprout/.cpan/build/LWP-MediaTypes-6.02-SG7cyK/blib/arch:/Users/sprout/.cpan/build/LWP-MediaTypes-6.02-SG7cyK/blib/lib:/Users/sprout/.cpan/build/URI-1.71-PQBd3T/blib/arch:/Users/sprout/.cpan/build/URI-1.71-PQBd3T/blib/lib

But that does not explain why a directory called ‘&#40;eval 1&#41;’ is checked before anything else.  So there clearly is a bug somewhere.  But where?  That is the question.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;02&nbsp;21:54:14&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jul 02 21:05:17 2016, REHSACK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat Jul 02 20:55:14 2016, SPROUT wrote:
<div class="message-stanza open">&gt; &gt; On Sat Jul 02 20:42:51 2016, REHSACK wrote:
<div class="message-stanza open">&gt; &gt; &gt; Please read &#34;perldoc lib&#34;. It has nothing to do with Cwd but with
&gt; &gt; &gt; insane use of lib.
&gt; &gt; &gt;
&gt; &gt; &gt; Imagine &#34;LD_LIBRARY_PATH=.:LD_LIBRARY_PATH ...&#34;.
</div>&gt; &gt; 
&gt; &gt; Even if I don’t use lib or touch @INC, I can reproduce the problem.
</div>&gt; 
&gt; Show me! Doesn&#39;t sound reasonable. Check your PERL5LIB.
&gt; 
<div class="message-stanza open">&gt; &gt; That doesn’t mean it’s a List::MoreUtils bug, though.  It may be in
&gt; &gt; XSLoader.
</div>&gt; 
&gt; You can try knocking on their door. It might be possible, even unlikely.
</div>
The bug does seem to be in XSLoader.  To reproduce on a Mac &#40;as I am using&#41;:

I have a file called moo.c, as in the original report, but it contains:

$ cat moo.c
void __attribute__&#40;&#40;constructor&#41;&#41; moo&#40;&#41; {
        system&#40;&#34;echo whooooooo&#34;&#41;;
        //kill&#40;0, SIGSEGV&#41;;
}

&#40;I commented out the kill, since SIGSEGV does not work without the correct header loaded, and my C knowledge is not so good.&#41;

$ gcc -Wall -fPIC -shared moo.c -o &#39;&#40;eval 1&#41;/auto/List/MoreUtils/MoreUtils.bundle&#39;

&#40;Mac uses .bundle, not .so.&#41;


$ perl -e &#39;eval q| package List::MoreUtils; use XSLoader &#40;&#41;; XSLoader::load&#40;&#34;List::MoreUtils&#34;, &#34;0.415&#34;&#41; |&#39;
whooooooo
$ perl -v |grep version
This is perl 5, version 12, subversion 4 &#40;v5.12.4&#41; built for darwin-thread-multi-2level
$ perl5.24.0 -e &#39;eval q| package List::MoreUtils; use XSLoader &#40;&#41;; XSLoader::load&#40;&#34;List::MoreUtils&#34;, &#34;0.415&#34;&#41; |&#39;
whooooooo
$ perl5.25.2 -e &#39;eval q| package List::MoreUtils; use XSLoader &#40;&#41;; XSLoader::load&#40;&#34;List::MoreUtils&#34;, &#34;0.415&#34;&#41; |&#39;
whooooooo

It appears to be the string eval that is causing it.  If you are using string eval to avoid loading XSLoader.pm unnecessarily, you can use require instead of use and avoid the whole eval.

Now why XSLoader looks at the file name of the caller I cannot say.  Maybe it is designed to work that way.  The documentation is certainly silent on the matter, and it does seem like a security hole.  So this may not be a bug in List::MoreUtils per se &#40;I still need to find out&#41;, but you can at least plug the security whole by avoiding the eval.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;03&nbsp;01:23:52&nbsp;2016</span>
    <span class="description">carnil [...] debian.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> CARNIL [...] cpan.org, AVENJ [...] cpan.org, &#34;ether [...] cpan.org Niko Tyni&#34; &lt;ntyni [...] debian.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #115808] Tries to load code from cwd</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 3 Jul 2016 07:23:39 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Father Chrysostomos via RT &lt;bug-List-MoreUtils [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Salvatore Bonaccorso &lt;carnil [...] debian.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

On Sat, Jul 02, 2016 at 09:54:15PM -0400, Father Chrysostomos via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=115808">https://rt.cpan.org/Ticket/Display.html?id=115808</a></span> &gt;
&gt; 
&gt; On Sat Jul 02 21:05:17 2016, REHSACK wrote:
<div class="message-stanza open">&gt; &gt; On Sat Jul 02 20:55:14 2016, SPROUT wrote:
<div class="message-stanza open">&gt; &gt; &gt; On Sat Jul 02 20:42:51 2016, REHSACK wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; Please read &#34;perldoc lib&#34;. It has nothing to do with Cwd but with
&gt; &gt; &gt; &gt; insane use of lib.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Imagine &#34;LD_LIBRARY_PATH=.:LD_LIBRARY_PATH ...&#34;.
</div>&gt; &gt; &gt; 
&gt; &gt; &gt; Even if I don’t use lib or touch @INC, I can reproduce the problem.
</div>&gt; &gt; 
&gt; &gt; Show me! Doesn&#39;t sound reasonable. Check your PERL5LIB.
&gt; &gt; 
<div class="message-stanza open">&gt; &gt; &gt; That doesn’t mean it’s a List::MoreUtils bug, though.  It may be in
&gt; &gt; &gt; XSLoader.
</div>&gt; &gt; 
&gt; &gt; You can try knocking on their door. It might be possible, even unlikely.
</div>&gt; 
&gt; The bug does seem to be in XSLoader.  To reproduce on a Mac &#40;as I am using&#41;:
&gt; 
&gt; I have a file called moo.c, as in the original report, but it contains:
&gt; 
&gt; $ cat moo.c
&gt; void __attribute__&#40;&#40;constructor&#41;&#41; moo&#40;&#41; {
&gt;         system&#40;&#34;echo whooooooo&#34;&#41;;
&gt;         //kill&#40;0, SIGSEGV&#41;;
&gt; }
&gt; 
&gt; &#40;I commented out the kill, since SIGSEGV does not work without the correct header loaded, and my C knowledge is not so good.&#41;
&gt; 
&gt; $ gcc -Wall -fPIC -shared moo.c -o &#39;&#40;eval 1&#41;/auto/List/MoreUtils/MoreUtils.bundle&#39;
&gt; 
&gt; &#40;Mac uses .bundle, not .so.&#41;
&gt; 
&gt; 
&gt; $ perl -e &#39;eval q| package List::MoreUtils; use XSLoader &#40;&#41;; XSLoader::load&#40;&#34;List::MoreUtils&#34;, &#34;0.415&#34;&#41; |&#39;
&gt; whooooooo
&gt; $ perl -v |grep version
&gt; This is perl 5, version 12, subversion 4 &#40;v5.12.4&#41; built for darwin-thread-multi-2level
&gt; $ perl5.24.0 -e &#39;eval q| package List::MoreUtils; use XSLoader &#40;&#41;; XSLoader::load&#40;&#34;List::MoreUtils&#34;, &#34;0.415&#34;&#41; |&#39;
&gt; whooooooo
&gt; $ perl5.25.2 -e &#39;eval q| package List::MoreUtils; use XSLoader &#40;&#41;; XSLoader::load&#40;&#34;List::MoreUtils&#34;, &#34;0.415&#34;&#41; |&#39;
&gt; whooooooo
&gt; 
&gt; It appears to be the string eval that is causing it.  If you are
&gt; using string eval to avoid loading XSLoader.pm unnecessarily, you
&gt; can use require instead of use and avoid the whole eval.
&gt; 
&gt; Now why XSLoader looks at the file name of the caller I cannot say.
&gt; Maybe it is designed to work that way.  The documentation is
&gt; certainly silent on the matter, and it does seem like a security
&gt; hole.  So this may not be a bug in List::MoreUtils per se &#40;I still
&gt; need to find out&#41;, but you can at least plug the security whole by
&gt; avoiding the eval.
</div>
I&#39;m adding Niko to the loop, since we loked at the issue further
yersrday &#40;and concluded as well that&#39;s not List::MoreUtils but
XSLoader actually&#41;.

Salvatore
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;03&nbsp;06:16:58&nbsp;2016</span>
    <span class="description">rehsack [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #115808] Tries to load code from cwd</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 3 Jul 2016 12:16:43 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-List-MoreUtils [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jens Rehsack &lt;rehsack [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Am 03.07.2016 um 03:43 schrieb Father Chrysostomos via RT &lt;bug-List-MoreUtils@rt.cpan.org&gt;:
&gt; 
&gt;       Queue: List-MoreUtils
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=115808">https://rt.cpan.org/Ticket/Display.html?id=115808</a></span> &gt;
&gt; 
&gt; On Sat Jul 02 21:05:17 2016, REHSACK wrote:
<div class="message-stanza open">&gt;&gt; On Sat Jul 02 20:55:14 2016, SPROUT wrote:
<div class="message-stanza open">&gt;&gt;&gt; On Sat Jul 02 20:42:51 2016, REHSACK wrote:
<div class="message-stanza open">&gt;&gt;&gt;&gt; Please read &#34;perldoc lib&#34;. It has nothing to do with Cwd but with
&gt;&gt;&gt;&gt; insane use of lib.
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Imagine &#34;LD_LIBRARY_PATH=.:LD_LIBRARY_PATH ...&#34;.
</div>&gt;&gt;&gt; 
&gt;&gt;&gt; Even if I don’t use lib or touch @INC, I can reproduce the problem.
</div>&gt;&gt; 
&gt;&gt; Show me! Doesn&#39;t sound reasonable. Check your PERL5LIB.
</div>&gt; 
&gt; I’m reproducing this under the CPAN shell &#40;with ‘look List::MoreUtils’&#41; after testing several modules, so PERL5LIB is huge:
&gt; 
&gt; /Users/sprout/.cpan/build/List-MoreUtils-0.415-CTkZjK/blib/arch:/Users/sprout/.cpan/build/List-MoreUtils-0.415-CTkZjK/blib/lib:/Users/sprout/.cpan/build/Exporter-Tiny-0.042-kdbuNG/blib/arch:/Users/sprout/.cpan/build/Exporter-Tiny-0.042-kdbuNG/blib/lib:/Users/sprout/.cpan/build/Tie-SecureHash-1.10-pERDdy/blib/arch:/Users/sprout/.cpan/build/Tie-SecureHash-1.10-pERDdy/blib/lib:/Users/sprout/.cpan/build/Sub-Attributes-0.02-AD9F0P/blib/arch:/Users/sprout/.cpan/build/Sub-Attributes-0.02-AD9F0P/blib/lib:/Users/sprout/.cpan/build/Devel-DebugHooks-0.02-4LFCO4/blib/arch:/Users/sprout/.cpan/build/Devel-DebugHooks-0.02-4LFCO4/blib/lib:/Users/sprout/.cpan/build/Data-Dump-1.23-ULwHY5/blib/arch:/Users/sprout/.cpan/build/Data-Dump-1.23-ULwHY5/blib/lib:/Users/sprout/.cpan/build/Data-Section-Simple-0.07-dTupfF/blib/arch:/Users/sprout/.cpan/build/Data-Section-Simple-0.07-dTupfF/blib/lib:/Users/sprout/.cpan/build/Test-Requires-0.10-hoE7fE/blib/arch:/Users/sprout/.cpan/build/Test-Requires-0.10-ho
&gt; E7fE/blib/lib:/Users/sprout/.cpan/build/Test-Differences-0.64-5doKuc/blib/arch:/Users/sprout/.cpan/build/Test-Differences-0.64-5doKuc/blib/lib:/Users/sprout/.cpan/build/Text-Diff-1.44-48i5w6/blib/arch:/Users/sprout/.cpan/build/Text-Diff-1.44-48i5w6/blib/lib:/Users/sprout/.cpan/build/Algorithm-Diff-1.1903-cVmSPL/blib/arch:/Users/sprout/.cpan/build/Algorithm-Diff-1.1903-cVmSPL/blib/lib:/Users/sprout/.cpan/build/Guard-1.023-mQqrS7/blib/arch:/Users/sprout/.cpan/build/Guard-1.023-mQqrS7/blib/lib:/Users/sprout/.cpan/build/Test-Output-1.03-ok9_8N/blib/arch:/Users/sprout/.cpan/build/Test-Output-1.03-ok9_8N/blib/lib:/Users/sprout/.cpan/build/Capture-Tiny-0.42-5FXy22/blib/arch:/Users/sprout/.cpan/build/Capture-Tiny-0.42-5FXy22/blib/lib:/Users/sprout/.cpan/build/Sub-Exporter-0.987-ZQUXJy/blib/arch:/Users/sprout/.cpan/build/Sub-Exporter-0.987-ZQUXJy/blib/lib:/Users/sprout/.cpan/build/Data-OptList-0.110-bl41NG/blib/arch:/Users/sprout/.cpan/build/Data-OptList-0.110-bl41NG/blib/lib:/Users/
&gt; sprout/.cpan/build/Sub-Install-0.928-mdDVbc/blib/arch:/Users/sprout/.cpan/build/Sub-Install-0.928-mdDVbc/blib/lib:/Users/sprout/.cpan/build/Params-Util-1.07-w809Vf/blib/arch:/Users/sprout/.cpan/build/Params-Util-1.07-w809Vf/blib/lib:/Users/sprout/.cpan/build/XML-DOM-Lite-0.15-U3W4E9/blib/arch:/Users/sprout/.cpan/build/XML-DOM-Lite-0.15-U3W4E9/blib/lib:/Users/sprout/.cpan/build/constant-lexical-2.0002-xTYIno/blib/arch:/Users/sprout/.cpan/build/constant-lexical-2.0002-xTYIno/blib/lib:/Users/sprout/.cpan/build/WWW-Scripter-Plugin-JavaScript-0.009-odgHnt/blib/arch:/Users/sprout/.cpan/build/WWW-Scripter-Plugin-JavaScript-0.009-odgHnt/blib/lib:/Users/sprout/.cpan/build/Hash-Util-FieldHash-Compat-0.11-asgN0B/blib/arch:/Users/sprout/.cpan/build/Hash-Util-FieldHash-Compat-0.11-asgN0B/blib/lib:/Users/sprout/.cpan/build/WWW-Scripter-0.031-yo7Ha2/blib/arch:/Users/sprout/.cpan/build/WWW-Scripter-0.031-yo7Ha2/blib/lib:/Users/sprout/.cpan/build/WWW-Mechanize-1.75-MZRJyX/blib/arch:/Users/sp
&gt; rout/.cpan/build/WWW-Mechanize-1.75-MZRJyX/blib/lib:/Users/sprout/.cpan/build/HTML-Form-6.03-RX58s6/blib/arch:/Users/sprout/.cpan/build/HTML-Form-6.03-RX58s6/blib/lib:/Users/sprout/.cpan/build/HTTP-Server-Simple-0.51-XvOJSq/blib/arch:/Users/sprout/.cpan/build/HTTP-Server-Simple-0.51-XvOJSq/blib/lib:/Users/sprout/.cpan/build/CGI-4.31-gdLCPv/blib/arch:/Users/sprout/.cpan/build/CGI-4.31-gdLCPv/blib/lib:/Users/sprout/.cpan/build/Test-Deep-1.120-VHt5Z4/blib/arch:/Users/sprout/.cpan/build/Test-Deep-1.120-VHt5Z4/blib/lib:/Users/sprout/.cpan/build/Test-Simple-1.302030-QFfUEb/blib/arch:/Users/sprout/.cpan/build/Test-Simple-1.302030-QFfUEb/blib/lib:/Users/sprout/.cpan/build/Test-Warn-0.30-TtNnP9/blib/arch:/Users/sprout/.cpan/build/Test-Warn-0.30-TtNnP9/blib/lib:/Users/sprout/.cpan/build/Sub-Uplevel-0.25-dKKo0N/blib/arch:/Users/sprout/.cpan/build/Sub-Uplevel-0.25-dKKo0N/blib/lib:/Users/sprout/.cpan/build/HTML-Tree-5.03-OZ1Hi9/blib/arch:/Users/sprout/.cpan/build/HTML-Tree-5.03-OZ1Hi9/bl
&gt; ib/lib:/Users/sprout/.cpan/build/Test-Fatal-0.014-hU9Lgh/blib/arch:/Users/sprout/.cpan/build/Test-Fatal-0.014-hU9Lgh/blib/lib:/Users/sprout/.cpan/build/Try-Tiny-0.24-1xKXA_/blib/arch:/Users/sprout/.cpan/build/Try-Tiny-0.24-1xKXA_/blib/lib:/Users/sprout/.cpan/build/Module-Build-0.4218-7XEPDK/blib/arch:/Users/sprout/.cpan/build/Module-Build-0.4218-7XEPDK/blib/lib:/Users/sprout/.cpan/build/CPAN-Meta-2.150005-ncCfOU/blib/arch:/Users/sprout/.cpan/build/CPAN-Meta-2.150005-ncCfOU/blib/lib:/Users/sprout/.cpan/build/libwww-perl-6.15-V9JWfm/blib/arch:/Users/sprout/.cpan/build/libwww-perl-6.15-V9JWfm/blib/lib:/Users/sprout/.cpan/build/WWW-RobotRules-6.02-YA6oBO/blib/arch:/Users/sprout/.cpan/build/WWW-RobotRules-6.02-YA6oBO/blib/lib:/Users/sprout/.cpan/build/HTTP-Negotiate-6.01-FmYGqw/blib/arch:/Users/sprout/.cpan/build/HTTP-Negotiate-6.01-FmYGqw/blib/lib:/Users/sprout/.cpan/build/File-Listing-6.04-eTJjcl/blib/arch:/Users/sprout/.cpan/build/File-Listing-6.04-eTJjcl/blib/lib:/Users/sprou
&gt; t/.cpan/build/Net-HTTP-6.09-qwmGZ5/blib/arch:/Users/sprout/.cpan/build/Net-HTTP-6.09-qwmGZ5/blib/lib:/Users/sprout/.cpan/build/JE-0.066-QVt71a/blib/arch:/Users/sprout/.cpan/build/JE-0.066-QVt71a/blib/lib:/Users/sprout/.cpan/build/HTML-DOM-0.056-jLRcjO/blib/arch:/Users/sprout/.cpan/build/HTML-DOM-0.056-jLRcjO/blib/lib:/Users/sprout/.cpan/build/TimeDate-2.30-c_ggkF/blib/arch:/Users/sprout/.cpan/build/TimeDate-2.30-c_ggkF/blib/lib:/Users/sprout/.cpan/build/HTML-Encoding-0.61-CRo9H7/blib/arch:/Users/sprout/.cpan/build/HTML-Encoding-0.61-CRo9H7/blib/lib:/Users/sprout/.cpan/build/CSS-DOM-0.16-KR6L9O/blib/arch:/Users/sprout/.cpan/build/CSS-DOM-0.16-KR6L9O/blib/lib:/Users/sprout/.cpan/build/Clone-0.38-9vLHRf/blib/arch:/Users/sprout/.cpan/build/Clone-0.38-9vLHRf/blib/lib:/Users/sprout/.cpan/build/HTML-Parser-3.72-9PPLkd/blib/arch:/Users/sprout/.cpan/build/HTML-Parser-3.72-9PPLkd/blib/lib:/Users/sprout/.cpan/build/HTML-Tagset-3.20-9h1_zh/blib/arch:/Users/sprout/.cpan/build/HTML-Tagset
&gt; -3.20-9h1_zh/blib/lib:/Users/sprout/.cpan/build/HTTP-Daemon-6.01-fiKf42/blib/arch:/Users/sprout/.cpan/build/HTTP-Daemon-6.01-fiKf42/blib/lib:/Users/sprout/.cpan/build/HTTP-Cookies-6.01-dEwKpm/blib/arch:/Users/sprout/.cpan/build/HTTP-Cookies-6.01-dEwKpm/blib/lib:/Users/sprout/.cpan/build/HTTP-Message-6.11-mjjDTP/blib/arch:/Users/sprout/.cpan/build/HTTP-Message-6.11-mjjDTP/blib/lib:/Users/sprout/.cpan/build/IO-HTML-1.001-iLv6MQ/blib/arch:/Users/sprout/.cpan/build/IO-HTML-1.001-iLv6MQ/blib/lib:/Users/sprout/.cpan/build/Encode-Locale-1.05-snH7DD/blib/arch:/Users/sprout/.cpan/build/Encode-Locale-1.05-snH7DD/blib/lib:/Users/sprout/.cpan/build/HTTP-Date-6.02-GRb_o3/blib/arch:/Users/sprout/.cpan/build/HTTP-Date-6.02-GRb_o3/blib/lib:/Users/sprout/.cpan/build/LWP-MediaTypes-6.02-SG7cyK/blib/arch:/Users/sprout/.cpan/build/LWP-MediaTypes-6.02-SG7cyK/blib/lib:/Users/sprout/.cpan/build/URI-1.71-PQBd3T/blib/arch:/Users/sprout/.cpan/build/URI-1.71-PQBd3T/blib/lib
&gt; 
&gt; But that does not explain why a directory called ‘&#40;eval 1&#41;’ is checked before anything else.  So there clearly is a bug somewhere.  But where?  That is the question.
</div>
When you want to reproduce this and point a clear bug, reduce to the max.
The question, why XSLoader fails might be a to long @INC - you can easily provoke by using a for loop in your shell.

You should also do a

$ perl -MData::Dumper -lE &#39;print Dumper \@INC&#39;

which shows that nothing is prepending &#39;.&#39; to your include path.

When you got an accepted issue in XSLoader which is not in DynaLoader, please update this ticket to allow me verifying whether DynaLoader is doing the job, too.

Cheers
--
Jens Rehsack - rehsack@gmail.com
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;03&nbsp;09:36:37&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jul 03 06:16:58 2016, rehsack@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; When you got an accepted issue in XSLoader which is not in DynaLoader,
&gt; please update this ticket to allow me verifying whether DynaLoader is
&gt; doing the job, too.
</div>
I’ve found the bug in XSLoader and am working on a patch for it.  I have written a unit test that fails in the perl core with only three entries in @INC, so I know the long @INC is unrelated.  DynaLoader is not affected, because it does search @INC, whereas XSLoader tries to take shortcuts based on &#40;caller&#41;[1].

The patch, a work in progress, is attached here, if you want to see it.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> open_24udpsS1.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 014d8912d3969aa3286cad4fe79ee5d596668309 Mon Sep 17 00:00:00 2001
From: Father Chrysostomos &lt;sprout@cpan.org&gt;
Date: Sat, 2 Jul 2016 22:56:51 -0700
Subject: [PATCH] =?UTF-8?q?Don=E2=80=99t=20let=20XSLoader=20load=20relative=20?=
 =?UTF-8?q?paths?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

[rt.cpan.org #115808]

The logic in XSLoader for determining the library goes like this:

    my $c = &#40;&#41; = split&#40;/::/,$caller,-1&#41;;
    $modlibname =~ s,[\\/][^\\/]+$,, while $c--;    # Q&#38;D basename
    my $file = &#34;$modlibname/auto/$modpname/$modfname.bundle&#34;;

&#40;That last line varies by platform.&#41;

$caller is the calling package.  $modlibname is the calling file.  It
removes as many path segments from $modlibname as there are segments
in $caller.  So if you have List/MoreUtils/XS.pm calling XSLoader from
the List::MoreUtils package, the $modlibname will end up containing
the path in @INC where XS.pm was found, following by &#34;/List&#34;.  Usually
the fallback to Dynaloader::bootstrap_inherit, which does an @INC
search, makes things Just Work.

But List/MoreUtils/XS.pm actually calls XSLoader::load from
inside a string eval.  That means the path ends up being
&#34;&#40;eval 1&#41;/auto/List/MoreUtils/MoreUtils.bundle&#34;.

So if someone creates a directory named ‘&#40;eval 1&#41;’ with a
naughty binary file in it, it will be loaded if a script
using List::MoreUtils is run in the parent directory.  See
&lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=115808">https://rt.cpan.org/Ticket/Display.html?id=115808</a></span>&gt;.

This commit makes XSLoader fall back to Dynaloader’s @INC search if
the calling file has a relative path.

diff --git a/dist/XSLoader/XSLoader_pm.PL b/dist/XSLoader/XSLoader_pm.PL
index 8a8852e..046ae0e 100644
--- a/dist/XSLoader/XSLoader_pm.PL
+++ b/dist/XSLoader/XSLoader_pm.PL
@@ -91,6 +91,8 @@ print OUT &lt;&lt;&#39;EOT&#39;;
     my $modpname = join&#40;&#39;/&#39;,@modparts&#41;;
     my $c = &#40;&#41; = split&#40;/::/,$caller,-1&#41;;
     $modlibname =~ s,[\\/][^\\/]+$,, while $c--;    # Q&#38;D basename
+    # Avoid relative paths
+    goto \&#38;XSLoader::bootstrap_inherit unless $modlibname =~ m|^[\\/]|;
 EOT
 
 my $dl_dlext = quotemeta&#40;$Config::Config{&#39;dlext&#39;}&#41;;
diff --git a/dist/XSLoader/t/XSLoader.t b/dist/XSLoader/t/XSLoader.t
index 2ff11fe..9fd0586 100644
--- a/dist/XSLoader/t/XSLoader.t
+++ b/dist/XSLoader/t/XSLoader.t
@@ -33,7 +33,7 @@ my %modules = &#40;
     &#39;Time::HiRes&#39;=&gt; q| ::can_ok&#40; &#39;Time::HiRes&#39; =&gt; &#39;usleep&#39;  &#41; |,  # 5.7.3
 &#41;;
 
-plan tests =&gt; keys&#40;%modules&#41; * 3 + 9;
+plan tests =&gt; keys&#40;%modules&#41; * 3 + 10;
 
 # Try to load the module
 use_ok&#40; &#39;XSLoader&#39; &#41;;
@@ -114,6 +114,8 @@ SKIP: {
 
   skip &#34;Cannot find $peek_file&#34;, 1
     unless $module_path;
+  skip &#34;Cannot test with relative path&#34;, 1
+    unless $module_path =~ m|^[\\/]|;
 
   # [perl #122455]
   # die instead of falling back to DynaLoader
@@ -125,3 +127,28 @@ XSLoader::load&#40;&#34;Devel::Peek&#34;&#41;;
 EOS
     or ::diag $@;
 }
+
+SKIP: {
+  skip &#34;File::Path not available&#34;, 1
+    unless eval { require File::Path };
+  my $name = &#34;phooo$$&#34;;
+  File::Path::make_path&#40;&#34;$name/auto/Foo/Bar&#34;&#41;;
+  open my $fh,
+    &#34;&gt;$name/auto/Foo/Bar/Bar.&#34; . quotemeta&#40;$Config::Config{&#39;dlext&#39;}&#41;;
+  close $fh;
+  my $fell_back;
+  local *XSLoader::bootstrap_inherit = sub {
+    $fell_back++;
+    # Break out of the calling subs
+    goto the_test;
+  };
+  eval &lt;&lt;END;
+#line 1 $name
+package Foo::Bar;
+XSLoader::load&#40;&#34;Foo::Bar&#34;&#41;;
+END
+ the_test:
+  ok $fell_back,
+    &#39;XSLoader will not load relative paths based on &#40;caller&#41;[1]&#39;;
+  File::Path::remove_tree&#40;$name&#41;;
+}
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;03&nbsp;13:43:20&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Why does List::MoreUtils call XSLoader from inside a stringy eval? That seems unnecessary and also results in all the other errors discussed here.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;03&nbsp;14:20:04&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> sebastien [...] aperghis.net</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jul 03 09:36:37 2016, SPROUT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun Jul 03 06:16:58 2016, rehsack@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; When you got an accepted issue in XSLoader which is not in
&gt; &gt; DynaLoader,
&gt; &gt; please update this ticket to allow me verifying whether DynaLoader is
&gt; &gt; doing the job, too.
</div>&gt; 
&gt; I’ve found the bug in XSLoader and am working on a patch for it.  I
&gt; have written a unit test that fails in the perl core with only three
&gt; entries in @INC, so I know the long @INC is unrelated.  DynaLoader is
&gt; not affected, because it does search @INC, whereas XSLoader tries to
&gt; take shortcuts based on &#40;caller&#41;[1].
</div>
The bug is now fixed in the perl core: <span class="clickylink"><a target="new" rel="nofollow" href="http://perl5.git.perl.org/perl.git/commitdiff/08e3451d7">http://perl5.git.perl.org/perl.git/commitdiff/08e3451d7</a></span>

A am cc’ing the CPAN maintainer of XSLoader, since it seems advisable that we get a new release soon.

As for List::MoreUtils, I think one of three things should happen:

1&#41; Depend on XSLoader 0.22.
2&#41; Avoid the string eval.
3&#41; Use a #line directive.

Item #1 would require waiting for a new CPAN release of XSLoader.  Item #3 requires a smaller change to the code than #2, so I have attached a patch.  Even if List::MoreUtils is not at fault, I think this patch is helpful, as it makes it easier to trace any errors or warnings that originate from the string eval.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Patch for List-MoreUtils.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -rup List-MoreUtils-0.415-sba79Z-orig/lib/List/MoreUtils/XS.pm List-MoreUtils-0.415-sba79Z/lib/List/MoreUtils/XS.pm
--- List-MoreUtils-0.415-sba79Z-orig/lib/List/MoreUtils/XS.pm	2016-05-01 09:47:00.000000000 -0700
+++ List-MoreUtils-0.415-sba79Z/lib/List/MoreUtils/XS.pm	2016-07-03 11:02:41.000000000 -0700
@@ -13,6 +13,7 @@ BEGIN
     # Load the XS at compile-time so that redefinition warnings will be
     # thrown correctly if the XS versions of part or indexes loaded
     my $ldr = &lt;&lt;EOLDR;
+#line ${\&#40;__LINE__+1 . &#34; &#34; . __FILE__&#41;}
 	package List::MoreUtils;
 
 	# PERL_DL_NONLAZY must be false, or any errors in loading will just
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;04&nbsp;08:01:21&nbsp;2016</span>
    <span class="description">sebastien [...] aperghis.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #115808] Tries to load code from cwd</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 4 Jul 2016 14:01:07 +0200 &#40;CEST&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-List-MoreUtils [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sébastien Aperghis-Tramoni &lt;sebastien [...] aperghis.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Father Chrysostomos wrote via RT:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun Jul 03 09:36:37 2016, SPROUT wrote:
<div class="message-stanza open">&gt; &gt; On Sun Jul 03 06:16:58 2016, rehsack@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; When you got an accepted issue in XSLoader which is not in
&gt; &gt; &gt; DynaLoader,
&gt; &gt; &gt; please update this ticket to allow me verifying whether
&gt; &gt; &gt; DynaLoader is
&gt; &gt; &gt; doing the job, too.
</div>&gt; &gt; 
&gt; &gt; I’ve found the bug in XSLoader and am working on a patch for it.  I
&gt; &gt; have written a unit test that fails in the perl core with only
&gt; &gt; three
&gt; &gt; entries in @INC, so I know the long @INC is unrelated.  DynaLoader
&gt; &gt; is
&gt; &gt; not affected, because it does search @INC, whereas XSLoader tries
&gt; &gt; to
&gt; &gt; take shortcuts based on &#40;caller&#41;[1].
</div>&gt; 
&gt; The bug is now fixed in the perl core:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://perl5.git.perl.org/perl.git/commitdiff/08e3451d7">http://perl5.git.perl.org/perl.git/commitdiff/08e3451d7</a></span>
&gt; 
&gt; A am cc’ing the CPAN maintainer of XSLoader, since it seems advisable
&gt; that we get a new release soon.
</div>
Noted. I&#39;ll make a release tonight.


-- 
Sébastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;04&nbsp;11:00:19&nbsp;2016</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> sebastien [...] aperghis.net, ntyni [...] debian.org, carnil [...] debian.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jul 03 14:20:04 2016, SPROUT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun Jul 03 09:36:37 2016, SPROUT wrote:
<div class="message-stanza open">&gt; &gt; [...]
&gt; &gt; I’ve found the bug in XSLoader and am working on a patch for it.  I
&gt; &gt; have written a unit test that fails in the perl core with only three
&gt; &gt; entries in @INC, so I know the long @INC is unrelated.  DynaLoader is
&gt; &gt; not affected, because it does search @INC, whereas XSLoader tries to
&gt; &gt; take shortcuts based on &#40;caller&#41;[1].
</div>&gt; 
&gt; The bug is now fixed in the perl core:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://perl5.git.perl.org/perl.git/commitdiff/08e3451d7">http://perl5.git.perl.org/perl.git/commitdiff/08e3451d7</a></span>
&gt; 
&gt; A am cc’ing the CPAN maintainer of XSLoader, since it seems advisable
&gt; that we get a new release soon.
&gt; 
&gt; As for List::MoreUtils, I think one of three things should happen:
&gt; 
&gt; 1&#41; Depend on XSLoader 0.22.
&gt; 2&#41; Avoid the string eval.
&gt; 3&#41; Use a #line directive.
&gt; 
&gt; Item #1 would require waiting for a new CPAN release of XSLoader.
&gt; Item #3 requires a smaller change to the code than #2, so I have
&gt; attached a patch.  Even if List::MoreUtils is not at fault, I think
&gt; this patch is helpful, as it makes it easier to trace any errors or
&gt; warnings that originate from the string eval.
</div>
I think I rely on the first two ones:

1&#41; Requiring a version of XSLoader without such a bug seems reasonable regardless avoiding the string eval.
2&#41; the string eval is a relic from early 0.4xx versions of List::MoreUtils playing with different strategys to fix the broken API

The line hint seems to be valuable for a lot of other use cases, either. Thanks for it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;04&nbsp;11:52:35&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> sebastien [...] aperghis.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jul 04 08:01:21 2016, sebastien@aperghis.net wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Father Chrysostomos wrote via RT:
&gt; 
<div class="message-stanza open">&gt; &gt; On Sun Jul 03 09:36:37 2016, SPROUT wrote:
<div class="message-stanza open">&gt; &gt; &gt; On Sun Jul 03 06:16:58 2016, rehsack@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; When you got an accepted issue in XSLoader which is not in
&gt; &gt; &gt; &gt; DynaLoader,
&gt; &gt; &gt; &gt; please update this ticket to allow me verifying whether
&gt; &gt; &gt; &gt; DynaLoader is
&gt; &gt; &gt; &gt; doing the job, too.
</div>&gt; &gt; &gt; 
&gt; &gt; &gt; I’ve found the bug in XSLoader and am working on a patch for it.  I
&gt; &gt; &gt; have written a unit test that fails in the perl core with only
&gt; &gt; &gt; three
&gt; &gt; &gt; entries in @INC, so I know the long @INC is unrelated.  DynaLoader
&gt; &gt; &gt; is
&gt; &gt; &gt; not affected, because it does search @INC, whereas XSLoader tries
&gt; &gt; &gt; to
&gt; &gt; &gt; take shortcuts based on &#40;caller&#41;[1].
</div>&gt; &gt; 
&gt; &gt; The bug is now fixed in the perl core:
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://perl5.git.perl.org/perl.git/commitdiff/08e3451d7">http://perl5.git.perl.org/perl.git/commitdiff/08e3451d7</a></span>
&gt; &gt; 
&gt; &gt; A am cc’ing the CPAN maintainer of XSLoader, since it seems advisable
&gt; &gt; that we get a new release soon.
</div>&gt; 
&gt; Noted. I&#39;ll make a release tonight.
</div>
Thank you.  Could you wait, though, until I correct bleadperl to take Windows drive letters into account?  I have a patch which I hope to apply in the next few hours.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;04&nbsp;16:31:08&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> sebastien [...] aperghis.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jul 04 11:52:35 2016, SPROUT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Jul 04 08:01:21 2016, sebastien@aperghis.net wrote:
<div class="message-stanza open">&gt; &gt; Father Chrysostomos wrote via RT:
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; On Sun Jul 03 09:36:37 2016, SPROUT wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; On Sun Jul 03 06:16:58 2016, rehsack@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; When you got an accepted issue in XSLoader which is not in
&gt; &gt; &gt; &gt; &gt; DynaLoader,
&gt; &gt; &gt; &gt; &gt; please update this ticket to allow me verifying whether
&gt; &gt; &gt; &gt; &gt; DynaLoader is
&gt; &gt; &gt; &gt; &gt; doing the job, too.
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I’ve found the bug in XSLoader and am working on a patch for it.
&gt; &gt; &gt; &gt; I
&gt; &gt; &gt; &gt; have written a unit test that fails in the perl core with only
&gt; &gt; &gt; &gt; three
&gt; &gt; &gt; &gt; entries in @INC, so I know the long @INC is unrelated.
&gt; &gt; &gt; &gt; DynaLoader
&gt; &gt; &gt; &gt; is
&gt; &gt; &gt; &gt; not affected, because it does search @INC, whereas XSLoader tries
&gt; &gt; &gt; &gt; to
&gt; &gt; &gt; &gt; take shortcuts based on &#40;caller&#41;[1].
</div>&gt; &gt; &gt;
&gt; &gt; &gt; The bug is now fixed in the perl core:
&gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://perl5.git.perl.org/perl.git/commitdiff/08e3451d7">http://perl5.git.perl.org/perl.git/commitdiff/08e3451d7</a></span>
&gt; &gt; &gt;
&gt; &gt; &gt; A am cc’ing the CPAN maintainer of XSLoader, since it seems
&gt; &gt; &gt; advisable
&gt; &gt; &gt; that we get a new release soon.
</div>&gt; &gt;
&gt; &gt; Noted. I&#39;ll make a release tonight.
</div>&gt; 
&gt; Thank you.  Could you wait, though, until I correct bleadperl to take
&gt; Windows drive letters into account?  I have a patch which I hope to
&gt; apply in the next few hours.
</div>
As of v5.25.2-95-ga651dcd, bleadperl takes drive letters into account.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;05&nbsp;15:01:08&nbsp;2016</span>
    <span class="description">sebastien [...] aperghis.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #115808] Tries to load code from cwd</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 5 Jul 2016 21:00:53 +0200 &#40;CEST&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-List-MoreUtils [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sébastien Aperghis-Tramoni &lt;sebastien [...] aperghis.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Father Chrysostomos wrote via RT:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As of v5.25.2-95-ga651dcd, bleadperl takes drive letters into
&gt; account.
</div>
Just uploaded on the CPAN. I took the liberty to fix the following
nit in the documentation:

--- sources/XSLoader_pm.PL      2016-07-05 19:58:22.000000000 +0200
+++ blead/dist/XSLoader/XSLoader_pm.PL  2016-07-05 19:55:36.000000000 +0200
@@ -255,7 +255,7 @@

 =head1 VERSION

-Version 0.22
+Version 0.17

 =head1 SYNOPSIS


and patch the tests so they pass on Perl 5.8 and 5.10:

--- sources/t/XSLoader.t        2016-07-05 20:36:50.000000000 +0200
+++ blead/dist/XSLoader/t/XSLoader.t    2016-07-05 19:55:36.000000000 +0200
@@ -130,7 +130,7 @@
   skip &#34;File::Path not available&#34;, 1
     unless eval { require File::Path };
   my $name = &#34;phooo$$&#34;;
-  File::Path::mkpath&#40;&#34;$name/auto/Foo/Bar&#34;&#41;;
+  File::Path::make_path&#40;&#34;$name/auto/Foo/Bar&#34;&#41;;
   open my $fh,
     &#34;&gt;$name/auto/Foo/Bar/Bar.$Config::Config{&#39;dlext&#39;}&#34;;
   close $fh;
@@ -148,5 +148,5 @@
  the_test:
   ok $fell_back,
     &#39;XSLoader will not load relative paths based on &#40;caller&#41;[1]&#39;;
-  File::Path::rmtree&#40;$name&#41;;
+  File::Path::remove_tree&#40;$name&#41;;
 }


-- 
Sébastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;05&nbsp;20:59:17&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> sebastien [...] aperghis.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jul 05 15:01:08 2016, sebastien@aperghis.net wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Father Chrysostomos wrote via RT:
&gt; 
<div class="message-stanza open">&gt; &gt; As of v5.25.2-95-ga651dcd, bleadperl takes drive letters into
&gt; &gt; account.
</div>&gt; 
&gt; Just uploaded on the CPAN. I took the liberty to fix the following
&gt; nit in the documentation:
&gt; 
&gt; --- sources/XSLoader_pm.PL    2016-07-05 19:58:22.000000000 +0200
&gt; +++ blead/dist/XSLoader/XSLoader_pm.PL        2016-07-05 19:55:36.000000000 +0200
&gt; @@ -255,7 +255,7 @@
</div>
Thank you.  I have applied your changes to blead in commit ae635bbffa.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;27&nbsp;09:26:50&nbsp;2016</span>
    <span class="description">dom [...] cpan.org -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;27&nbsp;09:59:07&nbsp;2016</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Not a problem of List::MoreUtils but fixed XSLoader is now prerequiste. So - we can call it kind-of solved ;&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;27&nbsp;09:59:08&nbsp;2016</span>
    <span class="description">REHSACK [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;27&nbsp;09:59:09&nbsp;2016</span>
    <span class="description">REHSACK [...] cpan.org -  Fixed in 0.416 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
