<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #112099 for Try-Tiny: finally block doesn&#39;t always run</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #112099 for Try-Tiny: finally block doesn&#39;t always run</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Try-Tiny/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Try-Tiny/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Try-Tiny/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Try-Tiny/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Try-Tiny">Try-Tiny CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">112099</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Try-Tiny/Active/">Try-Tiny</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">ether [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
Mai [...] jochen-schweizer.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-229112-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-229113-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.25-TRIAL    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;17&nbsp;09:59:59&nbsp;2016</span>
    <span class="description">Mai [...] jochen-schweizer.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> finally block doesn&#39;t always run</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 17 Feb 2016 14:59:39 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Try-Tiny [...] rt.cpan.org&#34; &lt;bug-Try-Tiny [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Lukas Mai &lt;Mai [...] jochen-schweizer.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The documentation says: &#34;finally blocks are always executed making them suitable for cleanup code which cannot be handled using local.&#34;

Here&#39;s a finally block that isn&#39;t always executed:

$ cat try.t
#!perl
use strict;
use warnings;

use Try::Tiny;
use Test::More tests =&gt; 3;

my $finally;

SKIP: {
    try {
        ok 1, &#34;in try&#34;;
        skip &#34;whee&#34;, 1;
        ok 0, &#34;you don&#39;t see me&#34;;
    } finally {
        $finally = 1;
    };
}

ok $finally, &#34;finally ran&#34;;
__END__

$ perl try.t
1..3
ok 1 - in try
ok 2 # skip whee
not ok 3 - finally ran
#   Failed test &#39;finally ran&#39;
#   at try.t line 20.
# Looks like you failed 1 test of 3.





Lukas Mai
JEP Developer

Jochen Schweizer Technology Solutions GmbH
Rosenheimer Strasse 145 e-f
D- 81671 Muenchen

Telefon: +49 89 606089-348
Fax:     +49 89 606089-949
E-Mail:  mailto:mai@jochen-schweizer.de

Ein Unternehmen der Jochen Schweizer Unternehmensgruppe
www.jochen-schweizer.de/unternehmensgruppe

HRB Muenchen 203111
Geschaeftsfuehrer: Florian Herschke
Prokurist: Saad Daoud

PS: Du bist, was du erlebst. Jetzt die Jochen Schweizer App kostenlos downloaden
www.jochen-schweizer.de/app

Hinweis: Diese Nachricht und jeder Anhang ist vertraulich und moeglicherweise rechtlich geschuetzt. Sollten Sie diese Nachricht irrtuemlich empfangen haben, benachrichtigen Sie bitte den Absender per Rueckantwort. Loeschen Sie diese Nachricht anschliessend sofort von Ihrem System. Bitte kopieren Sie diese Nachricht nicht, nutzen Sie den Inhalt der Nachricht nicht anderweitig und machen Sie die Nachricht und deren Inhalt keinem Dritten zugaenglich. Missbrauch kann strafrechtlich und zivilrechtlich verfolgt werden.
NOTICE: The information contained in this e-mail is confidential or may otherwise be legally privileged. It is intended for the named recipient only. If you have received it in error, please notify us immediately by reply and delete this message and all its attachments. Please note that any unauthorised review, copying, disclosing or otherwise making use of the information is strictly prohibited.




</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;17&nbsp;13:16:15&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Okay, I guess that should say: &#34;&#34;finally blocks are always executed, unless you use a goto to jump out...&#34;  :p
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;17&nbsp;13:16:16&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;17&nbsp;13:16:35&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;18&nbsp;02:47:33&nbsp;2016</span>
    <span class="description">Mai [...] jochen-schweizer.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #112099] finally block doesn&#39;t always run</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 18 Feb 2016 07:47:16 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Try-Tiny [...] rt.cpan.org&#34; &lt;bug-Try-Tiny [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Lukas Mai &lt;Mai [...] jochen-schweizer.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The documentation says:

Furthermore exceptions in finally blocks are not trappable and are unable to influence the execution of your program. This is due to limitation of DESTROY-based scope guards, which finally is implemented on top of. This may change in a future version of Try::Tiny.

So what&#39;s the point of Try::Tiny using scope guards if they don&#39;t always execute when leaving a try block &#40;including with goto&#41;?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Karen Etheridge via RT [mailto:bug-Try-Tiny@rt.cpan.org] 
Sent: Wednesday, February 17, 2016 7:16 PM
To: Lukas Mai &lt;Mai@jochen-schweizer.de&gt;
Subject: [rt.cpan.org #112099] finally block doesn&#39;t always run

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=112099">https://rt.cpan.org/Ticket/Display.html?id=112099</a></span> &gt;

Okay, I guess that should say: &#34;&#34;finally blocks are always executed, unless you use a goto to jump out...&#34;  :p




</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;18&nbsp;12:20:09&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2016-02-17 23:47:33, Mai@jochen-schweizer.de wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The documentation says:
&gt; 
&gt; Furthermore exceptions in finally blocks are not trappable and are
&gt; unable to influence the execution of your program. This is due to
&gt; limitation of DESTROY-based scope guards, which finally is implemented
&gt; on top of. This may change in a future version of Try::Tiny.
</div>
Isn&#39;t the issue that there is a goto in the *try* block, not the finally block? Let&#39;s tackle that first.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So what&#39;s the point of Try::Tiny using scope guards if they don&#39;t
&gt; always execute when leaving a try block &#40;including with goto&#41;?
</div>
Looking at the code, I don&#39;t see why the Try::Tiny::ScopeGuard::DESTROY shouldn&#39;t catch an exiting of the scope via goto. But perhaps there is a hole here that pure perl code cannot close?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;19&nbsp;11:34:00&nbsp;2016</span>
    <span class="description">MAUKE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Feb 18 12:20:09 2016, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2016-02-17 23:47:33, Mai@jochen-schweizer.de wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; So what&#39;s the point of Try::Tiny using scope guards if they don&#39;t
&gt; &gt; always execute when leaving a try block &#40;including with goto&#41;?
</div>&gt; 
&gt; Looking at the code, I don&#39;t see why the
&gt; Try::Tiny::ScopeGuard::DESTROY shouldn&#39;t catch an exiting of the scope
&gt; via goto. But perhaps there is a hole here that pure perl code cannot
&gt; close?
</div>
DESTROY isn&#39;t working because at that time the ScopeGuards object haven&#39;t been created yet. A solution would be to create the ScopeGuards before entering the try block.

I have a patch that does that, but it breaks the second test in t/global_destruction_forked.t:

#   Failed test &#39;nested try in cleanup after fork does not maintain outer finally block&#39;
#   at t/global_destruction_forked.t line 53.
#          got: &#39;256&#39;
#     expected: &#39;0&#39;
# Looks like you failed 1 test of 3.
t/global_destruction_forked.t .. Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/3 subtests 

That&#39;s because this change makes &#39;try { exit } finally { ... }&#39; run the &#39;...&#39; part. I&#39;m not sure what to do about that.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;19&nbsp;12:13:36&nbsp;2016</span>
    <span class="description">MAUKE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Feb 19 11:34:00 2016, MAUKE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Thu Feb 18 12:20:09 2016, ETHER wrote:
<div class="message-stanza open">&gt; &gt; On 2016-02-17 23:47:33, Mai@jochen-schweizer.de wrote:
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; So what&#39;s the point of Try::Tiny using scope guards if they don&#39;t
&gt; &gt; &gt; always execute when leaving a try block &#40;including with goto&#41;?
</div>&gt; &gt;
&gt; &gt; Looking at the code, I don&#39;t see why the
&gt; &gt; Try::Tiny::ScopeGuard::DESTROY shouldn&#39;t catch an exiting of the
&gt; &gt; scope
&gt; &gt; via goto. But perhaps there is a hole here that pure perl code cannot
&gt; &gt; close?
</div>&gt; 
&gt; DESTROY isn&#39;t working because at that time the ScopeGuards object
&gt; haven&#39;t been created yet. A solution would be to create the
&gt; ScopeGuards before entering the try block.
&gt; 
&gt; I have a patch that does that, but it breaks the second test in
&gt; t/global_destruction_forked.t:
&gt; 
&gt; #   Failed test &#39;nested try in cleanup after fork does not maintain
&gt; outer finally block&#39;
&gt; #   at t/global_destruction_forked.t line 53.
&gt; #          got: &#39;256&#39;
&gt; #     expected: &#39;0&#39;
&gt; # Looks like you failed 1 test of 3.
&gt; t/global_destruction_forked.t .. Dubious, test returned 1 &#40;wstat 256,
&gt; 0x100&#41;
&gt;  Failed 1/3 subtests
&gt; 
&gt; That&#39;s because this change makes &#39;try { exit } finally { ... }&#39; run
&gt; the &#39;...&#39; part. I&#39;m not sure what to do about that.
</div>
I have a slightly disgusting fix that
 1. changes t/global_destruction_forked.t, introducing a global variable, and
 2. changes Try::Tiny to store @guards in a local&#40;&#41;ized package variable

Part 2 is required for perls &lt; 5.20 due to <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/Public/Bug/Display.html?id=119311">https://rt.perl.org/Public/Bug/Display.html?id=119311</a></span>. :-&#40;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;19&nbsp;12:35:57&nbsp;2016</span>
    <span class="description">MAUKE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Feb 19 12:13:36 2016, MAUKE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I have a slightly disgusting fix that
&gt;  1. changes t/global_destruction_forked.t, introducing a global
&gt; variable, and
&gt;  2. changes Try::Tiny to store @guards in a local&#40;&#41;ized package
&gt; variable
&gt; 
&gt; Part 2 is required for perls &lt; 5.20 due to
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/Public/Bug/Display.html?id=119311">https://rt.perl.org/Public/Bug/Display.html?id=119311</a></span>. :-&#40;
</div>
Patch pushed to <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/karenetheridge/Try-Tiny/pull/1">https://github.com/karenetheridge/Try-Tiny/pull/1</a></span>.

Since my last comment, I made t/global_destruction_forked.t a bit less ugly and added comments to lib/Try/Tiny.pm.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;22&nbsp;15:18:19&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks! <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/karenetheridge/Try-Tiny/pull/1">https://github.com/karenetheridge/Try-Tiny/pull/1</a></span> has been merged and released as 0.25-TRIAL.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;22&nbsp;15:18:21&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;22&nbsp;19:19:38&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Fixed in 0.25-TRIAL added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
