<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #29674 for Games-Tournament-Swiss: method &#39;updateScores&#39; in Tournament.pm</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #29674 for Games-Tournament-Swiss: method &#39;updateScores&#39; in Tournament.pm</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Games-Tournament-Swiss">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Games-Tournament-Swiss">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Games-Tournament-Swiss">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Games-Tournament-Swiss">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Games-Tournament-Swiss">Games-Tournament-Swiss CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">29674</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Games-Tournament-Swiss">Games-Tournament-Swiss</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
bartolin [...] gmx.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-42558-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-42559-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




signature.asc<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/366452/166128/signature.asc">
Sun Sep 30 08:02:13 2007 (189b) by bartolin [...] gmx.de
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/366357/166067/signature.asc">
Sat Sep 29 18:24:02 2007 (189b) by bartolin [...] gmx.de
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=29674">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-366357" href="/Public/Bug/Display.html?id=29674#txn-366357">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;29&nbsp;18:24:02&nbsp;2007</span>
    <span class="description">bartolin [...] gmx.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> method &#39;updateScores&#39; in Tournament.pm</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 30 Sep 2007 00:22:34 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Games-Tournament-Swiss [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Christian Bartolomaeus &lt;bartolin [...] gmx.de&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/366357/166066/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/166066">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 876b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

trying to use the Games::Tournament::Swiss modules, I discovered a
problem with method &#39;updateScores&#39; from Tournament.pm.

It seems to me, that line 282 of Tournament.pm

  my $roles = $self-&gt;roles;

causes problems, because there is no method &#39;roles&#39; defined. After
changing that line to

  my $roles = [qw/Black White/];

it worked for me.

Apart from this, I didn&#39;t fully understand how to use method &#39;score&#39;
from Games::Tournament::Contestant correctly. If I try to call this
method via 

  $player-&gt;score

it seems to me, that %converter isn&#39;t initialized &#40;via use constant&#41;.
There must be a simple solution to this problem, because it works fine
with your scripts &#40;for instance with &#39;crosstable&#39;&#41;. I had to define
%converter manually via

  %converter = &#40;&#39;win&#39;,&#39;1&#39;,&#39;loss&#39;,&#39;0&#39;,&#39;draw&#39;,&#39;0.5&#39;,&#39;absent&#39;,&#39;0&#39;,&#39;bye&#39;,&#39;1&#39;&#41;;

Do you have a tip for me here?

Thanks

Christian
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/366357/166067/signature.asc">Download signature.asc</a><br />
<span class="downloadcontenttype">application/pgp-signature 189b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-366431" href="/Public/Bug/Display.html?id=29674#txn-366431">#</a>      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;03:58:32&nbsp;2007</span>
    <span class="description">DRBEAN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/366431/166115/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/166115">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Sep 29 18:24:02 2007, bartolin@gmx.de wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It seems to me, that line 282 of Tournament.pm
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;   my $roles = $self-&gt;roles;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; causes problems, because there is no method &#39;roles&#39; 
&gt; defined. After changing that line to
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;   my $roles = [qw/Black White/];
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; it worked for me.
</div>
In my scripts, I think I have stopped using updateScores. I 
generate Games::Tournament::Card objects, and then use the 
collectCards method, so the Games::Tournament::Swiss object 
has access to those objects.

I don&#39;t know whether to just remove the updateScores method, 
or to get it working again.

What are the advantages of using that method, over 
collectCards?

I don&#39;t have a good idea of the work process of the arbiter.
If the &#40;names of the&#41; methods corresponded to the sequence
of tasks that the arbiter carried out, it would be obvious
to the script writer which methods to choose and how to
write the script.

The methods are very fragile, so if you try to develop your
own sequence it is difficult to get the script to work.
I had more trouble writing the scripts than the modules.

As for roles, I&#39;m now using a
Games::Tournament::Swiss::Config class to allow the
programmer to set their own values for ROLES, SCORES,
FIRSTROUND, etc.

This makes it more difficult for you. You have to set these
in a BEGIN block in your script.

But it allows me to use roles other than Black and White and
different scores, etc in a non-standard match situation.

I think if you take out the call to the roles method, and
substitute &#40;ROLES&#41;[0] and &#40;ROLES&#41;[1] for $roles-&gt;[0], etc,
in updateScores, it should work, as long as you have the
BEGIN block in your script, like in my scripts.

WAIT. I don&#39;t have a BEGIN block in my scripts! I guess you
don&#39;t need your own BEGIN block. You set the values like,

my $scores = $league-&gt;{scores} ||
 { win =&gt; 1, loss =&gt; 0, draw =&gt; 0.5, absent =&gt; 0, bye =&gt; 1 };
%Games::Tournament::Swiss::Config::scores = %$scores;

It must be due to not having
&#39;use Games::Tournament::Swiss::Config&#39; at the start, which
sets the defaults.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Apart from this, I didn&#39;t fully understand how to use
&gt; method &#39;score&#39; from Games::Tournament::Contestant
&gt; correctly. If I try to call this method via
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;   $player-&gt;score
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; it seems to me, that %converter isn&#39;t initialized &#40;via use
&gt; constant&#41;. There must be a simple solution to this
&gt; problem, because it works fine with your scripts &#40;for
&gt; instance with &#39;crosstable&#39;&#41;. I had to define %converter 
&gt; manually via  %converter = 
&gt; &#40;&#39;win&#39;,&#39;1&#39;,&#39;loss&#39;,&#39;0&#39;,&#39;draw&#39;,&#39;0.5&#39;,&#39;absent&#39;,&#39;0&#39;,&#39;bye&#39;,&#39;1&#39;&#41;;
</div>
That sounds like it might also be solved by using 
Games::Tournament::Swiss::Config.

Does the above change to roles in Games::Tournament work?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-366432" href="/Public/Bug/Display.html?id=29674#txn-366432">#</a>      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;03:58:33&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-366452" href="/Public/Bug/Display.html?id=29674#txn-366452">#</a>      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;08:02:11&nbsp;2007</span>
    <span class="description">bartolin [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #29674] method &#39;updateScores&#39; in Tournament.pm</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 30 Sep 2007 14:01:33 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Dr Bean via RT &lt;bug-Games-Tournament-Swiss [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Christian Bartolomaeus &lt;bartolin [...] gmx.de&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/366452/166127/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/166127">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">* On 2007-09-30 Dr Bean via RT &#40;bug-Games-Tournament-Swiss@rt.cpan.org&#41; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [...]
<div class="message-stanza open">&gt; &gt; It seems to me, that line 282 of Tournament.pm
</div>&gt; 
<div class="message-stanza open">&gt; &gt;   my $roles = $self-&gt;roles;
</div>&gt; 
<div class="message-stanza open">&gt; &gt; causes problems, because there is no method &#39;roles&#39; 
&gt; &gt; defined. After changing that line to
</div>&gt; 
<div class="message-stanza open">&gt; &gt;   my $roles = [qw/Black White/];
</div>&gt; 
<div class="message-stanza open">&gt; &gt; it worked for me.
</div>&gt; 
&gt; In my scripts, I think I have stopped using updateScores. I 
&gt; generate Games::Tournament::Card objects, and then use the 
&gt; collectCards method, so the Games::Tournament::Swiss object 
&gt; has access to those objects.
</div>
ahh, well. I tried that and it worked. Using the collectCards method
is fine for me.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I don&#39;t know whether to just remove the updateScores method, 
&gt; or to get it working again.
&gt; 
&gt; What are the advantages of using that method, over 
&gt; collectCards?
&gt; 
&gt; I don&#39;t have a good idea of the work process of the arbiter.
&gt; If the &#40;names of the&#41; methods corresponded to the sequence
&gt; of tasks that the arbiter carried out, it would be obvious
&gt; to the script writer which methods to choose and how to
&gt; write the script.
</div>
Unfortunately I can&#39;t help here, because I&#39;m not familiar with the
tasks of arbiters, neither. To take a list of games and to update the
Games::Tournament::Card objects accordingly seems quite
straightforward for me.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As for roles, I&#39;m now using a
&gt; Games::Tournament::Swiss::Config class to allow the
&gt; programmer to set their own values for ROLES, SCORES,
&gt; FIRSTROUND, etc.
&gt; 
&gt; This makes it more difficult for you. You have to set these
&gt; in a BEGIN block in your script.
&gt; 
&gt; But it allows me to use roles other than Black and White and
&gt; different scores, etc in a non-standard match situation.
&gt; 
&gt; I think if you take out the call to the roles method, and
&gt; substitute &#40;ROLES&#41;[0] and &#40;ROLES&#41;[1] for $roles-&gt;[0], etc,
&gt; in updateScores, it should work, as long as you have the
&gt; BEGIN block in your script, like in my scripts.
&gt; 
&gt; WAIT. I don&#39;t have a BEGIN block in my scripts! I guess you
&gt; don&#39;t need your own BEGIN block. You set the values like,
&gt; 
&gt; my $scores = $league-&gt;{scores} ||
&gt;  { win =&gt; 1, loss =&gt; 0, draw =&gt; 0.5, absent =&gt; 0, bye =&gt; 1 };
&gt; %Games::Tournament::Swiss::Config::scores = %$scores;
</div>
I got it to work. The trick was, that I had to define those values
before the line

  require Games::Tournament::Swiss;

Now it works fine.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It must be due to not having
&gt; &#39;use Games::Tournament::Swiss::Config&#39; at the start, which
&gt; sets the defaults.
&gt; 
<div class="message-stanza open">&gt; &gt; Apart from this, I didn&#39;t fully understand how to use
&gt; &gt; method &#39;score&#39; from Games::Tournament::Contestant
&gt; &gt; correctly. If I try to call this method via
</div>&gt; 
<div class="message-stanza open">&gt; &gt;   $player-&gt;score
</div>&gt; 
<div class="message-stanza open">&gt; &gt; it seems to me, that %converter isn&#39;t initialized &#40;via use
&gt; &gt; constant&#41;. There must be a simple solution to this
&gt; &gt; problem, because it works fine with your scripts &#40;for
&gt; &gt; instance with &#39;crosstable&#39;&#41;. I had to define %converter 
&gt; &gt; manually via  %converter = 
&gt; &gt; &#40;&#39;win&#39;,&#39;1&#39;,&#39;loss&#39;,&#39;0&#39;,&#39;draw&#39;,&#39;0.5&#39;,&#39;absent&#39;,&#39;0&#39;,&#39;bye&#39;,&#39;1&#39;&#41;;
</div>&gt; 
&gt; That sounds like it might also be solved by using 
&gt; Games::Tournament::Swiss::Config.
&gt; 
&gt; Does the above change to roles in Games::Tournament work?
</div>
I&#39;m afraid, I&#39;m not absolutely sure what change did the trick. But I
think, it was the definition of $scores at the start of my script:

my $scores = { win =&gt; 1, loss =&gt; 0, draw =&gt; 0.5, absent =&gt; 0, bye =&gt; 1 };
%Games::Tournament::Swiss::Config::scores = %$scores;

With that lines, everything works fine.

Thanks,

Christian
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/366452/166128/signature.asc">Download signature.asc</a><br />
<span class="downloadcontenttype">application/pgp-signature 189b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.414561</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
