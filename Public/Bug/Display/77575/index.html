<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #77575 for Prima: Win32, my 64bit perls no longer build auto/Prima/Prima.a</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #77575 for Prima: Win32, my 64bit perls no longer build auto/Prima/Prima.a</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Prima">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Prima">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Prima">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Prima">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Prima">Prima CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">77575</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Prima">Prima</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
sisyphus [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-27120-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.34    </td>
  </tr>
  <tr id="CF-27121-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=77575">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1085952" href="/Public/Bug/Display.html?id=77575#txn-1085952">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;01&nbsp;02:28:16&nbsp;2012</span>
    <span class="description">sisyphus [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Win32, my 64bit perls no longer build auto/Prima/Prima.a</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1085952/570737/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/570737">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 763b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The problem arises because of this change from the 1.33 Makefile.PL to
the 1.34 Makefile.PL:

                $win32_use_dlltool = $Config{dlltool} || &#39;dlltool&#39;
-                       if $Config{ccname} =~ /\bgcc/;
+                       if $Config{ccname} eq &#39;gcc&#39;;

Because $Config{ccname} is x86_64-w64-mingw32-gcc for my 64-bit builds
of perl, that change means that $win32_use_dlltool remains undefined ...
and Prima.a does not get built on those perls.

As you know, this doesn&#39;t matter for Prima itself, but IPA &#40;and perhaps
other modules&#41; won&#39;t build if Prima.a is absent.

What was wrong with it the way it was ? Reverting this latest change
fixes the problem for me and shouldn&#39;t &#40;afaik&#41; adversely affect any
other Windows builds of perl.

Cheers,
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1085955" href="/Public/Bug/Display.html?id=77575#txn-1085955">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;01&nbsp;03:25:22&nbsp;2012</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1085955/570740/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/570740">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 594b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Rob,

I vaguely remember that the problem was on a setup where ccname was not
gcc but gcc-4 &#40;out of box&#41;, and gcc-4 did the linking by itself, without
the dlltool. I can&#39;t remember now whether that was because of gcc was
version 3 or because the platform itself was special no matter gcc-3 or
gcc-4.

The problem with dlltool is that its use is kind of ad-hoc ... can I
reproduce your bug by installing a fresh perl &#40;what distro it is?&#41; or
possibly adding a hack to Makefile.PL DLLTOOL=1 or something similar
would help? If you have any ideas how I can reproduce that it would be
great.

/dk
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1085957" href="/Public/Bug/Display.html?id=77575#txn-1085957">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;01&nbsp;03:25:23&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1085981" href="/Public/Bug/Display.html?id=77575#txn-1085981">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;01&nbsp;05:28:00&nbsp;2012</span>
    <span class="description">sisyphus [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1085981/570762/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/570762">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Dmitry,

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I vaguely remember that the problem was on a setup where ccname was not
&gt; gcc but gcc-4 &#40;out of box&#41;, and gcc-4 did the linking by itself, without
&gt; the dlltool. I can&#39;t remember now whether that was because of gcc was
&gt; version 3 or because the platform itself was special no matter gcc-3 or
&gt; gcc-4.
</div>
I&#39;ve never heard of a gcc-3 or gcc-4 ccname for windows. What weird
build is this ?
It sounds a bit like Cygwin. They now have a gcc-3, so named to
distinguish itself from version 4 of gcc &#40;which, I think, is still
called &#39;gcc&#39;, not &#39;gcc-4&#39;&#41;.
Would it keep everybody happy if the condition was changed to:

$win32_use_dlltool = $Config{dlltool} || &#39;dlltool&#39;
 if &#40;&#40;$Config{ccname} =~ /\bgcc/&#41; &#38;&#38; 
     &#40;$Config{ccname} !~ /gcc\-/&#41;&#41;;

That would satisfy both myself and Strawberry Perl ... and would also
satisfy that strange compiler &#40;if I&#39;ve understood correctly&#41;.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The problem with dlltool is that its use is kind of ad-hoc ... can I
&gt; reproduce your bug by installing a fresh perl &#40;what distro it is?&#41; or
</div>
Once you get the &#34;right&#34; compiler it&#39;s just a matter of building perl
from source in the usual way.
My compiler comes from mingw64.sf - the same vendor that provides
Strawberry Perl&#39;s x86 and x64 compiler. Unlike the SP x64 compiler, all
of the executables on mine are prefixed with &#39;x86_x64-w64-mingw32-&#39;.

Any of the &#34;mingw-w64-bin_i686-mingw_xxxxxxxx.zip&#34; builds at
<span class="clickylink"><a target="new" rel="nofollow" href="http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Automated%20Builds/">http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Automated%20Builds/</a></span>
are probably such a compiler. &#40;Or are they 32-bit compilers ? ... to me,
it&#39;s always been a bit of a mystery downloading from there, which is one
reason that I don&#39;t do it very often.&#41;

I think &#40;not sure&#41; that the builds at the following link also use the
&#39;x86_x64-w64-mingw32-&#39; prefix:
<span class="clickylink"><a target="new" rel="nofollow" href="http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/rubenvb/release/">http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/rubenvb/release/</a></span>


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; possibly adding a hack to Makefile.PL DLLTOOL=1 or something similar
&gt; would help? If you have any ideas how I can reproduce that it would be
&gt; great.
</div>
I&#39;m not greatly fussed whether it gets fixed or not - I already have to
patch win32/files.c anyway.
The main thing from my point of view is that either it remains
permanently fixed, or permanently broken. Having it alternate between
fixed and broken is the one thing I really would like to avoid.

I&#39;ll patch my Prima build script to verify that Prima.a gets created in
blib/arch/auto/Prima. That way, if it fails to get created, I find out
about it straight away .... not 3 hours later ;-&#41;

Cheers,
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1085984" href="/Public/Bug/Display.html?id=77575#txn-1085984">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;01&nbsp;05:38:43&nbsp;2012</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1085984/570765/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/570765">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 472b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Rob.

The worst thing is that I can&#39;t remember what kind of build that was
that broke gcc/dlltool interaction. But anyway the one thing is clear:
determining whether dlltool is used or not, based on ccname is not the
best idea. I&#39;ll try to re-run all perl distros again with \bgcc to see
if any of these breaks, and will try to hunt for a more clean solution.

I&#39;ll let that ticket hang as a reminder, as I&#39;m extremely busy some next
weeks, so please be patient :&#41;

/dk
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1086270" href="/Public/Bug/Display.html?id=77575#txn-1086270">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;02&nbsp;04:38:33&nbsp;2012</span>
    <span class="description">sisyphus [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1086270/570931/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/570931">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Jun 01 05:38:43 2012, KARASIK wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ll try to re-run all perl distros again with \bgcc to see
&gt; if any of these breaks, and will try to hunt for a more clean solution.
</div>
I&#39;m interested to learn the details of any perls that break when you use
&#34;\bgcc&#34;. Just the &#39;perl -V&#39; should do ... which reminds me that I should
at least give you the &#39;perl -V&#39; of one of my x64 builds. The following
is for perl-5.12.0:

######################################
C:\_64&gt;perl -V
Summary of my perl5 &#40;revision 5 version 12 subversion 0&#41; configuration:

  Platform:
    osname=MSWin32, osvers=6.0, archname=MSWin32-x64-multi-thread
    uname=&#39;&#39;
    config_args=&#39;undef&#39;
    hint=recommended, useposix=true, d_sigaction=undef
    useithreads=define, usemultiplicity=define
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=define, use64bitall=undef, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;x86_64-w64-mingw32-gcc&#39;, ccflags =&#39; -s -O2 -DWIN32
-DHAVE_DES_FCRYPT -DW
IN64 -DCONSERVATIVE  -DPERL_IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS
-fno-strict-aliasing -mms-bitfields -DPERL_MSVCRT_READFIX&#39;,
    optimize=&#39;-s -O2&#39;,
    cppflags=&#39;-DWIN32&#39;
    ccversion=&#39;&#39;, gccversion=&#39;4.7.0&#39;, gccosandvers=&#39;&#39;
    intsize=4, longsize=4, ptrsize=8, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=12
    ivtype=&#39;long long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;long
long&#39;, lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;x86_64-w64-mingw32-g++&#39;, ldflags =&#39;-s
-L&#34;c:\_64\perl512_470\lib\CORE&#34; -L&#34;C:\_64\alt\lib&#34;&#39;
    libpth=C:\_64\alt\mingw\lib C:\_64\msys\1.0\local_470\lib
C:\_64\gsl_dyn_470\lib
    libs=-lmoldname -lkernel32 -luser32 -lgdi32 -lwinspool -lcomdlg32
-ladvapi32
 -lshell32 -lole32 -loleaut32 -lnetapi32 -luuid -lws2_32 -lmpr -lwinmm
-lversion
 -lodbc32 -lodbccp32 -lcomctl32
    perllibs=-lmoldname -lkernel32 -luser32 -lgdi32 -lwinspool
-lcomdlg32 -ladvapi32 -lshell32 -lole32 -loleaut32 -lnetapi32 -luuid
-lws2_32 -lmpr -lwinmm -lversion -lodbc32 -lodbccp32 -lcomctl32
    libc=, so=dll, useshrplib=true, libperl=libperl512.a
    gnulibc_version=&#39;&#39;
  Dynamic Linking:
    dlsrc=dl_win32.xs, dlext=dll, d_dlsymun=undef, ccdlflags=&#39; &#39;
    cccdlflags=&#39; &#39;, lddlflags=&#39;-mdll -s -L&#34;c:\_64\perl512_470\lib\CORE&#34;
-L&#34;C:\_64\alt\lib&#34;&#39;


Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options: MULTIPLICITY PERL_DONT_CREATE_GVSV
                        PERL_IMPLICIT_CONTEXT PERL_IMPLICIT_SYS
                        PERL_MALLOC_WRAP PL_OP_SLAB_ALLOC USE_64_BIT_INT
                        USE_ITHREADS USE_LARGE_FILES USE_PERLIO
                        USE_PERL_ATOF
  Built under MSWin32
  Compiled at Apr 29 2011 19:46:04
  @INC:
    C:/_64/perl512_470/site/lib
    C:/_64/perl512_470/lib
    .
######################################

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ll let that ticket hang as a reminder, as I&#39;m extremely busy some next
&gt; weeks, so please be patient :&#41;
</div>
No rush ... whenever you get to it is fine :-&#41;

Cheers,
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1086308" href="/Public/Bug/Display.html?id=77575#txn-1086308">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;02&nbsp;08:08:45&nbsp;2012</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1086308/570959/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/570959">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 571b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Rob,

I&#39;m trying to find the Prima version where there was that line, &#34;if 
$Config{ccname} =~ /\bgcc/&#34; and I can&#39;t find it at all, neither in my 
archives, nor on cpan, nor on github. Where did you get it?

Another thing -- I&#39;m reluctant on doing /\bgcc/ because I want here a 
compiler type, not compiler executable. So both gcc.exe and gcc-
4.5.6.7.exe &#40;whatever&#41; should be somehow recognized as both being GCC. 
The question is that your perl is configured to that ccname is not &#39;gcc&#39; 
-- did you configure your perl yourself or it comes from some standard 
distro?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1086447" href="/Public/Bug/Display.html?id=77575#txn-1086447">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;03&nbsp;03:55:13&nbsp;2012</span>
    <span class="description">sisyphus [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1086447/571044/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/571044">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jun 02 08:08:45 2012, KARASIK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Rob,
&gt; 
&gt; I&#39;m trying to find the Prima version where there was that line, &#34;if 
&gt; $Config{ccname} =~ /\bgcc/&#34; and I can&#39;t find it at all, neither in my 
&gt; archives, nor on cpan, nor on github. Where did you get it?
</div>
I thought it was in the Prima-1.33 Makefile.PL, but I see that I was
mistaken. It must have been a change that *I* made to the 1.33
Makefile.PL &#40;and failed to record the fact&#41;.
I do apologize.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Another thing -- I&#39;m reluctant on doing /\bgcc/ because I want here a 
&gt; compiler type, not compiler executable. So both gcc.exe and gcc-
&gt; 4.5.6.7.exe &#40;whatever&#41; should be somehow recognized as both being GCC. 
&gt; The question is that your perl is configured to that ccname is not &#39;gcc&#39; 
&gt; -- did you configure your perl yourself or it comes from some standard 
&gt; distro?
</div>
The thing is, that the following files in the perl source all decree
that ccname should be whatever cc is:
win32\config.gc
win32\config.gc64
win32\config.gc64nox

Perhaps this is an error in the perl sources ?

If one uses ActivePerl with MinGW, one then finds that $Config{cc}
becomes the full path to gcc.exe ... eg something like:
C:/MINGW_~1/I686-P~1/bin/gcc.exe
Yet, with ActivePerl, ccname then reports simply &#39;gcc&#39;.
I gather this is more like the behaviour that you expect - that is,
irrespective of what $Config{cc} calls the gcc compiler, $Config{ccname}
ahould always call it simply &#39;gcc&#39; ?

If that&#39;s the way it should be done, then we need to fix the perl source.

&#40;I&#39;ll ask about this on p5p.&#41;

As regards usage of &#34;\bgcc&#34;, it&#39;s something that&#39;s not uncommon - mostly
&#40;if not exclusively&#41; it&#39;s used in relation to $Config{cc}.

You&#39;ll find it in such places as, eg:
ExtUtils/MM_Win32.pm
ExtUtils/Liblist/Kid.pm
ExtUtils/Depends.pm &#40;version 0.304&#41;

In the perl source you&#39;ll also find it in win32/config_sh.pl.
Note that in many of these instances it&#39;s written as the more
restrictive \bgcc\b.

Cheers,
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1086450" href="/Public/Bug/Display.html?id=77575#txn-1086450">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;03&nbsp;04:39:25&nbsp;2012</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1086450/571047/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/571047">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 289b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Rob,

It seems that I was wrong in assuming that ccname is always gcc for all 
gcc compilers, but if it is so, that has to be fixed not only for dlltool 
use, but for all instances. I just did so, and would like to ask if you 
can check the latest git sources if they work for you.

/dk
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1086481" href="/Public/Bug/Display.html?id=77575#txn-1086481">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;03&nbsp;08:25:55&nbsp;2012</span>
    <span class="description">sisyphus [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1086481/571061/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/571061">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jun 03 04:39:25 2012, KARASIK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Rob,
&gt; 
&gt; It seems that I was wrong in assuming that ccname is always gcc for all 
&gt; gcc compilers,
</div>
Are you sure ? I was actually getting quite ready to accept that it
should be &#39;gcc&#39; ... otherwise we&#39;re left wondering what purpose &#39;ccname&#39;
serves. &#40;I didn&#39;t ask about this on p5p yet.&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; but if it is so, that has to be fixed not only for dlltool 
&gt; use, but for all instances. I just did so, and would like to ask if you 
&gt; can check the latest git sources if they work for you.
</div>
Yep - works fine.
As I&#39;ve mentioned before, in win32/files.c, I have to replace

#include &lt;winsock.h&gt;
with
#include &lt;winsock2.h&gt;
#include &lt;mswsock.h&gt;

My 64-bit mingw64.sf compiler doesn&#39;t care one way or the other - and I
think the 32-bit mingw64.sf compiler would also not care.
It&#39;s just the 32-bit mingw.org compiler &#40;which built all of my 32-bit
perls&#41; that insists on this change.

Other than that, commit 0985c1b is fine for all of the Windows perls I
tried:
5.8.0 &#40;32 bit only&#41;
5.8.9 &#40;32 bit only&#41;
5.10.0 &#40;32 bit and 64 bit&#41;
5.12.0 &#40;32 bit and 64 bit&#41;
5.14.0 &#40;32 bit and 64 bit&#41;
5.16.0 &#40;32 bit -Uuse64bitint, 32 bit -Duse64bitint, and 64 bit&#41;

Cheers,
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1098279" href="/Public/Bug/Display.html?id=77575#txn-1098279">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;12&nbsp;06:03:03&nbsp;2012</span>
    <span class="description">KARASIK [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.390114</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
