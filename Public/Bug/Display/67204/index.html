<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #67204 for Math-BigInt-GMP: Can&#39;t inherit from Math::BigInt::GMP</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #67204 for Math-BigInt-GMP: Can&#39;t inherit from Math::BigInt::GMP</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Math-BigInt-GMP/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Math-BigInt-GMP/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Math-BigInt-GMP/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Math-BigInt-GMP/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Math-BigInt-GMP">Math-BigInt-GMP CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">67204</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Math-BigInt-GMP/Active/">Math-BigInt-GMP</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
PWBENNETT [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-20512-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.36    </td>
  </tr>
  <tr id="CF-20513-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;03&nbsp;15:54:57&nbsp;2011</span>
    <span class="description">PWBENNETT [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Can&#39;t inherit from Math::BigInt::GMP</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Maybe I&#39;m doing it wrong. Maybe it&#39;s broken. Either way, I have reached 
the end of my Perl expertise here.

Please see the FAILs here: <span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=Net-">http://matrix.cpantesters.org/?dist=Net-</a></span>
IPAddress-Util+0.12

What it looks like is happening, is that even though I&#39;m putting 
Math::BigInt and Math::BigInt::GMP into @ISA, Math::BigInt::GMP is 
complaining that my derived objects are not of the right class. They&#39;re 
indeed not of the base class, but I&#39;m surprised that the normal rules of 
Perl inheritance do not seem to apply.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;17&nbsp;04:36:55&nbsp;2016</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Is this ticket still relevant?

Math::BigInt and Math::BigInt::GMP are very different objects. They objects have a different internal structure and the classes have a completely different set of supported methods.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;17&nbsp;04:36:55&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;17&nbsp;07:25:35&nbsp;2016</span>
    <span class="description">paul.w.bennett [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #67204] Can&#39;t inherit from Math::BigInt::GMP</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 17 Nov 2016 07:25:19 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt-GMP [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Paul Bennett &lt;paul.w.bennett [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, Nov 17, 2016 at 4:36 AM, Peter John Acklam via RT
&lt;bug-Math-BigInt-GMP@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=67204">https://rt.cpan.org/Ticket/Display.html?id=67204</a></span> &gt;
&gt;
&gt; Is this ticket still relevant?
&gt;
&gt; Math::BigInt and Math::BigInt::GMP are very different objects. They objects have a different internal structure and the classes have a completely different set of supported methods.
</div>
I was hoping it was relevant. Let me clarify ... I was hoping all the
Math::BigInt &#34;backends&#34; were &#40;at least broadly&#41; compatible.

However, the ticket is indeed moot by now. The latest version of my
module[1] no longer cares which &#34;backend&#34; is in play, it just uses
Math::BigInt and lets that module take care of any complications.

[1] <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/PWBENNETT/Net-IPAddress-Util-3.027/lib/Net/IPAddress/Util.pm">https://metacpan.org/source/PWBENNETT/Net-IPAddress-Util-3.027/lib/Net/IPAddress/Util.pm</a></span>

Having said that, I think I have some other work elsewhere that might
rely on methods like bmul, badd, and band being available -- but I
think they just use Math::BigInt and let that abstract away which
backend is in use.

Having looked into it while typing this, yes, in fact, I do have one
other module that relies on that suite of methods[2], and I don&#39;t
really know how to make it not rely on that suite of methods.

[2] <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/PWBENNETT/Path-Hilbert-2.000/lib/Path/Hilbert/BigInt.pm">https://metacpan.org/source/PWBENNETT/Path-Hilbert-2.000/lib/Path/Hilbert/BigInt.pm</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;12&nbsp;09:34:16&nbsp;2017</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I still don&#39;t understand what the problem is. You wrote that you hope the backends were at least broadly compatible. They are.

Here is an example of a module implementing a _fib&#40;&#41; method for generating the Nth Fibonacci number. Every missing method is inherited from Math::BigInt::GMP:

---- Math/BigInt/GMP/Subclass.pm ----
#!perl

package Math::BigInt::GMP::Subclass;

use Math::BigInt::GMP;

our @ISA = qw&lt; Math::BigInt::GMP &gt;;

sub _fib {
    my &#40;$class, $n&#41; = @_;

    my $a = $class -&gt; _zero&#40;&#41;;
    return $a if $n == 0;

    my $b = $class -&gt; _one&#40;&#41;;
    return $b if $n == 1;

    for &#40;my $i = 2 ; $i &lt;= $n ; ++ $i&#41; {
        my $c = $class -&gt; _add&#40;$class -&gt; _copy&#40;$a&#41;, $b&#41;;
        &#40;$a, $b&#41; = &#40;$b, $c&#41;;
    }

    return $b;
}
-------------------------------------

Then you can execute the following code, which prints the 10th Fibonacci number:

use Math::BigInt::GMP::Subclass;

$n = Math::BigInt::GMP::Subclass -&gt; _new&#40;&#34;10&#34;&#41;;
$f = Math::BigInt::GMP::Subclass -&gt; _fib&#40;$n&#41;;
print Math::BigInt::GMP::Subclass _str&#40;$f&#41;, &#34;\n&#34;;

In the example above, you could replace &#34;GMP&#34; with &#34;Pari&#34; or &#34;FastCalc&#34;, place the .pm file in the appropriate directory and you would get exactly the same result, because you can subclass all of the backend libraries in the same way.

If there is something not working as expected, please show me a concrete example and I will look into it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;13&nbsp;04:55:45&nbsp;2017</span>
    <span class="description">paul.w.bennett [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> PWBENNETT [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #67204] Can&#39;t inherit from Math::BigInt::GMP</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 13 Jan 2017 04:55:01 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt-GMP [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Paul Bennett &lt;paul.w.bennett [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, Jan 12, 2017 at 9:34 AM, Peter John Acklam via RT
&lt;bug-Math-BigInt-GMP@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=67204">https://rt.cpan.org/Ticket/Display.html?id=67204</a></span> &gt;
&gt;
&gt; I still don&#39;t understand what the problem is. You wrote that you hope the backends were at least broadly compatible. They are.
</div>
Underscored &#40;&#34;private&#34;&#41; methods, eh? Nice to know, thanks! :-&#41;

The problem I was trying to solve was in Net::IPAddress::Util, but
I&#39;ve moved on from BigInt &#40;to pack / unpack&#41; for speed reasons. This
bug can and probably should be closed as &#34;not a bug&#34;. Sorry for taking
up your time.

What I was trying to do at the time was enable users of my module to ...

  use Net::IPAddress::Util try =&gt; &#34;GMP,Pari,FastCalc&#34;;

and so on, to allow them to find out for themselves which backend was
fastest on their system. As stated, it&#39;s moot now, but if you&#39;re
interested, you might be able to dig around the commit history on
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/PWBENNETT/Net-IPAddress-Util-backport">https://github.com/PWBENNETT/Net-IPAddress-Util-backport</a></span> to see what I
had been trying to do &#40;if you&#39;re curious&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;13&nbsp;05:01:53&nbsp;2017</span>
    <span class="description">PWBENNETT [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Oh, I see what I was doing wrong. I was trying to implement a &#34;one ring&#34; solution by inheriting from BigInt itself &#40;and fooling around in import&#40;&#41;&#41; instead of building one subclass for each backend. My bad. Definitely can be closed as &#34;not a bug&#34;. Sorry again.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;13&nbsp;05:01:59&nbsp;2017</span>
    <span class="description">PWBENNETT [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
