<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #79679 for Imager: giflib 4.2.0/5.0.0 commonly writes GIF87a as GIF89a</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #79679 for Imager: giflib 4.2.0/5.0.0 commonly writes GIF87a as GIF89a</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Imager/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Imager/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Imager/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Imager/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Imager">Imager CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">79679</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">40/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Imager/Active/">Imager</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
duvny [...] yopmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-16790-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-16791-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<ul>
<li>
0.92</li>
<li>
0.92_01</li>
</ul>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;17&nbsp;00:52:04&nbsp;2012</span>
    <span class="description">duvny [...] yopmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 3 subtests fail in t50basicoo.t</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Imager 0.92 on Mac OS X 10.7.4 &#40;Lion&#41; with Perl 5.16.1 &#40;no threads&#41;
cpanm fails with:

t/t50basicoo.t .... Failed 3/262 subtests 

When I run the test manually to see which specific errors it produces,
the errors are not printed:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; perl -Iblib/lib -Iblib/arch t/t50basicoo.t  | grep &#39;not ok&#39;
</div>not ok 201 # line 215: comparing file data to buffer
not ok 204 # line 273: comparing callback output to file data
not ok 206 # line 284: comparing callback output to file data

I also experienced the same errors when testing 0.92_01.

More info:

  TT-fonts: includes not found - libraries not found
No threads
FreeType 2: configured via freetype-config
FreeType 2: Passed code check
GIF: main: includes found - libraries found
GIF: Major 4, Minor 2
GIF: Passed code check
JPEG: main: includes found - libraries found
JPEG: Passed code check
PNG: Found via pkg-config libpng15
PNG: library version 10512, header version 10512
PNG: Passed code check
T1Lib: main: includes not found - libraries not found
T1Lib: Checking if the compiler can find them on its own
Note &#40;probably harmless&#41;: No library found for -lt1
T1Lib: Test code failed: Can&#39;t link/include &#39;t1lib.h&#39;, &#39;t1&#39;
TIFF: main: includes found - libraries found
TIFF: library version 3.9.5, header version 20110409
TIFF: Passed code check

Libraries found:
  FT2
  GIF
  JPEG
  PNG
  TIFF
Libraries *not* found:
  T1
  Win32
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;17&nbsp;01:43:42&nbsp;2012</span>
    <span class="description">tony [...] develop-help.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #79679] 3 subtests fail in t50basicoo.t</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 17 Sep 2012 15:43:30 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> DuvNY via RT &lt;bug-Imager [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tony Cook &lt;tony [...] develop-help.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, Sep 17, 2012 at 12:52:05AM -0400, DuvNY via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Mon Sep 17 00:52:04 2012: Request 79679 was acted upon.
&gt; Transaction: Ticket created by duvny
&gt;        Queue: Imager
&gt;      Subject: 3 subtests fail in t50basicoo.t
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: duvny@yopmail.com
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=79679">https://rt.cpan.org/Ticket/Display.html?id=79679</a></span> &gt;
&gt; 
&gt; 
&gt; Imager 0.92 on Mac OS X 10.7.4 &#40;Lion&#41; with Perl 5.16.1 &#40;no threads&#41;
&gt; cpanm fails with:
&gt; 
&gt; t/t50basicoo.t .... Failed 3/262 subtests 
&gt; 
&gt; When I run the test manually to see which specific errors it produces,
&gt; the errors are not printed:
&gt; 
<div class="message-stanza open">&gt; &gt; perl -Iblib/lib -Iblib/arch t/t50basicoo.t  | grep &#39;not ok&#39;
</div>&gt; not ok 201 # line 215: comparing file data to buffer
&gt; not ok 204 # line 273: comparing callback output to file data
&gt; not ok 206 # line 284: comparing callback output to file data
</div>
Could I have the full output of the test script please?

You can use -Mblib to shorten that further:

  perl -Mblib t/t50basicoo.t

Thanks,
Tony
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;17&nbsp;01:43:43&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;17&nbsp;04:00:28&nbsp;2012</span>
    <span class="description">duvny [...] yopmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> duvny [...] yopmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Sep 17 01:43:42 2012, tony@develop-help.com wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Could I have the full output of the test script please?
</div>
1..262
# avaliable formats:
# png
# bmp
# tiff
# pnm
# tga
# ifs
# ft2
# jpeg
# gif
# raw
# type jpeg
#opening Format: jpeg, options: file=&gt;JPEG/testimg/209_yonge.jpg
ok 1 # reading from file
ok 2 # opening JPEG/testimg/209_yonge.jpg
ok 3 # read from fh
ok 4 # seek after read
ok 5 # read from fh
ok 6 # image comparison after fh read
ok 7 # seek after read
ok 8 # read from fd
ok 9 # image comparistion after fd read
ok 10 # seek after fd read
ok 11 # close fh after reads
ok 12 # read from buffer
ok 13 # comparing buffer read image
ok 14 # read from callback min
ok 15 # comparing mincb image
ok 16 # read from callback max
ok 17 # comparing maxcb image
# type png
#opening Format: png, options: file=&gt;testimg/test.png
ok 18 # reading from file
ok 19 # opening testimg/test.png
ok 20 # read from fh
ok 21 # seek after read
ok 22 # read from fh
ok 23 # image comparison after fh read
ok 24 # seek after read
ok 25 # read from fd
ok 26 # image comparistion after fd read
ok 27 # seek after fd read
ok 28 # close fh after reads
ok 29 # read from buffer
ok 30 # comparing buffer read image
ok 31 # read from callback min
ok 32 # comparing mincb image
ok 33 # read from callback max
ok 34 # comparing maxcb image
# type raw
#opening Format: raw, options: ysize=&gt;150 xsize=&gt;150
file=&gt;testimg/test.raw interleave=&gt;0 type=&gt;raw
ok 35 # reading from file
ok 36 # opening testimg/test.raw
ok 37 # read from fh
ok 38 # seek after read
ok 39 # read from fh
ok 40 # image comparison after fh read
ok 41 # seek after read
ok 42 # read from fd
ok 43 # image comparistion after fd read
ok 44 # seek after fd read
ok 45 # close fh after reads
ok 46 # read from buffer
ok 47 # comparing buffer read image
ok 48 # read from callback min
ok 49 # comparing mincb image
ok 50 # read from callback max
ok 51 # comparing maxcb image
# type pnm
#opening Format: pnm, options: file=&gt;testimg/penguin-base.ppm
ok 52 # reading from file
ok 53 # opening testimg/penguin-base.ppm
ok 54 # read from fh
ok 55 # seek after read
ok 56 # read from fh
ok 57 # image comparison after fh read
ok 58 # seek after read
ok 59 # read from fd
ok 60 # image comparistion after fd read
ok 61 # seek after fd read
ok 62 # close fh after reads
ok 63 # read from buffer
ok 64 # comparing buffer read image
ok 65 # read from callback min
ok 66 # comparing mincb image
ok 67 # read from callback max
ok 68 # comparing maxcb image
# type gif
#opening Format: gif, options: file=&gt;GIF/testimg/expected.gif
ok 69 # reading from file
ok 70 # opening GIF/testimg/expected.gif
ok 71 # read from fh
ok 72 # seek after read
ok 73 # read from fh
ok 74 # image comparison after fh read
ok 75 # seek after read
ok 76 # read from fd
ok 77 # image comparistion after fd read
ok 78 # seek after fd read
ok 79 # close fh after reads
ok 80 # read from buffer
ok 81 # comparing buffer read image
ok 82 # read from callback min
ok 83 # comparing mincb image
ok 84 # read from callback max
ok 85 # comparing maxcb image
# type tiff
#opening Format: tiff, options: file=&gt;TIFF/testimg/comp8.tif
ok 86 # reading from file
ok 87 # opening TIFF/testimg/comp8.tif
ok 88 # read from fh
ok 89 # seek after read
ok 90 # read from fh
ok 91 # image comparison after fh read
ok 92 # seek after read
ok 93 # read from fd
ok 94 # image comparistion after fd read
ok 95 # seek after fd read
ok 96 # close fh after reads
ok 97 # read from buffer
ok 98 # comparing buffer read image
ok 99 # read from callback min
ok 100 # comparing mincb image
ok 101 # read from callback max
ok 102 # comparing maxcb image
# type bmp
#opening Format: bmp, options: file=&gt;testimg/winrgb24.bmp
ok 103 # reading from file
ok 104 # opening testimg/winrgb24.bmp
ok 105 # read from fh
ok 106 # seek after read
ok 107 # read from fh
ok 108 # image comparison after fh read
ok 109 # seek after read
ok 110 # read from fd
ok 111 # image comparistion after fd read
ok 112 # seek after fd read
ok 113 # close fh after reads
ok 114 # read from buffer
ok 115 # comparing buffer read image
ok 116 # read from callback min
ok 117 # comparing mincb image
ok 118 # read from callback max
ok 119 # comparing maxcb image
# type tga
#opening Format: tga, options: file=&gt;testimg/test.tga
ok 120 # reading from file
ok 121 # opening testimg/test.tga
ok 122 # read from fh
ok 123 # seek after read
ok 124 # read from fh
ok 125 # image comparison after fh read
ok 126 # seek after read
ok 127 # read from fd
ok 128 # image comparistion after fd read
ok 129 # seek after fd read
ok 130 # close fh after reads
ok 131 # read from buffer
ok 132 # comparing buffer read image
ok 133 # read from callback min
ok 134 # comparing mincb image
ok 135 # read from callback max
ok 136 # comparing maxcb image
# write tests for jpeg
ok 137 # cannot read base file
# writing jpeg to a file
ok 138 # writing jpeg to a file testout/t50out.jpeg
# writing jpeg to a FH
ok 139 # writing jpeg to a FH
ok 140 # seek after writing jpeg to a FH
ok 141 # write to FH after writing jpeg
ok 142 # closing FH after writing jpeg
ok 143 # opening data source
# writing jpeg to a buffer
ok 144 # writing jpeg to a buffer
ok 145 # comparing file data to buffer
# writing jpeg via callbacks &#40;mb=1&#41;
ok 146 # writing jpeg to callback &#40;mb=1&#41;
ok 147 # checking closecb called
ok 148 # comparing callback output to file data
# writing jpeg via callbacks &#40;no mb&#41;
ok 149 # writing jpeg to callback &#40;no mb&#41;
ok 150 # comparing callback output to file data
# write tests for png
ok 151 # cannot read base file
# writing png to a file
ok 152 # writing png to a file testout/t50out.png
# writing png to a FH
ok 153 # writing png to a FH
ok 154 # seek after writing png to a FH
ok 155 # write to FH after writing png
ok 156 # closing FH after writing png
ok 157 # opening data source
# writing png to a buffer
ok 158 # writing png to a buffer
ok 159 # comparing file data to buffer
# writing png via callbacks &#40;mb=1&#41;
ok 160 # writing png to callback &#40;mb=1&#41;
ok 161 # checking closecb called
ok 162 # comparing callback output to file data
# writing png via callbacks &#40;no mb&#41;
ok 163 # writing png to callback &#40;no mb&#41;
ok 164 # comparing callback output to file data
# write tests for raw
ok 165 # cannot read base file
# writing raw to a file
ok 166 # writing raw to a file testout/t50out.raw
# writing raw to a FH
ok 167 # writing raw to a FH
ok 168 # seek after writing raw to a FH
ok 169 # write to FH after writing raw
ok 170 # closing FH after writing raw
ok 171 # opening data source
# writing raw to a buffer
ok 172 # writing raw to a buffer
ok 173 # comparing file data to buffer
# writing raw via callbacks &#40;mb=1&#41;
ok 174 # writing raw to callback &#40;mb=1&#41;
ok 175 # checking closecb called
ok 176 # comparing callback output to file data
# writing raw via callbacks &#40;no mb&#41;
ok 177 # writing raw to callback &#40;no mb&#41;
ok 178 # comparing callback output to file data
# write tests for pnm
ok 179 # cannot read base file
# writing pnm to a file
ok 180 # writing pnm to a file testout/t50out.pnm
# writing pnm to a FH
ok 181 # writing pnm to a FH
ok 182 # seek after writing pnm to a FH
ok 183 # write to FH after writing pnm
ok 184 # closing FH after writing pnm
ok 185 # opening data source
# writing pnm to a buffer
ok 186 # writing pnm to a buffer
ok 187 # comparing file data to buffer
# writing pnm via callbacks &#40;mb=1&#41;
ok 188 # writing pnm to callback &#40;mb=1&#41;
ok 189 # checking closecb called
ok 190 # comparing callback output to file data
# writing pnm via callbacks &#40;no mb&#41;
ok 191 # writing pnm to callback &#40;no mb&#41;
ok 192 # comparing callback output to file data
# write tests for gif
ok 193 # cannot read base file
# writing gif to a file
ok 194 # writing gif to a file testout/t50out.gif
# writing gif to a FH
ok 195 # writing gif to a FH
ok 196 # seek after writing gif to a FH
ok 197 # write to FH after writing gif
ok 198 # closing FH after writing gif
ok 199 # opening data source
# writing gif to a buffer
ok 200 # writing gif to a buffer
not ok 201 # line 215: comparing file data to buffer
# writing gif via callbacks &#40;mb=1&#41;
ok 202 # writing gif to callback &#40;mb=1&#41;
ok 203 # checking closecb called
not ok 204 # line 273: comparing callback output to file data
# writing gif via callbacks &#40;no mb&#41;
ok 205 # writing gif to callback &#40;no mb&#41;
not ok 206 # line 284: comparing callback output to file data
# write tests for tiff
ok 207 # cannot read base file
# writing tiff to a file
ok 208 # writing tiff to a file testout/t50out.tiff
# writing tiff to a FH
ok 209 # writing tiff to a FH
ok 210 # seek after writing tiff to a FH
ok 211 # write to FH after writing tiff
ok 212 # closing FH after writing tiff
ok 213 # opening data source
# writing tiff to a buffer
ok 214 # writing tiff to a buffer
ok 215 # comparing file data to buffer
# writing tiff via callbacks &#40;mb=1&#41;
ok 216 # writing tiff to callback &#40;mb=1&#41;
ok 217 # checking closecb called
ok 218 # comparing callback output to file data
# writing tiff via callbacks &#40;no mb&#41;
ok 219 # writing tiff to callback &#40;no mb&#41;
ok 220 # comparing callback output to file data
# write tests for bmp
ok 221 # cannot read base file
# writing bmp to a file
ok 222 # writing bmp to a file testout/t50out.bmp
# writing bmp to a FH
ok 223 # writing bmp to a FH
ok 224 # seek after writing bmp to a FH
ok 225 # write to FH after writing bmp
ok 226 # closing FH after writing bmp
ok 227 # opening data source
# writing bmp to a buffer
ok 228 # writing bmp to a buffer
ok 229 # comparing file data to buffer
# writing bmp via callbacks &#40;mb=1&#41;
ok 230 # writing bmp to callback &#40;mb=1&#41;
ok 231 # checking closecb called
ok 232 # comparing callback output to file data
# writing bmp via callbacks &#40;no mb&#41;
ok 233 # writing bmp to callback &#40;no mb&#41;
ok 234 # comparing callback output to file data
# write tests for tga
ok 235 # cannot read base file
# writing tga to a file
ok 236 # writing tga to a file testout/t50out.tga
# writing tga to a FH
ok 237 # writing tga to a FH
ok 238 # seek after writing tga to a FH
ok 239 # write to FH after writing tga
ok 240 # closing FH after writing tga
ok 241 # opening data source
# writing tga to a buffer
ok 242 # writing tga to a buffer
ok 243 # comparing file data to buffer
# writing tga via callbacks &#40;mb=1&#41;
ok 244 # writing tga to callback &#40;mb=1&#41;
ok 245 # checking closecb called
ok 246 # comparing callback output to file data
# writing tga via callbacks &#40;no mb&#41;
ok 247 # writing tga to callback &#40;no mb&#41;
ok 248 # comparing callback output to file data
# multi-image write tests
# tiff
ok 249 # reading base file
ok 250 # copying base image
ok 251 # flipping base image
ok 252 # writing multiple to a file
ok 253 # checking read image count
# diff 0
ok 254 # comparing image 0
# diff 0
ok 255 # comparing image 1
# gif
ok 256 # reading base file
ok 257 # copying base image
ok 258 # flipping base image
ok 259 # writing multiple to a file
ok 260 # checking read image count
# diff 0
ok 261 # comparing image 0
# diff 0
ok 262 # comparing image 1
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;17&nbsp;05:38:27&nbsp;2012</span>
    <span class="description">tony [...] develop-help.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #79679] 3 subtests fail in t50basicoo.t</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 17 Sep 2012 19:38:16 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> DuvNY via RT &lt;bug-Imager [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tony Cook &lt;tony [...] develop-help.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, Sep 17, 2012 at 04:00:28AM -0400, DuvNY via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Imager
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=79679">https://rt.cpan.org/Ticket/Display.html?id=79679</a></span> &gt;
&gt; 
&gt; On Mon Sep 17 01:43:42 2012, tony@develop-help.com wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; Could I have the full output of the test script please?
</div>&gt; 
&gt; # writing gif to a buffer
&gt; ok 200 # writing gif to a buffer
&gt; not ok 201 # line 215: comparing file data to buffer
&gt; # writing gif via callbacks &#40;mb=1&#41;
&gt; ok 202 # writing gif to callback &#40;mb=1&#41;
&gt; ok 203 # checking closecb called
&gt; not ok 204 # line 273: comparing callback output to file data
&gt; # writing gif via callbacks &#40;no mb&#41;
&gt; ok 205 # writing gif to callback &#40;no mb&#41;
&gt; not ok 206 # line 284: comparing callback output to file data
</div>
Thanks, I&#39;ve reproduced this locally with 0.92.

I can&#39;t reproduce it with the current development version, but that
fails badly in a threads test on OS X.

I can&#39;t see any change in particular that might have fixed the
problem.

Tony
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;03&nbsp;21:04:52&nbsp;2012</span>
    <span class="description">TONYC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Sep 17 00:52:04 2012, duvny wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Imager 0.92 on Mac OS X 10.7.4 &#40;Lion&#41; with Perl 5.16.1 &#40;no threads&#41;
&gt; cpanm fails with:
&gt; 
&gt; t/t50basicoo.t .... Failed 3/262 subtests 
&gt; 
&gt; When I run the test manually to see which specific errors it produces,
&gt; the errors are not printed:
</div>
This appears to be a bug in giflib 4.2.0 &#40;and probably 5.0.0&#41;:

<span class="clickylink"><a target="new" rel="nofollow" href="https://sourceforge.net/tracker/?func=detail&#38;aid=3574283&#38;group_id=102202&#38;atid=631304">https://sourceforge.net/tracker/?func=detail&#38;aid=3574283&#38;group_id=102202&#38;atid=631304</a></span>

Depending on what happens to be in the memory allocated by giflib it
writes a GIF87a or GIF89a header, rather than the header I request.

So depending on how memory has been used, it&#39;s possible to get a
reproducible difference between two different image writes, producing
the failure you see.

I&#39;d suggest 4.1.6 for now.

Tony
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;08&nbsp;04:41:58&nbsp;2012</span>
    <span class="description">TONYC [...] cpan.org -  Priority changed from &#40;no value&#41; to &#39;40&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;08&nbsp;04:41:58&nbsp;2012</span>
    <span class="description">TONYC [...] cpan.org -  Severity Important added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;08&nbsp;05:15:45&nbsp;2012</span>
    <span class="description">TONYC [...] cpan.org -  Subject changed from &#39;3 subtests fail in t50basicoo.t&#39; to &#39;giflib 4.2.0/5.0.0 commonly write GIF87a as GIF89a&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;08&nbsp;06:11:02&nbsp;2012</span>
    <span class="description">TONYC [...] cpan.org -  Subject changed from &#39;giflib 4.2.0/5.0.0 commonly write GIF87a as GIF89a&#39; to &#39;giflib 4.2.0/5.0.0 commonly writes GIF87a as GIF89a&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;12&nbsp;07:19:38&nbsp;2012</span>
    <span class="description">TONYC [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;15&nbsp;06:55:37&nbsp;2012</span>
    <span class="description">TONYC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Sep 17 00:52:04 2012, duvny wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Imager 0.92 on Mac OS X 10.7.4 &#40;Lion&#41; with Perl 5.16.1 &#40;no threads&#41;
&gt; cpanm fails with:
&gt; 
&gt; t/t50basicoo.t .... Failed 3/262 subtests 
&gt; 
&gt; When I run the test manually to see which specific errors it produces,
&gt; the errors are not printed:
&gt; 
<div class="message-stanza open">&gt; &gt; perl -Iblib/lib -Iblib/arch t/t50basicoo.t  | grep &#39;not ok&#39;
</div>&gt; not ok 201 # line 215: comparing file data to buffer
&gt; not ok 204 # line 273: comparing callback output to file data
&gt; not ok 206 # line 284: comparing callback output to file data
</div>
Imager 0.93 has been released which detects the buggy 4.2.0 release and
rejects it at probe time.

5.0.0 is also rejected, but 4.2.1 and 5.0.1 are accepted.

Thanks for your report.
Tony
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;15&nbsp;06:55:38&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;patched&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;15&nbsp;06:55:38&nbsp;2012</span>
    <span class="description">TONYC [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
