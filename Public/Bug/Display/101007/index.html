<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #101007 for ExtUtils-MakeMaker: pod2man is applied to not filtered .pm file.</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #101007 for ExtUtils-MakeMaker: pod2man is applied to not filtered .pm file.</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=ExtUtils-MakeMaker">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=ExtUtils-MakeMaker">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=ExtUtils-MakeMaker">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=ExtUtils-MakeMaker">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/ExtUtils-MakeMaker">ExtUtils-MakeMaker CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">101007</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">1.3 hours (80 min)

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=ExtUtils-MakeMaker">ExtUtils-MakeMaker</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">ETJ [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
VDB [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-12494-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
6.94</li>
<li>
7.04</li>
</ul>
    </td>
  </tr>
  <tr id="CF-12495-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Foo-0.01.tar.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1444300/767875/Foo-0.01.tar.gz">
Fri Dec 19 15:39:16 2014 (3.9k) by VDB [...] cpan.org
</a>
</font></li>
</ul>


Foo-0.02.tar.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1446016/768811/Foo-0.02.tar.gz">
Thu Dec 25 01:18:50 2014 (418b) by ETJ [...] cpan.org
</a>
</font></li>
</ul>


Foo-0.03.tar.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1446027/768821/Foo-0.03.tar.gz">
Thu Dec 25 01:42:53 2014 (634b) by ETJ [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=101007">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1444116" href="/Public/Bug/Display.html?id=101007#txn-1444116">#</a>      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;19&nbsp;05:50:15&nbsp;2014</span>
    <span class="description">VDB [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> pod2man is applied to not filtered .pm file.</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1444116/767771/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/767771">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 620b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Probably it is not a bug but feature.

In my .pm file I have to write version many times:

1. In POD.
2. To initialize @VERSION.
3. In use Inline.

To avoid such duplication, I have used following trick: __VERSION__ is used in .pm file in place of version number; MakeMaker&#39;s PM_FILTER is used to replace the placeholder with actual version.

Everything works well, but man page is created from source, not filtered .pm file.

So, my questions are: 

1. Is any reason to use &#40;for any purpose&#41; non-filtered .pm file?

2. Could MakeMaker be fixed to apply pod2man to .pm file located under blib. e. g. filtered .pm file?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1444203" href="/Public/Bug/Display.html?id=101007#txn-1444203">#</a>      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;19&nbsp;11:28:56&nbsp;2014</span>
    <span class="description">ETJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">5 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1444203/767814/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/767814">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 237b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Are you generating the .pm under blib? The idiomatic thing to do is generate in its normal location, and then EUMM will install it under blib and pod2man it as normal.

Please give us a bit of code that actually demonstrates the problem.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1444204" href="/Public/Bug/Display.html?id=101007#txn-1444204">#</a>      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;19&nbsp;11:28:58&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1444220" href="/Public/Bug/Display.html?id=101007#txn-1444220">#</a>      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;19&nbsp;12:08:10&nbsp;2014</span>
    <span class="description">VDB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1444220/767823/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/767823">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Dec 19 11:28:56 2014, ETJ wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Are you generating the .pm under blib? The idiomatic thing to do is
&gt; generate in its normal location, and then EUMM will install it under
&gt; blib and pod2man it as normal.
&gt; 
&gt; Please give us a bit of code that actually demonstrates the problem.
</div>
Ok, here is a beginning of Systend::Daemon.pm:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; package Systemd::Daemon;
&gt; 
&gt; =head1 NAME
&gt; 
&gt; Systemd::Daemon â€” ...
&gt; 
&gt; =head1 VERSION
&gt; 
&gt; Version __VERSION__.
&gt; 
&gt; =cut
&gt; 
&gt; our $VERSION = &#39;__VERSION__&#39;;
&gt; 
&gt; use Inline
&gt;     C         =&gt; &#39;DATA&#39;,
&gt;     name      =&gt; __PACKAGE__,
&gt;     version   =&gt; &#39;__VERSION__&#39;;
&gt; 
&gt; Inline-&gt;init&#40;&#41;;
&gt; 
&gt; ...
</div>
Here is a part of Makefile.PL:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; my $version  = &#39;0.01&#39;;
&gt; WriteMakefile&#40;
&gt;     NAME                =&gt; &#39;Systemd::Daemon&#39;,
&gt;     VERSION             =&gt; $version,
&gt;     PM_FILTER           =&gt; &#34;$^X -p -e \&#34;s{__VERSION__}{$version}g;\&#34;&#34;,
</div>
Tests 00-load.t &#40;generated by module-starter&#41;:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; #!perl -T
&gt; use 5.006;
&gt; use strict;
&gt; use warnings FATAL =&gt; &#39;all&#39;;
&gt; use Test::More;
&gt; plan tests =&gt; 1;
&gt; BEGIN {
&gt;     use_ok&#40; &#39;Systemd::Daemon&#39; &#41; || print &#34;Bail out!\n&#34;;
&gt; }
&gt; diag&#40; &#34;Testing Systemd::Daemon $Systemd::Daemon::VERSION, Perl $], $^X&#34; &#41;;
</div>
prints version 0.01, as expected:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; $ make test TEST_FILES=&#39;t/00-load.t&#39; 
&gt; PERL_DL_NONLAZY=1 &#34;/usr/bin/perl&#34; &#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/00-load.t
&gt; t/00-load.t .. 1/? # Testing Systemd::Daemon 0.01, Perl 5.018004, /usr/bin/perl
&gt; t/00-load.t .. ok   
&gt; All tests successful.
&gt; Files=1, Tests=1,  0 wallclock secs &#40; 0.03 usr  0.00 sys +  0.07 cusr  0.01 csys =  0.11 CPU&#41;
&gt; Result: PASS
</div>
But man page:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; $ man blib/man3/Systemd\:\:Daemon.3pm 
&gt;
&gt; Systemd::Daemon&#40;3&#41; User Contributed Perl Documentation    
&gt; 
&gt; NAME
&gt;        Systemd::Daemon - ...
&gt; 
&gt; VERSION
&gt;        Version __VERSION__.
&gt; ...
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1444229" href="/Public/Bug/Display.html?id=101007#txn-1444229">#</a>      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;19&nbsp;12:17:53&nbsp;2014</span>
    <span class="description">ETJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">5 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1444229/767829/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/767829">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 230b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m not asking for excerpts from your files; don&#39;t worry, I believe this is happening.

What I&#39;m asking for is a highly cut-down minimal set of files I can put on my hard disk and see this problem happening. Please construct that.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1444300" href="/Public/Bug/Display.html?id=101007#txn-1444300">#</a>      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;19&nbsp;15:39:16&nbsp;2014</span>
    <span class="description">VDB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1444300/767874/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/767874">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 407b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Dec 19 12:17:53 2014, ETJ wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; What I&#39;m asking for is a highly cut-down minimal set of files I can
&gt; put on my hard disk and see this problem happening. Please construct
&gt; that.
</div>
Ok, attached. It is not minimal but quite small â€” a module newly created with module-starter with minimal changes to show the problem.

To reproduce:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; $ perl Makefile.PL
&gt; $ make
</div>
Everything is ok but man page.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Foo-0.01.tar.gz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1444300/767875/Foo-0.01.tar.gz">Download Foo-0.01.tar.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 3.9k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1446016" href="/Public/Bug/Display.html?id=101007#txn-1446016">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;25&nbsp;01:18:50&nbsp;2014</span>
    <span class="description">ETJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">20 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1446016/768810/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/768810">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 403b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">FYI this &#40;see attachment&#41; is what a minimal set of files looks like. More to follow.

Makefile.PL:
use ExtUtils::MakeMaker;
my $version = &#39;0.02&#39;;
WriteMakefile&#40;
    NAME             =&gt; &#39;Foo&#39;,
    VERSION          =&gt; $version,
    PM_FILTER        =&gt; &#34;$^X -p -e \&#34;s/__VERSION__/$version/g\&#34;&#34;,
&#41;;

Foo.pm:
package Foo;

=head1 NAME

Foo - The great new Foo!

=head1 VERSION

Version __VERSION__

=cut

1;
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Foo-0.02.tar.gz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1446016/768811/Foo-0.02.tar.gz">Download Foo-0.02.tar.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 418b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1446019" href="/Public/Bug/Display.html?id=101007#txn-1446019">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;25&nbsp;01:18:51&nbsp;2014</span>
    <span class="description">ETJ [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1446027" href="/Public/Bug/Display.html?id=101007#txn-1446027">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;25&nbsp;01:42:53&nbsp;2014</span>
    <span class="description">ETJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">30 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1446027/768820/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/768820">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The correct solution for this is to use *.PL files. See attachment and below.

As you will have noticed in the output of make, PM_FILTER filters straight into blib/lib/*. Not very surprisingly, pod2man works out of the lib etc files, as does metacpan. You will see your module on metacpan showing the POD without any processing. The way to get your version number showing in your POD is to generate it using a tool, of which there are a number these days.

I am marking this as rejected but if you think the docs should reflect this problem and/or solution, please follow up on this ticket with suggested text and I will look at getting it incorporated, since I was only shown this myself recently.

Makefile.PL:
use ExtUtils::MakeMaker;
require &#39;common.pl&#39;;
my $version = get_version&#40;&#41;;
my @pms = qw&#40;Foo.pm&#41;;
WriteMakefile&#40;
  NAME =&gt; &#39;Foo&#39;,
  VERSION =&gt; $version,
  PL_FILES =&gt; { map { &#40;&#34;$_.PL&#34; =&gt; $_&#41; } @pms },
  PM =&gt; { map { &#40;&#34;$_&#34; =&gt; &#34;\$&#40;INST_LIB&#41;/$_&#34;&#41; } @pms },
  clean =&gt; { FILES =&gt; join &#39; &#39;, @pms },
&#41;;

common.pl:
sub get_version { &#39;0.03&#39; }
sub process { my $v = get_version&#40;&#41;; s/__VERSION__/$v/g; }
1;

Foo.pm.PL:
#!perl -w
require &#39;common.pl&#39;;
$_ = join &#39;&#39;, &lt;DATA&gt;;
process&#40;&#41;;
my $file = shift;
open my $fh, &#39;&gt;&#39;, $file or die &#34;$file: $!&#34;;
print $fh $_;
__DATA__
package Foo;

=head1 NAME

Foo - The great new Foo!

=head1 VERSION

Version __VERSION__

=cut

1;
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Foo-0.03.tar.gz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1446027/768821/Foo-0.03.tar.gz">Download Foo-0.03.tar.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 634b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1446030" href="/Public/Bug/Display.html?id=101007#txn-1446030">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;25&nbsp;01:43:04&nbsp;2014</span>
    <span class="description">ETJ [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1446133" href="/Public/Bug/Display.html?id=101007#txn-1446133">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;25&nbsp;18:03:45&nbsp;2014</span>
    <span class="description">ETJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">20 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1446133/768875/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/768875">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 146b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">You may also be interested to know that I have submitted this code as a doc PR: <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/Perl-Toolchain-Gang/ExtUtils-MakeMaker/pull/185">https://github.com/Perl-Toolchain-Gang/ExtUtils-MakeMaker/pull/185</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1477062" href="/Public/Bug/Display.html?id=101007#txn-1477062">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;22&nbsp;18:47:23&nbsp;2015</span>
    <span class="description">VDB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1477062/786716/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/786716">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 745b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Dec 25 18:03:45 2014, ETJ wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You may also be interested to know that I have submitted this code as
&gt; a doc PR: <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/Perl-Toolchain-Gang/ExtUtils-">https://github.com/Perl-Toolchain-Gang/ExtUtils-</a></span>
&gt; MakeMaker/pull/185
</div>
Thanks for example. Using PL files has great power, but I think this method is too complicated for such a simple task. In order to preprocess POD a module author have:

1. Introduce common.pl file.
2. Introduce Foo.pm.PL file.
3. Add a bunch of lines to Makefile.PL file.

Compare:  Using PM_FILTER requires one or two lines of code.

We already have notion of &#34;filtering&#34;.  Preprocessing POD embedded into Foo.pm is perfect example of filtering. All we &#40;I&#41; need is a minor fix: when generating man pages, take pm from blib/ directory. That&#39;s all.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.363743</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
