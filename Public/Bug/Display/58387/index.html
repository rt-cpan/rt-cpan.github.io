<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #58387 for Moose: Maybe[] breaks coerce=&gt;1</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #58387 for Moose: Maybe[] breaks coerce=&gt;1</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Moose">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Moose">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Moose">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Moose">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Moose">Moose CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">58387</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Moose">Moose</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">stevan.little [...] gmail.com
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
IKEGAMI [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-38786-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-38787-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=58387">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-790866" href="/Public/Bug/Display.html?id=58387#txn-790866">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;14&nbsp;16:56:02&nbsp;2010</span>
    <span class="description">IKEGAMI [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Maybe[] breaks coerce=&gt;1</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/790866/409813/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/409813">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Maybe[] breaks coerce=&gt;1. The following is a test script that
demonstrates the problem:

===== BEGIN TEST CODE =====
BEGIN {
   package Class;

   use strict;
   use warnings;

   use Moose;

   has val =&gt; &#40;
      is       =&gt; &#39;rw&#39;,
      isa      =&gt; &#39;Num&#39;,
      required =&gt; 1,
   &#41;;


   use Moose::Util::TypeConstraints;

   coerce __PACKAGE__
      =&gt; from &#39;Num&#39;
         =&gt; via { __PACKAGE__-&gt;new&#40;val =&gt; $_&#41; };
 }


BEGIN {
   package Container;

   use strict;
   use warnings;

   use Moose;

   has always =&gt; &#40;
      is      =&gt; &#39;rw&#39;,
      isa     =&gt; &#39;Class&#39;,
      coerce  =&gt; 1,
      default =&gt; sub { Class-&gt;new&#40;val =&gt; 0&#41; },
   &#41;;

   has maybe =&gt; &#40;
      is      =&gt; &#39;rw&#39;,
      isa     =&gt; &#39;Maybe[Class]&#39;,
      coerce  =&gt; 1,
      default =&gt; undef,
   &#41;;
}

use strict;
use warnings;

use Test::More tests =&gt; 15;


my $always_fail = qr/^Attribute \&#40;always\&#41; does not pass the type
constraint/;
my $maybe_fail  = qr/^Attribute \&#40;maybe\&#41; does not pass the type
constraint/;

my $o = Class-&gt;new&#40;val =&gt; 123&#41;;

eval { Container-&gt;new&#40;&#41; };                 is&#40;$@, &#39;&#39;&#41;;

eval { Container-&gt;new&#40;always =&gt; $o&#41; };     is&#40;$@, &#39;&#39;&#41;;
eval { Container-&gt;new&#40;always =&gt; 123&#41; };    is&#40;$@, &#39;&#39;&#41;;
eval { Container-&gt;new&#40;always =&gt; &#34;abc&#34;&#41; };  like&#40;$@, $always_fail&#41;;

eval { Container-&gt;new&#40;maybe =&gt; undef&#41; };   is&#40;$@, &#39;&#39;&#41;;
eval { Container-&gt;new&#40;maybe =&gt; $o&#41; };      is&#40;$@, &#39;&#39;&#41;;
eval { Container-&gt;new&#40;maybe =&gt; 123&#41; };     is&#40;$@, &#39;&#39;&#41;;
eval { Container-&gt;new&#40;maybe =&gt; &#34;abc&#34;&#41; };   like&#40;$@, $maybe_fail&#41;;

my $c = Container-&gt;new&#40;&#41;;

eval { $c-&gt;always&#40;$o&#41; };     is&#40;$@, &#39;&#39;&#41;;
eval { $c-&gt;always&#40;123&#41; };    is&#40;$@, &#39;&#39;&#41;;
eval { $c-&gt;always&#40;&#34;abc&#34;&#41; };  like&#40;$@, $always_fail&#41;;

eval { $c-&gt;maybe&#40;undef&#41; };   is&#40;$@, &#39;&#39;&#41;;
eval { $c-&gt;maybe&#40;$o&#41; };      is&#40;$@, &#39;&#39;&#41;;
eval { $c-&gt;maybe&#40;123&#41; };     is&#40;$@, &#39;&#39;&#41;;
eval { $c-&gt;maybe&#40;&#34;abc&#34;&#41; };   like&#40;$@, $maybe_fail&#41;;
===== END TEST CODE =====

&#40;Workaround: <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perlmonks.org/?node_id=843554&#41;">http://www.perlmonks.org/?node_id=843554&#41;</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-790869" href="/Public/Bug/Display.html?id=58387#txn-790869">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;14&nbsp;17:05:19&nbsp;2010</span>
    <span class="description">DOY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/790869/409816/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/409816">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 347b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is working as intended. Coercions are attached to the actual type,
and Maybe[Foo] is a different type from Foo. Allowing &#34;deep coercions&#34;
which propagate into parameterized constraints has been requested on
several occasions, but it&#39;s generally considered to be too &#34;magical&#34; for
core behavior. It would probably be a useful extension though.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-790872" href="/Public/Bug/Display.html?id=58387#txn-790872">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;14&nbsp;17:05:20&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-790873" href="/Public/Bug/Display.html?id=58387#txn-790873">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;14&nbsp;17:05:21&nbsp;2010</span>
    <span class="description">DOY [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-790878" href="/Public/Bug/Display.html?id=58387#txn-790878">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;14&nbsp;17:10:01&nbsp;2010</span>
    <span class="description">stevan.little [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/790878/409822/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/409822">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 878b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Actually, Maybe[Foo] and Foo are two different types and Maybe[`a] &#40;like all parameterized types&#41; 
does not inherit the coercions of the type it wraps &#40;meaning, no deep coercion&#41;.

I actually responded to the perlmonks thread as well. In which I suggest that the OP look into 
MooseX::UndefTolerant which takes a more liberal view of undefined values then the core 
Moose. 

Just as a note, it is possible to subtype a Maybe[`a] type, so the OP could do something like:

  subtype &#39;MaybeDateTime&#39; =&gt; as &#39;Maybe[DateTime]&#39;;

And then define the coercions on the &#39;MaybeDateTime&#39; type itself, which is another possible way 
to approach solving the OPs issue.

In short, this is not a bug and the topic of deep coercion has been discussed at length and has 
been decided to be a bad thing. If you disagree and wish to debate the issue, I suggest the 
Moose mailing list.

- Stevan 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-790881" href="/Public/Bug/Display.html?id=58387#txn-790881">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;14&nbsp;17:10:02&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-790882" href="/Public/Bug/Display.html?id=58387#txn-790882">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;14&nbsp;17:10:03&nbsp;2010</span>
    <span class="description">stevan.little [...] gmail.com -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-790883" href="/Public/Bug/Display.html?id=58387#txn-790883">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;14&nbsp;17:10:03&nbsp;2010</span>
    <span class="description">stevan.little [...] gmail.com -  Given to STEVAN</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-790887" href="/Public/Bug/Display.html?id=58387#txn-790887">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;14&nbsp;17:52:17&nbsp;2010</span>
    <span class="description">IKEGAMI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/790887/409825/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/409825">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 274b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 14 17:10:01 2010, STEVAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Maybe[`a] does not inherit the coercions of the type it wraps
&gt; &#40;meaning, no deep coercion&#41;.
</div>
Yes, that&#39;s the bug I&#39;m reporting.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In short, this is not a bug and the topic of deep coercion has been
&gt; discussed at length
</div>
Link?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-790889" href="/Public/Bug/Display.html?id=58387#txn-790889">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;14&nbsp;17:52:18&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-790927" href="/Public/Bug/Display.html?id=58387#txn-790927">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;14&nbsp;19:19:51&nbsp;2010</span>
    <span class="description">stevan.little [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/790927/409842/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/409842">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 723b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 14 17:52:17 2010, ikegami wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Jun 14 17:10:01 2010, STEVAN wrote:
<div class="message-stanza open">&gt; &gt; Maybe[`a] does not inherit the coercions of the type it wraps
&gt; &gt; &#40;meaning, no deep coercion&#41;.
</div>&gt; 
&gt; Yes, that&#39;s the bug I&#39;m reporting.
</div>
That is not a bug, it is a feature request, and as I said before, it will not happen in core Moose.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; In short, this is not a bug and the topic of deep coercion has been
&gt; &gt; discussed at length
</div>&gt; 
&gt; Link?
</div>
You can try digging in the mailing list archives but the bulk of the conversation took place on IRC 
and so I cannot provide a link, sorry.

Sorry, but if you really want this feature it will have to be a MooseX:: module, it simply will not be 
added into the core.

- Stevan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-790930" href="/Public/Bug/Display.html?id=58387#txn-790930">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;14&nbsp;19:20:04&nbsp;2010</span>
    <span class="description">stevan.little [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/790930/409845/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/409845">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 832b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 14 19:19:51 2010, STEVAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Jun 14 17:52:17 2010, ikegami wrote:
<div class="message-stanza open">&gt; &gt; On Mon Jun 14 17:10:01 2010, STEVAN wrote:
<div class="message-stanza open">&gt; &gt; &gt; Maybe[`a] does not inherit the coercions of the type it wraps
&gt; &gt; &gt; &#40;meaning, no deep coercion&#41;.
</div>&gt; &gt;
&gt; &gt; Yes, that&#39;s the bug I&#39;m reporting.
</div>&gt; 
&gt; That is not a bug, it is a feature request, and as I said before, it
&gt; will not happen in core Moose.
&gt; 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; In short, this is not a bug and the topic of deep coercion has
</div></div>&gt; been
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; discussed at length
</div>&gt; &gt;
&gt; &gt; Link?
</div>&gt; 
&gt; You can try digging in the mailing list archives but the bulk of the
&gt; conversation took place on IRC
&gt; and so I cannot provide a link, sorry.
&gt; 
&gt; Sorry, but if you really want this feature it will have to be a
&gt; MooseX:: module, it simply will not be
&gt; added into the core.
&gt; 
&gt; - Stevan
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-790933" href="/Public/Bug/Display.html?id=58387#txn-790933">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;14&nbsp;19:20:06&nbsp;2010</span>
    <span class="description">stevan.little [...] gmail.com -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-790971" href="/Public/Bug/Display.html?id=58387#txn-790971">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;14&nbsp;21:23:55&nbsp;2010</span>
    <span class="description">ikegami [...] adaelis.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> IKEGAMI [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #58387] Maybe[] breaks coerce=&gt;1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 14 Jun 2010 21:23:46 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Moose [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Eric Brine &lt;ikegami [...] adaelis.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/790971/409868/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/409868">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 317b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, Jun 14, 2010 at 7:19 PM, Stevan Little via RT &lt;bug-Moose@rt.cpan.org
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; wrote:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sorry, but if you really want this feature it will have to be a MooseX::
&gt; module, it simply will not be
&gt; added into the core.
&gt;
</div>
I have no problem with that. But apparently, there are dragon lurking I
should be familiar with.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/790971/409869/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/409869">with headers</a>
<br />
<span class="downloadcontenttype">text/html 570b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-790974" href="/Public/Bug/Display.html?id=58387#txn-790974">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;14&nbsp;21:23:56&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-790975" href="/Public/Bug/Display.html?id=58387#txn-790975">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;14&nbsp;21:32:52&nbsp;2010</span>
    <span class="description">stevan.little [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/790975/409872/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/409872">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 14 21:23:55 2010, ikegami@adaelis.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon, Jun 14, 2010 at 7:19 PM, Stevan Little via RT &lt;bug-Moose@rt.cpan.org
<div class="message-stanza open">&gt; &gt; wrote:
</div>&gt; 
<div class="message-stanza open">&gt; &gt; Sorry, but if you really want this feature it will have to be a MooseX::
&gt; &gt; module, it simply will not be
&gt; &gt; added into the core.
&gt; &gt;
</div>&gt; 
&gt; I have no problem with that. But apparently, there are dragon lurking I
&gt; should be familiar with.
</div>
No, the use of Undef in Moose is internally consistent and has been so for the last 60 or so releases, a 
lot of work was put in by a lot of people to assure this is true. The behavior of all parameterized types is 
also consistent and we make every attempt to make sure it fits cleanly into the greater type system. 
There are no dragons here and if they are, they are quite tame.

However, that said, what you need to keep in mind is that the Moose idea of Undef and what it means 
within the type system is &#40;apparently&#41; not the same as how you view Undef.

There is actually a thread going on in the mailing list about this very topic and my latest reply attempts 
to clarify the Moose view a little more. You can read it here: 
<span class="clickylink"><a target="new" rel="nofollow" href="http://article.gmane.org/gmane.comp.lang.perl.moose/1697">http://article.gmane.org/gmane.comp.lang.perl.moose/1697</a></span>

Thanks, 

- Stevan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-790978" href="/Public/Bug/Display.html?id=58387#txn-790978">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;14&nbsp;21:32:54&nbsp;2010</span>
    <span class="description">stevan.little [...] gmail.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.511861</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
