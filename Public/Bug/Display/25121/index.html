<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #25121 for CGI: Needs Discussion:  MOD_PERL consting</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #25121 for CGI: Needs Discussion:  MOD_PERL consting</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/CGI/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/CGI/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/CGI/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/CGI/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/leejo/CGI.pm/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/CGI">CGI CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">25121</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/CGI/Active/">CGI</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">MARKSTOS [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
at [...] altlinux.ru

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-230860-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-230861-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;24&nbsp;08:05:28&nbsp;2007</span>
    <span class="description">at [...] altlinux.ru -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [PATCH] MOD_PERL consting</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 24 Feb 2007 16:14:57 +0300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI.pm [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Alexey Tourbin &lt;at [...] altlinux.ru&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Make mod_perl constant so that constant folding works.
---
 CGI.pm        |   23 +++++++++++++----------
 CGI/Carp.pm   |   18 ++++++++++--------
 CGI/Cookie.pm |   23 +++++++++--------------
 CGI/Pretty.pm |    4 ++--
 perl-CGI.spec |    1 -
 5 files changed, 34 insertions&#40;+&#41;, 35 deletions&#40;-&#41;

diff --git a/CGI.pm b/CGI.pm
index 4c429d5..6b001cf 100644
--- a/CGI.pm
+++ b/CGI.pm
@@ -180,20 +180,23 @@ $SL = {
 $IIS++ if defined&#40;$ENV{&#39;SERVER_SOFTWARE&#39;}&#41; &#38;&#38; $ENV{&#39;SERVER_SOFTWARE&#39;}=~/IIS/;
 
 # Turn on special checking for Doug MacEachern&#39;s modperl
-if &#40;exists $ENV{MOD_PERL}&#41; {
+use constant MOD_PERL =&gt;
+       exists $ENV{MOD_PERL} ?
+       exists $ENV{MOD_PERL_API_VERSION} &#38;&#38; $ENV{MOD_PERL_API_VERSION} == 2 ?
+       2 : 1 : 0;
+
+if &#40;MOD_PERL == 2&#41; {
   # mod_perl handlers may run system&#40;&#41; on scripts using CGI.pm;
   # Make sure so we don&#39;t get fooled by inherited $ENV{MOD_PERL}
-  if &#40;exists $ENV{MOD_PERL_API_VERSION} &#38;&#38; $ENV{MOD_PERL_API_VERSION} == 2&#41; {
     $MOD_PERL = 2;
     require Apache2::Response;
     require Apache2::RequestRec;
     require Apache2::RequestUtil;
     require Apache2::RequestIO;
     require APR::Pool;
-  } else {
+} elsif &#40;MOD_PERL == 1&#41; {
     $MOD_PERL = 1;
     require Apache;
-  }
 }
 
 # Turn on special checking for ActiveState&#39;s PerlEx
@@ -346,8 +349,8 @@ sub new {
     $self-&gt;upload_hook&#40;shift @initializer, shift @initializer&#41;;
     $self-&gt;{&#39;use_tempfile&#39;} = shift @initializer if &#40;@initializer &gt; 0&#41;;
   }
-  if &#40;$MOD_PERL&#41; {
-    if &#40;$MOD_PERL == 1&#41; {
+  if &#40;MOD_PERL&#41; {
+    if &#40;MOD_PERL == 1&#41; {
       $self-&gt;r&#40;Apache-&gt;request&#41; unless $self-&gt;r;
       my $r = $self-&gt;r;
       $r-&gt;register_cleanup&#40;\&#38;CGI::_reset_globals&#41;;
@@ -595,7 +598,7 @@ sub init {
       # If method is GET or HEAD, fetch the query from
       # the environment.
       if &#40;$meth=~/^&#40;GET|HEAD&#41;$/&#41; {
-         if &#40;$MOD_PERL&#41; {
+         if &#40;MOD_PERL&#41; {
            $query_string = $self-&gt;r-&gt;args;
          } else {
              $query_string = $ENV{&#39;QUERY_STRING&#39;} if defined $ENV{&#39;QUERY_STRING&#39;};
@@ -950,7 +953,7 @@ END_OF_FUNC
 sub read_from_client {
     my&#40;$self, $buff, $len, $offset&#41; = @_;
     local $^W=0;                # prevent a warning
-    return $MOD_PERL
+    return MOD_PERL
         ? $self-&gt;r-&gt;read&#40;$$buff, $len, $offset&#41;
         : read&#40;\*STDIN, $$buff, $len, $offset&#41;;
 }
@@ -985,7 +988,7 @@ sub import_names {
     my&#40;$self,$namespace,$delete&#41; = self_or_default&#40;@_&#41;;
     $namespace = &#39;Q&#39; unless defined&#40;$namespace&#41;;
     die &#34;Can&#39;t import names into \&#34;main\&#34;\n&#34; if \%{&#34;${namespace}::&#34;} == \%::;
-    if &#40;$delete || $MOD_PERL || exists $ENV{&#39;FCGI_ROLE&#39;}&#41; {
+    if &#40;$delete || MOD_PERL || exists $ENV{&#39;FCGI_ROLE&#39;}&#41; {
        # can anyone find an easier way to do this?
        foreach &#40;keys %{&#34;${namespace}::&#34;}&#41; {
            local *symbol = &#34;${namespace}::${_}&#34;;
@@ -1481,7 +1484,7 @@ sub header {
     push&#40;@header,map {ucfirst $_} @other&#41;;
     push&#40;@header,&#34;Content-Type: $type&#34;&#41; if $type ne &#39;&#39;;
     my $header = join&#40;$CRLF,@header&#41;.&#34;${CRLF}${CRLF}&#34;;
-    if &#40;$MOD_PERL and not $nph&#41; {
+    if &#40;MOD_PERL and not $nph&#41; {
         $self-&gt;r-&gt;send_cgi_header&#40;$header&#41;;
         return &#39;&#39;;
     }
diff --git a/CGI/Carp.pm b/CGI/Carp.pm
index 40fc42e..180e3f0 100644
--- a/CGI/Carp.pm
+++ b/CGI/Carp.pm
@@ -371,18 +371,22 @@ sub _warn {
     }
 }
 
+use constant MOD_PERL =&gt;
+       exists $ENV{MOD_PERL} ?
+       exists $ENV{MOD_PERL_API_VERSION} &#38;&#38; $ENV{MOD_PERL_API_VERSION} == 2 ?
+       2 : 1 : 0;
 
 # The mod_perl package Apache::Registry loads CGI programs by calling
 # eval.  These evals don&#39;t count when looking at the stack backtrace.
 sub _longmess {
     my $message = Carp::longmess&#40;&#41;;
     $message =~ s,eval[^\n]+&#40;ModPerl|Apache&#41;/&#40;?:Registry|Dispatch&#41;\w*\.pm.*,,s
-        if exists $ENV{MOD_PERL};
+        if MOD_PERL;
     return $message;
 }
 
 sub ineval {
-  &#40;exists $ENV{MOD_PERL} ? 0 : $^S&#41; || _longmess&#40;&#41; =~ /eval [\{\&#39;]/m
+  &#40;MOD_PERL ? 0 : $^S&#41; || _longmess&#40;&#41; =~ /eval [\{\&#39;]/m
 }
 
 sub die {
@@ -405,7 +409,7 @@ sub die {
     my&#40;$file,$line,$id&#41; = id&#40;1&#41;;
     $arg .= &#34; at $file line $line.&#34; unless $arg=~/\n$/;
     &#38;fatalsToBrowser&#40;$arg&#41; if $WRAP;
-    if &#40;&#40;$arg =~ /\n$/&#41; || !exists&#40;$ENV{MOD_PERL}&#41;&#41; {
+    if &#40;&#40;$arg =~ /\n$/&#41; || !MOD_PERL&#41; {
       my $stamp = stamp;
       $arg=~s/^/$stamp/gm;
     }
@@ -458,7 +462,6 @@ For help, please send mail to $wm, giving this error message
 and the time and date of the error.
 END
   ;
-  my $mod_perl = exists $ENV{MOD_PERL};
 
   if &#40;$CUSTOM_MSG&#41; {
     if &#40;ref&#40;$CUSTOM_MSG&#41; eq &#39;CODE&#39;&#41; {
@@ -480,10 +483,9 @@ $outer_message
 END
   ;
 
-  if &#40;$mod_perl&#41; {
+  if &#40;MOD_PERL&#41; {
     my $r;
-    if &#40;$ENV{MOD_PERL_API_VERSION} &#38;&#38; $ENV{MOD_PERL_API_VERSION} == 2&#41; {
-      $mod_perl = 2;
+    if &#40;MOD_PERL == 2&#41; {
       require Apache2::RequestRec;
       require Apache2::RequestIO;
       require Apache2::RequestUtil;
@@ -501,7 +503,7 @@ END
     # handler to produce the doc for us.
     if &#40;$r-&gt;bytes_sent&#41; {
       $r-&gt;print&#40;$mess&#41;;
-      $mod_perl == 2 ? ModPerl::Util::exit&#40;0&#41; : $r-&gt;exit;
+      MOD_PERL == 2 ? ModPerl::Util::exit&#40;0&#41; : $r-&gt;exit;
     } else {
       # MSIE won&#39;t display a custom 500 response unless it is &gt;512 bytes!
       if &#40;$ENV{HTTP_USER_AGENT} =~ /MSIE/&#41; {
diff --git a/CGI/Cookie.pm b/CGI/Cookie.pm
index 926109c..dd853cd 100644
--- a/CGI/Cookie.pm
+++ b/CGI/Cookie.pm
@@ -22,16 +22,11 @@ use overload &#39;&#34;&#34;&#39; =&gt; \&#38;as_string,
     &#39;fallback&#39;=&gt;1;
 
 # Turn on special checking for Doug MacEachern&#39;s modperl
-my $MOD_PERL = 0;
-if &#40;exists $ENV{MOD_PERL}&#41; {
-  if &#40;exists $ENV{MOD_PERL_API_VERSION} &#38;&#38; $ENV{MOD_PERL_API_VERSION} == 2&#41; {
-      $MOD_PERL = 2;
-      require Apache2::RequestUtil;
-      require APR::Table;
-  } else {
-    $MOD_PERL = 1;
+if &#40;CGI::MOD_PERL == 2&#41; {
+    require Apache2::RequestUtil;
+    require APR::Table;
+} elsif &#40;CGI::MOD_PERL == 1&#41; {
     require Apache;
-  }
 }
 
 # fetch a list of cookies from the environment and
@@ -70,13 +65,13 @@ sub fetch {
 
 sub get_raw_cookie {
   my $r = shift;
-  $r ||= eval { $MOD_PERL == 2                    ? 
+  $r ||= eval { CGI::MOD_PERL == 2                    ? 
                   Apache2::RequestUtil-&gt;request&#40;&#41; :
-                  Apache-&gt;request } if $MOD_PERL;
+                  Apache-&gt;request } if CGI::MOD_PERL;
   if &#40;$r&#41; {
     $raw_cookie = $r-&gt;headers_in-&gt;{&#39;Cookie&#39;};
   } else {
-    if &#40;$MOD_PERL &#38;&#38; !exists $ENV{REQUEST_METHOD}&#41; {
+    if &#40;CGI::MOD_PERL &#38;&#38; !exists $ENV{REQUEST_METHOD}&#41; {
       die &#34;Run $r-&gt;subprocess_env; before calling fetch&#40;&#41;&#34;;
     }
     $raw_cookie = $ENV{HTTP_COOKIE} || $ENV{COOKIE};
@@ -179,10 +174,10 @@ sub bake {
   my &#40;$self, $r&#41; = @_;
 
   $r ||= eval {
-      $MOD_PERL == 2
+      CGI::MOD_PERL == 2
           ? Apache2::RequestUtil-&gt;request&#40;&#41;
           : Apache-&gt;request
-  } if $MOD_PERL;
+  } if CGI::MOD_PERL;
   if &#40;$r&#41; {
       $r-&gt;headers_out-&gt;add&#40;&#39;Set-Cookie&#39; =&gt; $self-&gt;as_string&#41;;
   } else {
diff --git a/CGI/Pretty.pm b/CGI/Pretty.pm
index 2147143..9184dda 100644
--- a/CGI/Pretty.pm
+++ b/CGI/Pretty.pm
@@ -147,8 +147,8 @@ sub new {
     my $class = shift;
     my $this = $class-&gt;SUPER::new&#40; @_ &#41;;
 
-    if &#40;$CGI::MOD_PERL&#41; {
-        if &#40;$CGI::MOD_PERL == 1&#41; {
+    if &#40;CGI::MOD_PERL&#41; {
+        if &#40;CGI::MOD_PERL == 1&#41; {
             my $r = Apache-&gt;request;
             $r-&gt;register_cleanup&#40;\&#38;CGI::Pretty::_reset_globals&#41;;
         }
diff --git a/perl-CGI.spec b/perl-CGI.spec
index 28f29bf..48d2f4e 100644
--- a/perl-CGI.spec
+++ b/perl-CGI.spec
@@ -13,7 +13,6 @@ Source: %dist-%version.tar
 BuildArch: noarch
 
 # skip conditional dependencies
-%set_perl_req_method relaxed
 %add_findreq_skiplist */CGI/Fast.pm
 
 # Added by buildreq2 on Fri Aug 25 2006
-- 
1.5.0.1.GIT
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;22&nbsp;21:53:01&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;22&nbsp;21:53:21&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Subject changed from &#39;[PATCH] MOD_PERL consting&#39; to &#39;Needs Discussion:  MOD_PERL consting&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;22&nbsp;21:54:33&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Feb 24 08:05:28 2007, at@altlinux.ru wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Make mod_perl constant so that constant folding works.
</div>
Thanks for the patch. 

Since you submitted it some time again ago, the mod_perl detection has
changed a lot. Do you have any suggestions for now we can further
improve the way it works in 3.43?

   Mark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;22&nbsp;21:54:34&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;22&nbsp;21:54:35&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;29&nbsp;22:39:28&nbsp;2011</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I put a patch like this in git [1], but I think I&#39;v going to reject this 
idea. 

My benchmark showed a speed-up of 0 to 0.5%, and I think it will likely 
break some live code out there when people upgrade. Particularly, the 
new code requires that that the mod_perl environment variables be set 
before the CGI.pm module is &#34;used&#34;.  I think there are some cases out 
there where third party modules manipulate these variables after CGI.pm 
is loaded to get the results they want. 

If there were as a noticable, benchmarked performance improvement, I 
would consider merging this patch anyway, but no one is really 
complaining about performance in a way that this could improve, so the 
safe route for now is not to merge it. 


1. 
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/markstos/CGI.pm/commit/7e643235ee3ea490a5bae4122726dd">https://github.com/markstos/CGI.pm/commit/7e643235ee3ea490a5bae4122726dd</a></span>
8fee2545ef
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;29&nbsp;22:39:29&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;29&nbsp;22:39:29&nbsp;2011</span>
    <span class="description">MARKSTOS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;May&nbsp;23&nbsp;14:28:17&nbsp;2014</span>
    <span class="description">The RT System itself -  Queue changed from CGI.pm to CGI</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
