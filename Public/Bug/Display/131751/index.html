<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #131751 for Date-Manip: Error in DateCalc&#40;&#41; between version 6.60 and 6.79 of Date::Manip</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #131751 for Date-Manip: Error in DateCalc&#40;&#41; between version 6.60 and 6.79 of Date::Manip</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I‚Ä¶?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Date-Manip">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Date-Manip">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Date-Manip">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Date-Manip">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Date-Manip">Date-Manip CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">131751</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Date-Manip">Date-Manip</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ShriverSteve [...] prahs.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-45268-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-45269-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




image001.png<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1884303/1011071/image001.png">
Tue Feb 11 18:46:23 2020 (2.8k) by ShriverSteve [...] prahs.com
</a>
</font></li>
</ul>


image002.png<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1884303/1011072/image002.png">
Tue Feb 11 18:46:23 2020 (2.4k) by ShriverSteve [...] prahs.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=131751">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1884303" href="/Public/Bug/Display.html?id=131751#txn-1884303">#</a>      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;11&nbsp;18:46:23&nbsp;2020</span>
    <span class="description">ShriverSteve [...] prahs.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Error in DateCalc&#40;&#41; between version 6.60 and 6.79 of Date::Manip</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 11 Feb 2020 23:45:05 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Date-Manip [...] rt.cpan.org&#34; &lt;bug-Date-Manip [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Shriver, Steve&#34; &lt;ShriverSteve [...] prahs.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1884303/1011069/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1011069">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi y‚Äôall,

I have found two potential bugs with Date::Manip.  The first one &#40;#1 below&#41; is that I get no output for data given to the DateCalc&#40;&#41; method in Date::Manip-6.79, but it works under v6.60.  The second problem &#40;#2 below&#41; is in Date::Manip-6.60, which looks like a Y2K-type problem.

I have Date::Manip-6.60 on my old rhel6 server.  A recent upgrade on the host required building all the cpan modules, we picked up latest versions including Date::Manip-6.79.  My application broke in one place related to your module.  I‚Äôve reduced the errors to the following script, running on my Mac OS X 10.15.3; using perlbrew to install perl-5.30.1 and perl-5.18.4.

[shriversteve@MAC] [2]:679: --# uname -a
Darwin Mac 19.3.0 Darwin Kernel Version 19.3.0: Thu Jan  9 20:58:23 PST 2020; root:xnu-6153.81.5~1/RELEASE_X86_64 x86_64

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">--- test code ---
[shriversteve@MAC] [2]:676: --# cat ./date_manip_test.pl
#!/usr/bin/env perl
#
use v5.18;
use Date::Manip;

printf&#40;&#34;running %s v&#40;%vd&#41;\n&#34;, $^X, $^V&#41;;
say &#34;\$Date::Manip::VERSION &#34;, &#34;$Date::Manip::VERSION \n&#34;;

my &#40;$now, $dc, $ud, $err, &#41;;

$now = UnixDate&#40;&#34;today&#34;, q[%c]&#41;;
say &#34;unixdate: $now&#34;;

for &#40; qw&#40;exact semi approx&#41; &#41; {
    my $delta = ParseDateDelta&#40; &#34;- 28 days&#34;, $_ &#41;;
    say &#34;delta &#40;$_&#41;: $delta&#34;;

    $dc = DateCalc&#40;&#34;today&#34;, $delta, \$err, 2&#41;;
    say &#34;datecalc: $dc&#34;;
    say &#34;   error: $err&#34; if $err;

    $ud = UnixDate&#40;$dc, q[%Y-%m-%d]&#41;;
    say &#34;unixdate: $ud&#34;;
    say &#34;&#34;;
}
__END__


--- test 1: working ---
[shriversteve@MAC] [2]:658: --# perlbrew exec cpanm ~/.cpanm/dists/Date-Manip-6.60.tar.gz

[shriversteve@MAC] [2]:677: --# perlbrew exec ./date_manip_test.pl
perl-5.30.1
==========
running /Users/shriversteve/perl5/perlbrew/perls/perl-5.30.1/bin/perl v&#40;5.30.1&#41;
$Date::Manip::VERSION 6.60

unixdate: Tue Feb 11 00:00:00 2020
delta &#40;exact&#41;: 0:0:0:0:-672:0:0
datecalc: 2019102911:00:00         #&lt;== Y2K? &#40;#2&#41;
unixdate: 2019-10-29

delta &#40;semi&#41;: 0:0:-4:0:0:0:0
datecalc: 2020011408:00:00
unixdate: 2020-01-14

delta &#40;approx&#41;: 0:0:-4:0:0:0:0     #&lt;== my use case &#40;#1&#41;
datecalc: 2020011408:00:00
unixdate: 2020-01-14


perl-5.18.4
==========
running /Users/shriversteve/perl5/perlbrew/perls/perl-5.18.4/bin/perl v&#40;5.18.4&#41;
$Date::Manip::VERSION 6.60

unixdate: Tue Feb 11 00:00:00 2020
delta &#40;exact&#41;: 0:0:0:0:-672:0:0
datecalc: 2019102911:00:00
unixdate: 2019-10-29

delta &#40;semi&#41;: 0:0:-4:0:0:0:0
datecalc: 2020011408:00:00
unixdate: 2020-01-14

delta &#40;approx&#41;: 0:0:-4:0:0:0:0
datecalc: 2020011408:00:00
unixdate: 2020-01-14


--- test 2: broken ---
[shriversteve@MAC] [2]:661: --# perlbrew exec cpanm ~/.cpanm/dists/Date-Manip-6.79.tar.gz

[shriversteve@MAC] [2]:678: --# perlbrew exec ./date_manip_test.pl
perl-5.30.1
==========
running /Users/shriversteve/perl5/perlbrew/perls/perl-5.30.1/bin/perl v&#40;5.30.1&#41;
$Date::Manip::VERSION 6.79

unixdate: Tue Feb 11 00:00:00 2020
delta &#40;exact&#41;: 0:0:0:0:-672:0:0
datecalc:
   error: 3
unixdate:

delta &#40;semi&#41;: 0:0:-4:0:0:0:0
datecalc:
   error: 3
unixdate:

delta &#40;approx&#41;: 0:0:-4:0:0:0:0     #&lt;== my use case &#40;#1&#41;
datecalc:
   error: 3
unixdate:


perl-5.18.4
==========
running /Users/shriversteve/perl5/perlbrew/perls/perl-5.18.4/bin/perl v&#40;5.18.4&#41;
$Date::Manip::VERSION 6.79

unixdate: Tue Feb 11 00:00:00 2020
delta &#40;exact&#41;: 0:0:0:0:-672:0:0
datecalc:
   error: 3
unixdate:

delta &#40;semi&#41;: 0:0:-4:0:0:0:0
datecalc:
   error: 3
unixdate:

delta &#40;approx&#41;: 0:0:-4:0:0:0:0
datecalc:
   error: 3
unixdate:


My original code &#40;and problem report&#41; was an observed issue with DateCalc&#40;‚Äútoday‚Äù, ‚Äú- 28 days‚Äù, \$err, 2&#41; that worked under Date-Manip-6.60 and fails under Date-Manip-6.79.  That problem is demo‚Äôd above in the ‚Äúapprox.‚Äù test.  But in digging into the various mode‚Äôs for ParseDateDelta&#40;&#41;, I see that there is also a potential Y2K-looking error in the 6.60 version when using ‚Äòexact‚Äô mode.  &#40;Not my original problem, but an interesting bug potentially.&#41;

Is this a DateCalc&#40;&#41; bug in the Date-Manip-6.79 or a problem with how I‚Äôm using your module?

Thanks,
Steve


PS ‚Äì Digging into the code, I see where the error is occurring in Date/Manip/DM6.pm, around line 393-396, but I don‚Äôt see the correct solution. Yet! Hope this helps. üòä




[signature_1380953652]
Steve Shriver
Sr Software Engineer

4130 Parklake Ave ‚Ä¢ Raleigh, NC 27612 ‚Ä¢ USA ‚Ä¢ prahs.com

[signature_1792515981]



</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1884303/1011070/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1011070">with headers</a>
<br />
<span class="downloadcontenttype">text/html 25.1k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1884303/1011071/image001.png">Download image001.png</a><br />
<span class="downloadcontenttype">image/png 2.8k</span>
</div>
<div class="messagebody">
<img alt="image001.png" title="image001.png" src="/Ticket/Attachment/1884303/1011071/" /></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1884303/1011072/image002.png">Download image002.png</a><br />
<span class="downloadcontenttype">image/png 2.4k</span>
</div>
<div class="messagebody">
<img alt="image002.png" title="image002.png" src="/Ticket/Attachment/1884303/1011072/" /></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1886425" href="/Public/Bug/Display.html?id=131751#txn-1886425">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;20&nbsp;15:58:13&nbsp;2020</span>
    <span class="description">sbeck [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1886425/1012001/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1012001">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">What you see as two potential bugs are actually related to 1 bug which was corrected in Date::Manip 6.70 &#40;which is why you see a different behavior going from 6.60 to 6.79&#41;.

Your script includes the following:

    my $delta = ParseDateDelta&#40; &#34;- 28 days&#34;, $_ &#41;;

    $dc = DateCalc&#40;&#34;today&#34;, $delta, \$err, 2&#41;;

The 2nd statement is actually incorrect, but in a way which was not trapped in old versions &#40;prior to 6.70&#41; but IS trapped now.

In the 2nd statement, the 4th argument &#40;2&#41; explicitly tells Date::Manip to do a business mode calculation.  Now when you parsed the delta, you told it it was an exact, semi-exact, or business mode delta, but then you ignore that fact in the second line by forcing business mode.

So, all three calculations in the loop are doing business mode calculations.

The default day is 8-5 &#40;which is 9 hours long&#41; and if you subtract 672 hours from &#34;today&#34;, you&#39;ll get some time during the work day.  So, the result that you got is correct &#40;if you treat the delta as a business mode&#41;.

When you subtract 4 weeks, you get the start of the business day &#40;08:00&#41; 4 weeks in the past.

So, all of those results are correct.

However, it was a mistake to use a non-business mode delta in a business mode calculation.  This was pointed out to me &#40;and corrected&#41; in 6.70.

So, if you change your second line to:

   $dc = DateCalc&#40;&#34;today&#34;, $delta, \$err&#41;;

&#40;i.e. remove the &#39;2&#39; argument&#41;, then Date::Manip will determine the type of calculation form the delta itself, and things will work as expected.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1886426" href="/Public/Bug/Display.html?id=131751#txn-1886426">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;20&nbsp;15:58:13&nbsp;2020</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1886428" href="/Public/Bug/Display.html?id=131751#txn-1886428">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;20&nbsp;15:59:22&nbsp;2020</span>
    <span class="description">sbeck [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1886428/1012003/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1012003">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 368b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In the 2nd statement, the 4th argument &#40;2&#41; explicitly tells
&gt; Date::Manip to do a business mode calculation.  Now when you parsed
&gt; the delta, you told it it was an exact, semi-exact, or business mode
&gt; delta, but then you ignore that fact in the second line by forcing
&gt; business mode.
</div>
Correction....

You parsed them as an exact, semi-exact, or approximate delta.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1886432" href="/Public/Bug/Display.html?id=131751#txn-1886432">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;20&nbsp;16:03:55&nbsp;2020</span>
    <span class="description">sbeck [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.331936</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
