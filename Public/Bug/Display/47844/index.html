<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #47844 for Parse-CPAN-Meta: lib/Parse/CPAN/Meta/t/data/utf_16_le_bom.yml is binary, breaks perl-5.10.0-rc0 build</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #47844 for Parse-CPAN-Meta: lib/Parse/CPAN/Meta/t/data/utf_16_le_bom.yml is binary, breaks perl-5.10.0-rc0 build</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Parse-CPAN-Meta/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Parse-CPAN-Meta/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Parse-CPAN-Meta/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Parse-CPAN-Meta/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Parse-CPAN-Meta">Parse-CPAN-Meta CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">47844</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">30 hours (1800 min)

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Parse-CPAN-Meta/Active/">Parse-CPAN-Meta</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jjore [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-220154-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-220155-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;13&nbsp;16:29:13&nbsp;2009</span>
    <span class="description">jjore [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> lib/Parse/CPAN/Meta/t/data/utf_16_le_bom.yml is binary, breaks
 perl-5.10.0-rc0 build</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">When using dpkg-source to build a debian package of perl-5.10.0-rc0
which includes Parse-CPAN-Meta-1.39, I get the following fatal error and
the build cannot continue.

dpkg-source: cannot represent change to
lib/Parse/CPAN/Meta/t/data/utf_16_le_bom.yml: binary file contents changed

The core would normally use uupacktool.pl to convert the file to
something safe for diff but this file is owned by your CPAN module.
Please advise.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;14&nbsp;06:11:47&nbsp;2009</span>
    <span class="description">adam [...] ali.as -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #47844] lib/Parse/CPAN/Meta/t/data/utf_16_le_bom.yml  is binary, breaks perl-5.10.0-rc0 build</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 14 Jul 2009 20:11:26 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Parse-CPAN-Meta [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Adam Kennedy &lt;adamkennedybackup [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">We should probably generate this file on the fly during the test,
instead of having the file.

If you want commit to do this, I can arrange it for you.

Adam K

2009/7/14 Joshua ben Jore via RT &lt;bug-Parse-CPAN-Meta@rt.cpan.org&gt;:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Mon Jul 13 16:29:13 2009: Request 47844 was acted upon.
&gt; Transaction: Ticket created by JJORE
&gt;       Queue: Parse-CPAN-Meta
&gt;     Subject: lib/Parse/CPAN/Meta/t/data/utf_16_le_bom.yml is binary, breaks
&gt;  perl-5.10.0-rc0 build
&gt;   Broken in: &#40;no value&#41;
&gt;    Severity: &#40;no value&#41;
&gt;       Owner: Nobody
&gt;  Requestors: jjore@cpan.org
&gt;      Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=47844">https://rt.cpan.org/Ticket/Display.html?id=47844</a></span> &gt;
&gt;
&gt;
&gt; When using dpkg-source to build a debian package of perl-5.10.0-rc0
&gt; which includes Parse-CPAN-Meta-1.39, I get the following fatal error and
&gt; the build cannot continue.
&gt;
&gt; dpkg-source: cannot represent change to
&gt; lib/Parse/CPAN/Meta/t/data/utf_16_le_bom.yml: binary file contents changed
&gt;
&gt; The core would normally use uupacktool.pl to convert the file to
&gt; something safe for diff but this file is owned by your CPAN module.
&gt; Please advise.
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;14&nbsp;06:11:50&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;26&nbsp;07:13:26&nbsp;2009</span>
    <span class="description">jjore [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Propose the following patch which adds uupacktool.pl, some Makefile
&#34;-fu&#34;, and packs t/data/utf_16_le_bom.yml with the tool. The patch
cannot represent the deletion of the UTF-16LE file because the file is
too binary for `svn diff&#39; to deal with.

Since t/data/utf_16_le_bom.yml is now generated data, it is now in
MANIFEST.SKIP.

Patch upgrades version to 1.40. I&#39;d be happy to commit, provided we
agree this is reasonable.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Index: trunk/Parse-CPAN-Meta/uupacktool.pl
===================================================================
--- trunk/Parse-CPAN-Meta/uupacktool.pl	&#40;revision 0&#41;
+++ trunk/Parse-CPAN-Meta/uupacktool.pl	&#40;revision 0&#41;
@@ -0,0 +1,225 @@
+#!perl
+
+use strict;
+use warnings;
+use Getopt::Long;
+use File::Basename;
+use File::Spec;
+
+BEGIN {
+    if &#40;$^O eq &#39;VMS&#39;&#41; {
+        require VMS::Filespec;
+        import VMS::Filespec;
+    }
+}
+
+Getopt::Long::Configure&#40;&#39;no_ignore_case&#39;&#41;;
+
+our $LastUpdate = -M $0;
+
+sub handle_file {
+    my $opts    = shift;
+    my $file    = shift or die &#34;Need file\n&#34;. usage&#40;&#41;;
+    my $outfile = shift || &#39;&#39;;
+    $file = vms_check_name&#40;$file&#41; if $^O eq &#39;VMS&#39;;
+    my $mode    = &#40;stat&#40;$file&#41;&#41;[2] &#38; 07777;
+
+    open my $fh, &#34;&lt;&#34;, $file
+        or do { warn &#34;Could not open input file $file: $!&#34;; exit 0 };
+    my $str = do { local $/; &lt;$fh&gt; };
+
+    ### unpack?
+    my $outstr;
+    if&#40; $opts-&gt;{u} &#41; {
+        if&#40; !$outfile &#41; {
+            $outfile = $file;
+            $outfile =~ s/\.packed\z//;
+        }
+        my &#40;$head, $body&#41; = split /__UU__\n/, $str;
+        die &#34;Can&#39;t unpack malformed data in &#39;$file&#39;\n&#34;
+            if !$head;
+        $outstr = unpack &#39;u&#39;, $body;
+
+    } else {
+        $outfile ||= $file . &#39;.packed&#39;;
+
+        my $me = basename&#40;$0&#41;;
+
+        $outstr = &lt;&lt;&#34;EOFBLURB&#34; . pack &#39;u&#39;, $str;
+#########################################################################
+This is a binary file that was packed with the &#39;uupacktool.pl&#39; which
+is included in the Perl distribution.
+
+To unpack this file use the following command:
+
+     $me -u $outfile $file
+
+To recreate it use the following command:
+
+     $me -p $file $outfile
+
+Created at @{[scalar localtime]}
+#########################################################################
+__UU__
+EOFBLURB
+    }
+
+    ### output the file
+    if&#40; $opts-&gt;{&#39;s&#39;} &#41; {
+        print STDOUT $outstr;
+    } else {
+        $outfile = VMS::Filespec::vmsify&#40;$outfile&#41; if $^O eq &#39;VMS&#39;;
+        print &#34;Writing $file into $outfile\n&#34; if $opts-&gt;{&#39;v&#39;};
+        open my $outfh, &#34;&gt;&#34;, $outfile
+            or do { warn &#34;Could not open $outfile for writing: $!&#34;; exit 0 };
+        binmode $outfh;
+        ### $outstr might be empty, if the file was empty
+        print $outfh $outstr if $outstr;
+        close $outfh;
+
+        chmod $mode, $outfile;
+    }
+
+    ### delete source file?
+    if&#40; $opts-&gt;{&#39;D&#39;} and $file ne $outfile &#41; {
+        1 while unlink $file;
+    }
+}
+
+sub bulk_process {
+    my $opts = shift;
+    my $Manifest = $opts-&gt;{&#39;m&#39;};
+
+    open my $fh, &#34;&lt;&#34;, $Manifest or die &#34;Could not open &#39;$Manifest&#39;:$!&#34;;
+
+    print &#34;Reading $Manifest\n&#34;
+            if $opts-&gt;{&#39;v&#39;};
+
+    my $count = 0;
+    my $lines = 0;
+    while&#40; my $line = &lt;$fh&gt; &#41; {
+        chomp $line;
+        my &#40;$file&#41; = split /\s+/, $line;
+
+        $lines++;
+
+        next unless $file =~ /\.packed/;
+
+        $count++;
+
+        my $out = $file;
+        $out =~ s/\.packed\z//;
+        $out = vms_check_name&#40;$out&#41; if $^O eq &#39;VMS&#39;;
+
+        ### unpack
+        if&#40; !$opts-&gt;{&#39;c&#39;} &#41; {
+            &#40; $out, $file &#41; = &#40; $file, $out &#41; if $opts-&gt;{&#39;p&#39;};
+            if &#40;-e $out&#41; {
+                my $changed = -M _;
+                if &#40;$changed &lt; $LastUpdate and $changed &lt; -M $file&#41; {
+                    print &#34;Skipping &#39;$file&#39; as &#39;$out&#39; is up-to-date.\n&#34;
+                        if $opts-&gt;{&#39;v&#39;};
+                    next;
+                }
+            }
+            handle_file&#40;$opts, $file, $out&#41;;
+            print &#34;Converted &#39;$file&#39; to &#39;$out&#39;\n&#34;
+                if $opts-&gt;{&#39;v&#39;};
+
+        ### clean up
+        } else {
+
+            ### file exists?
+            unless&#40; -e $out &#41; {
+                print &#34;File &#39;$file&#39; was not unpacked into &#39;$out&#39;. Can not remove.\n&#34;;
+
+            ### remove it
+            } else {
+                print &#34;Removing &#39;$out&#39;\n&#34;;
+                1 while unlink $out;
+            }
+        }
+    }
+    print &#34;Found $count files to process out of $lines in &#39;$Manifest&#39;\n&#34;
+            if $opts-&gt;{&#39;v&#39;};
+}
+
+sub usage {
+    return qq[
+Usage: $^X $0 [-d dir] [-v] [-c] [-D] -p|-u [orig [packed|-s] | -m [manifest]]
+
+    Handle binary files in source tree. Can be used to pack or
+    unpack files individiually or as specified by a manifest file.
+
+Options:
+    -u  Unpack files &#40;defaults to -u unless -p is specified&#41;
+    -p  Pack files
+    -c  Clean up all unpacked files. Implies -m
+
+    -D  Delete source file after encoding/decoding
+
+    -s  Output to STDOUT rather than OUTPUT_FILE
+    -m  Use manifest file, if none is explicitly provided defaults to &#39;MANIFEST&#39;
+
+    -d  Change directory to dir before processing
+
+    -v  Run verbosely
+    -h  Display this help message
+];
+}
+
+sub vms_check_name {
+
+# Packed files tend to have multiple dots, which the CRTL may or may not handle
+# properly, so convert to native format.  And depending on how the archive was
+# unpacked, foo.bar.baz may be foo_bar.baz or foo.bar_baz.  N.B. This checks for
+# existence, so is not suitable as-is to generate ODS-2-safe names in preparation
+# for file creation.
+
+    my $file = shift;
+
+    $file = VMS::Filespec::vmsify&#40;$file&#41;;
+    return $file if -e $file;
+
+    my &#40;$vol,$dirs,$base&#41; = File::Spec-&gt;splitpath&#40;$file&#41;;
+    my $tmp = $base;
+    1 while $tmp =~ s/&#40;[^\.]+&#41;\.&#40;.+\..+&#41;/$1_$2/;
+    my $try = File::Spec-&gt;catpath&#40;$vol, $dirs, $tmp&#41;;
+    return $try if -e $try;
+
+    $tmp = $base;
+    1 while $tmp =~ s/&#40;.+\..+&#41;\.&#40;[^\.]+&#41;/$1_$2/;
+    $try = File::Spec-&gt;catpath&#40;$vol, $dirs, $tmp&#41;;
+    return $try if -e $try;
+
+    return $file;
+}
+
+my $opts = {};
+GetOptions&#40;$opts,&#39;u&#39;,&#39;p&#39;,&#39;c&#39;, &#39;D&#39;, &#39;m:s&#39;,&#39;s&#39;,&#39;d=s&#39;,&#39;v&#39;,&#39;h&#39;&#41;;
+
+die &#34;Can&#39;t pack and unpack at the same time!\n&#34;, usage&#40;&#41;
+    if $opts-&gt;{&#39;u&#39;} &#38;&#38; $opts-&gt;{&#39;p&#39;};
+die usage&#40;&#41; if $opts-&gt;{&#39;h&#39;};
+
+if &#40; $opts-&gt;{&#39;d&#39;} &#41; {
+    chdir $opts-&gt;{&#39;d&#39;}
+        or die &#34;Failed to chdir to &#39;$opts-&gt;{&#39;d&#39;}&#39;:$!&#34;;
+}
+$opts-&gt;{&#39;u&#39;} = 1 if !$opts-&gt;{&#39;p&#39;};
+binmode STDOUT if $opts-&gt;{&#39;s&#39;};
+if &#40; exists $opts-&gt;{&#39;m&#39;} or exists $opts-&gt;{&#39;c&#39;} &#41; {
+    $opts-&gt;{&#39;m&#39;} ||= &#34;MANIFEST&#34;;
+    bulk_process&#40;$opts&#41;;
+    exit&#40;0&#41;;
+} else {
+    if &#40;@ARGV&#41; {
+        handle_file&#40;$opts, @ARGV&#41;;
+    } else {
+        die &#34;No file to process specified!\n&#34;, usage&#40;&#41;;
+    }
+    exit&#40;0&#41;;
+}
+
+
+die usage&#40;&#41;;
Index: trunk/Parse-CPAN-Meta/t/data/utf_16_le_bom.yml
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream
Index: trunk/Parse-CPAN-Meta/t/data/utf_16_le_bom.yml.packed
===================================================================
--- trunk/Parse-CPAN-Meta/t/data/utf_16_le_bom.yml.packed	&#40;revision 0&#41;
+++ trunk/Parse-CPAN-Meta/t/data/utf_16_le_bom.yml.packed	&#40;revision 0&#41;
@@ -0,0 +1,16 @@
+#########################################################################
+This is a binary file that was packed with the &#39;uupacktool.pl&#39; which
+is included in the Perl distribution.
+
+To unpack this file use the following command:
+
+     uupacktool.pl -u t/data/utf_16_le_bom.yml.packed t/data/utf_16_le_bom.yml
+
+To recreate it use the following command:
+
+     uupacktool.pl -p t/data/utf_16_le_bom.yml t/data/utf_16_le_bom.yml.packed
+
+Created at Sat Jul 25 17:27:03 2009
+#########################################################################
+__UU__
+6__XM`&#34;T`+0`*`&#34;T`&#40;`!F`&#38;\`;P`*````
Index: trunk/Parse-CPAN-Meta/lib/Parse/CPAN/Meta.pm
===================================================================
--- trunk/Parse-CPAN-Meta/lib/Parse/CPAN/Meta.pm	&#40;revision 8006&#41;
+++ trunk/Parse-CPAN-Meta/lib/Parse/CPAN/Meta.pm	&#40;working copy&#41;
@@ -15,7 +15,7 @@
 	# Class structure
 	require 5.004;
 	require Exporter;
-	$Parse::CPAN::Meta::VERSION   = &#39;1.39&#39;;
+	$Parse::CPAN::Meta::VERSION   = &#39;1.40&#39;;
 	@Parse::CPAN::Meta::ISA       = qw{ Exporter      };
 	@Parse::CPAN::Meta::EXPORT_OK = qw{ Load LoadFile };
 }
Index: trunk/Parse-CPAN-Meta/Makefile.PL
===================================================================
--- trunk/Parse-CPAN-Meta/Makefile.PL	&#40;revision 8006&#41;
+++ trunk/Parse-CPAN-Meta/Makefile.PL	&#40;working copy&#41;
@@ -1,7 +1,7 @@
 use strict;
 BEGIN {
 	require 5.003_96;
-	$main::VERSION = &#39;1.39&#39;;
+	$main::VERSION = &#39;1.40&#39;;
 }
 use ExtUtils::MakeMaker;
 
@@ -21,3 +21,29 @@
 	&#41; : &#40;&#41;&#41;,
 	&#40;INSTALLDIRS =&gt; $] &gt;= 5.010001 ? &#39;perl&#39; : &#39;site&#39;&#41;,
 &#41;;
+
+package MY;
+sub test {
+	my $inherited = shift-&gt;SUPER::test&#40;@_&#41;;
+	$inherited =~ s{^test\s*:+\s*&#40;.*&#41;}{
+		&#34;test : unpack_files $1&#34;;
+	}me || die $inherited;
+	return $inherited;
+}
+sub clean {
+	my $inherited = shift-&gt;SUPER::clean&#40;@_&#41;;
+	$inherited =~ s{^&#40;clean\s*:.*&#41;}{
+		&#34;$1 cleanup_unpacked_files&#34;;
+	}me || die $inherited;
+	return $inherited;
+}
+sub postamble {
+	return &lt;&lt;&#39;MAKE_FRAG&#39;;
+unpack_files:
+	$&#40;FULLPERLRUN&#41; uupacktool.pl -u -m
+
+cleanup_unpacked_files:
+	$&#40;FULLPERLRUN&#41; uupacktool.pl -c
+
+MAKE_FRAG
+}
Index: trunk/Parse-CPAN-Meta/Changes
===================================================================
--- trunk/Parse-CPAN-Meta/Changes	&#40;revision 8006&#41;
+++ trunk/Parse-CPAN-Meta/Changes	&#40;working copy&#41;
@@ -1,5 +1,9 @@
 Changes for Perl programming language extension Parse-CPAN-Meta
 
+1.40 Sat 25 Jul 2009
+    - Add core perl 5.10.1&#39;s uupacktool.pl
+    - Repackage t/data/utf_16_le_bom.yml as ASCII for <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=47844">https://rt.cpan.org/Ticket/Display.html?id=47844</a></span>
+
 1.39 Thu 21 May 2009
 	- Even though utf8 starts at 5.7+ there&#39;s no is_utf till
 	  5.8.1 so skip in the tests if needed &#40;ADAMK&#41;
Index: trunk/Parse-CPAN-Meta/MANIFEST.SKIP
===================================================================
--- trunk/Parse-CPAN-Meta/MANIFEST.SKIP	&#40;revision 8006&#41;
+++ trunk/Parse-CPAN-Meta/MANIFEST.SKIP	&#40;working copy&#41;
@@ -1,5 +1,7 @@
 ^diff_to_blead\.pl$
 
+t/data/utf_16_le_bom.yml$
+
 # Default section:
 # Avoid version control files.
 \bRCS\b
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;26&nbsp;14:55:52&nbsp;2009</span>
    <span class="description">jjore [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">1800 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Resolved in Parse-CPAN-Meta-1.40, available in SVN as of 8245 and queued
for upload to CPAN.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;26&nbsp;14:55:54&nbsp;2009</span>
    <span class="description">jjore [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;10&nbsp;22:24:06&nbsp;2009</span>
    <span class="description">shay [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> perl5-porters [...] perl.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jul 26 14:55:52 2009, JJORE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Resolved in Parse-CPAN-Meta-1.40, available in SVN as of 8245 and queued
&gt; for upload to CPAN.
</div>
Is this the right solution? The perl core has various binary files in it
since the switch from Perforce to Git, e.g. in Archive-Extract and CGI.

I&#39;ve just upgraded blead with 1.40, and the UU-packing of this file
currently means that a test will fail in smokes because this distribution
is built in core with an auto-generated Makefile.PL that doesn&#39;t include
the new UU-pack stuff.

How does the dpkg-source tool cope with the other binary files in the
perl sources?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;10&nbsp;22:24:06&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;21&nbsp;17:05:35&nbsp;2009</span>
    <span class="description">twists [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> jjore [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #47844] lib/Parse/CPAN/Meta/t/data/utf_16_le_bom.yml  is binary, breaks perl-5.10.0-rc0 build</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 21 Oct 2009 14:05:20 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Parse-CPAN-Meta [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Joshua ben Jore &lt;twists [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, Oct 10, 2009 at 7:24 PM, Steve Hay via RT
&lt;bug-Parse-CPAN-Meta@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=47844">https://rt.cpan.org/Ticket/Display.html?id=47844</a></span> &gt;
&gt;
&gt; On Sun Jul 26 14:55:52 2009, JJORE wrote:
<div class="message-stanza open">&gt;&gt; Resolved in Parse-CPAN-Meta-1.40, available in SVN as of 8245 and queued
&gt;&gt; for upload to CPAN.
</div>&gt;
&gt; Is this the right solution? The perl core has various binary files in it
&gt; since the switch from Perforce to Git, e.g. in Archive-Extract and CGI.
</div>
Yes, however no files may *actually* be binary.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve just upgraded blead with 1.40, and the UU-packing of this file
&gt; currently means that a test will fail in smokes because this distribution
&gt; is built in core with an auto-generated Makefile.PL that doesn&#39;t include
&gt; the new UU-pack stuff.
</div>
The $binary_file.packed is handled automatically by perl&#39;s own
Makefile and required code in the package&#39;s Makefile.PL. AFAIK, it is
invalid to &#34;generate&#34; a Makefile.PL.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; How does the dpkg-source tool cope with the other binary files in the
&gt; perl sources?
</div>
It cannot.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;17&nbsp;16:26:32&nbsp;2010</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Parse::CPAN::Meta no longer contains this file as the actual YAML
capability is now going to be delivered by CPAN::Meta::YAML.

We&#39;ll take up this issue again when CPAN::Meta::YAML merges into the core.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;17&nbsp;16:26:33&nbsp;2010</span>
    <span class="description">dagolden [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
