<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #130413 for Mail-SPF: [PATCH] replace references to openspf.org</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #130413 for Mail-SPF: [PATCH] replace references to openspf.org</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Mail-SPF/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Mail-SPF/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Mail-SPF/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Mail-SPF/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Mail-SPF">Mail-SPF CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">130413</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">new</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Mail-SPF/Active/">Mail-SPF</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
s.ivanov [...] proxmox.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-20120-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-20121-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;29&nbsp;11:21:11&nbsp;2019</span>
    <span class="description">s.ivanov [...] proxmox.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [PATCH] replace references to openspf.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 29 Aug 2019 17:13:05 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Mail-SPF [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Stoiko Ivanov &lt;s.ivanov [...] proxmox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I hope that the following report contains all necessary information &#40;first
report at rt.cpan.org&#41; - should anything be missing, please don&#39;t hesitate
to contact me.

www.openspf.org has been down for more than 5 months now.
Given that the default_authority_explanation is quite often verbatimly
logged by various users of the package it should be replaced.

The patch changes all relevant occurences of www.openspf.org to either:
* a link to rfc7208
* a snapshot of the site at web.archive.org
* in case of the default_authority_answer to a string without any url

Signed-off-by: Stoiko Ivanov &lt;s.ivanov@proxmox.com&gt;
---
 README                 | 5 +++--
 bin/spfquery           | 3 ++-
 lib/Mail/SPF.pm        | 9 +++++----
 lib/Mail/SPF/Server.pm | 4 ++--
 sbin/spfd              | 5 ++---
 5 files changed, 14 insertions&#40;+&#41;, 12 deletions&#40;-&#41;

diff --git a/README b/README
index 834279d..01f84d5 100644
--- a/README
+++ b/README
@@ -7,10 +7,11 @@ Mail::SPF 2.009 -- A Perl implementation of the Sender Policy Framework
 Mail::SPF is an object-oriented Perl implementation of the Sender Policy
 Framework &#40;SPF&#41; e-mail sender authentication system.
 
-See &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.openspf.net">http://www.openspf.net</a></span>&gt; for more information about SPF.
+See &lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://tools.ietf.org/html/rfc7208">https://tools.ietf.org/html/rfc7208</a></span>&gt; for more information about SPF.
 
 This release of Mail::SPF fully conforms to RFC 4408 and passes the 2009.10
-release of the official test-suite &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.openspf.net/Test_Suite">http://www.openspf.net/Test_Suite</a></span>&gt;.
+release of the official test-suite
+&lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://web.archive.org/web/20190130131432/http://www.openspf.org/Test_Suite">https://web.archive.org/web/20190130131432/http://www.openspf.org/Test_Suite</a></span>&gt;
 
 The Mail::SPF source package includes the following additional tools:
 
diff --git a/bin/spfquery b/bin/spfquery
index 0188ab9..bb55b10 100755
--- a/bin/spfquery
+++ b/bin/spfquery
@@ -52,7 +52,8 @@ B&lt;spfquery&gt; B&lt;--help&gt;
 
 B&lt;spfquery&gt; checks if a given set of e-mail parameters &#40;e.g., the SMTP sender&#39;s
 IP address&#41; matches the responsible domain&#39;s Sender Policy Framework &#40;SPF&#41;
-policy.  For more information on SPF see L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.openspf.org">http://www.openspf.org</a></span>&gt;.
+policy.  For more information on SPF see
+L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://tools.ietf.org/html/rfc7208">https://tools.ietf.org/html/rfc7208</a></span>&gt;.
 
 =head2 Preferred Usage
 
diff --git a/lib/Mail/SPF.pm b/lib/Mail/SPF.pm
index cc23115..7a547bb 100644
--- a/lib/Mail/SPF.pm
+++ b/lib/Mail/SPF.pm
@@ -59,7 +59,8 @@ use constant FALSE  =&gt; not TRUE;
 =head1 DESCRIPTION
 
 B&lt;Mail::SPF&gt; is an object-oriented implementation of Sender Policy Framework
-&#40;SPF&#41;.  See L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.openspf.org">http://www.openspf.org</a></span>&gt; for more information about SPF.
+&#40;SPF&#41;.  See L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://tools.ietf.org/html/rfc7208">https://tools.ietf.org/html/rfc7208</a></span>&gt; for more information about
+SPF.
 
 This class collection aims to fully conform to the SPF specification &#40;RFC
 4408&#41; so as to serve both as a production quality SPF implementation and as a
@@ -78,11 +79,11 @@ included with Mail::SPF.
 
 =item The SPF project
 
-L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.openspf.org">http://www.openspf.org</a></span>&gt;
+L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://web.archive.org/web/20190131165735/http://www.openspf.org/">https://web.archive.org/web/20190131165735/http://www.openspf.org/</a></span>&gt;
 
-=item The SPFv1 specification &#40;RFC 4408&#41;
+=item The SPFv1 specification &#40;RFC 7208&#41;
 
-L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.openspf.org/Specifications">http://www.openspf.org/Specifications</a></span>&gt;, L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://tools.ietf.org/html/rfc4408">http://tools.ietf.org/html/rfc4408</a></span>&gt;
+L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://tools.ietf.org/html/rfc7208">https://tools.ietf.org/html/rfc7208</a></span>&gt;
 
 =back
 
diff --git a/lib/Mail/SPF/Server.pm b/lib/Mail/SPF/Server.pm
index 8c360a5..7428263 100644
--- a/lib/Mail/SPF/Server.pm
+++ b/lib/Mail/SPF/Server.pm
@@ -43,7 +43,7 @@ use constant query_rr_type_txt                      =&gt; 1;
 use constant query_rr_type_spf                      =&gt; 2;
 
 use constant default_default_authority_explanation  =&gt;
-    &#39;Please see <span class="clickylink"><a target="new" rel="nofollow" href="http://www.openspf.org/Why?s=">http://www.openspf.org/Why?s=</a></span>%{_scope};id=%{S};ip=%{C};r=%{R}&#39;;
+    &#39;Rejected by SPF record&#39;;
 
 sub default_query_rr_types { shift-&gt;query_rr_type_txt };
 
@@ -102,7 +102,7 @@ A I&lt;string&gt; denoting the default &#40;not macro-expanded&#41; authority explanation
 string to use if the authority domain does not specify an explanation string of
 its own.  Defaults to:
 
-    &#39;Please see <span class="clickylink"><a target="new" rel="nofollow" href="http://www.openspf.org/Why?s=">http://www.openspf.org/Why?s=</a></span>%{_scope};id=%{S};ip=%{C};r=%{R}&#39;
+    &#39;Rejected by SPF record&#39;
 
 As can be seen from the default, a non-standard C&lt;_scope&gt; pseudo macro is
 supported that expands to the name of the identity&#39;s scope.  &#40;Note: Do I&lt;not&gt;
diff --git a/sbin/spfd b/sbin/spfd
index 620398a..b300b30 100755
--- a/sbin/spfd
+++ b/sbin/spfd
@@ -35,7 +35,7 @@ B&lt;spfd&gt; B&lt;--help&gt;
 
 B&lt;spfd&gt; is a simple forking Sender Policy Framework &#40;SPF&#41; query server.  spfd
 receives and answers SPF requests on a TCP/IP or UNIX domain socket.  For more
-information on SPF see L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.openspf.org">http://www.openspf.org</a></span>&gt;.
+information on SPF see L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://tools.ietf.org/html/rfc7208">https://tools.ietf.org/html/rfc7208</a></span>&gt;.
 
 The B&lt;--port&gt; form listens on a TCP/IP socket on the specified I&lt;port&gt;.  The
 default port is B&lt;5970&gt;.
@@ -200,8 +200,7 @@ breaks added for clarity&#41;:
     result=fail
     local_explanation=example.com: Sender is not authorized by default to use
         &#39;user@example.com&#39; in &#39;mfrom&#39; identity &#40;mechanism &#39;-all&#39; matched&#41;
-    authority_explanation=Please see <span class="clickylink"><a target="new" rel="nofollow" href="http://www.openspf.org/why.html">http://www.openspf.org/why.html</a></span>?
-        sender=user%40example.com&#38;ip=1.2.3.4&#38;receiver=localhost
+    authority_explanation=Rejected by SPF record
     received_spf_header=Received-SPF: fail &#40;example.com: Sender is not
         authorized by default to use &#39;user@example.com&#39; in &#39;mfrom&#39; identity
         &#40;mechanism &#39;-all&#39; matched&#41;&#41; receiver=localhost; identity=mfrom;
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
