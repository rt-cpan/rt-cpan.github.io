<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #27707 for WWW-Myspace: fixed method for comments, added new method</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #27707 for WWW-Myspace: fixed method for comments, added new method</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=WWW-Myspace">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=WWW-Myspace">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=WWW-Myspace">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=WWW-Myspace">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/WWW-Myspace">WWW-Myspace CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">27707</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=WWW-Myspace">WWW-Myspace</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
tobiesch [...] users.sourceforge.net

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-38014-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.64    </td>
  </tr>
  <tr id="CF-38015-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




code.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/328634/150961/code.txt">
Sat Jun 23 10:20:20 2007 (5.1k) by tobiesch [...] users.sourceforge.net
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=27707">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-328634" href="/Public/Bug/Display.html?id=27707#txn-328634">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;23&nbsp;10:20:20&nbsp;2007</span>
    <span class="description">tobiesch [...] users.sourceforge.net -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> fixed method for comments, added new method</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/328634/150958/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/150958">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 459b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

sorry to &#34;spam&#34; the bug reports but seems the easiest way to contact.
I&#39;ve fixed the methods that retrieve the comments from a profile and I
also added a function that gets some basic info from the profile &#40;age,
gender, country, etc&#41;. I attach the code in the file for you to look at.
If you want to incorporate it, I could probably check it into your CVS
&#40;given a login&#41; and then you can adapt it as I&#39;m sure there is room for
improvement.

best, tobias
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> code.txt</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/328634/150961/code.txt">Download code.txt</a><br />
<span class="downloadcontenttype">text/plain 5.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#---------------------------------------------------------------------
# get_basic_info_on_page&#40; $page &#41;;
# This routine takes the SOURCE CODE of the page and returns
# a hash of different information contained in the box on the 
# top left corner

=head2 get_basic_info_on_page&#40; $friends_page &#41;;

This routine takes the SOURCE CODE of an HTML page and returns
a hash of information containing:
country 		- country in profile &#40;names of countries are is standardised on MySpace&#41;
cityregion 	- the line with city and region information &#40;this is free text&#41;
headline		- what ever it says as next to the picture
age					- as number
gender			- as text, either male or female
lastlogin   - date of last login

Note: MySpace joins the profile data from city and region to one line &#40;such as Berlin, Germany&#41;.
However, both city and region are free text so people can write whatever they want. What is more,
region is optional. This function tries to extract the city and the region by splitting cityregion
at the last comma. However, it might not work &#40;depending on the profile information&#41; so both city
and region can be empty.  
city		- city
region	- region


=cut

sub get_basic_info_on_page {
    my &#40; $page &#41; = @_;

    ##THIS IS LANGUAGE DEPENDENT SO SITE HAS TO BE ACCESSED IN ENGLISH!!!
    #my $BASIC_INFO = &#39;Table2&#34;.*?&gt;.*&lt;td.*?&gt;&#40;.*?&#41;Last Login&#39;;
    my $BASIC_INFO = &#39;Table2&#34;.*?&gt;&#40;.*Last Login:.*?&#41;&lt;br&gt;&#39;;
    $BASIC_INFO = qr/$BASIC_INFO/smo;
		    
		#my $time=time;
		#matching does take quite long... &#40;around 6s&#41;
    $page =~ /$BASIC_INFO/;
    #$page =~ /Table2.*?&gt;.*&lt;td.*?&gt;&#40;.*?&#41;Last Login/smo;
    $page=$1;
    $page =~ /align=&#34;left&#34;&gt;&#40;.*&#41;/smo;
    #print &#34;took time:&#34;,time-$time,&#34;, found $1\n&#34;;
    
    &#40; $DEBUG &#41; &#38;&#38; print $1,&#34;\n&#34;;
    
    my %info = &#40;&#41;;
    #assign values and trim leading and trailing white spaces
    &#40;$info{&#39;headline&#39;},$info{&#39;empty&#39;},$info{&#39;gender&#39;},$info{&#39;age&#39;},$info{&#39;cityregion&#39;},$info{&#39;country&#39;},$info{&#39;empty&#39;},$info{&#39;empty&#39;},$info{&#39;lastlogin&#39;}&#41;=map {s/^\s+//;s/\s+$//;$_} split&#40;&#39;&lt;br&gt;&#39;,$1&#41;;
    
    #return age as number only
    $info{&#39;age&#39;} =~ s/^&#40;\d+&#41;.*/$1/;
    
    #return last login as date only
    $info{&#39;lastlogin&#39;} =~ s/Last Login:\s+&#40;[\d\/]*&#41;/$1/;
    
    #let&#39;s guess what is the city and what the region
    if &#40;$info{&#39;cityregion&#39;} =~ /&#40;.*&#41;, &#40;.*&#41;/&#41;{
      $info{&#39;city&#39;} = $1;
      $info{&#39;region&#39;} = $2; 
    }  
      
    return &#40;%info&#41;;
}

#########################################
# fixed comments method
#######################################

sub tobiesch_get_comments {
    my &#40; $friend_id &#41; = @_;
		my @comments = &#40;&#41;;
		my $url=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://comment.myspace.com/index.cfm?fuseaction=user.viewComments&#38;friendID=">http://comment.myspace.com/index.cfm?fuseaction=user.viewComments&#38;friendID=</a></span>&#34;. $friend_id;
		my $eventtarget=&#39;ctl00$Main$PagedComments$pagingNavigation1$NextLinkButton&#39;;
		my $page=&#34;&#34;;
		my $commentcount;
		
    $self-&gt;_die_unless_logged_in&#40; &#39;get_comments&#39; &#41;;

		#only get a maximum of 20 comment pages
		#this should translate to 1000 comments
		#and also serves as a safety measure in case 
		#the method breaks again
		
		&#40; $DEBUG &#41; &#38;&#38; print &#34;Getting $url\n&#34;;
	  $page = $self-&gt;get_page&#40; $url &#41;;
	  
	  #find out how many comments in total
	  #STILL NEEDS UPDATE IN CASE OF MORE THAN 1000 COMMENTS...
	  #ALSO SEEMS LIKE SOMETIMES MYSPACE REPORTS MORE COMMENTS &#40;OR FRIENDS&#41;
	  #THAN ARE ACTUALLY THERE...
	  if&#40;$page-&gt;decoded_content =~ /.*Listing [\d-]+ of &#40;\d+&#41;.*/smo&#41;{
			$commentcount=$1;
		}else{
		    $self-&gt;error&#40;&#34;Could not find how many comments are on profile&#34;&#41;;
        return undef;
		}
	  
		for&#40;my $i=1;$i&lt;=20;$i++&#41; {
	    $page=$self-&gt;{current_page};
	    
	    push @comments, $self-&gt;tobiesch_get_comments_from_page&#40; $page-&gt;decoded_content &#41;;
			
			#make sure we did not get an error
			return undef if &#40;$self-&gt;error&#41;;
	
			last unless &#40; $self-&gt;_next_button&#40; $page-&gt;decoded_content &#41; &#41;;

			&#40; $DEBUG &#41; &#38;&#38; print &#34;try to submit form to access comments page #&#34;,$i+1,&#34;\n&#34;;
	    #submit the form to get to next page
	    $self-&gt;submit_form&#40;{
			    follow =&gt; 0,
			    form_name =&gt; &#34;aspnetForm&#34;,
			    no_click =&gt; 1,
			    fields_ref =&gt; { __EVENTTARGET =&gt; $eventtarget, __EVENTARGUMENT =&gt; &#39;&#39; }
			    #re1 =&gt; &#39;something unique.?about this[ \t\n]+page&#39;,
			}&#41;;
			
			sleep &#40; int&#40; rand&#40; 2 &#41; &#41; + 1 &#41;;	    
	}    
  
 	unless&#40;scalar &#40;@comments&#41; == $commentcount&#41;{
		    $self-&gt;error&#40;&#34;Could not collect all comments. Have &#34; . @comments .&#34;, should have $commentcount&#34;&#41;;
        return undef;
	}

	return \@comments;
}

# Take a page, return a list of comment data
sub tobiesch_get_comments_from_page {

    my &#40; $page &#41; = @_;
    my @comments = &#40;&#41;;

	  # Get to the comments section to avoid mis-reads
    if &#40; $page !~ m/Add Comment&lt;\/a&gt;/gs &#41; {
        $self-&gt;error&#40;&#34;Comment section not found on page&#34;&#41;;
        return undef;
    }
    
    # Read the comment data and push it into our array.
    while &#40; $page =~ s/.*?UserID=&#40;[0-9]+&#41;.*?&lt;h4&gt;&#40;.*?&#41;&lt;\/h4&gt;\s*&#40;.*?&#41;\s*&lt;\/textarea&gt;//smo &#41; {
        push @comments, { sender =&gt; $1, date =&gt; $2, comment =&gt; $3 };
        #print &#34;found 1:$1\nfound 2:$2\nfound 3:$3\n&#34;;
    }
    
    return @comments;
}


################################################

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-328671" href="/Public/Bug/Display.html?id=27707#txn-328671">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;23&nbsp;11:15:20&nbsp;2007</span>
    <span class="description">olaf [...] wundersolutions.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> olaf [...] wundersolutions.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/328671/150970/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/150970">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 968b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jun 23 10:20:20 2007, tobiesch wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; sorry to &#34;spam&#34; the bug reports but seems the easiest way to contact.
&gt; I&#39;ve fixed the methods that retrieve the comments from a profile and I
&gt; also added a function that gets some basic info from the profile &#40;age,
&gt; gender, country, etc&#41;. I attach the code in the file for you to look at.
&gt; If you want to incorporate it, I could probably check it into your CVS
&gt; &#40;given a login&#41; and then you can adapt it as I&#39;m sure there is room for
&gt; improvement.
&gt; 
&gt; best, tobias
</div>
Hi Tobias,

Thanks very much for this!  Can you have a look at the cache_friend
method in WWW::Myspace::Data?  This already does some of the basic info
that you&#39;re fetching here.  I know bands have different info than the
info on personal pages.  If we can cover everything in your new method,
we could add it to WWW::Myspace and I can have
WWW::Myspace::Data::cache_friend access this new method that you&#39;ve written.

All the best,

Olaf
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-328672" href="/Public/Bug/Display.html?id=27707#txn-328672">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;23&nbsp;11:15:21&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-328686" href="/Public/Bug/Display.html?id=27707#txn-328686">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;23&nbsp;13:43:07&nbsp;2007</span>
    <span class="description">grantg [...] spamarrest.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #27707] fixed method for comments, added new method </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 23 Jun 2007 10:42:39 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-WWW-Myspace [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Grant Grueninger &lt;grantg [...] spamarrest.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/328686/150980/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/150980">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 5.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Tobias,

To echo Olaf, thanks very much!  &#40;and see below&#41;.

On Jun 23, 2007, at 7:20 AM, via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; sorry to &#34;spam&#34; the bug reports but seems the easiest way to contact.
</div>
This is the right place to submit fixes - otherwise they get lost. :&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve fixed the methods that retrieve the comments from a profile and I
&gt; also added a function that gets some basic info from the profile &#40;age,
&gt; gender, country, etc&#41;. I attach the code in the file for you to  
&gt; look at.
&gt; If you want to incorporate it, I could probably check it into your CVS
&gt; &#40;given a login&#41; and then you can adapt it as I&#39;m sure there is room  
&gt; for
&gt; improvement.
</div>
I would like to give you a login.  Here are the basic developer  
guidelines:
- Sign up for a sourceforge account and send me your username.
- You&#39;ll be added to the development mailing list so you&#39;ll
   get commit notices and email regarding the module
- IMPORTANT: We try to keep the module in a releasable state at all  
times because
   we frequently need to make a change to react to a myspace change.
   This means if you&#39;re developing a new method, don&#39;t commit it
   until it at least passes syntax checks.  If it&#39;s incomplete, make  
sure
   the POD says so clearly and it&#39;s in the &#34;IN PROGRESS&#34; section.
- In-development methods go at the bottom of the module in the
   &#34;IN PROGRESS&#34; section.
- Put new working methods in the appropriate section.
- Test your POD:
   - Check the formatting
   - Make sure someone reading your documentation will know how to use
     your method without looking at the code.
   - Make sure the documentation is complete and accurate
- Write a test for your method.
   - You have to debug your method anyway - write a test while you&#39;re  
at it.
     Tests are just simple debugging scripts that call your method  
and look
     for results.  See the existing tests in the &#34;t&#34; folder and add a  
new one.
     Ask if you need help.

Current issues:
- We are working on migrating all regular expressions to the &#34;regex&#34;  
hash
   near the top of Myspace.pm.  All regular expressions should be  
accessed
   using the &#34;_apply_regex&#34; method, or the &#34;_regex&#34; method if  
appropriate.
   See the &#34;is_band&#34; and &#34;is_inactive&#34; methods for examples.
   &#40;Note that this migration is under a bit of debate, since it&#39;s easier
   to maintain the module if the REs are in the method itself, but  
due to
   potential upcoming myspace changes we&#39;ve generally decided that  
handling
   them through centralized methods will probably be necessary soon&#41;.
- Myspace recently added multiple-language versions.  We&#39;re requiring  
that
   users set their account information to use English for now.  The  
login
   method has been updated to work based on URL, which is &#40;currently&#41;
   language-independent.  For internationalization &#40;i18n&#41; we may adopt
   use of language-specific regex &#40;hence the start of the above  
migration&#41;,
   or we may have the module automatically switch the user&#39;s country on
   login and switch it back on logout if possible.

Other notes:
- Olaf and I use BBedit.  If you use BBedit, turn on &#34;Auto-Expand Tabs&#34;.
   You&#39;ll notice the blank placeholder subroutines in the module that
   denote sections.  These appear conveniently in the subroutine list
   in BBedit.  If you have a Mac and don&#39;t use BBedit, try the demo:
   www.barebones.com

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; =head2 get_basic_info_on_page&#40; $friends_page &#41;;
&gt;
&gt; This routine takes the SOURCE CODE of an HTML page and returns
&gt; a hash of information containing:
&gt; country               - country in profile &#40;names of countries are is  
&gt; standardised on MySpace&#41;
&gt; cityregion    - the line with city and region information &#40;this is  
&gt; free text&#41;
&gt; headline              - what ever it says as next to the picture
&gt; age                                   - as number
&gt; gender                        - as text, either male or female
&gt; lastlogin   - date of last login
&gt;
&gt; Note: MySpace joins the profile data from city and region to one  
&gt; line &#40;such as Berlin, Germany&#41;.
&gt; However, both city and region are free text so people can write  
&gt; whatever they want. What is more,
&gt; region is optional. This function tries to extract the city and the  
&gt; region by splitting cityregion
&gt; at the last comma. However, it might not work &#40;depending on the  
&gt; profile information&#41; so both city
&gt; and region can be empty.
&gt; city          - city
&gt; region        - region
&gt;
&gt;
&gt; =cut
</div>
I think the formatting here got messed up in the email.  If it  
formats ok when you &#34;perldoc Myspace.pm&#34; then maybe you can just  
commit it once I have your sourceforge info set up.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; sub get_basic_info_on_page {
&gt;     my &#40; $page &#41; = @_;
&gt;
&gt;     ##THIS IS LANGUAGE DEPENDENT SO SITE HAS TO BE ACCESSED IN  
&gt; ENGLISH!!!
&gt;     #my $BASIC_INFO = &#39;Table2&#34;.*?&gt;.*&lt;td.*?&gt;&#40;.*?&#41;Last Login&#39;;
&gt;     my $BASIC_INFO = &#39;Table2&#34;.*?&gt;&#40;.*Last Login:.*?&#41;&lt;br&gt;&#39;;
&gt;     $BASIC_INFO = qr/$BASIC_INFO/smo;
&gt;               
&gt;               #my $time=time;
&gt;               #matching does take quite long... &#40;around 6s&#41;
&gt;     $page =~ /$BASIC_INFO/;
</div>
This is probably a good candidate for the regex hash and associated  
methods.
We try to use all-caps variable names for global variables.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;         #STILL NEEDS UPDATE IN CASE OF MORE THAN 1000 COMMENTS...
&gt;         #ALSO SEEMS LIKE SOMETIMES MYSPACE REPORTS MORE COMMENTS &#40;OR  
&gt; FRIENDS&#41;
&gt;         #THAN ARE ACTUALLY THERE...
</div>
Yup.  Myspace almost never reports the correct number of friends or  
comments. Usually, this is due to deleted accounts not being  
subtracted from your friend count.  But, in some profiles, if you  
approve friend requests using the checkboxes and &#34;approve selected  
friends&#34; button, it will *decrease* your friend count by the number  
of friends you approve.

Grant
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-328689" href="/Public/Bug/Display.html?id=27707#txn-328689">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;23&nbsp;17:52:41&nbsp;2007</span>
    <span class="description">tobiesch [...] users.sourceforge.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tobiesch [...] users.sourceforge.net</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/328689/150983/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/150983">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Grant and Olaf,

thanks for the positive feedback. 

I am a bit busy right now but give me some days and I will try to
incorporate all your comments in the code and submit it to the current
CVS version. 

Thanks for the login, my sourceforge user name is
tobiesch&#40;@users.sourceforge.net&#41;.

best, tobias

On Sat Jun 23 13:43:07 2007, grantg@spamarrest.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Tobias,
&gt; 
&gt; To echo Olaf, thanks very much!  &#40;and see below&#41;.
&gt; 
&gt; On Jun 23, 2007, at 7:20 AM, via RT wrote:
<div class="message-stanza open">&gt; &gt;
&gt; &gt; sorry to &#34;spam&#34; the bug reports but seems the easiest way to contact.
</div>&gt; 
&gt; This is the right place to submit fixes - otherwise they get lost. :&#41;
&gt; 
<div class="message-stanza open">&gt; &gt; I&#39;ve fixed the methods that retrieve the comments from a profile and I
&gt; &gt; also added a function that gets some basic info from the profile &#40;age,
&gt; &gt; gender, country, etc&#41;. I attach the code in the file for you to  
&gt; &gt; look at.
&gt; &gt; If you want to incorporate it, I could probably check it into your CVS
&gt; &gt; &#40;given a login&#41; and then you can adapt it as I&#39;m sure there is room  
&gt; &gt; for
&gt; &gt; improvement.
</div>&gt; 
&gt; I would like to give you a login.  Here are the basic developer  
&gt; guidelines:
&gt; - Sign up for a sourceforge account and send me your username.
&gt; - You&#39;ll be added to the development mailing list so you&#39;ll
&gt;    get commit notices and email regarding the module
&gt; - IMPORTANT: We try to keep the module in a releasable state at all  
&gt; times because
&gt;    we frequently need to make a change to react to a myspace change.
&gt;    This means if you&#39;re developing a new method, don&#39;t commit it
&gt;    until it at least passes syntax checks.  If it&#39;s incomplete, make  
&gt; sure
&gt;    the POD says so clearly and it&#39;s in the &#34;IN PROGRESS&#34; section.
&gt; - In-development methods go at the bottom of the module in the
&gt;    &#34;IN PROGRESS&#34; section.
&gt; - Put new working methods in the appropriate section.
&gt; - Test your POD:
&gt;    - Check the formatting
&gt;    - Make sure someone reading your documentation will know how to use
&gt;      your method without looking at the code.
&gt;    - Make sure the documentation is complete and accurate
&gt; - Write a test for your method.
&gt;    - You have to debug your method anyway - write a test while you&#39;re  
&gt; at it.
&gt;      Tests are just simple debugging scripts that call your method  
&gt; and look
&gt;      for results.  See the existing tests in the &#34;t&#34; folder and add a  
&gt; new one.
&gt;      Ask if you need help.
&gt; 
&gt; Current issues:
&gt; - We are working on migrating all regular expressions to the &#34;regex&#34;  
&gt; hash
&gt;    near the top of Myspace.pm.  All regular expressions should be  
&gt; accessed
&gt;    using the &#34;_apply_regex&#34; method, or the &#34;_regex&#34; method if  
&gt; appropriate.
&gt;    See the &#34;is_band&#34; and &#34;is_inactive&#34; methods for examples.
&gt;    &#40;Note that this migration is under a bit of debate, since it&#39;s easier
&gt;    to maintain the module if the REs are in the method itself, but  
&gt; due to
&gt;    potential upcoming myspace changes we&#39;ve generally decided that  
&gt; handling
&gt;    them through centralized methods will probably be necessary soon&#41;.
&gt; - Myspace recently added multiple-language versions.  We&#39;re requiring  
&gt; that
&gt;    users set their account information to use English for now.  The  
&gt; login
&gt;    method has been updated to work based on URL, which is &#40;currently&#41;
&gt;    language-independent.  For internationalization &#40;i18n&#41; we may adopt
&gt;    use of language-specific regex &#40;hence the start of the above  
&gt; migration&#41;,
&gt;    or we may have the module automatically switch the user&#39;s country on
&gt;    login and switch it back on logout if possible.
&gt; 
&gt; Other notes:
&gt; - Olaf and I use BBedit.  If you use BBedit, turn on &#34;Auto-Expand Tabs&#34;.
&gt;    You&#39;ll notice the blank placeholder subroutines in the module that
&gt;    denote sections.  These appear conveniently in the subroutine list
&gt;    in BBedit.  If you have a Mac and don&#39;t use BBedit, try the demo:
&gt;    www.barebones.com
&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt; =head2 get_basic_info_on_page&#40; $friends_page &#41;;
&gt; &gt;
&gt; &gt; This routine takes the SOURCE CODE of an HTML page and returns
&gt; &gt; a hash of information containing:
&gt; &gt; country             - country in profile &#40;names of countries are is  
&gt; &gt; standardised on MySpace&#41;
&gt; &gt; cityregion  - the line with city and region information &#40;this is  
&gt; &gt; free text&#41;
&gt; &gt; headline            - what ever it says as next to the picture
&gt; &gt; age                                 - as number
&gt; &gt; gender                      - as text, either male or female
&gt; &gt; lastlogin   - date of last login
&gt; &gt;
&gt; &gt; Note: MySpace joins the profile data from city and region to one  
&gt; &gt; line &#40;such as Berlin, Germany&#41;.
&gt; &gt; However, both city and region are free text so people can write  
&gt; &gt; whatever they want. What is more,
&gt; &gt; region is optional. This function tries to extract the city and the  
&gt; &gt; region by splitting cityregion
&gt; &gt; at the last comma. However, it might not work &#40;depending on the  
&gt; &gt; profile information&#41; so both city
&gt; &gt; and region can be empty.
&gt; &gt; city                - city
&gt; &gt; region      - region
&gt; &gt;
&gt; &gt;
&gt; &gt; =cut
</div>&gt; 
&gt; I think the formatting here got messed up in the email.  If it  
&gt; formats ok when you &#34;perldoc Myspace.pm&#34; then maybe you can just  
&gt; commit it once I have your sourceforge info set up.
&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt; sub get_basic_info_on_page {
&gt; &gt;     my &#40; $page &#41; = @_;
&gt; &gt;
&gt; &gt;     ##THIS IS LANGUAGE DEPENDENT SO SITE HAS TO BE ACCESSED IN  
&gt; &gt; ENGLISH!!!
&gt; &gt;     #my $BASIC_INFO = &#39;Table2&#34;.*?&gt;.*&lt;td.*?&gt;&#40;.*?&#41;Last Login&#39;;
&gt; &gt;     my $BASIC_INFO = &#39;Table2&#34;.*?&gt;&#40;.*Last Login:.*?&#41;&lt;br&gt;&#39;;
&gt; &gt;     $BASIC_INFO = qr/$BASIC_INFO/smo;
&gt; &gt;             
&gt; &gt;             #my $time=time;
&gt; &gt;             #matching does take quite long... &#40;around 6s&#41;
&gt; &gt;     $page =~ /$BASIC_INFO/;
</div>&gt; 
&gt; This is probably a good candidate for the regex hash and associated  
&gt; methods.
&gt; We try to use all-caps variable names for global variables.
&gt; 
&gt; 
<div class="message-stanza open">&gt; &gt;       #STILL NEEDS UPDATE IN CASE OF MORE THAN 1000 COMMENTS...
&gt; &gt;       #ALSO SEEMS LIKE SOMETIMES MYSPACE REPORTS MORE COMMENTS &#40;OR  
&gt; &gt; FRIENDS&#41;
&gt; &gt;       #THAN ARE ACTUALLY THERE...
</div>&gt; 
&gt; Yup.  Myspace almost never reports the correct number of friends or  
&gt; comments. Usually, this is due to deleted accounts not being  
&gt; subtracted from your friend count.  But, in some profiles, if you  
&gt; approve friend requests using the checkboxes and &#34;approve selected  
&gt; friends&#34; button, it will *decrease* your friend count by the number  
&gt; of friends you approve.
&gt; 
&gt; Grant
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-328953" href="/Public/Bug/Display.html?id=27707#txn-328953">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;25&nbsp;02:04:28&nbsp;2007</span>
    <span class="description">grantg [...] spamarrest.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #27707] fixed method for comments, added new method </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 24 Jun 2007 23:03:59 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-WWW-Myspace [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Grant Grueninger &lt;grantg [...] spamarrest.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/328953/151108/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/151108">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 6.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Tobias,

I&#39;ve added you as a developer.  Log into sourceforge and you should  
see www-myspace in your &#34;my projects&#34; list.

Limited developer documentation is in the Wiki at <span class="clickylink"><a target="new" rel="nofollow" href="http://www">http://www</a></span>- 
myspace.wiki.sourceforge.net/

You can poke around your menu options in there.  We aren&#39;t using most  
of the features, and the release on sourceforge is very old &#40;too hard  
to to a release there so we just do it on CPAN&#41;.

You should also have svn commit access.


On Jun 23, 2007, at 2:52 PM, via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;        Queue: WWW-Myspace
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=27707">http://rt.cpan.org/Ticket/Display.html?id=27707</a></span> &gt;
&gt;
&gt; Hi Grant and Olaf,
&gt;
&gt; thanks for the positive feedback.
&gt;
&gt; I am a bit busy right now but give me some days and I will try to
&gt; incorporate all your comments in the code and submit it to the current
&gt; CVS version.
&gt;
&gt; Thanks for the login, my sourceforge user name is
&gt; tobiesch&#40;@users.sourceforge.net&#41;.
&gt;
&gt; best, tobias
&gt;
&gt; On Sat Jun 23 13:43:07 2007, grantg@spamarrest.com wrote:
<div class="message-stanza open">&gt;&gt; Hi Tobias,
&gt;&gt;
&gt;&gt; To echo Olaf, thanks very much!  &#40;and see below&#41;.
&gt;&gt;
&gt;&gt; On Jun 23, 2007, at 7:20 AM, via RT wrote:
<div class="message-stanza open">&gt;&gt;&gt;
&gt;&gt;&gt; sorry to &#34;spam&#34; the bug reports but seems the easiest way to  
&gt;&gt;&gt; contact.
</div>&gt;&gt;
&gt;&gt; This is the right place to submit fixes - otherwise they get lost. :&#41;
&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt; I&#39;ve fixed the methods that retrieve the comments from a profile  
&gt;&gt;&gt; and I
&gt;&gt;&gt; also added a function that gets some basic info from the profile  
&gt;&gt;&gt; &#40;age,
&gt;&gt;&gt; gender, country, etc&#41;. I attach the code in the file for you to
&gt;&gt;&gt; look at.
&gt;&gt;&gt; If you want to incorporate it, I could probably check it into  
&gt;&gt;&gt; your CVS
&gt;&gt;&gt; &#40;given a login&#41; and then you can adapt it as I&#39;m sure there is room
&gt;&gt;&gt; for
&gt;&gt;&gt; improvement.
</div>&gt;&gt;
&gt;&gt; I would like to give you a login.  Here are the basic developer
&gt;&gt; guidelines:
&gt;&gt; - Sign up for a sourceforge account and send me your username.
&gt;&gt; - You&#39;ll be added to the development mailing list so you&#39;ll
&gt;&gt;    get commit notices and email regarding the module
&gt;&gt; - IMPORTANT: We try to keep the module in a releasable state at all
&gt;&gt; times because
&gt;&gt;    we frequently need to make a change to react to a myspace change.
&gt;&gt;    This means if you&#39;re developing a new method, don&#39;t commit it
&gt;&gt;    until it at least passes syntax checks.  If it&#39;s incomplete, make
&gt;&gt; sure
&gt;&gt;    the POD says so clearly and it&#39;s in the &#34;IN PROGRESS&#34; section.
&gt;&gt; - In-development methods go at the bottom of the module in the
&gt;&gt;    &#34;IN PROGRESS&#34; section.
&gt;&gt; - Put new working methods in the appropriate section.
&gt;&gt; - Test your POD:
&gt;&gt;    - Check the formatting
&gt;&gt;    - Make sure someone reading your documentation will know how to  
&gt;&gt; use
&gt;&gt;      your method without looking at the code.
&gt;&gt;    - Make sure the documentation is complete and accurate
&gt;&gt; - Write a test for your method.
&gt;&gt;    - You have to debug your method anyway - write a test while you&#39;re
&gt;&gt; at it.
&gt;&gt;      Tests are just simple debugging scripts that call your method
&gt;&gt; and look
&gt;&gt;      for results.  See the existing tests in the &#34;t&#34; folder and add a
&gt;&gt; new one.
&gt;&gt;      Ask if you need help.
&gt;&gt;
&gt;&gt; Current issues:
&gt;&gt; - We are working on migrating all regular expressions to the &#34;regex&#34;
&gt;&gt; hash
&gt;&gt;    near the top of Myspace.pm.  All regular expressions should be
&gt;&gt; accessed
&gt;&gt;    using the &#34;_apply_regex&#34; method, or the &#34;_regex&#34; method if
&gt;&gt; appropriate.
&gt;&gt;    See the &#34;is_band&#34; and &#34;is_inactive&#34; methods for examples.
&gt;&gt;    &#40;Note that this migration is under a bit of debate, since it&#39;s  
&gt;&gt; easier
&gt;&gt;    to maintain the module if the REs are in the method itself, but
&gt;&gt; due to
&gt;&gt;    potential upcoming myspace changes we&#39;ve generally decided that
&gt;&gt; handling
&gt;&gt;    them through centralized methods will probably be necessary soon&#41;.
&gt;&gt; - Myspace recently added multiple-language versions.  We&#39;re requiring
&gt;&gt; that
&gt;&gt;    users set their account information to use English for now.  The
&gt;&gt; login
&gt;&gt;    method has been updated to work based on URL, which is &#40;currently&#41;
&gt;&gt;    language-independent.  For internationalization &#40;i18n&#41; we may  
&gt;&gt; adopt
&gt;&gt;    use of language-specific regex &#40;hence the start of the above
&gt;&gt; migration&#41;,
&gt;&gt;    or we may have the module automatically switch the user&#39;s  
&gt;&gt; country on
&gt;&gt;    login and switch it back on logout if possible.
&gt;&gt;
&gt;&gt; Other notes:
&gt;&gt; - Olaf and I use BBedit.  If you use BBedit, turn on &#34;Auto-Expand  
&gt;&gt; Tabs&#34;.
&gt;&gt;    You&#39;ll notice the blank placeholder subroutines in the module that
&gt;&gt;    denote sections.  These appear conveniently in the subroutine list
&gt;&gt;    in BBedit.  If you have a Mac and don&#39;t use BBedit, try the demo:
&gt;&gt;    www.barebones.com
&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt;
&gt;&gt;&gt; =head2 get_basic_info_on_page&#40; $friends_page &#41;;
&gt;&gt;&gt;
&gt;&gt;&gt; This routine takes the SOURCE CODE of an HTML page and returns
&gt;&gt;&gt; a hash of information containing:
&gt;&gt;&gt; country             - country in profile &#40;names of countries are is
&gt;&gt;&gt; standardised on MySpace&#41;
&gt;&gt;&gt; cityregion  - the line with city and region information &#40;this is
&gt;&gt;&gt; free text&#41;
&gt;&gt;&gt; headline            - what ever it says as next to the picture
&gt;&gt;&gt; age                                 - as number
&gt;&gt;&gt; gender                      - as text, either male or female
&gt;&gt;&gt; lastlogin   - date of last login
&gt;&gt;&gt;
&gt;&gt;&gt; Note: MySpace joins the profile data from city and region to one
&gt;&gt;&gt; line &#40;such as Berlin, Germany&#41;.
&gt;&gt;&gt; However, both city and region are free text so people can write
&gt;&gt;&gt; whatever they want. What is more,
&gt;&gt;&gt; region is optional. This function tries to extract the city and the
&gt;&gt;&gt; region by splitting cityregion
&gt;&gt;&gt; at the last comma. However, it might not work &#40;depending on the
&gt;&gt;&gt; profile information&#41; so both city
&gt;&gt;&gt; and region can be empty.
&gt;&gt;&gt; city                - city
&gt;&gt;&gt; region      - region
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; =cut
</div>&gt;&gt;
&gt;&gt; I think the formatting here got messed up in the email.  If it
&gt;&gt; formats ok when you &#34;perldoc Myspace.pm&#34; then maybe you can just
&gt;&gt; commit it once I have your sourceforge info set up.
&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt;
&gt;&gt;&gt; sub get_basic_info_on_page {
&gt;&gt;&gt;     my &#40; $page &#41; = @_;
&gt;&gt;&gt;
&gt;&gt;&gt;     ##THIS IS LANGUAGE DEPENDENT SO SITE HAS TO BE ACCESSED IN
&gt;&gt;&gt; ENGLISH!!!
&gt;&gt;&gt;     #my $BASIC_INFO = &#39;Table2&#34;.*?&gt;.*&lt;td.*?&gt;&#40;.*?&#41;Last Login&#39;;
&gt;&gt;&gt;     my $BASIC_INFO = &#39;Table2&#34;.*?&gt;&#40;.*Last Login:.*?&#41;&lt;br&gt;&#39;;
&gt;&gt;&gt;     $BASIC_INFO = qr/$BASIC_INFO/smo;
&gt;&gt;&gt;             
&gt;&gt;&gt;             #my $time=time;
&gt;&gt;&gt;             #matching does take quite long... &#40;around 6s&#41;
&gt;&gt;&gt;     $page =~ /$BASIC_INFO/;
</div>&gt;&gt;
&gt;&gt; This is probably a good candidate for the regex hash and associated
&gt;&gt; methods.
&gt;&gt; We try to use all-caps variable names for global variables.
&gt;&gt;
&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt;       #STILL NEEDS UPDATE IN CASE OF MORE THAN 1000 COMMENTS...
&gt;&gt;&gt;       #ALSO SEEMS LIKE SOMETIMES MYSPACE REPORTS MORE COMMENTS &#40;OR
&gt;&gt;&gt; FRIENDS&#41;
&gt;&gt;&gt;       #THAN ARE ACTUALLY THERE...
</div>&gt;&gt;
&gt;&gt; Yup.  Myspace almost never reports the correct number of friends or
&gt;&gt; comments. Usually, this is due to deleted accounts not being
&gt;&gt; subtracted from your friend count.  But, in some profiles, if you
&gt;&gt; approve friend requests using the checkboxes and &#34;approve selected
&gt;&gt; friends&#34; button, it will *decrease* your friend count by the number
&gt;&gt; of friends you approve.
&gt;&gt;
&gt;&gt; Grant
</div>&gt;
&gt;
&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-334841" href="/Public/Bug/Display.html?id=27707#txn-334841">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;26&nbsp;02:46:51&nbsp;2007</span>
    <span class="description">GRANTG [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/334841/151268/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/151268">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 21b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Added to version 0.66
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-334851" href="/Public/Bug/Display.html?id=27707#txn-334851">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;26&nbsp;02:46:53&nbsp;2007</span>
    <span class="description">GRANTG [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.579339</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
