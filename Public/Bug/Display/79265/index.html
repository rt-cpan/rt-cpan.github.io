<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #79265 for DBD-DB2: DBD::DB2::tables doesn&#39;t accept proper arguments</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #79265 for DBD-DB2: DBD::DB2::tables doesn&#39;t accept proper arguments</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=DBD-DB2">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=DBD-DB2">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=DBD-DB2">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=DBD-DB2">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-DB2">DBD-DB2 CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">79265</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=DBD-DB2">DBD-DB2</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dmcbride [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-10084-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.84    </td>
  </tr>
  <tr id="CF-10085-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




DB2.pm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1126844/592837/DB2.pm">
Sun Oct 07 10:43:28 2012 (8.6k) by opendev [...] us.ibm.com
</a>
</font></li>
</ul>


dbdimp.c<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1126844/592838/dbdimp.c">
Sun Oct 07 10:43:28 2012 (105.1k) by opendev [...] us.ibm.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=79265">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1113948" href="/Public/Bug/Display.html?id=79265#txn-1113948">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;28&nbsp;13:41:42&nbsp;2012</span>
    <span class="description">dmcbride [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1113948/585979/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/585979">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 827b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">DBD::DB2::tables doesn&#39;t accept the same parameters as given in the 
DBI documentation:

$ perl -MDBI -le &#39;$dbh=DBI-&gt;connect&#40;&#34;dbi:DB2:cbstats&#34;&#41;;print for $dbh-
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;tables&#40;&#34;%&#34;,&#34;CBSTATS&#34;,&#34;%&#34;&#41;&#39;
</div>DBI::st=HASH&#40;0x1da0ec0&#41;-&gt;_table_info&#40;...&#41;: attribute parameter &#39;%&#39; is not 
a hash ref at /usr/lib64/perl5/site_perl/5.12.2/x86_64-linux-thread-
multi/DBD/DB2.pm line 215.

This should list all tables in the CBSTATS schema, but only the first 
parameter is passed through to table_info.

Using SQLite as an example:

$ perl -MDBI -le &#39;$dbh=DBI-&gt;connect&#40;&#34;dbi:SQLite:myorg.db&#34;&#41;;print for 
$dbh-&gt;tables&#40;&#34;%&#34;,&#34;main&#34;,&#34;%&#34;&#41;&#39;
&#34;main&#34;.&#34;MEMBERS&#34;
&#34;main&#34;.&#34;MEMBERS&#34;
&#34;main&#34;.&#34;sqlite_master&#34;
&#34;main&#34;.&#34;EXECUTIVE&#34;
&#34;main&#34;.&#34;LISTS&#34;
&#34;main&#34;.&#34;MEMBERS&#34;
&#34;main&#34;.&#34;SPECIAL&#34;

&#40;Why there are three tables labelled &#34;main&#34;.&#34;MEMBERS&#34;, I don&#39;t know, but 
that&#39;s another topic.&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1113951" href="/Public/Bug/Display.html?id=79265#txn-1113951">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;28&nbsp;13:42:09&nbsp;2012</span>
    <span class="description">dmcbride [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1113952" href="/Public/Bug/Display.html?id=79265#txn-1113952">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;28&nbsp;13:42:52&nbsp;2012</span>
    <span class="description">dmcbride [...] cpan.org -  Subject changed from &#40;no value&#41; to &#39;DBD::DB2::tables doesn&#39;t accept proper arguments&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1113953" href="/Public/Bug/Display.html?id=79265#txn-1113953">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;28&nbsp;13:42:52&nbsp;2012</span>
    <span class="description">dmcbride [...] cpan.org -  Status changed from &#39;open&#39; to &#39;new&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1125995" href="/Public/Bug/Display.html?id=79265#txn-1125995">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;04&nbsp;08:04:50&nbsp;2012</span>
    <span class="description">opendev [...] us.ibm.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1125995/592367/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/592367">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 684b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Darin,

Sorry for the delayed response. 

The DBD::DB2 driver has overwritten the table_info method to take in
only 1 argument, that is a hash list of values for SCHEMA, Table name
and Table Type. You will need to use this syntax while using DBD::DB2.
You can find the doc here
<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~ibmtordb2/DBD-DB2-1.84/DB2.pod#Getting_Table_information">http://search.cpan.org/~ibmtordb2/DBD-DB2-1.84/DB2.pod#Getting_Table_information</a></span>

I am not sure if DBI had this syntax earlier and changed it in the
latest versions and hence the syntax. For now you could use this DB2
syntax. I will look into this and see how can I restructure to adhere to
DBI spec.

-- 
Thanks
Praveen
IBM OpenSource Application Development Team
India Software Labs, Bangalore &#40;India&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1125997" href="/Public/Bug/Display.html?id=79265#txn-1125997">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;04&nbsp;08:04:50&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1125998" href="/Public/Bug/Display.html?id=79265#txn-1125998">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;04&nbsp;08:20:12&nbsp;2012</span>
    <span class="description">opendev [...] us.ibm.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1125998/592369/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/592369">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 247b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ok. I see that the API syntax is changed in version 1.19 of DBI. Will
make changes in DBD::DB2 to adhere to new changes as per DB2 requirements.

-- 
Thanks
Praveen
IBM OpenSource Application Development Team
India Software Labs, Bangalore &#40;India&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1126844" href="/Public/Bug/Display.html?id=79265#txn-1126844">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;07&nbsp;10:43:28&nbsp;2012</span>
    <span class="description">opendev [...] us.ibm.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1126844/592836/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/592836">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 304b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Darin,

I have fixed this issue. I am attaching the modified files. Try them and
let me know how it goes. If everything is fine will go ahead and make a
release along with the fix for defect 77414.


-- 
Thanks
Praveen
IBM OpenSource Application Development Team
India Software Labs, Bangalore &#40;India&#41;
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> DB2.pm</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1126844/592837/DB2.pm">Download DB2.pm</a><br />
<span class="downloadcontenttype">text/x-perl 8.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#
#   engn/perldb2/DB2.pm, engn_perldb2, db2_v82fp9, 1.10 04/09/19 17:17:44
#
#   Copyright &#40;c&#41; 1995-2004  International Business Machines Corp.
#

{
    package DBD::DB2;

    use DBI;

    use DynaLoader;
    @ISA = qw&#40;Exporter DynaLoader&#41;;

    @EXPORT_OK = qw&#40; $attrib_dec
                     $attrib_int
                     $attrib_char
                     $attrib_float
                     $attrib_date
                     $attrib_ts
                     $attrib_binary
                     $attrib_blobfile
                     $attrib_clobfile
                     $attrib_dbclobfile &#41;;

    $VERSION = &#39;1.84&#39;;
    require_version DBI 1.41;

    bootstrap DBD::DB2;

    use DBD::DB2::Constants;

    $err = 0;             # holds error code   for DBI::err
    $errstr = &#34;&#34;;         # holds error string for DBI::errstr
    $state = &#34;&#34;;          # holds SQL state for    DBI::state
    $drh = undef;         # holds driver handle once initialised

    $warn_success = $ENV{&#39;WARNING_OK&#39;};

    $attrib_dec = {
                    &#39;db2_param_type&#39; =&gt; SQL_PARAM_INPUT_OUTPUT,
                    &#39;db2_c_type&#39;     =&gt; SQL_C_CHAR,
                    &#39;db2_type&#39;       =&gt; SQL_DECIMAL,
                    &#39;PRECISION&#39;      =&gt; 31,
                    &#39;SCALE&#39;          =&gt; 4,
                  };
    $attrib_int = {
                    &#39;db2_param_type&#39; =&gt; SQL_PARAM_INPUT_OUTPUT,
                    &#39;db2_c_type&#39;     =&gt; SQL_C_CHAR,
                    &#39;db2_type&#39;       =&gt; SQL_INTEGER,
                    &#39;PRECISION&#39;      =&gt; 10,
                  };
    $attrib_char = {
                    &#39;db2_param_type&#39; =&gt; SQL_PARAM_INPUT_OUTPUT,
                    &#39;db2_c_type&#39;     =&gt; SQL_C_CHAR,
                    &#39;db2_type&#39;       =&gt; SQL_CHAR,
                    &#39;PRECISION&#39;      =&gt; 0,
                  };
    $attrib_float = {
                    &#39;db2_param_type&#39; =&gt; SQL_PARAM_INPUT_OUTPUT,
                    &#39;db2_c_type&#39;     =&gt; SQL_C_CHAR,
                    &#39;db2_type&#39;       =&gt; SQL_FLOAT,
                    &#39;PRECISION&#39;      =&gt; 15,
                    &#39;SCALE&#39;          =&gt; 6,
                  };
    $attrib_date = {
                    &#39;db2_param_type&#39; =&gt; SQL_PARAM_INPUT_OUTPUT,
                    &#39;db2_c_type&#39;     =&gt; SQL_C_CHAR,
                    &#39;db2_type&#39;       =&gt; SQL_DATE,
                    &#39;PRECISION&#39;      =&gt; 10,
                  };
    $attrib_ts = {
                    &#39;db2_param_type&#39; =&gt; SQL_PARAM_INPUT_OUTPUT,
                    &#39;db2_c_type&#39;     =&gt; SQL_C_CHAR,
                    &#39;db2_type&#39;       =&gt; SQL_TIMESTAMP,
                    &#39;PRECISION&#39;      =&gt; 26,
                    &#39;SCALE&#39;          =&gt; 11,
                  };
    $attrib_binary = {
                    &#39;db2_param_type&#39; =&gt; SQL_PARAM_INPUT_OUTPUT,
                    &#39;db2_c_type&#39;     =&gt; SQL_C_BINARY,
                    &#39;db2_type&#39;       =&gt; SQL_BINARY,
                    &#39;PRECISION&#39;      =&gt; 0,
                  };
    $attrib_blobfile = {
                    &#39;db2_param_type&#39; =&gt; SQL_PARAM_INPUT,
                    &#39;db2_c_type&#39;     =&gt; SQL_C_CHAR,
                    &#39;db2_type&#39;       =&gt; SQL_BLOB,
                    &#39;db2_file&#39;       =&gt; 1,
                  };
    $attrib_clobfile = {
                    &#39;db2_param_type&#39; =&gt; SQL_PARAM_INPUT,
                    &#39;db2_c_type&#39;     =&gt; SQL_C_CHAR,
                    &#39;db2_type&#39;       =&gt; SQL_CLOB,
                    &#39;db2_file&#39;       =&gt; 1,
                  };
    $attrib_dbclobfile = {
                    &#39;db2_param_type&#39; =&gt; SQL_PARAM_INPUT,
                    &#39;db2_c_type&#39;     =&gt; SQL_C_CHAR,
                    &#39;db2_type&#39;       =&gt; SQL_DBCLOB,
                    &#39;db2_file&#39;       =&gt; 1,
                  };

    sub driver{
        return $drh if $drh;
        my&#40;$class, $attr&#41; = @_;

        $class .= &#34;::dr&#34;;

        # not a &#39;my&#39; since we use it above to prevent multiple drivers

        $drh = DBI::_new_drh&#40;$class, {
            &#39;Name&#39; =&gt; &#39;DB2&#39;,
            &#39;Version&#39; =&gt; $VERSION,
            &#39;Err&#39;    =&gt; \$DBD::DB2::err,
            &#39;Errstr&#39; =&gt; \$DBD::DB2::errstr,
            &#39;State&#39;  =&gt; \$DBD::DB2::state,
            &#39;Attribution&#39; =&gt; &#39;DB2 DBD by IBM&#39;,
            }&#41;;

        $drh;
    }

    sub CLONE{
        undef $drh;
    }

    1;
}


{   package DBD::DB2::dr; # ====== DRIVER ======
    use strict;

    sub connect {

        my&#40;$drh, $dbname, $user, $auth, $attr&#41;= @_;

        # create a &#39;blank&#39; dbh

        my $this = DBI::_new_dbh&#40;$drh, {
            &#39;Name&#39; =&gt; $dbname,
            &#39;USER&#39; =&gt; $user, &#39;CURRENT_USER&#39; =&gt; $user
            }&#41;;

        DBD::DB2::db::_login&#40;$this, $dbname, $user, $auth, $attr&#41;
            or return undef;

        $this;
    }

    sub data_sources {
        my &#40;$drh, $attr&#41; = @_;
        my $dsref = DBD::DB2::dr::_data_sources&#40; $drh, $attr &#41;;
        if&#40; defined&#40; $dsref &#41; &#38;&#38;
            ref&#40; $dsref &#41; eq &#34;ARRAY&#34; &#41;
        {
          return @$dsref;
        }
        return &#40;&#41;;  # Return empty array
    }
}


{   package DBD::DB2::db; # ====== DATABASE ======
    use strict;

    sub do {
        my&#40;$dbh, $statement, $attr, @params&#41; = @_;
        my $rows = 0;

        if&#40; -1 == $#params &#41;
        {
          # No parameters, use execute immediate
          $rows = DBD::DB2::db::_do&#40; $dbh, $statement &#41;;
          if&#40; 0 == $rows &#41;
          {
            $rows = &#34;0E0&#34;;
          }
          elsif&#40; $rows &lt; -1 &#41;
          {
            undef $rows;
          }
        }
        else
        {
          $rows = $dbh-&gt;SUPER::do&#40; $statement, $attr, @params &#41;;
        }
        return $rows
    }

    sub prepare {
        my&#40;$dbh, $statement&#41;= @_;

        # create a &#39;blank&#39; dbh

        my $sth = DBI::_new_sth&#40;$dbh, {
            &#39;Statement&#39; =&gt; $statement,
            }&#41;;

        DBD::DB2::st::_prepare&#40;$sth, $statement&#41;
            or return undef;

        $sth;
    }

    sub ping {
        my&#40;$dbh&#41; = @_;
        DBD::DB2::db::_ping&#40; $dbh &#41;;
    }

    sub table_info {
        my&#40; $dbh, $ctlg, $schema, $table, $type &#41; = @_;
        my $attr = {};

        if&#40;ref&#40;$ctlg&#41; eq &#34;HASH&#34;&#41; {
          $attr = $ctlg;
        } else {
          $attr = {&#39;TABLE_SCHEM&#39; =&gt; $schema,
                   &#39;TABLE_TYPE&#39; =&gt; $type,
                   &#39;TABLE_NAME&#39; =&gt; $table};
        }

        my $sth = DBI::_new_sth&#40;$dbh, {}&#41;;
        DBD::DB2::st::_table_info&#40; $sth, $attr &#41;
           or return undef;

        $sth;
    }

    sub primary_key_info
    {
       my&#40; $dbh, $catalog, $schema, $table &#41; = @_;
       my $sth = DBI::_new_sth&#40; $dbh, {} &#41;;
       DBD::DB2::st::_primary_key_info&#40; $sth, $catalog, $schema, $table &#41;
          or return undef;

       $sth;
    }

    sub foreign_key_info
    {
       my&#40; $dbh, $pkcat, $pkschema, $pktable, $fkcat, $fkschema, $fktable &#41; = @_;
       my $sth = DBI::_new_sth&#40; $dbh, {} &#41;;
       DBD::DB2::st::_foreign_key_info&#40; $sth, $pkcat, $pkschema, $pktable,
                                              $fkcat, $fkschema, $fktable &#41;
          or return undef;

       $sth;
    }

    sub column_info
    {
       my&#40; $dbh, $cat, $schema, $table, $column &#41; = @_;
       my $sth = DBI::_new_sth&#40; $dbh, {} &#41;;

       # Applications can use undef instead of NULL, and they are not the same
       # We have to map undef to &#34;match all&#34; here before going into C code

       if&#40; !defined&#40;$cat&#41; &#41;
       {
          $cat = &#34;&#34;;
       }

       if&#40; !defined&#40;$schema&#41; &#41;
       {
          $schema = &#34;%&#34;;
       }

       if&#40; !defined&#40;$table&#41; &#41;
       {
          $table = &#34;%&#34;;
       }

       if&#40; !defined&#40;$column&#41; &#41;
       {
          $column = &#34;%&#34;;
       }

       DBD::DB2::st::_column_info&#40; $sth, $cat, $schema, $table, $column &#41;
          or return undef;

       $sth;
    }

    sub type_info_all
    {
       my&#40; $dbh &#41; = @_;

       my $cols =
       {
          TYPE_NAME          =&gt; 0,
          DATA_TYPE          =&gt; 1,
          COLUMN_SIZE        =&gt; 2,
          LITERAL_PREFIX     =&gt; 3,
          LITERAL_SUFFIX     =&gt; 4,
          CREATE_PARAMS      =&gt; 5,
          NULLABLE           =&gt; 6,
          CASE_SENSITIVE     =&gt; 7,
          SEARCHABLE         =&gt; 8,
          UNSIGNED_ATTRIBUTE =&gt; 9,
          FIXED_PREC_SCALE   =&gt; 10,
          AUTO_UNIQUE_VALUE  =&gt; 11,
          LOCAL_TYPE_NAME    =&gt; 12,
          MINIMUM_SCALE      =&gt; 13,
          MAXIMUM_SCALE      =&gt; 14,
          SQL_DATA_TYPE      =&gt; 15,
          SQL_DATETIME_SUB   =&gt; 16,
          NUM_PREC_RADIX     =&gt; 17,
          INTERVAL_PRECISION =&gt; 18
       };

       my $type_info_all = [ $cols ];

       my $sth = DBI::_new_sth&#40; $dbh, {} &#41;;
       DBD::DB2::st::_type_info_all&#40; $sth &#41; or return undef;
       push&#40; @$type_info_all, @{$sth-&gt;fetchall_arrayref} &#41;;
       $sth-&gt;finish;

       return $type_info_all;
    }

    sub get_info
    {
      my&#40; $dbh, $infotype &#41; = @_;
      my $v = DBD::DB2::db::_get_info&#40; $dbh, $infotype &#41;;
      return $v;
    }

}


{   package DBD::DB2::st; # ====== STATEMENT ======
    use strict;

}

1;
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> dbdimp.c</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1126844/592838/dbdimp.c">Download dbdimp.c</a><br />
<span class="downloadcontenttype">text/x-csrc 105.1k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1126918" href="/Public/Bug/Display.html?id=79265#txn-1126918">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;07&nbsp;23:16:44&nbsp;2012</span>
    <span class="description">dmcbride [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1126918/592868/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/592868">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Oct 07 10:43:28 2012, IBMTORDB2 wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Darin,
&gt; 
&gt; I have fixed this issue. I am attaching the modified files. Try them and
&gt; let me know how it goes. If everything is fine will go ahead and make a
&gt; release along with the fix for defect 77414.
&gt; 
</div>
Unfortunately, this doesn&#39;t quite work:


[dmcbride@naboo mibe]$ db2 list tables for schema cbstats
Table/View                      Schema          Type  Creation time             
------------------------------- --------------- ----- -------------------
-------
KARMA                           CBSTATS         T     2011-05-12-
10.41.19.393540
LOGS                            CBSTATS         T     2011-05-10-
17.18.33.726612
NEWS                            CBSTATS         T     2011-05-10-
15.54.00.716809
REFERU                          CBSTATS         T     2011-05-12-
10.41.19.223724
REFERW                          CBSTATS         T     2011-05-12-
10.41.19.320754
USER                            CBSTATS         T     2011-05-10-
15.54.00.320570

  6 record&#40;s&#41; selected.

[dmcbride@naboo mibe]$ dev_perl -MData::Dumper -MDBI -lE 
&#39;$dbh=DBI-&gt;connect&#40;&#34;dbi:DB2:CBSTATS&#34;&#41; or die $DBI::errstr;$sth=$dbh-
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;table_info&#40;&#34;%&#34;,&#34;CBSTATS&#34;,&#34;%&#34;,&#34;VIEW&#34;&#41;;say Dumper&#40;$sth-
&gt;fetchall_arrayref&#40;&#41;&#41;&#39;
</div>$VAR1 = [];

Note that if I change the CBSTATS to %, I see all the system tables, but 
not any in the CBSTATS schema.  This is definitely somewhat odd even 
though as you can see above there are definitely tables in that schema.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1126935" href="/Public/Bug/Display.html?id=79265#txn-1126935">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;08&nbsp;04:14:40&nbsp;2012</span>
    <span class="description">opendev [...] us.ibm.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1126935/592880/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/592880">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 271b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Darin,

You have specified the table type as VIEW hence the behaviour. Specify
the type as TABLE and you should be able to get the list of tables in
schema CBSTATS.


-- 
Thanks
Praveen
IBM OpenSource Application Development Team
India Software Labs, Bangalore &#40;India&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1126990" href="/Public/Bug/Display.html?id=79265#txn-1126990">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;08&nbsp;09:13:33&nbsp;2012</span>
    <span class="description">dmcbride [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1126990/592908/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/592908">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 473b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Oct 08 04:14:40 2012, IBMTORDB2 wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Darin,
&gt; 
&gt; You have specified the table type as VIEW hence the behaviour. Specify
&gt; the type as TABLE and you should be able to get the list of tables in
&gt; schema CBSTATS.
&gt; 
</div>
Gah!

I really shouldn&#39;t respond to these things after a big turkey dinner.  Thanks, 
you&#39;re right, it works.

&#40;I had most of this in my bash history, so I just made modifications there, but 
apparently didn&#39;t pay attention to the fourth field.&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1127182" href="/Public/Bug/Display.html?id=79265#txn-1127182">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;08&nbsp;23:49:18&nbsp;2012</span>
    <span class="description">opendev [...] us.ibm.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1127182/593006/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/593006">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 232b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yeah, understandable.

I will go ahead and make a release of the new version including this fix
and the for the issue 77414 ASAP


-- 
Thanks
Praveen
IBM OpenSource Application Development Team
India Software Labs, Bangalore &#40;India&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1127624" href="/Public/Bug/Display.html?id=79265#txn-1127624">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;10&nbsp;07:23:38&nbsp;2012</span>
    <span class="description">opendev [...] us.ibm.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1127624/593256/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/593256">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 131b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fix available in version 1.85
-- 
Thanks
Praveen
IBM OpenSource Application Development Team
India Software Labs, Bangalore &#40;India&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1127626" href="/Public/Bug/Display.html?id=79265#txn-1127626">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;10&nbsp;07:23:39&nbsp;2012</span>
    <span class="description">opendev [...] us.ibm.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.599598</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
