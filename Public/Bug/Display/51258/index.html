<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #51258 for RT-Extension-LDAPImport: Collected Patches</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #51258 for RT-Extension-LDAPImport: Collected Patches</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=RT-Extension-LDAPImport">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=RT-Extension-LDAPImport">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=RT-Extension-LDAPImport">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=RT-Extension-LDAPImport">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/RT-Extension-LDAPImport">RT-Extension-LDAPImport CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">51258</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=RT-Extension-LDAPImport">RT-Extension-LDAPImport</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
kiwiroy [...] gmail.com

<br />
nesius [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-44500-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-44501-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




01-usage-statement.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/687713/353991/01-usage-statement.patch">
Mon Nov 09 23:19:17 2009 (755b) by nesius [...] gmail.com
</a>
</font></li>
</ul>


02-import-flag.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/687713/353992/02-import-flag.patch">
Mon Nov 09 23:19:17 2009 (3.4k) by nesius [...] gmail.com
</a>
</font></li>
</ul>


03-multiple-ldap-sources.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/687713/353993/03-multiple-ldap-sources.patch">
Mon Nov 09 23:19:17 2009 (3.7k) by nesius [...] gmail.com
</a>
</font></li>
</ul>


03-multiple-ldap-sources2.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/740974/382993/03-multiple-ldap-sources2.patch">
Mon Mar 01 13:48:18 2010 (3.8k) by jcharaoui [...] cmaisonneuve.qc.ca
</a>
</font></li>
</ul>


04-priv-and-update-flags.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/687713/353994/04-priv-and-update-flags.patch">
Mon Nov 09 23:19:17 2009 (2.9k) by nesius [...] gmail.com
</a>
</font></li>
</ul>


rt-extension-ldapimport_update-priv.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/994980/518125/rt-extension-ldapimport_update-priv.patch">
Wed Nov 02 02:57:01 2011 (1.5k) by https://www.google.com/accounts/o8/id?id=AItOawm6mqN_GWI3FdLYzSWUXoFefrtzwr-SnZk
</a>
</font></li>
</ul>


series<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/687713/353990/series">
Mon Nov 09 23:19:17 2009 (185b) by nesius [...] gmail.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=51258">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-687713" href="/Public/Bug/Display.html?id=51258#txn-687713">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;09&nbsp;23:19:17&nbsp;2009</span>
    <span class="description">nesius [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Fwd: Undelivered Mail Returned to Sender</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 9 Nov 2009 22:18:43 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-rt-extension-ldapimport [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Robert Nesius &lt;nesius [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/687713/353990/series">Download series</a><br />
<span class="downloadcontenttype">application/octet-stream 185b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/687713/353991/01-usage-statement.patch">Download 01-usage-statement.patch</a><br />
<span class="downloadcontenttype">text/x-diff 755b</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/687713/353992/02-import-flag.patch">Download 02-import-flag.patch</a><br />
<span class="downloadcontenttype">text/x-diff 3.4k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/687713/353993/03-multiple-ldap-sources.patch">Download 03-multiple-ldap-sources.patch</a><br />
<span class="downloadcontenttype">text/x-diff 3.7k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/687713/353994/04-priv-and-update-flags.patch">Download 04-priv-and-update-flags.patch</a><br />
<span class="downloadcontenttype">text/x-diff 2.9k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/687713/353988/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/353988">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sending to the right place this time &#40;I hope&#41;.  I&#39;m guessing the original
email address from Jesse had an extra dash in it.

-Rob


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">---------- Forwarded message ----------
From: Mail Delivery System &lt;MAILER-DAEMON@bestpractical.com&gt;
Date: Mon, Nov 9, 2009 at 5:49 PM
Subject: Undelivered Mail Returned to Sender
To: nesius@gmail.com


This is the mail system at host diesel.bestpractical.com.

I&#39;m sorry to have to inform you that your message could not
be delivered to one or more recipients. It&#39;s attached below.

For further assistance, please send mail to postmaster.

If you do so, please include this problem report. You can
delete your own text from the attached returned message.

                  The mail system

&lt;cpan-bug+rt-extension-ldap-import@diesel.bestpractical.com&lt;cpan-bug%2Brt-extension-ldap-import@diesel.bestpractical.com&gt;&gt;
&#40;expanded from
   &lt;bug-rt-extension-ldap-import@rt.cpan.org&gt;&#41;: temporary failure. Command
   output: bayes: cannot write to /opt/filter//.spamassassin/bayes_journal,
   bayes db update ignored: Permission denied RT server error.  The RT
server
   which handled your email did not behave as expected. It said:  temporary
   failure - RT couldn&#39;t find the queue: rt-extension-ldap-import

Final-Recipient: rfc822;
cpan-bug+rt-extension-ldap-import@diesel.bestpractical.com&lt;cpan-bug%2Brt-extension-ldap-import@diesel.bestpractical.com&gt;
Original-Recipient:
rfc822;bug-rt-extension-ldap-import@rt.cpan.org&lt;rfc822%3Bbug-rt-extension-ldap-import@rt.cpan.org&gt;
Action: failed
Status: 4.3.0
Diagnostic-Code: x-unix; bayes: cannot write to
   /opt/filter//.spamassassin/bayes_journal, bayes db update ignored:
   Permission denied RT server error.  The RT server which handled your
email
   did not behave as expected. It said:  temporary failure - RT couldn&#39;t
find
   the queue: rt-extension-ldap-import


<div class="message-stanza open">---------- Forwarded message ----------
From: Robert Nesius &lt;nesius@gmail.com&gt;
To: bug-rt-extension-ldap-import@rt.cpan.org
Date: Wed, 4 Nov 2009 17:05:09 -0600
Subject: Patches for rt-extension-ldap-import
Enclosed.

-Rob

---------------------
These look fairly reasonable. Kevin is nose-down on client work, but
asked me to thank you for them. If you can resend the same message to
bug-rt-extension-ldap-import@rt.cpan.org, that will get them properly
tracked so he can&#39;t escape them when he comes up for air.


Best,
Jesse
</div></div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/687713/353989/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/353989">with headers</a>
<br />
<span class="downloadcontenttype">text/html 3.1k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-687719" href="/Public/Bug/Display.html?id=51258#txn-687719">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;09&nbsp;23:56:00&nbsp;2009</span>
    <span class="description">cpan [...] jibsheet.com -  Subject changed from &#39;Fwd: Undelivered Mail Returned to Sender&#39; to &#39;Collected Patches&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-740974" href="/Public/Bug/Display.html?id=51258#txn-740974">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;01&nbsp;13:48:18&nbsp;2010</span>
    <span class="description">jcharaoui [...] cmaisonneuve.qc.ca -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [rt.cpan.org #51258] Minor adjustments</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 1 Mar 2010 13:47:10 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-rt-extension-ldapimport [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> JÃ©rÃ´me Charaoui &lt;jcharaoui [...] cmaisonneuve.qc.ca&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/740974/382992/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/382992">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 479b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Just to let you know, I&#39;ve successfully tested patches 01, 02 and 03
with RT 3.8.7.

Here is a new version of the 03-multiple-ldap-sources.patch with two
small improvements :

* Added &#34;$importer-&gt;_group&#40;undef&#41;;&#34; at the beginning of the while loop
added by the multiple-ldap-sources.patch, so that each &#34;site&#34; can define
a different group to import into.

* Slight adjustments to the help text.


Thanks,

-- 
JÃ©rÃ´me Charaoui
Service informatique - CollÃ¨ge de Maisonneuve
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/740974/382993/03-multiple-ldap-sources2.patch">Download 03-multiple-ldap-sources2.patch</a><br />
<span class="downloadcontenttype">text/x-diff 3.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Enable rtldapimport to pull from more than one ldapsource.  This is

From:  &lt;&gt;

accomplished by specifying files that are included at runtime by 
require.  File contents and format are exactly what is already 
being put in RT_SiteConfig.pm.  To avoid the messy to type and maintain
&#34;hash of hashes&#34; mess, and also to minimize the changes throughout 
the code, this methodology is &#34;one site per file&#34;.  Some new config 
variables are defined &#40;site names&#41; to make clear what ldapsource
the output is related to. Arguably, rtldapimport&#39;s configs shouldn&#39;t 
be in RT_SiteConfig.pm at all since a production RT install doesn&#39;t 
use them - only this tool, so the option to ignore RT_SiteConfig.pm 
is given.  Otherwise, it is the &#34;default site&#34;.
---

 bin/rtldapimport               |   48 ++++++++++++++++++++++++++++++++--------
 lib/RT/Extension/LDAPImport.pm |    3 +++
 2 files changed, 41 insertions&#40;+&#41;, 10 deletions&#40;-&#41;

diff --git a/bin/rtldapimport b/bin/rtldapimport
index 6148fb5..09900d2 100644
--- a/bin/rtldapimport
+++ b/bin/rtldapimport
@@ -11,13 +11,19 @@ RT::Init;
 
 use RT::Extension::LDAPImport;
 
-my &#40;$debug, $help, $import&#41;;
+my &#40;$debug, $help, $import, @ldap_files, $nositeconfig &#41;;
 use Getopt::Long;
-GetOptions &#40; &#34;debug&#34; =&gt; \$debug, &#34;import&#34; =&gt; \$import, &#34;help&#34; =&gt; \$help &#41;;
+GetOptions &#40; &#34;debug&#34; =&gt; \$debug, &#34;import&#34; =&gt; \$import, &#34;ldapdir=s&#34; =&gt; \@ldap_files,&#34;nositeconfig&#34; =&gt; \$nositeconfig, &#34;help&#34; =&gt; \$help &#41;;
 if &#40;$help&#41; {  
    print &#34;$0: [--debug] [--import] [--ldapdirs=file] [--help]\n&#34;;
    print &#34;   --help           This usage statement.\n&#34;;
    print &#34;   --import         import the identities found in ldap.\n&#34;;
+   print &#34;   --ldapdir file   Specify file containing config directives describing\n&#34;;
+   print &#34;                    an LDAP directory.  Useful when you have multiple\n&#34;;
+   print &#34;                    sources of identities feeding one RT instance.\n&#34;;
+   print &#34;   --nositeconfig   If set, no imports will be performed with default values in\n&#34;;
+   print &#34;                    RT_SiteConfig.pm.  Only settings from files specified\n&#34;;
+   print &#34;                    with --ldapdirs will be consulted.\n&#34;;
    print &#34;   --debug          Enable debugging.\n&#34;;
    exit 0;
 }   
@@ -26,13 +32,36 @@ if &#40;$help&#41; {
 my $importer = RT::Extension::LDAPImport-&gt;new;
 $importer-&gt;screendebug&#40;1&#41; if $debug;
 
-if &#40;$import&#41; {
-    print &#34;Importing... \n&#34;;
-    $importer-&gt;import_users;
-    print &#34;Finished importing. \n&#34;;
-} else {
-    print &#34;Searching... \n&#34;;
-    $importer-&gt;show_users;
-    print &#34;Finished searching. \n&#34;;
+# Do search/import with values defined in RT_SiteConfig.pm
+if &#40;! $nositeconfig&#41; {
+    if &#40;$import&#41; {
+        print &#34;Importing from RT_SiteConfig.pm... \n&#34;;
+        $importer-&gt;import_users;
+        print &#34;Finished importing. \n&#34;;
+    } else {
+        print &#34;Searching from RT_SiteConfig.pm \n&#34;;
+        $importer-&gt;show_users;
+        print &#34;Finished searching. \n&#34;;
+    }
 }
 
+# Perform searches with values defined in config files
+# passed in via command line.
+while &#40;@ldap_files &gt; 0&#41; {
+   require $ldap_files[0];
+   shift @ldap_files;
+   $importer-&gt;_group&#40;undef&#41;;
+
+   if &#40;$import&#41; {
+       print &#34;Importing from $RT::LDAPSite\n&#34;;
+       $importer-&gt;import_users;
+       print &#34;Finished importing from $RT::LDAPSite\n&#34;;
+   } else {
+       print &#34;Searching site $RT::LDAPSite\n&#34;;
+       my $results = $importer-&gt;show_users;
+       print &#34;Finished searching $RT::LDAPSite\n&#34;;
+   }
+
+}
+
+
diff --git a/lib/RT/Extension/LDAPImport.pm b/lib/RT/Extension/LDAPImport.pm
index 4d80914..009cde0 100644
--- a/lib/RT/Extension/LDAPImport.pm
+++ b/lib/RT/Extension/LDAPImport.pm
@@ -471,6 +471,9 @@ sub disconnect_ldap {
 
     $ldap-&gt;unbind;
     $ldap-&gt;disconnect;
+    # This needs to be cleared or import_users will try to 
+    # reuse a connection that&#39;s been torn down. 
+    $self-&gt;_ldap&#40;&#39;&#39;&#41;;
     return;
 }
 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-740977" href="/Public/Bug/Display.html?id=51258#txn-740977">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;01&nbsp;13:48:20&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-741109" href="/Public/Bug/Display.html?id=51258#txn-741109">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;01&nbsp;17:37:49&nbsp;2010</span>
    <span class="description">nesius [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #51258] Minor adjustments</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 1 Mar 2010 16:36:51 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-RT-Extension-LDAPImport [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Robert Nesius &lt;nesius [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/741109/383069/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/383069">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1016b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you!

I believe after I submitted these patches I found a minor thing or two.
I&#39;ll incorporate your changes and review to see what else I should have
included.  I think I missed setting a variable to clear the connection
object after it had been torn down in one spot.    Might take me a few days
to circle back to this based on my meeting schedule.

-Rob

2010/3/1 JÃ©rÃ´me Charaoui via RT &lt;bug-RT-Extension-LDAPImport@rt.cpan.org&gt;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=51258">https://rt.cpan.org/Ticket/Display.html?id=51258</a></span> &gt;
&gt;
&gt; Hi,
&gt;
&gt; Just to let you know, I&#39;ve successfully tested patches 01, 02 and 03
&gt; with RT 3.8.7.
&gt;
&gt; Here is a new version of the 03-multiple-ldap-sources.patch with two
&gt; small improvements :
&gt;
&gt; * Added &#34;$importer-&gt;_group&#40;undef&#41;;&#34; at the beginning of the while loop
&gt; added by the multiple-ldap-sources.patch, so that each &#34;site&#34; can define
&gt; a different group to import into.
&gt;
&gt; * Slight adjustments to the help text.
&gt;
&gt;
&gt; Thanks,
&gt;
&gt; --
&gt; JÃ©rÃ´me Charaoui
&gt; Service informatique - CollÃ¨ge de Maisonneuve
&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/741109/383070/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/383070">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.4k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-803417" href="/Public/Bug/Display.html?id=51258#txn-803417">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;13&nbsp;16:59:44&nbsp;2010</span>
    <span class="description">cpan [...] jibsheet.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> jcharaoui [...] cmaisonneuve.qc.ca</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/803417/416510/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/416510">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Robert

Just to run down what did and didn&#39;t make it into the repo:

There is now a usage statement
By default, it runs in debugging mode rather than importing
I fixed your &#39;undef values from ldap&#39; in a cleaner way - d545deed9e59fcd9acd6dfb49f082fee744d9f27

I won&#39;t be folding in the ldapfiles part.  For now, that can be done with
RT_SITE_CONFIG=/tmp/file rtldapimport
and a config system that better resembles RT-Authen-ExternalAuth and the array of hashes 
of configs is the way to go

There is now a config to only update existing users, I don&#39;t believe that you patched that in, 
but looking through your code made me think about it

I&#39;ve skipped the flag for &#39;update users&#39; from the command line since there is already a config 
for that

Making all users privileged isn&#39;t something most people seem to want, generally only 10% of 
the imported users are privileged.  I could see some &#39;extra attributes&#39; that you could specify 
in the config coming in for users that fit a certain filter and I feel that would be a lot cleaner 
than a command line flag + undocumented config option that makes everyone privileged

You can have a look at github if you&#39;d like to see the current state.  

-kevin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-803420" href="/Public/Bug/Display.html?id=51258#txn-803420">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;13&nbsp;16:59:45&nbsp;2010</span>
    <span class="description">cpan [...] jibsheet.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-803875" href="/Public/Bug/Display.html?id=51258#txn-803875">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;14&nbsp;11:54:05&nbsp;2010</span>
    <span class="description">nesius [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #51258] Collected Patches</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 14 Jul 2010 10:53:56 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-RT-Extension-LDAPImport [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Robert Nesius &lt;nesius [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/803875/416732/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/416732">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I think that&#39;s all good stuff - thanks for spending time with this Kevin.

While &#34;most people&#34; seem to only want 10% of users to be privileged, I found
the divide between privileged and un-privileged users to just be too
jarring.  Every time I tried to use the RT model of &#34;most people
unprivileged&#34; that would manifest an unpleasant side-effect with respect to
how I envisioned people using the system.   So I have everyone privileged by
default and in a group named &#34;employees&#34;, and this tool runs out of cron
every night and pulls new users in seamlessly.  My operating model may be
different than the norm but I think the tool should support it.

This next paragraph is a bit subjective, so take it as my opinion and
something to consider.  I really believe that a command line tool should use
the command line for it&#39;s interface to control it&#39;s behavior.  If a file is
going to assist, then the command-line should define the file.  Using
environment variables to define the file - yeah it works.  But in 12 years
of administrating services in VERY large &#40;world-wide&#41; computing
environments, that methodology has proven to be problematic.   I also don&#39;t
like the idea of changing my site config file for RT - the production
service - to test and implement a tool.  Also - by having the config options
for each source in its own file, I can easily test just that source.  One
time I did have a source that suddenly stopped working.  It was very handy
to use the tool to only work against that single source without altering my
rt site config file, or making a copy of my RT site config and then having
to merge changes back into the production config.  etc...

As for multiple files for multiple sources...  an array of hashes is fine in
the end.   Thanks again for the time you put in on this.  I&#39;m happy to see
the RT community benefit from these improvements.

-Rob





On Tue, Jul 13, 2010 at 3:59 PM, Kevin Falcone via RT &lt;
bug-RT-Extension-LDAPImport@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=51258">https://rt.cpan.org/Ticket/Display.html?id=51258</a></span> &gt;
&gt;
&gt; Hi Robert
&gt;
&gt; Just to run down what did and didn&#39;t make it into the repo:
&gt;
&gt; There is now a usage statement
&gt; By default, it runs in debugging mode rather than importing
&gt; I fixed your &#39;undef values from ldap&#39; in a cleaner way -
&gt; d545deed9e59fcd9acd6dfb49f082fee744d9f27
&gt;
&gt; I won&#39;t be folding in the ldapfiles part.  For now, that can be done with
&gt; RT_SITE_CONFIG=/tmp/file rtldapimport
&gt; and a config system that better resembles RT-Authen-ExternalAuth and the
&gt; array of hashes
&gt; of configs is the way to go
&gt;
&gt; There is now a config to only update existing users, I don&#39;t believe that
&gt; you patched that in,
&gt; but looking through your code made me think about it
&gt;
&gt; I&#39;ve skipped the flag for &#39;update users&#39; from the command line since there
&gt; is already a config
&gt; for that
&gt;
&gt; Making all users privileged isn&#39;t something most people seem to want,
&gt; generally only 10% of
&gt; the imported users are privileged.  I could see some &#39;extra attributes&#39;
&gt; that you could specify
&gt; in the config coming in for users that fit a certain filter and I feel that
&gt; would be a lot cleaner
&gt; than a command line flag + undocumented config option that makes everyone
&gt; privileged
&gt;
&gt; You can have a look at github if you&#39;d like to see the current state.
&gt;
&gt; -kevin
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/803875/416733/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/416733">with headers</a>
<br />
<span class="downloadcontenttype">text/html 3.8k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-803877" href="/Public/Bug/Display.html?id=51258#txn-803877">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;14&nbsp;11:54:07&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-803879" href="/Public/Bug/Display.html?id=51258#txn-803879">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;14&nbsp;12:11:58&nbsp;2010</span>
    <span class="description">kevin [...] jibsheet.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #51258] Collected Patches</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 14 Jul 2010 12:11:35 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Robert Nesius via RT &lt;bug-RT-Extension-LDAPImport [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Falcone &lt;kevin [...] jibsheet.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/803879/416735/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/416735">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Jul 14, 2010 at 11:54:06AM -0400, Robert Nesius via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; While &#34;most people&#34; seem to only want 10% of users to be privileged, I found
&gt; the divide between privileged and un-privileged users to just be too
&gt; jarring.  Every time I tried to use the RT model of &#34;most people
&gt; unprivileged&#34; that would manifest an unpleasant side-effect with respect to
&gt; how I envisioned people using the system.   So I have everyone privileged by
&gt; default and in a group named &#34;employees&#34;, and this tool runs out of cron
&gt; every night and pulls new users in seamlessly.  My operating model may be
&gt; different than the norm but I think the tool should support it.
</div>
As I mentioned, making it configurable makes sense.
Making it be a command line argument that sets an undocumented config
option does not make sense.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This next paragraph is a bit subjective, so take it as my opinion and
&gt; something to consider.  I really believe that a command line tool should use
&gt; the command line for it&#39;s interface to control it&#39;s behavior.  If a file is
&gt; going to assist, then the command-line should define the file.  Using
&gt; environment variables to define the file - yeah it works.  But in 12 years
&gt; of administrating services in VERY large &#40;world-wide&#41; computing
&gt; environments, that methodology has proven to be problematic.   I also don&#39;t
&gt; like the idea of changing my site config file for RT - the production
&gt; service - to test and implement a tool.  Also - by having the config options
&gt; for each source in its own file, I can easily test just that source.  One
&gt; time I did have a source that suddenly stopped working.  It was very handy
&gt; to use the tool to only work against that single source without altering my
&gt; rt site config file, or making a copy of my RT site config and then having
&gt; to merge changes back into the production config.  etc...
</div>
In this case, the tool is meant to be a very simple wrapper around the
RT infrastructure, which leverages the RT config system.  If you
really need a different config file for the tool, you can do that
using plugin etc/ dirs.

Unfortunately, even if we were to support multiple file solution you
proposed, the patch provided couldn&#39;t have been included as written

-kevin

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As for multiple files for multiple sources...  an array of hashes is fine in
&gt; the end.   Thanks again for the time you put in on this.  I&#39;m happy to see
&gt; the RT community benefit from these improvements.
&gt; 
&gt; -Rob
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; On Tue, Jul 13, 2010 at 3:59 PM, Kevin Falcone via RT &lt;
&gt; bug-RT-Extension-LDAPImport@rt.cpan.org&gt; wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=51258">https://rt.cpan.org/Ticket/Display.html?id=51258</a></span> &gt;
&gt; &gt;
&gt; &gt; Hi Robert
&gt; &gt;
&gt; &gt; Just to run down what did and didn&#39;t make it into the repo:
&gt; &gt;
&gt; &gt; There is now a usage statement
&gt; &gt; By default, it runs in debugging mode rather than importing
&gt; &gt; I fixed your &#39;undef values from ldap&#39; in a cleaner way -
&gt; &gt; d545deed9e59fcd9acd6dfb49f082fee744d9f27
&gt; &gt;
&gt; &gt; I won&#39;t be folding in the ldapfiles part.  For now, that can be done with
&gt; &gt; RT_SITE_CONFIG=/tmp/file rtldapimport
&gt; &gt; and a config system that better resembles RT-Authen-ExternalAuth and the
&gt; &gt; array of hashes
&gt; &gt; of configs is the way to go
&gt; &gt;
&gt; &gt; There is now a config to only update existing users, I don&#39;t believe that
&gt; &gt; you patched that in,
&gt; &gt; but looking through your code made me think about it
&gt; &gt;
&gt; &gt; I&#39;ve skipped the flag for &#39;update users&#39; from the command line since there
&gt; &gt; is already a config
&gt; &gt; for that
&gt; &gt;
&gt; &gt; Making all users privileged isn&#39;t something most people seem to want,
&gt; &gt; generally only 10% of
&gt; &gt; the imported users are privileged.  I could see some &#39;extra attributes&#39;
&gt; &gt; that you could specify
&gt; &gt; in the config coming in for users that fit a certain filter and I feel that
&gt; &gt; would be a lot cleaner
&gt; &gt; than a command line flag + undocumented config option that makes everyone
&gt; &gt; privileged
&gt; &gt;
&gt; &gt; You can have a look at github if you&#39;d like to see the current state.
&gt; &gt;
&gt; &gt; -kevin
&gt; &gt;
</div>&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-803896" href="/Public/Bug/Display.html?id=51258#txn-803896">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;14&nbsp;12:46:25&nbsp;2010</span>
    <span class="description">nesius [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #51258] Collected Patches</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 14 Jul 2010 11:46:15 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-RT-Extension-LDAPImport [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Robert Nesius &lt;nesius [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/803896/416748/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/416748">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Jul 14, 2010 at 11:11 AM, Kevin Falcone via RT &lt;
bug-RT-Extension-LDAPImport@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=51258">https://rt.cpan.org/Ticket/Display.html?id=51258</a></span> &gt;
&gt;
&gt; On Wed, Jul 14, 2010 at 11:54:06AM -0400, Robert Nesius via RT wrote:
<div class="message-stanza open">&gt; &gt; While &#34;most people&#34; seem to only want 10% of users to be privileged, I
</div>&gt; found
<div class="message-stanza open">&gt; &gt; the divide between privileged and un-privileged users to just be too
&gt; &gt; jarring.  Every time I tried to use the RT model of &#34;most people
&gt; &gt; unprivileged&#34; that would manifest an unpleasant side-effect with respect
</div>&gt; to
<div class="message-stanza open">&gt; &gt; how I envisioned people using the system.   So I have everyone privileged
</div>&gt; by
<div class="message-stanza open">&gt; &gt; default and in a group named &#34;employees&#34;, and this tool runs out of cron
&gt; &gt; every night and pulls new users in seamlessly.  My operating model may be
&gt; &gt; different than the norm but I think the tool should support it.
</div>&gt;
&gt; As I mentioned, making it configurable makes sense.
&gt;
</div>
I&#39;m confused about what exactly you mean by that.

I think my confusion stems from the following line of thought, which
probably has a false assumption.  This behavior is not configurable now.  So
to make it configurable a config option needs to be created, which is by
definition not documented because it doesn&#39;t exist yet?


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Making it be a command line argument that sets an undocumented config
&gt; option does not make sense.
&gt;
</div>
Well - that was my hack for passing a flag from a command line into a
plug-in, but what about passing an argument to a function being invoked
inside the plug-in?  &#40;I&#39;m just spit-balling here.&#41;   Really - while I have a
strong opinion on style &#40;and command line options&#41; I can roll with whatever
works.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;  &gt; This next paragraph is a bit subjective, so take it as my opinion and
</div><div class="message-stanza open">&gt; &gt; something to consider.  I really believe that a command line tool should
</div>&gt; use
<div class="message-stanza open">&gt; &gt; the command line for it&#39;s interface to control it&#39;s behavior.  If a file
</div>&gt; is
<div class="message-stanza open">&gt; &gt; going to assist, then the command-line should define the file.  Using
&gt; &gt; environment variables to define the file - yeah it works.  But in 12
</div>&gt; years
<div class="message-stanza open">&gt; &gt; of administrating services in VERY large &#40;world-wide&#41; computing
&gt; &gt; environments, that methodology has proven to be problematic.   I also
</div>&gt; don&#39;t
<div class="message-stanza open">&gt; &gt; like the idea of changing my site config file for RT - the production
&gt; &gt; service - to test and implement a tool.  Also - by having the config
</div>&gt; options
<div class="message-stanza open">&gt; &gt; for each source in its own file, I can easily test just that source.  One
&gt; &gt; time I did have a source that suddenly stopped working.  It was very
</div>&gt; handy
<div class="message-stanza open">&gt; &gt; to use the tool to only work against that single source without altering
</div>&gt; my
<div class="message-stanza open">&gt; &gt; rt site config file, or making a copy of my RT site config and then
</div>&gt; having
<div class="message-stanza open">&gt; &gt; to merge changes back into the production config.  etc...
</div>&gt;
&gt; In this case, the tool is meant to be a very simple wrapper around the
&gt; RT infrastructure, which leverages the RT config system.  If you
&gt; really need a different config file for the tool, you can do that
&gt; using plugin etc/ dirs.
&gt;
</div>
Um... hmm.   Intriguing thought about the plugin etc dirs.  Those supersede
the defaults automatically, right?

And I think I can articulate the difference in our perceptions here too now.

You:  the tool is meant to be a very simple wrapper around the RT
infrastructure, which leverages the RT config system.

Me:  Webserver + RT infrastructure + RT Configs = web service.
        rtldapimport tool = identity provisioning system that enables me to
source identity for the web service from ldap.  It uses a running RT
instance incidentally for convenience &#40;really to manipulate users in the
database&#41;.  But it is not my web service, and shouldn&#39;t require me to alter
files related to the configuration of my web service.

Unfortunately, even if we were to support multiple file solution you
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; proposed, the patch provided couldn&#39;t have been included as written
&gt;
</div>
I&#39;m guessing that&#39;s a fail on me then.  Sorry about that. :&#40;

Thanks again for your time, Kevin.  I suspect I&#39;m coming off as being
difficult and mildly irksome, for which I apologize.

-Rob
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/803896/416749/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/416749">with headers</a>
<br />
<span class="downloadcontenttype">text/html 5.1k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-803902" href="/Public/Bug/Display.html?id=51258#txn-803902">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;14&nbsp;12:49:46&nbsp;2010</span>
    <span class="description">kevin [...] jibsheet.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #51258] Collected Patches</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 14 Jul 2010 12:49:39 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Robert Nesius via RT &lt;bug-RT-Extension-LDAPImport [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Falcone &lt;kevin [...] jibsheet.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/803902/416754/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/416754">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 540b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Jul 14, 2010 at 12:46:25PM -0400, Robert Nesius via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; As I mentioned, making it configurable makes sense.
&gt; &gt;
</div>&gt; 
&gt; I&#39;m confused about what exactly you mean by that.
</div>
Allowing users to indicate that imported users should be Privileged
makes sense.

Your implementation using an undocumented config variable set from a
command line option is not code that I would include.

I assume if the config was rewritten to support multiple sources that
adding a &#39;make these users privileged&#39; flag to that would make sense.

-kevin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-803906" href="/Public/Bug/Display.html?id=51258#txn-803906">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;14&nbsp;13:06:09&nbsp;2010</span>
    <span class="description">nesius [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #51258] Collected Patches</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 14 Jul 2010 12:06:01 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-RT-Extension-LDAPImport [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Robert Nesius &lt;nesius [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/803906/416758/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/416758">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 859b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Jul 14, 2010 at 11:49 AM, Kevin Falcone via RT &lt;
bug-RT-Extension-LDAPImport@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=51258">https://rt.cpan.org/Ticket/Display.html?id=51258</a></span> &gt;
&gt;
&gt; On Wed, Jul 14, 2010 at 12:46:25PM -0400, Robert Nesius via RT wrote:
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; As I mentioned, making it configurable makes sense.
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt; I&#39;m confused about what exactly you mean by that.
</div>&gt;
&gt; Allowing users to indicate that imported users should be Privileged
&gt; makes sense.
&gt;
&gt; Your implementation using an undocumented config variable set from a
&gt; command line option is not code that I would include.
&gt;
&gt; I assume if the config was rewritten to support multiple sources that
&gt; adding a &#39;make these users privileged&#39; flag to that would make sense
&gt;
&gt;
</div>Okay - I think I see what you&#39;re saying.  Were you intending to do that or
would you like me to try to come up with something?

-Rob
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/803906/416759/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/416759">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.3k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-803908" href="/Public/Bug/Display.html?id=51258#txn-803908">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;14&nbsp;13:11:58&nbsp;2010</span>
    <span class="description">kevin [...] jibsheet.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #51258] Collected Patches</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 14 Jul 2010 13:11:47 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Robert Nesius via RT &lt;bug-RT-Extension-LDAPImport [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Falcone &lt;kevin [...] jibsheet.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/803908/416761/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/416761">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1014b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Jul 14, 2010 at 01:06:09PM -0400, Robert Nesius via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=51258">https://rt.cpan.org/Ticket/Display.html?id=51258</a></span> &gt;
&gt; &gt;
&gt; &gt; On Wed, Jul 14, 2010 at 12:46:25PM -0400, Robert Nesius via RT wrote:
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; As I mentioned, making it configurable makes sense.
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt; I&#39;m confused about what exactly you mean by that.
</div>&gt; &gt;
&gt; &gt; Allowing users to indicate that imported users should be Privileged
&gt; &gt; makes sense.
&gt; &gt;
&gt; &gt; Your implementation using an undocumented config variable set from a
&gt; &gt; command line option is not code that I would include.
&gt; &gt;
&gt; &gt; I assume if the config was rewritten to support multiple sources that
&gt; &gt; adding a &#39;make these users privileged&#39; flag to that would make sense
&gt; &gt;
&gt; &gt;
</div>&gt; Okay - I think I see what you&#39;re saying.  Were you intending to do that or
&gt; would you like me to try to come up with something?
</div>
My current work will include some configuration related to Privileged
users, but it isn&#39;t clear that it will be a clear-cut grouping like
you want.

-kevin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-994980" href="/Public/Bug/Display.html?id=51258#txn-994980">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;02&nbsp;02:57:01&nbsp;2011</span>
    <span class="description">https://www.google.com/accounts/o8/id?id=AItOawm6mqN_GWI3FdLYzSWUXoFefrtzwr-SnZk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> kiwiroy [...] gmail.com</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/994980/518124/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/518124">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jul 14 13:11:58 2010, kevin@jibsheet.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed, Jul 14, 2010 at 01:06:09PM -0400, Robert Nesius via RT wrote:
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=51258">https://rt.cpan.org/Ticket/Display.html?id=51258</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; On Wed, Jul 14, 2010 at 12:46:25PM -0400, Robert Nesius via RT wrote:
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; As I mentioned, making it configurable makes sense.
&gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I&#39;m confused about what exactly you mean by that.
</div>&gt; &gt; &gt;
&gt; &gt; &gt; Allowing users to indicate that imported users should be Privileged
&gt; &gt; &gt; makes sense.
&gt; &gt; &gt;
&gt; &gt; &gt; Your implementation using an undocumented config variable set from a
&gt; &gt; &gt; command line option is not code that I would include.
&gt; &gt; &gt;
&gt; &gt; &gt; I assume if the config was rewritten to support multiple sources that
&gt; &gt; &gt; adding a &#39;make these users privileged&#39; flag to that would make sense
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt; Okay - I think I see what you&#39;re saying.  Were you intending to do
</div></div>that or
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; would you like me to try to come up with something?
</div>&gt; 
&gt; My current work will include some configuration related to Privileged
&gt; users, but it isn&#39;t clear that it will be a clear-cut grouping like
&gt; you want.
&gt; 
&gt; -kevin
</div>+1 for the update users setting the privileged flag, rather than just on
create &#40;only tested 0.31, but I don&#39;t see a change in 0.31_03&#41;.  I am
using a patched version as per attachment.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> rt-extension-ldapimport_update-priv.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/994980/518125/rt-extension-ldapimport_update-priv.patch">Download rt-extension-ldapimport_update-priv.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff --git a/README b/README
index 7079aee..b7c96d6 100644
--- a/README
+++ b/README
@@ -56,7 +56,8 @@ The LDAP attribute can also be a subroutine reference
 that returns either an arrayref or a list of attributes
 
 By default users are created as Unprivileged, but you can change this by
-setting $LDAPCreatePrivileged to 1.
+setting $LDAPCreatePrivileged to 1.  If the privilege status for users is 
+required to be updated then also set $LDAPUpdateSetsPrivileged to 1.
 
 For more information on these see the import_users documentation
 in RT::Extension::LDAPImport
diff --git a/lib/RT/Extension/LDAPImport.pm b/lib/RT/Extension/LDAPImport.pm
index c6022d7..938456f 100644
--- a/lib/RT/Extension/LDAPImport.pm
+++ b/lib/RT/Extension/LDAPImport.pm
@@ -146,7 +146,8 @@ If it is an arrayref, the values will be concatenated
 together with a single space.
 
 By default users are created as Unprivileged, but you can change this by
-setting $LDAPCreatePrivileged to 1.
+setting $LDAPCreatePrivileged to 1.  If the privilege status for users is 
+required to be updated then also set $LDAPUpdateSetsPrivileged to 1.
 
 =cut
 
@@ -350,6 +351,7 @@ sub create_rt_user {
         if &#40;$RT::LDAPUpdateUsers || $RT::LDAPUpdateOnly&#41; {
             $self-&gt;_debug&#40;&#34;$message, updating their data&#34;&#41;;
             if &#40;$args{import}&#41; {
+		$user-&gt;{&#39;Privileged&#39;} = $RT::LDAPCreatePrivileged if $RT::LDAPUpdateSetsPrivileged;
                 my @results = $user_obj-&gt;Update&#40; ARGSRef =&gt; $user, AttributesRef =&gt; [keys %$user] &#41;;
                 $self-&gt;_debug&#40;join&#40;&#34;\n&#34;,@results&#41;||&#39;no change&#39;&#41;;
             } else {
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-995103" href="/Public/Bug/Display.html?id=51258#txn-995103">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;02&nbsp;10:44:28&nbsp;2011</span>
    <span class="description">nesius [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #51258] Collected Patches</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 2 Nov 2011 09:44:18 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-RT-Extension-LDAPImport [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Robert Nesius &lt;nesius [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/995103/518196/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/518196">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Nov 2, 2011 at 1:57 AM,
<span class="clickylink"><a target="new" rel="nofollow" href="https://www.google.com/accounts/o8/id?id=AItOawm6mqN_GWI3FdLYzSWUXoFefrtzwr-SnZkvia">https://www.google.com/accounts/o8/id?id=AItOawm6mqN_GWI3FdLYzSWUXoFefrtzwr-SnZkvia</a></span>
RT
&lt;bug-RT-Extension-LDAPImport@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=51258">https://rt.cpan.org/Ticket/Display.html?id=51258</a></span> &gt;
&gt;
&gt; +1 for the update users setting the privileged flag, rather than just on
&gt; create &#40;only tested 0.31, but I don&#39;t see a change in 0.31_03&#41;.  I am
&gt; using a patched version as per attachment.
&gt;
&gt;
</div>I found it a bit of irony to see your email today.  I just started
seriously assessing a 3.8.6 -&gt; 4.x migration and was reviewing this ticket
last night and debating how to move forward.  Since I submitted the patches
that Kevin chose from for augmenting rtldapimport, I&#39;m using my patched
version which has many of the command-line flags Kevin turned into config
variables.  I&#39;d prefer to run over whatever Kevin is providing even if the
idea of having multiple RT_SiteConfig.pm files is required to support
multiple ldap sources.

Your timely note and patch may well save me some time - thanks!

Kevin - I&#39;m afraid I never quite grokked the implication of the plugin&#39;s
etc dirs from your earlier email in this thread.  If you could spare a
moment to clarify that, I&#39;d really appreciate it.

Thanks much,

-Rob
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/995103/518197/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/518197">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.7k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-995283" href="/Public/Bug/Display.html?id=51258#txn-995283">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;02&nbsp;18:54:54&nbsp;2011</span>
    <span class="description">falcone [...] bestpractical.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #51258] Collected Patches</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 2 Nov 2011 18:54:52 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Robert Nesius via RT &lt;bug-RT-Extension-LDAPImport [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Falcone &lt;falcone [...] bestpractical.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/995283/518304/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/518304">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 789b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Nov 02, 2011 at 10:44:29AM -0400, Robert Nesius via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Kevin - I&#39;m afraid I never quite grokked the implication of the plugin&#39;s
&gt; etc dirs from your earlier email in this thread.  If you could spare a
&gt; moment to clarify that, I&#39;d really appreciate it.
</div>
I believe the gist of it was that your previous patchset only
contained command line changes that set internal config variables and
never documented any of them or made them available to users to
configure permanently.

New configuration variables should be documented and discrete, like
the patch provided in the previous mail on this ticket which I expect
to apply.

You can also have more config files than just RT_Config.pm and
RT_SiteConfig.pm if you need to store configuration data closer to
the tool.

-kevin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-995286" href="/Public/Bug/Display.html?id=51258#txn-995286">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;02&nbsp;19:04:33&nbsp;2011</span>
    <span class="description">falcone [...] bestpractical.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #51258] Collected Patches</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 2 Nov 2011 19:04:30 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;<span class="clickylink"><a target="new" rel="nofollow" href="https://www.google.com/accounts/o8/id?id=AItOawm6mqN_GWI3FdLYzSWUXoFefrtzwr-SnZk">https://www.google.com/accounts/o8/id?id=AItOawm6mqN_GWI3FdLYzSWUXoFefrtzwr-SnZk</a></span> via RT&#34; &lt;bug-RT-Extension-LDAPImport [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Falcone &lt;falcone [...] bestpractical.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/995286/518307/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/518307">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 789b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Nov 02, 2011 at 02:57:02AM -0400, <span class="clickylink"><a target="new" rel="nofollow" href="https://www.google.com/accounts/o8/id?id=AItOawm6mqN_GWI3FdLYzSWUXoFefrtzwr-SnZk">https://www.google.com/accounts/o8/id?id=AItOawm6mqN_GWI3FdLYzSWUXoFefrtzwr-SnZk</a></span> via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: RT-Extension-LDAPImport
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=51258">https://rt.cpan.org/Ticket/Display.html?id=51258</a></span> &gt;
<div class="message-stanza open">&gt; &gt; My current work will include some configuration related to Privileged
&gt; &gt; users, but it isn&#39;t clear that it will be a clear-cut grouping like
&gt; &gt; you want.
&gt; &gt; 
</div>&gt; +1 for the update users setting the privileged flag, rather than just on
&gt; create &#40;only tested 0.31, but I don&#39;t see a change in 0.31_03&#41;.  I am
&gt; using a patched version as per attachment.
</div>
The change mentioned was LDAPCreatePrivileged which was included in
0.31.

I&#39;ve pushed your changes as a branch with some extra changes on top to
look at before releasing a 0.32.

-kevin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-995298" href="/Public/Bug/Display.html?id=51258#txn-995298">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;02&nbsp;19:22:00&nbsp;2011</span>
    <span class="description">cpan [...] jibsheet.com -  Requestor kiwiroy@gmail.com added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-997106" href="/Public/Bug/Display.html?id=51258#txn-997106">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;14:48:46&nbsp;2011</span>
    <span class="description">http://rnesius.myopenid.com/ -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Robert Nesius</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/997106/519245/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/519245">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Nov 02 18:54:54 2011, falcone@bestpractical.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed, Nov 02, 2011 at 10:44:29AM -0400, Robert Nesius via RT wrote:
<div class="message-stanza open">&gt; &gt; Kevin - I&#39;m afraid I never quite grokked the implication of the plugin&#39;s
&gt; &gt; etc dirs from your earlier email in this thread.  If you could spare a
&gt; &gt; moment to clarify that, I&#39;d really appreciate it.
</div>&gt; 
&gt; I believe the gist of it was that your previous patchset only
&gt; contained command line changes that set internal config variables and
&gt; never documented any of them or made them available to users to
&gt; configure permanently.
</div>
I remember the command line setting a variable inside the module, but
that variable only made sense in the context of the command-line
interface I was offering at the time.  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; New configuration variables should be documented and discrete, like
</div>&gt; the patch provided in the previous mail on this ticket which I expect
&gt; to apply.
</div>
Please forgive what I expect is a beginner-question - does this
basically boil down to documenting the variable in the README?  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; You can also have more config files than just RT_Config.pm and
&gt; RT_SiteConfig.pm if you need to store configuration data closer to
&gt; the tool.
</div>
I think my patch was doing that, though perhaps I could have done it a
little more elegantly.  Are you opposed to a command line interface
similar to what I initially submitted?  I think there&#39;s value there, and
it was very useful while testing my configs, but I&#39;ll ultimately defer
to you on that point.  

Thanks much, 
-Rob
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 1.160932</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
