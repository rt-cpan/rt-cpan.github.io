<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #125267 for ExtUtils-ModuleMaker: modulemaker &#39;-b&#39; switch&#39;s documentation is misleading</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #125267 for ExtUtils-ModuleMaker: modulemaker &#39;-b&#39; switch&#39;s documentation is misleading</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/ExtUtils-ModuleMaker/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/ExtUtils-ModuleMaker/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/ExtUtils-ModuleMaker/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/ExtUtils-ModuleMaker/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/ExtUtils-ModuleMaker">ExtUtils-ModuleMaker CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">125267</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/ExtUtils-ModuleMaker/Active/">ExtUtils-ModuleMaker</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jkeenan [...] pobox.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-12500-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-12501-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.58    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;03&nbsp;15:49:55&nbsp;2018</span>
    <span class="description">jkeenan [...] pobox.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> modulemaker &#39;-b&#39; switch&#39;s documentation is misleading</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 3 May 2018 15:49:37 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-ModuleMaker [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> James E Keenan &lt;jkeenan [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The &#39;modulemaker&#39; help message currently suggests that the &#39;-b&#39; 
command-line switch takes an argument, which would presumably be 
something like &#39;ExtUtils::ModuleMaker&#39; or &#39;Module::Build&#39;.

However, if you provide the former as an argument -- indeed, if you 
provide *any* argument -- you end up with a generated Build.PL:

#####
$ modulemaker -Ic -n Alpha::Beta -a &#34;Test -b option&#34; -b 
ExtUtils::ModuleMaker

-------------------

Module files generated.  Good bye.

$ tree Alpha-Beta/
`--
`--scripts
`--Changes
`--LICENSE
`--Todo
`--MANIFEST
`--README
`--t
|  `--001_load.t
`--lib
|  `--Alpha
|  |  `--Beta.pm
`--Build.PL
#####

#####
$ modulemaker -Ic -n Gamma::Delta -a &#34;Test implausible value for -b 
option&#34; -b Foo::Bar

-------------------

Module files generated.  Good bye.

$ tree Gamma-Delta/
`--
`--scripts
`--Changes
`--LICENSE
`--Todo
`--MANIFEST
`--README
`--t
|  `--001_load.t
`--lib
|  `--Gamma
|  |  `--Delta.pm
`--Build.PL
#####



[modulemaker] 513 $ modulemaker -Ic -n Epsilon::Zeta -a &#34;Test -b option 
with no value&#34; -b

-------------------

Module files generated.  Good bye.

[modulemaker] 514 $ tree Epsilon-Zeta/
`--
`--scripts
`--Changes
`--LICENSE
`--Todo
`--MANIFEST
`--README
`--t
|  `--001_load.t
`--lib
|  `--Epsilon
|  |  `--Zeta.pm
`--Build.PL
#####

If you provide the &#39;-b&#39; switch with no value, you get a Build.PL:

#####
$ modulemaker -Ic -n Epsilon::Zeta -a &#34;Test -b option with no value&#34; -b

-------------------

Module files generated.  Good bye.

[modulemaker] 527 $ tree Epsilon-Zeta
Epsilon-Zeta
`--scripts
`--Changes
`--LICENSE
`--Todo
`--MANIFEST
`--README
`--t
|  `--001_load.t
`--lib
|  `--Epsilon
|  |  `--Zeta.pm
`--Build.PL
#####

So the help message is misleading.

Internally &#40;package ExtUtils::ModuleMaker::Opts&#41;, the options are 
processed by Getopt::Std::getopts&#40;&#41;:

#####
     my %opts;
     getopts&#40; &#34;bhqsCIPVcn:a:v:l:u:p:o:w:e:t:r:d:&#34;, \%opts &#41;;
#####

So &#39;-b&#39; is a simple switch.  Some, presumably non-default action should 
occur when it is provided; the default action should take place 
otherwise.  In this case, the non-default action invoked by &#39;-b&#39; is to 
generate a Build.PL rather than a Makefile.PL.  That&#39;s sensible 
behavior.  So, once that&#39;s confirmed, the help message &#40;and any other 
relevant documentation&#41; should be adjusted to document the actual behavior.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;05&nbsp;08:52:07&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu May 03 15:49:55 2018, jkeenan@pobox.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The &#39;modulemaker&#39; help message currently suggests that the &#39;-b&#39; 
&gt; command-line switch takes an argument, which would presumably be 
&gt; something like &#39;ExtUtils::ModuleMaker&#39; or &#39;Module::Build&#39;.
&gt; 
&gt; However, if you provide the former as an argument -- indeed, if you 
&gt; provide *any* argument -- you end up with a generated Build.PL:
&gt; 
&gt; #####
&gt; $ modulemaker -Ic -n Alpha::Beta -a &#34;Test -b option&#34; -b 
&gt; ExtUtils::ModuleMaker
&gt; 
&gt; -------------------
&gt; 
&gt; Module files generated.  Good bye.
&gt; 
&gt; $ tree Alpha-Beta/
&gt; `--
&gt; `--scripts
&gt; `--Changes
&gt; `--LICENSE
&gt; `--Todo
&gt; `--MANIFEST
&gt; `--README
&gt; `--t
&gt; |  `--001_load.t
&gt; `--lib
&gt; |  `--Alpha
&gt; |  |  `--Beta.pm
&gt; `--Build.PL
&gt; #####
&gt; 
&gt; #####
&gt; $ modulemaker -Ic -n Gamma::Delta -a &#34;Test implausible value for -b 
&gt; option&#34; -b Foo::Bar
&gt; 
&gt; -------------------
&gt; 
&gt; Module files generated.  Good bye.
&gt; 
&gt; $ tree Gamma-Delta/
&gt; `--
&gt; `--scripts
&gt; `--Changes
&gt; `--LICENSE
&gt; `--Todo
&gt; `--MANIFEST
&gt; `--README
&gt; `--t
&gt; |  `--001_load.t
&gt; `--lib
&gt; |  `--Gamma
&gt; |  |  `--Delta.pm
&gt; `--Build.PL
&gt; #####
&gt; 
&gt; 
&gt; 
&gt; [modulemaker] 513 $ modulemaker -Ic -n Epsilon::Zeta -a &#34;Test -b option 
&gt; with no value&#34; -b
&gt; 
&gt; -------------------
&gt; 
&gt; Module files generated.  Good bye.
&gt; 
&gt; [modulemaker] 514 $ tree Epsilon-Zeta/
&gt; `--
&gt; `--scripts
&gt; `--Changes
&gt; `--LICENSE
&gt; `--Todo
&gt; `--MANIFEST
&gt; `--README
&gt; `--t
&gt; |  `--001_load.t
&gt; `--lib
&gt; |  `--Epsilon
&gt; |  |  `--Zeta.pm
&gt; `--Build.PL
&gt; #####
&gt; 
&gt; If you provide the &#39;-b&#39; switch with no value, you get a Build.PL:
&gt; 
&gt; #####
&gt; $ modulemaker -Ic -n Epsilon::Zeta -a &#34;Test -b option with no value&#34; -b
&gt; 
&gt; -------------------
&gt; 
&gt; Module files generated.  Good bye.
&gt; 
&gt; [modulemaker] 527 $ tree Epsilon-Zeta
&gt; Epsilon-Zeta
&gt; `--scripts
&gt; `--Changes
&gt; `--LICENSE
&gt; `--Todo
&gt; `--MANIFEST
&gt; `--README
&gt; `--t
&gt; |  `--001_load.t
&gt; `--lib
&gt; |  `--Epsilon
&gt; |  |  `--Zeta.pm
&gt; `--Build.PL
&gt; #####
&gt; 
&gt; So the help message is misleading.
&gt; 
&gt; Internally &#40;package ExtUtils::ModuleMaker::Opts&#41;, the options are 
&gt; processed by Getopt::Std::getopts&#40;&#41;:
&gt; 
&gt; #####
&gt;      my %opts;
&gt;      getopts&#40; &#34;bhqsCIPVcn:a:v:l:u:p:o:w:e:t:r:d:&#34;, \%opts &#41;;
&gt; #####
&gt; 
&gt; So &#39;-b&#39; is a simple switch.  Some, presumably non-default action should 
&gt; occur when it is provided; the default action should take place 
&gt; otherwise.  In this case, the non-default action invoked by &#39;-b&#39; is to 
&gt; generate a Build.PL rather than a Makefile.PL.  That&#39;s sensible 
&gt; behavior.  So, once that&#39;s confirmed, the help message &#40;and any other 
&gt; relevant documentation&#41; should be adjusted to document the actual behavior.
</div>
Addressed by commit 9f3f963b24bd9ad1846a63e76937388ec3f4440d
#####
Author: James E Keenan &lt;jkeenan@cpan.org&gt;
Date:   Fri May 4 11:00:22 2018 -0400

    RTC 125267:  Correct ambiguity in -b switch.
    
    The &#39;modulemaker&#39; help message heretofore suggested that the &#39;-b&#39; command-line
    switch would take a string argument -- presumably something like
    &#39;ExtUtils::ModuleMaker&#39; or &#39;Module::Build&#39;. However, if you provided *any*
    argument, you ended up with a generated Build.PL.
    
    The problem was that inside ExtUtils::ModuleMaker::Opts&#39;s invocation of
    &#39;getopts&#39;, &#39;-b&#39; was defined as a flag rather than as an option which would
    take an argument.  That meant that providing the &#39;-b&#39; flag would, in
    ExtUtils::ModuleMaker::Interactive set BUILD_SYSTEM to &#39;Module::Build&#39;
    regardless of what you &#40;mistakenly&#41; provided as a value for &#39;-b&#39;.
    
    Here we correct the help message to prevent the user from thinking that
    &#39;-b&#39; takes a value and instruct the user that it directly selects
    Module::Build as the build system.  This is probably what a sophisticated user
    of the &#39;modulemaker&#39; utility would want.  We change code in Interactive.pm and
    Opts.pm to implement this change.  If the user does not suppress the
    INTERACTIVE mode, the user can still call up the Build Menu and change to any
    of the other build system options provided there.
#####
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;05&nbsp;08:52:07&nbsp;2018</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;05&nbsp;08:52:31&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;05&nbsp;08:52:31&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Severity Normal added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;05&nbsp;19:12:31&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sat&nbsp;May&nbsp;05&nbsp;19:12:32&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Fixed in 0.58 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
