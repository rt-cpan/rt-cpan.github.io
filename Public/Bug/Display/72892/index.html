<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #72892 for Text-WikiCreole: extra functions for Text::WikiCreole</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #72892 for Text-WikiCreole: extra functions for Text::WikiCreole</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Text-WikiCreole">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Text-WikiCreole">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Text-WikiCreole">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Text-WikiCreole">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Text-WikiCreole">Text-WikiCreole CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">72892</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">new</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Text-WikiCreole">Text-WikiCreole</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
djh [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-45292-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-45293-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Extra.pm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1006837/524661/Extra.pm">
Fri Dec 02 09:52:38 2011 (6.2k) by djh [...] cpan.org
</a>
</font></li>
</ul>


Table.pm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1006837/524660/Table.pm">
Fri Dec 02 09:52:38 2011 (2.7k) by djh [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=72892">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1006837" href="/Public/Bug/Display.html?id=72892#txn-1006837">#</a>      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;02&nbsp;09:52:38&nbsp;2011</span>
    <span class="description">djh [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> extra functions for Text::WikiCreole</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1006837/524659/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/524659">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 319b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve written a few extra functions for the module, which for the
moment I&#39;ve put into separate modules that I&#39;ve called
Text::WikiCreole::Table and Text::WikiCreole::Extra. I&#39;d like to discuss
the best way to publish the functions to CPAN, but in the meantime I
thought I&#39;d upload them here in case they are of any use.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Table.pm</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1006837/524660/Table.pm">Download Table.pm</a><br />
<span class="downloadcontenttype">text/x-perl 2.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">package Text::WikiCreole::Table;

use strict;
use warnings;

=head1 NAME

Text::WikiCreole::Table - extract Creole tables to CSV files and vice-versa

=cut

our $VERSION = &#39;1.00&#39;;

# 2011-11-23 djh 1.00	Created

#=======================================================================

=head1 DESCRIPTION

This module has methods for converting tables expressed in wiki Creole
syntax, to equivalent tables expressed in CSV syntax.

It uses Text::CSV for CSV manipulation.

=cut

use Text::CSV;


#=======================================================================

=head1 METHODS

=head2 creole_page_to_csv

  $csv_list = Text::WikiCreole::Table-&gt;creole_page_to_csv&#40;$creole_text&#41;;

Reads Creole text supplied as an argument and returns a reference to a
list of the tables found in the text, formatted as CSV.
Each CSV table in the list is a single string.

=cut

sub creole_page_to_csv
{
    my &#40;$self, $text&#41; = @_;

    my @lines = split /\n/, $text;

    my @csv;    # results

    my $collecting_table = 0;
    my @table;
    for my $line &#40;@lines&#41;
    {
        if &#40;$collecting_table&#41;
        {
            if &#40;$line =~ /^\s*\|/&#41;
            {
                push @table, $line;
            }
            else                    # last line of table
            {
                push @csv, creole_table_to_csv&#40;\@table&#41;;
                $collecting_table = 0;
            }
        }
        else
        {
            if &#40;$line =~ /^\s*\|/&#41;   # first line of table
            {
                @table = &#40; $line &#41;;
                $collecting_table = 1;
            }
        }
    }

    return @csv ? \@csv : undef;
}


#=======================================================================

=head2 parse_creole_table

Convert a table expressed in Creole wiki markup to CSV format.

  $csv_text = creole_table_to_csv&#40;\@table&#41;;

The argument is a reference to an array of lines of Creole wikitext,
which must represent a table. The function returns a text string which
contains the same table in CSV format.

=cut

sub creole_table_to_csv
{
    my &#40;$creole_lines&#41; = @_;

    my $csv = Text::CSV-&gt;new&#40;{ binary =&gt; 1 }&#41;
      or die &#34;Cannot use CSV: &#34;.Text::CSV-&gt;error_diag &#40;&#41;;

    my $csv_text = &#39;&#39;;

    for my $line &#40;@$creole_lines&#41;
    {
        my @columns;
        my @headers;
        while &#40;$line =~ /\s*&#40;\|=?&#41;&#40;.*?&#41;&#40;?=\|&#41;/g&#41;
        {
            my $h    = $1;
            my $cell = $2;
            push @headers, &#40;$h eq &#39;|=&#39; ? 1 : 0&#41;;
            push @columns, $cell;
        }

        $csv-&gt;combine&#40;@columns&#41;
          or die &#34;Cannot change &#39;$line&#39; to CSV: &#34;.Text::CSV-&gt;error_diag &#40;&#41;;;
        $csv_text .= $csv-&gt;string . &#34;\n&#34;;
    }

    return $csv_text;
}


#=======================================================================

1;
# vim:et sts=4 sw=4 tw=0:
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Extra.pm</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1006837/524661/Extra.pm">Download Extra.pm</a><br />
<span class="downloadcontenttype">text/x-perl 6.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">package Text::WikiCreole::Extra;

use strict;
use warnings;

=head1 NAME

Text::WikiCreole::Extra - Additional functionality for Creole pages

=cut

our $VERSION = &#39;1.01&#39;;

# 2011-11-23 djh 1.00   Created
# 2011-12-01 djh 1.01   Added Exporter

#=======================================================================

=head1 SYNOPSIS

  require Text::WikiCreole::Extra; # or use instead of require
  ...
  $toc = Text::WikiCreole::Extra::creole_toc&#40;$content, $options&#41;;

or

  use Text::WikiCreole::Extra qw&#40;creole_toc&#41;;
  ...
  $toc = creole_toc&#40;$content, $options&#41;;


=head1 DESCRIPTION

Text::WikiCreole::Extra implements some additional functions for use
when processing Creole 1.0 wiki markup with L&lt;Text::WikiCreole&gt;.
The functions can generate a table of contents for a wiki page,
or scan the image files that appear on a page.

For compatibility with the style of L&lt;Text::WikiCreole&gt; these are
functions rather than methods. It is possible to export each of the
function names, but by contrast with L&lt;Text::WikiCreole&gt; the names are
not exported by default.

=cut

use Exporter qw&#40;import&#41;;
our @EXPORT_OK = qw&#40;creole_toc creole_toc_scan toc_format
                creole_get_image_references&#41;;


#=======================================================================

=head1 FUNCTIONS

=head2 creole_toc

Create an HTML table of contents for a Creole page.

  $html = creole_toc&#40;$content, $options&#41;;

Takes as arguments a C&lt;$content&gt; string representing a Creole page and a
hash reference of C&lt;$options&gt; to format the table of contents.

This function is a simple wrapper around creole_toc_scan&#40;&#41; and toc_format&#40;&#41;.
See their documentation for further details of the arguments.

=cut

sub creole_toc
{
    my &#40;$content, $options&#41; = @_;

    return toc_format&#40;creole_toc_scan&#40;$content&#41;, $options&#41;;
}


#=======================================================================

=head2 creole_toc_scan

Produce an array summarising the section headings in a Creole page.

  $toc = creole_toc_scan&#40;$creole_text_string&#41;;

The returned value is a reference to a list of pairs.
Each pair is a reference to a two-element list;
the first element in the list is the I&lt;level&gt; of a heading,
and the second element is the text of that heading.

The heading I&lt;level&gt; is a small number, representing the number of
C&lt;=&gt; characters in front of the heading text.

The headings are listed in document order.

=cut

sub creole_toc_scan
{
    my &#40;$content&#41; = @_;

    my @content = split &#34;\n&#34;, $content;

    my @toc;

    for my $line &#40;@content&#41;
    {
        my &#40;$left, $text, $right&#41; = $line =~ /^\s*&#40;=+&#41;\s*&#40;.+?&#41;\s*&#40;=+&#41;\s*$/;
        next unless $right;
        warn &#34;Mismatched equals at &#39;$line&#39; left=&#39;$left&#39; right=&#39;$right&#39;\n&#34;
          if $left ne $right;

        my $level = length $left;

        push @toc, [$level, $text];
    }

    return \@toc;
}


#=======================================================================

=head2 toc_format

Format an HTML table of contents, given a list of section headings.

  $html = toc_format&#40;$toc, $options&#41;;

This function takes a reference to a list of section headings, as
produced by creole_toc_scan&#40;&#41;, and produces a formatted HTML representation
of the list. The output is influenced by various options, which are the
elements of the hash referenced as an argument:

=over 4

=item levels

The level-number of the least important heading to include in the table
of contents. The default is 3. &#40;i.e. I&lt;=== A third-level heading ===&gt;&#41;

=item title

The text to appear as the title of the table of contents.
The default is I&lt;&#39;Table of Contents&#39;&gt;.

=back

The output is not an HTML table, but is a sequence of C&lt;div&gt; elements.

  &lt;div id=&#34;toctitle&#34;&gt;your title here&lt;/div&gt;
  &lt;div class=&#34;tocbox&#34;&gt;
  &#38;nbsp;&lt;div class=&#34;tocline&#34;&gt;&lt;a href=&#34;#tag&#34;&gt;heading text&lt;/a&gt;&lt;/div&gt;
  &lt;/div&gt;

The appearance can be changed by writing CSS for the various classes of
C&lt;div&gt; elements. Redefine this function if larger changes are needed.

The HTML fragment identifiers &#40;e.g. C&lt;#tag&gt;&#41; should be inserted as
anchors in the text of the actual headings. This can be done by
adjusting the C&lt;$Text::WikiCreole::chunks{&#34;h1&#34;}-&gt;{filter}&gt; callback
for the relevant heading levels. For example:

  sub _creole_h_filter {
    # arg is text of header element
    &#38;Text::WikiCreole::strip_head_eq;
    &#40;my $tag = $_[0]&#41; =~ tr/ /_/;
    my $top  = &#39;&lt;a href=&#34;#top&#34; class=&#34;top&#34;&gt;^&lt;/a&gt;&#38;nbsp;&#39;;
    $_[0]    = &#34;&lt;a name=\&#34;$tag\&#34;&gt;&lt;/a&gt;$top$_[0]&#34;;
  }

  for &#40;1..6&#41; {
    $Text::WikiCreole::chunks{&#34;h$_&#34;}-&gt;{filter} = \&#38;_creole_h_filter;
  }

=cut

sub toc_format
{
    my &#40;$toc, $options&#41; = @_;

    my $maxlevels = $options-&gt;{levels} || 3;

    my $title   = &#39;&lt;div id=&#34;toctitle&#34;&gt;&#39;
                . &#40;$options-&gt;{title} || &#39;Table of Contents&#39;&#41;
                . &#34;&lt;/div&gt;\n&#34;;

    my $html = &#39;&#39;;

    $html .= &#39;&lt;div class=&#34;tocbox&#34;&gt;&#39;;
    $html .= $title;

    for my $heading &#40;@$toc&#41;
    {
        my $level   = $heading-&gt;[0];
        next if $level &gt; $maxlevels;
        my $text    = $heading-&gt;[1];
        my $indent  = &#39;&#38;nbsp;&#39; x &#40;$level * 2&#41;;
        &#40;my $tag = $text&#41; =~ s/ /_/g;

        $html .= &#39;&lt;div class=&#34;tocline&#34;&gt;&#39; . $indent
                . &#39;&lt;a href=&#34;#&#39; . $tag . &#39;&#34;&gt;&#39; . $text . &#39;&lt;/a&gt;&#39;
                . &#34;&lt;/div&gt;\n&#34;;
    }

    $html .= &#34;&lt;/div&gt;\n\n&#34;;
}


#=======================================================================

=head2 creole_get_image_references

Scan a Creole page for references to images.

  $images = creole_get_image_references&#40;$text&#41;;

This function returns a reference to a list of the names of image files
that appear on the page. The list contains the filenames in the order
that they occur on the page and will contain the same name multiple
times if the image occurs more than once on the page.

The argument is the content from a Creole wiki page.

=cut

sub creole_get_image_references
{
    my &#40;$text&#41; = @_;

    my @images = $text =~ /\{\{\s*&#40;[^\{][^\n]*?&#41;\}\}/g;
    return unless @images;

    for my $image &#40;@images&#41;
    {
        $image =~ s/\s*\|.*//;
    }

    return \@images;
}


#=======================================================================

1;

__END__

=head1 COPYRIGHT &#38; LICENSE

Copyright 2011 Dave Howorth  C&lt;&lt; &lt;djh@cpan.org&gt; &gt;&gt;

This program is free software; you can redistribute it and/or modify it
under the same terms as Perl itself or under the terms of the GPL.

# vim:et sts=4 sw=4 tw=0:
</div></div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.285582</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
