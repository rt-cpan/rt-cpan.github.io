<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #114544 for Data-Alias: Compilation failure with perl 5.25.1 &#40;&#39;OP&#39; has no member named &#39;op_sibling&#39;&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #114544 for Data-Alias: Compilation failure with perl 5.25.1 &#40;&#39;OP&#39; has no member named &#39;op_sibling&#39;&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Data-Alias/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Data-Alias/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Data-Alias/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Data-Alias/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Data-Alias">Data-Alias CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">114544</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Data-Alias/Active/">Data-Alias</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
SREZIC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-8918-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.20    </td>
  </tr>
  <tr id="CF-8919-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;21&nbsp;05:49:32&nbsp;2016</span>
    <span class="description">SREZIC [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Compilation failure with perl 5.25.1 &#40;&#39;OP&#39; has no member named
 &#39;op_sibling&#39;&#41;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Build output:

cc -c   -fwrapv -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_FORTIFY_SOURCE=2 -O2   -DVERSION=\&#34;1.20\&#34; -DXS_VERSION=\&#34;1.20\&#34; -fPIC &#34;-I/opt/perl-5.25.1/lib/5.25.1/x86_64-linux/CORE&#34;   Alias.c
Alias.xs: In function &#39;da_lvalue&#39;:
Alias.xs:1551:11: error: &#39;OP&#39; has no member named &#39;op_sibling&#39;
    op = op-&gt;op_sibling;
           ^
Alias.xs:1556:18: error: &#39;OP&#39; has no member named &#39;op_sibling&#39;
   while &#40;&#40;op = op-&gt;op_sibling&#41;&#41;
                  ^
Alias.xs:1563:12: error: &#39;OP&#39; has no member named &#39;op_sibling&#39;
   while &#40;op-&gt;op_sibling&#41;
            ^
Alias.xs:1564:11: error: &#39;OP&#39; has no member named &#39;op_sibling&#39;
    op = op-&gt;op_sibling;
           ^
Alias.xs: In function &#39;da_aassign&#39;:
Alias.xs:1605:30: error: &#39;OP&#39; has no member named &#39;op_sibling&#39;
...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;07&nbsp;17:22:57&nbsp;2016</span>
    <span class="description">dcollinsn [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> dcollinsn [...] gmail.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">After running into this issue with another module, I did a grep.cpan.me and found that you too are still accessing the struct field op_sibling by name. This means that this module will not build against any perl built with -DPERL_OP_PARENT, which is currently the default in blead, and will likely be the default for 5.26.0.

The attached patches use the new macro, OpSIBLING, wherever necessary, and uses the new setter macro - Op_MORESIB_set - whereever OpSIBLING would have been used as an lvalue. The patches also provide those macros when needed, which they are in older perls. Your alternative is to use ppport.h from a recent &#40;&gt;3.33&#41; version of Devel::PPPort.

These patches allow Data::Alias to build on my machine, which is an improvement, but all tests still fail due to [cpan #112289].
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0004-cpan-114544-Conditionally-provide-OpMORESIB_set.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 5d2c175e9ca83ec184f26ea60a00164cbbd3a4fc Mon Sep 17 00:00:00 2001
From: Dan Collins &lt;dcollinsn@gmail.com&gt;
Date: Tue, 7 Jun 2016 13:54:07 -0400
Subject: [PATCH 4/6] [cpan #114544] Conditionally provide OpMORESIB_set

Because the OpMORESIB_set macro may not be available in old perls,
we should also define it ourselves, using the non-PERL_OP_PARENT
version of the macro &#40;as the macro will always be provided under
PERL_OP_PARENT&#41;.
---
 Alias.xs | 6 ++++++
 1 file changed, 6 insertions&#40;+&#41;

diff --git a/Alias.xs b/Alias.xs
index f5bdb5e..24dcc0e 100644
--- a/Alias.xs
+++ b/Alias.xs
@@ -251,6 +251,12 @@ STATIC OP *&#40;*da_old_ck_helem&#41;&#40;pTHX_ OP *op&#41;;
 #ifndef OpSIBLING
 #define OpSIBLING&#40;o&#41; &#40;0 + &#40;o&#41;-&gt;op_sibling&#41;
 #endif
+/* Likewise, while old perls allow using OpSIBLING&#40;o&#41; as an lvalue, new
+   perls need a setter macro. If we&#39;re going to use a setter for new perls,
+   we need to provide it in case old perls don&#39;t have it. */
+#ifndef OpMORESIB_set
+#define OpMORESIB_set&#40;o, sib&#41; &#40;&#40;o&#41;-&gt;op_moresib = 1, &#40;o&#41;-&gt;op_sibling = &#40;sib&#41;&#41;
+#endif
 
 #ifdef USE_ITHREADS
 
-- 
2.8.1

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0002-cpan-114544-Replace-lvalue-OpSIBLING-with-OpMORESIB_.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 4112d5043d79450abdd51547a2b2245227b6be13 Mon Sep 17 00:00:00 2001
From: Dan Collins &lt;dcollinsn@gmail.com&gt;
Date: Tue, 7 Jun 2016 15:33:43 -0400
Subject: [PATCH 2/6] [cpan #114544] Replace lvalue OpSIBLING&#40;&#41; with
 OpMORESIB_set

Because the new OpSIBLING macro cannot be used as an lvalue, we need
to use the setter macro from op.h.
---
 Alias.xs | 4 ++--
 1 file changed, 2 insertions&#40;+&#41;, 2 deletions&#40;-&#41;

diff --git a/Alias.xs b/Alias.xs
index 383767e..6fa8aa5 100644
--- a/Alias.xs
+++ b/Alias.xs
@@ -1831,7 +1831,7 @@ STATIC void da_peep2&#40;pTHX_ OP *o&#41; {
 	if &#40;!&#40;sib = cUNOPx&#40;fk&#41;-&gt;op_first&#41; || sib-&gt;op_ppaddr != da_tag_rv2cv&#41; {
 		Perl_warn&#40;aTHX_ &#34;da peep weirdness 1&#34;&#41;;
 	} else {
-		OpSIBLING&#40;k&#41; = sib;
+		OpMORESIB_set&#40;k, sib&#41;;
 		cLISTOPo-&gt;op_last = sib;
 		if &#40;!&#40;k = sib-&gt;op_next&#41; || k-&gt;op_ppaddr != da_tag_entersub&#41; {
 			Perl_warn&#40;aTHX_ &#34;da peep weirdness 2&#34;&#41;;
@@ -2050,7 +2050,7 @@ STATIC OP *da_ck_entersub&#40;pTHX_ OP *o&#41; {
 	kUNOP-&gt;op_first = last;
 	while &#40;OpSIBLING&#40;kid&#41; != last&#41;
 		kid = OpSIBLING&#40;kid&#41;;
-	OpSIBLING&#40;kid&#41; = Nullop;
+	OpMORESIB_set&#40;kid, Nullop&#41;;
 	cLISTOPx&#40;cUNOPo-&gt;op_first&#41;-&gt;op_last = kid;
 	if &#40;kid-&gt;op_type == OP_NULL &#38;&#38; inside&#41;
 		kid-&gt;op_flags &#38;= ~OPf_SPECIAL;
-- 
2.8.1

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0003-cpan-114544-Conditionally-provide-OpSIBLING.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">From be57b2ca162cfbd60148bee2cf277c3749de1a46 Mon Sep 17 00:00:00 2001
From: Dan Collins &lt;dcollinsn@gmail.com&gt;
Date: Tue, 7 Jun 2016 13:44:43 -0400
Subject: [PATCH 3/6] [cpan #114544] Conditionally provide OpSIBLING

We also need to provide OpSIBLING, since it is not available on older
perls. This is either an integral part of the patch, if you intend
to push it immediately to begin passing on blead, or a temporary fix,
if you intend to use ppport.h from Devel::PPPort 3.33 or later,
which provides exactly this.
---
 Alias.xs | 8 ++++++++
 1 file changed, 8 insertions&#40;+&#41;

diff --git a/Alias.xs b/Alias.xs
index 6fa8aa5..f5bdb5e 100644
--- a/Alias.xs
+++ b/Alias.xs
@@ -244,6 +244,14 @@ STATIC OP *&#40;*da_old_ck_aelem&#41;&#40;pTHX_ OP *op&#41;;
 STATIC OP *&#40;*da_old_ck_helem&#41;&#40;pTHX_ OP *op&#41;;
 #endif
 
+/* op-&gt;op_sibling is deprecated on new perls, but the OpSIBLING macro doesn&#39;t
+   exist on older perls. We don&#39;t need to check for PERL_OP_PARENT here
+   because if PERL_OP_PARENT was set, and we needed to check op_moresib,
+   we would already have this macro. */
+#ifndef OpSIBLING
+#define OpSIBLING&#40;o&#41; &#40;0 + &#40;o&#41;-&gt;op_sibling&#41;
+#endif
+
 #ifdef USE_ITHREADS
 
 #define DA_GLOBAL_KEY &#34;Data::Alias::_global&#34;
-- 
2.8.1

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0001-cpan-114544-Replace-usage-of-op_sibling-with-OpSIBLI.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">From f63cca29f525f90002fa3a54e69b26a10879d3bb Mon Sep 17 00:00:00 2001
From: Dan Collins &lt;dcollinsn@gmail.com&gt;
Date: Tue, 7 Jun 2016 13:44:20 -0400
Subject: [PATCH 1/6] [cpan #114544] Replace usage of op_sibling with
 OpSIBLING&#40;&#41;
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

The Perl core, since 586d4abb8, has had a build mode called
PERL_OP_PARENT, which causes the last sibling in a sibling chain to use
op_sibling to point to the parent, rather than being null. Under this
build mode, op_sibling is now called op_sibparent. This causes errors
of the type:

error: âOP {aka const struct op}â has no member named âop_siblingâ; did
you mean âop_sibparentâ?

The name of the field was changed to force programs using op_sibling to
revisit their code in light of this change - now, the last sibling in
a chain will have a non-NULL op_sibparent, and the caller must use
op_moresib to know whether the pointer is to another sibling or to
the parent.

This breakage is now visible in bleadperl, since PERL_OP_PARENT was
made default, and will be default in 5.26.0.

op.h provides a macro, OpSIBLING&#40;o&#41;, which behaves correctly, checking
op-&gt;moresib under PERL_OP_PARENT, and returning either op_sibparent or
NULL. This patch replaces op_sibling with use that macro.
---
 Alias.xs | 58 +++++++++++++++++++++++++++++-----------------------------
 1 file changed, 29 insertions&#40;+&#41;, 29 deletions&#40;-&#41;

diff --git a/Alias.xs b/Alias.xs
index a1f7868..383767e 100644
--- a/Alias.xs
+++ b/Alias.xs
@@ -1548,20 +1548,20 @@ STATIC void da_lvalue&#40;pTHX_ OP *op, int list&#41; {
 		op = &#40;op-&gt;op_flags &#38; OPf_KIDS&#41; ? cUNOPx&#40;op&#41;-&gt;op_first : NULL;
 		while &#40;op&#41; {
 			da_lvalue&#40;aTHX_ op, list&#41;;
-			op = op-&gt;op_sibling;
+			op = OpSIBLING&#40;op&#41;;
 		}
 		break;
 	case OP_COND_EXPR:
 		op = cUNOPx&#40;op&#41;-&gt;op_first;
-		while &#40;&#40;op = op-&gt;op_sibling&#41;&#41;
+		while &#40;&#40;op = OpSIBLING&#40;op&#41;&#41;&#41;
 			da_lvalue&#40;aTHX_ op, list&#41;;
 		break;
 	case OP_SCOPE:
 	case OP_LEAVE:
 	case OP_LINESEQ:
 		op = &#40;op-&gt;op_flags &#38; OPf_KIDS&#41; ? cUNOPx&#40;op&#41;-&gt;op_first : NULL;
-		while &#40;op-&gt;op_sibling&#41;
-			op = op-&gt;op_sibling;
+		while &#40;OpSIBLING&#40;op&#41;&#41;
+			op = OpSIBLING&#40;op&#41;;
 		da_lvalue&#40;aTHX_ op, list&#41;;
 		break;
 	case OP_PUSHMARK:
@@ -1602,13 +1602,13 @@ STATIC void da_aassign&#40;OP *op, OP *right&#41; {
 	int hash = FALSE, pad;
 
 	/* make sure it fits the model exactly */
-	if &#40;!right || !&#40;left = right-&gt;op_sibling&#41; || left-&gt;op_sibling&#41;
+	if &#40;!right || !&#40;left = OpSIBLING&#40;right&#41;&#41; || OpSIBLING&#40;left&#41;&#41;
 		return;
 	if &#40;left-&gt;op_type || !&#40;left-&gt;op_flags &#38; OPf_KIDS&#41;&#41;
 		return;
 	if &#40;!&#40;left = cUNOPx&#40;left&#41;-&gt;op_first&#41; || !IS_PUSHMARK_OR_PADRANGE&#40;left&#41;&#41;
 		return;
-	if &#40;!&#40;la = left-&gt;op_sibling&#41; || la-&gt;op_sibling&#41;
+	if &#40;!&#40;la = OpSIBLING&#40;left&#41;&#41; || OpSIBLING&#40;la&#41;&#41;
 		return;
 	if &#40;la-&gt;op_flags &#38; OPf_PARENS&#41;
 		return;
@@ -1634,7 +1634,7 @@ STATIC void da_aassign&#40;OP *op, OP *right&#41; {
 			right-&gt;op_ppaddr = DataAlias_pp_padrange_single;
 #endif
 	}
-	if &#40;!&#40;ra = right-&gt;op_sibling&#41; || ra-&gt;op_sibling&#41;
+	if &#40;!&#40;ra = OpSIBLING&#40;right&#41;&#41; || OpSIBLING&#40;ra&#41;&#41;
 		return;
 	if &#40;ra-&gt;op_flags &#38; OPf_PARENS&#41;
 		return;
@@ -1741,7 +1741,7 @@ STATIC int da_transform&#40;pTHX_ OP *op, int sib&#41; {
 				da_lvalue&#40;aTHX_ tmp, TRUE&#41;;
 			else
 #endif
-				da_lvalue&#40;aTHX_ kid-&gt;op_sibling, TRUE&#41;;
+				da_lvalue&#40;aTHX_ OpSIBLING&#40;kid&#41;, TRUE&#41;;
 			break;
 		case OP_SASSIGN:
 
@@ -1749,7 +1749,7 @@ STATIC int da_transform&#40;pTHX_ OP *op, int sib&#41; {
 			MOD&#40;kid&#41;;
 			ksib = FALSE;
 			if &#40;!&#40;op-&gt;op_private &#38; OPpASSIGN_BACKWARDS&#41;&#41;
-				da_lvalue&#40;aTHX_ kid-&gt;op_sibling, FALSE&#41;;
+				da_lvalue&#40;aTHX_ OpSIBLING&#40;kid&#41;, FALSE&#41;;
 			break;
 		case OP_ANDASSIGN:
 			op-&gt;op_ppaddr = DataAlias_pp_andassign;
@@ -1762,39 +1762,39 @@ STATIC int da_transform&#40;pTHX_ OP *op, int sib&#41; {
 			op-&gt;op_ppaddr = DataAlias_pp_dorassign;
 #endif
 			da_lvalue&#40;aTHX_ kid, FALSE&#41;;
-			kid = kid-&gt;op_sibling;
+			kid = OpSIBLING&#40;kid&#41;;
 			break;
 		case OP_UNSHIFT:
-			if &#40;!&#40;tmp = kid-&gt;op_sibling&#41;&#41; break; /* array */
-			if &#40;!&#40;tmp = tmp-&gt;op_sibling&#41;&#41; break; /* first elem */
+			if &#40;!&#40;tmp = OpSIBLING&#40;kid&#41;&#41;&#41; break; /* array */
+			if &#40;!&#40;tmp = OpSIBLING&#40;tmp&#41;&#41;&#41; break; /* first elem */
 			op-&gt;op_ppaddr = DataAlias_pp_unshift;
 			goto mod;
 		case OP_PUSH:
-			if &#40;!&#40;tmp = kid-&gt;op_sibling&#41;&#41; break; /* array */
-			if &#40;!&#40;tmp = tmp-&gt;op_sibling&#41;&#41; break; /* first elem */
+			if &#40;!&#40;tmp = OpSIBLING&#40;kid&#41;&#41;&#41; break; /* array */
+			if &#40;!&#40;tmp = OpSIBLING&#40;tmp&#41;&#41;&#41; break; /* first elem */
 			op-&gt;op_ppaddr = DataAlias_pp_push;
 			goto mod;
 		case OP_SPLICE:
-			if &#40;!&#40;tmp = kid-&gt;op_sibling&#41;&#41; break; /* array */
-			if &#40;!&#40;tmp = tmp-&gt;op_sibling&#41;&#41; break; /* offset */
-			if &#40;!&#40;tmp = tmp-&gt;op_sibling&#41;&#41; break; /* length */
-			if &#40;!&#40;tmp = tmp-&gt;op_sibling&#41;&#41; break; /* first elem */
+			if &#40;!&#40;tmp = OpSIBLING&#40;kid&#41;&#41;&#41; break; /* array */
+			if &#40;!&#40;tmp = OpSIBLING&#40;tmp&#41;&#41;&#41; break; /* offset */
+			if &#40;!&#40;tmp = OpSIBLING&#40;tmp&#41;&#41;&#41; break; /* length */
+			if &#40;!&#40;tmp = OpSIBLING&#40;tmp&#41;&#41;&#41; break; /* first elem */
 			op-&gt;op_ppaddr = DataAlias_pp_splice;
 			goto mod;
 		case OP_ANONLIST:
-			if &#40;!&#40;tmp = kid-&gt;op_sibling&#41;&#41; break; /* first elem */
+			if &#40;!&#40;tmp = OpSIBLING&#40;kid&#41;&#41;&#41; break; /* first elem */
 			op-&gt;op_ppaddr = DataAlias_pp_anonlist;
 			goto mod;
 		case OP_ANONHASH:
-			if &#40;!&#40;tmp = kid-&gt;op_sibling&#41;&#41; break; /* first elem */
+			if &#40;!&#40;tmp = OpSIBLING&#40;kid&#41;&#41;&#41; break; /* first elem */
 			op-&gt;op_ppaddr = DataAlias_pp_anonhash;
-		 mod:	do MOD&#40;tmp&#41;; while &#40;&#40;tmp = tmp-&gt;op_sibling&#41;&#41;;
+		 mod:	do MOD&#40;tmp&#41;; while &#40;&#40;tmp = OpSIBLING&#40;tmp&#41;&#41;&#41;;
 		}
 
-		if &#40;sib &#38;&#38; op-&gt;op_sibling&#41; {
+		if &#40;sib &#38;&#38; OpSIBLING&#40;op&#41;&#41; {
 			if &#40;kid&#41;
 				hits += da_transform&#40;aTHX_ kid, ksib&#41;;
-			op = op-&gt;op_sibling;
+			op = OpSIBLING&#40;op&#41;;
 		} else {
 			op = kid;
 			sib = ksib;
@@ -1808,7 +1808,7 @@ STATIC void da_peep2&#40;pTHX_ OP *o&#41; {
 	OP *sib, *k, *fk;
 	int useful;
 	while &#40;o-&gt;op_ppaddr != da_tag_list&#41; {
-		while &#40;&#40;sib = o-&gt;op_sibling&#41;&#41; {
+		while &#40;&#40;sib = OpSIBLING&#40;o&#41;&#41;&#41; {
 			if &#40;&#40;o-&gt;op_flags &#38; OPf_KIDS&#41; &#38;&#38; &#40;k = cUNOPo-&gt;op_first&#41;&#41;{
 				da_peep2&#40;aTHX_ k&#41;;
 			} else switch &#40;o-&gt;op_type ? o-&gt;op_type : o-&gt;op_targ&#41; {
@@ -1826,12 +1826,12 @@ STATIC void da_peep2&#40;pTHX_ OP *o&#41; {
 	op_null&#40;o&#41;;
 	o-&gt;op_ppaddr = PL_ppaddr[OP_NULL];
 	k = fk = cLISTOPo-&gt;op_first;
-	while &#40;&#40;sib = k-&gt;op_sibling&#41;&#41;
+	while &#40;&#40;sib = OpSIBLING&#40;k&#41;&#41;&#41;
 		k = sib;
 	if &#40;!&#40;sib = cUNOPx&#40;fk&#41;-&gt;op_first&#41; || sib-&gt;op_ppaddr != da_tag_rv2cv&#41; {
 		Perl_warn&#40;aTHX_ &#34;da peep weirdness 1&#34;&#41;;
 	} else {
-		k-&gt;op_sibling = sib;
+		OpSIBLING&#40;k&#41; = sib;
 		cLISTOPo-&gt;op_last = sib;
 		if &#40;!&#40;k = sib-&gt;op_next&#41; || k-&gt;op_ppaddr != da_tag_entersub&#41; {
 			Perl_warn&#40;aTHX_ &#34;da peep weirdness 2&#34;&#41;;
@@ -2048,9 +2048,9 @@ STATIC OP *da_ck_entersub&#40;pTHX_ OP *o&#41; {
 	kLISTOP-&gt;op_first = tmp;
 	kid = tmp;
 	kUNOP-&gt;op_first = last;
-	while &#40;kid-&gt;op_sibling != last&#41;
-		kid = kid-&gt;op_sibling;
-	kid-&gt;op_sibling = Nullop;
+	while &#40;OpSIBLING&#40;kid&#41; != last&#41;
+		kid = OpSIBLING&#40;kid&#41;;
+	OpSIBLING&#40;kid&#41; = Nullop;
 	cLISTOPx&#40;cUNOPo-&gt;op_first&#41;-&gt;op_last = kid;
 	if &#40;kid-&gt;op_type == OP_NULL &#38;&#38; inside&#41;
 		kid-&gt;op_flags &#38;= ~OPf_SPECIAL;
-- 
2.8.1

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;07&nbsp;17:22:57&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;08&nbsp;03:06:53&nbsp;2017</span>
    <span class="description">ZEFRAM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed in Data-Alias-1.21, just uploaded to CPAN.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;08&nbsp;03:06:54&nbsp;2017</span>
    <span class="description">ZEFRAM [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
