<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #29195 for Mmap: Mmap version 0.10 failed to install under Linux 2.6.18.3 &#40;Debian Etch&#41; and Perl 5.8.8 built for i486-linux-gnu-thread-multi from CPAN shell</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #29195 for Mmap: Mmap version 0.10 failed to install under Linux 2.6.18.3 &#40;Debian Etch&#41; and Perl 5.8.8 built for i486-linux-gnu-thread-multi from CPAN shell</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Mmap/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Mmap/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Mmap/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Mmap/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Mmap">Mmap CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">29195</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">new</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Mmap/Active/">Mmap</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
vitalif [...] mail.ru

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-21478-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-21479-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;05&nbsp;15:43:00&nbsp;2007</span>
    <span class="description">http://simply-a-man.livejournal.com/ -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Mmap version 0.10 failed to install under Linux 2.6.18.3 &#40;Debian
 Etch&#41; and Perl 5.8.8 built for i486-linux-gnu-thread-multi from CPAN shell</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">CPAN module Mmap version 0.10 failed to install from CPAN shell
because of the following two reasons:

1. When CPAN shell unpacks distribution into a new directory,
   folder is named as Mmap-Y1g24t or something like that, not
   Mmap, so MakeMaker couldn&#39;t guess the real name of module.
2. In the Mmap.xs sv_undef and sv_yes are used instead of
   PL_sv_undef and PL_sv_yes.

Also, no MANIFEST is present in the distribution so &#39;make dist&#39;
doesn&#39;t work correctly.

I&#39;ve fixed all these errors and patch for the distribution is
attached. Please, place the patched version on the
cpan.org, also it will be nice for my name to appear at the
page of Mmap module :-&#41;

Regards,
  Vitaliy Filippov &lt;vitalif@mail.ru&gt;
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Mmap-0.10.diff</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -urN Mmap-JG03Fb/Makefile.PL Mmap/Makefile.PL
--- Mmap-JG03Fb/Makefile.PL	1996-06-21 16:03:38.000000000 +0400
+++ Mmap/Makefile.PL	2007-09-05 19:27:01.000000000 +0400
@@ -1,3 +1,13 @@
 use ExtUtils::MakeMaker;
 
-WriteMakefile&#40;&#41;;
+WriteMakefile&#40;
+    &#39;NAME&#39;	=&gt; &#39;Mmap&#39;,
+    &#39;VERSION_FROM&#39; =&gt; &#39;Mmap.pm&#39;, # finds $VERSION
+    &#39;LIBS&#39;	=&gt; [&#39;&#39;],   # e.g., &#39;-lm&#39; 
+    &#39;DEFINE&#39;	=&gt; &#39;&#39;,     # e.g., &#39;-DHAVE_SOMETHING&#39; 
+    &#39;INC&#39;	=&gt; &#39;&#39;,     # e.g., &#39;-I/usr/include/other&#39; 
+    &#39;OBJECT&#39;    =&gt; &#39;Mmap.o&#39;,
+    &#39;dist&#39;      =&gt; {
+        COMPRESS =&gt; &#39;gzip&#39;, SUFFIX =&gt; &#39;gz&#39;,
+    },
+&#41;;
diff -urN Mmap-JG03Fb/MANIFEST Mmap/MANIFEST
--- Mmap-JG03Fb/MANIFEST	1970-01-01 03:00:00.000000000 +0300
+++ Mmap/MANIFEST	2007-09-05 19:31:15.000000000 +0400
@@ -0,0 +1,9 @@
+Artistic
+Copying
+MANIFEST
+README
+Makefile.PL
+Mmap.pm
+Mmap.xs
+typemap
+t/mmap.t
diff -urN Mmap-JG03Fb/Mmap.xs Mmap/Mmap.xs
--- Mmap-JG03Fb/Mmap.xs	1996-06-21 19:41:11.000000000 +0400
+++ Mmap/Mmap.xs	2007-09-05 19:25:47.000000000 +0400
@@ -18,6 +18,11 @@
 #endif
 #endif
 
+#ifndef PL_sv_undef
+   #define PL_sv_undef sv_undef
+   #define PL_sv_yes   sv_yes
+#endif
+
 #ifndef MMAP_RETTYPE
 #define MMAP_RETTYPE caddr_t
 #endif
@@ -131,7 +136,7 @@
     PROTOTYPE: $$$$*;$
     CODE:
 
-	ST&#40;0&#41; = &#38;sv_undef;
+	ST&#40;0&#41; = &#38;PL_sv_undef;
 	fd = fileno&#40;fh&#41;;
 	if &#40;fd &lt; 0&#41;
 	    return;
@@ -155,14 +160,14 @@
 	SvCUR_set&#40;var, len&#41;;
 	SvLEN_set&#40;var, 0&#41;;
 	SvPOK_only&#40;var&#41;;
-	ST&#40;0&#41; = &#38;sv_yes;
+	ST&#40;0&#41; = &#38;PL_sv_yes;
 
 void
 munmap&#40;var&#41;
 	SV *	var
     PROTOTYPE: $
     CODE:
-	ST&#40;0&#41; = &#38;sv_undef;
+	ST&#40;0&#41; = &#38;PL_sv_undef;
 	if &#40;munmap&#40;&#40;MMAP_RETTYPE&#41; SvPVX&#40;var&#41;, SvCUR&#40;var&#41;&#41; == -1&#41;
 	    return;
 	SvREADONLY_off&#40;var&#41;;
@@ -170,4 +175,4 @@
 	SvCUR_set&#40;var, 0&#41;;
 	SvLEN_set&#40;var, 0&#41;;
 	SvOK_off&#40;var&#41;;
-	ST&#40;0&#41; = &#38;sv_yes;
+	ST&#40;0&#41; = &#38;PL_sv_yes;
</div></div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
