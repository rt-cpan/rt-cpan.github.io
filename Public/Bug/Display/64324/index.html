<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #64324 for Math-Random-ISAAC: ISAAC::PP and ISAAC::XS should set the last seed element to the seed size</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #64324 for Math-Random-ISAAC: ISAAC::PP and ISAAC::XS should set the last seed element to the seed size</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Math-Random-ISAAC/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Math-Random-ISAAC/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Math-Random-ISAAC/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Math-Random-ISAAC/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Math-Random-ISAAC">Math-Random-ISAAC CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">64324</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Math-Random-ISAAC/Active/">Math-Random-ISAAC</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mkanat [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-226598-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.002    </td>
  </tr>
  <tr id="CF-226599-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;30&nbsp;02:19:42&nbsp;2010</span>
    <span class="description">mkanat [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> ISAAC::PP and ISAAC::XS should set the last seed element to the
 seed size</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I wrote to the author of ISAAC &#40;Bob Jenkins&#41;, curious about the required 
seed size, and this is what he wrote back:

&#34;No, you don&#39;t need a full 8192 bits of seed data.  Normal key sizes 
will do fine, and they should have their expected strength &#40;eg a 40-bit 
key will take as much time to brute force as 40-bit keys usually will&#41;.  
You could fill the remainder with 0, but set the last array element to 
the length of the key provided &#40;to distinguish keys that differ only by 
different amounts of 0 padding&#41;.  You do still need to call randinit&#40;&#41; 
to make sure the initial state isn&#39;t uniform-looking.

&#34;After publishing ISAAC, I wanted to limit the key to half the size of 
r[], and repeat it twice.  That would have made it hard to provide a key 
that sets the whole internal state to anything convenient.  But I&#39;d 
already published it.&#34;

So at the least, it sounds like instead of *just* zero-filling the 
array, there should also be an element at the end of the array that 
lists the seed size, if the seed wasn&#39;t a full 8192 bits.

It may also be better to repeat the seed as much as possible before 
zero-filling--I&#39;ve written back to ask about it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;30&nbsp;19:23:45&nbsp;2010</span>
    <span class="description">mkanat [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Okay, I wrote to Bob again about repeating the seed. Here&#39;s what I asked:

&#34;For my code, would repeating the key over and over to fill 256 integers
be a better solution than zero-filling, or would they essentially be the
same?&#34;

And here&#39;s what he said:

&#34;If the seed is under 32 bytes, they&#39;re essentially the same, otherwise 
repeating the seed would be stronger.  randinit&#40;&#41; takes a chunk of 32 
bytes, mixes it, and combines that with the next 32 bytes, et cetera.  
Then loops over all the elements the same way a second time.&#34;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;30&nbsp;19:23:46&nbsp;2010</span>
    <span class="description">mkanat [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;31&nbsp;15:04:17&nbsp;2010</span>
    <span class="description">JAWNSY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Thanks for the bug report :-&#41;

When I wrote these modules, I wanted them identical to Bob Jenkins&#39;
reference implementation as was available on his web site at the time,
because they came with some accompanying tests &#40;which I have then
incorporated into these&#41;. By &#34;tests&#34;, I guess I mean the output from
randvect.txt or randseed.txt &#40;I really don&#39;t remember what I did now, it
was a long time ago&#41; -- I verified that the Perl stuff produces the same
results, though now I&#39;m curious why I didn&#39;t write proper tests against
his randvect.txt/randseed.txt files.

Anyway, I thought Bob&#39;s main idea here was to get users to provide the
seed &#40;and I suppose deal with repeating it or whatever else themselves
if they so desire&#41;. Personally, if using this for anything more serious,
you should be seeding with as much truly random data as possible,
hopefully so you don&#39;t need to repeat any part of your seed.

I&#39;m not a security expert by any means. Mostly I&#39;m just curious why Bob
hasn&#39;t updated his reference implementation to incorporate these
changes, or at least leave a note similar to the information he gave you.

I&#39;ll look into this; though given that this stuff &#34;works&#34; for now, this
doesn&#39;t seem like a very critical fix -- everything here works as one
would expect it, given Bob&#39;s reference implementation. It&#39;s much more
likely for me to integrate these changes if I get a patch of some sort
against both of these &#40;and of course the accompanying tests&#41;.

My code is currently moved to Github, and I also plan to move all of
these things to using Dist::Zilla at some point in the future. Currently
all of my commitments with Debian and $paid_work have been keeping me
pretty busy though :-&#40;

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/jawnsy/Math-Random-ISAAC">https://github.com/jawnsy/Math-Random-ISAAC</a></span>

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/jawnsy/Math-Random-ISAAC-XS">https://github.com/jawnsy/Math-Random-ISAAC-XS</a></span>

Cheers,

Jonathan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;03&nbsp;01:36:29&nbsp;2011</span>
    <span class="description">mkanat [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">  Hey Jonathan. :-&#41; Thanks for the really detailed reply. I&#39;ll reply 
inline.

On Fri Dec 31 15:04:17 2010, JAWNSY wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Anyway, I thought Bob&#39;s main idea here was to get users to provide the
&gt; seed &#40;and I suppose deal with repeating it or whatever else themselves
&gt; if they so desire&#41;.
</div>
  That&#39;s true. Of course, in this case, Math::Random::ISAAC and 
Math::Random::ISAAC::XS are the parts that contain the array expansion 
for the seed, so what we do with that is up to us.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Personally, if using this for anything more serious,
&gt; you should be seeding with as much truly random data as possible,
&gt; hopefully so you don&#39;t need to repeat any part of your seed.
</div>
  Actually, although that sounds simple and true at first, in fact it&#39;s 
not. There is a limited amount of truly random data available from all 
of the truly-random data sources on any given system &#40;for example, on 
all *nix-like systems, /dev/urandom or /dev/random&#41;. So if you continue 
to read a lot of data from them, you actually decrease the amount of 
randomness available in them and force them to fall back on their 
internal PRNG, meaning that not only your application is less secure, 
but so is every application on the system. In fact, what one should be 
doing when seeding is reading a seed of a reasonable size to prevent 
discovery by brute force &#40;unless there are other considerations specific 
to the algorithm you&#39;re using, which for ISAAC, there aren&#39;t&#41;.

  Bob actually has a great little informative page on his site that 
describes the amount of time required to brute force data of various 
sizes:

  <span class="clickylink"><a target="new" rel="nofollow" href="http://burtleburtle.net/bob/crypto/magnitude.html#brute">http://burtleburtle.net/bob/crypto/magnitude.html#brute</a></span>

  Which demonstrates that a 256-bit key is probably good enough forever, 
and if you take into account Moore&#39;s Law, then a 512-bit key is probably 
good enough for the next 1000 years.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m not a security expert by any means. Mostly I&#39;m just curious why 
</div>Bob
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; hasn&#39;t updated his reference implementation to incorporate these
&gt; changes, or at least leave a note similar to the information he gave 
</div>you.

  My understanding of Bob&#39;s viewpoint, from his emails and his website, 
is that ISAAC is a published math paper, and the reference 
implementation is the accompanying attachment to that published paper. 
So it&#39;s not something that can change, for him. Also, the challenge on 
his website depends on the reference implementation working exactly as 
it does now, so he may not want to change that.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ll look into this; though given that this stuff &#34;works&#34; for now, 
</div>this
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; doesn&#39;t seem like a very critical fix -- everything here works as one
&gt; would expect it, given Bob&#39;s reference implementation. It&#39;s much more
&gt; likely for me to integrate these changes if I get a patch of some sort
&gt; against both of these &#40;and of course the accompanying tests&#41;.
</div>
  Yeah, I agree, it&#39;s not critical. Just thought it would be nice to 
make the seed even more secure if possible. :-&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; My code is currently moved to Github, and I also plan to move all of
&gt; these things to using Dist::Zilla at some point in the future. 
</div>Currently
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; all of my commitments with Debian and $paid_work have been keeping me
&gt; pretty busy though :-&#40;
</div>
  Ahh, okay. Well, if I have some time or some inclination to do it, I&#39;d 
be happy to convert the distros to Dist::Zilla and provide this patch, 
although my C skills are a little rusty and would make updating the XS 
part take longer than updating the Perl part. &#40;I could still do it, 
though.&#41; Thanks for the github links! :-&#41; I don&#39;t see a likely point in 
the future at which I&#39;d get to it, but perhaps we could leave this bug 
open for anybody else who comes along and might want to do it, or one of 
us if we get to it at some point.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;24&nbsp;12:09:43&nbsp;2011</span>
    <span class="description">JAWNSY [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;10&nbsp;13:32:40&nbsp;2013</span>
    <span class="description">JAWNSY [...] cpan.org -  Untaken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
