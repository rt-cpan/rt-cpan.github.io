<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #53178 for File-Path: bug when only 1 path present and no \%opts</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #53178 for File-Path: bug when only 1 path present and no \%opts</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/File-Path/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/File-Path/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/File-Path/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/File-Path/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/File-Path">File-Path CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">53178</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/File-Path/Active/">File-Path</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">RICHE [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
david.schmidt [...] fm5.at

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-43556-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-43557-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
2.10_001    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;28&nbsp;07:09:35&nbsp;2009</span>
    <span class="description">david.schmidt [...] fm5.at -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> bug when only 1 path present and no \%opts</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 28 Dec 2009 13:09:11 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-File-Path [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Schmidt &lt;david.schmidt [...] fm5.at&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">make_path&#40;$path&#41;; # path is not created
make_path&#40;$path, {}&#41;; # path is created

remove_tree&#40;$path&#41;; # path is not deleted
remove_tree&#40;$path, {}&#41;; # path is deleted

version 2.08
Linux kvm6 2.6.28-17-server #58-Ubuntu SMP Tue Dec 1 22:13:36 UTC 2009
x86_64 GNU/Linux

Sincerely, david

-- 
David Schmidt   |   <span class="clickylink"><a target="new" rel="nofollow" href="http://www.fm5.at">http://www.fm5.at</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;03&nbsp;06:03:29&nbsp;2010</span>
    <span class="description">david [...] landgren.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53178] bug when only 1 path present and no \%opts</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 03 Jan 2010 12:03:13 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-File-Path [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Landgren &lt;david [...] landgren.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">David Schmidt via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Mon Dec 28 07:09:35 2009: Request 53178 was acted upon.
&gt; Transaction: Ticket created by david.schmidt@fm5.at
&gt;        Queue: File-Path
&gt;      Subject: bug when only 1 path present and no \%opts
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: david.schmidt@fm5.at
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=53178">http://rt.cpan.org/Ticket/Display.html?id=53178</a></span> &gt;
&gt; 
&gt; 
&gt; make_path&#40;$path&#41;; # path is not created
&gt; make_path&#40;$path, {}&#41;; # path is created
&gt; 
&gt; remove_tree&#40;$path&#41;; # path is not deleted
&gt; remove_tree&#40;$path, {}&#41;; # path is deleted
&gt; 
&gt; version 2.08
&gt; Linux kvm6 2.6.28-17-server #58-Ubuntu SMP Tue Dec 1 22:13:36 UTC 2009
&gt; x86_64 GNU/Linux
&gt; 
&gt; Sincerely, david
&gt; 
</div>
Gah! That&#39;s horrible! I&#39;ll see what&#39;s going on and fix that up pronto.

Thanks,
David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;03&nbsp;06:03:30&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;03&nbsp;07:49:29&nbsp;2010</span>
    <span class="description">david [...] landgren.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53178] bug when only 1 path present and no \%opts</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 03 Jan 2010 13:28:57 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-File-Path [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Landgren &lt;david [...] landgren.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">David Schmidt via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Mon Dec 28 07:09:35 2009: Request 53178 was acted upon.
&gt; Transaction: Ticket created by david.schmidt@fm5.at
&gt;        Queue: File-Path
&gt;      Subject: bug when only 1 path present and no \%opts
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: david.schmidt@fm5.at
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=53178">http://rt.cpan.org/Ticket/Display.html?id=53178</a></span> &gt;
&gt; 
&gt; 
&gt; make_path&#40;$path&#41;; # path is not created
&gt; make_path&#40;$path, {}&#41;; # path is created
&gt; 
&gt; remove_tree&#40;$path&#41;; # path is not deleted
&gt; remove_tree&#40;$path, {}&#41;; # path is deleted
&gt; 
&gt; version 2.08
&gt; Linux kvm6 2.6.28-17-server #58-Ubuntu SMP Tue Dec 1 22:13:36 UTC 2009
&gt; x86_64 GNU/Linux
</div>
Hmm, I cannot reproduce this problem. What does $path contain at the 
moment of the call, and what is your cwd and the rights therein &#40;chmod&#41;?

Thanks,
David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;19&nbsp;10:54:12&nbsp;2011</span>
    <span class="description">rjbs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">What the OP did not show was that he was probably using an object as the
$path.  This *is* a horrible bug, and it happens when the single
argument to the routines is an object that is a blessed hash, like a
Path::Class object.

I have attached a test and a fix.  The fix will treat only an unblessed
hashref as a set of arguments, not a blessed one.

-- 
rjbs
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0001-add-a-failing-test-for-Path-Class-use.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">From bc6516f2677387e9e82233d7c7da97350356fabd Mon Sep 17 00:00:00 2001
From: Ricardo Signes &lt;rjbs@cpan.org&gt;
Date: Tue, 19 Jul 2011 10:39:59 -0400
Subject: [PATCH 1/2] add a failing test for Path::Class use

---
 t/Path-Class.t |   49 +++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 49 insertions&#40;+&#41;, 0 deletions&#40;-&#41;
 create mode 100644 t/Path-Class.t

diff --git a/t/Path-Class.t b/t/Path-Class.t
new file mode 100644
index 0000000..c3542d6
--- /dev/null
+++ b/t/Path-Class.t
@@ -0,0 +1,49 @@
+use strict;
+use warnings;
+use Test::More;
+
+eval &#34;require Path::Class&#34;;
+plan skip_all =&gt; &#34;Test::Pod 1.00 required for testing POD&#34; if $@;
+
+use File::Path qw&#40;remove_tree make_path&#41;;
+Path::Class-&gt;import;
+
+my $name = &#39;test&#39;;
+my $dir = dir&#40;$name&#41;;
+
+sub test {
+  my &#40;$dir, $pass_arg&#41; = @_;
+
+  my $args = [ $dir, &#40;$pass_arg ? {} : &#40;&#41;&#41; ];
+  my $desc = sprintf&#40;
+    &#39;dir isa %s, second arg is %s&#39;,
+    &#40;ref&#40;$dir&#41; || &#39;string&#39;&#41;,
+    &#40;$pass_arg ? &#39;{}&#39; : &#39;not passed&#39;&#41;
+  &#41;;
+
+  return &#40;$args, $desc&#41;;
+}
+
+for my $mk_dir &#40;$name, dir&#40;$name&#41;&#41; {
+  for my $mk_pass_arg &#40;0, 1&#41; {
+
+    for my $rm_dir &#40;$name, dir&#40;$name&#41;&#41; {
+      for my $rm_pass_arg &#40;0, 1&#41; {
+        remove_tree&#40;$name&#41; if -e $name;
+
+        my &#40;$mk_args, $mk_desc&#41; = test&#40;$mk_dir, $mk_pass_arg&#41;;
+        make_path&#40;@$mk_args&#41;;
+
+        if &#40;ok&#40; -d $dir, &#34;we made $dir &#40;$mk_desc&#41;&#34;&#41;&#41; {
+          my &#40;$rm_args, $rm_desc&#41; = test&#40;$rm_dir, $rm_pass_arg&#41;;
+          remove_tree&#40;@$rm_args&#41;;
+          ok&#40; ! -d $dir, &#34;...then we removed $dir &#40;$rm_desc&#41;&#34;&#41;;
+        } else {
+          fail&#40;&#34;...can&#39;t remove it if we didn&#39;t create it&#34;&#41;;
+        }
+      }
+    }
+  }
+}
+
+done_testing;
-- 
1.7.4.4

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0002-do-not-treat-blessed-hashes-as-argument-hashes.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 6620faa02586eb41db7deea4a12e6545150cb58a Mon Sep 17 00:00:00 2001
From: Ricardo Signes &lt;rjbs@cpan.org&gt;
Date: Tue, 19 Jul 2011 10:46:48 -0400
Subject: [PATCH 2/2] do not treat blessed hashes as argument hashes

---
 Path.pm |   15 +++++++++++----
 1 files changed, 11 insertions&#40;+&#41;, 4 deletions&#40;-&#41;

diff --git a/Path.pm b/Path.pm
index 387cdb1..790405b 100644
--- a/Path.pm
+++ b/Path.pm
@@ -6,6 +6,7 @@ use strict;
 use Cwd &#39;getcwd&#39;;
 use File::Basename &#40;&#41;;
 use File::Spec     &#40;&#41;;
+use Scalar::Util   &#40;&#41;;
 
 BEGIN {
     if &#40;$] &lt; 5.006&#41; {
@@ -58,13 +59,19 @@ sub _error {
     }
 }
 
+sub __is_arg {
+    my &#40;$arg&#41; = @_;
+    return   &#40;Scalar::Util::reftype&#40;$arg&#41; || &#39;&#39;&#41; eq &#39;HASH&#39;
+        &#38;&#38; ! Scalar::Util::blessed&#40;$arg&#41;;
+}
+
 sub make_path {
-    push @_, {} unless @_ and UNIVERSAL::isa&#40;$_[-1],&#39;HASH&#39;&#41;;
+    push @_, {} unless @_ and __is_arg&#40;$_[-1]&#41;;
     goto &#38;mkpath;
 }
 
 sub mkpath {
-    my $old_style = !&#40;@_ and UNIVERSAL::isa&#40;$_[-1],&#39;HASH&#39;&#41;&#41;;
+    my $old_style = !&#40;@_ and __is_arg&#40;$_[-1]&#41;&#41;;
 
     my $arg;
     my $paths;
@@ -162,7 +169,7 @@ sub _mkpath {
 }
 
 sub remove_tree {
-    push @_, {} unless @_ and UNIVERSAL::isa&#40;$_[-1],&#39;HASH&#39;&#41;;
+    push @_, {} unless @_ and __is_arg&#40;$_[-1]&#41;;
     goto &#38;rmtree;
 }
 
@@ -185,7 +192,7 @@ sub _is_subdir {
 }
 
 sub rmtree {
-    my $old_style = !&#40;@_ and UNIVERSAL::isa&#40;$_[-1],&#39;HASH&#39;&#41;&#41;;
+    my $old_style = !&#40;@_ and __is_arg&#40;$_[-1]&#41;&#41;;
 
     my $arg;
     my $paths;
-- 
1.7.4.4

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;19&nbsp;15:39:08&nbsp;2011</span>
    <span class="description">david.schmidt [...] fm5.at -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53178] bug when only 1 path present and no \%opts</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 19 Jul 2011 21:38:50 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-File-Path [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Schmidt &lt;david.schmidt [...] fm5.at&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">awesome, thanks ;&#41;

On Tue, Jul 19, 2011 at 4:54 PM, Ricardo Signes via RT
&lt;bug-File-Path@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53178">https://rt.cpan.org/Ticket/Display.html?id=53178</a></span> &gt;
&gt;
&gt; What the OP did not show was that he was probably using an object as the
&gt; $path.  This *is* a horrible bug, and it happens when the single
&gt; argument to the routines is an object that is a blessed hash, like a
&gt; Path::Class object.
&gt;
&gt; I have attached a test and a fix.  The fix will treat only an unblessed
&gt; hashref as a set of arguments, not a blessed one.
&gt;
&gt; --
&gt; rjbs
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;21&nbsp;10:32:01&nbsp;2011</span>
    <span class="description">david [...] landgren.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53178] bug when only 1 path present and no \%opts</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 21 Jul 2011 16:31:50 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-File-Path [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Landgren &lt;david [...] landgren.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 19/07/2011 21:39, David Schmidt via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;         Queue: File-Path
&gt;   Ticket&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53178">https://rt.cpan.org/Ticket/Display.html?id=53178</a></span>&gt;
&gt;
&gt; awesome, thanks ;&#41;
&gt;
&gt; On Tue, Jul 19, 2011 at 4:54 PM, Ricardo Signes via RT
&gt; &lt;bug-File-Path@rt.cpan.org&gt;  wrote:
<div class="message-stanza open">&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53178">https://rt.cpan.org/Ticket/Display.html?id=53178</a></span>&gt;
&gt;&gt;
&gt;&gt; What the OP did not show was that he was probably using an object as the
&gt;&gt; $path.  This *is* a horrible bug, and it happens when the single
&gt;&gt; argument to the routines is an object that is a blessed hash, like a
&gt;&gt; Path::Class object.
</div></div>
oog.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; I have attached a test and a fix.  The fix will treat only an unblessed
&gt;&gt; hashref as a set of arguments, not a blessed one.
</div></div>
I&#39;ll fold this into the distrib and push out a new release this weekend.

Thanks for the detective work,
David

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; --
&gt;&gt; rjbs
&gt;&gt;
</div>&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;29&nbsp;19:52:01&nbsp;2012</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Did this get pushed up? I just ran into this, on 2.08_01.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;15&nbsp;21:48:54&nbsp;2015</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Mar 29 19:52:01 2012, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Did this get pushed up? I just ran into this, on 2.08_01.
</div>
I don&#39;t think the patches were applied.  I find no evidence of rjbs&#39;s patch in version 2.09.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;02&nbsp;13:56:59&nbsp;2015</span>
    <span class="description">tommylutz [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tommylutz [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Apr 15 21:48:54 2015, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Thu Mar 29 19:52:01 2012, ETHER wrote:
<div class="message-stanza open">&gt; &gt; Did this get pushed up? I just ran into this, on 2.08_01.
</div>&gt; 
&gt; I don&#39;t think the patches were applied.  I find no evidence of rjbs&#39;s
&gt; patch in version 2.09.
</div>Pull request should be coming shortly to fix this issue. The patch provided above will be used, with the exception of adding the dependency on Scalar::Util.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;02&nbsp;15:46:41&nbsp;2015</span>
    <span class="description">tommylutz [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tommylutz [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat May 02 13:56:59 2015, tommylutz@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Apr 15 21:48:54 2015, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; On Thu Mar 29 19:52:01 2012, ETHER wrote:
<div class="message-stanza open">&gt; &gt; &gt; Did this get pushed up? I just ran into this, on 2.08_01.
</div>&gt; &gt;
&gt; &gt; I don&#39;t think the patches were applied.  I find no evidence of rjbs&#39;s
&gt; &gt; patch in version 2.09.
</div>&gt; Pull request should be coming shortly to fix this issue. The patch
&gt; provided above will be used, with the exception of adding the
&gt; dependency on Scalar::Util.
</div>
Pull request created:
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/rpcme/File-Path/pull/2">https://github.com/rpcme/File-Path/pull/2</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;26&nbsp;11:51:33&nbsp;2015</span>
    <span class="description">RICHE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> tommylutz [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This issue has been resolved in dev release <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~riche/File-Path/Path.pm">http://search.cpan.org/~riche/File-Path/Path.pm</a></span> version 2.10_001.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;26&nbsp;11:51:35&nbsp;2015</span>
    <span class="description">RICHE [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;26&nbsp;11:51:36&nbsp;2015</span>
    <span class="description">RICHE [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;26&nbsp;11:51:36&nbsp;2015</span>
    <span class="description">RICHE [...] cpan.org -  Fixed in 2.10_001 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
