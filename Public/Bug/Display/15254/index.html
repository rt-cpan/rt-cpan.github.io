<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #15254 for version: fails tests on AIX 5.1</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #15254 for version: fails tests on AIX 5.1</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/version/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/version/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/version/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/version/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/version">version CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">15254</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/version/Active/">version</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">jpeacock [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
tim.pillsbury [...] cingular.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-34940-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.49    </td>
  </tr>
  <tr id="CF-34941-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;23&nbsp;22:02:22&nbsp;2005</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> fails tests on AIX 5.1</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#40;Getting failure on &#39;CPAN-style versions&#39; test in version-0.49&#41;
&#40;relevant excerpt follows&#41;
# testing CPAN-style versions
dubious
        Test returned status -1 &#40;wstat 139, 0x8b&#41;
DIED. FAILED tests 86-107
#################################################################

/CPAN/Language_Extensions&gt;uname -a
AIX prc-srv-3 1 5 0001BCBF4C00
#################################################################

/CPAN/Language_Extensions&gt;perl -v
This is perl, v5.8.7 built for aix-thread-multi
#################################################################

&#40;Following is the full text from the failure&#41;
removing version-0.49
/bin/rm -rf version-0.49
extracting code from version-0.49.tar.gz
gzcat version-0.49.tar.gz | tar xf -
creating version-0.49/Makefile
cd version-0.49 &#38;&#38; export MAKEFLAGS=&#38;&#38;export MFLAGS=&#38;&#38;time perl Build.PL
Creating custom builder _build/lib/version/Builder.pm in _build/lib/version
Checking whether your kit is complete...
Looks good
Creating new &#39;Build&#39; script for &#39;version&#39; version &#39;0.49&#39;

real    0m1.36s
user    0m0.76s
sys     0m0.34s
compiling version-0.49
cd version-0.49 &#38;&#38; export MAKEFLAGS=&#38;&#38;export MFLAGS=&#38;&#38;time ./Build
cc_r -I./vutil -I/opt/app/perl/testbuild/lib/5.8.7/aix-thread-multi/CORE -c -D_ALL_SOURCE -D_ANSI_C_SOURCE -D_POSIX_SOURCE -qmaxmem=-1 -qnoansialias -DUSE_NATIVE_DLOPEN -DNEED_PTHREAD_INIT -I/usr/local/include -q32 -D_LARGE_FILES -qlonglong -O -o ./vutil/vutil.o ./vutil/vutil.c
lib/version.pm -&gt; blib/lib/version.pm
lib/version/vxs.pm -&gt; blib/lib/version/vxs.pm
lib/version/vxs.xs -&gt; lib/version/vxs.c
/opt/app/perl/testbuild/bin/perl &#34;-I/opt/app/perl/testbuild/lib/5.8.7/aix-thread-multi&#34; &#34;-I/opt/app/perl/testbuild/lib/5.8.7&#34; &#34;/opt/app/perl/testbuild/lib/5.8.7/ExtUtils/xsubpp&#34; -noprototypes -typemap &#34;/opt/app/perl/testbuild/lib/5.8.7/ExtUtils/typemap&#34; &#34;lib/version/vxs.xs&#34;cc_r -I./vutil -I/opt/app/perl/testbuild/lib/5.8.7/aix-thread-multi/CORE -c -D_ALL_SOURCE -D_ANSI_C_SOURCE -D_POSIX_SOURCE -qmaxmem=-1 -qnoansialias -DUSE_NATIVE_DLOPEN -DNEED_PTHREAD_INIT -I/usr/local/include -q32 -D_LARGE_FILES -qlonglong -O -o lib/version/vxs.o lib/version/vxs.c
ExtUtils::Mkbootstrap::Mkbootstrap&#40;&#39;lib/version/vxs&#39;&#41;
ExtUtils::Mksymlists::Mksymlists&#40;&#39;lib/version/vxs&#39;&#41;
xlc_r -bhalt:4 -bexpall -G -bnoentry -lpthreads -lc -L/usr/local/lib -o blib/arch/auto/version/vxs/vxs.so lib/version/vxs.o ./vutil/vutil.o
lib/version.pod -&gt; blib/lib/version.pod
Manifying blib/lib/version.pod -&gt; blib/libdoc/version.3

real    0m5.48s
user    0m3.52s
sys     0m1.14s
cd version-0.49 &#38;&#38; export MAKEFLAGS=&#38;&#38;export MFLAGS=&#38;&#38;time ./Build test
t/01base.......# Tests with base class
# tests with bare numbers
# tests with quoted numbers
# tests with stringify
# test illegal formats
# tests with self
# tests with non-objects
# tests with objects
# numeric tests with non-objects
# numeric tests with objects
# numeric tests with numbers
# Tests with extended decimal versions
# tests with alpha-style non-objects
# numeric tests with alpha-style non-objects
# tests with alpha-style objects
# tests with alpha-style objects
# tests with alpha-style objects with same subversion
# test implicit [in]equality
# forbidden operations
# testing qv
# create new from existing version
# testing CVS Revision
# testing CPAN-style versions
dubious
        Test returned status -1 &#40;wstat 139, 0x8b&#41;
DIED. FAILED tests 80-96
        Failed 17/96 tests, 82.29% okay
t/02derived....# Tests with empty derived class
Subroutine main::qv redefined at t/02derived.t line 18.
# tests with bare numbers
# tests with quoted numbers
# tests with stringify
# test illegal formats
# tests with self
# tests with non-objects
# tests with objects
# numeric tests with non-objects
# numeric tests with objects
# numeric tests with numbers
# Tests with extended decimal versions
# tests with alpha-style non-objects
# numeric tests with alpha-style non-objects
# tests with alpha-style objects
# tests with alpha-style objects
# tests with alpha-style objects with same subversion
# test implicit [in]equality
# forbidden operations
# testing qv
# create new from existing version
# testing CVS Revision
# testing CPAN-style versions
dubious
        Test returned status -1 &#40;wstat 139, 0x8b&#41;
DIED. FAILED tests 86-107
        Failed 22/107 tests, 79.44% okay
Failed Test   Stat Wstat Total Fail  Failed  List of Failed
-------------------------------------------------------------------------------
t/01base.t      -1   139    96   34  35.42%  80-96
t/02derived.t   -1   139   107   44  41.12%  86-107
Failed 2/2 test scripts, 0.00% okay. 39/203 subtests failed, 80.79% okay.

real    0m3.71s
user    0m1.18s
sys     0m1.39s
Gmake[2]: *** [test] Error 255
Gmake[2]: Leaving directory `/roaming/clearcase/vobs/perlbuild/CPAN/Language_Extensions&#39;
Gmake[1]: *** [all] Error 2
Gmake[1]: Leaving directory `/roaming/clearcase/vobs/perlbuild/CPAN/Language_Extensions&#39;
Gmake: *** [LANG_EXTS.make] Error 2
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;24&nbsp;06:32:59&nbsp;2005</span>
    <span class="description">jpeacock [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;24&nbsp;06:33:19&nbsp;2005</span>
    <span class="description">jpeacock [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;24&nbsp;06:44:47&nbsp;2005</span>
    <span class="description">jpeacock [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[guest - Sun Oct 23 22:02:22 2005]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; # testing CPAN-style versions
&gt; dubious
&gt;         Test returned status -1 &#40;wstat 139, 0x8b&#41;
&gt; DIED. FAILED tests 80-96
&gt;         Failed 17/96 tests, 82.29% okay
</div>
I don&#39;t have access to AIX 5.1 at the moment, so I am going to need some
help to track this down.  I do know that xlc is one of the more, how
shall I say this, /compulsive/ compilers.  I don&#39;t see anything in that
code path that is not strict ANSI, though.  Is there any chance you can
build a debugging Perl &#40;-D&#34;optimize=-g&#34;&#41; so that you can can get a
backtrace of that core file?  

I&#39;m going to see if HP is offering an AIX 5.1 box through their
TestDrive program.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; t/02derived....# Tests with empty derived class
&gt; Subroutine main::qv redefined at t/02derived.t line 18.
</div>
This I fixed &#40;it&#39;s just a warning&#41;.

TIA

John
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;24&nbsp;12:53:10&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tim.pillsbury [...] cingular.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you, I should be able to do that today. How shall I provide the 
core file to you? Should I just attach it in this ticketing system?



[JPEACOCK - Mon Oct 24 06:44:47 2005]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [guest - Sun Oct 23 22:02:22 2005]:
&gt; 
<div class="message-stanza open">&gt; &gt; # testing CPAN-style versions
&gt; &gt; dubious
&gt; &gt;         Test returned status -1 &#40;wstat 139, 0x8b&#41;
&gt; &gt; DIED. FAILED tests 80-96
&gt; &gt;         Failed 17/96 tests, 82.29% okay
</div>&gt; 
&gt; I don&#39;t have access to AIX 5.1 at the moment, so I am going to need
&gt;    some
&gt; help to track this down.  I do know that xlc is one of the more, how
&gt; shall I say this, /compulsive/ compilers.  I don&#39;t see anything in
&gt;    that
&gt; code path that is not strict ANSI, though.  Is there any chance you
&gt;    can
&gt; build a debugging Perl &#40;-D&#34;optimize=-g&#34;&#41; so that you can can get a
&gt; backtrace of that core file?
&gt; 
&gt; I&#39;m going to see if HP is offering an AIX 5.1 box through their
&gt; TestDrive program.
&gt; 
<div class="message-stanza open">&gt; &gt; t/02derived....# Tests with empty derived class
&gt; &gt; Subroutine main::qv redefined at t/02derived.t line 18.
</div>&gt; 
&gt; This I fixed &#40;it&#39;s just a warning&#41;.
&gt; 
&gt; TIA
&gt; 
&gt; John
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;24&nbsp;13:03:33&nbsp;2005</span>
    <span class="description">jpeacock [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[guest - Mon Oct 24 12:53:10 2005]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thank you, I should be able to do that today. How shall I provide the
&gt; core file to you? Should I just attach it in this ticketing system?
</div>
The core itself won&#39;t be much help to me &#40;without a comparable AIX box
myself&#41;.  Can you get a backtrace &#40;so I know where it is going wonky&#41;? 
Does AIX come with a debugger &#40;like gdb in the open source world&#41;?

I&#39;ve got an AIX 5.1 box I am trying to bring back to life.  Did you
build Perl yourself or did you install it from the freeware site?  Can
you send me the contents of &#39;perl -V&#39; so I can build a comparable Perl?

John
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;24&nbsp;13:05:16&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tim.pillsbury [...] cingular.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you, I should be able to do that today. How shall I provide the 
core file to you? Should I just attach it in this ticketing system?



[JPEACOCK - Mon Oct 24 06:44:47 2005]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [guest - Sun Oct 23 22:02:22 2005]:
&gt; 
<div class="message-stanza open">&gt; &gt; # testing CPAN-style versions
&gt; &gt; dubious
&gt; &gt;         Test returned status -1 &#40;wstat 139, 0x8b&#41;
&gt; &gt; DIED. FAILED tests 80-96
&gt; &gt;         Failed 17/96 tests, 82.29% okay
</div>&gt; 
&gt; I don&#39;t have access to AIX 5.1 at the moment, so I am going to need
&gt;    some
&gt; help to track this down.  I do know that xlc is one of the more, how
&gt; shall I say this, /compulsive/ compilers.  I don&#39;t see anything in
&gt;    that
&gt; code path that is not strict ANSI, though.  Is there any chance you
&gt;    can
&gt; build a debugging Perl &#40;-D&#34;optimize=-g&#34;&#41; so that you can can get a
&gt; backtrace of that core file?
&gt; 
&gt; I&#39;m going to see if HP is offering an AIX 5.1 box through their
&gt; TestDrive program.
&gt; 
<div class="message-stanza open">&gt; &gt; t/02derived....# Tests with empty derived class
&gt; &gt; Subroutine main::qv redefined at t/02derived.t line 18.
</div>&gt; 
&gt; This I fixed &#40;it&#39;s just a warning&#41;.
&gt; 
&gt; TIA
&gt; 
&gt; John
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;24&nbsp;13:10:24&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tim.pillsbury [...] cingular.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">AIX has a debugger named xldb, and I also should be able to provide a 
backtrace once I&#39;ve finished building a debuggable Perl, here&#39;s my 
current perl -V:

Summary of my perl5 &#40;revision 5 version 8 subversion 7&#41; configuration:
  Platform:
    osname=aix, osvers=5.1.0.0, archname=aix-thread-multi
    uname=&#39;aix prc-srv-3 1 5 0001bcbf4c00 &#39;
    config_args=&#39;-d -e&#39;
    hint=previous, useposix=true, d_sigaction=define
    usethreads=define use5005threads=undef useithreads=define 
usemultiplicity=define
    useperlio=define d_sfio=undef uselargefiles=define usesocks=undef
    use64bitint=undef use64bitall=undef uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;cc_r&#39;, ccflags =&#39;-D_ALL_SOURCE -D_ANSI_C_SOURCE -
D_POSIX_SOURCE -qmaxmem=-1 -qnoansialias -DUSE_NATIVE_DLOPEN -
DNEED_PTHREAD_INIT -I/usr/local/include -q32 -D_LARGE_FILES -
qlonglong&#39;,
    optimize=&#39;-O&#39;,
    cppflags=&#39;-D_ALL_SOURCE -D_ANSI_C_SOURCE -D_POSIX_SOURCE -qmaxmem=-
1 -qnoansialias -DUSE_NATIVE_DLOPEN -DNEED_PTHREAD_INIT -
I/usr/local/include -D_ALL_SOURCE -D_ANSI_C_SOURCE -D_POSIX_SOURCE -
qmaxmem=-1 -qnoansialias -DUSE_NATIVE_DLOPEN -DNEED_PTHREAD_INIT -
I/usr/local/include -q32 -D_LARGE_FILES -qlonglong&#39;
    ccversion=&#39;5.0.2.0&#39;, gccversion=&#39;&#39;, gccosandvers=&#39;&#39;
    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=4321
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=8
    ivtype=&#39;long&#39;, ivsize=4, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;, 
lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;xlc_r&#39;, ldflags =&#39; -brtl -bdynamic -bmaxdata:0x80000000 -
L/usr/local/lib -b32&#39;
    libpth=/usr/local/lib /lib /usr/lib /usr/ccs/lib
    libs=-lbind -lnsl -ldbm -ldl -lld -lm -lcrypt -lpthreads -lc -lbsd
    perllibs=-lbind -lnsl -ldl -lld -lm -lcrypt -lpthreads -lc -lbsd
    libc=/lib/libc.a, so=a, useshrplib=false, libperl=libperl.a
    gnulibc_version=&#39;&#39;
  Dynamic Linking:
    dlsrc=dl_aix.xs, dlext=so, d_dlsymun=undef, ccdlflags=&#39;  -
bE: /opt/app/perl/testbuild/lib/5.8.7/aix-thread-multi/CORE/perl.exp -
bE:/opt/app/perl/testbuild/lib/5.8.7/aix-thread-multi/CORE/perl.exp&#39;
    cccdlflags=&#39; &#39;, lddlflags=&#39;-bhalt:4 -bexpall -G -bnoentry -
lpthreads -lc -L/usr/local/lib&#39;


Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options: MULTIPLICITY USE_ITHREADS USE_LARGE_FILES
                        PERL_IMPLICIT_CONTEXT
  Built under aix
  Compiled at Oct 24 2005 00:51:18
  @INC:
    /opt/app/perl/testbuild/lib/5.8.7/aix-thread-multi
    /opt/app/perl/testbuild/lib/5.8.7
    /opt/app/perl/testbuild/lib/site_perl/5.8.7/aix-thread-multi
    /opt/app/perl/testbuild/lib/site_perl/5.8.7
    /opt/app/perl/testbuild/lib/site_perl
    .
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;24&nbsp;14:39:07&nbsp;2005</span>
    <span class="description">jpeacock [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[guest - Mon Oct 24 13:10:24 2005]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; AIX has a debugger named xldb, and I also should be able to provide a 
&gt; backtrace once I&#39;ve finished building a debuggable Perl, here&#39;s my 
&gt; current perl -V:
</div>
I got my AIX box back up and running and it appears that I don&#39;t have
xlc installed &#40;I&#39;m not even sure I have a license for it&#41;.  It doesn&#39;t
appear that IBM has anything comparable to HP&#39;s TestDrive servers, so
I&#39;m stuck with whatever information you are able to give me.

John
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;24&nbsp;17:10:39&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tim.pillsbury [...] cingular.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ll have a debuggable Perl later today and will get my info to you 
ASAP. 
Thanks a lot,
-Tim
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;24&nbsp;23:48:10&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tim.pillsbury [...] cingular.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The failure occurs in vutil/vutil.c at line 391.
Attaching a word document with relevant details.
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;25&nbsp;07:21:55&nbsp;2005</span>
    <span class="description">jpeacock [...] rowman.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 25 Oct 2005 07:20:47 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;jpeacock [...] rowman.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-version [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [cpan #15254] fails tests on AIX 5.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">RT-Send-Cc:</td>
    <td class="message-header-value"> </td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Guest via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The failure occurs in vutil/vutil.c at line 391.
&gt; Attaching a word document with relevant details.
</div>
Oh, man, that is the last place I&#39;d expect to have a problem!  Can you tell me
what on earth AIX expects pow&#40;&#41; to do?  At least on Linux that function has the
signature of:

        double pow&#40;double x, double y&#41;;

Can you adjust vutil/vutil.c to look like this instead?

        const int denom = &#40;int&#41;pow&#40;&#40;double&#41;10,&#40;double&#41;&#40;3-width&#41;&#41;;

If that fails, try this:

        const int denom = &#40;int&#41;Perl_pow&#40;10,&#40;3-width&#41;&#41;;

which might choose the correct pow/powl implementation at Configure time.

TIA

John

-- 
John Peacock
Director of Information Research and Technology
Rowman &#38; Littlefield Publishing Group
4720 Boston Way
Lanham, MD 20706
301-459-3366 x.5010
fax 301-429-5747
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;25&nbsp;08:35:15&nbsp;2005</span>
    <span class="description">jpeacock [...] rowman.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 25 Oct 2005 08:34:58 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;jpeacock [...] rowman.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-version [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [cpan #15254] fails tests on AIX 5.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">RT-Send-Cc:</td>
    <td class="message-header-value"> </td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Guest via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The failure occurs in vutil/vutil.c at line 391.
</div>
Actually, ignore my previous suggestion.  The value of denom can only be 10 or
100, so there is really no point in using pow&#40;&#41; at all.  Apply this patch and
see if it works for you:

--- vutil/vutil.c       &#40;revision 428&#41;
+++ vutil/vutil.c       &#40;local&#41;
@@ -388,7 +388,7 @@
     {
        digit = SvIV&#40;*av_fetch&#40;av, i, 0&#41;&#41;;
        if &#40; width &lt; 3 &#41; {
-           const int denom = &#40;int&#41;pow&#40;10,&#40;3-width&#41;&#41;;
+           const int denom = &#40;width == 2 ? 10 : 100&#41;;
            const div_t term = div&#40;&#40;int&#41;PERL_ABS&#40;digit&#41;,denom&#41;;
            Perl_sv_catpvf&#40;aTHX_ sv, &#34;%0*d_%d&#34;, width, term.quot, term.rem&#41;;
        }

John

-- 
John Peacock
Director of Information Research and Technology
Rowman &#38; Littlefield Publishing Group
4720 Boston Way
Lanham, MD 20706
301-459-3366 x.5010
fax 301-429-5747
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;25&nbsp;10:53:38&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tim.pillsbury [...] cingular.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Beautiful, that did it:

[reba]/roaming/clearcase/vobs/perlbuild/CPAN/Language_Extensions/versio
n-0.49&gt;./Build test
t/01base.......ok 1/96# Tests with base class
# tests with bare numbers
# tests with quoted numbers
# tests with stringify
# test illegal formats
# tests with self
# tests with non-objects
# tests with objects
# numeric tests with non-objects
# numeric tests with objects
# numeric tests with numbers
# Tests with extended decimal versions
# tests with alpha-style non-objects
# numeric tests with alpha-style non-objects
# tests with alpha-style objects
# tests with alpha-style objects
# tests with alpha-style objects with same subversion
# test implicit [in]equality
# forbidden operations
# testing qv
# create new from existing version
# testing CVS Revision
# testing CPAN-style versions
# Replacement UNIVERSAL::VERSION tests
# Tests with v-strings
# Tests with real-world &#40;malformed&#41; data
t/01base.......ok
t/02derived....ok 1/107# Tests with empty derived class
Subroutine main::qv redefined at t/02derived.t line 18.
# tests with bare numbers
# tests with quoted numbers
# tests with stringify
# test illegal formats
# tests with self
# tests with non-objects
# tests with objects
# numeric tests with non-objects
# numeric tests with objects
# numeric tests with numbers
# Tests with extended decimal versions
# tests with alpha-style non-objects
# numeric tests with alpha-style non-objects
# tests with alpha-style objects
# tests with alpha-style objects
# tests with alpha-style objects with same subversion
# test implicit [in]equality
# forbidden operations
# testing qv
# create new from existing version
# testing CVS Revision
# testing CPAN-style versions
# Replacement UNIVERSAL::VERSION tests
# Tests with v-strings
# Tests with real-world &#40;malformed&#41; data
# tests with bad subclass
t/02derived....ok
All tests successful.
Files=2, Tests=203,  1 wallclock secs &#40; 0.57 cusr +  0.42 csys =  0.99 
CPU&#41;

Thanks a lot John,
-Tim
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;25&nbsp;12:16:30&nbsp;2005</span>
    <span class="description">jpeacock [...] rowman.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 25 Oct 2005 12:16:20 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;jpeacock [...] rowman.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-version [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [cpan #15254] fails tests on AIX 5.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">RT-Send-Cc:</td>
    <td class="message-header-value"> </td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Guest via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Beautiful, that did it:
</div>
Cool.  I&#39;ll commit that to my repository and it will be in the next 
release.  I&#39;ll also submit a patch to Perl5Porters, since this code is 
used in 5.9.x and hence will be in 5.10.0.

Thanks very much for making it possible to debug this...

John

-- 
John Peacock
Director of Information Research and Technology
Rowman &#38; Littlefield Publishing Group
4501 Forbes Boulevard
Suite H
Lanham, MD  20706
301-459-3366 x.5010
fax 301-429-5748
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;25&nbsp;16:03:03&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tim.pillsbury [...] cingular.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Completely my pleasure to help, thank you
-Tim
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;06&nbsp;19:02:29&nbsp;2005</span>
    <span class="description">jpeacock [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The uploaded file

    version-0.50.tar.gz

has entered CPAN as

  file: $CPAN/authors/id/J/JP/JPEACOCK/version-0.50.tar.gz
  size: 32356 bytes
   md5: ac3cfa9ab5d82f179ddb276508699cce

This includes the fix for the reported problem on AIX.

Thanks
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;06&nbsp;19:02:30&nbsp;2005</span>
    <span class="description">jpeacock [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
