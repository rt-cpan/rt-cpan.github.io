<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #100944 for Data-Alias: Test failure with perl 5.21.6</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #100944 for Data-Alias: Test failure with perl 5.21.6</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Data-Alias/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Data-Alias/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Data-Alias/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Data-Alias/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Data-Alias">Data-Alias CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">100944</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Data-Alias/Active/">Data-Alias</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
SREZIC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
CARNIL [...] cpan.org

<br />
ether [...] cpan.org

<br />
gregoa [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-8918-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.18    </td>
  </tr>
  <tr id="CF-8919-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;16&nbsp;03:32:18&nbsp;2014</span>
    <span class="description">SREZIC [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Test failure with perl 5.21.6</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">If the patch from <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=98758">https://rt.cpan.org/Ticket/Display.html?id=98758</a></span> is applied, then &#34;make test&#34; still fails for perl 5.21.6:

#   Failed test at t/03_copy.t line 20.
#          got: &#39;SCALAR&#40;0xe2a3d8&#41;&#39;
#     expected: anything else

#   Failed test at t/03_copy.t line 21.
#          got: &#39;SCALAR&#40;0xe2a3d8&#41;&#39;
#     expected: anything else
# Looks like you failed 2 tests of 14.
t/03_copy.t .............. Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
Failed 2/14 subtests 

...

#   Failed test at t/05_alias_parse2.t line 50.
#          got: &#39;SCALAR&#40;0x1719280&#41;&#39;
#     expected: &#39;SCALAR&#40;0x17b1cd8&#41;&#39;
# Looks like you failed 1 test of 17.
t/05_alias_parse2.t ...... Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/17 subtests 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;16&nbsp;15:39:56&nbsp;2014</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> ANDK [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Dec 16 03:32:18 2014, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If the patch from <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=98758">https://rt.cpan.org/Ticket/Display.html?id=98758</a></span> is
&gt; applied, then &#34;make test&#34; still fails for perl 5.21.6:
&gt; 
&gt; #   Failed test at t/03_copy.t line 20.
&gt; #          got: &#39;SCALAR&#40;0xe2a3d8&#41;&#39;
&gt; #     expected: anything else
&gt; 
&gt; #   Failed test at t/03_copy.t line 21.
&gt; #          got: &#39;SCALAR&#40;0xe2a3d8&#41;&#39;
&gt; #     expected: anything else
&gt; # Looks like you failed 2 tests of 14.
&gt; t/03_copy.t .............. Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
&gt;  Failed 2/14 subtests
&gt; 
&gt; ...
&gt; 
&gt; #   Failed test at t/05_alias_parse2.t line 50.
&gt; #          got: &#39;SCALAR&#40;0x1719280&#41;&#39;
&gt; #     expected: &#39;SCALAR&#40;0x17b1cd8&#41;&#39;
&gt; # Looks like you failed 1 test of 17.
&gt; t/05_alias_parse2.t ...... Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
&gt;  Failed 1/17 subtests
</div>
Bisect?  &#40;Sorry if I sound too demanding.&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;16&nbsp;15:39:56&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;16&nbsp;16:40:52&nbsp;2014</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">np:&#41;

v5.21.5-9-g6aa6830
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;20&nbsp;09:19:54&nbsp;2014</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> ANDK [...] cpan.org</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Dec 16 16:40:52 2014, ANDK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; np:&#41;
&gt; 
&gt; v5.21.5-9-g6aa6830
</div>
Thank you.

This module is crazy.  It is making my head hurt.  :-&#40;

If you apply this patch on top of the patch from the other ticket and test it with bleadperl as of now &#40;8be81792ba&#41;, do you get malloc errors?  If so, could you try bisecting with these patches applied?
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> unfinished-patch.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -rup Data-Alias-1.18-7uiCBM-orig/Alias.xs Data-Alias-1.18-7uiCBM/Alias.xs
--- Data-Alias-1.18-7uiCBM-orig/Alias.xs	2014-12-16 14:56:52.000000000 -0800
+++ Data-Alias-1.18-7uiCBM/Alias.xs	2014-12-20 06:09:38.000000000 -0800
@@ -137,6 +137,11 @@
 #define IS_PADGV&#40;x&#41; 0
 #endif
 
+#ifndef PadnamelistARRAY
+#define PadnamelistARRAY AvARRAY
+#define PadnameOUTER SvFAKE
+#endif
+
 #define DA_HAVE_OP_PADRANGE &#40;PERL_COMBI_VERSION &gt;= 5017006&#41;
 
 #if DA_HAVE_OP_PADRANGE
@@ -225,6 +230,8 @@ static char const msg_no_symref[] =
 
 STATIC OP *&#40;*da_old_ck_rv2cv&#41;&#40;pTHX_ OP *op&#41;;
 STATIC OP *&#40;*da_old_ck_entersub&#41;&#40;pTHX_ OP *op&#41;;
+STATIC OP *&#40;*da_old_ck_aelem&#41;&#40;pTHX_ OP *op&#41;;
+STATIC OP *&#40;*da_old_ck_helem&#41;&#40;pTHX_ OP *op&#41;;
 
 #ifdef USE_ITHREADS
 
@@ -1489,7 +1496,9 @@ STATIC OP *DataAlias_pp_copy&#40;pTHX&#41; {
 STATIC void da_lvalue&#40;pTHX_ OP *op, int list&#41; {
 	switch &#40;op-&gt;op_type&#41; {
 	case OP_PADSV:     op-&gt;op_ppaddr = DataAlias_pp_padsv;
-			   if &#40;SvFAKE&#40;AvARRAY&#40;PL_comppad_name&#41;[op-&gt;op_targ]&#41;
+			   if &#40;PadnameOUTER&#40;
+				PadnamelistARRAY&#40;PL_comppad_name&#41;
+					[op-&gt;op_targ]&#41;
 					   &#38;&#38; ckWARN&#40;WARN_CLOSURE&#41;&#41;
 				   Perl_warner&#40;aTHX_ packWARN&#40;WARN_CLOSURE&#41;,
 						   DA_OUTER_ERR&#41;;
@@ -1501,7 +1510,8 @@ STATIC void da_lvalue&#40;pTHX_ OP *op, int 
 		int i;
 		if &#40;!list&#41; goto bad;
 		for&#40;i = start; i != start+count; i++&#41; {
-			   if &#40;SvFAKE&#40;AvARRAY&#40;PL_comppad_name&#41;[i]&#41;
+			   if &#40;PadnameOUTER&#40;
+				PadnamelistARRAY&#40;PL_comppad_name&#41;[i]&#41;
 					   &#38;&#38; ckWARN&#40;WARN_CLOSURE&#41;&#41;
 				   Perl_warner&#40;aTHX_ packWARN&#40;WARN_CLOSURE&#41;,
 						   DA_OUTER_ERR&#41;;
@@ -1785,7 +1795,7 @@ STATIC int da_transform&#40;pTHX_ OP *op, in
 }
 
 STATIC void da_peep2&#40;pTHX_ OP *o&#41; {
-	OP *sib, *k;
+	OP *sib, *k, *o2;
 	int useful;
 	while &#40;o-&gt;op_ppaddr != da_tag_list&#41; {
 		while &#40;&#40;sib = o-&gt;op_sibling&#41;&#41; {
@@ -1805,14 +1815,20 @@ STATIC void da_peep2&#40;pTHX_ OP *o&#41; {
 	useful = o-&gt;op_private &#38; OPpUSEFUL;
 	op_null&#40;o&#41;;
 	o-&gt;op_ppaddr = PL_ppaddr[OP_NULL];
-	cLISTOPo-&gt;op_last = cUNOPx&#40;cLISTOPo-&gt;op_first&#41;-&gt;op_first;
-	k = o = cLISTOPo-&gt;op_first;
+	k = o2 = cLISTOPo-&gt;op_first;
 	while &#40;&#40;sib = k-&gt;op_sibling&#41;&#41;
 		k = sib;
-	if &#40;!&#40;sib = cUNOPo-&gt;op_first&#41; || sib-&gt;op_ppaddr != da_tag_rv2cv&#41; {
+	if &#40;!&#40;sib = cUNOPx&#40;o2&#41;-&gt;op_first&#41;
+	 || sib-&gt;op_ppaddr != da_tag_rv2cv&#41;
+	{
 		Perl_warn&#40;aTHX_ &#34;da peep weirdness 1&#34;&#41;;
 	} else {
+#ifdef op_sibling_splice
+		op_sibling_splice&#40;o, k, 0, sib&#41;;
+#else
+		cLISTOPo-&gt;op_last = sib;
 		k-&gt;op_sibling = sib;
+#endif
 		if &#40;!&#40;k = sib-&gt;op_next&#41; || k-&gt;op_ppaddr != da_tag_entersub&#41; {
 			Perl_warn&#40;aTHX_ &#34;da peep weirdness 2&#34;&#41;;
 		} else {
@@ -2005,6 +2021,9 @@ STATIC OP *da_ck_entersub&#40;pTHX_ OP *o&#41; {
 		kid-&gt;op_private |= OPpUSEFUL;
 	else
 		kid-&gt;op_private &#38;= ~OPpUSEFUL;
+	/* Defeat list+pushmark optimisation from v5.21.5-9-g6aa6830.  */
+	assert&#40;kUNOP-&gt;op_first-&gt;op_type == OP_PUSHMARK&#41;;
+	kUNOP-&gt;op_first-&gt;op_type = OP_CUSTOM;
 	tmp = kLISTOP-&gt;op_first;
 	if &#40;inside&#41;
 		op_null&#40;tmp&#41;;
@@ -2016,6 +2035,9 @@ STATIC OP *da_ck_entersub&#40;pTHX_ OP *o&#41; {
 	while &#40;kid-&gt;op_sibling != last&#41;
 		kid = kid-&gt;op_sibling;
 	kid-&gt;op_sibling = Nullop;
+#ifdef op_sibling_splice
+	kid-&gt;op_lastsib = 1;
+#endif
 	cLISTOPx&#40;cUNOPo-&gt;op_first&#41;-&gt;op_last = kid;
 	if &#40;kid-&gt;op_type == OP_NULL &#38;&#38; inside&#41;
 		kid-&gt;op_flags &#38;= ~OPf_SPECIAL;
@@ -2023,6 +2045,14 @@ STATIC OP *da_ck_entersub&#40;pTHX_ OP *o&#41; {
 	return o;
 }
 
+/* These two exist solely to defeat the multideref optimisation.  */
+STATIC OP *da_ck_aelem&#40;pTHX_ OP *o&#41; {
+	return da_old_ck_aelem&#40;aTHX_ o&#41;;
+}
+STATIC OP *da_ck_helem&#40;pTHX_ OP *o&#41; {
+	return da_old_ck_helem&#40;aTHX_ o&#41;;
+}
+
 
 MODULE = Data::Alias  PACKAGE = Data::Alias
 
@@ -2040,6 +2070,10 @@ BOOT:
 		PL_check[OP_RV2CV] = da_ck_rv2cv;
 		da_old_ck_entersub = PL_check[OP_ENTERSUB];
 		PL_check[OP_ENTERSUB] = da_ck_entersub;
+		da_old_ck_aelem = PL_check[OP_AELEM];
+		PL_check[OP_AELEM] = da_ck_aelem;
+		da_old_ck_helem = PL_check[OP_HELEM];
+		PL_check[OP_HELEM] = da_ck_helem;
 	}
 	CvLVALUE_on&#40;get_cv&#40;&#34;Data::Alias::deref&#34;, TRUE&#41;&#41;;
 	da_old_peepp = PL_peepp;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;20&nbsp;17:26:18&nbsp;2014</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">With that patch I see no malloc errors. padrange fails like so:

t/padrange.t ............. 1/38
#   Failed test at t/padrange.t line 53.

#   Failed test at t/padrange.t line 54.

#   Failed test at t/padrange.t line 55.
# Looks like you failed 3 tests of 38.
t/padrange.t ............. Dubious, test returned 3 &#40;wstat 768, 0x300&#41;
Failed 3/38 subtests

Which test are you most interested in? Maybe I can see something with valgrind.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;20&nbsp;19:44:24&nbsp;2014</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> ANDK [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Dec 20 17:26:18 2014, ANDK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; With that patch I see no malloc errors. padrange fails like so:
&gt; 
&gt; t/padrange.t ............. 1/38
&gt; #   Failed test at t/padrange.t line 53.
&gt; 
&gt; #   Failed test at t/padrange.t line 54.
&gt; 
&gt; #   Failed test at t/padrange.t line 55.
&gt; # Looks like you failed 3 tests of 38.
&gt; t/padrange.t ............. Dubious, test returned 3 &#40;wstat 768, 0x300&#41;
&gt; Failed 3/38 subtests
&gt; 
&gt; Which test are you most interested in? Maybe I can see something with
&gt; valgrind.
</div>
padrange.t is what is giving me malloc errors.  It is probably failing for you for the same reason:  An SV address is getting passed to malloc as the size to allocate.  A bisect with padrange.t is probably sufficient.  Thank you.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;21&nbsp;08:36:02&nbsp;2014</span>
    <span class="description">andreas.koenig.7os6VVqR [...] franz.ak.mind.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> ANDK [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #100944] Test failure with perl 5.21.6</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 21 Dec 2014 14:35:45 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Data-Alias [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Andreas Koenig &lt;andreas.koenig.7os6VVqR [...] franz.ak.mind.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Given the two patches to D:A applied, this bleadperl commit broke
t/padrange.t: v5.21.6-352-gc46871e

commit c46871e754baf56ac611f9ee6d15b8b8c9cd15ff
Author: Father Chrysostomos &lt;sprout@cpan.org&gt;
Date:   Sun Dec 7 12:30:54 2014 -0800

    op.c: Use scalar cx, not OA_RETSCALAR, for optimisations

-- 
andreas
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;22&nbsp;17:55:59&nbsp;2014</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> ANDK [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Dec 21 08:36:02 2014, andreas.koenig.7os6VVqR@franz.ak.mind.de wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Given the two patches to D:A applied, this bleadperl commit broke
&gt; t/padrange.t: v5.21.6-352-gc46871e
&gt; 
&gt; commit c46871e754baf56ac611f9ee6d15b8b8c9cd15ff
&gt; Author: Father Chrysostomos &lt;sprout@cpan.org&gt;
&gt; Date:   Sun Dec 7 12:30:54 2014 -0800
&gt; 
&gt;     op.c: Use scalar cx, not OA_RETSCALAR, for optimisations
&gt; 
</div>
In that commit I partially disabled an optimisation, resulting in an op tree that Data::Alias did not expect.  I have restored the optimisation in commit d964400, and Data::Alias now passes all its tests with both these patches applied, even though the second one has ‘unfinished’ in the file name.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;20&nbsp;16:13:26&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2014-12-22 17:55:59, SPROUT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun Dec 21 08:36:02 2014, andreas.koenig.7os6VVqR@franz.ak.mind.de
&gt; wrote:
<div class="message-stanza open">&gt; &gt; Given the two patches to D:A applied, this bleadperl commit broke
&gt; &gt; t/padrange.t: v5.21.6-352-gc46871e
&gt; &gt;
&gt; &gt; commit c46871e754baf56ac611f9ee6d15b8b8c9cd15ff
&gt; &gt; Author: Father Chrysostomos &lt;sprout@cpan.org&gt;
&gt; &gt; Date:   Sun Dec 7 12:30:54 2014 -0800
&gt; &gt;
&gt; &gt; op.c: Use scalar cx, not OA_RETSCALAR, for optimisations
&gt; &gt;
</div>&gt; 
&gt; In that commit I partially disabled an optimisation, resulting in an
&gt; op tree that Data::Alias did not expect.  I have restored the
&gt; optimisation in commit d964400, and Data::Alias now passes all its
&gt; tests with both these patches applied, even though the second one has
&gt; ‘unfinished’ in the file name.
</div>
Patch is still needed for perl 5.21.10.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;03&nbsp;11:20:25&nbsp;2015</span>
    <span class="description">gregoa [...] cpan.org -  Cc GREGOA added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;03&nbsp;14:25:05&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-03-20 16:13:26, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2014-12-22 17:55:59, SPROUT wrote:
<div class="message-stanza open">&gt; &gt; On Sun Dec 21 08:36:02 2014, andreas.koenig.7os6VVqR@franz.ak.mind.de
&gt; &gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt; Given the two patches to D:A applied, this bleadperl commit broke
&gt; &gt; &gt; t/padrange.t: v5.21.6-352-gc46871e
&gt; &gt; &gt;
&gt; &gt; &gt; commit c46871e754baf56ac611f9ee6d15b8b8c9cd15ff
&gt; &gt; &gt; Author: Father Chrysostomos &lt;sprout@cpan.org&gt;
&gt; &gt; &gt; Date:   Sun Dec 7 12:30:54 2014 -0800
&gt; &gt; &gt;
&gt; &gt; &gt; op.c: Use scalar cx, not OA_RETSCALAR, for optimisations
&gt; &gt; &gt;
</div>&gt; &gt; 
&gt; &gt; In that commit I partially disabled an optimisation, resulting in an
&gt; &gt; op tree that Data::Alias did not expect.  I have restored the
&gt; &gt; optimisation in commit d964400, and Data::Alias now passes all its
&gt; &gt; tests with both these patches applied, even though the second one has
&gt; &gt; ‘unfinished’ in the file name.
</div>&gt; 
&gt; Patch is still needed for perl 5.21.10.
&gt; 
&gt; 
</div>
And for the stable perl 5.22.0.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;15&nbsp;16:01:18&nbsp;2015</span>
    <span class="description">ether [...] cpan.org -  Cc ETHER added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;18&nbsp;04:44:44&nbsp;2015</span>
    <span class="description">ppisar [...] redhat.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ppisar [...] redhat.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dne St 03.čen.2015 14:25:05, SREZIC napsal&#40;a&#41;:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2015-03-20 16:13:26, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; On 2014-12-22 17:55:59, SPROUT wrote:
<div class="message-stanza open">&gt; &gt; &gt; On Sun Dec 21 08:36:02 2014, andreas.koenig.7os6VVqR@franz.ak.mind.de
&gt; &gt; &gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; Given the two patches to D:A applied, this bleadperl commit broke
&gt; &gt; &gt; &gt; t/padrange.t: v5.21.6-352-gc46871e
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; commit c46871e754baf56ac611f9ee6d15b8b8c9cd15ff
&gt; &gt; &gt; &gt; Author: Father Chrysostomos &lt;sprout@cpan.org&gt;
&gt; &gt; &gt; &gt; Date:   Sun Dec 7 12:30:54 2014 -0800
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; op.c: Use scalar cx, not OA_RETSCALAR, for optimisations
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; 
&gt; &gt; &gt; In that commit I partially disabled an optimisation, resulting in an
&gt; &gt; &gt; op tree that Data::Alias did not expect.  I have restored the
&gt; &gt; &gt; optimisation in commit d964400, and Data::Alias now passes all its
&gt; &gt; &gt; tests with both these patches applied, even though the second one has
&gt; &gt; &gt; ‘unfinished’ in the file name.
</div>&gt; &gt; 
&gt; &gt; Patch is still needed for perl 5.21.10.
&gt; &gt; 
&gt; &gt; 
</div>&gt; 
&gt; And for the stable perl 5.22.0.
</div>
If I apply all the three patches, it will compile, but tests will fail like a hell for me with perl-5.22.0:

$ prove -b
t/01_deref.t ............. ok
t/03_copy.t .............. Useless use of anonymous hash &#40;{}&#41; in void context at t/03_copy.t line 19.
# Looks like your test exited with 2 before it could output anything.
t/03_copy.t .............. Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
Failed 14/14 subtests 
t/04_alias_parse.t ....... Not enough arguments for Test::More::is at t/04_alias_parse.t line 23, near &#34;42;&#34;
Not enough arguments for Test::More::is at t/04_alias_parse.t line 28, near &#34;42;&#34;
Not enough arguments for Test::More::is at t/04_alias_parse.t line 31, near &#34;1;&#34;
Not enough arguments for Test::More::is at t/04_alias_parse.t line 33, near &#34;1;&#34;
syntax error at t/04_alias_parse.t line 35, near &#34;;x&#34;
syntax error at t/04_alias_parse.t line 36, near &#34;;x&#34;
Not enough arguments for Test::More::is at t/04_alias_parse.t line 39, near &#34;1;&#34;
Not enough arguments for Test::More::is at t/04_alias_parse.t line 41, near &#34;1;&#34;
Global symbol &#34;%lias&#34; requires explicit package name &#40;did you forget to declare &#34;my %lias&#34;?&#41; at t/04_alias_parse.t line 48.
BEGIN not safe after errors--compilation aborted at t/04_alias_parse.t line 59.
# Looks like your test exited with 2 before it could output anything.
t/04_alias_parse.t ....... Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
Failed 23/23 subtests 
t/04_swap.t .............. ok

[etc.]
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;18&nbsp;13:33:48&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-06-18 04:44:44, ppisar wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Dne St 03.čen.2015 14:25:05, SREZIC napsal&#40;a&#41;:
<div class="message-stanza open">&gt; &gt; On 2015-03-20 16:13:26, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; &gt; On 2014-12-22 17:55:59, SPROUT wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; On Sun Dec 21 08:36:02 2014,
&gt; &gt; &gt; &gt; andreas.koenig.7os6VVqR@franz.ak.mind.de
&gt; &gt; &gt; &gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; Given the two patches to D:A applied, this bleadperl commit
&gt; &gt; &gt; &gt; &gt; broke
&gt; &gt; &gt; &gt; &gt; t/padrange.t: v5.21.6-352-gc46871e
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; commit c46871e754baf56ac611f9ee6d15b8b8c9cd15ff
&gt; &gt; &gt; &gt; &gt; Author: Father Chrysostomos &lt;sprout@cpan.org&gt;
&gt; &gt; &gt; &gt; &gt; Date:   Sun Dec 7 12:30:54 2014 -0800
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; op.c: Use scalar cx, not OA_RETSCALAR, for optimisations
&gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; In that commit I partially disabled an optimisation, resulting in
&gt; &gt; &gt; &gt; an
&gt; &gt; &gt; &gt; op tree that Data::Alias did not expect.  I have restored the
&gt; &gt; &gt; &gt; optimisation in commit d964400, and Data::Alias now passes all
&gt; &gt; &gt; &gt; its
&gt; &gt; &gt; &gt; tests with both these patches applied, even though the second one
&gt; &gt; &gt; &gt; has
&gt; &gt; &gt; &gt; ‘unfinished’ in the file name.
</div>&gt; &gt; &gt;
&gt; &gt; &gt; Patch is still needed for perl 5.21.10.
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt; And for the stable perl 5.22.0.
</div>&gt; 
&gt; If I apply all the three patches, it will compile, but tests will fail
&gt; like a hell for me with perl-5.22.0:
&gt; 
&gt; $ prove -b
&gt; t/01_deref.t ............. ok
&gt; t/03_copy.t .............. Useless use of anonymous hash &#40;{}&#41; in void
&gt; context at t/03_copy.t line 19.
&gt; # Looks like your test exited with 2 before it could output anything.
&gt; t/03_copy.t .............. Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
&gt;  Failed 14/14 subtests
&gt; t/04_alias_parse.t ....... Not enough arguments for Test::More::is at
&gt; t/04_alias_parse.t line 23, near &#34;42;&#34;
&gt; Not enough arguments for Test::More::is at t/04_alias_parse.t line 28,
&gt; near &#34;42;&#34;
&gt; Not enough arguments for Test::More::is at t/04_alias_parse.t line 31,
&gt; near &#34;1;&#34;
&gt; Not enough arguments for Test::More::is at t/04_alias_parse.t line 33,
&gt; near &#34;1;&#34;
&gt; syntax error at t/04_alias_parse.t line 35, near &#34;;x&#34;
&gt; syntax error at t/04_alias_parse.t line 36, near &#34;;x&#34;
&gt; Not enough arguments for Test::More::is at t/04_alias_parse.t line 39,
&gt; near &#34;1;&#34;
&gt; Not enough arguments for Test::More::is at t/04_alias_parse.t line 41,
&gt; near &#34;1;&#34;
&gt; Global symbol &#34;%lias&#34; requires explicit package name &#40;did you forget
&gt; to declare &#34;my %lias&#34;?&#41; at t/04_alias_parse.t line 48.
&gt; BEGIN not safe after errors--compilation aborted at t/04_alias_parse.t
&gt; line 59.
&gt; # Looks like your test exited with 2 before it could output anything.
&gt; t/04_alias_parse.t ....... Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
&gt;  Failed 23/23 subtests
&gt; t/04_swap.t .............. ok
&gt; 
&gt; [etc.]
</div>
For a successful compile &#38; test, I have to apply the last three patches mentioned in
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/eserte/srezic-cpan-distroprefs/blob/master/Data-Alias.yml">https://github.com/eserte/srezic-cpan-distroprefs/blob/master/Data-Alias.yml</a></span>
&#40;or just use this distroprefs file with CPAN.pm&#41;. This works for me on Debian wheezy, Debian jessie, FreeBSD 9.2 and FreeBSD 10.1.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;18&nbsp;13:35:43&nbsp;2015</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> ppisar [...] redhat.com, ANDK [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-06-18 10:33:48, SREZIC wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; For a successful compile &#38; test, I have to apply the last three
&gt; patches mentioned in
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/eserte/srezic-cpan-distroprefs/blob/master/Data-">https://github.com/eserte/srezic-cpan-distroprefs/blob/master/Data-</a></span>
&gt; Alias.yml
&gt; &#40;or just use this distroprefs file with CPAN.pm&#41;. This works for me on
&gt; Debian wheezy, Debian jessie, FreeBSD 9.2 and FreeBSD 10.1.
</div>

I&#39;m happy to help out with getting this release out if tuits are in short supply.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;19&nbsp;02:00:22&nbsp;2015</span>
    <span class="description">ppisar [...] redhat.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ppisar [...] redhat.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dne Čt 18.čen.2015 04:44:44, ppisar napsal&#40;a&#41;:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If I apply all the three patches, it will compile, but tests will fail
&gt; like a hell for me with perl-5.22.0:
&gt; 
&gt; $ prove -b
&gt; t/01_deref.t ............. ok
&gt; t/03_copy.t .............. Useless use of anonymous hash &#40;{}&#41; in void
&gt; context at t/03_copy.t line 19.
</div>
It looks like there is problem with aliasing {} blocks. Only tests exhibiting the the curly bracket statements seems failing.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;20&nbsp;05:40:06&nbsp;2015</span>
    <span class="description">paul [...] city-fan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> paul [...] city-fan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Jun 19 02:00:22 2015, ppisar wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Dne Čt 18.čen.2015 04:44:44, ppisar napsal&#40;a&#41;:
<div class="message-stanza open">&gt; &gt; If I apply all the three patches, it will compile, but tests will
&gt; &gt; fail
&gt; &gt; like a hell for me with perl-5.22.0:
&gt; &gt;
&gt; &gt; $ prove -b
&gt; &gt; t/01_deref.t ............. ok
&gt; &gt; t/03_copy.t .............. Useless use of anonymous hash &#40;{}&#41; in void
&gt; &gt; context at t/03_copy.t line 19.
</div>&gt; 
&gt; It looks like there is problem with aliasing {} blocks. Only tests
&gt; exhibiting the the curly bracket statements seems failing.
</div>
I wonder if this is anything to do with Fedora&#39;s perl being threaded? There was an issue with Test-Vars 0.006 that was fixed for &#34;regular&#34; 5.22.0 but still broke in Fedora perl, which is threaded. Perhaps this is something similar?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;20&nbsp;17:09:32&nbsp;2015</span>
    <span class="description">gregoa [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">FWIW, I&#39;m getting the same test failures as ppisar when I add SREZIC&#39;s 3 patches in debian/unstable with perl 5.22.0 from experimental.

Cheers,
gregor
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;02&nbsp;09:26:04&nbsp;2015</span>
    <span class="description">gregoa [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Anything new here?

We are about to upload Perl 5.22 to Debian/unstable soon,
which means this module will have to be removed from testing first,
and later from the archive completely.

Any help welcome!

Cheers,
gregor, Debian Perl Group
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;13&nbsp;11:58:23&nbsp;2015</span>
    <span class="description">CARNIL [...] cpan.org -  Cc CARNIL added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;21&nbsp;01:54:54&nbsp;2015</span>
    <span class="description">ZEFRAM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed in Data-Alias-1.19, now on CPAN.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;21&nbsp;01:55:02&nbsp;2015</span>
    <span class="description">ZEFRAM [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;21&nbsp;11:20:09&nbsp;2015</span>
    <span class="description">gregoa [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Unfortunately I&#39;m still seeing problems with 1.19 under perl 5.22 on Debian unstable; it builds but the test suite fails.

Log attached.

Cheers,
gregor
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> libdata-alias-perl_1.19-1_amd64.build</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;21&nbsp;11:45:43&nbsp;2015</span>
    <span class="description">zefram [...] fysh.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #100944] Test failure with perl 5.21.6</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 21 Oct 2015 16:45:28 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> gregor herrmann via RT &lt;bug-Data-Alias [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">gregor herrmann via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;Unfortunately I&#39;m still seeing problems with 1.19 under perl 5.22 on Debian unstable; it builds but the test suite fails.
</div>
This is a different problem.  Please open a new ticket for it, and
please include the full perl -V output.  I don&#39;t see that behaviour on
a stock 5.22.

-zefram
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;21&nbsp;18:34:46&nbsp;2015</span>
    <span class="description">zefram [...] fysh.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #100944] Test failure with perl 5.21.6</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 21 Oct 2015 23:34:33 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> gregor herrmann via RT &lt;bug-Data-Alias [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The new problem is fixed in Data-Alias-1.20, now on CPAN.

-zefram
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;13:27:46&nbsp;2015</span>
    <span class="description">gregoa [...] debian.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #100944] Test failure with perl 5.21.6</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 22 Oct 2015 19:25:41 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Zefram via RT &lt;bug-Data-Alias [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> gregor herrmann &lt;gregoa [...] debian.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, 21 Oct 2015 18:34:47 -0400, Zefram via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The new problem is fixed in Data-Alias-1.20, now on CPAN.
</div>
Great.
Tested on Debian and uploaded.

Many thanks!

Cheers,
gregor

-- 
 .&#39;&#39;`.  Homepage: <span class="clickylink"><a target="new" rel="nofollow" href="http://info.comodo.priv.at/">http://info.comodo.priv.at/</a></span> - OpenPGP key 0xBB3A68018649AA06
 : :&#39; : Debian GNU/Linux user, admin, and developer -  <span class="clickylink"><a target="new" rel="nofollow" href="https://www.debian.org/">https://www.debian.org/</a></span>
 `. `&#39;  Member of VIBE!AT &#38; SPI, fellow of the Free Software Foundation Europe
   `-   NP: Simon &#38; Garfunkel: Bridge Over Troubled Water
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
