<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #42332 for XML-LibXSLT: </title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #42332 for XML-LibXSLT: </h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/XML-LibXSLT/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/XML-LibXSLT/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/XML-LibXSLT/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/XML-LibXSLT/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/XML-LibXSLT">XML-LibXSLT CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">42332</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/XML-LibXSLT/Active/">XML-LibXSLT</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
peter_schlaifer [...] ibi.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-37372-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.63    </td>
  </tr>
  <tr id="CF-37373-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




xslbug.xsl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/552808/278563/xslbug.xsl">
Mon Jan 12 10:45:17 2009 (1.6k) by peter_schlaifer [...] ibi.com
</a>
</font></li>
</ul>


xslbug.zip<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/552808/278566/xslbug.zip">
Mon Jan 12 10:45:17 2009 (1.5k) by peter_schlaifer [...] ibi.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;12&nbsp;10:45:17&nbsp;2009</span>
    <span class="description">peter_schlaifer [...] ibi.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The xslbug.xsl, included in the zip-file documents 2 separate problems
with the 1.63 version of LibXSLT. Be advised that the LibXSLT module is
effectively unuseable with output method = text as follows:

1&#41; &#38;lt; and &#38;gt; are always escaped unless you use the d-o-e option.
This is just wrong.

2&#41; the &#39;d-o-e&#39; option inserts a newline before and after the
text-element which is wrong and additionally makes this hack unuseable
as a workaround.

Summary of the files included in the zip file

apply.pl: a simple perl script which loads libxslt and libxml, and
process a list of files using the first arg: perl -w apply.pl xsl-file
xml-file+

xslbug.xml: a trivial single-element xml file.

xslbug.xsl: 3 simple, annotated output sequences which expose the two
problems.

console.txt: contains the output from running xsltproc, running LibXSLT,
and the associated version information for all the modules and programs
used.

The workaround for this problem is to call the XSLTPROC module directly
on file versions of the inputs and then load the results as needed for
further processing.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> xslbug.xsl</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&lt;!-- xslbug.xml:

&lt;?xml version=&#34;1.0&#34;?&gt;
&lt;DUMMY&gt;
&lt;/DUMMY&gt;

--&gt;

&lt;!-- xslbug.xsl: --&gt;

&lt;xsl:stylesheet version=&#34;1.0&#34; xmlns:xsl=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</a></span>&#34;&gt;

  &lt;xsl:output method=&#34;text&#34;/&gt;

&lt;!-- stylesheet outputs

&lt;?xml version=&#34;1.0&#34;?&gt;

  how can this be correct behavior with the &#39;method = text ??

--&gt;

  &lt;xsl:template match=&#34;/&#34; &gt;

&lt;!-- desired output = &#39;&#34;testid: &lt;hello&gt;goodbye&#34;&#39; --&gt;

SOD&#38;quot;simple-text: &#38;lt;hello&#38;gt;goodbye&#38;quot;EOD

&lt;!-- simple-6ext ouputs

SOD&#34;simple-text: &#38;lt;hello&#38;gt;goodbye&#34;EOD

  notice &#38;quot is translated, while the &#38;lt;,$gt; are not

  there should be no output escaping as indicated by youyr reference

  &#40;it&#39;s this failure that led me to try a CDATA section&#41;

--&gt;

SOD&lt;![CDATA[&#34;cdata-section: &lt;hello&gt;goodbye&#34;]]&gt;EOD

&lt;!-- cdata-section outputs

SOD&#34;cdata-section: &#38;lt;hello&#38;gt;goodbye&#34;EOD

  notice &lt; and &gt; in the CDATA section are escaped. while the quotes are passed through.

  how can this be correct behavior

  &#40;this failure led me to try d-o-e&#41;

--&gt;

SOD&lt;xsl:text disable-output-escaping=&#34;yes&#34;&gt;&#38;quot;d-o-e-text-element: &#38;lt;hello&#38;gt;goodbye&#38;quot;&lt;/xsl:text&gt;EOD

&lt;!-- d-o-e outputs

SOD
&#34;d-o-e-text-element: &lt;hello&gt;goodbye&#34;
EOD

  so this is the behavior I expected without d-o-e enabled  except I get newlines
  before and after the text element: which makes it totally useless as a workaround.

--&gt;

  &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;

&lt;!-- this is the complete unedited output

C:\myTk\dd&gt;xr apply xslbug xslbug
&lt;?xml version=&#34;1.0&#34;?&gt;


SOD&#34;simple-text: &#38;lt;hello&#38;gt;goodbye&#34;EOD



SOD&#34;cdata-section: &#38;lt;hello&#38;gt;goodbye&#34;EOD



SOD
&#34;d-o-e-text-element: &lt;hello&gt;goodbye&#34;
EOD


C:\myTk\dd&gt;

--&gt;

</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> xslbug.zip</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/552808/278566/xslbug.zip">Download xslbug.zip</a><br />
<span class="downloadcontenttype">application/zip 1.5k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;12&nbsp;13:03:20&nbsp;2009</span>
    <span class="description">peter_schlaifer [...] ibi.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> peter_schlaifer [...] ibi.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jan 12 10:45:17 2009, pxs42 wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The xslbug.xsl, included in the zip-file documents 2 separate problems
&gt; with the 1.63 version of LibXSLT. Be advised that the LibXSLT module is
&gt; effectively unuseable with output method = text as follows:
&gt; 
&gt; 1&#41; &#38;lt; and &#38;gt; are always escaped unless you use the d-o-e option.
&gt; This is just wrong.
&gt; 
&gt; 2&#41; the &#39;d-o-e&#39; option inserts a newline before and after the
&gt; text-element which is wrong and additionally makes this hack unuseable
&gt; as a workaround.
&gt; 
&gt; Summary of the files included in the zip file
&gt; 
&gt; apply.pl: a simple perl script which loads libxslt and libxml, and
&gt; process a list of files using the first arg: perl -w apply.pl xsl-file
&gt; xml-file+
&gt; 
&gt; xslbug.xml: a trivial single-element xml file.
&gt; 
&gt; xslbug.xsl: 3 simple, annotated output sequences which expose the two
&gt; problems.
&gt; 
&gt; console.txt: contains the output from running xsltproc, running LibXSLT,
&gt; and the associated version information for all the modules and programs
&gt; used.
&gt; 
&gt; The workaround for this problem is to call the XSLTPROC module directly
&gt; on file versions of the inputs and then load the results as needed for
&gt; further processing.
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;12&nbsp;13:05:13&nbsp;2009</span>
    <span class="description">peter_schlaifer [...] ibi.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jan 12 10:45:17 2009, pxs42 wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The xslbug.xsl, included in the zip-file documents 2 separate problems
&gt; with the 1.63 version of LibXSLT. Be advised that the LibXSLT module is
&gt; effectively unuseable with output method = text as follows:
&gt; 
&gt; 1&#41; &#38;lt; and &#38;gt; are always escaped unless you use the d-o-e option.
&gt; This is just wrong.
&gt; 
&gt; 2&#41; the &#39;d-o-e&#39; option inserts a newline before and after the
&gt; text-element which is wrong and additionally makes this hack unuseable
&gt; as a workaround.
&gt; 
&gt; Summary of the files included in the zip file
&gt; 
&gt; apply.pl: a simple perl script which loads libxslt and libxml, and
&gt; process a list of files using the first arg: perl -w apply.pl xsl-file
&gt; xml-file+
&gt; 
&gt; xslbug.xml: a trivial single-element xml file.
&gt; 
&gt; xslbug.xsl: 3 simple, annotated output sequences which expose the two
&gt; problems.
&gt; 
&gt; console.txt: contains the output from running xsltproc, running LibXSLT,
&gt; and the associated version information for all the modules and programs
&gt; used.
&gt; 
&gt; The workaround for this problem is to call the XSLTPROC module directly
&gt; on file versions of the inputs and then load the results as needed for
&gt; further processing.
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;12&nbsp;13:11:10&nbsp;2009</span>
    <span class="description">peter_schlaifer [...] ibi.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> problem with XML:LibXSLT</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> pajas [...] matfyz.org, gzlist [...] googlemail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">this bug should be closed or deleted - my dumb user error of loading
output text into xml dom and printing that instead of using the
stylesheet-&gt;output_string method. my apologies.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;12&nbsp;13:11:14&nbsp;2009</span>
    <span class="description">peter_schlaifer [...] ibi.com -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;23&nbsp;07:56:59&nbsp;2009</span>
    <span class="description">pajas [...] matfyz.cz -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dne po 12.led.2009 13:11:10, pxs42 napsal&#40;a&#41;:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; this bug should be closed or deleted - my dumb user error of loading
&gt; output text into xml dom and printing that instead of using the
&gt; stylesheet-&gt;output_string method. my apologies.
</div>
Closing. The documentation will attempt to warn about this pitfall.

-- Petr
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;23&nbsp;07:57:00&nbsp;2009</span>
    <span class="description">pajas [...] matfyz.cz -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
