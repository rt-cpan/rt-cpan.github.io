<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #17699 for CPAN: Win32 CamelPack 5.6 fails to update to 1.84</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #17699 for CPAN: Win32 CamelPack 5.6 fails to update to 1.84</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=CPAN">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=CPAN">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=CPAN">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=CPAN">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/CPAN">CPAN CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">17699</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=CPAN">CPAN</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
adamk [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-8164-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-8165-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=17699">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-165690" href="/Public/Bug/Display.html?id=17699#txn-165690">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;17&nbsp;10:40:36&nbsp;2006</span>
    <span class="description">adamk [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Win32 CamelPack 5.6 fails to update to 1.84</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/165690/52977/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/52977">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Installed CamelPack 5.6 on Win32, tried to install Bundle::CPAN, got the
following.


Checksum for \.cpan\sources\authors\id\A\AN\ANDK\CPAN-1.84.tar.gz ok
Scanning cache \.cpan\build\. for sizes
CPAN: Archive::Tar loaded ok
CPAN-1.84/
CPAN-1.84/t/
CPAN-1.84/t/30shell.t
CPAN-1.84/t/50pod.t
CPAN-1.84/t/CPAN/
CPAN-1.84/t/CPAN/modules/
CPAN-1.84/t/CPAN/modules/02packages.details.txt
CPAN-1.84/t/CPAN/modules/03modlist.data
CPAN-1.84/t/CPAN/authors/
CPAN-1.84/t/CPAN/authors/id/
CPAN-1.84/t/CPAN/authors/id/A/
CPAN-1.84/t/CPAN/authors/id/A/AN/
CPAN-1.84/t/CPAN/authors/id/A/AN/ANDK/
CPAN-1.84/t/CPAN/authors/id/A/AN/ANDK/CPAN-Test-Dummy-Perl5-Build-Fails-1.01.tar
.gz
CPAN-1.84/t/CPAN/authors/id/A/AN/ANDK/CPAN-Test-Dummy-Perl5-Make-1.01.tar.gz
CPAN-1.84/t/CPAN/authors/id/A/AN/ANDK/CPAN-Test-Dummy-Perl5-Make-Zip-1.01.zip
CPAN-1.84/t/CPAN/authors/id/A/AN/ANDK/CPAN-Test-Dummy-Perl5-BuildOrMake-1.01.tar
.gz
CPAN-1.84/t/CPAN/authors/id/A/AN/ANDK/CPAN-Test-Dummy-Perl5-Make-Failearly-1.01.
tar.gz
CPAN-1.84/t/CPAN/authors/id/A/AN/ANDK/CPAN-Test-Dummy-Perl5-Build-1.01.tar.gz
CPAN-1.84/t/CPAN/authors/id/A/AN/ANDK/CHECKSUMS
CPAN-1.84/t/CPAN/authors/id/A/AN/CHECKSUMS
CPAN-1.84/t/CPAN/authors/id/A/CHECKSUMS
CPAN-1.84/t/CPAN/authors/id/CHECKSUMS
CPAN-1.84/t/CPAN/authors/01mailrc.txt
CPAN-1.84/t/CPAN/TestConfig.pm
CPAN-1.84/t/02nox.t
CPAN-1.84/t/01loadme.t
CPAN-1.84/t/dot-cpan/
CPAN-1.84/t/dot-cpan/Bundle/
CPAN-1.84/t/dot-cpan/Bundle/CpanTestDummies.pm
CPAN-1.84/t/10version.t
CPAN-1.84/t/03pkgs.t
CPAN-1.84/t/00signature.t
CPAN-1.84/t/README.shell.txt
CPAN-1.84/t/11mirroredby.t
CPAN-1.84/lib/
CPAN-1.84/lib/CPAN.pm
CPAN-1.84/lib/Bundle/
CPAN-1.84/lib/Bundle/CPAN.pm
CPAN-1.84/lib/CPAN/
CPAN-1.84/lib/CPAN/Debug.pm
CPAN-1.84/lib/CPAN/FirstTime.pm
CPAN-1.84/lib/CPAN/Admin.pm
CPAN-1.84/lib/CPAN/Tarzip.pm
CPAN-1.84/lib/CPAN/Version.pm
CPAN-1.84/lib/CPAN/Nox.pm
CPAN-1.84/lib/CPAN/HandleConfig.pm
CPAN-1.84/inc/
CPAN-1.84/inc/Test/
CPAN-1.84/inc/Test/Builder.pm
CPAN-1.84/inc/Test/More.pm
CPAN-1.84/PAUSE2003.pub
CPAN-1.84/Changes
CPAN-1.84/MANIFEST
CPAN-1.84/scripts/
CPAN-1.84/scripts/cpan
CPAN-1.84/META.yml
CPAN-1.84/ChangeLog
CPAN-1.84/Changes.old
CPAN-1.84/ChangeLog.old
CPAN-1.84/MANIFEST.SKIP
CPAN-1.84/PAUSE2005.pub
CPAN-1.84/Todo
CPAN-1.84/SIGNATURE
CPAN-1.84/README
CPAN-1.84/Makefile.PL

The bundle file &#34;\.cpan\Bundle\CPAN.pm&#34; may be a broken
bundlefile. It seems not to contain any bundle definition.
Please check the file and if it is bogus, please delete it.
Sorry for the inconvenience.

The bundle file &#34;\.cpan\Bundle\CPAN.pm&#34; may be a broken
bundlefile. It seems not to contain any bundle definition.
Please check the file and if it is bogus, please delete it.
Sorry for the inconvenience.

The bundle file &#34;\.cpan\Bundle\CPAN.pm&#34; may be a broken
bundlefile. It seems not to contain any bundle definition.
Please check the file and if it is bogus, please delete it.
Sorry for the inconvenience.

The bundle file &#34;\.cpan\Bundle\CPAN.pm&#34; may be a broken
bundlefile. It seems not to contain any bundle definition.
Please check the file and if it is bogus, please delete it.
Sorry for the inconvenience.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">cpan&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-165767" href="/Public/Bug/Display.html?id=17699#txn-165767">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;17&nbsp;13:31:43&nbsp;2006</span>
    <span class="description">andreas.koenig.gmwojprw [...] franz.ak.mind.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17699] Win32 CamelPack 5.6 fails to update to 1.84</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 17 Feb 2006 19:30:53 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> andreas.koenig.gmwojprw [...] franz.ak.mind.de &#40;Andreas J. Koenig&#41;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/165767/53025/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/53025">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 579b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt; On Fri, 17 Feb 2006 10:40:37 -0500 &#40;EST&#41;, &#34; via RT&#34; &lt;bug-CPAN@rt.cpan.org&gt; said:
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; The bundle file &#34;\.cpan\Bundle\CPAN.pm&#34; may be a broken
  &gt; bundlefile. It seems not to contain any bundle definition.
  &gt; Please check the file and if it is bogus, please delete it.
  &gt; Sorry for the inconvenience.
</div>
I&#39;ve heard this before and I believe it is a bug in CPAN 1.76 and
fixed in 1.84.

If you install CPAN 1.84 first and activate it and then install
Bundle::Cpan, then it should work. Of course you must follow the
advice to remove the bogus bundle file first.

-- 
andreas
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-165768" href="/Public/Bug/Display.html?id=17699#txn-165768">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;17&nbsp;13:31:45&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-165771" href="/Public/Bug/Display.html?id=17699#txn-165771">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;17&nbsp;13:40:55&nbsp;2006</span>
    <span class="description">andreas.koenig.gmwojprw [...] franz.ak.mind.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> undisclosed-recipients:;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17699] Win32 CamelPack 5.6 fails to update to 1.84</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 17 Feb 2006 19:30:31 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> andreas.koenig.gmwojprw [...] franz.ak.mind.de &#40;Andreas J. Koenig&#41;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/165771/53028/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/53028">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 579b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt; On Fri, 17 Feb 2006 10:40:37 -0500 &#40;EST&#41;, &#34; via RT&#34; &lt;bug-CPAN@rt.cpan.org&gt; said:
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; The bundle file &#34;\.cpan\Bundle\CPAN.pm&#34; may be a broken
  &gt; bundlefile. It seems not to contain any bundle definition.
  &gt; Please check the file and if it is bogus, please delete it.
  &gt; Sorry for the inconvenience.
</div>
I&#39;ve heard this before and I believe it is a bug in CPAN 1.76 and
fixed in 1.84.

If you install CPAN 1.84 first and activate it and then install
Bundle::Cpan, then it should work. Of course you must follow the
advice to remove the bogus bundle file first.

-- 
andreas
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-165772" href="/Public/Bug/Display.html?id=17699#txn-165772">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;17&nbsp;13:40:57&nbsp;2006</span>
    <span class="description">andreas.koenig.gmwojprw [...] franz.ak.mind.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> undisclosed-recipients:;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17699] Win32 CamelPack 5.6 fails to update to 1.84</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 17 Feb 2006 19:30:45 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> andreas.koenig.gmwojprw [...] franz.ak.mind.de &#40;Andreas J. Koenig&#41;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/165772/53029/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/53029">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 579b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt; On Fri, 17 Feb 2006 10:40:37 -0500 &#40;EST&#41;, &#34; via RT&#34; &lt;bug-CPAN@rt.cpan.org&gt; said:
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; The bundle file &#34;\.cpan\Bundle\CPAN.pm&#34; may be a broken
  &gt; bundlefile. It seems not to contain any bundle definition.
  &gt; Please check the file and if it is bogus, please delete it.
  &gt; Sorry for the inconvenience.
</div>
I&#39;ve heard this before and I believe it is a bug in CPAN 1.76 and
fixed in 1.84.

If you install CPAN 1.84 first and activate it and then install
Bundle::Cpan, then it should work. Of course you must follow the
advice to remove the bogus bundle file first.

-- 
andreas
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-165822" href="/Public/Bug/Display.html?id=17699#txn-165822">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;17&nbsp;15:19:33&nbsp;2006</span>
    <span class="description">adam [...] phase-n.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> ADAMK [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17699] Win32 CamelPack 5.6 fails to update to 1.84</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 18 Feb 2006 07:18:39 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Adam Kennedy &lt;adam [...] phase-n.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/165822/53059/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/53059">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 883b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">OK, I found the time to trace this.

Looking at the Bundle file itself... it would appear it&#39;s not the bundle 
file at all.

It&#39;s actually CPAN.pm itself that ends up at Bundle/CPAN.pm.

I&#39;ve got no idea why this might be.

Adam K

andreas.koenig.gmwojprw@franz.ak.mind.de via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt;&gt;On Fri, 17 Feb 2006 10:40:37 -0500 &#40;EST&#41;, &#34; via RT&#34; &lt;bug-CPAN@rt.cpan.org&gt; said:
</div>&gt; 
&gt; 
<div class="message-stanza open">&gt;   &gt; The bundle file &#34;\.cpan\Bundle\CPAN.pm&#34; may be a broken
&gt;   &gt; bundlefile. It seems not to contain any bundle definition.
&gt;   &gt; Please check the file and if it is bogus, please delete it.
&gt;   &gt; Sorry for the inconvenience.
</div>&gt; 
&gt; I&#39;ve heard this before and I believe it is a bug in CPAN 1.76 and
&gt; fixed in 1.84.
&gt; 
&gt; If you install CPAN 1.84 first and activate it and then install
&gt; Bundle::Cpan, then it should work. Of course you must follow the
&gt; advice to remove the bogus bundle file first.
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-165825" href="/Public/Bug/Display.html?id=17699#txn-165825">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;17&nbsp;15:32:31&nbsp;2006</span>
    <span class="description">adam [...] phase-n.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org,  ADAMK [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17699] Win32 CamelPack 5.6 fails to update to 1.84</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 18 Feb 2006 07:31:45 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Adam Kennedy &lt;adam [...] phase-n.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Adam Kennedy &lt;adam [...] phase-n.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/165825/53062/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/53062">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Actually, I tell a lie!

I nailed the bugger down.

CPAN::Bundle::find_bundle_file iterates through looking for BOTH 
Bundle/CPAN.pm and then if it can&#39;t find that, just plain CPAN.pm.

Except instead of going all the way to the bottom of the MANIFEST and 
then starting again, it does BOTH searches in parallel.

SO, it means if CPAN.pm is higher up in the MANIFEST that 
Bundle/CPAN.pm, it gets found by mistake, and the wrong file gets copied 
to the Bundle location.

So, two part solution.

Firstly, in find_bundle_file, if you haven&#39;t already make it re-read the 
MANIFEST and start from the top again.

And second, when you package up CPAN.pm, as a special case so you can 
work with older Perls, you need to ensure that Bundle/CPAN.pm is ALWAYS 
listed higher in the MANIFEST than CPAN.pm itself.

Once a 1.85 is uploaded with the both of those, it will get rid of all 
past, present and future errors of this type.

A 100% solution! :&#41;

Adam K

Adam Kennedy wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; OK, I found the time to trace this.
&gt; 
&gt; Looking at the Bundle file itself... it would appear it&#39;s not the bundle 
&gt; file at all.
&gt; 
&gt; It&#39;s actually CPAN.pm itself that ends up at Bundle/CPAN.pm.
&gt; 
&gt; I&#39;ve got no idea why this might be.
&gt; 
&gt; Adam K
&gt; 
&gt; andreas.koenig.gmwojprw@franz.ak.mind.de via RT wrote:
&gt; 
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Fri, 17 Feb 2006 10:40:37 -0500 &#40;EST&#41;, &#34; via RT&#34; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;bug-CPAN@rt.cpan.org&gt; said:
</div>&gt;&gt;
&gt;&gt;
&gt;&gt;
<div class="message-stanza open">&gt;&gt;   &gt; The bundle file &#34;\.cpan\Bundle\CPAN.pm&#34; may be a broken
&gt;&gt;   &gt; bundlefile. It seems not to contain any bundle definition.
&gt;&gt;   &gt; Please check the file and if it is bogus, please delete it.
&gt;&gt;   &gt; Sorry for the inconvenience.
</div>&gt;&gt;
&gt;&gt; I&#39;ve heard this before and I believe it is a bug in CPAN 1.76 and
&gt;&gt; fixed in 1.84.
&gt;&gt;
&gt;&gt; If you install CPAN 1.84 first and activate it and then install
&gt;&gt; Bundle::Cpan, then it should work. Of course you must follow the
&gt;&gt; advice to remove the bogus bundle file first.
&gt;&gt;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-165974" href="/Public/Bug/Display.html?id=17699#txn-165974">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;18&nbsp;03:41:13&nbsp;2006</span>
    <span class="description">andreas.koenig.gmwojprw [...] franz.ak.mind.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17699] Win32 CamelPack 5.6 fails to update to 1.84</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 18 Feb 2006 09:40:19 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> andreas.koenig.gmwojprw [...] franz.ak.mind.de &#40;Andreas J. Koenig&#41;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/165974/53165/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/53165">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt; On Fri, 17 Feb 2006 15:32:32 -0500 &#40;EST&#41;, &#34;adam@phase-n.com via RT&#34; &lt;bug-CPAN@rt.cpan.org&gt; said:
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=17699">http://rt.cpan.org/Ticket/Display.html?id=17699</a></span> &gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; Actually, I tell a lie!
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; I nailed the bugger down.
</div>
Hmmm.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; CPAN::Bundle::find_bundle_file iterates through looking for BOTH 
  &gt; Bundle/CPAN.pm and then if it can&#39;t find that, just plain CPAN.pm.
</div>
I knew that, I didn&#39;t tell you though:-&#40;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; Except instead of going all the way to the bottom of the MANIFEST and 
  &gt; then starting again, it does BOTH searches in parallel.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; SO, it means if CPAN.pm is higher up in the MANIFEST that 
  &gt; Bundle/CPAN.pm, it gets found by mistake, and the wrong file gets copied 
  &gt; to the Bundle location.
</div>
Nope, I don&#39;t believe this is happening.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; So, two part solution.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; Firstly, in find_bundle_file, if you haven&#39;t already make it re-read the 
  &gt; MANIFEST and start from the top again.
</div>
I don&#39;t believe that either. See, there is a &#34;last&#34; as soon as
Bundle/CPAN.pm is found, there is no &#34;last&#34; after just CPAN.pm is
found.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; And second, when you package up CPAN.pm, as a special case so you can 
  &gt; work with older Perls, you need to ensure that Bundle/CPAN.pm is ALWAYS 
  &gt; listed higher in the MANIFEST than CPAN.pm itself.
</div>
Nope, this won&#39;t help. I still believ that my explanation is correct.
The wrong bundle file was either found by an older version of CPAN.pm,
maybe months before, or by other, unknown mechanics.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; Once a 1.85 is uploaded with the both of those, it will get rid of all 
  &gt; past, present and future errors of this type.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; A 100% solution! :&#41;
</div>
If I could believe you, I&#39;d do that, but think for a moment: if your
analysis were right, the bug would show up on Unix too.

-- 
andreas
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-165978" href="/Public/Bug/Display.html?id=17699#txn-165978">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;18&nbsp;04:24:07&nbsp;2006</span>
    <span class="description">adam [...] phase-n.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17699] Win32 CamelPack 5.6 fails to update to 1.84</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 18 Feb 2006 20:09:48 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Adam Kennedy &lt;adam [...] phase-n.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/165978/53168/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/53168">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">

andreas.koenig.gmwojprw@franz.ak.mind.de via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt;&gt; On Fri, 17 Feb 2006 15:32:32 -0500 &#40;EST&#41;, &#34;adam@phase-n.com via RT&#34; &lt;bug-CPAN@rt.cpan.org&gt; said:
</div>&gt; 
<div class="message-stanza open">&gt;   &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=17699">http://rt.cpan.org/Ticket/Display.html?id=17699</a></span> &gt;
</div>&gt; 
<div class="message-stanza open">&gt;   &gt; Actually, I tell a lie!
</div>&gt; 
<div class="message-stanza open">&gt;   &gt; I nailed the bugger down.
</div>&gt; 
&gt; Hmmm.
&gt; 
<div class="message-stanza open">&gt;   &gt; CPAN::Bundle::find_bundle_file iterates through looking for BOTH 
&gt;   &gt; Bundle/CPAN.pm and then if it can&#39;t find that, just plain CPAN.pm.
</div>&gt; 
&gt; I knew that, I didn&#39;t tell you though:-&#40;
&gt; 
<div class="message-stanza open">&gt;   &gt; Except instead of going all the way to the bottom of the MANIFEST and 
&gt;   &gt; then starting again, it does BOTH searches in parallel.
</div>&gt; 
<div class="message-stanza open">&gt;   &gt; SO, it means if CPAN.pm is higher up in the MANIFEST that 
&gt;   &gt; Bundle/CPAN.pm, it gets found by mistake, and the wrong file gets copied 
&gt;   &gt; to the Bundle location.
</div>&gt; 
&gt; Nope, I don&#39;t believe this is happening.
&gt; 
<div class="message-stanza open">&gt;   &gt; So, two part solution.
</div>&gt; 
<div class="message-stanza open">&gt;   &gt; Firstly, in find_bundle_file, if you haven&#39;t already make it re-read the 
&gt;   &gt; MANIFEST and start from the top again.
</div>&gt; 
&gt; I don&#39;t believe that either. See, there is a &#34;last&#34; as soon as
&gt; Bundle/CPAN.pm is found, there is no &#34;last&#34; after just CPAN.pm is
&gt; found.
&gt; 
<div class="message-stanza open">&gt;   &gt; And second, when you package up CPAN.pm, as a special case so you can 
&gt;   &gt; work with older Perls, you need to ensure that Bundle/CPAN.pm is ALWAYS 
&gt;   &gt; listed higher in the MANIFEST than CPAN.pm itself.
</div>&gt; 
&gt; Nope, this won&#39;t help. I still believ that my explanation is correct.
&gt; The wrong bundle file was either found by an older version of CPAN.pm,
&gt; maybe months before, or by other, unknown mechanics.
</div>
Well, I removed the old bundle file and it keeps being reselected.

It this clears things up for you, the Bundle file as extracted from the 
1.84 tarball by CPAN.pm 1.76 and placed in the bundle directory is 245k 
in size.

If I remove the &#34;months before&#34; file and rerun, it keeps copying the 
245k file back in. And I can replicate it reliably.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;   &gt; Once a 1.85 is uploaded with the both of those, it will get rid of all 
&gt;   &gt; past, present and future errors of this type.
</div>&gt; 
<div class="message-stanza open">&gt;   &gt; A 100% solution! :&#41;
</div>&gt; 
&gt; If I could believe you, I&#39;d do that, but think for a moment: if your
&gt; analysis were right, the bug would show up on Unix too.
</div>
hmm.... very very good point.

I shall investigate a little further.

So to summarise I&#39;m certain CPAN.pm is being considered to be the bundle 
file instead of Bundle/CPAN.pm, and I&#39;m certain that the bug is 
lexically withing CPAN::Bundle::find_bundle_file somewhere, but I&#39;m 
probably NOT correct on the specific reason within that function.

Which I&#39;ll take a look at now, and see if I can explain the platform 
issue as well.

Out of curiosity though, is there a specific reason that the 
Bundle::CPAN module has to be inside the main CPAN tarball?

I suspect that even if my specific diagnosis is wrong at a line level, 
moving it out into it&#39;s own dist would fix the problem. But don&#39;t do 
that. I&#39;ll go work out the why-not-on-Unix problem first.

Adam K
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-166045" href="/Public/Bug/Display.html?id=17699#txn-166045">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;18&nbsp;06:06:01&nbsp;2006</span>
    <span class="description">andreas.koenig.gmwojprw [...] franz.ak.mind.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17699] Win32 CamelPack 5.6 fails to update to 1.84</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 18 Feb 2006 12:05:12 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> andreas.koenig.gmwojprw [...] franz.ak.mind.de &#40;Andreas J. Koenig&#41;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/166045/53185/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/53185">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 636b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt; On Sat, 18 Feb 2006 04:24:12 -0500 &#40;EST&#41;, &#34;adam@phase-n.com via RT&#34; &lt;bug-CPAN@rt.cpan.org&gt; said:
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; Well, I removed the old bundle file and it keeps being reselected.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; It this clears things up for you, the Bundle file as extracted from the 
  &gt; 1.84 tarball by CPAN.pm 1.76 and placed in the bundle directory is 245k 
  &gt; in size.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; If I remove the &#34;months before&#34; file and rerun, it keeps copying the 
  &gt; 245k file back in. And I can replicate it reliably.
</div>
Copy 1.84 over 1.76 and retry. This is the lithmus test or however they
call it.

I believe I have fixed this, I just cannot remember when and how.

-- 
andreas
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-166048" href="/Public/Bug/Display.html?id=17699#txn-166048">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;18&nbsp;06:13:59&nbsp;2006</span>
    <span class="description">adam [...] phase-n.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17699] Win32 CamelPack 5.6 fails to update to 1.84</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 18 Feb 2006 22:11:05 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Adam Kennedy &lt;adam [...] phase-n.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/166048/53188/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/53188">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">

andreas.koenig.gmwojprw@franz.ak.mind.de via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt;&gt; On Sat, 18 Feb 2006 04:24:12 -0500 &#40;EST&#41;, &#34;adam@phase-n.com via RT&#34; &lt;bug-CPAN@rt.cpan.org&gt; said:
</div>&gt; 
<div class="message-stanza open">&gt;   &gt; Well, I removed the old bundle file and it keeps being reselected.
</div>&gt; 
<div class="message-stanza open">&gt;   &gt; It this clears things up for you, the Bundle file as extracted from the 
&gt;   &gt; 1.84 tarball by CPAN.pm 1.76 and placed in the bundle directory is 245k 
&gt;   &gt; in size.
</div>&gt; 
<div class="message-stanza open">&gt;   &gt; If I remove the &#34;months before&#34; file and rerun, it keeps copying the 
&gt;   &gt; 245k file back in. And I can replicate it reliably.
</div>&gt; 
&gt; Copy 1.84 over 1.76 and retry. This is the lithmus test or however they
&gt; call it.
&gt; 
&gt; I believe I have fixed this, I just cannot remember when and how.
</div>
Well, as I said it&#39;s a two part problem.

If all the 1.76 installation out there on &#40;whatever I&#39;ve done to trigger 
this&#41; can&#39;t upgrade to 1.84, and there&#39;s something we can do to the new 
CPAN.pm dist that can workaround the problem in 1.76, I&#39;d love to be 
able to fix that as well as fixing the original bug.

Adam K
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-166051" href="/Public/Bug/Display.html?id=17699#txn-166051">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;18&nbsp;06:48:53&nbsp;2006</span>
    <span class="description">andreas.koenig.gmwojprw [...] franz.ak.mind.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17699] Win32 CamelPack 5.6 fails to update to 1.84</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 18 Feb 2006 12:48:00 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> andreas.koenig.gmwojprw [...] franz.ak.mind.de &#40;Andreas J. Koenig&#41;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/166051/53191/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/53191">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt; On Sat, 18 Feb 2006 06:14:00 -0500 &#40;EST&#41;, &#34;adam@phase-n.com via RT&#34; &lt;bug-CPAN@rt.cpan.org&gt; said:
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"> &gt;&gt; Copy 1.84 over 1.76 and retry. This is the lithmus test or however they
 &gt;&gt; call it.
 &gt;&gt; 
 &gt;&gt; I believe I have fixed this, I just cannot remember when and how.
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; Well, as I said it&#39;s a two part problem.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; If all the 1.76 installation out there on &#40;whatever I&#39;ve done to trigger 
  &gt; this&#41; can&#39;t upgrade to 1.84, and there&#39;s something we can do to the new 
  &gt; CPAN.pm dist that can workaround the problem in 1.76, I&#39;d love to be 
  &gt; able to fix that as well as fixing the original bug.
</div>
I&#39;m with you on that and it seems to me that putting Bundle::CPAN in a
separate distro would solve this part of the problem for now.

Users can upgrade immediately if they say &#39;install CPAN&#39; instead of
&#39;install Bundle::CPAN&#39;. Am I right on this?

If you try to copy 1.84 over 1.76 and can then install Bundle::CPAN,
that would show that the original bug is fixed and we need only invent
workarounds for the userbase with 1.76.


-- 
andreas
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-166054" href="/Public/Bug/Display.html?id=17699#txn-166054">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;18&nbsp;06:55:00&nbsp;2006</span>
    <span class="description">adam [...] phase-n.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17699] Win32 CamelPack 5.6 fails to update to 1.84</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 18 Feb 2006 22:52:01 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Adam Kennedy &lt;adam [...] phase-n.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/166054/53194/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/53194">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">

andreas.koenig.gmwojprw@franz.ak.mind.de via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt;&gt; On Sat, 18 Feb 2006 06:14:00 -0500 &#40;EST&#41;, &#34;adam@phase-n.com via RT&#34; &lt;bug-CPAN@rt.cpan.org&gt; said:
</div>&gt; 
<div class="message-stanza open">&gt;  &gt;&gt; Copy 1.84 over 1.76 and retry. This is the lithmus test or however they
&gt;  &gt;&gt; call it.
&gt;  &gt;&gt; 
&gt;  &gt;&gt; I believe I have fixed this, I just cannot remember when and how.
</div>&gt; 
<div class="message-stanza open">&gt;   &gt; Well, as I said it&#39;s a two part problem.
</div>&gt; 
<div class="message-stanza open">&gt;   &gt; If all the 1.76 installation out there on &#40;whatever I&#39;ve done to trigger 
&gt;   &gt; this&#41; can&#39;t upgrade to 1.84, and there&#39;s something we can do to the new 
&gt;   &gt; CPAN.pm dist that can workaround the problem in 1.76, I&#39;d love to be 
&gt;   &gt; able to fix that as well as fixing the original bug.
</div>&gt; 
&gt; I&#39;m with you on that and it seems to me that putting Bundle::CPAN in a
&gt; separate distro would solve this part of the problem for now.
&gt; 
&gt; Users can upgrade immediately if they say &#39;install CPAN&#39; instead of
&gt; &#39;install Bundle::CPAN&#39;. Am I right on this?
&gt; 
&gt; If you try to copy 1.84 over 1.76 and can then install Bundle::CPAN,
&gt; that would show that the original bug is fixed and we need only invent
&gt; workarounds for the userbase with 1.76.
</div>
That should be correct.

I&#39;m going to complete the original diagnosis &#40;just so I can at least 
confirm what caused the problem, since I don&#39;t like fixing problems 
without knowing what caused them&#41; and then I&#39;ll do the 1.04 upgrade and 
retest there.

But yes, splitting out Bundle::CPAN is probably a good idea and I&#39;m 
confident it should fix the problem for 1.76.

And yes, you would do seperate &#39;install CPAN&#39; and &#39;install Bundle::CPAN&#39; 
commands. They would both work.

Adam K
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-166074" href="/Public/Bug/Display.html?id=17699#txn-166074">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;18&nbsp;08:21:20&nbsp;2006</span>
    <span class="description">adam [...] phase-n.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17699] Win32 CamelPack 5.6 fails to update to 1.84</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 19 Feb 2006 00:18:23 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Adam Kennedy &lt;adam [...] phase-n.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/166074/53205/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/53205">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I don&#39;t believe that either. See, there is a &#34;last&#34; as soon as
&gt; Bundle/CPAN.pm is found, there is no &#34;last&#34; after just CPAN.pm is
&gt; found.
&gt; 
<div class="message-stanza open">&gt;   &gt; And second, when you package up CPAN.pm, as a special case so you can 
&gt;   &gt; work with older Perls, you need to ensure that Bundle/CPAN.pm is ALWAYS 
&gt;   &gt; listed higher in the MANIFEST than CPAN.pm itself.
</div>&gt; 
&gt; Nope, this won&#39;t help. I still believ that my explanation is correct.
&gt; The wrong bundle file was either found by an older version of CPAN.pm,
&gt; maybe months before, or by other, unknown mechanics.
&gt; 
<div class="message-stanza open">&gt;   &gt; Once a 1.85 is uploaded with the both of those, it will get rid of all 
&gt;   &gt; past, present and future errors of this type.
</div>&gt; 
<div class="message-stanza open">&gt;   &gt; A 100% solution! :&#41;
</div>&gt; 
&gt; If I could believe you, I&#39;d do that, but think for a moment: if your
&gt; analysis were right, the bug would show up on Unix too.
</div>
OK, here we go.

As you scan though the manifest file, the contents is in Unix format.

-----------------------
...
inc/Test/More.pm
lib/Bundle/CPAN.pm
lib/CPAN.pm
lib/CPAN/Admin.pm
...
-----------------------

It&#39;s looking for two values

$what  = &#39;Bundle\\CPAN.pm&#39;;
$what2 = &#39;CPAN.pm&#39;;

Although it does a check for MacOS and does a map from : to / it doesn&#39;t 
do the same for Windows.

This is the actual iteration code

-----------------------
     while &#40;&lt;$fh&gt;&#41; {
        next if /^\s*\#/;
        my&#40;$file&#41; = /&#40;\S+&#41;/;
        if &#40;$file =~ m|\Q$what\E$|&#41; {
            $bu = $file;
            # return File::Spec-&gt;catfile&#40;$where,$bu&#41;; # bad
            last;
        }
        # retry if she managed to
        # have no Bundle directory
        $bu = $file if $file =~ m|\Q$what2\E$|;
     }
----------------------

When it hits the lib/Bundle/CPAN.pm line, it fails to match 
Bundle\\CPAN.pm but DOES set the $bu &#40;&#34;backup&#34;?&#41; value.

But then on the next line below the $bu matches AGAIN, and is 
overwritten with the main CPAN.pm library. When it gets to the end, what 
is left in $bu is the main CPAN.pm library, not the bundle.

So, solutions.

1. To handle the current codebase &#40;which I&#39;ll try in a sec...&#41;

Rather than special casing MacOS in there, the $what value passed in 
needs to be either unix-specific, or the name of the class &#40;which you 
can convert to unix-specific&#41;.

Then after you get a match, again rather than special-casing MacOS you 
can split on / and File::Spec-&gt;catfile to get the platform version.

I don&#39;t know what you are doing now, so this advice could be redundant, 
but I&#39;ll check that after this.

2. To handle the legacy cases

a&#41; Splitting out Bundle::CPAN into a seperate distribution will 
certainly work once you release CPAN.pm 1.85 and everything reindexes.

b&#41; Alternatively, you can do the opposite of my previous advice. If you 
make sure that lib/Bundle/CPAN.pm is the LAST element in the list &#40;or at 
least after any other CPAN.pm files&#41; then even though other files might 
temporarily be in $bu, it will be the correct file that gets set in 
there at the end of the search.

I&#39;ll move on to testing 1.84 now.

Adam K
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-166089" href="/Public/Bug/Display.html?id=17699#txn-166089">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;18&nbsp;08:54:28&nbsp;2006</span>
    <span class="description">adam [...] phase-n.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17699] Win32 CamelPack 5.6 fails to update to 1.84</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 19 Feb 2006 00:51:35 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Adam Kennedy &lt;adam [...] phase-n.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/166089/53216/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/53216">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">

andreas.koenig.gmwojprw@franz.ak.mind.de via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt;&gt; On Sat, 18 Feb 2006 06:14:00 -0500 &#40;EST&#41;, &#34;adam@phase-n.com via RT&#34; &lt;bug-CPAN@rt.cpan.org&gt; said:
</div>&gt; 
<div class="message-stanza open">&gt;  &gt;&gt; Copy 1.84 over 1.76 and retry. This is the lithmus test or however they
&gt;  &gt;&gt; call it.
&gt;  &gt;&gt; 
&gt;  &gt;&gt; I believe I have fixed this, I just cannot remember when and how.
</div>&gt; 
<div class="message-stanza open">&gt;   &gt; Well, as I said it&#39;s a two part problem.
</div>&gt; 
<div class="message-stanza open">&gt;   &gt; If all the 1.76 installation out there on &#40;whatever I&#39;ve done to trigger 
&gt;   &gt; this&#41; can&#39;t upgrade to 1.84, and there&#39;s something we can do to the new 
&gt;   &gt; CPAN.pm dist that can workaround the problem in 1.76, I&#39;d love to be 
&gt;   &gt; able to fix that as well as fixing the original bug.
</div>&gt; 
&gt; I&#39;m with you on that and it seems to me that putting Bundle::CPAN in a
&gt; separate distro would solve this part of the problem for now.
&gt; 
&gt; Users can upgrade immediately if they say &#39;install CPAN&#39; instead of
&gt; &#39;install Bundle::CPAN&#39;. Am I right on this?
&gt; 
&gt; If you try to copy 1.84 over 1.76 and can then install Bundle::CPAN,
&gt; that would show that the original bug is fixed and we need only invent
&gt; workarounds for the userbase with 1.76.
</div>
Without being able to try it yet &#40;due to the makefile problem&#41; I&#39;ve had 
a look at the code in 1.84 and it looks like the same problem will happen.

So what we probably need to do is at about line 5997, change

-        $from = $self-&gt;find_bundle_file&#40;$dist-&gt;{&#39;build_dir&#39;},$me&#41;;
+        $from = 
$self-&gt;find_bundle_file&#40;$dist-&gt;{&#39;build_dir&#39;},join&#40;&#39;/&#39;,@me&#41;&#41;;

That way what goes through to -&gt;find_bundle_file is always in Unix format.

Then in the find_bundle_file function itself you pull out the initial 
max stuff, since it is no longer needed.

     my $what2 = $what;
-    if &#40;$^O eq &#39;MacOS&#39;&#41; {
-      $what =~ s/^://;
-      $what =~ tr|:|/|;
-      $what2 =~ s/:Bundle://;
-      $what2 =~ tr|:|/|;
-    } else {
-       $what2 =~ s|Bundle[/\\]||;
-    }
+    $what2 =~ s|Bundle[/\\]||;

And then after the iteration, change

-    $bu =~ tr|/|:| if $^O eq &#39;MacOS&#39;;
-    return File::Spec-&gt;catfile&#40;$where, $bu&#41; if $bu;
+    return File::Spec-&gt;catfile&#40;$where, split /\//, $bu&#41; if $bu;

And it should work across fully platform neutrally.

Of course, all this assumed that CPAN::Bundle::find_bundle_file is NOT a 
public method and we can change the way it works to take a unix-only 
path like that.

If it IS a public method, then we need an approach that will File::Spec 
split the path and join it back to get the unix one, rather than just 
the special mac case.

The change made to after the iteration will be the same.

And hopefully that&#39;s the last of the diagnostics I&#39;m going to have to do 
today :&#41;

Adam K
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-166136" href="/Public/Bug/Display.html?id=17699#txn-166136">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;18&nbsp;16:26:01&nbsp;2006</span>
    <span class="description">andreas.koenig.gmwojprw [...] franz.ak.mind.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17699] Win32 CamelPack 5.6 fails to update to 1.84</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 18 Feb 2006 22:25:10 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> andreas.koenig.gmwojprw [...] franz.ak.mind.de &#40;Andreas J. Koenig&#41;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/166136/53261/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/53261">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 382b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt; On Sat, 18 Feb 2006 08:54:29 -0500 &#40;EST&#41;, &#34;adam@phase-n.com via RT&#34; &lt;bug-CPAN@rt.cpan.org&gt; said:
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; And hopefully that&#39;s the last of the diagnostics I&#39;m going to have to do 
  &gt; today :&#41;
</div>
You did an Overwelming Job on this one. In German we say &#34;Hut ab&#34; and
a free translation would just be &#34;Hat off&#34;. Whatever. I&#39;ll release
tomorrow some 1.85 distros.

Thanks!
-- 
andreas
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-166139" href="/Public/Bug/Display.html?id=17699#txn-166139">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;18&nbsp;16:42:26&nbsp;2006</span>
    <span class="description">adam [...] phase-n.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17699] Win32 CamelPack 5.6 fails to update to 1.84</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 19 Feb 2006 08:39:31 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Adam Kennedy &lt;adam [...] phase-n.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/166139/53264/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/53264">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 613b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Great, thanks.

Then hopefully I can get past 1.84 to dealing with the OTHER problems.

Did I mention Term::ReadKey and Module::Build also have big problems :&#41;

Adam K

andreas.koenig.gmwojprw@franz.ak.mind.de via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt;&gt; On Sat, 18 Feb 2006 08:54:29 -0500 &#40;EST&#41;, &#34;adam@phase-n.com via RT&#34; &lt;bug-CPAN@rt.cpan.org&gt; said:
</div>&gt; 
<div class="message-stanza open">&gt;   &gt; And hopefully that&#39;s the last of the diagnostics I&#39;m going to have to do 
&gt;   &gt; today :&#41;
</div>&gt; 
&gt; You did an Overwelming Job on this one. In German we say &#34;Hut ab&#34; and
&gt; a free translation would just be &#34;Hat off&#34;. Whatever. I&#39;ll release
&gt; tomorrow some 1.85 distros.
&gt; 
&gt; Thanks!
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-166263" href="/Public/Bug/Display.html?id=17699#txn-166263">#</a>      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;19&nbsp;16:43:42&nbsp;2006</span>
    <span class="description">ANDK [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.930123</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
