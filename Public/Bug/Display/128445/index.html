<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #128445 for Imager: Please add support for HEIC/HEIF images</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #128445 for Imager: Please add support for HEIC/HEIF images</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Imager/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Imager/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Imager/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Imager/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Imager">Imager CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">128445</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Imager/Active/">Imager</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dcantrell [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-16790-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-16791-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;06&nbsp;08:07:01&nbsp;2019</span>
    <span class="description">dcantrell [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Please add support for HEIC/HEIF images</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Possibly by wrapping around libheif &lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/strukturag/libheif">https://github.com/strukturag/libheif</a></span>&gt;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;06&nbsp;16:50:14&nbsp;2019</span>
    <span class="description">tony [...] develop-help.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> ;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #128445] Please add support for HEIC/HEIF images</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 7 Feb 2019 08:49:57 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> David Cantrell via RT &lt;bug-Imager [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tony Cook &lt;tony [...] develop-help.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Feb 06, 2019 at 08:07:02AM -0500, David Cantrell via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Wed Feb 06 08:07:01 2019: Request 128445 was acted upon.
&gt; Transaction: Ticket created by DCANTRELL
&gt;        Queue: Imager
&gt;      Subject: Please add support for HEIC/HEIF images
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: dcantrell@cpan.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=128445">https://rt.cpan.org/Ticket/Display.html?id=128445</a></span> &gt;
&gt; 
&gt; 
&gt; Possibly by wrapping around libheif &lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/strukturag/libheif">https://github.com/strukturag/libheif</a></span>&gt;
</div>
Do you have any idea where I could get the file format specification cheaply?

For C11 I have the final draft, but I haven&#39;t seen anything similar
for HEIF &#40;aka ISO/IEC DIS 23008-12&#41;.

Since HEIF is a container format[1], libheif would work for .heic &#40;purely
H.265 encoding&#41;, but it doesn&#39;t appear to support other encodings.

Tony

[1] based on Wikipedia <span class="clickylink"><a target="new" rel="nofollow" href="https://en.wikipedia.org/wiki/High_Efficiency_Image_File_Format">https://en.wikipedia.org/wiki/High_Efficiency_Image_File_Format</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;06&nbsp;16:50:15&nbsp;2019</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;06&nbsp;17:22:39&nbsp;2019</span>
    <span class="description">dcantrell [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Is this what you need?

<span class="clickylink"><a target="new" rel="nofollow" href="https://standards.iso.org/ittf/PubliclyAvailableStandards/c066067_ISO_IEC_23008-12_2017.zip">https://standards.iso.org/ittf/PubliclyAvailableStandards/c066067_ISO_IEC_23008-12_2017.zip</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;06&nbsp;18:03:34&nbsp;2019</span>
    <span class="description">tony [...] develop-help.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> ;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #128445] Please add support for HEIC/HEIF images</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 7 Feb 2019 10:03:22 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> David Cantrell via RT &lt;bug-Imager [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tony Cook &lt;tony [...] develop-help.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Feb 06, 2019 at 05:22:40PM -0500, David Cantrell via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Imager
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=128445">https://rt.cpan.org/Ticket/Display.html?id=128445</a></span> &gt;
&gt; 
&gt; Is this what you need?
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://standards.iso.org/ittf/PubliclyAvailableStandards/c066067_ISO_IEC_23008-12_2017.zip">https://standards.iso.org/ittf/PubliclyAvailableStandards/c066067_ISO_IEC_23008-12_2017.zip</a></span>
</div>
Thanks, that works.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;09&nbsp;01:56:52&nbsp;2019</span>
    <span class="description">tony [...] develop-help.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> ;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #128445] Please add support for HEIC/HEIF images</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 9 Feb 2019 17:56:34 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> David Cantrell via RT &lt;bug-Imager [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tony Cook &lt;tony [...] develop-help.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Feb 06, 2019 at 08:07:02AM -0500, David Cantrell via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Wed Feb 06 08:07:01 2019: Request 128445 was acted upon.
&gt; Transaction: Ticket created by DCANTRELL
&gt;        Queue: Imager
&gt;      Subject: Please add support for HEIC/HEIF images
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: dcantrell@cpan.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=128445">https://rt.cpan.org/Ticket/Display.html?id=128445</a></span> &gt;
&gt; 
&gt; 
&gt; Possibly by wrapping around libheif &lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/strukturag/libheif">https://github.com/strukturag/libheif</a></span>&gt;
</div>
Have a play with:

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/tonycoz/imager-file-heif">https://github.com/tonycoz/imager-file-heif</a></span>

It requires that libheif, libde265 and libx265 all be installed, along
with their development headers.

I&#39;ve only tested detection with pkg-config, so you may need to set
PKG_CONFIG_PATH so it points at the directory containing the .pc files
for those libraries.

Tony
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;11&nbsp;11:01:59&nbsp;2019</span>
    <span class="description">dcantrell [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Have a play with:
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/tonycoz/imager-file-heif">https://github.com/tonycoz/imager-file-heif</a></span>
</div>
Thanks!

Using the libraries and headers from debian-testing, looks like it at least mostly works.

I could read a HEIC file from an iPhone&#39;s camera, scale it, and save it back out as another format, which is the specific use-case we have at work.

Reading the same original file, scaling it, and saving it back out as heic/heif resulted in something that Preview.app on a Mac couldn&#39;t read, but Imager::File::HEIF *could* read it and convert it to another format which Preview could read, so I&#39;m inclined to think that that may be a limitation in Preview.app only being able to decode the particular subset of files generated by other Apple software.

$ perl -Mblib -MImager -e &#39;$foo=Imager-&gt;new&#40;file=&gt;&#34;IMG_2781.HEIC&#34;,type=&gt;&#34;heif&#34;&#41;; $thumb=$foo-&gt;scale&#40;scalefactor=&gt;0.3&#41;;$thumb-&gt;write&#40;file=&gt;&#34;foo.tga&#34;&#41;&#39;

gives the expected results

$ perl -Mblib -MImager -e &#39;$foo=Imager-&gt;new&#40;file=&gt;&#34;IMG_2781.HEIC&#34;,type=&gt;&#34;heif&#34;&#41;; $thumb=$foo-&gt;scale&#40;scalefactor=&gt;0.3&#41;;$thumb-&gt;write&#40;file=&gt;&#34;foo.heif&#34;&#41;&#39;

gives a file that Preview.app can&#39;t read, but feeding the output from that into ...

$ perl -Mblib -MImager -e &#39;$foo=Imager-&gt;new&#40;file=&gt;&#34;foo.heif&#34;,type=&gt;&#34;heif&#34;&#41;; $thumb=$foo-&gt;scale&#40;scalefactor=&gt;0.3&#41;;$thumb-&gt;write&#40;file=&gt;&#34;foo.tga&#34;&#41;&#39;

again gives the expected results, a scaled image that Preview can decode

In case it helps figure out what Apple are doing &#40;if, indeed, you care to work around their limitations!&#41; I&#39;ve attached the original input file that I used
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> IMG_2781.HEIC</td>
  </tr>
</table>

<div class="messagebody">
<img alt="IMG_2781.HEIC" title="IMG_2781.HEIC" src="/Ticket/Attachment/1832877/985666/" /></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;11&nbsp;16:48:02&nbsp;2019</span>
    <span class="description">tony [...] develop-help.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> ;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #128445] Please add support for HEIC/HEIF images</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 12 Feb 2019 08:47:43 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> David Cantrell via RT &lt;bug-Imager [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tony Cook &lt;tony [...] develop-help.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, Feb 11, 2019 at 11:02:00AM -0500, David Cantrell via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Imager
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=128445">https://rt.cpan.org/Ticket/Display.html?id=128445</a></span> &gt;
&gt; 
<div class="message-stanza open">&gt; &gt; Have a play with:
&gt; &gt; 
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/tonycoz/imager-file-heif">https://github.com/tonycoz/imager-file-heif</a></span>
</div>&gt; 
&gt; Thanks!
&gt; 
&gt; Using the libraries and headers from debian-testing, looks like it at least mostly works.
&gt; 
&gt; I could read a HEIC file from an iPhone&#39;s camera, scale it, and save it back out as another format, which is the specific use-case we have at work.
&gt; 
&gt; Reading the same original file, scaling it, and saving it back out as heic/heif resulted in something that Preview.app on a Mac couldn&#39;t read, but Imager::File::HEIF *could* read it and convert it to another format which Preview could read, so I&#39;m inclined to think that that may be a limitation in Preview.app only being able to decode the particular subset of files generated by other Apple software.
&gt; 
&gt; $ perl -Mblib -MImager -e &#39;$foo=Imager-&gt;new&#40;file=&gt;&#34;IMG_2781.HEIC&#34;,type=&gt;&#34;heif&#34;&#41;; $thumb=$foo-&gt;scale&#40;scalefactor=&gt;0.3&#41;;$thumb-&gt;write&#40;file=&gt;&#34;foo.tga&#34;&#41;&#39;
&gt; 
&gt; gives the expected results
&gt; 
&gt; $ perl -Mblib -MImager -e &#39;$foo=Imager-&gt;new&#40;file=&gt;&#34;IMG_2781.HEIC&#34;,type=&gt;&#34;heif&#34;&#41;; $thumb=$foo-&gt;scale&#40;scalefactor=&gt;0.3&#41;;$thumb-&gt;write&#40;file=&gt;&#34;foo.heif&#34;&#41;&#39;
&gt; 
&gt; gives a file that Preview.app can&#39;t read, but feeding the output from that into ...
&gt; 
</div>
Preview.app could read the original and the output here, even on my
older 10.13.6 OS X &#40;the hardware is too old to upgrade.&#41;

Windows 10 wanted me to pay for a codec to open it in Windows 10 Photos.

GIMP opened it fine, but I think that&#39;s using libheif.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; $ perl -Mblib -MImager -e &#39;$foo=Imager-&gt;new&#40;file=&gt;&#34;foo.heif&#34;,type=&gt;&#34;heif&#34;&#41;; $thumb=$foo-&gt;scale&#40;scalefactor=&gt;0.3&#41;;$thumb-&gt;write&#40;file=&gt;&#34;foo.tga&#34;&#41;&#39;
&gt; 
&gt; again gives the expected results, a scaled image that Preview can decode
&gt; 
&gt; In case it helps figure out what Apple are doing &#40;if, indeed, you care to work around their limitations!&#41; I&#39;ve attached the original input file that I used
</div>
Can you send me the scaled foo.heif?

I&#39;m using libheif out of git, so maybe something has been fixed there.

Tony
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;11&nbsp;17:35:44&nbsp;2019</span>
    <span class="description">tony [...] develop-help.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> ;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #128445] Please add support for HEIC/HEIF images</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 12 Feb 2019 09:35:28 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;tony [...] develop-help.com via RT&#34; &lt;bug-Imager [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tony Cook &lt;tony [...] develop-help.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, Feb 11, 2019 at 04:48:02PM -0500, tony@develop-help.com via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Can you send me the scaled foo.heif?
&gt; 
&gt; I&#39;m using libheif out of git, so maybe something has been fixed there.
</div>
Also, can you try saving the scaled result as a PNG, using the
heif-enc example bundled with libheif to produce a .heif file and try
that in Preview?

  heif-enc -o foo.heif foo.png

Tony
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;12&nbsp;09:57:17&nbsp;2019</span>
    <span class="description">dcantrell [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Can you send me the scaled foo.heif?
</div>
Attached
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> foo.heif</td>
  </tr>
</table>

<div class="messagebody">
<img alt="foo.heif" title="foo.heif" src="/Ticket/Attachment/1833019/985742/" /></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;12&nbsp;10:08:10&nbsp;2019</span>
    <span class="description">dcantrell [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Also, can you try saving the scaled result as a PNG, using the
&gt; heif-enc example bundled with libheif to produce a .heif file and try
&gt; that in Preview?
&gt; 
&gt; heif-enc -o foo.heif foo.png
</div>
Preview.app can read the results, and the file is considerably smaller than that produced by Imager &#40;but maybe that&#39;s just down to different default compression settings&#41;.

The especially interesting bit, though, is that the png is 1210x907 but heif-enc produces a 1210x906 file.

I&#39;m using libheif 1.3.2-1+b1
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> foo.png</td>
  </tr>
</table>

<div class="messagebody">
<img alt="foo.png" title="foo.png" src="/Ticket/Attachment/1833021/985746/" /></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> foo.png.heif</td>
  </tr>
</table>

<div class="messagebody">
<img alt="foo.png.heif" title="foo.png.heif" src="/Ticket/Attachment/1833021/985747/" /></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;15&nbsp;20:12:21&nbsp;2019</span>
    <span class="description">TONYC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Feb 12 10:08:10 2019, DCANTRELL wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Also, can you try saving the scaled result as a PNG, using the
&gt; &gt; heif-enc example bundled with libheif to produce a .heif file and try
&gt; &gt; that in Preview?
&gt; &gt;
&gt; &gt; heif-enc -o foo.heif foo.png
</div>&gt; 
&gt; Preview.app can read the results, and the file is considerably smaller
&gt; than that produced by Imager &#40;but maybe that&#39;s just down to different
&gt; default compression settings&#41;.
&gt; 
&gt; The especially interesting bit, though, is that the png is 1210x907
&gt; but heif-enc produces a 1210x906 file.
&gt; 
&gt; I&#39;m using libheif 1.3.2-1+b1
</div>
Please try Imager::File::HEIF from github

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/tonycoz/imager-file-heif">https://github.com/tonycoz/imager-file-heif</a></span>

when tested with foo.png, Imager::File::HEIF and heif-enc now produce the exact same file &#40;with the defaults.&#41;

Tony
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;19&nbsp;11:43:58&nbsp;2019</span>
    <span class="description">dcantrell [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Please try Imager::File::HEIF from github
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/tonycoz/imager-file-heif">https://github.com/tonycoz/imager-file-heif</a></span>
&gt; 
&gt; when tested with foo.png, Imager::File::HEIF and heif-enc now produce
&gt; the exact same file &#40;with the defaults.&#41;
</div>
OK, so starting with my original input file, read it, scale it, and spit out foo.png:

$ perl -Mblib -MImager -e &#39;$foo=Imager-&gt;new&#40;file =&gt; &#34;IMG_2781.HEIC&#34;, type =&gt; &#34;heif&#34;&#41;; $thumb = $foo-&gt;scale&#40;scalefactor =&gt; 0.3&#41;; $thumb-&gt;write&#40;file =&gt; &#34;foo.png&#34;&#41;&#39;

use Imager to convert that to foo.heif:

$ perl -Mblib -MImager -e &#39;$foo=Imager-&gt;new&#40;file =&gt; &#34;foo.png&#34;,type=&gt;&#34;png&#34;&#41;;$foo-&gt;write&#40;file=&gt;&#34;foo.heif&#34;,type=&gt;&#34;heif&#34;&#41;&#39;

and use heif-enc to convert foo.png to foo.png.heif:

$ heif-enc -o foo.png.heif foo.png

I now have two *.heif files of the same size, visually indistinguishable, both readable by Preview.app, but with different MD5 sums:

$ md5 *heif
MD5 &#40;foo.heif&#41; = be3492ecaa260a73f63dd5b360ef3afc
MD5 &#40;foo.png.heif&#41; = a3a1a9bd644b143c686cea8b495daac0

The difference is:

$ diff &lt;&#40;hexdump -C foo.heif&#41; &lt;&#40;hexdump -C foo.png.heif&#41;
4,5c4,5
&lt; 00000030  00 00 00 00 70 69 63 74  6f 23 eb 38 00 00 55 e8  |....picto#.8..U.|
&lt; 00000040  6f 23 ed 78 00 00 00 00  0e 70 69 74 6d 00 00 00  |o#.x.....pitm...|
---
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 00000030  00 00 00 00 70 69 63 74  00 00 00 00 00 00 00 00  |....pict........|
&gt; 00000040  00 00 00 00 00 00 00 00  0e 70 69 74 6d 00 00 00  |.........pitm...|
</div>
However, if I read the original, scale, and write back out as heif all in Imager without an intermediate file:

$ perl -Mblib -MImager -e &#39;$foo=Imager-&gt;new&#40;&#34;IMG_2781.HEIC&#34;,type=&gt;&#34;heif&#34;&#41;;$thumb=$foo-&gt;scale&#40;scalefactor=&gt;0.3&#41;;$thumb-&gt;write&#40;file=&gt;&#34;foo.heif&#34;&#41;&#39;

The resulting file has yet another MD5 sum and can&#39;t be read by Preview.app.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;22&nbsp;04:58:50&nbsp;2019</span>
    <span class="description">TONYC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Feb 19 11:43:58 2019, DCANTRELL wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Please try Imager::File::HEIF from github
&gt; &gt;
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/tonycoz/imager-file-heif">https://github.com/tonycoz/imager-file-heif</a></span>
&gt; &gt;
&gt; &gt; when tested with foo.png, Imager::File::HEIF and heif-enc now produce
&gt; &gt; the exact same file &#40;with the defaults.&#41;
</div>&gt; 
&gt; OK, so starting with my original input file, read it, scale it, and
&gt; spit out foo.png:
&gt; 
&gt; $ perl -Mblib -MImager -e &#39;$foo=Imager-&gt;new&#40;file =&gt; &#34;IMG_2781.HEIC&#34;,
&gt; type =&gt; &#34;heif&#34;&#41;; $thumb = $foo-&gt;scale&#40;scalefactor =&gt; 0.3&#41;; $thumb-
<div class="message-stanza open">&gt; &gt;write&#40;file =&gt; &#34;foo.png&#34;&#41;&#39;
</div>&gt; 
&gt; use Imager to convert that to foo.heif:
&gt; 
&gt; $ perl -Mblib -MImager -e &#39;$foo=Imager-&gt;new&#40;file =&gt;
&gt; &#34;foo.png&#34;,type=&gt;&#34;png&#34;&#41;;$foo-&gt;write&#40;file=&gt;&#34;foo.heif&#34;,type=&gt;&#34;heif&#34;&#41;&#39;
&gt; 
&gt; and use heif-enc to convert foo.png to foo.png.heif:
&gt; 
&gt; $ heif-enc -o foo.png.heif foo.png
&gt; 
&gt; I now have two *.heif files of the same size, visually
&gt; indistinguishable, both readable by Preview.app, but with different
&gt; MD5 sums:
&gt; 
&gt; $ md5 *heif
&gt; MD5 &#40;foo.heif&#41; = be3492ecaa260a73f63dd5b360ef3afc
&gt; MD5 &#40;foo.png.heif&#41; = a3a1a9bd644b143c686cea8b495daac0
&gt; 
&gt; The difference is:
&gt; 
&gt; $ diff &lt;&#40;hexdump -C foo.heif&#41; &lt;&#40;hexdump -C foo.png.heif&#41;
&gt; 4,5c4,5
&gt; &lt; 00000030  00 00 00 00 70 69 63 74  6f 23 eb 38 00 00 55 e8
&gt; |....picto#.8..U.|
&gt; &lt; 00000040  6f 23 ed 78 00 00 00 00  0e 70 69 74 6d 00 00 00
&gt; |o#.x.....pitm...|
&gt; ---
<div class="message-stanza open">&gt; &gt; 00000030  00 00 00 00 70 69 63 74  00 00 00 00 00 00 00 00
&gt; &gt; |....pict........|
&gt; &gt; 00000040  00 00 00 00 00 00 00 00  0e 70 69 74 6d 00 00 00
&gt; &gt; |.........pitm...|
</div>&gt; 
&gt; However, if I read the original, scale, and write back out as heif all
&gt; in Imager without an intermediate file:
&gt; 
&gt; $ perl -Mblib -MImager -e &#39;$foo=Imager-
<div class="message-stanza open">&gt; &gt;new&#40;&#34;IMG_2781.HEIC&#34;,type=&gt;&#34;heif&#34;&#41;;$thumb=$foo-
&gt; &gt;scale&#40;scalefactor=&gt;0.3&#41;;$thumb-&gt;write&#40;file=&gt;&#34;foo.heif&#34;&#41;&#39;
</div>&gt; 
&gt; The resulting file has yet another MD5 sum and can&#39;t be read by
&gt; Preview.app.
</div>
The difference there is in the reserved fields of the hdlr box:

aligned&#40;8&#41; class HandlerBox extends FullBox&#40;‘hdlr’, version = 0, 0&#41; {
  unsigned int&#40;32&#41; pre_defined = 0;
  unsigned int&#40;32&#41; handler_type;
  const unsigned int&#40;32&#41;[3] reserved = 0;
  string name;
}

handler_type is the &#34;pict&#34; you see in the dump, the 12 bytes following should be NULs, but they aren&#39;t.

Commit 0a03d6fc2b4e26c3fbb0b541f70f83e45a56bd5f added initializers to the reserved fields of the Box_hdlr class:

commit 0a03d6fc2b4e26c3fbb0b541f70f83e45a56bd5f
Author: seunghoon.baek &lt;seunghoon.baek@linecorp.com&gt;
Date:   Wed Oct 10 14:35:41 2018 +0900

    Initialize a member of hdlf box.

diff --git a/libheif/box.h b/libheif/box.h
index 1b20784..91e43fd 100644
--- a/libheif/box.h
+++ b/libheif/box.h
@@ -246,7 +246,7 @@ namespace heif {
   private:
     uint32_t m_pre_defined = 0;
     uint32_t m_handler_type = fourcc&#40;&#34;pict&#34;&#41;;
-    uint32_t m_reserved[3];
+    uint32_t m_reserved[3] = {0, };
     std::string m_name;
   };
 
Zeroing these out in the failed file makes no difference.

But, I ran a comparison of the heic-info -d of a file Preview likes and your sample that it doesn&#39;t, one of the differences was:

@@ -41,7 +41,7 @@
 | | version: 2
 | | flags: 0
 | | item_ID: 1
-| | item_protection_index: 32656
+| | item_protection_index: 0
 | | item_type: hvc1
 | | item_name: 
 | | content_type: 

which is part of the infe box.

Box_infe was modified in 6f5658898e46cf51be5a80fa60cdd4503037615d &#40;v1.3.2-93-g6f56588&#41;:

@@ -377,8 +378,8 @@ namespace heif {
     Error parse&#40;BitstreamRange&#38; range&#41; override;
 
   private:
-    heif_item_id m_item_ID;
-    uint16_t m_item_protection_index;
+    heif_item_id m_item_ID = 0;
+    uint16_t m_item_protection_index = 0;
 
     std::string m_item_type;
     std::string m_item_name;

to initialize that field to zero.

If I zero *that* out as well in the failing .heic file, Preview manages to load the image.

Unfortunately this isn&#39;t something I have control over from Imager::File::HEIF - the only fix is to use the newer library.

Tony
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;03&nbsp;19:29:14&nbsp;2019</span>
    <span class="description">TONYC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Feb 22 04:58:50 2019, TONYC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Unfortunately this isn&#39;t something I have control over from
&gt; Imager::File::HEIF - the only fix is to use the newer library.
</div>
Which should become easier soon:

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/strukturag/libheif/issues/88#issuecomment-467474665">https://github.com/strukturag/libheif/issues/88#issuecomment-467474665</a></span>

Tony
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;04&nbsp;06:02:42&nbsp;2019</span>
    <span class="description">dcantrell [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Using libheif 1.4.0 from Debian experimental, reading a HEIF file, scaling it, and writing it out again as HEIF, without going via an intermediary PNG or whatever, produces something that Preview can read. Huzzah!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;04&nbsp;19:13:12&nbsp;2019</span>
    <span class="description">TONYC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Apr 04 06:02:42 2019, DCANTRELL wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Using libheif 1.4.0 from Debian experimental, reading a HEIF file,
&gt; scaling it, and writing it out again as HEIF, without going via an
&gt; intermediary PNG or whatever, produces something that Preview can
&gt; read. Huzzah!
</div>
Thanks, I&#39;ve released Imager::File::HEIF 0.003 which requires libheif 1.4.0 or higher.

Closing this ticket, if you encounter any other problems please open a new ticket.

Tony
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;04&nbsp;19:13:13&nbsp;2019</span>
    <span class="description">TONYC [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
