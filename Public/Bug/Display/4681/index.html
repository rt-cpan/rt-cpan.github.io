<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #4681 for Cwd: Cwd 2.10 doesn&#39;t build with static Perl</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #4681 for Cwd: Cwd 2.10 doesn&#39;t build with static Perl</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Cwd/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Cwd/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Cwd/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Cwd/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Cwd">Cwd CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">4681</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Cwd/Active/">Cwd</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
blair [...] orcaware.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-8868-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.09    </td>
  </tr>
  <tr id="CF-8869-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;15&nbsp;13:08:09&nbsp;2003</span>
    <span class="description">BZAJAC [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Cwd 2.10 doesn&#39;t build with static Perl</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

I have a static version of Perl 5.8.2 compiled with -pg to run performance
tests.  Building Cwd 2.10 on this gets a core dump:

% make
cp Cwd.pm blib/lib/Cwd.pm
/opt/i386-linux/installed/perl-5.8.2-g-pg/bin/perl5.8.2 /opt/i386-linux/installed/perl-5.8.2-g-pg/lib/5.8.2/ExtUtils/xsubpp  -typemap /opt/i386-linux/installed/perl-5.8.2-g-pg/lib/5.8.2/ExtUtils/typemap  Cwd.xs &gt; Cwd.xsc &#38;&#38; mv Cwd.xsc Cwd.c
/opt/i386-linux/gcc/bin/gcc -c   -D_REENTRANT -D_GNU_SOURCE -DTHREADS_HAVE_PIDS -DDEBUGGING -fno-strict-aliasing -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm -g -pg -O3 -march=i386 -mcpu=i686   -DVERSION=\&#34;2.11\&#34; -DXS_VERSION=\&#34;2.11\&#34;  &#34;-I/opt/i386-linux/installed/perl-5.8.2-g-pg/lib/5.8.2/i686-linux-thread-multi/CORE&#34;   Cwd.c
rm -rf blib/arch/auto/Cwd/Cwd.a
/usr/bin/ar cr blib/arch/auto/Cwd/Cwd.a Cwd.o &#38;&#38; : blib/arch/auto/Cwd/Cwd.a
chmod 755 blib/arch/auto/Cwd/Cwd.a
Manifying blib/man3/Cwd.3
orcaware% make test
rm -rf blib/arch/auto/Cwd/Cwd.a
/usr/bin/ar cr blib/arch/auto/Cwd/Cwd.a Cwd.o &#38;&#38; : blib/arch/auto/Cwd/Cwd.a
chmod 755 blib/arch/auto/Cwd/Cwd.a
Writing &#34;Makefile.aperl&#34; for this perl
Attempt to free unreferenced scalar: SV 0x859a8cc at blib/lib/Cwd.pm line 162.
make: *** [Makefile.aperl] Segmentation fault &#40;core dumped&#41;

Here&#39;s a stack trace:

#0  0x081dc51d in Perl_pp_entersub &#40;my_perl=0x8573588&#41; at pp_hot.c:2606
2606        if &#40;!CvROOT&#40;cv&#41; &#38;&#38; !CvXSUB&#40;cv&#41;&#41; {
&#40;gdb&#41; bt
#0  0x081dc51d in Perl_pp_entersub &#40;my_perl=0x8573588&#41; at pp_hot.c:2606
#1  0x081bf34d in Perl_runops_debug &#40;my_perl=0x8573588&#41; at dump.c:1438
#2  0x0815901d in S_call_body &#40;my_perl=0x8573588, myop=0xbfffe1e0, is_eval=0&#41; at perl.c:2224
#3  0x08158d0a in Perl_call_sv &#40;my_perl=0x8573588, sv=0x8573588, flags=6&#41; at perl.c:2142
#4  0x0815ce06 in S_call_list_body &#40;my_perl=0x8573588, cv=0x2a7&#41; at perl.c:4393
#5  0x0815cb10 in Perl_call_list &#40;my_perl=0x8573588, oldscope=22, paramList=0x882bc54&#41; at perl.c:4322
#6  0x081a2007 in Perl_newATTRSUB &#40;my_perl=0x8573588, floor=623, o=0x16, proto=0x8573588, attrs=0x0, block=0x88052c8&#41; at op.c:4367
#7  0x08196c36 in Perl_yyparse &#40;my_perl=0x8573588&#41; at perly.y:355
#8  0x0820f310 in S_doeval &#40;my_perl=0x8573588, gimme=0, startop=0x0, outside=0x8584a30, seq=679&#41; at pp_ctl.c:2802
#9  0x08210285 in Perl_pp_require &#40;my_perl=0x8573588&#41; at pp_ctl.c:3299
#10 0x081bf34d in Perl_runops_debug &#40;my_perl=0x8573588&#41; at dump.c:1438
#11 0x0815901d in S_call_body &#40;my_perl=0x8573588, myop=0xbfffe650, is_eval=0&#41; at perl.c:2224
#12 0x08158d0a in Perl_call_sv &#40;my_perl=0x8573588, sv=0x8573588, flags=6&#41; at perl.c:2142
#13 0x0815ce06 in S_call_list_body &#40;my_perl=0x8573588, cv=0x2a7&#41; at perl.c:4393
#14 0x0815cb10 in Perl_call_list &#40;my_perl=0x8573588, oldscope=15, paramList=0x8595b0c&#41; at perl.c:4322
#15 0x081a2007 in Perl_newATTRSUB &#40;my_perl=0x8573588, floor=408, o=0xf, proto=0x8573588, attrs=0x0, block=0x8804b78&#41; at op.c:4367
#16 0x08196c36 in Perl_yyparse &#40;my_perl=0x8573588&#41; at perly.y:355
#17 0x0820f310 in S_doeval &#40;my_perl=0x8573588, gimme=0, startop=0x0, outside=0x8584a30, seq=679&#41; at pp_ctl.c:2802
#18 0x08210285 in Perl_pp_require &#40;my_perl=0x8573588&#41; at pp_ctl.c:3299
#19 0x081bf34d in Perl_runops_debug &#40;my_perl=0x8573588&#41; at dump.c:1438
#20 0x0815901d in S_call_body &#40;my_perl=0x8573588, myop=0xbfffeac0, is_eval=0&#41; at perl.c:2224
#21 0x08158d0a in Perl_call_sv &#40;my_perl=0x8573588, sv=0x8573588, flags=6&#41; at perl.c:2142
#22 0x0815ce06 in S_call_list_body &#40;my_perl=0x8573588, cv=0x2a7&#41; at perl.c:4393
#23 0x0815cb10 in Perl_call_list &#40;my_perl=0x8573588, oldscope=9, paramList=0x8800cc4&#41; at perl.c:4322
#24 0x081a2007 in Perl_newATTRSUB &#40;my_perl=0x8573588, floor=199, o=0x9, proto=0x8573588, attrs=0x0, block=0x8817088&#41; at op.c:4367
#25 0x0819def4 in Perl_utilize &#40;my_perl=0x8573588, aver=1, floor=679, version=0x0, idop=0x8804ad8, arg=0x0&#41; at op.c:2975
#26 0x08196eb3 in Perl_yyparse &#40;my_perl=0x8573588&#41; at perly.y:414
#27 0x0820f310 in S_doeval &#40;my_perl=0x8573588, gimme=0, startop=0x0, outside=0x8584a30, seq=679&#41; at pp_ctl.c:2802
#28 0x08210285 in Perl_pp_require &#40;my_perl=0x8573588&#41; at pp_ctl.c:3299
#29 0x081bf34d in Perl_runops_debug &#40;my_perl=0x8573588&#41; at dump.c:1438
#30 0x081583f8 in S_run_body &#40;my_perl=0x8573588, oldscope=679&#41; at perl.c:1860
#31 0x08158155 in perl_run &#40;my_perl=0x8573588&#41; at perl.c:1779
#32 0x0804d594 in main &#40;argc=679, argv=0x2a7, env=0xbffff000&#41; at perlmain.c:86
#33 0x42015704 in __libc_start_main &#40;&#41; from /lib/tls/libc.so.6


Best,
Blair

% /opt/i386-linux/installed/perl-5.8.2-g-pg/bin/perl -V
Summary of my perl5 &#40;revision 5.0 version 8 subversion 2&#41; configuration:
  Platform:
    osname=linux, osvers=2.4.20-20.9, archname=i686-linux-thread-multi
    uname=&#39;linux orcaware.com 2.4.20-20.9 #1 mon aug 18 11:45:58 edt 2003 i686 i686 i386 gnulinux &#39;
    config_args=&#39;-Dprefix=/opt/i386-linux/installed/perl-5.8.2-g-pg -Dcc=/opt/i386-linux/gcc/bin/gcc -Doptimize=-g -pg -O3 -march=i386 -mcpu=i686 -Uinstallusrbinperl -Ulocincpth -Duseshrplib -Dcf_email=blair@orcaware.com -Ui_db -Uversiononly -Ubincompat5005 -Dusethreads -Duseithreads -Dlibpth=/lib /usr/lib -Dlibspath=/lib /usr/lib&#39;
    hint=recommended, useposix=true, d_sigaction=define
    usethreads=define use5005threads=undef useithreads=define usemultiplicity=define
    useperlio=define d_sfio=undef uselargefiles=define usesocks=undef
    use64bitint=undef use64bitall=undef uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;/opt/i386-linux/gcc/bin/gcc&#39;, ccflags =&#39;-D_REENTRANT -D_GNU_SOURCE -DTHREADS_HAVE_PIDS -DDEBUGGING -fno-strict-aliasing -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm&#39;,
    optimize=&#39;-g -pg -O3 -march=i386 -mcpu=i686&#39;,
    cppflags=&#39;-D_REENTRANT -D_GNU_SOURCE -DTHREADS_HAVE_PIDS -DDEBUGGING -fno-strict-aliasing -I/usr/include/gdbm&#39;
    ccversion=&#39;&#39;, gccversion=&#39;3.3.2&#39;, gccosandvers=&#39;&#39;
    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=1234
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=12
    ivtype=&#39;long&#39;, ivsize=4, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;, lseeksize=8
    alignbytes=4, prototype=define
  Linker and Libraries:
    ld=&#39;ld&#39;, ldflags =&#39;-pg&#39;
    libpth=/lib /usr/lib
    libs=-lnsl -lgdbm -ldl -lm -lcrypt -lutil -lpthread -lc
    perllibs=-lnsl -lgdbm -ldl -lm -lcrypt -lutil -lpthread -lc
    libc=/lib/libc-2.3.2.so, so=so, useshrplib=false, libperl=libperl.a
    gnulibc_version=&#39;2.3.2&#39;
  Dynamic Linking:
    dlsrc=dl_none.xs, dlext=none, d_dlsymun=undef, ccdlflags=&#39;&#39;
    cccdlflags=&#39;&#39;, lddlflags=&#39;&#39;


Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options: DEBUGGING MULTIPLICITY USE_ITHREADS USE_LARGE_FILES PERL_IMPLICIT_CONTEXT
  Built under linux
  Compiled at Nov 22 2003 11:37:18
  @INC:
    /opt/i386-linux/installed/perl-5.8.2-g-pg/lib/5.8.2/i686-linux-thread-multi
    /opt/i386-linux/installed/perl-5.8.2-g-pg/lib/5.8.2
    /opt/i386-linux/installed/perl-5.8.2-g-pg/lib/site_perl/5.8.2/i686-linux-thread-multi
    /opt/i386-linux/installed/perl-5.8.2-g-pg/lib/site_perl/5.8.2
    /opt/i386-linux/installed/perl-5.8.2-g-pg/lib/site_perl
    .
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;10&nbsp;21:08:27&nbsp;2004</span>
    <span class="description">kwilliams [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Unfortunately I have no clue what the problem is or how to fix it.  Is it still broken in 
Cwd 2.14?

 -Ken
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;10&nbsp;21:08:57&nbsp;2004</span>
    <span class="description">kwilliams [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;10&nbsp;21:40:23&nbsp;2004</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> blair [...] orcaware.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes, it still fails.

I&#39;ll take a closer look into the core file and see what the stack
trace shows.

Blair
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;14&nbsp;12:05:26&nbsp;2004</span>
    <span class="description">BZAJAC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> blair [...] orcaware.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Good progress.

If you change this in the Makefile:

--- Makefile.orig       2004-01-14 08:57:36.000000000 -0800
+++ Makefile    2004-01-14 09:00:21.000000000 -0800
@@ -804,7 +804,7 @@

 $&#40;MAKE_APERL_FILE&#41; : $&#40;FIRST_MAKEFILE&#41;
        $&#40;NOECHO&#41; $&#40;ECHO&#41; Writing \&#34;$&#40;MAKE_APERL_FILE&#41;\&#34; for this 
$&#40;MAP_TARGET&#41;
-       $&#40;NOECHO&#41; $&#40;PERLRUNINST&#41; \
+       $&#40;PERLRUNINST&#41; \
                Makefile.PL DIR= \
                MAKEFILE=$&#40;MAKE_APERL_FILE&#41; LINKTYPE=static \
                MAKEAPERL=1 NORECURS=1 CCCDLFLAGS=

to see the command that generates Makefile.aperl and then run
make test:

Writing &#34;Makefile.aperl&#34; for this perl
/opt/i386-linux/installed/perl-5.8.2-g-pg/bin/perl5.8.2 &#34;-
Iblib/arch&#34; &#34;-Iblib/lib&#34; \
        Makefile.PL DIR= \
        MAKEFILE=Makefile.aperl LINKTYPE=static \
        MAKEAPERL=1 NORECURS=1 CCCDLFLAGS=
Attempt to free unreferenced scalar: SV 0x8616808 at blib/lib/Cwd.pm 
line 162.
make: *** [Makefile.aperl] Segmentation fault &#40;core dumped&#41;

Now try running the same command minus the -I&#39;s and it&#39;ll run just 
fine:

/opt/i386-linux/installed/perl-5.8.2-g-pg/bin/perl5.8.2 \
         Makefile.PL DIR= \
         MAKEFILE=Makefile.aperl LINKTYPE=static \
         MAKEAPERL=1 NORECURS=1 CCCDLFLAGS=
Writing Makefile.aperl for Cwd


In fact, trying to run

perl Makefile.PL
make
make test

with Cwd 2.08, the same version that came with perl 5.8.2 runs fine,
so this just looks like a mismatch between .pm and .xs code.

So we just have to make certain that Makefile.PL uses the already
installed Cwd instead of the new Cwd.

Blair
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;14&nbsp;21:22:38&nbsp;2004</span>
    <span class="description">kwilliams [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

What happens if you use the following patch to the Makefile.PL?

--- Makefile.PL 2004/01/03 04:41:52     1.9
+++ Makefile.PL 2004/01/15 02:21:02
@@ -1,7 +1,9 @@
 # Note: this file was auto-generated by Module::Build::Compat version 0.03
 # Generated by Module::Build::Compat-&gt;create_makefile_pl
 
+BEGIN { @INC = grep {!/blib/} @INC }
 use ExtUtils::MakeMaker;
 WriteMakefile
   &#40;
    NAME         =&gt; &#39;Cwd&#39;,
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;15&nbsp;12:05:15&nbsp;2004</span>
    <span class="description">BZAJAC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> blair [...] orcaware.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">That did the trick.  Works like a charm.

Best,
Blair
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;16&nbsp;09:34:23&nbsp;2004</span>
    <span class="description">kwilliams [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Okay, I&#39;ve just uploaded version 2.15 which should fix this problem.

 -Ken
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;16&nbsp;09:34:24&nbsp;2004</span>
    <span class="description">kwilliams [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
