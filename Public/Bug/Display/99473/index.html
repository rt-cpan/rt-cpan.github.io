<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #99473 for Image-ExifTool: Use of uninitialized value $val in scalar assignment at /usr/bin/lib/Image/ExifTool/XMP.pm line 3033.</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #99473 for Image-ExifTool: Use of uninitialized value $val in scalar assignment at /usr/bin/lib/Image/ExifTool/XMP.pm line 3033.</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Image-ExifTool/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Image-ExifTool/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Image-ExifTool/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Image-ExifTool/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Image-ExifTool">Image-ExifTool CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">99473</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Image-ExifTool/Active/">Image-ExifTool</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">EXIFTOOL [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
gulfie [...] kipofu.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-16626-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-16627-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
9.76    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;13&nbsp;20:44:26&nbsp;2014</span>
    <span class="description">gulfie [...] kipofu.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Use of uninitialized value $val in scalar assignment at /usr/bin/lib/Image/ExifTool/XMP.pm line 3033.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 14 Oct 2014 00:45:31 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Image-ExifTool [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> gulfie &lt;gulfie [...] kipofu.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">

I have an rss file that recognises as xmpp yet the parsing seems to get cranky.  I have an example and a one line fix.

&#40;environment of example,  it also showed up on ubuntu and version 9.46 &#41; 

bash-3.2$ egrep &#39;version =&#39; /usr/bin/exiftool
my $version = &#39;9.73&#39;;
bash-3.2$ uname -a
Darwin bbbb-2.local 13.3.0 Darwin Kernel Version 13.3.0: Tue Jun  3 21:27:35 PDT 2014; root:xnu-2422.110.17~1/RELEASE_X86_64 x86_64


&#40; simple reproduction &#41; 
bash-3.2$  curl  -s <span class="clickylink"><a target="new" rel="nofollow" href="http://www.permies.com/forums/rss/topicPosts/27261">http://www.permies.com/forums/rss/topicPosts/27261</a></span>  | exiftool - &gt; /dev/null
Use of uninitialized value $val in scalar assignment at /usr/bin/lib/Image/ExifTool/XMP.pm line 3033.
Use of uninitialized value $val in pattern match &#40;m//&#41; at /usr/bin/lib/Image/ExifTool/XMP.pm line 3034.
Use of uninitialized value $str in substitution &#40;s///&#41; at /usr/bin/lib/Image/ExifTool/XMP.pm line 2297.
Use of uninitialized value $val in pattern match &#40;m//&#41; at /usr/bin/lib/Image/ExifTool/XMP.pm line 2809.
Use of uninitialized value $val in pattern match &#40;m//&#41; at /usr/bin/lib/Image/ExifTool/XMP.pm line 2793.
Use of uninitialized value $val in numeric gt &#40;&gt;&#41; at /usr/bin/lib/Image/ExifTool/XMP.pm line 3061.
bash-3.2$ 




A shorter version of a file that exibits this behavior is : 


&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&lt;rss version=&#34;2.0&#34;&gt;
    &lt;channel&gt;
        &lt;title&gt;&lt;![CDATA[permies: Latest posts for the topic &#34;Permaculture Playing Cards Kickstarter&#34;]]&gt;&lt;/title&gt;
        &lt;link&gt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.permies.com/forums/t/123/permaculture-design/Permaculture-Playing-Cards-Kickstarter">http://www.permies.com/forums/t/123/permaculture-design/Permaculture-Playing-Cards-Kickstarter</a></span>&lt;/link&gt;
        &lt;description&gt;&lt;![CDATA[Latest messages posted in the topic &#34;Permaculture Playing Cards Kickstarter&#34;]]&gt;&lt;/description&gt;
        &lt;generator&gt;JForum - <span class="clickylink"><a target="new" rel="nofollow" href="http://www.jforum.net">http://www.jforum.net</a></span>&lt;/generator&gt;
            &lt;item&gt;
                &lt;title&gt;Permaculture Playing Cards Kickstarter&lt;/title&gt;
                &lt;description&gt;&lt;![CDATA[Going to bed now after playing some solitaire with mine. Got them yesterday and already have people on facebook asking questions! This is definitely the start of something great. Thanks Paul and Alex!^M&lt;br /&gt; &lt;img width:auto;&#34;&#38;gt;&#38;lt;tr&#38;gt;&#38;lt;td&#38;gt;&#38;lt;a href=&#34;https://picasaweb.google.com/lh/photo/BbmnLCo6Lcu2Rgie1qyo6qAxddN6T8xX-XeNaziiKR4?feat=embedwebsite&#34;&#38;gt;&#38;lt;img src=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="https://lh4.googleusercontent.com/-i1OBWouQwpg/UpbRJztqdHI/AAAAAAAABHI/zoj7MOWlNIU/s640/IMAGE_30.jpg">https://lh4.googleusercontent.com/-i1OBWouQwpg/UpbRJztqdHI/AAAAAAAABHI/zoj7MOWlNIU/s640/IMAGE_30.jpg</a></span>&#34; height=&#34;480&#34; width=&#34;640&#34; /&#38;gt;&#38;lt;/a&#38;gt;&#38;lt;/td&#38;gt;&#38;lt;/tr&#38;gt;&#38;lt;tr&#38;gt;&#38;lt;td style=&#34;font-family:arial,sans-serif; font-size:11px; text-align:right&#34;&#38;gt;From &#38;lt;a href=&#34;https://picasaweb.google.com/107232035046866765414/Permaculture?authuser=0&#38;feat=embedwebsite&#34;&#38;gt;&#34; border=&#34;0&#34; /&gt;]]&gt;&lt;/description&gt;
                &lt;guid isPermaLink=&#34;true&#34;&gt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.permies.com/forums/posts/preList/27261/233950">http://www.permies.com/forums/posts/preList/27261/233950</a></span>&lt;/guid&gt;
                &lt;link&gt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.permies.com/forums/posts/preList/27261/233950">http://www.permies.com/forums/posts/preList/27261/233950</a></span>&lt;/link&gt;
                &lt;pubDate&gt;&lt;![CDATA[Wed, Nov 27 2013 22:19:33 MST]]&gt;&lt;/pubDate&gt;
                &lt;author&gt;&lt;![CDATA[Lucas Harrison-Zdenek]]&gt;&lt;/author&gt;
        &lt;/blockquote&gt;^M&lt;br /&gt; ^M&lt;br /&gt; Why not just change your description to reflect that, to stimulate larger orders.&lt;/div&gt;
        &lt;/blockquote&gt;^M&lt;br /&gt; ^M&lt;br /&gt; Because there could be other sellers that don&#39;t honor that.^M&lt;br /&gt; &lt;/div&gt;
        &lt;/blockquote&gt;]]&gt;&lt;/description&gt;
                &lt;guid isPermaLink=&#34;true&#34;&gt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.permies.com/forums/posts/preList/27261/234583">http://www.permies.com/forums/posts/preList/27261/234583</a></span>&lt;/guid&gt;
                &lt;link&gt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.permies.com/forums/posts/preList/27261/234583">http://www.permies.com/forums/posts/preList/27261/234583</a></span>&lt;/link&gt;
                &lt;pubDate&gt;&lt;![CDATA[Mon, Dec 2 2013 11:00:48 MST]]&gt;&lt;/pubDate&gt;
                &lt;author&gt;&lt;![CDATA[paul wheaton]]&gt;&lt;/author&gt;
            &lt;/item&gt;
    &lt;/channel&gt;
&lt;/rss&gt;



My understanding is that there is some invalidness around the chunk : ebsite&#34;&#38;gt;&#34; border=&#34;0&#34; /&gt;]] .... Whatever is happening there causes $val to be undefined  in ParseXMPElement, and passed over to the error location. 

A quick patch out of this would be adding &#39;    return 0 unless defined $val; 
&#39; to the top of sub FoundXMP&#40;$$$$;$&#41;  


Good luck. 

-gulfie
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;14&nbsp;11:17:19&nbsp;2014</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you for this report, and for the test file.  I can reproduce this problem, and it will be fixed in the next release &#40;ExifTool 9.74 or later&#41;.

- Phil
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;14&nbsp;11:17:20&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;16&nbsp;07:51:17&nbsp;2014</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;16&nbsp;07:51:18&nbsp;2014</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;16&nbsp;07:51:19&nbsp;2014</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Fixed in 9.76 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
