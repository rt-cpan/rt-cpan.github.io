<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #82818 for SQL-Translator: Parser matches INSERT, but processors don&#39;t handle it</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #82818 for SQL-Translator: Parser matches INSERT, but processors don&#39;t handle it</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=SQL-Translator">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=SQL-Translator">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=SQL-Translator">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=SQL-Translator">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/SQL-Translator">SQL-Translator CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">82818</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=SQL-Translator">SQL-Translator</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
wftk [...] vivtek.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-29610-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-29611-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




patch.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1175083/619780/patch.txt">
Mon Jan 28 08:17:45 2013 (2.1k) by wftk [...] vivtek.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=82818">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1171689" href="/Public/Bug/Display.html?id=82818#txn-1171689">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;19&nbsp;06:40:46&nbsp;2013</span>
    <span class="description">wftk [...] vivtek.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Parser matches INSERT, but processors don&#39;t handle it</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1171689/617837/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/617837">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 508b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This behavior dates back probably to 2005 or 2006.  The parser began 
matching INSERT but INSERT support wasn&#39;t added to the processors, and 
that breaks the tests for Class::DBI::DATA::Schema, which expects anything 
not handled by SQLFairy to return a blank string &#40;instead of wrapping that 
blank string in begin/commit and returning that&#41;.

It would be nice if it were at least possible to disable this with a flag, 
but if it&#39;s been six years, maybe INSERT should just not appear in the 
grammar at all?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1173161" href="/Public/Bug/Display.html?id=82818#txn-1173161">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;23&nbsp;05:55:44&nbsp;2013</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1173161/618709/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/618709">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 992b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jan 19 06:40:46 2013, Michael wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This behavior dates back probably to 2005 or 2006.  The parser began 
&gt; matching INSERT but INSERT support wasn&#39;t added to the processors, and 
&gt; that breaks the tests for Class::DBI::DATA::Schema, which expects
</div>anything 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; not handled by SQLFairy to return a blank string &#40;instead of wrapping
</div>that 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; blank string in begin/commit and returning that&#41;.
&gt; 
&gt; It would be nice if it were at least possible to disable this with a
</div>flag, 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; but if it&#39;s been six years, maybe INSERT should just not appear in the 
&gt; grammar at all?
</div>
The mandate of SQL::Translator has always been DDL only. Insert appears
in the grammars to correctly throw away any INSERT statements that could
be found in a RDBMS schema dump. Without a mention in the grammar the
entire loading process would choke. By mentioning and ignoring it the
DDL is correctly loaded from the dump.

So all in all this behavior is intended. Can you elaborate how it breaks
the test in question?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1173164" href="/Public/Bug/Display.html?id=82818#txn-1173164">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;23&nbsp;05:55:45&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1173250" href="/Public/Bug/Display.html?id=82818#txn-1173250">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;23&nbsp;08:18:03&nbsp;2013</span>
    <span class="description">wftk [...] vivtek.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1173250/618757/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/618757">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jan 23 05:55:44 2013, RIBASUSHI wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat Jan 19 06:40:46 2013, Michael wrote:
<div class="message-stanza open">&gt; &gt; This behavior dates back probably to 2005 or 2006.  The parser began 
&gt; &gt; matching INSERT but INSERT support wasn&#39;t added to the processors, 
</div></div>and 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; that breaks the tests for Class::DBI::DATA::Schema, which expects
</div>&gt; anything 
<div class="message-stanza open">&gt; &gt; not handled by SQLFairy to return a blank string &#40;instead of 
</div></div>wrapping
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; that 
<div class="message-stanza open">&gt; &gt; blank string in begin/commit and returning that&#41;.
&gt; &gt; 
&gt; &gt; It would be nice if it were at least possible to disable this with a
</div>&gt; flag, 
<div class="message-stanza open">&gt; &gt; but if it&#39;s been six years, maybe INSERT should just not appear in 
</div></div>the 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; grammar at all?
</div>&gt; 
&gt; The mandate of SQL::Translator has always been DDL only. Insert 
</div>appears
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; in the grammars to correctly throw away any INSERT statements that 
</div>could
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; be found in a RDBMS schema dump. Without a mention in the grammar the
&gt; entire loading process would choke. By mentioning and ignoring it the
&gt; DDL is correctly loaded from the dump.
&gt; 
&gt; So all in all this behavior is intended. Can you elaborate how it 
</div>breaks
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; the test in question?
</div>
Ah, I see - that makes a lot of sense, sure.

The only problem on my end is that Class::DBI::DATA::Schema was 
effectively using it to process the entire dump.  Basically, the 
strategy there is to pass each SQL command in the dump through 
Translator, and if something&#39;s returned, to use that - and otherwise to 
use the original command.  Really elegant, actually.

The problem is that, as I say, about 2005 or 2006 it stopped working, 
because when translating an INSERT command on its own from MySQL to 
SQLite, the result was no longer blank.  It occurred to me just now, 
reading your response, that Translator may well have parsed this before 
and returned a blank response - and that the change may have been that 
the SQLite processor started wrapping the TRANSACTION/COMMIT statement 
pair around the response even when it was blank.  This wouldn&#39;t normally 
happen, of course.

The answer is probably to modify Class::DBI::DATA::Schema to use 
Translator as intended - that is, for it to recognize that INSERT 
statements should not be passed through translation in the first place.

It would be nice to make INSERT interception a configurable option, but 
you&#39;ve got to draw the line somewhere, and your explanation makes 
perfect sense &#40;although the behavior certainly didn&#39;t make sense when I 
initially saw it&#41;.

I guess the other alternative would be to modify the SQLite processor so 
that only issues a transaction/commit pair if there is something to 
commit.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1173272" href="/Public/Bug/Display.html?id=82818#txn-1173272">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;23&nbsp;08:32:45&nbsp;2013</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1173272/618771/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/618771">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 397b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jan 23 08:18:03 2013, Michael wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; the SQLite processor started wrapping the TRANSACTION/COMMIT statement 
&gt; pair around the response even when it was blank.
&gt;  ...
&gt; I guess the other alternative would be to modify the SQLite processor so 
&gt; that only issues a transaction/commit pair if there is something to 
&gt; commit.
</div>
I much prefer this last option. Care to take a stab at a patch?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1173888" href="/Public/Bug/Display.html?id=82818#txn-1173888">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;24&nbsp;16:07:12&nbsp;2013</span>
    <span class="description">wftk [...] vivtek.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1173888/619129/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/619129">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 332b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jan 23 08:32:45 2013, RIBASUSHI wrote:
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I much prefer this last option. Care to take a stab at a patch?
</div>
In principle, yes &#40;actually quite interesting&#41; - in reality, subject to my 
getting some time in the next week or so.  I&#39;ve made a to-do point.  No, 
seriously, don&#39;t laugh, at least this way I won&#39;t forget *forever*.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1175083" href="/Public/Bug/Display.html?id=82818#txn-1175083">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;28&nbsp;08:17:45&nbsp;2013</span>
    <span class="description">wftk [...] vivtek.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1175083/619779/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/619779">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 169b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jan 23 08:32:45 2013, RIBASUSHI wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I much prefer this last option. Care to take a stab at a patch?
</div>
Done!  The first code I&#39;ve ever written on an airplane.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> patch.txt</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1175083/619780/patch.txt">Download patch.txt</a><br />
<span class="downloadcontenttype">text/plain 2.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">*** SQL-Translator-0.11016/lib/SQL/Translator/Producer/SQLite.pm	2012-09-23 11:17:34.000000000 -0400
--- SQL-Translator-0.11016-mod/lib/SQL/Translator/Producer/SQLite.pm	2013-01-27 11:27:04.682708900 -0400
***************
*** 70,81 ****
  
      my @create = &#40;&#41;;
  
!     push @create, &#34;BEGIN TRANSACTION&#34; unless $no_txn;
  
      for my $table &#40; $schema-&gt;get_tables &#41; {
          push @create, create_table&#40;$table, { no_comments =&gt; $no_comments,
                                               sqlite_version =&gt; $sqlite_version,
                                            add_drop_table =&gt; $add_drop_table,}&#41;;
      }
  
      for my $view &#40; $schema-&gt;get_views &#41; {
--- 70,82 ----
  
      my @create = &#40;&#41;;
  
!     my $stmt_input = 0;
  
      for my $table &#40; $schema-&gt;get_tables &#41; {
          push @create, create_table&#40;$table, { no_comments =&gt; $no_comments,
                                               sqlite_version =&gt; $sqlite_version,
                                            add_drop_table =&gt; $add_drop_table,}&#41;;
+         $stmt_input = 1;
      }
  
      for my $view &#40; $schema-&gt;get_views &#41; {
***************
*** 83,88 ****
--- 84,90 ----
          add_drop_view =&gt; $add_drop_table,
          no_comments   =&gt; $no_comments,
        }&#41;;
+       $stmt_input = 1;
      }
  
      for my $trigger &#40; $schema-&gt;get_triggers &#41; {
***************
*** 90,98 ****
          add_drop_trigger =&gt; $add_drop_table,
          no_comments   =&gt; $no_comments,
        }&#41;;
      }
  
!     push @create, &#34;COMMIT&#34; unless $no_txn;
  
      if &#40;wantarray&#41; {
        return &#40;$head||&#40;&#41;, @create&#41;;
--- 92,104 ----
          add_drop_trigger =&gt; $add_drop_table,
          no_comments   =&gt; $no_comments,
        }&#41;;
+       $stmt_input = 1;
      }
  
!     if &#40;$stmt_input and not $no_txn&#41; {
!        unshift @create, &#34;BEGIN TRANSACTION&#34;;
!        push    @create, &#34;COMMIT&#34;;
!     }
  
      if &#40;wantarray&#41; {
        return &#40;$head||&#40;&#41;, @create&#41;;
***************
*** 100,106 ****
        return join &#40;&#39;&#39;,
          $head||&#40;&#41;,
          join&#40;&#34;;\n\n&#34;, @create &#41;,
!         &#34;;\n&#34;,
        &#41;;
      }
  }
--- 106,112 ----
        return join &#40;&#39;&#39;,
          $head||&#40;&#41;,
          join&#40;&#34;;\n\n&#34;, @create &#41;,
!         $stmt_input ? &#34;;\n&#34; : &#39;&#39;,
        &#41;;
      }
  }
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1175086" href="/Public/Bug/Display.html?id=82818#txn-1175086">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;28&nbsp;08:20:24&nbsp;2013</span>
    <span class="description">wftk [...] vivtek.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1175086/619783/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/619783">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 457b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jan 28 08:17:45 2013, Michael wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Jan 23 08:32:45 2013, RIBASUSHI wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; I much prefer this last option. Care to take a stab at a patch?
</div>&gt; 
&gt; Done!  The first code I&#39;ve ever written on an airplane.
</div>
Oh, sorry - I should have noted that this passes all tests for 
SQL::Translator.  &#40;And also makes Class::DBI::DATA::Schema pass *its* 
tests - except for one it wasn&#39;t getting to because of this, and that&#39;s 
not your problem, ha.&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1191622" href="/Public/Bug/Display.html?id=82818#txn-1191622">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;16&nbsp;15:13:39&nbsp;2013</span>
    <span class="description">wftk [...] vivtek.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1191622/628710/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/628710">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 235b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">By the way, is there any current plan or schedule for a version update 
that might include this patch?  I&#39;ve got another module that depends on 
this change and I&#39;d like to be able to mark it in the dependencies with a 
version number.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.522826</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
