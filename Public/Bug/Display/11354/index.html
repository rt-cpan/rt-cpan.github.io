<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #11354 for PAR: Use of inherited AUTOLOAD for non-method ....</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #11354 for PAR: Use of inherited AUTOLOAD for non-method ....</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/PAR/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/PAR/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/PAR/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/PAR/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/PAR">PAR CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">11354</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/PAR/Active/">PAR</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">smueller [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
william [...] knowmad.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-24530-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
0.87</li>
<li>
0.88</li>
<li>
0.89</li>
<li>
0.90</li>
<li>
0.91</li>
<li>
0.92</li>
<li>
0.93</li>
<li>
0.94</li>
<li>
0.941</li>
</ul>
    </td>
  </tr>
  <tr id="CF-24531-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




autoload-test.zip<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/123269/30950/autoload-test.zip">
Thu Feb 03 12:56:24 2005 (40.6k) by 
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;03&nbsp;01:37:09&nbsp;2005</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Use of inherited AUTOLOAD for non-method ....</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This evening I&#39;ve experienced an issue with using PAR which caused a loop to occur and continually reprint the following:

Use of inherited AUTOLOAD for non-method HTML::FillInForm::DESTROY&#40;&#41; is deprecated at /usr/local/lib/perl5/5.8.6/AutoLoader.pm line 116 during global destruction.

This error appears to arise because HTML::FIF is a subclass of HTML::Parser which is a subclass of DynaLoader. There is some interaction between this mix which causes the DESTROY method to be loaded. Upon unloading an instance of my HTML::FIF object, I get the infinite looping of the above error.

I can use the same toolchain without PAR without an error. I can also add &#39;no AutoLoader;&#39; to HTML::FillInForm which also fixes the problem. I have tried to recreate the problem without success :&#40;.

I&#39;d be glad to try any suggestions to try to repair this error.


William
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;03&nbsp;12:56:24&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> william [...] knowwmad.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Autrijus,

I&#39;ve been able to create a reproducible example using Perl v5.8.6. There
are two files in the attached archive &#40;perl5.par which contains
HTML::FillInForm and test.par which is described below&#41;.

I tried to wrap up the example into a PAR loader. However, the code
works when called like this:

  parl perl5.par test.pl

Instead, if you unpack the archive and call the script/test.pl directly:

  perl test.pl

You will get the error that I reported earlier.

Another way to get rid of the error &#40;besides hacking HTML::FillInForm&#41;
is to load another package which uses HTML::FillInForm. You can achieve
this with the following code:

  perl -MPAR=test.par -MTest test.pl

I&#39;ve tried putting Test.pm into the perl5.par and calling the code with
the following command:

  perl -MTest test.pl

This also results in the error which seems to indicate that the second
call to PAR is necessary to correct the first problem. 

Also, the following command avoids the error:

 perl -MHTML::FillInForm test.pl

Finally, putting the call to use HTML::FillInForm above the use PAR line
in my test script also fixes the problem.

So, it seems that if HTML::FillInForm gets loaded by another operation,
everything works. Otherwise, if it gets loaded from within a PAR
archive, we end up in an infite loop calling AutoLoader::AUTOLOAD. I
hope some of this information helps to track down the cause of the problem.


William
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/123269/30950/autoload-test.zip">Download autoload-test.zip</a><br />
<span class="downloadcontenttype">application/x-zip-compressed 40.6k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;24&nbsp;16:01:11&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> william [...] knowmad.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve had another module lock up when used inside a PAR archive with the
same error message. This time it was CGI::Session. Using the debugger
and a modified version of the test script which I uploaded previously, I
was able to track down what I think is at the root of the problem.

It turns out that CGI::Session uses autoloader to split out subroutines.
Initially I thought the reason for my lock-up in this case was that I
did not properly include the auto/ directory when creating my PAR
archive file. Using `pp -p testscript.pl`, PAR properly found the
autoload files for CGI::Session. However, when I go to use the script
with the generated PAR archive, I still got the &#34;use of inherited
AUTOLOAD for non-method&#34; errors.

Since PAR generates non-standard filenames, when Autoload goes to
determine the *.al filename using the path in %INC, it is being handled
improperly. Because the $filename value is not being correctly
substituted in line 46, the calling file, not the autoload file, is
getting required at line 92 in Autoload.pm. Since this succeeds we end
up in an infinite loop of trying to autoload the method. A quick fix for
any modules which use autoloaded files is to edit them to avoid this usage.

This problem also affects the error I originally reported. Because the
$filename does not get substituted properly in line 46, Autoload thinks
that HTML::FillInForm::DESTORY exists when it does not. If the
substitution would have taken place, the $@ would have been set when the
bogus file was required. If running without PAR, the file gets undefined
which causes a DESTORY subroutine to be automatically added to the
calling package namespace. A quick fix is to add `sub DESTROY {}` to the
package having the problem.

I don&#39;t know what the best solution is for making autoload files and
files which autoload the DESTROY method play well with PAR. It seems to
me that modifications to Autoload.pm are required.


William
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;03&nbsp;13:41:56&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> william [...] knowmad.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yet another module that does not work inside PAR archives is
Time::Piece. It uses DynaLoader which causes the infinite loop of the
following error:

Use of inherited AUTOLOAD for non-method Time::Piece::_mktime&#40;&#41; is
deprecated at /usr/share/perl/5.8/AutoLoader.pm line 116.


William
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;03&nbsp;13:41:56&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;24&nbsp;08:09:06&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Severity Normal changed to Critical</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;24&nbsp;08:09:07&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.88 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;24&nbsp;08:09:07&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.89 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;24&nbsp;08:09:07&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.90 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;24&nbsp;08:09:07&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.91 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;24&nbsp;08:09:07&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.92 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;24&nbsp;08:09:07&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.93 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;24&nbsp;08:09:08&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.94 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;24&nbsp;08:09:08&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.941 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;16&nbsp;08:28:49&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Do. 03. Feb. 2005, 12:56:24, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Autrijus,
&gt; 
&gt; I&#39;ve been able to create a reproducible example using Perl v5.8.6. There
&gt; are two files in the attached archive &#40;perl5.par which contains
&gt; HTML::FillInForm and test.par which is described below&#41;.
&gt; 
&gt; I tried to wrap up the example into a PAR loader. However, the code
&gt; works when called like this:
&gt; 
&gt;   parl perl5.par test.pl
&gt; 
&gt; Instead, if you unpack the archive and call the script/test.pl directly:
&gt; 
&gt;   perl test.pl
&gt; 
&gt; You will get the error that I reported earlier.
&gt; 
&gt; Another way to get rid of the error &#40;besides hacking HTML::FillInForm&#41;
&gt; is to load another package which uses HTML::FillInForm. You can achieve
&gt; this with the following code:
&gt; 
&gt;   perl -MPAR=test.par -MTest test.pl
&gt; 
&gt; I&#39;ve tried putting Test.pm into the perl5.par and calling the code with
&gt; the following command:
&gt; 
&gt;   perl -MTest test.pl
&gt; 
&gt; This also results in the error which seems to indicate that the second
&gt; call to PAR is necessary to correct the first problem. 
&gt; 
&gt; Also, the following command avoids the error:
&gt; 
&gt;  perl -MHTML::FillInForm test.pl
&gt; 
&gt; Finally, putting the call to use HTML::FillInForm above the use PAR line
&gt; in my test script also fixes the problem.
&gt; 
&gt; So, it seems that if HTML::FillInForm gets loaded by another operation,
&gt; everything works. Otherwise, if it gets loaded from within a PAR
&gt; archive, we end up in an infite loop calling AutoLoader::AUTOLOAD. I
&gt; hope some of this information helps to track down the cause of the
</div>problem.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 
&gt; William
</div>
Hi William,

sorry for the late reply. Perhaps I don&#39;t quite understand the problem,
but using your test case &#40;with HTML::FillInForm&#41;, I can&#39;t reproduce the
problem as shown below:

tsee@tsee64:/tmp/par/tmp$ unzip autoload-test.zip 
Archive:  autoload-test.zip
  inflating: test.par                
  inflating: perl5.par               
tsee@tsee64:/tmp/par/tmp$ unzip perl5.par 
Archive:  perl5.par
  inflating: HTML/FillInForm.pm      
  inflating: script/test.pl          
  inflating: Test.pm                 
tsee@tsee64:/tmp/par/tmp$ perl script/test.pl 
Going to undef $fif at script/test.pl line 23.

Done.
tsee@tsee64:/tmp/par/tmp$ rm -rf HTML/
tsee@tsee64:/tmp/par/tmp$ perl script/test.pl 
Going to undef $fif at script/test.pl line 23.

Done.


Also, neither CGI::Session nor HTML::FillInForm use Autoloader as far as
I can tell!

I haven&#39;t investigated Time::Piece yet.

Steffen
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;16&nbsp;08:28:51&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Given to SMUELLER</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;15&nbsp;09:34:26&nbsp;2007</span>
    <span class="description">WMCKEE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> WMCKEE [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jul 16 08:28:49 2006, SMUELLER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Do. 03. Feb. 2005, 12:56:24, guest wrote:
<div class="message-stanza open">&gt; &gt; Autrijus,
&gt; &gt; 
&gt; &gt; I&#39;ve been able to create a reproducible example using Perl v5.8.6. There
&gt; &gt; are two files in the attached archive &#40;perl5.par which contains
&gt; &gt; HTML::FillInForm and test.par which is described below&#41;.
&gt; &gt; 
&gt; &gt; I tried to wrap up the example into a PAR loader. However, the code
&gt; &gt; works when called like this:
&gt; &gt; 
&gt; &gt;   parl perl5.par test.pl
&gt; &gt; 
&gt; &gt; Instead, if you unpack the archive and call the script/test.pl directly:
&gt; &gt; 
&gt; &gt;   perl test.pl
&gt; &gt; 
&gt; &gt; You will get the error that I reported earlier.
&gt; &gt; 
&gt; &gt; Another way to get rid of the error &#40;besides hacking HTML::FillInForm&#41;
&gt; &gt; is to load another package which uses HTML::FillInForm. You can achieve
&gt; &gt; this with the following code:
&gt; &gt; 
&gt; &gt;   perl -MPAR=test.par -MTest test.pl
&gt; &gt; 
&gt; &gt; I&#39;ve tried putting Test.pm into the perl5.par and calling the code with
&gt; &gt; the following command:
&gt; &gt; 
&gt; &gt;   perl -MTest test.pl
&gt; &gt; 
&gt; &gt; This also results in the error which seems to indicate that the second
&gt; &gt; call to PAR is necessary to correct the first problem. 
&gt; &gt; 
&gt; &gt; Also, the following command avoids the error:
&gt; &gt; 
&gt; &gt;  perl -MHTML::FillInForm test.pl
&gt; &gt; 
&gt; &gt; Finally, putting the call to use HTML::FillInForm above the use PAR line
&gt; &gt; in my test script also fixes the problem.
&gt; &gt; 
&gt; &gt; So, it seems that if HTML::FillInForm gets loaded by another operation,
&gt; &gt; everything works. Otherwise, if it gets loaded from within a PAR
&gt; &gt; archive, we end up in an infite loop calling AutoLoader::AUTOLOAD. I
&gt; &gt; hope some of this information helps to track down the cause of the
</div>&gt; problem.
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; 
&gt; &gt; William
</div>&gt; 
&gt; Hi William,
&gt; 
&gt; sorry for the late reply. Perhaps I don&#39;t quite understand the problem,
&gt; but using your test case &#40;with HTML::FillInForm&#41;, I can&#39;t reproduce the
&gt; problem as shown below:
&gt; 
&gt; tsee@tsee64:/tmp/par/tmp$ unzip autoload-test.zip 
&gt; Archive:  autoload-test.zip
&gt;   inflating: test.par                
&gt;   inflating: perl5.par               
&gt; tsee@tsee64:/tmp/par/tmp$ unzip perl5.par 
&gt; Archive:  perl5.par
&gt;   inflating: HTML/FillInForm.pm      
&gt;   inflating: script/test.pl          
&gt;   inflating: Test.pm                 
&gt; tsee@tsee64:/tmp/par/tmp$ perl script/test.pl 
&gt; Going to undef $fif at script/test.pl line 23.
&gt; 
&gt; Done.
&gt; tsee@tsee64:/tmp/par/tmp$ rm -rf HTML/
&gt; tsee@tsee64:/tmp/par/tmp$ perl script/test.pl 
&gt; Going to undef $fif at script/test.pl line 23.
&gt; 
&gt; Done.
&gt; 
&gt; 
&gt; Also, neither CGI::Session nor HTML::FillInForm use Autoloader as far as
&gt; I can tell!
&gt; 
&gt; I haven&#39;t investigated Time::Piece yet.
</div>

Steffen,

Sorry for this belated response. It looks like HTML::FillInForm and
CGI::Session have stopped using Autoloader. I think the root of the
problem was with autoloader which was causing PAR to die. Do you know if
recent releases of PAR have addressed this issue?


William
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;15&nbsp;09:45:18&nbsp;2007</span>
    <span class="description">WMCKEE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Steffen,

CGI::Session 3.95 uses Autoloader. I used the autoload-test script with
PAR 0.956 and can&#39;t replicate the errors I reported earlier. You can
close this ticket.


Thanks,
William
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;15&nbsp;10:21:17&nbsp;2007</span>
    <span class="description">smueller [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">William,

thanks for following up on this. Most requestors just don&#39;t care any
more when their bug is fixed.

On Mon Jan 15 09:34:26 2007, WMCKEE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sorry for this belated response. It looks like HTML::FillInForm and
&gt; CGI::Session have stopped using Autoloader. I think the root of the
&gt; problem was with autoloader which was causing PAR to die. Do you know if
&gt; recent releases of PAR have addressed this issue?
</div>
Funny you mention this right now. I recently spent the better part of a
day to track down this AutoLoader issue. PAR 0.971 comes with a hackish
fix for AutoLoader. It might be more trouble that it&#39;s worth, though.
That&#39;s why I&#39;m currently working on a separate release of AutoLoader
from the perl core. PAR 0.972 will depend on a recent enough AutoLoader.

Best regards,
Steffen
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;15&nbsp;10:21:23&nbsp;2007</span>
    <span class="description">smueller [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
