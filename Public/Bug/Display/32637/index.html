<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #32637 for Algorithm-LBFGS: LBFGS.c generated from LBFGS.xs replaces lbfgs.c.</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #32637 for Algorithm-LBFGS: LBFGS.c generated from LBFGS.xs replaces lbfgs.c.</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Algorithm-LBFGS/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Algorithm-LBFGS/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Algorithm-LBFGS/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Algorithm-LBFGS/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Algorithm-LBFGS">Algorithm-LBFGS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">32637</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Algorithm-LBFGS/Active/">Algorithm-LBFGS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">cpan.laye [...] gmail.com
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
taro.nishino [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-220140-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.11    </td>
  </tr>
  <tr id="CF-220141-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.12    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;25&nbsp;01:05:30&nbsp;2008</span>
    <span class="description">taro.nishino [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> LBFGS.c generated from LBFGS.xs replaces lbfgs.c.</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">In certain platform, for example, MSWIN32, file name is internally case-
insensitive.
So, LBFGS.c generated from LBFGS.xs replaces lbfgs.c.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;25&nbsp;05:19:15&nbsp;2008</span>
    <span class="description">laye [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> taro.nishino [...] gmail.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #32637] LBFGS.c generated from LBFGS.xs replaces lbfgs.c.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 25 Jan 2008 18:18:52 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Algorithm-LBFGS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Laye Suen&#34; &lt;cpan.laye [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks very much for your report,
It will be fixed in the next version.

Regards,
Laye

On Jan 25, 2008 2:05 PM, Taro Nishino via RT &lt;
bug-Algorithm-LBFGS@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Fri Jan 25 01:05:30 2008: Request 32637 was acted upon.
&gt; Transaction: Ticket created by taro-nishino
&gt;       Queue: Algorithm-LBFGS
&gt;     Subject: LBFGS.c generated from LBFGS.xs replaces lbfgs.c.
&gt;   Broken in: 0.11
&gt;    Severity: Critical
&gt;       Owner: Nobody
&gt;  Requestors: taro.nishino@gmail.com
&gt;      Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=32637">http://rt.cpan.org/Ticket/Display.html?id=32637</a></span> &gt;
&gt;
&gt;
&gt; In certain platform, for example, MSWIN32, file name is internally case-
&gt; insensitive.
&gt; So, LBFGS.c generated from LBFGS.xs replaces lbfgs.c.
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;25&nbsp;05:19:21&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;25&nbsp;23:14:22&nbsp;2008</span>
    <span class="description">taro.nishino [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;Laye Suen&#34; &lt;cpan.laye [...] gmail.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #32637] LBFGS.c generated from LBFGS.xs replaces lbfgs.c.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 26 Jan 2008 13:14:08 +0900</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Algorithm-LBFGS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> 西野　太郎 &lt;taro.nishino [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear Laye,

Thanks for your reply.
Incidentally, various compilers don&#39;t necessarily support C99.
As such, I changed the file name of LBFGS.xs to ALBFGS.xs, and
then declared all variables at the beginning of a block in a C part.
In addition, I introduced PREINIT section in an XS part.
As a result, the compilation succeeded, and all the test was done well,
even though my compiler was MS C/C++.

Regards,
Taro Nishino


On Fri, 25 Jan 2008 18:18:52 +0800
&#34;Laye Suen&#34; &lt;cpan.laye@gmail.com&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks very much for your report,
&gt; It will be fixed in the next version.
&gt; 
&gt; Regards,
&gt; Laye
&gt; 
&gt; On Jan 25, 2008 2:05 PM, Taro Nishino via RT &lt;
&gt; bug-Algorithm-LBFGS@rt.cpan.org&gt; wrote:
&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt; Fri Jan 25 01:05:30 2008: Request 32637 was acted upon.
&gt; &gt; Transaction: Ticket created by taro-nishino
&gt; &gt;       Queue: Algorithm-LBFGS
&gt; &gt;     Subject: LBFGS.c generated from LBFGS.xs replaces lbfgs.c.
&gt; &gt;   Broken in: 0.11
&gt; &gt;    Severity: Critical
&gt; &gt;       Owner: Nobody
&gt; &gt;  Requestors: taro.nishino@gmail.com
&gt; &gt;      Status: new
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=32637">http://rt.cpan.org/Ticket/Display.html?id=32637</a></span> &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; In certain platform, for example, MSWIN32, file name is internally case-
&gt; &gt; insensitive.
&gt; &gt; So, LBFGS.c generated from LBFGS.xs replaces lbfgs.c.
&gt; &gt;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;28&nbsp;02:12:28&nbsp;2008</span>
    <span class="description">laye [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #32637] LBFGS.c generated from LBFGS.xs replaces lbfgs.c.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 28 Jan 2008 15:12:00 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Algorithm-LBFGS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Laye Suen&#34; &lt;cpan.laye [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear Taro,

Thanks very much for your love on this module.

I&#39;ve modified the module according to your suggestion, now it can be
successfully built in Win32 5.1 with Perl 5.10.0 and VS 2005.

However, I failed in `nmake test&#39;, as DynaLoader refused to load the DLL
which is built from the XS.

It croaks:

        C:\Perl\bin\perl.exe &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34; &#34;test_harness&#40;0,
&#39;in
c&#39;, &#39;blib\lib&#39;, &#39;blib\arch&#39;&#41;&#34; t/01-parameter.t t/02-optimization.tt/03-monitor.
t
t/01-parameter.......Can&#39;t load
&#39;D:\var\Algorithm-LBFGS\blib\arch/auto/Algorithm
/LBFGS/LBFGS.dll&#39; for module Algorithm::LBFGS: load_file:The specified
module co
uld not be found at C:/Perl/lib/DynaLoader.pm line 201.
 at D:\var\Algorithm-LBFGS\blib\lib/Algorithm/LBFGS.pm line 12
BEGIN failed--compilation aborted at
D:\var\Algorithm-LBFGS\blib\lib/Algorithm/L
BFGS.pm line 12.
Compilation failed in require at t/LBFGS.pm line 16.
BEGIN failed--compilation aborted at t/LBFGS.pm line 16.
Compilation failed in require at t/01-parameter.t line 4.
BEGIN failed--compilation aborted at t/01-parameter.t line 4.
t/01-parameter.......dubious
        Test returned status 2 &#40;wstat 512, 0x200&#41;

I wonder if this happens to you, too.

Thanks in advance.

Happy hacking,
        Laye

On Jan 26, 2008 12:14 PM, Taro Nishino via RT &lt;
bug-Algorithm-LBFGS@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;       Queue: Algorithm-LBFGS
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=32637">http://rt.cpan.org/Ticket/Display.html?id=32637</a></span> &gt;
&gt;
&gt; Dear Laye,
&gt;
&gt; Thanks for your reply.
&gt; Incidentally, various compilers don&#39;t necessarily support C99.
&gt; As such, I changed the file name of LBFGS.xs to ALBFGS.xs, and
&gt; then declared all variables at the beginning of a block in a C part.
&gt; In addition, I introduced PREINIT section in an XS part.
&gt; As a result, the compilation succeeded, and all the test was done well,
&gt; even though my compiler was MS C/C++.
&gt;
&gt; Regards,
&gt; Taro Nishino
&gt;
&gt;
&gt; On Fri, 25 Jan 2008 18:18:52 +0800
&gt; &#34;Laye Suen&#34; &lt;cpan.laye@gmail.com&gt; wrote:
&gt;
<div class="message-stanza open">&gt; &gt; Thanks very much for your report,
&gt; &gt; It will be fixed in the next version.
&gt; &gt;
&gt; &gt; Regards,
&gt; &gt; Laye
&gt; &gt;
&gt; &gt; On Jan 25, 2008 2:05 PM, Taro Nishino via RT &lt;
&gt; &gt; bug-Algorithm-LBFGS@rt.cpan.org&gt; wrote:
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt; Fri Jan 25 01:05:30 2008: Request 32637 was acted upon.
&gt; &gt; &gt; Transaction: Ticket created by taro-nishino
&gt; &gt; &gt;       Queue: Algorithm-LBFGS
&gt; &gt; &gt;     Subject: LBFGS.c generated from LBFGS.xs replaces lbfgs.c.
&gt; &gt; &gt;   Broken in: 0.11
&gt; &gt; &gt;    Severity: Critical
&gt; &gt; &gt;       Owner: Nobody
&gt; &gt; &gt;  Requestors: taro.nishino@gmail.com
&gt; &gt; &gt;      Status: new
&gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=32637">http://rt.cpan.org/Ticket/Display.html?id=32637</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; In certain platform, for example, MSWIN32, file name is internally
</div></div>&gt; case-
<div class="message-stanza open">&gt; &gt; &gt; insensitive.
&gt; &gt; &gt; So, LBFGS.c generated from LBFGS.xs replaces lbfgs.c.
&gt; &gt; &gt;
</div>&gt;
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;28&nbsp;06:58:31&nbsp;2008</span>
    <span class="description">taro.nishino [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;Laye Suen&#34; &lt;cpan.laye [...] gmail.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #32637] LBFGS.c generated from LBFGS.xs replaces lbfgs.c.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 28 Jan 2008 20:57:55 +0900</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Algorithm-LBFGS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Taro Nishino &lt;taro.nishino [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Laye,

Thanks for your reply.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I wonder if this happens to you, too.
</div>The result of my testing is as follows:

C:\test\Perl\Algorithm-LBFGS-0.11&gt;nmake test

Microsoft&#40;R&#41; Program Maintenance Utility Version 7.00.9955
Copyright &#40;C&#41; Microsoft Corporation.  All rights reserved.

C:\Perl\bin\perl.exe &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34; &#34;test_harness&#40;0, &#39;in
c&#39;, &#39;blib\lib&#39;, &#39;blib\arch&#39;&#41;&#34; t/01-parameter.t t/02-optimization.t t/03-monitor.
t
t/01-parameter.........ok
t/02-optimization......ok
t/03-monitor...........ok
All tests successful.
Files=3, Tests=12,  4 wallclock secs &#40; 0.03 usr +  0.05 sys =  0.08 CPU&#41;
Result: PASS
------------------------------------------------------------------------

FYI, I attached my diff to this report.
In addition, my Perl environment is as follows:

C:\test\Perl\Algorithm-LBFGS-0.11&gt;perl -V
Summary of my perl5 &#40;revision 5 version 8 subversion 8&#41; configuration:
  Platform:
    osname=MSWin32, osvers=5.0, archname=MSWin32-x86-multi-thread
    uname=&#39;&#39;
    config_args=&#39;undef&#39;
    hint=recommended, useposix=true, d_sigaction=undef
    usethreads=define use5005threads=undef useithreads=define usemultiplicity=de
fine
    useperlio=define d_sfio=undef uselargefiles=define usesocks=undef
    use64bitint=undef use64bitall=undef uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;cl&#39;, ccflags =&#39;-nologo -GF -W3 -MD -Zi -DNDEBUG -O1 -DWIN32 -D_CONSOLE -
DNO_STRICT -DHAVE_DES_FCRYPT -DNO_HASH_SEED -DUSE_SITECUSTOMIZE -DPERL_IMPLICIT_
CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -DPERL_MSVCRT_READFIX&#39;,
    optimize=&#39;-MD -Zi -DNDEBUG -O1&#39;,
    cppflags=&#39;-DWIN32&#39;
    ccversion=&#39;12.00.8804&#39;, gccversion=&#39;&#39;, gccosandvers=&#39;&#39;
    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=1234
    d_longlong=undef, longlongsize=8, d_longdbl=define, longdblsize=10
    ivtype=&#39;long&#39;, ivsize=4, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;__int64&#39;, lseeksi
ze=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;link&#39;, ldflags =&#39;-nologo -nodefaultlib -debug -opt:ref,icf  -libpath:&#34;C:
\Perl\lib\CORE&#34;  -machine:x86&#39;
    libpth=\lib
    libs=  oldnames.lib kernel32.lib user32.lib gdi32.lib winspool.lib  comdlg32
.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib  netapi32.lib uuid.lib ws2_
32.lib mpr.lib winmm.lib  version.lib odbc32.lib odbccp32.lib msvcrt.lib
    perllibs=  oldnames.lib kernel32.lib user32.lib gdi32.lib winspool.lib  comd
lg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib  netapi32.lib uuid.lib
ws2_32.lib mpr.lib winmm.lib  version.lib odbc32.lib odbccp32.lib msvcrt.lib
    libc=msvcrt.lib, so=dll, useshrplib=yes, libperl=perl58.lib
    gnulibc_version=&#39;&#39;
  Dynamic Linking:
    dlsrc=dl_win32.xs, dlext=dll, d_dlsymun=undef, ccdlflags=&#39; &#39;
    cccdlflags=&#39; &#39;, lddlflags=&#39;-dll -nologo -nodefaultlib -debug -opt:ref,icf  -
libpath:&#34;C:\Perl\lib\CORE&#34;  -machine:x86&#39;


Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options: MULTIPLICITY PERL_IMPLICIT_CONTEXT
                        PERL_IMPLICIT_SYS PERL_MALLOC_WRAP
                        PL_OP_SLAB_ALLOC USE_ITHREADS USE_LARGE_FILES
                        USE_PERLIO USE_SITECUSTOMIZE
  Locally applied patches:
        ActivePerl Build 817 [257965]
        Iin_load_module moved for compatibility with build 806
        PerlEx support in CGI::Carp
        Less verbose ExtUtils::Install and Pod::Find
        Patch for CAN-2005-0448 from Debian with modifications
        Partly reverted 24733 to preserve binary compatibilty
        27528 win32_pclose&#40;&#41; error exit doesn&#39;t unlock mutex
        27527 win32_async_check&#40;&#41; can loop indefinitely
        27515 ignore directories when searching @INC
        27359 Fix -d:Foo=bar syntax
        27210 Fix quote typo in c2ph
        27203 Allow compiling swigged C++ code
        27200 Make stat&#40;&#41; on Windows handle trailing slashes correctly
        27194 Get perl_fini&#40;&#41; running on HP-UX again
        27133 Initialise lastparen in the regexp structure
        27034 Avoid &#34;Prototype mismatch&#34; warnings with autouse
        26970 Make Passive mode the default for Net::FTP
        26921 Avoid getprotobyname/number calls in IO::Socket::INET
        26897,26903 Make common IPPROTO_* constants always available
        26670 Make &#39;-s&#39; on the shebang line parse -foo=bar switches
        26379 Fix alarm&#40;&#41; for Windows 2003
        26087 Storable 0.1 compatibility
        25861 IO::File performace issue
        25084 long groups entry could cause memory exhaustion
        24699 ICMP_UNREACHABLE handling in Net::Ping
  Built under MSWin32
  Compiled at Mar 20 2006 17:54:25
  @INC:
    C:/Perl/lib
    C:/Perl/site/lib
    .

Thanks,
Taro


On Mon, 28 Jan 2008 02:12:30 -0500
&#34;laye@cpan.org via RT&#34; &lt;bug-Algorithm-LBFGS@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=32637">http://rt.cpan.org/Ticket/Display.html?id=32637</a></span> &gt;
&gt; 
&gt; Dear Taro,
&gt; 
&gt; Thanks very much for your love on this module.
&gt; 
&gt; I&#39;ve modified the module according to your suggestion, now it can be
&gt; successfully built in Win32 5.1 with Perl 5.10.0 and VS 2005.
&gt; 
&gt; However, I failed in `nmake test&#39;, as DynaLoader refused to load the DLL
&gt; which is built from the XS.
&gt; 
&gt; It croaks:
&gt; 
&gt;         C:\Perl\bin\perl.exe &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34; &#34;test_harness&#40;0,
&gt; &#39;in
&gt; c&#39;, &#39;blib\lib&#39;, &#39;blib\arch&#39;&#41;&#34; t/01-parameter.t t/02-optimization.tt/03-monitor.
&gt; t
&gt; t/01-parameter.......Can&#39;t load
&gt; &#39;D:\var\Algorithm-LBFGS\blib\arch/auto/Algorithm
&gt; /LBFGS/LBFGS.dll&#39; for module Algorithm::LBFGS: load_file:The specified
&gt; module co
&gt; uld not be found at C:/Perl/lib/DynaLoader.pm line 201.
&gt;  at D:\var\Algorithm-LBFGS\blib\lib/Algorithm/LBFGS.pm line 12
&gt; BEGIN failed--compilation aborted at
&gt; D:\var\Algorithm-LBFGS\blib\lib/Algorithm/L
&gt; BFGS.pm line 12.
&gt; Compilation failed in require at t/LBFGS.pm line 16.
&gt; BEGIN failed--compilation aborted at t/LBFGS.pm line 16.
&gt; Compilation failed in require at t/01-parameter.t line 4.
&gt; BEGIN failed--compilation aborted at t/01-parameter.t line 4.
&gt; t/01-parameter.......dubious
&gt;         Test returned status 2 &#40;wstat 512, 0x200&#41;
&gt; 
&gt; I wonder if this happens to you, too.
&gt; 
&gt; Thanks in advance.
&gt; 
&gt; Happy hacking,
&gt;         Laye
&gt;
</div></div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;31&nbsp;05:47:59&nbsp;2008</span>
    <span class="description">laye [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #32637] LBFGS.c generated from LBFGS.xs replaces lbfgs.c.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 31 Jan 2008 18:47:15 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Algorithm-LBFGS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Laye Suen&#34; &lt;cpan.laye [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi, Taro

Sorry for the late reply, thanks very much for your detailed report.

Your code diff is exactly the same as mine, and I tried your version of Perl
interpretor, too. However, the DLL still couldn&#39;t be loaded. I also googled
this problem, asked at irc.perl.org. Unfortunately, no answer have been
found yet. I even cannot run the test of an empty module generated by h2xs
on my Win32 :-&#40; Maybe it has something to do with the version of MSVC? I&#39;m
not sure and haven&#39;t tried. Anyhow, I uploaded the 0.12 version of the
module which could be successfully compiled by MSVC, hoping it will work for
you.

Thanks for your attention and help ^_^

Regards,
Laye

On Jan 28, 2008 7:58 PM, Taro Nishino via RT &lt;
bug-Algorithm-LBFGS@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;       Queue: Algorithm-LBFGS
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=32637">http://rt.cpan.org/Ticket/Display.html?id=32637</a></span> &gt;
&gt;
&gt; Hi Laye,
&gt;
&gt; Thanks for your reply.
&gt;
<div class="message-stanza open">&gt; &gt; I wonder if this happens to you, too.
</div>&gt; The result of my testing is as follows:
&gt;
&gt; C:\test\Perl\Algorithm-LBFGS-0.11&gt;nmake test
&gt;
&gt; Microsoft&#40;R&#41; Program Maintenance Utility Version 7.00.9955
&gt; Copyright &#40;C&#41; Microsoft Corporation.  All rights reserved.
&gt;
&gt; C:\Perl\bin\perl.exe &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34; &#34;test_harness&#40;0, &#39;in
&gt; c&#39;, &#39;blib\lib&#39;, &#39;blib\arch&#39;&#41;&#34; t/01-parameter.t t/02-optimization.tt/03-monitor.
&gt; t
&gt; t/01-parameter.........ok
&gt; t/02-optimization......ok
&gt; t/03-monitor...........ok
&gt; All tests successful.
&gt; Files=3, Tests=12,  4 wallclock secs &#40; 0.03 usr +  0.05 sys =  0.08 CPU&#41;
&gt; Result: PASS
&gt; ------------------------------------------------------------------------
&gt;
&gt; FYI, I attached my diff to this report.
&gt; In addition, my Perl environment is as follows:
&gt;
&gt; C:\test\Perl\Algorithm-LBFGS-0.11&gt;perl -V
&gt; Summary of my perl5 &#40;revision 5 version 8 subversion 8&#41; configuration:
&gt;  Platform:
&gt;    osname=MSWin32, osvers=5.0, archname=MSWin32-x86-multi-thread
&gt;    uname=&#39;&#39;
&gt;    config_args=&#39;undef&#39;
&gt;    hint=recommended, useposix=true, d_sigaction=undef
&gt;    usethreads=define use5005threads=undef useithreads=define
&gt; usemultiplicity=de
&gt; fine
&gt;    useperlio=define d_sfio=undef uselargefiles=define usesocks=undef
&gt;    use64bitint=undef use64bitall=undef uselongdouble=undef
&gt;    usemymalloc=n, bincompat5005=undef
&gt;  Compiler:
&gt;    cc=&#39;cl&#39;, ccflags =&#39;-nologo -GF -W3 -MD -Zi -DNDEBUG -O1 -DWIN32
&gt; -D_CONSOLE -
&gt; DNO_STRICT -DHAVE_DES_FCRYPT -DNO_HASH_SEED -DUSE_SITECUSTOMIZE
&gt; -DPERL_IMPLICIT_
&gt; CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -DPERL_MSVCRT_READFIX&#39;,
&gt;    optimize=&#39;-MD -Zi -DNDEBUG -O1&#39;,
&gt;    cppflags=&#39;-DWIN32&#39;
&gt;    ccversion=&#39;12.00.8804&#39;, gccversion=&#39;&#39;, gccosandvers=&#39;&#39;
&gt;    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=1234
&gt;    d_longlong=undef, longlongsize=8, d_longdbl=define, longdblsize=10
&gt;    ivtype=&#39;long&#39;, ivsize=4, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;__int64&#39;,
&gt; lseeksi
&gt; ze=8
&gt;    alignbytes=8, prototype=define
&gt;  Linker and Libraries:
&gt;    ld=&#39;link&#39;, ldflags =&#39;-nologo -nodefaultlib -debug -opt:ref,icf
&gt;  -libpath:&#34;C:
&gt; \Perl\lib\CORE&#34;  -machine:x86&#39;
&gt;    libpth=\lib
&gt;    libs=  oldnames.lib kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32
&gt; .lib advapi32.lib shell32.lib ole32.lib oleaut32.lib  netapi32.lib
&gt; uuid.lib ws2_
&gt; 32.lib mpr.lib winmm.lib  version.lib odbc32.lib odbccp32.lib msvcrt.lib
&gt;    perllibs=  oldnames.lib kernel32.lib user32.lib gdi32.lib winspool.lib comd
&gt; lg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib  netapi32.lib
&gt; uuid.lib
&gt; ws2_32.lib mpr.lib winmm.lib  version.lib odbc32.lib odbccp32.lib
&gt; msvcrt.lib
&gt;    libc=msvcrt.lib, so=dll, useshrplib=yes, libperl=perl58.lib
&gt;    gnulibc_version=&#39;&#39;
&gt;  Dynamic Linking:
&gt;    dlsrc=dl_win32.xs, dlext=dll, d_dlsymun=undef, ccdlflags=&#39; &#39;
&gt;    cccdlflags=&#39; &#39;, lddlflags=&#39;-dll -nologo -nodefaultlib -debug
&gt; -opt:ref,icf  -
&gt; libpath:&#34;C:\Perl\lib\CORE&#34;  -machine:x86&#39;
&gt;
&gt;
&gt; Characteristics of this binary &#40;from libperl&#41;:
&gt;  Compile-time options: MULTIPLICITY PERL_IMPLICIT_CONTEXT
&gt;                        PERL_IMPLICIT_SYS PERL_MALLOC_WRAP
&gt;                        PL_OP_SLAB_ALLOC USE_ITHREADS USE_LARGE_FILES
&gt;                        USE_PERLIO USE_SITECUSTOMIZE
&gt;  Locally applied patches:
&gt;        ActivePerl Build 817 [257965]
&gt;        Iin_load_module moved for compatibility with build 806
&gt;        PerlEx support in CGI::Carp
&gt;        Less verbose ExtUtils::Install and Pod::Find
&gt;        Patch for CAN-2005-0448 from Debian with modifications
&gt;        Partly reverted 24733 to preserve binary compatibilty
&gt;        27528 win32_pclose&#40;&#41; error exit doesn&#39;t unlock mutex
&gt;        27527 win32_async_check&#40;&#41; can loop indefinitely
&gt;        27515 ignore directories when searching @INC
&gt;        27359 Fix -d:Foo=bar syntax
&gt;        27210 Fix quote typo in c2ph
&gt;        27203 Allow compiling swigged C++ code
&gt;        27200 Make stat&#40;&#41; on Windows handle trailing slashes correctly
&gt;        27194 Get perl_fini&#40;&#41; running on HP-UX again
&gt;        27133 Initialise lastparen in the regexp structure
&gt;        27034 Avoid &#34;Prototype mismatch&#34; warnings with autouse
&gt;        26970 Make Passive mode the default for Net::FTP
&gt;        26921 Avoid getprotobyname/number calls in IO::Socket::INET
&gt;        26897,26903 Make common IPPROTO_* constants always available
&gt;        26670 Make &#39;-s&#39; on the shebang line parse -foo=bar switches
&gt;        26379 Fix alarm&#40;&#41; for Windows 2003
&gt;        26087 Storable 0.1 compatibility
&gt;        25861 IO::File performace issue
&gt;        25084 long groups entry could cause memory exhaustion
&gt;        24699 ICMP_UNREACHABLE handling in Net::Ping
&gt;  Built under MSWin32
&gt;  Compiled at Mar 20 2006 17:54:25
&gt;  @INC:
&gt;    C:/Perl/lib
&gt;    C:/Perl/site/lib
&gt;    .
&gt;
&gt; Thanks,
&gt; Taro
&gt;
&gt;
&gt; On Mon, 28 Jan 2008 02:12:30 -0500
&gt; &#34;laye@cpan.org via RT&#34; &lt;bug-Algorithm-LBFGS@rt.cpan.org&gt; wrote:
&gt;
<div class="message-stanza open">&gt; &gt;
&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=32637">http://rt.cpan.org/Ticket/Display.html?id=32637</a></span> &gt;
&gt; &gt;
&gt; &gt; Dear Taro,
&gt; &gt;
&gt; &gt; Thanks very much for your love on this module.
&gt; &gt;
&gt; &gt; I&#39;ve modified the module according to your suggestion, now it can be
&gt; &gt; successfully built in Win32 5.1 with Perl 5.10.0 and VS 2005.
&gt; &gt;
&gt; &gt; However, I failed in `nmake test&#39;, as DynaLoader refused to load the DLL
&gt; &gt; which is built from the XS.
&gt; &gt;
&gt; &gt; It croaks:
&gt; &gt;
&gt; &gt;         C:\Perl\bin\perl.exe &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34;
</div>&gt; &#34;test_harness&#40;0,
<div class="message-stanza open">&gt; &gt; &#39;in
&gt; &gt; c&#39;, &#39;blib\lib&#39;, &#39;blib\arch&#39;&#41;&#34; t/01-parameter.t t/02-
</div>&gt; optimization.tt/03-monitor.
<div class="message-stanza open">&gt; &gt; t
&gt; &gt; t/01-parameter.......Can&#39;t load
&gt; &gt; &#39;D:\var\Algorithm-LBFGS\blib\arch/auto/Algorithm
&gt; &gt; /LBFGS/LBFGS.dll&#39; for module Algorithm::LBFGS: load_file:The specified
&gt; &gt; module co
&gt; &gt; uld not be found at C:/Perl/lib/DynaLoader.pm line 201.
&gt; &gt;  at D:\var\Algorithm-LBFGS\blib\lib/Algorithm/LBFGS.pm line 12
&gt; &gt; BEGIN failed--compilation aborted at
&gt; &gt; D:\var\Algorithm-LBFGS\blib\lib/Algorithm/L
&gt; &gt; BFGS.pm line 12.
&gt; &gt; Compilation failed in require at t/LBFGS.pm line 16.
&gt; &gt; BEGIN failed--compilation aborted at t/LBFGS.pm line 16.
&gt; &gt; Compilation failed in require at t/01-parameter.t line 4.
&gt; &gt; BEGIN failed--compilation aborted at t/01-parameter.t line 4.
&gt; &gt; t/01-parameter.......dubious
&gt; &gt;         Test returned status 2 &#40;wstat 512, 0x200&#41;
&gt; &gt;
&gt; &gt; I wonder if this happens to you, too.
&gt; &gt;
&gt; &gt; Thanks in advance.
&gt; &gt;
&gt; &gt; Happy hacking,
&gt; &gt;         Laye
&gt; &gt;
</div>&gt;
&gt;
&gt; --- LBFGS.xs    Thu Jan 24 12:56:17 2008
&gt; +++ ALBFGS.xs   Fri Jan 25 07:53:43 2008
&gt; @@ -55,6 +55,9 @@
&gt;     const lbfgsfloatval_t    step&#41;
&gt;  {
&gt;     int i;
&gt; +    SV** args;
&gt; +    SV** rets;
&gt; +    lbfgsfloatval_t f;
&gt;     /* fetch refs to user evaluating sub and extra data */
&gt;     SV* lbfgs_eval = &#40;&#40;SV**&#41;instance&#41;[0];
&gt;     SV* user_data = &#40;&#40;SV**&#41;instance&#41;[2];
&gt; @@ -63,8 +66,8 @@
&gt;     av_extend&#40;av_x, n - 1&#41;;
&gt;     for &#40;i = 0; i &lt; n; i++&#41; av_store&#40;av_x, i, newSVnv&#40;x[i]&#41;&#41;;
&gt;     /* allocate space for arguments and return values */
&gt; -    SV** args = &#40;SV**&#41;malloc&#40;3 * sizeof&#40;SV*&#41;&#41;;
&gt; -    SV** rets = &#40;SV**&#41;malloc&#40;2 * sizeof&#40;SV*&#41;&#41;;
&gt; +    args = &#40;SV**&#41;malloc&#40;3 * sizeof&#40;SV*&#41;&#41;;
&gt; +    rets = &#40;SV**&#41;malloc&#40;2 * sizeof&#40;SV*&#41;&#41;;
&gt;     /* call the user evaluating sub */
&gt;     args[0] = sv_2mortal&#40;newRV_inc&#40;&#40;SV*&#41;av_x&#41;&#41;;
&gt;     args[1] = sv_2mortal&#40;newSVnv&#40;step&#41;&#41;;
&gt; @@ -73,7 +76,7 @@
&gt;     /* get the function value and gradient vector from return values */
&gt;     for &#40;i = 0; i &lt; n; i++&#41;
&gt;         g[i] = SvNV&#40;*av_fetch&#40;&#40;AV*&#41;SvRV&#40;rets[1]&#41;, i, 0&#41;&#41;;
&gt; -    lbfgsfloatval_t f = SvNV&#40;rets[0]&#41;;
&gt; +    f = SvNV&#40;rets[0]&#41;;
&gt;     /* release space of arguments and return values */
&gt;     SvREFCNT_dec&#40;rets[0]&#41;;
&gt;     SvREFCNT_dec&#40;rets[1]&#41;;
&gt; @@ -96,17 +99,22 @@
&gt;     int                      ls&#41;
&gt;  {
&gt;     int i;
&gt; +    AV* av_g;
&gt; +    SV** args;
&gt; +    SV** rets;
&gt; +    AV* av_x;
&gt; +    int r;
&gt;     /* fetch refs to the user progress monitor sub and extra data */
&gt;     SV* lbfgs_prgr = &#40;&#40;SV**&#41;instance&#41;[1];
&gt;     SV* user_data = &#40;&#40;SV**&#41;instance&#41;[2];
&gt;     /* create mortal AVs for C array x and g */
&gt; -    AV* av_x = &#40;AV*&#41;sv_2mortal&#40;&#40;SV*&#41;newAV&#40;&#41;&#41;;
&gt; +    av_x = &#40;AV*&#41;sv_2mortal&#40;&#40;SV*&#41;newAV&#40;&#41;&#41;;
&gt;     for &#40;i = 0; i &lt; n; i++&#41; av_store&#40;av_x, i, newSVnv&#40;x[i]&#41;&#41;;
&gt; -    AV* av_g = &#40;AV*&#41;sv_2mortal&#40;&#40;SV*&#41;newAV&#40;&#41;&#41;;
&gt; +    av_g = &#40;AV*&#41;sv_2mortal&#40;&#40;SV*&#41;newAV&#40;&#41;&#41;;
&gt;     for &#40;i = 0; i &lt; n; i++&#41; av_store&#40;av_g, i, newSVnv&#40;g[i]&#41;&#41;;
&gt;     /* allocate space for arguments and return values */
&gt; -    SV** args = &#40;SV**&#41;malloc&#40;9 * sizeof&#40;SV*&#41;&#41;;
&gt; -    SV** rets = &#40;SV**&#41;malloc&#40;1 * sizeof&#40;SV*&#41;&#41;;
&gt; +    args = &#40;SV**&#41;malloc&#40;9 * sizeof&#40;SV*&#41;&#41;;
&gt; +    rets = &#40;SV**&#41;malloc&#40;1 * sizeof&#40;SV*&#41;&#41;;
&gt;     /* call the user progress monitor sub */
&gt;     args[0] = sv_2mortal&#40;newRV_inc&#40;&#40;SV*&#41;av_x&#41;&#41;;
&gt;     args[1] = sv_2mortal&#40;newRV_inc&#40;&#40;SV*&#41;av_g&#41;&#41;;
&gt; @@ -119,7 +127,7 @@
&gt;     args[8] = user_data;
&gt;     call_perl_sub&#40;lbfgs_prgr, args, rets, 9, 1&#41;;
&gt;     /* get status from return value */
&gt; -    int r = SvIV&#40;rets[0]&#41;;
&gt; +    r = SvIV&#40;rets[0]&#41;;
&gt;     /* release space of arguments and return values */
&gt;     SvREFCNT_dec&#40;rets[0]&#41;;
&gt;     free&#40;args&#41;;
&gt; @@ -225,16 +233,20 @@
&gt;         void*   param
&gt;        void*   instance
&gt;        SV*     x0
&gt; +    PREINIT:
&gt; +    AV* av_x0;
&gt; +    int n;
&gt; +    lbfgsfloatval_t* carr_x0;
&gt; +    int i;
&gt; +    int s;
&gt;     CODE:
&gt;        /* build C array carr_x0 from Perl array ref x0 */
&gt; -        AV* av_x0 = &#40;AV*&#41;SvRV&#40;x0&#41;;
&gt; -       int n = av_len&#40;av_x0&#41; + 1;
&gt; -       lbfgsfloatval_t* carr_x0 = &#40;lbfgsfloatval_t*&#41;
&gt; -           malloc&#40;n * sizeof&#40;lbfgsfloatval_t&#41;&#41;;
&gt; -       int i;
&gt; +    av_x0 = &#40;AV*&#41;SvRV&#40;x0&#41;;
&gt; +       n = av_len&#40;av_x0&#41; + 1;
&gt; +       carr_x0 = &#40;lbfgsfloatval_t*&#41; malloc&#40;n * sizeof&#40;lbfgsfloatval_t&#41;&#41;;
&gt;        for &#40;i = 0; i &lt; n; i++&#41; carr_x0[i] = SvNV&#40;*av_fetch&#40;av_x0, i, 0&#41;&#41;;
&gt;        /* call L-BFGS */
&gt; -       int s = lbfgs&#40;n, carr_x0, NULL,
&gt; +       s = lbfgs&#40;n, carr_x0, NULL,
&gt;                      SvOK&#40;&#40;&#40;SV**&#41;instance&#41;[0]&#41; ? &#38;lbfgs_evaluate : NULL,
&gt;                      SvOK&#40;&#40;&#40;SV**&#41;instance&#41;[1]&#41; ? &#38;lbfgs_progress : NULL,
&gt;                      instance, &#40;lbfgs_parameter_t*&#41;param&#41;;
&gt;
&gt;
</div></div></div>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;31&nbsp;16:24:03&nbsp;2008</span>
    <span class="description">taro.nishino [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #32637] LBFGS.c generated from LBFGS.xs replaces lbfgs.c.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 01 Feb 2008 06:23:47 +0900</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Algorithm-LBFGS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Taro Nishino &lt;taro.nishino [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Laye,

Thanks for your work. Take care.
As you can see my report in CPAN Testers, all the test was done well.

BTW, I also guess that VS 2005 can&#39;t build due to its backward
compatibility because many Perl interpreters in MSWIN32 are built by
Visual C++ 6.0, for example ActivePerl.

Regards,
Taro

On Thu, 31 Jan 2008 05:48:09 -0500
&#34;laye@cpan.org via RT&#34; &lt;bug-Algorithm-LBFGS@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=32637">http://rt.cpan.org/Ticket/Display.html?id=32637</a></span> &gt;
&gt; 
&gt; Hi, Taro
&gt; 
&gt; Sorry for the late reply, thanks very much for your detailed report.
&gt; 
&gt; Your code diff is exactly the same as mine, and I tried your version of Perl
&gt; interpretor, too. However, the DLL still couldn&#39;t be loaded. I also googled
&gt; this problem, asked at irc.perl.org. Unfortunately, no answer have been
&gt; found yet. I even cannot run the test of an empty module generated by h2xs
&gt; on my Win32 :-&#40; Maybe it has something to do with the version of MSVC? I&#39;m
&gt; not sure and haven&#39;t tried. Anyhow, I uploaded the 0.12 version of the
&gt; module which could be successfully compiled by MSVC, hoping it will work for
&gt; you.
&gt; 
&gt; Thanks for your attention and help ^_^
&gt; 
&gt; Regards,
&gt; Laye
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;01&nbsp;05:09:49&nbsp;2008</span>
    <span class="description">laye [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #32637] LBFGS.c generated from LBFGS.xs replaces lbfgs.c.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 1 Feb 2008 18:09:17 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Algorithm-LBFGS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Laye Suen&#34; &lt;cpan.laye [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Taro,

Yeah, maybe I should try with the VS6 compiler.

Much thanks for your help on my first module ^_^

Happy lunar new year ~

Regards,
Laye

On 2/1/08, Taro Nishino via RT &lt;bug-Algorithm-LBFGS@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;        Queue: Algorithm-LBFGS
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=32637">http://rt.cpan.org/Ticket/Display.html?id=32637</a></span> &gt;
&gt;
&gt; Hi Laye,
&gt;
&gt; Thanks for your work. Take care.
&gt; As you can see my report in CPAN Testers, all the test was done well.
&gt;
&gt; BTW, I also guess that VS 2005 can&#39;t build due to its backward
&gt; compatibility because many Perl interpreters in MSWIN32 are built by
&gt; Visual C++ 6.0, for example ActivePerl.
&gt;
&gt; Regards,
&gt; Taro
&gt;
&gt; On Thu, 31 Jan 2008 05:48:09 -0500
&gt; &#34;laye@cpan.org via RT&#34; &lt;bug-Algorithm-LBFGS@rt.cpan.org&gt; wrote:
&gt;
<div class="message-stanza open">&gt; &gt;
&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=32637">http://rt.cpan.org/Ticket/Display.html?id=32637</a></span> &gt;
&gt; &gt;
&gt; &gt; Hi, Taro
&gt; &gt;
&gt; &gt; Sorry for the late reply, thanks very much for your detailed report.
&gt; &gt;
&gt; &gt; Your code diff is exactly the same as mine, and I tried your version of
</div>&gt; Perl
<div class="message-stanza open">&gt; &gt; interpretor, too. However, the DLL still couldn&#39;t be loaded. I also
</div>&gt; googled
<div class="message-stanza open">&gt; &gt; this problem, asked at irc.perl.org. Unfortunately, no answer have been
&gt; &gt; found yet. I even cannot run the test of an empty module generated by h2xs
&gt; &gt; on my Win32 :-&#40; Maybe it has something to do with the version of MSVC? I&#39;m
&gt; &gt; not sure and haven&#39;t tried. Anyhow, I uploaded the 0.12 version of the
&gt; &gt; module which could be successfully compiled by MSVC, hoping it will work
</div>&gt; for
<div class="message-stanza open">&gt; &gt; you.
&gt; &gt;
&gt; &gt; Thanks for your attention and help ^_^
&gt; &gt;
&gt; &gt; Regards,
&gt; &gt; Laye
&gt; &gt;
</div>&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;10&nbsp;23:59:35&nbsp;2008</span>
    <span class="description">taro.nishino [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #32637] LBFGS.c generated from LBFGS.xs replaces lbfgs.c.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 11 Feb 2008 13:59:25 +0900</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Algorithm-LBFGS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Taro Nishino &lt;taro.nishino [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Laye,

You should close this thread on RT, since the problem of Algorithm-LBFGS
-0.11 was fixed.

Regards,
Taro
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;12&nbsp;04:49:22&nbsp;2008</span>
    <span class="description">cpan.laye [...] gmail.com -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;12&nbsp;04:59:44&nbsp;2008</span>
    <span class="description">cpan.laye [...] gmail.com -  Fixed in 0.12 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;12&nbsp;05:01:35&nbsp;2008</span>
    <span class="description">cpan.laye [...] gmail.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
