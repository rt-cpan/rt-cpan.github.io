<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #50491 for Parse-MediaWikiDump: Any chance of upgrading MediaWikiDump to version 0.4?</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #50491 for Parse-MediaWikiDump: Any chance of upgrading MediaWikiDump to version 0.4?</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Parse-MediaWikiDump">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Parse-MediaWikiDump">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Parse-MediaWikiDump">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Parse-MediaWikiDump">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Parse-MediaWikiDump">Parse-MediaWikiDump CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">50491</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Parse-MediaWikiDump">Parse-MediaWikiDump</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
tomaz.solc [...] tablix.org

<br />
david.m.carter [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-24738-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.94    </td>
  </tr>
  <tr id="CF-24739-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Parse-MediaWikiDump-0.96.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/680355/350227/Parse-MediaWikiDump-0.96.patch">
Wed Oct 21 14:40:31 2009 (1.7k) by triddle [...] cpan.org
</a>
</font></li>
</ul>


Parse-MediaWikiDump-0.96.tar.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/680932/350560/Parse-MediaWikiDump-0.96.tar.gz">
Thu Oct 22 15:26:01 2009 (16.4k) by triddle [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=50491">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-676566" href="/Public/Bug/Display.html?id=50491#txn-676566">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;14&nbsp;07:29:55&nbsp;2009</span>
    <span class="description">tomaz.solc [...] tablix.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Does not support version 0.4 dump files</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/676566/348030/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/348030">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 508b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The latest dumps from Wikimedia &#40;for example 20091009 enwiki&#41; have
incremented dump format version to 0.4.

Parse::MediaWikiDump fails to open those files with the following error
message:

Only version 0.3 dump files are supported at
/usr/local/share/perl/5.10.0/Parse/MediaWikiDump/Pages.pm line 73.

export-0.4.xsd in MediaWiki SVN describes changes in 0.4 as:

Version 0.4 adds per-revision delete flags, log exports,
discussion threading data, a per-page redirect flag, and
per-namespace capitalization.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Create even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-676633" href="/Public/Bug/Display.html?id=50491#txn-676633">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;14&nbsp;10:59:07&nbsp;2009</span>
    <span class="description">david.m.carter [...] gmail.com - Ticket #50494:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Any chance of upgrading MediaWikiDump to version 0.4?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 14 Oct 2009 15:58:44 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Parse-MediaWikiDump [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Carter &lt;david.m.carter [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/676633/348070/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/348070">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 951b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

I&#39;m trying to run MediaWikiDump on the latest Japanese Wikipedia dump file,

<span class="clickylink"><a target="new" rel="nofollow" href="http://download.wikimedia.org/jawiki/latest/jawiki-latest-pages-articles.xml.bz2">http://download.wikimedia.org/jawiki/latest/jawiki-latest-pages-articles.xml.bz2</a></span>

which contains this in its header:

&lt;mediawiki xmlns=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.mediawiki.org/xml/export-0.4/">http://www.mediawiki.org/xml/export-0.4/</a></span>&#34;
xmlns:xsi=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a></span>&#34;
xsi:schemaLocation=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.mediawiki.org/xml/export-0.4/">http://www.mediawiki.org/xml/export-0.4/</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.mediawiki.org/xml/export-0.4.xsd">http://www.mediawiki.org/xml/export-0.4.xsd</a></span>&#34; version=&#34;0.4&#34;
xml:lang=&#34;ja&#34;&gt;

which makes version 0.94 of MediaWikiDump fall over here:

% grep 0.3 /usr/lib/perl5/site_perl/5.8.8/Parse/MediaWikiDump/Pages.pm
        die &#34;Only version 0.3 dump files are supported&#34; unless
$attrs-&gt;{version} eq &#39;0.3&#39;;

Do you have any plans to extend your code to handle 0.4? If so I would
much appreciate it...

Thanks

David

% perl -v
... perl, v5.8.8 built for i586-linux-thread-multi ...
% uname -a
Linux abbot 2.6.22.19-0.1-bigsmp #1 SMP 2008-10-14 22:17:43 +0200 i686
i686 i386 GNU/Linux
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-676662" href="/Public/Bug/Display.html?id=50491#txn-676662">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;14&nbsp;12:02:07&nbsp;2009</span>
    <span class="description">triddle [...] cpan.org - Ticket #50494:  Merged into ticket #50491</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-676663" href="/Public/Bug/Display.html?id=50491#txn-676663">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;14&nbsp;12:02:07&nbsp;2009</span>
    <span class="description">triddle [...] cpan.org -  Merged into ticket #50491</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-676664" href="/Public/Bug/Display.html?id=50491#txn-676664">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;14&nbsp;12:02:07&nbsp;2009</span>
    <span class="description">triddle [...] cpan.org -  Subject changed from &#39;Does not support version 0.4 dump files&#39; to &#39;Any chance of upgrading MediaWikiDump to version 0.4?&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-676671" href="/Public/Bug/Display.html?id=50491#txn-676671">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;14&nbsp;12:07:14&nbsp;2009</span>
    <span class="description">triddle [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/676671/348087/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/348087">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 869b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the note about the change in the Mediawiki dump file revision number. I do plan 
to augment the code to support version 0.4 dump files but I don&#39;t have an estimate as to 
when it&#39;ll be released. I&#39;ll update this ticket as I make progress so you&#39;ll stay informed.

Tyler Riddle

On Wed Oct 14 07:29:55 2009, AVIAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The latest dumps from Wikimedia &#40;for example 20091009 enwiki&#41; have
&gt; incremented dump format version to 0.4.
&gt; 
&gt; Parse::MediaWikiDump fails to open those files with the following error
&gt; message:
&gt; 
&gt; Only version 0.3 dump files are supported at
&gt; /usr/local/share/perl/5.10.0/Parse/MediaWikiDump/Pages.pm line 73.
&gt; 
&gt; export-0.4.xsd in MediaWiki SVN describes changes in 0.4 as:
&gt; 
&gt; Version 0.4 adds per-revision delete flags, log exports,
&gt; discussion threading data, a per-page redirect flag, and
&gt; per-namespace capitalization.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-676672" href="/Public/Bug/Display.html?id=50491#txn-676672">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;14&nbsp;12:07:14&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-680355" href="/Public/Bug/Display.html?id=50491#txn-680355">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;21&nbsp;14:40:31&nbsp;2009</span>
    <span class="description">triddle [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/680355/350224/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/350224">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 554b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The XML schema for the 0.94 dump files has not been published at the URLs specified in the 
dump files so I opened a bug with MediaWiki to have them published. Until I get my hands on 
the schema and can augment the code to support the new data I&#39;ve created a simple patch that 
allows 0.4 version dump files with out any other changes and I&#39;ve attached it to this ticket. 

I have not fully tested whether or not the changes to the dump file cause weird behavior to 
show up. Can you please try out the patch and let me know if it works for your needs? 
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Parse-MediaWikiDump-0.96.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/680355/350227/Parse-MediaWikiDump-0.96.patch">Download Parse-MediaWikiDump-0.96.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">### Eclipse Workspace Patch 1.0
#P Parse-MediaWikiDump
Index: lib/Parse/MediaWikiDump/Revisions.pm
===================================================================
--- lib/Parse/MediaWikiDump/Revisions.pm	&#40;revision 89&#41;
+++ lib/Parse/MediaWikiDump/Revisions.pm	&#40;working copy&#41;
@@ -1,6 +1,6 @@
 package Parse::MediaWikiDump::Revisions;
 
-our $VERSION = &#39;0.95&#39;;
+our $VERSION = &#39;0.96&#39;;
 
 use 5.8.0;
 
@@ -264,7 +264,11 @@
 
 sub validate_mediawiki_node {
 	my &#40;$engine, $a, $element, $attrs&#41; = @_;
-	die &#34;Only version 0.3 dump files are supported&#34; unless $attrs-&gt;{version} eq &#39;0.3&#39;;
+	my $version = $attrs-&gt;{version};
+	
+	if &#40;$version ne &#39;0.3&#39; &#38;&#38; $version ne &#39;0.4&#39;&#41; {
+			die &#34;Only version 0.3 and 0.4 dump files are supported&#34;;
+	}
 }
 
 sub save_siteinfo {
Index: lib/Parse/MediaWikiDump/Pages.pm
===================================================================
--- lib/Parse/MediaWikiDump/Pages.pm	&#40;revision 86&#41;
+++ lib/Parse/MediaWikiDump/Pages.pm	&#40;working copy&#41;
@@ -1,6 +1,6 @@
 package Parse::MediaWikiDump::Pages;
 
-our $VERSION = &#39;0.94&#39;;
+our $VERSION = &#39;0.96&#39;;
 
 use base qw&#40;Parse::MediaWikiDump::Revisions&#41;;
 
@@ -69,8 +69,7 @@
 }
 
 sub validate_mediawiki_node {
-	my &#40;$engine, $a, $element, $attrs&#41; = @_;
-	die &#34;Only version 0.3 dump files are supported&#34; unless $attrs-&gt;{version} eq &#39;0.3&#39;;
+	return Parse::MediaWikiDump::Revisions::validate_mediawiki_node&#40;@_&#41;;
 }
 
 sub save_namespace_node {
Index: lib/Parse/MediaWikiDump.pm
===================================================================
--- lib/Parse/MediaWikiDump.pm	&#40;revision 89&#41;
+++ lib/Parse/MediaWikiDump.pm	&#40;working copy&#41;
@@ -1,5 +1,5 @@
 package Parse::MediaWikiDump;
-our $VERSION = &#39;0.95&#39;;
+our $VERSION = &#39;0.96&#39;;
 
 use Parse::MediaWikiDump::XML;
 use Parse::MediaWikiDump::Revisions;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-680417" href="/Public/Bug/Display.html?id=50491#txn-680417">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;21&nbsp;17:20:21&nbsp;2009</span>
    <span class="description">tomaz.solc [...] tablix.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> david.m.carter [...] gmail.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #50491] Any chance of upgrading MediaWikiDump to version 0.4?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 21 Oct 2009 23:19:43 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Parse-MediaWikiDump [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> TomaÅ¾ Å olc &lt;tomaz.solc [...] tablix.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/680417/350261/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/350261">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Until I get my hands on the schema and can augment the code to support the new data I&#39;ve created a simple patch that 
&gt; allows 0.4 version dump files with out any other changes and I&#39;ve attached it to this ticket. 
&gt; 
&gt; I have not fully tested whether or not the changes to the dump file cause weird behavior to 
&gt; show up. Can you please try out the patch and let me know if it works for your needs? 
</div>
I&#39;ve used a fix just like this to process the latest dump with Wikiprep
and it appears to work fine.

I guess the new version of the dump format only adds new tags.

By the way, the new schema is available in the SVN repository of MediaWiki:

<span class="clickylink"><a target="new" rel="nofollow" href="http://svn.wikimedia.org/viewvc/mediawiki/trunk/phase3/docs/export-0.4.xsd?revision=57558&#38;view=markup">http://svn.wikimedia.org/viewvc/mediawiki/trunk/phase3/docs/export-0.4.xsd?revision=57558&#38;view=markup</a></span>

Thanks
TomaÅ¾
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 &#40;GNU/Linux&#41;
Comment: Using GnuPG with Mozilla - <span class="clickylink"><a target="new" rel="nofollow" href="http://enigmail.mozdev.org">http://enigmail.mozdev.org</a></span>

iEYEARECAAYFAkrfeu8ACgkQsAlAlRhL9q+hMgCeMFcCdYzSTgI/qAgyh2J9ey1y
X20An3wbkXON+OxFtBc1/5BMeO9aJwBx
=AVvp
-----END PGP SIGNATURE-----
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-680932" href="/Public/Bug/Display.html?id=50491#txn-680932">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;15:26:01&nbsp;2009</span>
    <span class="description">triddle [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/680932/350557/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/350557">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 255b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve released version 0.96 of Parse::MediaWikiDump to CPAN which allows for format version 0.4 
dump files to go through but I did not add support for the extra features, that will be done 
later. 

The release is attached to this ticket for easy access. 
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/680932/350560/Parse-MediaWikiDump-0.96.tar.gz">Download Parse-MediaWikiDump-0.96.tar.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 16.4k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-680934" href="/Public/Bug/Display.html?id=50491#txn-680934">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;15:26:03&nbsp;2009</span>
    <span class="description">triddle [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-681048" href="/Public/Bug/Display.html?id=50491#txn-681048">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;23&nbsp;06:47:26&nbsp;2009</span>
    <span class="description">david.m.carter [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #50491] Resolved: Any chance of upgrading  MediaWikiDump to version 0.4?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 23 Oct 2009 11:43:16 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Parse-MediaWikiDump [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Carter &lt;david.m.carter [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/681048/350624/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/350624">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 460b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you for your quick action on this -- sorry I didn&#39;t respond
earlier, but the fix sounds good. I don&#39;t think I need the extra
facilities in 0.4.

David

On Thu, Oct 22, 2009 at 8:26 PM, Tyler Riddle via RT
&lt;bug-Parse-MediaWikiDump@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=50491">https://rt.cpan.org/Ticket/Display.html?id=50491</a></span> &gt;
&gt;
&gt; According to our records, your request has been resolved. If you have any
&gt; further questions or concerns, please respond to this message.
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-681049" href="/Public/Bug/Display.html?id=50491#txn-681049">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;23&nbsp;06:47:27&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-681119" href="/Public/Bug/Display.html?id=50491#txn-681119">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;23&nbsp;11:13:07&nbsp;2009</span>
    <span class="description">triddle [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.579653</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
