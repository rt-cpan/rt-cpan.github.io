<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #47249 for CPANPLUS: cpanp fails to find metadata for Errno, which is included with  perl-5.10.0</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #47249 for CPANPLUS: cpanp fails to find metadata for Errno, which is included with  perl-5.10.0</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=CPANPLUS">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=CPANPLUS">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=CPANPLUS">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=CPANPLUS">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/CPANPLUS">CPANPLUS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">47249</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">stalled</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=CPANPLUS">CPANPLUS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
pmoore6448 [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-8270-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-8271-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=47249">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-623008" href="/Public/Bug/Display.html?id=47249#txn-623008">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;22&nbsp;14:07:42&nbsp;2009</span>
    <span class="description">pmoore6448 [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> cpanp fails to find metadata for Errno, which is included with  perl-5.10.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 22 Jun 2009 14:07:12 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-cpanplus [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Phillip Moore &lt;pmoore6448 [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/623008/316996/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/316996">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Using a freshly installed perl-5.10.0 distribution, and trying to use cpanp
to install a number of modules, I&#39;ve found that if you specify at least one
module in the core itself, you&#39;ll get a bizarre error.    Now, I suspect
this is an error with the way the metadata is setup for Errno, which is in
the core, but no longer available on CPAN independently.  if you specify a
dependency on Errno in your Makefile.PL, then this will result in an error
if you try to use cpanp to install it.

------
root@efs-as5-3$ cpanp
CPANPLUS::Shell::Default -- CPAN exploration and module installation &#40;v0.84&#41;
*** Please report bugs to &lt;bug-cpanplus@rt.cpan.org&gt;.
*** Using CPANPLUS::Backend v0.84.
*** ReadLine support available &#40;try &#39;i Term::ReadLine::Perl&#39;&#41;.

*** Type &#39;p&#39; now to show start up log

Did you know...
    You can update CPANPLUS by running: &#39;s selfupdate&#39;
CPAN Terminal&gt; s conf verbose 1

Key &#39;verbose&#39; was set to &#39;1&#39;
CPAN Terminal&gt; i Errno

[MSG] Checking if source files are up to date
[MSG] Retrieving /root/.cpanplus/sourcefiles.2.18.stored
[MSG] No &#39;/root/.cpanplus/custom-sources&#39; dir, skipping custom sources
[ERROR] &#39;Errno&#39; does not contain an author part

[ERROR] Cannot find &#39;Errno&#39; in the module tree

No such module: Errno
No modules found to operate on!
Nothing done
--------

I doubt it matter, but here&#39;s the perl version info:

root@efs-as5-3$ perl -V
Summary of my perl5 &#40;revision 5 version 10 subversion 0&#41; configuration:
  Platform:
    osname=linux, osvers=2.6.18-128.1.6.el5,
archname=x86_64-linux-thread-multi
    uname=&#39;linux efs-as5-3 2.6.18-128.1.6.el5 #1 smp tue mar 24 12:05:57 edt
2009 x86_64 x86_64 x86_64 gnulinux &#39;
    config_args=&#39;-ds -e -Dprefix=/var/efs -Duseithreads -Dcc=gcc&#39;
    hint=recommended, useposix=true, d_sigaction=define
    useithreads=define, usemultiplicity=define
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=define, use64bitall=define, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;gcc&#39;, ccflags =&#39;-D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing
-pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64&#39;,
    optimize=&#39;-O2&#39;,
    cppflags=&#39;-D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe
-I/usr/local/include&#39;
    ccversion=&#39;&#39;, gccversion=&#39;4.1.2 20080704 &#40;Red Hat 4.1.2-44&#41;&#39;,
gccosandvers=&#39;&#39;
    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
    ivtype=&#39;long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;,
lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;gcc&#39;, ldflags =&#39; -L/usr/local/lib&#39;
    libpth=/usr/local/lib /lib /usr/lib /lib64 /usr/lib64 /usr/local/lib64
    libs=-lnsl -ldl -lm -lcrypt -lutil -lpthread -lc
    perllibs=-lnsl -ldl -lm -lcrypt -lutil -lpthread -lc
    libc=/lib/libc-2.5.so, so=so, useshrplib=false, libperl=libperl.a
    gnulibc_version=&#39;2.5&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags=&#39;-Wl,-E&#39;
    cccdlflags=&#39;-fPIC&#39;, lddlflags=&#39;-shared -O2 -L/usr/local/lib&#39;


Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options: MULTIPLICITY PERL_DONT_CREATE_GVSV
                        PERL_IMPLICIT_CONTEXT PERL_MALLOC_WRAP
USE_64_BIT_ALL
                        USE_64_BIT_INT USE_ITHREADS USE_LARGE_FILES
                        USE_PERLIO USE_REENTRANT_API
  Built under linux
  Compiled at Jun 22 2009 13:26:52
  @INC:
    /var/efs/lib/perl5/5.10.0/x86_64-linux-thread-multi
    /var/efs/lib/perl5/5.10.0
    /var/efs/lib/perl5/site_perl/5.10.0/x86_64-linux-thread-multi
    /var/efs/lib/perl5/site_perl/5.10.0
    .
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/623008/316997/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/316997">with headers</a>
<br />
<span class="downloadcontenttype">text/html 4.8k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-625123" href="/Public/Bug/Display.html?id=47249#txn-625123">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;27&nbsp;09:40:52&nbsp;2009</span>
    <span class="description">kane [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/625123/318105/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/318105">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 22 14:07:42 2009, pmoore6448@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Using a freshly installed perl-5.10.0 distribution, and trying to use cpanp
&gt; to install a number of modules, I&#39;ve found that if you specify at least one
&gt; module in the core itself, you&#39;ll get a bizarre error.    
</div>
Actually, according to the code you should get an error on screen, but it keeps going:

for my $mod &#40; @prereqs &#41; {
       .....
        my $modobj  = $cb-&gt;module_tree&#40;$mod&#41;;
        unless&#40; $modobj &#41; {
            error&#40; loc&#40; &#34;No such module &#39;%1&#39; found on CPAN&#34;, $mod &#41; &#41;;
            next;
        }
       .....
}

Can you show me a tarball that depends on errno that actually fails to install because of it?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Now, I suspect
&gt; this is an error with the way the metadata is setup for Errno, which is in
&gt; the core, but no longer available on CPAN independently.  if you specify a
&gt; dependency on Errno in your Makefile.PL, then this will result in an error
&gt; if you try to use cpanp to install it.
&gt; 
&gt; ------
&gt; root@efs-as5-3$ cpanp
&gt; CPANPLUS::Shell::Default -- CPAN exploration and module installation &#40;v0.84&#41;
&gt; *** Please report bugs to &lt;bug-cpanplus@rt.cpan.org&gt;.
&gt; *** Using CPANPLUS::Backend v0.84.
&gt; *** ReadLine support available &#40;try &#39;i Term::ReadLine::Perl&#39;&#41;.
&gt; 
&gt; *** Type &#39;p&#39; now to show start up log
&gt; 
&gt; Did you know...
&gt;     You can update CPANPLUS by running: &#39;s selfupdate&#39;
&gt; CPAN Terminal&gt; s conf verbose 1
&gt; 
&gt; Key &#39;verbose&#39; was set to &#39;1&#39;
&gt; CPAN Terminal&gt; i Errno
&gt; 
&gt; [MSG] Checking if source files are up to date
&gt; [MSG] Retrieving /root/.cpanplus/sourcefiles.2.18.stored
&gt; [MSG] No &#39;/root/.cpanplus/custom-sources&#39; dir, skipping custom sources
&gt; [ERROR] &#39;Errno&#39; does not contain an author part
&gt; 
&gt; [ERROR] Cannot find &#39;Errno&#39; in the module tree
&gt; 
&gt; No such module: Errno
&gt; No modules found to operate on!
&gt; Nothing done
</div>
This still makes sense to me: there&#39;s no Errno on the CPAN, it can&#39;t install it. That said, it 
*should not* abort an install of a module that depends on Errno.

If you can provide me with an example where it does, I&#39;d be very interested.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-625124" href="/Public/Bug/Display.html?id=47249#txn-625124">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;27&nbsp;09:40:53&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-625127" href="/Public/Bug/Display.html?id=47249#txn-625127">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;27&nbsp;09:40:57&nbsp;2009</span>
    <span class="description">kane [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-625152" href="/Public/Bug/Display.html?id=47249#txn-625152">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;27&nbsp;11:03:59&nbsp;2009</span>
    <span class="description">pmoore6448 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #47249] cpanp fails to find metadata for Errno,  which is included with perl-5.10.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 27 Jun 2009 11:03:40 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPANPLUS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Phillip Moore &lt;pmoore6448 [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/625152/318121/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/318121">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">My own code, but it&#39;s not exportable yet.
Yes, it generates an error &#34;on screen&#34;, but that&#39;s not useful if
you&#39;re trying to automate the installation, and want to do robust
error checking.   The &#34;on screen&#34; statement means you&#39;re expecting a
human to do the error checking, and that&#39;s not amenable to automation.

Experimentally, I found that cpanp can&#39;t be used directly since it
almost never returns a useful error code &#40;that was a separate bug
report&#41;.  What I&#39;ve been doing to automate
the installation is:

    perl -MCPANPLUS -e &#39;install shift or die&#39; $module

instead of:

    cpanp i $module

and that allows me to trap all the errors.   The bottom line is that cpanp
was clearly designed to be an interactive tool, and while you CAN use it
no-interactively, I&#39;m finding that direct use of CPANPLUS is far more
robust, since I can do better error handling.

The bigger issue I have &#40;and this is unrelated to the two bug reports I&#39;ve
found, and would really count as a feature enhancement request&#41; is that
installing a specific version is impossible, unless you want to wrap cpanp
with expect.   Since you have to first search for a module, and then give
the index into the search result, batch installation of a specific version
isn&#39;t possible &#40;unless there&#39;s a trick I haven&#39;t found yet&#41;.

The issue is that I need to build and install a fairly long list of CPAN
dependencies &#40;&gt;100&#41; in order to test some very complex software, and we want
to be able to reproduce the installation.   If I use cpanp, and let it pick
the latest module published on CPAN, I can get different results day by day,
week by week.  What we need to to do is specify the versions we&#39;re using,
and install those explicitly.  My approach to this is use the CPAN::* and
CPANPLUS::* modules directly, and skip cpanp.   For one thing, we have to
expand the dependencies/prereqs ourselves, and fix THOSE versions, too.

Anyway, some of the problems we&#39;re trying to solve are quite possible out of
scope for cpanp, and it&#39;s intended usage.  Sorry if the extra details are a
distraction; I hope it provides some context for what we&#39;re trying to do.

On Sat, Jun 27, 2009 at 9:40 AM, Jos Boumans via RT &lt;
bug-CPANPLUS@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=47249">https://rt.cpan.org/Ticket/Display.html?id=47249</a></span> &gt;
&gt;
&gt; On Mon Jun 22 14:07:42 2009, pmoore6448@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; Using a freshly installed perl-5.10.0 distribution, and trying to use
</div>&gt; cpanp
<div class="message-stanza open">&gt; &gt; to install a number of modules, I&#39;ve found that if you specify at least
</div>&gt; one
<div class="message-stanza open">&gt; &gt; module in the core itself, you&#39;ll get a bizarre error.
</div>&gt;
&gt; Actually, according to the code you should get an error on screen, but it
&gt; keeps going:
&gt;
&gt; for my $mod &#40; @prereqs &#41; {
&gt;       .....
&gt;        my $modobj  = $cb-&gt;module_tree&#40;$mod&#41;;
&gt;        unless&#40; $modobj &#41; {
&gt;            error&#40; loc&#40; &#34;No such module &#39;%1&#39; found on CPAN&#34;, $mod &#41; &#41;;
&gt;            next;
&gt;        }
&gt;       .....
&gt; }
&gt;
&gt; Can you show me a tarball that depends on errno that actually fails to
&gt; install because of it?
&gt;
<div class="message-stanza open">&gt; &gt; Now, I suspect
&gt; &gt; this is an error with the way the metadata is setup for Errno, which is
</div>&gt; in
<div class="message-stanza open">&gt; &gt; the core, but no longer available on CPAN independently.  if you specify
</div>&gt; a
<div class="message-stanza open">&gt; &gt; dependency on Errno in your Makefile.PL, then this will result in an
</div>&gt; error
<div class="message-stanza open">&gt; &gt; if you try to use cpanp to install it.
&gt; &gt;
&gt; &gt; ------
&gt; &gt; root@efs-as5-3$ cpanp
&gt; &gt; CPANPLUS::Shell::Default -- CPAN exploration and module installation
</div>&gt; &#40;v0.84&#41;
<div class="message-stanza open">&gt; &gt; *** Please report bugs to &lt;bug-cpanplus@rt.cpan.org&gt;.
&gt; &gt; *** Using CPANPLUS::Backend v0.84.
&gt; &gt; *** ReadLine support available &#40;try &#39;i Term::ReadLine::Perl&#39;&#41;.
&gt; &gt;
&gt; &gt; *** Type &#39;p&#39; now to show start up log
&gt; &gt;
&gt; &gt; Did you know...
&gt; &gt;     You can update CPANPLUS by running: &#39;s selfupdate&#39;
&gt; &gt; CPAN Terminal&gt; s conf verbose 1
&gt; &gt;
&gt; &gt; Key &#39;verbose&#39; was set to &#39;1&#39;
&gt; &gt; CPAN Terminal&gt; i Errno
&gt; &gt;
&gt; &gt; [MSG] Checking if source files are up to date
&gt; &gt; [MSG] Retrieving /root/.cpanplus/sourcefiles.2.18.stored
&gt; &gt; [MSG] No &#39;/root/.cpanplus/custom-sources&#39; dir, skipping custom sources
&gt; &gt; [ERROR] &#39;Errno&#39; does not contain an author part
&gt; &gt;
&gt; &gt; [ERROR] Cannot find &#39;Errno&#39; in the module tree
&gt; &gt;
&gt; &gt; No such module: Errno
&gt; &gt; No modules found to operate on!
&gt; &gt; Nothing done
</div>&gt;
&gt; This still makes sense to me: there&#39;s no Errno on the CPAN, it can&#39;t
&gt; install it. That said, it
&gt; *should not* abort an install of a module that depends on Errno.
&gt;
&gt; If you can provide me with an example where it does, I&#39;d be very
&gt; interested.
&gt;
&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/625152/318122/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/318122">with headers</a>
<br />
<span class="downloadcontenttype">text/html 5.5k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-625153" href="/Public/Bug/Display.html?id=47249#txn-625153">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;27&nbsp;11:04:00&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-625158" href="/Public/Bug/Display.html?id=47249#txn-625158">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;27&nbsp;11:26:58&nbsp;2009</span>
    <span class="description">jos [...] dwim.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #47249] cpanp fails to find metadata for Errno,  which is included with perl-5.10.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 27 Jun 2009 17:26:35 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPANPLUS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jos I. Boumans&#34; &lt;jos [...] dwim.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/625158/318126/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/318126">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Jun 27, 2009, at 5:04 PM, Phillip Moore via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: CPANPLUS
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=47249">https://rt.cpan.org/Ticket/Display.html?id=47249</a></span> &gt;
&gt;
&gt; My own code, but it&#39;s not exportable yet.
&gt; Yes, it generates an error &#34;on screen&#34;, but that&#39;s not useful if
&gt; you&#39;re trying to automate the installation, and want to do robust
&gt; error checking.
</div>
This is arguing semantics -- the return values are indicative of success
and failure, this is just a diagnostic.

[Not Really Fatal Error, But Maybe You Want To Look Into This] Could  
not find Errno


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Experimentally, I found that cpanp can&#39;t be used directly since it
&gt; almost never returns a useful error code &#40;that was a separate bug
&gt; report&#41;.  What I&#39;ve been doing to automate
&gt; the installation is:
&gt;
&gt;     perl -MCPANPLUS -e &#39;install shift or die&#39; $module
&gt;
&gt; instead of:
&gt;
&gt;     cpanp i $module
&gt;
&gt; and that allows me to trap all the errors.   The bottom line is  
&gt; that cpanp
&gt; was clearly designed to be an interactive tool, and while you CAN  
&gt; use it
&gt; no-interactively, I&#39;m finding that direct use of CPANPLUS is far more
&gt; robust, since I can do better error handling.
</div>
Well yes, it&#39;s the API. Incidentally, your other request to have cpanp
exit with an error code has been resolved and released with 0.87_03.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The bigger issue I have &#40;and this is unrelated to the two bug  
&gt; reports I&#39;ve
&gt; found, and would really count as a feature enhancement request&#41; is  
&gt; that
&gt; installing a specific version is impossible, unless you want to  
&gt; wrap cpanp
&gt; with expect.   Since you have to first search for a module, and  
&gt; then give
&gt; the index into the search result, batch installation of a specific  
&gt; version
&gt; isn&#39;t possible &#40;unless there&#39;s a trick I haven&#39;t found yet&#41;.
</div>
Of course there is. Whatever you feed to the shell&#39;s i or t, etc is  
handed
to CPANPLUS::Backend-&gt;parse_module:

   <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~kane/CPANPLUS/lib/CPANPLUS/Backend.pm">http://search.cpan.org/~kane/CPANPLUS/lib/CPANPLUS/Backend.pm</a></span># 
$mod_obj_=_$cb-%3Eparse_module&#40;_module_=%3E_$modname|$distname| 
$modobj|URI|PATH_&#41;

You can feed it just about anything, including URLs, older versions,  
tarballs,
local paths, etc.

If you want to browse through releases from the shell, you want:

   CPAN Terminal&gt; f DBI

And you can pick from just about every DBI released.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The issue is that I need to build and install a fairly long list of  
&gt; CPAN
&gt; dependencies &#40;&gt;100&#41; in order to test some very complex software,  
&gt; and we want
&gt; to be able to reproduce the installation.   If I use cpanp, and let  
&gt; it pick
&gt; the latest module published on CPAN, I can get different results  
&gt; day by day,
&gt; week by week.  What we need to to do is specify the versions we&#39;re  
&gt; using,
&gt; and install those explicitly.  My approach to this is use the  
&gt; CPAN::* and
&gt; CPANPLUS::* modules directly, and skip cpanp.   For one thing, we  
&gt; have to
&gt; expand the dependencies/prereqs ourselves, and fix THOSE versions,  
&gt; too.
</div>
Yeah, you should be using the API for such complex things. Have you  
considered
using custom sources:

   <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~kane/CPANPLUS/lib/CPANPLUS/">http://search.cpan.org/~kane/CPANPLUS/lib/CPANPLUS/</a></span> 
Backend.pm#CUSTOM_MODULE_SOURCES

Or perhaps injecting them directly in your local CPAN mirror:

   <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~andya/CPAN-Mini-Inject-0.26/lib/CPAN/Mini/">http://search.cpan.org/~andya/CPAN-Mini-Inject-0.26/lib/CPAN/Mini/</a></span> 
Inject.pm

If you want to override what versions are being installed, you can  
hook into the
resolving stage of cpanplus. This is somewhat more adventurous:

   <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~kane/CPANPLUS-0.8601/lib/CPANPLUS/Dist.pm">http://search.cpan.org/~kane/CPANPLUS-0.8601/lib/CPANPLUS/Dist.pm</a></span># 
$bool_=_$dist-%3Eprereq_satisfied&#40;_modobj_=%3E_$modobj,_version_=%3E_ 
$version_spec_&#41;

If you want to have *complete* control over what happens during  
installation,
define your own C::Dist::* class:

   <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~kane/CPANPLUS-0.8601/lib/CPANPLUS/Dist/">http://search.cpan.org/~kane/CPANPLUS-0.8601/lib/CPANPLUS/Dist/</a></span> 
Base.pm

This is what CPANPLUS::YACSmoke does for smoking purposes:

   <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~bingos/CPANPLUS-YACSmoke-0.42/lib/CPANPLUS/">http://search.cpan.org/~bingos/CPANPLUS-YACSmoke-0.42/lib/CPANPLUS/</a></span> 
Dist/YACSmoke.pm

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Anyway, some of the problems we&#39;re trying to solve are quite  
&gt; possible out of
&gt; scope for cpanp, and it&#39;s intended usage.  Sorry if the extra  
&gt; details are a
&gt; distraction; I hope it provides some context for what we&#39;re trying  
&gt; to do.
</div>
Much appreciated. And no, all this stuff is completely possible.

Cheers,

--
        Jos Boumans

        &#39;Real programmers use &#34;cat &gt; a.out&#34;&#39;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-629316" href="/Public/Bug/Display.html?id=47249#txn-629316">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;07&nbsp;06:35:46&nbsp;2009</span>
    <span class="description">kane [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.433694</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
