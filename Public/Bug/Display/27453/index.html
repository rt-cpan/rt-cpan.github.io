<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #27453 for WWW-Myspace: Login unsuccessful &#40;UK&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #27453 for WWW-Myspace: Login unsuccessful &#40;UK&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/WWW-Myspace/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/WWW-Myspace/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/WWW-Myspace/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/WWW-Myspace/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/WWW-Myspace">WWW-Myspace CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">27453</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/WWW-Myspace/Active/">WWW-Myspace</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">olaf [...] wundersolutions.com
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
tobiesch [...] users.sourceforge.net

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-38014-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.64    </td>
  </tr>
  <tr id="CF-38015-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




homepage.htm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/324812/148827/homepage.htm">
Tue Jun 05 15:47:30 2007 (43.9k) by tobiesch [...] users.sourceforge.net
</a>
</font></li>
</ul>


module_install_output<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/324812/148833/module_install_output">
Tue Jun 05 15:47:31 2007 (18.4k) by tobiesch [...] users.sourceforge.net
</a>
</font></li>
</ul>


pageafterlogin.htm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/324812/148824/pageafterlogin.htm">
Tue Jun 05 15:47:29 2007 (44.9k) by tobiesch [...] users.sourceforge.net
</a>
</font></li>
</ul>


test.log<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/324979/148936/test.log">
Wed Jun 06 09:31:35 2007 (249k) by tobiesch [...] users.sourceforge.net
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/324977/148930/test.log">
Wed Jun 06 09:29:07 2007 (249k) by tobiesch [...] users.sourceforge.net
</a>
</font></li>
</ul>


testoutput.log<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/325082/149013/testoutput.log">
Wed Jun 06 20:51:37 2007 (5.7k) by tobiesch [...] users.sourceforge.net
</a>
</font></li>
</ul>


www.MySpace.com.htm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/324812/148830/www.MySpace.com.htm">
Tue Jun 05 15:47:30 2007 (41.4k) by tobiesch [...] users.sourceforge.net
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;05&nbsp;15:47:28&nbsp;2007</span>
    <span class="description">tobiesch [...] users.sourceforge.net -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">minor issue: I had to manually downgrade DBD::SQLite from version 1.13
to 1.12 in order to make Class::DBI work &#40;would otherwise return:
&#34;DBD::SQLite::st fetchrow_array warning&#34;&#41;. For more details on this see
<span class="clickylink"><a target="new" rel="nofollow" href="http://lists.digitalcraftsmen.net/pipermail/classdbi/2007-January/001480.html">http://lists.digitalcraftsmen.net/pipermail/classdbi/2007-January/001480.html</a></span>

Main issue:

Most of the test of the WWW::Myspace module fail. Crucially, I cannot
log on. I attach the output of the test that were running during cpan
install.

During the tests and also once I try to run the code I get frequent
warnings concerning the Locale::SubCountry module such like that:

Use of uninitialized value in hash element at
/usr/lib/perl5/site_perl/5.8.5/Locale/SubCountry.pm line 439, &lt;DATA&gt;
line 15048

Trying to create a new WWW::Myspace object with login credentials
results in a long delay with an eventual error of:

Error getting page:
  500 Server closed connection without sending any data back

Trying to use methods for which I don&#39;t think I have to login such as

$myspace-&gt;get_friends&#40;id=&gt;76959716&#41;

returns the error: Link not found on page
However, as this is just a warning I doubt this is related to the problem.

Relating to an earlier bug reported here, could the main problem be that
I access the site from the UK? I attach the html code of several pages
as accessed from the UK through my browser.

Perl version: v5.8.5 built for x86_64-linux-thread-multi

OS version: 2.6.9-42.0.2.ELsmp #1 SMP Wed Aug 23 13:38:27 BST 2006
x86_64 x86_64 x86_64 GNU/Linux


Please let me know what other information you need.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> pageafterlogin.htm</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> homepage.htm</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> www.MySpace.com.htm</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> module_install_output</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/324812/148833/module_install_output">Download module_install_output</a><br />
<span class="downloadcontenttype">application/octet-stream 18.4k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;05&nbsp;22:48:07&nbsp;2007</span>
    <span class="description">tobiesch [...] users.sourceforge.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tobiesch [...] users.sourceforge.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Through testing so far I could verify that the test fails for the
site_login method in WWW::Myspace at the following call:

    $self-&gt;follow_link&#40;
                url_regex =&gt; qr/fuseaction=user/i,
                re=&gt; &#39;SignOut&#39;
            &#41;;

Although a dump of the response object shows that I&#39;ve successfully
logged on, the module will not recognize it as _page_ok fails to
recognize that the regexp &#34;SignOut&#34; is actually on the page:

            # Page must match the regexp
            unless &#40; $page =~ /$regexp/i &#41; {
                #print &#34;REGEXP&#34;,$res-&gt;decoded_content&#40;&#41;,&#34;\n\n\n&#34;;
                $page_ok = 0;
                $self-&gt;error&#40;&#34;Page doesn&#39;t match verification pattern.&#34;&#41;;
#               warn &#34;Page doesn&#39;t match verification pattern.\n&#34;;
            }

I am not sure but what I&#39;ve seen so far is that $res-&gt;content yields
garbage output while $res-&gt;decoded_content&#40;&#41; brings up plain text. Any
chance that it is down to some strange locale problem? Or am I
completely on the wrong track?

thx for your help!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;05&nbsp;23:16:27&nbsp;2007</span>
    <span class="description">olaf [...] wundersolutions.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> olaf [...] wundersolutions.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jun 05 15:47:28 2007, tobiesch wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; minor issue: I had to manually downgrade DBD::SQLite from version 1.13
&gt; to 1.12 in order to make Class::DBI work &#40;would otherwise return:
&gt; &#34;DBD::SQLite::st fetchrow_array warning&#34;&#41;. For more details on this
&gt; see
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://lists.digitalcraftsmen.net/pipermail/classdbi/2007-">http://lists.digitalcraftsmen.net/pipermail/classdbi/2007-</a></span>
&gt; January/001480.html
</div>
Thanks very much for this tip.  I&#39;ve made a note of it in the BUGS
section of WWW::Myspace::Data

All the best,

Olaf
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;05&nbsp;23:16:28&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;05&nbsp;23:19:06&nbsp;2007</span>
    <span class="description">olaf [...] wundersolutions.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jun 05 22:48:07 2007, tobiesch wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Through testing so far I could verify that the test fails for the
&gt; site_login method in WWW::Myspace at the following call:
&gt; 
&gt;     $self-&gt;follow_link&#40;
&gt;                 url_regex =&gt; qr/fuseaction=user/i,
&gt;                 re=&gt; &#39;SignOut&#39;
&gt;             &#41;;
&gt; 
</div>
Myspace is so unstable that failing tests are tough to diagnose. 
However, in your case, maybe the regex needs to be tweaked?  We&#39;re
trying to get at the root of the problem with logins from outside of
North America.

Could you tweak the regex and let us know if this solves it?

$self-&gt;follow_link&#40;
    url_regex =&gt; qr/fuseaction=signout/i,
    re=&gt; &#39;SignOut&#39;
&#41;;

All the best,

Olaf
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;05&nbsp;23:19:12&nbsp;2007</span>
    <span class="description">olaf [...] wundersolutions.com -  Given to OALDERS</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;05&nbsp;23:27:11&nbsp;2007</span>
    <span class="description">olaf [...] wundersolutions.com -  Subject changed from &#40;no value&#41; to &#39;Login unsuccessful &#40;UK&#41;&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;05&nbsp;23:30:16&nbsp;2007</span>
    <span class="description">grantg [...] spamarrest.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #27453] </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 5 Jun 2007 20:29:44 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-WWW-Myspace [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Grant Grueninger &lt;grantg [...] spamarrest.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I think you may have cracked the issue that&#39;s been eluding us for  
months.

We originally thought is was a locale issue but we couldn&#39;t reproduce  
it in England, Canada, or California, and users in the US and  
elsewhere were reporting login failures.  Unfortunately, none were  
savvy enough to report through RT and give useful information.

I suspect it&#39;s a character encoding issue.  I&#39;m running tests now  
having changed all references to the &#34;content&#34; method of  
HTTP::Request to &#34;decoded_content&#34;.  So far so good &#40;except for the  
usual myspace unreliability issues&#41;.  Myspace must be using different  
character encoding in different places or quite possibly on different  
servers or different accounts. &#40;They actually run different versions  
of the &#34;application&#34; on different systems and with different accounts  
- makes programming WWW::Myspace fun...&#41;.

If you check out the svn repository, you can test the latest versions  
and help debug this &#40;or see if that did it&#41;.

There&#39;s another issue which I think affects Linux systems that I  
believe is a problem in Locale::Subcountry.

On Jun 5, 2007, at 7:48 PM, via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;        Queue: WWW-Myspace
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=27453">http://rt.cpan.org/Ticket/Display.html?id=27453</a></span> &gt;
&gt;
&gt; Through testing so far I could verify that the test fails for the
&gt; site_login method in WWW::Myspace at the following call:
&gt;
&gt;     $self-&gt;follow_link&#40;
&gt;                 url_regex =&gt; qr/fuseaction=user/i,
&gt;                 re=&gt; &#39;SignOut&#39;
&gt;             &#41;;
&gt;
&gt; Although a dump of the response object shows that I&#39;ve successfully
&gt; logged on, the module will not recognize it as _page_ok fails to
&gt; recognize that the regexp &#34;SignOut&#34; is actually on the page:
&gt;
&gt;             # Page must match the regexp
&gt;             unless &#40; $page =~ /$regexp/i &#41; {
&gt;                 #print &#34;REGEXP&#34;,$res-&gt;decoded_content&#40;&#41;,&#34;\n\n\n&#34;;
&gt;                 $page_ok = 0;
&gt;                 $self-&gt;error&#40;&#34;Page doesn&#39;t match verification  
&gt; pattern.&#34;&#41;;
&gt; #               warn &#34;Page doesn&#39;t match verification pattern.\n&#34;;
&gt;             }
&gt;
&gt; I am not sure but what I&#39;ve seen so far is that $res-&gt;content yields
&gt; garbage output while $res-&gt;decoded_content&#40;&#41; brings up plain text. Any
&gt; chance that it is down to some strange locale problem? Or am I
&gt; completely on the wrong track?
&gt;
&gt; thx for your help!
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;05&nbsp;23:45:24&nbsp;2007</span>
    <span class="description">olaf [...] wundersolutions.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jun 05 23:30:16 2007, grantg@spamarrest.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I think you may have cracked the issue that&#39;s been eluding us for  
&gt; months.
</div>
That sounds like it&#39;s the root issue &#40;encoding&#41;.  Ignore my suggested
changes.  I&#39;ve had a closer look at the code and that was not a correct
fix.  :&#41;

Olaf
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;06&nbsp;09:29:05&nbsp;2007</span>
    <span class="description">tobiesch [...] users.sourceforge.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tobiesch [...] users.sourceforge.net</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Brilliant, I&#39;ve checked out version 348 from the SVN repository and it
seems to pass most tests now. I also did use some functions in a
program, seems to work. Very good! 

I attach the log from the tests &#40;sadly forget to pipe the error message
also but still informative I think&#41;

Some minor discoveries:

- The test 8 from 01/login &#40;check friend count&#41; seems to assume you have
at least one friend &#40;apart from Tom&#41;.

- the example test config from the README file says:
  user_name: Username # &#40;as it appears in &#34;Hello, username&#34; when you log
in.&#41;
 However, the hash and everything that follows have to be removed in
order for the test being successful &#40;I thought the test would treat it
as a comment but it takes it as part of the username&#41;

- in order to make tests quicker and to less annoy MySpace, do we really
need 20 attempts to get a URL &#40;might 10 be sufficient?&#41;

On Tue Jun 05 23:45:24 2007, OALDERS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue Jun 05 23:30:16 2007, grantg@spamarrest.com wrote:
<div class="message-stanza open">&gt; &gt; I think you may have cracked the issue that&#39;s been eluding us for  
&gt; &gt; months.
</div>&gt; 
&gt; That sounds like it&#39;s the root issue &#40;encoding&#41;.  Ignore my suggested
&gt; changes.  I&#39;ve had a closer look at the code and that was not a correct
&gt; fix.  :&#41;
&gt; 
&gt; Olaf
&gt; 
</div></div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/324977/148930/test.log">Download test.log</a><br />
<span class="downloadcontenttype">application/octet-stream 249k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;06&nbsp;09:31:30&nbsp;2007</span>
    <span class="description">tobiesch [...] users.sourceforge.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tobiesch [...] users.sourceforge.net</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Brilliant, I&#39;ve checked out version 348 from the SVN repository and it
seems to pass most tests now. I also did use some functions in a
program, seems to work. Very good! 

I attach the log from the tests &#40;sadly forget to pipe the error message
also but still informative I think&#41;

Some minor discoveries:

- The test 8 from 01/login &#40;check friend count&#41; seems to assume you have
at least one friend &#40;apart from Tom&#41;.

- the example test config from the README file says:
  user_name: Username # &#40;as it appears in &#34;Hello, username&#34; when you log
in.&#41;
 However, the hash and everything that follows have to be removed in
order for the test being successful &#40;I thought the test would treat it
as a comment but it takes it as part of the username&#41;

- in order to make tests quicker and to less annoy MySpace, do we really
need 20 attempts to get a URL &#40;might 10 be sufficient?&#41;

On Tue Jun 05 23:45:24 2007, OALDERS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue Jun 05 23:30:16 2007, grantg@spamarrest.com wrote:
<div class="message-stanza open">&gt; &gt; I think you may have cracked the issue that&#39;s been eluding us for  
&gt; &gt; months.
</div>&gt; 
&gt; That sounds like it&#39;s the root issue &#40;encoding&#41;.  Ignore my suggested
&gt; changes.  I&#39;ve had a closer look at the code and that was not a correct
&gt; fix.  :&#41;
&gt; 
&gt; Olaf
&gt; 
</div></div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/324979/148936/test.log">Download test.log</a><br />
<span class="downloadcontenttype">application/octet-stream 249k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;06&nbsp;12:30:54&nbsp;2007</span>
    <span class="description">grantg [...] spamarrest.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #27453] Login unsuccessful &#40;UK&#41; </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 6 Jun 2007 09:26:52 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-WWW-Myspace [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Grant Grueninger &lt;grantg [...] spamarrest.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Jun 6, 2007, at 6:32 AM, via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;        Queue: WWW-Myspace
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=27453">http://rt.cpan.org/Ticket/Display.html?id=27453</a></span> &gt;
&gt;
&gt; Brilliant, I&#39;ve checked out version 348 from the SVN repository and it
&gt; seems to pass most tests now. I also did use some functions in a
&gt; program, seems to work. Very good!
</div>
Great!

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; I attach the log from the tests &#40;sadly forget to pipe the error  
&gt; message
&gt; also but still informative I think&#41;
</div>
Actually, if you could copy/paste the normal test output &#40;without  
$DEBUG on&#41; into
an attachment, that&#39;d be a great help.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Some minor discoveries:
&gt;
&gt; - The test 8 from 01/login &#40;check friend count&#41; seems to assume you  
&gt; have
&gt; at least one friend &#40;apart from Tom&#41;.
&gt;
&gt; - the example test config from the README file says:
&gt;   user_name: Username # &#40;as it appears in &#34;Hello, username&#34; when  
&gt; you log
&gt; in.&#41;
&gt;  However, the hash and everything that follows have to be removed in
&gt; order for the test being successful &#40;I thought the test would treat it
&gt; as a comment but it takes it as part of the username&#41;
</div>
Good catch, I&#39;ve changed the README file.  I also thought YAML would  
treat that as a comment. Apparently not.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; - in order to make tests quicker and to less annoy MySpace, do we  
&gt; really
&gt; need 20 attempts to get a URL &#40;might 10 be sufficient?&#41;
</div>
Originally the number of attempts was infinite, the idea being that  
an automated script would keep trying until Myspace was back up &#40;if  
down&#41;, the user&#39;s connection came back up, myspace fixed an error,  
etc.  WWW::Myspace retries only on a failed request or myspace  
error.  Any exceptions to this are bugs &#40;in fact, I think we re- 
introduced a bug recently in which an invalid username/password would  
be retried on login&#41;.  I cut the attempts down to 20 as a &#34;just in  
case&#34;.  Of course it could be argued that if we&#39;re going to limit the  
attempts at all, anything that isn&#39;t going to work in 10 attempts  
probably isn&#39;t going to work in 20 either.  The only problem with  
cutting this down is that the retries are what makes WWW::Myspace  
robust enough to deal with Myspace&#39;s ridiculous level of instability.

For the record, the tests &#40;and the whole module&#41; run slowly because  
of the &#34;human&#34; feature. :&#41;


Grant
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;06&nbsp;20:51:32&nbsp;2007</span>
    <span class="description">tobiesch [...] users.sourceforge.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tobiesch [...] users.sourceforge.net</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Grant,

thanks for all your help! See some comments below:

On Wed Jun 06 12:30:54 2007, grantg@spamarrest.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; On Jun 6, 2007, at 6:32 AM, via RT wrote:
&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt;        Queue: WWW-Myspace
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=27453">http://rt.cpan.org/Ticket/Display.html?id=27453</a></span> &gt;
&gt; &gt;
&gt; &gt; Brilliant, I&#39;ve checked out version 348 from the SVN repository and it
&gt; &gt; seems to pass most tests now. I also did use some functions in a
&gt; &gt; program, seems to work. Very good!
</div>&gt; 
&gt; Great!
&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt; I attach the log from the tests &#40;sadly forget to pipe the error  
&gt; &gt; message
&gt; &gt; also but still informative I think&#41;
</div>&gt; 
&gt; Actually, if you could copy/paste the normal test output &#40;without  
&gt; $DEBUG on&#41; into
&gt; an attachment, that&#39;d be a great help.
&gt; 
</div>
Ok, I attach the output of &#34;make test&#34;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt;
&gt; &gt; Some minor discoveries:
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt;
&gt; &gt; - in order to make tests quicker and to less annoy MySpace, do we  
&gt; &gt; really
&gt; &gt; need 20 attempts to get a URL &#40;might 10 be sufficient?&#41;
</div>&gt; 
&gt; Originally the number of attempts was infinite, the idea being that  
&gt; an automated script would keep trying until Myspace was back up &#40;if  
&gt; down&#41;, the user&#39;s connection came back up, myspace fixed an error,  
&gt; etc.  WWW::Myspace retries only on a failed request or myspace  
&gt; error.  Any exceptions to this are bugs &#40;in fact, I think we re- 
&gt; introduced a bug recently in which an invalid username/password would  
&gt; be retried on login&#41;.  I cut the attempts down to 20 as a &#34;just in  
&gt; case&#34;.  Of course it could be argued that if we&#39;re going to limit the  
&gt; attempts at all, anything that isn&#39;t going to work in 10 attempts  
&gt; probably isn&#39;t going to work in 20 either.  The only problem with  
&gt; cutting this down is that the retries are what makes WWW::Myspace  
&gt; robust enough to deal with Myspace&#39;s ridiculous level of instability.
&gt; 
&gt; For the record, the tests &#40;and the whole module&#41; run slowly because  
&gt; of the &#34;human&#34; feature. :&#41;
</div>
Well alright, I understand your reasoning. However, might be useful to
give people the chance to set the MaxRetry variable.

I also thought for error handling, it might actually make sense to let
is_private and is_invalid behave in the same way like is_band, that is
to return -1 if an error occurred. For now, after each call of
&#34;is_private&#34; I will have to check whether the result is actually because
the profile is private or whether it is because some error occurred.

Anyway, just to say again: really good work!! Thanks a lot for your efforts!

best, tobias
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/325082/149013/testoutput.log">Download testoutput.log</a><br />
<span class="downloadcontenttype">application/octet-stream 5.7k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;06&nbsp;23:40:21&nbsp;2007</span>
    <span class="description">grantg [...] spamarrest.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #27453] Login unsuccessful &#40;UK&#41; </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 6 Jun 2007 20:39:37 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-WWW-Myspace [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Grant Grueninger &lt;grantg [...] spamarrest.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Jun 6, 2007, at 5:51 PM, via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Well alright, I understand your reasoning. However, might be useful to
&gt; give people the chance to set the MaxRetry variable.
</div>
Hmm, probably dangerous, but easy, so I added it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; I also thought for error handling, it might actually make sense to let
&gt; is_private and is_invalid behave in the same way like is_band, that is
&gt; to return -1 if an error occurred. For now, after each call of
&gt; &#34;is_private&#34; I will have to check whether the result is actually  
&gt; because
&gt; the profile is private or whether it is because some error occurred.
</div>
I have the feeling I didn&#39;t write those methods.  I&#39;ve modified them  
to return undef in an error, and $myspace-&gt;error should be set by the  
routine that found the error in the first place.  See the new docs  
for those methods for sample implementations.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Anyway, just to say again: really good work!! Thanks a lot for your  
&gt; efforts!
</div>
Thank you too - it&#39;s a great relief having that problem finally fixed!

Grant

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; best, tobias
&gt;
&gt;
&gt; &lt;testoutput.log&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;08&nbsp;12:34:11&nbsp;2007</span>
    <span class="description">olaf [...] wundersolutions.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Looks like this is all taken care of.  Thanks again for all of your
feedback!

Olaf
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;08&nbsp;12:34:13&nbsp;2007</span>
    <span class="description">olaf [...] wundersolutions.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
