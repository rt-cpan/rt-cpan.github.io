<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #87684 for DBD-CSV: Note that huge $TMP folders may cause the test to run slow</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #87684 for DBD-CSV: Note that huge $TMP folders may cause the test to run slow</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-CSV/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-CSV/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-CSV/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-CSV/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-CSV">DBD-CSV CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">87684</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-CSV/Active/">DBD-CSV</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ANDK [...] cpan.org

<br />
CHORNY [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10078-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.41    </td>
  </tr>
  <tr id="CF-10079-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.43    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;07&nbsp;17:04:41&nbsp;2013</span>
    <span class="description">ANDK [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Note that huge $TMP folders may cause the test to run slow</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">In the Changelog I find this irritating sentence:

  Note that huge $TMP folders may cause the test to run slow

Does this mean that the reason for running into timeouts often might be the fact that my /tmp/ directory is huge? Please explain. If you actually depend on a small /tmp/ directory, please issue a warning when you encounter a huge one. What does &#39;huge&#39; mean? Many files? Big files? And what&#39;s the reasoning?

Thanks,
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;08&nbsp;02:51:16&nbsp;2013</span>
    <span class="description">h.m.brand [...] xs4all.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #87684] Note that huge $TMP folders may cause the test to run slow</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 8 Aug 2013 08:50:55 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-CSV [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;H.Merijn Brand&#34; &lt;h.m.brand [...] xs4all.nl&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, 7 Aug 2013 17:04:42 -0400, &#34;Andreas Koenig via RT&#34;
&lt;bug-DBD-CSV@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Wed Aug 07 17:04:41 2013: Request 87684 was acted upon.
&gt; Transaction: Ticket created by ANDK
&gt;        Queue: DBD-CSV
&gt;      Subject: Note that huge $TMP folders may cause the test to run slow
&gt;    Broken in: 0.41
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: ANDK@cpan.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=87684">https://rt.cpan.org/Ticket/Display.html?id=87684</a></span> &gt;
&gt; 
&gt; 
&gt; In the Changelog I find this irritating sentence:
</div>
Irritating? It just states what it said.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;   Note that huge $TMP folders may cause the test to run slow
&gt; 
&gt; Does this mean that the reason for running into timeouts often
&gt; might be the fact that my /tmp/ directory is huge? Please explain.
</div>
It means that the *tests* for the module itself, executed ONLY when you
install the module, will include one specific test that will require
considerable time if your $TMP is huge.

The reason is to test the new functionality of enabling DBD::CSV to
look for tables in multiple folders/directories from the same database
handle, enabling you to split the CSV files across logical folders. You
might look at it like using schema&#39;s in a relational database. Future
changes will most likely include the possibility to add readonly flags
to those extra folders or to specific files in these folders.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If you actually depend on a small /tmp/ directory, please issue a warning
&gt; when you encounter a huge one. What does &#39;huge&#39; mean? Many files? Big
&gt; files? And what&#39;s the reasoning?
</div>
Huge means *many* files, not big files. The reasoning is explained
above. What the functionality does is scan the content of the folder to
see if there are files suitable for the current handle. Using
attributes like f_ext might speed up that search in many cases

 my $dbh = DBI-&gt;connect &#40;&#34;dbi:CSV:&#34;, undef, undef, {
     f_ext            =&gt; &#34;.csv/r&#34;,
     RaiseError       =&gt; 1,
     PrintError       =&gt; 1,
     FetchHashKeyName =&gt; &#34;NAME_lc&#34;,
     }&#41;;

But that is all in the docs

If I read your comments on perlmonks, I think you are not in search of
DBD::CSV, but you require Text::CSV_XS or Text::CSV. These are the
actual parsers and are also used in DBD::CSV under the hood.

Hope this helps. Enjoy CSV!

-- 
H.Merijn Brand  <span class="clickylink"><a target="new" rel="nofollow" href="http://tux.nl">http://tux.nl</a></span>   Perl Monger  <span class="clickylink"><a target="new" rel="nofollow" href="http://amsterdam.pm.org/">http://amsterdam.pm.org/</a></span>
using perl5.00307 .. 5.19   porting perl5 on HP-UX, AIX, and openSUSE
<span class="clickylink"><a target="new" rel="nofollow" href="http://mirrors.develooper.com/hpux/">http://mirrors.develooper.com/hpux/</a></span>        <span class="clickylink"><a target="new" rel="nofollow" href="http://www.test-smoke.org/">http://www.test-smoke.org/</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://qa.perl.org">http://qa.perl.org</a></span>   <span class="clickylink"><a target="new" rel="nofollow" href="http://www.goldmark.org/jeff/stupid-disclaimers/">http://www.goldmark.org/jeff/stupid-disclaimers/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;08&nbsp;02:51:16&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;09&nbsp;02:41:21&nbsp;2013</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry for the unspecified term &#39;irritating&#39;, I posted this in a bit of a hurry. What I was trying to say was:

&#40;1&#41; that a testing setup that scans my /tmp/ directory, or any other of my directories should always be justified. Testing the ability to scan several directories can also be done by generating several directories and scan those, this would be less introsive and more to the point of testing. There is no inherent reason to scan my /tmp/ directory, so I&#39;m irritated when a testing software does it.

&#40;2&#41; if a testing software can have extremely different behaviour depending on the content of my /tmp/ directory, I would expect that this is communicated to the tester in form of a warning or a question to answer or an option to activate it, not as a sentence in the Changes file.

&#40;3&#41; I have plenty of seemingly hanging tests for DBD-CSV-0.41. Maybe this test or this new functionality has a bug or maybe my /tmp/ directory is huge. We will only find out if the test stops scanning my /tmp/ directory. Please consider this for the next release.

Apart from that I have not posted for quite a while on PerlMonks. Maybe you can pont me to the posting?

Thanks,
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;09&nbsp;03:03:44&nbsp;2013</span>
    <span class="description">h.m.brand [...] xs4all.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #87684] Note that huge $TMP folders may cause the test to run slow</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 9 Aug 2013 09:03:27 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-CSV [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;H.Merijn Brand&#34; &lt;h.m.brand [...] xs4all.nl&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, 9 Aug 2013 02:41:21 -0400, &#34;Andreas Koenig via RT&#34;
&lt;bug-DBD-CSV@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: DBD-CSV
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=87684">https://rt.cpan.org/Ticket/Display.html?id=87684</a></span> &gt;
&gt; 
&gt; Sorry for the unspecified term &#39;irritating&#39;, I posted this in a bit of a hurry. What I was trying to say was:
&gt; 
&gt; &#40;1&#41; that a testing setup that scans my /tmp/ directory, or any other of
&gt;     my directories should always be justified. Testing the ability to scan
&gt;     several directories can also be done by generating several directories
&gt;     and scan those, this would be less introsive and more to the point of
&gt;     testing. There is no inherent reason to scan my /tmp/ directory, so
&gt;     I&#39;m irritated when a testing software does it.
</div>
The testing of /tmp/ can be changed - I will document that, by setting
&#40;temporarily&#41; the env variable that designate what should be used as
tmp. Usually that is something like $TMP or $TMPDIR.

There are several reasons to use $TMP. You might or might not agree
with any of these reasons being justification, but given that we want
to run on all supported OS&#39;s &#40;Linux, Unix, MacOSX, HP-UX, AIX, VMS, and
Windows to name a few&#41; we chose - after a lot of discussion with people
using those non-standard OS&#39;s, to rely on File::Spec-&gt;tmpdir &#40;&#41; as
  1. It is used quite extensive is other modules
  2. It returns something guaranteed to be usable
  3. It works on all OS&#39;s. Transparantly

If we create our own folder, and take the absolute path of that, the
functionality that we want to test isn&#39;t tested.

Again, if you do not want this test to be run using /tmp on the single
moment that you install the module &#40;remember that this is not used
unless specified by *you* during actual use of the module&#41;, set $TMPDIR

   tmpdir
     Returns a string representation of the first writable directory
     from a list of possible temporary directories.  Returns the
     current directory if no writable temporary directories are found.
     The list of directories checked depends on the platform; e.g.
     File::Spec::Unix checks $ENV{TMPDIR} &#40;unless taint is on&#41; and /tmp.

         $tmpdir = File::Spec-&gt;tmpdir &#40;&#41;;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#40;2&#41; if a testing software can have extremely different behaviour
&gt;     depending on the content of my /tmp/ directory, I would expect
&gt;     that this is communicated to the tester in form of a warning or
&gt;     a question to answer or an option to activate it, not as a
&gt;     sentence in the Changes file.
</div>
The *behavior* of the tests didn&#39;t change other than that the tests now
work on *all* supported OS&#39;s instead of just the ones that I had access
to. The *only* impact is that on some OS&#39;s the tests will take longer
if that folder is stuffed with a lot of files.

The content is not used at all.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#40;3&#41; I have plenty of seemingly hanging tests for DBD-CSV-0.41. Maybe
&gt;     this test or this new functionality has a bug or maybe my /tmp/
&gt;     directory is huge. We will only find out if the test stops scanning
&gt;     my /tmp/ directory. Please consider this for the next release.
</div>
set %TMPDIR% before running the tests

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Apart from that I have not posted for quite a while on PerlMonks.
&gt; Maybe you can pont me to the posting?
</div>
Chatterbox

Aug 07 21:30:55 &lt;cbstream&gt;      [Lady_Aleena] Which is the preferred CSV parser, Text or DBD CSV? I have an actual CSV file I would like to parse.
Aug 07 21:31:55 &lt;cbstream&gt;      [Lady_Aleena] This thing has actual commas and a lot of quotes, and the first line is the headings.
Aug 07 21:36:02 &lt;cbstream&gt;      [Lady_Aleena] My data files are all pipe separated values with no quotes so I use my own little fuction to parse mine normally. I haven&#39;t tried using a module in many years.
Aug 07 21:39:07 &lt;cbstream&gt;      [Lady_Aleena] I think I need more caffiene. I forgot Text::CSV was hard to use.
Aug 07 21:55:03 &lt;cbstream&gt;      [Lady_Aleena] Now I remember why I rolled my own parser for sep values files.
Aug 07 21:57:07 &lt;cbstream&gt;      [Lady_Aleena] There are no headings saying &#34;Putting your data into a hash&#34;.
Aug 07 22:06:52 &lt;cbstream&gt;      [Lady_Aleena] /me gets something to eat.
Aug 07 22:25:29 &lt;cbstream&gt;      [Lady_Aleena] /me gives up.
Aug 07 22:29:47 &lt;cbstream&gt;      [Lady_Aleena] For me it figures Outlook 2003 can&#39;t make a usable CSV file. When it made the file, it didn&#39;t ignore line breaks in some fields, so put parts of fields on different lines. &#40;face palm&#41;
Aug 07 22:33:22 &lt;cbstream&gt;      [Lady_Aleena] I can&#39;t parse it then, since neither Text nor DBD CSV goes from file to aoh or hoh in the documentation.
Aug 07 22:44:11 &lt;cbstream&gt;      [Lady_Aleena] MLX, I need to figure out how to make it so the first line of the CSV file is read as the headings.
Aug 07 22:44:11 &lt;cbstream&gt;      [Lady_Aleena] I think.
Aug 07 22:53:26 &lt;cbstream&gt;      [space_monk] @Lady_Aleena: you can use Text:CSV to read your pipe separated data - just change the separator character when creating an instance
Aug 07 22:55:34 &lt;cbstream&gt;      [Lady_Aleena] space_monk, my pipe separated files are a breeze to parse with my home rolled function, but parsing the csv created by Outlook 2003 with all its quirks is difficult since the documentation to the various CSV modules is incomplete.
Aug 07 23:00:11 &lt;cbstream&gt;      [Lady_Aleena] Also, there isn&#39;t any special characters used at the end of each record.
Aug 08 08:21:57 &lt;TuxCM-&gt;        [Lady_Aleena] late, but maybe you read backlog. &#34;Which is the preferred CSV parser, Text or DBD CSV?&#34; - Technically [mod://DBD::CSV] is not a parser: is is a DBD for [mod://DBI] to enable a database interface over CSV files. It uses [mod://Text::CSV_XS] to parse, but can be forced to use [mod://Text::CSV]
Aug 08 08:22:31 &lt;TuxCM-&gt;        [Lady_Aleena] late, but maybe you read backlog. &#34;Which is the preferred CSV parser, Text or DBD CSV?&#34; - Technically [mod://DBD::CSV] is not a parser: is is a DBD for [mod://DBI] to enable a database interface over CSV files. It uses [mod://Text::CSV_XS] to parse, but can be forced to use [mod://Text::CSV]
Aug 08 08:22:34 &lt;cbstream&gt;      [Tux] [Lady_Aleena] late, but maybe you read backlog. &#34;Which is the preferred CSV parser, Text or DBD CSV?&#34; - Technically [ <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/perldoc?DBD%3A%3ACSV">http://search.cpan.org/perldoc?DBD%3A%3ACSV</a></span> |DBD::CSV] is not a parser: is is a DBD for [ <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/perldoc?DBI">http://search.cpan.org/perldoc?DBI</a></span> |DBI] to enable a database interface over CSV files. It uses [ <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/perldoc?Text%3A%3ACSV_XS">http://search.cpan.org/perldoc?Text%3A%3ACSV_XS</a></span> |Text::CSV_XS] t
Aug 08 08:27:35 &lt;TuxCM-&gt;        [Lady_Aleena] &#34;I can&#39;t parse it then, since neither Text nor DBD CSV goes from file to aoh or hoh&#34; - read again, then use &lt;c&gt;getline_all &#40;&#41;&lt;/c&gt; for AoA or &lt;c&gt;getline_hr_all &#40;&#41;&lt;/c&gt; for AoH. The latter needs some setup
Aug 08 08:27:37 &lt;cbstream&gt;      [Tux] [Lady_Aleena] &#34;I can&#39;t parse it then, since neither Text nor DBD CSV goes from file to aoh or hoh&#34; - read again, then use &lt;c&gt;getline_all &#40;&#41;&lt;/c&gt; for AoA or &lt;c&gt;getline_hr_all &#40;&#41;&lt;/c&gt; for AoH. The latter needs some setup

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks,
</div>

-- 
H.Merijn Brand  <span class="clickylink"><a target="new" rel="nofollow" href="http://tux.nl">http://tux.nl</a></span>   Perl Monger  <span class="clickylink"><a target="new" rel="nofollow" href="http://amsterdam.pm.org/">http://amsterdam.pm.org/</a></span>
using perl5.00307 .. 5.19   porting perl5 on HP-UX, AIX, and openSUSE
<span class="clickylink"><a target="new" rel="nofollow" href="http://mirrors.develooper.com/hpux/">http://mirrors.develooper.com/hpux/</a></span>        <span class="clickylink"><a target="new" rel="nofollow" href="http://www.test-smoke.org/">http://www.test-smoke.org/</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://qa.perl.org">http://qa.perl.org</a></span>   <span class="clickylink"><a target="new" rel="nofollow" href="http://www.goldmark.org/jeff/stupid-disclaimers/">http://www.goldmark.org/jeff/stupid-disclaimers/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;10&nbsp;01:54:52&nbsp;2013</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the clarifications. At the moment my smoker has only a medium sized /tmp/ directory with 200000 files. In this environment make test runs in 83 secs. If I set $TMPDIR to an empty directory, it is reduced to 11 secs. I can extrapolate that the test takes one hour when my /tmp/ directory has 10M files.

My distroprefs now say:

 match:
   distribution: &#39;/DBD-CSV-\d&#39;
 test:
   commandline: &#34;TMPDIR=`mktemp -d /tmp/DBD-CSV-test-tempdirectory-XXXX` make test&#34;

That makes my smokers sane again.

I&#39;m still not convinced that this test should be kept as is. A smoker should not run into timeouts based on the contents of the /tmp/ directory.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;10&nbsp;02:20:34&nbsp;2013</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">And BTW, Lady Aleena is not me.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;10&nbsp;03:51:40&nbsp;2013</span>
    <span class="description">h.m.brand [...] xs4all.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #87684] Note that huge $TMP folders may cause the test to run slow</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 10 Aug 2013 09:51:24 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-CSV [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;H.Merijn Brand&#34; &lt;h.m.brand [...] xs4all.nl&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, 10 Aug 2013 02:20:34 -0400, &#34;Andreas Koenig via RT&#34;
&lt;bug-DBD-CSV@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: DBD-CSV
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=87684">https://rt.cpan.org/Ticket/Display.html?id=87684</a></span> &gt;
&gt; 
&gt; And BTW, Lady Aleena is not me.
</div>
Sorry. I know the both of you and answered two tickets almost
simultaneously.

-- 
H.Merijn Brand  <span class="clickylink"><a target="new" rel="nofollow" href="http://tux.nl">http://tux.nl</a></span>   Perl Monger  <span class="clickylink"><a target="new" rel="nofollow" href="http://amsterdam.pm.org/">http://amsterdam.pm.org/</a></span>
using perl5.00307 .. 5.19   porting perl5 on HP-UX, AIX, and openSUSE
<span class="clickylink"><a target="new" rel="nofollow" href="http://mirrors.develooper.com/hpux/">http://mirrors.develooper.com/hpux/</a></span>        <span class="clickylink"><a target="new" rel="nofollow" href="http://www.test-smoke.org/">http://www.test-smoke.org/</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://qa.perl.org">http://qa.perl.org</a></span>   <span class="clickylink"><a target="new" rel="nofollow" href="http://www.goldmark.org/jeff/stupid-disclaimers/">http://www.goldmark.org/jeff/stupid-disclaimers/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;10&nbsp;04:38:36&nbsp;2013</span>
    <span class="description">CHORNY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve encountered this problem when DBD-CSV was killed &#40;after 30 minutes of testing&#41; is cpan smoke run. New version of File::Temp that is included into perl 5.18 generated many files &#40;after a day of smoking it can be 25000-30000&#41;. I&#39;m using Windows.

output is
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;perl -Mblib t/55_dir_search.t
</div>ok 1 - use DBI;
ok 2 - DSN for C:\strawberry180\cpan\build\DBD-CSV-0.41-5Zjyxs\output1980
ok 3 - DSN for t
ok 4 - DSN for C:\DOCUME~1\c\LOCALS~1\Temp


-- 
Alexandr Ciornii, <span class="clickylink"><a target="new" rel="nofollow" href="http://chorny.net">http://chorny.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;10&nbsp;04:39:05&nbsp;2013</span>
    <span class="description">CHORNY [...] cpan.org -  Requestor CHORNY added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;10&nbsp;10:55:39&nbsp;2013</span>
    <span class="description">h.m.brand [...] xs4all.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #87684] Note that huge $TMP folders may cause the test to run slow</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 10 Aug 2013 16:55:18 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-CSV [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;H.Merijn Brand&#34; &lt;h.m.brand [...] xs4all.nl&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, 10 Aug 2013 01:54:52 -0400, &#34;Andreas Koenig via RT&#34;
&lt;bug-DBD-CSV@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: DBD-CSV
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=87684">https://rt.cpan.org/Ticket/Display.html?id=87684</a></span> &gt;
&gt; 
&gt; Thanks for the clarifications. At the moment my smoker has only a medium sized /tmp/ directory with 200000 files. In this environment make test runs in 83 secs. If I set $TMPDIR to an empty directory, it is reduced to 11 secs. I can extrapolate that the test takes one hour when my /tmp/ directory has 10M files.
&gt; 
&gt; My distroprefs now say:
&gt; 
&gt;  match:
&gt;    distribution: &#39;/DBD-CSV-\d&#39;
&gt;  test:
&gt;    commandline: &#34;TMPDIR=`mktemp -d /tmp/DBD-CSV-test-tempdirectory-XXXX` make test&#34;
&gt; 
&gt; That makes my smokers sane again.
&gt; 
&gt; I&#39;m still not convinced that this test should be kept as is. A smoker should not run into timeouts based on the contents of the /tmp/ directory.
</div>
After more thought, I think the right solution in this case might to
skip the tests for that folder under AUTOMATED_TESTING

-- 
H.Merijn Brand  <span class="clickylink"><a target="new" rel="nofollow" href="http://tux.nl">http://tux.nl</a></span>   Perl Monger  <span class="clickylink"><a target="new" rel="nofollow" href="http://amsterdam.pm.org/">http://amsterdam.pm.org/</a></span>
using perl5.00307 .. 5.19   porting perl5 on HP-UX, AIX, and openSUSE
<span class="clickylink"><a target="new" rel="nofollow" href="http://mirrors.develooper.com/hpux/">http://mirrors.develooper.com/hpux/</a></span>        <span class="clickylink"><a target="new" rel="nofollow" href="http://www.test-smoke.org/">http://www.test-smoke.org/</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://qa.perl.org">http://qa.perl.org</a></span>   <span class="clickylink"><a target="new" rel="nofollow" href="http://www.goldmark.org/jeff/stupid-disclaimers/">http://www.goldmark.org/jeff/stupid-disclaimers/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;11&nbsp;00:04:00&nbsp;2013</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Depending on AUTOMATED_TESTING is action at a distance, isn&#39;t it? I mean every user would need a warning and an opt out as long as there is a test that scans /tmp/.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;11&nbsp;05:15:58&nbsp;2013</span>
    <span class="description">h.m.brand [...] xs4all.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #87684] Note that huge $TMP folders may cause the test to run slow</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 11 Aug 2013 11:15:41 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-CSV [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;H.Merijn Brand&#34; &lt;h.m.brand [...] xs4all.nl&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun, 11 Aug 2013 00:04:00 -0400, &#34;Andreas Koenig via RT&#34;
&lt;bug-DBD-CSV@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: DBD-CSV
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=87684">https://rt.cpan.org/Ticket/Display.html?id=87684</a></span> &gt;
&gt; 
&gt; Depending on AUTOMATED_TESTING is action at a distance, isn&#39;t it? I
&gt; mean every user would need a warning and an opt out as long as there
&gt; is a test that scans /tmp/.
</div>
Your points and use-case are clear.

Is <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/perl5-dbi/DBD-CSV/commit/dafa218010c32783e0023d">https://github.com/perl5-dbi/DBD-CSV/commit/dafa218010c32783e0023d</a></span>
doing what you would like to see as default behavior?

&#40;Docs not yet updated for the use of $TMPDIR&#41;

-- 
H.Merijn Brand  <span class="clickylink"><a target="new" rel="nofollow" href="http://tux.nl">http://tux.nl</a></span>   Perl Monger  <span class="clickylink"><a target="new" rel="nofollow" href="http://amsterdam.pm.org/">http://amsterdam.pm.org/</a></span>
using perl5.00307 .. 5.19   porting perl5 on HP-UX, AIX, and openSUSE
<span class="clickylink"><a target="new" rel="nofollow" href="http://mirrors.develooper.com/hpux/">http://mirrors.develooper.com/hpux/</a></span>        <span class="clickylink"><a target="new" rel="nofollow" href="http://www.test-smoke.org/">http://www.test-smoke.org/</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://qa.perl.org">http://qa.perl.org</a></span>   <span class="clickylink"><a target="new" rel="nofollow" href="http://www.goldmark.org/jeff/stupid-disclaimers/">http://www.goldmark.org/jeff/stupid-disclaimers/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;11&nbsp;13:30:33&nbsp;2013</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Is <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/perl5-dbi/DBD-CSV/commit/dafa218010c32783e0023d">https://github.com/perl5-dbi/DBD-CSV/commit/dafa218010c32783e0023d</a></span>
&gt; doing what you would like to see as default behavior?
</div>
Yes, it does. Thanks a lot, your effort is highly appreciated!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;29&nbsp;03:08:56&nbsp;2013</span>
    <span class="description">HMBRAND [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;03&nbsp;12:20:42&nbsp;2014</span>
    <span class="description">HMBRAND [...] cpan.org -  Fixed in 0.43 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;03&nbsp;12:20:43&nbsp;2014</span>
    <span class="description">HMBRAND [...] cpan.org -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
