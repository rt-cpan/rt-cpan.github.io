<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #97608 for Net-FTPSSL: Bugreport Net::FTPSSL v0.24</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #97608 for Net-FTPSSL: Bugreport Net::FTPSSL v0.24</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-FTPSSL/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-FTPSSL/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-FTPSSL/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-FTPSSL/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-FTPSSL">Net-FTPSSL CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">97608</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-FTPSSL/Active/">Net-FTPSSL</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
kallmeie [...] fim.uni-passau.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-22628-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.24    </td>
  </tr>
  <tr id="CF-22629-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.25    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;29&nbsp;18:52:18&nbsp;2014</span>
    <span class="description">kallmeie [...] fim.uni-passau.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Bugreport Net::FTPSSL v0.24</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 30 Jul 2014 00:51:56 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-FTPSSL [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Fabian Kallmeier &lt;kallmeie [...] fim.uni-passau.de&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;30&nbsp;00:22:32&nbsp;2014</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Fabian,

Thank you for writing.  I&#39;m always interested in hearing feedback about my module.

Your main issue seems to be a time out issue with my module.  And that happened to be the major focus of my last release.  Before v0.24, the Timeout option really didn&#39;t do anything.  The underlying code my class inherited from said it did something with it, but it turned out it really ignored the flag as far as I could tell.  So I finally had to implement a timeout myself to fix another issue using the existing Timeout option.

So have you tried increasing &#34;Timeout =&gt; 20&#34; to something larger to see if it fixed your issue?  The Timeout values defaults to 120.

A better test script would have been:
$site = Net::FTPSSL-&gt;new&#40;&#34;&lt;IP&gt;&#34;, Port =&gt; &lt;PORT&gt;, Croak =&gt; 1, Debug=&gt;1, DebugLogFile =&gt; &#34;myLog.txt&#34;&#41;
$site-&gt;login&#40;&#34;&lt;USERNAME&gt;&#34;, &#34;&lt;PASSWORD&gt;&#34;&#41;;
$site-&gt;quit&#40;&#41;;

The &#34;Croak&#34; option handles the &#34;or die&#34; for you.  So you don&#39;t have to put that into your code.  I also left off Timeout on purpose.

With this test script you could have sent me the entire log file &#34;myLog.txt&#34; as an attachment instead of mixing it in with your problem description.  Making it much easier to read &#38; figure out your problem.

Could you rerun the test with v0.24 again &#38; send me the &#34;myLog.txt&#34; log file?

Now onto Section # 2.  There was a bug in your test script, which was why last_message&#40;&#41; returned the message for &#34;help&#34; instead of &#34;feat&#34;.  There was a reason I didn&#39;t document command&#40;&#41;, which you used incorrectly.  You could have gotten the results you wanted by calling $site-&gt;quot&#40;&#34;feat&#34;&#41;;, which was documented.  Try:  perldoc Net::FTPSSL for the built in documentation on this module.  It documents every method that is safe to use &#38; details the available options to &#34;new&#40;&#41;&#34;.  You have to assume any method or option not documented I feel safe to change between releases.

Next, did increasing the buffer size from 4096 to 8192 fix your problem?  If it did, I&#39;m assuming you just hid it until something even bigger comes along.

So can I have a login on your FTP server to test out some code?  I&#39;ll give you my personal email so you can avoid posting the information if you can.

As to the warnings, I&#39;ll look into it.  Your patch gave me ideas on how to fix it.  But a separate log file will help me confirm it.

As for the status code being split between two lines, that is the behavior of your server.  I&#39;ve run into that issue before and I think my code handles it quite well.  I&#39;m very leery of modifying the response to put it back on one line since that will tend to hide issues in future tickets.  But again a log file generated as an attachment will help me confirm this or if its a similar type of problem I&#39;m not handling.

Once I get your full log file, if I can&#39;t test against your server I can send you a beta of the next release to see if it helps any.  It has a couple of new features to help with reporting on issues that I&#39;m still trying to work out.  But I&#39;ll want to take a stab at fixing the warning issue before I give out a new beta.

I&#39;m looking forward to hearing back from you.

Curtis

On Tue Jul 29 18:52:18 2014, kallmeie@fim.uni-passau.de wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hey there,
&gt; 
&gt; first of all. I want to thank you for all your work. I already use
&gt; this
&gt; module for a long time and I really appretiate it!
&gt; 
&gt; Recently, I ran into two issues. First of all, some details to my
&gt; system:
&gt; 
&gt; OS: Linux 3.2.0-4-amd64 #1 SMP Debian 3.2.60-1+deb7u1 x86_64 GNU/Linux
&gt;  Perl: This is perl 5, version 14, subversion 2 &#40;v5.14.2&#41; built for
&gt; x86_64-linux-gnu-thread-multi
&gt; Module: Net::FTPSSL v0.24
&gt; 
&gt; *1. issue:*
&gt; 
&gt; Since the update from 0.23 to 0.24, I cannot connect to one of my ftp
&gt; servers any more. The daemon is drftpd. When I turn on debug mode, It
&gt; stopps while printing the welcome message. &#40;which is pretty long&#41; I
&gt; initialize the object like this:
&gt; 
&gt; $site = Net::FTPSSL-&gt;new&#40;&#34;&lt;IP&gt;&#34;, Port =&gt; &lt;PORT&gt;, Timeout =&gt; 20, Croak =&gt; 1&#41; 
&gt;      or die $Net::FTPSSL::ERRSTR;
&gt; $site-&gt;login&#40;&#34;&lt;USERNAME&gt;&#34;, &#34;&lt;PASSWORD&gt;&#34;&#41;
&gt;          or die $Net::FTPSSL::ERRSTR;
&gt; 
&gt; The script quits with the error:
&gt; 
&gt; Timed out waiting for a response!
&gt;   at test.pl line 24
&gt; 
&gt; Line 24 is the line where I try to login to the server, not where I
&gt; initialize the object.
&gt; 
&gt; &lt;&lt;+ 214 The HELP command is supported.
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt;&gt; feat
</div></div>&gt; 214 The HELP command is supported.
&gt; 
&gt; As you can see, there are several things that go wrong here.
&gt; 
&gt; 1. Same problem as with the drftpd, the long welcome message is split
&gt; in
&gt; the middle of some lines.
&gt; 2. Sometimes, there is just the first digit of the response code or
&gt; the
&gt; first character of some commands in one line &#40;2 of 211, A of ABORT, M
&gt; of
&gt; Mode, R of RNTO, ...&#41;
&gt; 3. There are empty lines in the &#34;feat&#34;-command, if I am right, thats
&gt; why
&gt; there is the error message &#34;Use of uninitialized value ...&#34;
&gt; 4. print $site-&gt;last_message &#40;&#41; in my script should print the response
&gt; of the &#34;feat&#34;-command, instead, it just prints the last line &#40;&#34;214 The
&gt; HELP command is supported.&#34;&#41;
&gt; 
&gt; I also tried to solve theese problems on my own. Here is a diff of the
&gt; latest module version and my changes:
&gt; 
&gt; 2398a2399,2400
<div class="message-stanza open">&gt; &gt; next if &#40; $line eq &#34;&#34; &#41;;
&gt; &gt;
</div>&gt; 2627c2629,2630
&gt; &lt;            my $read = sysread&#40; $self, $data, 4096&#41;;
&gt; ---
<div class="message-stanza open">&gt; &gt; #           my $read = sysread&#40; $self, $data, 4096&#41;;
&gt; &gt;            my $read = sysread&#40; $self, $data, 8196&#41;;
</div>&gt; 2662a2666,2667
<div class="message-stanza open">&gt; &gt; my $addCR = 1;
&gt; &gt;
</div>&gt; 2667a2673
<div class="message-stanza open">&gt; &gt; $addCR = 0  if &#40;length &#40;$code&#41; &lt; 3 &#38;&#38; $sep eq &#34;&#34; and $desc
</div>&gt; eq &#34;&#34;&#41;;
&gt; 2681d2686
&gt; &lt;
&gt; 2686c2691,2693
&gt;  &lt;           ${*$self}{last_ftp_msg} .= &#34;\n&#34;;       # Restore the
&gt; internal &lt;CR&gt;.
&gt; ---
<div class="message-stanza open">&gt; &gt; if &#40;$addCR == 1&#41; {
&gt; &gt;    ${*$self}{last_ftp_msg} .= &#34;\n&#34;;       # Restore the
</div>&gt; internal &lt;CR&gt;.
<div class="message-stanza open">&gt; &gt; }
</div>&gt; 
&gt; 2398a2399,2400 &lt;-- The &#34;Use of uninitialized value ...&#34; errors where
&gt; gone, because empty lines are ignored
&gt; 2627c2629,2630 &lt;-- Increasing the length value
&gt; 
&gt; All other changes solved the issue, that some responses with a
&gt; response
&gt; code where split after the first digit, not for the debug messages but
&gt; for the output of $site-&gt;last_message &#40;&#41;.
&gt; 
&gt; As I could see, the subroutine response has a lot of special cases
&gt; because the differend ftpds seem to handle the responses differently.
&gt; I
&gt; don&#39;t know if you are interested in supporting another ftp daemon. If
&gt; I&#39;m right, my changes just affected lines which were added to fix the
&gt; bug # 73115 so hopefully, they don&#39;t effect other ftp daemons. If you
&gt; don&#39;t want to add more special cases, perhaps you could check if your
&gt; test cases still work with my changes?
&gt; 
&gt; Many thanks in advance for reading this, I hope this mail is not a
&gt; complete mess :-&#41; If you have any questions, need more details, more
&gt; debug outputs or something else, don&#39;t hesitate to ask!
&gt; 
&gt; Best wishes
&gt; 
&gt; Fabian Kallmeier
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;30&nbsp;00:22:33&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;30&nbsp;00:22:33&nbsp;2014</span>
    <span class="description">CLEACH [...] cpan.org -  Fixed in 0.24 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;30&nbsp;00:26:42&nbsp;2014</span>
    <span class="description">CLEACH [...] cpan.org -  Fixed in 0.24 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;30&nbsp;00:26:42&nbsp;2014</span>
    <span class="description">CLEACH [...] cpan.org -  Broken in 0.24 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;30&nbsp;01:49:08&nbsp;2014</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi again,

I&#39;ve been reviewing my code a bit closer for the warnings reported &#38; I&#39;d like to propose this as your new test program to run against v0.24:

$site = Net::FTPSSL-&gt;new&#40;&#34;&lt;IP&gt;&#34;, Port =&gt; &lt;PORT&gt;, Croak =&gt; 1, Debug=&gt;1,
  DebugLogFile =&gt; &#34;myLog.txt&#34;&#41;
$site-&gt;login&#40;&#34;&lt;USERNAME&gt;&#34;, &#34;&lt;PASSWORD&gt;&#34;&#41;;
$f=$site-&gt;_feat&#40;&#41;;
$h=$site-&gt;_help&#40;&#41;;
$site-&gt;quit&#40;&#41;;
open &#40;LOG, &#34;&gt;&gt;&#34;, &#34;myLog.txt&#34;&#41;;
print LOG &#34;\n\n&#34;;
print LOG &#34;Help: &#40;&#34;, join &#40;&#34;&#41;, &#40;&#34;, %{$h}&#41;, &#34;&#41;\n\n&#34;;
print LOG &#34;Feat: &#40;&#34;, join &#40;&#34;&#41;, &#40;&#34;, %{$f}&#41;, &#34;&#41;\n&#34;;
close &#40;LOG&#41;;

This will tell me how messy the server returns this info that I parse internally.  I probably have more to fix than I initially thought for things to work properly on your server.

Running it against v0.23 probably wouldn&#39;t hurt either.  So that I&#39;d get the Help &#38; Feat lines in logs for that version as well.  I have a strong suspicion that the supported&#40;&#41; function isn&#39;t really working well with your servers.

Curtis

On Wed Jul 30 00:22:32 2014, CLEACH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Fabian,
&gt; 
&gt; Thank you for writing.  I&#39;m always interested in hearing feedback
&gt; about my module.
&gt; 
&gt; Your main issue seems to be a time out issue with my module.  And that
&gt; happened to be the major focus of my last release.  Before v0.24, the
&gt; Timeout option really didn&#39;t do anything.  The underlying code my
&gt; class inherited from said it did something with it, but it turned out
&gt; it really ignored the flag as far as I could tell.  So I finally had
&gt; to implement a timeout myself to fix another issue using the existing
&gt; Timeout option.
&gt; 
&gt; So have you tried increasing &#34;Timeout =&gt; 20&#34; to something larger to
&gt; see if it fixed your issue?  The Timeout values defaults to 120.
&gt; 
&gt; A better test script would have been:
&gt; $site = Net::FTPSSL-&gt;new&#40;&#34;&lt;IP&gt;&#34;, Port =&gt; &lt;PORT&gt;, Croak =&gt; 1, Debug=&gt;1,
&gt; DebugLogFile =&gt; &#34;myLog.txt&#34;&#41;
&gt; $site-&gt;login&#40;&#34;&lt;USERNAME&gt;&#34;, &#34;&lt;PASSWORD&gt;&#34;&#41;;
&gt; $site-&gt;quit&#40;&#41;;
&gt; 
&gt; The &#34;Croak&#34; option handles the &#34;or die&#34; for you.  So you don&#39;t have to
&gt; put that into your code.  I also left off Timeout on purpose.
&gt; 
&gt; With this test script you could have sent me the entire log file
&gt; &#34;myLog.txt&#34; as an attachment instead of mixing it in with your problem
&gt; description.  Making it much easier to read &#38; figure out your problem.
&gt; 
&gt; Could you rerun the test with v0.24 again &#38; send me the &#34;myLog.txt&#34;
&gt; log file?
&gt; 
&gt; Now onto Section # 2.  There was a bug in your test script, which was
&gt; why last_message&#40;&#41; returned the message for &#34;help&#34; instead of &#34;feat&#34;.
&gt; There was a reason I didn&#39;t document command&#40;&#41;, which you used
&gt; incorrectly.  You could have gotten the results you wanted by calling
&gt; $site-&gt;quot&#40;&#34;feat&#34;&#41;;, which was documented.  Try:  perldoc Net::FTPSSL
&gt; for the built in documentation on this module.  It documents every
&gt; method that is safe to use &#38; details the available options to &#34;new&#40;&#41;&#34;.
&gt; You have to assume any method or option not documented I feel safe to
&gt; change between releases.
&gt; 
&gt; Next, did increasing the buffer size from 4096 to 8192 fix your
&gt; problem?  If it did, I&#39;m assuming you just hid it until something even
&gt; bigger comes along.
&gt; 
&gt; So can I have a login on your FTP server to test out some code?  I&#39;ll
&gt; give you my personal email so you can avoid posting the information if
&gt; you can.
&gt; 
&gt; As to the warnings, I&#39;ll look into it.  Your patch gave me ideas on
&gt; how to fix it.  But a separate log file will help me confirm it.
&gt; 
&gt; As for the status code being split between two lines, that is the
&gt; behavior of your server.  I&#39;ve run into that issue before and I think
&gt; my code handles it quite well.  I&#39;m very leery of modifying the
&gt; response to put it back on one line since that will tend to hide
&gt; issues in future tickets.  But again a log file generated as an
&gt; attachment will help me confirm this or if its a similar type of
&gt; problem I&#39;m not handling.
&gt; 
&gt; Once I get your full log file, if I can&#39;t test against your server I
&gt; can send you a beta of the next release to see if it helps any.  It
&gt; has a couple of new features to help with reporting on issues that I&#39;m
&gt; still trying to work out.  But I&#39;ll want to take a stab at fixing the
&gt; warning issue before I give out a new beta.
&gt; 
&gt; I&#39;m looking forward to hearing back from you.
&gt; 
&gt; Curtis
&gt; 
&gt; On Tue Jul 29 18:52:18 2014, kallmeie@fim.uni-passau.de wrote:
<div class="message-stanza open">&gt; &gt; Hey there,
&gt; &gt;
&gt; &gt; first of all. I want to thank you for all your work. I already use
&gt; &gt; this
&gt; &gt; module for a long time and I really appretiate it!
&gt; &gt;
&gt; &gt; Recently, I ran into two issues. First of all, some details to my
&gt; &gt; system:
&gt; &gt;
&gt; &gt; OS: Linux 3.2.0-4-amd64 #1 SMP Debian 3.2.60-1+deb7u1 x86_64
&gt; &gt; GNU/Linux
&gt; &gt;  Perl: This is perl 5, version 14, subversion 2 &#40;v5.14.2&#41; built for
&gt; &gt; x86_64-linux-gnu-thread-multi
&gt; &gt; Module: Net::FTPSSL v0.24
&gt; &gt;
&gt; &gt; *1. issue:*
&gt; &gt;
&gt; &gt; Since the update from 0.23 to 0.24, I cannot connect to one of my ftp
&gt; &gt; servers any more. The daemon is drftpd. When I turn on debug mode, It
&gt; &gt; stopps while printing the welcome message. &#40;which is pretty long&#41; I
&gt; &gt; initialize the object like this:
&gt; &gt;
&gt; &gt; $site = Net::FTPSSL-&gt;new&#40;&#34;&lt;IP&gt;&#34;, Port =&gt; &lt;PORT&gt;, Timeout =&gt; 20, Croak
&gt; &gt; =&gt; 1&#41;
&gt; &gt;     or die $Net::FTPSSL::ERRSTR;
&gt; &gt; $site-&gt;login&#40;&#34;&lt;USERNAME&gt;&#34;, &#34;&lt;PASSWORD&gt;&#34;&#41;
&gt; &gt;         or die $Net::FTPSSL::ERRSTR;
&gt; &gt;
&gt; &gt; The script quits with the error:
&gt; &gt;
&gt; &gt; Timed out waiting for a response!
&gt; &gt;   at test.pl line 24
&gt; &gt;
&gt; &gt; Line 24 is the line where I try to login to the server, not where I
&gt; &gt; initialize the object.
&gt; &gt;
&gt; &gt; &lt;&lt;+ 214 The HELP command is supported.
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt;&gt;&gt; feat
</div></div>&gt; &gt; 214 The HELP command is supported.
&gt; &gt;
&gt; &gt; As you can see, there are several things that go wrong here.
&gt; &gt;
&gt; &gt; 1. Same problem as with the drftpd, the long welcome message is split
&gt; &gt; in
&gt; &gt; the middle of some lines.
&gt; &gt; 2. Sometimes, there is just the first digit of the response code or
&gt; &gt; the
&gt; &gt; first character of some commands in one line &#40;2 of 211, A of ABORT, M
&gt; &gt; of
&gt; &gt; Mode, R of RNTO, ...&#41;
&gt; &gt; 3. There are empty lines in the &#34;feat&#34;-command, if I am right, thats
&gt; &gt; why
&gt; &gt; there is the error message &#34;Use of uninitialized value ...&#34;
&gt; &gt; 4. print $site-&gt;last_message &#40;&#41; in my script should print the
&gt; &gt; response
&gt; &gt; of the &#34;feat&#34;-command, instead, it just prints the last line &#40;&#34;214
&gt; &gt; The
&gt; &gt; HELP command is supported.&#34;&#41;
&gt; &gt;
&gt; &gt; I also tried to solve theese problems on my own. Here is a diff of
&gt; &gt; the
&gt; &gt; latest module version and my changes:
&gt; &gt;
&gt; &gt; 2398a2399,2400
<div class="message-stanza open">&gt; &gt; &gt; next if &#40; $line eq &#34;&#34; &#41;;
&gt; &gt; &gt;
</div>&gt; &gt; 2627c2629,2630
&gt; &gt; &lt;            my $read = sysread&#40; $self, $data, 4096&#41;;
&gt; &gt; ---
<div class="message-stanza open">&gt; &gt; &gt; #           my $read = sysread&#40; $self, $data, 4096&#41;;
&gt; &gt; &gt;            my $read = sysread&#40; $self, $data, 8196&#41;;
</div>&gt; &gt; 2662a2666,2667
<div class="message-stanza open">&gt; &gt; &gt; my $addCR = 1;
&gt; &gt; &gt;
</div>&gt; &gt; 2667a2673
<div class="message-stanza open">&gt; &gt; &gt; $addCR = 0  if &#40;length &#40;$code&#41; &lt; 3 &#38;&#38; $sep eq &#34;&#34; and $desc
</div>&gt; &gt; eq &#34;&#34;&#41;;
&gt; &gt; 2681d2686
&gt; &gt; &lt;
&gt; &gt; 2686c2691,2693
&gt; &gt;  &lt;           ${*$self}{last_ftp_msg} .= &#34;\n&#34;;       # Restore the
&gt; &gt; internal &lt;CR&gt;.
&gt; &gt; ---
<div class="message-stanza open">&gt; &gt; &gt; if &#40;$addCR == 1&#41; {
&gt; &gt; &gt;    ${*$self}{last_ftp_msg} .= &#34;\n&#34;;       # Restore the
</div>&gt; &gt; internal &lt;CR&gt;.
<div class="message-stanza open">&gt; &gt; &gt; }
</div>&gt; &gt;
&gt; &gt; 2398a2399,2400 &lt;-- The &#34;Use of uninitialized value ...&#34; errors where
&gt; &gt; gone, because empty lines are ignored
&gt; &gt; 2627c2629,2630 &lt;-- Increasing the length value
&gt; &gt;
&gt; &gt; All other changes solved the issue, that some responses with a
&gt; &gt; response
&gt; &gt; code where split after the first digit, not for the debug messages
&gt; &gt; but
&gt; &gt; for the output of $site-&gt;last_message &#40;&#41;.
&gt; &gt;
&gt; &gt; As I could see, the subroutine response has a lot of special cases
&gt; &gt; because the differend ftpds seem to handle the responses differently.
&gt; &gt; I
&gt; &gt; don&#39;t know if you are interested in supporting another ftp daemon. If
&gt; &gt; I&#39;m right, my changes just affected lines which were added to fix the
&gt; &gt; bug # 73115 so hopefully, they don&#39;t effect other ftp daemons. If you
&gt; &gt; don&#39;t want to add more special cases, perhaps you could check if your
&gt; &gt; test cases still work with my changes?
&gt; &gt;
&gt; &gt; Many thanks in advance for reading this, I hope this mail is not a
&gt; &gt; complete mess :-&#41; If you have any questions, need more details, more
&gt; &gt; debug outputs or something else, don&#39;t hesitate to ask!
&gt; &gt;
&gt; &gt; Best wishes
&gt; &gt;
&gt; &gt; Fabian Kallmeier
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;30&nbsp;09:27:52&nbsp;2014</span>
    <span class="description">kallmeie [...] fim.uni-passau.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [rt.cpan.org #97608]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 30 Jul 2014 15:27:33 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-FTPSSL [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Fabian Kallmeier &lt;kallmeie [...] fim.uni-passau.de&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hey Curtis,

thank you for replying so fast. Sorry for the confusing message, lets 
bring some order in it :-&#41;

*1. Timeout issue*

I tried increasing the timeout by not defining it in new and therefore 
using the default value of 120, but still it just stopps while printing 
the welcome message and after 120 seconds, it quits saying &#34;Timed out 
waiting for a response!&#34;. I attached timeout.log to this email which is 
the debug output of the following code:

my $site = Net::FTPSSL-&gt;new&#40;&#34;&lt;IP&gt;&#34;, Port =&gt; &lt;PORT&gt;, Croak =&gt; 1, 
Debug=&gt;1, DebugLogFile =&gt; &#34;timeout.txt&#34;&#41;;
$site-&gt;login&#40;&#34;&lt;USERNAME&gt;&#34;, &#34;&lt;PASSWORD&gt;&#34;&#41;;
$site-&gt;quit&#40;&#41;;

Increasing the buffer size solved this issue! Im afraid I cannot give 
you access to this server, because its not my own one.

*2. Cubnc issue*

By using $site-&gt;quot&#40;&#34;feat&#34;&#41;; I get the result of the whole feat 
command, thank you for the hint! Of course there still is the problem 
with the &#34;\n&#34; after the first digit of most of the response codes.

I attached cubnc.log, which is the ouput of the following code:

my $site = Net::FTPSSL-&gt;new&#40;&#34;&lt;IP&gt;&#34;, Port =&gt; &lt;PORT&gt;, Croak =&gt; 1, Debug =&gt; 
1, DebugLogFile =&gt; &#34;cubnc.txt&#34;&#41;;
$site-&gt;login&#40;&#34;&lt;USERNAME&gt;&#34;, &#34;&lt;PASSWORD&gt;&#34;&#41;;
$site-&gt;quit&#40;&#41;;

Last but not least, I ran the code you postet in your second response. 
The result is in cubnc_ext_v0.23.txt and cubnc_ext_v0.24.txt. They just 
differ in some ssl settings and in 0.23, there is one &#34;\n&#34; more in the 
welcome message than there is in 0.24.

If it helps, I could give you an account for the cubnc server. Just give 
me your email address and I&#39;ll send you the login details.

Best regards

Fabian
</div></div>

<div class="messagebody">
</div>
</div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;02&nbsp;13:19:12&nbsp;2014</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Fabian,

Sorry for the delay, but the paying job got in the way.

Please do send my your info to CLEACH@cpan.com

I&#39;m going to put some debug statements into a beta for you to use in testing out the problem on your private server.  I&#39;m not sure yet, if I&#39;m going to increase the buffer size to hide the problem or use a Timeout of -1 to turn off the timeout logic.  But I have to compare your works/doesn&#39;t work logs to see if it will do any good.

I&#39;ll see if I can get you a beta by Monday.

Curtis

On Wed Jul 30 09:27:52 2014, kallmeie@fim.uni-passau.de wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hey Curtis,
&gt; 
&gt; thank you for replying so fast. Sorry for the confusing message, lets 
&gt; bring some order in it :-&#41;
&gt; 
&gt; *1. Timeout issue*
&gt; 
&gt; I tried increasing the timeout by not defining it in new and therefore 
&gt; using the default value of 120, but still it just stopps while printing 
&gt; the welcome message and after 120 seconds, it quits saying &#34;Timed out 
&gt; waiting for a response!&#34;. I attached timeout.log to this email which is 
&gt; the debug output of the following code:
&gt; 
&gt; my $site = Net::FTPSSL-&gt;new&#40;&#34;&lt;IP&gt;&#34;, Port =&gt; &lt;PORT&gt;, Croak =&gt; 1, 
&gt; Debug=&gt;1, DebugLogFile =&gt; &#34;timeout.txt&#34;&#41;;
&gt; $site-&gt;login&#40;&#34;&lt;USERNAME&gt;&#34;, &#34;&lt;PASSWORD&gt;&#34;&#41;;
&gt; $site-&gt;quit&#40;&#41;;
&gt; 
&gt; Increasing the buffer size solved this issue! Im afraid I cannot give 
&gt; you access to this server, because its not my own one.
&gt; 
&gt; *2. Cubnc issue*
&gt; 
&gt; By using $site-&gt;quot&#40;&#34;feat&#34;&#41;; I get the result of the whole feat 
&gt; command, thank you for the hint! Of course there still is the problem 
&gt; with the &#34;\n&#34; after the first digit of most of the response codes.
&gt; 
&gt; I attached cubnc.log, which is the ouput of the following code:
&gt; 
&gt; my $site = Net::FTPSSL-&gt;new&#40;&#34;&lt;IP&gt;&#34;, Port =&gt; &lt;PORT&gt;, Croak =&gt; 1, Debug =&gt; 
&gt; 1, DebugLogFile =&gt; &#34;cubnc.txt&#34;&#41;;
&gt; $site-&gt;login&#40;&#34;&lt;USERNAME&gt;&#34;, &#34;&lt;PASSWORD&gt;&#34;&#41;;
&gt; $site-&gt;quit&#40;&#41;;
&gt; 
&gt; Last but not least, I ran the code you postet in your second response. 
&gt; The result is in cubnc_ext_v0.23.txt and cubnc_ext_v0.24.txt. They just 
&gt; differ in some ssl settings and in 0.23, there is one &#34;\n&#34; more in the 
&gt; welcome message than there is in 0.24.
&gt; 
&gt; If it helps, I could give you an account for the cubnc server. Just give 
&gt; me your email address and I&#39;ll send you the login details.
&gt; 
&gt; Best regards
&gt; 
&gt; Fabian
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;03&nbsp;03:24:06&nbsp;2014</span>
    <span class="description">cleach [...] Caesars.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #97608]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 3 Aug 2014 07:23:51 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Net-FTPSSL [...] rt.cpan.org&#34; &lt;bug-Net-FTPSSL [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Curtis Leach &lt;cleach [...] Caesars.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fabian,

I had a typo in my email address.  Use cleach@CPAN.org

I don&#39;t have access to a server that&#39;s having those issues.  So I want to take you up on your offer so that I can fully debug this module for this problem while I have the chance.

As to your other server that you can&#39;t grant me access to, attached is my beta to run against it.  Try the following test program

my $ftp = Net::FTPSSL-&gt;new &#40;&#34;server&#34;, Croak=&gt;1, Debug=&gt;1, DebugLogFile=&gt;&#34;myLog.txt&#34;&#41;;
$ftp-&gt;trapWarn&#40;&#41;;    # New function in the beta.
$ftp-&gt;login &#40;user, pwd&#41;;
$ftp-&gt;quit&#40;&#41;;

Then return the log file for me to review, even if it works.  I&#39;m hoping to catch the error you are encountering In the logs.

I really don&#39;t want to just increase the buffer size until I have a chance to understand why it&#39;s failing.  Especially when the vast majority of the time not much data is returned on the command channel.

Curtis

</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;06&nbsp;12:25:23&nbsp;2014</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Fabian,

Did you get my beta?

I would also like access to the server that&#39;s returning extra line breaks.

Curtis

On Sat Aug 02 13:19:12 2014, CLEACH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Fabian,
&gt; 
&gt; Sorry for the delay, but the paying job got in the way.
&gt; 
&gt; Please do send my your info to CLEACH@cpan.org
&gt; 
&gt; I&#39;m going to put some debug statements into a beta for you to use in
&gt; testing out the problem on your private server.  I&#39;m not sure yet, if
&gt; I&#39;m going to increase the buffer size to hide the problem or use a
&gt; Timeout of -1 to turn off the timeout logic.  But I have to compare
&gt; your works/doesn&#39;t work logs to see if it will do any good.
&gt; 
&gt; I&#39;ll see if I can get you a beta by Monday.
&gt; 
&gt; Curtis
&gt; 
&gt; On Wed Jul 30 09:27:52 2014, kallmeie@fim.uni-passau.de wrote:
<div class="message-stanza open">&gt; &gt; Hey Curtis,
&gt; &gt;
&gt; &gt; thank you for replying so fast. Sorry for the confusing message, lets
&gt; &gt; bring some order in it :-&#41;
&gt; &gt;
&gt; &gt; *1. Timeout issue*
&gt; &gt;
&gt; &gt; I tried increasing the timeout by not defining it in new and
&gt; &gt; therefore
&gt; &gt; using the default value of 120, but still it just stopps while
&gt; &gt; printing
&gt; &gt; the welcome message and after 120 seconds, it quits saying &#34;Timed out
&gt; &gt; waiting for a response!&#34;. I attached timeout.log to this email which
&gt; &gt; is
&gt; &gt; the debug output of the following code:
&gt; &gt;
&gt; &gt; my $site = Net::FTPSSL-&gt;new&#40;&#34;&lt;IP&gt;&#34;, Port =&gt; &lt;PORT&gt;, Croak =&gt; 1,
&gt; &gt; Debug=&gt;1, DebugLogFile =&gt; &#34;timeout.txt&#34;&#41;;
&gt; &gt; $site-&gt;login&#40;&#34;&lt;USERNAME&gt;&#34;, &#34;&lt;PASSWORD&gt;&#34;&#41;;
&gt; &gt; $site-&gt;quit&#40;&#41;;
&gt; &gt;
&gt; &gt; Increasing the buffer size solved this issue! Im afraid I cannot give
&gt; &gt; you access to this server, because its not my own one.
&gt; &gt;
&gt; &gt; *2. Cubnc issue*
&gt; &gt;
&gt; &gt; By using $site-&gt;quot&#40;&#34;feat&#34;&#41;; I get the result of the whole feat
&gt; &gt; command, thank you for the hint! Of course there still is the problem
&gt; &gt; with the &#34;\n&#34; after the first digit of most of the response codes.
&gt; &gt;
&gt; &gt; I attached cubnc.log, which is the ouput of the following code:
&gt; &gt;
&gt; &gt; my $site = Net::FTPSSL-&gt;new&#40;&#34;&lt;IP&gt;&#34;, Port =&gt; &lt;PORT&gt;, Croak =&gt; 1, Debug
&gt; &gt; =&gt;
&gt; &gt; 1, DebugLogFile =&gt; &#34;cubnc.txt&#34;&#41;;
&gt; &gt; $site-&gt;login&#40;&#34;&lt;USERNAME&gt;&#34;, &#34;&lt;PASSWORD&gt;&#34;&#41;;
&gt; &gt; $site-&gt;quit&#40;&#41;;
&gt; &gt;
&gt; &gt; Last but not least, I ran the code you postet in your second
&gt; &gt; response.
&gt; &gt; The result is in cubnc_ext_v0.23.txt and cubnc_ext_v0.24.txt. They
&gt; &gt; just
&gt; &gt; differ in some ssl settings and in 0.23, there is one &#34;\n&#34; more in
&gt; &gt; the
&gt; &gt; welcome message than there is in 0.24.
&gt; &gt;
&gt; &gt; If it helps, I could give you an account for the cubnc server. Just
&gt; &gt; give
&gt; &gt; me your email address and I&#39;ll send you the login details.
&gt; &gt;
&gt; &gt; Best regards
&gt; &gt;
&gt; &gt; Fabian
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;19&nbsp;19:52:46&nbsp;2014</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Fabian,

I never heard back from you about my access or my previous beta I sent to you.

But in the mean time I did verify there was a couple of minor bugs in the response&#40;&#41; code that required me to completely redesign how it worked.  It was just getting too convoluted with all the past bug fixes to put any new patches into it.  It was easier just to rewrite it from scratch again.

I think it was the bug that was inserting the extra returns into the message.  Not something strange that your server was doing.  But I&#39;d like to review it by testing it against your server to be sure.

I also think I know why the timeout logic wasn&#39;t working for you.  So that needs to be tested as well.

Let me know if you are willing &#38; I&#39;ll send you another beta.  Otherwise I&#39;ll just upload my changes and call it a day in a week or so.  I still have some testing to do on my end to make sure I didn&#39;t introduce any other problems with the redesign.

Curtis

On Wed Aug 06 12:25:23 2014, CLEACH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Fabian,
&gt; 
&gt; Did you get my beta?
&gt; 
&gt; I would also like access to the server that&#39;s returning extra line breaks.
&gt; 
&gt; Curtis
&gt; 
&gt; On Sat Aug 02 13:19:12 2014, CLEACH wrote:
<div class="message-stanza open">&gt; &gt; Hi Fabian,
&gt; &gt; 
&gt; &gt; Sorry for the delay, but the paying job got in the way.
&gt; &gt; 
&gt; &gt; Please do send my your info to CLEACH@cpan.org
&gt; &gt; 
&gt; &gt; I&#39;m going to put some debug statements into a beta for you to use in
&gt; &gt; testing out the problem on your private server.  I&#39;m not sure yet, if
&gt; &gt; I&#39;m going to increase the buffer size to hide the problem or use a
&gt; &gt; Timeout of -1 to turn off the timeout logic.  But I have to compare
&gt; &gt; your works/doesn&#39;t work logs to see if it will do any good.
&gt; &gt; 
&gt; &gt; I&#39;ll see if I can get you a beta by Monday.
&gt; &gt; 
&gt; &gt; Curtis
&gt; &gt; 
&gt; &gt; On Wed Jul 30 09:27:52 2014, kallmeie@fim.uni-passau.de wrote:
<div class="message-stanza open">&gt; &gt; &gt; Hey Curtis,
&gt; &gt; &gt;
&gt; &gt; &gt; thank you for replying so fast. Sorry for the confusing message, lets
&gt; &gt; &gt; bring some order in it :-&#41;
&gt; &gt; &gt;
&gt; &gt; &gt; *1. Timeout issue*
&gt; &gt; &gt;
&gt; &gt; &gt; I tried increasing the timeout by not defining it in new and
&gt; &gt; &gt; therefore
&gt; &gt; &gt; using the default value of 120, but still it just stopps while
&gt; &gt; &gt; printing
&gt; &gt; &gt; the welcome message and after 120 seconds, it quits saying &#34;Timed out
&gt; &gt; &gt; waiting for a response!&#34;. I attached timeout.log to this email which
&gt; &gt; &gt; is
&gt; &gt; &gt; the debug output of the following code:
&gt; &gt; &gt;
&gt; &gt; &gt; my $site = Net::FTPSSL-&gt;new&#40;&#34;&lt;IP&gt;&#34;, Port =&gt; &lt;PORT&gt;, Croak =&gt; 1,
&gt; &gt; &gt; Debug=&gt;1, DebugLogFile =&gt; &#34;timeout.txt&#34;&#41;;
&gt; &gt; &gt; $site-&gt;login&#40;&#34;&lt;USERNAME&gt;&#34;, &#34;&lt;PASSWORD&gt;&#34;&#41;;
&gt; &gt; &gt; $site-&gt;quit&#40;&#41;;
&gt; &gt; &gt;
&gt; &gt; &gt; Increasing the buffer size solved this issue! Im afraid I cannot give
&gt; &gt; &gt; you access to this server, because its not my own one.
&gt; &gt; &gt;
&gt; &gt; &gt; *2. Cubnc issue*
&gt; &gt; &gt;
&gt; &gt; &gt; By using $site-&gt;quot&#40;&#34;feat&#34;&#41;; I get the result of the whole feat
&gt; &gt; &gt; command, thank you for the hint! Of course there still is the problem
&gt; &gt; &gt; with the &#34;\n&#34; after the first digit of most of the response codes.
&gt; &gt; &gt;
&gt; &gt; &gt; I attached cubnc.log, which is the ouput of the following code:
&gt; &gt; &gt;
&gt; &gt; &gt; my $site = Net::FTPSSL-&gt;new&#40;&#34;&lt;IP&gt;&#34;, Port =&gt; &lt;PORT&gt;, Croak =&gt; 1, Debug
&gt; &gt; &gt; =&gt;
&gt; &gt; &gt; 1, DebugLogFile =&gt; &#34;cubnc.txt&#34;&#41;;
&gt; &gt; &gt; $site-&gt;login&#40;&#34;&lt;USERNAME&gt;&#34;, &#34;&lt;PASSWORD&gt;&#34;&#41;;
&gt; &gt; &gt; $site-&gt;quit&#40;&#41;;
&gt; &gt; &gt;
&gt; &gt; &gt; Last but not least, I ran the code you postet in your second
&gt; &gt; &gt; response.
&gt; &gt; &gt; The result is in cubnc_ext_v0.23.txt and cubnc_ext_v0.24.txt. They
&gt; &gt; &gt; just
&gt; &gt; &gt; differ in some ssl settings and in 0.23, there is one &#34;\n&#34; more in
&gt; &gt; &gt; the
&gt; &gt; &gt; welcome message than there is in 0.24.
&gt; &gt; &gt;
&gt; &gt; &gt; If it helps, I could give you an account for the cubnc server. Just
&gt; &gt; &gt; give
&gt; &gt; &gt; me your email address and I&#39;ll send you the login details.
&gt; &gt; &gt;
&gt; &gt; &gt; Best regards
&gt; &gt; &gt;
&gt; &gt; &gt; Fabian
</div></div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;05&nbsp;20:31:36&nbsp;2014</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Fabian,

I&#39;ve finished making the changes that should fix your problem and uploaded it as an official release &#40;v0.25&#41;  It should be available in an hour or so.  I think I figured out a way to get any FTPS server to behave the way yours did.  So I was able to do extensive testing of my changes.

This release should fix all the issues you reported in your bug report.  But I&#39;d appreciate it if you tried it out &#38; got back to me with the results.

If I don&#39;t hear back from you by the end of next week, I&#39;ll assume all is OK and close this ticket.

If for some reason it doesn&#39;t work for you, I&#39;ll need two log files generated.  The 1st using Debug=&gt;1 &#38; the 2nd using Debug=&gt;99.  With both logs generated by the same test code that demonstrates the problem.  The 99 option just generates supper verbose log files.

Curtis

On Tue Aug 19 19:52:46 2014, CLEACH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Fabian,
&gt; 
&gt; I never heard back from you about my access or my previous beta I sent
&gt; to you.
&gt; 
&gt; But in the mean time I did verify there was a couple of minor bugs in
&gt; the response&#40;&#41; code that required me to completely redesign how it
&gt; worked.  It was just getting too convoluted with all the past bug
&gt; fixes to put any new patches into it.  It was easier just to rewrite
&gt; it from scratch again.
&gt; 
&gt; I think it was the bug that was inserting the extra returns into the
&gt; message.  Not something strange that your server was doing.  But I&#39;d
&gt; like to review it by testing it against your server to be sure.
&gt; 
&gt; I also think I know why the timeout logic wasn&#39;t working for you.  So
&gt; that needs to be tested as well.
&gt; 
&gt; Let me know if you are willing &#38; I&#39;ll send you another beta.
&gt; Otherwise I&#39;ll just upload my changes and call it a day in a week or
&gt; so.  I still have some testing to do on my end to make sure I didn&#39;t
&gt; introduce any other problems with the redesign.
&gt; 
&gt; Curtis
&gt; 
&gt; On Wed Aug 06 12:25:23 2014, CLEACH wrote:
<div class="message-stanza open">&gt; &gt; Hi Fabian,
&gt; &gt;
&gt; &gt; Did you get my beta?
&gt; &gt;
&gt; &gt; I would also like access to the server that&#39;s returning extra line
&gt; &gt; breaks.
&gt; &gt;
&gt; &gt; Curtis
&gt; &gt;
&gt; &gt; On Sat Aug 02 13:19:12 2014, CLEACH wrote:
<div class="message-stanza open">&gt; &gt; &gt; Hi Fabian,
&gt; &gt; &gt;
&gt; &gt; &gt; Sorry for the delay, but the paying job got in the way.
&gt; &gt; &gt;
&gt; &gt; &gt; Please do send my your info to CLEACH@cpan.org
&gt; &gt; &gt;
&gt; &gt; &gt; I&#39;m going to put some debug statements into a beta for you to use
&gt; &gt; &gt; in
&gt; &gt; &gt; testing out the problem on your private server.  I&#39;m not sure yet,
&gt; &gt; &gt; if
&gt; &gt; &gt; I&#39;m going to increase the buffer size to hide the problem or use a
&gt; &gt; &gt; Timeout of -1 to turn off the timeout logic.  But I have to compare
&gt; &gt; &gt; your works/doesn&#39;t work logs to see if it will do any good.
&gt; &gt; &gt;
&gt; &gt; &gt; I&#39;ll see if I can get you a beta by Monday.
&gt; &gt; &gt;
&gt; &gt; &gt; Curtis
&gt; &gt; &gt;
&gt; &gt; &gt; On Wed Jul 30 09:27:52 2014, kallmeie@fim.uni-passau.de wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; Hey Curtis,
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; thank you for replying so fast. Sorry for the confusing message,
&gt; &gt; &gt; &gt; lets
&gt; &gt; &gt; &gt; bring some order in it :-&#41;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; *1. Timeout issue*
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I tried increasing the timeout by not defining it in new and
&gt; &gt; &gt; &gt; therefore
&gt; &gt; &gt; &gt; using the default value of 120, but still it just stopps while
&gt; &gt; &gt; &gt; printing
&gt; &gt; &gt; &gt; the welcome message and after 120 seconds, it quits saying &#34;Timed
&gt; &gt; &gt; &gt; out
&gt; &gt; &gt; &gt; waiting for a response!&#34;. I attached timeout.log to this email
&gt; &gt; &gt; &gt; which
&gt; &gt; &gt; &gt; is
&gt; &gt; &gt; &gt; the debug output of the following code:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; my $site = Net::FTPSSL-&gt;new&#40;&#34;&lt;IP&gt;&#34;, Port =&gt; &lt;PORT&gt;, Croak =&gt; 1,
&gt; &gt; &gt; &gt; Debug=&gt;1, DebugLogFile =&gt; &#34;timeout.txt&#34;&#41;;
&gt; &gt; &gt; &gt; $site-&gt;login&#40;&#34;&lt;USERNAME&gt;&#34;, &#34;&lt;PASSWORD&gt;&#34;&#41;;
&gt; &gt; &gt; &gt; $site-&gt;quit&#40;&#41;;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Increasing the buffer size solved this issue! Im afraid I cannot
&gt; &gt; &gt; &gt; give
&gt; &gt; &gt; &gt; you access to this server, because its not my own one.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; *2. Cubnc issue*
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; By using $site-&gt;quot&#40;&#34;feat&#34;&#41;; I get the result of the whole feat
&gt; &gt; &gt; &gt; command, thank you for the hint! Of course there still is the
&gt; &gt; &gt; &gt; problem
&gt; &gt; &gt; &gt; with the &#34;\n&#34; after the first digit of most of the response
&gt; &gt; &gt; &gt; codes.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I attached cubnc.log, which is the ouput of the following code:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; my $site = Net::FTPSSL-&gt;new&#40;&#34;&lt;IP&gt;&#34;, Port =&gt; &lt;PORT&gt;, Croak =&gt; 1,
&gt; &gt; &gt; &gt; Debug
&gt; &gt; &gt; &gt; =&gt;
&gt; &gt; &gt; &gt; 1, DebugLogFile =&gt; &#34;cubnc.txt&#34;&#41;;
&gt; &gt; &gt; &gt; $site-&gt;login&#40;&#34;&lt;USERNAME&gt;&#34;, &#34;&lt;PASSWORD&gt;&#34;&#41;;
&gt; &gt; &gt; &gt; $site-&gt;quit&#40;&#41;;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Last but not least, I ran the code you postet in your second
&gt; &gt; &gt; &gt; response.
&gt; &gt; &gt; &gt; The result is in cubnc_ext_v0.23.txt and cubnc_ext_v0.24.txt.
&gt; &gt; &gt; &gt; They
&gt; &gt; &gt; &gt; just
&gt; &gt; &gt; &gt; differ in some ssl settings and in 0.23, there is one &#34;\n&#34; more
&gt; &gt; &gt; &gt; in
&gt; &gt; &gt; &gt; the
&gt; &gt; &gt; &gt; welcome message than there is in 0.24.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; If it helps, I could give you an account for the cubnc server.
&gt; &gt; &gt; &gt; Just
&gt; &gt; &gt; &gt; give
&gt; &gt; &gt; &gt; me your email address and I&#39;ll send you the login details.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Best regards
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Fabian
</div></div>&gt; &gt;
&gt; &gt;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;08&nbsp;20:21:36&nbsp;2014</span>
    <span class="description">CLEACH [...] cpan.org -  Fixed in 0.25 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;08&nbsp;20:21:36&nbsp;2014</span>
    <span class="description">CLEACH [...] cpan.org -  Severity Important added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;18&nbsp;19:00:41&nbsp;2014</span>
    <span class="description">CLEACH [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
