<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #34374 for perl-ldap: </title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #34374 for perl-ldap: </h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/perl-ldap/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/perl-ldap/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/perl-ldap/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/perl-ldap/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/perl-ldap">perl-ldap CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">34374</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/perl-ldap/Active/">perl-ldap</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
MFULLER [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-25226-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.34    </td>
  </tr>
  <tr id="CF-25227-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;23&nbsp;16:35:02&nbsp;2008</span>
    <span class="description">MFULLER [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have noticed odd &#40;and incorrect&#41; behavior when updating an attribute
which is not defined as multi-value.

The following example works, but it sets the attribute to the second
value. This is arbitrary. Worse, it shouldn&#39;t work because the attribute
is not defined as multi-value. 

$ldap_mesg = $ldap_conn-&gt;modify&#40;$dn,
             changes =&gt; [
                         replace =&gt; [ &#39;attr_name&#39; =&gt; [&#39;val_1&#39;, &#39;val2&#39;] ]
                        ]&#41;;

However, if you add a third value it will error with code 65. This is
the expected behavior. But, it should do that with two values.

This is using Sun Directory Server v5. I&#39;m running Net::LDAP .34 on Win
XP Pro.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;23&nbsp;18:07:27&nbsp;2008</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Perl-LDAP Mailing List &lt;perl-ldap [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34374] incorrect behavior when updating an attribute</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 23 Mar 2008 17:07:05 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-perl-ldap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mar 23, 2008, at 3:35 PM, Mark Fuller via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have noticed odd &#40;and incorrect&#41; behavior when updating an attribute
&gt; which is not defined as multi-value.
&gt;
&gt; The following example works, but it sets the attribute to the second
&gt; value. This is arbitrary. Worse, it shouldn&#39;t work because the  
&gt; attribute
&gt; is not defined as multi-value.
&gt;
&gt; $ldap_mesg = $ldap_conn-&gt;modify&#40;$dn,
&gt;              changes =&gt; [
&gt;                          replace =&gt; [ &#39;attr_name&#39; =&gt; [&#39;val_1&#39;,  
&gt; &#39;val2&#39;] ]
&gt;                         ]&#41;;
&gt;
&gt; However, if you add a third value it will error with code 65. This is
&gt; the expected behavior. But, it should do that with two values.
&gt;
&gt; This is using Sun Directory Server v5. I&#39;m running Net::LDAP .34 on  
&gt; Win
&gt; XP Pro.
</div>
what do you see, in both cases, if you turn on debugging with  
$ldap_conn-&gt;debug&#40;15&#41;; just before you call to modify ?

Graham.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;23&nbsp;18:07:28&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;23&nbsp;22:37:19&nbsp;2008</span>
    <span class="description">MFULLER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Mar 23 18:07:27 2008, gbarr@pobox.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; what do you see, in both cases, if you turn on debugging with  
&gt; $ldap_conn-&gt;debug&#40;15&#41;; just before you call to modify ?
</div>
Below is the debug output. One is with two attributes &#40;which updates the
single-value attribute with the second value&#41;. One is with three
attributes &#40;which generates the expected error 65&#41;.

With two values:
================================================================

Net::LDAP=HASH&#40;0x1b9f678&#41; sending:

30 6A 02 01 02 66 65 04 37 78 78 78 67 75 69 64 0j...fe.7xxxguid
3D 78 78 78 78 78 78 2C 6F 75 3D 70 65 6F 70 6C =xxxxxx,ou=peopl
65 2C 6F 75 3D 69 6E 74 72 61 6E 65 74 2C 64 63 e,ou=intranet,dc
3D 78 78 78 78 78 78 78 78 2C 64 63 3D 63 6F 6D =xxxxxxxx,dc=com
30 2A 30 28 0A 01 02 30 23 04 17 78 78 78 57 6F 0*0&#40;...0#..xxxWo
72 6B 50 72 6F 66 69 6C 65 57 6F 72 6B 50 6C 61 rkProfileWorkPla
63 65 31 08 04 01 78 04 03 79 79 79 __ __ __ __ ce1...x..yyy

0000  106: SEQUENCE {
0002    1:   INTEGER = 2
0005  101:   [APPLICATION 6] {
0007   55:     STRING =
&#39;xxxguid=xxxxxx,ou=people,ou=intranet,dc=xxxxxxxx,dc=com&#39;
0040   42:     SEQUENCE {
0042   40:       SEQUENCE {
0044    1:         ENUM = 2
0047   35:         SEQUENCE {
0049   23:           STRING = &#39;xxxWorkProfileWorkPlace&#39;
0062    8:           SET {
0064    1:             STRING = &#39;x&#39;
0067    3:             STRING = &#39;yyy&#39;
006C     :           }
006C     :         }
006C     :       }
006C     :     }
006C     :   }
006C     : }
Net::LDAP=HASH&#40;0x1b9f678&#41; received:

30 0C 02 01 02 67 07 0A 01 00 04 00 04 00 __ __ 0....g........

0000   12: SEQUENCE {
0002    1:   INTEGER = 2
0005    7:   [APPLICATION 7] {
0007    1:     ENUM = 0
000A    0:     STRING = &#39;&#39;
000C    0:     STRING = &#39;&#39;
000E     :   }
000E     : }


With three values:
================================================================

Net::LDAP=HASH&#40;0x1b9f678&#41; sending:

30 6F 02 01 02 66 6A 04 37 78 78 78 67 75 69 64 0o...fj.7xxxguid
3D 78 78 78 78 78 70 2C 6F 75 3D 70 65 6F 70 6C =xxxxxx,ou=peopl
65 2C 6F 75 3D 69 6E 74 72 61 6E 65 74 2C 64 63 e,ou=intranet,dc
3D 78 78 78 78 78 78 78 78 2C 64 63 3D 63 6F 6D =xxxxxxxx,dc=com
30 2F 30 2D 0A 01 02 30 28 04 17 78 78 78 57 6F 0/0-...0&#40;..xxxWo
72 6B 50 72 6F 66 69 6C 65 57 6F 72 6B 50 6C 61 rkProfileWorkPla
63 65 31 0D 04 01 78 04 03 79 79 79 04 03 78 78 ce1...x..yyy..xx
78 __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ x

0000  111: SEQUENCE {
0002    1:   INTEGER = 2
0005  106:   [APPLICATION 6] {
0007   55:     STRING =
&#39;xxxguid=xxxxxx,ou=people,ou=intranet,dc=xxxxxxxx,dc=com
&#39;
0040   47:     SEQUENCE {
0042   45:       SEQUENCE {
0044    1:         ENUM = 2
0047   40:         SEQUENCE {
0049   23:           STRING = &#39;xxxWorkProfileWorkPlace&#39;
0062   13:           SET {
0064    1:             STRING = &#39;x&#39;
0067    3:             STRING = &#39;yyy&#39;
006C    3:             STRING = &#39;xxx&#39;
0071     :           }
0071     :         }
0071     :       }
0071     :     }
0071     :   }
0071     : }
Net::LDAP=HASH&#40;0x1b9f678&#41; received:

30 0C 02 01 02 67 07 0A 01 41 04 00 04 00 __ __ 0....g...A....

0000   12: SEQUENCE {
0002    1:   INTEGER = 2
0005    7:   [APPLICATION 7] {
0007    1:     ENUM = 65
000A    0:     STRING = &#39;&#39;
000C    0:     STRING = &#39;&#39;
000E     :   }
000E     : }
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;24&nbsp;05:55:10&nbsp;2008</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34374] </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 24 Mar 2008 04:54:36 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-perl-ldap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mar 23, 2008, at 9:37 PM, Mark Fuller via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;        Queue: perl-ldap
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34374">http://rt.cpan.org/Ticket/Display.html?id=34374</a></span> &gt;
&gt;
&gt; On Sun Mar 23 18:07:27 2008, gbarr@pobox.com wrote:
<div class="message-stanza open">&gt;&gt; what do you see, in both cases, if you turn on debugging with
&gt;&gt; $ldap_conn-&gt;debug&#40;15&#41;; just before you call to modify ?
</div>&gt;
&gt; Below is the debug output. One is with two attributes &#40;which  
&gt; updates the
&gt; single-value attribute with the second value&#41;. One is with three
&gt; attributes &#40;which generates the expected error 65&#41;.
</div>
Which tells me that Net::LDAP is doing the right thing. The packets  
it is sending look formed ok and the result you get is what the  
server is returning. So the issue must be on the server side.

Graham.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;24&nbsp;13:35:03&nbsp;2008</span>
    <span class="description">MFULLER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks Graham. Sorry for taking your time. I am able to recreate the
behavior using ldapmodify. 

I&#39;m changing the status to resolved.

Mark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;24&nbsp;13:35:04&nbsp;2008</span>
    <span class="description">MFULLER [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
