<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #40512 for File-Path: recent breakage on VMS</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #40512 for File-Path: recent breakage on VMS</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=File-Path">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=File-Path">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=File-Path">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=File-Path">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/File-Path">File-Path CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">40512</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=File-Path">File-Path</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">dland [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
cberry [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-43556-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.06_06    </td>
  </tr>
  <tr id="CF-43557-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




fp_vms.patch.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/526632/263484/fp_vms.patch.txt">
Thu Oct 30 09:48:45 2008 (2k) by cberry [...] cpan.org
</a>
</font></li>
</ul>


path_t.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/529184/264928/path_t.txt">
Wed Nov 05 08:21:33 2008 (335b) by craigberry [...] mac.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=40512">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-526349" href="/Public/Bug/Display.html?id=40512#txn-526349">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;29&nbsp;20:13:39&nbsp;2008</span>
    <span class="description">cberry [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> recent breakage on VMS</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/526349/263342/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/263342">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m seeing the unpleasantness below with 2.06_06 in blead@34629 built with HP C V7.3-009 
on OpenVMS Alpha V8.3.  No debugging time yet but I&#39;ll try to sort this out &#40;after 
downloading 2.06_07&#41; in the next couple of days and hopefully come up with a patch.

1..114
ok 1 - use Cwd;
ok 2 - use File::Path;
ok 3 - use File::Spec::Functions;
ok 4 - mkdir parent dir 0111
ok 5 - mkdir child dir 0111
ok 6 - mhx does not exist 0111
ok 7 - mkdir parent dir 0777
ok 8 - mkdir child dir 0777
ok 9 - mhx does not exist 0777
ok 10 - created list of directories
ok 11 - skipped making existing directory
ok 12 - rmtree&#39;ed a file
ok 13 - Can&#39;t create a directory named &#39;&#39;
not ok 14 - baseline 0
#   Failed test &#39;baseline 0&#39;
#   at [-.lib.file]path.t line 101.
#     &#39;0&#39;
#         &gt;
#     &#39;0&#39;
ok 15 - first after 0
ok 16 - second after 1
not ok 17 - ARGV 0
#   Failed test &#39;ARGV 0&#39;
#   at [-.lib.file]path.t line 118.
#     &#39;0&#39;
#         &gt;
#     &#39;0&#39;
ok 18 - third after 0
ok 19 - fourth after 1
cannot chdir to D0:[CRAIG.perl.t.remove.this.dir] from D0:[CRAIG.perl.t.remove]: invalid 
argument, aborting. at [-.lib.file]path.t l
ine 148
# Looks like you planned 114 tests but ran 19.
# Looks like you failed 2 tests of 19 run.
# Looks like your test exited with 1 just after 19.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-526632" href="/Public/Bug/Display.html?id=40512#txn-526632">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;30&nbsp;09:48:43&nbsp;2008</span>
    <span class="description">cberry [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [PATCH] recent breakage on VMS</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/526632/263481/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/263481">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 29 20:13:39 2008, CBERRY wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  I&#39;ll try to sort this out &#40;after downloading 2.06_07&#41; in the 
&gt; next couple of days and hopefully come up with a patch.
</div>
Patch attached against 2.06_07.  There is only one change to Path.pm, in the code that 
checks for &#34;ancestor error.&#34;  On VMS, you cannot determine that disk:[dir1.dir2] is the parent 
of disk:[dir1.dir2.dir3] by comparing the two up to the full length of the former because the 
&#39;]&#39; in the first obviously does not match the &#39;.&#39; in the second.  

So I subtract one from the comparison length on  VMS only.  Then I skip the check if the 
length goes to zero since that&#39;s what we&#39;ll get if someone passes a one-character dir name 
like &#39;0&#39; which some of tests do.  I&#39;m not sure why you would want to preserve &#39;0&#39; in the list to 
be passed to _rmtree, but that&#39;s what it does and I didn&#39;t change it.

The other main problem was that a couple of the tests create an empty directory, count the 
number of files in it by iterating over readdir&#40;&#41;, and then fail unless the resulting count is 
greater than zero.  That sort of defies the common sense definition of &#34;empty&#34; and in fact I 
do get exactly zero files in an empty directory, so the tests were failing.  I made them pass 
by creating one file, but I don&#39;t really know if that&#39;s right since I don&#39;t know what the intent is 
here.

Finally, I skip tests that depend on symlinks when symlinks are not available 
&#40;$Config[d_symlink} not set&#41;.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/526632/263484/fp_vms.patch.txt">Download fp_vms.patch.txt</a><br />
<span class="downloadcontenttype">text/plain 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- Path.pm;-0	Wed Oct 29 09:39:48 2008
+++ Path.pm	Thu Oct 30 07:55:17 2008
@@ -169,7 +169,11 @@ sub rmtree {
         # need to fixup case and map \ to / on Windows
         my $ortho_root = $^O eq &#39;MSWin32&#39; ? _slash_lc&#40;$p&#41;          : $p;
         my $ortho_cwd  = $^O eq &#39;MSWin32&#39; ? _slash_lc&#40;$arg-&gt;{cwd}&#41; : $arg-&gt;{cwd};
-        if &#40;$ortho_root eq substr&#40;$ortho_cwd, 0, length&#40;$ortho_root&#41;&#41;&#41; {
+        my $ortho_root_length = length&#40;$ortho_root&#41;;
+        $ortho_root_length-- if $^O eq &#39;VMS&#39;; # don&#39;t compare &#39;.&#39; with &#39;]&#39;
+        if &#40;$ortho_root_length
+            &#38;&#38; &#40;substr&#40;$ortho_root, 0, $ortho_root_length&#41; 
+             eq substr&#40;$ortho_cwd, 0, $ortho_root_length&#41;&#41;&#41; {
             local $! = 0;
             _error&#40;$arg, &#34;cannot remove path when cwd is $arg-&gt;{cwd}&#34;, $p&#41;;
             next;
--- t/path.t;-0	Mon Oct 20 16:36:11 2008
+++ t/path.t	Thu Oct 30 07:43:57 2008
@@ -3,6 +3,7 @@
 use strict;
 
 use Test::More tests =&gt; 114;
+use Config;
 
 BEGIN {
     use_ok&#40;&#39;Cwd&#39;&#41;;
@@ -97,6 +98,8 @@ sub count {
 {
     mkdir &#39;solo&#39;, 0755;
     chdir &#39;solo&#39;;
+    open my $f, &#39;&gt;&#39;, &#39;foo.dat&#39;;
+    close $f;
     my $before = count&#40;curdir&#40;&#41;&#41;;
     cmp_ok&#40;$before, &#39;&gt;&#39;, 0, &#34;baseline $before&#34;&#41;;
 
@@ -114,6 +117,8 @@ sub count {
 {
     mkdir &#39;solo&#39;, 0755;
     chdir &#39;solo&#39;;
+    open my $f, &#39;&gt;&#39;, &#39;foo.dat&#39;;
+    close $f;
     my $before = count&#40;curdir&#40;&#41;&#41;;
     cmp_ok&#40;$before, &#39;&gt;&#39;, 0, &#34;ARGV $before&#34;&#41;;
     {
@@ -301,6 +306,7 @@ SKIP: {
     # test bug <span class="clickylink"><a target="new" rel="nofollow" href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=487319">http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=487319</a></span>
     skip &#34;Don&#39;t need Force_Writeable semantics on $^O&#34;, 4
         if grep {$^O eq $_} qw&#40;amigaos dos epoc MSWin32 MacOS os2&#41;;
+    skip &#34;Symlinks not available&#34;, 4 unless $Config{&#39;d_symlink&#39;};
     $dir  = &#39;bug487319&#39;;
     $dir2 = &#39;bug487319-symlink&#39;;
     @created = make_path&#40;$dir, {mask =&gt; 0700}&#41;;
@@ -358,6 +364,7 @@ my $extra =  catdir&#40;curdir&#40;&#41;, qw&#40;EXTRA 1
 SKIP: {
     skip &#34;extra scenarios not set up, see eg/setup-extra-tests&#34;, 14
         unless -e $extra;
+    skip &#34;Symlinks not available&#34;, 14 unless $Config{&#39;d_symlink&#39;};
 
     my &#40;$list, $err&#41;;
     $dir = catdir&#40; &#39;EXTRA&#39;, &#39;1&#39; &#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-529005" href="/Public/Bug/Display.html?id=40512#txn-529005">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;04&nbsp;19:16:29&nbsp;2008</span>
    <span class="description">dland [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-529006" href="/Public/Bug/Display.html?id=40512#txn-529006">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;04&nbsp;19:16:33&nbsp;2008</span>
    <span class="description">dland [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-529007" href="/Public/Bug/Display.html?id=40512#txn-529007">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;04&nbsp;19:17:37&nbsp;2008</span>
    <span class="description">dland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/529007/264842/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/264842">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 702b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Oct 30 09:48:43 2008, CBERRY wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Oct 29 20:13:39 2008, CBERRY wrote:
<div class="message-stanza open">&gt; &gt;  I&#39;ll try to sort this out &#40;after downloading 2.06_07&#41; in the
&gt; &gt; next couple of days and hopefully come up with a patch.
</div>&gt; 
&gt; Patch attached against 2.06_07.  There is only one change to Path.pm,
&gt; in the code that
&gt; checks for &#34;ancestor error.&#34;  On VMS, you cannot determine that
&gt; disk:[dir1.dir2] is the parent
&gt; of disk:[dir1.dir2.dir3] by comparing the two up to the full length of
&gt; the former because the
&gt; &#39;]&#39; in the first obviously does not match the &#39;.&#39; in the second.
</div>
Looks good. I&#39;ve folded this into my repo and I&#39;ve uploaded 2.06_08. If
all goes well, this will soon become 2.07.

Thanks,
David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-529184" href="/Public/Bug/Display.html?id=40512#txn-529184">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;05&nbsp;08:21:33&nbsp;2008</span>
    <span class="description">craigberry [...] mac.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> cberry [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #40512] recent breakage on VMS</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 05 Nov 2008 07:21:18 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-File-Path [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Craig A. Berry&#34; &lt;craigberry [...] mac.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/529184/264927/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/264927">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 588b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Nov 4, 2008, at 6:17 PM, David Landgren via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Looks good. I&#39;ve folded this into my repo and I&#39;ve uploaded 2.06_08.  
&gt; If
&gt; all goes well, this will soon become 2.07.
</div>

Thanks, that had the desired effect.  There was one new test failure  
in 2.06_08 that&#39;s easily fixed &#40;see attached&#41;.  We no longer count  
differently from everybody else when removing a directory in safe mode.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">________________________________________
Craig A. Berry
mailto:craigberry@mac.com

&#34;... getting out of a sonnet is much more
  difficult than getting in.&#34;
                  Brad Leithauser
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/529184/264928/path_t.txt">Download path_t.txt</a><br />
<span class="downloadcontenttype">text/plain 335b</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-530738" href="/Public/Bug/Display.html?id=40512#txn-530738">#</a>      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;09&nbsp;07:47:08&nbsp;2008</span>
    <span class="description">dland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/530738/265765/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/265765">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 491b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Nov 05 08:21:33 2008, craigberry@mac.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; On Nov 4, 2008, at 6:17 PM, David Landgren via RT wrote:
<div class="message-stanza open">&gt; &gt;
&gt; &gt; Looks good. I&#39;ve folded this into my repo and I&#39;ve uploaded 2.06_08.  
&gt; &gt; If
&gt; &gt; all goes well, this will soon become 2.07.
</div>&gt; 
&gt; 
&gt; Thanks, that had the desired effect.  There was one new test failure  
&gt; in 2.06_08 that&#39;s easily fixed &#40;see attached&#41;.  We no longer count  
&gt; differently from everybody else when removing a directory in safe mode.
</div>
Applied, thanks.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-531182" href="/Public/Bug/Display.html?id=40512#txn-531182">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;10&nbsp;11:26:37&nbsp;2008</span>
    <span class="description">dland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/531182/266163/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/266163">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 29b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed in 2.07.

Thanks,
David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-531184" href="/Public/Bug/Display.html?id=40512#txn-531184">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;10&nbsp;11:26:39&nbsp;2008</span>
    <span class="description">dland [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-533674" href="/Public/Bug/Display.html?id=40512#txn-533674">#</a>      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;16&nbsp;11:20:28&nbsp;2008</span>
    <span class="description">cberry [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/533674/267618/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/267618">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 844b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Nov 10 11:26:37 2008, DLAND wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Fixed in 2.07.
</div>
Sigh.  I goofed.  That last little patch here:

<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Attachment/529184/264928/path_t.txt">http://rt.cpan.org/Ticket/Attachment/529184/264928/path_t.txt</a></span>

needs to be reverted.  It turns out I was testing with a privileged account &#40;bad me&#41; so I was 
actually able to delete a directory in safe mode.  The normal behavior on VMS is that even the 
owner cannot delete a directory without explicitly adding delete permission &#40;which is off by 
default&#41;.  In rmtree&#39;s safe mode, we preserve this behavior, but without safe mode we do the 
unixy thing and do whatever it takes to complete the deletion.

Sorry for the churn.  This only affects a test and not anything that gets installed, so I don&#39;t 
think it merits a release on its own.  It&#39;ll probably confuse a few people having 5.8.9 ship that 
way but it won&#39;t do any real harm.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-533675" href="/Public/Bug/Display.html?id=40512#txn-533675">#</a>      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;16&nbsp;11:20:30&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1511817" href="/Public/Bug/Display.html?id=40512#txn-1511817">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;26&nbsp;12:04:13&nbsp;2015</span>
    <span class="description">RICHE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1511817/806129/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/806129">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 59b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Apparently was not originally an issue according to the OP.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1511820" href="/Public/Bug/Display.html?id=40512#txn-1511820">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;26&nbsp;12:04:14&nbsp;2015</span>
    <span class="description">RICHE [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.608639</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
