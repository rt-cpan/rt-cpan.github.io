<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #96827 for XML-LibXML: test style-trailing-space.t fails due to extra space in dynamically generated XS code comment line</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #96827 for XML-LibXML: test style-trailing-space.t fails due to extra space in dynamically generated XS code comment line</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=XML-LibXML">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=XML-LibXML">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=XML-LibXML">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=XML-LibXML">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/XML-LibXML">XML-LibXML CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">96827</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=XML-LibXML">XML-LibXML</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jimhallsun [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-37350-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-37351-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=96827">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1381059" href="/Public/Bug/Display.html?id=96827#txn-1381059">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;29&nbsp;21:38:50&nbsp;2014</span>
    <span class="description">jimhallsun [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> test style-trailing-space.t fails due to extra space in dynamically generated XS code comment line</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 29 Jun 2014 21:38:34 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-LibXML [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> James Hall &lt;jimhallsun [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1381059/733266/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/733266">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Decided to install Test::TrailingSpace to take advantage of running style-trailing-space.t and see what the benefit is. But it seems pretty clear that no one should be able to successfully run this test because it seems the two dynamically generated .c files:

- Devel.c
- LibXML.c

Have a line with a trailing character:

/*
 * This file was generated automatically by ExtUtils::ParseXS version 2.21 from the
 * contents of Devel.xs. Do not edit this file, edit Devel.xs instead.
 *
 *  ANY CHANGES MADE HERE WILL BE LOST!        &lt;â€”â€” this line has a trailing space ####
 *
 */

Here are some work arounds and/or possible paths to pursue:

#1 - vim the two files prior to testing and remove the trailing space. This is what I choose but it will break automation because these files are dynamically generated.

#2 - Edit t/style-trailing-space.t and change the regular expression to skip these two dynamically generated files. Example change

filename_regex =&gt; qr/&#40;?:\.&#40;?:t|pm|pl|xs|c|h|txt|pod|PL&#41;|README|Changes|TODO|LICENSE&#41;\z/,

to

filename_regex =&gt; qr/&#40;?:\.&#40;?:t|pm|pl|xs|h|txt|pod|PL&#41;|README|Changes|TODO|LICENSE&#41;\z/,

#3 - I guess you could file a bug against ExtUtils::ParseXS, but I donâ€™t see the point. Why do you need to eliminate trailing spaces on a C comment line? You may want to consider removing this test file.
 
Here is the error report:

t/style-trailing-space.t .................. # Found trailing space in file &#39;Devel.c&#39;
# Found trailing space in file &#39;LibXML.c&#39;
t/style-trailing-space.t .................. 1/1 
#   Failed test &#39;No trailing space was found.&#39;
#   at t/style-trailing-space.t line 28.
#          got: &#39;2&#39;
#     expected: &#39;0&#39;
# Looks like you failed 1 test of 1.
t/style-trailing-space.t .................. Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/1 subtests 

Test Summary Report
-------------------
t/style-trailing-space.t                &#40;Wstat: 256 Tests: 1 Failed: 1&#41;
  Failed test:  1
  Non-zero exit status: 1
Files=70, Tests=2559, 10 wallclock secs &#40; 0.56 usr  0.27 sys +  6.78 cusr  1.61 csys =  9.22 CPU&#41;
Result: FAIL
Failed 1/70 test programs. 1/2559 subtests failed.
*** Error code 1
make: Fatal error: Command failed for target `test_dynamic&#39;
  SHLOMIF/XML-LibXML-2.0116.tar.gz
  make test -- NOT OK
//hint// to see the cpan-testers results for installing this module, try:
  reports SHLOMIF/XML-LibXML-2.0116.tar.gz
Failed during this command:
 SHLOMIF/XML-LibXML-2.0116.tar.gz             : make_test NO
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1381062" href="/Public/Bug/Display.html?id=96827#txn-1381062">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;29&nbsp;22:03:29&nbsp;2014</span>
    <span class="description">jimhallsun [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [rt.cpan.org #96827] Re: test read-write.t fails for some reason</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 29 Jun 2014 22:03:15 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-IO-Pty-Easy [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> James Hall &lt;jimhallsun [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1381062/733269/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/733269">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 185b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
FYI â€”

I commented out line 24:

#    $pty-&gt;write&#40;&#39;a&#39;x&#40;1024*1024&#41;&#41;;

And the test runs successfully. Wondering if there is another way to write this? Everything else worksâ€¦.

JIM
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1382424" href="/Public/Bug/Display.html?id=96827#txn-1382424">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;03&nbsp;16:00:40&nbsp;2014</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1382424/734015/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/734015">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jun 29 21:38:50 2014, jimhallsun@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; Decided to install Test::TrailingSpace to take advantage of running
&gt; style-trailing-space.t and see what the benefit is. But it seems
&gt; pretty clear that no one should be able to successfully run this test
&gt; because it seems the two dynamically generated .c files:
&gt; 
&gt; - Devel.c
&gt; - LibXML.c
&gt; 
&gt; Have a line with a trailing character:
&gt; 
&gt; /*
&gt;  * This file was generated automatically by ExtUtils::ParseXS version
&gt; 2.21 from the
&gt;  * contents of Devel.xs. Do not edit this file, edit Devel.xs instead.
&gt;  *
</div>
There&#39;s already ExtUtils::ParseXS version 3.24 - please upgrade and try again. It works fine here &#40;perl-5.20.0&#41;.

Regards,

-- Shlomi Fish

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  *  ANY CHANGES MADE HERE WILL BE LOST!        &lt;â€”â€” this line has a
&gt; trailing space ####
&gt;  *
&gt;  */
&gt; 
&gt; Here are some work arounds and/or possible paths to pursue:
&gt; 
&gt; #1 - vim the two files prior to testing and remove the trailing space.
&gt; This is what I choose but it will break automation because these files
&gt; are dynamically generated.
&gt; 
&gt; #2 - Edit t/style-trailing-space.t and change the regular expression
&gt; to skip these two dynamically generated files. Example change
&gt; 
&gt; filename_regex =&gt;
&gt; qr/&#40;?:\.&#40;?:t|pm|pl|xs|c|h|txt|pod|PL&#41;|README|Changes|TODO|LICENSE&#41;\z/,
&gt; 
&gt; to
&gt; 
&gt; filename_regex =&gt;
&gt; qr/&#40;?:\.&#40;?:t|pm|pl|xs|h|txt|pod|PL&#41;|README|Changes|TODO|LICENSE&#41;\z/,
&gt; 
&gt; #3 - I guess you could file a bug against ExtUtils::ParseXS, but I
&gt; donâ€™t see the point. Why do you need to eliminate trailing spaces on a
&gt; C comment line? You may want to consider removing this test file.
&gt; 
&gt; Here is the error report:
&gt; 
&gt; t/style-trailing-space.t .................. # Found trailing space in
&gt; file &#39;Devel.c&#39;
&gt; # Found trailing space in file &#39;LibXML.c&#39;
&gt;  t/style-trailing-space.t .................. 1/1
&gt; #   Failed test &#39;No trailing space was found.&#39;
&gt; #   at t/style-trailing-space.t line 28.
&gt; #          got: &#39;2&#39;
&gt; #     expected: &#39;0&#39;
&gt; # Looks like you failed 1 test of 1.
&gt; t/style-trailing-space.t .................. Dubious, test returned 1
&gt; &#40;wstat 256, 0x100&#41;
&gt;  Failed 1/1 subtests
&gt; 
&gt; Test Summary Report
&gt; -------------------
&gt; t/style-trailing-space.t                &#40;Wstat: 256 Tests: 1 Failed:
&gt; 1&#41;
&gt;   Failed test:  1
&gt;   Non-zero exit status: 1
&gt; Files=70, Tests=2559, 10 wallclock secs &#40; 0.56 usr  0.27 sys +  6.78
&gt; cusr  1.61 csys =  9.22 CPU&#41;
&gt; Result: FAIL
&gt; Failed 1/70 test programs. 1/2559 subtests failed.
&gt; *** Error code 1
&gt; make: Fatal error: Command failed for target `test_dynamic&#39;
&gt;   SHLOMIF/XML-LibXML-2.0116.tar.gz
&gt;   make test -- NOT OK
&gt; //hint// to see the cpan-testers results for installing this module,
&gt; try:
&gt;   reports SHLOMIF/XML-LibXML-2.0116.tar.gz
&gt; Failed during this command:
&gt;  SHLOMIF/XML-LibXML-2.0116.tar.gz             : make_test NO
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1382425" href="/Public/Bug/Display.html?id=96827#txn-1382425">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;03&nbsp;16:00:41&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1382428" href="/Public/Bug/Display.html?id=96827#txn-1382428">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;03&nbsp;16:00:42&nbsp;2014</span>
    <span class="description">SHLOMIF [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1382671" href="/Public/Bug/Display.html?id=96827#txn-1382671">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;04&nbsp;13:02:30&nbsp;2014</span>
    <span class="description">jimhallsun [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #96827] test style-trailing-space.t fails due to extra space in dynamically generated XS code comment line</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 4 Jul 2014 13:02:17 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-LibXML [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jim Hall &lt;jimhallsun [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1382671/734160/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/734160">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">That did it! Thanks,

JIM


On Thu, Jul 3, 2014 at 4:00 PM, Shlomi Fish via RT &lt;
bug-XML-LibXML@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=96827">https://rt.cpan.org/Ticket/Display.html?id=96827</a></span> &gt;
&gt;
&gt; On Sun Jun 29 21:38:50 2014, jimhallsun@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; Decided to install Test::TrailingSpace to take advantage of running
&gt; &gt; style-trailing-space.t and see what the benefit is. But it seems
&gt; &gt; pretty clear that no one should be able to successfully run this test
&gt; &gt; because it seems the two dynamically generated .c files:
&gt; &gt;
&gt; &gt; - Devel.c
&gt; &gt; - LibXML.c
&gt; &gt;
&gt; &gt; Have a line with a trailing character:
&gt; &gt;
&gt; &gt; /*
&gt; &gt;  * This file was generated automatically by ExtUtils::ParseXS version
&gt; &gt; 2.21 from the
&gt; &gt;  * contents of Devel.xs. Do not edit this file, edit Devel.xs instead.
&gt; &gt;  *
</div>&gt;
&gt; There&#39;s already ExtUtils::ParseXS version 3.24 - please upgrade and try
&gt; again. It works fine here &#40;perl-5.20.0&#41;.
&gt;
&gt; Regards,
&gt;
&gt; -- Shlomi Fish
&gt;
<div class="message-stanza open">&gt; &gt;  *  ANY CHANGES MADE HERE WILL BE LOST!        &lt;â€”â€” this line has a
&gt; &gt; trailing space ####
&gt; &gt;  *
&gt; &gt;  */
&gt; &gt;
&gt; &gt; Here are some work arounds and/or possible paths to pursue:
&gt; &gt;
&gt; &gt; #1 - vim the two files prior to testing and remove the trailing space.
&gt; &gt; This is what I choose but it will break automation because these files
&gt; &gt; are dynamically generated.
&gt; &gt;
&gt; &gt; #2 - Edit t/style-trailing-space.t and change the regular expression
&gt; &gt; to skip these two dynamically generated files. Example change
&gt; &gt;
&gt; &gt; filename_regex =&gt;
&gt; &gt; qr/&#40;?:\.&#40;?:t|pm|pl|xs|c|h|txt|pod|PL&#41;|README|Changes|TODO|LICENSE&#41;\z/,
&gt; &gt;
&gt; &gt; to
&gt; &gt;
&gt; &gt; filename_regex =&gt;
&gt; &gt; qr/&#40;?:\.&#40;?:t|pm|pl|xs|h|txt|pod|PL&#41;|README|Changes|TODO|LICENSE&#41;\z/,
&gt; &gt;
&gt; &gt; #3 - I guess you could file a bug against ExtUtils::ParseXS, but I
&gt; &gt; donâ€™t see the point. Why do you need to eliminate trailing spaces on a
&gt; &gt; C comment line? You may want to consider removing this test file.
&gt; &gt;
&gt; &gt; Here is the error report:
&gt; &gt;
&gt; &gt; t/style-trailing-space.t .................. # Found trailing space in
&gt; &gt; file &#39;Devel.c&#39;
&gt; &gt; # Found trailing space in file &#39;LibXML.c&#39;
&gt; &gt;  t/style-trailing-space.t .................. 1/1
&gt; &gt; #   Failed test &#39;No trailing space was found.&#39;
&gt; &gt; #   at t/style-trailing-space.t line 28.
&gt; &gt; #          got: &#39;2&#39;
&gt; &gt; #     expected: &#39;0&#39;
&gt; &gt; # Looks like you failed 1 test of 1.
&gt; &gt; t/style-trailing-space.t .................. Dubious, test returned 1
&gt; &gt; &#40;wstat 256, 0x100&#41;
&gt; &gt;  Failed 1/1 subtests
&gt; &gt;
&gt; &gt; Test Summary Report
&gt; &gt; -------------------
&gt; &gt; t/style-trailing-space.t                &#40;Wstat: 256 Tests: 1 Failed:
&gt; &gt; 1&#41;
&gt; &gt;   Failed test:  1
&gt; &gt;   Non-zero exit status: 1
&gt; &gt; Files=70, Tests=2559, 10 wallclock secs &#40; 0.56 usr  0.27 sys +  6.78
&gt; &gt; cusr  1.61 csys =  9.22 CPU&#41;
&gt; &gt; Result: FAIL
&gt; &gt; Failed 1/70 test programs. 1/2559 subtests failed.
&gt; &gt; *** Error code 1
&gt; &gt; make: Fatal error: Command failed for target `test_dynamic&#39;
&gt; &gt;   SHLOMIF/XML-LibXML-2.0116.tar.gz
&gt; &gt;   make test -- NOT OK
&gt; &gt; //hint// to see the cpan-testers results for installing this module,
&gt; &gt; try:
&gt; &gt;   reports SHLOMIF/XML-LibXML-2.0116.tar.gz
&gt; &gt; Failed during this command:
&gt; &gt;  SHLOMIF/XML-LibXML-2.0116.tar.gz             : make_test NO
</div>&gt;
&gt;
&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1382671/734161/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/734161">with headers</a>
<br />
<span class="downloadcontenttype">text/html 4.1k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.399408</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
