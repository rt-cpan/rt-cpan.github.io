<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #109852 for Audio-Nama: Segfault in t/12_nama.t with perl 5.23.3 and later</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #109852 for Audio-Nama: Segfault in t/12_nama.t with perl 5.23.3 and later</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Audio-Nama">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Audio-Nama">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Audio-Nama">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Audio-Nama">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Audio-Nama">Audio-Nama CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">109852</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Audio-Nama">Audio-Nama</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
SREZIC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
ANDK [...] cpan.org

<br />
gregoa [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-229852-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
1.204</li>
<li>
1.208</li>
</ul>
    </td>
  </tr>
  <tr id="CF-229853-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=109852">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1566908" href="/Public/Bug/Display.html?id=109852#txn-1566908">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;28&nbsp;07:17:17&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> ANDK [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Segfault in t/12_nama.t with perl 5.23.3 and later</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1566908/836442/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/836442">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 98b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">A sample fail report: <span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/fa36ad0e-800b-11e5-9fec-6407e0bfc7aa">http://www.cpantesters.org/cpan/report/fa36ad0e-800b-11e5-9fec-6407e0bfc7aa</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1618284" href="/Public/Bug/Display.html?id=109852#txn-1618284">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;16&nbsp;12:52:36&nbsp;2016</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> ANDK [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1618284/866428/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/866428">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 167b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-11-28 07:17:17, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; A sample fail report: <span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/fa36ad0e-">http://www.cpantesters.org/cpan/report/fa36ad0e-</a></span>
&gt; 800b-11e5-9fec-6407e0bfc7aa
</div>
Happens also with 1.208.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1618288" href="/Public/Bug/Display.html?id=109852#txn-1618288">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;16&nbsp;12:53:08&nbsp;2016</span>
    <span class="description">SREZIC [...] cpan.org -  Broken in 1.208 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1618891" href="/Public/Bug/Display.html?id=109852#txn-1618891">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;18&nbsp;16:35:43&nbsp;2016</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1618891/866796/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/866796">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 208b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">A git bisect on bleadperl leads to a5f48505593c7e1ca478de383e24d5cc2541f3ca which is also known as v5.23.1-199-ga5f4850 and which was dealt with in ticket <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/rt3/Ticket/Display.html?id=126633">https://rt.perl.org/rt3/Ticket/Display.html?id=126633</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1618892" href="/Public/Bug/Display.html?id=109852#txn-1618892">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;18&nbsp;16:35:43&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1640973" href="/Public/Bug/Display.html?id=109852#txn-1640973">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;22&nbsp;13:44:34&nbsp;2016</span>
    <span class="description">GANGLION [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1640973/879846/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/879846">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 358b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Apr 18 16:35:43 2016, ANDK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; A git bisect on bleadperl leads to
&gt; a5f48505593c7e1ca478de383e24d5cc2541f3ca which is also known as
&gt; v5.23.1-199-ga5f4850 and which was dealt with in ticket
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/rt3/Ticket/Display.html?id=126633">https://rt.perl.org/rt3/Ticket/Display.html?id=126633</a></span>
</div>
The referenced bug has been resolved in 5.24.0, but
Audio::Nama continues to segfault under 5.24.0.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1712198" href="/Public/Bug/Display.html?id=109852#txn-1712198">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;24&nbsp;10:23:34&nbsp;2017</span>
    <span class="description">https://me.yahoo.com/a/SoNqslVxgOc.Fob8ogAjna38Y0FZNHLEQ0s-#cb74d -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rbalint [...] ubuntu.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1712198/919888/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/919888">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jun 22 13:44:34 2016, ganglion wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Apr 18 16:35:43 2016, ANDK wrote:
<div class="message-stanza open">&gt; &gt; A git bisect on bleadperl leads to
&gt; &gt; a5f48505593c7e1ca478de383e24d5cc2541f3ca which is also known as
&gt; &gt; v5.23.1-199-ga5f4850 and which was dealt with in ticket
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/rt3/Ticket/Display.html?id=126633">https://rt.perl.org/rt3/Ticket/Display.html?id=126633</a></span>
</div>&gt; 
&gt; The referenced bug has been resolved in 5.24.0, but
&gt; Audio::Nama continues to segfault under 5.24.0.
</div>
With Niko Tyni we triaged this further in
<span class="clickylink"><a target="new" rel="nofollow" href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=839218">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=839218</a></span> .


On Fri, 30 Sep 2016 10:09:01 +0100 Chris Lamb &lt;lamby@debian.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Source: nama
&gt; Version: 1.208-1
&gt; Severity: serious
&gt; Justification: fails to build from source
&gt; User: reproducible-builds@lists.alioth.debian.org
&gt; Usertags: ftbfs
&gt; X-Debbugs-Cc: reproducible-builds@lists.alioth.debian.org
&gt; 
&gt; Dear Maintainer,
&gt; 
&gt; nama fails to build from source in unstable/amd64:
&gt; 
&gt;   [..]
&gt; 
&gt;   ok 57 - set JACK client as input
&gt;   sax: JACK source port is sax_in. Make connections manually.
&gt;   
&gt;   Track sax: source set to JACK manual port sax_in
&gt;   Failed 69/126 subtests 
&gt;   t/13_io.t ....... 
&gt;   1..1
&gt;   ok 1 - use Audio::Nama::IO;
&gt;   ok
&gt;   
&gt;   Test Summary Report
&gt;   -------------------
&gt;   t/12_nama.t   &#40;Wstat: 139 Tests: 57 Failed: 0&#41;
&gt;     Non-zero wait status: 139
&gt;     Parse errors: Bad plan.  You planned 126 tests but ran 57.
&gt;   Files=7, Tests=91,  5 wallclock secs &#40; 0.03 usr  0.01 sys +  2.29 cusr  0.43 csys =  2.76 CPU&#41;
&gt;   Result: FAIL
&gt;   Failed 1/7 test programs. 0/91 subtests failed.
&gt;   Makefile:930: recipe for target &#39;test_dynamic&#39; failed
&gt;   make[1]: *** [test_dynamic] Error 255
&gt;   make[1]: Leaving directory &#39;/home/lamby/temp/cdt.20160930095107.55GhkE5sL3.db.nama/nama-1.208&#39;
&gt;   dh_auto_test: make -j1 test TEST_VERBOSE=1 returned exit code 2
&gt;   debian/rules:4: recipe for target &#39;build&#39; failed
&gt;   make: *** [build] Error 2
&gt; 
&gt;   [..]
</div>

This looks like a problem in perl itself possibly causing random crashes
elsewhere, too.

Reproduction with the perl-debug package shows the internal assertion:

sudo apt-get install perl-debug
sudo apt-get build-dep nama
apt source nama
cd nama-*
dpkg-buildpackage
...
ok 57 - set JACK client as input
sax: JACK source port is sax_in. Make connections manually.

Track sax: source set to JACK manual port sax_in
Failed 69/126 subtests
t/13_io.t .......
1..1
ok 1 - use Audio::Nama::IO;
ok
..

PERL_DL_NONLAZY=1 PERL_USE_UNSAFE_INC=1 &#34;/usr/bin/debugperl&#34; \
&#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34; test_harness&#40;1, \
&#39;inc&#39;, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/12_nama.t

...

ok 57 - set JACK client as input
sax: JACK source port is sax_in. Make connections manually.
Track sax: source set to JACK manual port sax_in
debugperl: sv.c:6438: Perl_sv_clear: Assertion `SvTYPE&#40;sv&#41; !=
&#40;svtype&#41;SVTYPEMASK&#39; failed.
Failed 69/126 subtests
...

Address Sanitizer shows the crash with non-debug perl:

LD_PRELOAD=libasan.so.3 PERL_DL_NONLAZY=1 PERL_USE_UNSAFE_INC=1 \
&#34;/usr/bin/perl&#34; &#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;
test_harness&#40;1, &#39;inc&#39;, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/12_nama.t
...
sax: JACK source port is sax_in. Make connections manually.
Track sax: source set to JACK manual port sax_in
ASAN:DEADLYSIGNAL
=================================================================
==13877==ERROR: AddressSanitizer: SEGV on unknown address 0x00ff00000012
&#40;pc 0x559191b15fd8 bp 0x62100013f578 sp 0x7fffaa838b00 T0&#41;
    #0 0x559191b15fd7  &#40;/usr/bin/perl+0xd9fd7&#41;
    #1 0x559191b1616d in Perl_sv_unmagic &#40;/usr/bin/perl+0xda16d&#41;
    #2 0x559191b1513a in Perl_sv_clear &#40;/usr/bin/perl+0xd913a&#41;
    #3 0x559191b15a8f in Perl_sv_free2 &#40;/usr/bin/perl+0xd9a8f&#41;
    #4 0x559191b4624e in Perl_leave_scope &#40;/usr/bin/perl+0x10a24e&#41;
    #5 0x559191b49707  &#40;/usr/bin/perl+0x10d707&#41;
    #6 0x559191b4ebab in Perl_die_unwind &#40;/usr/bin/perl+0x112bab&#41;
    #7 0x559191aea518 in Perl_vcroak &#40;/usr/bin/perl+0xae518&#41;
    #8 0x559191aeafb3 in Perl_croak &#40;/usr/bin/perl+0xaefb3&#41;
    #9 0x559191b1d592 in Perl_sv_setsv_flags &#40;/usr/bin/perl+0xe1592&#41;
    #10 0x559191b08ca9 in Perl_pp_sassign &#40;/usr/bin/perl+0xccca9&#41;
    #11 0x559191b08605 in Perl_runops_standard &#40;/usr/bin/perl+0xcc605&#41;
    #12 0x559191a8e6c8 in perl_run &#40;/usr/bin/perl+0x526c8&#41;
    #13 0x559191a6787c in main &#40;/usr/bin/perl+0x2b87c&#41;
    #14 0x7fa31be502b0 in __libc_start_main
&#40;/lib/x86_64-linux-gnu/libc.so.6+0x202b0&#41;
    #15 0x559191a678b9 in _start &#40;/usr/bin/perl+0x2b8b9&#41;

AddressSanitizer can not provide additional info.
SUMMARY: AddressSanitizer: SEGV &#40;/usr/bin/perl+0xd9fd7&#41;
==13877==ABORTING
Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 69/126 subtests

...

As I read the report there have been numerous fixes after the following
commit:

 <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/Perl/perl5/commit/a5f48505593c7e1ca478de383e24d5cc2541f3ca">https://github.com/Perl/perl5/commit/a5f48505593c7e1ca478de383e24d5cc2541f3ca</a></span>

       re-implement OPpASSIGN_COMMON mechanism

 This commit almost completely replaces the current mechanism
 for detecting and handing common vars in list assignment, e.g.
 ...

It looks like not all regression are fixed after the re-implementation
and the one affecting nama is one of them.

...


On Wed, Mar 22, 2017 at 8:53 PM, Niko Tyni &lt;ntyni@debian.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue, Mar 21, 2017 at 04:05:43PM +0100, Balint Reczey wrote:
</div>...
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; While I haven&#39;t made it to the bottom of this yet, I note that there&#39;s
&gt; this code in lib/Audio/Nama/Effect.pm:
&gt;
&gt;                 my $perl_version = $^V;
&gt;                 my &#40;$minor_version&#41; = $perl_version =~ /^v5\.&#40;\d+&#41;/;
&gt;                 my @new_list = grep  { $_ ne $id  } @ops_list;
&gt;                 #say &#34;new_list: @new_list&#34;;
&gt;                 if &#40;$minor_version &lt;= 14&#41;
&gt;                      {    $track-&gt;{ops}   = [ @new_list  ] }
&gt;                 else { @{ $track-&gt;{ops} } =   @new_list    }
&gt;
&gt; and if I patch that to take the &lt;= 14 code path, the segfault goes away
&gt; here and all tests pass. What&#39;s the history behind this version check?
</div>
...

On Thu, Mar 23, 2017 at 03:51:45PM +0100, Balint Reczey wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Funny story, it was added to work around a segfault in older perl:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/bolangi/nama/commit/8ecdbd5ad0b8ac67b7e4adab2ee1100fbf29aa1f">https://github.com/bolangi/nama/commit/8ecdbd5ad0b8ac67b7e4adab2ee1100fbf29aa1f</a></span>
</div>...
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The line you found looks very much like a corner case for the assignment
&gt; reimplementation.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1712219" href="/Public/Bug/Display.html?id=109852#txn-1712219">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;24&nbsp;11:28:56&nbsp;2017</span>
    <span class="description">https://me.yahoo.com/a/SoNqslVxgOc.Fob8ogAjna38Y0FZNHLEQ0s-#cb74d -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rbalint [...] ubuntu.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1712219/919899/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/919899">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 754b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Mar 24 10:23:34 2017, <span class="clickylink"><a target="new" rel="nofollow" href="https://me.yahoo.com/a/SoNqslVxgOc.Fob8ogAjna38Y0FZNHLEQ0s-#cb74d">https://me.yahoo.com/a/SoNqslVxgOc.Fob8ogAjna38Y0FZNHLEQ0s-#cb74d</a></span> wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Jun 22 13:44:34 2016, ganglion wrote:
<div class="message-stanza open">&gt; &gt; On Mon Apr 18 16:35:43 2016, ANDK wrote:
<div class="message-stanza open">&gt; &gt; &gt; A git bisect on bleadperl leads to
&gt; &gt; &gt; a5f48505593c7e1ca478de383e24d5cc2541f3ca which is also known as
&gt; &gt; &gt; v5.23.1-199-ga5f4850 and which was dealt with in ticket
&gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/rt3/Ticket/Display.html?id=126633">https://rt.perl.org/rt3/Ticket/Display.html?id=126633</a></span>
</div>&gt; &gt;
&gt; &gt; The referenced bug has been resolved in 5.24.0, but
&gt; &gt; Audio::Nama continues to segfault under 5.24.0.
</div>&gt; 
&gt; With Niko Tyni we triaged this further in
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=839218">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=839218</a></span> .
</div>
I have just reported the issue against Perl itself:
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/Public/Bug/Display.html?id=131054">https://rt.perl.org/Public/Bug/Display.html?id=131054</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1712543" href="/Public/Bug/Display.html?id=109852#txn-1712543">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;26&nbsp;05:09:28&nbsp;2017</span>
    <span class="description">SREZIC [...] cpan.org -  Reference to perl ticket #131054 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1712695" href="/Public/Bug/Display.html?id=109852#txn-1712695">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;27&nbsp;11:55:24&nbsp;2017</span>
    <span class="description">gregoa [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1712695/920184/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/920184">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 85b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span class="clickylink"><a target="new" rel="nofollow" href="https://bugs.debian.org/839218">https://bugs.debian.org/839218</a></span> contains an analysis and a workaround for this issue.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1712699" href="/Public/Bug/Display.html?id=109852#txn-1712699">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;27&nbsp;11:56:14&nbsp;2017</span>
    <span class="description">gregoa [...] cpan.org -  Cc GREGOA added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.58397</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
