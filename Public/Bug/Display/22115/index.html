<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #22115 for Module-ScanDeps: PARring Term::ReadLine includes Tk</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #22115 for Module-ScanDeps: PARring Term::ReadLine includes Tk</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Module-ScanDeps">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Module-ScanDeps">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Module-ScanDeps">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Module-ScanDeps">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Module-ScanDeps">Module-ScanDeps CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">22115</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Module-ScanDeps">Module-ScanDeps</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">smueller [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jv [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-21736-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
0.50</li>
<li>
0.51</li>
<li>
0.52</li>
<li>
0.53</li>
<li>
0.54</li>
<li>
0.55</li>
<li>
0.56</li>
<li>
0.57</li>
<li>
0.58</li>
<li>
0.59</li>
<li>
0.60</li>
<li>
0.61</li>
<li>
0.63</li>
</ul>
    </td>
  </tr>
  <tr id="CF-21737-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=22115">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250392" href="/Public/Bug/Display.html?id=22115#txn-250392">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;14:29:03&nbsp;2006</span>
    <span class="description">jv [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> PARring Term::ReadLine includes Tk</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/250392/107468/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/107468">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 197b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">When a PAR includes Term::ReadLine, it will include all Tk libs and
modules although Term::ReadLine does not &#39;use&#39; nor &#39;require&#39; any Tk.

E.g.
pp -d -o xx.par /usr/lib/perl5/5.8.8/Term/ReadLine.pm
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250400" href="/Public/Bug/Display.html?id=22115#txn-250400">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;16:00:49&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/250400/107476/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/107476">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 452b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the bug report!

In fact, this bug is in Module::ScanDeps, not in PAR. PAR uses
Module::ScanDeps to scan the code-to-be-packaged for its dependencies.
The bogus dependency of Term::ReadLine on Tk must be introduced
somewhere in Term::ReadLine.

These days, I find myself maintainer of Module::ScanDeps as well &#40;I
recall saying &#34;I&#39;ll make a release to fix this bug I found&#34;&#41;, so I&#39;ll
move the ticket into its queue if RT will let me.

Steffen
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250401" href="/Public/Bug/Display.html?id=22115#txn-250401">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;16:00:50&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250404" href="/Public/Bug/Display.html?id=22115#txn-250404">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;16:01:35&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Queue changed from PAR to Module-ScanDeps</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250405" href="/Public/Bug/Display.html?id=22115#txn-250405">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;16:01:35&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.956 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250431" href="/Public/Bug/Display.html?id=22115#txn-250431">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;16:59:26&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> audreyt [...] audreyt.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/250431/107491/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/107491">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">[Sending a CC to Audrey because I don&#39;t know whether she reads the
tickets of this queue. Audrey: What would you do in this case?]

Hi Johan,

Okay, I traced the bug. I am unsure how to fix it, though.

Term::ReadLine actually has something like &#34;Tk-compatibility code&#34; in
it. Line 369 reads:

  $count_DoOne++, Tk::DoOneEvent&#40;0&#41; until $giveup;

That line is incorrectly considered to make use of Tk. In fact,
Module::ScanDeps is rather liberal with false positives because it
discards all false positives which do not exist on the system as a
module/file. One of the heuristics, in fact around line 634 of
ScanDeps.pm reads:

        return $1 if /\b&#40;\w[\w:]*&#41;::\w+\&#40;/;

That picks up any strings of the form &#34;Foo::Bar::baz&#40;&#34; and takes
&#34;Foo::Bar&#34; as the namespace of a module to require. The crudeness of the
approach takes little from the overall scarily high success rate. Except
that if you consider code that is only executed ever if and only if that
specific module was loaded, it blows up.

I don&#39;t know how to proceed. It would be easy to add a statement akin to
&#34;if this is Term::ReadLine, I&#39;m scanning, don&#39;t pick up any Tk
dependencies!&#34;, but that&#39;s a bad hack stacked on top of another. I would
hope Audrey could chime in on this.

The only really satisfying method to do this is to rewrite
Module::ScanDeps to use PPI. But I can&#39;t do that.

I hope this clears things up a little.

Steffen
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250441" href="/Public/Bug/Display.html?id=22115#txn-250441">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;17:10:30&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.50 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250442" href="/Public/Bug/Display.html?id=22115#txn-250442">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;17:10:30&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.51 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250443" href="/Public/Bug/Display.html?id=22115#txn-250443">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;17:10:30&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.52 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250444" href="/Public/Bug/Display.html?id=22115#txn-250444">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;17:10:30&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.53 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250445" href="/Public/Bug/Display.html?id=22115#txn-250445">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;17:10:30&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.54 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250446" href="/Public/Bug/Display.html?id=22115#txn-250446">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;17:10:30&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.55 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250447" href="/Public/Bug/Display.html?id=22115#txn-250447">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;17:10:30&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.56 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250448" href="/Public/Bug/Display.html?id=22115#txn-250448">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;17:10:30&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.57 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250449" href="/Public/Bug/Display.html?id=22115#txn-250449">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;17:10:30&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.58 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250450" href="/Public/Bug/Display.html?id=22115#txn-250450">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;17:10:31&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.59 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250451" href="/Public/Bug/Display.html?id=22115#txn-250451">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;17:10:31&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.60 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250452" href="/Public/Bug/Display.html?id=22115#txn-250452">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;17:10:31&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.61 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250453" href="/Public/Bug/Display.html?id=22115#txn-250453">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;15&nbsp;17:10:31&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Broken in 0.63 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250520" href="/Public/Bug/Display.html?id=22115#txn-250520">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;16&nbsp;03:59:33&nbsp;2006</span>
    <span class="description">jv [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #22115] PARring Term::ReadLine includes Tk</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 16 Oct 2006 09:59:02 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-ScanDeps [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jv [...] cpan.org &#40;Johan Vromans&#41;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/250520/107548/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/107548">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">[Quoting Steffen Müller via RT, on October 15 2006, 16:59, in &#34;[rt.cpan.org #22115]&#34;]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;         return $1 if /\b&#40;\w[\w:]*&#41;::\w+\&#40;/;
&gt; 
&gt; That picks up any strings of the form &#34;Foo::Bar::baz&#40;&#34; and takes
&gt; &#34;Foo::Bar&#34; as the namespace of a module to require.
</div>
Why? I&#39;d say only &#39;use Foo::Bar&#39; or &#39;require Foo::Bar&#39; validates the
inclusion of module Foo::Bar. If a module uses Foo::Bar without
including it, there must be some other module that includes Foo::Bar,
otherwise we are dealing with an application that is inconsitent.

E.g.

 File Foo.pm:
  package Foo;
  use Foo::Bar;
  ...

 File Foo/Bar.pm
  package Foo::Bar;
  ...

 File Blech.pm:
  package Blech;
  use Foo;
  my $x = new Foo::Bar;
  ...

Module Blech depends on Foo, but not on Foo::Bar. It does, indirectly
via Foo, but not directly.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I don&#39;t know how to proceed. It would be easy to add a statement
&gt; akin to &#34;if this is Term::ReadLine, I&#39;m scanning, don&#39;t pick up any
&gt; Tk dependencies!&#34;, but that&#39;s a bad hack stacked on top of another.
&gt; I would hope Audrey could chime in on this.
</div>
For this particular case, I&#39;d be happy if I could override the
inclusion of Tk. Unfortunately, the command line switch -X Tk does not
have this effect. 

Either Module::ScanDeps or PAR needs a more extensive way to control
what gets included &#40;and excluded&#41; anyway. PAR.yaml, maybe?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I hope this clears things up a little.
</div>
It does, thanks for that.

BTW: Are there any known quirks with the processing of INIT blocks? I
have an app that loads a particular module and starts the main code.
When run, it show the following debugging messages:

  == &#40;module BEGIN block execute&#41;
  == &#40;module code execures&#41;
  == &#40;module INIT block executes&#41;
  ... application runs ...

However, when PARred, I get:

  == &#40;module BEGIN block execute&#41;
  == &#40;module code execures&#41;
  ... application runs ...
  == &#40;module INIT block executes&#41;

It&#39;s a big application so it is not easy to track this down. But maybe
there are some known issues that can help me finding &#40;and fixing&#41; it.

Thanks,

BTW2: &#40;Sorry, can&#39;t stop&#41; I always install modules in a private
library. But despite my CPAN::MyConfig settings PAR insists on writing
to the system perl library. Is this a Module::Install versus MakeMaker
thing? I&#39;d be willing to make an issue for it, but I&#39;d like to check
it first.

-- Johan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250522" href="/Public/Bug/Display.html?id=22115#txn-250522">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;16&nbsp;04:24:38&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> audreyt [...] audreyt.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/250522/107550/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/107550">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mo. 16. Okt. 2006, 03:59:33, JV wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [Quoting Steffen Müller via RT, on October 15 2006, 16:59, in
&gt; &#34;[rt.cpan.org #22115]&#34;]
<div class="message-stanza open">&gt; &gt;         return $1 if /\b&#40;\w[\w:]*&#41;::\w+\&#40;/;
&gt; &gt;
&gt; &gt; That picks up any strings of the form &#34;Foo::Bar::baz&#40;&#34; and takes
&gt; &gt; &#34;Foo::Bar&#34; as the namespace of a module to require.
</div>&gt; 
&gt; Why? I&#39;d say only &#39;use Foo::Bar&#39; or &#39;require Foo::Bar&#39; validates the
&gt; inclusion of module Foo::Bar. If a module uses Foo::Bar without
&gt; including it, there must be some other module that includes Foo::Bar,
&gt; otherwise we are dealing with an application that is inconsitent.
</div>
I&#39;m not going to defend Module::ScanDeps&#39; approach because neither did I
craft nor implement it. But I&#39;ll point out that you&#39;re missing something
here: Perl programmers have been very, very good at creating devices to
defeat anything that tries to parse portions of the code. How about this:

use Scary::Device;
Scary::Device-&gt;LoadPlugins&#40;qw/Scary::Device::Plugin::Foo/&#41;;

And trust me: This is just *one* of the cases relying on &#34;use&#34; and
&#34;require&#34; fails.

I think the idea behind M::SD&#39;s heuristics was laid on that foundation.
It picks up anything that might be a module and sees whether that module
exists in the library. If it does, it assumes it found a valid
dependency. It&#39;s bad that way, but users are generally much more annoyed
if a dependency is *not* picked up than if a dependency is picked up too
much. In case of Tk, however, that&#39;s a *lot* that&#39;s picked up. Again, in
parts because Tk has the weirdest auto-loading mechanisms of them all!

Adding a quick workaround to Module::ScanDeps&#39; scan_line or scan_deps
routines would be possible. I can do that within a couple of days.
Rewriting ScanDeps with a better approach is for somebody else.

[...]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Module Blech depends on Foo, but not on Foo::Bar. It does, indirectly
&gt; via Foo, but not directly.
</div>
I understand that.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; I don&#39;t know how to proceed. It would be easy to add a statement
&gt; &gt; akin to &#34;if this is Term::ReadLine, I&#39;m scanning, don&#39;t pick up any
&gt; &gt; Tk dependencies!&#34;, but that&#39;s a bad hack stacked on top of another.
&gt; &gt; I would hope Audrey could chime in on this.
</div>&gt; 
&gt; For this particular case, I&#39;d be happy if I could override the
&gt; inclusion of Tk. Unfortunately, the command line switch -X Tk does not
&gt; have this effect.
&gt; 
&gt; Either Module::ScanDeps or PAR needs a more extensive way to control
&gt; what gets included &#40;and excluded&#41; anyway. PAR.yaml, maybe?
</div>
Hmm. I was going to suggest -X Tk. Perhaps -X Tk actually excludes it
but not its dependencies &#40;which are found to be Tk::*&#41;? I just checked
it and that seems to be the case. Why? My hunch is that pp&#39;s -X excludes
a specific module *after* the scanning has taken place. That means: The
tree generated while scanning isn&#39;t pruned while scanning but a node is
removed afterwards. I agree that this is the wrong behaviour. I am
unsure how difficult it would be to implement the &#40;more&#41; correct
behaviour. For the lack of time, I can&#39;t do it now. I cannot make any
promises either.

In general, though it won&#39;t help here, you can put any series of command
line arguments into a text file and do

pp @textfile

to use it as the source for parameters if the list is too long.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; BTW: Are there any known quirks with the processing of INIT blocks? I
&gt; have an app that loads a particular module and starts the main code.
&gt; When run, it show the following debugging messages:
&gt; 
&gt;   == &#40;module BEGIN block execute&#41;
&gt;   == &#40;module code execures&#41;
&gt;   == &#40;module INIT block executes&#41;
&gt;   ... application runs ...
&gt; 
&gt; However, when PARred, I get:
&gt; 
&gt;   == &#40;module BEGIN block execute&#41;
&gt;   == &#40;module code execures&#41;
&gt;   ... application runs ...
&gt;   == &#40;module INIT block executes&#41;
&gt; 
&gt; It&#39;s a big application so it is not easy to track this down. But maybe
&gt; there are some known issues that can help me finding &#40;and fixing&#41; it.
</div>
IIRC, this is absolutely an issue. Have a look at the TODO list,
specifically the last item of the original list:
<span class="clickylink"><a target="new" rel="nofollow" href="http://par.wikia.com/wiki/DevelopmentInProgress">http://par.wikia.com/wiki/DevelopmentInProgress</a></span>

It talks about check blocks, but IIRC, that applies to INIT blocks as
well. I do not claim to understand the issue, though. You will have to
try to get Audrey involved for that.

I have been bitten by this before. I think some of the attribute modules
use check/init blocks. Good luck tracking it down!

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; BTW2: &#40;Sorry, can&#39;t stop&#41; I always install modules in a private
&gt; library. But despite my CPAN::MyConfig settings PAR insists on writing
&gt; to the system perl library. Is this a Module::Install versus MakeMaker
&gt; thing? I&#39;d be willing to make an issue for it, but I&#39;d like to check
&gt; it first.
</div>
Perhaps the Module::Install auto-install feature does that? I.e. it asks
whether it should install Module::Foo now &#40;before PAR&#41; because it&#39;s
missing for feature Bar? If you say yes to that, it&#39;s outside CPAN
because it&#39;s done by the bundled Module::Install. I think that is the issue.

Adam Kennedy has been hacking on the PAR Makefile.PL a bit to remove the
M::I auto-installation and feature stuff in favour of a sane build
process. I would hope this last problem goes away when that is released.
&#40;Still chasing him so he commits it.&#41;

Steffen
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250530" href="/Public/Bug/Display.html?id=22115#txn-250530">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;16&nbsp;05:12:51&nbsp;2006</span>
    <span class="description">jv [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #22115] PARring Term::ReadLine includes Tk</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 16 Oct 2006 11:12:22 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-ScanDeps [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jv [...] cpan.org &#40;Johan Vromans&#41;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/250530/107558/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/107558">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">[Quoting Steffen Müller via RT, on October 16 2006, 04:24, in &#34;[rt.cpan.org #22115]&#34;]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; use Scary::Device;
&gt; Scary::Device-&gt;LoadPlugins&#40;qw/Scary::Device::Plugin::Foo/&#41;;
&gt; 
&gt; And trust me: This is just *one* of the cases relying on &#34;use&#34; and
&gt; &#34;require&#34; fails.
</div>
I&#39;d say that&#39;s exactly why PAR provides a -M option.
I use such constructs myself, and I always specify the necessary
modules with -M. No pain.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I think the idea behind M::SD&#39;s heuristics was laid on that foundation.
&gt; It picks up anything that might be a module and sees whether that module
&gt; exists in the library. If it does, it assumes it found a valid
&gt; dependency.
</div>
Hmm. So if I remove Tk from the perl library, my &#39;problem&#39; would be
over? 

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; BTW: Are there any known quirks with the processing of INIT blocks? 
</div>&gt; IIRC, this is absolutely an issue. Have a look at the TODO list,
&gt; specifically the last item of the original list:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://par.wikia.com/wiki/DevelopmentInProgress">http://par.wikia.com/wiki/DevelopmentInProgress</a></span>
</div>
I see, thanks.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Perhaps the Module::Install auto-install feature does that?
</div>
I stand corrected. I retried, and all went well.

However:

    % perl -MCPAN -e &#34;install qw&#40;PAR&#41;&#34;
    CPAN: Storable loaded ok
    Going to read /home/jv/.cpan/Metadata
      Database was generated on Sun, 01 Oct 2006 09:40:30 GMT
    Running install for module PAR
    Running make for S/SM/SMUELLER/PAR-0.954.tar.gz
    CPAN: LWP::UserAgent loaded ok
    Fetching with LWP:
      ftp://ftp.squirrel.nl/pub/CPAN/authors/id/S/SM/SMUELLER/PAR-0.954.tar.gz
    LWP failed with code[404] message[File &#39;PAR-0.954.tar.gz&#39; not found]
    ...

Someone thinks 0.954 is most recent &#40;but it is not on CPAN&#41;. 0.956 is
on CPAN, but not in the index? Puzzled...

Thanks for your time, patience and nice work,

       Johan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250575" href="/Public/Bug/Display.html?id=22115#txn-250575">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;16&nbsp;06:53:06&nbsp;2006</span>
    <span class="description">jv [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #22115] PARring Term::ReadLine includes Tk</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 16 Oct 2006 12:51:56 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-ScanDeps [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jv [...] cpan.org &#40;Johan Vromans&#41;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/250575/107570/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/107570">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 618b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">[Quoting Steffen Müller via RT, on October 16 2006, 04:24, in &#34;[rt.cpan.org #22115]&#34;]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hmm. I was going to suggest -X Tk. Perhaps -X Tk actually excludes it
&gt; but not its dependencies &#40;which are found to be Tk::*&#41;? I just checked
&gt; it and that seems to be the case. Why? My hunch is that pp&#39;s -X excludes
&gt; a specific module *after* the scanning has taken place. That means: The
&gt; tree generated while scanning isn&#39;t pruned while scanning but a node is
&gt; removed afterwards.
</div>
From this, I would expect the Tk modules to disappear if I specify
each of them explicitly with -X ? This doesn&#39;t seem to happen.

-- Johan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250582" href="/Public/Bug/Display.html?id=22115#txn-250582">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;16&nbsp;09:13:25&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/250582/107575/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/107575">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 320b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mo. 16. Okt. 2006, 06:53:06, JV wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; From this, I would expect the Tk modules to disappear if I specify
&gt; each of them explicitly with -X ? This doesn&#39;t seem to happen.
</div>
Funny. I can&#39;t test it right now, but Tk.pm was omitted when I specified
-X Tk. Perhaps the dll&#39;s aren&#39;t omitted. I didn&#39;t check that.

Steffen
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250594" href="/Public/Bug/Display.html?id=22115#txn-250594">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;16&nbsp;09:20:29&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/250594/107585/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/107585">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mo. 16. Okt. 2006, 05:12:51, JV wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [Quoting Steffen Müller via RT, on October 16 2006, 04:24, in
&gt; &#34;[rt.cpan.org #22115]&#34;]
<div class="message-stanza open">&gt; &gt; use Scary::Device;
&gt; &gt; Scary::Device-&gt;LoadPlugins&#40;qw/Scary::Device::Plugin::Foo/&#41;;
&gt; &gt;
&gt; &gt; And trust me: This is just *one* of the cases relying on &#34;use&#34; and
&gt; &gt; &#34;require&#34; fails.
</div>&gt; 
&gt; I&#39;d say that&#39;s exactly why PAR provides a -M option.
&gt; I use such constructs myself, and I always specify the necessary
&gt; modules with -M. No pain.
</div>
Alternatively, adding a &#34;require Foo::Bar&#34; to the program works well.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; I think the idea behind M::SD&#39;s heuristics was laid on that
</div>&gt; foundation.
<div class="message-stanza open">&gt; &gt; It picks up anything that might be a module and sees whether that
</div>&gt; module
<div class="message-stanza open">&gt; &gt; exists in the library. If it does, it assumes it found a valid
&gt; &gt; dependency.
</div>&gt; 
&gt; Hmm. So if I remove Tk from the perl library, my &#39;problem&#39; would be
&gt; over?
</div>
Yes. I can&#39;t say I like it that way. I was a little shocked when I
discovered that. Short of a Module::ScanDeps rewrite, there&#39;s nothing
that can be done in this specific regard.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;     % perl -MCPAN -e &#34;install qw&#40;PAR&#41;&#34;
&gt;     CPAN: Storable loaded ok
&gt;     Going to read /home/jv/.cpan/Metadata
&gt;       Database was generated on Sun, 01 Oct 2006 09:40:30 GMT
&gt;     Running install for module PAR
&gt;     Running make for S/SM/SMUELLER/PAR-0.954.tar.gz
&gt;     CPAN: LWP::UserAgent loaded ok
&gt;     Fetching with LWP:
&gt;       ftp://ftp.squirrel.nl/pub/CPAN/authors/id/S/SM/SMUELLER/PAR-
&gt; 0.954.tar.gz
&gt;     LWP failed with code[404] message[File &#39;PAR-0.954.tar.gz&#39; not
&gt; found]
&gt;     ...
&gt; 
&gt; Someone thinks 0.954 is most recent &#40;but it is not on CPAN&#41;. 0.956 is
&gt; on CPAN, but not in the index? Puzzled...
</div>
I get this: &#40;for &#34;m par&#34;&#41;

    DESCRIPTION  Perl Archive Toolkit
    CPAN_USERID  AUTRIJUS &#40;Audrey Tang &lt;cpan@audreyt.org&gt;&#41;
    CPAN_VERSION 0.956
    CPAN_FILE    S/SM/SMUELLER/PAR-0.956.tar.gz
    UPLOAD_DATE  2006-10-03
    DSLIP_STATUS RmhOp
&#40;released,mailing-list,hybrid,object-oriented,Standard-Perl&#41;
    MANPAGE      PAR - Perl Archive Toolkit
    INST_FILE    /usr/local/share/perl/5.8.7/PAR.pm
    INST_VERSION 0.956

Perhaps your mirror needs updating? PAUSE told me it indexed PAR 0.956
alright. I uploaded a 0.954, but it was a broken release. Hence, I
deleted it very quickly. 

Steffen
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-250615" href="/Public/Bug/Display.html?id=22115#txn-250615">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;16&nbsp;10:37:10&nbsp;2006</span>
    <span class="description">jv [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #22115] PARring Term::ReadLine includes Tk</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 16 Oct 2006 16:36:24 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-ScanDeps [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jv [...] cpan.org &#40;Johan Vromans&#41;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/250615/107590/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/107590">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 916b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">[Quoting Steffen Müller via RT, on October 16 2006, 09:20, in &#34;[rt.cpan.org #22115]&#34;]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; I&#39;d say that&#39;s exactly why PAR provides a -M option.
&gt; &gt; I use such constructs myself, and I always specify the necessary
&gt; &gt; modules with -M. No pain.
</div>&gt; 
&gt; Alternatively, adding a &#34;require Foo::Bar&#34; to the program works well.
</div>
This is not possible if you two conflicting modules, only one of which
can be used.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Perhaps your mirror needs updating? PAUSE told me it indexed PAR
&gt; 0.956 alright. I uploaded a 0.954, but it was a broken release.
&gt; Hence, I deleted it very quickly.
</div>
Apparently, one of my metadata files got currupt. It is solved now.

BTW: This is what I currently use:

    pp -p -o xx.par \
        -I lib \
        -M &lt;extra modules&gt; \
        -a &lt;extra files&gt; \
        script/app

    zip -d xx.par lib/Tk\*
    zip -d xx.par lib/auto/Tk/\*

    parl -b -Oapp.par xx.par

Not elegant, but it seems to do the trick.

Thanks,
        Johan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-255098" href="/Public/Bug/Display.html?id=22115#txn-255098">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;24&nbsp;12:14:45&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/255098/110259/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/110259">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 231b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Module::ScanDeps 0.67 is on its way to CPAN. It fixes the specific bug
you witnessed but doesn&#39;t make the overall problem of fragile heuristics
go away.

Please allow for some time before the tarball hits your CPAN mirror.

Steffen
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-255101" href="/Public/Bug/Display.html?id=22115#txn-255101">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;24&nbsp;12:14:47&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-255103" href="/Public/Bug/Display.html?id=22115#txn-255103">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;24&nbsp;12:14:49&nbsp;2006</span>
    <span class="description">smueller [...] cpan.org -  Given to SMUELLER</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.897814</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
