<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #85297 for RDF-Trine: broken punycode handling</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #85297 for RDF-Trine: broken punycode handling</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=RDF-Trine">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=RDF-Trine">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=RDF-Trine">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=RDF-Trine">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/kasei/perlrdf/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/RDF-Trine">RDF-Trine CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">85297</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=RDF-Trine">RDF-Trine</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">gwilliams [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dr [...] jones.dk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-221068-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-221069-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




punycode-trine.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1212283/640191/punycode-trine.pl">
Wed May 15 05:21:47 2013 (370b) by perl [...] toby.ink
</a>
</font></li>
</ul>


punycode-trine.t<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1212286/640195/punycode-trine.t">
Wed May 15 06:10:07 2013 (453b) by perl [...] toby.ink
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=85297">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1212116" href="/Public/Bug/Display.html?id=85297#txn-1212116">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;14&nbsp;16:36:27&nbsp;2013</span>
    <span class="description">dr [...] jones.dk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> broken punycode handling</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 14 May 2013 22:28:31 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-rdf-rdfa-generator [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jonas Smedegaard &lt;dr [...] jones.dk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1212116/640102/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/640102">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">It seems punycode is handled wrongly.

This script:


#!/usr/bin/perl

use HTML::HTML5::Builder qw[:standard];
use RDF::RDFa::Generator;
use RDF::TrineX::Functions qw[parse];

my $data = &lt;&lt;&#39;DATA&#39;;
[] &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://xmlns.com/foaf/0.1/Homepage">http://xmlns.com/foaf/0.1/Homepage</a></span>&gt; 
&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.xn--hestebedgrd-58a.dk/">http://www.xn--hestebedgrd-58a.dk/</a></span>&gt;.
DATA
my $model = parse&#40;$data, as =&gt; &#39;Turtle&#39;, base =&gt; &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://example.org/&#39;&#41;">http://example.org/&#39;&#41;</a></span>;
my $gen = RDF::RDFa::Generator-&gt;new&#40;style=&gt;&#39;HTML::Pretty&#39;&#41;;
print RDF::RDFa::Generator-&gt;create_document&#40;$model&#41;



emits this &#40;the first line being to stderr&#41;:

error : string is not in UTF-8
&lt;?xml version=&#34;1.0&#34;?&gt;
&lt;html xmlns=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</a></span>&#34; version=&#34;XHTML+RDFa 1.0&#34;&gt;
&lt;head profile=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.w3.org/1999/xhtml/vocab">http://www.w3.org/1999/xhtml/vocab</a></span>&#34;&gt;
&lt;title&gt;RDFa Document&lt;/title&gt;
&lt;meta name=&#34;generator&#34; value=&#34;RDF::RDFa::Generator::HTML::Head&#34;/&gt;
&lt;link xmlns:foaf=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://xmlns.com/foaf/0.1/">http://xmlns.com/foaf/0.1/</a></span>&#34; about=&#34;[_:r1368562720r0]&#34; 
rel=&#34;foaf:Homepage&#34; resource=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.hestebedg">http://www.hestebedg</a></span>&#38;#x5CA4;.dk/&#34;/&gt;&lt;/head&gt;
&lt;body/&gt;
&lt;/html&gt;


The embedded <span class="clickylink"><a target="new" rel="nofollow" href="http://www.hestebedg">http://www.hestebedg</a></span>&#38;#x5CA4;.dk/ is garbled!

Seems RDF::Trine decodes the punycode, but RDF::RDFa::Generator does not 
encode again but instead chokes when stumbling on non-ASCII character.

If calling -&gt;nodes&#40;&#41; instead of -&gt;create_document&#40;&#41;, then this error is 
emitted:

Redland error: XML tree error: string is not in UTF-8


 - Jonas

-- 
 * Jonas Smedegaard - idealist &#38; Internet-arkitekt
 * Tlf.: +45 40843136  Website: <span class="clickylink"><a target="new" rel="nofollow" href="http://dr.jones.dk/">http://dr.jones.dk/</a></span>

 [x] quote me freely  [ ] ask before reusing  [ ] keep private
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1212283" href="/Public/Bug/Display.html?id=85297#txn-1212283">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;15&nbsp;05:21:47&nbsp;2013</span>
    <span class="description">perl [...] toby.ink -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1212283/640190/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/640190">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 161b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2013-05-14T21:36:27+01:00, dr@jones.dk wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It seems punycode is handled wrongly.
</div>
The problem seems to be at least partly in Trine.

See attached script.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> punycode-trine.pl</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1212283/640191/punycode-trine.pl">Download punycode-trine.pl</a><br />
<span class="downloadcontenttype">text/x-perl 370b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">use RDF::Trine;
use RDF::TrineX::Functions qw[parse serialize];

my $model = &#34;RDF::Trine::Model&#34;-&gt;temporary_model;

parse \*DATA,
	into  =&gt; $model,
	using =&gt; &#34;RDF::Trine::Parser::Turtle&#34;-&gt;new,
	base  =&gt; &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/">http://localhost/</a></span>&#34;;
	
serialize $model,
	using =&gt; &#34;RDF::Trine::Serializer::Turtle&#34;-&gt;new,
	to    =&gt; \*STDOUT;

__DATA__
&lt;x&gt; &lt;y&gt; &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.xn--hestebedgrd-58a.dk/">http://www.xn--hestebedgrd-58a.dk/</a></span>&gt;.

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1212284" href="/Public/Bug/Display.html?id=85297#txn-1212284">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;15&nbsp;05:21:47&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1212286" href="/Public/Bug/Display.html?id=85297#txn-1212286">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;15&nbsp;06:10:07&nbsp;2013</span>
    <span class="description">perl [...] toby.ink -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1212286/640194/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/640194">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 146b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">OK, refactored test case to eliminate RDF::TrineX::Functions from the equation, and use Test::More.

I&#39;m going to forward this issue to RDF-Trine.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> punycode-trine.t</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1212286/640195/punycode-trine.t">Download punycode-trine.t</a><br />
<span class="downloadcontenttype">text/x-perl 453b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">use strict;
use warnings;
use Test::More tests =&gt; 1;

use RDF::Trine;

my $model  = &#34;RDF::Trine::Model&#34;-&gt;temporary_model;
my $parser = &#34;RDF::Trine::Parser::Turtle&#34;-&gt;new;
my $ser    = &#34;RDF::Trine::Serializer::Turtle&#34;-&gt;new;

$parser-&gt;parse_file_into_model&#40;&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/">http://localhost/</a></span>&#34;, \*DATA, $model&#41;;
my $output = $ser-&gt;serialize_model_to_string&#40;$model&#41;;

like&#40;$output, qr{www\.xn--hestebedgrd-58a\.dk}&#41;;

__DATA__
&lt;x&gt; &lt;y&gt; &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.xn--hestebedgrd-58a.dk/">http://www.xn--hestebedgrd-58a.dk/</a></span>&gt;.

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1212288" href="/Public/Bug/Display.html?id=85297#txn-1212288">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;15&nbsp;06:10:21&nbsp;2013</span>
    <span class="description">perl [...] toby.ink -  Queue changed from RDF-RDFa-Generator to RDF-Trine</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1212289" href="/Public/Bug/Display.html?id=85297#txn-1212289">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;15&nbsp;06:13:49&nbsp;2013</span>
    <span class="description">dr [...] jones.dk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #85297] broken punycode handling</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 May 2013 12:15:16 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-RDF-RDFa-Generator [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jonas Smedegaard &lt;dr [...] jones.dk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1212289/640197/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/640197">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 478b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Quoting Toby Inkster via RT &#40;2013-05-15 11:21:47&#41;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=85297">https://rt.cpan.org/Ticket/Display.html?id=85297</a></span> &gt;
&gt; 
&gt; On 2013-05-14T21:36:27+01:00, dr@jones.dk wrote:
<div class="message-stanza open">&gt; &gt; It seems punycode is handled wrongly.
</div>&gt; 
&gt; The problem seems to be at least partly in Trine.
&gt; 
&gt; See attached script.
</div>
Indeed!


 - Jonas

-- 
 * Jonas Smedegaard - idealist &#38; Internet-arkitekt
 * Tlf.: +45 40843136  Website: <span class="clickylink"><a target="new" rel="nofollow" href="http://dr.jones.dk/">http://dr.jones.dk/</a></span>

 [x] quote me freely  [ ] ask before reusing  [ ] keep private
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1212327" href="/Public/Bug/Display.html?id=85297#txn-1212327">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;15&nbsp;08:32:10&nbsp;2013</span>
    <span class="description">perl [...] toby.ink -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1212327/640217/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/640217">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 82b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Reported on github.com issue tracker...
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/kasei/perlrdf/issues/85">https://github.com/kasei/perlrdf/issues/85</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1224972" href="/Public/Bug/Display.html?id=85297#txn-1224972">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;17&nbsp;07:04:48&nbsp;2013</span>
    <span class="description">gwilliams [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1224972/647078/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/647078">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 720b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed May 15 08:32:10 2013, TOBYINK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Reported on github.com issue tracker...
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/kasei/perlrdf/issues/85">https://github.com/kasei/perlrdf/issues/85</a></span>
</div>
As noted on github:

Commit e20f560 &#40;on the unicode-bugfix branch&#41; should have now resolved all of the issues associated with this bug. Punycode is no longer decoded by parsers, and URI base resolution works with full IRIs. The only thing to note now is that the N-Triples serializer will decode punycode URIs and emit them as unicode escaped IRIs. For example, the URI &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.xn--hestebedgrd-58a.dk/&#39;">http://www.xn--hestebedgrd-58a.dk/&#39;</a></span> will be emitted as the N-Triples &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.hestebedg">http://www.hestebedg</a></span>\u00E5rd.dk/&gt;. This is probably a good thing as it encourages the use of proper IRIs instead of letting punycode into the wild.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1224974" href="/Public/Bug/Display.html?id=85297#txn-1224974">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;17&nbsp;07:04:50&nbsp;2013</span>
    <span class="description">gwilliams [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1224976" href="/Public/Bug/Display.html?id=85297#txn-1224976">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;17&nbsp;07:04:50&nbsp;2013</span>
    <span class="description">gwilliams [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.555455</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
