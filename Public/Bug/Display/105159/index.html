<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #105159 for Date-Manip: [Patch] Better heuristic &#40;maybe&#41; for Mac OS X in Brazil</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #105159 for Date-Manip: [Patch] Better heuristic &#40;maybe&#41; for Mac OS X in Brazil</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Date-Manip">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Date-Manip">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Date-Manip">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Date-Manip">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Date-Manip">Date-Manip CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">105159</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Date-Manip">Date-Manip</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
wyant [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-45268-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
6.50    </td>
  </tr>
  <tr id="CF-45269-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Date-Manip-6.51.tar.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1515852/808462/Date-Manip-6.51.tar.gz">
Thu Jul 09 12:15:53 2015 (1756k) by sbeck [...] cpan.org
</a>
</font></li>
</ul>


Date-Manip-TZ.pm.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1514261/807492/Date-Manip-TZ.pm.patch">
Sat Jul 04 15:04:10 2015 (2.3k) by wyant [...] cpan.org
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/1507977/803850/Date-Manip-TZ.pm.patch">
Mon Jun 15 15:19:57 2015 (2.3k) by wyant [...] cpan.org
</a>
</font></li>
</ul>


Date-Manip-TZ.pod.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1514261/807493/Date-Manip-TZ.pod.patch">
Sat Jul 04 15:04:10 2015 (850b) by wyant [...] cpan.org
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/1507977/803851/Date-Manip-TZ.pod.patch">
Mon Jun 15 15:19:57 2015 (850b) by wyant [...] cpan.org
</a>
</font></li>
</ul>


Date-Manip.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1506531/802967/Date-Manip.patch">
Wed Jun 10 13:48:17 2015 (1.2k) by wyant [...] cpan.org
</a>
</font></li>
</ul>


date_manip_tz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1507607/803621/date_manip_tz">
Sun Jun 14 10:43:37 2015 (92b) by wyant [...] cpan.org
</a>
</font></li>
</ul>


date_manip_tz.log<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1507607/803622/date_manip_tz.log">
Sun Jun 14 10:43:37 2015 (371b) by wyant [...] cpan.org
</a>
</font></li>
</ul>


zoneinfo<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1507607/803623/zoneinfo">
Sun Jun 14 10:43:37 2015 (4.3k) by wyant [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=105159">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1506531" href="/Public/Bug/Display.html?id=105159#txn-1506531">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;10&nbsp;13:48:17&nbsp;2015</span>
    <span class="description">wyant [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [Patch] Better heuristic &#40;maybe&#41; for Mac OS X in Brazil</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1506531/802966/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/802966">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Under Mac OS X &#40;uname output appended&#41; Date::Manip seems to end up deriving the Olson zone by a lookup on the results of &#39;date +%Z&#39;. In Sao Paulo in June, this gives &#39;BRT&#39;. Given the structure of the lookup table, this ends up as &#39;America/Araguaina&#39;. This is fine as far as it goes, but Araguaina is up near the Equator, and does not do summer time. This is OK for times near the current time, but times in &#40;say&#41; January&#41; parse an hour off.

Now, it appears to me that the look-up table for &#39;BRST&#39; has been juggled to put Sao Paulo at the top. The attached patch performs the same juggling act for &#39;BRT&#39;. I am a GitHub neophyte, but will generate a pull request as soon as I can figure out how.

Note that this does not truly fix the problem, it just makes the results consistent, and moves the locations where the default parse is incorrect from a more-populous area to a less-populous one.

What is really needed is a way to derive the Olson zone directly. DateTime::TimeZone does it &#40;at least, under Mac OS X&#41; by looking for symbolic link /etc/localtime and deriving the name of the Olson zone from the name of the file the link points to. After I get the pull request for this ticket generated, I will try to come up with an enhancement to add this functionality to Date::Manip.

$ uname -a
Darwin Hairy-Toes.local 14.3.0 Darwin Kernel Version 14.3.0: Mon Mar 23 11:59:05 PDT 2015; root:xnu-2782.20.48~5/RELEASE_X86_64 x86_64

$ perl -v

This is perl 5, version 22, subversion 0 &#40;v5.22.0&#41; built for darwin-2level

...

$ perl -MDate::Manip -E &#39;say Date::Manip-&gt;VERSION&#39;
6.50

The patch is against commit cdc16eeeb1e2688d6fb025490747da518caec27f
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Date-Manip.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1506531/802967/Date-Manip.patch">Download Date-Manip.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff --git a/lib/Date/Manip/Zones.pm b/lib/Date/Manip/Zones.pm
index 707289f..433ca9f 100644
--- a/lib/Date/Manip/Zones.pm
+++ b/lib/Date/Manip/Zones.pm
@@ -1901,13 +1901,13 @@ $LastYear      = &#39;2065&#39;;
                      &#39;america/maceio&#39;,
                      &#39;america/recife&#39;,
                      &#39;america/belem&#39; ],
-  &#39;brt&#39;         =&gt; [ &#39;america/araguaina&#39;,
+  &#39;brt&#39;         =&gt; [ &#39;america/sao_paulo&#39;,
+                     &#39;america/araguaina&#39;,
                      &#39;america/bahia&#39;,
-                     &#39;america/belem&#39;,
                      &#39;america/fortaleza&#39;,
                      &#39;america/maceio&#39;,
                      &#39;america/recife&#39;,
-                     &#39;america/sao_paulo&#39;,
+                     &#39;america/belem&#39;,
                      &#39;america/santarem&#39; ],
   &#39;bst&#39;         =&gt; [ &#39;europe/london&#39;,
                      &#39;america/adak&#39;,
diff --git a/t/tz.define_abbrev.t b/t/tz.define_abbrev.t
index a38475b..4641c28 100755
--- a/t/tz.define_abbrev.t
+++ b/t/tz.define_abbrev.t
@@ -26,13 +26,13 @@ $obj-&gt;config&#40;&#34;forcedate&#34;,&#34;now,America/New_York&#34;&#41;;
 $tests=&#34;
 
 BRT reset =&gt;
+   America/Sao_Paulo
    America/Araguaina
    America/Bahia
-   America/Belem
    America/Fortaleza
    America/Maceio
    America/Recife
-   America/Sao_Paulo
+   America/Belem
    America/Santarem
 
 BRT
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1506537" href="/Public/Bug/Display.html?id=105159#txn-1506537">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;10&nbsp;14:00:04&nbsp;2015</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1506537/802973/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/802973">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 34b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">OK, the pull request is generated.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1506539" href="/Public/Bug/Display.html?id=105159#txn-1506539">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;10&nbsp;14:12:35&nbsp;2015</span>
    <span class="description">sbeck [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1506539/802975/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/802975">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1024b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I will consider reordering the order of the timezones... but you are correct that no matter what the order is, the order will be incorrect for some subset of the population.

The real fix is to be able to determine the real timezone in a more accurate way &#40;using the abbreviation from the &#39;date&#39; command is a last ditch attempt if everything else fails&#41;.

So what I really need is the way &#40;or ways&#41; that I can better determine the timezone from OS X.

You say that the /etc/localtime file is a link pointing to a file from which the timezone can be determined.  Can you tell me the name of the file that /etc/localtime is linked to, and it&#39;s contents &#40;unless the name of the zone is derived from the actual file name&#41;.

I&#39;ll definitely build that method of determining the timezone into Date::Manip, and that should fix things for you.

If there are alternate locations in OS X where the timezone can be determined, please send that information as well.

Sorry, I&#39;m not an OS X guy and don&#39;t have access to an OS X machine.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1506540" href="/Public/Bug/Display.html?id=105159#txn-1506540">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;10&nbsp;14:12:36&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1506587" href="/Public/Bug/Display.html?id=105159#txn-1506587">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;10&nbsp;17:07:42&nbsp;2015</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1506587/803010/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/803010">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am not an OS X expert, nor do I play one on TV.

What actually happened was that I noticed that DateTime::TimeZone got the zone correct, and tracked that functionality to DateTime::TimeZone::Local::Unix subroutine FromEtcLocalTime&#40;&#41;.

Unfortunately it appears from reading that code that /etc/localtime can be either a symbolic link or a copy of one of the files in /usr/share/zoneinfo. If it&#39;s a link &#40;as it is under OS X&#41; the link is to a file in /usr/share/zoneinfo that is named after the Olson zone, and the DateTime::TimeZone code just pulls the linked-to path apart and reassembles it right-to-left looking for a valid zone name.

But if /etc/localtime is a copy &#40;as the comments indicate it can be under FreeBSD&#41; the code has to do a File::Find::find&#40;&#41; on /usr/share/zoneinfo/, looking for a file that is the same as /etc/localtime. Once it finds the matching file it derives the zone name from the file&#39;s path name just as it does for the link.

Now, I have no idea what the format of the /usr/share/zoneinfo files is. The relevant Wikipedia article seems to say they are text, but mine are binary. And &#39;hexdump -C&#39; seems to say they do NOT contain the name of the zone they define. Which is too bad, because just reading the file would provide a much better implementation.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1507607" href="/Public/Bug/Display.html?id=105159#txn-1507607">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;14&nbsp;10:43:37&nbsp;2015</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1507607/803620/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/803620">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1016b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">It appears that FreeBSD 10.1 has the same behavior, which gives a way to work on the problem. The only difference for OS X appears to be that /etc/localtime is a link, so that the zone name can be derived by translating the link. Under FreeBSD it is a copy, so you have to grovel through /usr/share/zoneinfo/ looking for an identical file.

I have attached three files:

date_manip_tz is a Perl one-liner that traces Date::Manip::TZ as it determines the local zone.

date_manip_tz.log is the output of date_manip_tz when run on FreeBSD 10.1 under Oracle VirtualBox on my machine.

zoneinfo is a Perl script that determines the actual Olson zone under Mac OS 10.10.3, FreeBSD 10.1, and XUbuntu 13.04. I attempted to write this so that the relevant code could simply be lifted into Date::Manip::TZ if you want to go that way. I suspect that it needs to be made into a new zone determination mechanism &#40;say, &#39;zoneinfo&#39;&#41; that takes no parameters and which by default is used as the last mechanism before spawning &#39;date&#39;.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> date_manip_tz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1507607/803621/date_manip_tz">Download date_manip_tz</a><br />
<span class="downloadcontenttype">application/octet-stream 92b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> date_manip_tz.log</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1507607/803622/date_manip_tz.log">Download date_manip_tz.log</a><br />
<span class="downloadcontenttype">application/octet-stream 371b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> zoneinfo</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1507607/803623/zoneinfo">Download zoneinfo</a><br />
<span class="downloadcontenttype">application/octet-stream 4.3k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1507977" href="/Public/Bug/Display.html?id=105159#txn-1507977">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;15&nbsp;15:19:57&nbsp;2015</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1507977/803849/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/803849">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 361b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have made the code in yesterday&#39;s &#39;zoneinfo&#39; script into a patch against Date::Manip::TZ version 6.50. The patch files are attached.

The new code makes use of three core modules: Cwd, File::Find, and File::Spec. Because they are core I have not updated the requirements for the module. But because I feel a little guilty about not doing so, I have confessed.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Date-Manip-TZ.pm.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1507977/803850/Date-Manip-TZ.pm.patch">Download Date-Manip-TZ.pm.patch</a><br />
<span class="downloadcontenttype">text/x-diff 2.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/Date/Manip/TZ.pm.old	2015-06-01 10:31:50.000000000 -0300
+++ lib/Date/Manip/TZ.pm	2015-06-15 15:47:59.000000000 -0300
@@ -105,6 +105,7 @@
                                       file /etc/timezone
                                       file /etc/sysconfig/clock
                                       file /etc/default/init
+				      tzdata
                                     &#41;,
                                    &#39;command&#39;,  &#39;/bin/date +%Z&#39;,
                                    &#39;command&#39;,  &#39;/usr/bin/date +%Z&#39;,
@@ -558,6 +559,13 @@
             }
          }
 
+      } elsif &#40;$method eq &#39;tzdata&#39; &#41; {
+	 if &#40; defined&#40; my $z = _get_zoneinfo_zone&#40;&#41; &#41; &#41; {
+	    push @zone, $z;
+	    print &#34;] $z\n&#34;  if &#40;$debug&#41;;
+	 } elsif &#40;$debug&#41; {
+	    print &#34;] no result\n&#34;;
+	 }
       } elsif &#40;$method eq &#39;command&#39;&#41; {
          if &#40;! @methods&#41; {
             print &#34;]\n&#34;  if &#40;$debug&#41;;
@@ -731,6 +739,70 @@
    }
 }
 
+# The folloing is cribbed generally but not verbatim from
+# DateTime::TimeZone::Local::Unix.
+#
+
+sub _get_zoneinfo_zone {
+    my &#40; $localtime, $zoneinfo &#41; = @_;
+
+    $localtime	||= &#39;/etc/localtime&#39;;
+    $zoneinfo	||= &#39;/usr/share/zoneinfo&#39;;
+
+    -d $zoneinfo
+	and -f $localtime
+	or return;
+
+    require Cwd;
+    -l $localtime
+	and return _zoneinfo_file_name_to_zone&#40;
+	    Cwd::abs_path&#40; $localtime &#41;,
+	    $zoneinfo,
+	&#41;;
+
+    my $want_content;
+    my $want_size = -s $localtime;
+
+    local $@ = undef;
+    eval {
+	require File::Find;
+	File::Find::find&#40; sub {
+		my $zone;
+		defined&#40; $zone = _zoneinfo_file_name_to_zone&#40;
+			$File::Find::name, $zoneinfo &#41; &#41;
+		    and -f $_
+		    and $want_size == -s _
+		    and &#40; $want_content ||= _zoneinfo_file_slurp&#40;
+			    $localtime &#41; &#41;
+			eq _zoneinfo_file_slurp&#40; $_ &#41;
+		    and die { zone =&gt; $zone };
+	    }, $zoneinfo,
+	&#41;;
+	1;
+    } and return;
+    ref $@
+	and return $@-&gt;{zone};
+    die $@;
+}
+
+sub _zoneinfo_file_name_to_zone {
+    my &#40; $fn, $zoneinfo &#41; = @_;
+    require File::Spec;
+    my $zone = File::Spec-&gt;abs2rel&#40; $fn, $zoneinfo &#41;;
+    exists $Date::Manip::Zones::ZoneNames{ lc $zone }
+	and return $zone;
+    return;
+}
+
+sub _zoneinfo_file_slurp {
+    my &#40; $fn &#41; = @_;
+    open my $fh, &#39;&lt;&#39;, $fn
+	or return;
+    binmode $fh;
+    local $/ = undef;
+    return &lt;$fh&gt;;
+}
+
 # We will be testing commands that don&#39;t exist on all architectures,
 # so disable warnings.
 #
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Date-Manip-TZ.pod.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1507977/803851/Date-Manip-TZ.pod.patch">Download Date-Manip-TZ.pod.patch</a><br />
<span class="downloadcontenttype">text/x-diff 850b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/Date/Manip/TZ.pod.old	2015-06-01 10:31:50.000000000 -0300
+++ lib/Date/Manip/TZ.pod	2015-06-15 15:55:01.000000000 -0300
@@ -602,6 +602,11 @@
                              be the first non-blank non-comment
                              line in the file.
 
+   tzdata                    Determine which /usr/share/zoneinfo
+                             file /etc/localtime represents, and
+                             derive the time zone from the name
+                             of that file.
+
    command    COMMAND        Runs a command which produces
                              a time zone as the output.
 
@@ -634,6 +639,7 @@
    file     /etc/timezone
    file     /etc/sysconfig/clock
    file     /etc/default/init
+   tzinfo
    command  &#34;/bin/date +%Z&#34;
    command  &#34;/usr/bin/date +%Z&#34;
    command  &#34;/usr/local/bin/date +%Z&#34;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1514261" href="/Public/Bug/Display.html?id=105159#txn-1514261">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;04&nbsp;15:04:10&nbsp;2015</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1514261/807491/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/807491">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 308b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">It looks like I did not test my patch carefully enough. It determines the zone, but unfortunately the abort from File::Find leaves the process&#39; working directory changed. The fix is to use no_chdir in File::Find::find&#40;&#41;. Both patch files are attached even though only the .pm file changed. Sorry about that.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Date-Manip-TZ.pm.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1514261/807492/Date-Manip-TZ.pm.patch">Download Date-Manip-TZ.pm.patch</a><br />
<span class="downloadcontenttype">text/x-diff 2.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/Date/Manip/TZ.pm.old	2015-06-01 09:31:50.000000000 -0400
+++ lib/Date/Manip/TZ.pm	2015-07-04 14:43:52.000000000 -0400
@@ -105,6 +105,7 @@
                                       file /etc/timezone
                                       file /etc/sysconfig/clock
                                       file /etc/default/init
+				      tzdata
                                     &#41;,
                                    &#39;command&#39;,  &#39;/bin/date +%Z&#39;,
                                    &#39;command&#39;,  &#39;/usr/bin/date +%Z&#39;,
@@ -558,6 +559,13 @@
             }
          }
 
+      } elsif &#40;$method eq &#39;tzdata&#39; &#41; {
+	 if &#40; defined&#40; my $z = _get_zoneinfo_zone&#40;&#41; &#41; &#41; {
+	    push @zone, $z;
+	    print &#34;] $z\n&#34;  if &#40;$debug&#41;;
+	 } elsif &#40;$debug&#41; {
+	    print &#34;] no result\n&#34;;
+	 }
       } elsif &#40;$method eq &#39;command&#39;&#41; {
          if &#40;! @methods&#41; {
             print &#34;]\n&#34;  if &#40;$debug&#41;;
@@ -731,6 +739,73 @@
    }
 }
 
+# The folloing is cribbed generally but not verbatim from
+# DateTime::TimeZone::Local::Unix.
+#
+
+sub _get_zoneinfo_zone {
+    my &#40; $localtime, $zoneinfo &#41; = @_;
+
+    $localtime	||= &#39;/etc/localtime&#39;;
+    $zoneinfo	||= &#39;/usr/share/zoneinfo&#39;;
+
+    -d $zoneinfo
+	and -f $localtime
+	or return;
+
+    require Cwd;
+    -l $localtime
+	and return _zoneinfo_file_name_to_zone&#40;
+	    Cwd::abs_path&#40; $localtime &#41;,
+	    $zoneinfo,
+	&#41;;
+
+    my $want_content;
+    my $want_size = -s $localtime;
+
+    local $@ = undef;
+    eval {
+	require File::Find;
+	File::Find::find&#40; {
+		wanted	=&gt; sub {
+		    my $zone;
+		    defined&#40; $zone = _zoneinfo_file_name_to_zone&#40;
+			    $File::Find::name, $zoneinfo &#41; &#41;
+			and -f $_
+			and $want_size == -s _
+			and &#40; $want_content ||= _zoneinfo_file_slurp&#40;
+				$localtime &#41; &#41;
+			    eq _zoneinfo_file_slurp&#40; $File::Find::name &#41;
+			and die { zone =&gt; $zone };
+		},
+		no_chdir	=&gt; 1,
+	    }, $zoneinfo,
+	&#41;;
+	1;
+    } and return;
+    ref $@
+	and return $@-&gt;{zone};
+    die $@;
+}
+
+sub _zoneinfo_file_name_to_zone {
+    my &#40; $fn, $zoneinfo &#41; = @_;
+    require File::Spec;
+    my $zone = File::Spec-&gt;abs2rel&#40; $fn, $zoneinfo &#41;;
+    exists $Date::Manip::Zones::ZoneNames{ lc $zone }
+	and return $zone;
+    return;
+}
+
+sub _zoneinfo_file_slurp {
+    my &#40; $fn &#41; = @_;
+    open my $fh, &#39;&lt;&#39;, $fn
+	or return;
+    binmode $fh;
+    local $/ = undef;
+    return &lt;$fh&gt;;
+}
+
 # We will be testing commands that don&#39;t exist on all architectures,
 # so disable warnings.
 #
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Date-Manip-TZ.pod.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1514261/807493/Date-Manip-TZ.pod.patch">Download Date-Manip-TZ.pod.patch</a><br />
<span class="downloadcontenttype">text/x-diff 850b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/Date/Manip/TZ.pod.old	2015-06-01 10:31:50.000000000 -0300
+++ lib/Date/Manip/TZ.pod	2015-06-15 15:55:01.000000000 -0300
@@ -602,6 +602,11 @@
                              be the first non-blank non-comment
                              line in the file.
 
+   tzdata                    Determine which /usr/share/zoneinfo
+                             file /etc/localtime represents, and
+                             derive the time zone from the name
+                             of that file.
+
    command    COMMAND        Runs a command which produces
                              a time zone as the output.
 
@@ -634,6 +639,7 @@
    file     /etc/timezone
    file     /etc/sysconfig/clock
    file     /etc/default/init
+   tzinfo
    command  &#34;/bin/date +%Z&#34;
    command  &#34;/usr/bin/date +%Z&#34;
    command  &#34;/usr/local/bin/date +%Z&#34;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1515148" href="/Public/Bug/Display.html?id=105159#txn-1515148">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;07&nbsp;12:43:44&nbsp;2015</span>
    <span class="description">sbeck [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1515148/807967/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/807967">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 449b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry for the slow reply... I&#39;ve been pretty swamped and am just now making time to get to this.

It appears to me that your patch seems reasonable.  I&#39;m going to modify it slightly to take the directory where the tzdata files live.

i.e.

   tzdata /usr/share/zoneinfo

rather than assuming that they are in /usr/share/zoneinfo .  Also, I may actually use two arguements:

   tzdata /etc/localtime /usr/share/zoneinfo

I&#39;m looking into that now...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1515297" href="/Public/Bug/Display.html?id=105159#txn-1515297">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;07&nbsp;14:58:48&nbsp;2015</span>
    <span class="description">sbeck [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1515297/808044/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/808044">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 140b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Patch is applied &#40;with some minor modifications to make the coding style a bit more consistent with my normal style&#41;.

Thanks for the work.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1515299" href="/Public/Bug/Display.html?id=105159#txn-1515299">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;07&nbsp;14:58:55&nbsp;2015</span>
    <span class="description">sbeck [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1515846" href="/Public/Bug/Display.html?id=105159#txn-1515846">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;09&nbsp;11:54:46&nbsp;2015</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1515846/808455/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/808455">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 527b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">You are most welcome. Thank you for the opportunity to contribute to such a useful module. Sorry it took three iterations to get something actually usable. Under the circumstances it was a good thing it took you a while to get to it, since the second iteration was badly broken in a fairly subtle way that took me a while to find.

I look forward to the release. If you intend a development release, I will be happy to exercise it, though I certainly anticipate no problems.

Now if only RT will leave this ticket &#34;resolved.&#34;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1515852" href="/Public/Bug/Display.html?id=105159#txn-1515852">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;09&nbsp;12:15:53&nbsp;2015</span>
    <span class="description">sbeck [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1515852/808461/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/808461">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 171b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I don&#39;t do formal &#39;development releases&#39;, however, I am attaching a copy of the current code &#40;which passes all of the tests&#41;, so you can test it out.

Thanks for you help.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Date-Manip-6.51.tar.gz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1515852/808462/Date-Manip-6.51.tar.gz">Download Date-Manip-6.51.tar.gz</a><br />
<span class="downloadcontenttype">application/gzip 1.7m</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1516180" href="/Public/Bug/Display.html?id=105159#txn-1516180">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;10&nbsp;15:16:44&nbsp;2015</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1516180/808596/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/808596">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 257b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you for the preview. I found this when I was actually in Sao Paulo and some tests in one of my modules failed.

I am no longer physically there, but I told my computer it was there, installed Date-Manip 6.51, and the tests passed.

Again, many thanks.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.88571</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
