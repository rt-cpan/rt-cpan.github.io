<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #21282 for ExtUtils-MakeMaker: Split metafile generation into user overridable methods.</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #21282 for ExtUtils-MakeMaker: Split metafile generation into user overridable methods.</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=ExtUtils-MakeMaker">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=ExtUtils-MakeMaker">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=ExtUtils-MakeMaker">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=ExtUtils-MakeMaker">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/ExtUtils-MakeMaker">ExtUtils-MakeMaker CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">21282</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=ExtUtils-MakeMaker">ExtUtils-MakeMaker</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
a.r.ferreira [...] gmail.com

<br />
mschwern [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
makemaker [...] perl.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-12494-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-12495-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




eumm.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/295208/133536/eumm.diff">
Fri Mar 02 20:24:01 2007 (17.4k) by a.r.ferreira [...] gmail.com
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/238162/100471/eumm.diff">
Tue Sep 05 12:36:36 2006 (16.5k) by a.r.ferreira [...] gmail.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=21282">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-237282" href="/Public/Bug/Display.html?id=21282#txn-237282">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;02&nbsp;14:45:01&nbsp;2006</span>
    <span class="description">mschwern [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Split metafile generation into user overridable methods.</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/237282/99981/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/99981">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Adriano Ferreira wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The following patch extends EXTRA_META to accept hash refs as well it
&gt; already accepts YAML-formatted text.
&gt; 
&gt; This way I could write a Makefile.PL like
&gt; 
&gt; use 5.006;
&gt; use ExtUtils::MakeMaker;
&gt; 
&gt; WriteMakefile&#40;
&gt;    NAME              =&gt; &#39;Foo&#39;,
&gt;    VERSION           =&gt; &#39;42&#39;,
&gt;    EXTRA_META =&gt; {
&gt;        recommends =&gt; {
&gt;            &#39;Test::Pod&#39; =&gt; &#39;1.18&#39;,
&gt;            &#39;Test::Pod::Coverage&#39; =&gt; &#39;1.04&#39;,
&gt;        }
&gt;    }
&gt; 
&gt; &#41;;
</div>
This is a much better idea than my &#34;paste this onto the end of the
META.yml&#34; which makes my feet itch and I&#39;m going to undocument right now
so it doesn&#39;t hold up 6.31.

Probably even better is to simply expose the META.yml hash generation
method and allow the user to override.  metafile_data&#40;&#41; would simply
return the data which MakeMaker then turns into a META.yml file. 
metafile_file&#40;&#41; would take that and turn it into a file. 
metafile_target would simply do the necessary make juju to paste the
metafile_file into the Makefile target.

This has the nice side-effect of MakeMaker not having to depend on
META.yml.  It can continue to use its crappy fake YAML generator and if
you write a metafile_data&#40;&#41; that does something more complicated you can
override metafile_file&#40;&#41; to use YAML.pm.

I&#39;m not holding up 6.31 for this, but its a very good idea.  Patches
welcome.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-237285" href="/Public/Bug/Display.html?id=21282#txn-237285">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;02&nbsp;14:45:40&nbsp;2006</span>
    <span class="description">mschwern [...] cpan.org -  Cc makemaker@perl.org added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-237286" href="/Public/Bug/Display.html?id=21282#txn-237286">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;02&nbsp;14:45:40&nbsp;2006</span>
    <span class="description">mschwern [...] cpan.org -  Requestor a.r.ferreira@gmail.com added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-237287" href="/Public/Bug/Display.html?id=21282#txn-237287">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;02&nbsp;14:49:51&nbsp;2006</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/237287/99984/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/99984">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Reposting this for Adriano and makemaker@perl.org&#39;s benefit.

On Sat Sep 02 14:45:01 2006, MSCHWERN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Adriano Ferreira wrote:
<div class="message-stanza open">&gt; &gt; The following patch extends EXTRA_META to accept hash refs as well it
&gt; &gt; already accepts YAML-formatted text.
&gt; &gt; 
&gt; &gt; This way I could write a Makefile.PL like
&gt; &gt; 
&gt; &gt; use 5.006;
&gt; &gt; use ExtUtils::MakeMaker;
&gt; &gt; 
&gt; &gt; WriteMakefile&#40;
&gt; &gt;    NAME              =&gt; &#39;Foo&#39;,
&gt; &gt;    VERSION           =&gt; &#39;42&#39;,
&gt; &gt;    EXTRA_META =&gt; {
&gt; &gt;        recommends =&gt; {
&gt; &gt;            &#39;Test::Pod&#39; =&gt; &#39;1.18&#39;,
&gt; &gt;            &#39;Test::Pod::Coverage&#39; =&gt; &#39;1.04&#39;,
&gt; &gt;        }
&gt; &gt;    }
&gt; &gt; 
&gt; &gt; &#41;;
</div>&gt; 
&gt; This is a much better idea than my &#34;paste this onto the end of the
&gt; META.yml&#34; which makes my feet itch and I&#39;m going to undocument right now
&gt; so it doesn&#39;t hold up 6.31.
&gt; 
&gt; Probably even better is to simply expose the META.yml hash generation
&gt; method and allow the user to override.  metafile_data&#40;&#41; would simply
&gt; return the data which MakeMaker then turns into a META.yml file. 
&gt; metafile_file&#40;&#41; would take that and turn it into a file. 
&gt; metafile_target would simply do the necessary make juju to paste the
&gt; metafile_file into the Makefile target.
&gt; 
&gt; This has the nice side-effect of MakeMaker not having to depend on
&gt; META.yml.  It can continue to use its crappy fake YAML generator and if
&gt; you write a metafile_data&#40;&#41; that does something more complicated you can
&gt; override metafile_file&#40;&#41; to use YAML.pm.
&gt; 
&gt; I&#39;m not holding up 6.31 for this, but its a very good idea.  Patches
&gt; welcome.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-237290" href="/Public/Bug/Display.html?id=21282#txn-237290">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;02&nbsp;14:49:53&nbsp;2006</span>
    <span class="description">mschwern [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-238162" href="/Public/Bug/Display.html?id=21282#txn-238162">#</a>      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;05&nbsp;12:36:36&nbsp;2006</span>
    <span class="description">a.r.ferreira [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> makemaker [...] perl.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21282] Split metafile generation into user overridable methods.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 5 Sep 2006 13:36:20 -0300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Adriano Ferreira&#34; &lt;a.r.ferreira [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/238162/100470/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/100470">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ok. That&#39;s my first attempt at the subject: &#34;Split metafile generation
into user overridable methods.&#34; The patch against
ExtUtils-MakeMaker-6.30_03 is attached.

Some explanations are in order:

&#40;1&#41; The patch proposes to change the nature of EXTRA_META from a
string into a hash ref
     - it also may be an array &#40;ref&#41; of pairs, if preserving the order
of appearance
     is desirable.

    Well, that&#39;s not compatible with 6.30_01, _02, and _03 with the
    &#34;paste this onto the end of the META.yml&#34; thing. But it was experimental
    and Schwern said that, as it was, it would not pass onto 6.31.

&#40;2&#41; There is now a method C&lt;metafile_data&gt; in ExtUtils::MM_Any
    which spits the data to be dumped to META.yml

    If EXTRA_META was set, the additional pairs are appended to
    the data. If EXTRA_META contains keys such as &#39;license&#39; and &#39;name&#39;
    which are already MakeMaker-generated you get a warning and
    the given values are ignored.

    The order of the fields in META.yml with respect to the previous EUMM
    versions are preserved.

    The additional keys &#39;installdirs&#39; and &#39;version_from&#39; that
    C&lt;metafile_target&gt; documented &#40;for example, in 6.30&#41; and which were missing
    in 6.30_01, _02, and _03 were restored. I don&#39;t know if the
    removal was intentional or not.

    I thought it would be a good idea to update the META.yml  specification
    link to:

        &#39;meta-spec&#39;  =&gt; {
            url      =&gt;
&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://module-build.sourceforge.net/META-spec-v1.1.html&#39;">http://module-build.sourceforge.net/META-spec-v1.1.html&#39;</a></span>,
            version  =&gt; 1.1*
        },

    But I am not sure since &#39;no_index&#39; is at v1.2. Another doubt is
    that 6.30_01 dumped the URL as

       url: &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://module-build.sourceforge.net/META-spec-new.html">http://module-build.sourceforge.net/META-spec-new.html</a></span>&gt;;

    Should it be that way?

&#40;3&#41; There is now a method C&lt;metafile_file&gt; in ExtUtils::MM_Any
    which transforms the metadata &#40;as returned by C&lt;metafile_data&gt;&#41;
    into &#40;fake&#41; YAML.

    Both metafile_data and metafile_file were abstracted from
    the previous code of C&lt;metafile_target&gt; and separated according
    to the description of RT ticket #21282.

    The dumper was coded to mimick exactly the previous
    behavior and extended to support nested hashes and strings
    of arrays. It was done to cover the basic cases of
    adding &#39;recommends&#39; and &#39;require_build&#39; hashes and
    &#39;no_index&#39; fields &#40;which contains arrays of strings&#41;.

    That simulation made the code a bit more complex than
    it could be. Among the features kept, there are:

    * the original order of the pairs in the root hash
      is preserved - so that what left metafile_data
      pass orderly to YAML.

    * keys and values in the root hash and &#39;requires&#39;
      are aligned:

          name:                Foo
          version:             1
          requires:
              Test::More:                 0
              File::Spec:                 0

    * &#39;requires&#39; pairs are sorted in a case-insensitive
      fashion &#40;as it was in previous versions&#41;

    New feature:

    * nested hashes sort with { $a cmp $b }

&#40;4&#41; By now, I wrote a test script &#39;t/metafile_file.t&#39;
    which tests the dumper via C&lt;ExtUtils::MM_Any::metafile_file&gt;.

Best regards,
Adriano Ferreira.


On 9/2/06, Michael_G_Schwern via RT &lt;bug-ExtUtils-MakeMaker@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21282">http://rt.cpan.org/Ticket/Display.html?id=21282</a></span> &gt;
&gt;
&gt; Reposting this for Adriano and makemaker@perl.org&#39;s benefit.
&gt;
&gt; On Sat Sep 02 14:45:01 2006, MSCHWERN wrote:
<div class="message-stanza open">&gt; &gt; Adriano Ferreira wrote:
<div class="message-stanza open">&gt; &gt; &gt; The following patch extends EXTRA_META to accept hash refs as well it
&gt; &gt; &gt; already accepts YAML-formatted text.
&gt; &gt; &gt;
&gt; &gt; &gt; This way I could write a Makefile.PL like
&gt; &gt; &gt;
&gt; &gt; &gt; use 5.006;
&gt; &gt; &gt; use ExtUtils::MakeMaker;
&gt; &gt; &gt;
&gt; &gt; &gt; WriteMakefile&#40;
&gt; &gt; &gt;    NAME              =&gt; &#39;Foo&#39;,
&gt; &gt; &gt;    VERSION           =&gt; &#39;42&#39;,
&gt; &gt; &gt;    EXTRA_META =&gt; {
&gt; &gt; &gt;        recommends =&gt; {
&gt; &gt; &gt;            &#39;Test::Pod&#39; =&gt; &#39;1.18&#39;,
&gt; &gt; &gt;            &#39;Test::Pod::Coverage&#39; =&gt; &#39;1.04&#39;,
&gt; &gt; &gt;        }
&gt; &gt; &gt;    }
&gt; &gt; &gt;
&gt; &gt; &gt; &#41;;
</div>&gt; &gt;
&gt; &gt; This is a much better idea than my &#34;paste this onto the end of the
&gt; &gt; META.yml&#34; which makes my feet itch and I&#39;m going to undocument right now
&gt; &gt; so it doesn&#39;t hold up 6.31.
&gt; &gt;
&gt; &gt; Probably even better is to simply expose the META.yml hash generation
&gt; &gt; method and allow the user to override.  metafile_data&#40;&#41; would simply
&gt; &gt; return the data which MakeMaker then turns into a META.yml file.
&gt; &gt; metafile_file&#40;&#41; would take that and turn it into a file.
&gt; &gt; metafile_target would simply do the necessary make juju to paste the
&gt; &gt; metafile_file into the Makefile target.
&gt; &gt;
&gt; &gt; This has the nice side-effect of MakeMaker not having to depend on
&gt; &gt; META.yml.  It can continue to use its crappy fake YAML generator and if
&gt; &gt; you write a metafile_data&#40;&#41; that does something more complicated you can
&gt; &gt; override metafile_file&#40;&#41; to use YAML.pm.
&gt; &gt;
&gt; &gt; I&#39;m not holding up 6.31 for this, but its a very good idea.  Patches
&gt; &gt; welcome.
</div>&gt;
&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/238162/100471/eumm.diff">Download eumm.diff</a><br />
<span class="downloadcontenttype">text/x-diff 16.5k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-240065" href="/Public/Bug/Display.html?id=21282#txn-240065">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;11&nbsp;16:31:12&nbsp;2006</span>
    <span class="description">mschwern [...] cpan.org -  Dependency by ticket #17332 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-240070" href="/Public/Bug/Display.html?id=21282#txn-240070">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;11&nbsp;16:40:25&nbsp;2006</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/240070/101681/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/101681">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Sep 05 12:36:36 2006, a.r.ferreira@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#40;2&#41; There is now a method C&lt;metafile_data&gt; in ExtUtils::MM_Any
&gt;     which spits the data to be dumped to META.yml
&gt; 
&gt;     If EXTRA_META was set, the additional pairs are appended to
&gt;     the data. If EXTRA_META contains keys such as &#39;license&#39; and &#39;name&#39;
&gt;     which are already MakeMaker-generated you get a warning and
&gt;     the given values are ignored.
</div>
I think they should override.  If they user wants to blow over what
MakeMaker generates, let them.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;     The additional keys &#39;installdirs&#39; and &#39;version_from&#39; that
&gt;     C&lt;metafile_target&gt; documented &#40;for example, in 6.30&#41; and which
&gt; were missing
&gt;     in 6.30_01, _02, and _03 were restored. I don&#39;t know if the
&gt;     removal was intentional or not.
</div>
The removal was intentional.  6.30_01 changed our META.yml to match META
spec and dropped those fields.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;     I thought it would be a good idea to update the META.yml
&gt; specification
&gt;     link to:
&gt; 
&gt;         &#39;meta-spec&#39;  =&gt; {
&gt;             url      =&gt;
&gt; &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://module-build.sourceforge.net/META-spec-v1.1.html&#39;">http://module-build.sourceforge.net/META-spec-v1.1.html&#39;</a></span>,
&gt;             version  =&gt; 1.1*
&gt;         },
&gt; 
&gt;     But I am not sure since &#39;no_index&#39; is at v1.2. Another doubt is
&gt;     that 6.30_01 dumped the URL as
&gt; 
&gt;        url: &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://module-build.sourceforge.net/META-spec-new.html">http://module-build.sourceforge.net/META-spec-new.html</a></span>&gt;;
&gt; 
&gt;     Should it be that way?
</div>
At the time that was the URL to the 1.1 spec-to-be.  Updating to 1.2 is
appreciated.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#40;3&#41; There is now a method C&lt;metafile_file&gt; in ExtUtils::MM_Any
&gt;     which transforms the metadata &#40;as returned by C&lt;metafile_data&gt;&#41;
&gt;     into &#40;fake&#41; YAML.
&gt; 
&gt;     Both metafile_data and metafile_file were abstracted from
&gt;     the previous code of C&lt;metafile_target&gt; and separated according
&gt;     to the description of RT ticket #21282.
&gt; 
&gt;     The dumper was coded to mimick exactly the previous
&gt;     behavior and extended to support nested hashes and strings
&gt;     of arrays. It was done to cover the basic cases of
&gt;     adding &#39;recommends&#39; and &#39;require_build&#39; hashes and
&gt;     &#39;no_index&#39; fields &#40;which contains arrays of strings&#41;.
&gt; 
&gt;     That simulation made the code a bit more complex than
&gt;     it could be. Among the features kept, there are:
&gt; 
&gt;     * the original order of the pairs in the root hash
&gt;       is preserved - so that what left metafile_data
&gt;       pass orderly to YAML.
&gt; 
&gt;     * keys and values in the root hash and &#39;requires&#39;
&gt;       are aligned:
&gt; 
&gt;           name:                Foo
&gt;           version:             1
&gt;           requires:
&gt;               Test::More:                 0
&gt;               File::Spec:                 0
&gt; 
&gt;     * &#39;requires&#39; pairs are sorted in a case-insensitive
&gt;       fashion &#40;as it was in previous versions&#41;
</div>
Excellent work, thank you.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;     New feature:
&gt; 
&gt;     * nested hashes sort with { $a cmp $b }
</div>
Sort them case insensitively, too.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#40;4&#41; By now, I wrote a test script &#39;t/metafile_file.t&#39;
&gt;     which tests the dumper via C&lt;ExtUtils::MM_Any::metafile_file&gt;.
</div>
Thank you.

As I mentioned, I&#39;m going to hold this until after 6.31.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-240073" href="/Public/Bug/Display.html?id=21282#txn-240073">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;11&nbsp;16:40:26&nbsp;2006</span>
    <span class="description">mschwern [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-240226" href="/Public/Bug/Display.html?id=21282#txn-240226">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;11&nbsp;20:12:02&nbsp;2006</span>
    <span class="description">a.r.ferreira [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21282] Split metafile generation into user overridable methods.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 11 Sep 2006 21:11:42 -0300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Adriano Ferreira&#34; &lt;a.r.ferreira [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/240226/101770/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/101770">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 9/11/06, Michael_G_Schwern via RT &lt;bug-ExtUtils-MakeMaker@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I think they should override.  If they user wants to blow over what
&gt; MakeMaker generates, let them.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The removal was intentional.  6.30_01 changed our META.yml to match META
&gt; spec and dropped those fields.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; At the time that was the URL to the 1.1 spec-to-be.  Updating to 1.2 is
&gt; appreciated.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Excellent work, thank you.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As I mentioned, I&#39;m going to hold this until after 6.31.
</div>
Thank you too. I will prepare a replacement patch with: &#40;1&#41; EXTRA_META
possibly overriding MakeMaker generated fields, &#40;2&#41; no installdirs and
version_from, &#40;3&#41; and meta-spec at v 1.2. An additional doubt I had
was about the way to dump the URL - I think 6.30 used this

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        url: &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://module-build.sourceforge.net/META-spec-new.html">http://module-build.sourceforge.net/META-spec-new.html</a></span>&gt;;
</div>
but 6.30_01, _02, _03 used this:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        url: <span class="clickylink"><a target="new" rel="nofollow" href="http://module-build.sourceforge.net/META-spec-new.html">http://module-build.sourceforge.net/META-spec-new.html</a></span>
</div>
What then?

Do you think I wait for 6.31 to gather together this new patch and
send you? Do you think I could make accessible via CPAN a distribution
such as ExtUtils-MakeMaker-FERREIRA-6.30_90 so that people could
experiment? Or that would be undesirable in general terms &#40;could lend
to confusion, etc.&#41;?

Adriano.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-240227" href="/Public/Bug/Display.html?id=21282#txn-240227">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;11&nbsp;20:12:02&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-240230" href="/Public/Bug/Display.html?id=21282#txn-240230">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;11&nbsp;20:30:36&nbsp;2006</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21282] Split metafile generation into user overridable methods.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 11 Sep 2006 20:30:01 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/240230/101773/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/101773">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">a.r.ferreira@gmail.com via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thank you too. I will prepare a replacement patch with: &#40;1&#41; EXTRA_META
&gt; possibly overriding MakeMaker generated fields, &#40;2&#41; no installdirs and
&gt; version_from, &#40;3&#41; and meta-spec at v 1.2. An additional doubt I had
&gt; was about the way to dump the URL - I think 6.30 used this
&gt; 
<div class="message-stanza open">&gt;&gt;        url: &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://module-build.sourceforge.net/META-spec-new.html">http://module-build.sourceforge.net/META-spec-new.html</a></span>&gt;;
</div>&gt; 
&gt; but 6.30_01, _02, _03 used this:
&gt; 
<div class="message-stanza open">&gt;&gt;        url: <span class="clickylink"><a target="new" rel="nofollow" href="http://module-build.sourceforge.net/META-spec-new.html">http://module-build.sourceforge.net/META-spec-new.html</a></span>
</div>&gt; 
&gt; What then?
</div>
Whatever way the META spec says to do &#40;which is the latter&#41;.  In fact, pull from the repository as I made some small changes to the meta stuff.
<span class="clickylink"><a target="new" rel="nofollow" href="http://svn.schwern.org/CPAN/ExtUtils-MakeMaker/trunk">http://svn.schwern.org/CPAN/ExtUtils-MakeMaker/trunk</a></span>


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Do you think I wait for 6.31 to gather together this new patch and
&gt; send you? Do you think I could make accessible via CPAN a distribution
&gt; such as ExtUtils-MakeMaker-FERREIRA-6.30_90 so that people could
&gt; experiment? Or that would be undesirable in general terms &#40;could lend
&gt; to confusion, etc.&#41;?
</div>
You can send the patch now, I&#39;m unlikely to do any major work to the metafile stuff.

If you really want to make a release you can, CPAN won&#39;t index it.  But I don&#39;t think its necessary.

If you&#39;re interested in doing more MakeMaker work I can give you a commit bit to the repo and you can work in a branch there.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-240247" href="/Public/Bug/Display.html?id=21282#txn-240247">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;11&nbsp;21:34:30&nbsp;2006</span>
    <span class="description">a.r.ferreira [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> makemaker [...] perl.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21282] Split metafile generation into user overridable methods.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 11 Sep 2006 22:34:12 -0300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org, &#34;Michael G Schwern&#34; &lt;mschwern [...] cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Adriano Ferreira&#34; &lt;a.r.ferreira [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/240247/101782/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/101782">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 644b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 9/11/06, Michael G Schwern via RT &lt;bug-ExtUtils-MakeMaker@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If you&#39;re interested in doing more MakeMaker work I can give you a commit bit to the repo and you can work in a branch there.
</div>
Indeed, I am interested. The metafile stuff was the first one I felt
confident to contribute with. But I think I can work on some other
issues as well.

For a long time, I have also been contemplating your offer to someone
to pick up ExtUtils::Manifest and some other modules. Yves took some
of them with ExtUtils::Install. Maybe I could do this now, after
showing you some patches. But I have to study the code closer yet.

Adriano.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links DeleteLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-255271" href="/Public/Bug/Display.html?id=21282#txn-255271">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;25&nbsp;03:17:24&nbsp;2006</span>
    <span class="description">mschwern [...] cpan.org -  Dependency by ticket #17332 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-295208" href="/Public/Bug/Display.html?id=21282#txn-295208">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;02&nbsp;20:24:01&nbsp;2007</span>
    <span class="description">a.r.ferreira [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21282] Split metafile generation into user overridable methods.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 2 Mar 2007 22:23:42 -0300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org, &#34;Michael G Schwern&#34; &lt;mschwern [...] cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Adriano Ferreira&#34; &lt;a.r.ferreira [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/295208/133535/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/133535">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 5.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">A few hundred years ago &#40;more exactly, September 2006&#41; I proposed a
patch for a better handling of META.yml generation for MakeMaker. And
then 6.31 came and then 6.32 a few days ago, but the patch rewrite
never reappeared, until now.

I just prepared a revised patch which incorporates your feedback, and
applies against revision 3935 at svn.schwern.org

Just to refresh, the patch features are:

&#40;1&#41; The patch proposes to change the nature of EXTRA_META
    from a string into a hash ref
    - it also may be an array &#40;ref&#41; of pairs, if preserving
    the order of appearance is desirable.

&#40;2&#41; There is now a method C&lt;metafile_data&gt; in ExtUtils::MM_Any
    which spits the data to be dumped to META.yml

   If EXTRA_META was set, the additional pairs are appended
   to the data. If EXTRA_META contains keys such as
   &#39;license&#39; and &#39;name&#39; which are already MakeMaker-generated
   you get a warning and the new values override
   the old ones &#40;you better know what you&#39;re doing&#41;.

   The order of the fields in META.yml with respect
   to the previous EUMM versions are preserved.

&#40;3&#41; There is now a method C&lt;metafile_file&gt; in ExtUtils::MM_Any
    which transforms the metadata &#40;as returned by C&lt;metafile_data&gt;&#41;
   into &#40;fake&#41; YAML.

   Both metafile_data and metafile_file were abstracted
   from the previous code of C&lt;metafile_target&gt; and
   separated according to the description of RT ticket #21282.

   The dumper was coded to mimick exactly the previous
   behavior and extended to support nested hashes and strings
   of arrays. It was done to cover the basic cases of
   adding &#39;recommends&#39; and &#39;require_build&#39; hashes and
   &#39;no_index&#39; fields &#40;which contains arrays of strings&#41;.

   That simulation made the code a bit more complex than
   it could be. Among the features kept, there are:

   * the original order of the pairs in the root hash
     is preserved - so that what left metafile_data
     pass orderly to YAML.

   * keys and values in the root hash and &#39;requires&#39;
     are aligned:

        name:                Foo
        version:             1
        requires:
            Test::More:                 0
            File::Spec:                 0

   * hash pairs are sorted in a case-insensitive
     fashion &#40;as &#39;requires&#39; was handled in previous versions&#41;

&#40;4&#41; By now, I wrote a test script &#39;t/metafile_file.t&#39;
   which tests the dumper via C&lt;ExtUtils::MM_Any::metafile_file&gt;.

I tried this patch successfully in a few Perl versions and
architectures &#40;most Windows and Cygwin&#41;.

Kind regards,
Adriano Ferreira

On 9/11/06, Michael_G_Schwern via RT &lt;bug-ExtUtils-MakeMaker@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21282">http://rt.cpan.org/Ticket/Display.html?id=21282</a></span> &gt;
&gt;
&gt; On Tue Sep 05 12:36:36 2006, a.r.ferreira@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; &#40;2&#41; There is now a method C&lt;metafile_data&gt; in ExtUtils::MM_Any
&gt; &gt;     which spits the data to be dumped to META.yml
&gt; &gt;
&gt; &gt;     If EXTRA_META was set, the additional pairs are appended to
&gt; &gt;     the data. If EXTRA_META contains keys such as &#39;license&#39; and &#39;name&#39;
&gt; &gt;     which are already MakeMaker-generated you get a warning and
&gt; &gt;     the given values are ignored.
</div>&gt;
&gt; I think they should override.  If they user wants to blow over what
&gt; MakeMaker generates, let them.
&gt;
&gt;
<div class="message-stanza open">&gt; &gt;     The additional keys &#39;installdirs&#39; and &#39;version_from&#39; that
&gt; &gt;     C&lt;metafile_target&gt; documented &#40;for example, in 6.30&#41; and which
&gt; &gt; were missing
&gt; &gt;     in 6.30_01, _02, and _03 were restored. I don&#39;t know if the
&gt; &gt;     removal was intentional or not.
</div>&gt;
&gt; The removal was intentional.  6.30_01 changed our META.yml to match META
&gt; spec and dropped those fields.
&gt;
&gt;
<div class="message-stanza open">&gt; &gt;     I thought it would be a good idea to update the META.yml
&gt; &gt; specification
&gt; &gt;     link to:
&gt; &gt;
&gt; &gt;         &#39;meta-spec&#39;  =&gt; {
&gt; &gt;             url      =&gt;
&gt; &gt; &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://module-build.sourceforge.net/META-spec-v1.1.html&#39;">http://module-build.sourceforge.net/META-spec-v1.1.html&#39;</a></span>,
&gt; &gt;             version  =&gt; 1.1*
&gt; &gt;         },
&gt; &gt;
&gt; &gt;     But I am not sure since &#39;no_index&#39; is at v1.2. Another doubt is
&gt; &gt;     that 6.30_01 dumped the URL as
&gt; &gt;
&gt; &gt;        url: &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://module-build.sourceforge.net/META-spec-new.html">http://module-build.sourceforge.net/META-spec-new.html</a></span>&gt;;
&gt; &gt;
&gt; &gt;     Should it be that way?
</div>&gt;
&gt; At the time that was the URL to the 1.1 spec-to-be.  Updating to 1.2 is
&gt; appreciated.
&gt;
&gt;
<div class="message-stanza open">&gt; &gt; &#40;3&#41; There is now a method C&lt;metafile_file&gt; in ExtUtils::MM_Any
&gt; &gt;     which transforms the metadata &#40;as returned by C&lt;metafile_data&gt;&#41;
&gt; &gt;     into &#40;fake&#41; YAML.
&gt; &gt;
&gt; &gt;     Both metafile_data and metafile_file were abstracted from
&gt; &gt;     the previous code of C&lt;metafile_target&gt; and separated according
&gt; &gt;     to the description of RT ticket #21282.
&gt; &gt;
&gt; &gt;     The dumper was coded to mimick exactly the previous
&gt; &gt;     behavior and extended to support nested hashes and strings
&gt; &gt;     of arrays. It was done to cover the basic cases of
&gt; &gt;     adding &#39;recommends&#39; and &#39;require_build&#39; hashes and
&gt; &gt;     &#39;no_index&#39; fields &#40;which contains arrays of strings&#41;.
&gt; &gt;
&gt; &gt;     That simulation made the code a bit more complex than
&gt; &gt;     it could be. Among the features kept, there are:
&gt; &gt;
&gt; &gt;     * the original order of the pairs in the root hash
&gt; &gt;       is preserved - so that what left metafile_data
&gt; &gt;       pass orderly to YAML.
&gt; &gt;
&gt; &gt;     * keys and values in the root hash and &#39;requires&#39;
&gt; &gt;       are aligned:
&gt; &gt;
&gt; &gt;           name:                Foo
&gt; &gt;           version:             1
&gt; &gt;           requires:
&gt; &gt;               Test::More:                 0
&gt; &gt;               File::Spec:                 0
&gt; &gt;
&gt; &gt;     * &#39;requires&#39; pairs are sorted in a case-insensitive
&gt; &gt;       fashion &#40;as it was in previous versions&#41;
</div>&gt;
&gt; Excellent work, thank you.
&gt;
&gt;
<div class="message-stanza open">&gt; &gt;     New feature:
&gt; &gt;
&gt; &gt;     * nested hashes sort with { $a cmp $b }
</div>&gt;
&gt; Sort them case insensitively, too.
&gt;
&gt;
<div class="message-stanza open">&gt; &gt; &#40;4&#41; By now, I wrote a test script &#39;t/metafile_file.t&#39;
&gt; &gt;     which tests the dumper via C&lt;ExtUtils::MM_Any::metafile_file&gt;.
</div>&gt;
&gt; Thank you.
&gt;
&gt; As I mentioned, I&#39;m going to hold this until after 6.31.
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/295208/133536/eumm.diff">Download eumm.diff</a><br />
<span class="downloadcontenttype">text/x-diff 17.4k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-505298" href="/Public/Bug/Display.html?id=21282#txn-505298">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;06&nbsp;05:58:19&nbsp;2008</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/505298/251167/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/251167">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 578b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve finally patched this in, sorry for taking so long.  I took a
different route following Module::Build&#39;s example.  Rather than have
users override a method, they can supply META_ADD and META_MERGE, like
Module::Build&#39;s meta_add and meta_merge attributes, to add/override or
merge in more metadata.  There shouldn&#39;t be any need for overriding the
methods.

Rather than repurpose EXTRA_META, it&#39;s now gone.

The work you did on the dumper was splendid.  I made a few formatting
tweaks to make the key length stuff a bit smarter, it now figures out a
good length automatically.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-505301" href="/Public/Bug/Display.html?id=21282#txn-505301">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;06&nbsp;05:59:18&nbsp;2008</span>
    <span class="description">mschwern [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.687657</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
