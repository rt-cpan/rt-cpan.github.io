<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #27 for URI: Query separator is hard-coded to be &#39;&#38;&#39;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #27 for URI: Query separator is hard-coded to be &#39;&#38;&#39;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/URI/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/URI/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/URI/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/URI/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/URI">URI CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">27</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">15 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/URI/Active/">URI</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">GAAS [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
siracusa [...] mindspring.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-34672-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-34673-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;08&nbsp;22:04:14&nbsp;2001</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Query separator is hard-coded to be &#39;&#38;&#39;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Query parameters must be separated with &#39;&#38;&#39;  Example:

    <span class="clickylink"><a target="new" rel="nofollow" href="http://foo.com/goo?a=1&#38;b=2&#38;c=3">http://foo.com/goo?a=1&#38;b=2&#38;c=3</a></span>

I&#39;d like other separators to be supported and/or specified per-URI.  Example:

    <span class="clickylink"><a target="new" rel="nofollow" href="http://foo.com/goo?a=1;b=2;c=3">http://foo.com/goo?a=1;b=2;c=3</a></span>
</div></div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;08&nbsp;22:37:49&nbsp;2001</span>
    <span class="description">gisle [...] ActiveState.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-URI [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [cpan #27] Query separator is hard-coded to be &#39;&#38;&#39;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Gisle Aas &lt;gisle [...] ActiveState.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> 08 Nov 2001 19:37:38 -0800</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Looks like a good idea!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;08&nbsp;22:43:51&nbsp;2001</span>
    <span class="description">GAAS [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;12&nbsp;12:09:22&nbsp;2001</span>
    <span class="description">darren [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">15 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[gisle@ActiveState.com - Thu Nov  8 22:37:49 2001]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Looks like a good idea!
&gt; 
</div>
I&#39;ve implemented something similar on my own to split query strings on
&#34;&#38;&#34; or &#34;;&#34;.  Attached is a quick patch for URI-1.17/URI/_query.pm, which
changes the split regex on line 48 to /[&#38;;]/ rather than just /&#38;/.

Hope that&#39;s helpful.

&#40;darren&#41;
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- _query.pm.orig	Wed Dec 12 12:04:34 2001
+++ _query.pm	Wed Dec 12 12:04:43 2001
@@ -45,7 +45,7 @@
     return if !defined&#40;$old&#41; || !length&#40;$old&#41; || !defined&#40;wantarray&#41;;
     return unless $old =~ /=/; # not a form
     map { s/\+/ /g; uri_unescape&#40;$_&#41; }
-         map { /=/ ? split&#40;/=/, $_, 2&#41; : &#40;$_ =&gt; &#39;&#39;&#41;} split&#40;/&#38;/, $old&#41;;
+         map { /=/ ? split&#40;/=/, $_, 2&#41; : &#40;$_ =&gt; &#39;&#39;&#41;} split&#40;/[&#38;;]/, $old&#41;;
 }
 
 # Handle ...?dog+bones type of query
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;27&nbsp;20:22:39&nbsp;2003</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> trevor.schellhorn-perl [...] marketingtips.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[DARREN - Wed Dec 12 12:09:22 2001]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [gisle@ActiveState.com - Thu Nov  8 22:37:49 2001]:
&gt; 
<div class="message-stanza open">&gt; &gt; Looks like a good idea!
&gt; &gt;
</div>&gt; 
&gt; I&#39;ve implemented something similar on my own to split query strings on
&gt; &#34;&#38;&#34; or &#34;;&#34;.  Attached is a quick patch for URI-1.17/URI/_query.pm,
&gt;    which
&gt; changes the split regex on line 48 to /[&#38;;]/ rather than just /&#38;/.
&gt; 
&gt; Hope that&#39;s helpful.
&gt; 
&gt; &#40;darren&#41;
</div>
When is this going to be implemented into the module?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;25&nbsp;05:39:29&nbsp;2005</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> srezic [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[guest - Mon Oct 27 20:22:39 2003]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [DARREN - Wed Dec 12 12:09:22 2001]:
&gt; 
<div class="message-stanza open">&gt; &gt; [gisle@ActiveState.com - Thu Nov  8 22:37:49 2001]:
&gt; &gt; 
<div class="message-stanza open">&gt; &gt; &gt; Looks like a good idea!
&gt; &gt; &gt;
</div>&gt; &gt; 
&gt; &gt; I&#39;ve implemented something similar on my own to split query strings on
&gt; &gt; &#34;&#38;&#34; or &#34;;&#34;.  Attached is a quick patch for URI-1.17/URI/_query.pm,
&gt; &gt;    which
&gt; &gt; changes the split regex on line 48 to /[&#38;;]/ rather than just /&#38;/.
&gt; &gt; 
&gt; &gt; Hope that&#39;s helpful.
&gt; &gt; 
&gt; &gt; &#40;darren&#41;
</div>&gt; 
&gt; When is this going to be implemented into the module?
</div>
I want just add that the current behavior means that URI.pm and CGI.pm
are not interoperable. Example:

$ perl -MCGI -MURI -e &#39;my $uri = URI-&gt;new;
$uri-&gt;query&#40;CGI-&gt;new&#40;{a=&gt;1,b=&gt;2}&#41;-&gt;query_string&#41;; warn join &#34;|&#34;,
$uri-&gt;query_form&#39;
a|1;b=2 at -e line 1.

One has to set &#34;oldstyle_urls&#34; to force using &#34;&#38;&#34; as a separator:

$ perl -MCGI=:oldstyle_urls -MURI -e &#39;my $uri = URI-&gt;new;
$uri-&gt;query&#40;CGI-&gt;new&#40;{a=&gt;1,b=&gt;2}&#41;-&gt;query_string&#41;; warn join &#34;|&#34;,
$uri-&gt;query_form&#39;
a|1|b|2 at -e line 1.

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;17&nbsp;20:31:26&nbsp;2005</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;d love to see this implemented.

My use case is I&#39;ve found that IE doesn&#39;t like URLs with semicolons in
meta refresh tags.  So I have a method which takes a URL and translates
the query string from using semicolons to ampersand separators.  Because
of this bug I can&#39;t use URI for this and have to instead do it by hand.

$ perl -wle &#39;use URI;  $u = URI-&gt;new&#40;shift&#41;;  print $u-&gt;query&#39;
<span class="clickylink"><a target="new" rel="nofollow" href="http://foo.com">http://foo.com</a></span>?foo=bar;baz=biff 
foo=bar
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;29&nbsp;06:56:09&nbsp;2005</span>
    <span class="description">ARISTOTLE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[gisle@ActiveState.com - Thu Nov  8 22:37:49 2001]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Looks like a good idea!
</div>
And it is. Has been for 4 years, but the ticket is still open. Is it
ever going to be addressed? Is there any issue that has caused this to
stall for so long? The relevant W3C recommendation dates back to 1997;
its somewhat embarrassing that this still isnt supported.

Unlike Michael, I want to *generate* URIs with semicolons. URI::Query
has this functionality, but Id rather stick with URI itself  if I can!
Currently, I instead bastardise CGI.pm as a URI generator, playing
various kinds of tricks on it, but that is anything but satisfactory.

Can I do something to help the along? If I supply a patch to add support
along with a full set of tests for this, will that speed up things?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;13&nbsp;00:07:31&nbsp;2006</span>
    <span class="description">DON [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The attached is a rather hackish method of overriding this behavoir in
query_form; most likely the seperator should be made a variable which
can be overridden or localized at will.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">package Debbugs::URI;

=head1 NAME

Debbugs::URI -- Derivative of URI which overrides the query_param
 method to use &#39;;&#39; instead of &#39;&#38;&#39; for separators.

=head1 SYNOPSIS

use Debbugs::URI;

=head1 DESCRIPTION

See L&lt;URI&gt; for more information.

=head1 BUGS

None known.

=cut

use warnings;
use strict;
use base qw&#40;URI URI::_query&#41;;

=head2 query_param

     $uri-&gt;query_form&#40; $key1 =&gt; $val1, $key2 =&gt; $val2, ... &#41;

Exactly like query_param in L&lt;URI&gt; except query elements are joined by
; instead of &#38;.

=cut

{

     package URI::_query;

     no warnings &#39;redefine&#39;;
     # Handle ...?foo=bar&#38;bar=foo type of query
     sub URI::_query::query_form {
	  my $self = shift;
	  my $old = $self-&gt;query;
	  if &#40;@_&#41; {
	       # Try to set query string
	       my @new = @_;
	       if &#40;@new == 1&#41; {
		    my $n = $new[0];
		    if &#40;ref&#40;$n&#41; eq &#34;ARRAY&#34;&#41; {
			 @new = @$n;
		    }
		    elsif &#40;ref&#40;$n&#41; eq &#34;HASH&#34;&#41; {
			 @new = %$n;
		    }
	       }
	       my @query;
	       while &#40;my&#40;$key,$vals&#41; = splice&#40;@new, 0, 2&#41;&#41; {
		    $key = &#39;&#39; unless defined $key;
		    $key =~ s/&#40;[;\/?:@&#38;=+,\$\[\]%]&#41;/$URI::Escape::escapes{$1}/g;
		    $key =~ s/ /+/g;
		    $vals = [ref&#40;$vals&#41; eq &#34;ARRAY&#34; ? @$vals : $vals];
		    for my $val &#40;@$vals&#41; {
			 $val = &#39;&#39; unless defined $val;
			 $val =~ s/&#40;[;\/?:@&#38;=+,\$\[\]%]&#41;/$URI::Escape::escapes{$1}/g;
			 $val =~ s/ /+/g;
			 push&#40;@query, &#34;$key=$val&#34;&#41;;
		    }
	       }
	       # This is the only line we have changed
	       $self-&gt;query&#40;@query ? join&#40;&#39;;&#39;, @query&#41; : undef&#41;;
	  }
	  return if !defined&#40;$old&#41; || !length&#40;$old&#41; || !defined&#40;wantarray&#41;;
	  return unless $old =~ /=/; # not a form
	  map { s/\+/ /g; uri_unescape&#40;$_&#41; }
	       map { /=/ ? split&#40;/=/, $_, 2&#41; : &#40;$_ =&gt; &#39;&#39;&#41;} split&#40;/&#38;/, $old&#41;;
     }
}






1;


__END__






</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;13&nbsp;00:07:32&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;27&nbsp;05:57:28&nbsp;2008</span>
    <span class="description">GAAS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">$u-&gt;query_form support for &#34;;&#34; was implemented in URI-1.37
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;27&nbsp;05:57:37&nbsp;2008</span>
    <span class="description">GAAS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
