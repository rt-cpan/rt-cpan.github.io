<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #26914 for CPANPLUS: CPANPLUS depending on Crypt::OpenPGP even when gpg is available.</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #26914 for CPANPLUS: CPANPLUS depending on Crypt::OpenPGP even when gpg is available.</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=CPANPLUS">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=CPANPLUS">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=CPANPLUS">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=CPANPLUS">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/CPANPLUS">CPANPLUS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">26914</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=CPANPLUS">CPANPLUS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mschwern [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-8270-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.78    </td>
  </tr>
  <tr id="CF-8271-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=26914">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-316586" href="/Public/Bug/Display.html?id=26914#txn-316586">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;03&nbsp;06:19:47&nbsp;2007</span>
    <span class="description">mschwern [...] cpan.org - Ticket #26913:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> CPANPLUS depending on Crypt::OpenPGP even when gpg is available.</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/316586/144317/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/144317">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 412b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">For some reason CPANPLUS is depending on Crypt::OpenPGP on my OS X
machine.  I do not have Crypt::OpenPGP installed and its a rather
complex module to install, it would be best if CPANPLUS didn&#39;t depend on
it.  I have a working gpg.

$ perl -MIPC::Cmd=can_run -wle &#39;print can_run&#40;&#34;gpg&#34;&#41;&#39;
/opt/local/bin/gpg

As the CPANPLUS dependency list is generated I&#39;m not sure where to look
to figure out what&#39;s gone wrong.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-316589" href="/Public/Bug/Display.html?id=26914#txn-316589">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;03&nbsp;06:32:38&nbsp;2007</span>
    <span class="description">kane [...] dwim.org - Ticket #26913:  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #26913] CPANPLUS depending on Crypt::OpenPGP even when gpg is available. </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 3 May 2007 12:27:32 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPANPLUS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jos I. Boumans&#34; &lt;kane [...] dwim.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/316589/144320/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/144320">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On 03 May 2007, at 12:21, Michael G Schwern via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Thu May 03 06:19:47 2007: Request 26913 was acted upon.
&gt; Transaction: Ticket created by MSCHWERN
&gt;        Queue: CPANPLUS
&gt;      Subject: CPANPLUS depending on Crypt::OpenPGP even when gpg is  
&gt; available.
&gt;    Broken in: 0.78
&gt;     Severity: Important
&gt;        Owner: Nobody
&gt;   Requestors: MSCHWERN@cpan.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=26913">http://rt.cpan.org/Ticket/Display.html?id=26913</a></span> &gt;
&gt;
&gt;
&gt; For some reason CPANPLUS is depending on Crypt::OpenPGP on my OS X
&gt; machine.  I do not have Crypt::OpenPGP installed and its a rather
&gt; complex module to install, it would be best if CPANPLUS didn&#39;t  
&gt; depend on
&gt; it.  I have a working gpg.
&gt;
&gt; $ perl -MIPC::Cmd=can_run -wle &#39;print can_run&#40;&#34;gpg&#34;&#41;&#39;
&gt; /opt/local/bin/gpg
&gt;
&gt; As the CPANPLUS dependency list is generated I&#39;m not sure where to  
&gt; look
&gt; to figure out what&#39;s gone wrong.
</div>
take a look at CPANPLUS::Selfupdate, around line 134. There it  
figures out
what dependencies are needed for signatures. It holds code like:

                 sub {
                     my $cb      = shift;
                     return if can_run&#40;&#39;gpg&#39;&#41; and
                         $cb-&gt;configure_object-&gt;get_conf&#40;&#39;prefer_bin&#39;&#41;;
                     return { &#39;Crypt::OpenPGP&#39; =&gt; &#39;0.0&#39; };
                 },

It basically says &#39;since you dont prefer /bin/gpg but would like  
signatures,
you should install crypt::openpgp&#39;... in reality, if you dont install  
the
crypt module, it&#39;ll just mention you dont have it, and fall back to  
gpg..

Any suggestions on improving the heuristics &#40;and that&#39;s all they  
are&#41;, are
welcome...

-- Jos
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-316590" href="/Public/Bug/Display.html?id=26914#txn-316590">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;03&nbsp;06:32:45&nbsp;2007</span>
    <span class="description">The RT System itself - Ticket #26913:  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Create even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-316597" href="/Public/Bug/Display.html?id=26914#txn-316597">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;03&nbsp;06:34:36&nbsp;2007</span>
    <span class="description">mschwern [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> CPANPLUS depending on Crypt::OpenPGP even when gpg is available.</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/316597/144323/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/144323">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 412b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">For some reason CPANPLUS is depending on Crypt::OpenPGP on my OS X
machine.  I do not have Crypt::OpenPGP installed and its a rather
complex module to install, it would be best if CPANPLUS didn&#39;t depend on
it.  I have a working gpg.

$ perl -MIPC::Cmd=can_run -wle &#39;print can_run&#40;&#34;gpg&#34;&#41;&#39;
/opt/local/bin/gpg

As the CPANPLUS dependency list is generated I&#39;m not sure where to look
to figure out what&#39;s gone wrong.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-316602" href="/Public/Bug/Display.html?id=26914#txn-316602">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;03&nbsp;06:35:44&nbsp;2007</span>
    <span class="description">mschwern [...] cpan.org - Ticket #26915:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> CPANPLUS depending on Crypt::OpenPGP even when gpg is available.</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/316602/144324/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/144324">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 412b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">For some reason CPANPLUS is depending on Crypt::OpenPGP on my OS X
machine.  I do not have Crypt::OpenPGP installed and its a rather
complex module to install, it would be best if CPANPLUS didn&#39;t depend on
it.  I have a working gpg.

$ perl -MIPC::Cmd=can_run -wle &#39;print can_run&#40;&#34;gpg&#34;&#41;&#39;
/opt/local/bin/gpg

As the CPANPLUS dependency list is generated I&#39;m not sure where to look
to figure out what&#39;s gone wrong.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-316755" href="/Public/Bug/Display.html?id=26914#txn-316755">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;04&nbsp;05:19:13&nbsp;2007</span>
    <span class="description">kane [...] cpan.org - Ticket #26913:  Merged into ticket #26914</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-316756" href="/Public/Bug/Display.html?id=26914#txn-316756">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;04&nbsp;05:19:20&nbsp;2007</span>
    <span class="description">kane [...] cpan.org - Ticket #26915:  Merged into ticket #26914</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-316757" href="/Public/Bug/Display.html?id=26914#txn-316757">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;04&nbsp;05:20:27&nbsp;2007</span>
    <span class="description">kane [...] cpan.org - Ticket #26915:  Merged into ticket #26914</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-316758" href="/Public/Bug/Display.html?id=26914#txn-316758">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;04&nbsp;05:20:29&nbsp;2007</span>
    <span class="description">kane [...] cpan.org -  Merged into ticket #26914</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-316816" href="/Public/Bug/Display.html?id=26914#txn-316816">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;04&nbsp;07:38:35&nbsp;2007</span>
    <span class="description">kane [...] cpan.org -  Status changed from &#39;new&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-316828" href="/Public/Bug/Display.html?id=26914#txn-316828">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;04&nbsp;08:14:35&nbsp;2007</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #26913] CPANPLUS depending on Crypt::OpenPGP even when gpg is available.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 04 May 2007 05:09:53 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPANPLUS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/316828/144449/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/144449">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">kane@dwim.org via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; take a look at CPANPLUS::Selfupdate, around line 134. There it  
&gt; figures out
&gt; what dependencies are needed for signatures. It holds code like:
&gt; 
&gt;                  sub {
&gt;                      my $cb      = shift;
&gt;                      return if can_run&#40;&#39;gpg&#39;&#41; and
&gt;                          $cb-&gt;configure_object-&gt;get_conf&#40;&#39;prefer_bin&#39;&#41;;
&gt;                      return { &#39;Crypt::OpenPGP&#39; =&gt; &#39;0.0&#39; };
&gt;                  },
&gt;
&gt; It basically says &#39;since you dont prefer /bin/gpg but would like  
&gt; signatures,
&gt; you should install crypt::openpgp&#39;... in reality, if you dont install  
&gt; the
&gt; crypt module, it&#39;ll just mention you dont have it, and fall back to  
&gt; gpg..
</div>
Problem with that is the automated installation of CPANPLUS means it tries to
install Crypt::OpenPGP which leads down a long road of compiling dependent XS
modules which often don&#39;t work leading to the CPANPLUS installation failing.
Right now Math::Pari and Crypt::RSA are haven&#39;t issues for me.

I also had a look at my prefer_bin setting.  Its the default of:
        &#39;prefer_bin&#39;                =&gt; &#40;eval {require Compress::Zlib; 1}?0:1&#41;
which seems a bit of an odd way to do it though I guess its as good as any.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Any suggestions on improving the heuristics &#40;and that&#39;s all they  
&gt; are&#41;, are welcome...
</div>
If Crypt::OpenPGP is not available, and gpg is, just use gpg.  Crypt::OpenPGP
is too complex to install.

Come to think of it, can&#39;t Module::Signature handle signatures?  I haven&#39;t
looked any deeper but it smells like a wheel is being reinvented.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-316829" href="/Public/Bug/Display.html?id=26914#txn-316829">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;04&nbsp;08:14:37&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-316832" href="/Public/Bug/Display.html?id=26914#txn-316832">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;04&nbsp;08:35:19&nbsp;2007</span>
    <span class="description">kane [...] xs4all.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #26913] CPANPLUS depending on Crypt::OpenPGP even when gpg is available. </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 4 May 2007 14:33:32 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPANPLUS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jos I. Boumans&#34; &lt;kane [...] xs4all.nl&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/316832/144452/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/144452">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On 04 May 2007, at 14:14, Michael G Schwern via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Problem with that is the automated installation of CPANPLUS means  
&gt; it tries to
&gt; install Crypt::OpenPGP which leads down a long road of compiling  
&gt; dependent XS
&gt; modules which often don&#39;t work leading to the CPANPLUS installation  
&gt; failing.
</div>
Understood. In this case, Crypt::OpenPGP is actually optional &#40;but  
there&#39;s no
good way to express that&#41;. The reason it&#39;s required is of these reasons:

  * your conf setting &#39;signature&#39; is true. This is because you have  
&#39;gpg&#39; or
    &#39;Crypt::OpenPGP&#39; installed &#40;default config heuristic&#41;, or enabled it
    explicitly at some point.
  * Because your &#39;prefer_bin&#39; setting is false &#40;again, heuristic or  
disabled
    exlicitly&#41; we list the perl module as a prereq.

Logically, this all makes sense. However arguably this is much more pain
than it&#39;s worth.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If Crypt::OpenPGP is not available, and gpg is, just use gpg.   
&gt; Crypt::OpenPGP
&gt; is too complex to install.
</div>
Agreed. Even though it&#39;s not in line with the rest of the heuristics,  
the
change you propose is probably far less painful. The worst that can  
happen
when we make this change is that you get a warning that you should  
install
Crypt::OpenPGP, it falls back to gpg and stuff keeps working anyway.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Come to think of it, can&#39;t Module::Signature handle signatures?  I  
&gt; haven&#39;t
&gt; looked any deeper but it smells like a wheel is being reinvented.
</div>
Not really. We use Module::Signature and /it/ in turn wants gpg or
Crypt::OpenPGP. We&#39;re basically making sure it works out without  
needing to
invoke it&#39;s hackery-pokery Makefile.PL/Module::AutoInstall stuff.

Take a peek:
   <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/src/AUDREYT/Module-Signature-0.55/Makefile.PL">http://search.cpan.org/src/AUDREYT/Module-Signature-0.55/Makefile.PL</a></span>

Thanks for your feedback,

--
Jos I. Boumans                 RIPE Network Coordination Center
Database Group Manager         Singel 258 Amsterdam NL
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.ripe.net">http://www.ripe.net</a></span>            +31 20 535 4444
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-316835" href="/Public/Bug/Display.html?id=26914#txn-316835">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;04&nbsp;10:10:25&nbsp;2007</span>
    <span class="description">kane [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-316964" href="/Public/Bug/Display.html?id=26914#txn-316964">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;04&nbsp;19:20:17&nbsp;2007</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #26914] Re: [rt.cpan.org #26913] CPANPLUS depending on Crypt::OpenPGP even when gpg is available.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 04 May 2007 16:19:02 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPANPLUS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/316964/144532/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/144532">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">kane@xs4all.nl via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Come to think of it, can&#39;t Module::Signature handle signatures?  I  
&gt;&gt; haven&#39;t
&gt;&gt; looked any deeper but it smells like a wheel is being reinvented.
</div>&gt; 
&gt; Not really. We use Module::Signature and /it/ in turn wants gpg or
&gt; Crypt::OpenPGP. We&#39;re basically making sure it works out without  
&gt; needing to
&gt; invoke it&#39;s hackery-pokery Makefile.PL/Module::AutoInstall stuff.
&gt; 
&gt; Take a peek:
&gt;    <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/src/AUDREYT/Module-Signature-0.55/Makefile.PL">http://search.cpan.org/src/AUDREYT/Module-Signature-0.55/Makefile.PL</a></span>
</div>
You&#39;re replacing its hackery-pokery with your own hackery-pokery?  Why do you
need to make sure a dependent module has its own dependencies working?  Why
are you side-stepping its install process?  Shouldn&#39;t it Just Work?  If it
doesn&#39;t, shouldn&#39;t the dependency be fixed instead of the problem oozing into
CPANPLUS &#40;and anyone else&#41;?

I really think this is a problem you should leave in the hands of another
module to reduce the complexity and responsibilities of CPANPLUS.

Take the hard problem.  Put it in a box.  Hand it to Audrey. :&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-316965" href="/Public/Bug/Display.html?id=26914#txn-316965">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;04&nbsp;19:20:26&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-317602" href="/Public/Bug/Display.html?id=26914#txn-317602">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;08&nbsp;04:59:38&nbsp;2007</span>
    <span class="description">kane [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.602486</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
