<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #85428 for CPAN-Reporter: metabase-profile fails on Strawberry Perl</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #85428 for CPAN-Reporter: metabase-profile fails on Strawberry Perl</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/CPAN-Reporter/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/CPAN-Reporter/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/CPAN-Reporter/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/CPAN-Reporter/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/cpan-testers/CPAN-Reporter/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/CPAN-Reporter">CPAN-Reporter CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">85428</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/CPAN-Reporter/Active/">CPAN-Reporter</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ben.aveling [...] optusnet.com.au

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
CHORNY [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-40518-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-40519-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;18&nbsp;18:29:03&nbsp;2013</span>
    <span class="description">ben.aveling [...] optusnet.com.au -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> metabase-profile fails on Strawberry Perl</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 19 May 2013 08:29:25 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN-Reporter [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ben Aveling &lt;ben.aveling [...] optusnet.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">

CPAN::Reporter seems to install fine &#40;using CPAN&#41;.

But when I enter &#34;o conf init test_report&#34;, CPAN runs metabase-profile, 
and fails.

It displays a prompt for Full Name, but won&#39;t accept any input.

Would you like to run &#39;metabase-profile&#39; now to create 
&#39;C:\Users\ben\.cpanreport
er\metabase_id.json&#39;? [y] y
Running [C:\STRAWB~1\perl\site\bin\metabase-profile.BAT --output 
C:\Users\ben\.c
panreporter\metabase_id.json --email bena.001@optusnet.com.au --secret 
05420000]
...
Enter full name:

After a while it seems to timeout and prompt for Transport &#40;See below&#41;. 
At which point, what I tried to enter as my Full Name gets entered as my 
transport.  If I didn&#39;t try to enter a full name, I can enter a 
Transport, but it then prompts for metabase-profile again, and again, 
until I hit ^C to break the loop.

Running metabase-profile from the command line works fine, after which 
&#34;o conf init test_report&#34; skips the metabase-profile section, and works.

     Regards, Ben

Distribution name and version:

CPAN::Reporter version 1.2010


Perl version

Strawberry Perl

perl 5, version 14, subversion 2 &#40;v5.14.2&#41; built for 
MSWin32-x64-multi-thread

Operating System vendor and version

Windows 7 Professional - Service Pack 1

MINGW32_NT-6.1 VI 1.0.12&#40;0.46/3/2&#41; 2011-07-20 17:52 i686 unknown

Exact cut and pasted error or warning messages

By default, CPAN::Reporter will prompt you for confirmation that
the test report should be sent before actually doing it. This
gives the opportunity to skip sending particular reports if
you need to &#40;e.g. if you caused the failure&#41;. This option takes
&#34;grade:action&#34; pairs.

&#40;Recommended: &#39;default:ask/yes pass/na:yes&#39;&#41;

send_report? [default:ask/yes pass/na:yes]

CPAN::Reporter sends your reports over HTTPS using Metabase. This option 
lets
you set a different uri, transport mechanism and metabase profile path. 
If you
are receiving HTTPS errors, you may change the uri to use plain HTTP, though
this is not recommended. Unless you know what you&#39;re doing, just accept
the default value.

&#40;Recommended: &#39;Metabase uri <span class="clickylink"><a target="new" rel="nofollow" href="https://metabase.cpantesters.org/api/v1/">https://metabase.cpantesters.org/api/v1/</a></span> 
id_file met
abase_id.json&#39;&#41;

transport? [metabase] Metabase uri 
<span class="clickylink"><a target="new" rel="nofollow" href="https://metabase.cpantesters.org/api/v1/">https://metabase.cpantesters.org/api/v1/</a></span> id_f
ile metabase_id.json

Would you like to run &#39;metabase-profile&#39; now to create 
&#39;C:\Users\ben\.cpanreport
er\metabase_id.json&#39;? [y] y
Running [C:\STRAWB~1\perl\site\bin\metabase-profile.BAT --output 
C:\Users\ben\.c
panreporter\metabase_id.json --email bena.001@optusnet.com.au --secret 
05420000]
...
Enter full name: Use of uninitialized value $answer in chomp at 
C:\STRAWB~1\perl
\site\bin\metabase-profile.BAT line 64.
missing required argument &#34;full_name&#34; when constructing 
Metabase::User::Profile
at C:/strawberry/perl/site/lib/Metabase/Fact.pm line 38
         Metabase::Fact::__validate_args&#40;&#39;Metabase::User::Profile&#39;, 
&#39;ARRAY&#40;0x2a25
480&#41;&#39;, &#39;HASH&#40;0x31ed40&#41;&#39;&#41; called at 
C:/strawberry/perl/site/lib/Metabase/User/Pro
file.pm line 21
         Metabase::User::Profile::create&#40;&#39;Metabase::User::Profile&#39;, 
&#39;email_addres
s&#39;, &#39;bena.001@optusnet.com.au&#39;, &#39;full_name&#39;, undef&#41; called at 
C:\STRAWB~1\perl\s
ite\bin\metabase-profile.BAT line 70
transport? [metabase] Metabase uri 
<span class="clickylink"><a target="new" rel="nofollow" href="https://metabase.cpantesters.org/api/v1/">https://metabase.cpantesters.org/api/v1/</a></span> id_f
ile metabase_id.json

Would you like to run &#39;metabase-profile&#39; now to create 
&#39;C:\Users\ben\.cpanreport
er\metabase_id.json&#39;? [y]
Running [C:\STRAWB~1\perl\site\bin\metabase-profile.BAT --output 
C:\Users\ben\.c
panreporter\metabase_id.json --email bena.001@optusnet.com.au --secret 
107f0000]
...
Enter full name: Use of uninitialized value $answer in chomp at 
C:\STRAWB~1\perl
\site\bin\metabase-profile.BAT line 64.
missing required argument &#34;full_name&#34; when constructing 
Metabase::User::Profile
at C:/strawberry/perl/site/lib/Metabase/Fact.pm line 38
         Metabase::Fact::__validate_args&#40;&#39;Metabase::User::Profile&#39;, 
&#39;ARRAY&#40;0x2995
480&#41;&#39;, &#39;HASH&#40;0x32ed40&#41;&#39;&#41; called at 
C:/strawberry/perl/site/lib/Metabase/User/Pro
file.pm line 21
         Metabase::User::Profile::create&#40;&#39;Metabase::User::Profile&#39;, 
&#39;email_addres
s&#39;, &#39;bena.001@optusnet.com.au&#39;, &#39;full_name&#39;, undef&#41; called at 
C:\STRAWB~1\perl\s
ite\bin\metabase-profile.BAT line 70
transport? [metabase] Metabase uri 
<span class="clickylink"><a target="new" rel="nofollow" href="https://metabase.cpantesters.org/api/v1/">https://metabase.cpantesters.org/api/v1/</a></span> id_f
ile metabase_id.json

Would you like to run &#39;metabase-profile&#39; now to create 
&#39;C:\Users\ben\.cpanreport
er\metabase_id.json&#39;? [y] n
You can create a Metabase profile by typing &#39;metabase-profile&#39; in your
command prompt and moving the resulting file to the location you specified.
If you did not specify an absolute path, put it in your .cpanreporter
directory.  You will need to do this before continuing.
transport? [metabase] Metabase uri 
<span class="clickylink"><a target="new" rel="nofollow" href="https://metabase.cpantesters.org/api/v1/">https://metabase.cpantesters.org/api/v1/</a></span> id_f
ile metabase_id.json

Would you like to run &#39;metabase-profile&#39; now to create 
&#39;C:\Users\ben\.cpanreport
er\metabase_id.json&#39;? [y]
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;10&nbsp;18:10:43&nbsp;2013</span>
    <span class="description">CHORNY [...] cpan.org -  Cc CHORNY added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;10&nbsp;18:41:31&nbsp;2013</span>
    <span class="description">CHORNY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">metabase-profile is run from CPAN::Reporter::Config, sub _generate_profile. It uses IPC::Cmd to run metabase-profile which uses IO::Prompt::Tiny. IO::Prompt::Tiny assumes default when STDOUT is not a terminal. For me it is not terminal. So metabase-profile misleadingly prints &#39;Enter full name:&#39; if it was not possible to extract full name from e-mail. Bit it does exit immediately.

Ben, did you use last version of CPAN::Reporter when you have seen this bug?

-- 
Alexandr Ciornii, <span class="clickylink"><a target="new" rel="nofollow" href="http://chorny.net">http://chorny.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;10&nbsp;18:41:31&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;03&nbsp;13:50:58&nbsp;2016</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ticket migrated to github as <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cpan-testers/CPAN-Reporter/issues/71">https://github.com/cpan-testers/CPAN-Reporter/issues/71</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;03&nbsp;13:51:08&nbsp;2016</span>
    <span class="description">dagolden [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
