<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #55215 for Sys-Syslog: Sys::Syslog might call exit which triggers DESTROY</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #55215 for Sys-Syslog: Sys::Syslog might call exit which triggers DESTROY</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Sys-Syslog">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Sys-Syslog">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Sys-Syslog">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Sys-Syslog">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Sys-Syslog">Sys-Syslog CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">55215</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Sys-Syslog">Sys-Syslog</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
alex-berger [...] gmx.ch

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-30616-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.27    </td>
  </tr>
  <tr id="CF-30617-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.29    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




destructor.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/742464/383833/destructor.pl">
Thu Mar 04 08:06:20 2010 (4.2k) by alex-berger [...] gmx.ch
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=55215">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-742464" href="/Public/Bug/Display.html?id=55215#txn-742464">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;04&nbsp;08:06:18&nbsp;2010</span>
    <span class="description">alex-berger [...] gmx.ch -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Sys::Syslog might call exit which triggers DESTROY</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/742464/383832/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/383832">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Perl Version: 5.8.8
Distribution name: Sys::Syslog
Operatingsystem: HP-UX, Solaris, Linux, possibliy any POSIX system 

There is a serious problem &#40;bug&#41; in the subroutine &#39;_syslog_send_console&#39; 
of the perl module Sys::Syslog. The problem arises due to the usage of
exit to terminate a forked child process. Calling exit will trigger 
calls to any DESTROY methods of objects that are still alive at the 
time of the exit call. This script can be used to reproduce this problems.

Use this command to reproduce the problem:

   destructor.pl fork

Use this commands to try possible solutions for the problem

   destructor.pl fork exec

   destructor.pl fork _exit

In our special case, our appliaction opened a database connection &#40;DBI +
Oracle DBD&#41; 
and then called the syslog subroutine from Sys::Syslog. After this call
to syslog
our appliaction tried to use the DIB connection which produced an error
as the
connection has been closed by the child process created in syslog &#40;when
it triggered
the DESTROY method of the oracle connection instance&#41;.

For better understanding here is the chronology of the problem:

PARENT CHILD ACTION
X            open DBI connection
X            call syslog&#40;...&#41; which in turn calls _syslog_send_console
X            fork and waitpid
       X           write log message to /dev/console
       X     call exit&#40;...&#41; 
       X     exit triggers DESTROY for all alive objects &#40;class instances&#41;
       X     oracle DBD DESTROY tells the database server that the
connection
             must be closed, then it closes the client side of the
connection
             &#40;system call close&#40;...&#41;&#41; while the database server closes the
             server side of the connection.
X            The parent process tries to used the DBI connection which
results
             in an error as it has been closed on the server side. The
parent&#39;s
             filedescriptor is still open and valid but the peer &#40;database&#41;
             has closed the connection.

So in order to solve this problem it must be prevented that the child
process
triggers the calls to DESTROY when it terminates.

In my opinion there are three possible solutions to the problem &#40;bugfix&#41;:

1. Do not use fork at all in _syslog_send_console
2. Do not call exit&#40;...&#41; in _syslog_send_console use POSIX::_exit&#40;...&#41;
instead.
   _exit&#40;...&#41; will not trigger any calls to DESTROY.
3. Do not call exit&#40;...&#41; in _syslog_send_console use exec instead, for
example
   exec &#39;echo&#39;, this will prevent any calls to DESTROY.

So my suggestion is to change the following subroutine from Sys::Syslog 

        sub _syslog_send_console {
            my &#40;$buf&#41; = @_;
            chop&#40;$buf&#41;; # delete the NUL from the end
            # The console print is a method which could block
            # so we do it in a child process and always return success
            # to the caller.
            if &#40;my $pid = fork&#41; {
        
                if &#40;$options{nowait}&#41; {
                    return 1;
                } else {
                    if &#40;waitpid&#40;$pid, 0&#41; &gt;= 0&#41; {
                        return &#40;$? &gt;&gt; 8&#41;;
                    } else {
                        # it&#39;s possible that the caller has other
                        # plans for SIGCHLD, so let&#39;s not interfere
                        return 1;
                    }
                }
            } else {
                if &#40;open&#40;CONS, &#34;&gt;/dev/console&#34;&#41;&#41; {
                    my $ret = print CONS $buf . &#34;\r&#34;;  # XXX: should this be \x0A ?
                    exit $ret if defined $pid;
                    close CONS;
                }
                exit if defined $pid;
            }
        }

to this:

        sub _syslog_send_console {
            my &#40;$buf&#41; = @_;
            chop&#40;$buf&#41;; # delete the NUL from the end
            # The console print is a method which could block
            # so we do it in a child process and always return success
            # to the caller.
            if &#40;my $pid = fork&#41; {
        
                if &#40;$options{nowait}&#41; {
                    return 1;
                } else {
                    if &#40;waitpid&#40;$pid, 0&#41; &gt;= 0&#41; {
                        return &#40;$? &gt;&gt; 8&#41;;
                    } else {
                        # it&#39;s possible that the caller has other
                        # plans for SIGCHLD, so let&#39;s not interfere
                        return 1;
                    }
                }
            } else {
                use POSIX;
                if &#40;open&#40;CONS, &#34;&gt;/dev/console&#34;&#41;&#41; {
                    my $ret = print CONS $buf . &#34;\r&#34;;  # XXX: should this be \x0A ?
                    POSIX::_exit&#40;$ret&#41; if defined $pid;
                    close CONS;
                }
                POSIX::_exit&#40;0&#41; if defined $pid;
            }
        }
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> destructor.pl</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/742464/383833/destructor.pl">Download destructor.pl</a><br />
<span class="downloadcontenttype">text/x-perl 4.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl -w

package XX;

sub DESTROY { 
	my $self = shift;
	printf &#34;%s.DESTROY&#40;pid=%s&#41;\n&#34;, $self, $$;
}

package main;

my $x = bless {}, &#39;XX&#39;;
if &#40; $ARGV[0] &#38;&#38; $ARGV[0] eq &#39;fork&#39; &#41; {
 my $pid = fork;
 if &#40; $pid &#41; {
   waitpid&#40;$pid, 0&#41;;
 } else {
 	 if &#40; $ARGV[1] &#38;&#38; $ARGV[1] eq &#39;exec&#39; &#41; {
 	 	  exec &#39;echo&#39;;
 	 } elsif &#40; $ARGV[1] &#38;&#38; $ARGV[1] eq &#39;_exit&#39; &#41; {
 	 	  use POSIX;
   		POSIX::_exit&#40;0&#41;;
 	 }
	 exit&#40;0&#41;;
 }
}
exit&#40;0&#41;;

__DATA__

There is a serious problem &#40;bug&#41; in the subroutine &#39;_syslog_send_console&#39; 
of the perl module Sys::Syslog. The problem arises due to the usage of
exit to terminate a forked child process. Calling exit will trigger 
calls to any DESTROY methods of objects that are still alive at the 
time of the exit call. This script can be used to reproduce this problems.

Use this command to reproduce the problem:

   destructor.pl fork

Use this commands to try possible solutions for the problem

   destructor.pl fork exec

   destructor.pl fork _exit

In our special case, our appliaction opened a database connection &#40;DBI + Oracle DBD&#41; 
and then called the syslog subroutine from Sys::Syslog. After this call to syslog
our appliaction tried to use the DIB connection which produced an error as the
connection has been closed by the child process created in syslog &#40;when it triggered
the DESTROY method of the oracle connection instance&#41;.

For better understanding here is the chronology of the problem:

PARENT CHILD ACTION
X            open DBI connection
X            call syslog&#40;...&#41; which in turn calls _syslog_send_console
X            fork and waitpid
       X	   write log message to /dev/console
       X     call exit&#40;...&#41; 
       X     exit triggers DESTROY for all alive objects &#40;class instances&#41;
       X     oracle DBD DESTROY tells the database server that the connection
             must be closed, then it closes the client side of the connection
             &#40;system call close&#40;...&#41;&#41; while the database server closes the
             server side of the connection.
X            The parent process tries to used the DBI connection which results
             in an error as it has been closed on the server side. The parent&#39;s
             filedescriptor is still open and valid but the peer &#40;database&#41;
             has closed the connection.

So in order to solve this problem it must be prevented that the child process
triggers the calls to DESTROY when it terminates.

In my opinion there are three possible solutions to the problem &#40;bugfix&#41;:

1. Do not use fork at all in _syslog_send_console
2. Do not call exit&#40;...&#41; in _syslog_send_console use POSIX::_exit&#40;...&#41; instead.
   _exit&#40;...&#41; will not trigger any calls to DESTROY.
3. Do not call exit&#40;...&#41; in _syslog_send_console use exec instead, for example
   exec &#39;echo&#39;, this will prevent any calls to DESTROY.

So my suggestion is to change the following subroutine from Sys::Syslog 

	sub _syslog_send_console {
	    my &#40;$buf&#41; = @_;
	    chop&#40;$buf&#41;; # delete the NUL from the end
	    # The console print is a method which could block
	    # so we do it in a child process and always return success
	    # to the caller.
	    if &#40;my $pid = fork&#41; {
	
		if &#40;$options{nowait}&#41; {
		    return 1;
		} else {
		    if &#40;waitpid&#40;$pid, 0&#41; &gt;= 0&#41; {
		    	return &#40;$? &gt;&gt; 8&#41;;
		    } else {
			# it&#39;s possible that the caller has other
			# plans for SIGCHLD, so let&#39;s not interfere
			return 1;
		    }
		}
	    } else {
	        if &#40;open&#40;CONS, &#34;&gt;/dev/console&#34;&#41;&#41; {
		    my $ret = print CONS $buf . &#34;\r&#34;;  # XXX: should this be \x0A ?
		    exit $ret if defined $pid;
		    close CONS;
		}
		exit if defined $pid;
	    }
	}

to this:

	sub _syslog_send_console {
	    my &#40;$buf&#41; = @_;
	    chop&#40;$buf&#41;; # delete the NUL from the end
	    # The console print is a method which could block
	    # so we do it in a child process and always return success
	    # to the caller.
	    if &#40;my $pid = fork&#41; {
	
		if &#40;$options{nowait}&#41; {
		    return 1;
		} else {
		    if &#40;waitpid&#40;$pid, 0&#41; &gt;= 0&#41; {
		    	return &#40;$? &gt;&gt; 8&#41;;
		    } else {
			# it&#39;s possible that the caller has other
			# plans for SIGCHLD, so let&#39;s not interfere
			return 1;
		    }
		}
	    } else {
	    	use POSIX;
	        if &#40;open&#40;CONS, &#34;&gt;/dev/console&#34;&#41;&#41; {
		    my $ret = print CONS $buf . &#34;\r&#34;;  # XXX: should this be \x0A ?
		    POSIX::_exit&#40;$ret&#41; if defined $pid;
		    close CONS;
		}
		POSIX::_exit&#40;0&#41; if defined $pid;
	    }
	}</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-924771" href="/Public/Bug/Display.html?id=55215#txn-924771">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;18&nbsp;10:22:13&nbsp;2011</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #55215] Sys::Syslog might call exit which triggers DESTROY </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 18 Apr 2011 16:22:21 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> SÃ©bastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/924771/479827/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/479827">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 727b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,


Apologies for the delay before addressing this problem.


Alexander Berger wrote via RT:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There is a serious problem &#40;bug&#41; in the subroutine  
&gt; &#39;_syslog_send_console&#39;
&gt; of the perl module Sys::Syslog. The problem arises due to the usage of
&gt; exit to terminate a forked child process. Calling exit will trigger
&gt; calls to any DESTROY methods of objects that are still alive at the
&gt; time of the exit call. This script can be used to reproduce this  
&gt; problems.
</div>

Indeed, you are right. the calls to exit&#40;&#41; have been replaced with  
POSIX::_exit&#40;&#41; in release 0.29, just uploaded on the CPAN, sponsored  
by the Perl QA Hackathon 2011 in Amsterdam.


-- 
SÃ©bastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-924774" href="/Public/Bug/Display.html?id=55215#txn-924774">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;18&nbsp;10:22:14&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-924996" href="/Public/Bug/Display.html?id=55215#txn-924996">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;18&nbsp;18:43:18&nbsp;2011</span>
    <span class="description">SAPER [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-924998" href="/Public/Bug/Display.html?id=55215#txn-924998">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;18&nbsp;18:43:18&nbsp;2011</span>
    <span class="description">SAPER [...] cpan.org -  Fixed in 0.29 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.367001</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
