<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #121072 for clearpress: Clearpress application failures under Apache httpd mpm-worker</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #121072 for clearpress: Clearpress application failures under Apache httpd mpm-worker</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=clearpress">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=clearpress">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=clearpress">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=clearpress">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/clearpress">clearpress CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">121072</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=clearpress">clearpress</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">rmp [...] psyphi.net
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mg8 [...] sanger.ac.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-43844-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-43845-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
v476.1.1    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=121072">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1718064" href="/Public/Bug/Display.html?id=121072#txn-1718064">#</a>      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;11&nbsp;09:45:34&nbsp;2017</span>
    <span class="description">mg8 [...] sanger.ac.uk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Clearpress application failures under Apache httpd mpm-worker</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 11 Apr 2017 14:18:36 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-clearpress [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marina Gourtovaia &lt;mg8 [...] sanger.ac.uk&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1718064/923520/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/923520">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 615b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Under mpm-worker multiple threads are using the same Perl interpreter.
Please see <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/wtsi-npg/npg_tracking/pull/389">https://github.com/wtsi-npg/npg_tracking/pull/389</a></span> for a fix, 
which configures mpm-worker to be more like mpm-prefork

OS Ubuntu 12.04.2 LTS &#40;GNU/Linux 3.2.0-75-generic x86_64&#41;
Apache httpd version 2.4.23
mod_perl version 2.0.10
Perl version 5.22.2 compiled to use threads



-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1718064/923521/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/923521">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.1k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1718680" href="/Public/Bug/Display.html?id=121072#txn-1718680">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;14&nbsp;05:16:27&nbsp;2017</span>
    <span class="description">rmp [...] psyphi.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1718680/923875/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/923875">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 600b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Marina,

Very interesting, Thanks. I knew it didn&#39;t work under mpm_worker &#40;only mpm_prefork&#41; but I&#39;d ever pinned it to Config::IniFiles - will look into a fix.

R.

On Tue Apr 11 09:45:34 2017, mg8@sanger.ac.uk wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Under mpm-worker multiple threads are using the same Perl interpreter.
&gt; Please see <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/wtsi-npg/npg_tracking/pull/389">https://github.com/wtsi-npg/npg_tracking/pull/389</a></span> for a fix, 
&gt; which configures mpm-worker to be more like mpm-prefork
&gt; 
&gt; OS Ubuntu 12.04.2 LTS &#40;GNU/Linux 3.2.0-75-generic x86_64&#41;
&gt; Apache httpd version 2.4.23
&gt; mod_perl version 2.0.10
&gt; Perl version 5.22.2 compiled to use threads
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1718681" href="/Public/Bug/Display.html?id=121072#txn-1718681">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;14&nbsp;05:16:27&nbsp;2017</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1718688" href="/Public/Bug/Display.html?id=121072#txn-1718688">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;14&nbsp;06:46:08&nbsp;2017</span>
    <span class="description">mg8 [...] sanger.ac.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #121072] Clearpress application failures under Apache httpd mpm-worker</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 14 Apr 2017 11:45:50 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-clearpress [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marina Gourtovaia &lt;mg8 [...] sanger.ac.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1718688/923881/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/923881">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Roger

Hope you are well

On 14/04/2017 10:16, Roger Pettett via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=121072">https://rt.cpan.org/Ticket/Display.html?id=121072</a></span> &gt;
&gt;
&gt; Hi Marina,
&gt;
&gt; Very interesting, Thanks. I knew it didn&#39;t work under mpm_worker &#40;only mpm_prefork&#41; but I&#39;d ever pinned it to Config::IniFiles - will look into a fix.
</div>Thanks for looking into this. Initially I though to rewrite the util &#40;I 
could have brought all Clearpress util into our util and changed it&#41;, 
but then decided that there is no guarantee that all other CPAN 
dependencies Clearpress or our code are using  will behave. So we 
configured mpm-worker to use up to 50 children, one thread per child 
effectively reducing it to what mpm-prefork does. Since it&#39;s impossible 
to switch between prefork and worker without recompilation and we wanted 
to maintain one httpd executable between all our applications and worker 
is better for some of them, we decided to stick to worker and use this 
strange configuration of ours.

Regards

Marina
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; R.
&gt;
&gt; On Tue Apr 11 09:45:34 2017, mg8@sanger.ac.uk wrote:
<div class="message-stanza open">&gt;&gt; Under mpm-worker multiple threads are using the same Perl interpreter.
&gt;&gt; Please see <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/wtsi-npg/npg_tracking/pull/389">https://github.com/wtsi-npg/npg_tracking/pull/389</a></span> for a fix,
&gt;&gt; which configures mpm-worker to be more like mpm-prefork
&gt;&gt;
&gt;&gt; OS Ubuntu 12.04.2 LTS &#40;GNU/Linux 3.2.0-75-generic x86_64&#41;
&gt;&gt; Apache httpd version 2.4.23
&gt;&gt; mod_perl version 2.0.10
&gt;&gt; Perl version 5.22.2 compiled to use threads
&gt;&gt;
&gt;&gt;
</div>&gt;
&gt;
</div>


-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1735243" href="/Public/Bug/Display.html?id=121072#txn-1735243">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;26&nbsp;12:20:49&nbsp;2017</span>
    <span class="description">rmp [...] psyphi.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1735243/933081/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/933081">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I don&#39;t believe this is the fault of Config::IniFiles. I think it&#39;s do to with the $INSTANCES management in ClearPress::util which has classically assumed on request per-process.

I just pushed a change to #dev branch which uses the Apache request object to assign a per-request UUID and key off that when available. &#34;Classic&#34; mpm_prefork behaviour should be preserved.

Note that if you haven&#39;t used recent versions, other recent changes modify response-header handling considerably but that behaviour should be unrelated to this.

I haven&#39;t done extensive testing with this dev version yet but I believe the same change should be functional under both mpm_worker and mpm_event.

R.

On Tue Apr 11 09:45:34 2017, mg8@sanger.ac.uk wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Under mpm-worker multiple threads are using the same Perl interpreter.
&gt; Please see <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/wtsi-npg/npg_tracking/pull/389">https://github.com/wtsi-npg/npg_tracking/pull/389</a></span> for a fix, 
&gt; which configures mpm-worker to be more like mpm-prefork
&gt; 
&gt; OS Ubuntu 12.04.2 LTS &#40;GNU/Linux 3.2.0-75-generic x86_64&#41;
&gt; Apache httpd version 2.4.23
&gt; mod_perl version 2.0.10
&gt; Perl version 5.22.2 compiled to use threads
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1735246" href="/Public/Bug/Display.html?id=121072#txn-1735246">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;26&nbsp;12:36:56&nbsp;2017</span>
    <span class="description">rmp [...] psyphi.net -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1735260" href="/Public/Bug/Display.html?id=121072#txn-1735260">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;26&nbsp;12:56:02&nbsp;2017</span>
    <span class="description">mg8 [...] sanger.ac.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #121072] Clearpress application failures under Apache httpd mpm-worker</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 26 Jun 2017 17:37:30 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-clearpress [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marina Gourtovaia &lt;mg8 [...] sanger.ac.uk&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1735260/933089/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/933089">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 998b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Roger

On 26/06/2017 17:20, Roger Pettett via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=121072">https://rt.cpan.org/Ticket/Display.html?id=121072</a></span> &gt;
&gt;
&gt; I don&#39;t believe this is the fault of Config::IniFiles.
</div>Recently, I&#39;ve seen all sorts of random failures.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I think it&#39;s do to with the $INSTANCES management in ClearPress::util which has classically assumed on request per-process.
&gt;
&gt; I just pushed a change to #dev branch which uses the Apache request object to assign a per-request UUID and key off that when available. &#34;Classic&#34; mpm_prefork behaviour should be preserved.
</div>Thanks for this. I&#39;ll retest everything mid-July. In particular, it 
would be interesting to see if the latest httpd server will work with 
new changes; we had to stop on 2.4.23

Marina







-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1735260/933090/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/933090">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.7k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1739897" href="/Public/Bug/Display.html?id=121072#txn-1739897">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;18&nbsp;16:16:36&nbsp;2017</span>
    <span class="description">rmp [...] psyphi.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1739897/935778/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/935778">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 98b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">appears stable in:
 - 2.4.26 macOS
 - 2.4.18 linux &#40;ubuntu xenial&#41;
 - 2.4.7 linux &#40;ubuntu trusty&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1739899" href="/Public/Bug/Display.html?id=121072#txn-1739899">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;18&nbsp;16:16:36&nbsp;2017</span>
    <span class="description">rmp [...] psyphi.net -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1739901" href="/Public/Bug/Display.html?id=121072#txn-1739901">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;18&nbsp;16:16:36&nbsp;2017</span>
    <span class="description">rmp [...] psyphi.net -  Fixed in v476.1.1 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.470457</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
