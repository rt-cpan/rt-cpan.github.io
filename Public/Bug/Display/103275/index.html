<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #103275 for DateTime-TimeZone: Add DateTime::TimeZone::Local::Win32 to prereqs on windows builds?</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #103275 for DateTime-TimeZone: Add DateTime::TimeZone::Local::Win32 to prereqs on windows builds?</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DateTime-TimeZone/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DateTime-TimeZone/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DateTime-TimeZone/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DateTime-TimeZone/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/houseabsolute/DateTime-TimeZone/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/DateTime-TimeZone">DateTime-TimeZone CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">103275</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DateTime-TimeZone/Active/">DateTime-TimeZone</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ether [...] cpan.org

<br />
WolfSage [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
DAPINK [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-9962-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-9963-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;02&nbsp;14:10:13&nbsp;2015</span>
    <span class="description">WolfSage [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Add DateTime::TimeZone::Local::Win32 to prereqs on windows builds?</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On windows, if you have DateTime::TimeZone installed, but not DateTime::TimeZone::Local::Win32, this apparently fails:

  DateTime-&gt;now&#40;time_zone =&gt; &#39;local&#39;&#41;;

with:

  Cannot determine local time zone

Perhaps this module should dynamically add DateTime::TimeZone::Local::Win32 to the dependency chain during Makefile.PL if it&#39;s being run on windows &#40;if ::Win32 is truly needed to function there&#41;.

-- Matthew Horsfall &#40;alh&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;17&nbsp;03:57:18&nbsp;2015</span>
    <span class="description">dolmen [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza">Le 2015-04-02 20:10:13, WOLFSAGE a &eacute;crit&nbsp;:<br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On windows, if you have DateTime::TimeZone installed, but not<br>

&gt; DateTime::TimeZone::Local::Win32, this apparently fails:<br>

&gt;<br>

&gt; DateTime-&gt;now(time_zone =&gt; &#39;local&#39;);<br>

&gt;<br>

&gt; with:<br>

&gt;<br>

&gt; Cannot determine local time zone<br>

&gt;<br>

&gt; Perhaps this module should dynamically add<br>

&gt; DateTime::TimeZone::Local::Win32 to the dependency chain during<br>

&gt; Makefile.PL if it&#39;s being run on windows (if ::Win32 is truly needed<br>

&gt; to function there).<br>
</div><br>

But there is a circular dependency issue:<br>

<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=101589">https://rt.cpan.org/Ticket/Display.html?id=101589</a></span><br>

<br>

<br>

<br>

--&nbsp;<br>

Olivier Mengu&eacute; - <span class="clickylink"><a target="new" rel="nofollow" href="http://perlresume.org/DOLMEN">http://perlresume.org/DOLMEN</a></span> - <span class="clickylink"><a target="new" rel="nofollow" href="https://gratipay.com/dolmen/">https://gratipay.com/dolmen/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;17&nbsp;03:57:18&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;16&nbsp;17:30:08&nbsp;2015</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This looks to be the root cause of: <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/rjbs/Dist-Zilla/issues/450">https://github.com/rjbs/Dist-Zilla/issues/450</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;16&nbsp;17:34:25&nbsp;2015</span>
    <span class="description">DROLSKY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jun 16 17:30:08 2015, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This looks to be the root cause of: <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/rjbs/Dist-">https://github.com/rjbs/Dist-</a></span>
&gt; Zilla/issues/450
</div>
Would reversing the dep direction improve things? We want to avoid a circular dep so it&#39;s one or the other.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;16&nbsp;17:39:36&nbsp;2015</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Perhaps this module should dynamically add
&gt; &gt; DateTime::TimeZone::Local::Win32 to the dependency chain during
&gt; &gt; Makefile.PL if it&#39;s being run on windows &#40;if ::Win32 is truly needed
&gt; &gt; to function there&#41;.
</div>&gt; 
&gt; But there is a circular dependency issue:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=101589">https://rt.cpan.org/Ticket/Display.html?id=101589</a></span>
</div>

This is awful.  Is there another solution other than merging DateTime::TimeZone::Local::Win32 into the main DateTime-TimeZone installation?

At the moment, win32 installations are not properly able to use timezones if they are missing DateTime::TimeZone::Local::Win32.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;16&nbsp;17:52:53&nbsp;2015</span>
    <span class="description">MITHALDU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jun 16 23:34:25 2015, DROLSKY wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Would reversing the dep direction improve things? We want to avoid a
&gt; circular dep so it&#39;s one or the other.
</div>
Look at this:

<span class="clickylink"><a target="new" rel="nofollow" href="http://grep.cpan.me/?q=DateTime%3A%3ATimeZone%3A%3ALocal%3A%3AWin32">http://grep.cpan.me/?q=DateTime%3A%3ATimeZone%3A%3ALocal%3A%3AWin32</a></span>

No module that uses ::Local::Win32 doesn&#39;t also already dep on DateTime::TimeZone. This means it&#39;s safe to remove the dependency in ::Local::Win32 and have DT::TZ pull it in if needed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;16&nbsp;17:54:16&nbsp;2015</span>
    <span class="description">ether [...] cpan.org -  Requestor ETHER added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;16&nbsp;18:14:38&nbsp;2015</span>
    <span class="description">MITHALDU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Retracting my previous comment, due to an issue haarg pointed out. Having TZ dep on 

Start with a system with neither of ::TZ or ::Win32 installed.

Try to install ::TZ.

::TZ demands ::Win32 as dep.

::Win32 tries to install itself, but cannot run its tests since those require ::TZ.

The situation is complexly broken. There are two possibilities in moving forward from here:

1. Rework ::Win32 so its tests do not require ::TZ. You would need to spool out the overwritten methods, test that, and then trust that the inclusion of them into ::Win32 works.

2. Merge it back into ::TZ and use the normal method of skipping things on Win32.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;16&nbsp;20:26:22&nbsp;2015</span>
    <span class="description">DROLSKY [...] cpan.org -  Cc DAPINK added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;16&nbsp;20:26:35&nbsp;2015</span>
    <span class="description">DROLSKY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jun 16 18:14:38 2015, MITHALDU wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Retracting my previous comment, due to an issue haarg pointed out.
&gt; Having TZ dep on
&gt; 
&gt; Start with a system with neither of ::TZ or ::Win32 installed.
&gt; 
&gt; Try to install ::TZ.
&gt; 
&gt; ::TZ demands ::Win32 as dep.
&gt; 
&gt; ::Win32 tries to install itself, but cannot run its tests since those
&gt; require ::TZ.
&gt; 
&gt; The situation is complexly broken. There are two possibilities in
&gt; moving forward from here:
&gt; 
&gt; 1. Rework ::Win32 so its tests do not require ::TZ. You would need to
&gt; spool out the overwritten methods, test that, and then trust that the
&gt; inclusion of them into ::Win32 works.
&gt; 
&gt; 2. Merge it back into ::TZ and use the normal method of skipping
&gt; things on Win32.
</div>
#2 isn&#39;t a great solution. I&#39;m not in a position to maintain Win32 code since I don&#39;t develop on it.

#1 is a lot of work for David Pinkowitz.

#3 is to simply make most or all of the tests for Local::Win32 author tests that implicitly rely on DT::TZ being installed. That&#39;s probably the easiest change. Then I can make DT::TZ conditionally require Local::Win32 on Win32 boxes and Local::Win32 can stop depending on DT::TZ.

David, what do you think?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;16&nbsp;21:44:54&nbsp;2015</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; #3 is to simply make most or all of the tests for Local::Win32 author
&gt; tests that implicitly rely on DT::TZ being installed. That&#39;s probably
&gt; the easiest change. Then I can make DT::TZ conditionally require
&gt; Local::Win32 on Win32 boxes and Local::Win32 can stop depending on
&gt; DT::TZ.
</div>
Instead of making them author tests, they should skip if DT::TZ isn&#39;t yet installed. That way not all test coverage is lost - the tests will still be run if upgrading an existing installation. Coverage from CPAN Testers smokers is invaluable for finding and fixing issues.

However, I don&#39;t understand the objection to absorbing the win32 code -- I don&#39;t think this should be used as a factor in the decision. The community is available to help, as they are when win32-specific issues arise in our other code.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;16&nbsp;22:12:51&nbsp;2015</span>
    <span class="description">DROLSKY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jun 16 21:44:54 2015, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
<div class="message-stanza open">&gt; &gt; #3 is to simply make most or all of the tests for Local::Win32 author
&gt; &gt; tests that implicitly rely on DT::TZ being installed. That&#39;s probably
&gt; &gt; the easiest change. Then I can make DT::TZ conditionally require
&gt; &gt; Local::Win32 on Win32 boxes and Local::Win32 can stop depending on
&gt; &gt; DT::TZ.
</div>&gt; 
&gt; Instead of making them author tests, they should skip if DT::TZ isn&#39;t
&gt; yet installed. That way not all test coverage is lost - the tests will
&gt; still be run if upgrading an existing installation. Coverage from CPAN
&gt; Testers smokers is invaluable for finding and fixing issues.
&gt; 
&gt; However, I don&#39;t understand the objection to absorbing the win32 code
&gt; -- I don&#39;t think this should be used as a factor in the decision. The
&gt; community is available to help, as they are when win32-specific issues
&gt; arise in our other code.
</div>
The problem is that I can&#39;t _test_ the Win32 code easily, so I&#39;m not in a good position to accept patches, test patches, etc. If the code has a separate maintainer who can do the work on a Win32 system, it seems to me that&#39;s the ideal situation.

This code _used_ to be part of the core DT::TZ distro and we had exactly this problem. If fixing the prereq situation is enough to help other distros, I think that&#39;s the best solution.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;17&nbsp;11:50:57&nbsp;2015</span>
    <span class="description">rt-cpan [...] trout.me.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jun 16 20:26:35 2015, DROLSKY wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; #3 is to simply make most or all of the tests for Local::Win32 author
&gt; tests that implicitly rely on DT::TZ being installed. That&#39;s probably
&gt; the easiest change. Then I can make DT::TZ conditionally require
&gt; Local::Win32 on Win32 boxes and Local::Win32 can stop depending on
&gt; DT::TZ.
</div>
That&#39;s basically how I&#39;d&#39;ve expected it to be done when you originally split it out, but y&#39;know, hindsight, 20/20, etc.

I&#39;d vote for &#34;tests must run in author mode, tests try and run under AUTOMATED_TESTING to provide cpan tester coverage, tests skip for &#39;normal&#39; users to minimise the likelihood of confusion for them&#34;. Seems like a decent compromise between the available possibilities.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;17&nbsp;12:24:11&nbsp;2015</span>
    <span class="description">DAPINK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jun 16 21:44:54 2015, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
<div class="message-stanza open">&gt; &gt; #3 is to simply make most or all of the tests for Local::Win32 author
&gt; &gt; tests that implicitly rely on DT::TZ being installed. That&#39;s probably
&gt; &gt; the easiest change. Then I can make DT::TZ conditionally require
&gt; &gt; Local::Win32 on Win32 boxes and Local::Win32 can stop depending on
&gt; &gt; DT::TZ.
</div>&gt; 
&gt; Instead of making them author tests, they should skip if DT::TZ isn&#39;t
&gt; yet installed. That way not all test coverage is lost - the tests will
&gt; still be run if upgrading an existing installation. Coverage from CPAN
&gt; Testers smokers is invaluable for finding and fixing issues.
&gt; 
&gt; However, I don&#39;t understand the objection to absorbing the win32 code
&gt; -- I don&#39;t think this should be used as a factor in the decision. The
&gt; community is available to help, as they are when win32-specific issues
&gt; arise in our other code.
</div>

I will update the Win32 code to run the tests condtionally on the existence of the DT::TZ module. I agree we need the test coverage as it is usually through user testing where I can identify that Microsoft updated its time zone implementation to add or modify zones.

As far as keeping the distros separate, there are practical reasons beyond that fact that Dave is not set up to test on Windows. The other is that DT::TZ mostly updates when there are changes to the TZ database. The Win32 code does not update as often, but is expected to update when Microsoft updates Windows time zones, which usually happens no more than a few times a year at most. Sure, it is possible to do them together, but separately, it seems more straightforward.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;22&nbsp;03:55:38&nbsp;2015</span>
    <span class="description">DAPINK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jun 17 12:24:11 2015, DAPINK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue Jun 16 21:44:54 2015, ETHER wrote:
<div class="message-stanza open">&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; #3 is to simply make most or all of the tests for Local::Win32
&gt; &gt; &gt; author
&gt; &gt; &gt; tests that implicitly rely on DT::TZ being installed. That&#39;s
&gt; &gt; &gt; probably
&gt; &gt; &gt; the easiest change. Then I can make DT::TZ conditionally require
&gt; &gt; &gt; Local::Win32 on Win32 boxes and Local::Win32 can stop depending on
&gt; &gt; &gt; DT::TZ.
</div>&gt; &gt;
&gt; &gt; Instead of making them author tests, they should skip if DT::TZ isn&#39;t
&gt; &gt; yet installed. That way not all test coverage is lost - the tests
&gt; &gt; will
&gt; &gt; still be run if upgrading an existing installation. Coverage from
&gt; &gt; CPAN
&gt; &gt; Testers smokers is invaluable for finding and fixing issues.
&gt; &gt;
&gt; &gt; However, I don&#39;t understand the objection to absorbing the win32 code
&gt; &gt; -- I don&#39;t think this should be used as a factor in the decision. The
&gt; &gt; community is available to help, as they are when win32-specific
&gt; &gt; issues
&gt; &gt; arise in our other code.
</div>&gt; 
&gt; 
&gt; I will update the Win32 code to run the tests condtionally on the
&gt; existence of the DT::TZ module. I agree we need the test coverage as
&gt; it is usually through user testing where I can identify that Microsoft
&gt; updated its time zone implementation to add or modify zones.
&gt; 
&gt; As far as keeping the distros separate, there are practical reasons
&gt; beyond that fact that Dave is not set up to test on Windows. The other
&gt; is that DT::TZ mostly updates when there are changes to the TZ
&gt; database. The Win32 code does not update as often, but is expected to
&gt; update when Microsoft updates Windows time zones, which usually
&gt; happens no more than a few times a year at most. Sure, it is possible
&gt; to do them together, but separately, it seems more straightforward.
</div>
I&#39;ve made a new release of DateTime::TimeZone::Local::Win32, removing the prerequisites to DateTime::TimeZone and DateTime.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;26&nbsp;21:12:05&nbsp;2015</span>
    <span class="description">stro [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve made a new release of DateTime::TimeZone::Local::Win32, removing
&gt; the prerequisites to DateTime::TimeZone and DateTime.
</div>
See RT#105519 

-- 
Serguei Trouchelle
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;18&nbsp;11:09:24&nbsp;2015</span>
    <span class="description">DROLSKY [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
