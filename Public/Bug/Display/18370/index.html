<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #18370 for svk: svk removing files NOT under revision control</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #18370 for svk: svk removing files NOT under revision control</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/svk/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/svk/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/svk/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/svk/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/svk">svk CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">18370</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/svk/Active/">svk</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
NKH [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-30282-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-30283-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;26&nbsp;05:20:26&nbsp;2006</span>
    <span class="description">NKH [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> svk removing files NOT under revision control</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Don&#39;t remember the version something over the 1.xx series.

The log says it all.

I was trying to push svk company wide &#40;hundreds of people&#41; when this
happened. I can accept this kind of errors &#40;not eften&#41; for my hobby
projects but this is completely unacceptable when serious buisiness is
depending on the revision control tool, useless to say it killed the
very idea of using svk at a bigger scale. This week svk is going to be
shut down and the project moved to ClearCase &#40;not only because of that
error&#41;. Pitty, I liked svk.

Please, please, add tests for the &#39;rm&#39; command or tell me what error I made.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> svk_rm.txt</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">### Here is the log of the commands I ran. I&#39;ve added some annotations which should be obvious


[nadim@nadim perl_modules]$ svk depotmap -l
Depot                   Path
============================================================
//                      /home/nadim/.svk/local
[nadim@nadim perl_modules]$ svk co // rev_pbs
Syncing //&#40;/&#41; in /devel/perl_modules/rev_pbs to 129.
A   rev_pbs/local
A   rev_pbs/local/PBS
A   rev_pbs/local/PBS/trunk

... a bunch more files ...

A   rev_pbs/local/VIP/trunk/vip_test2.pl
A   rev_pbs/local/VIP/trunk/README

### I actully did RTFM first, it said &#34;Remove versioned item&#34;

[nadim@nadim perl_modules]$ svk help rm
NAME

    delete - Remove versioned item

SYNOPSIS

     delete [PATH...]
     delete [DEPOTPATH...]

OPTIONS

     -K [--keep-local]      : do not remove the local file
     -m [--message] MESSAGE : specify commit message MESSAGE
     -F [--file] FILENAME   : read commit message from FILENAME
     --template             : use the specified message as the template to edit
     --encoding ENC         : treat -m/-F value as being in charset encoding ENC
     -P [--patch] NAME      : instead of commit, save this change as a patch
     -S [--sign]            : sign this change
     -C [--check-only]      : try operation but make no changes
     --direct               : commit directly even if the path is mirrored

ALIASES

     del, remove, rm


### time to remove ./rev_pbs/ and all that&#39;s under

[nadim@nadim perl_modules]$ svk rm rev_pbs/
D   cpan-faq.html

### insert another 12_000 files here, all this takes under a second of course 

D   Text-Editor-Vip/_build/prereqs
D   Text-Editor-Vip/_build/cleanup
Can&#39;t remove file /devel/perl_modules/PerlBuildSystem/blib/lib/auto/PBS/WatchClient/autosplit.ix &#40;Permission denied&#41; at /usr/lib/perl5/vendor_perl/5.8.7/SVK/XD.pm line 743
Can&#39;t remove directory /devel/perl_modules/PerlBuildSystem/blib/lib/auto/PBS/WatchClient &#40;Directory not empty&#41; at /usr/lib/perl5/vendor_perl/5.8.7/SVK/XD.pm line 743
Can&#39;t remove directory /devel/perl_modules/PerlBuildSystem/blib/lib/auto/PBS &#40;Directory not empty&#41; at /usr/lib/perl5/vendor_perl/5.8.7/SVK/XD.pm line 743
Can&#39;t remove directory /devel/perl_modules/PerlBuildSystem/blib/lib/auto &#40;Directory not empty&#41; at /usr/lib/perl5/vendor_perl/5.8.7/SVK/XD.pm line 743
Can&#39;t remove directory /devel/perl_modules/PerlBuildSystem/blib/lib &#40;Directory not empty&#41; at /usr/lib/perl5/vendor_perl/5.8.7/SVK/XD.pm line 743
Can&#39;t remove directory /devel/perl_modules/PerlBuildSystem/blib &#40;Directory not empty&#41; at /usr/lib/perl5/vendor_perl/5.8.7/SVK/XD.pm line 743
Can&#39;t remove directory /devel/perl_modules/PerlBuildSystem &#40;Directory not empty&#41; at /usr/lib/perl5/vendor_perl/5.8.7/SVK/XD.pm line 743
Can&#39;t remove directory /devel/perl_modules &#40;Directory not empty&#41; at /usr/lib/perl5/vendor_perl/5.8.7/SVK/XD.pm line 743



### here I&#39;m nervous, very nervous

[nadim@nadim devel]$ tree ../perl_modules/
perl_modules/
`-- PerlBuildSystem
    `-- blib
        `-- lib
            `-- auto
                `-- PBS
                    `-- WatchClient
                        `-- autosplit.ix

6 directories, 1 file

[nadim@nadim perl_modules]$ svk help rm
NAME

    delete - Remove versioned item

SYNOPSIS

     delete [PATH...]
     delete [DEPOTPATH...]

OPTIONS

     -K [--keep-local]      : do not remove the local file
     -m [--message] MESSAGE : specify commit message MESSAGE
     -F [--file] FILENAME   : read commit message from FILENAME
     --template             : use the specified message as the template to edit
     --encoding ENC         : treat -m/-F value as being in charset encoding ENC
     -P [--patch] NAME      : instead of commit, save this change as a patch
     -S [--sign]            : sign this change
     -C [--check-only]      : try operation but make no changes
     --direct               : commit directly even if the path is mirrored

ALIASES

     del, remove, rm

### here I&#39;m extremely upset that a command that should &#34;Remove versioned item&#34; and given 
### a path, just erased NON VERSIONED ITEMS in a directory that was NOT given as path
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;29&nbsp;06:26:43&nbsp;2007</span>
    <span class="description">http://matthewd.net/ -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Matthew Draper &lt;matthew [...] trebex.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Mar 26 05:20:26 2006, NKH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Please, please, add tests for the &#39;rm&#39; command or tell me what 
&gt; error I made.
</div>
Appears to have been caused first by the fact that you ran &#39;svk rm&#39; on
the checkout path itself, rather than a subdirectory, and second &#40;and
most destructively&#41; because it was a checkout of // -- which was never
going to work anyway; Subversion won&#39;t let you delete the root of a
repository.

I&#39;ve just committed TODO tests demonstrating this issue.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;29&nbsp;06:26:45&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
