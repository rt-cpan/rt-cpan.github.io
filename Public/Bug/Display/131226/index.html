<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #131226 for Devel-Declare: 0.006_021 breaks MSCHWERN/perl5i-v2.13.2.tar.gz</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #131226 for Devel-Declare: 0.006_021 breaks MSCHWERN/perl5i-v2.13.2.tar.gz</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Devel-Declare/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Devel-Declare/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Devel-Declare/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Devel-Declare/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Devel-Declare">Devel-Declare CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">131226</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Devel-Declare/Active/">Devel-Declare</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
SREZIC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
gregoa [...] cpan.org

<br />
khw [...] cpan.org

<br />
mschwern [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-45484-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.006_021    </td>
  </tr>
  <tr id="CF-45485-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;23&nbsp;17:30:28&nbsp;2019</span>
    <span class="description">SREZIC [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> mschwern [...] cpan.org, khw [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0.006_021 breaks MSCHWERN/perl5i-v2.13.2.tar.gz</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">With the latest devel version of Devel-Declare, several tests fail like this:

...
Couldn&#39;t find declarator &#39;func&#39; at /home/cpansand/.cpan/build/2019122323/Devel-Declare-0.006_021-0/blib/lib/Devel/Declare/Context/Simple.pm line 47.
        Devel::Declare::Context::Simple::skip_declarator&#40;perl5i::2::Signatures=HASH&#40;0x22fbb48&#41;&#41; called at /home/cpansand/.cpan/build/2019122323/Devel-Declare-0.006_021-0/blib/lib/Devel/Declare/MethodInstaller/Simple.pm line 62
        Devel::Declare::MethodInstaller::Simple::parser&#40;perl5i::2::Signatures=HASH&#40;0x22fbb48&#41;, &#34;func&#34;, 4, 1&#41; called at /home/cpansand/.cpan/build/2019122323/Devel-Declare-0.006_021-0/blib/lib/Devel/Declare/MethodInstaller/Simple.pm line 25
        Devel::Declare::MethodInstaller::Simple::__ANON__&#40;&#34;func&#34;, 4&#41; called at /home/cpansand/.cpan/build/2019122323/Devel-Declare-0.006_021-0/blib/lib/Devel/Declare.pm line 278
        Devel::Declare::linestr_callback&#40;&#34;const&#34;, &#34;func&#34;, 4&#41; called at t/Meta/methods.t line 115
t/Meta/methods.t .............
Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
No subtests run
...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;26&nbsp;05:52:17&nbsp;2019</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> khw [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2019-12-23 17:30:28, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; With the latest devel version of Devel-Declare, several tests fail
&gt; like this:
&gt; 
&gt; ...
&gt; Couldn&#39;t find declarator &#39;func&#39; at
&gt; /home/cpansand/.cpan/build/2019122323/Devel-Declare-0.006_021-
&gt; 0/blib/lib/Devel/Declare/Context/Simple.pm line 47.
&gt;         Devel::Declare::Context::Simple::skip_declarator&#40;perl5i::2::Signatures=HASH&#40;0x22fbb48&#41;&#41;
&gt; called at /home/cpansand/.cpan/build/2019122323/Devel-Declare-
&gt; 0.006_021-0/blib/lib/Devel/Declare/MethodInstaller/Simple.pm line 62
&gt;         Devel::Declare::MethodInstaller::Simple::parser&#40;perl5i::2::Signatures=HASH&#40;0x22fbb48&#41;,
&gt; &#34;func&#34;, 4, 1&#41; called at /home/cpansand/.cpan/build/2019122323/Devel-
&gt; Declare-0.006_021-0/blib/lib/Devel/Declare/MethodInstaller/Simple.pm
&gt; line 25
&gt;         Devel::Declare::MethodInstaller::Simple::__ANON__&#40;&#34;func&#34;, 4&#41;
&gt; called at /home/cpansand/.cpan/build/2019122323/Devel-Declare-
&gt; 0.006_021-0/blib/lib/Devel/Declare.pm line 278
&gt;         Devel::Declare::linestr_callback&#40;&#34;const&#34;, &#34;func&#34;, 4&#41; called at
&gt; t/Meta/methods.t line 115
&gt; t/Meta/methods.t .............
&gt; Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
&gt; No subtests run
&gt; ...
</div>
There are more CPAN distributions affected with similar error messages &#40;&#34;Couldn&#39;t find declarator ...&#34;&#41;:

      * App-Lingua-BO-Wylie-Transliteration-0.1.0
        : Error:  Couldn&#39;t find declarator &#39;method&#39;
      * CFOUTS/DateTime-Format-EraLegis-0.011.tar.gz
        : Error:  Couldn&#39;t find declarator &#39;method&#39;
      * CSSON/Dist-Zilla-Plugin-MapMetro-MakeLinePod-0.1202.tar.gz
        : Couldn&#39;t find declarator &#39;qqi&#39;
      * CSSON/OpenGbg-0.1404.tar.gz
        : Couldn&#39;t find declarator &#39;qs&#39;
      * TOBYINK/PerlX-QuoteOperator-Inescapable-0.002.tar.gz
        : Couldn&#39;t find declarator &#39;Q&#39;

There are two further with different error messages:

      * EXODIST/Test2-Plugin-SpecDeclare-0.000003.tar.gz
        : Useless use of numeric gt &#40;&gt;&#41; in void context
      * WKI/Catalyst-View-ByCode-0.28.tar.gz
        : died: Can&#39;t use an undefined value as a subroutine reference
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;26&nbsp;15:52:28&nbsp;2020</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> khw [...] cpan.org, mschwern [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2019-12-23 17:30:28, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; With the latest devel version of Devel-Declare, several tests fail
&gt; like this:
&gt; 
&gt; ...
&gt; Couldn&#39;t find declarator &#39;func&#39; at
&gt; /home/cpansand/.cpan/build/2019122323/Devel-Declare-0.006_021-
&gt; 0/blib/lib/Devel/Declare/Context/Simple.pm line 47.
&gt;         Devel::Declare::Context::Simple::skip_declarator&#40;perl5i::2::Signatures=HASH&#40;0x22fbb48&#41;&#41;
&gt; called at /home/cpansand/.cpan/build/2019122323/Devel-Declare-
&gt; 0.006_021-0/blib/lib/Devel/Declare/MethodInstaller/Simple.pm line 62
&gt;         Devel::Declare::MethodInstaller::Simple::parser&#40;perl5i::2::Signatures=HASH&#40;0x22fbb48&#41;,
&gt; &#34;func&#34;, 4, 1&#41; called at /home/cpansand/.cpan/build/2019122323/Devel-
&gt; Declare-0.006_021-0/blib/lib/Devel/Declare/MethodInstaller/Simple.pm
&gt; line 25
&gt;         Devel::Declare::MethodInstaller::Simple::__ANON__&#40;&#34;func&#34;, 4&#41;
&gt; called at /home/cpansand/.cpan/build/2019122323/Devel-Declare-
&gt; 0.006_021-0/blib/lib/Devel/Declare.pm line 278
&gt;         Devel::Declare::linestr_callback&#40;&#34;const&#34;, &#34;func&#34;, 4&#41; called at
&gt; t/Meta/methods.t line 115
&gt; t/Meta/methods.t .............
&gt; Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
&gt; No subtests run
&gt; ...
</div>
This happens also with stable Devel-Declare-0.006022
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;03&nbsp;09:50:27&nbsp;2020</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">My testing came to a different conclusion than the subject line indicates. According to my tests it was not 0.006_021 that broke these eight distros but 0.006_020. I smoked 8 perls, two of each of 5.28.2, 5.30.2, 5.31.3, 5.31.4 against each of the 8 distros covered in this issue. That lead to 64 tests, 32 against ETHER/Devel-Declare-0.006019.tar.gz and 32 against ETHER/Devel-Declare-0.006_020.tar.gz. The former 32 passed, the latter 32 failed.

The finding suggests that 0.006_020 broke MSCHWERN/perl5i-v2.13.2.tar.gz and seven other distros.

That notwithstanding, 021 was released as 022 four months after this issue was openend, so it&#39;s a minor scholastic question what broke what when exacty.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;03&nbsp;09:50:29&nbsp;2020</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;03&nbsp;12:20:50&nbsp;2020</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2020-05-03 06:50:27, ANDK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; My testing came to a different conclusion than the subject line
&gt; indicates. According to my tests it was not 0.006_021 that broke these
&gt; eight distros but 0.006_020. I smoked 8 perls, two of each of 5.28.2,
&gt; 5.30.2, 5.31.3, 5.31.4 against each of the 8 distros covered in this
&gt; issue. That lead to 64 tests, 32 against ETHER/Devel-Declare-
&gt; 0.006019.tar.gz and 32 against ETHER/Devel-Declare-0.006_020.tar.gz.
&gt; The former 32 passed, the latter 32 failed.
&gt; 
&gt; The finding suggests that 0.006_020 broke MSCHWERN/perl5i-
&gt; v2.13.2.tar.gz and seven other distros.
&gt; 
&gt; That notwithstanding, 021 was released as 022 four months after this
&gt; issue was openend, so it&#39;s a minor scholastic question what broke what
&gt; when exacty.
</div>
None of this is surprising. There were only very minor changes in 021 &#40;fixing a compiler warning and adding ppport.h&#41; and none at all in 022.  The work done to fix DD for changes made to the parser in blead all appeared in 020.

I hope no one is waiting for bated breath for a fix, because none is on the horizon.  Karl Williamson graciously provided the fix in 020 and advises that it is not straightforward to fix the remaining issues that the other modules are experiencing, and I am not familiar with this area at all.  What Devel::Declare is doing in the parser is highly fragile and it&#39;s a miracle things have held together this far.  This fragility is exactly why there are now much better hooks into the parser to achieve similar goals -- namely PL_keyword_plugin &#40;see perldoc perlapi&#41;.  Syntax::Keyword::Try &#40;and other projects by Paul Evans&#41; are good places to look for modern examples of its use.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;11&nbsp;12:42:43&nbsp;2020</span>
    <span class="description">gregoa [...] cpan.org -  Cc GREGOA added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sat&nbsp;May&nbsp;16&nbsp;02:04:02&nbsp;2020</span>
    <span class="description">SREZIC [...] cpan.org -  Reference by ticket #132639 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
