<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #16774 for SVN-Web: svnweb-install create zero size files instead of coping directories</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #16774 for SVN-Web: svnweb-install create zero size files instead of coping directories</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/SVN-Web/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/SVN-Web/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/SVN-Web/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/SVN-Web/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/SVN-Web">SVN-Web CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">16774</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/SVN-Web/Active/">SVN-Web</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dpavlin [...] rot13.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-30328-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.42    </td>
  </tr>
  <tr id="CF-30329-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;28&nbsp;16:14:29&nbsp;2005</span>
    <span class="description">DPAVLIN [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> svnweb-install create zero size files instead of coping directories</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This affect css/trac and template/trac and template/plain. File::Copy should be really blamed for this.

Simple workaround is to issue something like:

cp -r lib/SVN/Web/Template/* /data/svnweb/template/
cp -r lib/SVN/Web/Style/ /data/svnweb/css/

from distribution directory if installed version is in /data/svnweb. Without this, strange &#34;file not found&#34; errors might scare away new users &#40;which is shame, great module, btw&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;24&nbsp;11:47:20&nbsp;2006</span>
    <span class="description">NIKC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi

On Wed Dec 28 16:14:29 2005, DPAVLIN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This affect css/trac and template/trac and template/plain. File::Copy
&gt; should be really blamed for this.
&gt; 
&gt; Simple workaround is to issue something like:
&gt; 
&gt; cp -r lib/SVN/Web/Template/* /data/svnweb/template/
&gt; cp -r lib/SVN/Web/Style/ /data/svnweb/css/
&gt; 
&gt; from distribution directory if installed version is in /data/svnweb.
&gt; Without this, strange &#34;file not found&#34; errors might scare away new
&gt; users &#40;which is shame, great module, btw&#41;.
</div>
I can&#39;t reproduce this -- svnweb-install has always worked with no
problems on my development system, and on the handful of systems
&#40;FreeBSD and Solaris&#41; that I&#39;ve deployed it on.

Please could you explain, in detail, what the problem is.  Ideally, if
you could:

   mkdir /tmp/svnweb
   cd /tmp/svnweb
   svnweb-install
   find . -print

and include the output from the find&#40;1&#41; command, that would be really
helpful.

Thanks.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;24&nbsp;11:47:21&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;24&nbsp;12:52:43&nbsp;2006</span>
    <span class="description">NIKC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jan 24 11:47:20 2006, NIKC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Please could you explain, in detail, what the problem is.  Ideally, if
&gt; you could:
&gt; 
&gt;    mkdir /tmp/svnweb
&gt;    cd /tmp/svnweb
&gt;    svnweb-install
&gt;    find . -print
&gt; 
&gt; and include the output from the find&#40;1&#41; command, that would be really
&gt; helpful.
</div>
   find . -ls

would be even better.  Thanks.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;25&nbsp;06:38:30&nbsp;2006</span>
    <span class="description">dpavlin [...] rot13.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #16774] svnweb-install create zero size files instead of coping directories</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 25 Jan 2006 12:36:58 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> via RT &lt;bug-SVN-Web [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dobrica Pavlinusic &lt;dpavlin [...] rot13.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, Jan 24, 2006 at 11:47:22AM -0500,  via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I can&#39;t reproduce this -- svnweb-install has always worked with no
&gt; problems on my development system, and on the handful of systems
&gt; &#40;FreeBSD and Solaris&#41; that I&#39;ve deployed it on.
&gt; 
&gt; Please could you explain, in detail, what the problem is.  Ideally, if
&gt; you could:
&gt; 
&gt;    mkdir /tmp/svnweb
&gt;    cd /tmp/svnweb
&gt;    svnweb-install
&gt;    find . -print
&gt; 
&gt; and include the output from the find&#40;1&#41; command, that would be really
&gt; helpful.
</div>
I included output from find . -ls which is more verbose on Linux
systems.

I think that File::Copy is to blame:

$ mkdir 1
$ perl -MFile::Copy -e &#39;copy&#40;&#39;1&#39;,&#39;2&#39;&#41;&#39;
$ ls -ald 1 2
drwxr-xr-x 2 dpavlin dpavlin 4096 2006-01-25 12:31 1
-rw-r--r-- 1 dpavlin dpavlin    0 2006-01-25 12:32 2

-- 
Dobrica Pavlinusic               2share!2flame            dpavlin@rot13.org
Unix addict. Internet consultant.             <span class="clickylink"><a target="new" rel="nofollow" href="http://www.rot13.org/~dpavlin">http://www.rot13.org/~dpavlin</a></span>
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;25&nbsp;14:39:55&nbsp;2006</span>
    <span class="description">DPAVLIN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jan 25 06:38:30 2006, dpavlin@rot13.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I think that File::Copy is to blame:
</div>
Quick chat to PerlMonks chatterbox proved me wrong. It seems that
File::Copy should be only blamed for not returning error, while
directory handling is just not task for it :-&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;26&nbsp;15:50:47&nbsp;2006</span>
    <span class="description">nik [...] ngo.org.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #16774] svnweb-install create zero size files instead of coping directories</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 26 Jan 2006 09:50:36 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-SVN-Web [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Nik Clayton &lt;nik [...] ngo.org.uk&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dobrica Pavlinusic via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=16774">http://rt.cpan.org/Ticket/Display.html?id=16774</a></span> &gt;
&gt; 
&gt; On Wed Jan 25 06:38:30 2006, dpavlin@rot13.org wrote:
<div class="message-stanza open">&gt;&gt; I think that File::Copy is to blame:
</div>&gt; 
&gt; Quick chat to PerlMonks chatterbox proved me wrong. It seems that
&gt; File::Copy should be only blamed for not returning error, while
&gt; directory handling is just not task for it :-&#41;
</div>
OK, that makes sense.

The problem is that svnweb-install doesn&#39;t use File::Copy to copy 
directories -- it creates the directory itself.

Here&#39;s the relevant code from svnweb-install:

     find&#40;{ wanted =&gt; sub {
       my $dst_path = $File::Find::name;
       $dst_path =~ s/$path/$to/;

       if&#40;-d $File::Find::name&#41; {
           mkdir $dst_path;
       } else {
           copy&#40;$File::Find::name, $dst_path&#41;;
       }
     }, no_chdir =&gt; 1 }, $path&#41;;

As you can see, if $dst_path is a directory then mkdir&#40;&#41; is used, otherwise 
File::Copy::copy&#40;&#41; is used to copy the file.

I&#39;ve just released SVN::Web 0.43 to CPAN.  Could you try that, and please 
verify that you&#39;re using the svnweb-install that ships with 0.43.

If that doesn&#39;t work, please try the attached svnweb-install.  It&#39;s almost 
identical to the one that ships with 0.43, it just emits some extra 
debugging information.  Please run that version, and send me a copy of the 
output.

I&#39;ve attached a copy of the output I get when I run it.  Each block of 
output that starts:

     Found: /path/to/file

indicates a file or directory that&#39;s been found in the svnweb distribution. 
  As you can see from my run, directories are found first, created, and then 
all files in that directory are copied.  I suspect it&#39;s not happening in 
that order on your installation for some reason.

The output also includes the versions of Perl, File::Copy, and File::Find 
that work on my system.  If you&#39;re using an earlier version of these 
&#40;especially if it&#39;s an earlier version of File::Find&#41; can you try upgrading 
to at least the same version that I&#39;m running, and see if that fixes the 
problem.

And there&#39;s one more thing to try.  If the attached svnweb-install doesn&#39;t 
work, could you edit it.  Find the line that looks like this:

     }, no_chdir =&gt; 1 }, $path&#41;;

&#40;line #62&#41; and change it to:

     }, no_chdir =&gt; 1, bydepth =&gt; 0 }, $path&#41;;

Then re-run svnweb-install.

That shouldn&#39;t make any difference.  But if it does then I think it&#39;s a bug 
&#40;or an incompatability between different versions&#41; in File::Find.

Thanks for your help in tracking this down.

N
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">svnweb-install
Using SVN::Web 0.43
Using Perl 5.8.7
Using File::Copy 2.08
Using File::Find 1.09

Loaded SVN::Web from /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web.pm
Installing I18N -&gt; po
  Base path is now /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/I18N
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/I18N
      dst_path is now: po
      Directory, making it
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/I18N/en.po
      dst_path is now: po/en.po
      File, copying to po/en.po
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/I18N/fr.po
      dst_path is now: po/fr.po
      File, copying to po/fr.po
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/I18N/zh_cn.po
      dst_path is now: po/zh_cn.po
      File, copying to po/zh_cn.po
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/I18N/zh_tw.po
      dst_path is now: po/zh_tw.po
      File, copying to po/zh_tw.po
Installing Style -&gt; css
  Base path is now /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Style
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Style
      dst_path is now: css
      Directory, making it
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Style/common.css
      dst_path is now: css/common.css
      File, copying to css/common.css
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Style/styles-hlb.css
      dst_path is now: css/styles-hlb.css
      File, copying to css/styles-hlb.css
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Style/trac
      dst_path is now: css/trac
      Directory, making it
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Style/trac/browser.css
      dst_path is now: css/trac/browser.css
      File, copying to css/trac/browser.css
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Style/trac/changeset.css
      dst_path is now: css/trac/changeset.css
      File, copying to css/trac/changeset.css
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Style/trac/code.css
      dst_path is now: css/trac/code.css
      File, copying to css/trac/code.css
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Style/trac/diff.css
      dst_path is now: css/trac/diff.css
      File, copying to css/trac/diff.css
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Style/trac/file.png
      dst_path is now: css/trac/file.png
      File, copying to css/trac/file.png
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Style/trac/filedeny.png
      dst_path is now: css/trac/filedeny.png
      File, copying to css/trac/filedeny.png
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Style/trac/folder.png
      dst_path is now: css/trac/folder.png
      File, copying to css/trac/folder.png
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Style/trac/folderdeny.png
      dst_path is now: css/trac/folderdeny.png
      File, copying to css/trac/folderdeny.png
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Style/trac/parent.png
      dst_path is now: css/trac/parent.png
      File, copying to css/trac/parent.png
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Style/trac/svnweb.css
      dst_path is now: css/trac/svnweb.css
      File, copying to css/trac/svnweb.css
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Style/trac/text-diff-html.css
      dst_path is now: css/trac/text-diff-html.css
      File, copying to css/trac/text-diff-html.css
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Style/trac/trac.css
      dst_path is now: css/trac/trac.css
      File, copying to css/trac/trac.css
Installing Template -&gt; template
  Base path is now /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template
      dst_path is now: template
      Directory, making it
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/plain
      dst_path is now: template/plain
      Directory, making it
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/plain/browse
      dst_path is now: template/plain/browse
      File, copying to template/plain/browse
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/plain/diff
      dst_path is now: template/plain/diff
      File, copying to template/plain/diff
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/plain/footer
      dst_path is now: template/plain/footer
      File, copying to template/plain/footer
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/plain/header
      dst_path is now: template/plain/header
      File, copying to template/plain/header
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/plain/list
      dst_path is now: template/plain/list
      File, copying to template/plain/list
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/plain/log
      dst_path is now: template/plain/log
      File, copying to template/plain/log
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/plain/revision
      dst_path is now: template/plain/revision
      File, copying to template/plain/revision
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/plain/view
      dst_path is now: template/plain/view
      File, copying to template/plain/view
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/plain/x
      dst_path is now: template/plain/x
      File, copying to template/plain/x
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/trac
      dst_path is now: template/trac
      Directory, making it
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/trac/browse
      dst_path is now: template/trac/browse
      File, copying to template/trac/browse
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/trac/diff
      dst_path is now: template/trac/diff
      File, copying to template/trac/diff
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/trac/footer
      dst_path is now: template/trac/footer
      File, copying to template/trac/footer
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/trac/header
      dst_path is now: template/trac/header
      File, copying to template/trac/header
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/trac/list
      dst_path is now: template/trac/list
      File, copying to template/trac/list
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/trac/log
      dst_path is now: template/trac/log
      File, copying to template/trac/log
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/trac/revision
      dst_path is now: template/trac/revision
      File, copying to template/trac/revision
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/trac/view
      dst_path is now: template/trac/view
      File, copying to template/trac/view
    Found: /usr/home/nik/svk/local/jc/CPAN/SVN-Web/trunk/s/../blib/lib/SVN/Web/Template/trac/x
      dst_path is now: template/trac/x
      File, copying to template/trac/x
SVN::Web now installed! please see config.yaml
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl
use strict;
use Config;
use File::Copy;
use File::Basename;
use File::Find;

BEGIN {
    # This is a nasty hack.  SVN::Core has a bug.  &#34;perl -MSVN::Core -c -e 1&#34;
    # will dump core.  Something to do with the interaction between &#34;-c&#34;
    # running BEGIN blocks but not running END blocks, or similar.
    #
    # Anyway, we want to test to make sure this script compiles cleanly.
    # And we want to use SVN::Web.  Since the two are mutually exclusive,
    # only use SVN::Web &#40;and hence SVN::Core&#41; if we&#39;re not compiling.
    if&#40;! $^C&#41; {
        require SVN::Web;
    }
}

die &#34;already have config.yaml&#34; if -e &#39;config.yaml&#39;;

print &#34;svnweb-install\n&#34;;
print &#34;Using SVN::Web $SVN::Web::VERSION\n&#34;;
print &#34;Using Perl &#34;; printf&#40;&#34;%vd\n&#34;, $^V&#41;;
print &#34;Using File::Copy $File::Copy::VERSION\n&#34;;
print &#34;Using File::Find $File::Find::VERSION\n&#34;;
print &#34;\n&#34;;

open my $fh, &#34;&gt;config.yaml&#34;;

my %targets = &#40;
    Template =&gt; &#39;template&#39;,
    I18N     =&gt; &#39;po&#39;,
    Style    =&gt; &#39;css&#39;,
&#41;;

my $svnweb_path = $INC{&#39;SVN/Web.pm&#39;};
print &#34;Loaded SVN::Web from $svnweb_path\n&#34;;

while &#40;my &#40;$from, $to&#41; = each %targets&#41; {
    my $path = $svnweb_path;
    print &#34;Installing $from -&gt; $to\n&#34;;

    $path =~ s{.pm$}{/$from}i or next;

    print &#34;  Base path is now $path\n&#34;;

    find&#40;{ wanted =&gt; sub { 
      my $dst_path = $File::Find::name;
      print &#34;    Found: $dst_path\n&#34;;
      $dst_path =~ s/$path/$to/;
      print &#34;      dst_path is now: $dst_path\n&#34;;

      if&#40;-d $File::Find::name&#41; {
	  print &#34;      Directory, making it\n&#34;;
          mkdir $dst_path;
      } else {
	  print &#34;      File, copying to $dst_path\n&#34;;
          copy&#40;$File::Find::name, $dst_path&#41;;
      }
    }, no_chdir =&gt; 1 }, $path&#41;;
}

print $fh &lt;&lt;END;
# Actions, and the classes that implement them.
actions:
  browse:
    class: SVN::Web::Browse
  checkout:
    class: SVN::Web::Checkout
  diff:
    class: SVN::Web::Diff
  list:
    class: SVN::Web::List
  log:
    class: SVN::Web::Log
  revision:
    class: SVN::Web::Revision
  rss:
    class: SVN::Web::RSS
  view:
    class: SVN::Web::View

# Suggested minimum filters to run log messages through.  Note that
# it is not fatal if one of these filters is not installed.
log_msg_filters:
  - name: standard
    filter: html
  - name: standard
    filter: html_line_break
  - name: Clickable
    filter: clickable
  - name: Clickable::Email
    filter: filter

# set your repository path below:
#
#repos:
#  test: &#39;/tmp/svnweb-test&#39;
#  test2: &#39;/tmp/svnweb-test2&#39;
#
# or a parent path contains repositories
#
#reposparent: &#39;/path/to/repositories&#39;
#
# if you set a parent you can block specific repositories
# like this:
#
#block:
#  - &#39;blocked1&#39;
#  - &#39;blocked2&#39;
#

END

close $fh;

open $fh, &#39;&gt;index.cgi&#39;;
print $fh &lt;&lt;&#34;END&#34;;
$Config::Config{startperl} -w
#use lib &#39;.&#39;;
#use lib &#39;../lib&#39;;
use CGI::Carp qw&#40;fatalsToBrowser&#41;;
use SVN::Web;
SVN::Web::run_cgi&#40;&#41;;
END

close $fh;

chmod 0755,&#39;index.cgi&#39;;

# XXX: export the template too

print &#34;SVN::Web now installed! please see config.yaml\n&#34;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;06&nbsp;08:12:55&nbsp;2006</span>
    <span class="description">NIKC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Did the code in my previous replies help? 
 
There&#39;s an updated svnweb-install at 
<span class="clickylink"><a target="new" rel="nofollow" href="http://jc.ngo.org.uk/svnweb/jc/view/nik/CPAN/SVN-Web/trunk/bin/svnweb-install">http://jc.ngo.org.uk/svnweb/jc/view/nik/CPAN/SVN-Web/trunk/bin/svnweb-install</a></span> 
if you&#39;d like to try that too.  I&#39;d appreciate feedback as to whether 
or not this fixes the problem for you. 
 
Thanks, 
 
N 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;03&nbsp;10:31:32&nbsp;2006</span>
    <span class="description">DPAVLIN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> DPAVLIN [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Mar 06 08:12:55 2006, NIKC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Did the code in my previous replies help?
</div>
Yes thanks. Sorry for long delay.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;05&nbsp;06:51:23&nbsp;2006</span>
    <span class="description">NIKC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for confirming that I can close this ticket.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;05&nbsp;06:51:26&nbsp;2006</span>
    <span class="description">NIKC [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
