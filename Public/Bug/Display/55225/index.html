<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #55225 for Time-y2038: Time::y2038-20100218-25 does not compile on Solaris with Sun C compiler</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #55225 for Time-y2038: Time::y2038-20100218-25 does not compile on Solaris with Sun C compiler</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Time-y2038/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Time-y2038/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Time-y2038/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Time-y2038/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Time-y2038">Time-y2038 CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">55225</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Time-y2038/Active/">Time-y2038</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
markus.jansen [...] ericsson.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-224268-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-224269-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;04&nbsp;09:20:50&nbsp;2010</span>
    <span class="description">markus.jansen [...] ericsson.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;Markus Jansen&#34; &lt;markus.jansen [...] ericsson.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Time::y2038-20100218-25 does not compile on Solaris with Sun C compiler</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 4 Mar 2010 12:31:51 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Time-y2038 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Markus Jansen&#34; &lt;markus.jansen [...] ericsson.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Michael and others,

starting with Time::y2038-20100218 &#40;also checked Time::y2038-20100225&#41;, Time::y2038
does not compile on Solaris using the Sun C compiler &#40;versions 5.9 and 5.10&#41;.

Perl / Solaris versions tested &#40;all failed&#41;:
Perl 5.8.8 on Solaris 5.8 sparc
Perl 5.10.1 on Solaris 10 sparc + i386

Output from Build is:

Probing time.h capabilities.
You may see some C errors, that&#39;s ok.
Building Time-y2038
&#34;try.c&#34;, line 9: undefined struct/union member: tm_gmtoff
cc: acomp failed for try.c
&#34;try.c&#34;, line 8: warning: implicit function declaration: timegm
Undefined                       first referenced
 symbol                             in file
timegm                              try.o
ld: fatal: Symbol referencing errors. No output written to try
&#34;try.c&#34;, line 9: undefined struct/union member: tm_zone
&#34;try.c&#34;, line 9: warning: improper pointer/integer combination: op &#34;=&#34;
cc: acomp failed for try.c
cc -Iy2038 -Iy2038 -I/vobs/cc/CCA-perl01/perl5_SunOS_i386_________sixtyfive_char_path/prod/lib/5.10.1/i86pc-solaris-thread-multi-64int/CORE -KPIC -c -D_REENTRANT -mt -I/vobs/cc/CCA-perl01/perl5_SunOS_i386_________sixtyfive_char_path/plib/include -DPERL_IMPLICIT_CONTEXT -DPERL_USE_SAFE_PUTENV -Xa -xtransition -xstrconst -mr -Qn -v -erroff=E_UNRECOGNIZED_PRAGMA_IGNORED,E_STATEMENT_NOT_REACHED,E_SLASH_STAR_IN_CMNT -I/vobs/cc/CCA-perl01/perl5_SunOS_i386_________sixtyfive_char_path/plib/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DPERL_USE_SAFE_PUTENV -xO4 -fns -fsingle -fsimple=2 -ftrap=%none -xtarget=generic -xbuiltin=%all -xdepend -xlibmil -xlibmopt -xunroll=3 -xalias_level=basic -o y2038/time64.o y2038/time64.c
&#34;y2038/time64.c&#34;, line 69: too many struct/union initializers
&#34;y2038/time64.c&#34;, line 91: too many struct/union initializers
&#34;y2038/time64.c&#34;, line 777: warning: constant promoted according to the 1999 ISO C standard
&#34;y2038/time64.c&#34;, line 777: warning: ANSI C treats constant as unsigned: op &#34;&gt;=&#34;
cc: acomp failed for y2038/time64.c


Best regards,
        Markus Jansen


Markus Jansen
Master Methods &#38; Tools Engineer, PM &#38; IT 

Ericsson GmbH 
Eurolab R&#38;D 
Ericsson Allee 1
52134 Herzogenrath, Germany
www.ericsson.com        Office: +49 2407 575 5157
Fax: +49 2407 575 98452
Mobile: +49 172 274 2003
Email: Markus.Jansen@ericsson.com       

Ericsson GmbH. Sitz: Düsseldorf. Registergericht: Amtsgericht Düsseldorf, HRB 33012. Geschäftsführer: Carsten Ahrens. Aufsichtsratsvorsitzender: Anders Olin

This communication is confidential and intended solely for the addressee&#40;s&#41;. Any unauthorized review, use, disclosure or distribution is prohibited. If you believe this message has been sent to you in error, please notify the sender by replying to this transmission and delete the message without disclosing it. Thank you.

E-mail including attachments is susceptible to data corruption, interception, unauthorized amendment, tampering and viruses, and we only send and receive emails on the basis that we are not liable for any such corruption, interception, amendment, tampering or viruses or any consequences thereof.
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;04&nbsp;17:38:01&nbsp;2010</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #55225] Time::y2038-20100218-25 does not compile on Solaris with Sun C compiler</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 04 Mar 2010 14:37:01 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Time-y2038 [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Markus Jansen via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; starting with Time::y2038-20100218 &#40;also checked Time::y2038-20100225&#41;, Time::y2038
&gt; does not compile on Solaris using the Sun C compiler &#40;versions 5.9 and 5.10&#41;.
&gt; 
&gt; Perl / Solaris versions tested &#40;all failed&#41;:
&gt; Perl 5.8.8 on Solaris 5.8 sparc
&gt; Perl 5.10.1 on Solaris 10 sparc + i386
&gt; 
&gt; Output from Build is:
&gt; 
&gt; Probing time.h capabilities.
&gt; You may see some C errors, that&#39;s ok.
&gt; Building Time-y2038
&gt; &#34;try.c&#34;, line 9: undefined struct/union member: tm_gmtoff
&gt; cc: acomp failed for try.c
&gt; &#34;try.c&#34;, line 8: warning: implicit function declaration: timegm
&gt; Undefined                     first referenced
&gt;  symbol                           in file
&gt; timegm                              try.o
&gt; ld: fatal: Symbol referencing errors. No output written to try
&gt; &#34;try.c&#34;, line 9: undefined struct/union member: tm_zone
&gt; &#34;try.c&#34;, line 9: warning: improper pointer/integer combination: op &#34;=&#34;
&gt; cc: acomp failed for try.c
</div>
That&#39;s ok, its just compiler noise from our failed attempt to detect 
tm-&gt;tm_gmtoff and tm-&gt;tm_zone.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; cc -Iy2038 -Iy2038 -I/vobs/cc/CCA-perl01/perl5_SunOS_i386_________sixtyfive_char_path/prod/lib/5.10.1/i86pc-solaris-thread-multi-64int/CORE -KPIC -c -D_REENTRANT -mt -I/vobs/cc/CCA-perl01/perl5_SunOS_i386_________sixtyfive_char_path/plib/include -DPERL_IMPLICIT_CONTEXT -DPERL_USE_SAFE_PUTENV -Xa -xtransition -xstrconst -mr -Qn -v -erroff=E_UNRECOGNIZED_PRAGMA_IGNORED,E_STATEMENT_NOT_REACHED,E_SLASH_STAR_IN_CMNT -I/vobs/cc/CCA-perl01/perl5_SunOS_i386_________sixtyfive_char_path/plib/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DPERL_USE_SAFE_PUTENV -xO4 -fns -fsingle -fsimple=2 -ftrap=%none -xtarget=generic -xbuiltin=%all -xdepend -xlibmil -xlibmopt -xunroll=3 -xalias_level=basic -o y2038/time64.o y2038/time64.c
&gt; &#34;y2038/time64.c&#34;, line 69: too many struct/union initializers
&gt; &#34;y2038/time64.c&#34;, line 91: too many struct/union initializers
&gt; &#34;y2038/time64.c&#34;, line 777: warning: constant promoted according to the 1999 ISO C standard
&gt; &#34;y2038/time64.c&#34;, line 777: warning: ANSI C treats constant as unsigned: op &#34;&gt;=&#34;
&gt; cc: acomp failed for y2038/time64.c
</div>
That&#39;s not ok.  Other compilers have warned about it, I guess Sun&#39;s compiler 
is more strict.

Please try the attached patch and let me know.


-- 
7. Not allowed to add &#34;In accordance with the prophesy&#34; to the end of
    answers I give to a question an officer asks me.
     -- The 213 Things Skippy Is No Longer Allowed To Do In The U.S. Army
            <span class="clickylink"><a target="new" rel="nofollow" href="http://skippyslist.com/list/">http://skippyslist.com/list/</a></span>
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff --git a/time64.c b/time64.c
index aba5efb..e8bdd20 100644
--- a/time64.c
+++ b/time64.c
@@ -60,13 +60,9 @@ SYSTEM_MKTIME_MAX_TM_YDAY,
 SYSTEM_MKTIME_MAX_TM_ISDST
 #ifdef HAS_TM_TM_GMTOFF
 ,SYSTEM_MKTIME_MAX_TM_GMTOFF
-#else
-,0
 #endif
 #ifdef HAS_TM_TM_ZONE
 ,SYSTEM_MKTIME_MAX_TM_ZONE
-#else
-,&#34;&#34;
 #endif
 };
 
@@ -82,13 +78,9 @@ SYSTEM_MKTIME_MIN_TM_YDAY,
 SYSTEM_MKTIME_MIN_TM_ISDST
 #ifdef HAS_TM_TM_GMTOFF
 ,SYSTEM_MKTIME_MIN_TM_GMTOFF
-#else
-,0
 #endif
 #ifdef HAS_TM_TM_ZONE
 ,SYSTEM_MKTIME_MIN_TM_ZONE
-#else
-,&#34;&#34;
 #endif
 };
 
@@ -105,13 +97,9 @@ SYSTEM_TIMEGM_MAX_TM_YDAY,
 SYSTEM_TIMEGM_MAX_TM_ISDST
 #ifdef HAS_TM_TM_GMTOFF
 ,SYSTEM_TIMEGM_MAX_TM_GMTOFF
-#else
-,0
 #endif
 #ifdef HAS_TM_TM_ZONE
 ,SYSTEM_TIMEGM_MAX_TM_ZONE
-#else
-,&#34;&#34;
 #endif
 };
 
@@ -127,13 +115,9 @@ SYSTEM_TIMEGM_MIN_TM_YDAY,
 SYSTEM_TIMEGM_MIN_TM_ISDST
 #ifdef HAS_TM_TM_GMTOFF
 ,SYSTEM_TIMEGM_MIN_TM_GMTOFF
-#else
-,0
 #endif
 #ifdef HAS_TM_TM_ZONE
 ,SYSTEM_TIMEGM_MIN_TM_ZONE
-#else
-,&#34;&#34;
 #endif
 };
 #endif /* HAS_TIMEGM */
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;04&nbsp;17:38:04&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;05&nbsp;08:04:11&nbsp;2010</span>
    <span class="description">markus.jansen [...] ericsson.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;Markus Jansen&#34; &lt;markus.jansen [...] ericsson.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #55225] Time::y2038-20100218-25 does not compile on Solaris with Sun C compiler</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 5 Mar 2010 11:03:03 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Time-y2038 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Markus Jansen&#34; &lt;markus.jansen [...] ericsson.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Michael,

your patch works without problems. Thanks for the fast fix.

Best regards,

        Markus

--
Markus Jansen
Master Methods &#38; Tools Engineer, PM&#38;IT 

Ericsson GmbH 
Eurolab R&#38;D 
Ericsson Allee 1
52134 Herzogenrath, Germany
www.ericsson.com        Office: +49 2407 575 5157
Fax: +49 2407 575 98452
Mobile: +49 172 274 2003
Email: Markus.Jansen@ericsson.com       

Ericsson GmbH. Sitz: Düsseldorf. Registergericht: Amtsgericht Düsseldorf, HRB 33012. Geschäftsführer: Carsten Ahrens. Aufsichtsratsvorsitzender: Anders Olin

This communication is confidential and intended solely for the addressee&#40;s&#41;. Any unauthorized review, use, disclosure or distribution is prohibited. If you believe this message has been sent to you in error, please notify the sender by replying to this transmission and delete the message without disclosing it. Thank you.

E-mail including attachments is susceptible to data corruption, interception, unauthorized amendment, tampering and viruses, and we only send and receive emails on the basis that we are not liable for any such corruption, interception, amendment, tampering or viruses or any consequences thereof.



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Michael G Schwern via RT [mailto:bug-Time-y2038@rt.cpan.org] 
Sent: Thursday, March 04, 2010 11:38 PM
To: Markus Jansen
Subject: Re: [rt.cpan.org #55225] Time::y2038-20100218-25 does not compile on Solaris with Sun C compiler

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=55225">http://rt.cpan.org/Ticket/Display.html?id=55225</a></span> &gt;

Markus Jansen via RT wrote:
<div class="message-stanza open">&gt; starting with Time::y2038-20100218 &#40;also checked 
&gt; Time::y2038-20100225&#41;, Time::y2038 does not compile on Solaris using the Sun C compiler &#40;versions 5.9 and 5.10&#41;.
&gt; 
&gt; Perl / Solaris versions tested &#40;all failed&#41;:
&gt; Perl 5.8.8 on Solaris 5.8 sparc
&gt; Perl 5.10.1 on Solaris 10 sparc + i386
&gt; 
&gt; Output from Build is:
&gt; 
&gt; Probing time.h capabilities.
&gt; You may see some C errors, that&#39;s ok.
&gt; Building Time-y2038
&gt; &#34;try.c&#34;, line 9: undefined struct/union member: tm_gmtoff
&gt; cc: acomp failed for try.c
&gt; &#34;try.c&#34;, line 8: warning: implicit function declaration: timegm
&gt; Undefined                     first referenced
&gt;  symbol                           in file
&gt; timegm                              try.o
&gt; ld: fatal: Symbol referencing errors. No output written to try 
&gt; &#34;try.c&#34;, line 9: undefined struct/union member: tm_zone &#34;try.c&#34;, line 
&gt; 9: warning: improper pointer/integer combination: op &#34;=&#34;
&gt; cc: acomp failed for try.c
</div>
That&#39;s ok, its just compiler noise from our failed attempt to detect 
tm-&gt;tm_gmtoff and tm-&gt;tm_zone.


<div class="message-stanza open">&gt; cc -Iy2038 -Iy2038 
&gt; -I/vobs/cc/CCA-perl01/perl5_SunOS_i386_________sixtyfive_char_path/pro
&gt; d/lib/5.10.1/i86pc-solaris-thread-multi-64int/CORE -KPIC -c 
&gt; -D_REENTRANT -mt 
&gt; -I/vobs/cc/CCA-perl01/perl5_SunOS_i386_________sixtyfive_char_path/plib/include -DPERL_IMPLICIT_CONTEXT -DPERL_USE_SAFE_PUTENV -Xa -xtransition -xstrconst -mr -Qn -v -erroff=E_UNRECOGNIZED_PRAGMA_IGNORED,E_STATEMENT_NOT_REACHED,E_SLASH_STAR_IN_CMNT -I/vobs/cc/CCA-perl01/perl5_SunOS_i386_________sixtyfive_char_path/plib/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DPERL_USE_SAFE_PUTENV -xO4 -fns -fsingle -fsimple=2 -ftrap=%none -xtarget=generic -xbuiltin=%all -xdepend -xlibmil -xlibmopt -xunroll=3 -xalias_level=basic -o y2038/time64.o y2038/time64.c &#34;y2038/time64.c&#34;, line 69: too many struct/union initializers &#34;y2038/time64.c&#34;, line 91: too many struct/union initializers &#34;y2038/time64.c&#34;, line 777: warning: constant promoted according to the 1999 ISO C standard &#34;y2038/time64.c&#34;, line 777: warning: ANSI C treats constant as unsigned: op &#34;&gt;=&#34;
&gt; cc: acomp failed for y2038/time64.c
</div>
That&#39;s not ok.  Other compilers have warned about it, I guess Sun&#39;s compiler is more strict.

Please try the attached patch and let me know.


--
7. Not allowed to add &#34;In accordance with the prophesy&#34; to the end of
    answers I give to a question an officer asks me.
     -- The 213 Things Skippy Is No Longer Allowed To Do In The U.S. Army
            <span class="clickylink"><a target="new" rel="nofollow" href="http://skippyslist.com/list/">http://skippyslist.com/list/</a></span>
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;03&nbsp;23:21:25&nbsp;2010</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This patch will be included in the next release, coming shortly.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;03&nbsp;23:21:27&nbsp;2010</span>
    <span class="description">mschwern [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
