<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #125577 for Tcl: Memory loss : the perl memory for a sub {...} never gets freed. </title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #125577 for Tcl: Memory loss : the perl memory for a sub {...} never gets freed. </h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Tcl/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Tcl/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Tcl/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Tcl/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Tcl">Tcl CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">125577</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Tcl/Active/">Tcl</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
huck [...] finn.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-30776-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-30777-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.16    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;13&nbsp;16:55:28&nbsp;2018</span>
    <span class="description">huck [...] finn.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Memory loss : the perl memory for a sub {...} never gets freed. </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 13 Jun 2018 15:54:46 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tcl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> huck &lt;huck [...] finn.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ah onions
in working on <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Public/Bug/Display.html?id=125472">https://rt.cpan.org/Public/Bug/Display.html?id=125472</a></span>
i discovered another problem: the perl memory for a sub {...} never 
gets freed.

Rather than lump it into that problem i decided id make it its own report

if you run the following
use Tcl;
use strict; use warnings;


sub test_use {
  my $use=shift;
  my $useok=0;
  my $bad=&#39;&#39;;
  eval {
     $useok =eval $use.&#39;;1&#39;;
     unless &#40;$useok&#41; { $bad=$use; }
     };
  return $bad;
}


BEGIN {
   my $use_bad=&#39;&#39;;
   $use_bad.=test_use &#40;&#39;use Devel::Peek     qw&#40; SvREFCNT Dump&#41;&#39;&#41;;
   $use_bad.=test_use &#40;&#39;use Devel::Refcount qw&#40; refcount &#41;&#39;&#41;;
#  $use_bad.=test_use &#40;&#39;use xxx;&#39;&#41;; $use_bad.=test_use &#40;&#39;use yxxx;&#39;&#41;;

  if &#40;$use_bad&#41; {
    print &#34;1..0 # skip because: not installed $use_bad \n&#34;;
    exit;
    };
   }


   $| = 1;

   print &#34;1..1\n&#34;;

   my $inter=Tcl-&gt;new&#40;&#41;;

   my @queue;
   my $sub;
   $sub=sub{
     return unless &#40;scalar&#40;@queue&#41;&#41;;
     my $line =shift @queue;
     return unless &#40;scalar&#40;@queue&#41;&#41;;
     $inter-&gt;call&#40;&#39;after&#39;,300,$sub&#41;;
   };

   my @ctpre=refcts&#40;$sub&#41;;
   print &#39;0 &#39;.join&#40;&#39; &#39;,@ctpre&#41;.&#34;\n&#34;;


   my @ctpost;

   for my $run &#40;1..9&#41; {
     for my $ii &#40;1..4&#41; {push @queue,&#39;ok &#39;.$ii; }
     $inter-&gt;call&#40;&#39;after&#39;,50,$sub&#41;;
     flush_afters&#40;$inter&#41;;
     if &#40;$Tcl::VERSION eq &#39;1.02&#39;&#41; {
         # have to kinda cheat and do it by hand in 1.02
         # it didnt have code cleaup at all
         my $tclname=&#39;::perl::&#39;.$sub;
         $inter-&gt;delete_ref&#40;$tclname&#41;;
         }
     @ctpost=refcts&#40;$sub&#41;;
     print &#34;$run &#34;.join&#40;&#39; &#39;,@ctpost&#41;.&#34;\n&#34;;
     }

   if &#40;$ctpre[0]==$ctpost[0] &#38;&#38; $ctpre[1]==$ctpost[1]&#41; { print &#34;ok 1 
- refcts \n&#34;;}
   else {
    unless &#40;$ctpre[0] == $ctpost[0]&#41; { print STDERR &#34;SvREFCNT 
$ctpre[0]!=$ctpost[0]\n&#34;; }
    unless &#40;$ctpre[1] == $ctpost[1]&#41; { print STDERR &#34;refcount 
$ctpre[1]!=$ctpost[1]\n&#34;; }
    print &#34;not ok 1 - refcts \n&#34;;
    }

   exit;

sub refcts {
# printf &#34;SvREFCNT=%d refcount=%d\n&#34;,SvREFCNT&#40; $_[0] &#41;, refcount&#40; $_[0]&#41; ;
   return &#40;SvREFCNT&#40; $_[0] &#41;, refcount&#40; $_[0]&#41;&#41;;
}

sub flush_afters{
   my $inter=shift;
my $ct=0;
   while&#40;1&#41; {  # wait for afters to finish
     my $info0=insure_ptrarray&#40;$inter,&#39;after&#39;, &#39;info&#39;&#41;;
     last unless &#40;scalar&#40;@$info0&#41;&#41;;
     $inter-&gt;icall&#40;&#39;after&#39;, 1000, &#39;set var fafafa&#39;&#41;;
#print &#34; $inter $ct\n&#34;; $ct++;
     $inter-&gt;icall&#40;&#39;vwait&#39;, &#39;var&#39;&#41;; # will wait for 1 seconds
   }
}

sub insure_ptrarray{
   my $inter=shift;
   my $list = $inter-&gt;icall&#40;@_&#41;;
   if &#40;ref&#40;$list&#41; ne &#39;Tcl::List&#39;&#41; {  # v1.02
       $list=[split&#40;&#39; &#39;,$list&#41;];
       }
return $list;
}

you find that it just reports an ever increasing refcount value. this is bad.

Even V1.02 is affected.

Ive been working with git &#40;im an old CVSer still&#41; and i think i 
should be able to submit a gif-pull to you to fix this.

while it should work without it, adding the following is helpful

git tag -a 1.02  3f5eb527e1ba3b883c2ba197e4bdaf28d940f389 -m &#34;Release 1.02&#34;

Thanks for all you do for us!!!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;13&nbsp;17:14:24&nbsp;2018</span>
    <span class="description">huck [...] finn.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #125577] AutoReply: Memory loss : the perl memory for a sub {...} never gets freed.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 13 Jun 2018 16:13:58 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tcl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> huck &lt;huck [...] finn.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The fix is as follows in the patch below

why they did the &#34;double tap&#34;&#40;AV *av = &#40;AV *&#41; SvREFCNT_inc&#40;&#40;SV *&#41; 
newAV&#40;&#41;&#41;;&#41;  in Tcl_CreateCommand ... i dunno,
ive been trying to figure out why but i cannot.
So my fix is to undouble tap it.

As far as i can tell Tcl_PerlCallDeleteProc is only called within Tcl 
to release a perl into Tcl command binding, so that change should not 
effect anything in perl but to allow the memory at av to be garbage 
collected by perl.

If anyone can educate me further about this it would be appreciated.

Again, i will supply the patch as a git-pull request soon, this is 
just for demonstration purposes. 
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;14&nbsp;23:29:46&nbsp;2018</span>
    <span class="description">huck [...] finn.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #125577] Memory loss : the perl memory for a sub {...} never gets freed.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 14 Jun 2018 22:29:30 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tcl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> huck &lt;huck [...] finn.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ok i think im ready to have a go at it. still new at git, so  when i 
talked about a git-pull before this is what i meant

Enclosed is a parch file generated by
git format-patch  --stdout  -1 &gt; ~/cvs/pmlib-linkpatch/memloss1.02.patch


i am able to apply it via
git am ~/cvs/pmlib-linkpatch/memloss1.02.patch

This should fix the memory loss problem. It even fixes it at v1.02
&#40; see <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Public/Bug/Display.html?id=125472">https://rt.cpan.org/Public/Bug/Display.html?id=125472</a></span> for more 
about this&#41;
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;07&nbsp;02:23:01&nbsp;2018</span>
    <span class="description">CAC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza"><span style="font-family:arial,helvetica,sans-serif;">If your goal is to make a pull request to the Tcl.pm git repository (the one on GitHub), that&#39;s something that has to be done at least partly from a web browser; it can&#39;t be done completely from the command line. You have to fork the repository on GitHub, and have the clone on your computer know of your fork as a remote; then you can push your commit to your fork, and open a pull request from a browser.<br>

<br>

This seems to be a good overview of the process (see steps &quot;Creating a fork&quot;, &quot;Doing your work&quot;, and &quot;Submitting a pull request&quot;):&nbsp;<a href="https://gist.github.com/Chaser324/ce0505fbed06b947d962"><span class="clickylink"><a target="new" rel="nofollow" href="https://gist.github.com/Chaser324/ce0505fbed06b947d962">https://gist.github.com/Chaser324/ce0505fbed06b947d962</a></span></a><br>

<br>

Or the official help:&nbsp;<a href="https://help.github.com/articles/fork-a-repo/"><span class="clickylink"><a target="new" rel="nofollow" href="https://help.github.com/articles/fork-a-repo/">https://help.github.com/articles/fork-a-repo/</a></span></a> and&nbsp;<a href="https://help.github.com/articles/creating-a-pull-request-from-a-fork/"><span class="clickylink"><a target="new" rel="nofollow" href="https://help.github.com/articles/creating-a-pull-request-from-a-fork/">https://help.github.com/articles/creating-a-pull-request-from-a-fork/</a></span></a><br>

<br>

Or, if you&#39;d like, someone can apply the patch and/or open a PR on your behalf (you still get credit for authoring the work in the commit).</span><br>

<br>

Hope this helps<br>


</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;07&nbsp;02:23:02&nbsp;2018</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;07&nbsp;03:43:03&nbsp;2018</span>
    <span class="description">huck [...] finn.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> tcltk [...] perl.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #125577] Memory loss : the perl memory for a sub {...} never gets freed.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 07 Aug 2018 02:42:43 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tcl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> huck &lt;huck [...] finn.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">At 01:23 AM 8/7/2018, you wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=125577">https://rt.cpan.org/Ticket/Display.html?id=125577</a></span> &gt;
&gt;
&gt;If your goal is to make a pull request to the Tcl.pm git repository 
&gt;&#40;the one on
&gt;GitHub&#41;, that&#39;s something that has to be done at least partly from a web
&gt;browser; it can&#39;t be done completely from the command line. You have to fork
&gt;the repository on GitHub, and have the clone on your computer know 
&gt;of your fork
&gt;as a remote; then you can push your commit to your fork, and open a pull
&gt;request from a browser.
&gt;
&gt;This seems to be a good overview of the process &#40;see steps &#34;Creating a fork&#34;,
&gt;&#34;Doing your work&#34;, and &#34;Submitting a pull request&#34;&#41;:
&gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://gist.github.com/Chaser324/ce0505fbed06b947d962">https://gist.github.com/Chaser324/ce0505fbed06b947d962</a></span>
&gt;
&gt;Or the official help: <span class="clickylink"><a target="new" rel="nofollow" href="https://help.github.com/articles/fork-a-repo/">https://help.github.com/articles/fork-a-repo/</a></span> and
&gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://help.github.com/articles/creating-a-pull-request-from-a-fork/">https://help.github.com/articles/creating-a-pull-request-from-a-fork/</a></span>
&gt;
&gt;Or, if you&#39;d like, someone can apply the patch and/or open a PR on your behalf
&gt;&#40;you still get credit for authoring the work in the commit&#41;.
&gt;
&gt;Hope this helps
</div>
i did realize my terminology was a bit off, but i never intended to 
make a github account. I had always planned to do it on only my local 
machines and submit a patch file, but i did not realize the patch 
file method was not considered a &#34;pull&#34; at first.

This is the process i used for my last patch file.

# clone orig and lock down at a point
#  so i could restart the working copy at the same point
cd ~/cvs/gits/github
rm -rf  ~/cvs/gits/github/tcl.pm
git clone <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/gisle/tcl.pm.git">https://github.com/gisle/tcl.pm.git</a></span>
cd ~/cvs/gits/github/tcl.pm
git checkout origin

# make working copy
cd ~/cvs/gits/tcl-tk
rm -rf ~/cvs/gits/tcl-tk/tcl.pm
git clone &#34;file:///home/huck/cvs/gits/github/tcl.pm&#34;
cd ~/cvs/gits/tcl-tk/tcl.pm
git checkout -b doc1.16 e926aa6ea07298dbc1f1dda94c5943ecc5eda4ab

### make changes
vi Tcl.pm

# test changes
perl Makefile.PL
make
make test

# lock down changes
git commit -m &#39;typo fix and rname/current_r to descrname&#39; Tcl.pm

# apply to main branch
git checkout master
git merge -m &#39;doc/typo fix and rname/current_r to descrname&#39; doc1.16
perl Makefile.PL
make
make test

# make patch
git format-patch  --stdout  -1 &gt; ~/cvs/pmlib-linkpatch/doc1.16.patch
cvs commit  -m &#39;&#39; doc1.16.patch

# test patch against newest master
cd ~/cvs/gits/github
rm -rf  ~/cvs/gits/github/strp-tcl
git clone <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/gisle/tcl.pm.git">https://github.com/gisle/tcl.pm.git</a></span> strp-tcl
cd ~/cvs/gits/github/strp-tcl
git checkout master
git am ~/cvs/pmlib-linkpatch/doc1.16.patch
perl Makefile.PL
make
make test

I ran the &#34;test patch&#34; procedure on ubuntu 12.04,  14.04, 16.04 and 
18.04 boxes just to make sure.

for my first patches i tested via a more complicated testing 
procedure shown at
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Public/Bug/Display.html?id=125472#txn-1791081">https://rt.cpan.org/Public/Bug/Display.html?id=125472#txn-1791081</a></span>
but while it showed the added branches in gitk, the result to the 
master line was the same as just running the &#39;git am&#39; commands 
against the master.

Thank you for the pointers but by the time i had submitted the 
patches i had already digested all that material and more and 
realized that submitting the patch files was not considered a pull, 
but like i opened with i never had any thought of opening a online 
git account anywhere, nor did i ever plan on making my repository net 
accessible.  At the beginning i was just confused that submitting 
patch files was not considered a &#34;pull&#34;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;07&nbsp;04:50:25&nbsp;2018</span>
    <span class="description">CAC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza"><span style="font-family:arial,helvetica,sans-serif;">On Tue Aug 07 02:43:03 2018, huck@finn.com wrote:<br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;&nbsp;<br>

&gt; i did realize my terminology was a bit off, but i never intended to<br>

&gt; make a github account. I had always planned to do it on only my local<br>

&gt; machines and submit a patch file, but i did not realize the patch<br>

&gt; file method was not considered a &quot;pull&quot; at first.<br>

&gt;<br>

&gt; [&hellip;]&nbsp;At the beginning i was just confused that submitting<br>

&gt; patch files was not considered a &quot;pull&quot;<br>
</div><br>

You&#39;re not wrong to think of it as a pull; the process of submitting a patch can still qualify as a &quot;pull&quot;, as it&#39;s still a way for an upstream repo to pull in changes from your repo, in git parlance as it were. As a good example, the <span style="font-family:courier new,courier,monospace;">git request-pull</span> command that spits out a patch-like file intended for projects that allow or require submissions via mailing list rather than e.g. GitHub. GitHub and similar sites are just re-using the &quot;pull request&quot;&nbsp;git jargon&nbsp;to refer to their web-side features which pull changes but in a manner beyond what plain git can do.</span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;14&nbsp;18:20:42&nbsp;2018</span>
    <span class="description">CAC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza"><span style="font-family:arial,helvetica,sans-serif;">Actually, this was already applied back in June (<span style="font-family:courier new,courier,monospace;">717743b</span>); the patched Tcl.xs was in release 1.06, and the test was included in release 1.16 (it needed to be added to MANIFEST).</span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;14&nbsp;18:20:43&nbsp;2018</span>
    <span class="description">CAC [...] cpan.org -  Fixed in 1.16 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;15&nbsp;02:48:53&nbsp;2018</span>
    <span class="description">VKON [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">the only thing is that I would like to have these lines of code:

our $TRACE_SHOWCODE;       # display generated code in call&#40;&#41;;
our $TRACE_CREATECOMMAND;  # display sub creates;
our $TRACE_DELETECOMMAND;  # display sub deletes;

$TRACE_SHOWCODE      = 0 unless defined $TRACE_SHOWCODE;
$TRACE_DELETECOMMAND = 0 unless defined $TRACE_DELETECOMMAND;
$TRACE_CREATECOMMAND = 0 unless defined $TRACE_CREATECOMMAND;


to be written as 

sub TRACE_SHOWCODE &#40;&#41; {0}
etc
because this way it is much more efficient
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;15&nbsp;02:48:54&nbsp;2018</span>
    <span class="description">VKON [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;15&nbsp;08:03:38&nbsp;2018</span>
    <span class="description">huck [...] finn.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #125577] Memory loss : the perl memory for a sub {...} never gets freed.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Aug 2018 07:01:49 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tcl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> huck &lt;huck [...] finn.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">if those changes were made how could you then code the following?
use strict;
use warnings;
use Tcl;
$|=1;

   my $inter=Tcl-&gt;new&#40;&#41;;
   $Tcl::TRACE_DELETECOMMAND = 1;
   $Tcl::TRACE_CREATECOMMAND = 1;
   $Tcl::TRACE_SHOWCODE = 1;
   my $sub=sub { print &#34;hi\n&#34;;};

   for my $ii &#40;0..5&#41; { $inter-&gt;call&#40;&#39;after&#39;,200,$sub&#41;;}
   flush_afters&#40;$inter&#41;;

   $Tcl::TRACE_DELETECOMMAND = 0;
   for my $ii &#40;0..5&#41; {   $inter-&gt;call&#40;&#39;after&#39;,1200,sub {print &#34;$ii\n&#34;;}&#41;; }
   flush_afters&#40;$inter&#41;;

   $Tcl::TRACE_DELETECOMMAND = 1;
   for my $ii &#40;0..5&#41; {   $inter-&gt;call&#40;&#39;after&#39;,1200,sub {print 
&#34;$ii\n&#34;;}&#41;; sleep 1;}
   flush_afters&#40;$inter&#41;;

   for my $ii &#40;0..5&#41; {   $inter-&gt;call&#40;&#39;after&#39;,200,sub {print &#34;$ii\n&#34;;}&#41;; }
   flush_afters&#40;$inter&#41;;

   $Tcl::TRACE_DELETECOMMAND = 0;
   for my $ii &#40;0..5&#41; {   $inter-&gt;call&#40;&#39;after&#39;,1200,sub {print &#34;$ii\n&#34;;}&#41;; }
   flush_afters&#40;$inter&#41;;
exit;





sub flush_afters{
   my $inter=shift;
print &#34;begin flush afters\n&#34;;
   while&#40;1&#41; {  # wait for afters to finish
     my $info0=insure_ptrarray&#40;$inter,&#39;after&#39;, &#39;info&#39;&#41;;
     last unless &#40;scalar&#40;@$info0&#41;&#41;;
     $inter-&gt;icall&#40;&#39;after&#39;, 300, &#39;set var fafafa&#39;&#41;;
     $inter-&gt;icall&#40;&#39;vwait&#39;, &#39;var&#39;&#41;; # will wait for .3 seconds
   }
print &#34;end  flush afters\n&#34;;
} # flush afters


sub insure_ptrarray{
   my $inter=shift;
   my $list = $inter-&gt;icall&#40;@_&#41;;
   if &#40;ref&#40;$list&#41; ne &#39;Tcl::List&#39;&#41; {  # v1.02
       $list=[split&#40;&#39; &#39;,$list&#41;];
       }
return $list;
}


At 01:48 AM 8/15/2018, you wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=125577">https://rt.cpan.org/Ticket/Display.html?id=125577</a></span> &gt;
&gt;
&gt;the only thing is that I would like to have these lines of code:
&gt;
&gt;our $TRACE_SHOWCODE;       # display generated code in call&#40;&#41;;
&gt;our $TRACE_CREATECOMMAND;  # display sub creates;
&gt;our $TRACE_DELETECOMMAND;  # display sub deletes;
&gt;
&gt;$TRACE_SHOWCODE      = 0 unless defined $TRACE_SHOWCODE;
&gt;$TRACE_DELETECOMMAND = 0 unless defined $TRACE_DELETECOMMAND;
&gt;$TRACE_CREATECOMMAND = 0 unless defined $TRACE_CREATECOMMAND;
&gt;
&gt;
&gt;to be written as
&gt;
&gt;sub TRACE_SHOWCODE &#40;&#41; {0}
&gt;etc
&gt;because this way it is much more efficient
</div></div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
