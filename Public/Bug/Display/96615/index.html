<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #96615 for Parse-CPAN-Packages-Fast: tests fail on 5.21.1</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #96615 for Parse-CPAN-Packages-Fast: tests fail on 5.21.1</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Parse-CPAN-Packages-Fast/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Parse-CPAN-Packages-Fast/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Parse-CPAN-Packages-Fast/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Parse-CPAN-Packages-Fast/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Parse-CPAN-Packages-Fast">Parse-CPAN-Packages-Fast CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">96615</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Parse-CPAN-Packages-Fast/Active/">Parse-CPAN-Packages-Fast</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ether [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-232552-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.07    </td>
  </tr>
  <tr id="CF-232553-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




dtruss.out<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1386753/736450/dtruss.out">
Mon Jul 14 14:31:52 2014 (521.6k) by ether [...] cpan.org
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/1386735/736436/dtruss.out">
Mon Jul 14 14:27:36 2014 (115.3k) by ether [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;21&nbsp;15:50:02&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> tests fail on 5.21.1</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">build log follows:

    cpanm &#40;App::cpanminus&#41; 1.7001 on perl 5.021001 built for darwin-2level
    Work directory is /Users/ether/.cpanm/work/1403378840.20252
    You have make /usr/bin/make
    You have LWP 6.06
    You have /usr/bin/tar: bsdtar 2.8.3 - libarchive 2.8.3
    You have /usr/bin/unzip
    Checking if you have ExtUtils::MakeMaker 6.31 ... Yes &#40;6.99_02&#41;
    Checking if you have ExtUtils::Install 1.46 ... Yes &#40;1.68&#41;
    Searching Parse::CPAN::Packages::Fast on mirror <span class="clickylink"><a target="new" rel="nofollow" href="http://mirrors.gossamer-threads.com/CPAN">http://mirrors.gossamer-threads.com/CPAN</a></span> ...
    Downloading index file <span class="clickylink"><a target="new" rel="nofollow" href="http://mirrors.gossamer-threads.com/CPAN/modules/02packages.details.txt.gz">http://mirrors.gossamer-threads.com/CPAN/modules/02packages.details.txt.gz</a></span> ...
    Uncompressing index file...
    --&gt; Working on Parse::CPAN::Packages::Fast
    Fetching <span class="clickylink"><a target="new" rel="nofollow" href="http://mirrors.gossamer-threads.com/CPAN/authors/id/S/SR/SREZIC/Parse-CPAN-Packages-Fast-0.07.tar.gz">http://mirrors.gossamer-threads.com/CPAN/authors/id/S/SR/SREZIC/Parse-CPAN-Packages-Fast-0.07.tar.gz</a></span>
    -&gt; OK
    Unpacking Parse-CPAN-Packages-Fast-0.07.tar.gz
    Entering Parse-CPAN-Packages-Fast-0.07
    Checking configure dependencies from META.json
    Checking if you have ExtUtils::MakeMaker 0 ... Yes &#40;6.99_02&#41;
    Configuring Parse-CPAN-Packages-Fast-0.07
    Running Makefile.PL
    Checking if your kit is complete...
    Looks good
    Generating a Unix-style Makefile
    Writing Makefile for Parse::CPAN::Packages::Fast
    Writing MYMETA.yml and MYMETA.json
    -&gt; OK
    Checking dependencies from MYMETA.json ...
    Checking if you have IO::Uncompress::Gunzip 0 ... Yes &#40;2.064&#41;
    Checking if you have ExtUtils::MakeMaker 0 ... Yes &#40;6.99_02&#41;
    Checking if you have CPAN::Version 0 ... Yes &#40;5.5003&#41;
    Checking if you have CPAN::DistnameInfo 0 ... Yes &#40;0.12&#41;
    Building and testing Parse-CPAN-Packages-Fast-0.07
    cp lib/Parse/CPAN/Packages/Fast.pm blib/lib/Parse/CPAN/Packages/Fast.pm
    Manifying blib/man3/Parse::CPAN::Packages::Fast.0
    PERL_DL_NONLAZY=1 /Users/ether/perl5/perlbrew/perls/21.1/bin/perl5.21.1 &#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t

    #   Failed test &#39;Find latest Catalyst-Runtime&#39;
    #   at t/basic.t line 45.
    # Looks like you failed 1 test of 16.
    t/basic.t .......... 
    Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
    Failed 1/16 subtests 
    t/edge_cases.t ..... ok

    #   Failed test at t/module_lookup.t line 32.
    #          got: undef
    #     expected: &#39;IO::Buffered&#39;
    # $VAR1 = {};

    #   Failed test at t/module_lookup.t line 32.
    #          got: undef
    #     expected: &#39;Net::OpenID::Yadis&#39;
    # $VAR1 = {};

    #   Failed test at t/module_lookup.t line 32.
    #          got: undef
    #     expected: &#39;Class::DBI::Plugin::Pager::RowsTo&#39;
    # $VAR1 = {};

    #   Failed test at t/module_lookup.t line 32.
    #          got: undef
    #     expected: &#39;YAPE::Regex::Explain&#39;
    # $VAR1 = {};

    #   Failed test at t/module_lookup.t line 32.
    #          got: undef
    #     expected: &#39;PPI::Token::_QuoteEngine::Simple&#39;
    # $VAR1 = {};

    #   Failed test at t/module_lookup.t line 32.
    #          got: undef
    #     expected: &#39;Tie::Counter&#39;
    # $VAR1 = {};
    # Looks like you failed 6 tests of 13.
    t/module_lookup.t .. 
    Dubious, test returned 6 &#40;wstat 1536, 0x600&#41;
    Failed 6/13 subtests 

    Test Summary Report
    -------------------
    t/basic.t        &#40;Wstat: 256 Tests: 16 Failed: 1&#41;
      Failed test:  14
      Non-zero exit status: 1
    t/module_lookup.t &#40;Wstat: 1536 Tests: 13 Failed: 6&#41;
      Failed tests:  4, 7-11
      Non-zero exit status: 6
    Files=3, Tests=31,  2 wallclock secs &#40; 0.03 usr  0.01 sys +  2.55 cusr  0.07 csys =  2.66 CPU&#41;
    Result: FAIL
    Failed 2/3 test programs. 7/31 subtests failed.
    make: *** [test_dynamic] Error 6
    -&gt; FAIL Installing Parse::CPAN::Packages::Fast failed. See /Users/ether/.cpanm/work/1403378840.20252/build.log for details. Retry with --force to force install it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;12&nbsp;12:46:45&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Please let me know if I can run any commands for you to help diagnose this.  My toolchain is broken on this machine because of this module, so I am sad :&#40;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;13&nbsp;13:12:53&nbsp;2014</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2014-07-12 12:46:45, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Please let me know if I can run any commands for you to help diagnose
&gt; this.  My toolchain is broken on this machine because of this module,
&gt; so I am sad :&#40;
</div>
I cannot reproduce the problem on two systems with perl 5.21.1 &#40;freebsd 10.0 and debian wheezy&#41;. Maybe you can run the problematic test with a system call tracer? Not sure what&#39;s available on a Mac OS X system, maybe truss or ktrace? If it&#39;s truss, then you can do something like

    truss -o /tmp/truss.log perl5.21.1 -Mblib t/module_lookup.t

and send the resulting truss.log via email &#40;probably too large to be attached here&#41;.

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;13&nbsp;13:12:54&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;14&nbsp;14:27:36&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Output attached from:

    cpanm --look Parse::CPAN::Packages::Fast
    perlbrew use 21.1@std
    perl Makefile.PL &#38;&#38; make
    sudo dtruss -o  perl -Mblib t/module_lookup.t &gt; dtruss.out 2&gt;&#38;1
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> dtruss.out</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1386735/736436/dtruss.out">Download dtruss.out</a><br />
<span class="downloadcontenttype">application/octet-stream 115.3k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;14&nbsp;14:31:52&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">oops, sudo lost PERL5LIB...

this works much better:

sudo dtruss -o  perl -I/Users/ether/.perlbrew/libs/21.1@std/lib/perl5 -Mblib t/module_lookup.t &gt; dtruss.out 2&gt;&#38;1
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> dtruss.out</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1386753/736450/dtruss.out">Download dtruss.out</a><br />
<span class="downloadcontenttype">application/octet-stream 521.6k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;14&nbsp;15:03:15&nbsp;2014</span>
    <span class="description">slaven [...] rezic.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #96615] tests fail on 5.21.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 14 Jul 2014 21:02:30 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Parse-CPAN-Packages-Fast [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Slaven Rezic &lt;slaven [...] rezic.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Karen Etheridge via RT&#34; &lt;bug-Parse-CPAN-Packages-Fast@rt.cpan.org&gt;
writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Parse-CPAN-Packages-Fast
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=96615">https://rt.cpan.org/Ticket/Display.html?id=96615</a></span> &gt;
&gt;
&gt; oops, sudo lost PERL5LIB...
&gt;
&gt; this works much better:
&gt;
&gt; sudo dtruss -o  perl -I/Users/ether/.perlbrew/libs/21.1@std/lib/perl5 -Mblib t/module_lookup.t &gt; dtruss.out 2&gt;&#38;1
&gt;
</div>
Thanks. Just an idea --- maybe it&#39;s a locale problem? What if you run
the test with LANG=C LC_ALL=C?

-- 
Slaven Rezic - slaven &lt;at&gt; rezic &lt;dot&gt; de

    Berlin Perl Mongers - <span class="clickylink"><a target="new" rel="nofollow" href="http://berlin.pm.org">http://berlin.pm.org</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;14&nbsp;15:27:22&nbsp;2014</span>
    <span class="description">slaven [...] rezic.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #96615] tests fail on 5.21.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 14 Jul 2014 21:26:00 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Parse-CPAN-Packages-Fast [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Slaven Rezic &lt;slaven [...] rezic.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Slaven Rezic &lt;slaven@rezic.de&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#34;Karen Etheridge via RT&#34; &lt;bug-Parse-CPAN-Packages-Fast@rt.cpan.org&gt;
&gt; writes:
&gt;
<div class="message-stanza open">&gt;&gt;        Queue: Parse-CPAN-Packages-Fast
&gt;&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=96615">https://rt.cpan.org/Ticket/Display.html?id=96615</a></span> &gt;
&gt;&gt;
&gt;&gt; oops, sudo lost PERL5LIB...
&gt;&gt;
&gt;&gt; this works much better:
&gt;&gt;
&gt;&gt; sudo dtruss -o  perl -I/Users/ether/.perlbrew/libs/21.1@std/lib/perl5 -Mblib t/module_lookup.t &gt; dtruss.out 2&gt;&#38;1
&gt;&gt;
</div>&gt;
&gt; Thanks. Just an idea --- maybe it&#39;s a locale problem? What if you run
&gt; the test with LANG=C LC_ALL=C?
</div>
No, something different: it seems that your 02packages.details.txt is
not sorted as expected. The version from CPAN is usually folded, but in
your version the lowercase modules are at the end. Also it seems that
some modules are filtered out from your 02packages.details.txt &#40;but this
shouldn&#39;t be a problem for the test&#41;.

Regards,
    Slaven

-- 
Slaven Rezic - slaven &lt;at&gt; rezic &lt;dot&gt; de

    Berlin Perl Mongers - <span class="clickylink"><a target="new" rel="nofollow" href="http://berlin.pm.org">http://berlin.pm.org</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;14&nbsp;18:00:47&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #96615] tests fail on 5.21.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 14 Jul 2014 15:00:10 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;slaven [...] rezic.de via RT&#34; &lt;bug-Parse-CPAN-Packages-Fast [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karen Etheridge &lt;ether [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, Jul 14, 2014 at 03:27:23PM -0400, slaven@rezic.de via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; No, something different: it seems that your 02packages.details.txt is
&gt; not sorted as expected. The version from CPAN is usually folded, but in
&gt; your version the lowercase modules are at the end. Also it seems that
&gt; some modules are filtered out from your 02packages.details.txt &#40;but this
&gt; shouldn&#39;t be a problem for the test&#41;.
</div>
When I look in the source, I see:

        require CPAN;
        no warnings &#39;once&#39;;
        local $CPAN::Be_Silent = 1;
        CPAN::HandleConfig-&gt;load;
        my $packages_file = $CPAN::Config-&gt;{keep_source_where} . &#34;/modules/02packages.details.txt.gz&#34;;

But, I don&#39;t use CPAN.pm on this machine and may never even have configured it; I certainly wouldn&#39;t expect the index files to be current.

        -rw-r--r--  1 ether  staff  416839 19 Jun 10:05 /Users/ether/.cpan/sources/modules/02packages.details.txt.gz

$ gzcat /Users/ether/.cpan/sources/modules/02packages.details.txt.gz | tail

    webtools 1.27 J/JL/JLISHEV/WebTools-1.27.tar.gz
    wildproto 1.0.1 B/BR/BRUMLEVE/wildproto-1.0.1.tar.gz
    win 0.03 A/AC/ACCARDO/win-0.03.tar.gz
    x_nonVisual 1.01 M/MM/MMARCO/clickTk-4.013.tar.gz
    xsub 1 B/BR/BRUMLEVE/autobless-1.0.1.tar.gz
    xsub 1 B/BR/BRUMLEVE/vm-1.0.1.tar.gz
    xsub 1 B/BR/BRUMLEVE/wildproto-1.0.1.tar.gz
    y2k 0.1 M/MS/MSCHWERN/D-oh-Year-0.06.tar.gz
    ylib 0.002 D/DA/DAGOLDEN/ylib-0.002.tar.gz
    your 1.00 M/MS/MSCHWERN/your-1.00.tar.gz

So, for the purposes of the test, you may have to cope with extremely out of date content being in this file. Or, bypass that logic in the test and provide your own &#40;very small&#41; file to test against, instead?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;15&nbsp;02:30:16&nbsp;2014</span>
    <span class="description">slaven [...] rezic.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #96615] tests fail on 5.21.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 15 Jul 2014 08:28:28 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Parse-CPAN-Packages-Fast [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Slaven Rezic &lt;slaven [...] rezic.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Karen Etheridge via RT&#34; &lt;bug-Parse-CPAN-Packages-Fast@rt.cpan.org&gt;
writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Parse-CPAN-Packages-Fast
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=96615">https://rt.cpan.org/Ticket/Display.html?id=96615</a></span> &gt;
&gt;
&gt; On Mon, Jul 14, 2014 at 03:27:23PM -0400, slaven@rezic.de via RT wrote:
<div class="message-stanza open">&gt;&gt; No, something different: it seems that your 02packages.details.txt is
&gt;&gt; not sorted as expected. The version from CPAN is usually folded, but in
&gt;&gt; your version the lowercase modules are at the end. Also it seems that
&gt;&gt; some modules are filtered out from your 02packages.details.txt &#40;but this
&gt;&gt; shouldn&#39;t be a problem for the test&#41;.
</div>&gt;
&gt; When I look in the source, I see:
&gt;
&gt;         require CPAN;
&gt;         no warnings &#39;once&#39;;
&gt;         local $CPAN::Be_Silent = 1;
&gt;         CPAN::HandleConfig-&gt;load;
&gt;         my $packages_file = $CPAN::Config-&gt;{keep_source_where} . &#34;/modules/02packages.details.txt.gz&#34;;
&gt;
&gt; But, I don&#39;t use CPAN.pm on this machine and may never even have configured it; I certainly wouldn&#39;t expect the index files to be current.
&gt;
&gt;         -rw-r--r--  1 ether  staff  416839 19 Jun 10:05 /Users/ether/.cpan/sources/modules/02packages.details.txt.gz
&gt;
&gt; $ gzcat /Users/ether/.cpan/sources/modules/02packages.details.txt.gz | tail
&gt;
&gt;     webtools 1.27 J/JL/JLISHEV/WebTools-1.27.tar.gz
&gt;     wildproto 1.0.1 B/BR/BRUMLEVE/wildproto-1.0.1.tar.gz
&gt;     win 0.03 A/AC/ACCARDO/win-0.03.tar.gz
&gt;     x_nonVisual 1.01 M/MM/MMARCO/clickTk-4.013.tar.gz
&gt;     xsub 1 B/BR/BRUMLEVE/autobless-1.0.1.tar.gz
&gt;     xsub 1 B/BR/BRUMLEVE/vm-1.0.1.tar.gz
&gt;     xsub 1 B/BR/BRUMLEVE/wildproto-1.0.1.tar.gz
&gt;     y2k 0.1 M/MS/MSCHWERN/D-oh-Year-0.06.tar.gz
&gt;     ylib 0.002 D/DA/DAGOLDEN/ylib-0.002.tar.gz
&gt;     your 1.00 M/MS/MSCHWERN/your-1.00.tar.gz
&gt;
&gt; So, for the purposes of the test, you may have to cope with extremely out of date content being in this file. Or, bypass that logic in the test and provide your own &#40;very small&#41; file to test against, instead?
&gt;
</div>
Out of date content does not matter for the test, as long as the
contents are sorted as expected. Can you show me also the head of the
file, to see the update time, version of the writer etc.?

-- 
Slaven Rezic - slaven &lt;at&gt; rezic &lt;dot&gt; de
  BBBike - route planner for cyclists in Berlin
  WWW version:                           <span class="clickylink"><a target="new" rel="nofollow" href="http://www.bbbike.de">http://www.bbbike.de</a></span>
  Perl/Tk version for Unix and Windows:  <span class="clickylink"><a target="new" rel="nofollow" href="http://bbbike.sourceforge.net">http://bbbike.sourceforge.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;15&nbsp;10:19:55&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #96615] tests fail on 5.21.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 15 Jul 2014 07:19:41 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;slaven [...] rezic.de via RT&#34; &lt;bug-Parse-CPAN-Packages-Fast [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karen Etheridge &lt;ether [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, Jul 15, 2014 at 02:30:17AM -0400, slaven@rezic.de via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; So, for the purposes of the test, you may have to cope with extremely out of date content being in this file. Or, bypass that logic in the test and provide your own &#40;very small&#41; file to test against, instead?
&gt; &gt;
</div>&gt; 
&gt; Out of date content does not matter for the test, as long as the
&gt; contents are sorted as expected. Can you show me also the head of the
&gt; file, to see the update time, version of the writer etc.?
</div>
    : [ether@bourbon 1405356869.94836/Parse-CPAN-Packages-Fast-0.07]$; gzcat /Users/ether/.cpan/sources/modules/02packages.details.txt.gz | head
    Description: This is a whitespace-seperated file.
    Description: Each line is modulename moduleversion filename.
    Line-Count: 36730
    Last-Updated: Thu, 19 Jun 2014 07:30:30 GMT

    AAAA::Crypt::DH 0.04 B/BI/BINGOS/AAAA-Crypt-DH-0.04.tar.gz
    AAAA::Mail::SpamAssassin 0.002 S/SC/SCHWIGON/AAAA-Mail-SpamAssassin-0.002.tar.gz
    AAAAAAAAA 1.01 M/MS/MSCHWERN/AAAAAAAAA-1.01.tar.gz
    ABI 1.0 M/MA/MALAY/ABI-1.0.tar.gz
    ACH::Builder 0.03 T/TK/TKEEFER/ACH-Builder-0.03.tar.gz
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;15&nbsp;16:15:15&nbsp;2014</span>
    <span class="description">slaven [...] rezic.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #96615] tests fail on 5.21.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 15 Jul 2014 22:12:32 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Parse-CPAN-Packages-Fast [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Slaven Rezic &lt;slaven [...] rezic.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Karen Etheridge via RT&#34; &lt;bug-Parse-CPAN-Packages-Fast@rt.cpan.org&gt;
writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Parse-CPAN-Packages-Fast
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=96615">https://rt.cpan.org/Ticket/Display.html?id=96615</a></span> &gt;
&gt;
&gt; On Tue, Jul 15, 2014 at 02:30:17AM -0400, slaven@rezic.de via RT wrote:
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; So, for the purposes of the test, you may have to cope with
&gt;&gt; &gt; extremely out of date content being in this file. Or, bypass that
&gt;&gt; &gt; logic in the test and provide your own &#40;very small&#41; file to test
&gt;&gt; &gt; against, instead?
&gt;&gt; &gt;
</div>&gt;&gt; 
&gt;&gt; Out of date content does not matter for the test, as long as the
&gt;&gt; contents are sorted as expected. Can you show me also the head of the
&gt;&gt; file, to see the update time, version of the writer etc.?
</div>&gt;
&gt;     : [ether@bourbon 1405356869.94836/Parse-CPAN-Packages-Fast-0.07]$; gzcat /Users/ether/.cpan/sources/modules/02packages.details.txt.gz | head
&gt;     Description: This is a whitespace-seperated file.
&gt;     Description: Each line is modulename moduleversion filename.
&gt;     Line-Count: 36730
&gt;     Last-Updated: Thu, 19 Jun 2014 07:30:30 GMT
&gt;
&gt;     AAAA::Crypt::DH 0.04 B/BI/BINGOS/AAAA-Crypt-DH-0.04.tar.gz
&gt;     AAAA::Mail::SpamAssassin 0.002 S/SC/SCHWIGON/AAAA-Mail-SpamAssassin-0.002.tar.gz
&gt;     AAAAAAAAA 1.01 M/MS/MSCHWERN/AAAAAAAAA-1.01.tar.gz
&gt;     ABI 1.0 M/MA/MALAY/ABI-1.0.tar.gz
&gt;     ACH::Builder 0.03 T/TK/TKEEFER/ACH-Builder-0.03.tar.gz
&gt;
</div>
It seems that this file was created by cpXXXan. See
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/DrHyde/cpXXXan/pull/1">https://github.com/DrHyde/cpXXXan/pull/1</a></span>

If you don&#39;t need this file, then it&#39;s probably best to remove it. The
problematic tests are skipped if no 02packages.details.txt.gz is
available.

Regards,
    Slaven

-- 
Slaven Rezic - slaven &lt;at&gt; rezic &lt;dot&gt; de

    Berlin Perl Mongers - <span class="clickylink"><a target="new" rel="nofollow" href="http://berlin.pm.org">http://berlin.pm.org</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;15&nbsp;16:24:03&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #96615] tests fail on 5.21.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 15 Jul 2014 13:23:51 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;slaven [...] rezic.de via RT&#34; &lt;bug-Parse-CPAN-Packages-Fast [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karen Etheridge &lt;ether [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, Jul 15, 2014 at 04:15:15PM -0400, slaven@rezic.de via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It seems that this file was created by cpXXXan. See
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/DrHyde/cpXXXan/pull/1">https://github.com/DrHyde/cpXXXan/pull/1</a></span>
</div>
Nice catch!  I&#39;ll follow the progress of this ticket.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If you don&#39;t need this file, then it&#39;s probably best to remove it. The
&gt; problematic tests are skipped if no 02packages.details.txt.gz is
&gt; available.
</div>
Done, and confirmed - tests are happy without the file.  many thanks!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;15&nbsp;16:12:03&nbsp;2014</span>
    <span class="description">SREZIC [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
