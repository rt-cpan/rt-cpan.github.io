<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #24189 for GDGraph: PATCH - adds AA and alpha support</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #24189 for GDGraph: PATCH - adds AA and alpha support</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/GDGraph/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/GDGraph/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/GDGraph/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/GDGraph/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/GDGraph">GDGraph CPAN distribution</a>.</p>


<h3>Maintainer&#40;s&#41;&#39; notes</h3>

<p>There are plenty of good ideas of what people can do published here on the queue. Turning a patch from the tracker into a pull request is not one of them. In order to get maintainers' attention way more quickier, PR should have at least a sample included. We know it's hard to test images generating software, but it doesn't mean we can not test numbers produced by intermediate algorithms used to generate these images, so either a test or a sample.</p>



<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">24189</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/GDGraph/Active/">GDGraph</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">bwarfield [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
rbreiddal [...] presinet.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-14346-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.4308    </td>
  </tr>
  <tr id="CF-14347-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.44_01    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;02&nbsp;16:32:12&nbsp;2007</span>
    <span class="description">rbreiddal [...] presinet.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> PATCH - adds AA and alpha support</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This patch adds truecolor, anti-aliasing and alpha support to most types
of charts.  Truecolor only gets used if you have libgd2 &#40;preferably
2.27+&#41;, and I can&#39;t guarantee what happens under GD1 if you try to use
AA or alpha &#40;I&#39;m guessing it breaks&#41;.  

Mostly the changes to GD::Graph are not very noticeable, although I like
the effect it has on area graphs &#40;see <span class="clickylink"><a target="new" rel="nofollow" href="http://www.presinet.com/area.png">http://www.presinet.com/area.png</a></span>,
alpha =&gt; 32, aa =&gt; 1, otherwise a normal area graph&#41;.

I haven&#39;t gone through it carefully, but I&#39;m pretty sure this patch
could be greatly reduced by moving alpha up to the Graph object and
having the set_clr family automatically use it &#40;from reading the library
source, all calls without alpha are automatically sent to the alpha
versions anyways, regardless of palette vs truecolor or anything else&#41;.

I have also done the same stuff for GD::Graph3d, including improved code
for 3d pies &#40;see <span class="clickylink"><a target="new" rel="nofollow" href="http://www.presinet.com/new_pie.png&#41;">http://www.presinet.com/new_pie.png&#41;</a></span>.  I&#39;ll link these
two patches together in RT once I&#39;ve created the other one.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> gdgraph-aaalpha.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Index: Graph.pm
===================================================================
--- Graph.pm	&#40;.../Graph.pm&#41;	&#40;revision 24071&#41;
+++ Graph.pm	&#40;.../GDGraph/trunk/Graph.pm&#41;	&#40;working copy&#41;
@@ -109,7 +109,7 @@
 #
 # PUBLIC methods, documented in pod.
 #
-sub new  # &#40; width, height &#41; optional;
+sub new  # &#40; width, height, truecolor &#41; optional;
 {
     my $type = shift;
     my $self = {};
@@ -119,10 +119,12 @@
     {
         # If there are any parameters, they should be the size
         return GD::Graph-&gt;_set_error&#40;
-            &#34;Usage: GD::Graph::&lt;type&gt;::new&#40;width, height&#41;&#34;&#41; unless @_ &gt;= 2;
+            &#34;Usage: GD::Graph::&lt;type&gt;::new&#40;width, height, truecolor&#41;&#34;&#41; unless @_ &gt;= 2;
 
         $self-&gt;{width} = shift;
         $self-&gt;{height} = shift;
+        $self-&gt;{truecolor} = shift;
+        $self-&gt;{truecolor} = 0 unless defined&#40;$self-&gt;{truecolor}&#41;;
     } 
     else 
     {
@@ -283,10 +285,15 @@
 {
     my $self = shift;
     return $self-&gt;{graph} if exists $self-&gt;{graph};
-    $self-&gt;{graph} = 2.0 &lt;= $GD::VERSION 
-        ?   GD::Image-&gt;newPalette&#40;$self-&gt;{width}, $self-&gt;{height}&#41;
-        :   GD::Image-&gt;new&#40;$self-&gt;{width}, $self-&gt;{height}&#41;;
-
+    if &#40;2.0 &lt;= $GD::VERSION&#41;{
+        if &#40;$self-&gt;{truecolor}&#41;{
+            $self-&gt;{graph} = GD::Image-&gt;newTrueColor&#40;$self-&gt;{width}, $self-&gt;{height}&#41;;
+        } else {
+            $self-&gt;{graph} = GD::Image-&gt;newPalette&#40;$self-&gt;{width}, $self-&gt;{height}&#41;;
+        }
+    } else {
+        $self-&gt;{graph} = GD::Image-&gt;new&#40;$self-&gt;{width}, $self-&gt;{height}&#41;;
+    }
 }
 
 # Initialise the graph output canvas, setting colours &#40;and getting back
@@ -298,6 +305,11 @@
     my $self = shift;
 
     $self-&gt;{bgci} = $self-&gt;set_clr&#40;_rgb&#40;$self-&gt;{bgclr}&#41;&#41;;
+    if &#40;$self-&gt;{truecolor}&#41;{
+        #fake up the background, since it doesn&#39;t work with the first allocated color,
+        #like in palette based images
+        $self-&gt;{graph}-&gt;filledRectangle&#40;0,0,$self-&gt;{width},$self-&gt;{height},$self-&gt;{bgci}&#41;;
+    }
     $self-&gt;{fgci} = $self-&gt;set_clr&#40;_rgb&#40;$self-&gt;{fgclr}&#41;&#41;;
     $self-&gt;{tci}  = $self-&gt;set_clr&#40;_rgb&#40;$self-&gt;{textclr}&#41;&#41;;
     $self-&gt;{lci}  = $self-&gt;set_clr&#40;_rgb&#40;$self-&gt;{labelclr}&#41;&#41;;
@@ -387,6 +399,8 @@
     return unless @_;
     my $gd = $self-&gt;{graph};
 
+    return $gd-&gt;colorResolveAlpha&#40;@_&#41; if @_ &gt; 3;
+
     # All of this could potentially be done by using colorResolve
     # The problem is that colorResolve doesn&#39;t return an error
     # condition &#40;-1&#41; if it can&#39;t allocate a color. Instead it always
@@ -399,13 +413,6 @@
     # if this fails, we should use colorClosest.
     $i = $gd-&gt;colorClosest&#40;@_&#41;  if $i &lt; 0;
 
-    # TODO Deal with antialiasing here?
-    if &#40;0 &#38;&#38; $self-&gt;can&#40;&#34;setAntiAliased&#34;&#41;&#41;
-    {
-	$self-&gt;setAntiAliased&#40;$i&#41;;
-	eval &#34;$i = gdAntiAliased&#34;;
-    }
-
     return $i;
 }
 
@@ -435,6 +442,8 @@
 {
     my $self = shift; 
     return unless @_;
+
+    return $self-&gt;{graph}-&gt;colorAllocateAlpha&#40;@_&#41; if @_ &gt; 3;
     $self-&gt;{graph}-&gt;colorAllocate&#40;@_&#41;; 
 }
 
@@ -669,13 +678,32 @@
 
 =over 4
 
-=item GD::Graph::chart-E&lt;gt&gt;new&#40;[width,height]&#41;
+=item GD::Graph::chart-E&lt;gt&gt;new&#40;[width,height,truecolor]&#41;
 
-Create a new object $graph with optional width and heigth. 
-Default width = 400, default height = 300. I&lt;chart&gt; is either
-I&lt;bars&gt;, I&lt;lines&gt;, I&lt;points&gt;, I&lt;linespoints&gt;, I&lt;area&gt;, I&lt;mixed&gt; or
-I&lt;pie&gt;.
+Create a new object $graph with optional width, height and truecolor. 
+Default width = 400, default height = 300, default truecolor = 0. 
+I&lt;chart&gt; is either I&lt;bars&gt;, I&lt;lines&gt;, I&lt;points&gt;, I&lt;linespoints&gt;, 
+I&lt;area&gt;, I&lt;mixed&gt; or I&lt;pie&gt;.
 
+If you pass a 3rd argument of 1 to the new method, you get a truecolor graph,
+instead of palette-based.  This opens up some additional options for the
+3d graphs:
+
+=over 4
+
+=item alpha
+
+Sets the alpha channel component of the data point colours.  This only has
+an effect on things coloured by dclrs.  0 is opaque &#40;default&#41;,
+becoming more transparent up to 127 &#40;completely transparent&#41;.
+
+=item aa
+
+1 or 0 &#40;default&#41;.  If this is set to one, the data points will be
+anti-aliased.  This will smooth the lines/arcs used to make the graph.
+
+=back
+
 =item $graph-E&lt;gt&gt;set_text_clr&#40;I&lt;colour name&gt;&#41;
 
 Set the colour of the text. This will set the colour of the titles,
Index: Graph/area.pm
===================================================================
--- Graph/area.pm	&#40;revision 24074&#41;
+++ Graph/area.pm	&#40;working copy&#41;
@@ -16,6 +16,7 @@
 use strict;
 
 use GD::Graph::axestype;
+use GD;
 
 @GD::Graph::area::ISA = qw&#40; GD::Graph::axestype &#41;;
 
@@ -30,8 +31,14 @@
             $self-&gt;{_data}-&gt;error&#41;;
 
     # Select a data colour
-    my $dsci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$ds&#41;&#41;;
-    my $brci = $self-&gt;set_clr&#40;$self-&gt;pick_border_clr&#40;$ds&#41;&#41;;
+    my $dsci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$ds&#41;,$self-&gt;{alpha}&#41;;
+    my $brci;
+    my @rgb = $self-&gt;pick_border_clr&#40;$ds&#41;;
+    if &#40;@rgb &gt; 0&#41;{
+        $brci = $self-&gt;set_clr&#40;@rgb,$self-&gt;{alpha}&#41;;
+    } else {
+        $brci = undef;
+    }
 
     # Create a new polygon
     my $poly = GD::Polygon-&gt;new&#40;&#41;;
@@ -84,10 +91,19 @@
     }
 
     # Draw a filled and a line polygon
-    $self-&gt;{graph}-&gt;filledPolygon&#40;$poly, $dsci&#41;
-        if defined $dsci;
-    $self-&gt;{graph}-&gt;polygon&#40;$poly, $brci&#41;
-        if defined $brci;
+    if &#40;$self-&gt;{aa}&#41;{
+        $self-&gt;{graph}-&gt;setAntiAliased&#40;$dsci&#41;;
+        $self-&gt;{graph}-&gt;filledPolygon&#40;$poly, gdAntiAliased&#41;
+            if defined $dsci;
+        $self-&gt;{graph}-&gt;setAntiAliased&#40;$brci&#41;;
+        $self-&gt;{graph}-&gt;polygon&#40;$poly, gdAntiAliased&#41;
+            if defined $brci;
+    } else {
+        $self-&gt;{graph}-&gt;filledPolygon&#40;$poly, $dsci&#41;
+            if defined $dsci;
+        $self-&gt;{graph}-&gt;polygon&#40;$poly, $brci&#41;
+            if defined $brci;
+    }
 
     # Draw the accent lines
     if &#40;defined $brci &#38;&#38;
Index: Graph/lines.pm
===================================================================
--- Graph/lines.pm	&#40;revision 24074&#41;
+++ Graph/lines.pm	&#40;working copy&#41;
@@ -31,7 +31,7 @@
         return $self-&gt;_set_error&#40;&#34;Impossible illegal data set: $ds&#34;,
             $self-&gt;{_data}-&gt;error&#41;;
 
-    my $dsci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$ds&#41; &#41;;
+    my $dsci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$ds&#41;, $self-&gt;{alpha} &#41;;
     my $type = $self-&gt;pick_line_type&#40;$ds&#41;;
 
     my &#40;$xb, $yb&#41;;
@@ -154,7 +154,12 @@
 
         # Need the setstyle to reset 
         $self-&gt;{graph}-&gt;setStyle&#40;@pattern&#41; if &#40;@pattern&#41;;
-        $self-&gt;{graph}-&gt;line&#40; $xs, $yslw, $xe, $yelw, $style &#41;;
+        if &#40;$self-&gt;{aa}&#41;{
+            $self-&gt;{graph}-&gt;setAntiAliased&#40;$style&#41;;
+            $self-&gt;{graph}-&gt;line&#40; $xs, $yslw, $xe, $yelw, gdAntiAliased&#41;;
+        } else {
+            $self-&gt;{graph}-&gt;line&#40; $xs, $yslw, $xe, $yelw, $style &#41;;
+        }
     }
 }
 
@@ -163,7 +168,7 @@
     my $self = shift;
     my &#40;$n, $x, $y&#41; = @_;
 
-    my $ci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$n&#41;&#41;;
+    my $ci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$n&#41;,$self-&gt;{alpha}&#41;;
     return unless defined $ci;
     my $type = $self-&gt;pick_line_type&#40;$n&#41;;
 
Index: Graph/points.pm
===================================================================
--- Graph/points.pm	&#40;revision 24074&#41;
+++ Graph/points.pm	&#40;working copy&#41;
@@ -31,7 +31,7 @@
             $self-&gt;{_data}-&gt;error&#41;;
 
     # Pick a colour
-    my $dsci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$ds&#41;&#41;;
+    my $dsci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$ds&#41;,$self-&gt;{alpha}&#41;;
     my $type = $self-&gt;pick_marker&#40;$ds&#41;;
 
     for &#40;my $i = 0; $i &lt; @values; $i++&#41;
@@ -163,7 +163,7 @@
     my $x = shift;
     my $y = shift;
 
-    my $ci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$n&#41;&#41;;
+    my $ci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$n&#41;,$self-&gt;{alpha}&#41;;
 
     my $old_ms = $self-&gt;{marker_size};
     my $ms = _min&#40;$self-&gt;{legend_marker_height}, $self-&gt;{legend_marker_width}&#41;;
Index: Graph/bars.pm
===================================================================
--- Graph/bars.pm	&#40;revision 24074&#41;
+++ Graph/bars.pm	&#40;working copy&#41;
@@ -83,7 +83,7 @@
     my $self = shift;
     my &#40;$ds, $i, $value, $topvalues, $l, $t, $r, $b&#41; = @_;
     my $bsd = $self-&gt;{shadow_depth} or return;
-    my $bsci = $self-&gt;set_clr&#40;_rgb&#40;$self-&gt;{shadowclr}&#41;&#41;;
+    my $bsci = $self-&gt;set_clr&#40;_rgb&#40;$self-&gt;{shadowclr}&#41;,$self-&gt;{alpha}&#41;;
 
     if &#40;$self-&gt;{cumulate}&#41;
     {
@@ -136,9 +136,15 @@
     my $bar_s = $self-&gt;{bar_spacing}/2;
 
     # Pick a data colour
-    my $dsci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$ds&#41;&#41;;
+    my $dsci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$ds&#41;,$self-&gt;{alpha}&#41;;
     # contrib &#34;Bremford, Mike&#34; &lt;mike.bremford@gs.com&gt;
-    my $brci = $self-&gt;set_clr&#40;$self-&gt;pick_border_clr&#40;$ds&#41;&#41;;
+    my $brci;
+    my @rgb = $self-&gt;pick_border_clr&#40;$ds&#41;;
+    if &#40;@rgb &gt; 0&#41;{
+        $brci = $self-&gt;set_clr&#40;@rgb,$self-&gt;{alpha}&#41;;
+    } else {
+        $brci = undef;
+    }
 
     my @values = $self-&gt;{_data}-&gt;y_values&#40;$ds&#41; or
         return $self-&gt;_set_error&#40;&#34;Impossible illegal data set: $ds&#34;,
@@ -159,9 +165,9 @@
         #
         # cycle_clrs option sets the color based on the point, 
         # not the dataset.
-        $dsci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$i + 1&#41;&#41;
+        $dsci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$i + 1&#41;,$self-&gt;{alpha}&#41;
             if $self-&gt;{cycle_clrs};
-        $brci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$i + 1&#41;&#41;
+        $brci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$i + 1&#41;,$self-&gt;{alpha}&#41;
             if $self-&gt;{cycle_clrs} &gt; 1;
 
         # get coordinates of right and center of bar
@@ -212,9 +218,9 @@
     my $bar_s = $self-&gt;{bar_spacing}/2;
 
     # Pick a data colour
-    my $dsci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$ds&#41;&#41;;
+    my $dsci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$ds&#41;,$self-&gt;{alpha}&#41;;
     # contrib &#34;Bremford, Mike&#34; &lt;mike.bremford@gs.com&gt;
-    my $brci = $self-&gt;set_clr&#40;$self-&gt;pick_border_clr&#40;$ds&#41;&#41;;
+    my $brci = $self-&gt;set_clr&#40;$self-&gt;pick_border_clr&#40;$ds&#41;,$self-&gt;{alpha}&#41;;
 
     my @values = $self-&gt;{_data}-&gt;y_values&#40;$ds&#41; or
         return $self-&gt;_set_error&#40;&#34;Impossible illegal data set: $ds&#34;,
@@ -242,9 +248,9 @@
         #
         # cycle_clrs option sets the color based on the point, 
         # not the dataset.
-        $dsci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$i + 1&#41;&#41;
+        $dsci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$i + 1&#41;,$self-&gt;{alpha}&#41;
             if $self-&gt;{cycle_clrs};
-        $brci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$i + 1&#41;&#41;
+        $brci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$i + 1&#41;,$self-&gt;{alpha}&#41;
             if $self-&gt;{cycle_clrs} &gt; 1;
 
         # get coordinates of top and center of bar
Index: Graph/axestype.pm
===================================================================
--- Graph/axestype.pm	&#40;revision 24074&#41;
+++ Graph/axestype.pm	&#40;working copy&#41;
@@ -147,6 +147,9 @@
 
     borderclrs      =&gt; undef,
 
+    aa              =&gt; 0,
+    alpha           =&gt; 0,
+
     # XXX
     # Multiple inheritance &#40;linespoints and mixed&#41; finally bit me. The
     # _has_defaults and set methods can only work correctly when the
@@ -2095,7 +2098,7 @@
 
     my $g = $s-&gt;{graph};
 
-    my $ci = $s-&gt;set_clr&#40;$s-&gt;pick_data_clr&#40;$n&#41;&#41;;
+    my $ci = $s-&gt;set_clr&#40;$s-&gt;pick_data_clr&#40;$n&#41;,$s-&gt;{slpha}&#41;;
     return unless defined $ci;
 
     $y += int&#40;$s-&gt;{lg_el_height}/2 - $s-&gt;{legend_marker_height}/2&#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;02&nbsp;16:47:23&nbsp;2007</span>
    <span class="description">rbreiddal [...] presinet.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rbreiddal [...] presinet.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I forgot to mention that the patch also makes the border color option
work as documented in area and bars chart types. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;02&nbsp;17:20:10&nbsp;2007</span>
    <span class="description">rbreiddal [...] presinet.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rbreiddal [...] presinet.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">GD::Graph3d is where the good stuff is happening... hopefully this can
be coordinated somehow :&#41;

<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Public/Bug/Display.html?id=24191">http://rt.cpan.org/Public/Bug/Display.html?id=24191</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;03&nbsp;23:15:42&nbsp;2007</span>
    <span class="description">bwarfield [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;03&nbsp;23:15:44&nbsp;2007</span>
    <span class="description">bwarfield [...] cpan.org -  Given to BWARFIELD</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;03&nbsp;23:15:47&nbsp;2007</span>
    <span class="description">bwarfield [...] cpan.org -  Severity Normal changed to Wishlist</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;16&nbsp;13:49:12&nbsp;2007</span>
    <span class="description">rbreiddal [...] presinet.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rbreiddal [...] presinet.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This revised patch moves a lot of the updated 3d pie code into pie.pm. 
Now if you set aa =&gt; 1 and &#39;3d&#39; =&gt; 1, you will get the new stuff,
otherwise you&#39;ll get what previously existed.  Also moved support for
legends into pie.pm.

See Gd-Graph3d bug for a similarly updated patch.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;01&nbsp;14:12:56&nbsp;2007</span>
    <span class="description">bwarfield [...] cpan.org -  Fixed in 1.44_01 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;21&nbsp;16:51:40&nbsp;2013</span>
    <span class="description">RUZ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> New GD::Graph co-maintainer and new release on CPAN</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

You recieved this message as you filed a bug report or feature request against GD::Graph module on CPAN.

My name is Ruslan and I&#39;m new co-maintainer of the module. I&#39;ve updated the module to 1.45 with doc changes and released it to CPAN. See distribution status [1].

I have TODO list for several releases, so if your ticket was a patch then turning it into a nice pull request may expedite inclusion :&#41;

[1] <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~ruz/GDGraph-1.45/Graph.pm#DISTRIBUTION_STATUS">http://search.cpan.org/~ruz/GDGraph-1.45/Graph.pm#DISTRIBUTION_STATUS</a></span>

-- 
Best regards, Ruslan.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
