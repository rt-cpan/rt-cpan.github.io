<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #20485 for XML-Simple: fails the testsuite</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #20485 for XML-Simple: fails the testsuite</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/XML-Simple/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/XML-Simple/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/XML-Simple/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/XML-Simple/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/XML-Simple">XML-Simple CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">20485</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/XML-Simple/Active/">XML-Simple</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mschwern [...] cpan.org

<br />
nospam-abuse [...] bloodgate.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-37628-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.14    </td>
  </tr>
  <tr id="CF-37629-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;16&nbsp;07:38:12&nbsp;2006</span>
    <span class="description">TELS [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> fails the testsuite</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"># make test
cp lib/XML/Simple/FAQ.pod blib/lib/XML/Simple/FAQ.pod
cp lib/XML/Simple.pm blib/lib/XML/Simple.pm
PERL_DL_NONLAZY=1 /usr/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34;
&#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
# Package                        Version
#  perl                           5.8.8
#  XML::Simple                    2.14
#  Storable                       2.15
#  XML::Parser                    2.34
#  XML::SAX                       0.14
#  XML::NamespaceSupport          1.09
#  XML::SAX::PurePerl             0.90 &#40;default parser&#41;
t/0_Config........ok
t/1_XMLin.........ok 1/122Unable to recognise encoding of this document
at /usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm
line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
t/1_XMLin.........ok 2/122Unable to recognise encoding of this document
at /usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm
line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.

#   Failed test &#39;no warning issued &#40;as expected&#41;&#39;
#   in t/1_XMLin.t at line 380.
#          got: &#39;Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
# &#39;
#     expected: &#39;&#39;
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line
96, &lt;STDIN&gt; line 1.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line
96, &lt;STDIN&gt; line 1.
t/1_XMLin.........NOK 32Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line
96, &lt;STDIN&gt; line 1.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line
96, &lt;STDIN&gt; line 1.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line
96, &lt;STDIN&gt; line 1.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line
96, &lt;STDIN&gt; line 1.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line
96, &lt;STDIN&gt; line 1.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line
96, &lt;STDIN&gt; line 1.

#   Failed test &#39;successfully read an SRT config file&#39;
#   in t/1_XMLin.t at line 1443.
#     Structures begin differing at:
#          $got-&gt;{pubpath}{test1}{title} = &#39;web_source -&gt; web_target1&#39;
#     $expected-&gt;{pubpath}{test1}{title} = &#39;web_source -&#38;gt; web_target1&#39;
# Looks like you failed 2 tests of 122.
t/1_XMLin.........dubious
        Test returned status 2 &#40;wstat 512, 0x200&#41;
DIED. FAILED tests 32, 122
        Failed 2/122 tests, 98.36% okay
t/2_XMLout........ok 1/196
#   Failed test &#39;generated document with escaping&#39;
#   in t/2_XMLout.t at line 302.
#     Structures begin differing at:
#          $got-&gt;{c} = &#39;&#38;amp;C&#38;amp;&#39;
#     $expected-&gt;{c} = &#39;&#38;C&#38;&#39;
t/2_XMLout........NOK 47Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
# Looks like you failed 1 test of 196.
t/2_XMLout........dubious
        Test returned status 1 &#40;wstat 256, 0x100&#41;
DIED. FAILED test 47
        Failed 1/196 tests, 99.49% okay &#40;less 1 skipped test: 194 okay,
98.98%&#41;
t/3_Storable......ok
t/4_MemShare......ok
t/5_MemCopy.......ok
t/6_ObjIntf.......ok
t/7_SaxStuff......ok
t/8_Namespaces....ok
t/9_Strict........ok 1/38Unable to recognise encoding of this document
at /usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm
line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
Unable to recognise encoding of this document at
/usr/lib/perl5/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm line 96.
t/9_Strict........ok
t/A_XMLParser.....ok
Failed Test  Stat Wstat Total Fail  Failed  List of Failed
-------------------------------------------------------------------------------
t/1_XMLin.t     2   512   122    2   1.64%  32 122
t/2_XMLout.t    1   256   196    1   0.51%  47
1 subtest skipped.
Failed 2/11 test scripts, 81.82% okay. 3/468 subtests failed, 99.36% okay.
make: *** [test_dynamic] Error 255

Summary of my perl5 &#40;revision 5 version 8 subversion 8&#41; configuration:
  Platform:
    osname=linux, osvers=2.6.16, archname=x86_64-linux-thread-multi
    uname=&#39;linux dvorak 2.6.16 #1 smp mon apr 10 04:51:13 utc 2006
x86_64 x86_64 x86_64 gnulinux &#39;
    config_args=&#39;-ds -e -Dprefix=/usr -Dvendorprefix=/usr
-Dinstallusrbinperl -Dusethreads -Di_db -Di_dbm -Di_ndbm -Di_gdbm
-Duseshrplib=true -Doptimize=-O2 -fmessage-length=0 -Wall
-D_FORTIFY_SOURCE=2 -g -Wall -pipe&#39;
    hint=recommended, useposix=true, d_sigaction=define
    usethreads=define use5005threads=undef useithreads=define
usemultiplicity=define
    useperlio=define d_sfio=undef uselargefiles=define usesocks=undef
    use64bitint=define use64bitall=define uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;cc&#39;, ccflags =&#39;-D_REENTRANT -D_GNU_SOURCE -DTHREADS_HAVE_PIDS
-DDEBUGGING -fno-strict-aliasing -pipe -Wdeclaration-after-statement
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64&#39;,
    optimize=&#39;-O2 -fmessage-length=0 -Wall -D_FORTIFY_SOURCE=2 -g -Wall
-pipe&#39;,
    cppflags=&#39;-D_REENTRANT -D_GNU_SOURCE -DTHREADS_HAVE_PIDS -DDEBUGGING
-fno-strict-aliasing -pipe -Wdeclaration-after-statement&#39;
    ccversion=&#39;&#39;, gccversion=&#39;4.1.0 &#40;SUSE Linux&#41;&#39;, gccosandvers=&#39;&#39;
    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
    ivtype=&#39;long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;,
lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;cc&#39;, ldflags =&#39; -L/usr/local/lib64&#39;
    libpth=/lib64 /usr/lib64 /usr/local/lib64
    libs=-lm -ldl -lcrypt -lpthread
    perllibs=-lm -ldl -lcrypt -lpthread
    libc=/lib64/libc-2.4.so, so=so, useshrplib=true, libperl=libperl.so
    gnulibc_version=&#39;2.4&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags=&#39;-Wl,-E
-Wl,-rpath,/usr/lib/perl5/5.8.8/x86_64-linux-thread-multi/CORE&#39;
    cccdlflags=&#39;-fPIC&#39;, lddlflags=&#39;-shared -L/usr/local/lib64&#39;


Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options: DEBUGGING MULTIPLICITY PERL_IMPLICIT_CONTEXT
                        PERL_MALLOC_WRAP THREADS_HAVE_PIDS USE_64_BIT_ALL
                        USE_64_BIT_INT USE_ITHREADS USE_LARGE_FILES
                        USE_PERLIO USE_REENTRANT_API
  Built under linux
  Compiled at Apr 22 2006 23:33:01
  @INC:
    /usr/lib/perl5/5.8.8/x86_64-linux-thread-multi
    /usr/lib/perl5/5.8.8
    /usr/lib/perl5/site_perl/5.8.8/x86_64-linux-thread-multi
    /usr/lib/perl5/site_perl/5.8.8
    /usr/lib/perl5/site_perl
    /usr/lib/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi
    /usr/lib/perl5/vendor_perl/5.8.8
    /usr/lib/perl5/vendor_perl
    .

Using built-in specs.
Target: x86_64-suse-linux
Configured with: ../configure --enable-threads=posix --prefix=/usr
--with-local-prefix=/usr/local --infodir=/usr/share/info
--mandir=/usr/share/man --libdir=/usr/lib64 --libexecdir=/usr/lib64
--enable-languages=c,c++,objc,fortran,java,ada --enable-checking=release
--with-gxx-include-dir=/usr/include/c++/4.1.0 --enable-ssp
--disable-libssp --enable-java-awt=gtk --enable-gtk-cairo
--disable-libjava-multilib --with-slibdir=/lib64 --with-system-zlib
--enable-shared --enable-__cxa_atexit --enable-libstdcxx-allocator=new
--without-system-libunwind --with-cpu=generic --host=x86_64-suse-linux
Thread model: posix
gcc version 4.1.0 &#40;SUSE Linux&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;16&nbsp;17:09:26&nbsp;2006</span>
    <span class="description">grantm [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> GRANTM [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you for the report, however this is not a bug with XML::Simple,
but with XML::SAX::PurePerl which is apparently the default parser on
your system.  I have supplied patches to the maintainer of XML::SAX but
they have not been applied yet.

Even if this problem did not exist in XML::SAX::PurePerl, you probably
still wouldn&#39;t want to use it for performance reasons.  The simplest
workaround is to install XML::SAX::Expat which will register itself as
the default SAX parser.  The XML::Simple test suite should then run
without error.

Even though this is not a bug with XML::Simple, I am going to leave this
ticket open in the hope that people will see it and stop submitting
duplicate reports.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;16&nbsp;17:09:26&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;16&nbsp;17:50:58&nbsp;2006</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #20485] fails the testsuite</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 16 Jul 2006 23:51:15 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-Simple [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tels &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Moin,

On Sunday 16 July 2006 23:09, via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=20485">http://rt.cpan.org/Ticket/Display.html?id=20485</a></span> &gt;
&gt;
&gt; Thank you for the report, however this is not a bug with XML::Simple,
&gt; but with XML::SAX::PurePerl which is apparently the default parser on
&gt; your system.  I have supplied patches to the maintainer of XML::SAX but
&gt; they have not been applied yet.
&gt;
&gt; Even if this problem did not exist in XML::SAX::PurePerl, you probably
&gt; still wouldn&#39;t want to use it for performance reasons.  The simplest
&gt; workaround is to install XML::SAX::Expat which will register itself as
&gt; the default SAX parser.  The XML::Simple test suite should then run
&gt; without error.
</div>
Maybe you should make your module not try the testsuite when you know that 
the installed dependency is known to be broken :-&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Even though this is not a bug with XML::Simple, I am going to leave this
&gt; ticket open in the hope that people will see it and stop submitting
&gt; duplicate reports.
</div>
Thanx for the response. I just wanted to install XML::Simple because it is 
used by Image::Info for SVG parsing. &#40;and I want to get rid of that 
dependency, but needed tests before what the code actually does&#41;.

This complication and the multiple dependencies it has have strengthen my 
decision to remove the dependency on XML::Simple.

All the best,

Tels

- -- 
 Signed on Sun Jul 16 23:47:38 2006 with key 0x93B84C15.
 Visit my photo gallery at <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/photos/">http://bloodgate.com/photos/</a></span>
 PGP key on <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/tels.asc">http://bloodgate.com/tels.asc</a></span> or per email.

 &#34;Blogebrity: Wow, guess what this one stands for? Too easy. Hey, anyone
 can do it: take a blogger who&#39;s a chef, and you get: BLEF. A blogger
 who&#39;s a dentist? BENTIST. A female blogger with an itch? You guessed it:
 a BITCH.&#34; -- maddox from xmission

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 &#40;GNU/Linux&#41;

iQEVAwUBRLq05HcLPEOTuEwVAQJtjQf9Hu93BWQGZm+7oUp/FxgdGljS/a/u+AHr
wG8dSB+FBG2C4+QX1dUvw15ypEbZK7iid+X15Bcr91Ibf5tec9dei+4Q+oyNzifI
zzbYGu7JsqDxazZIxN1Y3u4XM3bIlz2zyaKIwBVEPXJuf/s3FlxTaaK3ecHs2v36
8N+j77Il/TTt9P65gVuTeMMpgiNDi7XqzDNa31bEpLYU7LgNGEEmi248ohjl1vUa
LW7AvFUUdJm6xpRc8tCoj0fZzL5aqpZvwxPQ8mEn66ui6U94+qemHgqo7LwXo9Jd
gpVdUI0CcdOQXO28+6c0u9Dmiv7aR8bpifGh9aw33AqvmeHXRMV7DA==
=2BDF
-----END PGP SIGNATURE-----
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;18&nbsp;18:42:07&nbsp;2006</span>
    <span class="description">jjore [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jul 16 17:50:58 2006, nospam-abuse@bloodgate.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; -----BEGIN PGP SIGNED MESSAGE-----
&gt; Hash: SHA1
&gt; 
&gt; Moin,
&gt; 
&gt; On Sunday 16 July 2006 23:09, via RT wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=20485">http://rt.cpan.org/Ticket/Display.html?id=20485</a></span> &gt;
&gt; &gt;
&gt; &gt; Thank you for the report, however this is not a bug with XML::Simple,
&gt; &gt; but with XML::SAX::PurePerl which is apparently the default parser 
</div></div>
I&#39;d just add that I tried editing the Makefile.PL to ignore my installed
XML::SAX in preference to my also installed XML::Parser but the tests
didn&#39;t seem to take note of that.

# Disable XML::SAX. Failover to XML::Parser...
if &#40; 0 &#38;&#38; eval { require XML::SAX } &#38;&#38; ! $@ &#41; {

Josh
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;18&nbsp;18:52:22&nbsp;2006</span>
    <span class="description">grantm [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> GRANTM [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jul 18 18:42:07 2006, JJORE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;d just add that I tried editing the Makefile.PL to ignore my installed
&gt; XML::SAX in preference to my also installed XML::Parser but the tests
&gt; didn&#39;t seem to take note of that.
&gt; 
&gt; # Disable XML::SAX. Failover to XML::Parser...
&gt; if &#40; 0 &#38;&#38; eval { require XML::SAX } &#38;&#38; ! $@ &#41; {
</div>
I&#39;m not sure what you expect that to do.  XML::Simple will always
determine which parser to use at run time &#40;as documented in the POD in
the section entitled ENVIRONMENT&#41;.

All the Makefile.PL is trying to do is make sure that you have at least
one parser module installed.  If you subsequently change your system
default parser then XML::Simple will use the new one without needing to
be reinstalled.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;05&nbsp;13:57:45&nbsp;2006</span>
    <span class="description">mschwern [...] cpan.org - Ticket #21334:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Unable to recognise encoding of this document at .../XML/SAX/PurePerl/EncodingDetect.pm
 line 96.</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The XML::Simple tests are failing with lots of:

t/1_XMLin.........ok 1/122Unable to recognise encoding of this document
at /usr/local/lib/site_perl/5.8.8/XML/SAX/PurePerl/EncodingDetect.pm
line 96.

and

t/2_XMLout........NOK 47#   Failed test &#39;generated document with
escaping&#39;   
#   in t/2_XMLout.t at line 302.
#     Structures begin differing at:
#          $got-&gt;{c} = &#39;&#38;amp;C&#38;amp;&#39;
#     $expected-&gt;{c} = &#39;&#38;C&#38;&#39;

I am using XML::SAX 0.14 and XML::NamespaceSupport 1.09 on a freshly
built perl 5.8.8.  With a handful of irrelevant exceptions, everything
is up to date.

Package namespace         installed    latest  in CPAN file
Class::Accessor::Fast         undef      0.25 
KASEI/Class-Accessor-0.25.tar.gz
Jifty::DBI::Collection::Union     undef         0 
JESSE/Jifty-DBI-0.23.tar.gz
Math::Complex                  1.35      1.36  JHI/Math-Complex-1.36.tar.gz
Sys::Syslog                    0.13      0.18  SAPER/Sys-Syslog-0.18.tar.gz
Text::Balanced                 1.95      1.98 
DCONWAY/Text-Balanced-1.98.tar.gz
Tie::RefHash                   1.32      1.34 
NUFFIN/Tie-RefHash-1.34.tar.gz
threads                        1.07      1.38  JDHEDDEN/threads-1.38.tar.gz
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> test.out</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> perl_V.txt</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Summary of my perl5 &#40;revision 5 version 8 subversion 8&#41; configuration:
  Platform:
    osname=darwin, osvers=8.7.1, archname=darwin-thread-multi-2level
    uname=&#39;darwin windhund.local 8.7.1 darwin kernel version 8.7.1: wed jun 7 16:19:56 pdt 2006; root:xnu-792.9.72.obj~2release_i386 i386 i386 &#39;
    config_args=&#39;-Dprefix=/usr/local/perl/5.8.8 -Dccflags=-I/sw/include -Dldflags=-L/sw/lib -Dperladmin=schwern@pobox.com -Uinstallusrbinperl -Duseithreads&#39;
    hint=recommended, useposix=true, d_sigaction=define
    usethreads=define use5005threads=undef useithreads=define usemultiplicity=define
    useperlio=define d_sfio=undef uselargefiles=define usesocks=undef
    use64bitint=undef use64bitall=undef uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;cc&#39;, ccflags =&#39;-I/sw/include -fno-common -DPERL_DARWIN -no-cpp-precomp -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/opt/local/include&#39;,
    optimize=&#39;-O3&#39;,
    cppflags=&#39;-no-cpp-precomp -I/sw/include -fno-common -DPERL_DARWIN -no-cpp-precomp -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/opt/local/include&#39;
    ccversion=&#39;&#39;, gccversion=&#39;4.0.1 &#40;Apple Computer, Inc. build 5363&#41;&#39;, gccosandvers=&#39;&#39;
    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=1234
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
    ivtype=&#39;long&#39;, ivsize=4, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;, lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;env MACOSX_DEPLOYMENT_TARGET=10.3 cc&#39;, ldflags =&#39;-L/sw/lib -L/usr/local/lib&#39;
    libpth=/usr/local/lib /sw/lib /usr/lib
    libs=-lgdbm -ldbm -ldb -ldl -lm -lc
    perllibs=-ldl -lm -lc
    libc=/usr/lib/libc.dylib, so=dylib, useshrplib=false, libperl=libperl.a
    gnulibc_version=&#39;&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=bundle, d_dlsymun=undef, ccdlflags=&#39; &#39;
    cccdlflags=&#39; &#39;, lddlflags=&#39;-L/sw/lib -bundle -undefined dynamic_lookup -L/usr/local/lib&#39;


Characteristics of this binary &#40;from libperl&#41;: 
  Compile-time options: MULTIPLICITY PERL_IMPLICIT_CONTEXT
                        PERL_MALLOC_WRAP USE_ITHREADS USE_LARGE_FILES
                        USE_PERLIO USE_REENTRANT_API
  Built under darwin
  Compiled at Sep  5 2006 03:01:50
  %ENV:
    PERL5LIB=&#34;/sw/lib/perl5:/sw/lib/perl5/darwin&#34;
  @INC:
    /sw/lib/perl5
    /sw/lib/perl5/darwin
    /usr/local/perl/5.8.8/lib/darwin-thread-multi-2level
    /usr/local/perl/5.8.8/lib
    /usr/local/lib/site_perl/5.8.8/darwin-thread-multi-2level
    /usr/local/lib/site_perl/5.8.8
    /usr/local/lib/site_perl
    .
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;05&nbsp;14:00:47&nbsp;2006</span>
    <span class="description">mschwern [...] cpan.org - Ticket #21334:  Merged into ticket #20485</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;05&nbsp;14:00:47&nbsp;2006</span>
    <span class="description">mschwern [...] cpan.org -  Merged into ticket #20485</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;05&nbsp;14:14:51&nbsp;2006</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m going to add a &#34;me too&#34; to Tels&#39; assertion that if
XML::SAX::PurePerl is busted for XML::Simple then it shouldn&#39;t depend on it.

I&#39;ll whip up the necessary Makefile.PL magic.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;06&nbsp;02:23:36&nbsp;2006</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [PATCH]</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here ya go.  This will make it not use XML::SAX if only PurePerl is
available.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">=== Makefile.PL
==================================================================
--- Makefile.PL	&#40;revision 17952&#41;
+++ Makefile.PL	&#40;local&#41;
@@ -27,20 +27,8 @@
 
 print &#34;Checking installed modules ...\n&#34;;
 
-if &#40; eval { require XML::SAX } &#38;&#38; ! $@ &#41; {
-    print &#34;XML::SAX is installed, it will be used by the test suite\n&#34;;
-    $make_params-&gt;{PREREQ_PM}-&gt;{&#39;XML::SAX&#39;} = 0;
-    $make_params-&gt;{PREREQ_PM}-&gt;{&#39;XML::NamespaceSupport&#39;} = 1.04;
-}
-elsif &#40; eval { require XML::Parser } &#38;&#38; ! $@ &#41; {
-    print &#34;XML::Parser is installed, it will be used by the test suite\n&#34;;
-    $make_params-&gt;{PREREQ_PM}-&gt;{&#39;XML::Parser&#39;} = 0;
-} 
-else {
-    print &#34;You don&#39;t have either XML::SAX or XML::Parser installed!\n&#34;;
-    $make_params-&gt;{PREREQ_PM}-&gt;{&#39;XML::SAX&#39;} = 0;
-    $make_params-&gt;{PREREQ_PM}-&gt;{&#39;XML::NamespaceSupport&#39;} = 1.04;
-}
+my $prereq = $make_params-&gt;{PREREQ_PM};
+%$prereq = &#40;%$prereq, find_xml_prereq&#40;&#41;&#41;;
 
 eval { require Storable };
 if&#40;$@&#41; {
@@ -49,3 +37,33 @@
 
 
 WriteMakefile&#40;%$make_params&#41;;
+
+
+sub find_xml_prereq {
+    if &#40; eval { require XML::SAX } &#41; {
+        my $parsers = XML::SAX-&gt;parsers;
+        if&#40; @$parsers == 1 and $parsers-&gt;[0]{Name} eq &#39;XML::SAX::PurePerl&#39; &#41; {
+            print &lt;&lt;&#39;END_XML_SAX&#39;;
+XML::SAX::PurePerl is the only XML::SAX backend installed.
+  It has incompatible bugs and cannot be used by XML::Simple.
+END_XML_SAX
+        }
+        else {
+            print &#34;XML::SAX is installed, it will be used by the test suite\n&#34;;
+            return &#40;
+                    &#39;XML::SAX&#39;              =&gt; 0,
+                    &#39;XML::NamespaceSupport&#39; =&gt; 1.04
+                   &#41;;
+        }
+    }
+
+    if &#40; eval { require XML::Parser } &#41; {
+        print &#34;XML::Parser is installed, it will be used by the test suite\n&#34;;
+        return &#40; &#39;XML::Parser&#39; =&gt; 0 &#41;;
+    }
+
+    print &#34;You don&#39;t have either XML::SAX or XML::Parser installed!\n&#34;;
+    return &#40; &#39;XML::SAX&#39;              =&gt; 0,
+             &#39;XML::NamespaceSupport&#39; =&gt; 1.04
+           &#41;;
+}
=== lib/XML/Simple.pm
==================================================================
--- lib/XML/Simple.pm	&#40;revision 17952&#41;
+++ lib/XML/Simple.pm	&#40;local&#41;
@@ -54,7 +54,8 @@
 @EXPORT            = qw&#40;XMLin XMLout&#41;;
 @EXPORT_OK         = qw&#40;xml_in xml_out&#41;;
 $VERSION           = &#39;2.14&#39;;
-$PREFERRED_PARSER  = undef;
+$PREFERRED_PARSER  = $ENV{XML_SIMPLE_PREFERRED_PARSER} ||
+                     __PACKAGE__-&gt;_working_XML_SAX ? &#39;&#39; : &#39;XML::Parser&#39;;
 
 my $StrictMode     = 0;
 my %CacheScheme    = &#40;
@@ -82,6 +83,16 @@
 my $bad_def_ns_jcn = &#39;{&#39; . $xmlns_ns . &#39;}&#39;;     # LibXML::SAX workaround
 
 
+sub _working_XML_SAX {
+    my $class = shift;
+
+    return unless eval { require XML::SAX; };
+
+    my $parsers = XML::SAX-&gt;parsers;
+    return &#40;@$parsers == 1 and $parsers-&gt;[0]{Name} eq &#39;XML::SAX::PurePerl&#39;&#41; ? 0 : 1;
+}
+
+
 ##############################################################################
 # Globals for use by caching routines
 #
@@ -263,9 +274,6 @@
 
 
   my $preferred_parser = $PREFERRED_PARSER;
-  unless&#40;defined&#40;$preferred_parser&#41;&#41; {
-    $preferred_parser = $ENV{XML_SIMPLE_PREFERRED_PARSER} || &#39;&#39;;
-  }
   if&#40;$preferred_parser eq &#39;XML::Parser&#39;&#41; {
     return&#40;$self-&gt;build_tree_xml_parser&#40;$filename, $string&#41;&#41;;
   }
@@ -281,7 +289,7 @@
   $XML::SAX::ParserPackage = $preferred_parser if&#40;$preferred_parser&#41;;
 
   my $sp = XML::SAX::ParserFactory-&gt;parser&#40;Handler =&gt; $self&#41;;
-  
+
   $self-&gt;{nocollapse} = 1;
   my&#40;$tree&#41;;
   if&#40;$filename&#41; {
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;06&nbsp;05:10:42&nbsp;2006</span>
    <span class="description">grantm [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> GRANTM [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Sep 05 14:14:51 2006, MSCHWERN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m going to add a &#34;me too&#34; to Tels&#39; assertion that if
&gt; XML::SAX::PurePerl is busted for XML::Simple then it shouldn&#39;t
&gt; depend on it.
</div>
Hi Michael

I feel like I&#39;m in some crazy parallel universe where logic and reason
work in ways I don&#39;t understand.

I agree 100% that XML::Simple should not declare a dependency on a
module that&#39;s busted.  But XML::SAX::PurePerl wasn&#39;t busted in 2003 
when I set up that dependency.

I don&#39;t understand why I&#39;m even involved in this conversation.

The problem that exists right now is with XML::SAX::PurePerl. I have
provided a patch to the maintainer and a simple workaround to anyone
that needs XML::Simple to work &#40;just install XML::SAX::Expat&#41;.

XML::SAX::PurePerl prior to version 0.13 was a fine module.  
Hopefully the next release will be good too.  I fail to see why 
patching XML::Simple so that it refuses to work with any version of
XML::SAX::PurePerl, is a good idea.

If you want to help fix the problem, perhaps you&#39;d like to give Matt 
a gentle nudge?

Cheers
Grant

P.S. I hope you don&#39;t misinterpret the tone here - I&#39;m not grumpy,
     I&#39;m just confused.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;06&nbsp;17:46:38&nbsp;2006</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> MSCHWERN [...] cpan.org,  nospam-abuse [...] bloodgate.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #20485] fails the testsuite</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 06 Sep 2006 17:45:58 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-Simple [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"> via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=20485">http://rt.cpan.org/Ticket/Display.html?id=20485</a></span> &gt;
&gt; On Tue Sep 05 14:14:51 2006, MSCHWERN wrote:
<div class="message-stanza open">&gt;&gt; I&#39;m going to add a &#34;me too&#34; to Tels&#39; assertion that if
&gt;&gt; XML::SAX::PurePerl is busted for XML::Simple then it shouldn&#39;t
&gt;&gt; depend on it.
</div>&gt; 
&gt; I feel like I&#39;m in some crazy parallel universe where logic and reason
&gt; work in ways I don&#39;t understand.
</div>
Let&#39;s look at it from the user&#39;s perspective.  That might make it clear.

The user wants to install a module.  Let&#39;s call it Jifty.

Jifty depends on XML::Simple.

User goes into CPAN with a clean Perl and types &#34;install Jifty&#34;.

CPAN does its thing installing dependencies.

XML::Simple&#39;s tests fail.

XML::Simple does not install.

Jifty&#39;s installation fails.

User reports the problem to XML::Simple, since that&#39;s where it appears the problem is.

User also reports to Jifty that it didn&#39;t install because one of the dependencies wouldn&#39;t install.

The user cannot use Jifty.


Now from the Jifty developer side.

Jifty developers start getting reports from users that they can&#39;t install a dependency.

Jifty developers now have two choices...
A&#41; get XML::Simple fixed
B&#41; drop the dependency on XML::Simple


So you see from a user and dependent module developer perspective, XML::SAX::PurePerl, the real problem, doesn&#39;t come into it at all.  Jifty depends on XML::Simple and expects it to just work.


You now have two choices.
A&#41; get XML::SAX::PurePerl fixed.
B&#41; drop the dependency on XML::SAX::PurePerl

You&#39;ve tried A.  Now its time for B.

There is always C&#41; leave it broken and deal with the redundant bug reports.  But that seems to be driving you nuts.

Dependency breakage breaks things up the dependency chain.  Then the problem comes crashing back down the chain again.

I realize you didn&#39;t break anything, but that doesn&#39;t change the fact that XML::Simple won&#39;t install.  The user doesn&#39;t care who broke what, they just want it fixed.  I have to deal with this sort of thing all the time in MakeMaker and Test::More routing around broken things in old perls and crappy implementations of make.

Since I&#39;m the one requesting the fix I went ahead and provided a patch so you have to do as little work as possible.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I agree 100% that XML::Simple should not declare a dependency on a
&gt; module that&#39;s busted.  But XML::SAX::PurePerl wasn&#39;t busted in 2003 
&gt; when I set up that dependency.
</div>
Its now 2006.  Things change.  Things sometimes break. :&#40;


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The problem that exists right now is with XML::SAX::PurePerl. I have
&gt; provided a patch to the maintainer and a simple workaround to anyone
&gt; that needs XML::Simple to work &#40;just install XML::SAX::Expat&#41;.
</div>
The problem is that automated building of large wads of CPAN modules is broken.  Such as when installing something large like Jifty.  Manually having to figure out what&#39;s wrong and how to fix it discourages people from installing things which depend on XML::Simple.

Its gotta work out of the box.

Also there&#39;s no mention of this in the README.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; XML::SAX::PurePerl prior to version 0.13 was a fine module.  
&gt; Hopefully the next release will be good too.  I fail to see why 
&gt; patching XML::Simple so that it refuses to work with any version of
&gt; XML::SAX::PurePerl, is a good idea.
</div>
Once PurePerl is fixed just release a new XML::Simple that does work with PurePerl.  Until then its better than a broken module.  And no more redundant bug reports!

I considered making it only skip the 0.13 - 0.14 PurePerl versions and assume that the next one will have a fix, but I see that there&#39;s been a release since you reported the bug &#40;reported in 0.13 and not fixed in 0.14&#41; and didn&#39;t want to add a dodgy assumption like that.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If you want to help fix the problem, perhaps you&#39;d like to give Matt 
&gt; a gentle nudge?
</div>
FWIW I added a &#34;me, too&#34; to the ticket.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;07&nbsp;00:58:18&nbsp;2006</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #20485] fails the testsuite</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 7 Sep 2006 07:04:06 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-Simple [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tels &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Moin,

On Wednesday 06 September 2006 23:46, Michael G Schwern via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=20485">http://rt.cpan.org/Ticket/Display.html?id=20485</a></span> &gt;
&gt;  via RT wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=20485">http://rt.cpan.org/Ticket/Display.html?id=20485</a></span> &gt;
&gt; &gt;
&gt; &gt; On Tue Sep 05 14:14:51 2006, MSCHWERN wrote:
<div class="message-stanza open">&gt; &gt;&gt; I&#39;m going to add a &#34;me too&#34; to Tels&#39; assertion that if
&gt; &gt;&gt; XML::SAX::PurePerl is busted for XML::Simple then it shouldn&#39;t
&gt; &gt;&gt; depend on it.
</div>&gt; &gt;
&gt; &gt; I feel like I&#39;m in some crazy parallel universe where logic and reason
&gt; &gt; work in ways I don&#39;t understand.
</div>&gt;
&gt; Let&#39;s look at it from the user&#39;s perspective.  That might make it clear.
</div>[snipabit]

I agree with Michael. It&#39;s the age-old thing I am preaching now and then on 
perl-qa: 

If you save yourself work by re-using other people&#39;s work, you open up 
yourself to problems of breakage in third-party code. That is one reason of 
why an author should reduce the required dependencies to a minimum - KISS. 
The less dependecies, the less complexity, the less things can break.

FITW, a breaking XML::Simple breaks Image::Info. &#40;Thats why I want to get 
rid of that dependecy altogther, just haven&#39;t seen how I could do this 
easily :&#41;

all the best,

tels

- -- 
 Signed on Thu Sep  7 07:01:14 2006 with key 0x93B84C15.
 Visit my photo gallery at <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/photos/">http://bloodgate.com/photos/</a></span>
 PGP key on <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/tels.asc">http://bloodgate.com/tels.asc</a></span> or per email.

 Mediawiki graph-extension: <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/perl/graph/">http://bloodgate.com/perl/graph/</a></span>

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 &#40;GNU/Linux&#41;

iQEVAwUBRP+oT3cLPEOTuEwVAQIZdQf/VL9Vjg+WWW1qZwzCeAhCpL2toCxt3bH6
oJCnGEb0HMn/UjpK2OfmIQz3L+upvAtPId/enfD6WZGCnyjLgEiAo4iCyckI9k/W
O9bnynZF4DOTZx4S3vEBkH9Hv9I51tvLXxCaFtZJZcZUmO/IOO7+6VGDvs/Cm2XC
yvUwnBoEguDTfsFoGszYEJuoSPsaQ4Oq6Zo1y4VOtgrel72D5ZKOf9wWVUVs7330
6EEqHkRE8AjIcHVTYe4PZJckGBeuyblX62hzjSHB1Jmoimp7Si/F6/yzid3vvoMy
neCpiZGXcCtrq6Y1B7mIr28Qh+Gau4HngHW7GsKy1N3Xa8mBkKgy+g==
=hIRP
-----END PGP SIGNATURE-----
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;30&nbsp;03:17:56&nbsp;2006</span>
    <span class="description">grantm [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed in release 2.15 &#40;03-Oct-06&#41;.

If no parser is installed, dependencies should automatically resolve to
XML::SAX::Expat.

If/when XML::SAX::PurePerl is fixed, I&#39;ll swap the dependency back so
that no compiler is required.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;30&nbsp;03:17:57&nbsp;2006</span>
    <span class="description">grantm [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
