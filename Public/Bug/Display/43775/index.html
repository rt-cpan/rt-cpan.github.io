<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #43775 for devel-nytprof: Unable to open POSIX.pm during nytprofhtml</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #43775 for devel-nytprof: Unable to open POSIX.pm during nytprofhtml</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/devel-nytprof/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/devel-nytprof/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/devel-nytprof/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/devel-nytprof/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/timbunce/devel-nytprof/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/devel-nytprof">devel-nytprof CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">43775</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/devel-nytprof/Active/">devel-nytprof</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
bohica [...] ntlworld.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-221012-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.08    </td>
  </tr>
  <tr id="CF-221013-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;02&nbsp;11:49:38&nbsp;2009</span>
    <span class="description">bohica [...] ntlworld.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Unable to open POSIX.pm during nytprofhtml</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Since upgrading to 2.08 I seem to get an error during nytprofhtml which
does not stop the output HTML generation:

nytprofhtml -o nytprof
Generating report...
Reading nytprof.out
Writing report to nytprof directory
Unable to open &#39;/home/martin/xxx/server/../../lib/POSIX.pm&#39; for reading:
No such file or directory. Try running /usr/bin/nytprofhtml in the same
directory as you ran Devel::NYTProf, or ensure @INC is correct.

I did run nytprofhtml in the same directory and INC is ok - it is set to
the usual places plus:

PERL5LIB=/home/martin/xxx/tools/modules/BET/lib:/home/martin/xxx/cgi

in the environment. The -d:NYTProf was run in the same session as the
nytprofhtml and INC is not touched in the perl code profiled. The code
does however use POSIX.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;03&nbsp;17:17:20&nbsp;2009</span>
    <span class="description">TIMB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">What path in @INC is POSIX.pm located via?

Enable trace=1 and see what filename is given for POSIX.pm in the trace output during 
profiling.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;03&nbsp;17:17:21&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;04&nbsp;03:59:32&nbsp;2009</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Mar 03 17:17:20 2009, TIMB wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; What path in @INC is POSIX.pm located via?
&gt; 
&gt; Enable trace=1 and see what filename is given for POSIX.pm in the
&gt; trace output during
&gt; profiling.
</div>
All in the same session, the same dir, and I guarantee the program run
does not change INC:

cd /home/martin/xxx/server

echo $PERL5LIB
/home/martin/xxx/tools/modules/BET/lib:/home/martin/xxx/cgi

locate POSIX.pm
/usr/lib/perl5/5.8.8/i386-linux-thread-multi/POSIX.pm

perl -MPOSIX -le &#39;print $POSIX::VERSION;&#39;
1.09

perl -MLog::Log4perl -le &#39;print $Log::Log4perl::VERSION;&#39;
1.13

Enabling trace provides a lot of output but nearly all of it is like the
following repeated:

        start_cop_of_context: can&#39;t find next cop for LOOP line 65
 at /usr/lib/perl5/site_perl/5.8.8/Log/Log4perl/Level.pm line 8
    {
1106    TYPE = pushmark  ===&gt; 1107
        FLAGS = &#40;SCALAR,REF,MOD&#41;
    }

        start_cop_of_context: can&#39;t find next cop for LOOP line 65
 at /usr/lib/perl5/5.8.8/i386-linux-thread-multi/POSIX.pm line 19
    {
1106    TYPE = pushmark  ===&gt; 1107
        FLAGS = &#40;SCALAR,REF,MOD&#41;
    }

nytprofhtml -o nytprof
Generating report...
Reading nytprof.out
Writing report to nytprof directory
Unable to open &#39;/home/martin/xxx/server/../../lib/POSIX.pm&#39; for reading:
No such file or directory. Try running /usr/bin/nytprofhtml in the same
directory as you ran Devel::NYTProf, or ensure @INC is correct.

BTW, I&#39;m not the only one with this issue - when searching for the
problem I saw someone has reported this as a debian bug. If you need
more let me know.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;04&nbsp;07:59:01&nbsp;2009</span>
    <span class="description">Tim.Bunce [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43775] Unable to open POSIX.pm during nytprofhtml</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 4 Mar 2009 12:56:54 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Martin J Evans via RT &lt;bug-devel-nytprof [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tim Bunce &lt;Tim.Bunce [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Mar 04, 2009 at 03:59:32AM -0500, Martin J Evans via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: devel-nytprof
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=43775">https://rt.cpan.org/Ticket/Display.html?id=43775</a></span> &gt;
&gt; 
&gt; On Tue Mar 03 17:17:20 2009, TIMB wrote:
<div class="message-stanza open">&gt; &gt; What path in @INC is POSIX.pm located via?
&gt; &gt; 
&gt; &gt; Enable trace=1 and see what filename is given for POSIX.pm in the
&gt; &gt; trace output during
&gt; &gt; profiling.
</div>&gt; 
&gt; All in the same session, the same dir, and I guarantee the program run
&gt; does not change INC:
</div>
Can you produce a small test case I can reproduce?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Enabling trace provides a lot of output but nearly all of it is like the
&gt; following repeated:
&gt; 
&gt;         start_cop_of_context: can&#39;t find next cop for LOOP line 65
</div>
Setting the blocks=0 option should silence those.
Also, you&#39;d need trace=2 to see the lines I&#39;m looking for:

  $ NYTPROF=trace=2:blocks=0 perl -d:NYTProf -e &#39;use POSIX;&#39;
  # trace=2
  # blocks=0
  NYTProf init pid 37846, clock -1
  Opened nytprof.out
  NYTProf enable_profile &#40;previously disabled&#41; to nytprof.out at /usr/local/perl58-i/lib/site_perl/5.8.6/darwin-thread-multi-2level/Devel/NYTProf.pm
  line 43.
  NYTProf pid 37846: first statement line 1 of -e at -e line 1.
  New fid  1 &#40;after  0:1   &#41; 2 e0:0 -e , with src
  New fid  2 &#40;after  1:7   &#41; 2 e0:0 /usr/local/perl58-i/lib/5.8.6/darwin-thread-multi-2level/POSIX.pm 
  ...

It&#39;s that &#34;New fid&#34; message for ../POSIX.pm I&#39;d like to see.

Also, later, try setting savesrc=1 - it might avoid the problem by
storing the source of POSIX.pm into the profile data file. &#40;Though I&#39;m
not sure it works for perl 5.8.8.&#41;

Tim.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;04&nbsp;08:37:17&nbsp;2009</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Mar 04 07:59:01 2009, Tim.Bunce@pobox.com wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Can you produce a small test case I can reproduce?
</div>
I&#39;ll try. The program in question uses over 70 first-level perl modules
&#40;not sure how many dependencies these have&#41;. Actually, now I read on
your example works - see below:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Enabling trace provides a lot of output but nearly all of it is like
</div>&gt; the
<div class="message-stanza open">&gt; &gt; following repeated:
&gt; &gt;
&gt; &gt;         start_cop_of_context: can&#39;t find next cop for LOOP line 65
</div>&gt; 
&gt; Setting the blocks=0 option should silence those.
&gt; Also, you&#39;d need trace=2 to see the lines I&#39;m looking for:
</div>
cd /tmp
mkdir p
cd p
mkdir nytprof
NYTPROF=trace=2:blocks=0 perl -d:NYTProf -e &#39;use POSIX;&#39; &gt;x.x 2&gt;&#38;1

cat x.x:

# trace=2
# blocks=0
NYTProf init pid 8902, clock 1
Opened nytprof.out
NYTProf enable_profile &#40;previously disabled&#41; to nytprof.out at
/usr/lib/perl5/si
te_perl/5.8.8/i386-linux-thread-multi/Devel/NYTProf.pm line 43.
NYTProf pid 8902: first statement line 1 of -e at -e line 1.
New fid  1 &#40;after  0:1   &#41; 2 e0:0 -e , with src
New fid  2 &#40;after  1:7   &#41; 2 e0:0
/usr/lib/perl5/5.8.8/i386-linux-thread-multi/P
OSIX.pm 
New fid  3 &#40;after  2:3   &#41; 2 e0:0 /usr/lib/perl5/5.8.8/AutoLoader.pm 
New fid  4 &#40;after  3:3   &#41; 2 e0:0 /usr/lib/perl5/5.8.8/strict.pm 
New fid  5 &#40;after  3:159 &#41; 2 e0:0
/usr/lib/perl5/5.8.8/i386-linux-thread-multi/a
uto/POSIX/autosplit.ix 
New fid  6 &#40;after  3:961 &#41; 2 e0:0 ../../lib/POSIX.pm
/tmp/t/../../lib/POSIX.pm
New fid  7 &#40;after  6:3   &#41; 2 e0:0 /usr/lib/perl5/5.8.8/Exporter.pm 
finish_profile &#40;last_pid 8902, getpid 8902, overhead 0.003677s,
is_profiling 1&#41;
NYTProf disable_profile &#40;previously enabled&#41;.
writing sub line ranges
New fid  8 &#40;after  1:1   &#41; 4 e0:0
/usr/lib/perl5/5.8.8/i386-linux-thread-multi/X
SLoader.pm 
Sub
POSIX::__ANON__[/usr/lib/perl5/5.8.8/i386-linux-thread-multi/POSIX.pm:48] fi
d 2 lines 48..48
Sub POSIX::load_imports fid 6 lines 743..958
Sub strict::unimport fid 4 lines 32..35
Sub POSIX::SigAction::new fid 2 lines 57..57
Sub Exporter::export fid 7 lines 25..27
Sub Exporter::export_ok_tags fid 7 lines 87..89
Sub Exporter::export_fail fid 7 lines 70..73
Sub AutoLoader::import fid 3 lines 119..168
Sub XSLoader::load fid 8 lines 22..100
Sub POSIX::BEGIN fid 2 lines 9..9
Sub POSIX::croak fid 2 lines 22..22
Sub Exporter::export_to_level fid 7 lines 79..81
Sub Exporter::as_heavy fid 7 lines 16..23
Sub AutoLoader::BEGIN fid 3 lines 173..173
Sub Exporter::export_tags fid 7 lines 83..85
Sub Exporter::require_version fid 7 lines 91..93
Sub
POSIX::__ANON__[/usr/lib/perl5/5.8.8/i386-linux-thread-multi/POSIX.pm:44] fi
d 2 lines 44..44
Sub POSIX::AUTOLOAD fid 2 lines 32..52
Sub POSIX::import fid 2 lines 14..20
Sub strict::bits fid 4 lines 11..23
Sub XSLoader::bootstrap_inherit fid 8 lines 103..112
Sub AutoLoader::__ANON__[/usr/lib/perl5/5.8.8/AutoLoader.pm:96] fid 3
lines 96..
96
Sub AutoLoader::AUTOLOAD fid 3 lines 21..117
Sub Exporter::import fid 7 lines 29..66
Sub AutoLoader::unimport fid 3 lines 170..177
Sub Exporter::__ANON__[/usr/lib/perl5/5.8.8/Exporter.pm:63] fid 7 lines
63..63
Sub main::BEGIN fid 1 lines 1..1
Sub strict::import fid 4 lines 27..30
Sub POSIX::SigAction::BEGIN fid 2 lines 56..56
writing sub callers

NOTE
ls ../../lib/POSIX.pm
ls: ../../lib/POSIX.pm: No such file or directory
ls /tmp/t/../../lib/POSIX.pm
ls: /tmp/t/../../lib/POSIX.pm: No such file or directory

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It&#39;s that &#34;New fid&#34; message for ../POSIX.pm I&#39;d like to see.
</div>
Hopefully you have it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Also, later, try setting savesrc=1 - it might avoid the problem by
&gt; storing the source of POSIX.pm into the profile data file. &#40;Though I&#39;m
&gt; not sure it works for perl 5.8.8.&#41;
&gt; 
</div>Still in /tmp/t
unset PERL5LIB # just in case it is affecting anything

NYTPROF=savesrc=1 perl -d:NYTProf -e &#39;use POSIX;&#39;
nytprofhtml -o nytprof
Generating report...
Reading nytprof.out
Writing report to nytprof directory
Unable to open &#39;/tmp/t/../../lib/POSIX.pm&#39; for reading: No such file or
directory. Try running /usr/bin/nytprofhtml in the same directory as you
ran Devel::NYTProf, or ensure @INC is correct.
Unable to open &#39;-e&#39; for reading: No such file or directory.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;04&nbsp;12:36:49&nbsp;2009</span>
    <span class="description">Tim.Bunce [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> develnytprof-dev [...] googlegroups.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43775] Unable to open POSIX.pm during nytprofhtml</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 4 Mar 2009 17:29:27 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Martin J Evans via RT &lt;bug-devel-nytprof [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tim Bunce &lt;Tim.Bunce [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Mar 04, 2009 at 08:37:18AM -0500, Martin J Evans via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; NYTPROF=trace=2:blocks=0 perl -d:NYTProf -e &#39;use POSIX;&#39; &gt;x.x 2&gt;&#38;1
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; NYTProf pid 8902: first statement line 1 of -e at -e line 1.
&gt; New fid  1 &#40;after  0:1   &#41; 2 e0:0 -e , with src
&gt; New fid  2 &#40;after  1:7   &#41; 2 e0:0 /usr/lib/perl5/5.8.8/i386-linux-thread-multi/POSIX.pm 
</div>
There&#39;s POSIX.pm being loaded as fid 2.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; New fid  5 &#40;after  3:159 &#41; 2 e0:0 /usr/lib/perl5/5.8.8/i386-linux-thread-multi/auto/POSIX/autosplit.ix 
&gt; New fid  6 &#40;after  3:961 &#41; 2 e0:0 ../../lib/POSIX.pm /tmp/t/../../lib/POSIX.pm
</div>
Looks like those two are both artifacts of AutoLoader.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sub POSIX::__ANON__[/usr/lib/perl5/5.8.8/i386-linux-thread-multi/POSIX.pm:48] fid 2 lines 48..48
&gt; Sub POSIX::load_imports fid 6 lines 743..958
</div>
I think that gives me enough to go on. The problem is the &#34;#line ...&#34;
directive generated by AutoLoader. Here&#39;s errno.al, for example:

    # NOTE: Derived from ../../lib/POSIX.pm.
    # Changes made here will be lost when autosplit is run again.
    # See AutoSplit.pm.
    package POSIX;

    #line 120 &#34;../../lib/POSIX.pm &#40;autosplit into ../../lib/auto/POSIX/errno.al&#41;&#34;
    sub errno {
        usage &#34;errno&#40;&#41;&#34; if @_ != 0;
        $! + 0;
    }

    # end of POSIX::errno
    1;

This is enough to reproduce it:

    perl -d:NYTProf -e &#39;use POSIX; errno&#40;&#41;&#39;
    nytprofhtml

NYTProf needs to get smarter about noticing &#39;autosplit&#39; and reverse
engineering the appropriate path - which should match an already loaded
fid &#40;umm, maybe that fact can help simplify the implementation&#41;.

Anyway, patches welcome!

Tim.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;04&nbsp;17:00:00&nbsp;2009</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Anyway, patches welcome
</div>Have you ever tried editing a rt.cpan report from a 
mobile device like an iPod touch! I don&#39;t recommend 
it. In this case I&#39;m afraid to say that even though I&#39;ve 
had some small benefit from running nytprof &#40;and I 
feel a bit guilty about it&#41;, I just cannot afford the extra 
time to provide a patch. I am so snowed under with 
work I am even having to sit on Dbd::odbc bug 
reports right now. Sorry.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;05&nbsp;06:06:18&nbsp;2009</span>
    <span class="description">Tim.Bunce [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43775] Unable to open POSIX.pm during nytprofhtml</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 5 Mar 2009 11:05:44 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Martin J Evans via RT &lt;bug-devel-nytprof [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tim Bunce &lt;Tim.Bunce [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Mar 04, 2009 at 05:00:01PM -0500, Martin J Evans via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: devel-nytprof
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=43775">https://rt.cpan.org/Ticket/Display.html?id=43775</a></span> &gt;
&gt; 
<div class="message-stanza open">&gt; &gt; Anyway, patches welcome
</div>&gt; Have you ever tried editing a rt.cpan report from a 
&gt; mobile device like an iPod touch! I don&#39;t recommend 
&gt; it. In this case I&#39;m afraid to say that even though I&#39;ve 
&gt; had some small benefit from running nytprof &#40;and I 
&gt; feel a bit guilty about it&#41;, I just cannot afford the extra 
&gt; time to provide a patch. I am so snowed under with 
&gt; work I am even having to sit on Dbd::odbc bug 
&gt; reports right now. Sorry.
</div>
I understand Martin. No problem. &#40;And thanks again for your excellent
work with DBD::ODBC.&#41;

Tim.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;24&nbsp;12:55:06&nbsp;2009</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Just saw a new Devel::NYTProf and it looked like you had addressed this rt.

I confirm that release 2.08_91 of Devel::NYTProf fixes this bug.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;02&nbsp;17:21:56&nbsp;2009</span>
    <span class="description">TIMB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed in 2.09
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;02&nbsp;17:21:57&nbsp;2009</span>
    <span class="description">TIMB [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
