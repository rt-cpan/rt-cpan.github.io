<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #12683 for POE-Component-Client-HTTP: Many &#40; &gt; 5&#41; concurrent HTTP exchanges cause all to fail</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #12683 for POE-Component-Client-HTTP: Many &#40; &gt; 5&#41; concurrent HTTP exchanges cause all to fail</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/POE-Component-Client-HTTP/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/POE-Component-Client-HTTP/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/POE-Component-Client-HTTP/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/POE-Component-Client-HTTP/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/POE-Component-Client-HTTP">POE-Component-Client-HTTP CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">12683</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/POE-Component-Client-HTTP/Active/">POE-Component-Client-HTTP</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
James_Armstrong [...] cox.net

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-26420-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-26421-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;05&nbsp;03:38:34&nbsp;2005</span>
    <span class="description">James_Armstrong [...] cox.net -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James&#34; &lt;James_Armstrong [...] cox.net&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-POE-Component-Client-HTTP [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;&#39;Jeff Bisbee&#39;&#34; &lt;jbisbee [...] cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Many &#40; &gt; 5&#41; concurrent HTTP exchanges cause all to fail</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 5 May 2005 00:31:16 -0700</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--&gt; You are now talking on #PoE
--- Topic for #PoE is &#39;POE Operates Efficiently&#39; | &#39;Power Over Everything&#39; |
billn: I think I just outsmarted myself. | PoCo::Lightspeed is on CPAN, play
with it!
--- Topic for #PoE set by
Apocalypse!~apoc@c-24-6-201-170.hsd1.ca.comcast.net at Sun Apr 24 11:11:11
2005
&lt;jda2000&gt; Hello, If I want to have concurrent HTTP requests, must I call
POE::Component::Client::HTTP-&gt;spawn&#40;&#41; for each desired concurrent request? 
&lt;LotR&gt; jda2000: no
&lt;jda2000&gt; LotR, Then it would be a bug if an error in one request causes all
concurrent requests to fail?
&lt;LotR&gt; jda2000: sounds like it, yes
&lt;dngor&gt; I would suggest running a test case against LotR&#39;s version of
Client::HTTP before reporting it as a bug, though.  It may already be fixed.
And the version in my repository&#39;s currently bloxed.
* LotR would say report a bug if you have a nice small script that exhibits
the problem
&lt;jda2000&gt; LotR, I was using Version 0.65 from CPAN.
&lt;LotR&gt; jda2000: *nod*
&lt;LotR&gt; jda2000: so try to reproduce the problem with as few lines of code as
possible, and send that to bug-POE-Component-Client-HTTP@rt.cpan.org
&lt;jda2000&gt; LotR, Ok

Jeff,

*** I am resending this message to the address indicated by LotR.
*** It is plausible that the error is in Client::HTTP.

Thanks for the quick turn-around on the XML::RSS::Feed issue, I&#39;ll pick up
the fix as soon as I figure out how to get CPAN to do an update :-&#41;.

I thought I would play around a bit more to get familiar with the code. The
included code fails in an interesting way. It seems to connect to all web
servers, have a problem somewhere and then report that all of the downloads
failed.  The 26 &#34;[!!] Failed to fetch&#34; messages all come out together.  This
seems very un-POE like. I would expect the downloads to be more concurrent.
Also, I would expect that a download that works by itself would still work
even if another download should fail.

Is there a limit I need to adjust somewhere to accommodate more sockets?

I think I saw some sort of factory object being used in one of your
examples. Should I be using that?

I&#39;d be glad to do another bug report but I&#39;m not sure at this point which
component to write it against.

Thanks,
JDA

------------------------------------------------%&lt;--------------------------
--------------------

#!/usr/bin/perl -w
    use strict;
    use POE;
    use POE::Component::RSSAggregator;

    my @feeds;

sub LoadFeeds {
  my $Input;
  my %names;
  
#  open &#40;$Input, &#34;&lt;/home/jda2000/bashpodder/bp.conf&#34;&#41; or die &#34;Can&#39;t open
bp.conf&#34;;
  while &#40;&lt;DATA&gt;&#41; {
    if &#40;m/^#/&#41; { next; } # permit commenting out URLs
    my $Item = {};
    chomp;
    my $url = $_;
    my $name = &#39;whatever&#39;;
    print &#34;URL = &#34; . $url . &#34;\n&#34;;
    $Item-&gt;{&#39;url&#39;} = $url;
    if &#40;$url=~m/\/$/&#41; {
      $url=~m/&#40;[^\/]+&#41;\/$/;
      $name = $1;      
    }
    else {
      $url=~m/&#40;[^\/]+&#41;$/;
      $name = $1;
    }
    $name =~ s/\..*//;
    while &#40;exists&#40;$names{$name}&#41;&#41; {
      $name .= &#39;I&#39;;
    }
    $names{$name} = 1;
    $Item-&gt;{&#39;name&#39;} = $name;
    print &#34;Name = &#34; . $name . &#34;\n&#34;;
    $Item-&gt;{&#39;delay&#39;} = 60;
    push &#40;@feeds, $Item&#41;;
  }
#  close&#40;$Input&#41;;  
}

    LoadFeeds;
    
    POE::Session-&gt;create&#40;
        inline_states =&gt; {
            _start      =&gt; \&#38;init_session,
            handle_feed =&gt; \&#38;handle_feed,
        }
    &#41;;

    $poe_kernel-&gt;run&#40;&#41;;

    sub init_session
    {
        my &#40;$kernel, $heap, $session&#41; = @_[KERNEL, HEAP, SESSION];
        $heap-&gt;{rssagg} = POE::Component::RSSAggregator-&gt;new&#40;
            alias    =&gt; &#39;rssagg&#39;,
            debug    =&gt; 1,
            callback =&gt; $session-&gt;postback&#40;&#34;handle_feed&#34;&#41;,
            tmpdir   =&gt; &#39;/tmp&#39;, # optional caching
        &#41;;
        $kernel-&gt;post&#40;&#39;rssagg&#39;,&#39;add_feed&#39;,$_&#41; for @feeds;
    }

    sub handle_feed
    {
        my &#40;$kernel,$feed&#41; = &#40;$_[KERNEL], $_[ARG1]-&gt;[0]&#41;;
        for my $headline &#40;$feed-&gt;late_breaking_news&#41; {
            # do stuff with the XML::RSS::Headline object
            print $headline-&gt;headline . &#34;\n&#34;;
        }
    }
__END__
<span class="clickylink"><a target="new" rel="nofollow" href="http://rasterweb.net/raster/feeds/rwaudio.rss">http://rasterweb.net/raster/feeds/rwaudio.rss</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://radio.weblogs.com/0001014/categories/dailySourceCode/rss.xml">http://radio.weblogs.com/0001014/categories/dailySourceCode/rss.xml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://radio.weblogs.com/0001014/categories/qotd/rss.xml">http://radio.weblogs.com/0001014/categories/qotd/rss.xml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://secrets.scripting.com/xml/rss.xml">http://secrets.scripting.com/xml/rss.xml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://ruk.ca/rss/formosa.xml">http://ruk.ca/rss/formosa.xml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.scripting.com/rss.xml">http://www.scripting.com/rss.xml</a></span> <span class="clickylink"><a target="new" rel="nofollow" href="http://feeds.feedburner.com/career">http://feeds.feedburner.com/career</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.evilgeniuschronicles.org/static/index.rss">http://www.evilgeniuschronicles.org/static/index.rss</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://feeds.feedburner.com/esc">http://feeds.feedburner.com/esc</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://feeds.feedburner.com/ITConversations-EverythingMP3">http://feeds.feedburner.com/ITConversations-EverythingMP3</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://pentdego.com/feeds/freeflow.xml">http://pentdego.com/feeds/freeflow.xml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.blogosphereradio.com/rss.aspx">http://www.blogosphereradio.com/rss.aspx</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://feeds.feedburner.com/Techaura">http://feeds.feedburner.com/Techaura</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://thelinuxlink.net/tllts/tllts.rss">http://thelinuxlink.net/tllts/tllts.rss</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://radio.linuxquestions.org/syndicate/lq.php">http://radio.linuxquestions.org/syndicate/lq.php</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.lugradio.org/episodes.rss">http://www.lugradio.org/episodes.rss</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://linux.quicksurf.com/wp-rss2.php">http://linux.quicksurf.com/wp-rss2.php</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.binrev.com/radio/podcast/">http://www.binrev.com/radio/podcast/</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.infonomicon.org/info.xml">http://www.infonomicon.org/info.xml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://feeds.feedburner.com/sliceofscifi">http://feeds.feedburner.com/sliceofscifi</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://feeds.feedburner.com/YeastRadio.xml">http://feeds.feedburner.com/YeastRadio.xml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://leoville.tv/tlr/tlr.php">http://leoville.tv/tlr/tlr.php</a></span> <span class="clickylink"><a target="new" rel="nofollow" href="http://thelinuxbox.org/show/tlbs.rss">http://thelinuxbox.org/show/tlbs.rss</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.dawnanddrew.com/rss2.xml">http://www.dawnanddrew.com/rss2.xml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.sciencecast.net/podcast.php">http://www.sciencecast.net/podcast.php</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://feeds.feedburner.com/ScienceCast">http://feeds.feedburner.com/ScienceCast</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;05&nbsp;07:28:36&nbsp;2005</span>
    <span class="description">martijn [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I didn&#39;t exactly suggested you send your complete app in the bug report
:&#41; I asked for a minimal piece of code that demonstrates the problem. I
tried running the code, and it seems to work just fine here. So, until
you give me a Client::HTTP specific test case that I can reproduce,
there isn&#39;t much I can do about this.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;05&nbsp;07:28:37&nbsp;2005</span>
    <span class="description">martijn [...] cpan.org -  Status changed from &#39;new&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;05&nbsp;11:26:18&nbsp;2005</span>
    <span class="description">jbisbee [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[James_Armstrong@cox.net - Thu May  5 03:38:34 2005]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks for the quick turn-around on the XML::RSS::Feed issue, I&#39;ll pick
&gt; up the fix as soon as I figure out how to get CPAN to do an update :-&#41;.
&gt; I thought I would play around a bit more to get familiar with the code. 
&gt; The included code fails in an interesting way. It seems to connect to 
&gt; all web servers, have a problem somewhere and then report that all of 
&gt; the downloads
</div>
James,

I cleaned up your script a bit, tested and ran it without any problems.
 I have a feeling something else is going on.  I&#39;m &#39;biz&#39; in #poe on
irc.perl.org.  Let&#39;s see if we can work this out.

Jeff

P.S. I&#39;ve attached the cleaned up script
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl
use strict;
use warnings;
use POE;
use POE::Component::RSSAggregator;

POE::Session-&gt;create&#40;
    inline_states =&gt; {
	_start      =&gt; \&#38;init_session,
	handle_feed =&gt; \&#38;handle_feed,
    },
&#41;;
$poe_kernel-&gt;run&#40;&#41;;

sub init_session {
    my @feeds = load_feeds&#40;&#41;;
    my &#40;$kernel, $heap, $session&#41; = @_[KERNEL, HEAP, SESSION];
    $heap-&gt;{rssagg} = POE::Component::RSSAggregator-&gt;new&#40;
	alias    =&gt; &#39;rssagg&#39;,
	debug    =&gt; 1,
	callback =&gt; $session-&gt;postback&#40;&#34;handle_feed&#34;&#41;,
	tmpdir   =&gt; &#39;/tmp&#39;, # optional caching
    &#41;;
    $kernel-&gt;post&#40;&#39;rssagg&#39;,&#39;add_feed&#39;,$_&#41; for @feeds;
}

sub handle_feed {
    my &#40;$kernel,$feed&#41; = &#40;$_[KERNEL], $_[ARG1]-&gt;[0]&#41;;
    for my $headline &#40;$feed-&gt;late_breaking_news&#41; {
	# do stuff with the XML::RSS::Headline object
	print $headline-&gt;headline . &#34;\n&#34;;
    }
}

sub load_feeds {
    my @feeds = &#40;&#41;;
    my %names = &#40;&#41;;

    while &#40;my $url = &lt;DATA&gt;&#41; {
	next if $url =~ /^#/;
	chomp $url;

	my %feed = &#40;url =&gt; $url, delay =&gt; 60&#41;;

	#####
	# DETERMINE NAME START
	my $name = &#39;whatever&#39;;
	if &#40;$url=~m/\/$/&#41; {
	    $url=~m/&#40;[^\/]+&#41;\/$/;
	    $name = $1;      
	}
	else {
	    $url=~m/&#40;[^\/]+&#41;$/;
	    $name = $1;
	}
	$name =~ s/\..*//;
	while &#40;exists&#40;$names{$name}&#41;&#41; {
	    $name .= &#39;I&#39;;
	}
	# DETERMINE NAME END
	#####

	$names{$name} = 1;
	$feed{name} = $name;
	print &#34;Name: $name\n&#34;;

	push &#40;@feeds,\%feed&#41;;
    }
    return @feeds;
}

__END__
<span class="clickylink"><a target="new" rel="nofollow" href="http://rasterweb.net/raster/feeds/rwaudio.rss">http://rasterweb.net/raster/feeds/rwaudio.rss</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://radio.weblogs.com/0001014/categories/dailySourceCode/rss.xml">http://radio.weblogs.com/0001014/categories/dailySourceCode/rss.xml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://radio.weblogs.com/0001014/categories/qotd/rss.xml">http://radio.weblogs.com/0001014/categories/qotd/rss.xml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://secrets.scripting.com/xml/rss.xml">http://secrets.scripting.com/xml/rss.xml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://ruk.ca/rss/formosa.xml">http://ruk.ca/rss/formosa.xml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.scripting.com/rss.xml">http://www.scripting.com/rss.xml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://feeds.feedburner.com/career">http://feeds.feedburner.com/career</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.evilgeniuschronicles.org/static/index.rss">http://www.evilgeniuschronicles.org/static/index.rss</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://feeds.feedburner.com/esc">http://feeds.feedburner.com/esc</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://feeds.feedburner.com/ITConversations-EverythingMP3">http://feeds.feedburner.com/ITConversations-EverythingMP3</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://pentdego.com/feeds/freeflow.xml">http://pentdego.com/feeds/freeflow.xml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.blogosphereradio.com/rss.aspx">http://www.blogosphereradio.com/rss.aspx</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://feeds.feedburner.com/Techaura">http://feeds.feedburner.com/Techaura</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://thelinuxlink.net/tllts/tllts.rss">http://thelinuxlink.net/tllts/tllts.rss</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://radio.linuxquestions.org/syndicate/lq.php">http://radio.linuxquestions.org/syndicate/lq.php</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.lugradio.org/episodes.rss">http://www.lugradio.org/episodes.rss</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://linux.quicksurf.com/wp-rss2.php">http://linux.quicksurf.com/wp-rss2.php</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.binrev.com/radio/podcast/">http://www.binrev.com/radio/podcast/</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.infonomicon.org/info.xml">http://www.infonomicon.org/info.xml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://feeds.feedburner.com/sliceofscifi">http://feeds.feedburner.com/sliceofscifi</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://feeds.feedburner.com/YeastRadio.xml">http://feeds.feedburner.com/YeastRadio.xml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://leoville.tv/tlr/tlr.php">http://leoville.tv/tlr/tlr.php</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://thelinuxbox.org/show/tlbs.rss">http://thelinuxbox.org/show/tlbs.rss</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.dawnanddrew.com/rss2.xml">http://www.dawnanddrew.com/rss2.xml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.sciencecast.net/podcast.php">http://www.sciencecast.net/podcast.php</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://feeds.feedburner.com/ScienceCast">http://feeds.feedburner.com/ScienceCast</a></span>
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;05&nbsp;11:26:19&nbsp;2005</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;May&nbsp;06&nbsp;00:53:09&nbsp;2005</span>
    <span class="description">martijn [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
