<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #44246 for DBD-DB2: DBD::DB2 v1.61 and newer does not work well with DB2v9.1.0.2</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #44246 for DBD-DB2: DBD::DB2 v1.61 and newer does not work well with DB2v9.1.0.2</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-DB2/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-DB2/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-DB2/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-DB2/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-DB2">DBD-DB2 CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">44246</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-DB2/Active/">DBD-DB2</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">opendev [...] us.ibm.com
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
morten.bjornsvik [...] experian-da.no

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
aff [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10084-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10085-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;17&nbsp;11:33:11&nbsp;2009</span>
    <span class="description">morten.bjornsvik [...] experian-da.no -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> DBD::DB2 v1.61 and newer does not work well with DB2v9.1.0.2</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 17 Mar 2009 16:21:05 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-DBD-DB2 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Morten Bjørnsvik &lt;morten.bjornsvik [...] experian-da.no&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi

With the new DBD::DB2 v1.61 and v1.7 our old DB2 v9.1.0.2 can&#39;t be used.
V9.5.0 and V9.5.0.2 works fine though.

Would be nice if you add a TESTING section to the readme, which describes which DB2 versions
the various driver versions have been tested with.


Testing the following program on DBD::DB2 v 1.61 on DB2v9.1.0.2
Install Path                        Level   Fix Pack  Special Install Number  Install Date
--------------------------------------------------------------------------------------------
/opt/db2                          9.1.0.2        2                       1    Thu May 24 09:05:18 2007 CEST


If I install DBD::DB2 v1.61 or higher the error is present, If I reinstall DBD::DB2 v1.3 it works again.
Back and forth.


#!/opt/smm/bin/perl -w
# database barebone test

use strict;
use warnings;
use Carp;
use DBI;
use DBD::DB2;
use Data::Dumper;

print &#34;\$DBI::VERSION: &#34; . $DBI::VERSION . &#34;\n&#34;;
print &#34;\$DBD::DB2::VERSION: &#34; . $DBD::DB2::VERSION . &#34;\n&#34;;

# connect to the database
my $dbh = DBI-&gt;connect&#40; &#39;dbi:DB2:&lt;database&gt;&#39;, &#39;&lt;user&gt;&#39;, &#39;&lt;pw&gt;&#39;, { RaiseError =&gt;
1 } &#41;;

my $sql = &#34;select * from sched order by id asc&#34;;
my $sth = $dbh-&gt;prepare&#40;$sql&#41;;
$sth-&gt;execute&#40;&#41;;
my $ref = $sth-&gt;fetchall_arrayref&#40;&#41;;
$sth-&gt;finish&#40;&#41;;
print &#34;fetchall_hashref&#40;&#41; of &#39;$sql&#39; dump:\n&#34; . Dumper&#40;$ref&#41;;
$ref = undef;
$sth = $dbh-&gt;prepare&#40;$sql&#41;;
$sth-&gt;execute&#40;&#41;;
while&#40; $ref = $sth-&gt;fetchrow_hashref&#40;&#41;&#41; {
  print &#34;dump of fetchrow_hashref&#40;&#41;&#34; . Dumper&#40;$ref&#41;;
}

With DBD::DB2 v1.61 and v1.7 the output is truncated. see the command column

./db-test2.pl
$DBI::VERSION: 1.607
$DBD::DB2::VERSION: 1.61
fetchall_hashref&#40;&#41; of &#39;select * from sched order by id asc&#39; dump:
$VAR1 = [
          [
            &#39;1&#39;,
            &#39;*&#39;,
            &#39;* * * * mon-fri&#39;,
            &#39;{&#34;system&#34;:&#34;$SEC&#39;,
            &#39;2009-03-17 12:52:51.188049&#39;,
            &#39;2009-03-17 13:02:00.349395&#39;,
            &#39;2009-03-17 13:02:00.342011&#39;,
            &#39;2009-03-17 12:52:51.188049&#39;,
            &#39;scheduled&#39;,
            &#39;Execute tx workflow with file data source every minute on each
workday&#39;
          ],
          [
            &#39;2&#39;,
            &#39;*&#39;,
            &#39;* * * * mon-fri&#39;,
            &#39;{&#34;system&#34;:&#34;$SEC&#39;,
            &#39;2009-03-17 12:52:51.228358&#39;,
            &#39;2009-03-17 13:02:00.349395&#39;,
            &#39;2009-03-17 13:02:00.347405&#39;,
            &#39;2009-03-17 12:52:51.228358&#39;,
            &#39;scheduled&#39;,
            &#39;Execute tx workflow with MQ data source every minute on each
workday&#39;
          ]
        ];
dump of fetchrow_hashref&#40;&#41;$VAR1 = {
          &#39;ID&#39; =&gt; &#39;1&#39;,
          &#39;DESC&#39; =&gt; &#39;Execute tx workflow with file data source every minute on
each workday&#39;,
          &#39;TIMEOBJ&#39; =&gt; &#39;* * * * mon-fri&#39;,
          &#39;STATUS&#39; =&gt; &#39;scheduled&#39;,
          &#39;UPDATED&#39; =&gt; &#39;2009-03-17 12:52:51.188049&#39;,
          &#39;CREATED&#39; =&gt; &#39;2009-03-17 12:52:51.188049&#39;,
          &#39;LASTRUN&#39; =&gt; &#39;2009-03-17 13:02:00.342011&#39;,
          &#39;RUNHOSTS&#39; =&gt; &#39;*&#39;,
          &#39;COMMAND&#39; =&gt; &#39;{&#34;system&#34;:&#34;$SEC&#39;,
          &#39;LASTCHECKED&#39; =&gt; &#39;2009-03-17 13:02:00.349395&#39;
        };
dump of fetchrow_hashref&#40;&#41;$VAR1 = {
          &#39;ID&#39; =&gt; &#39;2&#39;,
          &#39;DESC&#39; =&gt; &#39;Execute tx workflow with MQ data source every minute on
each workday&#39;,
          &#39;TIMEOBJ&#39; =&gt; &#39;* * * * mon-fri&#39;,
          &#39;STATUS&#39; =&gt; &#39;scheduled&#39;,
          &#39;UPDATED&#39; =&gt; &#39;2009-03-17 12:52:51.228358&#39;,
          &#39;CREATED&#39; =&gt; &#39;2009-03-17 12:52:51.228358&#39;,
          &#39;LASTRUN&#39; =&gt; &#39;2009-03-17 13:02:00.347405&#39;,
          &#39;RUNHOSTS&#39; =&gt; &#39;*&#39;,
          &#39;COMMAND&#39; =&gt; &#39;{&#34;system&#34;:&#34;$SEC&#39;,
          &#39;LASTCHECKED&#39; =&gt; &#39;2009-03-17 13:02:00.349395&#39;
        };


With DBD::DB2 v1.3 it works fine:
./db-test2.pl
$DBI::VERSION: 1.607
$DBD::DB2::VERSION: 1.3
fetchall_hashref&#40;&#41; of &#39;select * from sched order by id asc&#39; dump:
$VAR1 = [
          [
            &#39;1&#39;,
            &#39;*&#39;,
            &#39;* * * * mon-fri&#39;,
            &#39;{&#34;system&#34;:&#34;$SECANAROOT/bin/workflow/start_workflow.pl 
--ic_auth=\&#39;File\&#39;  --auth_file=\\&#34;$SECANAROOT/files/data/test.data.small\\&#34; 
--auth_map_name=\&#39;fixed\&#39;  --auth_map_name=\&#39;WORKFLOW_AUTH_DATA_SOURCE_FILE\&#39; 
--ic_cb=\&#39;File\&#39;  --cb_file=\\&#34;$SECANAROOT/files/data/test.data.small\\&#34; 
--cb_map_name=\&#39;fixed\&#39;  --cb_map_name=\&#39;WORKFLOW_CB_DATA_SOURCE_FILE\&#39; 
--ic_pres=\&#39;File\&#39;  --pres_file=\\&#34;$SECANAROOT/files/data/test.data.small\\&#34; 
--pres_map_name=\&#39;fixed\&#39;  --pres_map_name=\&#39;WORKFLOW_PRES_DATA_SOURCE_FILE\&#39; 
--ic_rr=\&#39;File\&#39;  --rr_file=\\&#34;$SECANAROOT/files/data/test.data.small\\&#34; 
--rr_map_name=\&#39;fixed\&#39;  --rr_map_name=\&#39;WORKFLOW_RR_DATA_SOURCE_FILE\&#39;&#34;}&#39;,
            &#39;2009-03-17 12:52:51.188049&#39;,
            &#39;2009-03-17 13:02:00.349395&#39;,
            &#39;2009-03-17 13:02:00.342011&#39;,
            &#39;2009-03-17 12:52:51.188049&#39;,
            &#39;scheduled&#39;,
            &#39;Execute tx workflow with file data source every minute on each
workday&#39;
          ],
          [
            &#39;2&#39;,
            &#39;*&#39;,
            &#39;* * * * mon-fri&#39;,
            &#39;{&#34;system&#34;:&#34;$SECANAROOT/bin/workflow/start_workflow.pl
--ic_auth=\&#39;MQ\&#39; --auth_mq_svr_name=\&#39;vmclone1\&#39; --auth_mq_svr_port=\&#39;6666\&#39;
--auth_mq_svr_qmgr=\&#39;vmclone1\&#39; --auth_mq_svr_queue=\&#39;smm.queue\&#39;
--auth_mq_svr_channel=\&#39;smm.channel\&#39; --auth_map_name=\&#39;csv\&#39;
--auth_map_name=\&#39;WORKFLOW_AUTH_DATA_SOURCE_MQ\&#39; --auth_mq_svr_max_msg=\&#39;100\&#39;
--ic_cb=\&#39;MQ\&#39; --cb_mq_svr_name=\&#39;vmclone1\&#39; --cb_mq_svr_port=\&#39;6666\&#39;
--cb_mq_svr_qmgr=\&#39;vmclone1\&#39; --cb_mq_svr_queue=\&#39;smm.queue\&#39;
--cb_mq_svr_channel=\&#39;smm.channel\&#39; --cb_map_name=\&#39;fixed\&#39;
--cb_map_name=\&#39;WORKFLOW_CB_DATA_SOURCE_MQ\&#39; --cb_mq_svr_max_msg=\&#39;100\&#39;
--ic_pres=\&#39;MQ\&#39; --pres_mq_svr_name=\&#39;vmclone1\&#39; --pres_mq_svr_port=\&#39;6666\&#39;
--pres_mq_svr_qmgr=\&#39;vmclone1\&#39; --pres_mq_svr_queue=\&#39;smm.queue\&#39;
--pres_mq_svr_channel=\&#39;smm.channel\&#39; --pres_map_name=\&#39;fixed\&#39;
--pres_map_name=\&#39;WORKFLOW_PRES_DATA_SOURCE_MQ\&#39; --pres_mq_svr_max_msg=\&#39;100\&#39;
--ic_rr=\&#39;MQ\&#39; --rr_mq_svr_name=\&#39;vmclone1\&#39; --rr_mq_svr_port=\&#39;6666\&#39;
--rr_mq_svr_qmgr=\&#39;vmclone1\&#39; --rr_mq_svr_queue=\&#39;smm.queue\&#39;
--rr_mq_svr_channel=\&#39;smm.channel\&#39; --rr_map_name=\&#39;fixed\&#39;
--rr_map_name=\&#39;WORKFLOW_RR_DATA_SOURCE_MQ\&#39; --rr_mq_svr_max_msg=\&#39;100\&#39;
--output_channel=\&#39;File\&#39;
--output_file=\&#39;/tmp/transaction_wf_ds_mq_alerts_file.json\&#39;&#34;}&#39;,
            &#39;2009-03-17 12:52:51.228358&#39;,
            &#39;2009-03-17 13:02:00.349395&#39;,
            &#39;2009-03-17 13:02:00.347405&#39;,
            &#39;2009-03-17 12:52:51.228358&#39;,
            &#39;scheduled&#39;,
            &#39;Execute tx workflow with MQ data source every minute on each
workday&#39;
          ]
        ];
dump of fetchrow_hashref&#40;&#41;$VAR1 = {
          &#39;ID&#39; =&gt; &#39;1&#39;,
          &#39;DESC&#39; =&gt; &#39;Execute tx workflow with file data source every minute on
each workday&#39;,
          &#39;TIMEOBJ&#39; =&gt; &#39;* * * * mon-fri&#39;,
          &#39;STATUS&#39; =&gt; &#39;scheduled&#39;,
          &#39;UPDATED&#39; =&gt; &#39;2009-03-17 12:52:51.188049&#39;,
          &#39;CREATED&#39; =&gt; &#39;2009-03-17 12:52:51.188049&#39;,
          &#39;LASTRUN&#39; =&gt; &#39;2009-03-17 13:02:00.342011&#39;,
          &#39;RUNHOSTS&#39; =&gt; &#39;*&#39;,
          &#39;COMMAND&#39; =&gt; &#39;{&#34;system&#34;:&#34;$SECANAROOT/bin/workflow/start_workflow.pl 
--ic_auth=\&#39;File\&#39;  --auth_file=\\&#34;$SECANAROOT/files/data/test.data.small\\&#34; 
--auth_map_name=\&#39;fixed\&#39;  --auth_map_name=\&#39;WORKFLOW_AUTH_DATA_SOURCE_FILE\&#39; 
--ic_cb=\&#39;File\&#39;  --cb_file=\\&#34;$SECANAROOT/files/data/test.data.small\\&#34; 
--cb_map_name=\&#39;fixed\&#39;  --cb_map_name=\&#39;WORKFLOW_CB_DATA_SOURCE_FILE\&#39; 
--ic_pres=\&#39;File\&#39;  --pres_file=\\&#34;$SECANAROOT/files/data/test.data.small\\&#34; 
--pres_map_name=\&#39;fixed\&#39;  --pres_map_name=\&#39;WORKFLOW_PRES_DATA_SOURCE_FILE\&#39; 
--ic_rr=\&#39;File\&#39;  --rr_file=\\&#34;$SECANAROOT/files/data/test.data.small\\&#34; 
--rr_map_name=\&#39;fixed\&#39;  --rr_map_name=\&#39;WORKFLOW_RR_DATA_SOURCE_FILE\&#39;&#34;}&#39;,
          &#39;LASTCHECKED&#39; =&gt; &#39;2009-03-17 13:02:00.349395&#39;
        };
dump of fetchrow_hashref&#40;&#41;$VAR1 = {
          &#39;ID&#39; =&gt; &#39;2&#39;,
          &#39;DESC&#39; =&gt; &#39;Execute tx workflow with MQ data source every minute on
each workday&#39;,
          &#39;TIMEOBJ&#39; =&gt; &#39;* * * * mon-fri&#39;,
          &#39;STATUS&#39; =&gt; &#39;scheduled&#39;,
          &#39;UPDATED&#39; =&gt; &#39;2009-03-17 12:52:51.228358&#39;,
          &#39;CREATED&#39; =&gt; &#39;2009-03-17 12:52:51.228358&#39;,
          &#39;LASTRUN&#39; =&gt; &#39;2009-03-17 13:02:00.347405&#39;,
          &#39;RUNHOSTS&#39; =&gt; &#39;*&#39;,
          &#39;COMMAND&#39; =&gt; &#39;{&#34;system&#34;:&#34;$SECANAROOT/bin/workflow/start_workflow.pl
--ic_auth=\&#39;MQ\&#39; --auth_mq_svr_name=\&#39;vmclone1\&#39; --auth_mq_svr_port=\&#39;6666\&#39;
--auth_mq_svr_qmgr=\&#39;vmclone1\&#39; --auth_mq_svr_queue=\&#39;smm.queue\&#39;
--auth_mq_svr_channel=\&#39;smm.channel\&#39; --auth_map_name=\&#39;csv\&#39;
--auth_map_name=\&#39;WORKFLOW_AUTH_DATA_SOURCE_MQ\&#39; --auth_mq_svr_max_msg=\&#39;100\&#39;
--ic_cb=\&#39;MQ\&#39; --cb_mq_svr_name=\&#39;vmclone1\&#39; --cb_mq_svr_port=\&#39;6666\&#39;
--cb_mq_svr_qmgr=\&#39;vmclone1\&#39; --cb_mq_svr_queue=\&#39;smm.queue\&#39;
--cb_mq_svr_channel=\&#39;smm.channel\&#39; --cb_map_name=\&#39;fixed\&#39;
--cb_map_name=\&#39;WORKFLOW_CB_DATA_SOURCE_MQ\&#39; --cb_mq_svr_max_msg=\&#39;100\&#39;
--ic_pres=\&#39;MQ\&#39; --pres_mq_svr_name=\&#39;vmclone1\&#39; --pres_mq_svr_port=\&#39;6666\&#39;
--pres_mq_svr_qmgr=\&#39;vmclone1\&#39; --pres_mq_svr_queue=\&#39;smm.queue\&#39;
--pres_mq_svr_channel=\&#39;smm.channel\&#39; --pres_map_name=\&#39;fixed\&#39;
--pres_map_name=\&#39;WORKFLOW_PRES_DATA_SOURCE_MQ\&#39; --pres_mq_svr_max_msg=\&#39;100\&#39;
--ic_rr=\&#39;MQ\&#39; --rr_mq_svr_name=\&#39;vmclone1\&#39; --rr_mq_svr_port=\&#39;6666\&#39;
--rr_mq_svr_qmgr=\&#39;vmclone1\&#39; --rr_mq_svr_queue=\&#39;smm.queue\&#39;
--rr_mq_svr_channel=\&#39;smm.channel\&#39; --rr_map_name=\&#39;fixed\&#39;
--rr_map_name=\&#39;WORKFLOW_RR_DATA_SOURCE_MQ\&#39; --rr_mq_svr_max_msg=\&#39;100\&#39;
--output_channel=\&#39;File\&#39;
--output_file=\&#39;/tmp/transaction_wf_ds_mq_alerts_file.json\&#39;&#34;}&#39;,
          &#39;LASTCHECKED&#39; =&gt; &#39;2009-03-17 13:02:00.349395&#39;
        };


--
Morten Bjørnsvik
Experian Decision Analytics AS
PB 121, 0102 Oslo, Norway
Morten.bjornsvik@experian-da.no
+47 21 52 12 65 &#40;office&#41;
+47 21 52 12 51 &#40;fax&#41;
+47 92 44 83 02 &#40;mob&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;17&nbsp;12:59:28&nbsp;2009</span>
    <span class="description">opendev [...] us.ibm.com -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Take odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;17&nbsp;12:59:32&nbsp;2009</span>
    <span class="description">opendev [...] us.ibm.com -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;17&nbsp;13:03:12&nbsp;2009</span>
    <span class="description">opendev [...] us.ibm.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> opendev [...] us.ibm.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi

Thanks for raising this ticket. I would get back to you with this by end
of day tomorrow. Its a good point you brought about Testing section. I
would take that into consideration. I would try to reproduce this error
and get back to you. There are a lot of things we have added lately and
that might be breaking some backward compatibility so I would need to
find that out. Thanks again. 

-- 
Thanks
Tarun Pasrija
IBM OpenSource Application Development Team
India Software Labs, Bangalore &#40;India&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;17&nbsp;16:24:05&nbsp;2009</span>
    <span class="description">aff [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have been able to reproduce this behavior on Linux x86_64.  It seems
the bug concerns the &#34;clob&#34; datatype only.

$ cat 44246.pl
#!/opt/perl/bin/perl -sl

use strict;
use warnings;
use DBD::DB2;
use Test::More;

plan tests =&gt; 2;

# Prepare a table
my $statements =&lt;&lt;EOF;
drop table dbddb2; 
create table dbddb2 &#40;
   id        integer   not null,
   data      clob      not null  ,
   constraint pk_dbddb2 primary key &#40;id&#41;
&#41;;
insert into dbddb2 values &#40;1, &#39;fubar&#39;&#41;;
EOF

our $P ||= 0;   # print flag
our $dbh = undef; 

sub runtest {
  my &#40;$dbname, $uid, $pass&#41; = @_;
  $dbh = DBI-&gt;connect&#40;&#34;dbi:DB2:$dbname&#34;, $uid, $pass, {PrintError =&gt; 1,
RaiseError =&gt; 1}&#41;;
  my $sth = $dbh-&gt;prepare&#40;q{select VERSIONNUMBER from SYSIBM.SYSVERSIONS}&#41;;
  croak&#40;&#34;no sth&#34;&#41; unless $sth;
  $sth-&gt;execute&#40;&#41; or croak &#40;&#34;exec err&#34;&#41;;
  my $db2version = $sth-&gt;fetchrow_hashref-&gt;{VERSIONNUMBER} if $P;
  $sth-&gt;finish;

  print &#34;DBI::VERSION     : &#34; . $DBI::VERSION      if $P;
  print &#34;DBD::DB2::VERSION: &#34; . $DBD::DB2::VERSION if $P;
  print &#34;DB2 VERSION      : &#34; . $db2version        if $P;

  sub exec_statement {
        my $statement = shift;
        return unless $statement;
        print $statement if $P;
        $dbh-&gt;do&#40;$statement&#41; or croak&#40;&#34;statement failed:&#34;. $statement&#41;;
        return 1;
  }

  map { chomp $_; exec_statement&#40;$_&#41; } split&#40;/;/x, $statements&#41;;

  $sth = $dbh-&gt;prepare&#40;q{select id,data from dbddb2}&#41;;
  croak&#40;&#34;no sth&#34;&#41; unless $sth;
  $sth-&gt;execute&#40;&#41; or croak &#40;&#34;exec err&#34;&#41;;

  # This is the test
  is_deeply&#40;$sth-&gt;fetchall_arrayref&#40;&#41;, [[1,&#39;fubar&#39;]], q{Expect 1 row
&#40;1,&#39;fubar&#39;&#41; returned}&#41;; 

  $sth-&gt;finish or croak&#40;&#34;finish&#34;&#41;;
  $dbh-&gt;disconnect or croak&#40;&#34;disconnect&#34;&#41;;
  return 1;
}


runtest&#40; qw &#40;&lt;inst1&gt; &lt;user&gt;  &lt;pass&gt;&#41; &#41;; # DB2 9.1.1
runtest&#40; qw &#40;&lt;inst2&gt; &lt;user&gt;  &lt;pass&gt;&#41; &#41;; # DB2 9.5.0

__END__


$ cat results.txt
$ perl -w 44246.pl -P
1..2
DBI::VERSION     : 1.607
DBD::DB2::VERSION: 1.3
DB2 VERSION      : 9010200
drop table dbddb2
 
create table dbddb2 &#40;
   id        integer   not null,
   data      clob      not null  ,
   constraint pk_dbddb2 primary key &#40;id&#41;
&#41;

insert into dbddb2 values &#40;1, &#39;fubar&#39;&#41;
ok 1 - Expect 1 row &#40;1,&#39;fubar&#39;&#41; returned
DBI::VERSION     : 1.607
DBD::DB2::VERSION: 1.3
DB2 VERSION      : 9050000
drop table dbddb2
 
create table dbddb2 &#40;
   id        integer   not null,
   data      clob      not null  ,
   constraint pk_dbddb2 primary key &#40;id&#41;
&#41;

insert into dbddb2 values &#40;1, &#39;fubar&#39;&#41;
ok 2 - Expect 1 row &#40;1,&#39;fubar&#39;&#41; returned


$ perl -w 44246.pl -P
1..2
DBI::VERSION     : 1.607
DBD::DB2::VERSION: 1.61
DB2 VERSION      : 9010200
drop table dbddb2
 
create table dbddb2 &#40;
   id        integer   not null,
   data      clob      not null  ,
   constraint pk_dbddb2 primary key &#40;id&#41;
&#41;

insert into dbddb2 values &#40;1, &#39;fubar&#39;&#41;
not ok 1 - Expect 1 row &#40;1,&#39;fubar&#39;&#41; returned
#   Failed test &#39;Expect 1 row &#40;1,&#39;fubar&#39;&#41; returned&#39;
#   at 44246.pl line 52.
#     Structures begin differing at:
#          $got-&gt;[0][1] = &#39;f&#39;
#     $expected-&gt;[0][1] = &#39;fubar&#39;
DBI::VERSION     : 1.607
DBD::DB2::VERSION: 1.61
DB2 VERSION      : 9050000
drop table dbddb2
 
create table dbddb2 &#40;
   id        integer   not null,
   data      clob      not null  ,
   constraint pk_dbddb2 primary key &#40;id&#41;
&#41;

insert into dbddb2 values &#40;1, &#39;fubar&#39;&#41;
ok 2 - Expect 1 row &#40;1,&#39;fubar&#39;&#41; returned
# Looks like you failed 1 test of 2.

$ perl -w 44246.pl -P
1..2
DBI::VERSION     : 1.607
DBD::DB2::VERSION: 1.7
DB2 VERSION      : 9010200
drop table dbddb2
 
create table dbddb2 &#40;
   id        integer   not null,
   data      clob      not null  ,
   constraint pk_dbddb2 primary key &#40;id&#41;
&#41;

insert into dbddb2 values &#40;1, &#39;fubar&#39;&#41;
not ok 1 - Expect 1 row &#40;1,&#39;fubar&#39;&#41; returned
#   Failed test &#39;Expect 1 row &#40;1,&#39;fubar&#39;&#41; returned&#39;
#   at 44246.pl line 52.
#     Structures begin differing at:
#          $got-&gt;[0][1] = &#39;f&#39;
#     $expected-&gt;[0][1] = &#39;fubar&#39;
DBI::VERSION     : 1.607
DBD::DB2::VERSION: 1.7
DB2 VERSION      : 9050000
drop table dbddb2
 
create table dbddb2 &#40;
   id        integer   not null,
   data      clob      not null  ,
   constraint pk_dbddb2 primary key &#40;id&#41;
&#41;

insert into dbddb2 values &#40;1, &#39;fubar&#39;&#41;
ok 2 - Expect 1 row &#40;1,&#39;fubar&#39;&#41; returned
# Looks like you failed 1 test of 2.


--
Best regards,
Andreas
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;17&nbsp;17:24:45&nbsp;2009</span>
    <span class="description">aff [...] cpan.org -  Cc AFF added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;20&nbsp;06:24:57&nbsp;2009</span>
    <span class="description">opendev [...] us.ibm.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> opendev [...] us.ibm.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Friends

I have found the root cause of the problem. This problem is happening
since for Long/LOB types including XML, the implementation is little
different in v91 and 95. I am attaching the changed dbdimp.c file.
Please let me know if this works in your environment.

Steps to follow

1. Replace your existing dbdimp.c with the one attached.
2. perl Makefile.PL
3. make
4. make install

Execute the tests that you had written. 

PS:- Would be waiting for your response for the same.

-- 
Thanks
Tarun Pasrija
IBM OpenSource Application Development Team
India Software Labs, Bangalore &#40;India&#41;
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;20&nbsp;06:53:22&nbsp;2009</span>
    <span class="description">aff [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> aff [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Mar 20 06:24:57 2009, IBMTORDB2 wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 1. Replace your existing dbdimp.c with the one attached.
&gt; Execute the tests that you had written. 
</div>
Thank you very much for investigating this problem.

I have applied you new dbdimp.c, and not it works for me &#40;using the
simple test above&#41;:

$ perl 44246.pl -P
1..4
DBI::VERSION     : 1.607
DBD::DB2::VERSION: 1.7-patch-for-bug-44246
DB2 VERSION      : 9010200
drop table dbddb2_clob
 
drop table dbddb2_varchar
 
create table dbddb2_clob &#40;
   id        integer   not null,
   data      clob      not null  ,
   constraint pk_dbddb2_clob primary key &#40;id&#41;
&#41;

insert into dbddb2_clob values &#40;1, &#39;fubar_clob&#39;&#41;


create table dbddb2_varchar &#40;
   id        integer       not null,
   data      varchar&#40;1024&#41; not null  ,
   constraint pk_dbddb2_varchar primary key &#40;id&#41;
&#41;

insert into dbddb2_varchar values &#40;1, &#39;fubar_varchar&#39;&#41;
ok 1 - Expect 1 row &#40;1,&#39;fubar_clob&#39;&#41; returned
ok 2 - Expect 1 row &#40;1,&#39;fubar_varchar&#39;&#41; returned
DBI::VERSION     : 1.607
DBD::DB2::VERSION: 1.7-patch-for-bug-44246
DB2 VERSION      : 9050000
drop table dbddb2_clob
 
drop table dbddb2_varchar
 
create table dbddb2_clob &#40;
   id        integer   not null,
   data      clob      not null  ,
   constraint pk_dbddb2_clob primary key &#40;id&#41;
&#41;

insert into dbddb2_clob values &#40;1, &#39;fubar_clob&#39;&#41;


create table dbddb2_varchar &#40;
   id        integer       not null,
   data      varchar&#40;1024&#41; not null  ,
   constraint pk_dbddb2_varchar primary key &#40;id&#41;
&#41;

insert into dbddb2_varchar values &#40;1, &#39;fubar_varchar&#39;&#41;
ok 3 - Expect 1 row &#40;1,&#39;fubar_clob&#39;&#41; returned
ok 4 - Expect 1 row &#40;1,&#39;fubar_varchar&#39;&#41; returned

-- 
Best regards,
Andreas
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;20&nbsp;07:14:09&nbsp;2009</span>
    <span class="description">aff [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Mar 20 06:53:22 2009, AFF wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [..] not it works for me &#40;using the
</div>
That should be &#34;now it works for me&#34;.

Regards,
Andreas
-- 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;21&nbsp;02:01:00&nbsp;2009</span>
    <span class="description">opendev [...] us.ibm.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> opendev [...] us.ibm.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks Guys. 

I would release this patch in the next version of the driver. Closing
this ticket.

-- 
Thanks
Tarun Pasrija
IBM OpenSource Application Development Team
India Software Labs, Bangalore &#40;India&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;21&nbsp;02:01:01&nbsp;2009</span>
    <span class="description">opendev [...] us.ibm.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
