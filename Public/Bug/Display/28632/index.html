<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #28632 for ExtUtils-MakeMaker: MakeMaker does not set Makefile variables recursively</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #28632 for ExtUtils-MakeMaker: MakeMaker does not set Makefile variables recursively</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=ExtUtils-MakeMaker">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=ExtUtils-MakeMaker">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=ExtUtils-MakeMaker">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=ExtUtils-MakeMaker">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/ExtUtils-MakeMaker">ExtUtils-MakeMaker CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">28632</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">31 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=ExtUtils-MakeMaker">ExtUtils-MakeMaker</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
nog [...] yapceurope.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-12494-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
6.36    </td>
  </tr>
  <tr id="CF-12495-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Base-Makefile<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/350511/157560/Base-Makefile">
Thu Aug 02 08:28:57 2007 (15.9k) by NOG [...] cpan.org
</a>
</font></li>
</ul>


Base-Makefile.PL<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/350511/157563/Base-Makefile.PL">
Thu Aug 02 08:28:57 2007 (242b) by NOG [...] cpan.org
</a>
</font></li>
</ul>


Makefile<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/350511/157557/Makefile">
Thu Aug 02 08:28:57 2007 (21.6k) by NOG [...] cpan.org
</a>
</font></li>
</ul>


Makefile.PL<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/350511/157566/Makefile.PL">
Thu Aug 02 08:28:57 2007 (213b) by NOG [...] cpan.org
</a>
</font></li>
</ul>


recurs.t<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/382020/174934/recurs.t">
Sun Nov 11 15:23:49 2007 (2.8k) by matisse [...] spamcop.net
</a>
</font></li>
</ul>


recurs.t.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/382025/174941/recurs.t.patch">
Sun Nov 11 15:27:14 2007 (1.4k) by matisse [...] spamcop.net
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=28632">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-350511" href="/Public/Bug/Display.html?id=28632#txn-350511">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;02&nbsp;08:28:57&nbsp;2007</span>
    <span class="description">NOG [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> MakeMaker does not set Makefile variables recursively</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/350511/157554/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/157554">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 593b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have the following directory stucture
   ./Mpa
   ./Mpa/Base
Both directories contain a Makefile.PL file.

I do the following:
 cd ./Mpa
 perl Makefile.PL LD=&#39;xyz&#39;

When I check the Makefile in both directories, only the Makefile in
./Mpa  has set the value for the variable LD.  The Makefile in the
subdirectory ./Mpa/Base has not changed the value for the variable LD.


MakeMaker version: 6.30 &#40;Revision: Revision: 4535 &#41;


I have attached both Makefile.PL files and both generated Makefile files.

If you need more information, please let me know.

Thank you in advance,

Norbert Gruener
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Makefile</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/350511/157557/Makefile">Download Makefile</a><br />
<span class="downloadcontenttype">application/octet-stream 21.6k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Base-Makefile</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/350511/157560/Base-Makefile">Download Base-Makefile</a><br />
<span class="downloadcontenttype">application/octet-stream 15.9k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Base-Makefile.PL</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/350511/157563/Base-Makefile.PL">Download Base-Makefile.PL</a><br />
<span class="downloadcontenttype">text/x-perl 242b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">use ExtUtils::MakeMaker;
# See lib/ExtUtils/MakeMaker.pm for details of how to influence
# the contents of the Makefile that is written.
WriteMakefile&#40;
    &#39;NAME&#39;	=&gt; &#39;Mpa_Corp::Mpa::Base&#39;,
    &#39;VERSION_FROM&#39; =&gt; &#39;Base.pm&#39;, # finds $VERSION
&#41;;
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Makefile.PL</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/350511/157566/Makefile.PL">Download Makefile.PL</a><br />
<span class="downloadcontenttype">text/x-perl 213b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">use ExtUtils::MakeMaker;
# See lib/ExtUtils/MakeMaker.pm for details of how to influence
# the contents of the Makefile that is written.
WriteMakefile&#40;
    &#39;NAME&#39;	=&gt; &#39;Mpa_Corp::Mpa&#39;,
    &#39;VERSION&#39; 	=&gt; &#39;0.01&#39;, 
&#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-350647" href="/Public/Bug/Display.html?id=28632#txn-350647">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;02&nbsp;20:01:41&nbsp;2007</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #28632] MakeMaker does not set Makefile variables recursively</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 02 Aug 2007 17:01:04 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/350647/157647/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/157647">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"> via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thu Aug 02 08:28:57 2007: Request 28632 was acted upon.
&gt; Transaction: Ticket created by NOG
&gt;        Queue: ExtUtils-MakeMaker
&gt;      Subject: MakeMaker does not set Makefile variables recursively
&gt;    Broken in: 6.30
&gt;     Severity: Important
&gt;        Owner: Nobody
&gt;   Requestors: nog@yapceurope.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=28632">http://rt.cpan.org/Ticket/Display.html?id=28632</a></span> &gt;
&gt; 
&gt; 
&gt; I have the following directory stucture
&gt;    ./Mpa
&gt;    ./Mpa/Base
&gt; Both directories contain a Makefile.PL file.
&gt; 
&gt; I do the following:
&gt;  cd ./Mpa
&gt;  perl Makefile.PL LD=&#39;xyz&#39;
&gt; 
&gt; When I check the Makefile in both directories, only the Makefile in
&gt; ./Mpa  has set the value for the variable LD.  The Makefile in the
&gt; subdirectory ./Mpa/Base has not changed the value for the variable LD.
&gt; 
&gt; 
&gt; MakeMaker version: 6.30 &#40;Revision: Revision: 4535 &#41;
&gt; 
&gt; 
&gt; I have attached both Makefile.PL files and both generated Makefile files.
&gt; 
&gt; If you need more information, please let me know.
</div>
Thanks for the report, Norbert, and for attaching all the generated Makefiles.

Could you try it again with the latest version of MakeMaker, see if this
problem has already been fixed?
<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/dist/ExtUtils-MakeMaker">http://search.cpan.org/dist/ExtUtils-MakeMaker</a></span>

I suspect this is an issue with the pasthru&#40;&#41; code which selects which
variables get passed onto subdirectories.  I admit its not part of the code
which I understand well and I&#39;ll probably wind up asking the folks on
makemaker@perl.org.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-350648" href="/Public/Bug/Display.html?id=28632#txn-350648">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;02&nbsp;20:01:42&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-350991" href="/Public/Bug/Display.html?id=28632#txn-350991">#</a>      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;04&nbsp;04:58:44&nbsp;2007</span>
    <span class="description">nog [...] yapceurope.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #28632] MakeMaker does not set Makefile variables recursively</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 4 Aug 2007 10:57:16 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Michael G Schwern via RT &lt;bug-ExtUtils-MakeMaker [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Norbert Gruener &lt;nog [...] yapceurope.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/350991/157841/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/157841">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Michael

thank you for your fast reply!

On Fri, Aug 03 2007, Michael G Schwern via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=28632">http://rt.cpan.org/Ticket/Display.html?id=28632</a></span> &gt;
&gt; 
&gt;  via RT wrote:
<div class="message-stanza open">&gt; &gt; Thu Aug 02 08:28:57 2007: Request 28632 was acted upon.
&gt; &gt; Transaction: Ticket created by NOG
&gt; &gt;        Queue: ExtUtils-MakeMaker
&gt; &gt;      Subject: MakeMaker does not set Makefile variables recursively
&gt; &gt;    Broken in: 6.30
&gt; &gt;     Severity: Important
&gt; &gt;        Owner: Nobody
&gt; &gt;   Requestors: nog@yapceurope.org
&gt; &gt;       Status: new
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=28632">http://rt.cpan.org/Ticket/Display.html?id=28632</a></span> &gt;
&gt; &gt; 
&gt; &gt; 
&gt; &gt; I have the following directory stucture
&gt; &gt;    ./Mpa
&gt; &gt;    ./Mpa/Base
&gt; &gt; Both directories contain a Makefile.PL file.
&gt; &gt; 
&gt; &gt; I do the following:
&gt; &gt;  cd ./Mpa
&gt; &gt;  perl Makefile.PL LD=&#39;xyz&#39;
&gt; &gt; 
&gt; &gt; When I check the Makefile in both directories, only the Makefile in
&gt; &gt; ./Mpa  has set the value for the variable LD.  The Makefile in the
&gt; &gt; subdirectory ./Mpa/Base has not changed the value for the variable LD.
&gt; &gt; 
&gt; &gt; 
&gt; &gt; MakeMaker version: 6.30 &#40;Revision: Revision: 4535 &#41;
&gt; &gt; 
&gt; &gt; 
&gt; &gt; I have attached both Makefile.PL files and both generated Makefile files.
&gt; &gt; 
&gt; &gt; If you need more information, please let me know.
</div>&gt; 
&gt; Thanks for the report, Norbert, and for attaching all the generated Makefiles.
&gt; 
&gt; Could you try it again with the latest version of MakeMaker, see if this
&gt; problem has already been fixed?
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/dist/ExtUtils-MakeMaker">http://search.cpan.org/dist/ExtUtils-MakeMaker</a></span>
</div>
Now I have installed the latest version from CPAN &#40;Version: 6.36 Revision: 32261&#41;
but the behavior and the result stay the same.  The variable does not get passed
into the subdirectory.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I suspect this is an issue with the pasthru&#40;&#41; code which selects which
&gt; variables get passed onto subdirectories.  I admit its not part of the code
&gt; which I understand well and I&#39;ll probably wind up asking the folks on
&gt; makemaker@perl.org.
</div>
I would appreciate if you could do that  :-&#41;

Thank you in advance.

Cheers,

Norbert
-- 
Ceterum censeo          | PGP encrypted mail preferred.
Redmond esse delendam.  | PGP Key at www.MPA-Garching.MPG.de/~nog/
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-365581" href="/Public/Bug/Display.html?id=28632#txn-365581">#</a>      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;26&nbsp;05:18:42&nbsp;2007</span>
    <span class="description">nog [...] yapceurope.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #28632] MakeMaker does not set Makefile variables recursively</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 26 Sep 2007 11:17:37 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Michael G Schwern via RT &lt;bug-ExtUtils-MakeMaker [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Norbert Gruener &lt;nog [...] yapceurope.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/365581/165697/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/165697">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 658b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, Aug 04 2007, Norbert Gruener wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Michael
&gt; 
&gt; thank you for your fast reply!
&gt; 
&gt; On Fri, Aug 03 2007, Michael G Schwern via RT wrote:
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; I suspect this is an issue with the pasthru&#40;&#41; code which selects which
&gt; &gt; variables get passed onto subdirectories.  I admit its not part of the code
&gt; &gt; which I understand well and I&#39;ll probably wind up asking the folks on
&gt; &gt; makemaker@perl.org.
</div>&gt; 
&gt; I would appreciate if you could do that  :-&#41;
</div>
Is there any chance that this problem gets tackled ?

Cheers,

Norbert
-- 
Ceterum censeo          | PGP encrypted mail preferred.
Redmond esse delendam.  | PGP Key at www.MPA-Garching.MPG.de/~nog/
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-381341" href="/Public/Bug/Display.html?id=28632#txn-381341">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;09&nbsp;13:48:31&nbsp;2007</span>
    <span class="description">matisse [...] spamcop.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/381341/174549/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/174549">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 707b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I also see this problem and have asked on the perl-qa list about it.

In my case I was trying to build XML::Parser which has:

   Makefile.PL
   Expat/Makefile.PL

and the &#39;LD&#39; variable is not getting passed to the lower level Makfile.

In other words, if I do this:

  perl Makefile.PL LD=&#34;env MACOSX_DEPLOYMENT_TARGET=10.3 cc -arch ppc
-arch i386&#34;

then the top-level Makefile has:

  LD = env MACOSX_DEPLOYMENT_TARGET=10.3 cc -arch ppc -arch i386

but the lower level &#40;Expat/Makefile&#41; does not.

I suspect that this is because the lower level Makefile.PL is invoked
with &#39;do&#39;, in eval_in_x&#40;&#41;:

    {
        package main;
        do &#39;./Makefile.PL&#39;;
    };

without passing any of the command-line args.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-382020" href="/Public/Bug/Display.html?id=28632#txn-382020">#</a>      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;11&nbsp;15:23:49&nbsp;2007</span>
    <span class="description">matisse [...] spamcop.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> matisse [...] spamcop.net</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/382020/174931/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/174931">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 106b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Attaching a patch to t/recurs.t &#40;from ExtUtils-MakeMaker-6.36&#41; that adds
a failing test case for this bug.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/382020/174934/recurs.t">Download recurs.t</a><br />
<span class="downloadcontenttype">text/x-perl 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl -w

# This tests MakeMaker against recursive builds

BEGIN {
    if&#40; $ENV{PERL_CORE} &#41; {
        chdir &#39;t&#39; if -d &#39;t&#39;;
        @INC = &#40;&#39;../lib&#39;, &#39;lib&#39;&#41;;
    }
    else {
        unshift @INC, &#39;t/lib&#39;;
    }
}

use strict;
use Config;

use Test::More tests =&gt; 26;
use MakeMaker::Test::Utils;
use MakeMaker::Test::Setup::Recurs;

# &#39;make disttest&#39; sets a bunch of environment variables which interfere
# with our testing.
delete @ENV{qw&#40;PREFIX LIB MAKEFLAGS&#41;};

my $perl = which_perl&#40;&#41;;
my $Is_VMS = $^O eq &#39;VMS&#39;;

chdir&#40;&#39;t&#39;&#41;;

perl_lib;

my $Touch_Time = calibrate_mtime&#40;&#41;;

$| = 1;

ok&#40; setup_recurs&#40;&#41;, &#39;setup&#39; &#41;;
END { 
    ok&#40; chdir File::Spec-&gt;updir &#41;;
    ok&#40; teardown_recurs&#40;&#41;, &#39;teardown&#39; &#41;;
}

ok&#40; chdir&#40;&#39;Recurs&#39;&#41;, q{chdir&#39;d to Recurs} &#41; ||
    diag&#40;&#34;chdir failed: $!&#34;&#41;;


# Check recursive Makefile building.
my @mpl_out = run&#40;qq{$perl Makefile.PL}&#41;;

cmp_ok&#40; $?, &#39;==&#39;, 0, &#39;Makefile.PL exited with zero&#39; &#41; ||
  diag&#40;@mpl_out&#41;;

my $makefile = makefile_name&#40;&#41;;

ok&#40; -e $makefile, &#39;Makefile written&#39; &#41;;
ok&#40; -e File::Spec-&gt;catfile&#40;&#39;prj2&#39;,$makefile&#41;, &#39;sub Makefile written&#39; &#41;;

my $make = make_run&#40;&#41;;

my $make_out = run&#40;&#34;$make&#34;&#41;;
is&#40; $?, 0, &#39;recursive make exited normally&#39; &#41; || diag $make_out;

ok&#40; chdir File::Spec-&gt;updir &#41;;
ok&#40; teardown_recurs&#40;&#41;, &#39;cleaning out recurs&#39; &#41;;
ok&#40; setup_recurs&#40;&#41;,    &#39;  setting up fresh copy&#39; &#41;;
ok&#40; chdir&#40;&#39;Recurs&#39;&#41;, q{chdir&#39;d to Recurs} &#41; ||
    diag&#40;&#34;chdir failed: $!&#34;&#41;;


# Check NORECURS
@mpl_out = run&#40;qq{$perl Makefile.PL &#34;NORECURS=1&#34;}&#41;;

cmp_ok&#40; $?, &#39;==&#39;, 0, &#39;Makefile.PL NORECURS=1 exited with zero&#39; &#41; ||
  diag&#40;@mpl_out&#41;;

$makefile = makefile_name&#40;&#41;;

ok&#40; -e $makefile, &#39;Makefile written&#39; &#41;;
ok&#40; !-e File::Spec-&gt;catfile&#40;&#39;prj2&#39;,$makefile&#41;, &#39;sub Makefile not written&#39; &#41;;

$make = make_run&#40;&#41;;

run&#40;&#34;$make&#34;&#41;;
is&#40; $?, 0, &#39;recursive make exited normally&#39; &#41;;


ok&#40; chdir File::Spec-&gt;updir &#41;;
ok&#40; teardown_recurs&#40;&#41;, &#39;cleaning out recurs&#39; &#41;;
ok&#40; setup_recurs&#40;&#41;,    &#39;  setting up fresh copy&#39; &#41;;
ok&#40; chdir&#40;&#39;Recurs&#39;&#41;, q{chdir&#39;d to Recurs} &#41; ||
    diag&#40;&#34;chdir failed: $!&#34;&#41;;


# Check that arguments aren&#39;t stomped when they have .. prepended
# [rt.perl.org 4345]
@mpl_out = run&#40;qq{$perl Makefile.PL &#34;INST_SCRIPT=cgi&#34;}&#41;;

cmp_ok&#40; $?, &#39;==&#39;, 0, &#39;Makefile.PL exited with zero&#39; &#41; ||
  diag&#40;@mpl_out&#41;;

$makefile = makefile_name&#40;&#41;;
my $submakefile = File::Spec-&gt;catfile&#40;&#39;prj2&#39;,$makefile&#41;;

ok&#40; -e $makefile,    &#39;Makefile written&#39; &#41;;
ok&#40; -e $submakefile, &#39;sub Makefile written&#39; &#41;;

my $inst_script = File::Spec-&gt;catdir&#40;File::Spec-&gt;updir, &#39;cgi&#39;&#41;;
ok&#40; open&#40;MAKEFILE, $submakefile&#41; &#41; || diag&#40;&#34;Can&#39;t open $submakefile: $!&#34;&#41;;
{ local $/;  
  like&#40; &lt;MAKEFILE&gt;, qr/^\s*INST_SCRIPT\s*=\s*\Q$inst_script\E/m, 
        &#39;prepend .. not stomping WriteMakefile args&#39; &#41; 
}
close MAKEFILE;


{
    # Quiet &#34;make test&#34; failure noise
    close *STDERR;

    my $test_out = run&#40;&#34;$make test&#34;&#41;;
    isnt $?, 0, &#39;test failure in a subdir causes make to fail&#39;;
}</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-382023" href="/Public/Bug/Display.html?id=28632#txn-382023">#</a>      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;11&nbsp;15:25:06&nbsp;2007</span>
    <span class="description">matisse [...] spamcop.net -  Broken in 6.36 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-382024" href="/Public/Bug/Display.html?id=28632#txn-382024">#</a>      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;11&nbsp;15:25:06&nbsp;2007</span>
    <span class="description">matisse [...] spamcop.net -  Broken in 6.30 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-382025" href="/Public/Bug/Display.html?id=28632#txn-382025">#</a>      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;11&nbsp;15:27:14&nbsp;2007</span>
    <span class="description">matisse [...] spamcop.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/382025/174938/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/174938">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 241b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Nov 11 15:23:49 2007, MATISSE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Attaching a patch to t/recurs.t &#40;from ExtUtils-MakeMaker-6.36&#41; that adds
&gt; a failing test case for this bug.
</div>
Nuts. I attached the wrone file. This time I have attached the correct
&#40;patch&#41; file.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/382025/174941/recurs.t.patch">Download recurs.t.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- recurs.t	2007-11-11 11:45:22.000000000 -0800
+++ recurs.t.new	2007-11-11 12:19:06.000000000 -0800
@@ -15,7 +15,7 @@
 use strict;
 use Config;
 
-use Test::More tests =&gt; 26;
+use Test::More tests =&gt; 27;
 use MakeMaker::Test::Utils;
 use MakeMaker::Test::Setup::Recurs;
 
@@ -91,9 +91,12 @@
     diag&#40;&#34;chdir failed: $!&#34;&#41;;
 
 
+
 # Check that arguments aren&#39;t stomped when they have .. prepended
 # [rt.perl.org 4345]
-@mpl_out = run&#40;qq{$perl Makefile.PL &#34;INST_SCRIPT=cgi&#34;}&#41;;
+# and <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=28632">http://rt.cpan.org/Ticket/Display.html?id=28632</a></span> 
+my $test_LD_value = q{LD=&#34;test value for LD&#34;};
+@mpl_out = run&#40;qq{$perl Makefile.PL &#34;INST_SCRIPT=cgi $test_LD_value&#34;}&#41;;
 
 cmp_ok&#40; $?, &#39;==&#39;, 0, &#39;Makefile.PL exited with zero&#39; &#41; ||
   diag&#40;@mpl_out&#41;;
@@ -107,8 +110,16 @@
 my $inst_script = File::Spec-&gt;catdir&#40;File::Spec-&gt;updir, &#39;cgi&#39;&#41;;
 ok&#40; open&#40;MAKEFILE, $submakefile&#41; &#41; || diag&#40;&#34;Can&#39;t open $submakefile: $!&#34;&#41;;
 { local $/;  
-  like&#40; &lt;MAKEFILE&gt;, qr/^\s*INST_SCRIPT\s*=\s*\Q$inst_script\E/m, 
-        &#39;prepend .. not stomping WriteMakefile args&#39; &#41; 
+  my $sub_makefile_text = &lt;MAKEFILE&gt;;
+  like&#40; $sub_makefile_text, qr/^\s*INST_SCRIPT\s*=\s*\Q$inst_script\E/m, 
+        &#39;prepend .. not stomping WriteMakefile args&#39; &#41;;
+
+  # <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=28632">http://rt.cpan.org/Ticket/Display.html?id=28632</a></span>
+  my &#40;$got_ld&#41; = &#40; $sub_makefile_text =~ /&#40; ^ LD \s = \s .*? $&#41;/msx &#41;;
+  is&#40;$got_ld,
+     $test_LD_value,
+     &#39;perl Makefile.PL LD=test_value passed to sub-makefile&#39;
+  &#41;;
 }
 close MAKEFILE;
 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1048365" href="/Public/Bug/Display.html?id=28632#txn-1048365">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;10&nbsp;06:44:15&nbsp;2012</span>
    <span class="description">ntyni [...] debian.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [rt.cpan.org #28632] MakeMaker does not set Makefile variables recursively</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 10 Mar 2012 13:44:03 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Niko Tyni &lt;ntyni [...] debian.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1048365/547949/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/547949">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I sent this to makemaker@perl.org on March 4th, but it doesn&#39;t
seem to have made it through, perhaps due to moderation issues or
something. Sending it here in the RT ticket so it&#39;s not totally lost.

----- Forwarded message from Niko Tyni &lt;ntyni@debian.org&gt; -----

Date: Sun, 4 Mar 2012 09:16:46 +0200
From: Niko Tyni &lt;ntyni@debian.org&gt;
To: makemaker@perl.org
Cc: 660195@bugs.debian.org
Subject: Passing variables down to recursive Makefile.PL invocations
User-Agent: Mutt/1.5.21 &#40;2010-09-15&#41;

Hi makemaker people,

as discussed five years ago in [rt.cpan.org #28632], when building a
distribution with separate Makefile.PL files in subdirectories,
command line arguments to Makefile.PL are not passed through
to recursive invocations. This seems to be the case for the
current versions too, up to and including v6.63_02-9-g5072697 in
&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/Perl-Toolchain-Gang/ExtUtils-MakeMaker">http://github.com/Perl-Toolchain-Gang/ExtUtils-MakeMaker</a></span>&gt;.

I&#39;m bringing this up here on the makemaker list as Michael Schwern
suggested so in the ticket.

To summarize, the top level invocation
 perl Makefile.PL LD=foo
will only affect the LD setting in the generated top-level Makefile but
not in the subdirectory Makefile, which is generated from the subdirectory
Makefile.PL.

We&#39;re facing this in Debian because we need a way to set security related
linker flags &#40;-Wl,-z,relro to be precise&#41; for the build, and the flags are
not propagated to subdirectories in distributions like Imager &#40;on CPAN.&#41;
That&#39;s <span class="clickylink"><a target="new" rel="nofollow" href="http://bugs.debian.org/660195">http://bugs.debian.org/660195</a></span> &#40;cc&#39;d&#41; FWIW.

I&#39;ve looked into this &#40;for the MM_Unix part&#41;, and I see two whitelists
of variables that do affect the recursively generated Makefiles or
the respective &#39;make&#39; invocations. Any others seem to get ignored
in subdirectories.

- ExtUtils::MakeMaker::new&#40;&#41; lists POLLUTE PERL_CORE LINKTYPE. POLLUTE
  has special handling, but the others get set in the &#39;MakeMaker
  constants&#39; section of the generated subdirectory Makefile.
- ExtUtils::MM_Unix::passthru&#40;&#41; lists LIB LIBPERL_A LINKTYPE OPTIMIZE
  PREFIX INSTALL_BASE. Those get added to the recursive make
  invocation command line in the top level Makefile &#40;via the &#39;Makemaker
  subdirs&#39; section and the PASTHRU variable.&#41;

For the time being, I&#39;ve patched the latter list for Debian to include
LD, but I was wondering how much of this is working as designed.
Why aren&#39;t all command line settings propagated?

There&#39;s a test case in the CPAN ticket so I&#39;ll spare the details,
but let me know if you need any.

Many thanks for your work on MakeMaker,
-- 
Niko Tyni   ntyni@debian.org

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- End forwarded message -----
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1234742" href="/Public/Bug/Display.html?id=28632#txn-1234742">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;11&nbsp;17:26:15&nbsp;2013</span>
    <span class="description">BINGOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">30 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> matisse [...] spamcop.net, ntyni [...] debian.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1234742/652554/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/652554">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 128b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve applied the Debian patch to the EUMM repository and
released v6.69_05 which incorporates the change, to CPAN.

Many thanks.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1234746" href="/Public/Bug/Display.html?id=28632#txn-1234746">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;11&nbsp;17:26:16&nbsp;2013</span>
    <span class="description">BINGOS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1239898" href="/Public/Bug/Display.html?id=28632#txn-1239898">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;23&nbsp;18:03:46&nbsp;2013</span>
    <span class="description">BINGOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">1 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1239898/655565/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/655565">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 65b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This issue is now resolved with the release of 6.70

Many thanks.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1239901" href="/Public/Bug/Display.html?id=28632#txn-1239901">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;23&nbsp;18:03:47&nbsp;2013</span>
    <span class="description">BINGOS [...] cpan.org -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.888304</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
