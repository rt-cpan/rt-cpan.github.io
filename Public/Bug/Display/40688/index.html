<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #40688 for Tk: [ptk-owner@lists.stanford.edu: tk doesn&#39;t support more than 32 fd&#39;s on 64 bit machines]</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #40688 for Tk: [ptk-owner@lists.stanford.edu: tk doesn&#39;t support more than 32 fd&#39;s on 64 bit machines]</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Tk/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Tk/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Tk/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Tk/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Tk">Tk CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">40688</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">deleted</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Tk/Active/">Tk</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
schmorp [...] schmorp.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-33610-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-33611-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;05&nbsp;10:15:27&nbsp;2008</span>
    <span class="description">schmorp [...] schmorp.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [ptk-owner@lists.stanford.edu: tk doesn&#39;t support more than 32 fd&#39;s on 64 bit machines]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 5 Nov 2008 16:13:55 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-tk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marc Lehmann &lt;schmorp [...] schmorp.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">First of all, the README in the Tk distribution lists an e-mail address
that is rejecting mails as contact address. That one should be removed or
replaced by a working address.

Original bug report is below.

----- Forwarded message from ptk-owner@lists.stanford.edu -----

Subject: tk doesn&#39;t support more than 32 fd&#39;s on 64 bit machines
From: ptk-owner@lists.stanford.edu
Date: Tue, 04 Nov 2008 20:05:44 -0800
To: schmorp@schmorp.de

You are not allowed to post to this mailing list, and your message has
been automatically rejected.  If you think that your messages are
being rejected in error, contact the mailing list owner at
ptk-owner@lists.stanford.edu.


Subject: tk doesn&#39;t support more than 32 fd&#39;s on 64 bit machines
From: Marc Lehmann &lt;schmorp@schmorp.de&gt;
Date: Wed, 5 Nov 2008 05:05:34 +0100
To: ptk@lists.stanford.edu

Among the many bugs in tk&#39;s file handling, I just found another one &#40;Tk
804.028&#41;.

On 64 bit machines &#40;where fd_mask is 64 bit&#41;, file descriptors above 31 don&#39;t
work anymore, in practise resiricting tk to 32 fds.

The reason is that tcl hardcodes the type of fd_maks to &#34;int&#34; inside
tclUnixChan.c, which is only 32 bit&#39;s, which is why fd&#39;s above 31 fail.

The correct type to store fd_masks is either fd_mask itself, or unsigned
long &#40;not int&#41;.

The same bug seems to be in tclUnixNotfy.c and other files using select.

Greetings,

-- 
                The choice of a       Deliantra, the free code+content MORPG
      -----==-     _GNU_              <span class="clickylink"><a target="new" rel="nofollow" href="http://www.deliantra.net">http://www.deliantra.net</a></span>
      ----==-- _       generation
      ---==---&#40;_&#41;__  __ ____  __      Marc Lehmann
      --==---/ / _ \/ // /\ \/ /      pcg@goof.com
      -=====/_/_//_/\_,_/ /_/\_\


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- End forwarded message -----

-- 
                The choice of a       Deliantra, the free code+content MORPG
      -----==-     _GNU_              <span class="clickylink"><a target="new" rel="nofollow" href="http://www.deliantra.net">http://www.deliantra.net</a></span>
      ----==-- _       generation
      ---==---&#40;_&#41;__  __ ____  __      Marc Lehmann
      --==---/ / _ \/ // /\ \/ /      pcg@goof.com
      -=====/_/_//_/\_,_/ /_/\_\
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;05&nbsp;16:19:38&nbsp;2008</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Can you try Tk 804.028_500 or _501? I see this log entry in the Changes
file:

 Solved problems with fileevent on 64bit architectures &#40;this also
 fixes a problem with POE&#41;

Maybe this solves your problem.

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;05&nbsp;16:19:40&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;06&nbsp;09:17:19&nbsp;2008</span>
    <span class="description">schmorp [...] schmorp.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #40688] [ptk-owner@lists.stanford.edu: tk doesn&#39;t support more than 32 fd&#39;s on 64 bit machines]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 6 Nov 2008 15:16:23 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Slaven_Rezic via RT &lt;bug-Tk [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marc Lehmann &lt;schmorp [...] schmorp.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Nov 05, 2008 at 04:19:40PM -0500, Slaven_Rezic via RT &lt;bug-Tk@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Can you try Tk 804.028_500 or _501? I see this log entry in the Changes
&gt; file:
&gt; 
&gt;  Solved problems with fileevent on 64bit architectures &#40;this also
&gt;  fixes a problem with POE&#41;
</div>
I didn&#39;t try it, because a simple grep shows the bug is still there:

    int index, bit, numFound, result = 0;
    bit = 1 &lt;&lt; &#40;fd%&#40;NBBY*sizeof&#40;fd_mask&#41;&#41;&#41;;

instead of:

    fd_mask bit;
    bit = 1UL &lt;&lt; &#40;fd%&#40;NBBY*sizeof&#40;fd_mask&#41;&#41;&#41;;

Any chance/plan that the other filevent bugs get fixed?

Greetings,

-- 
                The choice of a       Deliantra, the free code+content MORPG
      -----==-     _GNU_              <span class="clickylink"><a target="new" rel="nofollow" href="http://www.deliantra.net">http://www.deliantra.net</a></span>
      ----==-- _       generation
      ---==---&#40;_&#41;__  __ ____  __      Marc Lehmann
      --==---/ / _ \/ // /\ \/ /      pcg@goof.com
      -=====/_/_//_/\_,_/ /_/\_\
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;06&nbsp;15:35:07&nbsp;2008</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Nov 06 09:17:19 2008, schmorp@schmorp.de wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed, Nov 05, 2008 at 04:19:40PM -0500, Slaven_Rezic via RT &lt;bug-
&gt; Tk@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; Can you try Tk 804.028_500 or _501? I see this log entry in the
</div>&gt; Changes
<div class="message-stanza open">&gt; &gt; file:
&gt; &gt;
&gt; &gt;  Solved problems with fileevent on 64bit architectures &#40;this also
&gt; &gt;  fixes a problem with POE&#41;
</div>&gt; 
&gt; I didn&#39;t try it, because a simple grep shows the bug is still there:
&gt; 
&gt;     int index, bit, numFound, result = 0;
&gt;     bit = 1 &lt;&lt; &#40;fd%&#40;NBBY*sizeof&#40;fd_mask&#41;&#41;&#41;;
&gt; 
&gt; instead of:
&gt; 
&gt;     fd_mask bit;
&gt;     bit = 1UL &lt;&lt; &#40;fd%&#40;NBBY*sizeof&#40;fd_mask&#41;&#41;&#41;;
</div>
Can you send a script which exposes the problem?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Any chance/plan that the other filevent bugs get fixed?
</div>
Sure, just create tickets here.

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;06&nbsp;17:05:02&nbsp;2008</span>
    <span class="description">schmorp [...] schmorp.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #40688] [ptk-owner@lists.stanford.edu: tk doesn&#39;t support more than 32 fd&#39;s on 64 bit machines]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 6 Nov 2008 23:04:42 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Slaven_Rezic via RT &lt;bug-Tk [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marc Lehmann &lt;schmorp [...] schmorp.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, Nov 06, 2008 at 03:35:09PM -0500, Slaven_Rezic via RT &lt;bug-Tk@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt;     int index, bit, numFound, result = 0;
&gt; &gt;     bit = 1 &lt;&lt; &#40;fd%&#40;NBBY*sizeof&#40;fd_mask&#41;&#41;&#41;;
&gt; &gt; 
&gt; &gt; instead of:
&gt; &gt; 
&gt; &gt;     fd_mask bit;
&gt; &gt;     bit = 1UL &lt;&lt; &#40;fd%&#40;NBBY*sizeof&#40;fd_mask&#41;&#41;&#41;;
</div>&gt; 
&gt; Can you send a script which exposes the problem?
</div>
What for, the bugs are obvious and trivial to fix?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Any chance/plan that the other filevent bugs get fixed?
</div>&gt; 
&gt; Sure, just create tickets here.
</div>
Having tickets open for years didn&#39;t seem to have much of an effect so far
:&#41;

-- 
                The choice of a       Deliantra, the free code+content MORPG
      -----==-     _GNU_              <span class="clickylink"><a target="new" rel="nofollow" href="http://www.deliantra.net">http://www.deliantra.net</a></span>
      ----==-- _       generation
      ---==---&#40;_&#41;__  __ ____  __      Marc Lehmann
      --==---/ / _ \/ // /\ \/ /      pcg@goof.com
      -=====/_/_//_/\_,_/ /_/\_\
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;06&nbsp;18:06:43&nbsp;2008</span>
    <span class="description">slaven [...] rezic.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #40688] [ptk-owner@lists.stanford.edu: tk doesn&#39;t support more than 32 fd&#39;s on 64 bit machines]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> 07 Nov 2008 00:05:09 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Slaven Rezic &lt;slaven [...] rezic.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Marc Lehmann via RT&#34; &lt;bug-Tk@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Tk
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=40688">http://rt.cpan.org/Ticket/Display.html?id=40688</a></span> &gt;
&gt; 
&gt; On Thu, Nov 06, 2008 at 03:35:09PM -0500, Slaven_Rezic via RT &lt;bug-Tk@rt.cpan.org&gt; wrote:
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt;     int index, bit, numFound, result = 0;
&gt; &gt; &gt;     bit = 1 &lt;&lt; &#40;fd%&#40;NBBY*sizeof&#40;fd_mask&#41;&#41;&#41;;
&gt; &gt; &gt; 
&gt; &gt; &gt; instead of:
&gt; &gt; &gt; 
&gt; &gt; &gt;     fd_mask bit;
&gt; &gt; &gt;     bit = 1UL &lt;&lt; &#40;fd%&#40;NBBY*sizeof&#40;fd_mask&#41;&#41;&#41;;
</div>&gt; &gt; 
&gt; &gt; Can you send a script which exposes the problem?
</div>&gt; 
&gt; What for, the bugs are obvious and trivial to fix?
</div>
Well, I am not as smart as you. It&#39;s nicer for me to have something
concrete.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; Any chance/plan that the other filevent bugs get fixed?
</div>&gt; &gt; 
&gt; &gt; Sure, just create tickets here.
</div>&gt; 
&gt; Having tickets open for years didn&#39;t seem to have much of an effect so far
&gt; :&#41;
&gt; 
</div>
There are about 50 unresolved tickets, but over 80 resolved ones. So
there is hope.

Regards,
    Slaven

-- 
Slaven Rezic - slaven &lt;at&gt; rezic &lt;dot&gt; de

    tktimex - time recording tool
    <span class="clickylink"><a target="new" rel="nofollow" href="http://sourceforge.net/projects/ptktools/">http://sourceforge.net/projects/ptktools/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;15&nbsp;12:40:52&nbsp;2008</span>
    <span class="description">schmorp [...] schmorp.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #40688] [ptk-owner@lists.stanford.edu: tk doesn&#39;t support more than 32 fd&#39;s on 64 bit machines]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 15 Nov 2008 18:40:37 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;slaven [...] rezic.de via RT&#34; &lt;bug-Tk [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marc Lehmann &lt;schmorp [...] schmorp.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, Nov 06, 2008 at 06:06:45PM -0500, &#34;slaven@rezic.de via RT&#34; &lt;bug-Tk@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; Can you send a script which exposes the problem?
</div>&gt; &gt; 
&gt; &gt; What for, the bugs are obvious and trivial to fix?
</div>&gt; 
&gt; Well, I am not as smart as you.
</div>
there is no smartness required, just the fact that using the same types for
the select functions everywhere is obviously correct, while mixing types is
obviously not correct for some cases.

in this case, it is also obvious that a 32 bit type &#40;int&#41; is not going to
be enough to store 64 fd bits &#40;fd_mask&#41; in. no smartness required either.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It&#39;s nicer for me to have something concrete.
</div>
It can&#39;t get much more concrete - if you don&#39;t understand the code and how
to fix it, just ask. It is out of the questino for me to sit down for days
to find a way to reproduce all possible situaitons &#40;select is used many
many times in Tk, and all occurances have the same bug&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; Sure, just create tickets here.
</div>&gt; &gt; 
&gt; &gt; Having tickets open for years didn&#39;t seem to have much of an effect so far
&gt; &gt; :&#41;
&gt; &gt; 
</div>&gt; 
&gt; There are about 50 unresolved tickets, but over 80 resolved ones. So
&gt; there is hope.
</div>
Given that the bugs have already been resolved twice &#40;in tickets&#41; but not
in code, I am a bit less hopeful :&#41;

-- 
                The choice of a       Deliantra, the free code+content MORPG
      -----==-     _GNU_              <span class="clickylink"><a target="new" rel="nofollow" href="http://www.deliantra.net">http://www.deliantra.net</a></span>
      ----==-- _       generation
      ---==---&#40;_&#41;__  __ ____  __      Marc Lehmann
      --==---/ / _ \/ // /\ \/ /      pcg@goof.com
      -=====/_/_//_/\_,_/ /_/\_\
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;15&nbsp;14:04:06&nbsp;2008</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Believed to be fixed in SVN, but no testcase available to prove it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;15&nbsp;14:04:09&nbsp;2008</span>
    <span class="description">SREZIC [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;15&nbsp;15:07:40&nbsp;2008</span>
    <span class="description">nospam-abuse [...] ilyaz.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> undisclosed-recipients: ;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #40688] [ptk-owner@lists.stanford.edu: tk doesn&#39;t support more than 32 fd&#39;s on 64 bit machines]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 15 Nov 2008 12:07:24 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Marc Lehmann via RT &lt;bug-Tk [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ilya Zakharevich &lt;nospam-abuse [...] ilyaz.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, Nov 15, 2008 at 12:40:55PM -0500, Marc Lehmann via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Tk
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=40688">http://rt.cpan.org/Ticket/Display.html?id=40688</a></span> &gt;
&gt; 
&gt; On Thu, Nov 06, 2008 at 06:06:45PM -0500, &#34;slaven@rezic.de via RT&#34; &lt;bug-Tk@rt.cpan.org&gt; wrote:
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; Can you send a script which exposes the problem?
</div>&gt; &gt; &gt; 
&gt; &gt; &gt; What for, the bugs are obvious and trivial to fix?
</div>&gt; &gt; 
&gt; &gt; Well, I am not as smart as you.
</div>&gt; 
&gt; there is no smartness required, just the fact that using the same types for
&gt; the select functions everywhere is obviously correct, while mixing types is
&gt; obviously not correct for some cases.
</div>
Dear Mark, please be assured that you are very wrong, and Slaven is
quite right in his being cautious.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; in this case, it is also obvious that a 32 bit type &#40;int&#41; is not going to
&gt; be enough to store 64 fd bits &#40;fd_mask&#41; in. no smartness required either.
</div>
There is nothing &#34;obvious&#34; when you want your code to work on
THOUSANDS of architectures, as Tk must.  Just as an example: fd_mask
on my system is 256 bits wide...  And there may be assumption in the
current &#40;very broken&#41; code that it works with an INTEGER type...

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; It&#39;s nicer for me to have something concrete.
</div>&gt; 
&gt; It can&#39;t get much more concrete - if you don&#39;t understand the code and how
&gt; to fix it, just ask.
</div>
In my book, this is what Slaven did.  In my book, what you write is
becoming more and more rude...

ALL what is needed is an example of code which fails before your
change, and succeeds &#40;on your system&#41; after the change...

Hope this helps,
Ilya
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;15&nbsp;15:07:42&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;15&nbsp;15:49:29&nbsp;2008</span>
    <span class="description">schmorp [...] schmorp.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #40688] [ptk-owner@lists.stanford.edu: tk doesn&#39;t support more than 32 fd&#39;s on 64 bit machines]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 15 Nov 2008 21:49:00 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Ilya Zakharevich via RT &lt;bug-Tk [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marc Lehmann &lt;schmorp [...] schmorp.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, Nov 15, 2008 at 03:07:42PM -0500, Ilya Zakharevich via RT &lt;bug-Tk@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; there is no smartness required, just the fact that using the same types for
&gt; &gt; the select functions everywhere is obviously correct, while mixing types is
&gt; &gt; obviously not correct for some cases.
</div>&gt; 
&gt; Dear Mark, please be assured that you are very wrong, and Slaven is
&gt; quite right in his being cautious.
</div>
Marc, not Mark, and no, you are wrong.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; in this case, it is also obvious that a 32 bit type &#40;int&#41; is not going to
&gt; &gt; be enough to store 64 fd bits &#40;fd_mask&#41; in. no smartness required either.
</div>&gt; 
&gt; There is nothing &#34;obvious&#34; when you want your code to work on
&gt; THOUSANDS of architectures, as Tk must.  Just as an example: fd_mask
&gt; on my system is 256 bits wide...  And there may be assumption in the
&gt; current &#40;very broken&#41; code that it works with an INTEGER type...
</div>
The code in question is broken on your example system before and after
fixing the bug.

Fixing the bug can only improve the situation for some systems, it cannot
make it worse on existing ones.

And that *is* obvious from the bug description.

BTW, if &#34;your code&#34; refers to Tk, then sorry to say so, but it hardly
works on any system nowadays.

Yes, you still might want it to work on THOUSANDS of architectures, but
currently, Tk utterly fails. It is hard to come by with a system where Tk
actually does work - I don&#39;t know of any.

As such, if you take Tk as an example of a well-maintained portable
program, you utterly fail - Tk is on of the most broken and unportable
packages on CPAN, so any argument of the style you just used is utterly
hilarious.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; It&#39;s nicer for me to have something concrete.
</div>&gt; &gt; 
&gt; &gt; It can&#39;t get much more concrete - if you don&#39;t understand the code and how
&gt; &gt; to fix it, just ask.
</div>&gt; 
&gt; In my book, this is what Slaven did.  In my book, what you write is
&gt; becoming more and more rude...
</div>
That&#39;s hilarious too - there was nothing rude about my mails.

I slowly do understand why Tk is so immensely broken: bugs do not get
fixed even if explained, if they get fixed, they get reintroduced a short
while later, nobody really cares, and bug reporters who invest a lot of
*theuir* time to track down and document the bugs get harassed with stupid
arguments and being called rude.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ALL what is needed is an example of code which fails before your
</div>
Nothing like that is needed, that&#39;s just harassment from your side. If
you don&#39;t understand the bug &#40;which is very likely given your bogus 256
bit example&#41;, then just ask, and I *will* epxlain anything you don&#39;t
understand.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hope this helps,
</div>
Yeah, I see clear now. Feel free to close the bug report and ignore it
like in the past. I give a shit about the horrible piece of bugs that is
Tk and it&#39;s rude maintainer, I just *tried* to help, but will not do so
anymore.

Making up stupid requirements for bugfixes like the above and keeping
Tk as broken as it is is a pure example of great maintainance style -
not. Calling people who try hard to help rude just because they can&#39;t
follow your pointless rules is not only extreemly unfriendly, but also
completely uncalled for.

-- 
                The choice of a       Deliantra, the free code+content MORPG
      -----==-     _GNU_              <span class="clickylink"><a target="new" rel="nofollow" href="http://www.deliantra.net">http://www.deliantra.net</a></span>
      ----==-- _       generation
      ---==---&#40;_&#41;__  __ ____  __      Marc Lehmann
      --==---/ / _ \/ // /\ \/ /      pcg@goof.com
      -=====/_/_//_/\_,_/ /_/\_\
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;15&nbsp;16:16:41&nbsp;2008</span>
    <span class="description">schmorp [...] schmorp.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #40688] [ptk-owner@lists.stanford.edu: tk doesn&#39;t support more than 32 fd&#39;s on 64 bit machines]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 15 Nov 2008 22:15:44 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Ilya Zakharevich via RT &lt;bug-Tk [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marc Lehmann &lt;schmorp [...] schmorp.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, Nov 15, 2008 at 03:07:42PM -0500, Ilya Zakharevich via RT &lt;bug-Tk@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; THOUSANDS of architectures, as Tk must.  Just as an example: fd_mask
&gt; on my system is 256 bits wide...  And there may be assumption in the
&gt; current &#40;very broken&#41; code that it works with an INTEGER type...
</div>
OH, I forgot: I am rather curious on which system that is - are you sure it
exists in reality?

&#40;And sorry for beating home the point: yes, the current code is very
broken, and the fix I am talking about doesn&#39;t fix it completely, but at
least Tk will suddenly start to work on hardware newer than, say, 2004,
and it will not break anything as the code already uses fd_mask - are you
sure you even know the Tk sourcecode?&#41;.

-- 
                The choice of a       Deliantra, the free code+content MORPG
      -----==-     _GNU_              <span class="clickylink"><a target="new" rel="nofollow" href="http://www.deliantra.net">http://www.deliantra.net</a></span>
      ----==-- _       generation
      ---==---&#40;_&#41;__  __ ____  __      Marc Lehmann
      --==---/ / _ \/ // /\ \/ /      pcg@goof.com
      -=====/_/_//_/\_,_/ /_/\_\
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;15&nbsp;17:48:17&nbsp;2008</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Marc, please continue non-technical discussion outside the RT queue.
Thank you.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;15&nbsp;17:48:19&nbsp;2008</span>
    <span class="description">SREZIC [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;15&nbsp;22:53:24&nbsp;2008</span>
    <span class="description">schmorp [...] schmorp.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #40688] [ptk-owner@lists.stanford.edu: tk doesn&#39;t support more than 32 fd&#39;s on 64 bit machines]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 16 Nov 2008 04:53:04 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Slaven_Rezic via RT &lt;bug-Tk [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marc Lehmann &lt;schmorp [...] schmorp.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, Nov 15, 2008 at 05:48:19PM -0500, Slaven_Rezic via RT &lt;bug-Tk@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=40688">http://rt.cpan.org/Ticket/Display.html?id=40688</a></span> &gt;
&gt; 
&gt; Marc, please continue non-technical discussion outside the RT queue.
</div>
Sorry? I didn&#39;t start nor continue any non-technical discussion.

-- 
                The choice of a       Deliantra, the free code+content MORPG
      -----==-     _GNU_              <span class="clickylink"><a target="new" rel="nofollow" href="http://www.deliantra.net">http://www.deliantra.net</a></span>
      ----==-- _       generation
      ---==---&#40;_&#41;__  __ ____  __      Marc Lehmann
      --==---/ / _ \/ // /\ \/ /      pcg@goof.com
      -=====/_/_//_/\_,_/ /_/\_\
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;15&nbsp;22:53:27&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;16&nbsp;01:24:22&nbsp;2008</span>
    <span class="description">nospam-abuse [...] ilyaz.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> undisclosed-recipients: ;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #40688] [ptk-owner@lists.stanford.edu: tk doesn&#39;t support more than 32 fd&#39;s on 64 bit machines]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 15 Nov 2008 22:24:03 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Marc Lehmann via RT &lt;bug-Tk [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ilya Zakharevich &lt;nospam-abuse [...] ilyaz.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, Nov 15, 2008 at 03:49:32PM -0500, Marc Lehmann via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Dear Mark
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Marc, not Mark
</div>
My apologies; unfortunately, I&#39;m not very visually oriented, and make
such errors often.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; There is nothing &#34;obvious&#34; when you want your code to work on
&gt; &gt; THOUSANDS of architectures, as Tk must.  Just as an example: fd_mask
&gt; &gt; on my system is 256 bits wide...  And there may be assumption in the
&gt; &gt; current &#40;very broken&#41; code that it works with an INTEGER type...
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The code in question is broken on your example system before and after
&gt; fixing the bug.
</div>
Then it looks like you are starting to get the point: your patch did
not fix the bug.  Your contributing a test case - the behaviour of
which you checked changes with your patch - can be a significant step
to fixing the bug.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Fixing the bug can only improve the situation for some systems, it cannot
&gt; make it worse on existing ones.
</div>
Given this discussion, I do not think I would trust you if all you
have is your word in this matter...  Proving a code correct is a MAJOR
undertaking; and I do not expect one can write a provably correct code
in C anyway - the specs are too fuzzy...

Which boils down to a need to vet the code by people with major
experiences in porting, AND having testcases - as many as possible.

Hope this helps,
Ilya
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;17&nbsp;18:39:04&nbsp;2008</span>
    <span class="description">SREZIC [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;23&nbsp;03:06:49&nbsp;2008</span>
    <span class="description">schmorp [...] schmorp.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #40688] [ptk-owner@lists.stanford.edu: tk doesn&#39;t support more than 32 fd&#39;s on 64 bit machines]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 23 Nov 2008 09:05:53 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Ilya Zakharevich via RT &lt;bug-Tk [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marc Lehmann &lt;schmorp [...] schmorp.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun, Nov 16, 2008 at 01:24:27AM -0500, Ilya Zakharevich via RT &lt;bug-Tk@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat, Nov 15, 2008 at 03:49:32PM -0500, Marc Lehmann via RT wrote:
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; Dear Mark
</div></div>&gt; 
<div class="message-stanza open">&gt; &gt; Marc, not Mark
</div>&gt; 
&gt; My apologies; unfortunately, I&#39;m not very visually oriented, and make
&gt; such errors often.
&gt; 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; There is nothing &#34;obvious&#34; when you want your code to work on
&gt; &gt; &gt; THOUSANDS of architectures, as Tk must.  Just as an example: fd_mask
&gt; &gt; &gt; on my system is 256 bits wide...  And there may be assumption in the
&gt; &gt; &gt; current &#40;very broken&#41; code that it works with an INTEGER type...
</div></div>&gt; 
<div class="message-stanza open">&gt; &gt; The code in question is broken on your example system before and after
&gt; &gt; fixing the bug.
</div>&gt; 
&gt; Then it looks like you are starting to get the point: your patch did
&gt; not fix the bug.
</div>
Sorry - I verified that it fixes the bug as described by me.

Besides, tcl applied the very same fix almost three years ago, the same
way &#40;as I found out&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Your contributing a test case - the behaviour of which you checked
&gt; changes with your patch - can be a significant step to fixing the bug.
</div>
The change I recommended is already verified and would be a much mor
significant step... for some reason, you are playing ass and refuse to fix
it.

But that&#39;s your issue, I don&#39;t care, I just tried to help by sendign a
bugreport, epxlaining the fix, and offered to explain the bug and the fix.

And was called rude in response.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Fixing the bug can only improve the situation for some systems, it cannot
&gt; &gt; make it worse on existing ones.
</div>&gt; 
&gt; Given this discussion, I do not think I would trust you if all you
&gt; have is your word in this matter...
&gt; undertaking; and I do not expect one can write a provably correct code
&gt; in C anyway - the specs are too fuzzy...
</div>
Just FY: the word improve has nothing to do with prove.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Which boils down to a need to vet the code by people with major
&gt; experiences in porting, AND having testcases - as many as possible.
</div>
The irony is that I am &#34;people with major experiences&#34; - I wrote a
portable select library that is in wide use in a lot of projects for that
reason, and doesn&#39;t suffer from the bug I described &#40;it corretcly rolls
it&#39;s own fd_set on platforms where possible, and can falls back to the
system one when not&#41;.

Unlike perl-Tk, it actually works on such fringe platforms such as GNU/Linux
or FreeBSD :&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hope this helps,
</div>
It doesn&#39;t really help me, and cetrainly not users of perl-tk.

I only offered my help, and you declined rather rudely. If you fix it on your
own fine, if not, not my problem.

You see, Tk is so obviously broken that I really fail to understand your
reluctance to even improve it in obvious ways. For example, your argument
about fd_mask not being integral is bullshit, as tk already uses fd_mask
as integral type &#40;and sometimes rolls its own fd_mask&#41; in the code that
needs to be patched &#40;and you still haven&#39;t explained which platform this
should be&#41;.

Also, your claim that the patch wouldn&#39;t fix the issue is another bullshit
claim, as I verified that it actually fixes the problem described by me.

As such, you are the most stupid maintainer I have ever seen - refusing
help and insulting the messenger. And that despite me not even having a
personal interest, I just had the best interest of perl-tk in mind.

I still hope *somebody* will make tk work on, say, GNU/Linux again, after
it has been broken for almost a decade.

-- 
                The choice of a       Deliantra, the free code+content MORPG
      -----==-     _GNU_              <span class="clickylink"><a target="new" rel="nofollow" href="http://www.deliantra.net">http://www.deliantra.net</a></span>
      ----==-- _       generation
      ---==---&#40;_&#41;__  __ ____  __      Marc Lehmann
      --==---/ / _ \/ // /\ \/ /      pcg@goof.com
      -=====/_/_//_/\_,_/ /_/\_\
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;23&nbsp;03:06:50&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;23&nbsp;03:55:31&nbsp;2008</span>
    <span class="description">SREZIC [...] cpan.org -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;23&nbsp;16:05:21&nbsp;2008</span>
    <span class="description">nospam-abuse [...] ilyaz.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> undisclosed-recipients: ;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #40688] [ptk-owner@lists.stanford.edu: tk doesn&#39;t support more than 32 fd&#39;s on 64 bit machines]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 23 Nov 2008 13:04:53 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Marc Lehmann via RT &lt;bug-Tk [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ilya Zakharevich &lt;nospam-abuse [...] ilyaz.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun, Nov 23, 2008 at 03:06:51AM -0500, Marc Lehmann via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; The code in question is broken on your example system before and after
&gt; &gt; &gt; fixing the bug.
</div>&gt; &gt; 
&gt; &gt; Then it looks like you are starting to get the point: your patch did
&gt; &gt; not fix the bug.
</div>&gt; 
&gt; Sorry - I verified that it fixes the bug as described by me.
</div>
This contradicts what you wrote before.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Your contributing a test case - the behaviour of which you checked
&gt; &gt; changes with your patch - can be a significant step to fixing the bug.
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The change I recommended is already verified
</div>
Are we repeating it again?  Nobody can verify anything without test
cases.  And, as you saw, your perspective on porting being as it is
&#40;and your statements being contradictory?&#41; gives very little wait to
&#34;verfication by you only&#34;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Just FY: the word improve has nothing to do with prove.
</div>
Correct.  &#40;A typo, sorry...&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The irony is that I am &#34;people with major experiences&#34;
</div>
... who claims that fd_mask is the same as long?  Did not help your
credibility...

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; reason, and doesn&#39;t suffer from the bug I described &#40;it corretcly rolls
&gt; it&#39;s own fd_set on platforms where possible, and can falls back to the
&gt; system one when not&#41;.
</div>
If you can verify that your patch works on systems with wide fd_mask
&#40;and show us why&#41;, this would also be helpful.  However, at least 10
years ago, when *I* scanned the code, the code was supposing that mask
fits in an integer; maybe things changed.  Maybe the fact that Perl
now requires STD C also helps...

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You see, Tk is so obviously broken that I really fail to understand your
&gt; reluctance to even improve it in obvious ways.
</div>
Let me repeat that nothing is &#34;obvious&#34; when porting.  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; For example, your argument
&gt; about fd_mask not being integral is bullshit, as tk already uses fd_mask
&gt; as integral type &#40;and sometimes rolls its own fd_mask&#41; in the code that
&gt; needs to be patched.
</div>
No, IIRC it does not: the code would not work with high descriptors,
but it at least compiles, and works with low descriptors.

Hope this helps,
Ilya
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;23&nbsp;16:05:24&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;deleted&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;23&nbsp;16:28:34&nbsp;2008</span>
    <span class="description">SREZIC [...] cpan.org -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
