<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #38131 for Math-GSL: Math-GSL-0.07 won&#39;t build on Win32</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #38131 for Math-GSL: Math-GSL-0.07 won&#39;t build on Win32</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Math-GSL/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Math-GSL/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Math-GSL/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Math-GSL/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Math-GSL">Math-GSL CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">38131</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Math-GSL/Active/">Math-GSL</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">jonathan [...] leto.net
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
sisyphus [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-20724-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.07    </td>
  </tr>
  <tr id="CF-20725-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;02&nbsp;21:09:38&nbsp;2008</span>
    <span class="description">sisyphus [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Math-GSL-0.07 won&#39;t build on Win32</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have Win32 &#40;Vista&#41;, perl-5.10.0, using MinGW &#40;port of gcc&#41; compiler 
and gsl-1.11.
We come to a stage very early on in the Build process where the 
following command gets run:

gcc -o blib\arch\BLAS.so BLAS_wrap.o -shared -I./lib -I../lib -
LC:/_32/msys/local/lib -lgsl -lgslcblas -lm -gsl

First thing to note is that the output file we&#39;re attempting to build 
there is &#39;BLAS.so&#39;, but for Win32 that file should be named &#39;BLAS.dll&#39;. 
For portability, we need to be building &#34;BLAS.$Config{dlext}&#34;.

But that&#39;s not what stops the command from succeeding. On Windows 
&#40;unlike linux&#41; all symbols need to be resolved at build time - and 
there&#39;s nothing in that command that&#39;s going to resolve the perl 
symbols. Consequently I get a string of &#34;undefined reference&#34; errors 
beginning with:

BLAS_wrap.o:BLAS_wrap.c:&#40;.text+0xb42&#41;: undefined reference to 
`Perl_get_context&#39;
BLAS_wrap.o:BLAS_wrap.c:&#40;.text+0xb53&#41;: undefined reference to 
`Perl_mg_get&#39;
BLAS_wrap.o:BLAS_wrap.c:&#40;.text+0xb58&#41;: undefined reference to 
`Perl_get_context&#39;
BLAS_wrap.o:BLAS_wrap.c:&#40;.text+0xb67&#41;: undefined reference to 
`Perl_sv_isobject&#39;
.
.

And the build process terminates. I don&#39;t know whether this is a bug in 
the Math::GSL Build.PL file, or a bug in Module::Build itself. &#40;I&#39;m not 
very familiar with Module::Build.&#41;

Do you happen to have a Makefile.PL that will enable the build to work 
using ExtUtils::MakeMaker ? I&#39;m not very strong on MakeMaker either, 
but it was a fairly simple task to write a Makefile.PL that enabled 
the &#39;make&#39; process to compile all of the C source files without any 
troubles. &#40;I gather from the various &#34;multiple definition&#34; warnings I 
ultimately got that one is not supposed to build each and every one of 
those C files.&#41; Of course, there&#39;s more to building the module than 
simply being able to compile the C files. I&#39;ve had some experience with 
creating Makefile.PL&#39;s where an XS source file is involved, but no 
experience in writing Makefile.PL&#39;s that have to deal with multiple C 
source files.

Cheers,
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;03&nbsp;05:13:33&nbsp;2008</span>
    <span class="description">sisyphus [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Aug 02 21:09:38 2008, SISYPHUS wrote:
.
.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; We come to a stage very early on in the Build process where the 
&gt; following command gets run:
&gt; 
&gt; gcc -o blib\arch\BLAS.so BLAS_wrap.o -shared -I./lib -I../lib -
&gt; LC:/_32/msys/local/lib -lgsl -lgslcblas -lm -gsl
&gt; 
</div>
The following patch to Build.PL portably fixes that command &#40;and hence 
removes the ensuing errors that it caused&#41;:

-------------------------------------
--- Build.PL_orig       Sun Aug  3 18:20:42 2008
+++ Build.PL    Sun Aug  3 18:03:27 2008
@@ -131,13 +131,14 @@
   my &#40;$self, $to, $file_base, $obj_file&#41; = @_;
   my &#40;$cf, $p&#41; = &#40;$self-&gt;{config}, $self-&gt;{properties}&#41;; # For 
convenience
 
-  my $lib_file = catfile&#40;$to, File::Basename::basename
&#40;&#34;$file_base.so&#34;&#41;&#41;;
+  my $lib_file = catfile&#40;$to, File::Basename::basename
&#40;&#34;$file_base.$Config{dlext}&#34;&#41;&#41;;
 
   $self-&gt;add_to_cleanup&#40;$lib_file&#41;;
   my $objects = $p-&gt;{objects} || [];
   
   unless &#40;$self-&gt;up_to_date&#40;[$obj_file, @$objects], $lib_file&#41;&#41; {
     my @linker_flags = $self-&gt;split_like_shell&#40;$p-&gt;
{extra_linker_flags}&#41;;
+    push @linker_flags, $Config{archlib} . &#39;/CORE/&#39; . $Config{libperl} 
if $^O =~ /MSWin32/i;
     my @lddlflags = $self-&gt;split_like_shell&#40;$cf-&gt;{lddlflags}&#41;; 
     my @shrp = $self-&gt;split_like_shell&#40;$cf-&gt;{shrpenv}&#41;;
     my @ld = $self-&gt;split_like_shell&#40;$cf-&gt;{ld}&#41; || &#34;gcc&#34;;

-------------------------------------

However, in building blib\arch\Block.dll file from &#39;Block_wrap.o&#39;, the 
following errors are produced:

-------------------------------------
Block_wrap.o:Block_wrap.c:&#40;.text+0xd0e7&#41;: undefined reference to 
`gsl_block_complex_long_double_fscanf&#39;
Block_wrap.o:Block_wrap.c:&#40;.text+0xd45e&#41;: undefined reference to 
`gsl_block_complex_long_double_fprintf&#39;
Block_wrap.o:Block_wrap.c:&#40;.text+0xe071&#41;: undefined reference to 
`gsl_block_complex_long_double_raw_fscanf&#39;
Block_wrap.o:Block_wrap.c:&#40;.text+0xe529&#41;: undefined reference to 
`gsl_block_complex_long_double_raw_fprintf&#39;
Block_wrap.o:Block_wrap.c:&#40;.text+0x1cd0d&#41;: undefined reference to 
`gsl_block_long_double_fscanf&#39;
Block_wrap.o:Block_wrap.c:&#40;.text+0x1d084&#41;: undefined reference to 
`gsl_block_long_double_fprintf&#39;
Block_wrap.o:Block_wrap.c:&#40;.text+0x1dc97&#41;: undefined reference to 
`gsl_block_long_double_raw_fscanf&#39;
Block_wrap.o:Block_wrap.c:&#40;.text+0x1e14f&#41;: undefined reference to 
`gsl_block_long_double_raw_fprintf&#39;
------------------------------------- 

Those symbols are certainly present in the header files, but not in the 
library files. At first glance, this would appear to be a bug in the 
gsl-1.11 build. I&#39;ll investigate as time permits.

Cheers,
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;03&nbsp;05:13:35&nbsp;2008</span>
    <span class="description">sisyphus [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;08&nbsp;07:29:36&nbsp;2008</span>
    <span class="description">sisyphus [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; At first glance, this would appear to be a bug in the 
&gt; gsl-1.11 build. I&#39;ll investigate as time permits.
</div>
No, it doesn&#39;t seem to be a bug in the gsl-1.11 build. I think it&#39;s 
simply a case of those functions being unworkable on Win32. The 
following patch to Block_wrap.c portably addresses this problem by 
having those functions simply croak when called on Win32:

---------------------------------------
--- Block_wrap.c_orig   Thu Aug  7 00:32:16 2008
+++ Block_wrap.c        Thu Aug  7 21:12:34 2008
@@ -4263,7 +4263,7 @@
   }
 }
 
-
+#ifndef WIN32
 XS&#40;_wrap_gsl_block_complex_long_double_fscanf&#41; {
   {
     FILE *arg1 = &#40;FILE *&#41; 0 ;
@@ -4349,7 +4349,10 @@
     SWIG_croak_null&#40;&#41;;
   }
 }
-
+#else
+XS&#40;_wrap_gsl_block_complex_long_double_fscanf&#41; {croak
&#40;&#34;gsl_block_complex_long_double_fscanf not implemented on Win32&#34;&#41;;}
+XS&#40;_wrap_gsl_block_complex_long_double_fprintf&#41; {croak
&#40;&#34;gsl_block_complex_long_double_fprintf not implemented on Win32&#34;&#41;;}
+#endif
 
 XS&#40;_wrap_gsl_block_complex_long_double_raw_fread&#41; {
   {
@@ -4466,7 +4469,7 @@
   }
 }
 
-
+#ifndef WIN32
 XS&#40;_wrap_gsl_block_complex_long_double_raw_fscanf&#41; {
   {
     FILE *arg1 = &#40;FILE *&#41; 0 ;
@@ -4592,7 +4595,10 @@
     SWIG_croak_null&#40;&#41;;
   }
 }
-
+#else
+XS&#40;_wrap_gsl_block_complex_long_double_raw_fscanf&#41; {croak
&#40;&#34;gsl_block_complex_long_double_raw_fscanf not implemented on Win32&#34;&#41;;}
+XS&#40;_wrap_gsl_block_complex_long_double_raw_fprintf&#41; {croak
&#40;&#34;gsl_block_complex_long_double_raw_fprintf not implemented on Win32&#34;&#41;;}
+#endif
 
 XS&#40;_wrap_gsl_block_complex_long_double_size&#41; {
   {
@@ -7863,7 +7869,7 @@
   }
 }
 
-
+#ifndef WIN32
 XS&#40;_wrap_gsl_block_long_double_fscanf&#41; {
   {
     FILE *arg1 = &#40;FILE *&#41; 0 ;
@@ -7949,7 +7955,10 @@
     SWIG_croak_null&#40;&#41;;
   }
 }
-
+#else
+XS&#40;_wrap_gsl_block_long_double_fscanf&#41; {croak
&#40;&#34;gsl_block_long_double_fscanf not implemented on Win32&#34;&#41;;}
+XS&#40;_wrap_gsl_block_long_double_fprintf&#41; {croak
&#40;&#34;gsl_block_long_double_fprintf not implemented on Win32&#34;&#41;;}
+#endif
 
 XS&#40;_wrap_gsl_block_long_double_raw_fread&#41; {
   {
@@ -8066,7 +8075,7 @@
   }
 }
 
-
+#ifndef WIN32
 XS&#40;_wrap_gsl_block_long_double_raw_fscanf&#41; {
   {
     FILE *arg1 = &#40;FILE *&#41; 0 ;
@@ -8192,7 +8201,10 @@
     SWIG_croak_null&#40;&#41;;
   }
 }
-
+#else
+XS&#40;_wrap_gsl_block_long_double_raw_fscanf&#41; {croak
&#40;&#34;gsl_block_long_double_raw_fscanf not implemented on Win32&#34;&#41;;}
+XS&#40;_wrap_gsl_block_long_double_raw_fprintf&#41; {croak
&#40;&#34;gsl_block_long_double_raw_fprintf not implemented on Win32&#34;&#41;;}
+#endif
 
 XS&#40;_wrap_gsl_block_long_double_size&#41; {
   {

---------------------------------------

Next up, we strike a problem in Poly_wrap.c with the way that 
Perl_sv_dump&#40;&#41; is called on Win32. The portable solution to that 
problem is to apply the following patch:

---------------------------------------
--- Poly_wrap.c_orig    Thu Aug  7 00:31:26 2008
+++ Poly_wrap.c Wed Aug  6 20:51:28 2008
@@ -2544,10 +2544,10 @@
         if&#40; *helem == NULL&#41;
         croak&#40;&#34;Structure does not contain &#39;dat&#39; element\n&#34;&#41;;
         printf&#40;&#34;helem is:\n&#34;&#41;;
-        Perl_sv_dump&#40;*helem&#41;;
+        sv_dump&#40;*helem&#41;;
         if&#40; i == 0&#41;{
           svtmp = &#40;SV*&#41;SvRV&#40;*helem&#41;;
-          Perl_sv_dump&#40;svtmp&#41;;
+          sv_dump&#40;svtmp&#41;;
         }
         printf&#40;&#34;re z = %f\n&#34;, GSL_REAL&#40;z&#41; &#41;;
         printf&#40;&#34;im z = %f\n&#34;, GSL_IMAG&#40;z&#41; &#41;;

---------------------------------------

With those changes in place, the build proceeds successfully. 

On Win32, &#39;nan&#39; and &#39;inf&#39; are represented as &#39;1.#NAN&#39; and &#39;1.#INF&#39; 
respectively. This accounts for the failure of the CDF.t tests. The 
following patch to lib/Math/GSL.pm addresses this bug:

---------------------------------------
--- GSL.pm_orig Thu Aug  7 00:32:40 2008
+++ GSL.pm      Thu Aug  7 00:17:32 2008
@@ -294,6 +294,8 @@
         }
         my $res = abs&#40;$x - $expected&#41;;
         if &#40;$x =~ /nan|inf/i &#41;{
+            $^O =~ /MSWin32/i ? 
+            ok&#40;&#40;&#40;$expected =~ /nan/i &#38;&#38; $x =~ /nan/i&#41; || &#40;$expected 
=~ /inf/i &#38;&#38; $x =~ /inf/i&#41; &#38;&#38; &#40;$expected =~/\-/ == $x =~ /\-
/ &#41;&#41;, &#34;&#39;$expected&#39; ?=&#39;$x&#39;&#34;&#41; :
             ok&#40; $expected eq $x, &#34;&#39;$expected&#39; ?=&#39;$x&#39;&#34; &#41;;
         } else {
             ok&#40; $res &lt;= $eps, &#34;$code ?= $x,\nres= +-$res, 
eps=$eps&#34; &#41;;    

---------------------------------------

One of the PowInt.t tests also fails because of &#39;inf&#39; and &#39;nan&#39; 
handling - but I haven&#39;t yet worked out what needs to be done about 
that.

The Histogram.t test suite fails with a segfault because of &#34;ERROR: 
histogram bin extremes  must be in increasing order&#34; and Histogram2D.t 
fails in a similar way with a similar error.

RNG.t segfaults with &#34;ERROR: fread failed&#34; and SF.t segfaults 
with &#34;ERROR: domain error&#34;.

So there&#39;s still a bit to keep prodding at.

Other than that, all tests pass.

Cheers,
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;09&nbsp;02:37:29&nbsp;2008</span>
    <span class="description">sisyphus [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; One of the PowInt.t tests also fails because of &#39;inf&#39; and &#39;nan&#39; 
&gt; handling - but I haven&#39;t yet worked out what needs to be done about 
&gt; that.
</div>
Here&#39;s a patch to PowInt.t that addresses that bug:

------------------------------------
--- PowInt.t_orig       Sat Aug  9 11:44:48 2008
+++ PowInt.t    Sat Aug  9 15:54:13 2008
@@ -6,6 +6,8 @@
 use warnings;
 use Test::Exception;
 
+my $inf = $^O =~ /MSWin32/i ? 99 ** 99 ** 99 : &#39;inf&#39;;
+my $nan = $^O =~ /MSWin32/i ? unpack &#39;d&#39;, scalar reverse 
pack &#39;H*&#39;, &#39;7FF8000000000000&#39; : &#39;nan&#39;;
 
 {
     ok&#40; gsl_pow_4&#40;2&#41; == gsl_pow_2&#40;4&#41; , q{%EXPORT_TAGS works} &#41;;
@@ -30,12 +32,12 @@
                 &#39;gsl_pow_7&#40;8&#41;&#39;      ,
                 &#39;gsl_pow_8&#40;-4&#41;&#39;     ,
                 &#39;gsl_pow_9&#40;4&#41;&#39;      ,
-                q{gsl_pow_2&#40;&#39;nan&#39;&#41;} ,
-                q{gsl_pow_2&#40;&#39;inf&#39;&#41;} ,
+                q{gsl_pow_2&#40;$nan&#41;} ,
+                q{gsl_pow_2&#40;$inf&#41;} ,
                 &#39;gsl_pow_int&#40;5,10&#41;&#39; ,
             &#41; ], [
                     &#40;3.14&#41; ** 2, 3 ** 2, 0 ** 2, &#40;-1&#41; ** 2, 4 ** 3, 5 
** 4, 6 ** 5, 7 ** 6,
-                        8 ** 7, &#40;-4&#41; ** 8, 4 ** 9, q{nan}, q{inf}, 5 
** 10,
+                        8 ** 7, &#40;-4&#41; ** 8, 4 ** 9, $nan, $inf, 5 ** 10,
                 ],
     &#34;basic power tests&#34;,
     &#41;;
------------------------------------

Cheers,
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;10&nbsp;04:08:56&nbsp;2008</span>
    <span class="description">sisyphus [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; RNG.t segfaults with &#34;ERROR: fread failed&#34; 
</div>
Here&#39;s a patch &#40;to RNG/Test.pm&#41; that addresses that bug:

-----------------------------
--- Test.PM_orig        Sun Aug 10 17:48:36 2008
+++ \_32\comp\Math-GSL-0.07\blib\lib\Math\GSL\RNG\Test.pm       Sun Aug 
10 18:00:23 2008
@@ -122,13 +122,15 @@
 
 sub GSL_RNG_FWRITE_FREAD : Tests {
     my $self = shift;
+    my $write = $^O =~ /MSWin32/i ? &#34;w + b&#34; : &#34;w&#34;;
+    my $read  = $^O =~ /MSWin32/i ? &#34;r + b&#34; : &#34;r&#34;;
     my $rng = gsl_rng_alloc&#40;$gsl_rng_default&#41;;
 
-    my $fh = fopen&#40;&#34;rng&#34; , &#34;w&#34;&#41;;
+    my $fh = fopen&#40;&#34;rng&#34; , $write&#41;;
     is&#40;gsl_rng_fwrite&#40;$fh, $self-&gt;{rng}&#41;, 0&#41;;
     fclose&#40;$fh&#41;;
 
-    $fh = fopen&#40;&#34;rng&#34;, &#34;r&#34;&#41;;
+    $fh = fopen&#40;&#34;rng&#34;, $read&#41;;
     is&#40;gsl_rng_fread&#40;$fh, $rng&#41;,0&#41;;
     is&#40;gsl_rng_get&#40;$rng&#41;, gsl_rng_get&#40;$self-&gt;{rng}&#41;&#41;;
     fclose&#40;$fh&#41;;
-----------------------------

Cheers,
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;16&nbsp;08:55:25&nbsp;2008</span>
    <span class="description">sisyphus [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Aug 10 04:08:56 2008, SISYPHUS wrote:
.
.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; +    my $write = $^O =~ /MSWin32/i ? &#34;w + b&#34; : &#34;w&#34;;
&gt; +    my $read  = $^O =~ /MSWin32/i ? &#34;r + b&#34; : &#34;r&#34;;
</div>
For the record, that worked ok on Windows Vista, but not Windows XP. 
&#40;Yeah ... I don&#39;t know why, either.&#41;
The correct fix, of course, is to replace &#34;w + b&#34; and &#34;r + b&#34; in the 
above patch with &#34;w+b&#34; and &#34;r+b&#34;.

Cheers,
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;14&nbsp;20:15:55&nbsp;2008</span>
    <span class="description">jonathan [...] leto.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This has been resolved, Math::GSL compiles and all tests pass on windows as of 0.12 .
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;14&nbsp;20:15:57&nbsp;2008</span>
    <span class="description">jonathan [...] leto.net -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;14&nbsp;20:15:59&nbsp;2008</span>
    <span class="description">jonathan [...] leto.net -  Given to LETO</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
