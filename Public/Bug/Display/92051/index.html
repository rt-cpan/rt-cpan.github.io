<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #92051 for version: [PATCH] Android doesn&#39;t support POSIX::localeconv&#40;&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #92051 for version: [PATCH] Android doesn&#39;t support POSIX::localeconv&#40;&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/version/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/version/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/version/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/version/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/version">version CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">92051</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/version/Active/">version</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dexter [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-34940-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.9906    </td>
  </tr>
  <tr id="CF-34941-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;11&nbsp;10:20:10&nbsp;2014</span>
    <span class="description">piotr.roszatycki [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [PATCH] Android doesn&#39;t support POSIX::localeconv&#40;&#41;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">version module doesn&#39;t work on Android. Its libc doesn&#39;t provide localeconf&#40;&#41; function.

This is patch:

--- version-0.9906/t/07locale.t
+++ version-0.9906_01/t/07locale.t
@@ -36,10 +36,10 @@
        while &#40;&lt;DATA&gt;&#41; {
            chomp;
            $loc = setlocale&#40; LC_ALL, $_&#41;;
-           last if $loc &#38;&#38; localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39;;
+           last if $loc &#38;&#38; eval { localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39; };
        }
        skip &#39;Cannot test locale handling without a comma locale&#39;, 5
-           unless $loc and localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39;;
+           unless $loc and eval { localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39; };
 
        setlocale&#40;LC_NUMERIC, $loc&#41;;
        $ver = 1.23;  # has to be floating point number
--- version-0.9906/t/survey_locales
+++ version-0.9906_01/t/survey_locales
@@ -9,7 +9,7 @@
 while &#40;&lt;$LOCALES&gt;&#41; {
     chomp;
     $loc = setlocale&#40; LC_ALL, $_&#41;;
-    print $_ if localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39;;
+    print $_ if eval { localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39; };
 }
 close $LOCALES;
 $loc = setlocale&#40; LC_ALL, $orig_loc&#41;;
--- version-0.9906/vperl/vpp.pm
+++ version-0.9906_01/vperl/vpp.pm
@@ -654,12 +654,12 @@
            return $self;
        }
 
-       my $currlocale = setlocale&#40;LC_ALL&#41;;
+       my $currlocale = do { local $@; local $SIG{__DIE__}; eval { setlocale&#40;LC_ALL&#41; } };
 
        # if the current locale uses commas for decimal points, we
        # just replace commas with decimal places, rather than changing
        # locales
-       if &#40; localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39; &#41; {
+       if &#40; do { local $@; local $SIG{__DIE__}; eval { localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39; } } &#41; {
            $value =~ tr/,/./;
        }
 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;11&nbsp;13:41:00&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">It would probably be a good idea to smoke all of cpan on android, to see what issues there are, and then come up with a more general strategy for dealing with them -- wrapping eval {} arund lots of things seems suboptimal.

Checking the POSIX docs for android would be a good start, too.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;11&nbsp;13:41:00&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;11&nbsp;14:22:29&nbsp;2014</span>
    <span class="description">piotr.roszatycki [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> piotr.roszatycki [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Android has very poor support for locales. Even with LC_ALL=C Perl warns about missing locales:

perl: warning: Please check that your locale settings:

I&#39;ve tested this module with Perl on Android compiled with -Ui_locale -Ud_setlocale flags

Then it is not possible to use locale module:

Your vendor does not support locales, you cannot use the locale module. at /data/perl/lib/5.18.2/locale.pm line 75.

It means that vpp shouldn&#39;t load this module at all.

Patch:


--- version-0.9906/t/07locale.t
+++ version-0.9906_02/t/07locale.t
@@ -26,20 +26,19 @@
 
        my $ver = 1.23;  # has to be floating point number
        my $loc;
-       my $orig_loc = setlocale&#40;LC_NUMERIC&#41;;
+       my $orig_loc = eval { setlocale&#40;LC_NUMERIC&#41; };
        ok &#40;$ver eq &#34;1.23&#34;, &#39;Not using locale yet&#39;&#41;;  # Don&#39;t use is&#40;&#41;,
                                                      # because have to
                                                      # evaluate in current
                                                      # scope
-       use locale;
 
        while &#40;&lt;DATA&gt;&#41; {
            chomp;
            $loc = setlocale&#40; LC_ALL, $_&#41;;
-           last if $loc &#38;&#38; localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39;;
+           last if $loc &#38;&#38; eval { localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39; };
        }
        skip &#39;Cannot test locale handling without a comma locale&#39;, 5
-           unless $loc and localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39;;
+           unless $loc and eval { localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39; };
 
        setlocale&#40;LC_NUMERIC, $loc&#41;;
        $ver = 1.23;  # has to be floating point number
--- version-0.9906/t/survey_locales
+++ version-0.9906_02/t/survey_locales
@@ -9,7 +9,7 @@
 while &#40;&lt;$LOCALES&gt;&#41; {
     chomp;
     $loc = setlocale&#40; LC_ALL, $_&#41;;
-    print $_ if localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39;;
+    print $_ if eval { localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39; };
 }
 close $LOCALES;
 $loc = setlocale&#40; LC_ALL, $orig_loc&#41;;
--- version-0.9906/vperl/vpp.pm
+++ version-0.9906_02/vperl/vpp.pm
@@ -121,7 +121,6 @@
 use strict;
 
 use POSIX qw/locale_h/;
-use locale;
 use vars qw&#40;$VERSION $CLASS @ISA $LAX $STRICT&#41;;
 $VERSION = 0.9906;
 $CLASS = &#39;version::vpp&#39;;
@@ -654,12 +653,12 @@
            return $self;
        }
 
-       my $currlocale = setlocale&#40;LC_ALL&#41;;
+       my $currlocale = do { local $@; local $SIG{__DIE__}; eval { setlocale&#40;LC_ALL&#41; } };
 
        # if the current locale uses commas for decimal points, we
        # just replace commas with decimal places, rather than changing
        # locales
-       if &#40; localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39; &#41; {
+       if &#40; do { local $@; local $SIG{__DIE__}; eval { localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39; } } &#41; {
            $value =~ tr/,/./;
        }
 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;11&nbsp;14:26:42&nbsp;2014</span>
    <span class="description">piotr.roszatycki [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> piotr.roszatycki [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sob 11 Sty 2014, 13:41:00, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It would probably be a good idea to smoke all of cpan on android, to
&gt; see what issues there are, and then come up with a more general
&gt; strategy for dealing with them -- wrapping eval {} arund lots of
&gt; things seems suboptimal.
</div>
It is very good idea but it has one backdraw:

cpanminus requires version.pm to its work so it have to be fixed in the first place. Without cpanminus it is more difficult to test CPAN modules.

Another module to fix is ExtUtils::MakeMaker and I&#39;m just sending the patch to github for this module.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;11&nbsp;17:18:03&nbsp;2014</span>
    <span class="description">john.peacock [...] havurah-software.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #92051] [PATCH] Android doesn&#39;t support POSIX::localeconv&#40;&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 11 Jan 2014 17:17:54 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-version [...] rt.cpan.org, undisclosed-recipients:;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;john.peacock [...] havurah-software.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 01/11/2014 10:20 AM, Piotr Roszatycki via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sat Jan 11 10:20:10 2014: Request 92051 was acted upon.
&gt; Transaction: Ticket created by DEXTER
&gt;         Queue: version
&gt;       Subject: [PATCH] Android doesn&#39;t support POSIX::localeconv&#40;&#41;
&gt;     Broken in: 0.9906
&gt;      Severity: Important
&gt;         Owner: Nobody
&gt;    Requestors: dexter@cpan.org
&gt;        Status: new
&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=92051">https://rt.cpan.org/Ticket/Display.html?id=92051</a></span> &gt;
&gt;
&gt;
&gt; version module doesn&#39;t work on Android. Its libc doesn&#39;t provide localeconf&#40;&#41; function.
</div>
Can you show me the output of this?

   perl -MConfig -e &#39;print $Config{d_setlocale};&#39;

There&#39;s really no point in testing locale support if we know ahead of 
time that it isn&#39;t supported fully &#40;hence I don&#39;t like your first 
patch&#41;.  If I can figure out some way to detect this situation, I will 
just skip the tests entirely and change version:vpp to skip the locale 
testing in the same way.

John
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;11&nbsp;17:50:41&nbsp;2014</span>
    <span class="description">dexter [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #92051] [PATCH] Android doesn&#39;t support POSIX::localeconv&#40;&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 11 Jan 2014 23:50:31 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-version [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Piotr Roszatycki &lt;dexter [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">2014/1/11 John Peacock via RT &lt;bug-version@rt.cpan.org&gt;:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=92051">https://rt.cpan.org/Ticket/Display.html?id=92051</a></span> &gt;
&gt; Can you show me the output of this?
&gt;
&gt;    perl -MConfig -e &#39;print $Config{d_setlocale};&#39;
&gt;
&gt; There&#39;s really no point in testing locale support if we know ahead of
&gt; time that it isn&#39;t supported fully &#40;hence I don&#39;t like your first
&gt; patch&#41;.  If I can figure out some way to detect this situation, I will
&gt; just skip the tests entirely and change version:vpp to skip the locale
&gt; testing in the same way.
</div>
There are two cases:

$ perl -V:d_setlocale
d_setlocale=&#39;undef&#39;;

Then POSIX&#39;s setlocale, localeconv, LC_ALL, LC_NUMBERIC, are failed

Another case:

$ perl -V:d_setlocale
d_setlocale=&#39;defined&#39;;

but:

$ grep -A3 -B3 localeconv
/data/data/com.pdaxrom.cctools/root/cctools/arm-linux-androideabi/include/locale.h

#if 1 /* MISSING FROM BIONIC - DEFINED TO MAKE libstdc++-v3 happy */
struct lconv { };
struct lconv *localeconv&#40;void&#41;;
#endif /* MISSING */

so localeconv is failed
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;12&nbsp;11:00:11&nbsp;2014</span>
    <span class="description">john.peacock [...] havurah-software.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #92051] [PATCH] Android doesn&#39;t support POSIX::localeconv&#40;&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 12 Jan 2014 10:59:56 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-version [...] rt.cpan.org, undisclosed-recipients:;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;john.peacock [...] havurah-software.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 01/11/2014 05:50 PM, dexter@cpan.org via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There are two cases:
&gt;
&gt; $ perl -V:d_setlocale
&gt; d_setlocale=&#39;undef&#39;;
&gt;
&gt; Then POSIX&#39;s setlocale, localeconv, LC_ALL, LC_NUMBERIC, are failed
&gt;
&gt; Another case:
&gt;
&gt; $ perl -V:d_setlocale
&gt; d_setlocale=&#39;defined&#39;;
&gt;
&gt; but:
&gt;
&gt; $ grep -A3 -B3 localeconv
&gt; /data/data/com.pdaxrom.cctools/root/cctools/arm-linux-androideabi/include/locale.h
&gt;
&gt; #if 1 /* MISSING FROM BIONIC - DEFINED TO MAKE libstdc++-v3 happy */
&gt; struct lconv { };
&gt; struct lconv *localeconv&#40;void&#41;;
&gt; #endif /* MISSING */
&gt;
&gt; so localeconv is failed
&gt;
</div>
That is pretty unhelpful to say the least.  I have installed Android4.3 
x86 in VirtualBox.  Can someone point me at documentation to go about 
installing Perl &#40;and the toolchain required to build it presumably&#41; and 
I can take a look at it?

For now, I&#39;m going to say that version.pm is unsupportable on Android, 
since I cannot remove locale support from vpp like that; that would 
break everything that does locales reasonably.  I have a bunch of other 
fixes I&#39;d like to release now, so I&#39;m not going to wait on Android.  If 
you can provide a way to determine whether the Makefile.PL is running on 
Android, I can look at adding a patch step for that platform only.  But 
that is a horrible hack...

John
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;12&nbsp;17:54:07&nbsp;2014</span>
    <span class="description">piotr.roszatycki [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> dexter [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Nd 12 Sty 2014, 11:00:11, john.peacock@havurah-software.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; That is pretty unhelpful to say the least.  I have installed
&gt; Android4.3
&gt; x86 in VirtualBox.  Can someone point me at documentation to go about
&gt; installing Perl &#40;and the toolchain required to build it presumably&#41;
&gt; and
&gt; I can take a look at it?
</div>
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/dex4er/perl5/wiki/Installing-Perl-on-Android">https://github.com/dex4er/perl5/wiki/Installing-Perl-on-Android</a></span>

The binaries are also avaiable.

I&#39;ve changed $^O from &#39;linux&#39; to &#39;android&#39;, as far as there is so many changes between standard linux+glibc and android+bionic. It is similar to cygwin and MSWin32 - the same OS and different libc

I think you can assume that d_setlocale=&#39;undef&#39; as far as Android has broken this mechanizm.

Then I need just to not load &#34;locale&#34; module. It simpifies the whole patch:

--- version-0.9906/t/07locale.t
+++ version-0.9906_03/t/07locale.t
@@ -31,7 +31,6 @@
                                                      # because have to
                                                      # evaluate in current
                                                      # scope
-       use locale;
 
        while &#40;&lt;DATA&gt;&#41; {
            chomp;
--- version-0.9906/vperl/vpp.pm
+++ version-0.9906_03/vperl/vpp.pm
@@ -120,8 +120,8 @@
 use 5.005_04;
 use strict;
 
+use Config;
 use POSIX qw/locale_h/;
-use locale;
 use vars qw&#40;$VERSION $CLASS @ISA $LAX $STRICT&#41;;
 $VERSION = 0.9906;
 $CLASS = &#39;version::vpp&#39;;
@@ -654,13 +654,15 @@
            return $self;
        }
 
-       my $currlocale = setlocale&#40;LC_ALL&#41;;
+       if &#40;$Config{d_setlocale}&#41; {
+           my $currlocale = setlocale&#40;LC_ALL&#41;;
 
-       # if the current locale uses commas for decimal points, we
-       # just replace commas with decimal places, rather than changing
-       # locales
-       if &#40; localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39; &#41; {
-           $value =~ tr/,/./;
+           # if the current locale uses commas for decimal points, we
+           # just replace commas with decimal places, rather than changing
+           # locales
+           if &#40; localeconv&#40;&#41;-&gt;{decimal_point} eq &#39;,&#39; &#41; {
+               $value =~ tr/,/./;
+           }
        }
 
        if &#40; not defined $value or $value =~ /^undef$/ &#41; {
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;12&nbsp;20:00:25&nbsp;2014</span>
    <span class="description">john.peacock [...] havurah-software.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #92051] [PATCH] Android doesn&#39;t support POSIX::localeconv&#40;&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 12 Jan 2014 20:00:14 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-version [...] rt.cpan.org, undisclosed-recipients:;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;john.peacock [...] havurah-software.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 01/12/2014 05:54 PM, Piotr Roszatycki via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The binaries are also avaiable.
&gt;
&gt; I&#39;ve changed $^O from &#39;linux&#39; to &#39;android&#39;, as far as there is so many changes between standard linux+glibc and android+bionic. It is similar to cygwin and MSWin32 - the same OS and different libc
&gt;
&gt; I think you can assume that d_setlocale=&#39;undef&#39; as far as Android has broken this mechanizm.
&gt;
&gt; Then I need just to not load &#34;locale&#34; module. It simpifies the whole patch:
</div>
As I said, I will not be globally removing the &#39;use locale&#39; at this 
time, because that will break every other platform.  If you set $^O to 
something like &#39;android&#39; like your other thread suggests, I will simply 
make those changes in Makefile.PL for android only, and skip the locale 
tests entirely.

&#39;use locale&#39; is technically a pragma, not actually a module, so it 
should be possible to leave it in and only enable it in that block.  If 
that is not possible, I can do something &#34;clever&#34; instead.

JohN
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;12&nbsp;20:49:16&nbsp;2014</span>
    <span class="description">john.peacock [...] havurah-software.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #92051] [PATCH] Android doesn&#39;t support POSIX::localeconv&#40;&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 12 Jan 2014 20:49:07 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-version [...] rt.cpan.org, undisclosed-recipients:;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;john.peacock [...] havurah-software.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 01/12/2014 08:00 PM, John Peacock via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; something like &#39;android&#39; like your other thread suggests, I will simply
&gt; make those changes in Makefile.PL for android only, and skip the locale
&gt; tests entirely.
</div>
I&#39;ve pushed changes to the version repo&#40;s&#41;:

   ssh://hg@bitbucket.org/jpeacock/version/  &#40;master&#41;
   git+ssh://git@github.com/JohnPeacock/version.git &#40;mirror&#41;

that should fix the problems with Android.  It assumes that $^O matches 
/android/ and Makefile.PL just strips out the offending &#39;use locale&#39;.

If you can let me know if this works for you, I will release to CPAN...

John
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;13&nbsp;05:43:30&nbsp;2014</span>
    <span class="description">piotr.roszatycki [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> piotr.roszatycki [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; git+ssh://git@github.com/JohnPeacock/version.git &#40;mirror&#41;
</div>
github mirror does work. I couldn&#39;t clone bitbucket&#39;s repo.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If you can let me know if this works for you, I will release to CPAN...
</div>

cc -c   -fno-strict-aliasing -pipe -fstack-protector -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2   -DVERSION=\&#34;0.9907\&#34; -DXS_VERSION=\&#34;0.9907\&#34; -fPIC &#34;-I/data/data/com.pdaxrom.cctools/root/cctools/lib/perl5/5.18.2/armv7l-android/CORE&#34;   vutil.c
In file included from /data/data/com.pdaxrom.cctools/root/cctools/lib/perl5/5.18.2/armv7l-android/CORE/perl.h:5156:0,
                 from vutil.c:7:
vutil.c: In function &#39;Perl_upg_version2&#39;:
vutil.h:229:31: error: &#39;LC_NUMERIC&#39; undeclared &#40;first use in this function&#41;
  char *loc = savepv&#40;setlocale&#40;LC_NUMERIC, NULL&#41;&#41;; \
                               ^
/data/data/com.pdaxrom.cctools/root/cctools/lib/perl5/5.18.2/armv7l-android/CORE/embed.h:523:38: note: in definition of macro &#39;savepv&#39;
 #define savepv&#40;a&#41;  Perl_savepv&#40;aTHX_ a&#41;
                                      ^
vutil.c:566:9: note: in expansion of macro &#39;STORE_NUMERIC_LOCAL_SET_STANDARD&#39;
         STORE_NUMERIC_LOCAL_SET_STANDARD&#40;&#41;;
         ^
vutil.h:229:31: note: each undeclared identifier is reported only once for each function it appears in
  char *loc = savepv&#40;setlocale&#40;LC_NUMERIC, NULL&#41;&#41;; \
                               ^
/data/data/com.pdaxrom.cctools/root/cctools/lib/perl5/5.18.2/armv7l-android/CORE/embed.h:523:38: note: in definition of macro &#39;savepv&#39;
 #define savepv&#40;a&#41;  Perl_savepv&#40;aTHX_ a&#41;
                                      ^
vutil.c:566:9: note: in expansion of macro &#39;STORE_NUMERIC_LOCAL_SET_STANDARD&#39;
         STORE_NUMERIC_LOCAL_SET_STANDARD&#40;&#41;;
         ^
Makefile:314: recipe for target &#39;vutil.o&#39; failed
make[1]: *** [vutil.o] Error 1



The previous version with my patch compiled cleanly. I&#39;ll try to investigate.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;13&nbsp;06:06:57&nbsp;2014</span>
    <span class="description">piotr.roszatycki [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> piotr.roszatycki [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Seems that you should check USE_LOCALE

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/JohnPeacock/version/pull/1">https://github.com/JohnPeacock/version/pull/1</a></span>

make test passes :&#41; Thanks :&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;13&nbsp;06:24:50&nbsp;2014</span>
    <span class="description">john.peacock [...] havurah-software.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #92051] [PATCH] Android doesn&#39;t support POSIX::localeconv&#40;&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 13 Jan 2014 06:24:40 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-version [...] rt.cpan.org, undisclosed-recipients:;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;john.peacock [...] havurah-software.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 01/13/2014 06:06 AM, Piotr Roszatycki via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;         Queue: version
&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=92051">https://rt.cpan.org/Ticket/Display.html?id=92051</a></span> &gt;
&gt;
&gt; Seems that you should check USE_LOCALE
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/JohnPeacock/version/pull/1">https://github.com/JohnPeacock/version/pull/1</a></span>
&gt;
&gt; make test passes :&#41; Thanks :&#41;
&gt;
</div>
Applied and also made changes suggested by Aristotle &#40;though I object to 
them in principle&#41;.  You will probably have better luck with this URL 
for the mercurial repo:

   <span class="clickylink"><a target="new" rel="nofollow" href="https://jpeacock">https://jpeacock</a></span>@bitbucket.org/jpeacock/version

unless you have an account and ssh key configured &#40;that was my fault&#41;.

John
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;13&nbsp;06:39:08&nbsp;2014</span>
    <span class="description">dexter [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #92051] [PATCH] Android doesn&#39;t support POSIX::localeconv&#40;&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 13 Jan 2014 12:38:58 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-version [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Piotr Roszatycki &lt;dexter [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ah sorry, I didn&#39;t noticed that it is mercurial repo. Unfortunately
there is no mercurial for Android so I&#39;ll stay with Github.

Thanks for your work.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;13&nbsp;06:50:29&nbsp;2014</span>
    <span class="description">jpeacock [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed in 0.9907
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;13&nbsp;06:50:30&nbsp;2014</span>
    <span class="description">jpeacock [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;13&nbsp;07:05:33&nbsp;2014</span>
    <span class="description">john.peacock [...] havurah-software.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #92051] [PATCH] Android doesn&#39;t support POSIX::localeconv&#40;&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 13 Jan 2014 07:05:21 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-version [...] rt.cpan.org, undisclosed-recipients:;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;john.peacock [...] havurah-software.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 01/13/2014 06:39 AM, dexter@cpan.org via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;         Queue: version
&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=92051">https://rt.cpan.org/Ticket/Display.html?id=92051</a></span> &gt;
&gt;
&gt; Ah sorry, I didn&#39;t noticed that it is mercurial repo. Unfortunately
&gt; there is no mercurial for Android so I&#39;ll stay with Github.
&gt;
&gt; Thanks for your work.
&gt;
</div>
Unless I hear otherwise, I&#39;m going to close this last bug and release 
0.9907 this evening &#40;EST&#41;.

John
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;13&nbsp;07:21:07&nbsp;2014</span>
    <span class="description">dexter [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #92051] [PATCH] Android doesn&#39;t support POSIX::localeconv&#40;&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 13 Jan 2014 13:20:56 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-version [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Piotr Roszatycki &lt;dexter [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">2014/1/13 John Peacock via RT &lt;bug-version@rt.cpan.org&gt;:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Unless I hear otherwise, I&#39;m going to close this last bug and release
&gt; 0.9907 this evening &#40;EST&#41;.
</div>
Cool.

Everything compiled and test passed. cpanminus works correctly
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;14&nbsp;21:00:34&nbsp;2014</span>
    <span class="description">john.peacock [...] havurah-software.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #92051] [PATCH] Android doesn&#39;t support POSIX::localeconv&#40;&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 14 Jan 2014 21:00:20 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-version [...] rt.cpan.org, undisclosed-recipients:;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;john.peacock [...] havurah-software.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 01/13/2014 07:21 AM, dexter@cpan.org via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;         Queue: version
&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=92051">https://rt.cpan.org/Ticket/Display.html?id=92051</a></span> &gt;
&gt;
&gt; 2014/1/13 John Peacock via RT &lt;bug-version@rt.cpan.org&gt;:
<div class="message-stanza open">&gt;&gt; Unless I hear otherwise, I&#39;m going to close this last bug and release
&gt;&gt; 0.9907 this evening &#40;EST&#41;.
</div>&gt;
&gt; Cool.
&gt;
&gt; Everything compiled and test passed. cpanminus works correctly
&gt;
</div>
Can I ask you to pull the latest and test again?  Per some other 
discussions on p5p, I made the code to skip loading locale more generic.

John
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;15&nbsp;03:59:52&nbsp;2014</span>
    <span class="description">dexter [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #92051] [PATCH] Android doesn&#39;t support POSIX::localeconv&#40;&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Jan 2014 09:59:44 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-version [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Piotr Roszatycki &lt;dexter [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Result: PASS

Also cpanminus works correctly.

Great work, Thank you!
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
