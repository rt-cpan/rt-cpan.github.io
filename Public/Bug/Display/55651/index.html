<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #55651 for CGI-Application-Dispatch-Server: [PATCH] Use CRLF instead of LF for response</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #55651 for CGI-Application-Dispatch-Server: [PATCH] Use CRLF instead of LF for response</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/CGI-Application-Dispatch-Server/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/CGI-Application-Dispatch-Server/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/CGI-Application-Dispatch-Server/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/CGI-Application-Dispatch-Server/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/CGI-Application-Dispatch-Server">CGI-Application-Dispatch-Server CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">55651</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/CGI-Application-Dispatch-Server/Active/">CGI-Application-Dispatch-Server</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
nazri [...] healthiercompany.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-44452-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-44453-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;17&nbsp;02:46:40&nbsp;2010</span>
    <span class="description">nazri [...] healthiercompany.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [PATCH] Use CRLF instead of LF for response</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 17 Mar 2010 14:45:22 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI-Application-Dispatch-Server [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Nazri &lt;nazri [...] healthiercompany.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi there,

Thanks for writing CGI::Application::Dispatch::Server.

We are using it for development and found out that it does not work well with
facebook server &#40;the profile tab&#41;.

We tracked down this problem and it turned out that facebook server
do not handle HTTP response sent with LF line endings.

Attached patch make CGI::Application::Dispatch::Server use CRLF line
endings, as suggested in [1].

The version we are using is 0.52, and the attached patch is against that
version.

We&#39;re not sure if this blanket change is good for all cases.

nazri + reza.

[1] <span class="clickylink"><a target="new" rel="nofollow" href="http://tools.ietf.org/html/rfc2616#section-6">http://tools.ietf.org/html/rfc2616#section-6</a></span>

-- 
hundred-and-one symptoms of being an internet addict:
101. U can read htis w/o ny porblm and cant figur eout Y its evn listd.
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;17&nbsp;09:30:49&nbsp;2010</span>
    <span class="description">mark [...] summersault.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #55651] [PATCH] Use CRLF instead of LF for response</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 17 Mar 2010 09:29:59 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI-Application-Dispatch-Server [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Stosberg &lt;mark [...] summersault.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi there,
&gt; 
&gt; Thanks for writing CGI::Application::Dispatch::Server.
&gt; 
&gt; We are using it for development and found out that it does not work well with
&gt; facebook server &#40;the profile tab&#41;.
&gt; 
&gt; We tracked down this problem and it turned out that facebook server
&gt; do not handle HTTP response sent with LF line endings.
&gt; 
&gt; Attached patch make CGI::Application::Dispatch::Server use CRLF line
&gt; endings, as suggested in [1].
&gt; 
&gt; The version we are using is 0.52, and the attached patch is against that
&gt; version.
&gt; 
&gt; We&#39;re not sure if this blanket change is good for all cases.
</div>
Thanks for the report. I agree with the principle of your patch, but
this module is no longer maintained or recommended, in favor
CGI::Application::Server. 

I recommend you switch to use that module &#40;which is hopefully easy&#41;, or
I can offer to make you a co-maintainer of this module, and you can
upload a new release yourself which includes this improvement. 

    Mark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;17&nbsp;09:30:56&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;23&nbsp;04:50:05&nbsp;2010</span>
    <span class="description">nazri [...] healthiercompany.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #55651] [PATCH] Use CRLF instead of LF for response</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 23 Mar 2010 16:49:52 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;mark [...] summersault.com via RT&#34; &lt;bug-CGI-Application-Dispatch-Server [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Nazri &lt;nazri [...] healthiercompany.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 17/03/2010, mark@summersault.com via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks for the report. I agree with the principle of your patch, but
&gt; this module is no longer maintained or recommended, in favor
&gt; CGI::Application::Server. 
&gt; 
&gt; I recommend you switch to use that module &#40;which is hopefully easy&#41;, or
&gt; I can offer to make you a co-maintainer of this module, and you can
&gt; upload a new release yourself which includes this improvement. 
</div>
I&#39;ve tried running my application using CGI::Application::Server.

Following are the hiccups, or maybe I&#39;m just stupid :&#41;

1. From CGI::Application::Server perldoc:

         $server-&gt;entry_points&#40;{
             &#39;/&#39;          =&gt; &#39;MyCGIApp::DefaultApp&#39;,
             &#39;/index.cgi&#39; =&gt; &#39;MyCGIApp&#39;,
             &#39;/admin&#39;     =&gt; &#39;MyCGIApp::Admin&#39;,
             &#39;/account&#39;   =&gt; &#39;MyCGIApp::Account::Dispatch&#39;,
             &#39;/users&#39;     =&gt; $object,
             &#39;/static&#39;    =&gt; &#39;/usr/local/htdocs&#39;,
         }&#41;;

   Looking at CGI::Application::Server:handle_request it seems like the first
   four entries will not work at all because all four of them fails the
   &#34;Is-it-a-directory-or-an-instance-of-a-dispatcher&#34; test as all four of them
   are string scalars.

   To work around this I had to OO-ize my dispatcher, created an instance of it
   &#40;$object&#41; and used an entry similar to the fifth entry above.

2. I had to add an explicit entries for each of top-level directories where
   static content are being served. I was under the impression that request
   paths that are not handled by the dispatcher will be automagically treated
   as static content, that is, I had to write:

            my $doc_root = &#39;./htdocs&#39;;
            $server-&gt;document_root&#40;$doc_root&#41;;
            $server-&gt;entry_points&#40;{
                        &#39;/&#39; =&gt; $dispatch,
                        &#39;/stylesheets&#39; =&gt; $doc_root,
                        &#39;/javascript&#39;  =&gt; $doc_root,
                        &#39;/images&#39;      =&gt; $doc_root,
                        }&#41;;

   instead of the simpler:

            $server-&gt;document_root&#40;&#39;./htdocs&#39;&#41;;
            $server-&gt;entry_points&#40;{
                        &#39;/&#39; =&gt; $dispatch,
                        }&#41;;

While I managed to use CGI::Application::Server successfully for my
application, it still suffer from the same problem with the
&#34;header-sent-using-LF-instead-of-CRLF&#34; issue.

Going through these &#39;exercises&#39; I now think that the proper place to fix this
issue might be in HTTP::&#40;Response|Headers&#41;::as_string, instead of
CGI::Application::Server or CGI::Application::Dispatch::Server.


nazri
-- 
hundred-and-one symptoms of being an internet addict:
135. You cut classes or miss work so you can stay home and browse the web.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;23&nbsp;09:40:13&nbsp;2010</span>
    <span class="description">mark [...] summersault.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #55651] [PATCH] Use CRLF instead of LF for response</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 23 Mar 2010 09:40:02 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI-Application-Dispatch-Server [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Stosberg &lt;mark [...] summersault.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Nazri,

I&#39;m sorry your conversion to CGI::Application::Server wasn&#39;t as easy
as you hoped.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 2. I had to add an explicit entries for each of top-level directories where
&gt;    static content are being served. I was under the impression that request
&gt;    paths that are not handled by the dispatcher will be automagically treated
&gt;    as static content, that is, I had to write:
&gt; 
&gt;             my $doc_root = &#39;./htdocs&#39;;
&gt;             $server-&gt;document_root&#40;$doc_root&#41;;
&gt;             $server-&gt;entry_points&#40;{
&gt;                       &#39;/&#39; =&gt; $dispatch,
&gt;                       &#39;/stylesheets&#39; =&gt; $doc_root,
&gt;                       &#39;/javascript&#39;  =&gt; $doc_root,
&gt;                       &#39;/images&#39;      =&gt; $doc_root,
&gt;                       }&#41;;
&gt; 
&gt;    instead of the simpler:
&gt; 
&gt;             $server-&gt;document_root&#40;&#39;./htdocs&#39;&#41;;
&gt;             $server-&gt;entry_points&#40;{
&gt;                       &#39;/&#39; =&gt; $dispatch,
&gt;                       }&#41;;
</div>
I&#39;m not certain about the intended behavior for CGI::Application::Server
is. You could contact the developers or file a &#34;wish&#34; report if you
think it should be changed.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; While I managed to use CGI::Application::Server successfully for my
&gt; application, it still suffer from the same problem with the
&gt; &#34;header-sent-using-LF-instead-of-CRLF&#34; issue.
</div>
CGI::Application uses CGI.pm to build the headers and send the
linebreaks between the header and the body. In turn, it decides which
character sequence to use based on which platform it is running on.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Going through these &#39;exercises&#39; I now think that the proper place to fix this
&gt; issue might be in HTTP::&#40;Response|Headers&#41;::as_string, instead of
&gt; CGI::Application::Server or CGI::Application::Dispatch::Server.
</div>
Having looked closely at the code for HTTP::Headers, I think you&#39;ll find
that is already spec-compliant. 

I suggest adding some debugging code to your copy of CGI.pm in the
&#34;header&#40;&#41;&#34; method to see if that is the source of your unexpected
linebreaks.

&#40; But, as a maintainer of CGI.pm, I don&#39;t expect you&#39;ll find a bug there &#41;.

You could also try to see if you could write a test case against just
CGI.pm alone or HTTP::Headers alone and see if they fail.

    Mark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;23&nbsp;22:08:17&nbsp;2010</span>
    <span class="description">nazri [...] healthiercompany.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #55651] [PATCH] Use CRLF instead of LF for response</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 24 Mar 2010 10:08:01 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;mark [...] summersault.com via RT&#34; &lt;bug-CGI-Application-Dispatch-Server [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Nazri &lt;nazri [...] healthiercompany.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 23/03/2010, mark@summersault.com via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m not certain about the intended behavior for CGI::Application::Server
&gt; is. You could contact the developers or file a &#34;wish&#34; report if you
&gt; think it should be changed.
</div>
Thank you for the suggestion. I don&#39;t see immediate need on my part to
proceed with the above at this moment.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; CGI::Application uses CGI.pm to build the headers and send the
&gt; linebreaks between the header and the body. In turn, it decides which
&gt; character sequence to use based on which platform it is running on.
</div>
Looking at CGI.pm, it defaults to CRLF &#40;which is spec-compliant&#41; when
the platform is not VMS or the platform is not using EBCDIC character
encoding. The author commented that it is &#39;really annoying&#39;. I think
the solution he implemented is pragmatic.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Having looked closely at the code for HTTP::Headers, I think you&#39;ll find
&gt; that is already spec-compliant. 
</div>
Are you sure? The HTTP::Headers::as_string &#40;as of 5.827&#41; defaults to LF
&#40;&#34;\n&#34;&#41; as the header terminator, which to me, is not rfc2616 [1]-
compliant and not pragmatic when it is used for sending an HTTP request.

It seems like the library expects that their users be aware of the
LF-CRLF issues when it comes to sending an HTTP request.  Maybe it would
be more pragmatic if it made use the same logic as CGI.pm when choosing
a default for the header terminator.

Hmm maybe I should bring this issue to the library authors. They may
have their own reason for the current behavior, or it is just a bug.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#40; But, as a maintainer of CGI.pm, I don&#39;t expect you&#39;ll find a bug there &#41;.
</div>
You are right there. CGI.pm is all good.

Thank you.

nazri

[1] <span class="clickylink"><a target="new" rel="nofollow" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html#sec2.2">http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html#sec2.2</a></span>
-- 
hundred-and-one symptoms of being an internet addict:
192. Your boss asks you to &#34;go fer&#34; coffee and you come up with 235 FTP sites.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;24&nbsp;08:13:30&nbsp;2010</span>
    <span class="description">mark [...] summersault.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #55651] [PATCH] Use CRLF instead of LF for response</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 24 Mar 2010 08:13:16 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI-Application-Dispatch-Server [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Stosberg &lt;mark [...] summersault.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Having looked closely at the code for HTTP::Headers, I think you&#39;ll find
&gt; &gt; that is already spec-compliant. 
</div>&gt; 
&gt; Are you sure? The HTTP::Headers::as_string &#40;as of 5.827&#41; defaults to LF
&gt; &#40;&#34;\n&#34;&#41; as the header terminator, which to me, is not rfc2616 [1]-
&gt; compliant and not pragmatic when it is used for sending an HTTP request.
&gt; 
&gt; It seems like the library expects that their users be aware of the
&gt; LF-CRLF issues when it comes to sending an HTTP request.  Maybe it would
&gt; be more pragmatic if it made use the same logic as CGI.pm when choosing
&gt; a default for the header terminator.
&gt; 
&gt; Hmm maybe I should bring this issue to the library authors. They may
&gt; have their own reason for the current behavior, or it is just a bug.
</div>
I think you are right here. This second reference also suggests you are
correct. In RFC 2616, see &#34;3.7.1 Canonicalization and Text Defaults&#34;

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html">http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html</a></span>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [1] <span class="clickylink"><a target="new" rel="nofollow" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html#sec2.2">http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html#sec2.2</a></span>
</div>
HTTP::Headers is on github if you&#39;d like to submit a patch that way:

<span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/gisle/libwww-perl">http://github.com/gisle/libwww-perl</a></span>

I think you&#39;ll find Gisle is receptive. 

   Mark
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
