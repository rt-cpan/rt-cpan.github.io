<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #4759 for Crypt-SSLeay: get_lwp_object&#40;&#41; called from proxy_connect_helper causes error</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #4759 for Crypt-SSLeay: get_lwp_object&#40;&#41; called from proxy_connect_helper causes error</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Crypt-SSLeay">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Crypt-SSLeay">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Crypt-SSLeay">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Crypt-SSLeay">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Crypt-SSLeay">Crypt-SSLeay CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">4759</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Crypt-SSLeay">Crypt-SSLeay</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">dland [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jeff [...] forristal.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-8676-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.51    </td>
  </tr>
  <tr id="CF-8677-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=4759">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-94301" href="/Public/Bug/Display.html?id=4759#txn-94301">#</a>      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;26&nbsp;19:35:14&nbsp;2003</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> get_lwp_object&#40;&#41; called from proxy_connect_helper causes error</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/94301/14680/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/14680">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 628b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">When Net::SSL is used with a proxy, proxy_connect_helper&#40;&#41; calls get_lwp_object&#40;&#41;.  Get_lwp_object&#40;&#41; traverses up the call stack and runs isa&#40;&#41; on every 1st function argument reference.  It is traversing very far up into my program, which passes unblessed anonymous hashes in some places as function parameters...and isa&#40;&#41; causes an immediate abort since the anonymous hashes are unblessed.

So either the isa&#40;&#41; needs to be wrapped in an eval{}, or the program has to be a little more courteous as to how far it&#39;s going to trace back in order to not puke on perfectly-acceptable function parameters used within the calling app.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-277562" href="/Public/Bug/Display.html?id=4759#txn-277562">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;20&nbsp;13:35:31&nbsp;2006</span>
    <span class="description">dland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/277562/124176/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/124176">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1002b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Dec 26 19:35:14 2003, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; When Net::SSL is used with a proxy, proxy_connect_helper&#40;&#41; calls
&gt;    get_lwp_object&#40;&#41;.  Get_lwp_object&#40;&#41; traverses up the call stack and
&gt;    runs isa&#40;&#41; on every 1st function argument reference.  It is
&gt;    traversing very far up into my program, which passes unblessed
&gt;    anonymous hashes in some places as function parameters...and isa&#40;&#41;
&gt;    causes an immediate abort since the anonymous hashes are unblessed.
&gt; 
&gt; So either the isa&#40;&#41; needs to be wrapped in an eval{}, or the program
&gt;    has to be a little more courteous as to how far it&#39;s going to trace
&gt;    back in order to not puke on perfectly-acceptable function
&gt;    parameters used within the calling app.
</div>
Hello,

I am the new maintainer for Crypt-SSLeay. Is this problem still an
issue? Can you produce a small test case? Ideally something I can add to
the test suite to make sure the module is behaving according to spec?

Thanks,
David

-- 
The Lusty Decadent Delights of Imperial Pompeii
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-277563" href="/Public/Bug/Display.html?id=4759#txn-277563">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;20&nbsp;13:35:32&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-277625" href="/Public/Bug/Display.html?id=4759#txn-277625">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;20&nbsp;17:38:58&nbsp;2006</span>
    <span class="description">jeff [...] forristal.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #4759] get_lwp_object&#40;&#41; called from proxy_connect_helper causes error</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 20 Dec 2006 17:38:32 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Crypt-SSLeay [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeff Forristal &lt;jeff [...] forristal.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/277625/124219/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/124219">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Tested on:

        $Net::SSL::VERSION: 2.77 &#40;$Crypt::SSLeay::VERSION: 0.51&#41;

Test case:

################################################################
#!perl

use Net::SSL;

$hash_ref = { &#39;foo&#39; =&gt; &#39;bar&#39; };

mysub&#40;$hash_ref&#41;;

sub mysub {
        my $hr = shift;
        
        $ENV{&#39;HTTPS_PROXY&#39;} = &#39;localhost:8080&#39;;
        
        $sock = Net::SSL-&gt;new&#40;
            PeerAddr =&gt; &#39;www.microsoft.com&#39;,
            PeerPort =&gt; 443,
            Timeout  =&gt; 10
        &#41;;
        
}

################################################################

This dies with error:

proxy connect failed: Can&#39;t call method &#34;isa&#34; on unblessed reference at
...\Net\SSL.pm line 320.



The problem stems from get_lwp_object&#40;&#41; running isa&#40;&#41; on the first
parameter of every function call on the stack.  In this case, it is
running isa&#40;&#41; on the parameter to mysub&#40;&#41;.  Since that parameter is an
unblessed hash reference, isa&#40;&#41; dies with the above error.

I can think of a few ways to fix this.  The easiest is probably to wrap
the isa&#40;&#41; in an eval{}.  Another is to check to see if the parameter is
an unblessed reference &#40;HASH, ARRAY, SCALAR, etc.&#41; and shortcut out
before running isa&#40;&#41; &#40;you&#39;d have to know the full list of possible
unblessed reference types and hard-code them in for this to work, and it
might not be future-proof if a new native type is added to Perl&#41;.  Also,
I haven&#39;t traced the use of Net::SSL in relation to LWP, but if the
execution path always has LWP calling Net::SSL &#40;and Net::SSL is then
trying to backtrack up the stack and find the LWP object&#41;, then perhaps
you can limit the checks in get_lwp_object&#40;&#41; to only happen if the
package namespace for the caller is &#39;LWP&#39;.

Also, the currently implemented behavior could lead to problems, if for
some reason the calling application happens to pass an unrelated LWP
object somewhere up the call stack.  The current get_lwp_object&#40;&#41; will
traverse up the entire stack and grab any LWP object encountered,
whether or not it has any context or bearing to the actual call to
Net::SSL down the road.  Imagine someone implementing a conversion
function which converts/extracts an LWP object to a set of data values,
changes some of the values, and then calls Net::SSL with those new
values.  Net::SSL will traverse up through the call stack, past the
conversion function, and slurp values out of the original LWP object
prior to conversion.

And of all this is merely to be able to send a User-Agent string to the
*proxy* server &#40;not the web server itself&#41;, which is a very minor
functional benefit.  The potential and actual ramifications seem to
outweigh the minimal benefit, IMHO.

Thanks,
- J

David Landgren via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=4759">http://rt.cpan.org/Ticket/Display.html?id=4759</a></span> &gt;
&gt; 
&gt; On Fri Dec 26 19:35:14 2003, guest wrote:
<div class="message-stanza open">&gt;&gt; When Net::SSL is used with a proxy, proxy_connect_helper&#40;&#41; calls
&gt;&gt;    get_lwp_object&#40;&#41;.  Get_lwp_object&#40;&#41; traverses up the call stack and
&gt;&gt;    runs isa&#40;&#41; on every 1st function argument reference.  It is
&gt;&gt;    traversing very far up into my program, which passes unblessed
&gt;&gt;    anonymous hashes in some places as function parameters...and isa&#40;&#41;
&gt;&gt;    causes an immediate abort since the anonymous hashes are unblessed.
&gt;&gt;
&gt;&gt; So either the isa&#40;&#41; needs to be wrapped in an eval{}, or the program
&gt;&gt;    has to be a little more courteous as to how far it&#39;s going to trace
&gt;&gt;    back in order to not puke on perfectly-acceptable function
&gt;&gt;    parameters used within the calling app.
</div>&gt; 
&gt; Hello,
&gt; 
&gt; I am the new maintainer for Crypt-SSLeay. Is this problem still an
&gt; issue? Can you produce a small test case? Ideally something I can add to
&gt; the test suite to make sure the module is behaving according to spec?
&gt; 
&gt; Thanks,
&gt; David
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-277644" href="/Public/Bug/Display.html?id=4759#txn-277644">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;20&nbsp;19:39:18&nbsp;2006</span>
    <span class="description">josh [...] chamas.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #4759] get_lwp_object&#40;&#41; called from proxy_connect_helper causes error</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 20 Dec 2006 16:38:49 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Crypt-SSLeay [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Joshua Chamas &lt;josh [...] chamas.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/277644/124231/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/124231">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi David,

You seem to be doing well at taking over Crypt::SSLeay.  If this
works well, then you should run with it.

Cheers,

Josh

David Landgren via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Crypt-SSLeay
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=4759">http://rt.cpan.org/Ticket/Display.html?id=4759</a></span> &gt;
&gt; 
&gt; On Fri Dec 26 19:35:14 2003, guest wrote:
<div class="message-stanza open">&gt;&gt; When Net::SSL is used with a proxy, proxy_connect_helper&#40;&#41; calls
&gt;&gt;    get_lwp_object&#40;&#41;.  Get_lwp_object&#40;&#41; traverses up the call stack and
&gt;&gt;    runs isa&#40;&#41; on every 1st function argument reference.  It is
&gt;&gt;    traversing very far up into my program, which passes unblessed
&gt;&gt;    anonymous hashes in some places as function parameters...and isa&#40;&#41;
&gt;&gt;    causes an immediate abort since the anonymous hashes are unblessed.
&gt;&gt;
&gt;&gt; So either the isa&#40;&#41; needs to be wrapped in an eval{}, or the program
&gt;&gt;    has to be a little more courteous as to how far it&#39;s going to trace
&gt;&gt;    back in order to not puke on perfectly-acceptable function
&gt;&gt;    parameters used within the calling app.
</div>&gt; 
&gt; Hello,
&gt; 
&gt; I am the new maintainer for Crypt-SSLeay. Is this problem still an
&gt; issue? Can you produce a small test case? Ideally something I can add to
&gt; the test suite to make sure the module is behaving according to spec?
&gt; 
&gt; Thanks,
&gt; David
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-285785" href="/Public/Bug/Display.html?id=4759#txn-285785">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;24&nbsp;17:30:55&nbsp;2007</span>
    <span class="description">dland [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-287161" href="/Public/Bug/Display.html?id=4759#txn-287161">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;29&nbsp;08:41:59&nbsp;2007</span>
    <span class="description">dland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/287161/129323/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/129323">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 370b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have uploaded Crypt-SSLeay-0.53_02, which contains a patch to resolve
this problem. I agree with the analysis: the existing code was rather
fragile. By default, the behaviour is no longer to perform the caller
stack walk to locate a lwp object, but can be enabled explicitly if
people so desire.

Can you take it for a spin and let me know how it goes?

Regards,
David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-295627" href="/Public/Bug/Display.html?id=4759#txn-295627">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;04&nbsp;15:15:36&nbsp;2007</span>
    <span class="description">dland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/295627/133736/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/133736">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 189b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This bug has been resolved in 0.53_03. If no other issues arise from
this latest release, an official 0.54 release will be made in the next
couple of weeks.

Thanks for your patience,
David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-295630" href="/Public/Bug/Display.html?id=4759#txn-295630">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;04&nbsp;15:15:38&nbsp;2007</span>
    <span class="description">dland [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.360748</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
