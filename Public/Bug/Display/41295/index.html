<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #41295 for Net-SNMP: Net:SNMP not pulling one particualr OID</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #41295 for Net-SNMP: Net:SNMP not pulling one particualr OID</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-SNMP/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-SNMP/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-SNMP/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-SNMP/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-SNMP">Net-SNMP CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">41295</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">16 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-SNMP/Active/">Net-SNMP</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">dtown [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
KMichaels [...] atlanticbb.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-23238-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-23239-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;28&nbsp;10:39:45&nbsp;2008</span>
    <span class="description">KMichaels [...] atlanticbb.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Net:SNMP not pulling one particualr OID</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 28 Nov 2008 10:39:20 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SNMP [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Michaels, Kevin&#34; &lt;KMichaels [...] atlanticbb.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Could someone please give me some assistance with one particular OID I
can&#39;t seem to query:

 

 

 

I am using the Net::SNMP module to pull values of cable modem and
logging the results to a database.

 

One of the OID&#39;s I am trying to pull are not giving me any results, and
I can&#39;t see why.

 

The OID is .1.3.6.1.4.1.1166.1.200.4.3.0

 

Snmpget works for that OID:

 

#snmpget -v2c -c aaaaaaaa xx.xx.xx.xx .1.3.6.1.4.1.1166.1.200.4.3.0

SNMPv2-SMI::enterprises.1166.1.200.4.3.0 = INTEGER: 1

 

Here is an example of the script I am running:

 

 

#! /usr/local/bin/perl

 

use Net::SNMP;

 

      $numberbat =&#34;.1.3.6.1.4.1.1166.1.200.12.1.7.0&#34;;

        $ac = &#34;.1.3.6.1.4.1.1166.1.200.4.3.0&#34;;

 

                &#40;$session, $error&#41; = Net::SNMP-&gt;session&#40;

                       -hostname  =&gt; shift || &#34;xx.xx.xx.xx&#34;,

                       -community =&gt; shift || &#39;xxxxxxx&#39;,

                       -version =&gt; shift || &#39;2&#39;,

                       -timeout =&gt; shift || 1&#41;;

 

                        $result = $session-&gt;get_request&#40;$ac&#41;;

                        $AcPowerStatus = $result-&gt;{$ac};

 

                        $result = $session-&gt;get_request&#40;$numberbat&#41;;

                        $NumberofBatteries = $result-&gt;{$numberbat};

 

print &#34;AC Power Status $AcPowerStatus &#34;;

print &#34;\nNumber of Batteries $NumberofBatteries &#34;;

 

 

Which gives me this output:

 

AC Power Status  

Number of Batteries 1

 

Any help that I can get to figure this out would be great.

 

Thanks in advance.

 

Kevin L. Michaels

 
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;29&nbsp;08:50:21&nbsp;2008</span>
    <span class="description">dtown [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">10 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">There is no obvious error that I can see in your usage of the Net::SNMP
module.  Can you enable debugging by adding the argument &#34;-debug =&gt;
0xff&#34; to the session&#40;&#41; constructor and send me the output produced by
running the script in question?


On Fri Nov 28 10:39:45 2008, KMichaels@atlanticbb.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Could someone please give me some assistance with one particular OID I
&gt; can&#39;t seem to query:
&gt; 
&gt;  
&gt; 
&gt;  
&gt; 
&gt;  
&gt; 
&gt; I am using the Net::SNMP module to pull values of cable modem and
&gt; logging the results to a database.
&gt; 
&gt;  
&gt; 
&gt; One of the OID&#39;s I am trying to pull are not giving me any results, and
&gt; I can&#39;t see why.
&gt; 
&gt;  
&gt; 
&gt; The OID is .1.3.6.1.4.1.1166.1.200.4.3.0
&gt; 
&gt;  
&gt; 
&gt; Snmpget works for that OID:
&gt; 
&gt;  
&gt; 
&gt; #snmpget -v2c -c aaaaaaaa xx.xx.xx.xx .1.3.6.1.4.1.1166.1.200.4.3.0
&gt; 
&gt; SNMPv2-SMI::enterprises.1166.1.200.4.3.0 = INTEGER: 1
&gt; 
&gt;  
&gt; 
&gt; Here is an example of the script I am running:
&gt; 
&gt;  
&gt; 
&gt;  
&gt; 
&gt; #! /usr/local/bin/perl
&gt; 
&gt;  
&gt; 
&gt; use Net::SNMP;
&gt; 
&gt;  
&gt; 
&gt;       $numberbat =&#34;.1.3.6.1.4.1.1166.1.200.12.1.7.0&#34;;
&gt; 
&gt;         $ac = &#34;.1.3.6.1.4.1.1166.1.200.4.3.0&#34;;
&gt; 
&gt;  
&gt; 
&gt;                 &#40;$session, $error&#41; = Net::SNMP-&gt;session&#40;
&gt; 
&gt;                        -hostname  =&gt; shift || &#34;xx.xx.xx.xx&#34;,
&gt; 
&gt;                        -community =&gt; shift || &#39;xxxxxxx&#39;,
&gt; 
&gt;                        -version =&gt; shift || &#39;2&#39;,
&gt; 
&gt;                        -timeout =&gt; shift || 1&#41;;
&gt; 
&gt;  
&gt; 
&gt;                         $result = $session-&gt;get_request&#40;$ac&#41;;
&gt; 
&gt;                         $AcPowerStatus = $result-&gt;{$ac};
&gt; 
&gt;  
&gt; 
&gt;                         $result = $session-&gt;get_request&#40;$numberbat&#41;;
&gt; 
&gt;                         $NumberofBatteries = $result-&gt;{$numberbat};
&gt; 
&gt;  
&gt; 
&gt; print &#34;AC Power Status $AcPowerStatus &#34;;
&gt; 
&gt; print &#34;\nNumber of Batteries $NumberofBatteries &#34;;
&gt; 
&gt;  
&gt; 
&gt;  
&gt; 
&gt; Which gives me this output:
&gt; 
&gt;  
&gt; 
&gt; AC Power Status  
&gt; 
&gt; Number of Batteries 1
&gt; 
&gt;  
&gt; 
&gt; Any help that I can get to figure this out would be great.
&gt; 
&gt;  
&gt; 
&gt; Thanks in advance.
&gt; 
&gt;  
&gt; 
&gt; Kevin L. Michaels
&gt; 
&gt;  
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;29&nbsp;08:50:23&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;29&nbsp;08:50:25&nbsp;2008</span>
    <span class="description">dtown [...] cpan.org -  Given to DTOWN</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;01&nbsp;08:47:34&nbsp;2008</span>
    <span class="description">KMichaels [...] atlanticbb.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #41295] Net:SNMP not pulling one particualr OID </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 1 Dec 2008 08:46:16 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SNMP [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Michaels, Kevin&#34; &lt;KMichaels [...] atlanticbb.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here is the requested output.

debug: [627] Net::SNMP::Transport::_new&#40;&#41;: opened UDP/IPv4 socket [3]
debug: [968] Net::SNMP::Message::_prepare_object_identifier&#40;&#41;: leading
dot present
debug: [448] Net::SNMP::Dispatcher::_event_insert&#40;&#41;: created new head
and tail [ARRAY&#40;0x473af0&#41;]
debug: [593] Net::SNMP::Dispatcher::_event_handle&#40;&#41;: event
[ARRAY&#40;0x473af0&#41;], poll delay = 0.000000
debug: [646] Net::SNMP::Message::send&#40;&#41;: transport address
10.144.121.51:161
debug: [1896] Net::SNMP::Message::_buffer_dump&#40;&#41;: 51 bytes
[0000]  30 31 02 01  01 04 0B 63  68 61 72 74  65 72 39 33
01.....charter93
[0016]  70 61 A0 1F  02 02 22 7A  02 01 00 02  01 00 30 13
pa....&#34;z......0.
[0032]  30 11 06 0D  2B 06 01 04  01 89 0E 01  81 48 04 03
0...+........H..
[0048]  00 05 00                                             ...
debug: [202] Net::SNMP::Dispatcher::register&#40;&#41;: adding descriptor [3]
debug: [471] Net::SNMP::Dispatcher::_event_insert&#40;&#41;: modified tail
[ARRAY&#40;0x473dfc&#41;]
debug: [542] Net::SNMP::Dispatcher::_event_delete&#40;&#41;: deleted
[ARRAY&#40;0x473af0&#41;], defined new head [ARRAY&#40;0x473dfc&#41;]
debug: [593] Net::SNMP::Dispatcher::_event_handle&#40;&#41;: event
[ARRAY&#40;0x473dfc&#41;], poll delay = 0.999402
debug: [645] Net::SNMP::Dispatcher::_event_select&#40;&#41;: descriptor [3]
ready for read
debug: [670] Net::SNMP::Message::recv&#40;&#41;: transport address
10.144.121.51:161
debug: [1896] Net::SNMP::Message::_buffer_dump&#40;&#41;: 52 bytes
[0000]  30 32 02 01  01 04 0B 63  68 61 72 74  65 72 39 33
02.....charter93
[0016]  70 61 A2 20  02 02 22 7A  02 01 00 02  01 01 30 14   pa.
..&#34;z......0.
[0032]  30 12 06 0D  2B 06 01 04  01 89 0E 01  81 48 04 03
0...+........H..
[0048]  00 02 01 01                                          ....
error: [869] Net::SNMP::PDU::_process_pdu_sequence&#40;&#41;: Received
noError&#40;0&#41; error-status at error-index 1
error: [268] Net::SNMP::MessageProcessing::prepare_data_elements&#40;&#41;:
Received noError&#40;0&#41; error-status at error-index 1
error: [407] Net::SNMP::Dispatcher::_transport_response_received&#40;&#41;:
Received noError&#40;0&#41; error-status at error-index 1
debug: [524] Net::SNMP::Dispatcher::_event_delete&#40;&#41;: deleted
[ARRAY&#40;0x473dfc&#41;], list is now empty
debug: [241] Net::SNMP::Dispatcher::deregister&#40;&#41;: removing descriptor
[3]
error: [2304] Net::SNMP::__ANON__&#40;&#41;: Received noError&#40;0&#41; error-status at
error-index 1
debug: [968] Net::SNMP::Message::_prepare_object_identifier&#40;&#41;: leading
dot present
debug: [448] Net::SNMP::Dispatcher::_event_insert&#40;&#41;: created new head
and tail [ARRAY&#40;0x473940&#41;]
debug: [593] Net::SNMP::Dispatcher::_event_handle&#40;&#41;: event
[ARRAY&#40;0x473940&#41;], poll delay = 0.000000
debug: [646] Net::SNMP::Message::send&#40;&#41;: transport address
10.144.121.51:161
debug: [1896] Net::SNMP::Message::_buffer_dump&#40;&#41;: 52 bytes
[0000]  30 32 02 01  01 04 0B 63  68 61 72 74  65 72 39 33
02.....charter93
[0016]  70 61 A0 20  02 02 22 7B  02 01 00 02  01 00 30 14   pa.
..&#34;{......0.
[0032]  30 12 06 0E  2B 06 01 04  01 89 0E 01  81 48 0C 01
0...+........H..
[0048]  07 00 05 00                                          ....
debug: [202] Net::SNMP::Dispatcher::register&#40;&#41;: adding descriptor [3]
debug: [471] Net::SNMP::Dispatcher::_event_insert&#40;&#41;: modified tail
[ARRAY&#40;0x473e2c&#41;]
debug: [542] Net::SNMP::Dispatcher::_event_delete&#40;&#41;: deleted
[ARRAY&#40;0x473940&#41;], defined new head [ARRAY&#40;0x473e2c&#41;]
debug: [593] Net::SNMP::Dispatcher::_event_handle&#40;&#41;: event
[ARRAY&#40;0x473e2c&#41;], poll delay = 0.999516
debug: [645] Net::SNMP::Dispatcher::_event_select&#40;&#41;: descriptor [3]
ready for read
debug: [670] Net::SNMP::Message::recv&#40;&#41;: transport address
10.144.121.51:161
debug: [1896] Net::SNMP::Message::_buffer_dump&#40;&#41;: 53 bytes
[0000]  30 33 02 01  01 04 0B 63  68 61 72 74  65 72 39 33
03.....charter93
[0016]  70 61 A2 21  02 02 22 7B  02 01 00 02  01 00 30 15
pa.!..&#34;{......0.
[0032]  30 13 06 0E  2B 06 01 04  01 89 0E 01  81 48 0C 01
0...+........H..
[0048]  07 00 02 01  01                                      .....
debug: [1440] Net::SNMP::Message::_process_object_identifier&#40;&#41;: adding
leading dot
debug: [953] Net::SNMP::PDU::_process_var_bind_list&#40;&#41;: {
.1.3.6.1.4.1.1166.1.200.12.1.7.0 =&gt; INTEGER: 1 }
debug: [524] Net::SNMP::Dispatcher::_event_delete&#40;&#41;: deleted
[ARRAY&#40;0x473e2c&#41;], list is now empty
debug: [241] Net::SNMP::Dispatcher::deregister&#40;&#41;: removing descriptor
[3]
AC Power Status  
Number of Batteries 1

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: David M. Town via RT [mailto:bug-Net-SNMP@rt.cpan.org] 
Sent: Saturday, November 29, 2008 8:50 AM
To: Michaels, Kevin
Subject: [rt.cpan.org #41295] Net:SNMP not pulling one particualr OID 

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=41295">http://rt.cpan.org/Ticket/Display.html?id=41295</a></span> &gt;

There is no obvious error that I can see in your usage of the Net::SNMP
module.  Can you enable debugging by adding the argument &#34;-debug =&gt;
0xff&#34; to the session&#40;&#41; constructor and send me the output produced by
running the script in question?


On Fri Nov 28 10:39:45 2008, KMichaels@atlanticbb.com wrote:
<div class="message-stanza open">&gt; Could someone please give me some assistance with one particular OID I
&gt; can&#39;t seem to query:
&gt; 
&gt;  
&gt; 
&gt;  
&gt; 
&gt;  
&gt; 
&gt; I am using the Net::SNMP module to pull values of cable modem and
&gt; logging the results to a database.
&gt; 
&gt;  
&gt; 
&gt; One of the OID&#39;s I am trying to pull are not giving me any results,
</div>and
<div class="message-stanza open">&gt; I can&#39;t see why.
&gt; 
&gt;  
&gt; 
&gt; The OID is .1.3.6.1.4.1.1166.1.200.4.3.0
&gt; 
&gt;  
&gt; 
&gt; Snmpget works for that OID:
&gt; 
&gt;  
&gt; 
&gt; #snmpget -v2c -c aaaaaaaa xx.xx.xx.xx .1.3.6.1.4.1.1166.1.200.4.3.0
&gt; 
&gt; SNMPv2-SMI::enterprises.1166.1.200.4.3.0 = INTEGER: 1
&gt; 
&gt;  
&gt; 
&gt; Here is an example of the script I am running:
&gt; 
&gt;  
&gt; 
&gt;  
&gt; 
&gt; #! /usr/local/bin/perl
&gt; 
&gt;  
&gt; 
&gt; use Net::SNMP;
&gt; 
&gt;  
&gt; 
&gt;       $numberbat =&#34;.1.3.6.1.4.1.1166.1.200.12.1.7.0&#34;;
&gt; 
&gt;         $ac = &#34;.1.3.6.1.4.1.1166.1.200.4.3.0&#34;;
&gt; 
&gt;  
&gt; 
&gt;                 &#40;$session, $error&#41; = Net::SNMP-&gt;session&#40;
&gt; 
&gt;                        -hostname  =&gt; shift || &#34;xx.xx.xx.xx&#34;,
&gt; 
&gt;                        -community =&gt; shift || &#39;xxxxxxx&#39;,
&gt; 
&gt;                        -version =&gt; shift || &#39;2&#39;,
&gt; 
&gt;                        -timeout =&gt; shift || 1&#41;;
&gt; 
&gt;  
&gt; 
&gt;                         $result = $session-&gt;get_request&#40;$ac&#41;;
&gt; 
&gt;                         $AcPowerStatus = $result-&gt;{$ac};
&gt; 
&gt;  
&gt; 
&gt;                         $result = $session-&gt;get_request&#40;$numberbat&#41;;
&gt; 
&gt;                         $NumberofBatteries = $result-&gt;{$numberbat};
&gt; 
&gt;  
&gt; 
&gt; print &#34;AC Power Status $AcPowerStatus &#34;;
&gt; 
&gt; print &#34;\nNumber of Batteries $NumberofBatteries &#34;;
&gt; 
&gt;  
&gt; 
&gt;  
&gt; 
&gt; Which gives me this output:
&gt; 
&gt;  
&gt; 
&gt; AC Power Status  
&gt; 
&gt; Number of Batteries 1
&gt; 
&gt;  
&gt; 
&gt; Any help that I can get to figure this out would be great.
&gt; 
&gt;  
&gt; 
&gt; Thanks in advance.
&gt; 
&gt;  
&gt; 
&gt; Kevin L. Michaels
&gt; 
&gt;  
&gt; 
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;01&nbsp;10:39:38&nbsp;2008</span>
    <span class="description">dtown [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">5 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Kevin,

The device you are polling is incorrectly setting the &#34;error-index&#34;
field to 1 in the Response-PDU.  This should be set to 0 if there has
not been an error.  The Net::SNMP module is also being too strict. 
According to RFC 3414 a non-zero error-index should be ignored if the
error-status is noError&#40;0&#41;.  I have a pending change to this effect for
an upcoming release.  You can manually edit your existing Net::SNMP
installation to relax this check by editing the PDU.pm file &#40;most likely
in the &#34;lib/site_perl/&lt;version&gt;/Net/SNMP&#34; directory&#41;.  Remove the check
for &#34;|| &#40;$this-&gt;{_error_index}&#41;&#34; &#40;line 869 in Net::SNMP v5.2.0&#41;.

Is this a Motorola modem?  This was previously reported.

-David

On Mon Dec 01 08:47:34 2008, KMichaels@atlanticbb.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Here is the requested output.
&gt; 
&gt; debug: [1896] Net::SNMP::Message::_buffer_dump&#40;&#41;: 52 bytes
&gt; [0000]  30 32 02 01  01 04 0B 63  68 61 72 74  65 72 39 33
&gt; 02.....charter93
&gt; [0016]  70 61 A2 20  02 02 22 7A  02 01 00 02  01 01 30 14   pa.
&gt; ..&#34;z......0.
&gt; [0032]  30 12 06 0D  2B 06 01 04  01 89 0E 01  81 48 04 03
&gt; 0...+........H..
&gt; [0048]  00 02 01 01                                          ....
&gt; error: [869] Net::SNMP::PDU::_process_pdu_sequence&#40;&#41;: Received
&gt; noError&#40;0&#41; error-status at error-index 1
&gt; error: [268] Net::SNMP::MessageProcessing::prepare_data_elements&#40;&#41;:
&gt; Received noError&#40;0&#41; error-status at error-index 1
&gt; error: [407] Net::SNMP::Dispatcher::_transport_response_received&#40;&#41;:
&gt; Received noError&#40;0&#41; error-status at error-index 1
&gt; debug: [524] Net::SNMP::Dispatcher::_event_delete&#40;&#41;: deleted
&gt; [ARRAY&#40;0x473dfc&#41;], list is now empty
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;01&nbsp;11:26:10&nbsp;2008</span>
    <span class="description">KMichaels [...] atlanticbb.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #41295] Net:SNMP not pulling one particualr OID </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 1 Dec 2008 11:25:17 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SNMP [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Michaels, Kevin&#34; &lt;KMichaels [...] atlanticbb.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">David, 

That did the trick.  I removed the &#34;|| &#40;$this-&gt;{_error_index}&#41;&#34; check
out of PDU.pm.  

I hate to have to relax error checking, but I guess it is easier to
change that then have Motorola change their modems, plus even if they do
change the modems you would have to flash the firmware on every modem.

Thank you very much for you help and for an awesome module. :&#41;

Kevin Michaels



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: David M. Town via RT [mailto:bug-Net-SNMP@rt.cpan.org] 
Sent: Monday, December 01, 2008 10:40 AM
To: Michaels, Kevin
Subject: [rt.cpan.org #41295] Net:SNMP not pulling one particualr OID 

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=41295">http://rt.cpan.org/Ticket/Display.html?id=41295</a></span> &gt;

Kevin,

The device you are polling is incorrectly setting the &#34;error-index&#34;
field to 1 in the Response-PDU.  This should be set to 0 if there has
not been an error.  The Net::SNMP module is also being too strict. 
According to RFC 3414 a non-zero error-index should be ignored if the
error-status is noError&#40;0&#41;.  I have a pending change to this effect for
an upcoming release.  You can manually edit your existing Net::SNMP
installation to relax this check by editing the PDU.pm file &#40;most likely
in the &#34;lib/site_perl/&lt;version&gt;/Net/SNMP&#34; directory&#41;.  Remove the check
for &#34;|| &#40;$this-&gt;{_error_index}&#41;&#34; &#40;line 869 in Net::SNMP v5.2.0&#41;.

Is this a Motorola modem?  This was previously reported.

-David

On Mon Dec 01 08:47:34 2008, KMichaels@atlanticbb.com wrote:
<div class="message-stanza open">&gt; Here is the requested output.
&gt; 
&gt; debug: [1896] Net::SNMP::Message::_buffer_dump&#40;&#41;: 52 bytes
&gt; [0000]  30 32 02 01  01 04 0B 63  68 61 72 74  65 72 39 33
&gt; 02.....charter93
&gt; [0016]  70 61 A2 20  02 02 22 7A  02 01 00 02  01 01 30 14   pa.
&gt; ..&#34;z......0.
&gt; [0032]  30 12 06 0D  2B 06 01 04  01 89 0E 01  81 48 04 03
&gt; 0...+........H..
&gt; [0048]  00 02 01 01                                          ....
&gt; error: [869] Net::SNMP::PDU::_process_pdu_sequence&#40;&#41;: Received
&gt; noError&#40;0&#41; error-status at error-index 1
&gt; error: [268] Net::SNMP::MessageProcessing::prepare_data_elements&#40;&#41;:
&gt; Received noError&#40;0&#41; error-status at error-index 1
&gt; error: [407] Net::SNMP::Dispatcher::_transport_response_received&#40;&#41;:
&gt; Received noError&#40;0&#41; error-status at error-index 1
&gt; debug: [524] Net::SNMP::Dispatcher::_event_delete&#40;&#41;: deleted
&gt; [ARRAY&#40;0x473dfc&#41;], list is now empty
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;01&nbsp;11:32:40&nbsp;2008</span>
    <span class="description">dtown [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">1 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The relaxing of the check is in compliance with RFC 3414, so I do not
have a problem with it.

Closing ticket.

-David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;01&nbsp;11:32:43&nbsp;2008</span>
    <span class="description">dtown [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
