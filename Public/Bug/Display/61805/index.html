<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #61805 for IMDB-Film: Tests &#39;Movie Language&#39;, &#39;Movie Country&#39;, and &#39;Movies IMDB Code&#39; failed</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #61805 for IMDB-Film: Tests &#39;Movie Language&#39;, &#39;Movie Country&#39;, and &#39;Movies IMDB Code&#39; failed</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=IMDB-Film">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=IMDB-Film">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=IMDB-Film">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=IMDB-Film">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/IMDB-Film">IMDB-Film CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">61805</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=IMDB-Film">IMDB-Film</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
anton.giguz [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-16826-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.46    </td>
  </tr>
  <tr id="CF-16827-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Film.pm.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/838253/434239/Film.pm.patch">
Thu Sep 30 20:16:28 2010 (759b) by anton.giguz [...] gmail.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=61805">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-838253" href="/Public/Bug/Display.html?id=61805#txn-838253">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;30&nbsp;20:16:28&nbsp;2010</span>
    <span class="description">anton.giguz [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Tests &#39;Movie Language&#39;, &#39;Movie Country&#39;, and &#39;Movies IMDB Code&#39;
 failed</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/838253/434238/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/434238">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">IMDB-Film-0.46
This is perl, v5.10.1 &#40;*&#41; built for i486-linux-gnu-thread-multi
Linux luffy 2.6.32-24-generic #43-Ubuntu SMP Thu Sep 16 14:17:33 UTC
2010 i686 GNU/Linux

While running &#39;install IMDB::Film&#39; from the CPAN shell:


Running make test
PERL_DL_NONLAZY=1 /usr/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34;
&#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/01_base.t
t/m1_get_movie_by_code.t t/m2_get_movie_by_title.t
t/m3_get_movie_by_wrong_title.t t/m4_get_movie_by_title_single_match.t
t/m5_get_movie_by_title_without_rate.t
t/m6_get_movie_by_title_with_cr_casts.t t/m7_get_movie_by_info_offline.t
t/01_base.t .............................. ok   
t/m1_get_movie_by_code.t ................. 1/22 
#   Failed test &#39;Movie Language&#39;
#   at t/m1_get_movie_by_code.t line 57.
#          got: undef
#     expected: &#39;English&#39;

#   Failed test &#39;Movie Country&#39;
#   at t/m1_get_movie_by_code.t line 58.
#          got: undef
#     expected: &#39;USA&#39;
t/m1_get_movie_by_code.t ................. 12/22 # Looks like you failed
2 tests of 22.
t/m1_get_movie_by_code.t ................. Dubious, test returned 2
&#40;wstat 512, 0x200&#41;
Failed 2/22 subtests 
t/m2_get_movie_by_title.t ................ 1/18 
#   Failed test &#39;Movie Language&#39;
#   at t/m2_get_movie_by_title.t line 59.
#          got: undef
#     expected: &#39;English&#39;

#   Failed test &#39;Movie Country&#39;
#   at t/m2_get_movie_by_title.t line 60.
#          got: undef
#     expected: &#39;USA&#39;
t/m2_get_movie_by_title.t ................ 12/18 # Looks like you failed
2 tests of 18.
t/m2_get_movie_by_title.t ................ Dubious, test returned 2
&#40;wstat 512, 0x200&#41;
Failed 2/18 subtests 
t/m3_get_movie_by_wrong_title.t .......... ok   
t/m4_get_movie_by_title_single_match.t ... ok   
t/m5_get_movie_by_title_without_rate.t ... 1/2 
#   Failed test &#39;Movies IMDB Code&#39;
#   at t/m5_get_movie_by_title_without_rate.t line 11.
#          got: &#39;0061175&#39;
#     expected: &#39;0412158&#39;
# Looks like you failed 1 test of 2.
t/m5_get_movie_by_title_without_rate.t ... Dubious, test returned 1
&#40;wstat 256, 0x100&#41;
Failed 1/2 subtests 
t/m6_get_movie_by_title_with_cr_casts.t .. ok   
t/m7_get_movie_by_info_offline.t ......... ok   

Test Summary Report
-------------------
t/m1_get_movie_by_code.t               &#40;Wstat: 512 Tests: 22 Failed: 2&#41;
  Failed tests:  9-10
  Non-zero exit status: 2
t/m2_get_movie_by_title.t              &#40;Wstat: 512 Tests: 18 Failed: 2&#41;
  Failed tests:  9-10
  Non-zero exit status: 2
t/m5_get_movie_by_title_without_rate.t &#40;Wstat: 256 Tests: 2 Failed: 1&#41;
  Failed test:  1
  Non-zero exit status: 1
Files=8, Tests=54, 21 wallclock secs &#40; 0.05 usr  0.01 sys +  2.70 cusr 
0.16 csys =  2.92 CPU&#41;
Result: FAIL
Failed 3/8 test programs. 5/54 subtests failed.
make: *** [test_dynamic] Error 255
  STEPANOV/IMDB-Film-0.46.tar.gz
  /usr/bin/make test -- NOT OK


A patch that presumably fixes &#39;language&#39; and &#39;country&#39; issues is attached.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Film.pm.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/838253/434239/Film.pm.patch">Download Film.pm.patch</a><br />
<span class="downloadcontenttype">text/x-diff 759b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- Film.pm	2010-09-08 21:34:15.000000000 +0700
+++ Film.pm.new	2010-10-01 05:46:38.000000000 +0700
@@ -1057,7 +1057,7 @@
 		my &#40;@countries&#41;;
 		while&#40;my $tag = $parser-&gt;get_tag&#40;&#41;&#41; {
 
-			if&#40; $tag-&gt;[0] eq &#39;a&#39; &#38;&#38; $tag-&gt;[1]{href} &#38;&#38; $tag-&gt;[1]{href} =~ /countries/i &#41; {
+			if&#40; $tag-&gt;[0] eq &#39;a&#39; &#38;&#38; $tag-&gt;[1]{href} &#38;&#38; $tag-&gt;[1]{href} =~ /country/i &#41; {
 				my $text = $parser-&gt;get_text&#40;&#41;;
 				$text =~ s/\n//g;
 				push @countries, $text;
@@ -1093,7 +1093,7 @@
 
 		while&#40;$tag = $parser-&gt;get_tag&#40;&#41;&#41; {
 			
-			if&#40; $tag-&gt;[0] eq &#39;a&#39; &#38;&#38; $tag-&gt;[1]{href} &#38;&#38; $tag-&gt;[1]{href} =~ /languages/i &#41; {
+			if&#40; $tag-&gt;[0] eq &#39;a&#39; &#38;&#38; $tag-&gt;[1]{href} &#38;&#38; $tag-&gt;[1]{href} =~ /language/i &#41; {
 				my $text = $parser-&gt;get_text&#40;&#41;;
 				$text =~ s/\n//g;
 				push @languages, $text;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-841147" href="/Public/Bug/Display.html?id=61805#txn-841147">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;09&nbsp;09:44:06&nbsp;2010</span>
    <span class="description">stepanov.michael [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #61805] Tests &#39;Movie Language&#39;, &#39;Movie Country&#39;, and &#39;Movies IMDB Code&#39; failed</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 9 Oct 2010 16:43:34 +0300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-IMDB-Film [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael Stepanov &lt;stepanov.michael [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/841147/435567/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/435567">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Thanks for our bugreport. Will investigate and fix it.

On Fri, Oct 1, 2010 at 3:16 AM, Anton Giguz via RT &lt;
bug-IMDB-Film@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thu Sep 30 20:16:28 2010: Request 61805 was acted upon.
&gt; Transaction: Ticket created by giguz
&gt;       Queue: IMDB-Film
&gt;     Subject: Tests &#39;Movie Language&#39;, &#39;Movie Country&#39;, and &#39;Movies IMDB
&gt; Code&#39;
&gt;  failed
&gt;   Broken in: 0.46
&gt;    Severity: Normal
&gt;       Owner: Nobody
&gt;  Requestors: anton.giguz@gmail.com
&gt;      Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=61805">https://rt.cpan.org/Ticket/Display.html?id=61805</a></span> &gt;
&gt;
&gt;
&gt; IMDB-Film-0.46
&gt; This is perl, v5.10.1 &#40;*&#41; built for i486-linux-gnu-thread-multi
&gt; Linux luffy 2.6.32-24-generic #43-Ubuntu SMP Thu Sep 16 14:17:33 UTC
&gt; 2010 i686 GNU/Linux
&gt;
&gt; While running &#39;install IMDB::Film&#39; from the CPAN shell:
&gt;
&gt;
&gt; Running make test
&gt; PERL_DL_NONLAZY=1 /usr/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34;
&gt; &#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/01_base.t
&gt; t/m1_get_movie_by_code.t t/m2_get_movie_by_title.t
&gt; t/m3_get_movie_by_wrong_title.t t/m4_get_movie_by_title_single_match.t
&gt; t/m5_get_movie_by_title_without_rate.t
&gt; t/m6_get_movie_by_title_with_cr_casts.t t/m7_get_movie_by_info_offline.t
&gt; t/01_base.t .............................. ok
&gt; t/m1_get_movie_by_code.t ................. 1/22
&gt; #   Failed test &#39;Movie Language&#39;
&gt; #   at t/m1_get_movie_by_code.t line 57.
&gt; #          got: undef
&gt; #     expected: &#39;English&#39;
&gt;
&gt; #   Failed test &#39;Movie Country&#39;
&gt; #   at t/m1_get_movie_by_code.t line 58.
&gt; #          got: undef
&gt; #     expected: &#39;USA&#39;
&gt; t/m1_get_movie_by_code.t ................. 12/22 # Looks like you failed
&gt; 2 tests of 22.
&gt; t/m1_get_movie_by_code.t ................. Dubious, test returned 2
&gt; &#40;wstat 512, 0x200&#41;
&gt; Failed 2/22 subtests
&gt; t/m2_get_movie_by_title.t ................ 1/18
&gt; #   Failed test &#39;Movie Language&#39;
&gt; #   at t/m2_get_movie_by_title.t line 59.
&gt; #          got: undef
&gt; #     expected: &#39;English&#39;
&gt;
&gt; #   Failed test &#39;Movie Country&#39;
&gt; #   at t/m2_get_movie_by_title.t line 60.
&gt; #          got: undef
&gt; #     expected: &#39;USA&#39;
&gt; t/m2_get_movie_by_title.t ................ 12/18 # Looks like you failed
&gt; 2 tests of 18.
&gt; t/m2_get_movie_by_title.t ................ Dubious, test returned 2
&gt; &#40;wstat 512, 0x200&#41;
&gt; Failed 2/18 subtests
&gt; t/m3_get_movie_by_wrong_title.t .......... ok
&gt; t/m4_get_movie_by_title_single_match.t ... ok
&gt; t/m5_get_movie_by_title_without_rate.t ... 1/2
&gt; #   Failed test &#39;Movies IMDB Code&#39;
&gt; #   at t/m5_get_movie_by_title_without_rate.t line 11.
&gt; #          got: &#39;0061175&#39;
&gt; #     expected: &#39;0412158&#39;
&gt; # Looks like you failed 1 test of 2.
&gt; t/m5_get_movie_by_title_without_rate.t ... Dubious, test returned 1
&gt; &#40;wstat 256, 0x100&#41;
&gt; Failed 1/2 subtests
&gt; t/m6_get_movie_by_title_with_cr_casts.t .. ok
&gt; t/m7_get_movie_by_info_offline.t ......... ok
&gt;
&gt; Test Summary Report
&gt; -------------------
&gt; t/m1_get_movie_by_code.t               &#40;Wstat: 512 Tests: 22 Failed: 2&#41;
&gt;  Failed tests:  9-10
&gt;  Non-zero exit status: 2
&gt; t/m2_get_movie_by_title.t              &#40;Wstat: 512 Tests: 18 Failed: 2&#41;
&gt;  Failed tests:  9-10
&gt;  Non-zero exit status: 2
&gt; t/m5_get_movie_by_title_without_rate.t &#40;Wstat: 256 Tests: 2 Failed: 1&#41;
&gt;  Failed test:  1
&gt;  Non-zero exit status: 1
&gt; Files=8, Tests=54, 21 wallclock secs &#40; 0.05 usr  0.01 sys +  2.70 cusr
&gt; 0.16 csys =  2.92 CPU&#41;
&gt; Result: FAIL
&gt; Failed 3/8 test programs. 5/54 subtests failed.
&gt; make: *** [test_dynamic] Error 255
&gt;  STEPANOV/IMDB-Film-0.46.tar.gz
&gt;  /usr/bin/make test -- NOT OK
&gt;
&gt;
&gt; A patch that presumably fixes &#39;language&#39; and &#39;country&#39; issues is attached.
&gt;
</div>


-- 
Best regards,
Michael Stepanov
<span class="clickylink"><a target="new" rel="nofollow" href="http://linuxmce.ru">http://linuxmce.ru</a></span>
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/841147/435568/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/435568">with headers</a>
<br />
<span class="downloadcontenttype">text/html 4.4k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-841150" href="/Public/Bug/Display.html?id=61805#txn-841150">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;09&nbsp;09:44:07&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-842463" href="/Public/Bug/Display.html?id=61805#txn-842463">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;13&nbsp;04:48:55&nbsp;2010</span>
    <span class="description">stepanov.michael [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #61805] Tests &#39;Movie Language&#39;, &#39;Movie Country&#39;, and &#39;Movies IMDB Code&#39; failed</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 13 Oct 2010 11:48:26 +0300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-IMDB-Film [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael Stepanov &lt;stepanov.michael [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/842463/436197/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/436197">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

The new version of IMDB::Film 0.47 is uploaded to CPAN. It&#39;ll be available
after 2-3 hours, I guess. Please, try it and send me all found bugs.

On Fri, Oct 1, 2010 at 3:16 AM, Anton Giguz via RT &lt;
bug-IMDB-Film@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thu Sep 30 20:16:28 2010: Request 61805 was acted upon.
&gt; Transaction: Ticket created by giguz
&gt;       Queue: IMDB-Film
&gt;     Subject: Tests &#39;Movie Language&#39;, &#39;Movie Country&#39;, and &#39;Movies IMDB
&gt; Code&#39;
&gt;  failed
&gt;   Broken in: 0.46
&gt;    Severity: Normal
&gt;       Owner: Nobody
&gt;  Requestors: anton.giguz@gmail.com
&gt;      Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=61805">https://rt.cpan.org/Ticket/Display.html?id=61805</a></span> &gt;
&gt;
&gt;
&gt; IMDB-Film-0.46
&gt; This is perl, v5.10.1 &#40;*&#41; built for i486-linux-gnu-thread-multi
&gt; Linux luffy 2.6.32-24-generic #43-Ubuntu SMP Thu Sep 16 14:17:33 UTC
&gt; 2010 i686 GNU/Linux
&gt;
&gt; While running &#39;install IMDB::Film&#39; from the CPAN shell:
&gt;
&gt;
&gt; Running make test
&gt; PERL_DL_NONLAZY=1 /usr/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34;
&gt; &#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/01_base.t
&gt; t/m1_get_movie_by_code.t t/m2_get_movie_by_title.t
&gt; t/m3_get_movie_by_wrong_title.t t/m4_get_movie_by_title_single_match.t
&gt; t/m5_get_movie_by_title_without_rate.t
&gt; t/m6_get_movie_by_title_with_cr_casts.t t/m7_get_movie_by_info_offline.t
&gt; t/01_base.t .............................. ok
&gt; t/m1_get_movie_by_code.t ................. 1/22
&gt; #   Failed test &#39;Movie Language&#39;
&gt; #   at t/m1_get_movie_by_code.t line 57.
&gt; #          got: undef
&gt; #     expected: &#39;English&#39;
&gt;
&gt; #   Failed test &#39;Movie Country&#39;
&gt; #   at t/m1_get_movie_by_code.t line 58.
&gt; #          got: undef
&gt; #     expected: &#39;USA&#39;
&gt; t/m1_get_movie_by_code.t ................. 12/22 # Looks like you failed
&gt; 2 tests of 22.
&gt; t/m1_get_movie_by_code.t ................. Dubious, test returned 2
&gt; &#40;wstat 512, 0x200&#41;
&gt; Failed 2/22 subtests
&gt; t/m2_get_movie_by_title.t ................ 1/18
&gt; #   Failed test &#39;Movie Language&#39;
&gt; #   at t/m2_get_movie_by_title.t line 59.
&gt; #          got: undef
&gt; #     expected: &#39;English&#39;
&gt;
&gt; #   Failed test &#39;Movie Country&#39;
&gt; #   at t/m2_get_movie_by_title.t line 60.
&gt; #          got: undef
&gt; #     expected: &#39;USA&#39;
&gt; t/m2_get_movie_by_title.t ................ 12/18 # Looks like you failed
&gt; 2 tests of 18.
&gt; t/m2_get_movie_by_title.t ................ Dubious, test returned 2
&gt; &#40;wstat 512, 0x200&#41;
&gt; Failed 2/18 subtests
&gt; t/m3_get_movie_by_wrong_title.t .......... ok
&gt; t/m4_get_movie_by_title_single_match.t ... ok
&gt; t/m5_get_movie_by_title_without_rate.t ... 1/2
&gt; #   Failed test &#39;Movies IMDB Code&#39;
&gt; #   at t/m5_get_movie_by_title_without_rate.t line 11.
&gt; #          got: &#39;0061175&#39;
&gt; #     expected: &#39;0412158&#39;
&gt; # Looks like you failed 1 test of 2.
&gt; t/m5_get_movie_by_title_without_rate.t ... Dubious, test returned 1
&gt; &#40;wstat 256, 0x100&#41;
&gt; Failed 1/2 subtests
&gt; t/m6_get_movie_by_title_with_cr_casts.t .. ok
&gt; t/m7_get_movie_by_info_offline.t ......... ok
&gt;
&gt; Test Summary Report
&gt; -------------------
&gt; t/m1_get_movie_by_code.t               &#40;Wstat: 512 Tests: 22 Failed: 2&#41;
&gt;  Failed tests:  9-10
&gt;  Non-zero exit status: 2
&gt; t/m2_get_movie_by_title.t              &#40;Wstat: 512 Tests: 18 Failed: 2&#41;
&gt;  Failed tests:  9-10
&gt;  Non-zero exit status: 2
&gt; t/m5_get_movie_by_title_without_rate.t &#40;Wstat: 256 Tests: 2 Failed: 1&#41;
&gt;  Failed test:  1
&gt;  Non-zero exit status: 1
&gt; Files=8, Tests=54, 21 wallclock secs &#40; 0.05 usr  0.01 sys +  2.70 cusr
&gt; 0.16 csys =  2.92 CPU&#41;
&gt; Result: FAIL
&gt; Failed 3/8 test programs. 5/54 subtests failed.
&gt; make: *** [test_dynamic] Error 255
&gt;  STEPANOV/IMDB-Film-0.46.tar.gz
&gt;  /usr/bin/make test -- NOT OK
&gt;
&gt;
&gt; A patch that presumably fixes &#39;language&#39; and &#39;country&#39; issues is attached.
&gt;
</div>


-- 
Best regards,
Michael Stepanov
<span class="clickylink"><a target="new" rel="nofollow" href="http://linuxmce.ru">http://linuxmce.ru</a></span>
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/842463/436198/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/436198">with headers</a>
<br />
<span class="downloadcontenttype">text/html 4.5k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-842499" href="/Public/Bug/Display.html?id=61805#txn-842499">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;13&nbsp;08:07:39&nbsp;2010</span>
    <span class="description">http://vrurg.livejournal.com/ -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/842499/436220/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/436220">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 13 04:48:55 2010, stepanov.michael@gmail.com wrote:


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The new version of IMDB::Film 0.47 is uploaded to CPAN. It&#39;ll be available
&gt; after 2-3 hours, I guess. Please, try it and send me all found bugs.
</div>
TV series support? I was impatient enough to make a patch. So far, it
doesn&#39;t break any test. Yet, it is passing a new one I have added. :&#41;

Drawbacks: IMDB&#39;s naming of &#39;kinds&#39; become the default. I.e., &#39;video
movie&#39; is &#39;video&#39; now; &#39;tv mini series&#39; -&gt; &#39;tv mini-series&#39;. I see no
point of making it backward compatible so left as-is. %FILM_KIND is left
alone.

diff -Nubr orig/IMDB-Film-0.47/lib/IMDB/Film.pm
IMDB-Film-0.47/lib/IMDB/Film.pm
--- orig/IMDB-Film-0.47/lib/IMDB/Film.pm        2010-10-13 11:39:16.000000000 +0300
+++ IMDB-Film-0.47/lib/IMDB/Film.pm     2010-10-13 14:52:11.000000000 +0300
@@ -371,12 +371,9 @@
                        
                        $self-&gt;_show_message&#40;&#34;title: $title&#34;, &#39;DEBUG&#39;&#41;;
 
-                       # TODO: implement parsing of TV series like ALF &#40;TV Series 1986–1990&#41;
-                       &#40;$self-&gt;{_title}, $self-&gt;{_year}, $self-&gt;{_kind}&#41; = $title =~
m!&#40;.*?&#41;\s+\&#40;&#40;\d{4}&#41;\&#41;&#40;?:\s\&#40;&#40;\w*&#41;\&#41;&#41;?!;
-                       unless&#40;$self-&gt;{_title}&#41; {
-                               &#40;$self-&gt;{_title}, $self-&gt;{_kind}, $self-&gt;{_year}&#41; = $title =~
m!&#40;.*?&#41;\s+\&#40;&#40;.*?&#41;?\s?&#40;[0-9\-]*&#41;\&#41;!;
-                       }
-                       $self-&gt;{_kind} = &#39;&#39; unless $self-&gt;{_kind};
+                       &#40;$self-&gt;{_title}, $self-&gt;{_kind}, $self-&gt;{_year}&#41; = $title =~
m!^&#40;.*?&#41;\s+\&#40;&#40;?:&#40;.*?&#41;\s&#41;?&#40;\d{4}&#41;\D!;
+                       $self-&gt;{_kind} = &#39;movie&#39; unless $self-&gt;{_kind};
+                       $self-&gt;{_kind} = lc&#40;$self-&gt;{_kind}&#41;;
                        
                        # &#34;The Series&#34; An Episode &#40;2005&#41;
                        # &#34;The Series&#34; &#40;2005&#41;
@@ -401,7 +398,7 @@
 
 sub kind {
        my CLASS_NAME $self = shift;
-       return $FILM_KIND{$self-&gt;{_kind}};
+       return $self-&gt;{_kind};
 }
 
 =item year&#40;&#41;
diff -Nubr orig/IMDB-Film-0.47/t/m8_tv_series.t
IMDB-Film-0.47/t/m8_tv_series.t
--- orig/IMDB-Film-0.47/t/m8_tv_series.t        1970-01-01 03:00:00.000000000 +0300
+++ IMDB-Film-0.47/t/m8_tv_series.t     2010-10-13 14:45:30.000000000 +0300
@@ -0,0 +1,27 @@
+use strict;
+use warnings;
+
+use Test::More tests =&gt; 9;
+
+use IMDB::Film;
+use Data::Dumper;
+
+my $crit = &#39;0088571&#39;;
+my %films = &#40;
+    date =&gt; &#39;3 March 1985&#39;,
+    plot =&gt; &#39;This is the pilot episode of the &#34;Moonlighting&#34; &#40;1985&#41;
television series. Madeline \&#39;Maddie\&#39; Hayes, a wealthy former model,
discovers one morning that her business manager has stolen all the money
she has in the bank. However, it turns out that she still owns some
non-liquid assets -- money-losing companies which were maintained as tax
write-offs -- one of which is a detective agency run by David Addison.
Maddie meets with him to inform him that the company is to be shut down,
but he tries to persuade her to keep it open by convincing her that the
detective agency can make money. To prove it, David brings Maddie into a
murder case involving a mysterious wristwatch and four million dollars
worth of smuggled diamonds.&#39;,
+    title =&gt; &#39;Moonlighting &#40;Pilot&#41;&#39;,
+    id =&gt; &#39;0089619&#39;,
+    episode =&gt; 1,
+    season =&gt; 1
+&#41;;
+
+my %pars = &#40;cache =&gt; 0, debug =&gt; 0, crit =&gt; $crit&#41;;
+
+my $obj = new IMDB::Film&#40;%pars&#41;;
+isa_ok&#40;$obj, &#39;IMDB::Film&#39;&#41;;    
+
+is&#40;$obj-&gt;kind, &#39;tv series&#39;, &#39;Entry kind&#39;&#41;;
+is&#40;scalar&#40;@{$obj-&gt;episodes}&#41;, 66, &#39;TV series episodes&#39;&#41;;
+my $episode = $obj-&gt;episodes-&gt;[0];
+is&#40;$episode-&gt;{$_}, $films{$_}, &#34;Episode $_&#34;&#41; foreach keys %films;
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.539577</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
