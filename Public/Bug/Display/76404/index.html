<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #76404 for Data-Model: bleadperl &#40;?&#41; breaks Data-Model</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #76404 for Data-Model: bleadperl &#40;?&#41; breaks Data-Model</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Data-Model">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Data-Model">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Data-Model">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Data-Model">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/yappo/p5-Data-Model/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Data-Model">Data-Model CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">76404</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Data-Model">Data-Model</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
SREZIC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-227860-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.00007    </td>
  </tr>
  <tr id="CF-227861-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




open_nJORTpUn.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1264915/669773/open_nJORTpUn.txt">
Thu Sep 19 18:42:59 2013 (1.1k) by $_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=76404">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1065333" href="/Public/Bug/Display.html?id=76404#txn-1065333">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;08&nbsp;04:52:26&nbsp;2012</span>
    <span class="description">SREZIC [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> bleadperl &#40;?&#41; breaks Data-Model</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1065333/560091/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/560091">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 288b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On my freebsd 8.0 system with bleadperl 5.15.9+ &#40;commit id
d005e6a6a9ca86c3b2f1eaa7b931b085cf8a205b&#41; the test suite fails. Looking at
<span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=Data-Model-0.00007">http://matrix.cpantesters.org/?dist=Data-Model-0.00007</a></span> there are also
other systems using bleadperl where the test suite is failing.

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1065505" href="/Public/Bug/Display.html?id=76404#txn-1065505">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;08&nbsp;15:37:26&nbsp;2012</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1065505/560187/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/560187">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 383b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Apr 08 04:52:26 2012, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On my freebsd 8.0 system with bleadperl 5.15.9+ &#40;commit id
&gt; d005e6a6a9ca86c3b2f1eaa7b931b085cf8a205b&#41; the test suite fails. Looking at
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=Data-Model-0.00007">http://matrix.cpantesters.org/?dist=Data-Model-0.00007</a></span> there are also
&gt; other systems using bleadperl where the test suite is failing.
</div>
It passes for me with v5.15.9-89-geade715, four commits later.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1065508" href="/Public/Bug/Display.html?id=76404#txn-1065508">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;08&nbsp;15:37:27&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1065865" href="/Public/Bug/Display.html?id=76404#txn-1065865">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;09&nbsp;10:23:03&nbsp;2012</span>
    <span class="description">slaven [...] rezic.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> SREZIC [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #76404] bleadperl &#40;?&#41; breaks Data-Model</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 09 Apr 2012 16:22:45 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Data-Model [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Slaven Rezic &lt;slaven [...] rezic.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1065865/560366/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/560366">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 792b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Father Chrysostomos via RT&#34; &lt;bug-Data-Model@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=76404">https://rt.cpan.org/Ticket/Display.html?id=76404</a></span> &gt;
&gt;
&gt; On Sun Apr 08 04:52:26 2012, SREZIC wrote:
<div class="message-stanza open">&gt;&gt; On my freebsd 8.0 system with bleadperl 5.15.9+ &#40;commit id
&gt;&gt; d005e6a6a9ca86c3b2f1eaa7b931b085cf8a205b&#41; the test suite fails. Looking at
&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=Data-Model-0.00007">http://matrix.cpantesters.org/?dist=Data-Model-0.00007</a></span> there are also
&gt;&gt; other systems using bleadperl where the test suite is failing.
</div>&gt;
&gt; It passes for me with v5.15.9-89-geade715, four commits later.
&gt;
</div>
It passes also for me on a different system with v5.15.9-123-gbd9cbc4,
while it fails on that system with 5.14.2. So it&#39;s probably NOT a
bleadperl issue.

Regards,
    Slaven

-- 
Slaven Rezic - slaven &lt;at&gt; rezic &lt;dot&gt; de

    Berlin Perl Mongers - <span class="clickylink"><a target="new" rel="nofollow" href="http://berlin.pm.org">http://berlin.pm.org</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1122490" href="/Public/Bug/Display.html?id=76404#txn-1122490">#</a>      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;23&nbsp;06:52:22&nbsp;2012</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1122490/590557/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/590557">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 848b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I found a new pattern regarding t/060_driver/memcached/serializer.t: if
Data-MessagePack isn&#39;t installed, then the test is skipped, so we get a
pass; if perl is unthreaded, then it works with all Data-MessagePack
versions up to current 0.46; if perl is threaded, then the MessagePack
version makes a difference: if it is 0.34 or lower, then the test in
Data-Model works, regardless; if it is 0.36..0.46, then it fails.

Sumarizing in a table, I hope it doesn&#39;t get distorted by RT:

|         |           | =======perl========== |
|         |           | threaded | unthreaded |
|         |           |          |            |
| message | 0.36-0.46 | FAIL     | PASS       |
| pack    | &lt;=0.34    | PASS     | PASS       |
|         | missing   | PASS     | PASS       |

I have verified that this pattern holds with 22 different bleadperls. YMMV.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1122579" href="/Public/Bug/Display.html?id=76404#txn-1122579">#</a>      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;23&nbsp;15:32:42&nbsp;2012</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1122579/590608/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/590608">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 950b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Sep 23 06:52:22 2012, ANDK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I found a new pattern regarding t/060_driver/memcached/serializer.t: if
&gt; Data-MessagePack isn&#39;t installed, then the test is skipped, so we get a
&gt; pass; if perl is unthreaded, then it works with all Data-MessagePack
&gt; versions up to current 0.46; if perl is threaded, then the MessagePack
&gt; version makes a difference: if it is 0.34 or lower, then the test in
&gt; Data-Model works, regardless; if it is 0.36..0.46, then it fails.
&gt; 
&gt; Sumarizing in a table, I hope it doesn&#39;t get distorted by RT:
&gt; 
&gt; |         |           | =======perl========== |
&gt; |         |           | threaded | unthreaded |
&gt; |         |           |          |            |
&gt; | message | 0.36-0.46 | FAIL     | PASS       |
&gt; | pack    | &lt;=0.34    | PASS     | PASS       |
&gt; |         | missing   | PASS     | PASS       |
&gt; 
&gt; I have verified that this pattern holds with 22 different bleadperls. YMMV.
</div>
Does it happen with 5.14?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1122703" href="/Public/Bug/Display.html?id=76404#txn-1122703">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;24&nbsp;02:07:30&nbsp;2012</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1122703/590662/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/590662">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 58b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes, the four 5.14.2 perls I have follow the same pattern.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1264915" href="/Public/Bug/Display.html?id=76404#txn-1264915">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;19&nbsp;18:42:59&nbsp;2013</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1264915/669772/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/669772">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Sep 23 06:52:22 2012, ANDK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I found a new pattern regarding t/060_driver/memcached/serializer.t: if
&gt; Data-MessagePack isn&#39;t installed, then the test is skipped, so we get a
&gt; pass; if perl is unthreaded, then it works with all Data-MessagePack
&gt; versions up to current 0.46; if perl is threaded, then the MessagePack
&gt; version makes a difference: if it is 0.34 or lower, then the test in
&gt; Data-Model works, regardless; if it is 0.36..0.46, then it fails.
&gt; 
&gt; Sumarizing in a table, I hope it doesn&#39;t get distorted by RT:
&gt; 
&gt; |         |           | =======perl========== |
&gt; |         |           | threaded | unthreaded |
&gt; |         |           |          |            |
&gt; | message | 0.36-0.46 | FAIL     | PASS       |
&gt; | pack    | &lt;=0.34    | PASS     | PASS       |
&gt; |         | missing   | PASS     | PASS       |
&gt; 
&gt; I have verified that this pattern holds with 22 different bleadperls. YMMV.
</div>
I had completely forgotten about this ticket.  Yâ€™know, this is probably the same issue as &lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/rt3/Ticket/Display.html?id=119771">https://rt.perl.org/rt3/Ticket/Display.html?id=119771</a></span>&gt; which occurs because Data::MessagePack is behaving differently depending on a boolean read from uninitialized memory.

t/060_driver/memcached/serializer.t depends on Data::MessagePackâ€™s sorting hashes when serialising them.

Data::MessagePack makes no guarantee that it will do that.  What it actually does is random, depending on what order things are arranged in memory.

The attached patch makes sure that Data::MessagePackâ€™s canonical option is used in the test, for the sake of comparing output.

Data::Modelâ€™s tests fail for me on Perl 5.19.4 &#40;to be released tomorrow&#41; without this patch, but pass with 5.18.1.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> open_nJORTpUn.txt</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1264915/669773/open_nJORTpUn.txt">Download open_nJORTpUn.txt</a><br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -rup /Users/sprout/.cpan/build/Data-Model-0.00008-lTnemK-orig/t/060_driver/memcached/serializer.t /Users/sprout/.cpan/build/Data-Model-0.00008-lTnemK/t/060_driver/memcached/serializer.t
--- /Users/sprout/.cpan/build/Data-Model-0.00008-lTnemK-orig/t/060_driver/memcached/serializer.t	2013-07-08 04:19:47.000000000 -0700
+++ /Users/sprout/.cpan/build/Data-Model-0.00008-lTnemK/t/060_driver/memcached/serializer.t	2013-09-19 14:48:28.000000000 -0700
@@ -7,6 +7,19 @@ our $has_dmp = 0;
 if &#40;eval &#34;use Data::MessagePack; if &#40;\$Data::MessagePack::VERSION &gt;= 0.05 &#41; { 1 } else { 0 }&#34;&#41; {
     plan tests =&gt; 100;
     $has_dmp = 1;
+    # Data::MessagePack has no way to specify a global default for the
+    # canonical value, which we need for testing in order to compare out-
+    # put.  It can only be done on a per-object basis.  So wrap its pack
+    # method to enforce canonicity.
+    my $dmp = new Data::MessagePack -&gt;canonical;
+    my $orig = Data::MessagePack-&gt;can&#40;&#34;pack&#34;&#41;;
+    no warnings &#39;redefine&#39;;
+    *Data::MessagePack::pack = sub {
+        if &#40;!length ref $_[0]&#41; {
+            splice @_, 0, 1, $dmp;
+        }
+	goto &#38;$orig
+    };
 } else {
     plan tests =&gt; 20;
     $has_dmp = 0;
</div></div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.465408</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
