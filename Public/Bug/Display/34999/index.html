<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #34999 for Statistics-Descriptive: Bug in freq distribution</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #34999 for Statistics-Descriptive: Bug in freq distribution</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Statistics-Descriptive/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Statistics-Descriptive/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Statistics-Descriptive/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Statistics-Descriptive/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Statistics-Descriptive">Statistics-Descriptive CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">34999</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Statistics-Descriptive/Active/">Statistics-Descriptive</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
andres.caceresvelilla [...] telefonica.es

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-29728-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-29729-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;14&nbsp;06:41:08&nbsp;2008</span>
    <span class="description">andres.caceresvelilla [...] telefonica.es -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Bug in freq distribution</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 14 Apr 2008 12:39:48 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Statistics-Descriptive [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> andres.caceresvelilla [...] telefonica.es</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">

Hello, thanks for your attention and sorry for my English!

I do not know whether this has been reported before. I get this error on a
Win32 perl 5.8.3 and I guess it&#39;s related with precission &#40;see the code
generated output&#41;.

Please test this. Test data is included.
&#40;See attached file: bugdistfreq.pl&#41;

I get 21 partitions and I should get 20.

This is probably the partition limit to blame: 784.999999999999 . Too close
to the max value &#40;785&#41;.

And this may be the piece of code that makes it go mad. Somehow, testing
&#34;&#40;$iter+= $interval&#41; &lt; $self-&gt;{max} &#34; is not robust enough so it performs
an additional iteration &#40;1 more iteration than partitions&#41;.

return undef unless $partitions &gt;= 1;
my $interval = $self-&gt;{sample_range}/$partitions;
my $iter = $self-&gt;{min};
while &#40;&#40;$iter += $interval&#41; &lt;  $self-&gt;{max}&#41; {
  $bins{$iter} = 0;
 push @k, $iter;  ##Keep the &#34;keys&#34; unstringified
 }
 $bins{$self-&gt;{max}} = 0;
 push @k, $self-&gt;{max};


I think you may solve it by controlling the number of iterations so if you
have performed one extra iteration, you just pop the last value and add it
to the new last value.

Another smarter way to solve it is always assigning the max value to the
last partition.

Thanks a lot for your module, I love it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">___________________________________________________________________________

Este mensaje se dirige exclusivamente a su destinatario y puede contener
información privilegiada o confidencial. Si no es vd. el destinatario
indicado, queda notificado de que la lectura, utilización, divulgación y/o
copia sin autorización está prohibida en virtud de la legislación vigente.
Si ha recibido este mensaje por error, le rogamos que nos lo comunique
inmediatamente por esta misma vía y proceda a su destrucción.

El correo electrónico vía Internet no permite asegurar la confidencialidad
de los mensajes que se transmiten ni su integridad o correcta recepción.
Telefónica no asume ninguna responsabilidad por estas circunstancias.


This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by a professional privilege
or whose disclosure is prohibited by law.If you are not the intended
recipient you are hereby notified that any read, dissemination, copy or
disclosure of this communication is strictly prohibited by law. If this
message has been received in error, please immediately notify us via e-mail
and delete it.

Internet e-mail neither guarantees the confidentiality nor the integrity or
proper receipt of the messages sent. Telefónica does not assume any
liability for those circumstances.
<div class="message-stanza open">___________________________________________________________________________
</div></div></div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;24&nbsp;07:35:24&nbsp;2009</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi!

Thanks for your bug report. I am not the originator or the PAUSE-blessed
current maintainer of the module, but I have a development branch for it
here:

<span class="clickylink"><a target="new" rel="nofollow" href="http://svn.berlios.de/svnroot/repos/web-cpan/Statistics-Descriptive/">http://svn.berlios.de/svnroot/repos/web-cpan/Statistics-Descriptive/</a></span>

I adapted your script to a test script in the trunk and I fixed it in 
revision 3528.

Thank you, again!

Regards,

        Shlomi Fish


On Mon Apr 14 06:41:08 2008, andres.caceresvelilla@telefonica.es wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 
&gt; Hello, thanks for your attention and sorry for my English!
&gt; 
&gt; I do not know whether this has been reported before. I get this error on a
&gt; Win32 perl 5.8.3 and I guess it&#39;s related with precission &#40;see the code
&gt; generated output&#41;.
&gt; 
&gt; Please test this. Test data is included.
&gt; &#40;See attached file: bugdistfreq.pl&#41;
&gt; 
&gt; I get 21 partitions and I should get 20.
&gt; 
&gt; This is probably the partition limit to blame: 784.999999999999 . Too
</div>close
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; to the max value &#40;785&#41;.
&gt; 
&gt; And this may be the piece of code that makes it go mad. Somehow, testing
&gt; &#34;&#40;$iter+= $interval&#41; &lt; $self-&gt;{max} &#34; is not robust enough so it performs
&gt; an additional iteration &#40;1 more iteration than partitions&#41;.
&gt; 
&gt; return undef unless $partitions &gt;= 1;
&gt; my $interval = $self-&gt;{sample_range}/$partitions;
&gt; my $iter = $self-&gt;{min};
&gt; while &#40;&#40;$iter += $interval&#41; &lt;  $self-&gt;{max}&#41; {
&gt;   $bins{$iter} = 0;
&gt;  push @k, $iter;  ##Keep the &#34;keys&#34; unstringified
&gt;  }
&gt;  $bins{$self-&gt;{max}} = 0;
&gt;  push @k, $self-&gt;{max};
&gt; 
&gt; 
&gt; I think you may solve it by controlling the number of iterations so if you
&gt; have performed one extra iteration, you just pop the last value and add it
&gt; to the new last value.
&gt; 
&gt; Another smarter way to solve it is always assigning the max value to the
&gt; last partition.
&gt; 
&gt; Thanks a lot for your module, I love it.
&gt; 
&gt;
</div><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">___________________________________________________________________________
<div class="message-stanza open">&gt; 
&gt; Este mensaje se dirige exclusivamente a su destinatario y puede contener
&gt; información privilegiada o confidencial. Si no es vd. el destinatario
&gt; indicado, queda notificado de que la lectura, utilización, divulgación y/o
&gt; copia sin autorización está prohibida en virtud de la legislación vigente.
&gt; Si ha recibido este mensaje por error, le rogamos que nos lo comunique
&gt; inmediatamente por esta misma vía y proceda a su destrucción.
&gt; 
&gt; El correo electrónico vía Internet no permite asegurar la confidencialidad
&gt; de los mensajes que se transmiten ni su integridad o correcta recepción.
&gt; Telefónica no asume ninguna responsabilidad por estas circunstancias.
&gt; 
&gt; 
&gt; This message is intended exclusively for its addressee and may contain
&gt; information that is CONFIDENTIAL and protected by a professional privilege
&gt; or whose disclosure is prohibited by law.If you are not the intended
&gt; recipient you are hereby notified that any read, dissemination, copy or
&gt; disclosure of this communication is strictly prohibited by law. If this
&gt; message has been received in error, please immediately notify us via
</div>e-mail
<div class="message-stanza open">&gt; and delete it.
&gt; 
&gt; Internet e-mail neither guarantees the confidentiality nor the
</div>integrity or
<div class="message-stanza open">&gt; proper receipt of the messages sent. Telefónica does not assume any
&gt; liability for those circumstances.
&gt;
</div><div class="message-stanza open">___________________________________________________________________________
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;24&nbsp;07:35:25&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;03&nbsp;05:14:51&nbsp;2009</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for your report. This bug is now fixed in the svn, and the
corrected module will be released on CPAN soon.

Regards,

-- Shlomi Fish
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;03&nbsp;05:14:52&nbsp;2009</span>
    <span class="description">SHLOMIF [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
