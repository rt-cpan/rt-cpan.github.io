<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #118824 for Net-SIP: Test failures</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #118824 for Net-SIP: Test failures</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-SIP/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-SIP/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-SIP/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-SIP/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-SIP">Net-SIP CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">118824</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-SIP/Active/">Net-SIP</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
gregoa [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-42110-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
0.690</li>
<li>
0.691</li>
<li>
0.700</li>
</ul>
    </td>
  </tr>
  <tr id="CF-42111-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;17&nbsp;15:47:22&nbsp;2016</span>
    <span class="description">gregoa [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Test failures</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">0.690 and 0.691 fail the test suite sometimes:

<span class="clickylink"><a target="new" rel="nofollow" href="https://buildd.debian.org/status/fetch.php?pkg=libnet-sip-perl&#38;arch=all&#38;ver=0.690-1&#38;stamp=1477852334">https://buildd.debian.org/status/fetch.php?pkg=libnet-sip-perl&#38;arch=all&#38;ver=0.690-1&#38;stamp=1477852334</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rbuild/unstable/amd64/libnet-sip-perl_0.691-1.rbuild.log">https://tests.reproducible-builds.org/debian/rbuild/unstable/amd64/libnet-sip-perl_0.691-1.rbuild.log</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rbuild/unstable/i386/libnet-sip-perl_0.691-1.rbuild.log">https://tests.reproducible-builds.org/debian/rbuild/unstable/i386/libnet-sip-perl_0.691-1.rbuild.log</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rbuild/unstable/armhf/libnet-sip-perl_0.691-1.rbuild.log">https://tests.reproducible-builds.org/debian/rbuild/unstable/armhf/libnet-sip-perl_0.691-1.rbuild.log</a></span>

0.700 even fails on my laptop where previous version worked &#40;logs attached&#41;.

The amount of failing tests seems to correlate with the load on the machine … Cf. second log.

Cheers,
gregor, Debian Perl Group
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> libnet-sip-perl_0.700-1_amd64.build</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> libnet-sip-perl_0.700-1_amd64.build.highload</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;17&nbsp;16:34:38&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Am Do 17. Nov 2016, 15:47:22, GREGOA schrieb:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 0.690 and 0.691 fail the test suite sometimes:
</div>
Thanks for reporting. It should be fixed in 0.701 where a bug in async TCP connect was fixed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;17&nbsp;16:34:38&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;17&nbsp;16:34:44&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;17&nbsp;20:05:46&nbsp;2016</span>
    <span class="description">gregoa [...] debian.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #118824] Test failures</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 18 Nov 2016 02:05:23 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Steffen Ullrich via RT &lt;bug-Net-SIP [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> gregor herrmann &lt;gregoa [...] debian.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, 17 Nov 2016 16:34:38 -0500, Steffen Ullrich via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=118824">https://rt.cpan.org/Ticket/Display.html?id=118824</a></span> &gt;
&gt; 
&gt; Am Do 17. Nov 2016, 15:47:22, GREGOA schrieb:
<div class="message-stanza open">&gt; &gt; 0.690 and 0.691 fail the test suite sometimes:
</div>&gt; Thanks for reporting. It should be fixed in 0.701 where a bug in async TCP connect was fixed.
</div>
Wow, that was fast - thanks!

Unfortunately I still get test failures &#40;without artificial load&#41;,
once in two test runs &#40;the first succeeded …&#41;:

t/07_call_on_hold.t ..................... 
1..64
# ------- test with family ip4 transport udp
# uas &gt;&gt; OK
# &lt;&lt;
ok 1 - [uas] OK
# uas &gt;&gt; Listening
# &lt;&lt;
ok 2 - [uas] Listening
# uac &gt;&gt; OK
# &lt;&lt;
ok 3 - [uac] OK
# uac &gt;&gt; Started
# &lt;&lt;
ok 4 - [uac] Started
# uas &gt;&gt; Call accepted
# &lt;&lt;
ok 5 - [uas] Call accepted
# uac &gt;&gt; Start RTP
# &lt;&lt;
ok 6 - [uac] Start RTP
# uac &gt;&gt; RTP#50#
# &lt;&lt;
ok 7 - [uac] RTP\#50\#
# uas &gt;&gt; got rtp packet#50
# Starting ReInvite
# &lt;&lt;
ok 8 - [uas] got rtp packet\#50
ok 9 - [uas] Starting ReInvite
# uac &gt;&gt; Got ReInvite
# &lt;&lt;
ok 10 - [uac] Got ReInvite
# uas &gt;&gt; Start RTP
# &lt;&lt;
ok 11 - [uas] Start RTP
# uas &gt;&gt; RTP#50#
# &lt;&lt;
ok 12 - [uas] RTP\#50\#
# uac &gt;&gt; got rtp packet#50
# Send BYE
# &lt;&lt;
ok 13 - [uac] got rtp packet\#50
ok 14 - [uac] Send BYE
# uas &gt;&gt; Received BYE after 0 bytes read
# &lt;&lt;
ok 15 - [uas] Received BYE after 0 bytes read
# uac &gt;&gt; BYE done
# &lt;&lt;
ok 16 - [uac] BYE done
# ------- test with family ip6 transport udp
# uas &gt;&gt; OK
# &lt;&lt;
ok 17 - [uas] OK
# uas &gt;&gt; Listening
# &lt;&lt;
ok 18 - [uas] Listening
# uac &gt;&gt; OK
# &lt;&lt;
ok 19 - [uac] OK
# uac &gt;&gt; Started
# &lt;&lt;
ok 20 - [uac] Started
# uas &gt;&gt; Call accepted
# &lt;&lt;
ok 21 - [uas] Call accepted
# uac &gt;&gt; Start RTP
# &lt;&lt;
ok 22 - [uac] Start RTP
# uac &gt;&gt; RTP#50#
# &lt;&lt;
ok 23 - [uac] RTP\#50\#
# uas &gt;&gt; got rtp packet#50
# Starting ReInvite
# &lt;&lt;
ok 24 - [uas] got rtp packet\#50
ok 25 - [uas] Starting ReInvite
# uac &gt;&gt; Got ReInvite
# &lt;&lt;
ok 26 - [uac] Got ReInvite
# uas &gt;&gt; Start RTP
# &lt;&lt;
ok 27 - [uas] Start RTP
# uas &gt;&gt; RTP#50#
# &lt;&lt;
ok 28 - [uas] RTP\#50\#
# uac &gt;&gt; got rtp packet#50
# Send BYE
# &lt;&lt;
ok 29 - [uac] got rtp packet\#50
ok 30 - [uac] Send BYE
# uas &gt;&gt; Received BYE after 0 bytes read
# &lt;&lt;
ok 31 - [uas] Received BYE after 0 bytes read
# uac &gt;&gt; BYE done
# &lt;&lt;
ok 32 - [uac] BYE done
# ------- test with family ip4 transport tcp
# uas &gt;&gt; OK
# &lt;&lt;
ok 33 - [uas] OK
# uas &gt;&gt; Listening
# &lt;&lt;
ok 34 - [uas] Listening
# uac &gt;&gt; OK
# &lt;&lt;
ok 35 - [uac] OK
# uac &gt;&gt; Started
# &lt;&lt;
ok 36 - [uac] Started
not ok 37 - [uas] Call accepted

#   Failed test &#39;[uas] Call accepted&#39;
#   at ./t/testlib.pl line 173.
not ok 38 - fatal error at ./t/testlib.pl line 174.
# 

#   Failed test &#39;fatal error at ./t/testlib.pl line 174.
# &#39;
#   at ./t/testlib.pl line 30.
# Looks like you planned 64 tests but ran 38.
# Looks like you failed 2 tests of 38 run.
# Looks like your test exited with 1 just after 38.
Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 28/64 subtests 


Please tell me if there&#39;s anything I can try to help you narrow down
the problem.


/*

As a side note: lintian &#40;our static package analyzer&#41; finds some
spelling mistakes in the POD:

I: libnet-sip-perl: spelling-error-in-manpage usr/share/man/man3/Net::SIP::Dispatcher::Eventloop.3pm.gz completly completely
I: libnet-sip-perl: spelling-error-in-manpage usr/share/man/man3/Net::SIP::Leg.3pm.gz specifiy specify
I: libnet-sip-perl: spelling-error-in-manpage usr/share/man/man3/Net::SIP::SocketPool.3pm.gz orgin origin

*/


Cheers,
gregor

-- 
 .&#39;&#39;`.  <span class="clickylink"><a target="new" rel="nofollow" href="https://info.comodo.priv.at/">https://info.comodo.priv.at/</a></span> - Debian Developer <span class="clickylink"><a target="new" rel="nofollow" href="https://www.debian.org">https://www.debian.org</a></span>
 : :&#39; : OpenPGP fingerprint D1E1 316E 93A7 60A8 104D  85FA BB3A 6801 8649 AA06
 `. `&#39;  Member of VIBE!AT &#38; SPI, fellow of the Free Software Foundation Europe
   `-   NP: Flying Pickets: Deep Feeling
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;18&nbsp;02:35:26&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;18&nbsp;04:02:20&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Am Do 17. Nov 2016, 20:05:46, gregoa@debian.org schrieb:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Unfortunately I still get test failures &#40;without artificial load&#41;,
&gt; once in two test runs &#40;the first succeeded …&#41;:
</div>
I&#39;ve detected and fixed some other race conditions in TCP handling. Should be hopefully be fixed now.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As a side note: lintian &#40;our static package analyzer&#41; finds some
&gt; spelling mistakes in the POD:
</div>
I&#39;ve fixed these too.

Thanks a lot,
Steffen
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;18&nbsp;04:02:20&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;18&nbsp;10:52:01&nbsp;2016</span>
    <span class="description">gregoa [...] debian.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #118824] Test failures</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 18 Nov 2016 16:51:42 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Steffen Ullrich via RT &lt;bug-Net-SIP [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> gregor herrmann &lt;gregoa [...] debian.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, 18 Nov 2016 04:02:20 -0500, Steffen Ullrich via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=118824">https://rt.cpan.org/Ticket/Display.html?id=118824</a></span> &gt;
&gt; 
<div class="message-stanza open">&gt; &gt; Unfortunately I still get test failures &#40;without artificial load&#41;,
&gt; &gt; once in two test runs &#40;the first succeeded …&#41;:
</div>&gt; I&#39;ve detected and fixed some other race conditions in TCP handling. Should be hopefully be fixed now.
</div>
Thanks!
0.702 indeed looks fine on my laptop, with and without additional
load.

I&#39;ve uploaded it to Debian/unstable right now and I&#39;ll keep an eye of
the results on the various build and test services.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; As a side note: lintian &#40;our static package analyzer&#41; finds some
&gt; &gt; spelling mistakes in the POD:
</div>&gt; I&#39;ve fixed these too.
</div>
Thanks.


Cheers,
gregor 

-- 
 .&#39;&#39;`.  <span class="clickylink"><a target="new" rel="nofollow" href="https://info.comodo.priv.at/">https://info.comodo.priv.at/</a></span> - Debian Developer <span class="clickylink"><a target="new" rel="nofollow" href="https://www.debian.org">https://www.debian.org</a></span>
 : :&#39; : OpenPGP fingerprint D1E1 316E 93A7 60A8 104D  85FA BB3A 6801 8649 AA06
 `. `&#39;  Member of VIBE!AT &#38; SPI, fellow of the Free Software Foundation Europe
   `-   NP: The Eagles: New kid in town
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;19&nbsp;16:04:19&nbsp;2016</span>
    <span class="description">gregoa [...] debian.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #118824] Test failures</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 19 Nov 2016 22:03:50 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> gregor herrmann via RT &lt;bug-Net-SIP [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> gregor herrmann &lt;gregoa [...] debian.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, 18 Nov 2016 10:52:02 -0500, gregor herrmann via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=118824">https://rt.cpan.org/Ticket/Display.html?id=118824</a></span> &gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve uploaded it to Debian/unstable right now and I&#39;ll keep an eye of
&gt; the results on the various build and test services.
</div>
The results are a bit mixed:
success on the buildd and the ci.debian.net server:
<span class="clickylink"><a target="new" rel="nofollow" href="https://buildd.debian.org/status/logs.php?pkg=libnet-sip-perl&#38;ver=0.702-1">https://buildd.debian.org/status/logs.php?pkg=libnet-sip-perl&#38;ver=0.702-1</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://ci.debian.net/packages/libn/libnet-sip-perl/unstable/amd64/">https://ci.debian.net/packages/libn/libnet-sip-perl/unstable/amd64/</a></span>

But failures on the 3 reproducible-build machines:
<span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rb-pkg/unstable/amd64/libnet-sip-perl.html">https://tests.reproducible-builds.org/debian/rb-pkg/unstable/amd64/libnet-sip-perl.html</a></span>
--&gt;
<span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rbuild/unstable/amd64/libnet-sip-perl_0.702-1.rbuild.log">https://tests.reproducible-builds.org/debian/rbuild/unstable/amd64/libnet-sip-perl_0.702-1.rbuild.log</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rbuild/unstable/i386/libnet-sip-perl_0.702-1.rbuild.log">https://tests.reproducible-builds.org/debian/rbuild/unstable/i386/libnet-sip-perl_0.702-1.rbuild.log</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rbuild/unstable/armhf/libnet-sip-perl_0.702-1.rbuild.log">https://tests.reproducible-builds.org/debian/rbuild/unstable/armhf/libnet-sip-perl_0.702-1.rbuild.log</a></span>


Cheers,
gregor

-- 
 .&#39;&#39;`.  <span class="clickylink"><a target="new" rel="nofollow" href="https://info.comodo.priv.at/">https://info.comodo.priv.at/</a></span> - Debian Developer <span class="clickylink"><a target="new" rel="nofollow" href="https://www.debian.org">https://www.debian.org</a></span>
 : :&#39; : OpenPGP fingerprint D1E1 316E 93A7 60A8 104D  85FA BB3A 6801 8649 AA06
 `. `&#39;  Member of VIBE!AT &#38; SPI, fellow of the Free Software Foundation Europe
   `-   NP: John Zorn &#38; Masada: Mochin
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;20&nbsp;10:44:56&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;20&nbsp;10:51:43&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Am Sa 19. Nov 2016, 16:04:19, gregoa@debian.org schrieb:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri, 18 Nov 2016 10:52:02 -0500, gregor herrmann via RT wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=118824">https://rt.cpan.org/Ticket/Display.html?id=118824</a></span> &gt;
</div>&gt; 
<div class="message-stanza open">&gt; &gt; I&#39;ve uploaded it to Debian/unstable right now and I&#39;ll keep an eye of
&gt; &gt; the results on the various build and test services.
</div>&gt; 
&gt; The results are a bit mixed:
&gt; success on the buildd and the ci.debian.net server:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://buildd.debian.org/status/logs.php?pkg=libnet-sip-">https://buildd.debian.org/status/logs.php?pkg=libnet-sip-</a></span>
&gt; perl&#38;ver=0.702-1
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://ci.debian.net/packages/libn/libnet-sip-perl/unstable/amd64/">https://ci.debian.net/packages/libn/libnet-sip-perl/unstable/amd64/</a></span>
</div>
This looks for me like a very strange network setup on these systems where localhost IP 127.0.0.1 does not exist or cannot properly used to bind a socket &#40;to a random port&#41;. I think I&#39;ve seen similar strange setups in some container environments. Could you please check the setup of these systems?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;20&nbsp;11:41:15&nbsp;2016</span>
    <span class="description">gregoa [...] debian.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> reproducible-builds [...] lists.alioth.debian.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #118824] Test failures</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 20 Nov 2016 17:40:51 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Steffen Ullrich via RT &lt;bug-Net-SIP [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> gregor herrmann &lt;gregoa [...] debian.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun, 20 Nov 2016 10:51:44 -0500, Steffen Ullrich via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=118824">https://rt.cpan.org/Ticket/Display.html?id=118824</a></span> &gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; The results are a bit mixed:
&gt; &gt; success on the buildd and the ci.debian.net server:
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://buildd.debian.org/status/logs.php?pkg=libnet-sip-perl&#38;ver=0.702-1">https://buildd.debian.org/status/logs.php?pkg=libnet-sip-perl&#38;ver=0.702-1</a></span>
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://ci.debian.net/packages/libn/libnet-sip-perl/unstable/amd64/">https://ci.debian.net/packages/libn/libnet-sip-perl/unstable/amd64/</a></span>
&gt; &gt; 
&gt; &gt; But failures on the 3 reproducible-build machines:
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rb-pkg/unstable/amd64/libnet-sip-perl.html">https://tests.reproducible-builds.org/debian/rb-pkg/unstable/amd64/libnet-sip-perl.html</a></span>
&gt; &gt; --&gt;
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rbuild/unstable/amd64/libnet-sip-perl_0.702-1.rbuild.log">https://tests.reproducible-builds.org/debian/rbuild/unstable/amd64/libnet-sip-perl_0.702-1.rbuild.log</a></span>
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rbuild/unstable/i386/libnet-sip-perl_0.702-1.rbuild.log">https://tests.reproducible-builds.org/debian/rbuild/unstable/i386/libnet-sip-perl_0.702-1.rbuild.log</a></span>
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rbuild/unstable/armhf/libnet-sip-perl_0.702-1.rbuild.log">https://tests.reproducible-builds.org/debian/rbuild/unstable/armhf/libnet-sip-perl_0.702-1.rbuild.log</a></span>
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This looks for me like a very strange network setup on these
&gt; systems where localhost IP 127.0.0.1 does not exist or cannot
&gt; properly used to bind a socket &#40;to a random port&#41;. 
</div>
Indeed, I was surprised about those messages as well.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I think I&#39;ve
&gt; seen similar strange setups in some container environments. Could
&gt; you please check the setup of these systems?
</div>
I can&#39;t check myself but I&#39;ve added the Debian reproducible build
folks in Cc who can probably tell us more about the setup or might
even have an idea about the failures.

I don&#39;t think it&#39;s a general &#34;can&#39;t bind to 127.0.0.1&#34; case because
then we&#39;d see tons of failure for all packages with some kind of
network tests. But somethings weird indeed …

Cheers,
gregor

-- 
 .&#39;&#39;`.  <span class="clickylink"><a target="new" rel="nofollow" href="https://info.comodo.priv.at/">https://info.comodo.priv.at/</a></span> - Debian Developer <span class="clickylink"><a target="new" rel="nofollow" href="https://www.debian.org">https://www.debian.org</a></span>
 : :&#39; : OpenPGP fingerprint D1E1 316E 93A7 60A8 104D  85FA BB3A 6801 8649 AA06
 `. `&#39;  Member of VIBE!AT &#38; SPI, fellow of the Free Software Foundation Europe
   `-   NP: Aimee Mann: Susan
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;26&nbsp;14:50:53&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;02&nbsp;15:02:54&nbsp;2016</span>
    <span class="description">ntyni [...] iki.fi -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ntyni [...] iki.fi</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Nov 20 10:51:43 2016, SULLR wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This looks for me like a very strange network setup on these systems
&gt; where localhost IP 127.0.0.1 does not exist or cannot properly used to
&gt; bind a socket &#40;to a random port&#41;. I think I&#39;ve seen similar strange
&gt; setups in some container environments. Could you please check the
&gt; setup of these systems?
</div>
I believe the issue is that those systems have no &#39;real&#39; network interfaces, only &#39;lo&#39; &#40;so 127.0.0.1 does exist&#41;.

This can be easily reproduced on Linux systems with &#39;unshare -n&#39; and &#39;ip li set lo up&#39;.

I think it&#39;s about IO::Socket::IP passing getaddrinfoflags =&gt; AI_ADDRCONFIG by default.

IO::Socket::SSL had similar problems in the past, worked around in 2.024 by setting GetAddrInfoFlags to 0.

Hope this helps a bit,
-- 
Niko Tyni
ntyni@debian.org
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;02&nbsp;15:05:15&nbsp;2016</span>
    <span class="description">gregoa [...] cpan.org -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;06&nbsp;08:36:18&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I believe the issue is that those systems have no &#39;real&#39; network
&gt; interfaces, only &#39;lo&#39; &#40;so 127.0.0.1 does exist&#41;.
&gt; 
&gt; This can be easily reproduced on Linux systems with &#39;unshare -n&#39; and
&gt; &#39;ip li set lo up&#39;.
&gt; 
&gt; I think it&#39;s about IO::Socket::IP passing getaddrinfoflags =&gt;
&gt; AI_ADDRCONFIG by default.
&gt; 
&gt; IO::Socket::SSL had similar problems in the past, worked around in
&gt; 2.024 by setting GetAddrInfoFlags to 0.
</div>
I&#39;ve tried to put the same workarounds now in Net::SIP 0.806. Let&#39;s see how this works out.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;06&nbsp;08:36:19&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;06&nbsp;14:46:52&nbsp;2016</span>
    <span class="description">gregoa [...] debian.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> ntyni [...] debian.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #118824] Test failures</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 6 Dec 2016 20:46:10 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Steffen Ullrich via RT &lt;bug-Net-SIP [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> gregor herrmann &lt;gregoa [...] debian.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, 06 Dec 2016 08:36:19 -0500, Steffen Ullrich via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=118824">https://rt.cpan.org/Ticket/Display.html?id=118824</a></span> &gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; I think it&#39;s about IO::Socket::IP passing getaddrinfoflags =&gt;
&gt; &gt; AI_ADDRCONFIG by default.
&gt; &gt; 
&gt; &gt; IO::Socket::SSL had similar problems in the past, worked around in
&gt; &gt; 2.024 by setting GetAddrInfoFlags to 0.
</div>&gt; 
&gt; I&#39;ve tried to put the same workarounds now in Net::SIP 0.806. Let&#39;s see how this works out.
</div>
Thanks.


I wanted to upload 0.806 to Debian/unstable but I get a test failure:


Odd number of elements in hash assignment at /build/libnet-sip-perl-0.806/blib/lib/Net/SIP/Util.pm line 32.

#   Failed test &#39;[proxy] &#40;?^:O&gt;.*REQ\&#40;INVITE\&#41; SDP: audio=\S+&#41;&#39;
#   at ./t/testlib.pl line 234.

#   Failed test &#39;Died at t/05_call_with_stateless_proxy.t line 105.
# &#39;
#   at ./t/testlib.pl line 31.
# Looks like you planned 378 tests but ran 52.
# Looks like you failed 2 tests of 52 run.
# Looks like your test exited with 1 just after 52.


Full log attached.

Cheers,
gregor

-- 
 .&#39;&#39;`.  <span class="clickylink"><a target="new" rel="nofollow" href="https://info.comodo.priv.at/">https://info.comodo.priv.at/</a></span> - Debian Developer <span class="clickylink"><a target="new" rel="nofollow" href="https://www.debian.org">https://www.debian.org</a></span>
 : :&#39; : OpenPGP fingerprint D1E1 316E 93A7 60A8 104D  85FA BB3A 6801 8649 AA06
 `. `&#39;  Member of VIBE!AT &#38; SPI, fellow of the Free Software Foundation Europe
   `-   NP: John Lennon: Power To The People
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;07&nbsp;00:59:27&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;07&nbsp;01:33:47&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I wanted to upload 0.806 to Debian/unstable but I get a test failure:
</div>
This should be fixed in 0.807
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;07&nbsp;01:33:57&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;07&nbsp;18:11:58&nbsp;2016</span>
    <span class="description">gregoa [...] debian.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> ntyni [...] debian.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #118824] Test failures</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 8 Dec 2016 00:11:38 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Steffen Ullrich via RT &lt;bug-Net-SIP [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> gregor herrmann &lt;gregoa [...] debian.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, 07 Dec 2016 01:33:47 -0500, Steffen Ullrich via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=118824">https://rt.cpan.org/Ticket/Display.html?id=118824</a></span> &gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; I wanted to upload 0.806 to Debian/unstable but I get a test failure:
</div>&gt; This should be fixed in 0.807
</div>
Thank you.
Looks good locally, so uploaded to Debian.

The reproducible build servers have built it only for armhf so far,
and it looks like we have failures again:
<span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rb-pkg/unstable/armhf/libnet-sip-perl.html">https://tests.reproducible-builds.org/debian/rb-pkg/unstable/armhf/libnet-sip-perl.html</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rbuild/unstable/armhf/libnet-sip-perl_0.807-1.rbuild.log">https://tests.reproducible-builds.org/debian/rbuild/unstable/armhf/libnet-sip-perl_0.807-1.rbuild.log</a></span>

Cheers,
gregor 

-- 
 .&#39;&#39;`.  <span class="clickylink"><a target="new" rel="nofollow" href="https://info.comodo.priv.at/">https://info.comodo.priv.at/</a></span> - Debian Developer <span class="clickylink"><a target="new" rel="nofollow" href="https://www.debian.org">https://www.debian.org</a></span>
 : :&#39; : OpenPGP fingerprint D1E1 316E 93A7 60A8 104D  85FA BB3A 6801 8649 AA06
 `. `&#39;  Member of VIBE!AT &#38; SPI, fellow of the Free Software Foundation Europe
   `-   NP: Tony Joe White: Goin&#39; Down Rockin&#39;
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;08&nbsp;03:13:37&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; The reproducible build servers have built it only for armhf so far,
&gt; and it looks like we have failures again:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rb-">https://tests.reproducible-builds.org/debian/rb-</a></span>
&gt; pkg/unstable/armhf/libnet-sip-perl.html
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible">https://tests.reproducible</a></span>-
&gt; builds.org/debian/rbuild/unstable/armhf/libnet-sip-perl_0.807-
&gt; 1.rbuild.log
</div>
Although the path says that this is a test with 0.807 it looks like that it actually is doing a test with 0.802.
From the report:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Use of uninitialized value $laddr in concatenation &#40;.&#41; or string at /build/1st/libnet-sip-perl-0.802/blib/lib/Net/SIP/Util.pm line 364.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;08&nbsp;11:49:15&nbsp;2016</span>
    <span class="description">gregoa [...] debian.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #118824] Test failures</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 8 Dec 2016 17:48:54 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Steffen Ullrich via RT &lt;bug-Net-SIP [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> gregor herrmann &lt;gregoa [...] debian.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, 08 Dec 2016 03:13:37 -0500, Steffen Ullrich via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=118824">https://rt.cpan.org/Ticket/Display.html?id=118824</a></span> &gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; The reproducible build servers have built it only for armhf so far,
&gt; &gt; and it looks like we have failures again:
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rb-pkg/unstable/armhf/libnet-sip-perl.html">https://tests.reproducible-builds.org/debian/rb-pkg/unstable/armhf/libnet-sip-perl.html</a></span>
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rbuild/unstable/armhf/libnet-sip-perl_0.807-1.rbuild.log">https://tests.reproducible-builds.org/debian/rbuild/unstable/armhf/libnet-sip-perl_0.807-1.rbuild.log</a></span>
</div>&gt; 
&gt; Although the path says that this is a test with 0.807 it looks like that it actually is doing a test with 0.802.
&gt; From the report:
&gt; 
<div class="message-stanza open">&gt; &gt; Use of uninitialized value $laddr in concatenation &#40;.&#41; or string at /build/1st/libnet-sip-perl-0.802/blib/lib/Net/SIP/Util.pm line 364.
</div></div>
Oops, good catch, sorry for missing this yesterday.

What we now have is:

amd64:
<span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rb-pkg/unstable/amd64/libnet-sip-perl.html">https://tests.reproducible-builds.org/debian/rb-pkg/unstable/amd64/libnet-sip-perl.html</a></span>
with 2 successful builds:
<span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rbuild/unstable/amd64/libnet-sip-perl_0.807-1.rbuild.log">https://tests.reproducible-builds.org/debian/rbuild/unstable/amd64/libnet-sip-perl_0.807-1.rbuild.log</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/logs/unstable/amd64/libnet-sip-perl_0.807-1.build2.log.gz">https://tests.reproducible-builds.org/debian/logs/unstable/amd64/libnet-sip-perl_0.807-1.build2.log.gz</a></span>

i386:
<span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rb-pkg/unstable/i386/libnet-sip-perl.html">https://tests.reproducible-builds.org/debian/rb-pkg/unstable/i386/libnet-sip-perl.html</a></span>
with 1 success:
<span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rbuild/unstable/i386/libnet-sip-perl_0.807-1.rbuild.log">https://tests.reproducible-builds.org/debian/rbuild/unstable/i386/libnet-sip-perl_0.807-1.rbuild.log</a></span>
and 1 failure &#40;which looks differently&#41;:
<span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/logs/unstable/i386/libnet-sip-perl_0.807-1.build2.log.gz">https://tests.reproducible-builds.org/debian/logs/unstable/i386/libnet-sip-perl_0.807-1.build2.log.gz</a></span>


Test Summary Report
-------------------
t/19_call_with_dtmf.t                 &#40;Wstat: 512 Tests: 54 Failed: 2&#41;
  Failed tests:  17-18
  Non-zero exit status: 2
Files=17, Tests=1027, 212 wallclock secs &#40; 0.59 usr  0.14 sys + 35.19 cusr  3.37 csys = 39.29 CPU&#41;
Result: FAIL


armhf:
<span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rb-pkg/unstable/armhf/libnet-sip-perl.html">https://tests.reproducible-builds.org/debian/rb-pkg/unstable/armhf/libnet-sip-perl.html</a></span>
still the same weird build:
<span class="clickylink"><a target="new" rel="nofollow" href="https://tests.reproducible-builds.org/debian/rbuild/unstable/armhf/libnet-sip-perl_0.807-1.rbuild.log">https://tests.reproducible-builds.org/debian/rbuild/unstable/armhf/libnet-sip-perl_0.807-1.rbuild.log</a></span>
&#40;it downloads 0.807-1 and then unpacks and builds 0.802-1&#41;


So it seems that the original bug is indeed fixed, great!
Maybe you have some idea what the new test failure on i386 is about?


Cheers,
gregor

-- 
 .&#39;&#39;`.  <span class="clickylink"><a target="new" rel="nofollow" href="https://info.comodo.priv.at/">https://info.comodo.priv.at/</a></span> - Debian Developer <span class="clickylink"><a target="new" rel="nofollow" href="https://www.debian.org">https://www.debian.org</a></span>
 : :&#39; : OpenPGP fingerprint D1E1 316E 93A7 60A8 104D  85FA BB3A 6801 8649 AA06
 `. `&#39;  Member of VIBE!AT &#38; SPI, fellow of the Free Software Foundation Europe
   `-   NP: Peter Jones: Will You Pretend You&#39;re Blind
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;14&nbsp;01:45:47&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; t/19_call_with_dtmf.t                 &#40;Wstat: 512 Tests: 54 Failed: 2&#41;
</div>
0.808 is out there which specifically address problem with this test on terrible slow systems. cpantester reports look good so far, i.e. it now succeeds on the systems it failed before.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;14&nbsp;13:14:25&nbsp;2016</span>
    <span class="description">gregoa [...] debian.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #118824] Test failures</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 14 Dec 2016 19:14:01 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Steffen Ullrich via RT &lt;bug-Net-SIP [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> gregor herrmann &lt;gregoa [...] debian.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, 14 Dec 2016 01:45:47 -0500, Steffen Ullrich via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=118824">https://rt.cpan.org/Ticket/Display.html?id=118824</a></span> &gt;
&gt; 
&gt; 
<div class="message-stanza open">&gt; &gt; t/19_call_with_dtmf.t                 &#40;Wstat: 512 Tests: 54 Failed: 2&#41;
</div>&gt; 
&gt; 0.808 is out there which specifically address problem with this
&gt; test on terrible slow systems. cpantester reports look good so far,
&gt; i.e. it now succeeds on the systems it failed before.
</div>
Thank you!
Uploaded to Debian. 


Cheers,
gregor

-- 
 .&#39;&#39;`.  <span class="clickylink"><a target="new" rel="nofollow" href="https://info.comodo.priv.at/">https://info.comodo.priv.at/</a></span> - Debian Developer <span class="clickylink"><a target="new" rel="nofollow" href="https://www.debian.org">https://www.debian.org</a></span>
 : :&#39; : OpenPGP fingerprint D1E1 316E 93A7 60A8 104D  85FA BB3A 6801 8649 AA06
 `. `&#39;  Member of VIBE!AT &#38; SPI, fellow of the Free Software Foundation Europe
   `-   NP: The Who: My Generation
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
