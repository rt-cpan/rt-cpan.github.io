<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #133205 for CPAN: Experimental &#39;recommends_policy&#39; option, turned on by default, leads to surprises for users</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #133205 for CPAN: Experimental &#39;recommends_policy&#39; option, turned on by default, leads to surprises for users</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=CPAN">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=CPAN">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=CPAN">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=CPAN">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/CPAN">CPAN CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">133205</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=CPAN">CPAN</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jkeenan [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-8164-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-8165-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




cpan-vs-cpanm-recommends-suggests.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1909234/1022760/cpan-vs-cpanm-recommends-suggests.txt">
Fri Aug 21 14:13:40 2020 (14.3k) by jkeenan [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=133205">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1909234" href="/Public/Bug/Display.html?id=133205#txn-1909234">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;21&nbsp;14:13:40&nbsp;2020</span>
    <span class="description">jkeenan [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Experimental &#39;recommends_policy&#39; option, turned on by default,
 leads to surprises for users</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1909234/1022759/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1022759">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 5.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The man page for CPAN.pm &#40;e.g., <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/release/ANDK/CPAN-2.28/lib/CPAN.pm&#41;">https://metacpan.org/pod/release/ANDK/CPAN-2.28/lib/CPAN.pm&#41;</a></span> lists these two configuration variables:

#####
recommends_policy  whether recommended prerequisites should be included
...
suggests_policy    whether suggested prerequisites should be included
#####

This man page provides no further documentation of these policies.  One has to go deeper into the distribution, to lib/CPAN/FirstTime.pm, to find a more complete description:

#####
recommends_policy
    &#40;Experimental feature!&#41; Some CPAN modules recommend additional, optional dependencies. These should generally be installed except in resource constrained environments. When this policy is true, recommended modules will be included with required modules.
...
suggests_policy
    &#40;Experimental feature!&#41; Some CPAN modules suggest additional, optional dependencies. These &#39;suggest&#39; dependencies provide enhanced operation. When this policy is true, suggested modules will be included with required modules.
#####

These features appear to have been added to the CPAN distribution around 2013, which means that they have been shipping with the Perl core distribution since 2014.

Now, when I see some functionality described as an &#39;Experimental feature&#39;, my assumption is that it is turned OFF by default and that if I want to use it I have to type some code that turns it ON.  For example, if in perl-5.32, I want to use the &#39;lexical_subs&#39; feature, I have to say:  &#34;use experimental &#39;lexical_subs&#39;;&#34;.

&#39;suggests_policy&#39; is turned OFF by default, but &#39;recommends_policy&#39; is turned on.  Granted, you do have that statement there say that &#39;recommends&#39; modules should be installed except where resources don&#39;t permit.  But you don&#39;t explicitly say that this is turned ON by default &#40;which I would guess means that &#39;y&#39; is the default choice in the installation script&#41;.

For me, this has repeatedly had adverse consequences which have caused me to generally prefer &#39;cpanm&#39; as my installer over &#39;cpan&#39;.

In my attempts over recent years to provide another approach to the &#34;Blead Breaks CPAN&#34; problem, I have run a program, &#34;CPAN River 3000,&#34; in which I attempt to install 3000 CPAN distributions against a monthly development release of perl -- and install them in dependency order.  So the guts of that program essentially is:

#####
cat list-of-3000-modules | xargs ./bin/cpanm
#####

..., then parse the .cpanm build log and analyze results.

&#39;cpanm&#39; apparently does *not* attempt to install modules listed in a distro&#39;s &#39;runtime:recommends&#39;, &#39;runtime:suggests&#39; or similar metadata stanzas.  So that means that the modules actually installed against a monthly perl release very closely track the list of 3000 modules I feed to &#39;cpanm&#39;.  In particular, it means that if I do not want a particular distro to be included in the list of 3000 modules &#40;say, it times out too much during testing or goes into infinite loops&#41;, then it&#39;s not very difficult for me to exclude it and to exclude its reverse dependencies as well.  I run no risk of pulling in a badly behaved distro that happens to be listed in another distro&#39;s &#39;runtime:recommends&#39; or &#39;testing:recommends&#39; metadata.

In simple terms, &#39;cpanm&#39; DWIMs.

&#39;cpanm&#39;, however, turns out to be much less &#39;strict-compliant&#39; than &#39;cpan&#39;.  In Perl 5 this is of little consequence.  But suppose I&#39;m working on a future version of perl in which strict is turned on by default.  In other words, suppose I&#39;m working on a leading candidate for Perl 7 &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/atoomic/perl/issues/153&#41;">https://github.com/atoomic/perl/issues/153&#41;</a></span>.  It turns out that &#39;cpanm&#39; so far fails with Perl 7 for a variety of reasons.  And since it&#39;s code is fat-packed, it&#39;s not easy for someone not named Miyagawa to hack on it.

Miraculously, &#39;cpan&#39; works with Perl 7 right out of the box.  So the first time I went to try to install CPAN modules in dependency order &#40;a &#34;CPAN River 200&#34; rather than a &#34;3000&#34;&#41; against a Perl 7 executable, it Just Worked!

Well, it worked until I got to SOAP::Lite, which is #520 in my most recent calculation of the CPAN River.  SOAP::Lite has many modules in its &#39;recommends&#39; and &#39;suggests&#39; section.  &#39;cpan&#39; manages to install SOAP::Lite and then -- since, by default, CPAN::FirstTime&#39;s &#39;recommends_policy&#39; is ON by default -- it proceeds to try to install all the distros in its &#39;runtime:recommends&#39; section -- and *their* dependencies -- until it gets to &#39;mod_perl&#39;.

And there all hell breaks loose.  See:  <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131952#txn-1909221">https://rt.cpan.org/Ticket/Display.html?id=131952#txn-1909221</a></span>.  Also, at this point see the plain-text file I am attaching to this ticket which provides data about side-by-side attempts to install SOAP::Lite with &#39;cpanm&#39; and &#39;cpan&#39;.

Recommendations:

* &#39;recommends_policy&#39; and &#39;suggests_policy&#39; have presumably been &#34;experimental&#34; for 6 years now.  Perhaps it&#39;s time to reconsider their status.

* Regardless of whether &#39;recommends_policy&#39; remains experimental or not, it should be set to OFF by default.  This would require revision of the documentation in CPAN::FirstTime above, and it would require a *one-character* code change at line 956 of lib/CPAN/FirstTime.pm.  &#40;I can supply a pull request upon request.&#41;

* If for some reason you want to continue to have &#39;recommends_policy&#39; set to ON by default, then that decision should appear in the Config Variables section of CPAN.pm &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/CPAN#Config-Variables&#41;">https://metacpan.org/pod/CPAN#Config-Variables&#41;</a></span>.  It should not simply be buried in CPAN::FirstTime.

* I install perls for testing purposes *many* times a week, using a shell script to do so.  That shell script uses a &#39;wget&#39; to fetch and install &#39;cpanm&#39; immediately after it installs perl.  If I am to use &#39;cpan&#39; in a similar manner, then I need a shell one-liner that I can include in my shell script that immediately turns &#39;recommends_policy&#39; OFF for any CPAN.pm or &#39;cpan&#39; I install.  Can you provide me with such a one-liner?

Thank you very much.
Jim Keenan
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> cpan-vs-cpanm-recommends-suggests.txt</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1909234/1022760/cpan-vs-cpanm-recommends-suggests.txt">Download cpan-vs-cpanm-recommends-suggests.txt</a><br />
<span class="downloadcontenttype">text/plain 14.3k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1909237" href="/Public/Bug/Display.html?id=133205#txn-1909237">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;21&nbsp;14:22:32&nbsp;2020</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1909237/1022763/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1022763">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2020-08-21 11:13:40, JKEENAN wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This man page provides no further documentation of these policies.
&gt; One has to go deeper into the distribution, to lib/CPAN/FirstTime.pm,
&gt; to find a more complete description:
</div>
The documentation for the &#39;recommends&#39; and &#39;suggests&#39; properties of
distribution metadata is documented here: <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/CPAN::Meta::Spec#Relationships">https://metacpan.org/pod/CPAN::Meta::Spec#Relationships</a></span>

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Now, when I see some functionality described as an &#39;Experimental
&gt; feature&#39;, my assumption is that it is turned OFF by default and that
&gt; if I want to use it I have to type some code that turns it ON.  For
&gt; example, if in perl-5.32, I want to use the &#39;lexical_subs&#39; feature, I
&gt; have to say:  &#34;use experimental &#39;lexical_subs&#39;;&#34;.
&gt; 
&gt; &#39;suggests_policy&#39; is turned OFF by default, but &#39;recommends_policy&#39; is
&gt; turned on.  Granted, you do have that statement there say that
&gt; &#39;recommends&#39; modules should be installed except where resources don&#39;t
&gt; permit.  But you don&#39;t explicitly say that this is turned ON by
&gt; default &#40;which I would guess means that &#39;y&#39; is the default choice in
&gt; the installation script&#41;.
</div>
CPAN.pm&#39;s defaults for these values are correct, with respect to the CPAN Meta Specification.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In simple terms, &#39;cpanm&#39; DWIMs.
</div>
..but, actually, is less conformant to the specification.

CPAN clients *should* attempt to install all &#39;recommends&#39; prerequisites by default,
but any installation failure encountered downstream of that attempt should not
constitute an overall failure in the installation of the original distribution.
This work still needs to be done in both CPAN.pm and cpanminus. cpanminus does not
attempt to install recommended prerequisites at all &#40;by default&#41;. CPAN.pm does, but
failures encountered on that path result in overall failures when they should not.

Simply altering the value of the default is not a proper fix -- the
real fix is much more complicated than that.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1909238" href="/Public/Bug/Display.html?id=133205#txn-1909238">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;21&nbsp;14:22:32&nbsp;2020</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1909241" href="/Public/Bug/Display.html?id=133205#txn-1909241">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;21&nbsp;14:31:11&nbsp;2020</span>
    <span class="description">jkeenan [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #133205] Experimental &#39;recommends_policy&#39; option, turned on by default, leads to surprises for users</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 21 Aug 2020 14:30:58 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org, jkeenan [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> James E Keenan &lt;jkeenan [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1909241/1022766/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1022766">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 8/21/20 2:22 PM, Karen Etheridge via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=133205">https://rt.cpan.org/Ticket/Display.html?id=133205</a></span> &gt;
&gt; 
&gt; On 2020-08-21 11:13:40, JKEENAN wrote:
&gt; 
<div class="message-stanza open">&gt;&gt; This man page provides no further documentation of these policies.
&gt;&gt; One has to go deeper into the distribution, to lib/CPAN/FirstTime.pm,
&gt;&gt; to find a more complete description:
</div>&gt; 
&gt; The documentation for the &#39;recommends&#39; and &#39;suggests&#39; properties of
&gt; distribution metadata is documented here: <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/CPAN::Meta::Spec#Relationships">https://metacpan.org/pod/CPAN::Meta::Spec#Relationships</a></span>
&gt; 
<div class="message-stanza open">&gt;&gt; Now, when I see some functionality described as an &#39;Experimental
&gt;&gt; feature&#39;, my assumption is that it is turned OFF by default and that
&gt;&gt; if I want to use it I have to type some code that turns it ON.  For
&gt;&gt; example, if in perl-5.32, I want to use the &#39;lexical_subs&#39; feature, I
&gt;&gt; have to say:  &#34;use experimental &#39;lexical_subs&#39;;&#34;.
&gt;&gt;
&gt;&gt; &#39;suggests_policy&#39; is turned OFF by default, but &#39;recommends_policy&#39; is
&gt;&gt; turned on.  Granted, you do have that statement there say that
&gt;&gt; &#39;recommends&#39; modules should be installed except where resources don&#39;t
&gt;&gt; permit.  But you don&#39;t explicitly say that this is turned ON by
&gt;&gt; default &#40;which I would guess means that &#39;y&#39; is the default choice in
&gt;&gt; the installation script&#41;.
</div>&gt; 
&gt; CPAN.pm&#39;s defaults for these values are correct, with respect to the CPAN Meta Specification.
&gt; 
<div class="message-stanza open">&gt;&gt; In simple terms, &#39;cpanm&#39; DWIMs.
</div>&gt; 
&gt; ..but, actually, is less conformant to the specification.
&gt; 
&gt; CPAN clients *should* attempt to install all &#39;recommends&#39; prerequisites by default,
&gt; but any installation failure encountered downstream of that attempt should not
&gt; constitute an overall failure in the installation of the original distribution.
&gt; This work still needs to be done in both CPAN.pm and cpanminus. cpanminus does not
&gt; attempt to install recommended prerequisites at all &#40;by default&#41;. CPAN.pm does, but
&gt; failures encountered on that path result in overall failures when they should not.
&gt; 
&gt; Simply altering the value of the default is not a proper fix -- the
&gt; real fix is much more complicated than that.
&gt; 
&gt; 
&gt; 
</div>Would you be able to provide a shell one-liner that I could run 
immediately after installing a perl executable that would set 
&#39;recommends_policy&#39; the way I prefer it?

Thank you very much.
Jim Keenan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1909245" href="/Public/Bug/Display.html?id=133205#txn-1909245">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;21&nbsp;16:13:02&nbsp;2020</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1909245/1022769/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1022769">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 399b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2020-08-21 11:31:11, jkeenan@pobox.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Would you be able to provide a shell one-liner that I could run
&gt; immediately after installing a perl executable that would set
&gt; &#39;recommends_policy&#39; the way I prefer it?
</div>
I don&#39;t generally use CPAN.pm.

Surely it&#39;s just a matter of finding the config file and performing a search/replace on the appropriate line to alter the configuration value.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1909309" href="/Public/Bug/Display.html?id=133205#txn-1909309">#</a>      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;22&nbsp;00:46:53&nbsp;2020</span>
    <span class="description">andreas.koenig.7os6VVqR [...] franz.ak.mind.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #133205] Experimental &#39;recommends_policy&#39; option, turned on by default, leads to surprises for users</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 22 Aug 2020 06:40:43 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Karen Etheridge via RT&#34; &lt;bug-CPAN [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Andreas Koenig &lt;andreas.koenig.7os6VVqR [...] franz.ak.mind.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1909309/1022801/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1022801">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 863b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt; On Fri, 21 Aug 2020 14:22:32 -0400, &#34;Karen Etheridge via RT&#34; &lt;bug-CPAN@rt.cpan.org&gt; said:
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">  &gt; CPAN clients *should* attempt to install all &#39;recommends&#39; prerequisites by default,
  &gt; but any installation failure encountered downstream of that attempt should not
  &gt; constitute an overall failure in the installation of the original distribution.
  &gt; This work still needs to be done in both CPAN.pm and cpanminus. cpanminus does not
  &gt; attempt to install recommended prerequisites at all &#40;by default&#41;. CPAN.pm does, but
  &gt; failures encountered on that path result in overall failures when they should not.
</div>
From the Changes file:

: 2019-05-31  k  &lt;andk@cpan.org&gt;
: 
:       * release 2.27-TRIAL
: 
:       * bugfix: under certain circumstances, failing dependencies via
:       recommends and suggests could abort a build; this is now fixed

-- 
andreas
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.41529</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
