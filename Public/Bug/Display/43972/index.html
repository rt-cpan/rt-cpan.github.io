<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #43972 for WWW-Facebook-API: Possible bug -- but could be my misunderstanding</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #43972 for WWW-Facebook-API: Possible bug -- but could be my misunderstanding</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=WWW-Facebook-API">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=WWW-Facebook-API">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=WWW-Facebook-API">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=WWW-Facebook-API">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/WWW-Facebook-API">WWW-Facebook-API CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">43972</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=WWW-Facebook-API">WWW-Facebook-API</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
JEFFA [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
jeffa [...] shutterstock.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Unimportant    </td>
  </tr>
  <tr id="CF-43390-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-43391-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




facebook_api_example.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/577121/291587/facebook_api_example.patch">
Fri Mar 13 10:41:03 2009 (599b) by JEFFA [...] cpan.org
</a>
</font></li>
</ul>


facebook_api_example.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/576919/291476/facebook_api_example.pl">
Thu Mar 12 22:06:43 2009 (2.7k) by clscott [...] cpan.org
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/575555/290698/facebook_api_example.pl">
Mon Mar 09 23:47:34 2009 (2.3k) by clscott [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=43972">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-575303" href="/Public/Bug/Display.html?id=43972#txn-575303">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;09&nbsp;14:24:27&nbsp;2009</span>
    <span class="description">JEFFA [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> jeffa [...] shutterstock.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Possible bug -- but could be my misunderstanding</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/575303/290558/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290558">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Greetings!

I am trying to use WWW::Facebook::API and i cannot seem to even get to
first base with it. Here is my sample code:

============================================
use strict;
use warnings;

use WWW::Facebook::API;

my $api = WWW::Facebook::API-&gt;new&#40;
    desktop =&gt; 1,
    app_id  =&gt; &#39;yes this is my correct app id&#39;,
    api_key =&gt; &#39;yes this is my correct api key&#39;,
    secret  =&gt; &#39;yes this is my correct secret key&#39;,
&#41;;

$api-&gt;auth-&gt;get_session&#40; $api-&gt;auth-&gt;create_token &#41;;
============================================

I have verified my various keys and they are correct, however when this
code is run Facebook returns the following error:


============================================
Error during REST auth.getSession call:
params = 
api_key:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
auth_token:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
call_id:1236621974.82341
format:JSON
method:facebook.auth.getSession
v:1.0
response =
{&#34;error_code&#34;:100,&#34;error_msg&#34;:&#34;Invalid
parameter&#34;,&#34;request_args&#34;:[{&#34;key&#34;:&#34;api_key&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;},{&#34;key&#34;:&#34;auth_token&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;},{&#34;key&#34;:&#34;call_id&#34;,&#34;value&#34;:&#34;1236621974.82341&#34;},{&#34;key&#34;:&#34;format&#34;,&#34;value&#34;:&#34;JSON&#34;},{&#34;key&#34;:&#34;method&#34;,&#34;value&#34;:&#34;facebook.auth.getSession&#34;},{&#34;key&#34;:&#34;v&#34;,&#34;value&#34;:&#34;1.0&#34;},{&#34;key&#34;:&#34;sig&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;}]}
at /usr/lib/perl5/site_perl/5.8.8/WWW/Facebook/API.pm line 212
============================================

I am stumped and perplexed. The only clue that Facebook discloses is
that there is an &#34;Invalid parameter&#34; ... which could be anything. My
inclination is to believe that they changed their API and
WWW::Facebook::API is not up to date, but it seems more likely that i am
not using the module correctly. Some more examples in the docs would be
helpful. Like maybe a cookbook. :&#41;

Any help you can offer would be splendid. Thanks in advance.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-575369" href="/Public/Bug/Display.html?id=43972#txn-575369">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;09&nbsp;15:40:35&nbsp;2009</span>
    <span class="description">clayton.scott [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43972] Possible bug -- but could be my  misunderstanding</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 9 Mar 2009 15:32:56 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-WWW-Facebook-API [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Clayton Scott &lt;clayton.scott [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/575369/290605/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290605">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This may have to do with it being a desktop app.
I&#39;ve never built one before, only we apps.

I&#39;ll try to have a poke at this tonight and see if I can help you out.

Clayton

On Mon, Mar 9, 2009 at 2:24 PM, JEFFA via RT
&lt;bug-WWW-Facebook-API@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Mon Mar 09 14:24:27 2009: Request 43972 was acted upon.
&gt; Transaction: Ticket created by JEFFA
&gt; Â  Â  Â  Queue: WWW-Facebook-API
&gt; Â  Â  Subject: Possible bug -- but could be my misunderstanding
&gt; Â  Broken in: &#40;no value&#41;
&gt; Â  Â Severity: Unimportant
&gt; Â  Â  Â  Owner: Nobody
&gt; Â Requestors: JEFFA@cpan.org
&gt; Â  Â  Â Status: new
&gt; Â Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=43972">https://rt.cpan.org/Ticket/Display.html?id=43972</a></span> &gt;
&gt;
&gt;
&gt; Greetings!
&gt;
&gt; I am trying to use WWW::Facebook::API and i cannot seem to even get to
&gt; first base with it. Here is my sample code:
&gt;
&gt; ============================================
&gt; use strict;
&gt; use warnings;
&gt;
&gt; use WWW::Facebook::API;
&gt;
&gt; my $api = WWW::Facebook::API-&gt;new&#40;
&gt; Â  Â desktop =&gt; 1,
&gt; Â  Â app_id Â =&gt; &#39;yes this is my correct app id&#39;,
&gt; Â  Â api_key =&gt; &#39;yes this is my correct api key&#39;,
&gt; Â  Â secret Â =&gt; &#39;yes this is my correct secret key&#39;,
&gt; &#41;;
&gt;
&gt; $api-&gt;auth-&gt;get_session&#40; $api-&gt;auth-&gt;create_token &#41;;
&gt; ============================================
&gt;
&gt; I have verified my various keys and they are correct, however when this
&gt; code is run Facebook returns the following error:
&gt;
&gt;
&gt; ============================================
&gt; Error during REST auth.getSession call:
&gt; params =
&gt; api_key:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&gt; auth_token:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&gt; call_id:1236621974.82341
&gt; format:JSON
&gt; method:facebook.auth.getSession
&gt; v:1.0
&gt; response =
&gt; {&#34;error_code&#34;:100,&#34;error_msg&#34;:&#34;Invalid
&gt; parameter&#34;,&#34;request_args&#34;:[{&#34;key&#34;:&#34;api_key&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;},{&#34;key&#34;:&#34;auth_token&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;},{&#34;key&#34;:&#34;call_id&#34;,&#34;value&#34;:&#34;1236621974.82341&#34;},{&#34;key&#34;:&#34;format&#34;,&#34;value&#34;:&#34;JSON&#34;},{&#34;key&#34;:&#34;method&#34;,&#34;value&#34;:&#34;facebook.auth.getSession&#34;},{&#34;key&#34;:&#34;v&#34;,&#34;value&#34;:&#34;1.0&#34;},{&#34;key&#34;:&#34;sig&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;}]}
&gt; at /usr/lib/perl5/site_perl/5.8.8/WWW/Facebook/API.pm line 212
&gt; ============================================
&gt;
&gt; I am stumped and perplexed. The only clue that Facebook discloses is
&gt; that there is an &#34;Invalid parameter&#34; ... which could be anything. My
&gt; inclination is to believe that they changed their API and
&gt; WWW::Facebook::API is not up to date, but it seems more likely that i am
&gt; not using the module correctly. Some more examples in the docs would be
&gt; helpful. Like maybe a cookbook. :&#41;
&gt;
&gt; Any help you can offer would be splendid. Thanks in advance.
&gt;
</div>


-- 

Clayton Scott
clayton.scott@gmail.com
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-575370" href="/Public/Bug/Display.html?id=43972#txn-575370">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;09&nbsp;15:40:36&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-575391" href="/Public/Bug/Display.html?id=43972#txn-575391">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;09&nbsp;16:26:33&nbsp;2009</span>
    <span class="description">JEFFA [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/575391/290614/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290614">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the super speedy reply. :&#41;

FWIW, i really am not planning on using a desktop app, i simply was
trying to isolate the issue.

I am trying to get a list of my friends from the API and i really just
don&#39;t understand the steps needed to do so. Here is my code:

============================================
my $api = WWW::Facebook::API-&gt;new&#40;
    desktop =&gt; 0,
    app_id  =&gt; &#39;XXXXXXXXXX&#39;,
    api_key =&gt; &#39;XXXXXXXXXX&#39;,
    secret  =&gt; &#39;XXXXXXXXXX&#39;,
&#41;;

my $auth_token = param&#40; &#39;fb_sig_session_key&#39; &#41;;

$api-&gt;auth-&gt;get_session&#40; $auth_token &#41;;
============================================

And i get the same error:

&#34;error_code&#34;:100,&#34;error_msg&#34;:&#34;Invalid parameter&#34;

If i do not call get_session&#40;&#41; and try to simply call friends-&gt;get&#40;&#41;
then i receive the error:

&#34;error_code&#34;:102,&#34;error_msg&#34;:&#34;Session key invalid or no longer valid&#34;

Thanks for any insight. 



On Mon Mar 09 15:40:35 2009, clayton.scott@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This may have to do with it being a desktop app.
&gt; I&#39;ve never built one before, only we apps.
&gt; 
&gt; I&#39;ll try to have a poke at this tonight and see if I can help you out.
&gt; 
&gt; Clayton
&gt; 
&gt; On Mon, Mar 9, 2009 at 2:24 PM, JEFFA via RT
&gt; &lt;bug-WWW-Facebook-API@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; Mon Mar 09 14:24:27 2009: Request 43972 was acted upon.
&gt; &gt; Transaction: Ticket created by JEFFA
&gt; &gt; Â  Â  Â  Queue: WWW-Facebook-API
&gt; &gt; Â  Â  Subject: Possible bug -- but could be my misunderstanding
&gt; &gt; Â  Broken in: &#40;no value&#41;
&gt; &gt; Â  Â Severity: Unimportant
&gt; &gt; Â  Â  Â  Owner: Nobody
&gt; &gt; Â Requestors: JEFFA@cpan.org
&gt; &gt; Â  Â  Â Status: new
&gt; &gt; Â Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=43972">https://rt.cpan.org/Ticket/Display.html?id=43972</a></span> &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; Greetings!
&gt; &gt;
&gt; &gt; I am trying to use WWW::Facebook::API and i cannot seem to even get
</div>&gt;    to
<div class="message-stanza open">&gt; &gt; first base with it. Here is my sample code:
&gt; &gt;
&gt; &gt; ============================================
&gt; &gt; use strict;
&gt; &gt; use warnings;
&gt; &gt;
&gt; &gt; use WWW::Facebook::API;
&gt; &gt;
&gt; &gt; my $api = WWW::Facebook::API-&gt;new&#40;
&gt; &gt; Â  Â desktop =&gt; 1,
&gt; &gt; Â  Â app_id Â =&gt; &#39;yes this is my correct app id&#39;,
&gt; &gt; Â  Â api_key =&gt; &#39;yes this is my correct api key&#39;,
&gt; &gt; Â  Â secret Â =&gt; &#39;yes this is my correct secret key&#39;,
&gt; &gt; &#41;;
&gt; &gt;
&gt; &gt; $api-&gt;auth-&gt;get_session&#40; $api-&gt;auth-&gt;create_token &#41;;
&gt; &gt; ============================================
&gt; &gt;
&gt; &gt; I have verified my various keys and they are correct, however when
</div>&gt;    this
<div class="message-stanza open">&gt; &gt; code is run Facebook returns the following error:
&gt; &gt;
&gt; &gt;
&gt; &gt; ============================================
&gt; &gt; Error during REST auth.getSession call:
&gt; &gt; params =
&gt; &gt; api_key:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&gt; &gt; auth_token:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&gt; &gt; call_id:1236621974.82341
&gt; &gt; format:JSON
&gt; &gt; method:facebook.auth.getSession
&gt; &gt; v:1.0
&gt; &gt; response =
&gt; &gt; {&#34;error_code&#34;:100,&#34;error_msg&#34;:&#34;Invalid
&gt; &gt;
</div>&gt;   
</div>parameter&#34;,&#34;request_args&#34;:[{&#34;key&#34;:&#34;api_key&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;},{&#34;key&#34;:&#34;auth_token&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;},{&#34;key&#34;:&#34;call_id&#34;,&#34;value&#34;:&#34;1236621974.82341&#34;},{&#34;key&#34;:&#34;format&#34;,&#34;value&#34;:&#34;JSON&#34;},{&#34;key&#34;:&#34;method&#34;,&#34;value&#34;:&#34;facebook.auth.getSession&#34;},{&#34;key&#34;:&#34;v&#34;,&#34;value&#34;:&#34;1.0&#34;},{&#34;key&#34;:&#34;sig&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;}]}
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; at /usr/lib/perl5/site_perl/5.8.8/WWW/Facebook/API.pm line 212
&gt; &gt; ============================================
&gt; &gt;
&gt; &gt; I am stumped and perplexed. The only clue that Facebook discloses is
&gt; &gt; that there is an &#34;Invalid parameter&#34; ... which could be anything. My
&gt; &gt; inclination is to believe that they changed their API and
&gt; &gt; WWW::Facebook::API is not up to date, but it seems more likely that
</div>&gt;    i am
<div class="message-stanza open">&gt; &gt; not using the module correctly. Some more examples in the docs would
</div>&gt;    be
<div class="message-stanza open">&gt; &gt; helpful. Like maybe a cookbook. :&#41;
&gt; &gt;
&gt; &gt; Any help you can offer would be splendid. Thanks in advance.
&gt; &gt;
</div>&gt; 
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-575555" href="/Public/Bug/Display.html?id=43972#txn-575555">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;09&nbsp;23:47:34&nbsp;2009</span>
    <span class="description">clscott [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/575555/290695/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290695">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Jeffa,
I think what happening to you is that your session key expired 
when you logged out of Facebook.

Session keys really only last for the session now.

You can allow the app to access your account when you&#39;re offline by
enabling offline access:
<span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.developers.facebook.com/index.php/New_Design_User_Login_FAQ">http://wiki.developers.facebook.com/index.php/New_Design_User_Login_FAQ</a></span>

I have also attached another example app with some included
instructions. I have only had time to verify that it compiles not that
it and the instructions work.

You should be warned that the facebook platform is oddly documented and
there are new bugs released with every code release &#40;each and every
Tuesday!&#41;.

If you want to try it out I can help you with any issues that come up
and we should have a better example app with good documentation.

If you&#39;re game, that is.

Clayton

On Mon Mar 09 16:26:33 2009, JEFFA wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks for the super speedy reply. :&#41;
&gt; 
&gt; FWIW, i really am not planning on using a desktop app, i simply was
&gt; trying to isolate the issue.
&gt; 
&gt; I am trying to get a list of my friends from the API and i really just
&gt; don&#39;t understand the steps needed to do so. Here is my code:
&gt; 
&gt; ============================================
&gt; my $api = WWW::Facebook::API-&gt;new&#40;
&gt;     desktop =&gt; 0,
&gt;     app_id  =&gt; &#39;XXXXXXXXXX&#39;,
&gt;     api_key =&gt; &#39;XXXXXXXXXX&#39;,
&gt;     secret  =&gt; &#39;XXXXXXXXXX&#39;,
&gt; &#41;;
&gt; 
&gt; my $auth_token = param&#40; &#39;fb_sig_session_key&#39; &#41;;
&gt; 
&gt; $api-&gt;auth-&gt;get_session&#40; $auth_token &#41;;
&gt; ============================================
&gt; 
&gt; And i get the same error:
&gt; 
&gt; &#34;error_code&#34;:100,&#34;error_msg&#34;:&#34;Invalid parameter&#34;
&gt; 
&gt; If i do not call get_session&#40;&#41; and try to simply call friends-&gt;get&#40;&#41;
&gt; then i receive the error:
&gt; 
&gt; &#34;error_code&#34;:102,&#34;error_msg&#34;:&#34;Session key invalid or no longer valid&#34;
&gt; 
&gt; Thanks for any insight.
&gt; 
&gt; 
&gt; 
&gt; On Mon Mar 09 15:40:35 2009, clayton.scott@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; This may have to do with it being a desktop app.
&gt; &gt; I&#39;ve never built one before, only we apps.
&gt; &gt;
&gt; &gt; I&#39;ll try to have a poke at this tonight and see if I can help you
</div>&gt;    out.
<div class="message-stanza open">&gt; &gt;
&gt; &gt; Clayton
&gt; &gt;
&gt; &gt; On Mon, Mar 9, 2009 at 2:24 PM, JEFFA via RT
&gt; &gt; &lt;bug-WWW-Facebook-API@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt; Mon Mar 09 14:24:27 2009: Request 43972 was acted upon.
&gt; &gt; &gt; Transaction: Ticket created by JEFFA
&gt; &gt; &gt; Â  Â  Â  Queue: WWW-Facebook-API
&gt; &gt; &gt; Â  Â  Subject: Possible bug -- but could be my misunderstanding
&gt; &gt; &gt; Â  Broken in: &#40;no value&#41;
&gt; &gt; &gt; Â  Â Severity: Unimportant
&gt; &gt; &gt; Â  Â  Â  Owner: Nobody
&gt; &gt; &gt; Â Requestors: JEFFA@cpan.org
&gt; &gt; &gt; Â  Â  Â Status: new
&gt; &gt; &gt; Â Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=43972">https://rt.cpan.org/Ticket/Display.html?id=43972</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Greetings!
&gt; &gt; &gt;
&gt; &gt; &gt; I am trying to use WWW::Facebook::API and i cannot seem to even
</div></div>&gt;    get
<div class="message-stanza open">&gt; &gt;    to
<div class="message-stanza open">&gt; &gt; &gt; first base with it. Here is my sample code:
&gt; &gt; &gt;
&gt; &gt; &gt; ============================================
&gt; &gt; &gt; use strict;
&gt; &gt; &gt; use warnings;
&gt; &gt; &gt;
&gt; &gt; &gt; use WWW::Facebook::API;
&gt; &gt; &gt;
&gt; &gt; &gt; my $api = WWW::Facebook::API-&gt;new&#40;
&gt; &gt; &gt; Â  Â desktop =&gt; 1,
&gt; &gt; &gt; Â  Â app_id Â =&gt; &#39;yes this is my correct app id&#39;,
&gt; &gt; &gt; Â  Â api_key =&gt; &#39;yes this is my correct api key&#39;,
&gt; &gt; &gt; Â  Â secret Â =&gt; &#39;yes this is my correct secret key&#39;,
&gt; &gt; &gt; &#41;;
&gt; &gt; &gt;
&gt; &gt; &gt; $api-&gt;auth-&gt;get_session&#40; $api-&gt;auth-&gt;create_token &#41;;
&gt; &gt; &gt; ============================================
&gt; &gt; &gt;
&gt; &gt; &gt; I have verified my various keys and they are correct, however when
</div>&gt; &gt;    this
<div class="message-stanza open">&gt; &gt; &gt; code is run Facebook returns the following error:
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; ============================================
&gt; &gt; &gt; Error during REST auth.getSession call:
&gt; &gt; &gt; params =
&gt; &gt; &gt; api_key:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&gt; &gt; &gt; auth_token:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&gt; &gt; &gt; call_id:1236621974.82341
&gt; &gt; &gt; format:JSON
&gt; &gt; &gt; method:facebook.auth.getSession
&gt; &gt; &gt; v:1.0
&gt; &gt; &gt; response =
&gt; &gt; &gt; {&#34;error_code&#34;:100,&#34;error_msg&#34;:&#34;Invalid
&gt; &gt; &gt;
</div>&gt; &gt;
</div>&gt;
</div>parameter&#34;,&#34;request_args&#34;:[{&#34;key&#34;:&#34;api_key&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;},{&#34;key&#34;:&#34;auth_token&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;},{&#34;key&#34;:&#34;call_id&#34;,&#34;value&#34;:&#34;1236621974.82341&#34;},{&#34;key&#34;:&#34;format&#34;,&#34;value&#34;:&#34;JSON&#34;},{&#34;key&#34;:&#34;method&#34;,&#34;value&#34;:&#34;facebook.auth.getSession&#34;},{&#34;key&#34;:&#34;v&#34;,&#34;value&#34;:&#34;1.0&#34;},{&#34;key&#34;:&#34;sig&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;}]}
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; at /usr/lib/perl5/site_perl/5.8.8/WWW/Facebook/API.pm line 212
&gt; &gt; &gt; ============================================
&gt; &gt; &gt;
&gt; &gt; &gt; I am stumped and perplexed. The only clue that Facebook discloses
</div></div>&gt;    is
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; that there is an &#34;Invalid parameter&#34; ... which could be anything.
</div></div>&gt;    My
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; inclination is to believe that they changed their API and
&gt; &gt; &gt; WWW::Facebook::API is not up to date, but it seems more likely
</div></div>&gt;    that
<div class="message-stanza open">&gt; &gt;    i am
<div class="message-stanza open">&gt; &gt; &gt; not using the module correctly. Some more examples in the docs
</div></div>&gt;    would
<div class="message-stanza open">&gt; &gt;    be
<div class="message-stanza open">&gt; &gt; &gt; helpful. Like maybe a cookbook. :&#41;
&gt; &gt; &gt;
&gt; &gt; &gt; Any help you can offer would be splendid. Thanks in advance.
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt;
&gt; &gt;
</div>&gt; 
&gt; 
</div></div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/575555/290698/facebook_api_example.pl">Download facebook_api_example.pl</a><br />
<span class="downloadcontenttype">text/x-perl 2.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/local/bin/perl

use strict;
use warnings;

use CGI;
use WWW::Facebook::API;

my $q  = CGI-&gt;new&#40;&#41;;
my $fb = TP::Facebook::API-&gt;new&#40;
				api_key =&gt; &#39;XXXXXXXXXXXXXXXXXXX&#39;,
				secret  =&gt; &#39;YYYYYYYYYYYYYYYYYYY&#39;,
&#41;;

# Valid actions for our application to run
my %ACTIONS = &#40; 
		canvas   =&gt; \&#38;render_canvas,
		post_add =&gt; \&#38;post_add,
&#41;;

# Require the user to be logged in to interact with our application 
my $FBML = $fb-&gt;require_login&#40;$q&#41; unless $fb-&gt;users-&gt;get_logged_in_user;
$FBML   .= $fb-&gt;require_add&#40;$q&#41; || &#39; &#39;; #requires that the user have added the application to interact with the canvas

# Run the subroutine for the selected action 
if &#40; defined $ACTIONS{ $q-&gt;param&#40;&#39;action&#39;&#41; } &#41;{
    $FBML .= $ACTIONS{  $q-&gt;param&#40;&#39;action&#39;&#41;  }-&gt;&#40;$q,$fb&#41;;
} else {
    $FBML .= render_canvas&#40;$q&#41;;
}

# return the page
print $q-&gt;header&#40; -type =&gt; &#39;text/html&#39;&#41;;
print sprintf &#39;&lt;fb:fbml&gt;%s&lt;/fb:fbml&gt;&#39;, $FBML;


sub render_canvas {
	my &#40;$query, $fb&#41; = @_;

    my $friends  = $fb-&gt;friends-&gt;get&#40;&#41;;

	my $fbml = &#34;These are your friends:&lt;br&gt;&#34;;
	$fbml .= sprintf&#40;&#39;&lt;fb:profile-pic uid=&#34;%d&#34; linked=&#34;true&#34; /&gt;&#39;, $_&#41; for @$friends; 
	return &#34;I&#39;m on the canvas&#34;;
}

sub post_add {
	my &#40;$query, $fb&#41; = @_;


	my $response = $fb-&gt;profile-&gt;set_fbml&#40; uid =&gt; $fb-&gt;logged_in_user, profile =&gt; render_profile&#40;&#41; &#41;;

    if &#40; not $fb-&gt;last_call_success &#41;{
        warn &#34;FACEBOOK: Unable to push fbml to profile: $response-&gt;{error_code} - $response-&gt;{error_msg} &#34;;
    }
}

sub render_profile {
	return &#34;Hello, &lt;br&gt; This is the profile of &lt;fb:name uid=&#39;profileowner&#39;&gt;&#34;
}
__END__
0. Review Basic Application Architecture: <span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.developers.facebook.com/index.php/Random_questions#Basic_Application_Architecture">http://wiki.developers.facebook.com/index.php/Random_questions#Basic_Application_Architecture</a></span>
1. Install WWW::Facebok::API on your webserver
2. Install this application on your webserver as &lt;server&gt;/cgi-bin/facebook_test.pl
3. Add the facebook developer application 
4. Create a new application
4a Basic Tab:
   Callback url: &lt;server&gt;/cgi-bin/facebook_test.pl  
4b Authentication Tab:
   Post-Authorize callback url:  &lt;server&gt;/cgi-bin/facebook_test.pl?action=post_add
4c Canvas Tab:
	Canvas url: &lt;pick one that you like and that is available&gt;
4d Fillout whatever else is required

4e Click save changes

5. Point your browser to your canvas url from step 4c
6. Add the application 
7. Get familiar with the developer forums and wiki:
   <span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.developers.facebook.com">http://wiki.developers.facebook.com</a></span>



</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-575683" href="/Public/Bug/Display.html?id=43972#txn-575683">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;10&nbsp;08:30:27&nbsp;2009</span>
    <span class="description">JEFFA [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/575683/290764/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290764">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 5.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you so very much, Clayton. I will try this out today and if i can
help with documentation in anyway then i would love to help out. I find
it a crying shame that Facebook picked PHP over as their &#34;one true
ring.&#34; The path of least resistance leads to least every time.


On Mon Mar 09 23:47:34 2009, CLSCOTT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Jeffa,
&gt; I think what happening to you is that your session key expired
&gt; when you logged out of Facebook.
&gt; 
&gt; Session keys really only last for the session now.
&gt; 
&gt; You can allow the app to access your account when you&#39;re offline by
&gt; enabling offline access:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.developers.facebook.com/index.php/New_Design_User_Login_FAQ">http://wiki.developers.facebook.com/index.php/New_Design_User_Login_FAQ</a></span>
&gt; 
&gt; I have also attached another example app with some included
&gt; instructions. I have only had time to verify that it compiles not that
&gt; it and the instructions work.
&gt; 
&gt; You should be warned that the facebook platform is oddly documented
&gt;    and
&gt; there are new bugs released with every code release &#40;each and every
&gt; Tuesday!&#41;.
&gt; 
&gt; If you want to try it out I can help you with any issues that come up
&gt; and we should have a better example app with good documentation.
&gt; 
&gt; If you&#39;re game, that is.
&gt; 
&gt; Clayton
&gt; 
&gt; On Mon Mar 09 16:26:33 2009, JEFFA wrote:
<div class="message-stanza open">&gt; &gt; Thanks for the super speedy reply. :&#41;
&gt; &gt;
&gt; &gt; FWIW, i really am not planning on using a desktop app, i simply was
&gt; &gt; trying to isolate the issue.
&gt; &gt;
&gt; &gt; I am trying to get a list of my friends from the API and i really
</div>&gt;    just
<div class="message-stanza open">&gt; &gt; don&#39;t understand the steps needed to do so. Here is my code:
&gt; &gt;
&gt; &gt; ============================================
&gt; &gt; my $api = WWW::Facebook::API-&gt;new&#40;
&gt; &gt;     desktop =&gt; 0,
&gt; &gt;     app_id  =&gt; &#39;XXXXXXXXXX&#39;,
&gt; &gt;     api_key =&gt; &#39;XXXXXXXXXX&#39;,
&gt; &gt;     secret  =&gt; &#39;XXXXXXXXXX&#39;,
&gt; &gt; &#41;;
&gt; &gt;
&gt; &gt; my $auth_token = param&#40; &#39;fb_sig_session_key&#39; &#41;;
&gt; &gt;
&gt; &gt; $api-&gt;auth-&gt;get_session&#40; $auth_token &#41;;
&gt; &gt; ============================================
&gt; &gt;
&gt; &gt; And i get the same error:
&gt; &gt;
&gt; &gt; &#34;error_code&#34;:100,&#34;error_msg&#34;:&#34;Invalid parameter&#34;
&gt; &gt;
&gt; &gt; If i do not call get_session&#40;&#41; and try to simply call friends-&gt;get&#40;&#41;
&gt; &gt; then i receive the error:
&gt; &gt;
&gt; &gt; &#34;error_code&#34;:102,&#34;error_msg&#34;:&#34;Session key invalid or no longer
</div>&gt;    valid&#34;
<div class="message-stanza open">&gt; &gt;
&gt; &gt; Thanks for any insight.
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; On Mon Mar 09 15:40:35 2009, clayton.scott@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; This may have to do with it being a desktop app.
&gt; &gt; &gt; I&#39;ve never built one before, only we apps.
&gt; &gt; &gt;
&gt; &gt; &gt; I&#39;ll try to have a poke at this tonight and see if I can help you
</div>&gt; &gt;    out.
<div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt; Clayton
&gt; &gt; &gt;
&gt; &gt; &gt; On Mon, Mar 9, 2009 at 2:24 PM, JEFFA via RT
&gt; &gt; &gt; &lt;bug-WWW-Facebook-API@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; Mon Mar 09 14:24:27 2009: Request 43972 was acted upon.
&gt; &gt; &gt; &gt; Transaction: Ticket created by JEFFA
&gt; &gt; &gt; &gt; Â  Â  Â  Queue: WWW-Facebook-API
&gt; &gt; &gt; &gt; Â  Â  Subject: Possible bug -- but could be my misunderstanding
&gt; &gt; &gt; &gt; Â  Broken in: &#40;no value&#41;
&gt; &gt; &gt; &gt; Â  Â Severity: Unimportant
&gt; &gt; &gt; &gt; Â  Â  Â  Owner: Nobody
&gt; &gt; &gt; &gt; Â Requestors: JEFFA@cpan.org
&gt; &gt; &gt; &gt; Â  Â  Â Status: new
&gt; &gt; &gt; &gt; Â Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=43972">https://rt.cpan.org/Ticket/Display.html?id=43972</a></span> &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Greetings!
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I am trying to use WWW::Facebook::API and i cannot seem to even
</div></div>&gt; &gt;    get
<div class="message-stanza open">&gt; &gt; &gt;    to
<div class="message-stanza open">&gt; &gt; &gt; &gt; first base with it. Here is my sample code:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt; use strict;
&gt; &gt; &gt; &gt; use warnings;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; use WWW::Facebook::API;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; my $api = WWW::Facebook::API-&gt;new&#40;
&gt; &gt; &gt; &gt; Â  Â desktop =&gt; 1,
&gt; &gt; &gt; &gt; Â  Â app_id Â =&gt; &#39;yes this is my correct app id&#39;,
&gt; &gt; &gt; &gt; Â  Â api_key =&gt; &#39;yes this is my correct api key&#39;,
&gt; &gt; &gt; &gt; Â  Â secret Â =&gt; &#39;yes this is my correct secret key&#39;,
&gt; &gt; &gt; &gt; &#41;;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; $api-&gt;auth-&gt;get_session&#40; $api-&gt;auth-&gt;create_token &#41;;
&gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I have verified my various keys and they are correct, however
</div></div></div>&gt;    when
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt;    this
<div class="message-stanza open">&gt; &gt; &gt; &gt; code is run Facebook returns the following error:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt; Error during REST auth.getSession call:
&gt; &gt; &gt; &gt; params =
&gt; &gt; &gt; &gt; api_key:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&gt; &gt; &gt; &gt; auth_token:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&gt; &gt; &gt; &gt; call_id:1236621974.82341
&gt; &gt; &gt; &gt; format:JSON
&gt; &gt; &gt; &gt; method:facebook.auth.getSession
&gt; &gt; &gt; &gt; v:1.0
&gt; &gt; &gt; &gt; response =
&gt; &gt; &gt; &gt; {&#34;error_code&#34;:100,&#34;error_msg&#34;:&#34;Invalid
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
</div>&gt; &gt;
</div>&gt;
</div>parameter&#34;,&#34;request_args&#34;:[{&#34;key&#34;:&#34;api_key&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;},{&#34;key&#34;:&#34;auth_token&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;},{&#34;key&#34;:&#34;call_id&#34;,&#34;value&#34;:&#34;1236621974.82341&#34;},{&#34;key&#34;:&#34;format&#34;,&#34;value&#34;:&#34;JSON&#34;},{&#34;key&#34;:&#34;method&#34;,&#34;value&#34;:&#34;facebook.auth.getSession&#34;},{&#34;key&#34;:&#34;v&#34;,&#34;value&#34;:&#34;1.0&#34;},{&#34;key&#34;:&#34;sig&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;}]}
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; at /usr/lib/perl5/site_perl/5.8.8/WWW/Facebook/API.pm line 212
&gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I am stumped and perplexed. The only clue that Facebook
</div></div>&gt;    discloses
<div class="message-stanza open">&gt; &gt;    is
<div class="message-stanza open">&gt; &gt; &gt; &gt; that there is an &#34;Invalid parameter&#34; ... which could be
</div></div>&gt;    anything.
<div class="message-stanza open">&gt; &gt;    My
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; inclination is to believe that they changed their API and
&gt; &gt; &gt; &gt; WWW::Facebook::API is not up to date, but it seems more likely
</div></div>&gt; &gt;    that
<div class="message-stanza open">&gt; &gt; &gt;    i am
<div class="message-stanza open">&gt; &gt; &gt; &gt; not using the module correctly. Some more examples in the docs
</div></div>&gt; &gt;    would
<div class="message-stanza open">&gt; &gt; &gt;    be
<div class="message-stanza open">&gt; &gt; &gt; &gt; helpful. Like maybe a cookbook. :&#41;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Any help you can offer would be splendid. Thanks in advance.
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt;
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-576040" href="/Public/Bug/Display.html?id=43972#txn-576040">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;10&nbsp;17:35:29&nbsp;2009</span>
    <span class="description">JEFFA [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/576040/290970/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290970">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 5.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">OK, i tried out your app and apart from having to replace
TP::Facebook::API with WWW::Facebook::API -- i only replaced the secret
and api keys.

I am still getting errors, this time Facebook is saying that
getLoggedInUser&#40;&#41; requires a session key:

&#34;error_code&#34;:453,&#34;error_msg&#34;:&#34;A session key is required for calling this
method&#34;

I am not sure what you mean by my session key expiring. My user is still
logged into Facebook when i try to access this App from Facebook. Was i
supposed to add more code to this example to get it to work? It seems
that every API call requires a session key ... but to get the session
key i need to make an API call ... that requires a session key. :/

Thanks for the help so far, by the way.



On Mon Mar 09 23:47:34 2009, CLSCOTT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Jeffa,
&gt; I think what happening to you is that your session key expired
&gt; when you logged out of Facebook.
&gt; 
&gt; Session keys really only last for the session now.
&gt; 
&gt; You can allow the app to access your account when you&#39;re offline by
&gt; enabling offline access:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.developers.facebook.com/index.php/New_Design_User_Login_FAQ">http://wiki.developers.facebook.com/index.php/New_Design_User_Login_FAQ</a></span>
&gt; 
&gt; I have also attached another example app with some included
&gt; instructions. I have only had time to verify that it compiles not that
&gt; it and the instructions work.
&gt; 
&gt; You should be warned that the facebook platform is oddly documented
&gt;    and
&gt; there are new bugs released with every code release &#40;each and every
&gt; Tuesday!&#41;.
&gt; 
&gt; If you want to try it out I can help you with any issues that come up
&gt; and we should have a better example app with good documentation.
&gt; 
&gt; If you&#39;re game, that is.
&gt; 
&gt; Clayton
&gt; 
&gt; On Mon Mar 09 16:26:33 2009, JEFFA wrote:
<div class="message-stanza open">&gt; &gt; Thanks for the super speedy reply. :&#41;
&gt; &gt;
&gt; &gt; FWIW, i really am not planning on using a desktop app, i simply was
&gt; &gt; trying to isolate the issue.
&gt; &gt;
&gt; &gt; I am trying to get a list of my friends from the API and i really
</div>&gt;    just
<div class="message-stanza open">&gt; &gt; don&#39;t understand the steps needed to do so. Here is my code:
&gt; &gt;
&gt; &gt; ============================================
&gt; &gt; my $api = WWW::Facebook::API-&gt;new&#40;
&gt; &gt;     desktop =&gt; 0,
&gt; &gt;     app_id  =&gt; &#39;XXXXXXXXXX&#39;,
&gt; &gt;     api_key =&gt; &#39;XXXXXXXXXX&#39;,
&gt; &gt;     secret  =&gt; &#39;XXXXXXXXXX&#39;,
&gt; &gt; &#41;;
&gt; &gt;
&gt; &gt; my $auth_token = param&#40; &#39;fb_sig_session_key&#39; &#41;;
&gt; &gt;
&gt; &gt; $api-&gt;auth-&gt;get_session&#40; $auth_token &#41;;
&gt; &gt; ============================================
&gt; &gt;
&gt; &gt; And i get the same error:
&gt; &gt;
&gt; &gt; &#34;error_code&#34;:100,&#34;error_msg&#34;:&#34;Invalid parameter&#34;
&gt; &gt;
&gt; &gt; If i do not call get_session&#40;&#41; and try to simply call friends-&gt;get&#40;&#41;
&gt; &gt; then i receive the error:
&gt; &gt;
&gt; &gt; &#34;error_code&#34;:102,&#34;error_msg&#34;:&#34;Session key invalid or no longer
</div>&gt;    valid&#34;
<div class="message-stanza open">&gt; &gt;
&gt; &gt; Thanks for any insight.
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; On Mon Mar 09 15:40:35 2009, clayton.scott@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; This may have to do with it being a desktop app.
&gt; &gt; &gt; I&#39;ve never built one before, only we apps.
&gt; &gt; &gt;
&gt; &gt; &gt; I&#39;ll try to have a poke at this tonight and see if I can help you
</div>&gt; &gt;    out.
<div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt; Clayton
&gt; &gt; &gt;
&gt; &gt; &gt; On Mon, Mar 9, 2009 at 2:24 PM, JEFFA via RT
&gt; &gt; &gt; &lt;bug-WWW-Facebook-API@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; Mon Mar 09 14:24:27 2009: Request 43972 was acted upon.
&gt; &gt; &gt; &gt; Transaction: Ticket created by JEFFA
&gt; &gt; &gt; &gt; Â  Â  Â  Queue: WWW-Facebook-API
&gt; &gt; &gt; &gt; Â  Â  Subject: Possible bug -- but could be my misunderstanding
&gt; &gt; &gt; &gt; Â  Broken in: &#40;no value&#41;
&gt; &gt; &gt; &gt; Â  Â Severity: Unimportant
&gt; &gt; &gt; &gt; Â  Â  Â  Owner: Nobody
&gt; &gt; &gt; &gt; Â Requestors: JEFFA@cpan.org
&gt; &gt; &gt; &gt; Â  Â  Â Status: new
&gt; &gt; &gt; &gt; Â Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=43972">https://rt.cpan.org/Ticket/Display.html?id=43972</a></span> &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Greetings!
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I am trying to use WWW::Facebook::API and i cannot seem to even
</div></div>&gt; &gt;    get
<div class="message-stanza open">&gt; &gt; &gt;    to
<div class="message-stanza open">&gt; &gt; &gt; &gt; first base with it. Here is my sample code:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt; use strict;
&gt; &gt; &gt; &gt; use warnings;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; use WWW::Facebook::API;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; my $api = WWW::Facebook::API-&gt;new&#40;
&gt; &gt; &gt; &gt; Â  Â desktop =&gt; 1,
&gt; &gt; &gt; &gt; Â  Â app_id Â =&gt; &#39;yes this is my correct app id&#39;,
&gt; &gt; &gt; &gt; Â  Â api_key =&gt; &#39;yes this is my correct api key&#39;,
&gt; &gt; &gt; &gt; Â  Â secret Â =&gt; &#39;yes this is my correct secret key&#39;,
&gt; &gt; &gt; &gt; &#41;;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; $api-&gt;auth-&gt;get_session&#40; $api-&gt;auth-&gt;create_token &#41;;
&gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I have verified my various keys and they are correct, however
</div></div></div>&gt;    when
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt;    this
<div class="message-stanza open">&gt; &gt; &gt; &gt; code is run Facebook returns the following error:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt; Error during REST auth.getSession call:
&gt; &gt; &gt; &gt; params =
&gt; &gt; &gt; &gt; api_key:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&gt; &gt; &gt; &gt; auth_token:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&gt; &gt; &gt; &gt; call_id:1236621974.82341
&gt; &gt; &gt; &gt; format:JSON
&gt; &gt; &gt; &gt; method:facebook.auth.getSession
&gt; &gt; &gt; &gt; v:1.0
&gt; &gt; &gt; &gt; response =
&gt; &gt; &gt; &gt; {&#34;error_code&#34;:100,&#34;error_msg&#34;:&#34;Invalid
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
</div>&gt; &gt;
</div>&gt;
</div>parameter&#34;,&#34;request_args&#34;:[{&#34;key&#34;:&#34;api_key&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;},{&#34;key&#34;:&#34;auth_token&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;},{&#34;key&#34;:&#34;call_id&#34;,&#34;value&#34;:&#34;1236621974.82341&#34;},{&#34;key&#34;:&#34;format&#34;,&#34;value&#34;:&#34;JSON&#34;},{&#34;key&#34;:&#34;method&#34;,&#34;value&#34;:&#34;facebook.auth.getSession&#34;},{&#34;key&#34;:&#34;v&#34;,&#34;value&#34;:&#34;1.0&#34;},{&#34;key&#34;:&#34;sig&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;}]}
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; at /usr/lib/perl5/site_perl/5.8.8/WWW/Facebook/API.pm line 212
&gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I am stumped and perplexed. The only clue that Facebook
</div></div>&gt;    discloses
<div class="message-stanza open">&gt; &gt;    is
<div class="message-stanza open">&gt; &gt; &gt; &gt; that there is an &#34;Invalid parameter&#34; ... which could be
</div></div>&gt;    anything.
<div class="message-stanza open">&gt; &gt;    My
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; inclination is to believe that they changed their API and
&gt; &gt; &gt; &gt; WWW::Facebook::API is not up to date, but it seems more likely
</div></div>&gt; &gt;    that
<div class="message-stanza open">&gt; &gt; &gt;    i am
<div class="message-stanza open">&gt; &gt; &gt; &gt; not using the module correctly. Some more examples in the docs
</div></div>&gt; &gt;    would
<div class="message-stanza open">&gt; &gt; &gt;    be
<div class="message-stanza open">&gt; &gt; &gt; &gt; helpful. Like maybe a cookbook. :&#41;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Any help you can offer would be splendid. Thanks in advance.
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt;
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-576919" href="/Public/Bug/Display.html?id=43972#txn-576919">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;12&nbsp;22:06:42&nbsp;2009</span>
    <span class="description">clscott [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/576919/291473/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/291473">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 6.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry about the trouble. This one should work.

I ended up taking over maintenance for this module when 
I needed it for work and the author became to busy.
I&#39;ve never really delved into it in depth. Ive been poking around and
reading more of the documents and seeing how out of date some of it is.

Here&#39;s another copy of the file that gets and sets the session.

This should be rolled back into the library some time soon.

Again it&#39;s untested, it appears that Facebook is unreacha=ble for me
tonight.

I will be away over the weekend. This should get you far enough to be
able to see communiction back and forth.

If you have any feedback or patches I&#39;d be happy to roll them in.

Clayton

On Tue Mar 10 17:35:29 2009, JEFFA wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; OK, i tried out your app and apart from having to replace
&gt; TP::Facebook::API with WWW::Facebook::API -- i only replaced the
&gt;    secret
&gt; and api keys.
&gt; 
&gt; I am still getting errors, this time Facebook is saying that
&gt; getLoggedInUser&#40;&#41; requires a session key:
&gt; 
&gt; &#34;error_code&#34;:453,&#34;error_msg&#34;:&#34;A session key is required for calling
&gt;    this
&gt; method&#34;
&gt; 
&gt; I am not sure what you mean by my session key expiring. My user is
&gt;    still
&gt; logged into Facebook when i try to access this App from Facebook. Was
&gt;    i
&gt; supposed to add more code to this example to get it to work? It seems
&gt; that every API call requires a session key ... but to get the session
&gt; key i need to make an API call ... that requires a session key. :/
&gt; 
&gt; Thanks for the help so far, by the way.
&gt; 
&gt; 
&gt; 
&gt; On Mon Mar 09 23:47:34 2009, CLSCOTT wrote:
<div class="message-stanza open">&gt; &gt; Jeffa,
&gt; &gt; I think what happening to you is that your session key expired
&gt; &gt; when you logged out of Facebook.
&gt; &gt;
&gt; &gt; Session keys really only last for the session now.
&gt; &gt;
&gt; &gt; You can allow the app to access your account when you&#39;re offline by
&gt; &gt; enabling offline access:
&gt; &gt;
</div>&gt;    <span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.developers.facebook.com/index.php/New_Design_User_Login_FAQ">http://wiki.developers.facebook.com/index.php/New_Design_User_Login_FAQ</a></span>
<div class="message-stanza open">&gt; &gt;
&gt; &gt; I have also attached another example app with some included
&gt; &gt; instructions. I have only had time to verify that it compiles not
</div>&gt;    that
<div class="message-stanza open">&gt; &gt; it and the instructions work.
&gt; &gt;
&gt; &gt; You should be warned that the facebook platform is oddly documented
&gt; &gt;    and
&gt; &gt; there are new bugs released with every code release &#40;each and every
&gt; &gt; Tuesday!&#41;.
&gt; &gt;
&gt; &gt; If you want to try it out I can help you with any issues that come
</div>&gt;    up
<div class="message-stanza open">&gt; &gt; and we should have a better example app with good documentation.
&gt; &gt;
&gt; &gt; If you&#39;re game, that is.
&gt; &gt;
&gt; &gt; Clayton
&gt; &gt;
&gt; &gt; On Mon Mar 09 16:26:33 2009, JEFFA wrote:
<div class="message-stanza open">&gt; &gt; &gt; Thanks for the super speedy reply. :&#41;
&gt; &gt; &gt;
&gt; &gt; &gt; FWIW, i really am not planning on using a desktop app, i simply
</div></div>&gt;    was
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; trying to isolate the issue.
&gt; &gt; &gt;
&gt; &gt; &gt; I am trying to get a list of my friends from the API and i really
</div>&gt; &gt;    just
<div class="message-stanza open">&gt; &gt; &gt; don&#39;t understand the steps needed to do so. Here is my code:
&gt; &gt; &gt;
&gt; &gt; &gt; ============================================
&gt; &gt; &gt; my $api = WWW::Facebook::API-&gt;new&#40;
&gt; &gt; &gt;     desktop =&gt; 0,
&gt; &gt; &gt;     app_id  =&gt; &#39;XXXXXXXXXX&#39;,
&gt; &gt; &gt;     api_key =&gt; &#39;XXXXXXXXXX&#39;,
&gt; &gt; &gt;     secret  =&gt; &#39;XXXXXXXXXX&#39;,
&gt; &gt; &gt; &#41;;
&gt; &gt; &gt;
&gt; &gt; &gt; my $auth_token = param&#40; &#39;fb_sig_session_key&#39; &#41;;
&gt; &gt; &gt;
&gt; &gt; &gt; $api-&gt;auth-&gt;get_session&#40; $auth_token &#41;;
&gt; &gt; &gt; ============================================
&gt; &gt; &gt;
&gt; &gt; &gt; And i get the same error:
&gt; &gt; &gt;
&gt; &gt; &gt; &#34;error_code&#34;:100,&#34;error_msg&#34;:&#34;Invalid parameter&#34;
&gt; &gt; &gt;
&gt; &gt; &gt; If i do not call get_session&#40;&#41; and try to simply call friends-
</div></div><div class="message-stanza open">&gt;    &gt;get&#40;&#41;
</div><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; then i receive the error:
&gt; &gt; &gt;
&gt; &gt; &gt; &#34;error_code&#34;:102,&#34;error_msg&#34;:&#34;Session key invalid or no longer
</div>&gt; &gt;    valid&#34;
<div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt; Thanks for any insight.
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; On Mon Mar 09 15:40:35 2009, clayton.scott@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; This may have to do with it being a desktop app.
&gt; &gt; &gt; &gt; I&#39;ve never built one before, only we apps.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I&#39;ll try to have a poke at this tonight and see if I can help
</div></div></div>&gt;    you
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt;    out.
<div class="message-stanza open">&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Clayton
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; On Mon, Mar 9, 2009 at 2:24 PM, JEFFA via RT
&gt; &gt; &gt; &gt; &lt;bug-WWW-Facebook-API@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; Mon Mar 09 14:24:27 2009: Request 43972 was acted upon.
&gt; &gt; &gt; &gt; &gt; Transaction: Ticket created by JEFFA
&gt; &gt; &gt; &gt; &gt; Â  Â  Â  Queue: WWW-Facebook-API
&gt; &gt; &gt; &gt; &gt; Â  Â  Subject: Possible bug -- but could be my misunderstanding
&gt; &gt; &gt; &gt; &gt; Â  Broken in: &#40;no value&#41;
&gt; &gt; &gt; &gt; &gt; Â  Â Severity: Unimportant
&gt; &gt; &gt; &gt; &gt; Â  Â  Â  Owner: Nobody
&gt; &gt; &gt; &gt; &gt; Â Requestors: JEFFA@cpan.org
&gt; &gt; &gt; &gt; &gt; Â  Â  Â Status: new
&gt; &gt; &gt; &gt; &gt; Â Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=43972">https://rt.cpan.org/Ticket/Display.html?id=43972</a></span>
</div></div></div></div><div class="message-stanza open">&gt;    &gt;
</div><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Greetings!
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; I am trying to use WWW::Facebook::API and i cannot seem to
</div></div>&gt;    even
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt;    get
<div class="message-stanza open">&gt; &gt; &gt; &gt;    to
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; first base with it. Here is my sample code:
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt; &gt; use strict;
&gt; &gt; &gt; &gt; &gt; use warnings;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; use WWW::Facebook::API;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; my $api = WWW::Facebook::API-&gt;new&#40;
&gt; &gt; &gt; &gt; &gt; Â  Â desktop =&gt; 1,
&gt; &gt; &gt; &gt; &gt; Â  Â app_id Â =&gt; &#39;yes this is my correct app id&#39;,
&gt; &gt; &gt; &gt; &gt; Â  Â api_key =&gt; &#39;yes this is my correct api key&#39;,
&gt; &gt; &gt; &gt; &gt; Â  Â secret Â =&gt; &#39;yes this is my correct secret key&#39;,
&gt; &gt; &gt; &gt; &gt; &#41;;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; $api-&gt;auth-&gt;get_session&#40; $api-&gt;auth-&gt;create_token &#41;;
&gt; &gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; I have verified my various keys and they are correct, however
</div></div></div>&gt; &gt;    when
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt;    this
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; code is run Facebook returns the following error:
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt; &gt; Error during REST auth.getSession call:
&gt; &gt; &gt; &gt; &gt; params =
&gt; &gt; &gt; &gt; &gt; api_key:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&gt; &gt; &gt; &gt; &gt; auth_token:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&gt; &gt; &gt; &gt; &gt; call_id:1236621974.82341
&gt; &gt; &gt; &gt; &gt; format:JSON
&gt; &gt; &gt; &gt; &gt; method:facebook.auth.getSession
&gt; &gt; &gt; &gt; &gt; v:1.0
&gt; &gt; &gt; &gt; &gt; response =
&gt; &gt; &gt; &gt; &gt; {&#34;error_code&#34;:100,&#34;error_msg&#34;:&#34;Invalid
&gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
</div>&gt; &gt;
</div>&gt;
</div>parameter&#34;,&#34;request_args&#34;:[{&#34;key&#34;:&#34;api_key&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;},{&#34;key&#34;:&#34;auth_token&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;},{&#34;key&#34;:&#34;call_id&#34;,&#34;value&#34;:&#34;1236621974.82341&#34;},{&#34;key&#34;:&#34;format&#34;,&#34;value&#34;:&#34;JSON&#34;},{&#34;key&#34;:&#34;method&#34;,&#34;value&#34;:&#34;facebook.auth.getSession&#34;},{&#34;key&#34;:&#34;v&#34;,&#34;value&#34;:&#34;1.0&#34;},{&#34;key&#34;:&#34;sig&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;}]}
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; at /usr/lib/perl5/site_perl/5.8.8/WWW/Facebook/API.pm line 212
&gt; &gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; I am stumped and perplexed. The only clue that Facebook
</div></div>&gt; &gt;    discloses
<div class="message-stanza open">&gt; &gt; &gt;    is
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; that there is an &#34;Invalid parameter&#34; ... which could be
</div></div>&gt; &gt;    anything.
<div class="message-stanza open">&gt; &gt; &gt;    My
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; inclination is to believe that they changed their API and
&gt; &gt; &gt; &gt; &gt; WWW::Facebook::API is not up to date, but it seems more likely
</div></div>&gt; &gt; &gt;    that
<div class="message-stanza open">&gt; &gt; &gt; &gt;    i am
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; not using the module correctly. Some more examples in the docs
</div></div>&gt; &gt; &gt;    would
<div class="message-stanza open">&gt; &gt; &gt; &gt;    be
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; helpful. Like maybe a cookbook. :&#41;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Any help you can offer would be splendid. Thanks in advance.
&gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt;
</div>&gt; 
&gt; 
</div></div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/576919/291476/facebook_api_example.pl">Download facebook_api_example.pl</a><br />
<span class="downloadcontenttype">text/x-perl 2.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/local/bin/perl

use strict;
use warnings;

use CGI;
use WWW::Facebook::API;

my $q  = CGI-&gt;new&#40;&#41;;

my &#40;$id, $session&#41; = facebook_credentials&#40; $q &#41;;

my $fb = WWW::Facebook::API-&gt;new&#40;
				api_key 	=&gt; &#39;XXXXXXXXXXXXXXXXXXX&#39;,
				secret  	=&gt; &#39;YYYYYYYYYYYYYYYYYYY&#39;,
				session_uid	=&gt; $id,
				session_key =&gt; $session,
&#41;;

# Valid actions for our application to run
my %ACTIONS = &#40; 
		canvas   =&gt; \&#38;render_canvas,
		post_add =&gt; \&#38;post_add,
&#41;;

# Require the user to be logged in to interact with our application 
my $FBML = $fb-&gt;require_login&#40;$q&#41; unless $fb-&gt;users-&gt;get_logged_in_user;
$FBML   .= $fb-&gt;require_add&#40;$q&#41; || &#39; &#39;; #requires that the user have added the application to interact with the canvas

# Run the subroutine for the selected action 
if &#40; defined $ACTIONS{ $q-&gt;param&#40;&#39;action&#39;&#41; } &#41;{
    $FBML .= $ACTIONS{  $q-&gt;param&#40;&#39;action&#39;&#41;  }-&gt;&#40;$q,$fb&#41;;
} else {
    $FBML .= render_canvas&#40;$q&#41;;
}

# return the page
print $q-&gt;header&#40; -type =&gt; &#39;text/html&#39;&#41;;
print sprintf &#39;&lt;fb:fbml&gt;%s&lt;/fb:fbml&gt;&#39;, $FBML;


sub render_canvas {
	my &#40;$query, $fb&#41; = @_;

    my $friends  = $fb-&gt;friends-&gt;get&#40;&#41;;

	my $fbml = &#34;These are your friends:&lt;br&gt;&#34;;
	$fbml .= sprintf&#40;&#39;&lt;fb:profile-pic uid=&#34;%d&#34; linked=&#34;true&#34; /&gt;&#39;, $_&#41; for @$friends; 
	return &#34;I&#39;m on the canvas&#34;;
}

sub post_add {
	my &#40;$query, $fb&#41; = @_;


	my $response = $fb-&gt;profile-&gt;set_fbml&#40; uid =&gt; $fb-&gt;logged_in_user, profile =&gt; render_profile&#40;&#41; &#41;;

    if &#40; not $fb-&gt;last_call_success &#41;{
        warn &#34;FACEBOOK: Unable to push fbml to profile: $response-&gt;{error_code} - $response-&gt;{error_msg} &#34;;
    }
}

sub render_profile {
	return &#34;Hello, &lt;br&gt; This is the profile of &lt;fb:name uid=&#39;profileowner&#39;&gt;&#34;
}

sub facebook_credentials {
    my $q          = shift;
    my $fb_uid     = $q-&gt;param&#40;&#39;fb_sig_user&#39;&#41;        || $q-&gt;param&#40;&#39;fb_sig_profile_user&#39;&#41;    || $q-&gt;param&#40;&#39;fb_sig_canvas_user&#39;&#41;;
    my $fb_session = $q-&gt;param&#40;&#39;fb_sig_session_key&#39;&#41; || $q-&gt;param&#40;&#39;fb_profile_session_key&#39;&#41; || $q-&gt;param&#40;&#39;fb_canvas_session_key&#39;&#41;;

    return $fb_uid, $fb_session;
}


__END__
0. Review Basic Application Architecture: <span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.developers.facebook.com/index.php/Random_questions#Basic_Application_Architecture">http://wiki.developers.facebook.com/index.php/Random_questions#Basic_Application_Architecture</a></span>
1. Install WWW::Facebok::API on your webserver
2. Install this application on your webserver as &lt;server&gt;/cgi-bin/facebook_test.pl
3. Add the facebook developer application 
4. Create a new application
4a Basic Tab:
   Callback url: &lt;server&gt;/cgi-bin/facebook_test.pl  
4b Authentication Tab:
   Post-Authorize callback url:  &lt;server&gt;/cgi-bin/facebook_test.pl?action=post_add
4c Canvas Tab:
	Canvas url: &lt;pick one that you like and that is available&gt;
4d Fillout whatever else is required

4e Click save changes

5. Point your browser to your canvas url from step 4c
6. Add the application 
7. Get familiar with the developer forums and wiki:
   <span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.developers.facebook.com">http://wiki.developers.facebook.com</a></span>



</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-577121" href="/Public/Bug/Display.html?id=43972#txn-577121">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;13&nbsp;10:41:03&nbsp;2009</span>
    <span class="description">JEFFA [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/577121/291584/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/291584">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for this Clayton, i was able to get this one to work beautifully. 

I had to make a couple of changes:

# call to render_canvas was not passing $fb as 2nd arg
$FBML .= render_canvas&#40; $q, $fb &#41;;

# return from render_canvas was not returning $fbml 
return $fbml . &#34;&lt;p&gt;I&#39;m on the canvas&lt;/p&gt;&#34;;

I attached a patch as well.

Other than that it worked like a charm. I should be able to figure out
all the handshaking now. I should be working the Facebook API
extensively, so anything i can add to the project i will gladly send
your way: patches, sample code etc.

Thanks again!

-- jeffa




On Thu Mar 12 22:06:42 2009, CLSCOTT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sorry about the trouble. This one should work.
&gt; 
&gt; I ended up taking over maintenance for this module when
&gt; I needed it for work and the author became to busy.
&gt; I&#39;ve never really delved into it in depth. Ive been poking around and
&gt; reading more of the documents and seeing how out of date some of it
&gt;    is.
&gt; 
&gt; Here&#39;s another copy of the file that gets and sets the session.
&gt; 
&gt; This should be rolled back into the library some time soon.
&gt; 
&gt; Again it&#39;s untested, it appears that Facebook is unreacha=ble for me
&gt; tonight.
&gt; 
&gt; I will be away over the weekend. This should get you far enough to be
&gt; able to see communiction back and forth.
&gt; 
&gt; If you have any feedback or patches I&#39;d be happy to roll them in.
&gt; 
&gt; Clayton
&gt; 
&gt; On Tue Mar 10 17:35:29 2009, JEFFA wrote:
<div class="message-stanza open">&gt; &gt; OK, i tried out your app and apart from having to replace
&gt; &gt; TP::Facebook::API with WWW::Facebook::API -- i only replaced the
&gt; &gt;    secret
&gt; &gt; and api keys.
&gt; &gt;
&gt; &gt; I am still getting errors, this time Facebook is saying that
&gt; &gt; getLoggedInUser&#40;&#41; requires a session key:
&gt; &gt;
&gt; &gt; &#34;error_code&#34;:453,&#34;error_msg&#34;:&#34;A session key is required for calling
&gt; &gt;    this
&gt; &gt; method&#34;
&gt; &gt;
&gt; &gt; I am not sure what you mean by my session key expiring. My user is
&gt; &gt;    still
&gt; &gt; logged into Facebook when i try to access this App from Facebook.
</div>&gt;    Was
<div class="message-stanza open">&gt; &gt;    i
&gt; &gt; supposed to add more code to this example to get it to work? It
</div>&gt;    seems
<div class="message-stanza open">&gt; &gt; that every API call requires a session key ... but to get the
</div>&gt;    session
<div class="message-stanza open">&gt; &gt; key i need to make an API call ... that requires a session key. :/
&gt; &gt;
&gt; &gt; Thanks for the help so far, by the way.
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; On Mon Mar 09 23:47:34 2009, CLSCOTT wrote:
<div class="message-stanza open">&gt; &gt; &gt; Jeffa,
&gt; &gt; &gt; I think what happening to you is that your session key expired
&gt; &gt; &gt; when you logged out of Facebook.
&gt; &gt; &gt;
&gt; &gt; &gt; Session keys really only last for the session now.
&gt; &gt; &gt;
&gt; &gt; &gt; You can allow the app to access your account when you&#39;re offline
</div></div>&gt;    by
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; enabling offline access:
&gt; &gt; &gt;
</div>&gt; &gt;
</div>&gt;    <span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.developers.facebook.com/index.php/New_Design_User_Login_FAQ">http://wiki.developers.facebook.com/index.php/New_Design_User_Login_FAQ</a></span>
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt; I have also attached another example app with some included
&gt; &gt; &gt; instructions. I have only had time to verify that it compiles not
</div>&gt; &gt;    that
<div class="message-stanza open">&gt; &gt; &gt; it and the instructions work.
&gt; &gt; &gt;
&gt; &gt; &gt; You should be warned that the facebook platform is oddly
</div></div>&gt;    documented
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt;    and
&gt; &gt; &gt; there are new bugs released with every code release &#40;each and
</div></div>&gt;    every
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; Tuesday!&#41;.
&gt; &gt; &gt;
&gt; &gt; &gt; If you want to try it out I can help you with any issues that come
</div>&gt; &gt;    up
<div class="message-stanza open">&gt; &gt; &gt; and we should have a better example app with good documentation.
&gt; &gt; &gt;
&gt; &gt; &gt; If you&#39;re game, that is.
&gt; &gt; &gt;
&gt; &gt; &gt; Clayton
&gt; &gt; &gt;
&gt; &gt; &gt; On Mon Mar 09 16:26:33 2009, JEFFA wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; Thanks for the super speedy reply. :&#41;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; FWIW, i really am not planning on using a desktop app, i simply
</div></div>&gt; &gt;    was
<div class="message-stanza open">&gt; &gt; &gt; &gt; trying to isolate the issue.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I am trying to get a list of my friends from the API and i
</div></div>&gt;    really
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt;    just
<div class="message-stanza open">&gt; &gt; &gt; &gt; don&#39;t understand the steps needed to do so. Here is my code:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt; my $api = WWW::Facebook::API-&gt;new&#40;
&gt; &gt; &gt; &gt;     desktop =&gt; 0,
&gt; &gt; &gt; &gt;     app_id  =&gt; &#39;XXXXXXXXXX&#39;,
&gt; &gt; &gt; &gt;     api_key =&gt; &#39;XXXXXXXXXX&#39;,
&gt; &gt; &gt; &gt;     secret  =&gt; &#39;XXXXXXXXXX&#39;,
&gt; &gt; &gt; &gt; &#41;;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; my $auth_token = param&#40; &#39;fb_sig_session_key&#39; &#41;;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; $api-&gt;auth-&gt;get_session&#40; $auth_token &#41;;
&gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; And i get the same error:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &#34;error_code&#34;:100,&#34;error_msg&#34;:&#34;Invalid parameter&#34;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; If i do not call get_session&#40;&#41; and try to simply call friends-
</div></div><div class="message-stanza open">&gt; &gt;    &gt;get&#40;&#41;
</div><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; then i receive the error:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &#34;error_code&#34;:102,&#34;error_msg&#34;:&#34;Session key invalid or no longer
</div>&gt; &gt; &gt;    valid&#34;
<div class="message-stanza open">&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Thanks for any insight.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; On Mon Mar 09 15:40:35 2009, clayton.scott@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; This may have to do with it being a desktop app.
&gt; &gt; &gt; &gt; &gt; I&#39;ve never built one before, only we apps.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; I&#39;ll try to have a poke at this tonight and see if I can help
</div></div></div>&gt; &gt;    you
<div class="message-stanza open">&gt; &gt; &gt; &gt;    out.
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Clayton
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; On Mon, Mar 9, 2009 at 2:24 PM, JEFFA via RT
&gt; &gt; &gt; &gt; &gt; &lt;bug-WWW-Facebook-API@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt; Mon Mar 09 14:24:27 2009: Request 43972 was acted upon.
&gt; &gt; &gt; &gt; &gt; &gt; Transaction: Ticket created by JEFFA
&gt; &gt; &gt; &gt; &gt; &gt; Â  Â  Â  Queue: WWW-Facebook-API
&gt; &gt; &gt; &gt; &gt; &gt; Â  Â  Subject: Possible bug -- but could be my
</div></div></div></div>&gt;    misunderstanding
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt; Â  Broken in: &#40;no value&#41;
&gt; &gt; &gt; &gt; &gt; &gt; Â  Â Severity: Unimportant
&gt; &gt; &gt; &gt; &gt; &gt; Â  Â  Â  Owner: Nobody
&gt; &gt; &gt; &gt; &gt; &gt; Â Requestors: JEFFA@cpan.org
&gt; &gt; &gt; &gt; &gt; &gt; Â  Â  Â Status: new
&gt; &gt; &gt; &gt; &gt; &gt; Â Ticket &lt;URL:
</div></div>&gt;    <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=43972">https://rt.cpan.org/Ticket/Display.html?id=43972</a></span>
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;    &gt;
</div><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; Greetings!
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; I am trying to use WWW::Facebook::API and i cannot seem to
</div></div>&gt; &gt;    even
<div class="message-stanza open">&gt; &gt; &gt; &gt;    get
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt;    to
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt; first base with it. Here is my sample code:
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt; &gt; &gt; use strict;
&gt; &gt; &gt; &gt; &gt; &gt; use warnings;
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; use WWW::Facebook::API;
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; my $api = WWW::Facebook::API-&gt;new&#40;
&gt; &gt; &gt; &gt; &gt; &gt; Â  Â desktop =&gt; 1,
&gt; &gt; &gt; &gt; &gt; &gt; Â  Â app_id Â =&gt; &#39;yes this is my correct app id&#39;,
&gt; &gt; &gt; &gt; &gt; &gt; Â  Â api_key =&gt; &#39;yes this is my correct api key&#39;,
&gt; &gt; &gt; &gt; &gt; &gt; Â  Â secret Â =&gt; &#39;yes this is my correct secret key&#39;,
&gt; &gt; &gt; &gt; &gt; &gt; &#41;;
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; $api-&gt;auth-&gt;get_session&#40; $api-&gt;auth-&gt;create_token &#41;;
&gt; &gt; &gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; I have verified my various keys and they are correct,
</div></div></div></div>&gt;    however
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt;    when
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt;    this
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt; code is run Facebook returns the following error:
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt; &gt; &gt; Error during REST auth.getSession call:
&gt; &gt; &gt; &gt; &gt; &gt; params =
&gt; &gt; &gt; &gt; &gt; &gt; api_key:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&gt; &gt; &gt; &gt; &gt; &gt; auth_token:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&gt; &gt; &gt; &gt; &gt; &gt; call_id:1236621974.82341
&gt; &gt; &gt; &gt; &gt; &gt; format:JSON
&gt; &gt; &gt; &gt; &gt; &gt; method:facebook.auth.getSession
&gt; &gt; &gt; &gt; &gt; &gt; v:1.0
&gt; &gt; &gt; &gt; &gt; &gt; response =
&gt; &gt; &gt; &gt; &gt; &gt; {&#34;error_code&#34;:100,&#34;error_msg&#34;:&#34;Invalid
&gt; &gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
</div>&gt; &gt;
</div>&gt;
</div>parameter&#34;,&#34;request_args&#34;:[{&#34;key&#34;:&#34;api_key&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;},{&#34;key&#34;:&#34;auth_token&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;},{&#34;key&#34;:&#34;call_id&#34;,&#34;value&#34;:&#34;1236621974.82341&#34;},{&#34;key&#34;:&#34;format&#34;,&#34;value&#34;:&#34;JSON&#34;},{&#34;key&#34;:&#34;method&#34;,&#34;value&#34;:&#34;facebook.auth.getSession&#34;},{&#34;key&#34;:&#34;v&#34;,&#34;value&#34;:&#34;1.0&#34;},{&#34;key&#34;:&#34;sig&#34;,&#34;value&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;}]}
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt; at /usr/lib/perl5/site_perl/5.8.8/WWW/Facebook/API.pm line
</div></div>&gt;    212
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt; ============================================
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; I am stumped and perplexed. The only clue that Facebook
</div></div>&gt; &gt; &gt;    discloses
<div class="message-stanza open">&gt; &gt; &gt; &gt;    is
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt; that there is an &#34;Invalid parameter&#34; ... which could be
</div></div>&gt; &gt; &gt;    anything.
<div class="message-stanza open">&gt; &gt; &gt; &gt;    My
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt; inclination is to believe that they changed their API and
&gt; &gt; &gt; &gt; &gt; &gt; WWW::Facebook::API is not up to date, but it seems more
</div></div></div></div>&gt;    likely
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt;    that
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt;    i am
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt; not using the module correctly. Some more examples in the
</div></div></div></div>&gt;    docs
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt;    would
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt;    be
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt; helpful. Like maybe a cookbook. :&#41;
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; Any help you can offer would be splendid. Thanks in advance.
&gt; &gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt;
</div>&gt; 
&gt; 
</div></div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/577121/291587/facebook_api_example.patch">Download facebook_api_example.patch</a><br />
<span class="downloadcontenttype">text/x-diff 599b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- facebook_api_example.pl	2009-03-13 08:58:27.000000000 -0400
+++ facebook_api_example_new.pl	2009-03-13 10:38:15.000000000 -0400
@@ -31,7 +31,7 @@
 if &#40; defined $ACTIONS{ $q-&gt;param&#40;&#39;action&#39;&#41; } &#41;{
     $FBML .= $ACTIONS{  $q-&gt;param&#40;&#39;action&#39;&#41;  }-&gt;&#40;$q,$fb&#41;;
 } else {
-    $FBML .= render_canvas&#40;$q&#41;;
+    $FBML .= render_canvas&#40;$q,$fb&#41;;
 }
 
 # return the page
@@ -46,7 +46,7 @@
 
 	my $fbml = &#34;These are your friends:&lt;br&gt;&#34;;
 	$fbml .= sprintf&#40;&#39;&lt;fb:profile-pic uid=&#34;%d&#34; linked=&#34;true&#34; /&gt;&#39;, $_&#41; for @$friends; 
-	return &#34;I&#39;m on the canvas&#34;;
+	return $fbml . &#34;I&#39;m on the canvas&#34;;
 }
 
 sub post_add {
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-577124" href="/Public/Bug/Display.html?id=43972#txn-577124">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;13&nbsp;10:41:06&nbsp;2009</span>
    <span class="description">JEFFA [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.76767</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
