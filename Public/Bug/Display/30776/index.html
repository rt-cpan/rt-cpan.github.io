<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #30776 for IO-Compress-Base: IO::Uncompress::AnyUncompress behaves non-deterministically</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #30776 for IO-Compress-Base: IO::Uncompress::AnyUncompress behaves non-deterministically</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=IO-Compress-Base">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=IO-Compress-Base">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=IO-Compress-Base">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=IO-Compress-Base">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/IO-Compress-Base">IO-Compress-Base CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">30776</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=IO-Compress-Base">IO-Compress-Base</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ingo [...] ingoschmiegel.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-38612-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.008    </td>
  </tr>
  <tr id="CF-38613-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




test.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/384097/176141/test.gz">
Fri Nov 16 05:52:31 2007 (268b) by ingo [...] ingoschmiegel.de
</a>
</font></li>
</ul>


test.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/384097/176144/test.pl">
Fri Nov 16 05:52:32 2007 (408b) by ingo [...] ingoschmiegel.de
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=30776">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-384097" href="/Public/Bug/Display.html?id=30776#txn-384097">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;16&nbsp;05:52:30&nbsp;2007</span>
    <span class="description">ingo [...] ingoschmiegel.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> IO::Uncompress::AnyUncompress behaves non-deterministically</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/384097/176138/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/176138">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">In the attached example, IO::Uncompress::AnyUncompress does not detect
that the input file is compressed.

Is this the right forum to post this bug?

I use code similar to this in a bigger script which also deploys
Parse::Yapp. The files read are pretty large and I would therefore very
much like to use this module for automatic and transparent uncompression
of the input stream.

Funniliy enough my gzipp&#39;ed input is about 90% of the time read in
without being uncompressed, while 10% of the time it gets read in
compressed. For any given version of my script it stays the same: Always
either uncompressed or compressed. But if I change the code a little I
may break or enable automatic uncompression. I&#39;m completely puzzled by
this behaviour and have no clue whatsoever what could cause this phenomenon.

The example script attached does not detect that the input file is
compressed and prints the garbled data.
If you could have a look at it - maybe I&#39;m doing some obvious error here.
Also I did not manage to modify this test script so that it would always
detect the compression and print the clear data. Bummer.

Any help is highly appreciated!

Cheers,
  Ingo
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> test.gz</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/384097/176141/test.gz">Download test.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 268b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> test.pl</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/384097/176144/test.pl">Download test.pl</a><br />
<span class="downloadcontenttype">text/x-perl 408b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">use lib &#34;./perl5/site_perl/5.8.0&#34;;

use IO::Uncompress::AnyUncompress; # handle gzip/bzip2/zip/lzf compressed input files

my $fn = &#39;test.gz&#39;;
my $in;
my $line;



### Does not detect packed format:
$in = new IO::Uncompress::AnyUncompress $fn;
if &#40;!defined&#40;$in&#41;&#41; {
  die &#34;Fatal: Failed to load file: $IO::Uncompress::AnyUncompress::AnyUncompressError\n&#34;;
}
while&#40;$line = &lt;$in&gt;&#41; {
  print $line;
}


exit 0;

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-384138" href="/Public/Bug/Display.html?id=30776#txn-384138">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;16&nbsp;06:39:39&nbsp;2007</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> PMQS [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/384138/176147/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/176147">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Nov 16 05:52:30 2007, cfi wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In the attached example, IO::Uncompress::AnyUncompress does not detect
&gt; that the input file is compressed.
&gt; 
&gt; Is this the right forum to post this bug?
</div>
This forum is fine. As is mailing me directly.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I use code similar to this in a bigger script which also deploys
&gt; Parse::Yapp. The files read are pretty large and I would therefore 
</div>very
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; much like to use this module for automatic and transparent 
</div>uncompression
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; of the input stream.
&gt; 
&gt; Funniliy enough my gzipp&#39;ed input is about 90% of the time read in
&gt; without being uncompressed, while 10% of the time it gets read in
&gt; compressed. For any given version of my script it stays the same: 
</div>Always
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; either uncompressed or compressed. But if I change the code a little I
&gt; may break or enable automatic uncompression. I&#39;m completely puzzled by
&gt; this behaviour and have no clue whatsoever what could cause this 
</div>phenomenon.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; The example script attached does not detect that the input file is
&gt; compressed and prints the garbled data.
</div>
Hmm, not sure what is going on there - I ran you script and it worked 
fine. Can you check if you have the IO::Uncompress::Gunzip module 
installed? Something like this should do the trick.

perl  -MIO::Uncompress::Gunzip -e &#39;print qq[ver 
$IO::Uncompress::Gunzip::VERSION\n]&#39;

Also, do the same for IO::Uncompress::Base

perl  -MIO::Uncompress::Base-e &#39;print qq[ver 
$IO::Uncompress::Base::VERSION\n]&#39;

Get back to me with what that gives you please.

Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-384139" href="/Public/Bug/Display.html?id=30776#txn-384139">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;16&nbsp;06:39:41&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-384167" href="/Public/Bug/Display.html?id=30776#txn-384167">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;16&nbsp;07:04:31&nbsp;2007</span>
    <span class="description">ingo [...] ingoschmiegel.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ingo [...] ingoschmiegel.de</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/384167/176159/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/176159">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">IO::Uncompress::Base got installed when I installed AnyUncompress

Gunzip is missing. Is this listed as a prerequisite of AnyUncompress? I
guess it&#39;s intentional if not, because everybody has different needs and
may not need a gzip interface.

Would it make sense to add an API to the OO version of this module so
that one could check for supported compression/inflation methods.
Sth like
if &#40;!defined&#40; $obj-&gt;algorithms&#40;&#41;-&gt;{gzip} &#41;&#41; {
  die &#34;Cannot handle gzipped data&#34;;
}
Hm, but that would make sense only if Anyuncompress could test the type
of input file - even without those modules being installed. Then,
additionally to the api above, it would be possible to do sth like:
if &#40;$obj-&gt;inflatable&#40;&#41;&#41; {
  die &#34;Cannot handle &#34;.$obj-&gt;packed_with&#40;&#41;.&#34;&#39;ed data&#34;;
}
The inflatable&#40;&#41; method would check with that algorithm the file is
acked &#40;one of: qw&#40;plain gzip bzip lzf&#41;&#41; and would compare that with the
available algorithms:
sub inflatable&#40;$&#41; {
  my &#40;$self&#41; = @_;
  return $self-&gt;algorithms&#40;&#41;-&gt;{ $self-&gt;packed_with&#40;&#41; };
}


Back to my problem:
I&#39;ll install that Gunzip module and recheck.
Bear with me...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-384190" href="/Public/Bug/Display.html?id=30776#txn-384190">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;16&nbsp;07:25:01&nbsp;2007</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/384190/176164/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/176164">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Nov 16 07:04:31 2007, cfi wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; IO::Uncompress::Base got installed when I installed AnyUncompress
&gt; 
&gt; Gunzip is missing. Is this listed as a prerequisite of AnyUncompress? 
</div>I
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; guess it&#39;s intentional if not, because everybody has different needs 
</div>and
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; may not need a gzip interface.
</div>
It isn&#39;t a prerequisite for the very reason you mention.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Would it make sense to add an API to the OO version of this module so
&gt; that one could check for supported compression/inflation methods.
</div>
Yes, it would. It&#39;s on my list of possible enhancements.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sth like
&gt; if &#40;!defined&#40; $obj-&gt;algorithms&#40;&#41;-&gt;{gzip} &#41;&#41; {
&gt;   die &#34;Cannot handle gzipped data&#34;;
&gt; }
&gt; Hm, but that would make sense only if Anyuncompress could test the 
</div>type
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; of input file - even without those modules being installed. Then,
&gt; additionally to the api above, it would be possible to do sth like:
&gt; if &#40;$obj-&gt;inflatable&#40;&#41;&#41; {
&gt;   die &#34;Cannot handle &#34;.$obj-&gt;packed_with&#40;&#41;.&#34;&#39;ed data&#34;;
&gt; }
&gt; The inflatable&#40;&#41; method would check with that algorithm the file is
&gt; acked &#40;one of: qw&#40;plain gzip bzip lzf&#41;&#41; and would compare that with 
</div>the
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; available algorithms:
&gt; sub inflatable&#40;$&#41; {
&gt;   my &#40;$self&#41; = @_;
&gt;   return $self-&gt;algorithms&#40;&#41;-&gt;{ $self-&gt;packed_with&#40;&#41; };
&gt; }
</div>
At the moment AnyUncompress has a hard-wired list of uncompression 
modules that it makes use of to actually do the hard work. 

I&#39;ll probably add a static method that will work like this 
 if &#40;! AnyUncompress::canUncompress&#40;&#34;gzip&#34;&#41; &#41;&#41; {
   die &#34;Cannot handle gzipped data&#34;;
 }

I still need to work out the exact interface for this.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Back to my problem:
&gt; I&#39;ll install that Gunzip module and recheck.
&gt; Bear with me...
</div>
OK

Regarding your application, if you are only ever using gzip to compress 
your data then you can use IO::Uncompress::Gunzip instead of 
AnyUncompress. 

If you are working with mixed compression formats, or want to future-
proof your code in case you change the compression format &#40;to, say, 
bzip2&#41;, then AnyUncompress is a good option.

Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-384233" href="/Public/Bug/Display.html?id=30776#txn-384233">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;16&nbsp;11:49:32&nbsp;2007</span>
    <span class="description">ingo [...] ingoschmiegel.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ingo [...] ingoschmiegel.de</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/384233/176207/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/176207">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 467b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Great stuff!

Ok, with Gunzip.pm installed, this works.
I&#39;m now running into all sorts of trouble because I need to distribute
with my script several additional modules including some that rely on
binary files. But I&#39;m also 75% on getting PAR to run. *phew*

Yeah, I used the &#34;hardcoded&#34; gzip modules before, but &#34;future-proofness&#34;
is exactly what I&#39;m lookingi for. And I always wanted to check out PAR
anyway ;-&#41;

Can you please close this bug? Thanks for your help!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-384387" href="/Public/Bug/Display.html?id=30776#txn-384387">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;16&nbsp;17:43:10&nbsp;2007</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/384387/176327/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/176327">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 9b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Resolved.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-384389" href="/Public/Bug/Display.html?id=30776#txn-384389">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;16&nbsp;17:43:13&nbsp;2007</span>
    <span class="description">pmqs [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.504081</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
