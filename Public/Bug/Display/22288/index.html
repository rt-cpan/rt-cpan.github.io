<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #22288 for POE-Filter-XML: Deleting callback upon reset&#40;&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #22288 for POE-Filter-XML: Deleting callback upon reset&#40;&#41;</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=POE-Filter-XML">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=POE-Filter-XML">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=POE-Filter-XML">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=POE-Filter-XML">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/POE-Filter-XML">POE-Filter-XML CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">22288</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=POE-Filter-XML">POE-Filter-XML</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">nperez [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ewaters [...] uarc.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-26738-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
0.1</li>
<li>
0.1.1</li>
<li>
0.2.0</li>
<li>
0.2.1</li>
<li>
0.21</li>
<li>
0.22</li>
<li>
0.23</li>
<li>
0.24</li>
<li>
0.27</li>
<li>
0.28</li>
<li>
0.29</li>
</ul>
    </td>
  </tr>
  <tr id="CF-26739-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.30    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=22288">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-252531" href="/Public/Bug/Display.html?id=22288#txn-252531">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;19&nbsp;17:48:17&nbsp;2006</span>
    <span class="description">ewaters [...] uarc.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Deleting callback upon reset&#40;&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 19 Oct 2006 15:47:39 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-POE-Filter-XML [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Eric Waters &lt;ewaters [...] uarc.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/252531/108719/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/108719">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 365b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Distribution:  POE-Filter-XML-0.29

File: POE-Filter-XML-0.29/lib/POE/Filter/XML.pm
Line: 91

Problems:

Code deletes the callback if it&#39;s not passed to reset&#40;&#41;.  This breaks the callback if the users resets the filter.  There&#39;s no need for this, and is a bug.

Eric Waters
-- 
Email signed with GnuPG key id 0x7FE92A42
  <span class="clickylink"><a target="new" rel="nofollow" href="http://www.vegcrew.net/~ewaters/pubkey.asc">http://www.vegcrew.net/~ewaters/pubkey.asc</a></span>
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/252531/108720/">Download &#40;untitled&#41;</a><br />
<span class="downloadcontenttype">application/pgp-signature 189b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-252556" href="/Public/Bug/Display.html?id=22288#txn-252556">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;19&nbsp;18:26:41&nbsp;2006</span>
    <span class="description">nperez [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> NPEREZ [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/252556/108738/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/108738">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 970b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Eric,

This is not a bug. reset&#40;&#41; does as it was intended to do which is reset
the state of the Filter. The callback may very well be context dependant
and once the filter is reset, calling the wrong callback may have other
developers complain to me about the opposite of what you are complaining
about.

You do unintentionally bring up a good point: the error callback needs
more than one entry point &#40;aka. get_error_callback&#40;&#41;,
set_error_callback&#40;&#41;&#41; and I believe I will implement this in the next
release. This way when you need to reset&#40;&#41; the filter, you can retain
your same callback coderef.

Thanks,

Nick

On Thu Oct 19 17:48:17 2006, ewaters@uarc.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Distribution:  POE-Filter-XML-0.29
&gt; 
&gt; File: POE-Filter-XML-0.29/lib/POE/Filter/XML.pm
&gt; Line: 91
&gt; 
&gt; Problems:
&gt; 
&gt; Code deletes the callback if it&#39;s not passed to reset&#40;&#41;.  This breaks
&gt; the callback if the users resets the filter.  There&#39;s no need for
&gt; this, and is a bug.
&gt; 
&gt; Eric Waters
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-252557" href="/Public/Bug/Display.html?id=22288#txn-252557">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;19&nbsp;18:26:42&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-253194" href="/Public/Bug/Display.html?id=22288#txn-253194">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;20&nbsp;10:55:46&nbsp;2006</span>
    <span class="description">ewaters [...] uarc.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #22288] Deleting callback upon reset&#40;&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 20 Oct 2006 08:55:05 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> via RT &lt;bug-POE-Filter-XML [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Eric Waters &lt;ewaters [...] uarc.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/253194/109119/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/109119">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I hate to argue the point, but if this is not a bug, I&#39;ll have to submit another bug:

File: POE-Component-Jabber-1.21/lib/POE/Component/Jabber/Server/Socket.pm

On line 61:

  $heap-&gt;{&#39;filter&#39;} = POE::Filter::XML-&gt;new&#40;undef, $heap-&gt;{&#39;callback&#39;}&#41;;

the POE::Filter::XML object is created with the defined callback in the build_socket&#40;&#41; subroutine.  Later, in step_tls&#40;&#41; &#40;line 88&#41; and step_sasl&#40;&#41; &#40;line 131&#41; the filter is reset:

  $heap-&gt;{&#39;filter&#39;}-&gt;reset&#40;&#41;;

Since you&#39;re stating that it&#39;s somehow expected &#40;but not documented I might add&#41; that the reset will clear the callback, these two lines need to be changed to:

  $heap-&gt;{&#39;filter&#39;}-&gt;reset&#40; $heap-&gt;{&#39;callback&#39;} &#41;;

I&#39;d like to point out that the meta is not deleted if it&#39;s not passed to reset&#40;&#41;, but callback is.  Just seems inconsistent.  Also, please change documentation.  It currently reads:

  Since POE::Filter::XML follows the POE::Filter API look to POE::Filter for documentation. The only method covered here is new&#40;&#41;

It should mention reset&#40;&#41; as well since this is a custom function and not part of the POE::Filter API.

Eric

On Thu, Oct 19, 2006 at 06:26:42PM -0400,  via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=22288">http://rt.cpan.org/Ticket/Display.html?id=22288</a></span> &gt;
&gt; 
&gt; Hi Eric,
&gt; 
&gt; This is not a bug. reset&#40;&#41; does as it was intended to do which is reset
&gt; the state of the Filter. The callback may very well be context dependant
&gt; and once the filter is reset, calling the wrong callback may have other
&gt; developers complain to me about the opposite of what you are complaining
&gt; about.
&gt; 
&gt; You do unintentionally bring up a good point: the error callback needs
&gt; more than one entry point &#40;aka. get_error_callback&#40;&#41;,
&gt; set_error_callback&#40;&#41;&#41; and I believe I will implement this in the next
&gt; release. This way when you need to reset&#40;&#41; the filter, you can retain
&gt; your same callback coderef.
&gt; 
&gt; Thanks,
&gt; 
&gt; Nick
&gt; 
&gt; On Thu Oct 19 17:48:17 2006, ewaters@uarc.com wrote:
<div class="message-stanza open">&gt; &gt; Distribution:  POE-Filter-XML-0.29
&gt; &gt; 
&gt; &gt; File: POE-Filter-XML-0.29/lib/POE/Filter/XML.pm
&gt; &gt; Line: 91
&gt; &gt; 
&gt; &gt; Problems:
&gt; &gt; 
&gt; &gt; Code deletes the callback if it&#39;s not passed to reset&#40;&#41;.  This breaks
&gt; &gt; the callback if the users resets the filter.  There&#39;s no need for
&gt; &gt; this, and is a bug.
&gt; &gt; 
&gt; &gt; Eric Waters
</div>&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
</div>
-- 
Email signed with GnuPG key id 0x7FE92A42
  <span class="clickylink"><a target="new" rel="nofollow" href="http://www.vegcrew.net/~ewaters/pubkey.asc">http://www.vegcrew.net/~ewaters/pubkey.asc</a></span>
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/253194/109120/">Download &#40;untitled&#41;</a><br />
<span class="downloadcontenttype">application/pgp-signature 189b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-253300" href="/Public/Bug/Display.html?id=22288#txn-253300">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;20&nbsp;14:50:55&nbsp;2006</span>
    <span class="description">nperez [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> NPEREZ [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/253300/109201/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/109201">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">That is a very good point. I do know my original intentions were to 
require the guts everytime reset&#40;&#41; was called. And you are right that 
it isn&#39;t consistent and that it isn&#39;t documented very well. I am going 
to have some time this weekend to sit down and resolve your tickets 
including this one. Thanks for even bothering to take the time. It 
certainly helps me.

On Fri Oct 20 10:55:46 2006, ewaters@uarc.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I hate to argue the point, but if this is not a bug, I&#39;ll have to
&gt; submit another bug:
&gt; 
&gt; File: POE-Component-Jabber-
&gt; 1.21/lib/POE/Component/Jabber/Server/Socket.pm
&gt; 
&gt; On line 61:
&gt; 
&gt;   $heap-&gt;{&#39;filter&#39;} = POE::Filter::XML-&gt;new&#40;undef, $heap-
<div class="message-stanza open">&gt; &gt;{&#39;callback&#39;}&#41;;
</div>&gt; 
&gt; the POE::Filter::XML object is created with the defined callback in
&gt; the build_socket&#40;&#41; subroutine.  Later, in step_tls&#40;&#41; &#40;line 88&#41; and
&gt; step_sasl&#40;&#41; &#40;line 131&#41; the filter is reset:
&gt; 
&gt;   $heap-&gt;{&#39;filter&#39;}-&gt;reset&#40;&#41;;
&gt; 
&gt; Since you&#39;re stating that it&#39;s somehow expected &#40;but not documented I
&gt; might add&#41; that the reset will clear the callback, these two lines
&gt; need to be changed to:
&gt; 
&gt;   $heap-&gt;{&#39;filter&#39;}-&gt;reset&#40; $heap-&gt;{&#39;callback&#39;} &#41;;
&gt; 
&gt; I&#39;d like to point out that the meta is not deleted if it&#39;s not passed
&gt; to reset&#40;&#41;, but callback is.  Just seems inconsistent.  Also, please
&gt; change documentation.  It currently reads:
&gt; 
&gt;   Since POE::Filter::XML follows the POE::Filter API look to
&gt; POE::Filter for documentation. The only method covered here is new&#40;&#41;
&gt; 
&gt; It should mention reset&#40;&#41; as well since this is a custom function and
&gt; not part of the POE::Filter API.
&gt; 
&gt; Eric
&gt; 
&gt; On Thu, Oct 19, 2006 at 06:26:42PM -0400,  via RT wrote:
<div class="message-stanza open">&gt; &gt;
&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=22288">http://rt.cpan.org/Ticket/Display.html?id=22288</a></span> &gt;
&gt; &gt;
&gt; &gt; Hi Eric,
&gt; &gt;
&gt; &gt; This is not a bug. reset&#40;&#41; does as it was intended to do which is
</div>&gt; reset
<div class="message-stanza open">&gt; &gt; the state of the Filter. The callback may very well be context
</div>&gt; dependant
<div class="message-stanza open">&gt; &gt; and once the filter is reset, calling the wrong callback may have
</div>&gt; other
<div class="message-stanza open">&gt; &gt; developers complain to me about the opposite of what you are
</div>&gt; complaining
<div class="message-stanza open">&gt; &gt; about.
&gt; &gt;
&gt; &gt; You do unintentionally bring up a good point: the error callback
</div>&gt; needs
<div class="message-stanza open">&gt; &gt; more than one entry point &#40;aka. get_error_callback&#40;&#41;,
&gt; &gt; set_error_callback&#40;&#41;&#41; and I believe I will implement this in the
</div>&gt; next
<div class="message-stanza open">&gt; &gt; release. This way when you need to reset&#40;&#41; the filter, you can
</div>&gt; retain
<div class="message-stanza open">&gt; &gt; your same callback coderef.
&gt; &gt;
&gt; &gt; Thanks,
&gt; &gt;
&gt; &gt; Nick
&gt; &gt;
&gt; &gt; On Thu Oct 19 17:48:17 2006, ewaters@uarc.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; Distribution:  POE-Filter-XML-0.29
&gt; &gt; &gt;
&gt; &gt; &gt; File: POE-Filter-XML-0.29/lib/POE/Filter/XML.pm
&gt; &gt; &gt; Line: 91
&gt; &gt; &gt;
&gt; &gt; &gt; Problems:
&gt; &gt; &gt;
&gt; &gt; &gt; Code deletes the callback if it&#39;s not passed to reset&#40;&#41;.  This
</div></div>&gt; breaks
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; the callback if the users resets the filter.  There&#39;s no need for
&gt; &gt; &gt; this, and is a bug.
&gt; &gt; &gt;
&gt; &gt; &gt; Eric Waters
</div>&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
</div>&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-256305" href="/Public/Bug/Display.html?id=22288#txn-256305">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;26&nbsp;23:51:14&nbsp;2006</span>
    <span class="description">nperez [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-256645" href="/Public/Bug/Display.html?id=22288#txn-256645">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;27&nbsp;10:14:06&nbsp;2006</span>
    <span class="description">nperez [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-256647" href="/Public/Bug/Display.html?id=22288#txn-256647">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;27&nbsp;10:14:06&nbsp;2006</span>
    <span class="description">nperez [...] cpan.org -  Severity Important added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-256648" href="/Public/Bug/Display.html?id=22288#txn-256648">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;27&nbsp;10:14:07&nbsp;2006</span>
    <span class="description">nperez [...] cpan.org -  Broken in 0.1 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-256649" href="/Public/Bug/Display.html?id=22288#txn-256649">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;27&nbsp;10:14:07&nbsp;2006</span>
    <span class="description">nperez [...] cpan.org -  Broken in 0.1.1 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-256650" href="/Public/Bug/Display.html?id=22288#txn-256650">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;27&nbsp;10:14:07&nbsp;2006</span>
    <span class="description">nperez [...] cpan.org -  Broken in 0.2.0 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-256651" href="/Public/Bug/Display.html?id=22288#txn-256651">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;27&nbsp;10:14:07&nbsp;2006</span>
    <span class="description">nperez [...] cpan.org -  Broken in 0.2.1 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-256652" href="/Public/Bug/Display.html?id=22288#txn-256652">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;27&nbsp;10:14:07&nbsp;2006</span>
    <span class="description">nperez [...] cpan.org -  Broken in 0.21 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-256653" href="/Public/Bug/Display.html?id=22288#txn-256653">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;27&nbsp;10:14:08&nbsp;2006</span>
    <span class="description">nperez [...] cpan.org -  Broken in 0.22 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-256654" href="/Public/Bug/Display.html?id=22288#txn-256654">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;27&nbsp;10:14:08&nbsp;2006</span>
    <span class="description">nperez [...] cpan.org -  Broken in 0.23 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-256655" href="/Public/Bug/Display.html?id=22288#txn-256655">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;27&nbsp;10:14:08&nbsp;2006</span>
    <span class="description">nperez [...] cpan.org -  Broken in 0.24 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-256656" href="/Public/Bug/Display.html?id=22288#txn-256656">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;27&nbsp;10:14:09&nbsp;2006</span>
    <span class="description">nperez [...] cpan.org -  Broken in 0.27 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-256657" href="/Public/Bug/Display.html?id=22288#txn-256657">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;27&nbsp;10:14:09&nbsp;2006</span>
    <span class="description">nperez [...] cpan.org -  Broken in 0.28 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-256658" href="/Public/Bug/Display.html?id=22288#txn-256658">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;27&nbsp;10:14:09&nbsp;2006</span>
    <span class="description">nperez [...] cpan.org -  Broken in 0.29 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-256659" href="/Public/Bug/Display.html?id=22288#txn-256659">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;27&nbsp;10:14:10&nbsp;2006</span>
    <span class="description">nperez [...] cpan.org -  Fixed in 0.30 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.843504</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
