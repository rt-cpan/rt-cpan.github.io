<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #88487 for Math-Vector-Real: objects constructed via  ops subs aren&#39;t blessed into parent object&#39;s class</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #88487 for Math-Vector-Real: objects constructed via  ops subs aren&#39;t blessed into parent object&#39;s class</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Math-Vector-Real">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Math-Vector-Real">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Math-Vector-Real">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Math-Vector-Real">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Math-Vector-Real">Math-Vector-Real CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">88487</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Math-Vector-Real">Math-Vector-Real</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
djerius [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-231020-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.10    </td>
  </tr>
  <tr id="CF-231021-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




pp.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1259721/666945/pp.patch">
Sat Sep 07 21:15:42 2013 (7.1k) by djerius [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=88487">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1259691" href="/Public/Bug/Display.html?id=88487#txn-1259691">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;07&nbsp;17:37:46&nbsp;2013</span>
    <span class="description">djerius [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> objects constructed via  ops subs aren&#39;t blessed into parent
 object&#39;s class</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1259691/666925/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/666925">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 402b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">In subclasses of Math::Vector::Real, objects created while performing any operations are blessed into Math::Vector::Real, not into the subclass.  For example:

$ reply
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">0&gt; package VR { use base &#39;Math::Vector::Real&#39; }
</div><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">1&gt; VR-&gt;new
</div>$res[0] = bless&#40; [], &#39;VR&#39; &#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">2&gt; VR-&gt;new * 3
</div>$res[1] = bless&#40; [], &#39;Math::Vector::Real&#39; &#41;

I expected the latter operation to result in an object blessed into VR.

Thanks,
Diab
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1259721" href="/Public/Bug/Display.html?id=88487#txn-1259721">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;07&nbsp;21:15:42&nbsp;2013</span>
    <span class="description">djerius [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1259721/666944/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/666944">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 245b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Sep 07 17:37:46 2013, DJERIUS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In subclasses of Math::Vector::Real, objects created while performing
&gt; any operations are blessed into Math::Vector::Real, not into the
&gt; subclass. 
</div>
Attached is a patch implementing this behavior.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> pp.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1259721/666945/pp.patch">Download pp.patch</a><br />
<span class="downloadcontenttype">text/x-diff 7.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">

# bless constructed objects in proper class
# 
# To apply this patch:
# STEP 1: Chdir to the source directory.
# STEP 2: Run the &#39;applypatch&#39; program with this patch file as input.
#
# If you do not have &#39;applypatch&#39;, it is part of the &#39;makepatch&#39; package
# that you can fetch from the Comprehensive Perl Archive Network:
# <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.com/CPAN/authors/Johan_Vromans/makepatch-x.y.tar.gz">http://www.perl.com/CPAN/authors/Johan_Vromans/makepatch-x.y.tar.gz</a></span>
# In the above URL, &#39;x&#39; should be 2 or higher.
#
# To apply this patch without the use of &#39;applypatch&#39;:
# STEP 1: Chdir to the source directory.
# If you have a decent Bourne-type shell:
# STEP 2: Run the shell with this file as input.
# If you don&#39;t have such a shell, you may need to manually create
# the files as shown below.
# STEP 3: Run the &#39;patch&#39; program with this file as input.
#
# These are the commands needed to create/delete files/directories:
#
touch &#39;t/subclass.t&#39;
chmod 0664 &#39;t/subclass.t&#39;
#
# This command terminates the shell and need not be executed manually.
exit
#
#### End of Preamble ####

#### Patch data follows ####
diff -c &#39;Math-Vector-Real-0.10.orig/MANIFEST&#39; &#39;Math-Vector-Real-0.10/MANIFEST&#39;
Index: ./MANIFEST
*** ./MANIFEST	Tue Jul 17 07:50:36 2012
--- ./MANIFEST	Sat Sep  7 19:01:54 2013
***************
*** 3,8 ****
--- 3,9 ----
  MANIFEST
  README
  t/Math-Vector-Real.t
+ t/subclass.t
  t/pods.t
  lib/Math/Vector/Real.pm
  examples/dist_to_line.pl
diff -c &#39;Math-Vector-Real-0.10.orig/lib/Math/Vector/Real.pm&#39; &#39;Math-Vector-Real-0.10/lib/Math/Vector/Real.pm&#39;
Index: ./lib/Math/Vector/Real.pm
*** ./lib/Math/Vector/Real.pm	Wed Jul  4 09:17:09 2012
--- ./lib/Math/Vector/Real.pm	Sat Sep  7 18:56:52 2013
***************
*** 98,104 ****
      croak &#34;vector dimensions do not match&#34;;
  }
  
! sub clone { bless [@{$_[0]}] }
  
  sub set {
      &#38;_check_dim;
--- 98,104 ----
      croak &#34;vector dimensions do not match&#34;;
  }
  
! sub clone { bless [@{$_[0]}], ref $_[0] }
  
  sub set {
      &#38;_check_dim;
***************
*** 109,115 ****
  sub add {
      &#38;_check_dim;
      my &#40;$v0, $v1&#41; = @_;
!     bless [map $v0-&gt;[$_] + $v1-&gt;[$_], 0..$#$v0]
  }
  
  sub add_me {
--- 109,115 ----
  sub add {
      &#38;_check_dim;
      my &#40;$v0, $v1&#41; = @_;
!     bless [map $v0-&gt;[$_] + $v1-&gt;[$_], 0..$#$v0], ref $_[ $_[2] ? 1 : 0];
  }
  
  sub add_me {
***************
*** 119,130 ****
      $v0;
  }
  
! sub neg { bless [map -$_, @{$_[0]}] }
  
  sub sub {
      &#38;_check_dim;
!     my &#40;$v0, $v1&#41; = &#40;$_[2] ? @_[1, 0] : @_&#41;;
!     bless [map $v0-&gt;[$_] - $v1-&gt;[$_], 0..$#$v0]
  }
  
  sub sub_me {
--- 119,130 ----
      $v0;
  }
  
! sub neg { bless [map -$_, @{$_[0]}], ref $_[0]  }
  
  sub sub {
      &#38;_check_dim;
!     my &#40;$v0, $v1 &#41; = &#40;$_[2] ? @_[1, 0] : @_&#41;;
!     bless [map $v0-&gt;[$_] - $v1-&gt;[$_], 0..$#$v0], ref $_[ $_[2] ? 1 : 0];
  }
  
  sub sub_me {
***************
*** 143,150 ****
  	$acu;
      }
      else {
! 	my &#40;$v, $s&#41; = @_;
! 	bless [map $s * $_, @$v];
      }
  }
  
--- 143,150 ----
  	$acu;
      }
      else {
! 	my &#40;$v, $s &#41; = @_;
! 	bless [map $s * $_, @$v], ref $_[0];
      }
  }
  
***************
*** 158,167 ****
  sub div {
      croak &#34;can&#39;t use vector as dividend&#34;
  	if &#40;$_[2] or ref $_[1]&#41;;
!     my &#40;$v, $div&#41; = @_;
      $div == 0 and croak &#34;illegal division by zero&#34;;
      my $i = 1 / $div;
!     bless [map $i * $_, @$v]
  }
  
  sub div_me {
--- 158,167 ----
  sub div {
      croak &#34;can&#39;t use vector as dividend&#34;
  	if &#40;$_[2] or ref $_[1]&#41;;
!     my &#40;$v, $div &#41; = @_;
      $div == 0 and croak &#34;illegal division by zero&#34;;
      my $i = 1 / $div;
!     bless [map $i * $_, @$v], ref $_[0];
  }
  
  sub div_me {
***************
*** 193,199 ****
      if &#40;$dim == 3&#41; {
  	return bless [$v0-&gt;[1] * $v1-&gt;[2] - $v0-&gt;[2] * $v1-&gt;[1],
  		      $v0-&gt;[2] * $v1-&gt;[0] - $v0-&gt;[0] * $v1-&gt;[2],
! 		      $v0-&gt;[0] * $v1-&gt;[1] - $v0-&gt;[1] * $v1-&gt;[0]]
      }
      if &#40;$dim == 7&#41; {
  	croak &#34;cross product for dimension 7 not implemented yet, patches welcome!&#34;;
--- 193,200 ----
      if &#40;$dim == 3&#41; {
  	return bless [$v0-&gt;[1] * $v1-&gt;[2] - $v0-&gt;[2] * $v1-&gt;[1],
  		      $v0-&gt;[2] * $v1-&gt;[0] - $v0-&gt;[0] * $v1-&gt;[2],
! 		      $v0-&gt;[0] * $v1-&gt;[1] - $v0-&gt;[1] * $v1-&gt;[0]],
! 			 ref $_[0];
      }
      if &#40;$dim == 7&#41; {
  	croak &#34;cross product for dimension 7 not implemented yet, patches welcome!&#34;;
***************
*** 287,293 ****
      $f += $_ * $_ for @$self;
      $f == 0 and croak &#34;Illegal division by zero&#34;;
      $f = 1/sqrt $f;
!     bless [map $f * $_, @$self]
  }
  
  sub wrap {
--- 288,294 ----
      $f += $_ * $_ for @$self;
      $f == 0 and croak &#34;Illegal division by zero&#34;;
      $f = 1/sqrt $f;
!     bless [map $f * $_, @$self], ref $self;
  }
  
  sub wrap {
***************
*** 296,302 ****
  
      bless [map  { my $s = $self-&gt;[$_];
  		  my $c = $v-&gt;[$_];
! 		  $c - $s * POSIX::floor&#40;$c/$s&#41; } &#40;0..$#$self&#41;];
  }
  
  sub max_component {
--- 297,304 ----
  
      bless [map  { my $s = $self-&gt;[$_];
  		  my $c = $v-&gt;[$_];
! 		  $c - $s * POSIX::floor&#40;$c/$s&#41; } &#40;0..$#$self&#41;],
! 		      ref $self;
  }
  
  sub max_component {
diff -c /dev/null &#39;Math-Vector-Real-0.10/t/subclass.t&#39;
Index: ./t/subclass.t
*** ./t/subclass.t	Wed Dec 31 19:00:00 1969
--- ./t/subclass.t	Sat Sep  7 19:01:18 2013
***************
*** 0 ****
--- 1,34 ----
+ #!/usr/bin/perl
+ 
+ use Test::More;
+ 
+ use Math::Vector::Real;
+ 
+ {
+   package SC;
+   use base &#39;Math::Vector::Real&#39;;
+ }
+ 
+ is&#40; ref SC-&gt;new-&gt;clone, &#39;SC&#39;, &#39;clone&#39; &#41;;
+ 
+ is&#40; ref &#40; SC-&gt;new + V&#40;&#41; &#41;, &#39;SC&#39;, &#39;add&#39; &#41;;
+ 
+ is&#40; ref &#40; - SC-&gt;new &#41;, &#39;SC&#39;, &#39;neg&#39; &#41;;
+ 
+ is&#40; ref &#40; SC-&gt;new * 3 &#41;, &#39;SC&#39;, &#39;* 3&#39; &#41;;
+ 
+ is&#40; ref &#40; 3 * SC-&gt;new &#41;, &#39;SC&#39;, &#39;3 *&#39; &#41;;
+ 
+ is&#40; ref &#40; SC-&gt;new / 3&#41;, &#39;SC&#39;, &#39;/ 3 &#39; &#41;;
+ 
+ is&#40; ref &#40; SC-&gt;new&#40;1,1,1&#41; x V&#40;1,1,1&#41; &#41;, &#39;SC&#39;, &#39; x V&#39; &#41;;
+ 
+ is&#40; ref &#40; SC-&gt;new&#40;1,1,1&#41; x [1,1,1] &#41;, &#39;SC&#39;, &#39;x []&#39; &#41;;
+ 
+ is&#40; ref &#40; [1,1,1]  x SC-&gt;new&#40;1,1,1&#41; &#41;, &#39;SC&#39;, &#39;[] x&#39; &#41;;
+ 
+ is&#40; ref&#40; SC-&gt;new&#40;1,1,1&#41;-&gt;versor &#41;, &#39;SC&#39;, &#39;versor&#39; &#41;;
+ 
+ is&#40; ref&#40; SC-&gt;new&#40;1,1,1&#41;-&gt;wrap&#40; V&#40;1,1,1&#41; &#41; &#41;, &#39;SC&#39;, &#39;wrap&#39; &#41;;
+ 
+ done_testing;
#### End of Patch data ####

#### ApplyPatch data follows ####
# Data version        : 1.0
# Date generated      : Sat Sep  7 21:14:52 2013
# Generated by        : makepatch 2.05
# Recurse directories : Yes
# Excluded files      : &#40;\A|/&#41;.*\~\Z
#                       &#40;\A|/&#41;.*\.a\Z
#                       &#40;\A|/&#41;.*\.bak\Z
#                       &#40;\A|/&#41;.*\.BAK\Z
#                       &#40;\A|/&#41;.*\.elc\Z
#                       &#40;\A|/&#41;.*\.exe\Z
#                       &#40;\A|/&#41;.*\.gz\Z
#                       &#40;\A|/&#41;.*\.ln\Z
#                       &#40;\A|/&#41;.*\.o\Z
#                       &#40;\A|/&#41;.*\.obj\Z
#                       &#40;\A|/&#41;.*\.olb\Z
#                       &#40;\A|/&#41;.*\.old\Z
#                       &#40;\A|/&#41;.*\.orig\Z
#                       &#40;\A|/&#41;.*\.rej\Z
#                       &#40;\A|/&#41;.*\.so\Z
#                       &#40;\A|/&#41;.*\.Z\Z
#                       &#40;\A|/&#41;\.del\-.*\Z
#                       &#40;\A|/&#41;\.make\.state\Z
#                       &#40;\A|/&#41;\.nse_depinfo\Z
#                       &#40;\A|/&#41;core\Z
#                       &#40;\A|/&#41;tags\Z
#                       &#40;\A|/&#41;TAGS\Z
# p &#39;MANIFEST&#39; 194 1378594914 0100644
# p &#39;lib/Math/Vector/Real.pm&#39; 16956 1378594612 0100644
# c &#39;t/subclass.t&#39; 0 1378594878 0100664
#### End of ApplyPatch data ####

#### End of Patch kit [created: Sat Sep  7 21:14:52 2013] ####
#### Patch checksum: 251 6220 60227 ####
#### Checksum: 281 7268 17977 ####
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1260317" href="/Public/Bug/Display.html?id=88487#txn-1260317">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;09&nbsp;04:50:30&nbsp;2013</span>
    <span class="description">salva [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1260317/667267/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/667267">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 170b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Math::Vector::Real was never intended to be extended via inheritance.

You will have to describe me your use case in order to convince me that it is a good idea to do so.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1260318" href="/Public/Bug/Display.html?id=88487#txn-1260318">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;09&nbsp;04:50:30&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1260709" href="/Public/Bug/Display.html?id=88487#txn-1260709">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;09&nbsp;19:05:02&nbsp;2013</span>
    <span class="description">djerius [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1260709/667480/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/667480">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Sep 09 04:50:30 2013, SALVA wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Math::Vector::Real was never intended to be extended via inheritance.
&gt;
&gt; You will have to describe me your use case in order to convince me
&gt; that it is a good idea to do so.
</div>
I&#39;ve created a Vector class based upon Math::Vector::Real which
interoperates with Math::Matrix and Math::Quaternion so that I can
easily perform coordinate transformations. If the overloaded ops don&#39;t
bless the results into my class, it breaks chaining of operations.

For example,  I would like to be able to do the following

  &#40;$V1 - $V2&#41; * &#40; &#40;$M1 * $M2&#41; * $Q &#41;

Math::Vector::Real doesn&#39;t know how to left multiply matrices, so in
order to do so, I need to override it&#39;s overloaded &#39;*&#39; operator.  My
overridden version of mul&#40;&#41; understands how to handle 3x3 and 4x4
affine transformation matrices as well as Math::Quaternion objects.

In the above exmaple, there&#39;s no functional need to override the &#39;-&#39;
operator, but the result is blessed in Math::Vector::Real, not my
Vector class, so the left multiplication of the matrices will fail.

I&#39;ve subclassed Math::Matrix &#40;whose operators do bless into the
subclass&#41; so that it handles left multiplication of my Vector class
and Math::Quaternion.  So,

  &#40;$M1 * $M2&#41; * $V

or

  &#40;$M1 * $M2&#41; * $Q

will work.

The ability to subclass Math::Vector::Real so that it can easily
interoperate with other classes opens up a lot of functionality.

If I can&#39;t do that, I essentially have to rewrite Math::Vector::Real,
as the results of its overloaded operations erase the extra functionality
in my subclass.

I don&#39;t believe that the changes to make the overloaded operators aware of the subclass are too intrusive, or incur any great performance penalty &#40;although I haven&#39;t benchmarked it&#41;.  I have not looked at the XS version to see if its an onerous job to change its behavior similarly.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1260988" href="/Public/Bug/Display.html?id=88487#txn-1260988">#</a>      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;10&nbsp;07:56:35&nbsp;2013</span>
    <span class="description">sfandino [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #88487] objects constructed via  ops subs aren&#39;t blessed into parent object&#39;s class</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 10 Sep 2013 04:55:58 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Math-Vector-Real [...] rt.cpan.org&#34; &lt;bug-Math-Vector-Real [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Salvador Fandino &lt;sfandino [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1260988/667634/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/667634">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message -----
<div class="message-stanza open">&gt; From: Diab Jerius via RT &lt;bug-Math-Vector-Real@rt.cpan.org&gt;
&gt; To: 
&gt; Cc: 
&gt; Sent: Tuesday, September 10, 2013 1:05 AM
&gt; Subject: [rt.cpan.org #88487] objects constructed via  ops subs aren&#39;t blessed into parent object&#39;s class
&gt; 
&gt; Â  Â  Â   Queue: Math-Vector-Real
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=88487">https://rt.cpan.org/Ticket/Display.html?id=88487</a></span> &gt;
&gt; 
&gt; On Mon Sep 09 04:50:30 2013, SALVA wrote:
<div class="message-stanza open">&gt;&gt;  Math::Vector::Real was never intended to be extended via inheritance.
&gt;&gt; 
&gt;&gt;  You will have to describe me your use case in order to convince me
&gt;&gt;  that it is a good idea to do so.
</div>&gt; 
&gt; I&#39;ve created a Vector class based upon Math::Vector::Real which
&gt; interoperates with Math::Matrix and Math::Quaternion so that I can
&gt; easily perform coordinate transformations. If the overloaded ops don&#39;t
&gt; bless the results into my class, it breaks chaining of operations.
&gt; 
&gt; For example,Â  I would like to be able to do the following
&gt; 
&gt; Â  &#40;$V1 - $V2&#41; * &#40; &#40;$M1 * $M2&#41; * $Q &#41;
</div>
<div class="message-stanza open">&gt; Math::Vector::Real doesn&#39;t know how to left multiply matrices, so in
&gt; order to do so, I need to override it&#39;s overloaded &#39;*&#39; operator.Â  My
&gt; overridden version of mul&#40;&#41; understands how to handle 3x3 and 4x4
&gt; affine transformation matrices as well as Math::Quaternion objects.
&gt; 
&gt; In the above exmaple, there&#39;s no functional need to override the &#39;-&#39;
&gt; operator, but the result is blessed in Math::Vector::Real, not my
&gt; Vector class, so the left multiplication of the matrices will fail.
&gt; 
&gt; I&#39;ve subclassed Math::Matrix &#40;whose operators do bless into the
&gt; subclass&#41; so that it handles left multiplication of my Vector class
&gt; and Math::Quaternion.Â  So,
&gt; 
&gt; Â  &#40;$M1 * $M2&#41; * $V
&gt; 
&gt; or
&gt; 
&gt; Â  &#40;$M1 * $M2&#41; * $Q
&gt; 
&gt; will work.
</div>
This is a problem I have already faced before and, IMO, inheritance is not the right solution.

The right way to fix it would be to add support at the perl core for some kind of multimethod distpatching when both arguments to a binary overloadable operator have defined a method to handle it.

In the meantime, a solution that works now, is to wrap in-place the overloading methods with others that do the dispatching and maybe some automatic type promotion.

I have added a sample script to Math::Vector::Real distribution that shows how to make it inter-operate transparently with Math::Matrix:

Â  <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/salva/p5-Math-Vector-Real/blob/master/examples/Math-Matrix.pl">https://github.com/salva/p5-Math-Vector-Real/blob/master/examples/Math-Matrix.pl</a></span>


In any case, is there any reason why you just don&#39;t use Math::Matrix for everything?

Anything you do with vectors or quaternions can also be done with matrices.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1261075" href="/Public/Bug/Display.html?id=88487#txn-1261075">#</a>      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;10&nbsp;11:59:40&nbsp;2013</span>
    <span class="description">djerius [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1261075/667683/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/667683">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Sep 10 07:56:35 2013, sfandino@yahoo.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This is a problem I have already faced before and, IMO, inheritance is
&gt; not the right solution.
&gt; 
&gt; The right way to fix it would be to add support at the perl core for
&gt; some kind of multimethod distpatching when both arguments to a binary
&gt; overloadable operator have defined a method to handle it.
</div>
Yes.  It&#39;s not likely this will happen anytime soon, however.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; In the meantime, a solution that works now, is to wrap in-place the
&gt; overloading methods with others that do the dispatching and maybe some
&gt; automatic type promotion.
&gt; 
&gt; I have added a sample script to Math::Vector::Real distribution that
&gt; shows how to make it inter-operate transparently with Math::Matrix:
&gt; 
&gt; Â  <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/salva/p5-Math-Vector-">https://github.com/salva/p5-Math-Vector-</a></span>
&gt; Real/blob/master/examples/Math-Matrix.pl
&gt; 
</div>
By overriding methods directly in the Math::Vector::Real class, there
is the possibility that multiple competing overrides will clash.
It creates a single point of contention and possible failure.  The
benefit of subclassing is that one doesn&#39;t have to worry about other
modules overwriting my overrides


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In any case, is there any reason why you just don&#39;t use Math::Matrix
&gt; for everything?
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Anything you do with vectors or quaternions can also be done with
&gt; matrices.
</div>
I have existing code which uses Math::Vector::Real, and it seemed natural
to fold it into my new code.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1261406" href="/Public/Bug/Display.html?id=88487#txn-1261406">#</a>      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;11&nbsp;03:57:49&nbsp;2013</span>
    <span class="description">sfandino [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #88487] objects constructed via  ops subs aren&#39;t blessed into parent object&#39;s class</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 11 Sep 2013 00:57:34 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Math-Vector-Real [...] rt.cpan.org&#34; &lt;bug-Math-Vector-Real [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Salvador Fandino &lt;sfandino [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1261406/667858/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/667858">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message -----
<div class="message-stanza open">&gt; From: Diab Jerius via RT &lt;bug-Math-Vector-Real@rt.cpan.org&gt;
&gt; To: 
&gt; Cc: 
&gt; Sent: Tuesday, September 10, 2013 5:59 PM
&gt; Subject: [rt.cpan.org #88487] objects constructed via  ops subs aren&#39;t blessed into parent object&#39;s class
&gt; 
&gt; Â  Â  Â   Queue: Math-Vector-Real
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=88487">https://rt.cpan.org/Ticket/Display.html?id=88487</a></span> &gt;
&gt; 
&gt; On Tue Sep 10 07:56:35 2013, sfandino@yahoo.com wrote:
<div class="message-stanza open">&gt;&gt;  This is a problem I have already faced before and, IMO, inheritance is
&gt;&gt;  not the right solution.
&gt;&gt; 
&gt;&gt;  The right way to fix it would be to add support at the perl core for
&gt;&gt;  some kind of multimethod distpatching when both arguments to a binary
&gt;&gt;  overloadable operator have defined a method to handle it.
</div>&gt; 
&gt; Yes.Â  It&#39;s not likely this will happen anytime soon, however.
&gt; 
&gt; 
<div class="message-stanza open">&gt;&gt; 
&gt;&gt;  In the meantime, a solution that works now, is to wrap in-place the
&gt;&gt;  overloading methods with others that do the dispatching and maybe some
&gt;&gt;  automatic type promotion.
&gt;&gt; 
&gt;&gt;  I have added a sample script to Math::Vector::Real distribution that
&gt;&gt;  shows how to make it inter-operate transparently with Math::Matrix:
&gt;&gt; 
&gt;&gt;  Â  <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/salva/p5-Math-Vector-">https://github.com/salva/p5-Math-Vector-</a></span>
&gt;&gt;  Real/blob/master/examples/Math-Matrix.pl
&gt;&gt; 
</div>&gt; 
&gt; By overriding methods directly in the Math::Vector::Real class, there
&gt; is the possibility that multiple competing overrides will clash.
&gt; It creates a single point of contention and possible failure.Â  The
&gt; benefit of subclassing is that one doesn&#39;t have to worry about other
&gt; modules overwriting my overrides
</div>
In theory yes, in practice this is very unlikely to happen.

Anyway, there is no problem if the overloading subs are wrapped several times other than some performance degradation and then, if you really thing that would happen, you can always write a module to take care of the wrapping allowing cooperation of several modules.


<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;  In any case, is there any reason why you just don&#39;t use Math::Matrix
&gt;&gt;  for everything?
</div>&gt; 
<div class="message-stanza open">&gt;&gt;  Anything you do with vectors or quaternions can also be done with
&gt;&gt;  matrices.
</div>&gt; 
&gt; I have existing code which uses Math::Vector::Real, and it seemed natural
&gt; to fold it into my new code
</div>
Maybe an easy solution would be to create a pair of operators able to convert between Math::Vector::Real and Math::Matrix and to use them explicitly on the parts of the code where you combine both.

For instance:

Â  sub V2M { Math::Matrix-&gt;new&#40;[@{shift&#40;&#41;}]&#41; }
Â  sub M2V { V&#40;@{shift-&gt;[0]}&#41; }

Â  $V3 = M2V&#40;V2M&#40;$V1 - $V2&#41; * &#40;$M1 * $M2&#41; * $Q &#41;&#41;;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1261517" href="/Public/Bug/Display.html?id=88487#txn-1261517">#</a>      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;11&nbsp;09:26:01&nbsp;2013</span>
    <span class="description">djerius [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #88487] objects constructed via ops subs aren&#39;t blessed into parent object&#39;s class</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 11 Sep 2013 09:25:48 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-Vector-Real [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Diab Jerius &lt;djerius [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1261517/667909/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/667909">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Sep 11, 2013 at 3:57 AM, Salvador \&#34;FandiÃ±o\&#34; via RT
&lt;bug-Math-Vector-Real@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; By overriding methods directly in the Math::Vector::Real class, there
&gt;&gt; is the possibility that multiple competing overrides will clash.
&gt;&gt; It creates a single point of contention and possible failure.  The
&gt;&gt; benefit of subclassing is that one doesn&#39;t have to worry about other
&gt;&gt; modules overwriting my overrides
</div>&gt;
&gt; In theory yes, in practice this is very unlikely to happen.
</div>
I&#39;ve discovered over the years that I no longer can predict what is
likely to happen, in particular with software.   I would rather ensure
that it cannot happen.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Anyway, there is no problem if the overloading subs are wrapped several times other than some performance degradation and then, if you really thing that would happen, you can always write a module to take care of the wrapping allowing cooperation of several modules.
</div>
Well, we&#39;ll have to agree to disagree on this.  From my point of view,
a few small changes to the module ensure that this sort of
monkeypatching is not necessary.  The amount and complexity of code
required to ensure that all subsequent patching works seems an
enormous technical debt &#40;repeated by everyone who needs to do it&#41;
compared to the relatively non-invasive changes I suggest.

You obviously have a different philosophy, which I respect, so I&#39;m
afraid we&#39;re at an impasse.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Maybe an easy solution would be to create a pair of operators able to convert between Math::Vector::Real and Math::Matrix and to use them explicitly on the parts of the code where you combine both.
&gt;
&gt; For instance:
&gt;
&gt;   sub V2M { Math::Matrix-&gt;new&#40;[@{shift&#40;&#41;}]&#41; }
&gt;   sub M2V { V&#40;@{shift-&gt;[0]}&#41; }
&gt;
&gt;   $V3 = M2V&#40;V2M&#40;$V1 - $V2&#41; * &#40;$M1 * $M2&#41; * $Q &#41;&#41;;
</div>
This works, but unfortunately now exposes a more complex interface to
users of my code.  I&#39;m trying for simplicity for the user, and this
moves away from that goal.

Diab
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1261536" href="/Public/Bug/Display.html?id=88487#txn-1261536">#</a>      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;11&nbsp;10:32:42&nbsp;2013</span>
    <span class="description">sfandino [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #88487] objects constructed via ops subs aren&#39;t blessed into parent object&#39;s class</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 11 Sep 2013 07:32:23 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Math-Vector-Real [...] rt.cpan.org&#34; &lt;bug-Math-Vector-Real [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Salvador Fandino &lt;sfandino [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1261536/667925/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/667925">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message -----
<div class="message-stanza open">&gt; From: Diab Jerius via RT &lt;bug-Math-Vector-Real@rt.cpan.org&gt;
&gt; To: 
&gt; Cc: 
&gt; Sent: Wednesday, September 11, 2013 3:26 PM
&gt; Subject: Re: [rt.cpan.org #88487] objects constructed via ops subs aren&#39;t blessed into parent object&#39;s class
&gt; 
&gt; Â  Â  Â   Queue: Math-Vector-Real
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=88487">https://rt.cpan.org/Ticket/Display.html?id=88487</a></span> &gt;
&gt; 
&gt; On Wed, Sep 11, 2013 at 3:57 AM, Salvador \&#34;FandiÃ±o\&#34; via RT
&gt; &lt;bug-Math-Vector-Real@rt.cpan.org&gt; wrote:
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;  By overriding methods directly in the Math::Vector::Real class, there
&gt;&gt;&gt;  is the possibility that multiple competing overrides will clash.
&gt;&gt;&gt;  It creates a single point of contention and possible failure.Â  The
&gt;&gt;&gt;  benefit of subclassing is that one doesn&#39;t have to worry about 
</div></div>&gt; other
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;  modules overwriting my overrides
</div>&gt;&gt; 
&gt;&gt;  In theory yes, in practice this is very unlikely to happen.
</div>&gt; 
&gt; I&#39;ve discovered over the years that I no longer can predict what is
&gt; likely to happen, in particular with software.Â   I would rather ensure
&gt; that it cannot happen.
&gt; 
<div class="message-stanza open">&gt;&gt;  Anyway, there is no problem if the overloading subs are wrapped several 
</div>&gt; times other than some performance degradation and then, if you really thing that 
&gt; would happen, you can always write a module to take care of the wrapping 
&gt; allowing cooperation of several modules.
&gt; 
&gt; Well, we&#39;ll have to agree to disagree on this.Â  From my point of view,
&gt; a few small changes to the module ensure that this sort of
&gt; monkeypatching is not necessary.Â  The amount and complexity of code
&gt; required to ensure that all subsequent patching works seems an
&gt; enormous technical debt &#40;repeated by everyone who needs to do it&#41;
&gt; compared to the relatively non-invasive changes I suggest.
</div>
I see two mayor problems with your changes:

1 - you are asking me to promote most of the module internal methods into the public API.
2 - supporting Math::Vector::Real usage as a base class would also mean to support that usage within the other modules on the Math::Vector::Real family

So, I see them as quite intrusive and as, IMO, there are other better alternatives for doing what you need, I am not going to apply them. Sorry.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1261724" href="/Public/Bug/Display.html?id=88487#txn-1261724">#</a>      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;11&nbsp;18:05:07&nbsp;2013</span>
    <span class="description">djerius [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1261724/668040/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/668040">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 273b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Sep 11 10:32:42 2013, sfandino@yahoo.com wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So, I see them as quite intrusive and as, IMO, there are other better
&gt; alternatives for doing what you need, I am not going to apply them.
&gt; Sorry.
</div>

Understood.  Thanks for your effort in maintaining this package.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1359138" href="/Public/Bug/Display.html?id=88487#txn-1359138">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;May&nbsp;05&nbsp;06:14:19&nbsp;2014</span>
    <span class="description">salva [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.698669</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
