<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #33786 for Clipboard: Mac OS X clipboard info without shelling out</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #33786 for Clipboard: Mac OS X clipboard info without shelling out</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Clipboard/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Clipboard/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Clipboard/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Clipboard/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Clipboard">Clipboard CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">33786</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">30 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Clipboard/Active/">Clipboard</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">KING [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
wyant [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
upload [...] pause.perl.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-7430-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.09    </td>
  </tr>
  <tr id="CF-7431-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;03&nbsp;15:18:33&nbsp;2008</span>
    <span class="description">wyant [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> upload [...] pause.perl.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Mac OS X clipboard info without shelling out</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have just registered module Mac::Pasteboard, and the registrar
suggested that I let you know, so that you can consider using this
module instead of &#40;or in addition to, as the case may be&#41; shelling out
to pbcopy and pbpaste under Mac OS X.

The advantage to using this module is that you will not need to shell
out. There is other functionality, but a basic clipboard module won&#39;t
need it. You _should_ be able to get what you want just by calling
pbcopy&#40;&#41; or pbpaste&#40;&#41; as the case may be.

There are also disadvantages to this module:

The first is that it&#39;s an XS module, and therefore requires the user to
install the X Code toolkit.

The second is that it uses an interface that did not exist until Mac OS
10.3 &#40;Panther&#41;. We&#39;re up to 10.5 now, but you may wish to support older
operating systems anyway. The code I&#39;m currently using to detect OS
version is:

no warnings qw{uninitialized};
my $osvers = +sprintf &#39;%d.%03d&#39;, split &#39;\.&#39;, `sw_vers -productVersion`;
use warnings qw{uninitialized};
$? and die &#34;OS unsupported -- sw_vers failed with exit code $?\n&#34;;
$osvers &gt;= 10.003
    or die &#34;OS unsupported -- we need at least Mac OS X 10.3 &#40;Panther&#41;\n&#34;;

This is my favorite of the ones discussed on perl5-porters a couple
months ago.

Thanks,
Tom Wyant
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;06&nbsp;20:40:36&nbsp;2010</span>
    <span class="description">KING [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;06&nbsp;22:04:36&nbsp;2010</span>
    <span class="description">KING [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Do you know how to make a dependency only apply for a certain OS? I could 
try hacking around on it, but I don&#39;t want to make a&#40;nother&#41; mess.

If we can figure out the Makefile.PL incantation I&#39;ll do the dependency 
for sure.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;06&nbsp;22:04:36&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;06&nbsp;22:10:22&nbsp;2010</span>
    <span class="description">KING [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 06 22:04:36 2010, KING wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If we can figure out the Makefile.PL incantation I&#39;ll do the dependency 
&gt; for sure.
</div>
What am I talking about? I&#39;m already doing this for Win32::Clipboard.

v0.11 is going to just be shifting dependencies &#40;taking out IO::All and 
Spiffy, even though I like them they aren&#39;t important for this context&#41;, 
and I&#39;ll do this one, too.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;07&nbsp;01:02:19&nbsp;2010</span>
    <span class="description">KING [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Version 0.11 should be as you requested.

I don&#39;t know if the automated builds are going to be passing tests, and I 
also don&#39;t know how smoothly it goes for regular users, but I made a stab 
at it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;07&nbsp;01:02:20&nbsp;2010</span>
    <span class="description">KING [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;10&nbsp;18:12:30&nbsp;2010</span>
    <span class="description">harryfmudd [...] comcast.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #33786] Mac OS X clipboard info without shelling out</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 10 Oct 2010 22:12:21 +0000 &#40;UTC&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Clipboard [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> harryfmudd [...] comcast.net</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
----- &#34;KING via RT&#34; &lt;bug-Clipboard@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=33786">https://rt.cpan.org/Ticket/Display.html?id=33786</a></span> &gt;
&gt; 
&gt; Version 0.11 should be as you requested.
&gt; 
&gt; I don&#39;t know if the automated builds are going to be passing tests,
&gt; and I 
&gt; also don&#39;t know how smoothly it goes for regular users, but I made a
&gt; stab 
&gt; at it.
</div>
Thanks. A couple tweaks appear in order; it&#39;s the pits to work on OS-specific code when you don&#39;t have access to the OS. The universal diffs are attached.

In Clipboard.pm, the only thing was that Mac::Pasteboard does not support MacOS, which &#40;in Perl land&#41; means OS 9 or less. Neither do pbcopy and pbpaste, since Mac OS 9 has no shell to shell out to.

In MacPasteboard.pm, there were three things.

First, by default &#40;for better or worse&#41; it&#39;s an error to try to fetch data from an empty clipboard. Fortunately this is a default, and can be changed. This is what &#39;set&#40; missing_ok =&gt; 1 &#41;&#39; is about.

Second, under Mac OS X you can&#39;t put anything on the pasteboard until you take ownership, which you do by clearing it. Again for better or worse, Mac::Pasteboard is a fairly low-level interface, and the copy&#40;&#41; method assumes you already own the pasteboard. That&#39;s what the call to clear&#40;&#41; is about.

Third, the Mac::Pasteboard paste&#40;&#41; method is sensitive to context. I believe you did not intend your paste&#40;&#41; method to be so. That&#39;s what the &#39;return scalar ...&#39; is about. I confess I spent a bunch of time trying to understand what was going on here, because I myself had forgotten that in list context it returns some flags as well.

Thank you again for your attention to this. If you like, I will be glad to look at a pre-release of the next Clipboard.

Tom
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;10&nbsp;18:12:31&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;13&nbsp;00:47:24&nbsp;2010</span>
    <span class="description">KING [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">30 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">1&#41; So, previously I had Clipboard.pm trying to bind &#39;darwin&#39; to Xclip, 
even though it also bound it to MacPasteboard &#40;which took precedence&#41;. 
Other than that I just applied your diff to remove &#39;macos&#39;. MacOS isn&#39;t 
even in the CPAN test matrix, so phooey on it. Might as well support 
Windows 3.1.

2&#41; I applied the MacPasteboard.pm diffs with no change.

3&#41; Do you have any idea how we can do a &#34;smart dependency&#34; scheme for 
the different OSs? I thought of a couple options:
a&#41; Find out the right way to say, &#34;When on OS Z, pull in Z::Clipboardz&#34;
b&#41; Include a distro of all the dependencies for all the OSs. So, like 
Module::Install gets its own copy within the tarball, I could just toss 
them all in. Bandwidth is not a problem---nonworkingness is.

4&#41; If you want to take this even further, we could add t/darwin.t and 
guard it against running for other OSs. Issues here are:
a&#41; I&#39;m not sure what will happen on the CPAN test servers. I know for 
Linux it can&#39;t run much because it doesn&#39;t have an X server. Maybe it 
should also have a guard for when there is no X server running? Without 
an OSX machine handy these little glitchy bits are hard to get figured 
out.
b&#41; I&#39;m not sure what all should be tested.
c&#41; I want to guarantee that the tests won&#39;t nuke any user&#39;s clipboard 
data just for running the tests.

I went ahead and uploaded the new version, 0.13. I figured your patches 
are more likely to work than what was in 0.12, so it&#39;s better to put it 
out there and let you look at it from there.

Thank you for your time, expertise, and help. I feel all open-sourcey 
inside.

-rjk
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;14&nbsp;22:59:55&nbsp;2010</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 13 00:47:24 2010, KING wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 1&#41; So, previously I had Clipboard.pm trying to bind &#39;darwin&#39; to Xclip, 
&gt; even though it also bound it to MacPasteboard &#40;which took precedence&#41;. 
&gt; Other than that I just applied your diff to remove &#39;macos&#39;. MacOS isn&#39;t 
&gt; even in the CPAN test matrix, so phooey on it. Might as well support 
&gt; Windows 3.1.
</div>
I missed the Xclip/MacPasteboard thing. You can run X Windows under Mac
OS X, but I know nothing about whether the clipboards are unified or
distinct.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 2&#41; I applied the MacPasteboard.pm diffs with no change.
</div>
Thanks glad it worked.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 3&#41; Do you have any idea how we can do a &#34;smart dependency&#34; scheme for 
&gt; the different OSs? I thought of a couple options:
&gt; a&#41; Find out the right way to say, &#34;When on OS Z, pull in Z::Clipboardz&#34;
</div>
Adam Kennedy does this for File::HomeDir. It&#39;s a matter of having
Makefile.PL &#40;or Build.PL, or whoever&#41; figure out what it&#39;s running under
and tweak things appropriately. You&#39;re supposed to set dynamic_config
true so that people will know that the requirements recorded in META.yml
are _not_ the last word on the subject.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; b&#41; Include a distro of all the dependencies for all the OSs. So, like 
&gt; Module::Install gets its own copy within the tarball, I could just toss 
&gt; them all in. Bandwidth is not a problem---nonworkingness is.
</div>
Mac::Pasteboard is an XS module, which may be a problem. I suspect the
Windows stuff is too, though it comes with ActivePerl. There would also
be keeping up to date with the included modules. And I think CPAN tries
to keep up with this kind of thing, and plasters a big red &#34;Unofficial
release&#34; across anything it does not like.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 4&#41; If you want to take this even further, we could add t/darwin.t and 
&gt; guard it against running for other OSs. Issues here are:
</div>
This could certainly be done. Just skip all the tests if you&#39;re not on
the right operating system. Test::More makes this easy, though I&#39;m not
sure how their mechanism will play out with your Test::Clipboard. You
might have to drop the &#39;no_plan&#39; in Test::Clipboard and call plan&#40;&#41;
explicitly when you know whether you are going to run the tests.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; a&#41; I&#39;m not sure what will happen on the CPAN test servers. I know for 
&gt; Linux it can&#39;t run much because it doesn&#39;t have an X server. Maybe it 
&gt; should also have a guard for when there is no X server running? Without 
&gt; an OSX machine handy these little glitchy bits are hard to get figured 
&gt; out.
</div>
In a way, that&#39;s why there are CPAN testers. One of the things you can
do is put out a developer release &#40;with an underscore in the version,
say &#39;0.13_01&#39;, which will have to be quoted&#41;. This means that it&#39;s
available, but the CPAN and CPANPLUS clients won&#39;t &#40;by default&#41; try to
upgrade to it. But the CPAN testers run development releases, so you can
find out if anything is wrong before it goes out into the wide world.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; b&#41; I&#39;m not sure what all should be tested.
</div>
I&#39;m _never_ sure of this. A wise man once said that untested code was
buggy code. If it&#39;s a matter of code coverage, Devel::Cover will measure
this. Whenever I run this for the first time, I&#39;m always shocked at how
low the coverage is.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; c&#41; I want to guarantee that the tests won&#39;t nuke any user&#39;s clipboard 
&gt; data just for running the tests.
</div>
Ah. Cautious. Mac::Pasteboard allows you to create your own unique
pasteboard name, but it appears that the system-supplied pbcopy and
pbpaste utilities can&#39;t access an arbitrary pasteboard. I&#39;m afraid
Mac::Pasteboard just nukes the clipboard. It should probably say so,
though. Or maybe I can think of a way to put it back when I&#39;m done.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I went ahead and uploaded the new version, 0.13. I figured your patches 
&gt; are more likely to work than what was in 0.12, so it&#39;s better to put it 
&gt; out there and let you look at it from there.
</div>
Thanks. Version 0.13 not only passes the tests, it actually works.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Thank you for your time, expertise, and help. I feel all open-sourcey 
&gt; inside.
&gt; 
&gt; -rjk
</div>
You know what an expert is, right? An ex- is a has-been, and a spurt is
a big drip.

Tom
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;14&nbsp;22:59:57&nbsp;2010</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 13 00:47:24 2010, KING wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 1&#41; So, previously I had Clipboard.pm trying to bind &#39;darwin&#39; to Xclip, 
&gt; even though it also bound it to MacPasteboard &#40;which took precedence&#41;. 
&gt; Other than that I just applied your diff to remove &#39;macos&#39;. MacOS isn&#39;t 
&gt; even in the CPAN test matrix, so phooey on it. Might as well support 
&gt; Windows 3.1.
</div>
I missed the Xclip/MacPasteboard thing. You can run X Windows under Mac
OS X, but I know nothing about whether the clipboards are unified or
distinct.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 2&#41; I applied the MacPasteboard.pm diffs with no change.
</div>
Thanks glad it worked.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 3&#41; Do you have any idea how we can do a &#34;smart dependency&#34; scheme for 
&gt; the different OSs? I thought of a couple options:
&gt; a&#41; Find out the right way to say, &#34;When on OS Z, pull in Z::Clipboardz&#34;
</div>
Adam Kennedy does this for File::HomeDir. It&#39;s a matter of having
Makefile.PL &#40;or Build.PL, or whoever&#41; figure out what it&#39;s running under
and tweak things appropriately. You&#39;re supposed to set dynamic_config
true so that people will know that the requirements recorded in META.yml
are _not_ the last word on the subject.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; b&#41; Include a distro of all the dependencies for all the OSs. So, like 
&gt; Module::Install gets its own copy within the tarball, I could just toss 
&gt; them all in. Bandwidth is not a problem---nonworkingness is.
</div>
Mac::Pasteboard is an XS module, which may be a problem. I suspect the
Windows stuff is too, though it comes with ActivePerl. There would also
be keeping up to date with the included modules. And I think CPAN tries
to keep up with this kind of thing, and plasters a big red &#34;Unofficial
release&#34; across anything it does not like.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 4&#41; If you want to take this even further, we could add t/darwin.t and 
&gt; guard it against running for other OSs. Issues here are:
</div>
This could certainly be done. Just skip all the tests if you&#39;re not on
the right operating system. Test::More makes this easy, though I&#39;m not
sure how their mechanism will play out with your Test::Clipboard. You
might have to drop the &#39;no_plan&#39; in Test::Clipboard and call plan&#40;&#41;
explicitly when you know whether you are going to run the tests.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; a&#41; I&#39;m not sure what will happen on the CPAN test servers. I know for 
&gt; Linux it can&#39;t run much because it doesn&#39;t have an X server. Maybe it 
&gt; should also have a guard for when there is no X server running? Without 
&gt; an OSX machine handy these little glitchy bits are hard to get figured 
&gt; out.
</div>
In a way, that&#39;s why there are CPAN testers. One of the things you can
do is put out a developer release &#40;with an underscore in the version,
say &#39;0.13_01&#39;, which will have to be quoted&#41;. This means that it&#39;s
available, but the CPAN and CPANPLUS clients won&#39;t &#40;by default&#41; try to
upgrade to it. But the CPAN testers run development releases, so you can
find out if anything is wrong before it goes out into the wide world.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; b&#41; I&#39;m not sure what all should be tested.
</div>
I&#39;m _never_ sure of this. A wise man once said that untested code was
buggy code. If it&#39;s a matter of code coverage, Devel::Cover will measure
this. Whenever I run this for the first time, I&#39;m always shocked at how
low the coverage is.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; c&#41; I want to guarantee that the tests won&#39;t nuke any user&#39;s clipboard 
&gt; data just for running the tests.
</div>
Ah. Cautious. Mac::Pasteboard allows you to create your own unique
pasteboard name, but it appears that the system-supplied pbcopy and
pbpaste utilities can&#39;t access an arbitrary pasteboard. I&#39;m afraid
Mac::Pasteboard just nukes the clipboard. It should probably say so,
though. Or maybe I can think of a way to put it back when I&#39;m done.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I went ahead and uploaded the new version, 0.13. I figured your patches 
&gt; are more likely to work than what was in 0.12, so it&#39;s better to put it 
&gt; out there and let you look at it from there.
</div>
Thanks. Version 0.13 not only passes the tests, it actually works.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Thank you for your time, expertise, and help. I feel all open-sourcey 
&gt; inside.
&gt; 
&gt; -rjk
</div>
You know what an expert is, right? An ex- is a has-been, and a spurt is
a big drip.

Tom
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;24&nbsp;10:47:44&nbsp;2020</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Marking as RESOLVED since patch was applied.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;24&nbsp;10:47:44&nbsp;2020</span>
    <span class="description">SHLOMIF [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
