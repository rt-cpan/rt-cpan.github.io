<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #40027 for Encode: decode of MIME-Header removes too much whitespace</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #40027 for Encode: decode of MIME-Header removes too much whitespace</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Encode/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Encode/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Encode/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Encode/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Encode">Encode CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">40027</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Encode/Active/">Encode</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
cpan [...] robm.fastmail.fm

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
JMEHNLE [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-12062-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.26    </td>
  </tr>
  <tr id="CF-12063-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




encode-error<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1549057/827110/encode-error">
Thu Oct 29 10:12:17 2015 (275b) by VKHERA [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;14&nbsp;02:36:21&nbsp;2008</span>
    <span class="description">cpan [...] robm.fastmail.fm -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> decode of MIME-Header removes too much whitespace</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">When doing:

decode&#40;&#39;MIME-Header&#39;, &#34;a: b\r\n c&#34;&#41;

The result is:

&#34;a: bc&#34;

The folding whitespace is lost which is incorrect. See
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.faqs.org/rfcs/rfc2822.html">http://www.faqs.org/rfcs/rfc2822.html</a></span> section 2.2.3 which says:

   Unfolding is accomplished by simply removing any CRLF
   that is immediately followed by WSP.  Each header field should be
   treated in its unfolded form for further syntactic and semantic
   evaluation.

The culprit is this line:

    # multi-line header to single line
    $str =~ s/&#40;:?\r|\n|\r\n&#41;[ \t]//gos;

I believe it should be:

    $str =~ s/&#40;:?\r|\n|\r\n&#41;&#40;?=[ \t]&#41;//gos;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;21&nbsp;17:39:57&nbsp;2009</span>
    <span class="description">DANKOGAI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Oct 14 02:36:21 2008, ROBM wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; When doing:
&gt; 
&gt; decode&#40;&#39;MIME-Header&#39;, &#34;a: b\r\n c&#34;&#41;
&gt; 
&gt; The result is:
&gt; 
&gt; &#34;a: bc&#34;
&gt; 
&gt; The folding whitespace is lost which is incorrect. See
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.faqs.org/rfcs/rfc2822.html">http://www.faqs.org/rfcs/rfc2822.html</a></span> section 2.2.3 which says:
&gt; 
&gt;    Unfolding is accomplished by simply removing any CRLF
&gt;    that is immediately followed by WSP.  Each header field should be
&gt;    treated in its unfolded form for further syntactic and semantic
&gt;    evaluation.
</div>
But the previous paragraph also states that:

  Note: Though structured field bodies are defined in such a way that
   folding can take place between many of the lexical tokens &#40;and even
   within some of the lexical tokens&#41;, folding SHOULD be limited to
   placing the CRLF at higher-level syntactic breaks.  For instance, if
   a field body is defined as comma-separated values, it is recommended
   that folding occur after the comma separating the structured items in
   preference to other places where the field could be folded, even if
   it is allowed elsewhere.

So the folding can occur anywhere and the following folded line must start with a whitespace.  
Meaning the current implementation is okay

% perl -MEncode -le &#39;print decode&#40;&#34;MIME-Header&#34;, &#34;a: b\r\n c&#34;&#41;&#39;
a: bc
% perl -MEncode -le &#39;print decode&#40;&#34;MIME-Header&#34;, &#34;a: b\r\n  c&#34;&#41;&#39;
a: b c

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; The culprit is this line:
&gt; 
&gt;     # multi-line header to single line
&gt;     $str =~ s/&#40;:?\r|\n|\r\n&#41;[ \t]//gos;
&gt; 
&gt; I believe it should be:
&gt; 
&gt;     $str =~ s/&#40;:?\r|\n|\r\n&#41;&#40;?=[ \t]&#41;//gos;
</div>
No.  The 1st whitespace must be removed because that is the only sign that the line was 
folded.

Dan the Encode Maintainer
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;21&nbsp;17:39:57&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;21&nbsp;17:39:58&nbsp;2009</span>
    <span class="description">DANKOGAI [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;21&nbsp;19:40:31&nbsp;2009</span>
    <span class="description">cpan [...] robm.fastmail.fm -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; The folding whitespace is lost which is incorrect. See
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.faqs.org/rfcs/rfc2822.html">http://www.faqs.org/rfcs/rfc2822.html</a></span> section 2.2.3 which says:
&gt; &gt;
&gt; &gt;    Unfolding is accomplished by simply removing any CRLF
&gt; &gt;    that is immediately followed by WSP.  Each header field should be
&gt; &gt;    treated in its unfolded form for further syntactic and semantic
&gt; &gt;    evaluation.
</div>&gt; 
&gt; But the previous paragraph also states that:
&gt; ...
&gt; So the folding can occur anywhere and the following folded line must
&gt; start with a whitespace.
&gt; Meaning the current implementation is okay
</div>
No it isn&#39;t. I don&#39;t see what&#39;s ambiguous about this statement:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &gt;    Unfolding is accomplished by simply removing any CRLF
&gt; &gt;    that is immediately followed by WSP.
</div>
It says nothing about removing *any* other whitespace. It says to ONLY
remove the CRLF.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &gt;     # multi-line header to single line
&gt; &gt;     $str =~ s/&#40;:?\r|\n|\r\n&#41;[ \t]//gos;
</div>
This removes the CRLF + the space or tab after it. That is clearly WRONG.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &gt;     $str =~ s/&#40;:?\r|\n|\r\n&#41;&#40;?=[ \t]&#41;//gos;
</div>
That does exactly what the RFC says. Remove the CRLF when it&#39;s
immediately followed by whitespace.

Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;21&nbsp;19:40:32&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;12&nbsp;21:32:41&nbsp;2009</span>
    <span class="description">DANKOGAI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jan 21 19:40:31 2009, ROBM wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; The folding whitespace is lost which is incorrect. See
&gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.faqs.org/rfcs/rfc2822.html">http://www.faqs.org/rfcs/rfc2822.html</a></span> section 2.2.3 which says:
&gt; &gt; &gt;
&gt; &gt; &gt;    Unfolding is accomplished by simply removing any CRLF
&gt; &gt; &gt;    that is immediately followed by WSP.  Each header field should be
&gt; &gt; &gt;    treated in its unfolded form for further syntactic and semantic
&gt; &gt; &gt;    evaluation.
</div>&gt; &gt; 
&gt; &gt; But the previous paragraph also states that:
&gt; &gt; ...
&gt; &gt; So the folding can occur anywhere and the following folded line must
&gt; &gt; start with a whitespace.
&gt; &gt; Meaning the current implementation is okay
</div>&gt; 
&gt; No it isn&#39;t. I don&#39;t see what&#39;s ambiguous about this statement:
&gt; 
<div class="message-stanza open">&gt; &gt; &gt;    Unfolding is accomplished by simply removing any CRLF
&gt; &gt; &gt;    that is immediately followed by WSP.
</div>&gt; 
&gt; It says nothing about removing *any* other whitespace. It says to ONLY
&gt; remove the CRLF.
&gt; 
<div class="message-stanza open">&gt; &gt; &gt;     # multi-line header to single line
&gt; &gt; &gt;     $str =~ s/&#40;:?\r|\n|\r\n&#41;[ \t]//gos;
</div>&gt; 
&gt; This removes the CRLF + the space or tab after it. That is clearly WRONG.
&gt; 
<div class="message-stanza open">&gt; &gt; &gt;     $str =~ s/&#40;:?\r|\n|\r\n&#41;&#40;?=[ \t]&#41;//gos;
</div>&gt; 
&gt; That does exactly what the RFC says. Remove the CRLF when it&#39;s
&gt; immediately followed by whitespace.
&gt; 
&gt; Rob
</div>
Neither of us were right.  The correct syntax is:
--- lib/Encode/MIME/Header.pm   2009/03/25 07:55:57     2.10
+++ lib/Encode/MIME/Header.pm   2009/07/13 01:22:57
@@ -44,7 +44,7 @@
     $str =~ s/\?=\s+=\?/\?==\?/gos;
 
     # multi-line header to single line
-    $str =~ s/&#40;?:\r\n|[\r\n]&#41;[ \t]+//gos;
+    $str =~ s/&#40;?:\r\n|[\r\n]&#41;[ \t]//gos;
 
     1 while &#40; $str =~
         s/&#40;=\?[-0-9A-Za-z_]+\?[Qq]\?&#41;&#40;.*?&#41;\?=\1&#40;.*?\?=&#41;/$1$2$3/ &#41;

You still have to remove the first white space which is mandated to be inserted.  Otherwise 
t/mime-header.t fails.

The patch will appear in Encode 2.35.

Dan the Encode Maintainer.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;12&nbsp;21:32:42&nbsp;2009</span>
    <span class="description">DANKOGAI [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;13&nbsp;03:08:22&nbsp;2009</span>
    <span class="description">cpan [...] robm.fastmail.fm -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You still have to remove the first white space which is mandated to be
&gt; inserted.
</div>
This is still *WRONG*. READ THE RFC!

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.faqs.org/rfcs/rfc2822.html">http://www.faqs.org/rfcs/rfc2822.html</a></span> 

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Unfolding is accomplished by simply removing any CRLF
&gt; that is immediately followed by WSP
</div>
The bug here is that you&#39;re folding lines incorrectly, because you
should only be folding at FWS. Again, READ THE RFC!

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.faqs.org/rfcs/rfc2822.html">http://www.faqs.org/rfcs/rfc2822.html</a></span>

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The general rule is
&gt; that wherever this standard allows for folding white space &#40;not
&gt; simply WSP characters&#41;, a CRLF may be inserted before any WSP.
</div>
You said:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Otherwise t/mime-header.t fails.
</div>
This is because your folding encoding + folding routines are wrong. 

perl -e &#39;use Encode; print encode&#40;&#34;MIME-Q&#34;, &#34;Subject: \x{f3}&#34;&#41;;&#39;

Outputs:

Subject:=?UTF-8?Q?=20=C3=B3?=

You&#39;re encoding the space character into the encoded value, you should
be doing:

Subject: =?UTF-8?Q?=C3=B3?=

So that for a long line, you can fold that into:

Subject:
 =?UTF-8?Q?=C3=B3?=

And have it unfold correctly.

So the real problem is that the encoding is swallowing the FWS into the
encoded-words, which then means you folding can&#39;t fold properly because
there is no FWS left to fold on.

Ick, just checking the code, it&#39;s inserting arbitrary &#34;\n &#34; lines
itself, rather than actually folding at FWS points. That&#39;s just
completely bogus.

Basically it seems to me that the encode&#40;&#41; function is broken, for two
reasons:

1. It&#39;s absorbing all whitespace into the encoded-word, thus leaving no
points for FWS to fold on
2. It&#39;s arbitrarily folding at any point and inserting &#34;\n &#34; at the fold
point, rather than trying to find FWS and folding there.

Referring back to RFC2822 again.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The general rule is
&gt; that wherever this standard allows for folding white space &#40;not
&gt; simply WSP characters&#41;, a CRLF may be inserted before any WSP.
</div>
So you can&#39;t just aribitrarily inserts a &#34;\n &#34; in your text, you have to
insert a &#34;\n&#34; only before a FWS point so the unfolding works correctly.

Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;13&nbsp;03:08:22&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;28&nbsp;18:22:43&nbsp;2009</span>
    <span class="description">DANKOGAI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jul 13 03:08:22 2009, ROBM wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
<div class="message-stanza open">&gt; &gt; You still have to remove the first white space which is mandated to be
&gt; &gt; inserted.
</div>&gt; 
&gt; This is still *WRONG*. READ THE RFC!
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.faqs.org/rfcs/rfc2822.html">http://www.faqs.org/rfcs/rfc2822.html</a></span> 
</div>
I did. AND RFC2027

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.ietf.org/rfc/rfc2047.txt">http://www.ietf.org/rfc/rfc2047.txt</a></span>

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Unfolding is accomplished by simply removing any CRLF
&gt; &gt; that is immediately followed by WSP
</div>&gt; 
&gt; The bug here is that you&#39;re folding lines incorrectly, because you
&gt; should only be folding at FWS. Again, READ THE RFC!
</div>
THAT IS NOT THE ONLY CASE WHEN MIME ENCODING IS CONCERNED.

RFC2047
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 8. Examples
&gt; 
&gt;    The following are examples of message headers containing &#39;encoded-
&gt;    word&#39;s:
&gt; 
&gt;    From: =?US-ASCII?Q?Keith_Moore?= &lt;moore@cs.utk.edu&gt;
&gt;    To: =?ISO-8859-1?Q?Keld_J=F8rn_Simonsen?= &lt;keld@dkuug.dk&gt;
&gt;    CC: =?ISO-8859-1?Q?Andr=E9?= Pirard &lt;PIRARD@vm1.ulg.ac.be&gt;
&gt;    Subject: =?ISO-8859-1?B?SWYgeW91IGNhbiByZWFkIHRoaXMgeW8=?=
&gt;     =?ISO-8859-2?B?dSB1bmRlcnN0YW5kIHRoZSBleGFtcGxlLg==?=
</div>
See The last line? It doedes to:

  Subject: If you can read this you understand the example.

And

  =?ISO-8859-1?B?SWYgeW91IGNhbiByZWFkIHRoaXMgeW8=?=

Decodes to 

  &#39;If you can read this yo&#39;

And

  =?ISO-8859-2?B?dSB1bmRlcnN0YW5kIHRoZSBleGFtcGxlLg==?=

Decodes to

  &#39;u understand the example.&#39;

As you see FWS is STRIPPED.

Remember.  MIME-&#40;B/Q&#41; Encoding is primarily for non-ascii characters and you cannot take 
whitespaces for granted as word delimiters.

Read the RFC? Read the RFCs!

Dan the Encode Maintainer.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;28&nbsp;18:22:44&nbsp;2009</span>
    <span class="description">DANKOGAI [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;28&nbsp;21:15:09&nbsp;2009</span>
    <span class="description">cpan [...] robm.fastmail.fm -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; See The last line? It doedes to:
&gt; 
&gt;   Subject: If you can read this you understand the example.
&gt; 
&gt; And
&gt; 
&gt;   =?ISO-8859-1?B?SWYgeW91IGNhbiByZWFkIHRoaXMgeW8=?=
&gt; 
&gt; Decodes to
&gt; 
&gt;   &#39;If you can read this yo&#39;
&gt; 
&gt; And
&gt; 
&gt;   =?ISO-8859-2?B?dSB1bmRlcnN0YW5kIHRoZSBleGFtcGxlLg==?=
&gt; 
&gt; Decodes to
&gt; 
&gt;   &#39;u understand the example.&#39;
&gt; 
&gt; As you see FWS is STRIPPED.
</div>
This has *nothing* to do with the folding. This has to do with a special
case as documented in RFC2047.

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.ietf.org/rfc/rfc2047.txt">http://www.ietf.org/rfc/rfc2047.txt</a></span>

6.2. Display of &#39;encoded-word&#39;s
...
   When displaying a particular header field that contains multiple
   &#39;encoded-word&#39;s, any &#39;linear-white-space&#39; that separates a pair of
   adjacent &#39;encoded-word&#39;s is ignored.  &#40;This is to allow the use of
   multiple &#39;encoded-word&#39;s to represent long strings of unencoded text,
   without having to separate &#39;encoded-word&#39;s where spaces occur in the
   unencoded text.&#41;
...

Again, unfolding of headers is just done by:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Unfolding is accomplished by simply removing any CRLF
&gt; that is immediately followed by WSP
</div>
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;28&nbsp;21:15:10&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;14&nbsp;21:22:08&nbsp;2010</span>
    <span class="description">JMEHNLE [...] cpan.org -  Cc JMEHNLE added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;21&nbsp;17:35:35&nbsp;2010</span>
    <span class="description">JMEHNLE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Rob is correct.  The RFC says only to remove the CRLF, *not* the WSP
that is required to follow.  Removal of white-space is performed only
when joining to adjacent MIME-encoded words after decoding them.

I.e.,

foo
 bar

unfolds to ¬´foo bar¬ª, whereas

=?US-ASCII?Q?foo?=
 =?US-ASCII?Q?bar?=

unfolds to ¬´=?US-ASCII?Q?foo?= =?US-ASCII?Q?bar?=¬ª, which then decodes
to ¬´foobar¬ª per RFC 2047, section 6.2 &#40;start of page 10&#41;:

<span class="clickylink"><a target="new" rel="nofollow" href="http://tools.ietf.org/html/rfc2047#section-6.2">http://tools.ietf.org/html/rfc2047#section-6.2</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://tools.ietf.org/html/rfc2047#page-10">http://tools.ietf.org/html/rfc2047#page-10</a></span>

Again, the white-space removal at work here is entirely due to RFC 2047,
section 6.2, 3rd paragraph, and NOT due to RFC 2822.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;21&nbsp;17:43:02&nbsp;2010</span>
    <span class="description">JMEHNLE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Stupid RT ate my spaces.  I meant to say &#40;using | as indentation markers&#41;:

| foo
|  bar

unfolds to ¬´foo bar¬ª, whereas

| =?US-ASCII?Q?foo?=
|  =?US-ASCII?Q?bar?=

unfolds to ¬´=?US-ASCII?Q?foo?= =?US-ASCII?Q?bar?=¬ª, which then decodes
to ¬´foobar¬ª [...]
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;21&nbsp;17:43:58&nbsp;2010</span>
    <span class="description">JMEHNLE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">RT still eating my spaces.  F* you, RT.  Anyway, you know what I meant.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;28&nbsp;11:46:52&nbsp;2011</span>
    <span class="description">cpan [...] jibsheet.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Apr 21 17:43:58 2010, JMEHNLE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; RT still eating my spaces.  F* you, RT.  Anyway, you know what I meant.
</div>
I suspect you want to toggle one of the display preferences on
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Prefs/Other.html">https://rt.cpan.org/Prefs/Other.html</a></span>
since I see correct spacing in the email generated by RT and in the web UI

If you believe that there is a bug in rt.cpan.org, the correct place to report issues is the rt-cpan-
admin address linked above.

Thanks

-kevin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;21&nbsp;22:31:19&nbsp;2011</span>
    <span class="description">rjbs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">To the best of my knowledge, Rob is correct on all counts.

decode&#40;&#39;MIME-Header&#39;, &#34;a: b\r\n c&#34;&#41; should be &#34;a: b c&#34;

The example you &#40;Dan&#41; provided with regard to =?...?= strings was not on
point, for the reasons Rob gave: its behavior was not because the
whitespace should be entirely stripped, but because whitespace between
encoded-words tokens is ignored.

-- 
rjbs
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;21&nbsp;22:51:11&nbsp;2011</span>
    <span class="description">DROLSKY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Why is Encode dealing with folding at all? Folding is a separate
operation from encoding. Encode should not do folding or unfolding. It
should simply encode and decode.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;01&nbsp;15:46:55&nbsp;2014</span>
    <span class="description">NIKOLAS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">For not encoded headers:
The general rule is that wherever this standard allows for folding white space &#40;not
   simply WSP characters&#41;, a CRLF may be inserted before any WSP.
For encoded header:
An &#39;encoded-word&#39; may not be more than 75 characters long, including
   &#39;charset&#39;, &#39;encoding&#39;, &#39;encoded-text&#39;, and delimiters.  If it is
   desirable to encode more text than will fit in an &#39;encoded-word&#39; of
   75 characters, multiple &#39;encoded-word&#39;s &#40;separated by CRLF SPACE&#41; may
   be used.

So, SPACE to be deleted only in encoded-words
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;06&nbsp;10:32:10&nbsp;2015</span>
    <span class="description">Mark.Martinec [...] ijs.si -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark.Martinec [...] ijs.si</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Any chance of getting this fixed? Unfolding is still broken as of
version 2.72 - for reasons clearly pointed out in the discussion above. When decoding, the proper RFC 5322 unfolding must be done
first &#40;without losing space or tab&#41;, and only then the whitespace
between encoded words can be removed. Other whitespace must not be
lost, even at folding points.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;29&nbsp;10:12:16&nbsp;2015</span>
    <span class="description">VKHERA [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Still busted as of 2.78. Specifically this From header properly preserves the space between the word &#34;dog&#34; and the emoji character following it when decoded by GMail web interface and Mail.app on Mac OS 10.11.1.

From: &#34;The quick brown fox runs over the lazy dog
 =?UTF-8?Q?=F0=9F=90=BA?=&#34; &lt;wolfy@example.com&gt;

When decoded using Encode::MIME::Header, it eats that space incorrectly. Sample program attached that produces this output:

Encode version: 2.78
From: &#34;The quick brown fox runs over the lazy dogüê∫&#34; &lt;wolfy@example.com&gt;
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> encode-error</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1549057/827110/encode-error">Download encode-error</a><br />
<span class="downloadcontenttype">application/octet-stream 275b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;30&nbsp;08:33:07&nbsp;2015</span>
    <span class="description">rjbs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dan:

Could we please see a fix for this in the next Encode?  Right now, I have workarounds in a number of places both at work and in CPAN, and it would be nice to be able to tell people &#34;just use Encode.&#34;  Right now, I can&#39;t.

If all that&#39;s needed at this point is a patch, I&#39;m sure I could get you one.  I&#39;m not sure, though, that you agree that the current MIME-Header behavior is wrong.

-- 
rjbs
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;02&nbsp;00:42:14&nbsp;2015</span>
    <span class="description">DANKOGAI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Please send me a patch, preferably with a test.

Dan the Maintainer Thereof

On Fri Oct 30 08:33:07 2015, RJBS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Dan:
&gt; 
&gt; Could we please see a fix for this in the next Encode?  Right now, I
&gt; have workarounds in a number of places both at work and in CPAN, and
&gt; it would be nice to be able to tell people &#34;just use Encode.&#34;  Right
&gt; now, I can&#39;t.
&gt; 
&gt; If all that&#39;s needed at this point is a patch, I&#39;m sure I could get
&gt; you one.  I&#39;m not sure, though, that you agree that the current MIME-
&gt; Header behavior is wrong.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;22&nbsp;01:27:25&nbsp;2016</span>
    <span class="description">DANKOGAI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">cf. <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=88717">https://rt.cpan.org/Ticket/Display.html?id=88717</a></span>

Dan the Maintainer Thereof

On Mon Nov 02 00:42:14 2015, DANKOGAI wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Please send me a patch, preferably with a test.
&gt; 
&gt; Dan the Maintainer Thereof
&gt; 
&gt; On Fri Oct 30 08:33:07 2015, RJBS wrote:
<div class="message-stanza open">&gt; &gt; Dan:
&gt; &gt; 
&gt; &gt; Could we please see a fix for this in the next Encode?  Right now, I
&gt; &gt; have workarounds in a number of places both at work and in CPAN, and
&gt; &gt; it would be nice to be able to tell people &#34;just use Encode.&#34;  Right
&gt; &gt; now, I can&#39;t.
&gt; &gt; 
&gt; &gt; If all that&#39;s needed at this point is a patch, I&#39;m sure I could get
&gt; &gt; you one.  I&#39;m not sure, though, that you agree that the current MIME-
&gt; &gt; Header behavior is wrong.
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;22&nbsp;01:27:27&nbsp;2016</span>
    <span class="description">DANKOGAI [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;22&nbsp;10:36:18&nbsp;2016</span>
    <span class="description">JMEHNLE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sweet, thanks for fixing this, Dan!

What version will this fix first be released with? I have some dependencies to update.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;22&nbsp;11:17:49&nbsp;2016</span>
    <span class="description">DANKOGAI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Already released as 2.79.

<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/release/Encode">https://metacpan.org/release/Encode</a></span>

Dan the Maintainer Thereof

On Fri Jan 22 10:36:18 2016, JMEHNLE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sweet, thanks for fixing this, Dan!
&gt; 
&gt; What version will this fix first be released with? I have some
&gt; dependencies to update.
</div></div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
