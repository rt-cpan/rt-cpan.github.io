<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #41166 for Module-Build: install_sets modification not preserved on resume</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #41166 for Module-Build: install_sets modification not preserved on resume</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Module-Build">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Module-Build">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Module-Build">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Module-Build">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Module-Build">Module-Build CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">41166</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Module-Build">Module-Build</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
blazej_cegielka [...] o2.pl

<br />
jleader [...] alumni.caltech.edu

<br />
ntyni [...] iki.fi

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
TREVELYAN [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-21558-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.30    </td>
  </tr>
  <tr id="CF-21559-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.34_06    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




install_extra_target.t<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/637145/324893/install_extra_target.t">
Thu Jul 23 12:16:36 2009 (2.8k) by TREVELYAN [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=41166">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-536536" href="/Public/Bug/Display.html?id=41166#txn-536536">#</a>      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;23&nbsp;16:18:50&nbsp;2008</span>
    <span class="description">ntyni [...] iki.fi -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> svn.perl.org r11816 broke zim: install_sets modification not
 preserved anymore</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/536536/269259/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/269259">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1009b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

as seen in <span class="clickylink"><a target="new" rel="nofollow" href="http://bugs.debian.org/506696">http://bugs.debian.org/506696</a></span> Module::Build 0.30 breaks the
zim &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://zim-wiki.org/&#41;">http://zim-wiki.org/&#41;</a></span> build system.

Specifically, zim&#39;s Build.PL, as seen at 

 <span class="clickylink"><a target="new" rel="nofollow" href="http://bazaar.launchpad.net/~pardus-cpan/zim/trunk/files">http://bazaar.launchpad.net/~pardus-cpan/zim/trunk/files</a></span>

has this:

# Figure out where to install the share directory and put it in each
# install set. Just setting &#39;install_path&#39; breaks --install_base.
my $sets = $$build{properties}{install_sets};
for my $dirs &#40;values %$sets&#41; {
        my @dirs = File::Spec-&gt;splitdir&#40;$$dirs{bin}&#41;;
        pop @dirs; # loose &#39;bin&#39;
        $$dirs{share} = File::Spec-&gt;catdir&#40;@dirs, &#39;share&#39;&#41;;
}

This breaks with Module::Build 0.30, because modifying the install_sets
property isn&#39;t preserved anymore to the Build phase.
Module::Build::Base::resume&#40;&#41; now explicitly resets install_sets by
calling the _set_install_paths&#40;&#41; method.

Please let us know if this should be considered a bug in Module::Build
0.30 or Zim itself.

Thanks for your work on Module::Build,
-- 
Niko Tyni &#40;Debian Perl Group&#41;
ntyni@debian.org
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-553121" href="/Public/Bug/Display.html?id=41166#txn-553121">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;13&nbsp;00:35:49&nbsp;2009</span>
    <span class="description">EWILHELM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> mschwern [...] cpan.org, module-build [...] perl.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/553121/278743/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/278743">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Nov 23 16:18:50 2008, ntyni@iki.fi wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  <span class="clickylink"><a target="new" rel="nofollow" href="http://bazaar.launchpad.net/~pardus-cpan/zim/trunk/files">http://bazaar.launchpad.net/~pardus-cpan/zim/trunk/files</a></span>
&gt; 
&gt; has this:
&gt; 
&gt; my $sets = $$build{properties}{install_sets};
&gt; for my $dirs &#40;values %$sets&#41; {
&gt;         my @dirs = File::Spec-&gt;splitdir&#40;$$dirs{bin}&#41;;
&gt;         pop @dirs; # loose &#39;bin&#39;
&gt;         $$dirs{share} = File::Spec-&gt;catdir&#40;@dirs, &#39;share&#39;&#41;;
&gt; }
&gt; 
&gt; This breaks with Module::Build 0.30, because modifying the
&gt; install_sets property isn&#39;t preserved anymore to the Build phase.
&gt; Module::Build::Base::resume&#40;&#41; now explicitly resets install_sets by
&gt; calling the _set_install_paths&#40;&#41; method.
&gt; 
&gt; Please let us know if this should be considered a bug in 
</div>Module::Build
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 0.30 or Zim itself.
</div>
Hi Niko,

I think that code is out-of-bounds by modifying the install_sets 
element directly.  It would possibly be less breakable if it were done 
local&#40;&#41; in one of the overridden methods, but probably Module::Build 
should offer some &#34;official&#34; &#39;share&#39; directory as part of the API.  
That does, however, raise the issue of whether it behaves ala 
File::ShareDir or not.

Schwern: does this call to $self-&gt;_set_install_paths in resume&#40;&#41; have 
to happen only because it has not yet been set via some other entry 
point?  If so, we could probably find somewhere else from which to call 
it or simply let it return if the key is already set.

Thanks,
Eric
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-553122" href="/Public/Bug/Display.html?id=41166#txn-553122">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;13&nbsp;00:35:51&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-555260" href="/Public/Bug/Display.html?id=41166#txn-555260">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;17&nbsp;08:55:59&nbsp;2009</span>
    <span class="description">pardus [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/555260/280008/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/280008">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 874b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jan 13 00:35:49 2009, EWILHELM wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I think that code is out-of-bounds by modifying the install_sets 
&gt; element directly.  It would possibly be less breakable if it were done 
&gt; local&#40;&#41; in one of the overridden methods, but probably Module::Build 
&gt; should offer some &#34;official&#34; &#39;share&#39; directory as part of the API.  
&gt; That does, however, raise the issue of whether it behaves ala 
&gt; File::ShareDir or not.
</div>
Hi Eric,

I see the debian maintainers filed a bug based on my hacks to get
Module::Build do what I want.

As far as I am aware there is no standard way to add directory types to
the install structure - is that correct ? Do you happen to know of other
projects dealing with this particular of installing a full application
instead of just a module ? 

Any hints are appreciated, will need to find a new hack to hook into
Module::Build ...

Cheers!

Jaap
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-562507" href="/Public/Bug/Display.html?id=41166#txn-562507">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;02&nbsp;16:42:53&nbsp;2009</span>
    <span class="description">pardus [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/562507/284050/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/284050">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Implemented a temporary fix in M:B subclass for my package. Could be
used as the base for a new interface for adding new data types.


=============================

__PACKAGE__-&gt;add_property&#40;data_files =&gt; {}&#41;;

sub install_types {
   my $self = shift;
   my @types = $self-&gt;SUPER::install_types;
   push @types, keys %{$$self{properties}{data_files}};
   return sort @types;
}

sub install_destination {
   my &#40;$self, $type&#41; = @_;
   return $self-&gt;SUPER::install_destination&#40;$type&#41;
       unless exists $$self{properties}{data_files}{$type};

   return $self-&gt;install_path&#40;$type&#41; if $self-&gt;install_path&#40;$type&#41;;

   my $relpath = $$self{properties}{data_files}{$type};

   return File::Spec-&gt;catdir&#40;$self-&gt;install_base, $relpath&#41;
       if $self-&gt;install_base;

   return File::Spec-&gt;catdir&#40;$self-&gt;prefix, $relpath&#41;
       if $self-&gt;prefix;

   # Fall back to heuristic determination of prefix based on
   # the &#39;bin&#39; directory.
   my $bindir = $self-&gt;install_sets&#40;$self-&gt;installdirs&#41;-&gt;{&#39;bin&#39;};
   my @prefix = File::Spec-&gt;splitdir&#40;$bindir&#41;;
   pop @prefix; # loose &#39;bin&#39;
   return File::Spec-&gt;catdir&#40;@prefix, $relpath&#41;; }
======================================


What remains is to decide how blib/share is build. In my case I already
had a method &#34;process_share_files&#34; that does this and I call
&#34;$build-&gt;add_build_element&#40;&#39;share&#39;&#41;&#34; to set it up. Probably there should
be a default for data_files which just copies a directory tree from the
source one to one to blib.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Create even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-568792" href="/Public/Bug/Display.html?id=41166#txn-568792">#</a>      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;22&nbsp;16:59:48&nbsp;2009</span>
    <span class="description">blazej_cegielka [...] o2.pl - Ticket #43515:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> _set_install_paths on resumed builder</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 22 Feb 2009 22:59:32 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-Build [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> BÅ‚aÅ¼ej CegieÅ‚ka &lt;blazej_cegielka [...] o2.pl&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/568792/286901/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/286901">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">let me describe smth if i understand right some ideas of Module::Build.
if i want to add some config files to my app i create builder using 
kwarg conf_files =&gt; {&#39;conf/config.ini&#39; =&gt; &#39;conf/config.ini&#39;}, and then 
call $build-&gt;add_build_element&#40;&#39;conf&#39;&#41;. build process works.
next i want to say where my conf files should be installed.
i can use install_path =&gt; {&#39;conf&#39; =&gt; &#39;/etc/myapp&#39;} but this need to be 
an absolute path. so it will not work if i wanted install myapp in my 
/home/mydir.
not exactly. it work, but not as i expected. if i call
&lt;code&gt;
./Build install --install_base /home/mydir
&lt;/code&gt;
i expect that my config.ini will be installed in 
/home/mydir/etc/myapp/config.ini. it didn&#39;t.
i need to use:
&lt;code&gt;
./Buld install --install_base /home/mydir --install_path 
conf=/home/mydir/etc/myapp
&lt;/code&gt;
this can stay if i want to install my app by hand. but what if i want to 
distribute myapp by CPAN? how CPAN will know that myapp need to have set 
--install_path conf?

this is why install_base_relpaths&#40;&#41; exists?
if i use it, $builder-&gt;{&#39;properties&#39;}{&#39;install_base_relpaths&#39;} contains:
&#39;conf&#39; =&gt; [
    &#39;etc&#39;,
    &#39;mypkg&#39;
],
sounds good. but when i create Build script from Build.PL and after 
Module::Build-&gt;resume&#40;&#41; call $build-&gt;install_base_relpaths&#40;&#41; i will not 
see my &#39;conf&#39; anymore. so the state of $builder created in Build.PL is 
not eq with $builder resumed in Build.
i checked resume&#40;&#41; func in Module::Build::Base and i saw that before 
return you call $self-&gt;_set_install_paths&#40;&#41;. in _set_install_paths&#40;&#41; 
line 265 you overwrite old $builder-&gt;{properties}{install_base_relpaths} 
with hardcoded values and this is why my &#39;conf&#39; type 
install_base_relpath disappear.
the question is why you call _set_install_paths&#40;&#41; on resumed $builder 
which allready have this set? in my opinion besides it is unnecessary, 
it create a bug extra.

am i right?

burb
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-621535" href="/Public/Bug/Display.html?id=41166#txn-621535">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;19&nbsp;12:23:14&nbsp;2009</span>
    <span class="description">dagolden [...] cpan.org - Ticket #43515:  Severity Normal added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-622715" href="/Public/Bug/Display.html?id=41166#txn-622715">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;22&nbsp;00:49:01&nbsp;2009</span>
    <span class="description">dagolden [...] cpan.org - Ticket #43515:  Merged into ticket #41166</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-622716" href="/Public/Bug/Display.html?id=41166#txn-622716">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;22&nbsp;00:49:01&nbsp;2009</span>
    <span class="description">dagolden [...] cpan.org -  Merged into ticket #41166</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-634390" href="/Public/Bug/Display.html?id=41166#txn-634390">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;17&nbsp;14:07:31&nbsp;2009</span>
    <span class="description">dagolden [...] cpan.org -  Subject changed from &#39;svn.perl.org r11816 broke zim: install_sets modification not preserved anymore&#39; to &#39;install_sets modification not preserved on resume&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-635902" href="/Public/Bug/Display.html?id=41166#txn-635902">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;12:07:07&nbsp;2009</span>
    <span class="description">TREVELYAN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> install_sets modification not preserved on resume &#40;solution&#41;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/635902/324143/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/324143">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I can confirm this bug. It use to be possible to add install targets,
this then got broken, but works again with the following fix:

in Module/Build/Base.pm &#40;v 0.34&#41;:
delete line  89: $self-&gt;_set_install_paths;

this is safe since new&#40;&#41; called it already, before user the user made
config changes!

or move it before line 54: $self-&gt;read_config
so that it does not overwrite the restored config. &#40;ie $self-&gt;{properties}&#41;

How is this bug seen? In both the submitters and my case its because we
have added new build and install targets with code like:

&#34;

#New build types
$build-&gt;add_build_element&#40;&#39;etc&#39;&#41;;
$build-&gt;add_build_element&#40;&#39;share&#39;&#41;;

my $distdir = lc $build-&gt;dist_name&#40;&#41;;

foreach my $id &#40;&#39;core&#39;, &#39;site&#39;, &#39;vendor&#39;&#41; {
        #Where to install these build types when using prefix symantics
        $build-&gt;prefix_relpaths&#40;$id, &#39;share&#39; =&gt; &#34;share/$distdir&#34;&#41;;
        $build-&gt;prefix_relpaths&#40;$id, &#39;etc&#39; =&gt; &#34;etc/$distdir&#34;&#41;;

        #Where to install these build types when using default symantics
        my $set = $build-&gt;install_sets&#40;$id&#41;;

        $set-&gt;{&#39;share&#39;} = &#39;/usr/&#39;.&#40;$id eq &#39;site&#39; ? &#39;local/&#39;:&#39;&#39;&#41;.&#34;share/$distdir&#34;;
        $set-&gt;{&#39;etc&#39;} = &#40;$id eq &#39;site&#39; ? &#39;/usr/local/etc/&#39;:&#39;/etc/&#39;&#41;.$distdir;
}


#Where to install these types when using install_base symantics
$build-&gt;install_base_relpaths&#40;&#39;share&#39; =&gt; &#34;share/$distdir&#34;&#41;;
$build-&gt;install_base_relpaths&#40;&#39;etc&#39; =&gt; &#34;etc/$distdir&#34;&#41;;

&#34;

A Module::Build subclass might have something like this:

sub copy_files
{
        my $self = shift;
        my $dir = shift;

        my $files = $self-&gt;rscan_dir&#40;$dir, sub {-f $_ and not m!/\.|[#~]$!}&#41;;

        foreach my $file &#40;@$files&#41; {
                $self-&gt;copy_if_modified&#40;from =&gt; $file, to_dir =&gt; &#34;blib&#34;&#41;;
        }
}

#Copy etc files to blib
sub process_etc_files
{
        my $self = shift;

        copy_files&#40;$self, &#34;etc&#34;&#41;;
}

#Copy share files to blib
sub process_share_files
{
        my $self = shift;

        copy_files&#40;$self, &#34;share&#34;&#41;;
}


Before the bug was introduced this all worked. Once said line it deleted
it works again. Symptom of the bug is that the build works and
dirs/files are created in blib/, but the install then ignore them and
does not copy them to their final destination.

I hope this helps.

Thorben
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-636300" href="/Public/Bug/Display.html?id=41166#txn-636300">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;23:11:22&nbsp;2009</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/636300/324354/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/324354">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 672b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Looking at this quickly, I don&#39;t think it&#39;s quite so simple. 
_set_install_paths&#40;&#41; depends on values in $self-&gt;{config} and sets
values in $self-&gt;{properties}.  So it needs to run after config is ready
&#40;in case any Config.pm value are overridden&#41; but before any further
customization of properties.

I suspect the right place is probably in _construct, but I&#39;ll want to
look more closely and trace out the code.  The monolithic &#34;bless&#34; call
in _construct probably needs to be broken up so that &#34;defaults&#34; are set
before user inputs are applied.

If someone could provide a test file that demonstrates the expected
behavior, that would be a big help to getting this fixed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-637145" href="/Public/Bug/Display.html?id=41166#txn-637145">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;23&nbsp;12:16:36&nbsp;2009</span>
    <span class="description">TREVELYAN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/637145/324890/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/324890">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 5.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Here a somewhat ugly/quickly written, but effective test.


Without line 89 of Base.pm commented it fails as follows:

&#34;
ok 1 - use Module::Build;            
ok 2 - Make sure Module::Build was loaded from blib/
# Dist is in /var/folders/qH/qHUigC3eGoGgT7PM4aqJfU+++yQ/-Tmp-/MB-zbbX6obH
# Creating custom builder _build/lib/MyModuleBuilder.pm in _build/lib     
# Checking whether your kit is complete...                                
# Looks good                                                              
#                                                                         
# Checking prerequisites...                                               
# Looks good                                                              
#                                                                         
# Creating new &#39;Build&#39; script for &#39;Simple&#39; version &#39;0.01&#39;                 
Warning: Build.PL has been altered.  You may need to run &#39;perl Build.PL&#39;
again.
# Copying lib/Simple.pm -&gt; blib/lib/Simple.pm                          
       
# Copying etc/config -&gt; blib/etc/config                                
       
# Copying share/data -&gt; blib/share/data                                
       
# Copying share/html/index.html -&gt; blib/share/html/index.html          
       
# Manifying blib/lib/Simple.pm -&gt; blib/libdoc/Simple.3pm               
       
ok 3 - Built etc/config                                                
       
ok 4 - Built share/data                                                
       
ok 5 - Built share/html                                                
       
Subroutine magic_number_matches redefined at Build line 8.             
       
Warning: Build.PL has been altered.  You may need to run &#39;perl Build.PL&#39;
again.
# Installing
/var/folders/qH/qHUigC3eGoGgT7PM4aqJfU+++yQ/-Tmp-/MB-zbbX6obH/t/install_extra_targets-45366/lib/perl5/Simple.pm
# Installing
/var/folders/qH/qHUigC3eGoGgT7PM4aqJfU+++yQ/-Tmp-/MB-zbbX6obH/t/install_extra_targets-45366/man/man3/Simple.3pm
# Writing
/var/folders/qH/qHUigC3eGoGgT7PM4aqJfU+++yQ/-Tmp-/MB-zbbX6obH/t/install_extra_targets-45366/lib/perl5/darwin-thread-multi-2level/auto/Simple/.packlist
not ok 6 - installed etc/config
#   Failed test &#39;installed etc/config&#39;
#   at t/install_extra_target.t line 131.
not ok 7 - installed share/data
#   Failed test &#39;installed share/data&#39;
#   at t/install_extra_target.t line 132.
not ok 8 - installed share/html
#   Failed test &#39;installed share/html&#39;
#   at t/install_extra_target.t line 133.

1..8
# Looks like you failed 3 tests of 8.
&#34;



With line 89 of Base.pm commented out it succeeds as follows:

&#34;
ok 1 - use Module::Build;            
ok 2 - Make sure Module::Build was loaded from blib/
# Dist is in /var/folders/qH/qHUigC3eGoGgT7PM4aqJfU+++yQ/-Tmp-/MB-MLjQO9PJ
# Creating custom builder _build/lib/MyModuleBuilder.pm in _build/lib     
# Checking whether your kit is complete...                                
# Looks good                                                              
#                                                                         
# Checking prerequisites...                                               
# Looks good                                                              
#                                                                         
# Creating new &#39;Build&#39; script for &#39;Simple&#39; version &#39;0.01&#39;                 
Warning: Build.PL has been altered.  You may need to run &#39;perl Build.PL&#39;
again.
# Copying lib/Simple.pm -&gt; blib/lib/Simple.pm                          
       
# Copying etc/config -&gt; blib/etc/config                                
       
# Copying share/data -&gt; blib/share/data                                
       
# Copying share/html/index.html -&gt; blib/share/html/index.html          
       
# Manifying blib/lib/Simple.pm -&gt; blib/libdoc/Simple.3pm               
       
ok 3 - Built etc/config                                                
       
ok 4 - Built share/data                                                
       
ok 5 - Built share/html                                                
       
Subroutine magic_number_matches redefined at Build line 8.             
       
Warning: Build.PL has been altered.  You may need to run &#39;perl Build.PL&#39;
again.
# Installing
/var/folders/qH/qHUigC3eGoGgT7PM4aqJfU+++yQ/-Tmp-/MB-MLjQO9PJ/t/install_extra_targets-45186/etc/simple/config
# Installing
/var/folders/qH/qHUigC3eGoGgT7PM4aqJfU+++yQ/-Tmp-/MB-MLjQO9PJ/t/install_extra_targets-45186/lib/perl5/Simple.pm
# Installing
/var/folders/qH/qHUigC3eGoGgT7PM4aqJfU+++yQ/-Tmp-/MB-MLjQO9PJ/t/install_extra_targets-45186/man/man3/Simple.3pm
# Installing
/var/folders/qH/qHUigC3eGoGgT7PM4aqJfU+++yQ/-Tmp-/MB-MLjQO9PJ/t/install_extra_targets-45186/share/simple/data
 
# Installing
/var/folders/qH/qHUigC3eGoGgT7PM4aqJfU+++yQ/-Tmp-/MB-MLjQO9PJ/t/install_extra_targets-45186/share/simple/html/index.html
# Writing
/var/folders/qH/qHUigC3eGoGgT7PM4aqJfU+++yQ/-Tmp-/MB-MLjQO9PJ/t/install_extra_targets-45186/lib/perl5/darwin-thread-multi-2level/auto/Simple/.packlist
ok 6 - installed etc/config                                            
                                                                       
                
ok 7 - installed share/data                                            
                                                                       
                
ok 8 - installed share/html                                            
                                                                       
                

1..8
&#34;

I hope this helps.

Thorben
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/637145/324893/install_extra_target.t">Download install_extra_target.t</a><br />
<span class="downloadcontenttype">text/x-perl 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!perl -w

use strict;
use lib $ENV{PERL_CORE} ? &#39;../lib/Module/Build/t/lib&#39; : &#39;t/lib&#39;;
use MBTest;

use_ok &#39;Module::Build&#39;;
ensure_blib&#40;&#39;Module::Build&#39;&#41;;

use File::Spec::Functions qw&#40; catdir &#41;;

use Config;
use Cwd &#40;&#41;;
my $cwd = Cwd::cwd;
my $tmp = MBTest-&gt;tmpdir;

use DistGen;
my $dist = DistGen-&gt;new&#40; dir =&gt; $tmp &#41;;

note&#40;&#34;Dist is in $tmp\n&#34;&#41;;

$dist-&gt;add_file&#40;&#34;Build.PL&#34;, &lt;&lt;&#39;===EOF===&#39;&#41;;
#!perl -w

use strict;
use Module::Build;

my $subclass = Module::Build-&gt;subclass&#40;code =&gt; &lt;&lt;&#39;=EOF=&#39;&#41;;
sub copy_files
{
	my $self = shift;
	my $dir = shift;

	my $files = $self-&gt;rscan_dir&#40;$dir, sub {-f $_ and not m!/\.|[#~]$!}&#41;;

	foreach my $file &#40;@$files&#41; {
		$self-&gt;copy_if_modified&#40;from =&gt; $file, to_dir =&gt; &#34;blib&#34;&#41;;
	}
}

#Copy etc files to blib
sub process_etc_files
{
	my $self = shift;

	$self-&gt;copy_files&#40;&#34;etc&#34;&#41;;
}

#Copy share files to blib
sub process_share_files
{
	my $self = shift;

	$self-&gt;copy_files&#40;&#34;share&#34;&#41;;
}

1;
=EOF=

my $build = $subclass-&gt;new&#40;
	module_name =&gt; &#39;Simple&#39;,
	license     =&gt; &#39;perl&#39;
&#41;;

$build-&gt;add_build_element&#40;&#39;etc&#39;&#41;;
$build-&gt;add_build_element&#40;&#39;share&#39;&#41;;

my $distdir = lc $build-&gt;dist_name&#40;&#41;;

foreach my $id &#40;&#39;core&#39;, &#39;site&#39;, &#39;vendor&#39;&#41; {
	#Where to install these build types when using prefix symantics
	$build-&gt;prefix_relpaths&#40;$id, &#39;share&#39; =&gt; &#34;share/$distdir&#34;&#41;;
	$build-&gt;prefix_relpaths&#40;$id, &#39;etc&#39; =&gt; &#34;etc/$distdir&#34;&#41;;

	#Where to install these build types when using default symantics
	my $set = $build-&gt;install_sets&#40;$id&#41;;
	$set-&gt;{&#39;share&#39;} = &#39;/usr/&#39;.&#40;$id eq &#39;site&#39; ? &#39;local/&#39;:&#39;&#39;&#41;.&#34;share/$distdir&#34;;
	$set-&gt;{&#39;etc&#39;} = &#40;$id eq &#39;site&#39; ? &#39;/usr/local/etc/&#39;:&#39;/etc/&#39;&#41;.$distdir;
}

#Where to install these types when using install_base symantics
$build-&gt;install_base_relpaths&#40;&#39;share&#39; =&gt; &#34;share/$distdir&#34;&#41;;
$build-&gt;install_base_relpaths&#40;&#39;etc&#39; =&gt; &#34;etc/$distdir&#34;&#41;;

$build-&gt;create_build_script&#40;&#41;;

===EOF===
	
#Test Build.PL exists ok?

$dist-&gt;add_file&#40;&#34;etc/config&#34;, &lt;&lt;&#39;===EOF===&#39;&#41;;
[main]
Foo = bar
Jim = bob

[supplemental]
stardate = 1234344

===EOF===

$dist-&gt;add_file&#40;&#34;share/data&#34;, &lt;&lt;&#39;===EOF===&#39;&#41;;
7 * 9 = 42?

===EOF===

$dist-&gt;add_file&#40;&#34;share/html/index.html&#34;, &lt;&lt;&#39;===EOF===&#39;&#41;;
&lt;HTML&gt;
  &lt;BODY&gt;
    &lt;H1&gt;Hello World!&lt;/H1&gt;
  &lt;/BODY&gt;
&lt;/HTML&gt;

===EOF===

$dist-&gt;regen;
$dist-&gt;chdir_in;

my $installdest = catdir&#40;$tmp, &#39;t&#39;, &#34;install_extra_targets-$$&#34;&#41;;

diag&#40;stdout_of&#40;sub { local @ARGV = &#40;&#34;--install_base=$installdest&#34;&#41;; do &#34;Build.PL&#34;; } &#41;&#41;;

diag&#40;stdout_of&#40; sub { local @ARGV = &#40;&#41;; do &#34;Build&#34;; } &#41;&#41;;

ok&#40;-e &#34;blib/etc/config&#34;, &#34;Built etc/config&#34;&#41;;
ok&#40;-e &#34;blib/share/data&#34;, &#34;Built share/data&#34;&#41;;
ok&#40;-e &#34;blib/share/html/index.html&#34;, &#34;Built share/html&#34;&#41;;

diag&#40;stdout_of&#40; sub { local @ARGV = &#40;&#39;install&#39;&#41;; do &#34;Build&#34;; } &#41;&#41;;


ok&#40;-e &#34;$installdest/etc/simple/config&#34;, &#34;installed etc/config&#34;&#41;;
ok&#40;-e &#34;$installdest/share/simple/data&#34;, &#34;installed share/data&#34;&#41;;
ok&#40;-e &#34;$installdest/share/simple/html/index.html&#34;, &#34;installed share/html&#34;&#41;;

$dist-&gt;remove&#40;&#41;;
done_testing&#40;&#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-637573" href="/Public/Bug/Display.html?id=41166#txn-637573">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;24&nbsp;03:39:55&nbsp;2009</span>
    <span class="description">TREVELYAN [...] cpan.org -  Cc TREVELYAN added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-648726" href="/Public/Bug/Display.html?id=41166#txn-648726">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;16&nbsp;15:10:17&nbsp;2009</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/648726/332077/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/332077">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 189b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you for the test case.  I&#39;ve modified it slightly, marked the
failures as TODO and added it to the repository trunk.  That will
definitely help in considering the right fix.

-- David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-649277" href="/Public/Bug/Display.html?id=41166#txn-649277">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;17&nbsp;17:30:04&nbsp;2009</span>
    <span class="description">jleader [...] alumni.caltech.edu -  Requestor jleader added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-650118" href="/Public/Bug/Display.html?id=41166#txn-650118">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;19&nbsp;11:27:41&nbsp;2009</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/650118/332997/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/332997">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 288b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Patched in trunk.  It was quite an extensive patch, making generation of
default install paths lazy rather than on object construction.

Everyone following this bug, please check out trunk and test. 
Subversion repo:

  <span class="clickylink"><a target="new" rel="nofollow" href="http://svn.perl.org/modules/Module-Build/trunk">http://svn.perl.org/modules/Module-Build/trunk</a></span>

Thank you.
-- David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-650121" href="/Public/Bug/Display.html?id=41166#txn-650121">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;19&nbsp;11:27:43&nbsp;2009</span>
    <span class="description">dagolden [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-650297" href="/Public/Bug/Display.html?id=41166#txn-650297">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;19&nbsp;15:05:01&nbsp;2009</span>
    <span class="description">dagolden [...] cpan.org -  Dependency by ticket #46180 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-660819" href="/Public/Bug/Display.html?id=41166#txn-660819">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;07&nbsp;22:44:44&nbsp;2009</span>
    <span class="description">dagolden [...] cpan.org -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-660821" href="/Public/Bug/Display.html?id=41166#txn-660821">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;07&nbsp;22:44:44&nbsp;2009</span>
    <span class="description">dagolden [...] cpan.org -  Fixed in 0.34_06 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.805561</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
