<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #116178 for Net-SFTP-Foreign: Can&#39;t upload file to WS_FTP-SSH_7.7 server</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #116178 for Net-SFTP-Foreign: Can&#39;t upload file to WS_FTP-SSH_7.7 server</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-SFTP-Foreign/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-SFTP-Foreign/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-SFTP-Foreign/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-SFTP-Foreign/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-SFTP-Foreign">Net-SFTP-Foreign CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">116178</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-SFTP-Foreign/Active/">Net-SFTP-Foreign</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
rduval [...] factset.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-23164-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-23165-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;15&nbsp;08:29:42&nbsp;2016</span>
    <span class="description">rduval [...] factset.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Can&#39;t upload file to WS_FTP-SSH_7.7 server</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 15 Jul 2016 12:29:20 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Net-SFTP-Foreign [...] rt.cpan.org&#34; &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Rob Duval &lt;rduval [...] factset.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Salva,

I currently can&#39;t upload a file to a server that identifies itself as WS_FTP-SSH_7.7.  A simple reproducer script is included below, and it dies with &#34;Couldn&#39;t open remote file &#39;test.txt&#39;: Folder not found: test.txt at /home/user/rduval/fts/test_sftp.pl line 16&#34; when I run it.  Please note that I can upload a file using the sftp command-line program on RHEL 6.6.

Can you please take a look and comment on whether there is a bug in Net::SFTP::Foreign?  I don&#39;t have a viable workaround at the moment, so any advice you have would be appreciated.

Reproducer Script

use strict;
use warnings;

use Net::SFTP::Foreign;
$Net::SFTP::Foreign::debug = -1;

my %options = &#40;
  host =&gt; &#39;...&#39;,
  user =&gt; &#39;...&#39;,
  password =&gt; &#39;...&#39;,
  autodie =&gt; 1,
  more =&gt; [&#39;-v&#39;]
&#41;;
my $session = Net::SFTP::Foreign-&gt;new&#40;%options&#41;;

$session-&gt;put&#40;&#39;test.txt&#39;&#41;;

Perl version: This is perl 5, version 12, subversion 5 &#40;v5.12.5&#41; built for x86_64-linux-thread-multi

Debug Log

#20342 1468585419.00000 new:  This is Net::SFTP::Foreign 1.86
#20342 1468585419.00000 new:  Loaded from /home/user/rduval/perf/fts_axway53_conf/Users/ftsclient/SecureTransport/xfers_v2/lib//Net/SFTP/Foreign.pm
#20342 1468585419.00000 new:  Running on Perl v5.12.5 for linux
#20342 1468585419.00000 new:  debug set to -1
#20342 1468585419.00000 new:  ~0 is 18446744073709551615
#20342 1468585419.00000 new:  Using backend Net::SFTP::Foreign::Backend::Unix 1.76_03
#20342 1468585419.00000 autodisconnect:  setting disconnecting pid to 20342 and thread to 1
#20342 1468585419.00000 _init_transport:  ssh cmd: ssh -o NumberOfPasswordPrompts=1 -o PreferredAuthentications=keyboard-interactive,password -l removed -v removed -s sftp

#20342 1468585419.00000 _init_transport:  starting password authentication
#20342 1468585419.00000 _init_transport:  waiting for data from the pty to become available
OpenSSH_5.3p1, OpenSSL 1.0.1e-fips 11 Feb 2013
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options for *
debug1: Connecting to removed [168.114.169.24] port 22.
debug1: Connection established.
debug1: identity file /home/fds/ftsclient/.ssh/identity type -1
debug1: identity file /home/fds/ftsclient/.ssh/identity-cert type -1
debug1: identity file /home/fds/ftsclient/.ssh/id_rsa type -1
debug1: identity file /home/fds/ftsclient/.ssh/id_rsa-cert type -1
debug1: identity file /home/fds/ftsclient/.ssh/id_dsa type -1
debug1: identity file /home/fds/ftsclient/.ssh/id_dsa-cert type -1
debug1: identity file /home/fds/ftsclient/.ssh/id_ecdsa type -1
debug1: identity file /home/fds/ftsclient/.ssh/id_ecdsa-cert type -1
debug1: Remote protocol version 2.0, remote software version WS_FTP-SSH_7.7
debug1: no match: WS_FTP-SSH_7.7
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.3
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server-&gt;client aes128-ctr hmac-md5 none
debug1: kex: client-&gt;server aes128-ctr hmac-md5 none
debug1: sending SSH2_MSG_KEXDH_INIT
debug1: expecting SSH2_MSG_KEXDH_REPLY
debug1: Host &#39;removed&#39; is known and matches the RSA host key.
debug1: Found key in /home/fds/ftsclient/.ssh/known_hosts:121
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: SSH2_MSG_SERVICE_REQUEST sent
#20342 1468585420.00000 _init_transport:  waiting for data from the pty to become available
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey,password
debug1: Next authentication method: password
#20342 1468585421.00000 _init_transport:  54 bytes readed from pty:
73 66 74 70 30 34 65 78 74 2d 66 64 73 6e 66 6a 40 73 66 74 70 2d 30 34 2e 61 6c 6c 69 61 6e 7a | removed
67 69 2d 75 73 2e 63 6f 6d 27 73 20 70 61 73 73 77 6f 72 64 3a 20                               | &#39;s password:
#20342 1468585421.00000 _init_transport:  looking for user/password prompt
#20342 1468585421.00000 _init_transport:  matching against &#40;?i-xsm:&#40;user|name|login&#41;?[:?]\s*$&#41;
#20342 1468585421.00000 _init_transport:  sending password
#20342 1468585421.00000 _init_transport:  waiting for data from the pty to become available
#20342 1468585421.00000 _init_transport:  2 bytes readed from pty:
0d 0a                                                                                           | ..
#20342 1468585421.00000 _init_transport:  looking for password ok
#20342 1468585421.00000 _init_transport:  password authentication done
#20342 1468585421.00000 _queue_msg:  queueing msg len: 5, code:1, id:3 ... [1]
00 00 00 05 01 00 00 00 03                                                                      | .........
#20342 1468585421.00000 _get_msg:  waiting for message... [1]
#20342 1468585421.00000 _do_io:  _do_io connected: 1
#20342 1468585421.00000 _do_io:  _do_io select&#40;-,-,-, undef&#41;
#20342 1468585421.00000 _do_io:  _do_io write queue: 9, syswrite: 9, max: 65536, $!:
00 00 00 05 01 00 00 00 03                                                                      | .........
#20342 1468585421.00000 _do_io:  _do_io select&#40;-,-,-, undef&#41;
debug1: Authentication succeeded &#40;password&#41;.
debug1: channel 0: new [client-session]
debug1: Entering interactive session.
debug1: Sending environment.
debug1: Sending env LANG = en_US.UTF-8
debug1: Sending subsystem: sftp
#20342 1468585421.00000 _do_io:  _do_io read sysread: 9, total read: 9, $!:
00 00 00 05 02 00 00 00 03                                                                      | .........
#20342 1468585421.00000 _get_msg:  got it!, len:5, code:2, id:-, status: -
02 00 00 00 03                                                                                  | .....
#20342 1468585421.00000 _rel2abs:  &#39;test.txt&#39; --&gt; &#39;test.txt&#39;
#20342 1468585421.00000 put:  local file size is 20
#20342 1468585421.00000 _rel2abs:  &#39;test.txt&#39; --&gt; &#39;test.txt&#39;
#20342 1468585421.00000 _queue_msg:  queueing msg len: 29, code:3, id:0 ... [1]
00 00 00 1d 03 00 00 00 00 00 00 00 08 74 65 73 74 2e 74 78 74 00 00 00 1a 00 00 00 04 00 00 01 | .............test.txt...........
a4                                                                                              | .
#20342 1468585421.00000 _get_msg:  waiting for message... [1]
#20342 1468585421.00000 _do_io:  _do_io connected: 1
#20342 1468585421.00000 _do_io:  _do_io select&#40;-,-,-, undef&#41;
#20342 1468585421.00000 _do_io:  _do_io write queue: 33, syswrite: 33, max: 65536, $!:
00 00 00 1d 03 00 00 00 00 00 00 00 08 74 65 73 74 2e 74 78 74 00 00 00 1a 00 00 00 04 00 00 01 | .............test.txt...........
a4                                                                                              | .
#20342 1468585421.00000 _do_io:  _do_io select&#40;-,-,-, undef&#41;
#20342 1468585421.00000 _do_io:  _do_io read sysread: 47, total read: 47, $!:
00 00 00 2b 65 00 00 00 00 00 00 00 04 00 00 00 1a 46 6f 6c 64 65 72 20 6e 6f 74 20 66 6f 75 6e | ...+e............Folder not foun
64 3a 20 74 65 73 74 2e 74 78 74 00 00 00 00                                                    | d: test.txt....
#20342 1468585421.00000 _get_msg:  got it!, len:43, code:101, id:0, status: 4
65 00 00 00 00 00 00 00 04 00 00 00 1a 46 6f 6c 64 65 72 20 6e 6f 74 20 66 6f 75 6e 64 3a 20 74 | e............Folder not found: t
65 73 74 2e 74 78 74 00 00 00 00                                                                | est.txt....
#20342 1468585421.00000 _set_status:  _set_status code: 4, str: Folder not found: test.txt
#20342 1468585421.00000 _set_error:  _set_err code: 2, str: Couldn&#39;t open remote file &#39;test.txt&#39;: Folder not found: test.txt
#20342 1468585421.00000 open:  open failed: Folder not found: test.txt
Couldn&#39;t open remote file &#39;test.txt&#39;: Folder not found: test.txt at /home/user/rduval/fts/test_sftp.pl line 16
#20342 1468585421.00000 DESTROY:  Net::SFTP::Foreign=HASH&#40;0x1f12df0&#41;-&gt;DESTROY called &#40;current pid: 20342, disconnect_by_pid: 20342&#41;, current thread generation: 1, disconnect_by_thread: 1&#41;
#20342 1468585421.00000 disconnect:  Net::SFTP::Foreign=HASH&#40;0x1f12df0&#41;-&gt;disconnect called &#40;ssh pid: 20343&#41;
#20342 1468585421.00000 _conn_lost:  _conn_lost
#20342 1468585421.00000 disconnect:  starting dirty cleanup of process 20343
#20342 1468585421.00000 disconnect:  killing process 20343 with signal 0
#20342 1468585421.00000 disconnect:  waitpid returned  0
#20342 1468585421.00000 disconnect:  waitpid returned  0
#20342 1468585421.00000 disconnect:  waitpid returned  0
#20342 1468585421.00000 disconnect:  waitpid returned  0
#20342 1468585421.00000 disconnect:  waitpid returned  0
#20342 1468585421.00000 disconnect:  waitpid returned  0
#20342 1468585421.00000 disconnect:  waitpid returned  0
debug1: channel 0: free: client-session, nchannels 1
debug1: fd 0 clearing O_NONBLOCK
debug1: fd 1 clearing O_NONBLOCK
Transferred: sent 1792, received 2464 bytes, in 0.6 seconds
Bytes per second: sent 3162.0, received 4347.7
debug1: Exit status -1
#20342 1468585422.00000 disconnect:  waitpid returned  20343
#20342 1468585422.00000 disconnect:  process 20343 reaped

Thanks,

Rob Duval    Portfolio Services Engineering    rduval@factset.com&lt;mailto:rduval@factset.com&gt;    T 203.810.1728    FactSet Research Systems Inc.&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.factset.com/">http://www.factset.com/</a></span>&gt;
</div></div>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;21&nbsp;09:51:52&nbsp;2017</span>
    <span class="description">salva [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This bug is too old to follow up. Closing.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;21&nbsp;09:51:52&nbsp;2017</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;21&nbsp;09:51:53&nbsp;2017</span>
    <span class="description">salva [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
