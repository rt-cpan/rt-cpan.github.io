<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #16191 for XML-RSS: add_module does not work for RSS 2.0</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #16191 for XML-RSS: add_module does not work for RSS 2.0</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=XML-RSS">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=XML-RSS">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=XML-RSS">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=XML-RSS">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/XML-RSS">XML-RSS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">16191</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=XML-RSS">XML-RSS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
cpan [...] stupidfool.org

<br />
emailpranav [...] gmail.com

<br />
ivan.wills [...] gmail.com

<br />
rachel [...] nmcfarl.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-37498-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.05    </td>
  </tr>
  <tr id="CF-37499-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




rss-20.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/189805/68439/rss-20.pl">
Tue Apr 25 01:43:17 2006 (379b) by cpan [...] stupidfool.org
</a>
</font></li>
</ul>


RSS.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/149981/44837/RSS.patch">
Tue Nov 29 21:31:26 2005 (4.1k) by 
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/149980/44821/RSS.patch">
Tue Nov 29 17:57:30 2005 (613b) by 
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/149979/44815/RSS.patch">
Tue Nov 29 17:42:47 2005 (613b) by 
</a>
</font></li>
</ul>


XML-RSS-16191-rev1.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/261462/113791/XML-RSS-16191-rev1.patch">
Sat Nov 11 16:07:26 2006 (6.2k) by SHLOMIF [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=16191">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-133636" href="/Public/Bug/Display.html?id=16191#txn-133636">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;11&nbsp;13:41:26&nbsp;2005</span>
    <span class="description">Guest - Ticket #13209:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> PATCH: Ad-Hoc Module Support for RSS 2.0</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/133636/35966/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/35966">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This patch adds ad hoc module support for 2.0. I basically copied code from 1.0 and changed it a little to work with 2.0.


1051,1055c1051,1055
&lt;         while &#40; my&#40;$url, $prefix&#41; = each %{$self-&gt;{modules}} &#41; {
&lt;                 next if $prefix =~ /^&#40;dc|syn|taxo&#41;$/;
&lt;                while &#40; my&#40;$el, $value&#41; = each %{$self-&gt;{textinput}-&gt;{$prefix}} &#41; {
&lt;                      $output .= &#34;&lt;$prefix:$el&gt;&#34;.  $self-&gt;encode&#40;$value&#41; .&#34;&lt;/$prefix:$el&gt;\n&#34;;
&lt;                }
---
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;   while &#40; my&#40;$url, $prefix&#41; = each %{$self-&gt;{modules}} &#41; {
&gt;     next if $prefix =~ /^&#40;dc|syn|taxo&#41;$/;
&gt;     while &#40; my&#40;$el, $value&#41; = each %{$self-&gt;{textinput}-&gt;{$prefix}} &#41; {
&gt;                 $output .= &#34;&lt;$prefix:$el&gt;&#34;.  $self-&gt;encode&#40;$value&#41; .&#34;&lt;/$prefix:$el&gt;\n&#34;;
&gt;     }
</div>1059c1059
&lt;       }
---
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;     }
</div>1077,1081c1077
&lt;     $output .= &#39;&lt;rss version=&#34;2.0&#34; xmlns:blogChannel=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule">http://backend.userland.com/blogChannelModule</a></span>&#34;&#39;;
&lt;     while &#40;my &#40;$k, $v&#41; = each %{$self-&gt;{modules}}&#41; {
&lt;       $output.=&#34; xmlns:$v=\&#34;$k\&#34;\n&#34;;
&lt;     }
&lt;     $output .=  &#34;&gt;&#34; . &#34;\n\n&#34;;
---
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;     $output .= &#39;&lt;rss version=&#34;2.0&#34; xmlns:blogChannel=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule">http://backend.userland.com/blogChannelModule</a></span>&#34;&gt;&#39; . &#34;\n\n&#34;;
</div>1165,1171c1161
&lt; # Ad-hoc modules
&lt;     while &#40; my&#40;$url, $prefix&#41; = each %{$self-&gt;{modules}} &#41; {
&lt;             next if $prefix =~ /^&#40;dc&#41;$/;
&lt;             while &#40; my&#40;$el, $value&#41; = each %{$self-&gt;{channel}-&gt;{$prefix}} &#41; {
&lt;                    $output .= &#34;&lt;$prefix:$el&gt;&#34;.  $self-&gt;encode&#40;$value&#41; .&#34;&lt;/$prefix:$el&gt;\n&#34;;
&lt;                  }
&lt;           }
---
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Create even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-149979" href="/Public/Bug/Display.html?id=16191#txn-149979">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;29&nbsp;17:42:47&nbsp;2005</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> add_module does not work for RSS 2.0</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/149979/44814/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/44814">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 375b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Like RSS 1.0, RSS 2.0 supports name spaces but XML::RSS as_rss_2_0 has this hard coded into the function so the add_module method does nothing in RSS 2.0 mode. I have added a quick and dirty patch to get this working with RSS 2.0 this probably needs some extra work as it is adding default name spaces for RSS 1.0 to RSS 2.0 files &#40;probably need to change the way new works&#41;.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/149979/44815/RSS.patch">Download RSS.patch</a><br />
<span class="downloadcontenttype">text/x-diff 613b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">1077c1077,1089
&lt;     $output .= &#39;&lt;rss version=&#34;2.0&#34; xmlns:blogChannel=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule">http://backend.userland.com/blogChannelModule</a></span>&#34;&gt;&#39; . &#34;\n\n&#34;;
---
&gt;     # $output .= &#39;&lt;rss version=&#34;2.0&#34; xmlns:blogChannel=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule">http://backend.userland.com/blogChannelModule</a></span>&#34;&gt;&#39; . &#34;\n\n&#34;;
&gt; 	
&gt;     # RSS namespaces declaration
&gt;     $output .=&#34;&lt;rss\n&#34;;
&gt; 	$output .=&#39; version=&#34;2.0&#34;&#39;.&#34;\n&#34;;
&gt;     $output .=&#39; xmlns:blogChannel=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule">http://backend.userland.com/blogChannelModule</a></span>&#34;&#39;.&#34;\n&#34;;
&gt; 
&gt;     # print all imported namespaces
&gt;     while &#40;my&#40;$k, $v&#41; = each %{$self-&gt;{modules}}&#41; {
&gt; 			$output.=&#34; xmlns:$v=\&#34;$k\&#34;\n&#34;;
&gt;     }
&gt; 
&gt;     $output .=&#34;&gt;&#34;.&#34;\n\n&#34;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-149980" href="/Public/Bug/Display.html?id=16191#txn-149980">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;29&nbsp;17:57:30&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ivan.wills [...] gmail.com</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/149980/44820/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/44820">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 544b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">[guest - Tue Nov 29 17:42:47 2005]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Like RSS 1.0, RSS 2.0 supports name spaces but XML::RSS as_rss_2_0 has
&gt;    this hard coded into the function so the add_module method does
&gt;    nothing in RSS 2.0 mode. I have added a quick and dirty patch to
&gt;    get this working with RSS 2.0 this probably needs some extra work
&gt;    as it is adding default name spaces for RSS 1.0 to RSS 2.0 files
&gt;    &#40;probably need to change the way new works&#41;.
</div>

Added a more sophisticated patch which allows there to be seperate
default RSS 1.0 and RSS 2.0 modules
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/149980/44821/RSS.patch">Download RSS.patch</a><br />
<span class="downloadcontenttype">text/x-diff 613b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">1077c1077,1089
&lt;     $output .= &#39;&lt;rss version=&#34;2.0&#34; xmlns:blogChannel=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule">http://backend.userland.com/blogChannelModule</a></span>&#34;&gt;&#39; . &#34;\n\n&#34;;
---
&gt;     # $output .= &#39;&lt;rss version=&#34;2.0&#34; xmlns:blogChannel=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule">http://backend.userland.com/blogChannelModule</a></span>&#34;&gt;&#39; . &#34;\n\n&#34;;
&gt; 	
&gt;     # RSS namespaces declaration
&gt;     $output .=&#34;&lt;rss\n&#34;;
&gt; 	$output .=&#39; version=&#34;2.0&#34;&#39;.&#34;\n&#34;;
&gt;     $output .=&#39; xmlns:blogChannel=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule">http://backend.userland.com/blogChannelModule</a></span>&#34;&#39;.&#34;\n&#34;;
&gt; 
&gt;     # print all imported namespaces
&gt;     while &#40;my&#40;$k, $v&#41; = each %{$self-&gt;{modules}}&#41; {
&gt; 			$output.=&#34; xmlns:$v=\&#34;$k\&#34;\n&#34;;
&gt;     }
&gt; 
&gt;     $output .=&#34;&gt;&#34;.&#34;\n\n&#34;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-149981" href="/Public/Bug/Display.html?id=16191#txn-149981">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;29&nbsp;21:31:26&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ivan.wills [...] gmail.com</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/149981/44836/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/44836">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 822b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">[guest - Tue Nov 29 17:57:30 2005]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [guest - Tue Nov 29 17:42:47 2005]:
&gt; 
<div class="message-stanza open">&gt; &gt; Like RSS 1.0, RSS 2.0 supports name spaces but XML::RSS as_rss_2_0
</div>&gt; has
<div class="message-stanza open">&gt; &gt;    this hard coded into the function so the add_module method does
&gt; &gt;    nothing in RSS 2.0 mode. I have added a quick and dirty patch to
&gt; &gt;    get this working with RSS 2.0 this probably needs some extra work
&gt; &gt;    as it is adding default name spaces for RSS 1.0 to RSS 2.0 files
&gt; &gt;    &#40;probably need to change the way new works&#41;.
</div>&gt; 
&gt; 
&gt; Added a more sophisticated patch which allows there to be seperate
&gt; default RSS 1.0 and RSS 2.0 modules
</div>
Another more complete patch that also fixes outputting of the namespace
tags &#40;the first two only address getting the namespaces into the rss tag&#41;.

Note that this is cumulative containing the previous two patches
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/149981/44837/RSS.patch">Download RSS.patch</a><br />
<span class="downloadcontenttype">text/x-diff 4.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">369a370,376
&gt; };
&gt; 
&gt; my $modules_2_0 = {
&gt;     &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule&#39;">http://backend.userland.com/blogChannelModule&#39;</a></span> =&gt; &#39;blogChannel&#39;,
&gt; };
&gt; 
&gt; my $modules_1_0 = {
454c461
&lt;     $self-&gt;{modules} = $modules;
---
&gt;     $self-&gt;{modules} = { &#40;$hash{version} eq &#39;2.0&#39;? %$modules_2_0: %$modules_1_0&#41;, %$modules };
1077c1084,1095
&lt;     $output .= &#39;&lt;rss version=&#34;2.0&#34; xmlns:blogChannel=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule">http://backend.userland.com/blogChannelModule</a></span>&#34;&gt;&#39; . &#34;\n\n&#34;;
---
&gt;     # $output .= &#39;&lt;rss version=&#34;2.0&#34; xmlns:blogChannel=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule">http://backend.userland.com/blogChannelModule</a></span>&#34;&gt;&#39; . &#34;\n\n&#34;;
&gt; 	
&gt;     # RSS namespaces declaration
&gt;     $output .=&#34;&lt;rss\n&#34;;
&gt; 	$output .=&#39; version=&#34;2.0&#34;&#39;.&#34;\n&#34;;
&gt; 
&gt;     # print all imported namespaces
&gt;     while &#40;my&#40;$k, $v&#41; = each %{$self-&gt;{modules}}&#41; {
&gt; 			$output.=&#34; xmlns:$v=\&#34;$k\&#34;\n&#34;;
&gt;     }
&gt; 
&gt;     $output .=&#34;&gt;&#34;.&#34;\n\n&#34;;
1161c1179,1194
&lt; 
---
&gt;     # Ad-hoc modules
&gt; 	while &#40; my&#40;$url, $prefix&#41; = each %{$self-&gt;{modules}} &#41; {
&gt; 		next if $prefix =~ /^&#40;dc|syn|taxo&#41;$/;
&gt; 		while &#40; my&#40;$el, $value&#41; = each %{$self-&gt;{channel}-&gt;{$prefix}} &#41; {
&gt; 			if &#40; exists&#40; $rdf_resource_fields{ $url } &#41; and
&gt; 				 exists&#40; $rdf_resource_fields{ $url }{ $el }&#41; &#41;
&gt; 			{
&gt; 				$output .= qq!&lt;$prefix:$el rdf:resource=&#34;! .
&gt; 						   $self-&gt;encode&#40;$value&#41; .
&gt; 						   qq!&#34; /&gt;\n!;
&gt; 			}
&gt; 			else {
&gt; 				$output .= &#34;&lt;$prefix:$el&gt;&#34;.  $self-&gt;encode&#40;$value&#41; .&#34;&lt;/$prefix:$el&gt;\n&#34;;
&gt; 			}
&gt; 		}
&gt;   	}
1192a1226,1241
&gt; 	  	# Ad-hoc modules for images
&gt; 		while &#40; my&#40;$url, $prefix&#41; = each %{$self-&gt;{modules}} &#41; {
&gt; 			next if $prefix =~ /^&#40;dc|syn|taxo&#41;$/;
&gt; 			while &#40; my&#40;$el, $value&#41; = each %{$self-&gt;{image}-&gt;{$prefix}} &#41; {
&gt; 				if &#40; exists&#40; $rdf_resource_fields{ $url } &#41; and
&gt; 					 exists&#40; $rdf_resource_fields{ $url }{ $el }&#41; &#41;
&gt; 				{
&gt; 					$output .= qq!&lt;$prefix:$el rdf:resource=&#34;! .
&gt; 							   $self-&gt;encode&#40;$value&#41; .
&gt; 							   qq!&#34; /&gt;\n!;
&gt; 				}
&gt; 				else {
&gt; 					$output .= &#34;&lt;$prefix:$el&gt;&#34;.  $self-&gt;encode&#40;$value&#41; .&#34;&lt;/$prefix:$el&gt;\n&#34;;
&gt; 				}
&gt; 			}
&gt; 	  	}
1243a1293,1308
&gt; 			# Ad-hoc modules
&gt; 			while &#40; my&#40;$url, $prefix&#41; = each %{$self-&gt;{modules}} &#41; {
&gt; 				next if $prefix =~ /^&#40;dc|syn|taxo&#41;$/;
&gt; 				while &#40; my&#40;$el, $value&#41; = each %{$item-&gt;{$prefix}} &#41; {
&gt; 					if &#40; exists&#40; $rdf_resource_fields{ $url } &#41; and
&gt; 						 exists&#40; $rdf_resource_fields{ $url }{ $el }&#41; &#41;
&gt; 					{
&gt; 						$output .= qq!&lt;$prefix:$el rdf:resource=&#34;! .
&gt; 								   $self-&gt;encode&#40;$value&#41; .
&gt; 								   qq!&#34; /&gt;\n!;
&gt; 					}
&gt; 					else {
&gt; 						$output .= &#34;&lt;$prefix:$el&gt;&#34;.  $self-&gt;encode&#40;$value&#41; .&#34;&lt;/$prefix:$el&gt;\n&#34;;
&gt; 					}
&gt; 				}
&gt;   			}
1257a1323,1339
&gt; 
&gt; 	  	# Ad-hoc modules for images
&gt; 		while &#40; my&#40;$url, $prefix&#41; = each %{$self-&gt;{modules}} &#41; {
&gt; 			next if $prefix =~ /^&#40;dc|syn|taxo&#41;$/;
&gt; 			while &#40; my&#40;$el, $value&#41; = each %{$self-&gt;{textinput}-&gt;{$prefix}} &#41; {
&gt; 				if &#40; exists&#40; $rdf_resource_fields{ $url } &#41; and
&gt; 					 exists&#40; $rdf_resource_fields{ $url }{ $el }&#41; &#41;
&gt; 				{
&gt; 					$output .= qq!&lt;$prefix:$el rdf:resource=&#34;! .
&gt; 							   $self-&gt;encode&#40;$value&#41; .
&gt; 							   qq!&#34; /&gt;\n!;
&gt; 				}
&gt; 				else {
&gt; 					$output .= &#34;&lt;$prefix:$el&gt;&#34;.  $self-&gt;encode&#40;$value&#41; .&#34;&lt;/$prefix:$el&gt;\n&#34;;
&gt; 				}
&gt; 			}
&gt; 	  	}
1266a1349,1365
&gt; 
&gt; 	  	# Ad-hoc modules for skipHours
&gt; 		while &#40; my&#40;$url, $prefix&#41; = each %{$self-&gt;{modules}} &#41; {
&gt; 			next if $prefix =~ /^&#40;dc|syn|taxo&#41;$/;
&gt; 			while &#40; my&#40;$el, $value&#41; = each %{$self-&gt;{skipHours}-&gt;{$prefix}} &#41; {
&gt; 				if &#40; exists&#40; $rdf_resource_fields{ $url } &#41; and
&gt; 					 exists&#40; $rdf_resource_fields{ $url }{ $el }&#41; &#41;
&gt; 				{
&gt; 					$output .= qq!&lt;$prefix:$el rdf:resource=&#34;! .
&gt; 							   $self-&gt;encode&#40;$value&#41; .
&gt; 							   qq!&#34; /&gt;\n!;
&gt; 				}
&gt; 				else {
&gt; 					$output .= &#34;&lt;$prefix:$el&gt;&#34;.  $self-&gt;encode&#40;$value&#41; .&#34;&lt;/$prefix:$el&gt;\n&#34;;
&gt; 				}
&gt; 			}
&gt; 	  	}
1275a1375,1391
&gt; 
&gt; 	  	# Ad-hoc modules for skipDays
&gt; 		while &#40; my&#40;$url, $prefix&#41; = each %{$self-&gt;{modules}} &#41; {
&gt; 			next if $prefix =~ /^&#40;dc|syn|taxo&#41;$/;
&gt; 			while &#40; my&#40;$el, $value&#41; = each %{$self-&gt;{skipDays}-&gt;{$prefix}} &#41; {
&gt; 				if &#40; exists&#40; $rdf_resource_fields{ $url } &#41; and
&gt; 					 exists&#40; $rdf_resource_fields{ $url }{ $el }&#41; &#41;
&gt; 				{
&gt; 					$output .= qq!&lt;$prefix:$el rdf:resource=&#34;! .
&gt; 							   $self-&gt;encode&#40;$value&#41; .
&gt; 							   qq!&#34; /&gt;\n!;
&gt; 				}
&gt; 				else {
&gt; 					$output .= &#34;&lt;$prefix:$el&gt;&#34;.  $self-&gt;encode&#40;$value&#41; .&#34;&lt;/$prefix:$el&gt;\n&#34;;
&gt; 				}
&gt; 			}
&gt; 	  	}
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-150136" href="/Public/Bug/Display.html?id=16191#txn-150136">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;30&nbsp;16:17:03&nbsp;2005</span>
    <span class="description">Guest - Ticket #16220:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> add_module broken for RSS 2.0 format</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/150136/44906/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/44906">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 702b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am writing a small utility to provide product feeds to google base and the format google wants it is slightly more than RSS 2.0 &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://base.google.com/base/rss_specs.html&#41;">http://base.google.com/base/rss_specs.html&#41;</a></span>. I&#39;m using the vanilla XML::RSS module that you have written to create the RSS file. I wish to add extra &#40;google provided&#41; attributes to my RSS file using google&#39;s namespace. Here&#39;s an example:

&lt;channel xmlns:g=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://base.google.com/ns/1.0">http://base.google.com/ns/1.0</a></span>&#34;&gt;

&lt;g:image_link&gt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.google.com/images/google_sm.gif">http://www.google.com/images/google_sm.gif</a></span> &lt;/g:image_link&gt;


In order to achieve the above, I am using the add_module functionality to add an external module. But it does not work and these new elements do not get added to my output xml file.

Thanks very much.  
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-175610" href="/Public/Bug/Display.html?id=16191#txn-175610">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;11&nbsp;18:02:44&nbsp;2006</span>
    <span class="description">ABH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/175610/59753/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/59753">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 269b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Nov 29 21:31:26 2005, guest wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Another more complete patch that also fixes outputting of the namespace
&gt; tags &#40;the first two only address getting the namespaces into the rss tag&#41;.
</div>
Hi,

1&#41; Test cases please.  :-&#41;

2&#41; Diffs with &#34;diff -u&#34; please.



 - ask
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-175611" href="/Public/Bug/Display.html?id=16191#txn-175611">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;11&nbsp;18:02:47&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-175631" href="/Public/Bug/Display.html?id=16191#txn-175631">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;11&nbsp;18:35:54&nbsp;2006</span>
    <span class="description">ABH [...] cpan.org - Ticket #16220:  Merged into ticket #16191</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-175632" href="/Public/Bug/Display.html?id=16191#txn-175632">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;11&nbsp;18:35:54&nbsp;2006</span>
    <span class="description">ABH [...] cpan.org -  Merged into ticket #16191</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Create even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-189805" href="/Public/Bug/Display.html?id=16191#txn-189805">#</a>      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;25&nbsp;01:43:17&nbsp;2006</span>
    <span class="description">cpan [...] stupidfool.org - Ticket #18907:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> as_rss_2_0 doesn&#39;t serialize content:encoded</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/189805/68436/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/68436">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 451b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Since RSS 2.0 supports namespaces, it should serialize any namespaced elements, even if 
they&#39;re not defined in the base specification.

In particular, the content:encoded element &#40;or, well, specifically, <span class="clickylink"><a target="new" rel="nofollow" href="http://purl.org/rss/1">http://purl.org/rss/1</a></span>.
0/modules/content/encoded&#41; isn&#39;t serialized in as_rss_2_0. Possibly it should do something like 
as_rss_1_0 does, where it serializes any elements in namespaces defined in $self-&gt;{modules}?

A very short test case attached.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> rss-20.pl</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/189805/68439/rss-20.pl">Download rss-20.pl</a><br />
<span class="downloadcontenttype">text/x-perl 379b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl -w
use strict;

use Test::More tests =&gt; 1;
use XML::RSS;

my $rss = XML::RSS-&gt;new&#40; version =&gt; &#39;2.0&#39; &#41;;
$rss-&gt;add_module&#40;
        prefix =&gt; &#39;content&#39;,
        uri =&gt; &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://purl.org/rss/1.0/modules/content/&#39;">http://purl.org/rss/1.0/modules/content/&#39;</a></span>
    &#41;;
$rss-&gt;add_item&#40;
        title   =&gt; &#39;title&#39;,
        content =&gt; { encoded =&gt; &#39;this is content&#39; },
    &#41;;

like $rss-&gt;as_string, qr/this is content/;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-261423" href="/Public/Bug/Display.html?id=16191#txn-261423">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;11&nbsp;14:49:29&nbsp;2006</span>
    <span class="description">SHLOMIF [...] cpan.org - Ticket #18907:  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/261423/113764/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/113764">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 667b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Apr 25 01:43:17 2006, BTROTT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Since RSS 2.0 supports namespaces, it should 
</div>serialize any namespaced
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; elements, even if
&gt; they&#39;re not defined in the base specification.
&gt; 
&gt; In particular, the content:encoded element &#40;or, 
</div>well, specifically,
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://purl.org/rss/1">http://purl.org/rss/1</a></span>.
&gt; 0/modules/content/encoded&#41; isn&#39;t serialized in 
</div>as_rss_2_0. Possibly it
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; should do something like
&gt; as_rss_1_0 does, where it serializes any 
</div>elements in namespaces
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; defined in $self-&gt;{modules}?
&gt; 
&gt; A very short test case attached.
</div>
Hi!

This seems like a duplicate of 
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=16191">https://rt.cpan.org/Ticket/Display.html?id=16191</a></span> . I suggest we merge 
it there.

Regards,

    Shlomi Fish
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-261424" href="/Public/Bug/Display.html?id=16191#txn-261424">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;11&nbsp;14:49:30&nbsp;2006</span>
    <span class="description">The RT System itself - Ticket #18907:  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-261462" href="/Public/Bug/Display.html?id=16191#txn-261462">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;11&nbsp;16:07:26&nbsp;2006</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> BTROTT</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/261462/113788/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/113788">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 972b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Mar 11 18:02:44 2006, ABH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue Nov 29 21:31:26 2005, guest wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; Another more complete patch that also fixes outputting of the 
</div></div>namespace
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; tags &#40;the first two only address getting the namespaces into the 
</div></div>rss tag&#41;.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Hi,
&gt; 
&gt; 1&#41; Test cases please.  :-&#41;
&gt; 
&gt; 2&#41; Diffs with &#34;diff -u&#34; please.
&gt; 
</div>
Here is a reworked version of the patch along with BTROTT&#39;s testcase 
from issue #18907. It is in diff -u format. I omitted some places 
where the modules were rendered in RSS 2.0, but otherwise weren&#39;t in 
RSS 1.0 and 0.91. &#40;And don&#39;t seem like it would make sense to render 
them there.&#41;.

My svk commit message read:

&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;

Commited the reworked patch from:

<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=16191">https://rt.cpan.org/Ticket/Display.html?id=16191</a></span>

By ivan.wills@gmail.com along with the 2.0-modules.t from:

<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=18907">http://rt.cpan.org/Ticket/Display.html?id=18907</a></span>

By BTROTT, to add support for modules/namespaces to RSS 2.0.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</div></div>Regards,

        Shlomi Fish



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 
&gt;  - ask
</div></div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/261462/113791/XML-RSS-16191-rev1.patch">Download XML-RSS-16191-rev1.patch</a><br />
<span class="downloadcontenttype">text/x-diff 6.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">=== t/2.0-generate.t
==================================================================
--- t/2.0-generate.t	&#40;revision 444&#41;
+++ t/2.0-generate.t	&#40;revision 445&#41;
@@ -84,9 +84,6 @@
 		  enclosure   =&gt; { type=&gt;&#34;application/x-bittorrent&#34;, url =&gt; &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://127.0.0.1/torrents/The_Passion_of_Dave_Winer.torrent&#39;">http://127.0.0.1/torrents/The_Passion_of_Dave_Winer.torrent&#39;</a></span> },
 		 &#41;, &#34;Set one RSS item&#34; &#41;;
 
-my $len = length&#40;$rss-&gt;as_string&#40;&#41;&#41;;
-ok&#40; $len, &#34;RSS feed has &#39;$len&#39; characters&#34; &#41;;
-
 ok&#40; $rss-&gt;add_module&#40; prefix =&gt; RSS_MOD_PREFIX, uri =&gt; RSS_MOD_URI &#41;,
 	&#34;Added module: &#34; . RSS_MOD_PREFIX &#41;;
 
@@ -97,6 +94,9 @@
 
 is&#40; $rss-&gt;{modules}-&gt;{$uri}, RSS_MOD_PREFIX, &#34;Namespace URI is &#34; . RSS_MOD_URI&#41;;
 
+my $len = length&#40;$rss-&gt;as_string&#40;&#41;&#41;;
+ok&#40; $len, &#34;RSS feed has &#39;$len&#39; characters&#34; &#41;;
+
 ok&#40; $rss-&gt;save&#40;RSS_SAVEAS&#41;, &#34;Wrote to disk: &#34; . RSS_SAVEAS &#41;;
 
 my $size = -s &#40;RSS_SAVEAS&#41;;
@@ -163,4 +163,4 @@
 
 <span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/rss2">http://backend.userland.com/rss2</a></span>
 
-=cu
\ No newline at end of file
+=cu
=== t/test_manifest
==================================================================
--- t/test_manifest	&#40;revision 444&#41;
+++ t/test_manifest	&#40;revision 445&#41;
@@ -11,6 +11,7 @@
 1.0-parse.t
 1.0-parse-exotic.t
 2.0-generate.t
+2.0-modules.t
 2.0-permalink.t
 2.0-parse.t
 2.0-wo-title.t
=== t/2.0-modules.t
==================================================================
--- t/2.0-modules.t	&#40;revision 444&#41;
+++ t/2.0-modules.t	&#40;revision 445&#41;
@@ -0,0 +1,17 @@
+#!/usr/bin/perl -w
+use strict;
+
+use Test::More tests =&gt; 1;
+use XML::RSS;
+
+my $rss = XML::RSS-&gt;new&#40; version =&gt; &#39;2.0&#39; &#41;;
+$rss-&gt;add_module&#40;
+        prefix =&gt; &#39;content&#39;,
+        uri =&gt; &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://purl.org/rss/1.0/modules/content/&#39;">http://purl.org/rss/1.0/modules/content/&#39;</a></span>
+    &#41;;
+$rss-&gt;add_item&#40;
+        title   =&gt; &#39;title&#39;,
+        content =&gt; { encoded =&gt; &#39;this is content&#39; },
+    &#41;;
+
+like $rss-&gt;as_string, qr/this is content/;
=== MANIFEST
==================================================================
--- MANIFEST	&#40;revision 444&#41;
+++ MANIFEST	&#40;revision 445&#41;
@@ -36,6 +36,7 @@
 t/1.0-parse.t
 t/1.0-to-2.0.t
 t/2.0-generate.t
+t/2.0-modules.t
 t/2.0-parse.t
 t/2.0-permalink.t
 t/2.0-wo-title.t
=== lib/XML/RSS.pm
==================================================================
--- lib/XML/RSS.pm	&#40;revision 444&#41;
+++ lib/XML/RSS.pm	&#40;revision 445&#41;
@@ -420,6 +420,14 @@
     };
 }
 
+sub _get_default_rss_2_0_modules
+{
+    return
+    {
+        &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule&#39;">http://backend.userland.com/blogChannelModule&#39;</a></span> =&gt; &#39;blogChannel&#39;,
+    };
+}
+
 sub new {
     my $class = shift;
     
@@ -460,18 +468,23 @@
     $self-&gt;{namespaces} = {};
 	$self-&gt;{rss_namespace} = &#39;&#39;;
 
+    #get version info
+    &#40;exists&#40;$hash{version}&#41;&#41;
+	? &#40;$self-&gt;{version} = $hash{version}&#41;
+	    : &#40;$self-&gt;{version} = &#39;1.0&#39;&#41;;
+
     # modules
-    $self-&gt;{modules} = $self-&gt;_get_default_modules&#40;&#41;;
+    $self-&gt;{modules} =
+        &#40;&#40;$self-&gt;{version} eq &#34;2.0&#34;&#41; ?
+            $self-&gt;_get_default_rss_2_0_modules&#40;&#41; :
+            $self-&gt;_get_default_modules&#40;&#41;
+        &#41;;
 
 	# encode output from as_string?
 	&#40;exists&#40;$hash{encode_output}&#41;&#41;
 	? &#40;$self-&gt;{encode_output} = $hash{encode_output}&#41;
 		: &#40;$self-&gt;{encode_output} = 1&#41;;
 
-    #get version info
-    &#40;exists&#40;$hash{version}&#41;&#41;
-	? &#40;$self-&gt;{version} = $hash{version}&#41;
-	    : &#40;$self-&gt;{version} = &#39;1.0&#39;&#41;;
 
     # set default output
     &#40;exists&#40;$hash{output}&#41;&#41;
@@ -1274,7 +1287,17 @@
 
     # RSS root element
     # $output .= &#39;&lt;rss version=&#34;0.91&#34;&gt;&#39;.&#34;\n\n&#34;;
-    $output .= &#39;&lt;rss version=&#34;2.0&#34; xmlns:blogChannel=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule">http://backend.userland.com/blogChannelModule</a></span>&#34;&gt;&#39; . &#34;\n\n&#34;;
+    
+    # RSS namespaces declaration
+    $output .=&#34;&lt;rss\n&#34;;
+    $output .=&#39; version=&#34;2.0&#34;&#39;.&#34;\n&#34;;
+ 
+     # print all imported namespaces
+    while &#40;my&#40;$k, $v&#41; = each %{$self-&gt;{modules}}&#41; {
+        $output.=&#34; xmlns:$v=\&#34;$k\&#34;\n&#34;;
+    }
+ 
+    $output .=&#34;&gt;&#34;.&#34;\n\n&#34;;
 
     ###################
     # Channel Element #
@@ -1342,8 +1365,23 @@
         $output .= &#39;&lt;ttl&gt;&#39;.$self-&gt;_encode&#40;$self-&gt;{channel}-&gt;{ttl}&#41;.&#39;&lt;/ttl&gt;&#39;.&#34;\n&#34;;
     }
 
+    # Ad-hoc modules
+    while &#40; my&#40;$url, $prefix&#41; = each %{$self-&gt;{modules}} &#41; {
+        next if $prefix =~ /^&#40;dc|syn|taxo&#41;$/;
+        while &#40; my&#40;$el, $value&#41; = each %{$self-&gt;{channel}-&gt;{$prefix}} &#41; {
+            if &#40; exists&#40; $rdf_resource_fields{ $url } &#41; and
+                 exists&#40; $rdf_resource_fields{ $url }{ $el }&#41; &#41;
+            {
+                $output .= &#34;&lt;$prefix:$el rdf:resource=\&#34;&#34; .
+                           $self-&gt;_encode&#40;$value&#41; .
+                           &#34;\&#34; /&gt;\n&#34;;
+            }
+            else {
+                $output .= &#34;&lt;$prefix:$el&gt;&#34;.  $self-&gt;_encode&#40;$value&#41; .&#34;&lt;/$prefix:$el&gt;\n&#34;;
+            }
+        }
+    }
 
-
     $output .= &#34;\n&#34;;
 
     #################
@@ -1362,6 +1400,23 @@
             [qw&#40;link width height description&#41;]
         &#41;;
 
+        # Ad-hoc modules for images
+        while &#40; my&#40;$url, $prefix&#41; = each %{$self-&gt;{modules}} &#41; {
+            next if $prefix =~ /^&#40;dc|syn|taxo&#41;$/;
+            while &#40; my&#40;$el, $value&#41; = each %{$self-&gt;{image}-&gt;{$prefix}} &#41; {
+                if &#40; exists&#40; $rdf_resource_fields{ $url } &#41; and
+                     exists&#40; $rdf_resource_fields{ $url }{ $el }&#41; &#41;
+                {
+                    $output .= qq{&lt;$prefix:$el rdf:resource=&#34;} .
+                               $self-&gt;_encode&#40;$value&#41; .
+                               qq{&#34; /&gt;\n};
+                }
+                else {
+                    $output .= &#34;&lt;$prefix:$el&gt;&#34;.  $self-&gt;_encode&#40;$value&#41; .&#34;&lt;/$prefix:$el&gt;\n&#34;;
+                }
+            }
+        }
+
         # end image element
         $output .= &#39;&lt;/image&gt;&#39;.&#34;\n\n&#34;;
     }
@@ -1403,6 +1458,23 @@
                     . &#39; /&gt;&#39; . &#34;\n&#34;;
             }
 
+            # Ad-hoc modules
+            while &#40; my&#40;$url, $prefix&#41; = each %{$self-&gt;{modules}} &#41; {
+                next if $prefix =~ /^&#40;dc|syn|taxo&#41;$/;
+                while &#40; my&#40;$el, $value&#41; = each %{$item-&gt;{$prefix}} &#41; {
+                    if &#40; exists&#40; $rdf_resource_fields{ $url } &#41; and
+                         exists&#40; $rdf_resource_fields{ $url }{ $el }&#41; &#41;
+                    {
+                        $output .= &#34;&lt;$prefix:$el rdf:resource=\&#34;&#34; .
+                                   $self-&gt;_encode&#40;$value&#41; .
+                                   &#34;\&#34; /&gt;\n&#34;;
+                    }
+                    else {
+                        $output .= &#34;&lt;$prefix:$el&gt;&#34;.  $self-&gt;_encode&#40;$value&#41; .&#34;&lt;/$prefix:$el&gt;\n&#34;;
+                    }
+                }
+            }
+
             # end image element
             $output .= &#39;&lt;/item&gt;&#39;.&#34;\n\n&#34;;
     }
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-262874" href="/Public/Bug/Display.html?id=16191#txn-262874">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;13&nbsp;04:33:41&nbsp;2006</span>
    <span class="description">SHLOMIF [...] cpan.org - Ticket #13209:  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/262874/114581/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/114581">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 141b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Ask!

This is a duplicate of:

<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=16191">http://rt.cpan.org/Ticket/Display.html?id=16191</a></span>

I suggest you mark it as such.

Regards,

     Shlomi Fish
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-262875" href="/Public/Bug/Display.html?id=16191#txn-262875">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;13&nbsp;04:33:42&nbsp;2006</span>
    <span class="description">The RT System itself - Ticket #13209:  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-263349" href="/Public/Bug/Display.html?id=16191#txn-263349">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;13&nbsp;16:14:15&nbsp;2006</span>
    <span class="description">ABH [...] cpan.org - Ticket #13209:  Merged into ticket #16191</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-263350" href="/Public/Bug/Display.html?id=16191#txn-263350">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;13&nbsp;16:14:15&nbsp;2006</span>
    <span class="description">ABH [...] cpan.org -  Merged into ticket #16191</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-269453" href="/Public/Bug/Display.html?id=16191#txn-269453">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;28&nbsp;20:23:27&nbsp;2006</span>
    <span class="description">ABH [...] cpan.org - Ticket #18907:  Merged into ticket #16191</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-269454" href="/Public/Bug/Display.html?id=16191#txn-269454">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;28&nbsp;20:23:28&nbsp;2006</span>
    <span class="description">ABH [...] cpan.org -  Merged into ticket #16191</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-276703" href="/Public/Bug/Display.html?id=16191#txn-276703">#</a>      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;17&nbsp;07:18:24&nbsp;2006</span>
    <span class="description">ABH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/276703/123708/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/123708">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 169b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Applied, thanks Ben &#38; Ivan.  The fix will be in v1.22.

 - ask &#40;reluctant maintainer of this incredible piece of junk code implementing that absurd 
messy file format&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-276706" href="/Public/Bug/Display.html?id=16191#txn-276706">#</a>      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;17&nbsp;07:18:50&nbsp;2006</span>
    <span class="description">ABH [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.859548</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
