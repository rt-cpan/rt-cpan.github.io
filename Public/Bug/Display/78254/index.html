<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #78254 for Test-Deep: Preliminary thoughts re new new feature: comparison function for comparing an arrayref with ordering as if it were a hashref</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #78254 for Test-Deep: Preliminary thoughts re new new feature: comparison function for comparing an arrayref with ordering as if it were a hashref</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Test-Deep/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Test-Deep/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Test-Deep/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Test-Deep/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="http://github.com/rjbs/Test-Deep/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Test-Deep">Test-Deep CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">78254</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Test-Deep/Active/">Test-Deep</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ether [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-31370-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-31371-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;06&nbsp;15:42:50&nbsp;2012</span>
    <span class="description">ether [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Preliminary thoughts re new new feature: comparison function for
 comparing an arrayref with ordering as if it were a hashref</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m opening this ticket so I don&#39;t forget this thought.. need to discuss
with rjbs later, and I don&#39;t have the time currently to code this up in
a pull request.

new comparison function for testing the contents of an arrayref, as if
it were a hashref &#40;that is, the ordering of *pairs* of elements is
insignificant&#41;.  This would be useful for testing the 2nd element of a
PSGI response &#40;which contains header information, as an arrayref&#41;.

This works as-is, but can made nicer by folding into its own testing
function within Test::Deep:

    use Test::Deep &#39;cmp_details&#39;;

    sub _hash_as_arrayref&#40;@&#41;
    {
        my %expected_hash = @_;

        return &#40;
            all&#40;
                supersetof&#40;&#41;,   # first check we have an arrayref.
                code&#40;sub {      # now compare contents as a hash
                        my $got = shift;
                        return cmp_details&#40;{@$got}, \%expected_hash&#41;;
                    },
                &#41;,
            &#41;,
        &#41;;
    }

    my @result = &#40;
        404,
        [
            &#39;Cache-Control&#39; =&gt; &#39;no-cache&#39;,
            &#39;Content-Type&#39; =&gt; &#39;text/plain&#39;,
        ],
        [ &#39;foo&#39; ],
    &#41;;

    cmp_deeply&#40;
        \@result,
        [
            404,
            _hash_as_arrayref&#40;
                &#39;Cache-Control&#39; =&gt; &#39;no-cache&#39;,
                &#39;Content-Type&#39; =&gt; &#39;text/plain&#39;,
            &#41;,
            [ &#39;foo&#39; ],
        ],
    &#41;;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;23&nbsp;16:15:28&nbsp;2012</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Updated version: handles modifiers like superhashof; also properly
renders diagnostics.


# we take a hashref so we accept modifiers like superhashof&#40;&#41;.
sub _hashref_as_arrayref
{
    my &#40;$expected_hash&#41; = @_;

    return &#40;
        all&#40;
            supersetof&#40;&#41;, # first check we have an arrayref.
            code&#40;sub {
                    my $got = shift;
                    return &#40;0, &#39;odd number of elements&#39;&#41; if @$got % 2;
                    my &#40;$ok, $stack&#41; = cmp_details&#40;{@$got}, $expected_hash&#41;;
                    return $ok if $ok;
                    return &#40;$ok, deep_diag&#40;$stack&#41;&#41;;
                },
            &#41;,
        &#41;,
    &#41;;
}
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;23&nbsp;16:15:29&nbsp;2012</span>
    <span class="description">ether [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;21&nbsp;19:16:22&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is now implemented by <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/module/Test::Deep::UnorderedPairs">https://metacpan.org/module/Test::Deep::UnorderedPairs</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;21&nbsp;19:16:22&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;21&nbsp;23:34:22&nbsp;2013</span>
    <span class="description">fergal [...] esatclear.ie -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #78254] Preliminary thoughts re new new feature: comparison function for comparing an arrayref with ordering as if it were a hashref</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 22 May 2013 12:34:04 +0900</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-Deep [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Fergal Daly &lt;fergald [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Out of curiosity, could you have leveraged Test::Deep::Hash to save a lot
of code here? Something like:

sub descend
{
    my &#40;$self, $got&#41; = @_;

    my $exp = $self-&gt;{val};
    %got = @$got;
    %exp = @$exp;
    return Test::Deep::Hash-&gt;new&#40;\%exp&#41;-&gt;got&#40;\%got&#41;;
}

perhaps with some extra code in there to ensure that there really were an
even number of elements and also something in render to indicate that
things are being compared hashwise,

F
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;22&nbsp;13:13:33&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2013-05-21 20:34:22, fergal@esatclear.ie wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Out of curiosity, could you have leveraged Test::Deep::Hash to save a lot
&gt; of code here?
</div>
I actually did that in the initial version:

<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/ETHER/Test-Deep-UnorderedPairs-0.001/lib/Test/Deep/UnorderedPairs.pm">https://metacpan.org/source/ETHER/Test-Deep-UnorderedPairs-0.001/lib/Test/Deep/UnorderedPairs.pm</a></span>

But that doesn&#39;t work if there are two pairs with the same key:

    cmp_deeply&#40;
        [ foo =&gt; 1, foo =&gt; 2, bar =&gt; 3 ],
        tuples&#40;
            foo =&gt; 1,
            foo =&gt; 2,
            foo =&gt; 3,
        &#41;,
    &#41;;

<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/ETHER/Test-Deep-UnorderedPairs-0.003/t/02-repeated-keys.t">https://metacpan.org/source/ETHER/Test-Deep-UnorderedPairs-0.003/t/02-repeated-keys.t</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;22&nbsp;18:52:44&nbsp;2013</span>
    <span class="description">fergal [...] esatclear.ie -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #78254] Preliminary thoughts re new new feature: comparison function for comparing an arrayref with ordering as if it were a hashref</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 23 May 2013 07:52:20 +0900</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-Deep [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Fergal Daly &lt;fergald [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Your documentation says

&#34;for comparing lists as if they were hashes&#34;

and samehash&#40;...&#41; makes me think that I&#39;m testing whether these 2 things
would make the same hash if I assigned them to a hash. If that&#39;s not what
you&#39;re testing then I think you should make that very clear in the docs
e.g. by dropping use of &#34;hash&#34;.

So if you really want an unordered comparison of tuples then you should
transform the lists in to a list that looks like

[[&#34;foo&#34;, 1], [&#34;foo&#34;, 2]]

and the descend into a the bag comparator.

<span class="clickylink"><a target="new" rel="nofollow" href="http://cpansearch.perl.org/src/RJBS/Test-Deep-0.110/lib/Test/Deep/Set.pm">http://cpansearch.perl.org/src/RJBS/Test-Deep-0.110/lib/Test/Deep/Set.pm</a></span>

has pretty much the same comparison loop as you have in your code, I think,

F




On 23 May 2013 02:13, Karen Etheridge via RT &lt;bug-Test-Deep@rt.cpan.org&gt;wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Test-Deep
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=78254">https://rt.cpan.org/Ticket/Display.html?id=78254</a></span> &gt;
&gt;
&gt; On 2013-05-21 20:34:22, fergal@esatclear.ie wrote:
<div class="message-stanza open">&gt; &gt; Out of curiosity, could you have leveraged Test::Deep::Hash to save a lot
&gt; &gt; of code here?
</div>&gt;
&gt; I actually did that in the initial version:
&gt;
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/ETHER/Test-Deep-UnorderedPairs-0.001/lib/Test/Deep/UnorderedPairs.pm">https://metacpan.org/source/ETHER/Test-Deep-UnorderedPairs-0.001/lib/Test/Deep/UnorderedPairs.pm</a></span>
&gt;
&gt; But that doesn&#39;t work if there are two pairs with the same key:
&gt;
&gt;     cmp_deeply&#40;
&gt;         [ foo =&gt; 1, foo =&gt; 2, bar =&gt; 3 ],
&gt;         tuples&#40;
&gt;             foo =&gt; 1,
&gt;             foo =&gt; 2,
&gt;             foo =&gt; 3,
&gt;         &#41;,
&gt;     &#41;;
&gt;
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/ETHER/Test-Deep-UnorderedPairs-0.003/t/02-repeated-keys.t">https://metacpan.org/source/ETHER/Test-Deep-UnorderedPairs-0.003/t/02-repeated-keys.t</a></span>
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;22&nbsp;23:04:13&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #78254] Preliminary thoughts re new new feature: comparison function for comparing an arrayref with ordering as if it were a hashref</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 22 May 2013 20:03:55 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Fergal Daly via RT &lt;bug-Test-Deep [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karen Etheridge &lt;ether [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, May 22, 2013 at 06:52:45PM -0400, Fergal Daly via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; and samehash&#40;...&#41; makes me think that I&#39;m testing whether these 2 things
&gt; would make the same hash if I assigned them to a hash. If that&#39;s not what
&gt; you&#39;re testing then I think you should make that very clear in the docs
&gt; e.g. by dropping use of &#34;hash&#34;.
</div>
samehash&#40;&#41; is there because that&#39;s what rjbs called the hypothetical
function in his Router::Dumb tests that was crying out for this.
There&#39;s a note in the docs that the names are weird and subject to change;
it&#39;s quite possible that samehash will be removed.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So if you really want an unordered comparison of tuples then you should
&gt; transform the lists in to a list that looks like
&gt; 
&gt; [[&#34;foo&#34;, 1], [&#34;foo&#34;, 2]]
&gt; 
&gt; and the descend into a the bag comparator.
</div>
I considered that, but the diagnostic message on error was confusing to the
user, so a bit of custom jiggery is needed no matter what.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;23&nbsp;00:01:00&nbsp;2013</span>
    <span class="description">fergal [...] esatclear.ie -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #78254] Preliminary thoughts re new new feature: comparison function for comparing an arrayref with ordering as if it were a hashref</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 23 May 2013 13:00:39 +0900</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-Deep [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Fergal Daly &lt;fergald [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yeah diagnostics are going to be a bit odd but I really think you should
change the main description. It currently says

&#34;Test::Deep::UnorderedPairs - A Test::Deep plugin for comparing lists as if
they were hashes&#34;

which is not the case,

F


On 23 May 2013 12:04, Karen Etheridge via RT &lt;bug-Test-Deep@rt.cpan.org&gt;wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Test-Deep
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=78254">https://rt.cpan.org/Ticket/Display.html?id=78254</a></span> &gt;
&gt;
&gt; On Wed, May 22, 2013 at 06:52:45PM -0400, Fergal Daly via RT wrote:
<div class="message-stanza open">&gt; &gt; and samehash&#40;...&#41; makes me think that I&#39;m testing whether these 2 things
&gt; &gt; would make the same hash if I assigned them to a hash. If that&#39;s not what
&gt; &gt; you&#39;re testing then I think you should make that very clear in the docs
&gt; &gt; e.g. by dropping use of &#34;hash&#34;.
</div>&gt;
&gt; samehash&#40;&#41; is there because that&#39;s what rjbs called the hypothetical
&gt; function in his Router::Dumb tests that was crying out for this.
&gt; There&#39;s a note in the docs that the names are weird and subject to change;
&gt; it&#39;s quite possible that samehash will be removed.
&gt;
<div class="message-stanza open">&gt; &gt; So if you really want an unordered comparison of tuples then you should
&gt; &gt; transform the lists in to a list that looks like
&gt; &gt;
&gt; &gt; [[&#34;foo&#34;, 1], [&#34;foo&#34;, 2]]
&gt; &gt;
&gt; &gt; and the descend into a the bag comparator.
</div>&gt;
&gt; I considered that, but the diagnostic message on error was confusing to the
&gt; user, so a bit of custom jiggery is needed no matter what.
&gt;
&gt;
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
