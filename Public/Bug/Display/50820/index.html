<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #50820 for Geo-ReadGRIB: Fails on 64bit systems when uselongdouble is defined</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #50820 for Geo-ReadGRIB: Fails on 64bit systems when uselongdouble is defined</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Geo-ReadGRIB">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Geo-ReadGRIB">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Geo-ReadGRIB">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Geo-ReadGRIB">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Geo-ReadGRIB">Geo-ReadGRIB CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">50820</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Geo-ReadGRIB">Geo-ReadGRIB</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ANDK [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-39526-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1    </td>
  </tr>
  <tr id="CF-39527-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=50820">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-681948" href="/Public/Bug/Display.html?id=50820#txn-681948">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;26&nbsp;01:39:25&nbsp;2009</span>
    <span class="description">ANDK [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Fails on 64bit systems when uselongdouble is defined</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/681948/351129/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351129">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 379b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">As the subject says. I first observed it on cpantesters. Systems that
fail have an nvsize of 12 or 16.

Test Summary Report
-------------------
t/8-Geo-ReadGRIB-Dateline-CMS.t &#40;Wstat: 256 Tests: 305 Failed: 1&#41;
  Failed test:  6
  Non-zero exit status: 1
Files=1, Tests=305,  1 wallclock secs &#40; 0.03 usr  0.01 sys +  0.24 cusr
 0.05 csys =  0.33 CPU&#41;
Result: FAIL


Regards, HTH,
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-682361" href="/Public/Bug/Display.html?id=50820#txn-682361">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;26&nbsp;14:20:38&nbsp;2009</span>
    <span class="description">frank.l.cox [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/682361/351362/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351362">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 590b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Interesting bug.

The failing test runs on a newly supported GRIB file variant file
shipped in the package. It&#39;s a Canadian weather office file covering
longs 180 to 180 and lat 90 to -90. Projected onto a lat/long grid there
are two 180 degree lines on the west and east edges. There are two
separate data points for these for each latitude in the file. 

The test asserts the two separate 180 degree data points should have the
same value for each latitude in the file. &#40;This includes +-90 which are
points on the globe but in the projection have as many data points as
any other lat.&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-682362" href="/Public/Bug/Display.html?id=50820#txn-682362">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;26&nbsp;14:20:40&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-682366" href="/Public/Bug/Display.html?id=50820#txn-682366">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;26&nbsp;14:35:46&nbsp;2009</span>
    <span class="description">frank.l.cox [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/682366/351364/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351364">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 212b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I don&#39;t have easy access to a 64bit longdouble system except through
CPAN Testers. Also, the list of possible suspects is long...

I&#39;ll upload v1_1 later today with some more tests to help zero in on the
problem.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-683131" href="/Public/Bug/Display.html?id=50820#txn-683131">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;27&nbsp;19:49:20&nbsp;2009</span>
    <span class="description">frank.l.cox [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/683131/351846/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351846">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I just uploaded v1.0_2 which has some tests that revel the smoking gun
or at least a little whiff of gun smoke. 

All fail reports I&#39;ve seen are for a single failed test to see if data
values for -180 and 180 degrees longitude are the same for all latitudes
in the file from pole to pole inclusive. That&#39;s .6 degree interval for
301 points total. The specific point that fails is 89.4 degrees. These
files scan south to north so this is the last latitude except the 90 or
the pole. Since the pole is a point, all longs should have the same
value. It may &#34;fail&#34; for 90 north too and still pass this test.

The data in the file is stored as a continuous sequence of 32 bit values
starting at a given point in the file. The data for this type of GRIB
file scans a row of longs west to east 180 to 180 degrees and lats from
south to north -90 to 90. The first data point is &#40;-90,-180&#41; and the
last is &#40;90,180&#41;. Data point &#40;-89.4,-180&#41; is 601 further into the file
than &#40;-90, -180&#41;.

I have a method called lalo2offset&#40;&#41; that takes a lat and long and
returns an offset into this data. I&#39;ve demonstrated that it returns a
different value for both &#40;89.4, -180&#41; and &#40;98.4, 180&#41; on 64bit use
longdouble systems than on any other CPAN Testers system. It&#39;s off by one.

The code is this:

# shift long east until Lo1 = 0 and make sure any long
# &gt; 360 degrees is moved back into the range of 0 - 360
$thislong = $long + $self-&gt;lo_shift;
if &#40; $thislong &gt; 360 &#41; {
    $thislong -= 360;
}
                                                                    
$out =  &#40; &#40; &#40; $lat - $self-&gt;La1  &#41; / $self-&gt;LaInc &#41; * $self-&gt;Ni &#41; 
        + &#40; &#40;$thislong &#41; / $self-&gt;LoInc &#41;;

return sprintf &#34;%d&#34;, $out;
-------------------------------------------------------------------

lo_shift = 180 so for -180 and 180 $thislong is 1 and 360
$lat  = 89.4
La1   = -90
LaInc = LoInc = .6
Ni    = 601

Using my HP calculator-- 
for $long = -180, &#40;&#40;&#40;89.4 - -90&#41;/.6&#41; * 601&#41; + &#40;0 /.6&#41; = 179699
for $long = 180, &#40;&#40;&#40;89.4 - -90&#41;/.6&#41; * 601&#41; + &#40;360 /.6&#41; = 180299

On 64bit uselongdouble systems lalo2offset&#40;&#41; returns 179698
and 180298.

Hmmm! I&#39;m still investigating. I&#39;m preparing a new test will explore
this bug in more detail.

At this point I won&#39;t be surprised to find something wrong with my
assumptions...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-683133" href="/Public/Bug/Display.html?id=50820#txn-683133">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;27&nbsp;19:54:17&nbsp;2009</span>
    <span class="description">frank.l.cox [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/683133/351848/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351848">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 209b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">TYPO HERE, Should be: $thisLong is 0 and 360

I get it right in the calculations 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; lo_shift = 180 so for -180 and 180 $thislong is 1 and 360
&gt; $lat  = 89.4
&gt; La1   = -90
&gt; LaInc = LoInc = .6
&gt; Ni    = 601
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-683828" href="/Public/Bug/Display.html?id=50820#txn-683828">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;28&nbsp;20:20:28&nbsp;2009</span>
    <span class="description">frank.l.cox [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/683828/352213/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/352213">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 710b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">It looks like these fails happen when a different result is returned by
lalo2offset&#40;&#41; for some inputs when run on a 64bit uselongdouble Perl.
The results on all other tested platforms agree with my HP calculator or
hand calculation of the algorithm.  

Specifically, this test fails only on 64bit uselongdouble and on no
other known Perl varient:

my $calc = &#40;&#40;&#40;63 - -90&#41;/.6&#41; * 601&#41; + &#40;360 /.6&#41;;
ok&#40; $calc == 153855 &#41; or
    diag &#40;&#34;raw &#40;&#40;63 - -90&#41;/.6&#41; * 601&#41; + &#40;360 /.6&#41; = 153855 not $calc  &#34;&#41;;


I&#39;m not sure what the right thing to do here. I can detect the platform
but I don&#39;t yet know how to modify my algorithm to work correctly. 

I&#39;m going to try one more test to zero in a bit more on the problem...
 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-684429" href="/Public/Bug/Display.html?id=50820#txn-684429">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;31&nbsp;02:29:19&nbsp;2009</span>
    <span class="description">frank.l.cox [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/684429/352484/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/352484">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 339b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; my $calc = &#40;&#40;&#40;63 - -90&#41;/.6&#41; * 601&#41; + &#40;360 /.6&#41;;
&gt; ok&#40; $calc == 153855 &#41; or
&gt;     diag &#40;&#34;raw &#40;&#40;63 - -90&#41;/.6&#41; * 601&#41; + &#40;360 /.6&#41; = 153855 not $calc  &#34;&#41;;
</div>
This test failed on uselongdouble platforms but it didn&#39;t turn out to be
very diagnostic of the real problem, partly because of the problems of
using == with floating point numbers. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-684430" href="/Public/Bug/Display.html?id=50820#txn-684430">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;31&nbsp;02:41:00&nbsp;2009</span>
    <span class="description">frank.l.cox [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/684430/352485/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/352485">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 381b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The problem turned out to be the use of sprintf &#34;%d&#34; on the return value
of lalo2offset&#40;&#41;. This truncates the floating-point result rather than
rounds it as expected. This still gave the correct result on all
platforms I tested on until this new test that uncovered subtle
differences on uselongdouble Perl. Using the &#34;%.0f&#34; format instead gives
the same results on all platforms.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-684431" href="/Public/Bug/Display.html?id=50820#txn-684431">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;31&nbsp;02:41:01&nbsp;2009</span>
    <span class="description">frank.l.cox [...] gmail.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.525715</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
