<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #25341 for DateTime: dwim string comparison with scalars</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #25341 for DateTime: dwim string comparison with scalars</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DateTime/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DateTime/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DateTime/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DateTime/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/houseabsolute/DateTime.pm/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/DateTime">DateTime CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">25341</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DateTime/Active/">DateTime</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
krishpl [...] shamu.corp.sgi.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-9734-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.36    </td>
  </tr>
  <tr id="CF-9735-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;08&nbsp;14:06:37&nbsp;2007</span>
    <span class="description">krishpl [...] shamu.corp.sgi.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> string comparison with scalars</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sure would be nice if I could use

my $startdt = DateTime-&gt;now;

if &#40;$startdt lt &#34;200702&#34;&#41; {
  warn &#34;Your clock is *way* off&#34;;
}

Right now, 

if &#40;&#34;$startdt&#34; lt &#34;200702&#34;&#41; {
etc
}

works ok, but it seems that automatically stringifying the DateTime 
object when doing a string compare &#40;[gl][te], eq, ne&#41; against a scalar 
would nearly always be the right thing to do, and is pretty readable 
in straight code.

Thanks for an awesome suite of modules, by the way.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;08&nbsp;14:10:26&nbsp;2007</span>
    <span class="description">krishpl [...] shamu.corp.sgi.com -  Subject changed from &#39;string comparison with scalars&#39; to &#39;dwim string comparison with scalars&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;08&nbsp;18:29:54&nbsp;2007</span>
    <span class="description">krishpl [...] shamu.corp.sgi.com -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;08&nbsp;18:30:29&nbsp;2007</span>
    <span class="description">krishpl [...] shamu.corp.sgi.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Whoops, that should be:

 my $startdt = DateTime-&gt;now;
 
 if &#40;$startdt lt &#34;2007-02&#34;&#41; {
 warn &#34;Your clock is *way* off&#34;;
 }
 
 Right now, 
 
 if &#40;&#34;$startdt&#34; lt &#34;2007-02&#34;&#41; {
 etc
 }
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;10:46:15&nbsp;2007</span>
    <span class="description">DROLSKY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Mar 08 14:06:37 2007, KRISHPL wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sure would be nice if I could use
&gt; 
&gt; my $startdt = DateTime-&gt;now;
&gt; 
&gt; if &#40;$startdt lt &#34;200702&#34;&#41; {
&gt;   warn &#34;Your clock is *way* off&#34;;
&gt; }
</div>
This seems like an obvious feature, but it&#39;s pretty complicated.

First, DateTime.pm does not have a date parser built-in, so we can&#39;t
parse the string. That means that the string would be limited to ISO8601
or some other format that DateTime.pm can output. Second, while this
works pretty simply for dates without times, once you add times you
start wanting to consider time zones, which makes the string more
complicated.

Honestly, I don&#39;t think this feature is worth the trouble, because it
would be fairly limited, and it would fail to DWIM what mean people might M.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;21&nbsp;12:24:18&nbsp;2007</span>
    <span class="description">DROLSKY [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;26&nbsp;14:29:49&nbsp;2007</span>
    <span class="description">krishnoid [...] wapacut.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> krishnoid [...] wapacut.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Mar 15 10:46:15 2007, DROLSKY wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Thu Mar 08 14:06:37 2007, KRISHPL wrote:
<div class="message-stanza open">&gt; &gt; Sure would be nice if I could use
&gt; &gt; 
&gt; &gt; my $startdt = DateTime-&gt;now;
&gt; &gt; 
&gt; &gt; if &#40;$startdt lt &#34;200702&#34;&#41; {
&gt; &gt;   warn &#34;Your clock is *way* off&#34;;
&gt; &gt; }
</div>&gt; 
&gt; First, DateTime.pm does not have a date parser built-in, so we can&#39;t
&gt; parse the string. That means that the string would be limited to ISO8601
&gt; or some other format that DateTime.pm can output. Second, while this
</div>
I meant that when a DateTime object was an operator of a string comparison
&#40;[lg][te] eq ne cmp&#41;, it would stringify the DateTime object, not that the
string operator would try to parse the string as a date.  Anyone who has
tried to print a DateTime object knows that it stringifies by default to
ISO8601 or to whatever the output formatter has been set to, so that seems
pretty unsurprising &#40;in the technical sense&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; works pretty simply for dates without times, once you add times you
&gt; start wanting to consider time zones, which makes the string more
&gt; complicated.
</div>
Yup I believe that.  I think that would be a bad idea too.  Although,
another suggestion would be that DateTime be able to create a DateTime
object from its own default &#40;iso8601&#41; string output format.  This would
provide a sort of self-containment &#40;or mathematical &#39;closure&#39; on the set of
its inputs and outputs&#41;, and wouldn&#39;t give the impression &#34;This module is
willing to stringify to a common format, but not willing to accept that
same format&#34;.  A handy side-effect of that is vastly simplified interchange
between DateTime&lt;--stringify/parse--&gt;iso8601&lt;--select/insert--&gt;databases
With perhaps a single s/ /T/ in one direction or the other.  But this is an
issue for another bug.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Honestly, I don&#39;t think this feature is worth the trouble, because it
&gt; would be fairly limited, and it would fail to DWIM what mean people
</div>might M.

Sure, no problem, I can work around it, but my idea of DWIM was that if a
DateTime stringifies in printf or doublequotes &#40;which is really, really
handy, thanks -- in particular, I can use it directly in SQL server
statements&#41;, that it should stringify when presented to a string comparison
operator.  I&#39;d think a quick addendum to the docs would cover that.

------
The module also overloads stringification to use the iso8601&#40;&#41; method,
which covers explicit string interpolation and string comparisons as well
as other forms of stringification.
------

Thanks for an excellent module.  It&#39;s made some of the work I&#39;m currently
doing simpler, and allows for clearer code with thorough error checking.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;26&nbsp;14:29:50&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;26&nbsp;14:33:15&nbsp;2007</span>
    <span class="description">krishnoid [...] wapacut.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> krishnoid [...] wapacut.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Didn&#39;t mean to reopen this with this comment &#40;RT automatically did that&#41;
-- but hey, while it&#39;s open, maybe you would perhaps reconsider ? :-&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;28&nbsp;13:59:11&nbsp;2007</span>
    <span class="description">DROLSKY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Apr 26 14:29:49 2007, krishnoid@wapacut.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Thu Mar 15 10:46:15 2007, DROLSKY wrote:
<div class="message-stanza open">&gt; &gt; On Thu Mar 08 14:06:37 2007, KRISHPL wrote:
<div class="message-stanza open">&gt; &gt; &gt; Sure would be nice if I could use
&gt; &gt; &gt; 
&gt; &gt; &gt; my $startdt = DateTime-&gt;now;
&gt; &gt; &gt; 
&gt; &gt; &gt; if &#40;$startdt lt &#34;200702&#34;&#41; {
&gt; &gt; &gt;   warn &#34;Your clock is *way* off&#34;;
&gt; &gt; &gt; }
</div>&gt; &gt; 
&gt; &gt; First, DateTime.pm does not have a date parser built-in, so we can&#39;t
&gt; &gt; parse the string. That means that the string would be limited to ISO8601
&gt; &gt; or some other format that DateTime.pm can output. Second, while this
</div>&gt; 
&gt; I meant that when a DateTime object was an operator of a string comparison
&gt; &#40;[lg][te] eq ne cmp&#41;, it would stringify the DateTime object, not that the
&gt; string operator would try to parse the string as a date.  Anyone who has
&gt; tried to print a DateTime object knows that it stringifies by default to
&gt; ISO8601 or to whatever the output formatter has been set to, so that seems
&gt; pretty unsurprising &#40;in the technical sense&#41;.
</div>
I was buying this argument, but then I realized that because of time
zones, this could really be weird. You can&#39;t determine if a datetime is
equal to another datetime by looking at the default stringification
output, since it doesn&#39;t include the time zone.

I&#39;m going to close this ticket. If you&#39;d like to discuss this further,
let&#39;s do so on the datetime@perl.org list.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;28&nbsp;13:59:13&nbsp;2007</span>
    <span class="description">DROLSKY [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
