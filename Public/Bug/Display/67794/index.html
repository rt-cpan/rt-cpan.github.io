<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #67794 for Net-RabbitMQ: installation hangs</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #67794 for Net-RabbitMQ: installation hangs</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Net-RabbitMQ">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Net-RabbitMQ">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Net-RabbitMQ">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Net-RabbitMQ">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-RabbitMQ">Net-RabbitMQ CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">67794</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Net-RabbitMQ">Net-RabbitMQ</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
piotr_poznanski [...] o2.pl

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-230280-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-230281-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Net_RabbitMQ.tests.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/968622/504054/Net_RabbitMQ.tests.patch">
Thu Aug 18 17:49:17 2011 (3.7k) by https://www.google.com/accounts/o8/id?id=AItOawmBzdAImpiWR0tkXY67rVJkSEQX2rY-ERg
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=67794">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-928596" href="/Public/Bug/Display.html?id=67794#txn-928596">#</a>      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;27&nbsp;12:07:53&nbsp;2011</span>
    <span class="description">piotr_poznanski [...] o2.pl -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> installation hangs</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 27 Apr 2011 18:07:18 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-RabbitMQ [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Piotr Poznanski &lt;piotr_poznanski [...] o2.pl&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/928596/481899/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/481899">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 5.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,
I tried it both on ubutnu desktop and server 32bits &#40;running under 
vmware&#41; 10.04 LTS, and I can see that in both cases installation hangs 
on t/002_publish.t &#40;after sometimes 3 or 5 or 6 tests done&#41;

I&#39;m trying to install: &#40;cpan -i&#41; Net-RabbitMQ-0.2.0
perl vesrion: v5.10.1 &#40;*&#41; built for i486-linux-gnu-thread-multi
OS:  server: Linux ubuntu 2.6.32-31-generic #61-Ubuntu SMP Fri Apr 8 
18:24:35 UTC 2011 i686 GNU/Linux
desktop: Linux ubuntu 2.6.32-27-generic #49-Ubuntu SMP Wed Dec 1 
23:52:12 UTC 2010 i686 GNU/Linux

terminal dump - server
poznan@ubuntu:~$ sudo cpan -i Net::RabbitMQ
CPAN: Storable loaded ok &#40;v2.20&#41;
Going to read &#39;/home/poznan/.local/share/.cpan/Metadata&#39;
   Database was generated on Wed, 27 Apr 2011 14:30:52 GMT
Running install for module &#39;Net::RabbitMQ&#39;
CPAN: YAML loaded ok &#40;v0.72&#41;
Running make for J/JE/JESUS/Net-RabbitMQ-0.2.0.tar.gz
CPAN: Digest::SHA loaded ok &#40;v5.47&#41;
CPAN: Compress::Zlib loaded ok &#40;v2.02&#41;
Checksum for 
/home/poznan/.local/share/.cpan/sources/authors/id/J/JE/JESUS/Net-RabbitMQ-0.2.0.tar.gz 
ok
CPAN: Archive::Tar loaded ok &#40;v1.52&#41;
Net-RabbitMQ-0.2.0/
Net-RabbitMQ-0.2.0/amqp.h
Net-RabbitMQ-0.2.0/amqp_api.c
Net-RabbitMQ-0.2.0/amqp_config.h
Net-RabbitMQ-0.2.0/amqp_connection.c
Net-RabbitMQ-0.2.0/amqp_debug.c
Net-RabbitMQ-0.2.0/amqp_framing.c
Net-RabbitMQ-0.2.0/amqp_framing.h
Net-RabbitMQ-0.2.0/amqp_mem.c
Net-RabbitMQ-0.2.0/amqp_private.h
Net-RabbitMQ-0.2.0/amqp_socket.c
Net-RabbitMQ-0.2.0/amqp_table.c
Net-RabbitMQ-0.2.0/Changes
Net-RabbitMQ-0.2.0/LICENSE
Net-RabbitMQ-0.2.0/LICENSE-MPL-RabbitMQ
Net-RabbitMQ-0.2.0/Makefile.PL
Net-RabbitMQ-0.2.0/MANIFEST
Net-RabbitMQ-0.2.0/META.yml
Net-RabbitMQ-0.2.0/RabbitMQ.pm
Net-RabbitMQ-0.2.0/RabbitMQ.xs
Net-RabbitMQ-0.2.0/README
Net-RabbitMQ-0.2.0/t/
Net-RabbitMQ-0.2.0/typemap
Net-RabbitMQ-0.2.0/t/001_declare_exchange.t
Net-RabbitMQ-0.2.0/t/002_publish.t
Net-RabbitMQ-0.2.0/t/003_consume.t
Net-RabbitMQ-0.2.0/t/004_selfconsume.t
Net-RabbitMQ-0.2.0/t/005_noack.t
Net-RabbitMQ-0.2.0/t/006_txn.t
Net-RabbitMQ-0.2.0/t/007_get.t
Net-RabbitMQ-0.2.0/t/008_queue_declare.t
Net-RabbitMQ-0.2.0/t/009_no_route.t
Net-RabbitMQ-0.2.0/t/010_qos.t
Net-RabbitMQ-0.2.0/t/011_hearbeat.t
Net-RabbitMQ-0.2.0/t/012_timeout.t
CPAN: File::Temp loaded ok &#40;v0.22&#41;

   CPAN.pm: Going to build J/JE/JESUS/Net-RabbitMQ-0.2.0.tar.gz

Checking if your kit is complete...
Looks good
Writing Makefile for Net::RabbitMQ
cp RabbitMQ.pm blib/lib/Net/RabbitMQ.pm
/usr/bin/perl /usr/local/share/perl/5.10.1/ExtUtils/xsubpp  -typemap 
/usr/share/perl/5.10/ExtUtils/typemap -typemap typemap  RabbitMQ.xs &gt; 
RabbitMQ.xsc &#38;&#38; mv RabbitMQ.xsc RabbitMQ.c
cc -c   -D_REENTRANT -D_GNU_SOURCE -DDEBIAN -fno-strict-aliasing -pipe 
-fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE 
-D_FILE_OFFSET_BITS=64 -O2 -g   -DVERSION=\&#34;0.2.0\&#34; 
-DXS_VERSION=\&#34;0.2.0\&#34; -fPIC &#34;-I/usr/lib/perl/5.10/CORE&#34;   RabbitMQ.c
cc -c   -D_REENTRANT -D_GNU_SOURCE -DDEBIAN -fno-strict-aliasing -pipe 
-fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE 
-D_FILE_OFFSET_BITS=64 -O2 -g   -DVERSION=\&#34;0.2.0\&#34; 
-DXS_VERSION=\&#34;0.2.0\&#34; -fPIC &#34;-I/usr/lib/perl/5.10/CORE&#34;   amqp_api.c
cc -c   -D_REENTRANT -D_GNU_SOURCE -DDEBIAN -fno-strict-aliasing -pipe 
-fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE 
-D_FILE_OFFSET_BITS=64 -O2 -g   -DVERSION=\&#34;0.2.0\&#34; 
-DXS_VERSION=\&#34;0.2.0\&#34; -fPIC &#34;-I/usr/lib/perl/5.10/CORE&#34;   amqp_connection.c
cc -c   -D_REENTRANT -D_GNU_SOURCE -DDEBIAN -fno-strict-aliasing -pipe 
-fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE 
-D_FILE_OFFSET_BITS=64 -O2 -g   -DVERSION=\&#34;0.2.0\&#34; 
-DXS_VERSION=\&#34;0.2.0\&#34; -fPIC &#34;-I/usr/lib/perl/5.10/CORE&#34;   amqp_debug.c
cc -c   -D_REENTRANT -D_GNU_SOURCE -DDEBIAN -fno-strict-aliasing -pipe 
-fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE 
-D_FILE_OFFSET_BITS=64 -O2 -g   -DVERSION=\&#34;0.2.0\&#34; 
-DXS_VERSION=\&#34;0.2.0\&#34; -fPIC &#34;-I/usr/lib/perl/5.10/CORE&#34;   amqp_framing.c
cc -c   -D_REENTRANT -D_GNU_SOURCE -DDEBIAN -fno-strict-aliasing -pipe 
-fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE 
-D_FILE_OFFSET_BITS=64 -O2 -g   -DVERSION=\&#34;0.2.0\&#34; 
-DXS_VERSION=\&#34;0.2.0\&#34; -fPIC &#34;-I/usr/lib/perl/5.10/CORE&#34;   amqp_mem.c
cc -c   -D_REENTRANT -D_GNU_SOURCE -DDEBIAN -fno-strict-aliasing -pipe 
-fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE 
-D_FILE_OFFSET_BITS=64 -O2 -g   -DVERSION=\&#34;0.2.0\&#34; 
-DXS_VERSION=\&#34;0.2.0\&#34; -fPIC &#34;-I/usr/lib/perl/5.10/CORE&#34;   amqp_socket.c
cc -c   -D_REENTRANT -D_GNU_SOURCE -DDEBIAN -fno-strict-aliasing -pipe 
-fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE 
-D_FILE_OFFSET_BITS=64 -O2 -g   -DVERSION=\&#34;0.2.0\&#34; 
-DXS_VERSION=\&#34;0.2.0\&#34; -fPIC &#34;-I/usr/lib/perl/5.10/CORE&#34;   amqp_table.c
Running Mkbootstrap for Net::RabbitMQ &#40;&#41;
chmod 644 RabbitMQ.bs
rm -f blib/arch/auto/Net/RabbitMQ/RabbitMQ.so
cc  -shared -O2 -g -L/usr/local/lib -fstack-protector RabbitMQ.o 
amqp_api.o amqp_connection.o amqp_debug.o amqp_framing.o amqp_mem.o 
amqp_socket.o amqp_table.o  -o blib/arch/auto/Net/RabbitMQ/RabbitMQ.so     \
              \

chmod 755 blib/arch/auto/Net/RabbitMQ/RabbitMQ.so
cp RabbitMQ.bs blib/arch/auto/Net/RabbitMQ/RabbitMQ.bs
chmod 644 blib/arch/auto/Net/RabbitMQ/RabbitMQ.bs
Manifying blib/man3/Net::RabbitMQ.3pm
   JESUS/Net-RabbitMQ-0.2.0.tar.gz
   /usr/bin/make -- OK
Running make test
PERL_DL_NONLAZY=1 /usr/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34; 
&#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
t/001_declare_exchange.t .. ok
t/002_publish.t ........... 5/8

and hangs here

I have installed 1.7.2-1ubuntu1 version of rabbitmq server
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-948779" href="/Public/Bug/Display.html?id=67794#txn-948779">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;23&nbsp;11:20:48&nbsp;2011</span>
    <span class="description">DWUEPPEL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/948779/493385/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/493385">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 226b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am also having the same issue with the 0.2.0 and 0.1.9 release. I also
have a similar issue with the 003.consume.t test hanging on releases
0.1.7 and 0.1.8. Could this be caused by changes made to rabbitmq in
newer versions?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-948782" href="/Public/Bug/Display.html?id=67794#txn-948782">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;23&nbsp;11:20:50&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-968622" href="/Public/Bug/Display.html?id=67794#txn-968622">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;18&nbsp;17:49:17&nbsp;2011</span>
    <span class="description">https://www.google.com/accounts/o8/id?id=AItOawmBzdAImpiWR0tkXY67rVJkSEQX2rY-ERg -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Aaron Schrab</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/968622/504053/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/504053">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Apr 27 12:07:53 2011, piotr_poznanski@o2.pl wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,
&gt; I tried it both on ubutnu desktop and server 32bits &#40;running under
&gt; vmware&#41; 10.04 LTS, and I can see that in both cases installation hangs
&gt; on t/002_publish.t &#40;after sometimes 3 or 5 or 6 tests done&#41;
&gt; 
&gt; I&#39;m trying to install: &#40;cpan -i&#41; Net-RabbitMQ-0.2.0
&gt; perl vesrion: v5.10.1 &#40;*&#41; built for i486-linux-gnu-thread-multi
&gt; OS:  server: Linux ubuntu 2.6.32-31-generic #61-Ubuntu SMP Fri Apr 8
&gt; 18:24:35 UTC 2011 i686 GNU/Linux
&gt; desktop: Linux ubuntu 2.6.32-27-generic #49-Ubuntu SMP Wed Dec 1
&gt; 23:52:12 UTC 2010 i686 GNU/Linux
</div>
I also had a problem with the installation hanging.  Other tests failed
for me.  I believe that the patch that I&#39;m attaching at least gets the
tests to a state where they can be at least semi-reliable.

Many tests are still using fixed queue names and default to a public
server, these will likely fail if multiple people are running them
against that public server at the same time.  But, this should still be
an improvement.  This problem can be avoided by setting the $MQHOST
environment variable to point to a different RabbitMQ server.

I couldn&#39;t think of a portable way to do the timeout tests, so I just
set those to be skipped.

The changes from this patch are also available as a series of commits in
my github repository:

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/aschrab/perl-Net--RabbitMQ/commits/tests">https://github.com/aschrab/perl-Net--RabbitMQ/commits/tests</a></span>
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Net_RabbitMQ.tests.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/968622/504054/Net_RabbitMQ.tests.patch">Download Net_RabbitMQ.tests.patch</a><br />
<span class="downloadcontenttype">text/x-diff 3.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff --git a/t/002_publish.t b/t/002_publish.t
index a4a098f..fda6d05 100644
--- a/t/002_publish.t
+++ b/t/002_publish.t
@@ -16,7 +16,7 @@ eval { $mq-&gt;queue_declare&#40;1, &#34;nr_test_hole&#34;, { passive =&gt; 0, durable =&gt; 1, exclu
 is&#40;$@, &#39;&#39;, &#34;queue_declare&#34;&#41;;
 eval { $mq-&gt;queue_bind&#40;1, &#34;nr_test_hole&#34;, &#34;nr_test_x&#34;, &#34;nr_test_route&#34;&#41;; };
 is&#40;$@, &#39;&#39;, &#34;queue_bind&#34;&#41;;
-eval { 1 until&#40;$mq-&gt;get&#40;1, &#34;nr_test_hole&#34;&#41;&#41;; };
+eval { 1 while&#40;$mq-&gt;get&#40;1, &#34;nr_test_hole&#34;&#41;&#41;; };
 is&#40;$@, &#39;&#39;, &#34;drain queue&#34;&#41;;
 eval { $mq-&gt;publish&#40;1, &#34;nr_test_route&#34;, &#34;Magic Payload&#34;, 
                        { exchange =&gt; &#34;nr_test_x&#34; },
@@ -28,7 +28,7 @@ eval { $mq-&gt;publish&#40;1, &#34;nr_test_route&#34;, &#34;Magic Payload&#34;,
                         expiration =&gt; &#39;later&#39;,
                         message_id =&gt; &#39;ABC&#39;,
                         type =&gt; &#39;notmytype&#39;,
-                        user_id =&gt; &#39;yoda&#39;,
+                        user_id =&gt; &#39;guest&#39;,
                         app_id =&gt; &#39;idd&#39;,
                         delivery_mode =&gt; 1,
                         priority =&gt; 2,
diff --git a/t/003_consume.t b/t/003_consume.t
index 536ac38..e021962 100644
--- a/t/003_consume.t
+++ b/t/003_consume.t
@@ -35,7 +35,7 @@ is_deeply&#40;$rv,
                 expiration =&gt; &#39;later&#39;,
                 message_id =&gt; &#39;ABC&#39;,
                 type =&gt; &#39;notmytype&#39;,
-                user_id =&gt; &#39;yoda&#39;,
+                user_id =&gt; &#39;guest&#39;,
                 app_id =&gt; &#39;idd&#39;,
                 delivery_mode =&gt; 1,
                 priority =&gt; 2,
diff --git a/t/007_get.t b/t/007_get.t
index 2cb5174..e498c39 100644
--- a/t/007_get.t
+++ b/t/007_get.t
@@ -52,7 +52,7 @@ eval { $mq-&gt;publish&#40;1, &#34;nr_test_q&#34;, &#34;Magic Transient Payload 2&#34;,
                        expiration =&gt; &#39;later&#39;,
                        message_id =&gt; &#39;ABC&#39;,
                        type =&gt; &#39;notmytype&#39;,
-                       user_id =&gt; &#39;yoda&#39;,
+                       user_id =&gt; &#39;guest&#39;,
                        app_id =&gt; &#39;idd&#39;,
                        delivery_mode =&gt; 1,
                        priority =&gt; 2,
@@ -79,7 +79,7 @@ is_deeply&#40;$getr,
                 expiration =&gt; &#39;later&#39;,
                 message_id =&gt; &#39;ABC&#39;,
                 type =&gt; &#39;notmytype&#39;,
-                user_id =&gt; &#39;yoda&#39;,
+                user_id =&gt; &#39;guest&#39;,
                 app_id =&gt; &#39;idd&#39;,
                 delivery_mode =&gt; 1,
                 priority =&gt; 2,
diff --git a/t/011_hearbeat.t b/t/011_hearbeat.t
index 6477ab5..99e9c7d 100644
--- a/t/011_hearbeat.t
+++ b/t/011_hearbeat.t
@@ -1,4 +1,4 @@
-use Test::More tests =&gt; 6;
+use Test::More tests =&gt; 7;
 use strict;
 use Data::Dumper;
 
@@ -9,21 +9,23 @@ use_ok&#40;&#39;Net::RabbitMQ&#39;&#41;;
 my $mq = Net::RabbitMQ-&gt;new&#40;&#41;;
 ok&#40;$mq&#41;;
 
-eval { $mq-&gt;connect&#40;$host, { user =&gt; &#34;guest&#34;, password =&gt; &#34;guest&#34;, heartbeat =&gt; 1 }&#41;; };
+eval { $mq-&gt;connect&#40;$host, { user =&gt; &#34;guest&#34;, password =&gt; &#34;guest&#34;, heartbeat =&gt; 10 }&#41;; };
 is&#40;$@, &#39;&#39;, &#34;connect&#34;&#41;;
 eval { $mq-&gt;channel_open&#40;1&#41;; };
 is&#40;$@, &#39;&#39;, &#34;channel_open&#34;&#41;;
+diag &#34;Sleeping for 5 seconds&#34;;
 sleep&#40;5&#41;;
 eval { $mq-&gt;heartbeat&#40;&#41;; };
 is&#40;$@, &#39;&#39;, &#34;heartbeat&#34;&#41;;
 $mq-&gt;basic_return&#40;sub {
   my &#40;$channel, $m&#41; = @_;
-  print Dumper&#40;\@_&#41;;
+  diag Dumper&#40;\@_&#41;;
 }&#41;;
 my $rv = 0;
 eval { $rv = $mq-&gt;publish&#40;1, &#34;nr_test_q&#34;, &#34;Magic Transient Payload&#34;, { exchange =&gt; &#34;nr_test_x&#34;, &#34;immediate&#34; =&gt; 1, &#34;mandatory&#34; =&gt; 1 }&#41;; };
 is&#40;$rv, 0, &#34;publish&#34;&#41;;
-sleep&#40;1&#41;;
+diag &#34;Sleeping for 30 seconds&#34;;
+sleep&#40;30&#41;;
 eval { $rv = $mq-&gt;publish&#40;1, &#34;nr_test_q&#34;, &#34;Magic Transient Payload&#34;, { exchange =&gt; &#34;nr_test_x&#34;, &#34;immediate&#34; =&gt; 1, &#34;mandatory&#34; =&gt; 1 }&#41;; };
 is&#40;$rv, -1, &#34;publish&#34;&#41;;
 
diff --git a/t/012_timeout.t b/t/012_timeout.t
index 08f23c6..295a78e 100644
--- a/t/012_timeout.t
+++ b/t/012_timeout.t
@@ -1,4 +1,4 @@
-use Test::More tests =&gt; 4;
+use Test::More skip_all =&gt; &#34;No portable way to ensure connection timeout&#34;, tests =&gt; 4;
 use strict;
 use Time::HiRes qw/gettimeofday tv_interval/;
 
</div></div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.33817</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
