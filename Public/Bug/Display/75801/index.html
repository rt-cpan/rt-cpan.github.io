<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #75801 for DBIx-Class-Migration: problems with code in tutorial</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #75801 for DBIx-Class-Migration: problems with code in tutorial</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBIx-Class-Migration/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBIx-Class-Migration/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBIx-Class-Migration/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBIx-Class-Migration/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/jjn1056/DBIx-Class-Migration/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBIx-Class-Migration">DBIx-Class-Migration CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">75801</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBIx-Class-Migration/Active/">DBIx-Class-Migration</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">jjnapiork [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
fs5 [...] sanger.ac.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-242612-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-242613-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;17:18:11&nbsp;2012</span>
    <span class="description">fs5 [...] sanger.ac.uk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> problems with code in tutorial</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 15 Mar 2012 21:17:59 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class-Migration [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Frank Schwach &lt;fs5 [...] sanger.ac.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">installed version of DBIx::Class::Migration: 0.017
perl version 5.8.8

I&#39;m following along with your tutorial and found the following problem:
in DBIx::Class::Migration::Tutorial::FirstMigration

the command

dbic-migration version --schema_class MusicBase::Schema -Ilib

doesn&#39;t work. Error output:

Attribute &#40;dsn&#41; does not pass the type constraint because: Validation 
failed for &#39;Str&#39; with value undef at constructor 
DBIx::Class::Migration::Script::new &#40;defined at 
/software/team131/lib/perl5/DBIx/Class/Migration/Script.pm line 201&#41; line 66
         
DBIx::Class::Migration::Script::new&#40;&#39;DBIx::Class::Migration::Script&#39;, 
&#39;ARGV&#39;, &#39;ARRAY&#40;0x156a060&#41;&#39;, &#39;extra_argv&#39;, &#39;ARRAY&#40;0x19921c0&#41;&#39;, &#39;usage&#39;, 
&#39;Getopt::Long::Descriptive::Usage=HASH&#40;0x1783970&#41;&#39;, &#39;schema_class&#39;, 
&#39;MusicBase::Schema&#39;, &#39;includes&#39;, &#39;ARRAY&#40;0x156a000&#41;&#39;&#41; called at 
/software/team131/lib/perl5/MooseX/Getopt/Basic.pm line 96
         
MooseX::Getopt::Basic::new_with_options&#40;&#39;DBIx::Class::Migration::Script&#39;&#41; called 
at /software/team131/lib/perl5/DBIx/Class/Migration/Script.pm line 192
         
DBIx::Class::Migration::Script::run_with_options&#40;&#39;DBIx::Class::Migration::Script&#39;&#41; 
called at /software/team131/bin/dbic-migration line 4


You have to supply some string value for --dsn to get the output you 
gave in the tutotial.

Likewise, I had to supply a dsn to connect to a local sqlite db and get 
the status and set up the db like this:

dbic-migration --schema_class MusicBase::Schema -Ilib --dsn 
&#34;dbi:SQLite:dbname=share/musicbase-schema.db&#34; status

without that, the same error &#40;undefined dsn&#41; was thrown.

Thanks for looking into this and thanks for providing this module!

Frank




-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;16&nbsp;08:31:48&nbsp;2012</span>
    <span class="description">jjnapiork [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Mar 15 17:18:11 2012, fs5@sanger.ac.uk wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; installed version of DBIx::Class::Migration: 0.017
&gt; perl version 5.8.8
&gt; 
&gt; I&#39;m following along with your tutorial and found the following
&gt; problem:
&gt; in DBIx::Class::Migration::Tutorial::FirstMigration
&gt; 
&gt; the command
&gt; 
&gt; dbic-migration version --schema_class MusicBase::Schema -Ilib
&gt; 
&gt; doesn&#39;t work. Error output:
&gt; 
&gt; Attribute &#40;dsn&#41; does not pass the type constraint because: Validation
&gt; failed for &#39;Str&#39; with value undef at constructor
&gt; DBIx::Class::Migration::Script::new &#40;defined at
&gt; /software/team131/lib/perl5/DBIx/Class/Migration/Script.pm line 201&#41;
&gt; line 66
&gt; 
&gt; DBIx::Class::Migration::Script::new&#40;&#39;DBIx::Class::Migration::Script&#39;,
&gt; &#39;ARGV&#39;, &#39;ARRAY&#40;0x156a060&#41;&#39;, &#39;extra_argv&#39;, &#39;ARRAY&#40;0x19921c0&#41;&#39;, &#39;usage&#39;,
&gt; &#39;Getopt::Long::Descriptive::Usage=HASH&#40;0x1783970&#41;&#39;, &#39;schema_class&#39;,
&gt; &#39;MusicBase::Schema&#39;, &#39;includes&#39;, &#39;ARRAY&#40;0x156a000&#41;&#39;&#41; called at
&gt; /software/team131/lib/perl5/MooseX/Getopt/Basic.pm line 96
&gt; 
&gt; MooseX::Getopt::Basic::new_with_options&#40;&#39;DBIx::Class::Migration::Script&#39;&#41;
&gt; called
&gt; at /software/team131/lib/perl5/DBIx/Class/Migration/Script.pm line 192
&gt; 
&gt; DBIx::Class::Migration::Script::run_with_options&#40;&#39;DBIx::Class::Migration::Script&#39;&#41;
&gt; called at /software/team131/bin/dbic-migration line 4
&gt; 
&gt; 
&gt; You have to supply some string value for --dsn to get the output you
&gt; gave in the tutotial.
&gt; 
&gt; Likewise, I had to supply a dsn to connect to a local sqlite db and
&gt; get
&gt; the status and set up the db like this:
&gt; 
&gt; dbic-migration --schema_class MusicBase::Schema -Ilib --dsn
&gt; &#34;dbi:SQLite:dbname=share/musicbase-schema.db&#34; status
&gt; 
&gt; without that, the same error &#40;undefined dsn&#41; was thrown.
&gt; 
&gt; Thanks for looking into this and thanks for providing this module!
&gt; 
&gt; Frank
&gt; 
&gt; 
&gt; 
</div>
Frank,

I&#39;m wondering if there is some dependency that needs updating somewhere in the dependency 
list.  In my Makefile.PL I don&#39;t specify a lot of minimum version numbers except in the cases 
where I know I need a particular minimum.  What version of Moose are you on?

In theory if you fail to supple the connect string that is the signal that we are using the 
sandbox.  So it might be something in the code that does that detection.

perl -e &#39;use Moose; warn $Moose::VERSION&#39;

or similar.

I will also install Perl 5.8.8 and give it a go.

Thanks for the report!

John


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;16&nbsp;08:31:48&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;16&nbsp;09:04:40&nbsp;2012</span>
    <span class="description">fs5 [...] sanger.ac.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #75801] problems with code in tutorial</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 16 Mar 2012 13:04:18 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class-Migration [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Frank Schwach &lt;fs5 [...] sanger.ac.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi John,

my Moose version is 2.0401

Thanks for looking into this!

Frank



On 16/03/12 12:31, John Napiorkowski via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=75801">https://rt.cpan.org/Ticket/Display.html?id=75801</a></span>&gt;
&gt;
&gt; On Thu Mar 15 17:18:11 2012, fs5@sanger.ac.uk wrote:
<div class="message-stanza open">&gt;&gt; installed version of DBIx::Class::Migration: 0.017
&gt;&gt; perl version 5.8.8
&gt;&gt;
&gt;&gt; I&#39;m following along with your tutorial and found the following
&gt;&gt; problem:
&gt;&gt; in DBIx::Class::Migration::Tutorial::FirstMigration
&gt;&gt;
&gt;&gt; the command
&gt;&gt;
&gt;&gt; dbic-migration version --schema_class MusicBase::Schema -Ilib
&gt;&gt;
&gt;&gt; doesn&#39;t work. Error output:
&gt;&gt;
&gt;&gt; Attribute &#40;dsn&#41; does not pass the type constraint because: Validation
&gt;&gt; failed for &#39;Str&#39; with value undef at constructor
&gt;&gt; DBIx::Class::Migration::Script::new &#40;defined at
&gt;&gt; /software/team131/lib/perl5/DBIx/Class/Migration/Script.pm line 201&#41;
&gt;&gt; line 66
&gt;&gt;
&gt;&gt; DBIx::Class::Migration::Script::new&#40;&#39;DBIx::Class::Migration::Script&#39;,
&gt;&gt; &#39;ARGV&#39;, &#39;ARRAY&#40;0x156a060&#41;&#39;, &#39;extra_argv&#39;, &#39;ARRAY&#40;0x19921c0&#41;&#39;, &#39;usage&#39;,
&gt;&gt; &#39;Getopt::Long::Descriptive::Usage=HASH&#40;0x1783970&#41;&#39;, &#39;schema_class&#39;,
&gt;&gt; &#39;MusicBase::Schema&#39;, &#39;includes&#39;, &#39;ARRAY&#40;0x156a000&#41;&#39;&#41; called at
&gt;&gt; /software/team131/lib/perl5/MooseX/Getopt/Basic.pm line 96
&gt;&gt;
&gt;&gt; MooseX::Getopt::Basic::new_with_options&#40;&#39;DBIx::Class::Migration::Script&#39;&#41;
&gt;&gt; called
&gt;&gt; at /software/team131/lib/perl5/DBIx/Class/Migration/Script.pm line 192
&gt;&gt;
&gt;&gt; DBIx::Class::Migration::Script::run_with_options&#40;&#39;DBIx::Class::Migration::Script&#39;&#41;
&gt;&gt; called at /software/team131/bin/dbic-migration line 4
&gt;&gt;
&gt;&gt;
&gt;&gt; You have to supply some string value for --dsn to get the output you
&gt;&gt; gave in the tutotial.
&gt;&gt;
&gt;&gt; Likewise, I had to supply a dsn to connect to a local sqlite db and
&gt;&gt; get
&gt;&gt; the status and set up the db like this:
&gt;&gt;
&gt;&gt; dbic-migration --schema_class MusicBase::Schema -Ilib --dsn
&gt;&gt; &#34;dbi:SQLite:dbname=share/musicbase-schema.db&#34; status
&gt;&gt;
&gt;&gt; without that, the same error &#40;undefined dsn&#41; was thrown.
&gt;&gt;
&gt;&gt; Thanks for looking into this and thanks for providing this module!
&gt;&gt;
&gt;&gt; Frank
&gt;&gt;
&gt;&gt;
&gt;&gt;
</div>&gt; Frank,
&gt;
&gt; I&#39;m wondering if there is some dependency that needs updating somewhere in the dependency
&gt; list.  In my Makefile.PL I don&#39;t specify a lot of minimum version numbers except in the cases
&gt; where I know I need a particular minimum.  What version of Moose are you on?
&gt;
&gt; In theory if you fail to supple the connect string that is the signal that we are using the
&gt; sandbox.  So it might be something in the code that does that detection.
&gt;
&gt; perl -e &#39;use Moose; warn $Moose::VERSION&#39;
&gt;
&gt; or similar.
&gt;
&gt; I will also install Perl 5.8.8 and give it a go.
&gt;
&gt; Thanks for the report!
&gt;
&gt; John
&gt;
&gt;
&gt;
&gt;
</div>

-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;29&nbsp;10:20:47&nbsp;2012</span>
    <span class="description">jjnapiork [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Frank,

I upped the version requirements in the newest versions and wondering if you have  bit of time  
to check if that helped?  Usually I try to not specify too many hard version requirements since I 
don&#39;t want to force people to install so much, but I figure there&#39;s got to be bugs floating 
around.

If you still have it I wonder if I could ask you to consider upgrading each dependency in the list 
&#40;there&#39;s not so many&#41; and seeing if anything fixes the problem.  Is a bit of a bugger since I can&#39;t 
replicate it, and I tend to build a clean local-lib for each project and of course that means I 
usually have the latest everything.

The thing that is strange is if you look at the code you can see &#39;dsn&#39; is not required and would 
only get a value via MooseX::GetOpt or MooseX::Attribute::ENV, and I did notice some weird 
compatibility issues with MXA:ENV and MX:Getopt so it is possible if you have older versions of 
either / or that could be it.  I do specify the newest version of MXA:ENV but I don&#39;t specify a 
lower limit on MX:Getopt, so that might be something to try upgrading and see if it solves it.  If 
so let me know and I will up the required lower limited in my Makefile.PL

Thanks if you have time to try any of this!

John

On Fri Mar 16 09:04:40 2012, fs5@sanger.ac.uk wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi John,
&gt; 
&gt; my Moose version is 2.0401
&gt; 
&gt; Thanks for looking into this!
&gt; 
&gt; Frank
&gt; 
&gt; 
&gt; 
&gt; On 16/03/12 12:31, John Napiorkowski via RT wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=75801">https://rt.cpan.org/Ticket/Display.html?id=75801</a></span>&gt;
&gt; &gt;
&gt; &gt; On Thu Mar 15 17:18:11 2012, fs5@sanger.ac.uk wrote:
<div class="message-stanza open">&gt; &gt;&gt; installed version of DBIx::Class::Migration: 0.017
&gt; &gt;&gt; perl version 5.8.8
&gt; &gt;&gt;
&gt; &gt;&gt; I&#39;m following along with your tutorial and found the following
&gt; &gt;&gt; problem:
&gt; &gt;&gt; in DBIx::Class::Migration::Tutorial::FirstMigration
&gt; &gt;&gt;
&gt; &gt;&gt; the command
&gt; &gt;&gt;
&gt; &gt;&gt; dbic-migration version --schema_class MusicBase::Schema -Ilib
&gt; &gt;&gt;
&gt; &gt;&gt; doesn&#39;t work. Error output:
&gt; &gt;&gt;
&gt; &gt;&gt; Attribute &#40;dsn&#41; does not pass the type constraint because:
</div></div>&gt; Validation
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; failed for &#39;Str&#39; with value undef at constructor
&gt; &gt;&gt; DBIx::Class::Migration::Script::new &#40;defined at
&gt; &gt;&gt; /software/team131/lib/perl5/DBIx/Class/Migration/Script.pm line
</div></div>&gt; 201&#41;
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; line 66
&gt; &gt;&gt;
&gt; &gt;&gt;
</div></div>&gt; DBIx::Class::Migration::Script::new&#40;&#39;DBIx::Class::Migration::Script&#39;,
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; &#39;ARGV&#39;, &#39;ARRAY&#40;0x156a060&#41;&#39;, &#39;extra_argv&#39;, &#39;ARRAY&#40;0x19921c0&#41;&#39;,
</div></div>&gt; &#39;usage&#39;,
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; &#39;Getopt::Long::Descriptive::Usage=HASH&#40;0x1783970&#41;&#39;, &#39;schema_class&#39;,
&gt; &gt;&gt; &#39;MusicBase::Schema&#39;, &#39;includes&#39;, &#39;ARRAY&#40;0x156a000&#41;&#39;&#41; called at
&gt; &gt;&gt; /software/team131/lib/perl5/MooseX/Getopt/Basic.pm line 96
&gt; &gt;&gt;
&gt; &gt;&gt;
</div></div>&gt; MooseX::Getopt::Basic::new_with_options&#40;&#39;DBIx::Class::Migration::Script&#39;&#41;
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; called
&gt; &gt;&gt; at /software/team131/lib/perl5/DBIx/Class/Migration/Script.pm line
</div></div>&gt; 192
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt;
&gt; &gt;&gt;
</div></div>&gt; DBIx::Class::Migration::Script::run_with_options&#40;&#39;DBIx::Class::Migration::Script&#39;&#41;
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; called at /software/team131/bin/dbic-migration line 4
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; You have to supply some string value for --dsn to get the output
</div></div>&gt; you
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; gave in the tutotial.
&gt; &gt;&gt;
&gt; &gt;&gt; Likewise, I had to supply a dsn to connect to a local sqlite db and
&gt; &gt;&gt; get
&gt; &gt;&gt; the status and set up the db like this:
&gt; &gt;&gt;
&gt; &gt;&gt; dbic-migration --schema_class MusicBase::Schema -Ilib --dsn
&gt; &gt;&gt; &#34;dbi:SQLite:dbname=share/musicbase-schema.db&#34; status
&gt; &gt;&gt;
&gt; &gt;&gt; without that, the same error &#40;undefined dsn&#41; was thrown.
&gt; &gt;&gt;
&gt; &gt;&gt; Thanks for looking into this and thanks for providing this module!
&gt; &gt;&gt;
&gt; &gt;&gt; Frank
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt;
</div>&gt; &gt; Frank,
&gt; &gt;
&gt; &gt; I&#39;m wondering if there is some dependency that needs updating
</div>&gt; somewhere in the dependency
<div class="message-stanza open">&gt; &gt; list.  In my Makefile.PL I don&#39;t specify a lot of minimum version
</div>&gt; numbers except in the cases
<div class="message-stanza open">&gt; &gt; where I know I need a particular minimum.  What version of Moose are
</div>&gt; you on?
<div class="message-stanza open">&gt; &gt;
&gt; &gt; In theory if you fail to supple the connect string that is the
</div>&gt; signal that we are using the
<div class="message-stanza open">&gt; &gt; sandbox.  So it might be something in the code that does that
</div>&gt; detection.
<div class="message-stanza open">&gt; &gt;
&gt; &gt; perl -e &#39;use Moose; warn $Moose::VERSION&#39;
&gt; &gt;
&gt; &gt; or similar.
&gt; &gt;
&gt; &gt; I will also install Perl 5.8.8 and give it a go.
&gt; &gt;
&gt; &gt; Thanks for the report!
&gt; &gt;
&gt; &gt; John
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;29&nbsp;10:20:49&nbsp;2012</span>
    <span class="description">jjnapiork [...] cpan.org -  Given to JJNAPIORK</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;04&nbsp;09:52:28&nbsp;2012</span>
    <span class="description">fs5 [...] sanger.ac.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #75801] problems with code in tutorial</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 04 Apr 2012 14:52:16 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class-Migration [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Frank Schwach &lt;fs5 [...] sanger.ac.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi John,

I&#39;m sorry - it seems that I forgot to answer your email! Thanks a lot 
for looking into this problem. It does work for me now as advertised 
&#40;without needing to specify the dsn&#41; but I&#39;m afraid I had already 
updated everything before I had your email, so I can&#39;t tell you which 
dependency &#40;version&#41; was causing the problem. I guess it must be 
something with MXA::ENV or MX::Getopt as you say but I can&#39;t really 
check anymore now. Sorry.

Cheers,

Frank





-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;02&nbsp;10:49:37&nbsp;2012</span>
    <span class="description">jjnapiork [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I guess I need to see if I can figure out what needs to be marked higher in the dist.ini, I&#39;ll just up 
a few things that I think are likely issues for now

thanks!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;02&nbsp;10:49:37&nbsp;2012</span>
    <span class="description">jjnapiork [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
