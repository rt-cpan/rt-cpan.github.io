<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #50017 for libnet: WIN to MAINFRAME ftp bug</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #50017 for libnet: WIN to MAINFRAME ftp bug</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/libnet/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/libnet/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/libnet/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/libnet/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/libnet">libnet CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">50017</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/libnet/Active/">libnet</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
BLis [...] Jefferies.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-18284-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-18285-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;25&nbsp;09:19:28&nbsp;2009</span>
    <span class="description">BLis [...] Jefferies.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> WIN to MAINFRAME ftp bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 25 Sep 2009 09:18:10 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libnet [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Bruce Lis &lt;BLis [...] Jefferies.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<img alt="&#40;untitled&#41;" title="&#40;untitled&#41;" src="/Ticket/Attachment/668812/343592/" /></div>
</div>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Please advise on the following issue

I have problem running NET:FTP on win32/ windows xp platform with perl v 
5.8, using Eclipse 3.3.1.1. The ftp works only for 301 LRECL records that 
are ftp&#39;d to mainframe OS/390. Starting from 302 bytes mainframe data set 
has spaces.
Please advise
 
my $ARGS=&#34;quote SITE RECFM=FB LRECL=302 BLKSIZE=27784 CYL PRI=10 SEC=1&#34;;

my $ftp=Net::FTP-&gt;new&#40;$MAINFRAME,Timeout=&gt;1800,Debug=&gt;1&#41;;
$ftp-&gt;login&#40;$MVSUSER,$MVSPASS&#41;;
$ftp-&gt;ascii;
ftp-&gt;pasv&#40;&#41;;
$ftp-&gt;site&#40;$ARGS&#41;;
$ftp-&gt;put&#40;$DATAFILE,&#34;&#39;USER.TEST&#39;&#34;&#41;; 
$ftp-&gt;quit;

Last space  &#40;to the right&#41; in position 392 of USER.TEST data set is space. 
It&#39;s space for all records in the file. 



This is a value of &#39;0&#39; on the local file residing on PC that ftp&#39;d to 
mainframe
 
                               392
                                 | 
 000000000000110375AQ5 
Regards,

Bruce Lis
Global Operations Technology
work. 201-761-7645





Jefferies archives and monitors outgoing and incoming e-mail. The contents of this email, including any attachments, are confidential to the ordinary user of the email address to which it was addressed. If you are not the addressee of this email you may not copy, forward, disclose or otherwise use it or any part of it in any form whatsoever. This email may be produced at the request of regulators or in connection with civil litigation. Jefferies accepts no liability for any errors or omissions arising as a result of transmission. Use by other than intended recipients is prohibited.  In the United Kingdom, Jefferies operates as Jefferies International Limited; registered in England: no. 1978621; registered office: Vintners Place, 68 Upper Thames Street, London EC4V 3BJ.  Jefferies International Limited is authorised and regulated by the Financial Services Authority.
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;25&nbsp;10:11:48&nbsp;2009</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #50017] WIN to MAINFRAME ftp bug </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 25 Sep 2009 09:11:22 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libnet [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Sep 25, 2009, at 8:19 AM, Bruce Lis via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have problem running NET:FTP on win32/ windows xp platform with  
&gt; perl v
&gt; 5.8, using Eclipse 3.3.1.1. The ftp works only for 301 LRECL records  
&gt; that
&gt; are ftp&#39;d to mainframe OS/390. Starting from 302 bytes mainframe  
&gt; data set
&gt; has spaces.
&gt; Please advise
</div>
I have no experience with a mainframe running OS/390

I see you have Debug turned on, but you did not include it with the  
ticket.

Also, do you happen to have a debug trace form using another ftp  
client. Do you have a command line ftp client available that can  
output a protocol trace.

Are you sure that ascii is the correct transfer method ?

Graham.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;25&nbsp;10:11:50&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;25&nbsp;10:49:41&nbsp;2009</span>
    <span class="description">BLis [...] Jefferies.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #50017] WIN to MAINFRAME ftp bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 25 Sep 2009 10:49:01 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libnet [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Bruce Lis &lt;BLis [...] Jefferies.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Graham,

This is the trace for the process. The problem is not on the mainframe 
since  all other data &#40;first 301bytes&#41; was correctly translated using 
Ascii and represented on the mainframe. 


Net::FTP&gt;&gt;&gt; Net::FTP&#40;2.77&#41;
Net::FTP&gt;&gt;&gt;   Exporter&#40;5.60&#41;
Net::FTP&gt;&gt;&gt;   Net::Cmd&#40;2.27&#41;
Net::FTP&gt;&gt;&gt;   IO::Socket::INET&#40;1.31&#41;
Net::FTP&gt;&gt;&gt;     IO::Socket&#40;1.30&#41;
Net::FTP&gt;&gt;&gt;       IO::Handle&#40;1.27&#41;
Net::FTP=GLOB&#40;0x1836038&#41;&lt;&lt;&lt; 220-FTPDJ1 IBM FTP CS V1R8 at NETTCPJ, 
14:30:10 on 2009-09-25.
Net::FTP=GLOB&#40;0x1836038&#41;&lt;&lt;&lt; 220 Connection will close if idle for more 
than 5 minutes.
Net::FTP=GLOB&#40;0x1836038&#41;&gt;&gt;&gt; USER JFBLL

Net::FTP=GLOB&#40;0x1836038&#41;&lt;&lt;&lt; 331 Send password please.
Net::FTP=GLOB&#40;0x1836038&#41;&gt;&gt;&gt; PASS ....
Net::FTP=GLOB&#40;0x1836038&#41;&lt;&lt;&lt; 230 XXXXX is logged on.  Working directory is 
&#34;XXXXX.&#34;.
Net::FTP=GLOB&#40;0x1836038&#41;&gt;&gt;&gt; TYPE A

Net::FTP=GLOB&#40;0x1836038&#41;&lt;&lt;&lt; 200 Representation type is Ascii NonPrint
Net::FTP=GLOB&#40;0x1836038&#41;&gt;&gt;&gt; SITE quote RECFM=FB LRECL=302 BLKSIZE=27784 
CYL PRI=10 SEC=1

Net::FTP=GLOB&#40;0x1836038&#41;&lt;&lt;&lt; 200 SITE command was accepted
Net::FTP=GLOB&#40;0x1836038&#41;&gt;&gt;&gt; ALLO 101248

Net::FTP=GLOB&#40;0x1836038&#41;&lt;&lt;&lt; 202 ALLO not necessary, you may proceed
Net::FTP=GLOB&#40;0x1836038&#41;&gt;&gt;&gt; PASV

Net::FTP=GLOB&#40;0x1836038&#41;&lt;&lt;&lt; 227 Entering Passive Mode &#40;149,83,3,21,15,122&#41;
Net::FTP=GLOB&#40;0x1836038&#41;&gt;&gt;&gt; STOR &#39;USER.TEST&#39;

Net::FTP=GLOB&#40;0x1836038&#41;&lt;&lt;&lt; 125 Storing data set USER.TEST
Net::FTP=GLOB&#40;0x1836038&#41;&lt;&lt;&lt; 250 Transfer completed successfully.
Net::FTP=GLOB&#40;0x1836038&#41;&gt;&gt;&gt; QUIT

Net::FTP=GLOB&#40;0x1836038&#41;&lt;&lt;&lt; 221 Quit command received. Goodbye.

The last byte on mainframe has value of  space 
 
        -9----+----0---
       **************
 
 
  00000000000

This is NET:FTP problem since I was able to transfer the same data using 
from DOS prompt and it&#39;s looks good on the mainframe 


F:\&gt;ftp
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">ftp&gt; open 111.11.1.11
</div>Connected to 111.11.1.11.
220-FTPDJ1 IBM FTP CS V1R8 at NETTCPJ, 14:41:14 on 2009-09-
220 Connection will close if idle for more than 5 minutes.
User &#40;111.11.1.11:&#40;none&#41;&#41;: xxxxxl
331 Send password please.
Password:
230 xxxxx is logged on.  Working directory is &#34;xxxxx.&#34;.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">ftp&gt; put test &#39;user.test&#39;
</div>200 Port request OK.
125 Storing data set USER.TEST
250 Transfer completed &#40;data was truncated&#41;
ftp: 132201 bytes sent in 0.25Seconds 528.80Kbytes/sec.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">ftp&gt;
</div>
The last byte on mainframe has value of &#39;0&#39; 
 
       -9----+----0---
      **************
 
 
  000000000000

Regards,

Bruce Lis
Global Operations Technology
work. 201-761-7645






&#34;Graham Barr via RT&#34; &lt;bug-libnet@rt.cpan.org&gt; 
09/25/2009 10:11 AM
Please respond to
bug-libnet@rt.cpan.org


To
BLis@Jefferies.com
cc

Subject
Re: [rt.cpan.org #50017] WIN to MAINFRAME ftp bug






&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=50017">http://rt.cpan.org/Ticket/Display.html?id=50017</a></span> &gt;


On Sep 25, 2009, at 8:19 AM, Bruce Lis via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have problem running NET:FTP on win32/ windows xp platform with 
&gt; perl v
&gt; 5.8, using Eclipse 3.3.1.1. The ftp works only for 301 LRECL records 
&gt; that
&gt; are ftp&#39;d to mainframe OS/390. Starting from 302 bytes mainframe 
&gt; data set
&gt; has spaces.
&gt; Please advise
</div>
I have no experience with a mainframe running OS/390

I see you have Debug turned on, but you did not include it with the 
ticket.

Also, do you happen to have a debug trace form using another ftp 
client. Do you have a command line ftp client available that can 
output a protocol trace.

Are you sure that ascii is the correct transfer method ?

Graham.








Jefferies archives and monitors outgoing and incoming e-mail. The contents of this email, including any attachments, are confidential to the ordinary user of the email address to which it was addressed. If you are not the addressee of this email you may not copy, forward, disclose or otherwise use it or any part of it in any form whatsoever. This email may be produced at the request of regulators or in connection with civil litigation. Jefferies accepts no liability for any errors or omissions arising as a result of transmission. Use by other than intended recipients is prohibited.  In the United Kingdom, Jefferies operates as Jefferies International Limited; registered in England: no. 1978621; registered office: Vintners Place, 68 Upper Thames Street, London EC4V 3BJ.  Jefferies International Limited is authorised and regulated by the Financial Services Authority.
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;25&nbsp;11:52:51&nbsp;2009</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #50017] WIN to MAINFRAME ftp bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 25 Sep 2009 10:52:22 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libnet [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Bruce,

I never suggested it was a mainframe issue, just that I am not  
familiar with the mainframe at all.

Looking at your DOS trace, I do not see any call to set the transfer  
in ascii mode or the site command that you are sending with Net::FTP,  
so these two are not comparable.

ie, what happens if you do the ascii and site commands from dos and  
what happens if you do not do those commands with Net::FTP

Graham.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;25&nbsp;12:21:34&nbsp;2009</span>
    <span class="description">BLis [...] Jefferies.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #50017] WIN to MAINFRAME ftp bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 25 Sep 2009 12:21:05 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libnet [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Bruce Lis &lt;BLis [...] Jefferies.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Graham,

File looks good by using DOS ftp  with &#34;ascii&#34; and &#34;site&#34; commands


F:\&gt;ftp

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">ftp&gt; open 111.11.1.11
</div>Connected to 111.11.1.11.
220-FTPDJ1 IBM FTP CS V1R8 at NETTCPJ, 16:10:36 on 2009-09-25.
220 Connection will close if idle for more than 5 minutes.
User &#40;111.11.1.11:&#40;none&#41;&#41;: jfbll
331 Send password please.
Password:
230 XXXXX is logged on.  Working directory is &#34;XXXXX.&#34;.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">ftp&gt; ascii
</div>200 Representation type is Ascii NonPrint
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">ftp&gt;  quote SITE RECFM=FB LRECL=302 BLKSIZE=27784 CYL PRI=10 SEC=1
</div>200 SITE command was accepted
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">ftp&gt; put test  &#39;user.test&#39;
</div>200 Port request OK.
125 Storing data set USER.TEST
250 Transfer completed &#40;data was truncated&#41;
ftp: 132201 bytes sent in 2.25Seconds 58.78Kbytes/sec.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">ftp&gt;
</div>
Regards,

Bruce Lis
Global Operations Technology
work. 201-761-7645






&#34;Graham Barr via RT&#34; &lt;bug-libnet@rt.cpan.org&gt; 
09/25/2009 11:52 AM
Please respond to
bug-libnet@rt.cpan.org


To
BLis@Jefferies.com
cc

Subject
Re: [rt.cpan.org #50017] WIN to MAINFRAME ftp bug






&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=50017">http://rt.cpan.org/Ticket/Display.html?id=50017</a></span> &gt;

Bruce,

I never suggested it was a mainframe issue, just that I am not 
familiar with the mainframe at all.

Looking at your DOS trace, I do not see any call to set the transfer 
in ascii mode or the site command that you are sending with Net::FTP, 
so these two are not comparable.

ie, what happens if you do the ascii and site commands from dos and 
what happens if you do not do those commands with Net::FTP

Graham.








Jefferies archives and monitors outgoing and incoming e-mail. The contents of this email, including any attachments, are confidential to the ordinary user of the email address to which it was addressed. If you are not the addressee of this email you may not copy, forward, disclose or otherwise use it or any part of it in any form whatsoever. This email may be produced at the request of regulators or in connection with civil litigation. Jefferies accepts no liability for any errors or omissions arising as a result of transmission. Use by other than intended recipients is prohibited.  In the United Kingdom, Jefferies operates as Jefferies International Limited; registered in England: no. 1978621; registered office: Vintners Place, 68 Upper Thames Street, London EC4V 3BJ.  Jefferies International Limited is authorised and regulated by the Financial Services Authority.
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;25&nbsp;13:15:19&nbsp;2009</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #50017] WIN to MAINFRAME ftp bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 25 Sep 2009 12:14:51 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libnet [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Bruce, Thanks for sending that trace.

Sorry for all these requests, but I am just trying to determine what  
is happening differently

What is intriguing me is that Net::FTP sent the command

ALLO 101248

but the command line reported

ftp: 132201 bytes sent

so I am guessing that the file locally does not have \r\n line endings  
as Net::FTP would have used stat to determine local file size.

Is there any chance you can send me the file &#40;directly not via RT&#41; and/ 
or maybe reproduce the issue with a smaller file. Say one about 8k

Graham.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;28&nbsp;14:54:13&nbsp;2009</span>
    <span class="description">BLis [...] Jefferies.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #50017] WIN to MAINFRAME ftp bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 28 Sep 2009 14:53:42 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libnet [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Bruce Lis &lt;BLis [...] Jefferies.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Graham,

Please find attached the file that you requested




Regards,

Bruce Lis
Global Operations Technology
work. 201-761-7645






&#34;Graham Barr via RT&#34; &lt;bug-libnet@rt.cpan.org&gt; 
09/25/2009 01:15 PM
Please respond to
bug-libnet@rt.cpan.org


To
BLis@Jefferies.com
cc

Subject
Re: [rt.cpan.org #50017] WIN to MAINFRAME ftp bug






&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=50017">https://rt.cpan.org/Ticket/Display.html?id=50017</a></span> &gt;

Hi Bruce, Thanks for sending that trace.

Sorry for all these requests, but I am just trying to determine what 
is happening differently

What is intriguing me is that Net::FTP sent the command

ALLO 101248

but the command line reported

ftp: 132201 bytes sent

so I am guessing that the file locally does not have \r\n line endings 
as Net::FTP would have used stat to determine local file size.

Is there any chance you can send me the file &#40;directly not via RT&#41; and/ 
or maybe reproduce the issue with a smaller file. Say one about 8k

Graham.








Jefferies archives and monitors outgoing and incoming e-mail. The contents of this email, including any attachments, are confidential to the ordinary user of the email address to which it was addressed. If you are not the addressee of this email you may not copy, forward, disclose or otherwise use it or any part of it in any form whatsoever. This email may be produced at the request of regulators or in connection with civil litigation. Jefferies accepts no liability for any errors or omissions arising as a result of transmission. Use by other than intended recipients is prohibited.  In the United Kingdom, Jefferies operates as Jefferies International Limited; registered in England: no. 1978621; registered office: Vintners Place, 68 Upper Thames Street, London EC4V 3BJ.  Jefferies International Limited is authorised and regulated by the Financial Services Authority.
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;28&nbsp;15:04:38&nbsp;2009</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #50017] WIN to MAINFRAME ftp bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 28 Sep 2009 14:04:07 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libnet [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The file you sent looks very small, probably only one record. My  
suggestion was for a file with several records, say about 30 records.  
Although you say it goes wrong after the first record so maybe fewer  
will do.

Can you also send me the Net::FTP debug trace and the ftp command line  
trace for the smaller file and confirm that the smaller file does have  
the same issue on the mainframe

Another test, if you have access to such machines, would be to do the  
transfer to a unix box and compare the cmdline and Net::FTP  
transferred files on the unix box.

Graham.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;29&nbsp;10:32:36&nbsp;2009</span>
    <span class="description">BLis [...] Jefferies.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #50017] WIN to MAINFRAME ftp bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 29 Sep 2009 10:32:05 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libnet [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Bruce Lis &lt;BLis [...] Jefferies.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Graham,

This file with one record has the same problem as the large file.


Net::FTP&gt;&gt;&gt; Net::FTP&#40;2.77&#41;
Net::FTP&gt;&gt;&gt;   Exporter&#40;5.60&#41;
Net::FTP&gt;&gt;&gt;   Net::Cmd&#40;2.27&#41;
Net::FTP&gt;&gt;&gt;   IO::Socket::INET&#40;1.31&#41;
Net::FTP&gt;&gt;&gt;     IO::Socket&#40;1.30&#41;
Net::FTP&gt;&gt;&gt;       IO::Handle&#40;1.27&#41;
Net::FTP=GLOB&#40;0x18be728&#41;&lt;&lt;&lt; 220-FTPDJ1 IBM FTP CS V1R8 at NETTCPJ, 
19:08:48 on 2009-09-28.
Net::FTP=GLOB&#40;0x18be728&#41;&lt;&lt;&lt; 220 Connection will close if idle for more 
than 5 minutes.
Net::FTP=GLOB&#40;0x18be728&#41;&gt;&gt;&gt; USER XXXXX

Net::FTP=GLOB&#40;0x18be728&#41;&lt;&lt;&lt; 331 Send password please.
Net::FTP=GLOB&#40;0x18be728&#41;&gt;&gt;&gt; PASS ....
Net::FTP=GLOB&#40;0x18be728&#41;&lt;&lt;&lt; 230 XXXXX is logged on.  Working directory is 
&#34;XXXXX.&#34;.
Net::FTP=GLOB&#40;0x18be728&#41;&gt;&gt;&gt; TYPE A

Net::FTP=GLOB&#40;0x18be728&#41;&lt;&lt;&lt; 200 Representation type is Ascii NonPrint
Net::FTP=GLOB&#40;0x18be728&#41;&gt;&gt;&gt; SITE quote RECFM=FB LRECL=302 BLKSIZE=27784 
CYL PRI=10 SEC=1

Net::FTP=GLOB&#40;0x18be728&#41;&lt;&lt;&lt; 200 SITE command was accepted
Net::FTP=GLOB&#40;0x18be728&#41;&gt;&gt;&gt; ALLO 306

Net::FTP=GLOB&#40;0x18be728&#41;&lt;&lt;&lt; 202 ALLO not necessary, you may proceed
Net::FTP=GLOB&#40;0x18be728&#41;&gt;&gt;&gt; PASV

Net::FTP=GLOB&#40;0x18be728&#41;&lt;&lt;&lt; 227 Entering Passive Mode &#40;149,83,3,21,8,236&#41;
Net::FTP=GLOB&#40;0x18be728&#41;&gt;&gt;&gt; STOR &#39;TEST.FILE&#39;

Net::FTP=GLOB&#40;0x18be728&#41;&lt;&lt;&lt; 125 Storing data set TEST.FILE
Net::FTP=GLOB&#40;0x18be728&#41;&lt;&lt;&lt; 250 Transfer completed successfully.
Net::FTP=GLOB&#40;0x18be728&#41;&gt;&gt;&gt; QUIT

Net::FTP=GLOB&#40;0x18be728&#41;&lt;&lt;&lt; 221 Quit command received. Goodbye.

UNIX ftp has the same problem when going from windows to unix. When I am 
going from UNIX to Mainframe&#40;NET:FTP&#41; I have no problem, all 302 bytes are 
sent.

Net::FTP&gt;&gt;&gt; Net::FTP&#40;2.77&#41;
Net::FTP&gt;&gt;&gt;   Exporter&#40;5.60&#41;
Net::FTP&gt;&gt;&gt;   Net::Cmd&#40;2.27&#41;
Net::FTP&gt;&gt;&gt;   IO::Socket::INET&#40;1.31&#41;
Net::FTP&gt;&gt;&gt;     IO::Socket&#40;1.30&#41;
Net::FTP&gt;&gt;&gt;       IO::Handle&#40;1.27&#41;
Net::FTP=GLOB&#40;0x18be850&#41;&lt;&lt;&lt; 220 clearingdev FTP server ready.
Net::FTP=GLOB&#40;0x18be850&#41;&gt;&gt;&gt; USER blis

Net::FTP=GLOB&#40;0x18be850&#41;&lt;&lt;&lt; 331 Password required for blis.
Net::FTP=GLOB&#40;0x18be850&#41;&gt;&gt;&gt; PASS ....
Net::FTP=GLOB&#40;0x18be850&#41;&lt;&lt;&lt; 230 User XXXXX logged in.
Net::FTP=GLOB&#40;0x18be850&#41;&gt;&gt;&gt; TYPE A

Net::FTP=GLOB&#40;0x18be850&#41;&lt;&lt;&lt; 200 Type set to A.
Net::FTP=GLOB&#40;0x18be850&#41;&gt;&gt;&gt; ALLO 306

Net::FTP=GLOB&#40;0x18be850&#41;&lt;&lt;&lt; 202 ALLO command ignored.
Net::FTP=GLOB&#40;0x18be850&#41;&gt;&gt;&gt; PASV

Net::FTP=GLOB&#40;0x18be850&#41;&lt;&lt;&lt; 227 Entering Passive Mode 
&#40;169,196,22,23,16,199&#41;
Net::FTP=GLOB&#40;0x18be850&#41;&gt;&gt;&gt; STOR unix.test

Net::FTP=GLOB&#40;0x18be850&#41;&lt;&lt;&lt; 150 Opening ASCII mode data connection for 
unix.test.
Net::FTP=GLOB&#40;0x18be850&#41;&lt;&lt;&lt; 226-WARNING! 1 bare linefeeds received in 
ASCII mode
Net::FTP=GLOB&#40;0x18be850&#41;&lt;&lt;&lt;    File may not have transferred correctly.
Net::FTP=GLOB&#40;0x18be850&#41;&lt;&lt;&lt; 226 Transfer complete.
Net::FTP=GLOB&#40;0x18be850&#41;&gt;&gt;&gt; QUIT

Net::FTP=GLOB&#40;0x18be850&#41;&lt;&lt;&lt; 221-You have transferred 304 bytes in 1 files.
Net::FTP=GLOB&#40;0x18be850&#41;&lt;&lt;&lt; 221-Total traffic for this session was 770 
bytes in 1 transfers.
Net::FTP=GLOB&#40;0x18be850&#41;&lt;&lt;&lt; 221-Thank you for using the FTP service on 
clearingdev.
Net::FTP=GLOB&#40;0x18be850&#41;&lt;&lt;&lt; 221 Goodbye.

Regards,

Bruce Lis
Global Operations Technology
work. 201-761-7645






&#34;Graham Barr via RT&#34; &lt;bug-libnet@rt.cpan.org&gt; 
09/28/2009 03:04 PM
Please respond to
bug-libnet@rt.cpan.org


To
BLis@Jefferies.com
cc

Subject
Re: [rt.cpan.org #50017] WIN to MAINFRAME ftp bug






&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=50017">http://rt.cpan.org/Ticket/Display.html?id=50017</a></span> &gt;

The file you sent looks very small, probably only one record. My 
suggestion was for a file with several records, say about 30 records. 
Although you say it goes wrong after the first record so maybe fewer 
will do.

Can you also send me the Net::FTP debug trace and the ftp command line 
trace for the smaller file and confirm that the smaller file does have 
the same issue on the mainframe

Another test, if you have access to such machines, would be to do the 
transfer to a unix box and compare the cmdline and Net::FTP 
transferred files on the unix box.

Graham.








Jefferies archives and monitors outgoing and incoming e-mail. The contents of this email, including any attachments, are confidential to the ordinary user of the email address to which it was addressed. If you are not the addressee of this email you may not copy, forward, disclose or otherwise use it or any part of it in any form whatsoever. This email may be produced at the request of regulators or in connection with civil litigation. Jefferies accepts no liability for any errors or omissions arising as a result of transmission. Use by other than intended recipients is prohibited.  In the United Kingdom, Jefferies operates as Jefferies International Limited; registered in England: no. 1978621; registered office: Vintners Place, 68 Upper Thames Street, London EC4V 3BJ.  Jefferies International Limited is authorised and regulated by the Financial Services Authority.
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;29&nbsp;10:55:10&nbsp;2009</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #50017] WIN to MAINFRAME ftp bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 29 Sep 2009 09:54:39 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libnet [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Bruce,

Knowing the issue exists going windows to unix may help a little.

I cannot determine what the issue is right now, but I will see if I  
can find a windows box I can test on.

However, I do suspect that if you transferred the file in binary mode  
instead of ascii mode then it would transfer correctly

Graham.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
