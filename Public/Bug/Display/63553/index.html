<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #63553 for Crypt-SSLeay: [PATCH] Allow non-hp OpenSSL to be used on OpenVMS</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #63553 for Crypt-SSLeay: [PATCH] Allow non-hp OpenSSL to be used on OpenVMS</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Crypt-SSLeay/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Crypt-SSLeay/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Crypt-SSLeay/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Crypt-SSLeay/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Crypt-SSLeay">Crypt-SSLeay CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">63553</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Crypt-SSLeay/Active/">Crypt-SSLeay</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">nanis [...] runu.moc.invalid
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
zinser [...] zinser.no-ip.info

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-8676-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.58    </td>
  </tr>
  <tr id="CF-8677-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;02&nbsp;16:57:03&nbsp;2010</span>
    <span class="description">zinser [...] zinser.no-ip.info -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [PATCH] Allow non-hp OpenSSL to be used on OpenVMS</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

this is with Perl 5.12.2, Crypt::SSLeay 0.58 on OpenVMS 8.3-1H1 Itanium.

The current setup of Crypt::SSLeay only supports building against the hp
supplied version of OpenSSL &#40;which is based on 0.9.7e&#41;, since it
hardcodes the libraries in sys$share to be used for the link.

If one installs a current version of OpenSSL &#40;e.g. 1.0.0b&#41; in a separate
place, one can already specify this to Makefile.PL by using the --lib
switch &#40;e.g. --lib=/sslroot&#41;, unfortunatly the script still will force
the link against the old hp libraries since it hardcodes sys$share and
the hp names of the libraries. 

The proposed patch changes Makefile.PL so that if --lib is given &#40;i.e.
do not use the hp libs&#41; it will link againt libraries in ssllib, which
is the place the OpenSSL installation procedure puts them. 

The code change is restricted to a VMS specific section of the script
and if no special flags are passed produces exactly the same result as
before.

I&#39;d be grateful if you would consider this for inclusion in the next
revision.

Greetings,

Martin

*** Makefile.PL.orig    2010-12-02 14:42:40.710376502 -0600
--- Makefile.PL 2010-12-02 14:44:05.495310543 -0600
***************
*** 452,458 ****
  
  sub vms_lib_flags {
      my $pkg_config = shift;
!     return qw&#40;-L/SYS$SHARE -lSSL$LIBSSL_SHR32 -lSSL$LIBCRYPTO_SHR32&#41;;
  }
  
  sub win32_lib_flags {
--- 452,463 ----
  
  sub vms_lib_flags {
      my $pkg_config = shift;
!     if &#40;defined $OPT_LIBPATH&#41;{
!         return qw&#40;SSLLIB:LIBSSL.OLB SSLLIB:LIBCRYPTO.OLB&#41;;
!     }
!     else{
!         return qw&#40;-L/SYS$SHARE -lSSL$LIBSSL_SHR32 -lSSL$LIBCRYPTO_SHR32&#41;;
!     }
  }
  
  sub win32_lib_flags {
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;10&nbsp;13:47:36&nbsp;2010</span>
    <span class="description">nanis [...] runu.moc.invalid -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;10&nbsp;13:51:17&nbsp;2010</span>
    <span class="description">nanis [...] runu.moc.invalid -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello:

I am being pretty slow to dealing with Crypt-SSLeay right now, but I
really appreciate the input.

FWIW, note that I am trying to make Makefile.PL clearer and more
correct, and this is one of the things I would have overlooked given
that the last time I did anything on VMS was about two decades ago.

Thank you very much.

-- Sinan

On Thu Dec 02 16:57:03 2010, drmpjz wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,
&gt; 
&gt; this is with Perl 5.12.2, Crypt::SSLeay 0.58 on OpenVMS 8.3-1H1 Itanium.
&gt; 
&gt; The current setup of Crypt::SSLeay only supports building against the hp
&gt; supplied version of OpenSSL &#40;which is based on 0.9.7e&#41;, since it
&gt; hardcodes the libraries in sys$share to be used for the link.
&gt; 
&gt; If one installs a current version of OpenSSL &#40;e.g. 1.0.0b&#41; in a separate
&gt; place, one can already specify this to Makefile.PL by using the --lib
&gt; switch &#40;e.g. --lib=/sslroot&#41;, unfortunatly the script still will force
&gt; the link against the old hp libraries since it hardcodes sys$share and
&gt; the hp names of the libraries. 
&gt; 
&gt; The proposed patch changes Makefile.PL so that if --lib is given &#40;i.e.
&gt; do not use the hp libs&#41; it will link againt libraries in ssllib, which
&gt; is the place the OpenSSL installation procedure puts them. 
&gt; 
&gt; The code change is restricted to a VMS specific section of the script
&gt; and if no special flags are passed produces exactly the same result as
&gt; before.
&gt; 
&gt; I&#39;d be grateful if you would consider this for inclusion in the next
&gt; revision.
&gt; 
&gt; Greetings,
&gt; 
&gt; Martin
&gt; 
&gt; *** Makefile.PL.orig    2010-12-02 14:42:40.710376502 -0600
&gt; --- Makefile.PL 2010-12-02 14:44:05.495310543 -0600
&gt; ***************
&gt; *** 452,458 ****
&gt;   
&gt;   sub vms_lib_flags {
&gt;       my $pkg_config = shift;
&gt; !     return qw&#40;-L/SYS$SHARE -lSSL$LIBSSL_SHR32 -lSSL$LIBCRYPTO_SHR32&#41;;
&gt;   }
&gt;   
&gt;   sub win32_lib_flags {
&gt; --- 452,463 ----
&gt;   
&gt;   sub vms_lib_flags {
&gt;       my $pkg_config = shift;
&gt; !     if &#40;defined $OPT_LIBPATH&#41;{
&gt; !         return qw&#40;SSLLIB:LIBSSL.OLB SSLLIB:LIBCRYPTO.OLB&#41;;
&gt; !     }
&gt; !     else{
&gt; !         return qw&#40;-L/SYS$SHARE -lSSL$LIBSSL_SHR32
</div>-lSSL$LIBCRYPTO_SHR32&#41;;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; !     }
&gt;   }
&gt;   
&gt;   sub win32_lib_flags {
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;10&nbsp;13:51:18&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;16&nbsp;22:40:17&nbsp;2010</span>
    <span class="description">zinser [...] zinser.no-ip.info -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> zinser [...] zinser.no-ip.info</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Sinan,

thanks a lot for your friendly feedback. The work you put into
supporting Crypt-SSLeay is very much appreciated. This is not an urgent
request, but really an enhancement. If you put it in the next version
when you have time to work on it, this is perfectly fine. And in the
meantime the patch is documented here, in case somebody is looking ;-&#41;

Have a great new year!

Martin

On Fri Dec 10 13:51:17 2010, NANIS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello:
&gt; 
&gt; I am being pretty slow to dealing with Crypt-SSLeay right now, but I
&gt; really appreciate the input.
&gt; 
&gt; FWIW, note that I am trying to make Makefile.PL clearer and more
&gt; correct, and this is one of the things I would have overlooked given
&gt; that the last time I did anything on VMS was about two decades ago.
&gt; 
&gt; Thank you very much.
&gt; 
&gt; -- Sinan
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;06&nbsp;07:57:55&nbsp;2012</span>
    <span class="description">nanis [...] runu.moc.invalid -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Martin:

Makefile.PL no longer tries to guess the correct locations of header
files and libraries. I do not know how things work on VMS &#40;and, indeed I
would appreciate some further information on this so I can add it to the
docs&#41;, but if those headers and libraries are in places where your build
tools don&#39;t look by default, you&#39;ll need to arrange for your build tools
to look in those locations.

For example, using GCC on Linux, one would add the header file locations
to the environment variable CPATH and library locations to the
LIBRARY_PATH. The last time I was on a VMS system was in 1988, and I
really don&#39;t remember how things work, but I have a feeling there must
be a similar way to cajole build tools to look in non-standard places
for headers and libraries.

So, please try out 0.64, and let me know if it works for you.

Thank you for your feedback and patience,

-- Sinan

On Thu Dec 02 16:57:03 2010, drmpjz wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,
&gt; 
&gt; this is with Perl 5.12.2, Crypt::SSLeay 0.58 on OpenVMS 8.3-1H1 Itanium.
&gt; 
&gt; The current setup of Crypt::SSLeay only supports building against the hp
&gt; supplied version of OpenSSL &#40;which is based on 0.9.7e&#41;, since it
&gt; hardcodes the libraries in sys$share to be used for the link.
&gt; 
&gt; If one installs a current version of OpenSSL &#40;e.g. 1.0.0b&#41; in a separate
&gt; place, one can already specify this to Makefile.PL by using the --lib
&gt; switch &#40;e.g. --lib=/sslroot&#41;, unfortunatly the script still will force
&gt; the link against the old hp libraries since it hardcodes sys$share and
&gt; the hp names of the libraries. 
&gt; 
&gt; The proposed patch changes Makefile.PL so that if --lib is given &#40;i.e.
&gt; do not use the hp libs&#41; it will link againt libraries in ssllib, which
&gt; is the place the OpenSSL installation procedure puts them. 
&gt; 
&gt; The code change is restricted to a VMS specific section of the script
&gt; and if no special flags are passed produces exactly the same result as
&gt; before.
&gt; 
&gt; I&#39;d be grateful if you would consider this for inclusion in the next
&gt; revision.
&gt; 
&gt; Greetings,
&gt; 
&gt; Martin
&gt; 
&gt; *** Makefile.PL.orig    2010-12-02 14:42:40.710376502 -0600
&gt; --- Makefile.PL 2010-12-02 14:44:05.495310543 -0600
&gt; ***************
&gt; *** 452,458 ****
&gt;   
&gt;   sub vms_lib_flags {
&gt;       my $pkg_config = shift;
&gt; !     return qw&#40;-L/SYS$SHARE -lSSL$LIBSSL_SHR32 -lSSL$LIBCRYPTO_SHR32&#41;;
&gt;   }
&gt;   
&gt;   sub win32_lib_flags {
&gt; --- 452,463 ----
&gt;   
&gt;   sub vms_lib_flags {
&gt;       my $pkg_config = shift;
&gt; !     if &#40;defined $OPT_LIBPATH&#41;{
&gt; !         return qw&#40;SSLLIB:LIBSSL.OLB SSLLIB:LIBCRYPTO.OLB&#41;;
&gt; !     }
&gt; !     else{
&gt; !         return qw&#40;-L/SYS$SHARE -lSSL$LIBSSL_SHR32
</div>-lSSL$LIBCRYPTO_SHR32&#41;;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; !     }
&gt;   }
&gt;   
&gt;   sub win32_lib_flags {
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;06&nbsp;07:57:56&nbsp;2012</span>
    <span class="description">nanis [...] runu.moc.invalid -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
