<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #115743 for IO-Socket-SSL: Can&#39;t upgrade IO::Socket::INET object using start_SSL &#40;&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #115743 for IO-Socket-SSL: Can&#39;t upgrade IO::Socket::INET object using start_SSL &#40;&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/IO-Socket-SSL/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/IO-Socket-SSL/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/IO-Socket-SSL/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/IO-Socket-SSL/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/IO-Socket-SSL">IO-Socket-SSL CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">115743</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/IO-Socket-SSL/Active/">IO-Socket-SSL</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
CLEACH [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-17228-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.029    </td>
  </tr>
  <tr id="CF-17229-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;29&nbsp;18:59:15&nbsp;2016</span>
    <span class="description">CLEACH [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Can&#39;t upgrade IO::Socket::INET object using start_SSL &#40;&#41;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve been attempting to upgrade IO-Socket-SSL from v2.012 to v2.029.  The latest release passes all it&#39;s test cases, but when I attempt to use it with Net::FTPSSL, the call to start_SSL&#40;&#41; basically barfs and no longer works.

I&#39;m basically trying to understand what changed in this area so that I can fix my code to take advantage of the latest release of IO-Socket-SSL going forward.  This test case is not using certificates.

Perl: 5.10.1, OS: AIX, openssl: 0x1000105f &#40;as shown in your Makefile.PL&#41;
Net-SSLeay: 1.74

Code snippet:
my %socketArgs = &#40; PeerAddr =&gt; $host, PeerPort =&gt; $port, Proto =&gt; &#39;tcp&#39;, Timeout  =&gt; $timeout &#41;;
my $socket = IO::Socket::INET-&gt;new &#40; %socketArgs &#41;;
--- Read the banner reply.
--- Send &#34;AUTH TSL&#34; over the socket
--- Read the successful reply.
my $obj = IO::Socket::SSL-&gt;start_SSL &#40; $socket, %ssl_args &#41;;

With IO::Socket::SSL qw &#40;debug3&#41; logging turned on gives the following output:
SKT &gt;&gt;&gt; AUTH TLS
SKT &lt;&lt;&lt; 234 SSLv23/TLSv1
DEBUG: .../IO/Socket/SSL.pm:2724: new ctx 542609864
DEBUG: .../IO/Socket/SSL.pm:1467: start handshake
DEBUG: .../IO/Socket/SSL.pm:659: ssl handshake not started
DEBUG: .../IO/Socket/SSL.pm:695: not using SNI because hostname is unknown
DEBUG: .../IO/Socket/SSL.pm:746: set socket to non-blocking to enforce timeout=120
DEBUG: .../IO/Socket/SSL.pm:759: call Net::SSLeay::connect
DEBUG: .../IO/Socket/SSL.pm:762: done Net::SSLeay::connect -&gt; -1
DEBUG: .../IO/Socket/SSL.pm:772: ssl handshake in progress
DEBUG: .../IO/Socket/SSL.pm:782: waiting for fd to become ready: SSL wants a read first
DEBUG: .../IO/Socket/SSL.pm:802: socket ready, retrying connect
DEBUG: .../IO/Socket/SSL.pm:759: call Net::SSLeay::connect
DEBUG: .../IO/Socket/SSL.pm:762: done Net::SSLeay::connect -&gt; -1
DEBUG: .../IO/Socket/SSL.pm:772: ssl handshake in progress
DEBUG: .../IO/Socket/SSL.pm:782: waiting for fd to become ready: SSL wants a read first
DEBUG: .../IO/Socket/SSL.pm:802: socket ready, retrying connect
DEBUG: .../IO/Socket/SSL.pm:759: call Net::SSLeay::connect
DEBUG: .../IO/Socket/SSL.pm:762: done Net::SSLeay::connect -&gt; -1
DEBUG: .../IO/Socket/SSL.pm:772: ssl handshake in progress
DEBUG: .../IO/Socket/SSL.pm:782: waiting for fd to become ready: SSL wants a read first
DEBUG: .../IO/Socket/SSL.pm:802: socket ready, retrying connect
DEBUG: .../IO/Socket/SSL.pm:759: call Net::SSLeay::connect
DEBUG: .../IO/Socket/SSL.pm:762: done Net::SSLeay::connect -&gt; -1
DEBUG: .../IO/Socket/SSL.pm:765: SSL connect attempt failed

DEBUG: .../IO/Socket/SSL.pm:765: local error: SSL connect attempt failed error:14082174:SSL routines:SSL3_CHECK_CERT_AND_ALGORITHM:dh key too small
DEBUG: .../IO/Socket/SSL.pm:768: fatal SSL error: SSL connect attempt failed error:14082174:SSL routines:SSL3_CHECK_CERT_AND_ALGORITHM:dh key too small
DEBUG: .../IO/Socket/SSL.pm:2756: free ctx 542609864 open=542609864
DEBUG: .../IO/Socket/SSL.pm:2768: OK free ctx 542609864
TLSv1: SSL connect attempt failed error:14082174:SSL routines:SSL3_CHECK_CERT_AND_ALGORITHM:dh key too small
 at -e line 1
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;29&nbsp;19:04:57&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; TLSv1: SSL connect attempt failed error:14082174:SSL
&gt; routines:SSL3_CHECK_CERT_AND_ALGORITHM:dh key too small
&gt;  at -e line 1
</div>
This is not a problem of IO::Socket::SSL but this is caused by fixes to the underlying OpenSSL library. This library no longer accepts weak DH keys because they make the connection vulnerable to man in the middle attacks using the Logjam attack. See <span class="clickylink"><a target="new" rel="nofollow" href="http://weakdh.org">http://weakdh.org</a></span> for more detais.
My guess is that you not only upgraded IO::Socket::SSL but that you&#39;ve also installed an update to your OpenSSL library.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;29&nbsp;19:04:57&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;29&nbsp;19:05:02&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;29&nbsp;19:50:44&nbsp;2016</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Hi Steffen,

I can&#39;t follow your link since the server it points to has a bad certificate &#38; is blocked by my firewall.  But I&#39;ll follow it again from home tonight.

But IO-Socket-SSL v2.012 works, v2.029 doesn&#39;t.  So it&#39;s definitely something that changed in the new release.  Something that v2.029 enforces that v2.012 doesn&#39;t.  When I downgrade back down to v2.012 it works again.  No other changes.

I did indeed recently upgrade OpenSSL, which was one of the reasons I upgraded Net-SSLeay as well.  But I got everything working again before I upgraded IO-Socket-SSL.  Upgrading IO-Socket-SSL was just an effort to stay current for me.  So I have no problem staying at the earlier release while trying to figure out what&#39;s happening.

Hopefully the link you gave me will give me some hints on what&#39;s really going on so that your module can stay on my upgrade path.

Curtis


On Wed Jun 29 19:04:57 2016, SULLR wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
<div class="message-stanza open">&gt; &gt; TLSv1: SSL connect attempt failed error:14082174:SSL
&gt; &gt; routines:SSL3_CHECK_CERT_AND_ALGORITHM:dh key too small
&gt; &gt;  at -e line 1
</div>&gt; 
&gt; This is not a problem of IO::Socket::SSL but this is caused by fixes
&gt; to the underlying OpenSSL library. This library no longer accepts weak
&gt; DH keys because they make the connection vulnerable to man in the
&gt; middle attacks using the Logjam attack. See <span class="clickylink"><a target="new" rel="nofollow" href="http://weakdh.org">http://weakdh.org</a></span> for more
&gt; detais.
&gt; My guess is that you not only upgraded IO::Socket::SSL but that you&#39;ve
&gt; also installed an update to your OpenSSL library.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;29&nbsp;20:26:08&nbsp;2016</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Steffen,

Just got finished downgrading IO-Socket-SSL again.  Here&#39;s the relevant successful logs.

SKT &gt;&gt;&gt; AUTH TLS
SKT &lt;&lt;&lt; 234 SSLv23/TLSv1
DEBUG: .../IO/Socket/SSL.pm:2602: new ctx 542437432
DEBUG: .../IO/Socket/SSL.pm:1365: start handshake
DEBUG: .../IO/Socket/SSL.pm:566: ssl handshake not started
DEBUG: .../IO/Socket/SSL.pm:602: not using SNI because hostname is unknown
DEBUG: .../IO/Socket/SSL.pm:653: set socket to non-blocking to enforce timeout=120
DEBUG: .../IO/Socket/SSL.pm:667: Net::SSLeay::connect -&gt; -1
DEBUG: .../IO/Socket/SSL.pm:677: ssl handshake in progress
DEBUG: .../IO/Socket/SSL.pm:687: waiting for fd to become ready: SSL wants a read first
DEBUG: .../IO/Socket/SSL.pm:707: socket ready, retrying connect
DEBUG: .../IO/Socket/SSL.pm:667: Net::SSLeay::connect -&gt; -1
DEBUG: .../IO/Socket/SSL.pm:677: ssl handshake in progress
DEBUG: .../IO/Socket/SSL.pm:687: waiting for fd to become ready: SSL wants a read first
DEBUG: .../IO/Socket/SSL.pm:707: socket ready, retrying connect
DEBUG: .../IO/Socket/SSL.pm:667: Net::SSLeay::connect -&gt; -1
DEBUG: .../IO/Socket/SSL.pm:677: ssl handshake in progress
DEBUG: .../IO/Socket/SSL.pm:687: waiting for fd to become ready: SSL wants a read first
DEBUG: .../IO/Socket/SSL.pm:707: socket ready, retrying connect
DEBUG: .../IO/Socket/SSL.pm:667: Net::SSLeay::connect -&gt; -1
DEBUG: .../IO/Socket/SSL.pm:677: ssl handshake in progress
DEBUG: .../IO/Socket/SSL.pm:687: waiting for fd to become ready: SSL wants a read first
DEBUG: .../IO/Socket/SSL.pm:707: socket ready, retrying connect
DEBUG: .../IO/Socket/SSL.pm:667: Net::SSLeay::connect -&gt; 1
DEBUG: .../IO/Socket/SSL.pm:722: ssl handshake done

Works, see.

Curtis

On Wed Jun 29 19:50:44 2016, CLEACH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Hi Steffen,
&gt; 
&gt; I can&#39;t follow your link since the server it points to has a bad
&gt; certificate &#38; is blocked by my firewall.  But I&#39;ll follow it again
&gt; from home tonight.
&gt; 
&gt; But IO-Socket-SSL v2.012 works, v2.029 doesn&#39;t.  So it&#39;s definitely
&gt; something that changed in the new release.  Something that v2.029
&gt; enforces that v2.012 doesn&#39;t.  When I downgrade back down to v2.012 it
&gt; works again.  No other changes.
&gt; 
&gt; I did indeed recently upgrade OpenSSL, which was one of the reasons I
&gt; upgraded Net-SSLeay as well.  But I got everything working again
&gt; before I upgraded IO-Socket-SSL.  Upgrading IO-Socket-SSL was just an
&gt; effort to stay current for me.  So I have no problem staying at the
&gt; earlier release while trying to figure out what&#39;s happening.
&gt; 
&gt; Hopefully the link you gave me will give me some hints on what&#39;s
&gt; really going on so that your module can stay on my upgrade path.
&gt; 
&gt; Curtis
&gt; 
&gt; 
&gt; On Wed Jun 29 19:04:57 2016, SULLR wrote:
<div class="message-stanza open">&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; TLSv1: SSL connect attempt failed error:14082174:SSL
&gt; &gt; &gt; routines:SSL3_CHECK_CERT_AND_ALGORITHM:dh key too small
&gt; &gt; &gt;  at -e line 1
</div>&gt; &gt;
&gt; &gt; This is not a problem of IO::Socket::SSL but this is caused by fixes
&gt; &gt; to the underlying OpenSSL library. This library no longer accepts
&gt; &gt; weak
&gt; &gt; DH keys because they make the connection vulnerable to man in the
&gt; &gt; middle attacks using the Logjam attack. See <span class="clickylink"><a target="new" rel="nofollow" href="http://weakdh.org">http://weakdh.org</a></span> for
&gt; &gt; more
&gt; &gt; detais.
&gt; &gt; My guess is that you not only upgraded IO::Socket::SSL but that
&gt; &gt; you&#39;ve
&gt; &gt; also installed an update to your OpenSSL library.
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;30&nbsp;01:41:56&nbsp;2016</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Am Mi 29. Jun 2016, 20:26:08, CLEACH schrieb:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Steffen,
&gt; 
&gt; Just got finished downgrading IO-Socket-SSL again.  Here&#39;s the
&gt; relevant successful logs.
</div>
The only change which might have caused this is the change of the cipher suite in 2.026. Notably this finally removes the broken RC4 from the default cipher set. So if your server has both a weak DH key but preferred RC4 instead of DH it will no longer use RC4 because the client does not offer it anymore.

You might work around the broken server by explicitly forcing a different cipher set with the SSL_cipher_list argument to IO::Socket::SSL. Given the code in Net::FTPSSL the way only to give arguments to IO::Socket::SSL is using the SSL_Client_Certificate argument, i.e. something like this:

      Net::FTPSSL-&gt;new&#40;
          ...
          SSL_Client_Certificate =&gt; { SSL_cipher_list =&gt; &#39;HIGH:!DH&#39; }
      &#41;

BTW, current versions of the core module Net::FTP &#40;libnet version &gt;3.0&#41; have support for SSL and IPv6 builtin so you might use these to get a more sane interface to the ciphers. Or you could use Net::SSLGlue::FTP on older version of Net::FTP.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
