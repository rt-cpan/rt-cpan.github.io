<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #18591 for POE: POE::Component::Server::TCP + POE::Filter::HTTPD broken in 0.34</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #18591 for POE: POE::Component::Server::TCP + POE::Filter::HTTPD broken in 0.34</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/POE/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/POE/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/POE/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/POE/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/POE">POE CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">18591</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/POE/Active/">POE</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
tpetersen [...] ocv.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-26342-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.34    </td>
  </tr>
  <tr id="CF-26343-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;07&nbsp;17:24:57&nbsp;2006</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> POE::Component::Server::TCP + POE::Filter::HTTPD broken in 0.34</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The handler for ClientInput no longer receives an HTTP::Request object 
as ARG0; it receives the stringified version of the request.

Obviously this breaks a lot of programs &#40;including the example web 
server in the cookbook&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;07&nbsp;18:11:40&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tpetersen [...] ocv.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The problem appears to be in POE::Filter::clone, which
POE::Filter::HTTPD inherits.

The method handles either an array or a class literal.  In the second
case, shouldn&#39;t it bless the new object as

  ref&#40;$self&#41; || $self

to handle a literal class name?


In code that uses POE::Component::Server::TCP and POE::Filter::HTTPD,
changing ClientFilter from &#39;POE::Filter::HTTPD&#39; to
[&#39;POE::Filter::HTTPD&#39;] works around the bug.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;07&nbsp;18:11:41&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;07&nbsp;18:28:28&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">My mistake, that doesn&#39;t fix the problem at all, it just gets past
receiving the stringified request.

Now I get an HTTP::Response object instead of an HTTP::Request object;
the response contains this message of any URL:

Error 400: Bad Request
Did not want any more data. Got this:

and then the hex dump of the request.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;04&nbsp;12:42:39&nbsp;2006</span>
    <span class="description">immute [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Myself and dw have been looking at this problem, and it appears to be 
a problem in how PoCoServerTCP ran though the *Filter arguments, it 
should be fixed in the next POE release.
Also, clone&#40;&#41; is an object method, it should *always* have an object 
as the first argument, if you wanted to use a string literal, you 
would use new&#40;&#41;.

On Fri Apr 07 18:28:28 2006, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; My mistake, that doesn&#39;t fix the problem at all, it just gets past
&gt; receiving the stringified request.
&gt; 
&gt; Now I get an HTTP::Response object instead of an HTTP::Request 
</div>object;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; the response contains this message of any URL:
&gt; 
&gt; Error 400: Bad Request
&gt; Did not want any more data. Got this:
&gt; 
&gt; and then the hex dump of the request.
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;04&nbsp;12:44:21&nbsp;2006</span>
    <span class="description">tpetersen [...] ocv.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #18591] POE::Component::Server::TCP + POE::Filte r::HTTPD broken in 0.34 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 4 May 2006 10:44:59 -0600 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;&#39;bug-POE [...] rt.cpan.org&#39;&#34; &lt;bug-POE [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Theo Petersen &lt;tpetersen [...] ocv.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the update.

..Theo

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Matt Sickler via RT [mailto:bug-POE@rt.cpan.org] 
Sent: Thursday, May 04, 2006 10:43 AM
To: tpetersen@ocv.com
Subject: [rt.cpan.org #18591] POE::Component::Server::TCP +
POE::Filter::HTTPD broken in 0.34 


&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=18591">http://rt.cpan.org/Ticket/Display.html?id=18591</a></span> &gt;

Myself and dw have been looking at this problem, and it appears to be 
a problem in how PoCoServerTCP ran though the *Filter arguments, it 
should be fixed in the next POE release.
Also, clone&#40;&#41; is an object method, it should *always* have an object 
as the first argument, if you wanted to use a string literal, you 
would use new&#40;&#41;.

On Fri Apr 07 18:28:28 2006, guest wrote:
<div class="message-stanza open">&gt; My mistake, that doesn&#39;t fix the problem at all, it just gets past
&gt; receiving the stringified request.
&gt; 
&gt; Now I get an HTTP::Response object instead of an HTTP::Request 
</div>object;
<div class="message-stanza open">&gt; the response contains this message of any URL:
&gt; 
&gt; Error 400: Bad Request
&gt; Did not want any more data. Got this:
&gt; 
&gt; and then the hex dump of the request.
&gt; 
</div>




This message and its attachments are for the sole use of the intended recipient&#40;s&#41; and may contain confidential, 
 proprietary and privileged information. Any unauthorized review, copying, use, disclosure or distribution is prohibited. If 
 you are not the intended recipient, please notify the sender immediately by replying to the address listed in the From: 
 field and destroy all copies of the original message and its attachments.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;15&nbsp;17:59:20&nbsp;2006</span>
    <span class="description">immute [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Theo, I am led to believe this was caused by the component not
registering the correct filter.  This should be fixed in the next POE
release.

On Thu May 04 12:44:21 2006, tpetersen@ocv.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks for the update.
&gt; 
&gt; ..Theo
&gt; 
&gt; -----Original Message-----
&gt; From: Matt Sickler via RT [mailto:bug-POE@rt.cpan.org]
&gt; Sent: Thursday, May 04, 2006 10:43 AM
&gt; To: tpetersen@ocv.com
&gt; Subject: [rt.cpan.org #18591] POE::Component::Server::TCP +
&gt; POE::Filter::HTTPD broken in 0.34
&gt; 
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=18591">http://rt.cpan.org/Ticket/Display.html?id=18591</a></span> &gt;
&gt; 
&gt; Myself and dw have been looking at this problem, and it appears to be
&gt; a problem in how PoCoServerTCP ran though the *Filter arguments, it
&gt; should be fixed in the next POE release.
&gt; Also, clone&#40;&#41; is an object method, it should *always* have an object
&gt; as the first argument, if you wanted to use a string literal, you
&gt; would use new&#40;&#41;.
&gt; 
&gt; On Fri Apr 07 18:28:28 2006, guest wrote:
<div class="message-stanza open">&gt; &gt; My mistake, that doesn&#39;t fix the problem at all, it just gets past
&gt; &gt; receiving the stringified request.
&gt; &gt;
&gt; &gt; Now I get an HTTP::Response object instead of an HTTP::Request
</div>&gt; object;
<div class="message-stanza open">&gt; &gt; the response contains this message of any URL:
&gt; &gt;
&gt; &gt; Error 400: Bad Request
&gt; &gt; Did not want any more data. Got this:
&gt; &gt;
&gt; &gt; and then the hex dump of the request.
&gt; &gt;
</div>&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; This message and its attachments are for the sole use of the intended
&gt; recipient&#40;s&#41; and may contain confidential,
&gt;  proprietary and privileged information. Any unauthorized review,
&gt; copying, use, disclosure or distribution is prohibited. If
&gt;  you are not the intended recipient, please notify the sender
&gt; immediately by replying to the address listed in the From:
&gt;  field and destroy all copies of the original message and its
&gt; attachments.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;15&nbsp;17:59:40&nbsp;2006</span>
    <span class="description">immute [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
