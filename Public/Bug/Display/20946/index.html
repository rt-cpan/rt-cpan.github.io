<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #20946 for Sys-Syslog: Sys::Syslog problems</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #20946 for Sys-Syslog: Sys::Syslog problems</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Sys-Syslog/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Sys-Syslog/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Sys-Syslog/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Sys-Syslog/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Sys-Syslog">Sys-Syslog CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">20946</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Sys-Syslog/Active/">Sys-Syslog</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mailscanner [...] ecs.soton.ac.uk

<br />
t.d.lee [...] durham.ac.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-30616-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-30617-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.18    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;11&nbsp;10:26:44&nbsp;2006</span>
    <span class="description">t.d.lee [...] durham.ac.uk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Julian Field &lt;MailScanner [...] ECS.SOTON.AC.UK&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Sys::Syslog problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 11 Aug 2006 15:26:13 +0100 &#40;BST&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-sys-syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Lee &lt;t.d.lee [...] durham.ac.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Bug report for Sys::Syslog 0.17.

Disclaimer: I&#39;m merely piggy-in-the-middle, trying to get a bug
recognised and fixed.  I&#39;m not actually subject to the bug myself.

The MailScanner project &#40;www.mailscanner.info&#41; has for many years used
Sys::Syslog extensively.  In early July, a few MailScanner folk noticed
problems with 0.16, which were apparently OK if they backtracked to 1.15.

See:
  <span class="clickylink"><a target="new" rel="nofollow" href="http://lists.mailscanner.info/pipermail/mailscanner-beta/2006-July/">http://lists.mailscanner.info/pipermail/mailscanner-beta/2006-July/</a></span>
thread:
  Sys::Syslog 0.16 problems


Then later in July 0.17 appeared, and apparently seemed OK for some folk.
&#40;So I guess that the new 0.16 problems were quickly recognised and fixed:
thank you!&#41;  See same URL, thread &#34;Sys::Syslog 0.17&#34;.

But note the reports about &#34;make test&#34; failing in that thread.

Since then &#40;during August&#41; there have apparently been more failures &#40;in
&#34;make test&#34;, I understand&#41;.

Are you aware of any problems in 0.17, particularly in &#34;make test&#34;?
Are there any plans to resolve this?

If you need more detail, the best authority is Julian Field, the developer
of MailScanner, to whom this is Cc:d.  &#40;I could attempt to handle queries
about this issue if necessary if you wish.&#41;




-- 

:  David Lee                                I.T. Service          :
:  Senior Systems Programmer                Computer Centre       :
:                                           Durham University     :
:  <span class="clickylink"><a target="new" rel="nofollow" href="http://www.dur.ac.uk/t.d.lee/">http://www.dur.ac.uk/t.d.lee/</a></span>            South Road            :
:                                           Durham DH1 3LE        :
:  Phone: +44 191 334 2752                  U.K.                  :
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;11&nbsp;11:26:05&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Requestor mailscanner@ecs.soton.ac.uk added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;11&nbsp;12:40:49&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #20946] Sys::Syslog problems </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 11 Aug 2006 18:40:14 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sébastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Disclaimer: I&#39;m merely piggy-in-the-middle, trying to get a bug
&gt; recognised and fixed.  I&#39;m not actually subject to the bug myself.
&gt;
&gt; The MailScanner project &#40;www.mailscanner.info&#41; has for many years used
&gt; Sys::Syslog extensively.  In early July, a few MailScanner folk noticed
&gt; problems with 0.16, which were apparently OK if they backtracked to 1.15.
</div>
Apologises for creating this problem.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Then later in July 0.17 appeared, and apparently seemed OK for some folk.
&gt; &#40;So I guess that the new 0.16 problems were quickly recognised and fixed:
&gt; thank you!&#41;  See same URL, thread &#34;Sys::Syslog 0.17&#34;.
</div>
A bug was reported but I admit I didn&#39;t see the urgency of it until
someone opened another ticket, with the precision that the bug was
breaking Spamassassin &#40;and after I released 0.17, someone also reported
problems in RT&#41;. Had I been told that it broke Spamassassin, I would
have certainly tried to fix it earlier.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; But note the reports about &#34;make test&#34; failing in that thread.
</div>
Are you referring to this mail[1]? There is no failure here, only skipped
tests, which is perfectly normal. The tests are skipped because some
test specific modules are not installed, but as they are not needed
to check the core functionality of the module, they&#39;re not prerequisites.

[1]<span class="clickylink"><a target="new" rel="nofollow" href="http://lists.mailscanner.info/pipermail/mailscanner-beta/2006-July/000246.html">http://lists.mailscanner.info/pipermail/mailscanner-beta/2006-July/000246.html</a></span>

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Since then &#40;during August&#41; there have apparently been more failures &#40;in
&gt; &#34;make test&#34;, I understand&#41;.
&gt;
&gt; Are you aware of any problems in 0.17, particularly in &#34;make test&#34;?
&gt; Are there any plans to resolve this?
</div>
If you or other people have failure cases, don&#39;t hesitate to fill a bug
with the full output, and also tell me what software is broken by the
bug. Currently, as reported by CPAN Testers, Sys::Syslog 0.17 seems to
pass all its tests in a few systems:
  » <span class="clickylink"><a target="new" rel="nofollow" href="http://cpantesters.perl.org/show/Sys-Syslog.html#Sys-Syslog-0.17">http://cpantesters.perl.org/show/Sys-Syslog.html#Sys-Syslog-0.17</a></span>

And there is no recent failure caused by Sys::Syslog reported by Perl
smokers, which cover a larger set of operating systems:
  » <span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.daily-build.reports/">http://www.nntp.perl.org/group/perl.daily-build.reports/</a></span>

Someone has also confirmed the existence of a heisenbug related to the
UDP mechanism on Darwin. I&#39;ll give it a look this week-end.
There&#39;s also the ticket  #20635 about tests failure on Cygwin:
  » <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=20635">http://rt.cpan.org/Ticket/Display.html?id=20635</a></span>

Of course, one of the problem is that the test suite only checks the
API, but has currently no way to check that the data are correctly sent
or received. I&#39;ve begun working on a data validation test script, but
have not yet finished it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If you need more detail, the best authority is Julian Field, the developer
&gt; of MailScanner, to whom this is Cc:d.  &#40;I could attempt to handle queries
&gt; about this issue if necessary if you wish.&#41;
</div>
I&#39;ve added Julian in the requestors of this ticket so he should automatically
receive updates to this ticket.

I haven&#39;t look at the source of MailScanner yet, but one of the problems
with Sys::Syslog is that it didn&#39;t provide the &#34;native&#34; mechanism until
very recently &#40;version 0.15&#41; and unfortunately kind of recommended the
&#34;unix&#34; mechanism even though it is quite fragile. The native mechanism,
as it uses the real C functions, is what the module should have provided
since day one as it make Perl behaves like any other program.

Therefore, I&#39;d now suggest to avoid changing the mechanism with setlogsock&#40;&#41;
unless necessary. I&#39;ll modify the documentation to make that statement
more clear.


--
Sébastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;11&nbsp;12:40:49&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;11&nbsp;13:18:50&nbsp;2006</span>
    <span class="description">t.d.lee [...] durham.ac.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> mailscanner [...] ecs.soton.ac.uk</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #20946] Sys::Syslog problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 11 Aug 2006 18:18:22 +0100 &#40;BST&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Sébastien Aperghis-Tramoni via RT &lt;bug-Sys-Syslog [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Lee &lt;t.d.lee [...] durham.ac.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, 11 Aug 2006, [UTF-8] SÃ©bastien Aperghis-Tramoni via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=20946">http://rt.cpan.org/Ticket/Display.html?id=20946</a></span> &gt;
&gt;
&gt; [...]
<div class="message-stanza open">&gt; &gt; But note the reports about &#34;make test&#34; failing in that thread.
</div>&gt;
&gt; Are you referring to this mail[1]? There is no failure here, only skipped
&gt; tests, which is perfectly normal. The tests are skipped because some
&gt; test specific modules are not installed, but as they are not needed
&gt; to check the core functionality of the module, they&#39;re not prerequisites.
&gt;
&gt; [1]<span class="clickylink"><a target="new" rel="nofollow" href="http://lists.mailscanner.info/pipermail/mailscanner-beta/2006-July/000246.html">http://lists.mailscanner.info/pipermail/mailscanner-beta/2006-July/000246.html</a></span>
</div>
Many thanks for your swift reply!  Much appreciated.

Sadly, I&#39;m just the middle-man, with no first-hand knowledge of the
problem.

I had spotted a criticism of the recent module development on the main
MailScanner list, because of claimed failures in recent revisions,
including &#40;apparently&#41; a residual &#34;make test&#34; hanging problem in 0.17.

I simply wanted to check that the developer &#40;you, Sebastian&#41; were either
aware of the problem or willing to accept fault reports.  &#40;It seems that
the problem is new to you &#40;fair enough&#41;, and that you are open to reports
&#40;excellent!&#41;.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
<div class="message-stanza open">&gt; &gt; Since then &#40;during August&#41; there have apparently been more failures &#40;in
&gt; &gt; &#34;make test&#34;, I understand&#41;.
&gt; &gt;
&gt; &gt; Are you aware of any problems in 0.17, particularly in &#34;make test&#34;?
&gt; &gt; Are there any plans to resolve this?
</div>&gt;
&gt; If you or other people have failure cases, don&#39;t hesitate to fill a bug
&gt; with the full output, and also tell me what software is broken by the
&gt; bug.  [...]
</div>
Thanks.

Earlier this afternoon &#40;UK time&#41; I asked &#40;on the main MailScanner email
list&#41; for a more detailed report of the alleged problem.

It apparently claims a hang &#40;presumably very, very long wait&#41; during the
&#34;make test&#34; on some platforms.

No report forthcoming as yet.

I&#39;ve also searched the archives of the main list, but was unable to track
down a detailed report.  Sorry.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve added Julian in the requestors of this ticket so he should automatically
&gt; receive updates to this ticket.
</div>
Thanks.  Julian actively reads his email!  The chances are that he can dig
out the exact report of the alleged &#34;make test&#34; hang and send it to you.

The responsibility now fairly and squarely lies with us &#40;the MailScanner
community&#41; to provide you &#40;Sebastian&#41; with decent information.

Best wishes!  Have a good weekend.  &#40;Time for me to go home...&#41;

-- 

:  David Lee                                I.T. Service          :
:  Senior Systems Programmer                Computer Centre       :
:                                           Durham University     :
:  <span class="clickylink"><a target="new" rel="nofollow" href="http://www.dur.ac.uk/t.d.lee/">http://www.dur.ac.uk/t.d.lee/</a></span>            South Road            :
:                                           Durham DH1 3LE        :
:  Phone: +44 191 334 2752                  U.K.                  :
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;11&nbsp;17:12:26&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #20946] Sys::Syslog problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 11 Aug 2006 23:12:08 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sébastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Quoting David Lee via RT &lt;bug-Sys-Syslog@rt.cpan.org&gt;:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Many thanks for your swift reply!  Much appreciated.
</div>
You&#39;re welcome :&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sadly, I&#39;m just the middle-man, with no first-hand knowledge of the
&gt; problem.
</div>
No problem. People can contribute to this ticket from the RT interface.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I had spotted a criticism of the recent module development on the main
&gt; MailScanner list, because of claimed failures in recent revisions,
&gt; including &#40;apparently&#41; a residual &#34;make test&#34; hanging problem in 0.17.
&gt;
&gt; I simply wanted to check that the developer &#40;you, Sebastian&#41; were either
&gt; aware of the problem or willing to accept fault reports.  &#40;It seems that
&gt; the problem is new to you &#40;fair enough&#41;, and that you are open to reports
&gt; &#40;excellent!&#41;.
</div>
I&#39;m more the maintainer than the developper. Sys::Syslog is a piece of
old code, with roots dating back from Perl 4, and has evolved in a strange
and organic way. I became the maintainer last year when it was decided to
released it on the CPAN, independently of the main Perl distrbution, in
order to address CVE-2005-3962 &#40;the sprintf&#40;&#41; buffer overflow problem&#41;.

Since then, I&#39;ve tried to address the tickets that were opened and accept
the patches that were waiting, also trying to tidy up the code and add
new features.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Earlier this afternoon &#40;UK time&#41; I asked &#40;on the main MailScanner email
&gt; list&#41; for a more detailed report of the alleged problem.
&gt;
&gt; It apparently claims a hang &#40;presumably very, very long wait&#41; during the
&gt; &#34;make test&#34; on some platforms.
</div>
I&#39;ve seen this occurs on a Debian system, but have not yet investigated
this case.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; No report forthcoming as yet.
&gt;
&gt; I&#39;ve also searched the archives of the main list, but was unable to track
&gt; down a detailed report.  Sorry.
</div>
No problem, I can wait.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks.  Julian actively reads his email!  The chances are that he can dig
&gt; out the exact report of the alleged &#34;make test&#34; hang and send it to you.
&gt;
&gt; The responsibility now fairly and squarely lies with us &#40;the MailScanner
&gt; community&#41; to provide you &#40;Sebastian&#41; with decent information.
</div>
I took a quick glance at MailScanner::Log, and I think the code can be
simplified by using the features from the recent Sys::Syslog versions.
Namely, the eval{} can be avoided by using the &#34;nofatal&#34; option of
openlog&#40;&#41;.

  » <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/dist/Sys-Syslog/Syslog.pm#openlog">http://search.cpan.org/dist/Sys-Syslog/Syslog.pm#openlog</a></span>

Also, I really think that you should avoid calling setlogsock&#40;&#41; to change
the mechanism and just keep with the native one. Especially on systems
like Solaris, where Alan Burlison, Solaris developper and the main Perl
contact for this system, expressed his clear opinion about this subject
and explained that he prefers the native mechanism over the others.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Best wishes!  Have a good weekend.  &#40;Time for me to go home...&#41;
</div>
Thanks. Although I&#39;ll have to spend part of it on the Sys::Syslog problems.

--
Sébastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;12&nbsp;09:32:48&nbsp;2006</span>
    <span class="description">mailscanner [...] ecs.soton.ac.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> t.d.lee [...] durham.ac.uk</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #20946] Sys::Syslog problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 12 Aug 2006 14:32:11 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Julian Field &lt;mailscanner [...] ecs.soton.ac.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Sébastien Aperghis-Tramoni via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=20946">http://rt.cpan.org/Ticket/Display.html?id=20946</a></span> &gt;
&gt; 
&gt; Quoting David Lee via RT &lt;bug-Sys-Syslog@rt.cpan.org&gt;:
&gt; 
<div class="message-stanza open">&gt;&gt; Many thanks for your swift reply!  Much appreciated.
</div>&gt; 
&gt; You&#39;re welcome :&#41;
&gt; 
<div class="message-stanza open">&gt;&gt; Sadly, I&#39;m just the middle-man, with no first-hand knowledge of the
&gt;&gt; problem.
</div>&gt; 
&gt; No problem. People can contribute to this ticket from the RT interface.
&gt; 
<div class="message-stanza open">&gt;&gt; I had spotted a criticism of the recent module development on the main
&gt;&gt; MailScanner list, because of claimed failures in recent revisions,
&gt;&gt; including &#40;apparently&#41; a residual &#34;make test&#34; hanging problem in 0.17.
&gt;&gt;
&gt;&gt; I simply wanted to check that the developer &#40;you, Sebastian&#41; were either
&gt;&gt; aware of the problem or willing to accept fault reports.  &#40;It seems that
&gt;&gt; the problem is new to you &#40;fair enough&#41;, and that you are open to reports
&gt;&gt; &#40;excellent!&#41;.
</div>&gt; 
&gt; I&#39;m more the maintainer than the developper. Sys::Syslog is a piece of
&gt; old code, with roots dating back from Perl 4, and has evolved in a strange
&gt; and organic way. I became the maintainer last year when it was decided to
&gt; released it on the CPAN, independently of the main Perl distrbution, in
&gt; order to address CVE-2005-3962 &#40;the sprintf&#40;&#41; buffer overflow problem&#41;.
&gt; 
&gt; Since then, I&#39;ve tried to address the tickets that were opened and accept
&gt; the patches that were waiting, also trying to tidy up the code and add
&gt; new features.
&gt; 
<div class="message-stanza open">&gt;&gt; Earlier this afternoon &#40;UK time&#41; I asked &#40;on the main MailScanner email
&gt;&gt; list&#41; for a more detailed report of the alleged problem.
&gt;&gt;
&gt;&gt; It apparently claims a hang &#40;presumably very, very long wait&#41; during the
&gt;&gt; &#34;make test&#34; on some platforms.
</div>&gt; 
&gt; I&#39;ve seen this occurs on a Debian system, but have not yet investigated
&gt; this case.
</div>
The hang that was reported to me was on a CentOS 4 system. But another 
CentOS 4 system worked fine, so it may be a kernel revision problem or 
something subtle like that.

Is there a better Syslog module that I could use instead? The problems 
with 0.16 and 0.17 have caused me quite a lot of grief, forcing me to 
issue more than 1 revision after I published my latest stable release, 
which damages my &#40;and MailScanner&#39;s&#41; reputatio as a reliable package.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
<div class="message-stanza open">&gt;&gt; No report forthcoming as yet.
&gt;&gt;
&gt;&gt; I&#39;ve also searched the archives of the main list, but was unable to track
&gt;&gt; down a detailed report.  Sorry.
</div>&gt; 
&gt; No problem, I can wait.
&gt; 
<div class="message-stanza open">&gt;&gt; Thanks.  Julian actively reads his email!  The chances are that he can dig
&gt;&gt; out the exact report of the alleged &#34;make test&#34; hang and send it to you.
&gt;&gt;
&gt;&gt; The responsibility now fairly and squarely lies with us &#40;the MailScanner
&gt;&gt; community&#41; to provide you &#40;Sebastian&#41; with decent information.
</div>&gt; 
&gt; I took a quick glance at MailScanner::Log, and I think the code can be
&gt; simplified by using the features from the recent Sys::Syslog versions.
&gt; Namely, the eval{} can be avoided by using the &#34;nofatal&#34; option of
&gt; openlog&#40;&#41;.
</div>
I will look into that, many thanks.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt;   » <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/dist/Sys-Syslog/Syslog.pm#openlog">http://search.cpan.org/dist/Sys-Syslog/Syslog.pm#openlog</a></span>
&gt; 
&gt; Also, I really think that you should avoid calling setlogsock&#40;&#41; to change
&gt; the mechanism and just keep with the native one. Especially on systems
&gt; like Solaris, where Alan Burlison, Solaris developper and the main Perl
&gt; contact for this system, expressed his clear opinion about this subject
&gt; and explained that he prefers the native mechanism over the others.
</div>
I will check that out too. I have used Sys::Syslog without exactly the 
same code for several years now, it&#39;s just all been broken by upgrading 
to a newer release. I don&#39;t usually keep absolutely up to date with the 
latest module releases, as I prefer to stick with the same set that I 
know work; but the Sys::Syslog module version I was using was getting 
very old so I upgraded it. Slightly wish I hadn&#39;t now :-&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
<div class="message-stanza open">&gt;&gt; Best wishes!  Have a good weekend.  &#40;Time for me to go home...&#41;
</div>&gt; 
&gt; Thanks. Although I&#39;ll have to spend part of it on the Sys::Syslog problems.
</div>
What would we all do at the weekend without a good pile of work to do!

- -- 
Julian Field
www.MailScanner.info
Buy the MailScanner book at www.MailScanner.info/store

MailScanner customisation, or any advanced system administration help?
Contact me at Jules@MailScanner.biz

PGP footprint: EE81 D763 3DB0 0BFD E1DC 7222 11F6 5947 1415 B654
Get your PCs and servers from Transtec.de, very well built and reliable!


-----BEGIN PGP SIGNATURE-----
Version: PGP SDK 3.7.0
Charset: UTF-8

wj8DBQFE3dheEfZZRxQVtlQRAoSwAJ9BxxnP0cLfrtyQgI3A8UVY/wnEFwCgjiAi
KiIomYnmLJiU4dQkKJSLvIk=
=S2AI
-----END PGP SIGNATURE-----

-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.
For all your IT requirements visit www.transtec.co.uk
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;13&nbsp;21:11:50&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #20946] Sys::Syslog problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 14 Aug 2006 03:11:35 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sébastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The hang that was reported to me was on a CentOS 4 system. But another
&gt; CentOS 4 system worked fine, so it may be a kernel revision problem or
&gt; something subtle like that.
</div>
Once again, I am unable to reproduce the bug on my systems. This is
totally frustrating. I&#39;ll try tomorrow on the Debian system where I
once saw the problem.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Is there a better Syslog module that I could use instead? The problems
&gt; with 0.16 and 0.17 have caused me quite a lot of grief, forcing me to
&gt; issue more than 1 revision after I published my latest stable release,
&gt; which damages my &#40;and MailScanner&#39;s&#41; reputatio as a reliable package.
</div>
AFAICT, Sys::Syslog is the only maintained Perl module for sending
syslog messages. There are old modules like Net::Syslog or Unix::Syslog,
but they are unmaintained and have less features than Sys::Syslog.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I will check that out too. I have used Sys::Syslog without exactly the
&gt; same code for several years now, it&#39;s just all been broken by upgrading
&gt; to a newer release. I don&#39;t usually keep absolutely up to date with the
&gt; latest module releases, as I prefer to stick with the same set that I
&gt; know work; but the Sys::Syslog module version I was using was getting
&gt; very old so I upgraded it. Slightly wish I hadn&#39;t now :-&#41;
</div>
Sorry for the problems caused by Sys::Syslog. OTOH, the positive side
of the upgrade is to find this sort of regressions, which can&#39;t be
detected by the current test suite, which I&#39;m also working on to improve
it. On this matter, I&#39;d say that if the test suite hangs or is longer
to execute, but that the module works correctly on normal runs, people
should see the module as operational, because the test suite is not
perfect and it may try some mechanisms that just won&#39;t never work on
their systems.

Here, I think that my error was to actually connect to the syslog
facility of the system. But I&#39;m afraid that several of the functions
used by Sys::Syslog can&#39;t be replaced or mocked, making data validation
tests &#40;which could catch more regression problems&#41; more difficult.

--
Sébastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;14&nbsp;12:43:47&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #20946] Sys::Syslog problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 14 Aug 2006 18:43:25 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sébastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; The hang that was reported to me was on a CentOS 4 system. But another
&gt;&gt; CentOS 4 system worked fine, so it may be a kernel revision problem or
&gt;&gt; something subtle like that.
</div>&gt;
&gt; Once again, I am unable to reproduce the bug on my systems. This is
&gt; totally frustrating. I&#39;ll try tomorrow on the Debian system where I
&gt; once saw the problem.
</div>
Ok, I gave it a try on a Debian system I have access to, and I can reproduce
the problem there:

grive:/tmp/Sys-Syslog-0.17# prove -bv t/syslog.t
...
ok 135 - setlogsock&#40;&#41; called with [&#39;console&#39;]
ok 136 - setlogsock&#40;&#41; should return true: &#39;1&#39;
ok 137 - setlogsock&#40;&#41; called with &#39;console&#39;
ok 138 - setlogsock&#40;&#41; should return true: &#39;1&#39;
ok 139 - openlog&#40;&#41; called with facility &#39;local0&#39; and without option &#39;ndelay&#39;
ok 140 - openlog&#40;&#41; should return true: &#39;Sys::Syslog::SYSLOG&#39;
ok 141 - openlog&#40;&#41; called with facility &#39;local0&#39; with option &#39;ndelay&#39;
ok 142 - openlog&#40;&#41; should return true: &#39;Sys::Syslog::SYSLOG&#39;
ok 143 - syslog&#40;&#41; called with level -1
ok 144 - syslog&#40;&#41; should return false: &#39;0&#39;
ok 145 - syslog&#40;&#41; called with level &#39;info,notice&#39;
ok 146 - syslog&#40;&#41; should return false: &#39;0&#39;
ok 147 - syslog&#40;&#41; called with level &#39;info,notice&#39;
ok 148 - syslog&#40;&#41; should return false: &#39;0&#39;

And indeed, it hangs at this points, before test 149, at line 140 of
t/syslog.t, while trying to write the message to the console:

grive:/tmp/Sys-Syslog-0.17# strace -p 15891
Process 15891 attached - interrupt to quit
write&#40;4, &#34;&lt;134&gt;Aug 14 18:07:24 perl: uid 0&#34;..., 124 &lt;unfinished ...&gt;
Process 15891 detached

grive:/tmp/Sys-Syslog-0.17# ls -lF /proc/15891/fd/4
l-wx------  1 root root 64 Aug 14 18:14 /proc/15891/fd/4 -&gt; /dev/console

Adding the &#34;nowait&#34; option to the openlog&#40;&#41; avoids this hangs, but then,
two processes are left trying to write to the console. So the best solution
is probably to just forget this test for the console.

As these tests pass on both Mandriva Linux systems I have access to
&#40;x86-32 and amd64&#41;, I guess it&#39;s a packager choice. I note that it also
works without hanging on my OSX.4 system.

Time to write a rant about OSes that offer a writeable /dev/console
but indefinitely hang the processes that ever try to write there.

--
Sébastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;14&nbsp;14:23:37&nbsp;2006</span>
    <span class="description">mailscanner [...] ecs.soton.ac.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #20946] Sys::Syslog problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 14 Aug 2006 19:23:11 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Julian Field &lt;mailscanner [...] ecs.soton.ac.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1



Sébastien Aperghis-Tramoni via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=20946">http://rt.cpan.org/Ticket/Display.html?id=20946</a></span> &gt;
&gt; 
&gt; 
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; The hang that was reported to me was on a CentOS 4 system. But another
&gt;&gt;&gt; CentOS 4 system worked fine, so it may be a kernel revision problem or
&gt;&gt;&gt; something subtle like that.
</div>&gt;&gt; Once again, I am unable to reproduce the bug on my systems. This is
&gt;&gt; totally frustrating. I&#39;ll try tomorrow on the Debian system where I
&gt;&gt; once saw the problem.
</div>&gt; 
&gt; Ok, I gave it a try on a Debian system I have access to, and I can reproduce
&gt; the problem there:
&gt; 
&gt; grive:/tmp/Sys-Syslog-0.17# prove -bv t/syslog.t
&gt; ...
&gt; ok 135 - setlogsock&#40;&#41; called with [&#39;console&#39;]
&gt; ok 136 - setlogsock&#40;&#41; should return true: &#39;1&#39;
&gt; ok 137 - setlogsock&#40;&#41; called with &#39;console&#39;
&gt; ok 138 - setlogsock&#40;&#41; should return true: &#39;1&#39;
&gt; ok 139 - openlog&#40;&#41; called with facility &#39;local0&#39; and without option &#39;ndelay&#39;
&gt; ok 140 - openlog&#40;&#41; should return true: &#39;Sys::Syslog::SYSLOG&#39;
&gt; ok 141 - openlog&#40;&#41; called with facility &#39;local0&#39; with option &#39;ndelay&#39;
&gt; ok 142 - openlog&#40;&#41; should return true: &#39;Sys::Syslog::SYSLOG&#39;
&gt; ok 143 - syslog&#40;&#41; called with level -1
&gt; ok 144 - syslog&#40;&#41; should return false: &#39;0&#39;
&gt; ok 145 - syslog&#40;&#41; called with level &#39;info,notice&#39;
&gt; ok 146 - syslog&#40;&#41; should return false: &#39;0&#39;
&gt; ok 147 - syslog&#40;&#41; called with level &#39;info,notice&#39;
&gt; ok 148 - syslog&#40;&#41; should return false: &#39;0&#39;
&gt; 
&gt; And indeed, it hangs at this points, before test 149, at line 140 of
&gt; t/syslog.t, while trying to write the message to the console:
&gt; 
&gt; grive:/tmp/Sys-Syslog-0.17# strace -p 15891
&gt; Process 15891 attached - interrupt to quit
&gt; write&#40;4, &#34;&lt;134&gt;Aug 14 18:07:24 perl: uid 0&#34;..., 124 &lt;unfinished ...&gt;
&gt; Process 15891 detached
&gt; 
&gt; grive:/tmp/Sys-Syslog-0.17# ls -lF /proc/15891/fd/4
&gt; l-wx------  1 root root 64 Aug 14 18:14 /proc/15891/fd/4 -&gt; /dev/console
&gt; 
&gt; Adding the &#34;nowait&#34; option to the openlog&#40;&#41; avoids this hangs, but then,
&gt; two processes are left trying to write to the console. So the best solution
&gt; is probably to just forget this test for the console.
&gt; 
&gt; As these tests pass on both Mandriva Linux systems I have access to
&gt; &#40;x86-32 and amd64&#41;, I guess it&#39;s a packager choice. I note that it also
&gt; works without hanging on my OSX.4 system.
</div>
Thanks for hunting for it, well found. I couldn&#39;t reproduce it myself.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Time to write a rant about OSes that offer a writeable /dev/console
&gt; but indefinitely hang the processes that ever try to write there.
</div>
Indeed!

Does anyone explicitly only write to the console any more these days? 
We&#39;re a bit beyond the days of attaching line-printers to the console 
serial port. I still have a VT100 for connecting to Sun&#39;s serial ports 
though :-&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; --
&gt; Sébastien Aperghis-Tramoni
&gt; 
&gt; Close the world, txEn eht nepO.
&gt; 
</div>
- -- 
Julian Field
www.MailScanner.info
Buy the MailScanner book at www.MailScanner.info/store

MailScanner customisation, or any advanced system administration help?
Contact me at Jules@MailScanner.biz

PGP footprint: EE81 D763 3DB0 0BFD E1DC 7222 11F6 5947 1415 B654
For all your IT requirements visit www.transtec.co.uk


-----BEGIN PGP SIGNATURE-----
Version: PGP SDK 3.7.0
Charset: UTF-8

wj8DBQFE4L+TEfZZRxQVtlQRAl2vAKCIw54UOLRw/zYjs9+YrgSV/uyFPgCfdZ6k
J6W7Lb74HEJi41g+MeYjpSY=
=4ONk
-----END PGP SIGNATURE-----

-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.
For all your IT requirements visit www.transtec.co.uk
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;14&nbsp;15:40:36&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #20946] Sys::Syslog problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 14 Aug 2006 21:40:16 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sébastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Quoting &#34;mailscanner@ecs.soton.ac.uk via RT&#34;:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; And indeed, it hangs at this points, before test 149, at line 140 of
&gt;&gt; t/syslog.t, while trying to write the message to the console: [...]
&gt;&gt;
&gt;&gt; Adding the &#34;nowait&#34; option to the openlog&#40;&#41; avoids this hangs, but then,
&gt;&gt; two processes are left trying to write to the console. So the best solution
&gt;&gt; is probably to just forget this test for the console.
</div>&gt;
&gt; Thanks for hunting for it, well found. I couldn&#39;t reproduce it myself.
</div>
It was a 10 minutes tracking once I had access to a system where the
problem occured.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Time to write a rant about OSes that offer a writeable /dev/console
&gt;&gt; but indefinitely hang the processes that ever try to write there.
</div>&gt;
&gt; Does anyone explicitly only write to the console any more these days?
&gt; We&#39;re a bit beyond the days of attaching line-printers to the console
&gt; serial port. I still have a VT100 for connecting to Sun&#39;s serial ports
&gt; though :-&#41;
</div>
Well, if a system offer a writable /dev/console, I&#39;d say one can expect
to write to it. Anyway, I now wonder whether the people who added this
mechanism really tested it because I&#39;m not totally sure it works as they
expected it to work.

--
Sébastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;14&nbsp;21:38:12&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #20946] Sys::Syslog problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 15 Aug 2006 03:37:55 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sébastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here is a beta of the upcoming Sys::Syslog 0.18.
  » <span class="clickylink"><a target="new" rel="nofollow" href="http://www.maddingue.net/Sys-Syslog-0.18_01.tar.gz">http://www.maddingue.net/Sys-Syslog-0.18_01.tar.gz</a></span>

It passes all tests on my systems:
- Perl 5.6.2, 5.8.5-threads, 5.8.8 / Mandrake Linux / x86-32
- Perl 5.8.6-thread / Mac OS X.4 / PowerPC
- Perl 5.8.8 / FreeBSD 6.0 / x86

Can you and other people on the MailScanner list test it on the
systems where previous versions hanged and confirm that this version
doesn&#39;t present the same problem?

&#40;I can&#39;t send a mail to the mailing list myself because I can&#39;t
connect to the MailScanner site since a few hours now.&#41;

Thanks in advance

--
Sébastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;05&nbsp;17:13:02&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The test hanging issue has been resolved with version 0.18

-- 
Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;05&nbsp;17:13:07&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;05&nbsp;17:13:20&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Fixed in 0.18 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
