<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #20988 for BerkeleyDB: nmake fail: &#39;DBTKEY&#39; : illegal use</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #20988 for BerkeleyDB: nmake fail: &#39;DBTKEY&#39; : illegal use</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/BerkeleyDB/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/BerkeleyDB/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/BerkeleyDB/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/BerkeleyDB/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/BerkeleyDB">BerkeleyDB CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">20988</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/BerkeleyDB/Active/">BerkeleyDB</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
alexchorny [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-3650-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.29    </td>
  </tr>
  <tr id="CF-3651-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;14&nbsp;13:33:59&nbsp;2006</span>
    <span class="description">alexchorny [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> nmake fail: &#39;DBTKEY&#39; : illegal use</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">perl v5.8.7 built for MSWin32-x86-multi-thread
Binary build 813
perl -V attached

Berkeley DB 4.4.20: &#40;January 10, 2006&#41;
Version: &#34;build_all - Win32 Release&#34;
Copied libdb44.dll &#38; others to libdb.*.

Microsoft &#40;R&#41; Program Maintenance Utility   Version 1.50
Copyright &#40;c&#41; Microsoft Corp 1988-94. All rights reserved.

        cl -c  -I./lib  -nologo -Gf -W3 -MD -Zi -DNDEBUG -O1 -DWIN32
-D_CONSOLE -DNO_STRIC
T -DHAVE_DES_FCRYPT -DBUILT_BY_ACTIVESTATE -DNO_HASH_SEED
-DUSE_SITECUSTOMIZE -DPERL_IMPLI
CIT_CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -DPERL_MSVCRT_READFIX -MD
-Zi -DNDEBUG -O1
 -DVERSION=\&#34;0.29\&#34;  -DXS_VERSION=\&#34;0.29\&#34;  &#34;-IC:\Perl\lib\CORE&#34;  
BerkeleyDB.c
BerkeleyDB.c
BerkeleyDB.xs&#40;1195&#41; : warning C4101: &#39;skey_ptr&#39; : unreferenced local
variable
BerkeleyDB.xs&#40;1194&#41; : warning C4101: &#39;skey_len&#39; : unreferenced local
variable
BerkeleyDB.xs&#40;2098&#41; : warning C4101: &#39;av&#39; : unreferenced local variable
BerkeleyDB.xs&#40;3565&#41; : error C2275: &#39;DBTKEY&#39; : illegal use of this type
as an expression
        BerkeleyDB.xs&#40;346&#41; : see declaration of &#39;DBTKEY&#39;
BerkeleyDB.xs&#40;3565&#41; : error C2146: syntax error : missing &#39;;&#39; before
identifier &#39;end_key&#39;
BerkeleyDB.xs&#40;3565&#41; : error C2065: &#39;end_key&#39; : undeclared identifier
BerkeleyDB.xs&#40;3598&#41; : warning C4133: &#39;=&#39; : incompatible types - from
&#39;int *&#39; to &#39;struct __
db_dbt *&#39;
BerkeleyDB.c&#40;5209&#41; : error C2224: left of &#39;.data&#39; must have struct/union
type
BerkeleyDB.c&#40;5209&#41; : error C2198: &#39;Perl_sv_setiv&#39; : too few actual
parameters
BerkeleyDB.c&#40;5209&#41; : error C2224: left of &#39;.size&#39; must have struct/union
type
BerkeleyDB.c&#40;5209&#41; : error C2224: left of &#39;.data&#39; must have struct/union
type
BerkeleyDB.c&#40;5209&#41; : error C2224: left of &#39;.size&#39; must have struct/union
type
BerkeleyDB.c&#40;5209&#41; : error C2198: &#39;Perl_sv_setpvn&#39; : too few actual
parameters
NMAKE : fatal error U1077: &#39;C:\WINDOWS\system32\cmd.exe&#39; : return code &#39;0x2&#39;


-------
Alexandr Ciornii, <span class="clickylink"><a target="new" rel="nofollow" href="http://chorny.net">http://chorny.net</a></span>
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> perlV</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;18&nbsp;03:55:19&nbsp;2006</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> PMQS [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Aug 14 13:33:59 2006, alexchorny@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; perl v5.8.7 built for MSWin32-x86-multi-thread
&gt; Binary build 813
&gt; perl -V attached
&gt; 
&gt; Berkeley DB 4.4.20: &#40;January 10, 2006&#41;
&gt; Version: &#34;build_all - Win32 Release&#34;
&gt; Copied libdb44.dll &#38; others to libdb.*.
&gt; 
&gt; Microsoft &#40;R&#41; Program Maintenance Utility   Version 1.50
&gt; Copyright &#40;c&#41; Microsoft Corp 1988-94. All rights reserved.
&gt; 
&gt;         cl -c  -I./lib  -nologo -Gf -W3 -MD -Zi -DNDEBUG -O1 -DWIN32
&gt; -D_CONSOLE -DNO_STRIC
&gt; T -DHAVE_DES_FCRYPT -DBUILT_BY_ACTIVESTATE -DNO_HASH_SEED
&gt; -DUSE_SITECUSTOMIZE -DPERL_IMPLI
&gt; CIT_CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -DPERL_MSVCRT_READFIX -MD
&gt; -Zi -DNDEBUG -O1
&gt;  -DVERSION=\&#34;0.29\&#34;  -DXS_VERSION=\&#34;0.29\&#34;  &#34;-IC:\Perl\lib\CORE&#34;  
&gt; BerkeleyDB.c
&gt; BerkeleyDB.c
&gt; BerkeleyDB.xs&#40;1195&#41; : warning C4101: &#39;skey_ptr&#39; : unreferenced local
&gt; variable
&gt; BerkeleyDB.xs&#40;1194&#41; : warning C4101: &#39;skey_len&#39; : unreferenced local
&gt; variable
&gt; BerkeleyDB.xs&#40;2098&#41; : warning C4101: &#39;av&#39; : unreferenced local 
</div>variable
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; BerkeleyDB.xs&#40;3565&#41; : error C2275: &#39;DBTKEY&#39; : illegal use of this type
&gt; as an expression
&gt;         BerkeleyDB.xs&#40;346&#41; : see declaration of &#39;DBTKEY&#39;
&gt; BerkeleyDB.xs&#40;3565&#41; : error C2146: syntax error : missing &#39;;&#39; before
&gt; identifier &#39;end_key&#39;
&gt; BerkeleyDB.xs&#40;3565&#41; : error C2065: &#39;end_key&#39; : undeclared identifier
&gt; BerkeleyDB.xs&#40;3598&#41; : warning C4133: &#39;=&#39; : incompatible types - from
&gt; &#39;int *&#39; to &#39;struct __
&gt; db_dbt *&#39;
&gt; BerkeleyDB.c&#40;5209&#41; : error C2224: left of &#39;.data&#39; must have 
</div>struct/union
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; type
&gt; BerkeleyDB.c&#40;5209&#41; : error C2198: &#39;Perl_sv_setiv&#39; : too few actual
&gt; parameters
&gt; BerkeleyDB.c&#40;5209&#41; : error C2224: left of &#39;.size&#39; must have 
</div>struct/union
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; type
&gt; BerkeleyDB.c&#40;5209&#41; : error C2224: left of &#39;.data&#39; must have 
</div>struct/union
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; type
&gt; BerkeleyDB.c&#40;5209&#41; : error C2224: left of &#39;.size&#39; must have 
</div>struct/union
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; type
&gt; BerkeleyDB.c&#40;5209&#41; : error C2198: &#39;Perl_sv_setpvn&#39; : too few actual
&gt; parameters
&gt; NMAKE : fatal error U1077: &#39;C:\WINDOWS\system32\cmd.exe&#39; : return 
</div>code &#39;0x2&#39;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 
&gt; -------
&gt; Alexandr Ciornii, <span class="clickylink"><a target="new" rel="nofollow" href="http://chorny.net">http://chorny.net</a></span>
</div>

Hi Alexandr,

this is a known problem that will be fixed in the next release of 
BerkeleyDB. In the meantime, you can apply this change to fix the issue.

Edit BerkeleyDB.xs and find this section of code 

DualType 
compact&#40;db, start=NULL, stop=NULL, c_data=NULL, flags=0, end=NULL&#41; 
        BerkeleyDB::Common      db 
        SVnull*             start 
        SVnull*             stop 
        SVnull*             c_data 
        u_int32_t       flags 
        SVnull*             end 
    INIT: 
        DBTKEY      end_key; 
    CODE: 



Change it to this 

DualType 
compact&#40;db, start=NULL, stop=NULL, c_data=NULL, flags=0, end=NULL&#41; 
    PREINIT: 
        DBTKEY      end_key; 
    INPUT: 
        BerkeleyDB::Common      db 
        SVnull*             start 
        SVnull*             stop 
        SVnull*             c_data 
        u_int32_t       flags 
        SVnull*             end 
    CODE: 

If you still have a problem, do get back to me. 

cheers
Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;18&nbsp;03:55:21&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;18&nbsp;04:01:40&nbsp;2006</span>
    <span class="description">Paul.Marquess [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #20988] nmake fail: &#39;DBTKEY&#39; : illegal use </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 18 Aug 2006 09:00:45 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-BerkeleyDB [...] rt.cpan.org&gt;, &lt;alexchorny [...] gmail.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Paul Marquess&#34; &lt;paul.marquess [...] ntlworld.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Aug 14 13:33:59 2006, alexchorny@gmail.com wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; perl v5.8.7 built for MSWin32-x86-multi-thread
&gt; Binary build 813
&gt; perl -V attached
&gt; 
&gt; Berkeley DB 4.4.20: &#40;January 10, 2006&#41;
&gt; Version: &#34;build_all - Win32 Release&#34;
&gt; Copied libdb44.dll &#38; others to libdb.*.
&gt; 
&gt; Microsoft &#40;R&#41; Program Maintenance Utility Version 1.50
&gt; Copyright &#40;c&#41; Microsoft Corp 1988-94. All rights reserved.
&gt; 
&gt; cl -c -I./lib -nologo -Gf -W3 -MD -Zi -DNDEBUG -O1 -DWIN32
&gt; -D_CONSOLE -DNO_STRIC
&gt; T -DHAVE_DES_FCRYPT -DBUILT_BY_ACTIVESTATE -DNO_HASH_SEED
&gt; -DUSE_SITECUSTOMIZE -DPERL_IMPLI
&gt; CIT_CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -DPERL_MSVCRT_READFIX -MD
&gt; -Zi -DNDEBUG -O1
&gt; -DVERSION=\&#34;0.29\&#34; -DXS_VERSION=\&#34;0.29\&#34; &#34;-IC:\Perl\lib\CORE&#34; 
&gt; BerkeleyDB.c
&gt; BerkeleyDB.c
&gt; BerkeleyDB.xs&#40;1195&#41; : warning C4101: &#39;skey_ptr&#39; : unreferenced local
&gt; variable
&gt; BerkeleyDB.xs&#40;1194&#41; : warning C4101: &#39;skey_len&#39; : unreferenced local
&gt; variable
&gt; BerkeleyDB.xs&#40;2098&#41; : warning C4101: &#39;av&#39; : unreferenced local variable
&gt; BerkeleyDB.xs&#40;3565&#41; : error C2275: &#39;DBTKEY&#39; : illegal use of this type
&gt; as an expression
&gt; BerkeleyDB.xs&#40;346&#41; : see declaration of &#39;DBTKEY&#39;
&gt; BerkeleyDB.xs&#40;3565&#41; : error C2146: syntax error : missing &#39;;&#39; before
&gt; identifier &#39;end_key&#39;
&gt; BerkeleyDB.xs&#40;3565&#41; : error C2065: &#39;end_key&#39; : undeclared identifier
&gt; BerkeleyDB.xs&#40;3598&#41; : warning C4133: &#39;=&#39; : incompatible types - from
&gt; &#39;int *&#39; to &#39;struct __
&gt; db_dbt *&#39;
&gt; BerkeleyDB.c&#40;5209&#41; : error C2224: left of &#39;.data&#39; must have struct/union
&gt; type
&gt; BerkeleyDB.c&#40;5209&#41; : error C2198: &#39;Perl_sv_setiv&#39; : too few actual
&gt; parameters
&gt; BerkeleyDB.c&#40;5209&#41; : error C2224: left of &#39;.size&#39; must have struct/union
&gt; type
&gt; BerkeleyDB.c&#40;5209&#41; : error C2224: left of &#39;.data&#39; must have struct/union
&gt; type
&gt; BerkeleyDB.c&#40;5209&#41; : error C2224: left of &#39;.size&#39; must have struct/union
&gt; type
&gt; BerkeleyDB.c&#40;5209&#41; : error C2198: &#39;Perl_sv_setpvn&#39; : too few actual
&gt; parameters
&gt; NMAKE : fatal error U1077: &#39;C:\WINDOWS\system32\cmd.exe&#39; : return code
</div>&#39;0x2&#39;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 
&gt; -------
&gt; Alexandr Ciornii, <span class="clickylink"><a target="new" rel="nofollow" href="http://chorny.net">http://chorny.net</a></span>
</div>


Hi Alexandr,

this is a known problem that will be fixed in the next release of 
BerkeleyDB. In the meantime, you can apply this change to fix the issue.

Edit BerkeleyDB.xs and find this section of code 

DualType 
compact&#40;db, start=NULL, stop=NULL, c_data=NULL, flags=0, end=NULL&#41; 
BerkeleyDB::Common db 
SVnull* start 
SVnull* stop 
SVnull* c_data 
u_int32_t flags 
SVnull* end 
INIT: 
DBTKEY end_key; 
CODE: 



Change it to this 

DualType 
compact&#40;db, start=NULL, stop=NULL, c_data=NULL, flags=0, end=NULL&#41; 
PREINIT: 
DBTKEY end_key; 
INPUT: 
BerkeleyDB::Common db 
SVnull* start 
SVnull* stop 
SVnull* c_data 
u_int32_t flags 
SVnull* end 
CODE: 

If you still have a problem, do get back to me. 

cheers
Paul


                
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">___________________________________________________________ 
To help you stay safe and secure online, we&#39;ve developed the all new Yahoo! Security Centre. <span class="clickylink"><a target="new" rel="nofollow" href="http://uk.security.yahoo.com">http://uk.security.yahoo.com</a></span>
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;18&nbsp;15:48:38&nbsp;2006</span>
    <span class="description">alexchorny [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> encrypt.t error</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> alexchorny [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Compilation succeeded.
t/encrypt........NOK 7Can&#39;t call method &#34;db_put&#34; on an undefined value
at t/encrypt.t line 112.
t/encrypt........dubious
        Test returned status 2 &#40;wstat 512, 0x200&#41;
DIED. FAILED tests 7-80
        Failed 74/80 tests, 7.50% okay

perl v5.8.7 built for MSWin32-x86-multi-thread
Binary build 813

-------
Alexandr Ciornii, <span class="clickylink"><a target="new" rel="nofollow" href="http://chorny.net">http://chorny.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;21&nbsp;12:46:50&nbsp;2006</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Looks like you aren&#39;t building my module using a copy of Berkeley DB 
with encryption support included. The library is available both with 
and without encryption.

Paul
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
