<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #7456 for MIME-Base64: binary data incorrectly encoded into quoted-printable</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #7456 for MIME-Base64: binary data incorrectly encoded into quoted-printable</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/MIME-Base64/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/MIME-Base64/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/MIME-Base64/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/MIME-Base64/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/MIME-Base64">MIME-Base64 CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">7456</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/MIME-Base64/Active/">MIME-Base64</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ak2 [...] smr.ru

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-21320-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
3.01    </td>
  </tr>
  <tr id="CF-21321-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;24&nbsp;09:05:33&nbsp;2004</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> binary data incorrectly encoded into quoted-printable</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

According to RFC2045 &#40;rule 4&#41; \015 and \012 bytes &#40;CR and LF&#41; of non-text data should be encoded as all other nonprintable bytes &#40;=0D, =0A&#41;, but encode_qp encodes input data as a text chunk - leaving &#34;\n&#34; untouched.

It leads to data corruption when encoding on Unix binary data aimed to Win
for example. Byte \012 from the source data stream will be two-byte sequence at the destination.

We&#39;ve encountered such a case on a real mail after mimedefang processing, using MIME-tools, which in turn uses MIME::Base64

IMHO the easiest solution is always encoding input as a binary stream.
It should work fine for both text and binary data, but actually such a approach is not thoroughly RFC-compliant.

I guess that to perfectly adhere to the RFC 2045 the module should process text and non-text input data in different ways &#40;rule 4&#41;, so another parameter indicating data type is necessary &#40;i think that guessing data type in the module is not the right thing&#41;.

Suggested patch is attached &#40;MIME-Base64-3.01.patch.gz&#41;. In this case encode_qp will get up to 3 input parameters: data, eol, and flag indicating whether the input data stream is a text.

Below inline is a &#34;light&#34; patch for processing input as binary.

Alexey Kravchuk

diff -u MIME-Base64-3.01.orig/Base64.xs MIME-Base64-3.01/Base64.xs
--- MIME-Base64-3.01.orig/Base64.xs     2004-03-29 15:35:13.000000000 +0400
+++ MIME-Base64-3.01/Base64.xs  2004-08-23 17:43:10.000000000 +0400
@@ -340,6 +340,7 @@
                break;
             }
            else if &#40;*p == &#39;\n&#39; &#38;&#38; eol_len&#41; {
+               sv_catpvf&#40;RETVAL, &#34;=%02X=&#34;, &#40;unsigned char&#41;&#39;\n&#39;&#41;;
                sv_catpvn&#40;RETVAL, eol, eol_len&#41;;
                p++;
                linelen = 0;
Common subdirectories: MIME-Base64-3.01.orig/t and MIME-Base64-3.01/t
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;24&nbsp;09:48:08&nbsp;2004</span>
    <span class="description">GAAS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I see your point.  Still beats me why anybody would want 
to encode binary data with quoted-printable :&#41; 
 
I don&#39;t like introducing another parameter.  I suggest that 
we instead attach some more magic to the $eol parameter.  We 
could for instance pass it as &#34;=0A&#34; to signal that we want 
newlines encoded.  This would have the same effect as $eol, 
but you would still get soft line breaks.  This would also 
produce a nice square block. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;24&nbsp;11:18:36&nbsp;2004</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ak2 [...] smr.ru</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[GAAS - Tue Aug 24 09:48:08 2004]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I see your point.  Still beats me why anybody would want 
&gt; to encode binary data with quoted-printable :&#41; 
&gt;  
</div>
I don&#39;t know also, it was some client&#39;s mail.   ;&#41;


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I don&#39;t like introducing another parameter.  I suggest that 
&gt; we instead attach some more magic to the $eol parameter.  We 
&gt; could for instance pass it as &#34;=0A&#34; to signal that we want 
&gt; newlines encoded.  This would have the same effect as $eol, 
&gt; but you would still get soft line breaks.  This would also 
&gt; produce a nice square block. 
</div>
I tried, but it does not work &#34;as is&#34;. The problem is that the same 
specified $eol is used for soft-line breaking escaped with extra &#34;=&#34;.

Are you going to check a first char of $eol and if it&#39;s a &#34;=&#34;,
then &#34;=\n&#34; forced for soft line-breaking, yet for &#39;\n&#39; bytes in input 
data stream the specified $eol is used? Is it right?

Attached is a patch implementing such a approach, as i understood it. 
Please take a look. 

$eol should be &#34;=A0&#34; or &#34;=A0=\n&#34; for binary encoding.
And it should be &#34;\n&#34; or just omitted for text encoding.

Alexey Kravchuk
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -u -r MIME-Base64-3.01.orig/Base64.xs MIME-Base64-3.01/Base64.xs
--- MIME-Base64-3.01.orig/Base64.xs	2004-03-29 15:35:13.000000000 +0400
+++ MIME-Base64-3.01/Base64.xs	2004-08-24 19:01:31.000000000 +0400
@@ -275,6 +275,8 @@
 	char *p;
 	char *p_beg;
 	STRLEN p_len;
+	
+	bool textual_type;
 
 	CODE:
 #if PERL_REVISION == 5 &#38;&#38; PERL_VERSION &gt;= 6
@@ -287,6 +289,12 @@
 	    eol = &#34;\n&#34;;
 	    eol_len = 1;
 	}
+	
+	if&#40; eol_len &#38;&#38; eol[0] == &#39;=&#39;&#41; {
+	    textual_type = 0;
+	} else {
+	    textual_type = 1;
+	}
 
 	beg = SvPV&#40;sv, sv_len&#41;;
 	end = beg + sv_len;
@@ -325,8 +333,12 @@
 			sv_catpvn&#40;RETVAL, p_beg, len&#41;;
 			p_beg += len;
 			p_len -= len;
-			sv_catpvn&#40;RETVAL, &#34;=&#34;, 1&#41;;
-			sv_catpvn&#40;RETVAL, eol, eol_len&#41;;
+			if &#40; ! textual_type &#41; {
+			    sv_catpvn&#40;RETVAL, &#34;=\n&#34;, 2&#41;;
+			} else {
+		    	    sv_catpvn&#40;RETVAL, &#34;=&#34;, 1&#41;;
+			    sv_catpvn&#40;RETVAL, eol, eol_len&#41;;
+			}
 		        linelen = 0;
 		    }
                 }
@@ -348,8 +360,12 @@
 		/* output escaped char &#40;with line breaks&#41; */
 	        assert&#40;p &lt; end&#41;;
 		if &#40;eol_len &#38;&#38; linelen &gt; MAX_LINE - 4&#41; {
-		    sv_catpvn&#40;RETVAL, &#34;=&#34;, 1&#41;;
-		    sv_catpvn&#40;RETVAL, eol, eol_len&#41;;
+		    if &#40; ! textual_type &#41; {
+		        sv_catpvn&#40;RETVAL, &#34;=\n&#34;, 2&#41;;
+		    } else {
+		        sv_catpvn&#40;RETVAL, &#34;=&#34;, 1&#41;;
+		        sv_catpvn&#40;RETVAL, eol, eol_len&#41;;
+		    }
 		    linelen = 0;
 		}
 	        sv_catpvf&#40;RETVAL, &#34;=%02X&#34;, &#40;unsigned char&#41;*p&#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;24&nbsp;11:51:52&nbsp;2004</span>
    <span class="description">GAAS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi-jacking the $eol argument did not work out as I want it 
to be able to specify how soft-breaks end up.  So, I ended 
up with adding another argument to the function.  See attached 
patch. 
 
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Index: Base64.xs
===================================================================
RCS file: /home/gisle/v/cvs-repo/aas/perl/mods/MIME-Base64/Base64.xs,v
retrieving revision 3.2
diff -u -r3.2 Base64.xs
--- Base64.xs	29 Mar 2004 11:35:13 -0000	3.2
+++ Base64.xs	24 Aug 2004 15:34:50 -0000
@@ -263,11 +263,12 @@
 SV*
 encode_qp&#40;sv,...&#41;
 	SV* sv
-	PROTOTYPE: $;$
+	PROTOTYPE: $;$$
 
 	PREINIT:
 	char *eol;
 	STRLEN eol_len;
+	int binary;
 	STRLEN sv_len;
 	STRLEN linelen;
 	char *beg;
@@ -288,6 +289,8 @@
 	    eol_len = 1;
 	}
 
+	binary = &#40;items &gt; 2 &#38;&#38; SvTRUE&#40;ST&#40;2&#41;&#41;&#41;;
+
 	beg = SvPV&#40;sv, sv_len&#41;;
 	end = beg + sv_len;
 
@@ -339,7 +342,7 @@
 	    if &#40;p == end&#41; {
 		break;
             }
-	    else if &#40;*p == &#39;\n&#39; &#38;&#38; eol_len&#41; {
+	    else if &#40;*p == &#39;\n&#39; &#38;&#38; eol_len &#38;&#38; !binary&#41; {
 	        sv_catpvn&#40;RETVAL, eol, eol_len&#41;;
 	        p++;
 		linelen = 0;
@@ -364,6 +367,11 @@
 	    }
         }
 
+	if &#40;binary &#38;&#38; SvCUR&#40;RETVAL&#41; &#38;&#38; eol_len &#38;&#38; linelen&#41; {
+	    sv_catpvn&#40;RETVAL, &#34;=&#34;, 1&#41;;
+	    sv_catpvn&#40;RETVAL, eol, eol_len&#41;;
+	}
+
 	OUTPUT:
 	RETVAL
 
Index: QuotedPrint.pm
===================================================================
RCS file: /home/gisle/v/cvs-repo/aas/perl/mods/MIME-Base64/QuotedPrint.pm,v
retrieving revision 3.1
diff -u -r3.1 QuotedPrint.pm
--- QuotedPrint.pm	29 Mar 2004 11:55:49 -0000	3.1
+++ QuotedPrint.pm	24 Aug 2004 15:51:17 -0000
@@ -50,6 +50,8 @@
 
 =item encode_qp&#40;$str, $eol&#41;
 
+=item encode_qp&#40;$str, $eol, $binmode&#41;
+
 This function returns an encoded version of the string given as
 argument.
 
@@ -61,8 +63,16 @@
 suitable for external consumption.  The string &#34;\r\n&#34; produces the
 same result on many platforms, but not all.
 
-An $eol of &#34;&#34; &#40;the empty string&#41; is special.  In this case, no &#34;soft line breaks&#34; are introduced
-and any literal &#34;\n&#34; in the original data is encoded as well.
+An $eol of &#34;&#34; &#40;the empty string&#41; is special.  In this case, no &#34;soft
+line breaks&#34; are introduced and any &#34;\n&#34; in the original data is
+encoded as well.
+
+The third argument will select binary mode if passed as a TRUE value.
+In binary mode &#34;\n&#34; will be encoded in the same way as any other
+non-printable character.  This ensures that a decoder will end up with
+exactly the same string whatever line ending sequence it uses.  In
+general it is preferable to use the base64 encoding of binary data;
+see L&lt;MIME::Base64&gt;.
 
 =item decode_qp&#40;$str&#41;;
 
Index: t/quoted-print.t
===================================================================
RCS file: /home/gisle/v/cvs-repo/aas/perl/mods/MIME-Base64/t/quoted-print.t,v
retrieving revision 3.0
diff -u -r3.0 quoted-print.t
--- t/quoted-print.t	14 Jan 2004 11:59:07 -0000	3.0
+++ t/quoted-print.t	24 Aug 2004 15:42:19 -0000
@@ -91,7 +91,7 @@
    [&#34;foo\t \n \t&#34;, &#34;foo=09=20\n=20=09&#34;],
 &#41;;
 
-$notests = @tests + 13;
+$notests = @tests + 16;
 print &#34;1..$notests\n&#34;;
 
 $testno = 0;
@@ -164,5 +164,23 @@
 print &#34;not &#34; unless encode_qp&#40;&#34;$x70!2345$x70\n&#34;, &#34;&#34;&#41; eq &#34;$x70!2345$x70=0A&#34;;
 $testno++; print &#34;ok $testno\n&#34;;
 
+# Test binary encoding
+print &#34;not &#34; unless encode_qp&#40;&#34;foo&#34;, undef, 1&#41; eq &#34;foo=\n&#34;;
+$testno++; print &#34;ok $testno\n&#34;;
+
+print &#34;not &#34; unless encode_qp&#40;&#34;foo\nbar\r\n&#34;, undef, 1&#41; eq &#34;foo=0Abar=0D=0A=\n&#34;;
+$testno++; print &#34;ok $testno\n&#34;;
+
+print &#34;not &#34; unless encode_qp&#40;join&#40;&#34;&#34;, map chr, 0..255&#41;, undef, 1&#41; eq &lt;&lt;&#39;EOT&#39;; $testno++; print &#34;ok $testno\n&#34;;
+=00=01=02=03=04=05=06=07=08=09=0A=0B=0C=0D=0E=0F=10=11=12=13=14=15=16=17=18=
+=19=1A=1B=1C=1D=1E=1F !&#34;#$%&#38;&#39;&#40;&#41;*+,-./0123456789:;&lt;=3D&gt;?@ABCDEFGHIJKLMNOPQRS=
+TUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~=7F=80=81=82=83=84=85=86=87=88=
+=89=8A=8B=8C=8D=8E=8F=90=91=92=93=94=95=96=97=98=99=9A=9B=9C=9D=9E=9F=A0=A1=
+=A2=A3=A4=A5=A6=A7=A8=A9=AA=AB=AC=AD=AE=AF=B0=B1=B2=B3=B4=B5=B6=B7=B8=B9=BA=
+=BB=BC=BD=BE=BF=C0=C1=C2=C3=C4=C5=C6=C7=C8=C9=CA=CB=CC=CD=CE=CF=D0=D1=D2=D3=
+=D4=D5=D6=D7=D8=D9=DA=DB=DC=DD=DE=DF=E0=E1=E2=E3=E4=E5=E6=E7=E8=E9=EA=EB=EC=
+=ED=EE=EF=F0=F1=F2=F3=F4=F5=F6=F7=F8=F9=FA=FB=FC=FD=FE=FF=
+EOT
+
 print &#34;not &#34; if $] &gt;= 5.006 &#38;&#38; &#40;eval &#39;encode_qp&#40;&#34;XXX \x{100}&#34;&#41;&#39; || !$@&#41;;
 $testno++; print &#34;ok $testno\n&#34;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;25&nbsp;04:57:10&nbsp;2004</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ak2 [...] smr.ru</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[GAAS - Tue Aug 24 11:51:52 2004]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi-jacking the $eol argument did not work out as I want it 
&gt; to be able to specify how soft-breaks end up.  So, I ended 
&gt; up with adding another argument to the function.  See attached 
&gt; patch. 
&gt;  
</div>
It works well on our trouble mail.
Thank you.

Alexey Kravchuk
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;25&nbsp;05:45:51&nbsp;2004</span>
    <span class="description">GAAS [...] cpan.org -  Status changed from &#39;new&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
