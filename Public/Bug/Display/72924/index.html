<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #72924 for File-chdir: Fails t/newline.t on Cygwin</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #72924 for File-chdir: Fails t/newline.t on Cygwin</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=File-chdir">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=File-chdir">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=File-chdir">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=File-chdir">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/dagolden/File-chdir/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/File-chdir">File-chdir CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">72924</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=File-chdir">File-chdir</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
KENTNL [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-12704-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.1006    </td>
  </tr>
  <tr id="CF-12705-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=72924">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1007230" href="/Public/Bug/Display.html?id=72924#txn-1007230">#</a>      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;03&nbsp;17:34:11&nbsp;2011</span>
    <span class="description">KENTNL [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Fails t/newline.t on Cygwin</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1007230/524850/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/524850">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza">t/newline.t ....... Cannot chdir back to /home/Kent/.cpanm/work/1322950286.4824/File-chdir-0.1006/t/testdir4908: No such file or directory at /home/Kent/.cpanm/work/1322950286.4824/File-chdir-0.1006/lib/File/chdir.pm line 21<br>

Dubious, test returned 2 (wstat 512, 0x200)<br>

No subtests run<br>

<br>

<br>

So running with a call to system(&quot;bash&quot;)&nbsp; immediately after the mkdir call gets me this:<br>

<br>

ls -laF t/<br>

total 34<br>

drwxr-xr-x+ 1 Kent None&nbsp;&nbsp;&nbsp; 0 Dec&nbsp; 4 11:16 ./<br>

drwxr-xr-x+ 1 Kent None&nbsp;&nbsp;&nbsp; 0 Dec&nbsp; 4 11:11 ../<br>

-rw-r--r--&nbsp; 1 Kent None 1213 Nov&nbsp; 3 11:11 00-compile.t<br>

-rw-r--r--&nbsp; 1 Kent None 5421 Nov&nbsp; 3 11:11 array.t<br>

-rw-r--r--&nbsp; 1 Kent None 1059 Nov&nbsp; 3 11:11 chdir.t<br>

-rw-r--r--&nbsp; 1 Kent None 2933 Nov&nbsp; 3 11:11 delete-array.t<br>

drwxr-xr-x+ 1 Kent None&nbsp;&nbsp;&nbsp; 0 Nov&nbsp; 3 11:11 lib/<br>

-rw-r--r--&nbsp; 1 Kent None&nbsp; 532 Nov&nbsp; 3 11:11 nested.t<br>

-rw-r--r--&nbsp; 1 Kent None&nbsp; 523 Dec&nbsp; 4 11:16 newline.t<br>

drwxr-xr-x+ 1 Kent None&nbsp;&nbsp;&nbsp; 0 Dec&nbsp; 4 11:16 testdir2008<br>

test/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #&lt;-- line feed working<br>

-rw-r--r--&nbsp; 1 Kent None 1493 Nov&nbsp; 3 11:11 var.t<br>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>But trying to chdir/ls into it from shell fails:<br>

<br>

ls &quot;testdir2008^Mtest&quot;<br>

test: No such file or directory&nbsp; &nbsp;</p>

<p>&nbsp;</p>

<p>The only solution I could find for this was:</p>

<p>&nbsp;</p>

<p>my $Can_mkdir_With_Newline = mkdir $Test_Dir ;<br>

eval { abs_path($Test_Dir) ; 1 } or undef $Can_mkdir_With_Newline;<br>

<br>

&nbsp;</p>

<p>because abs_path($Test_Dir) triggers &quot;No such file or directory at t/newline.t line 16&quot;<br>

<br>

I tried something like </p>

<p>&nbsp;</p>

<p>my $Can_mkdir_With_Newline = mkdir $Test_Dir&nbsp; and eval { abs_path($Test_Dir) ; 1 }; </p>

<p>&nbsp;</p>

<p>But that mysteriously doesn't work as I&nbsp;expect it to, so my brain must be off sleeping somewhere. <br>

&nbsp;</p>

<p>&nbsp;</p>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1009489" href="/Public/Bug/Display.html?id=72924#txn-1009489">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;08&nbsp;13:29:21&nbsp;2011</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #72924] Fails t/newline.t on Cygwin</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 08 Dec 2011 10:29:11 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-File-chdir [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1009489/526038/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/526038">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 735b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2011.12.3 2:34 PM, Kent Fredric via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; But trying to chdir/ls into it from shell fails:
</div>
Nuts.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The only solution I could find for this was:
&gt; 
&gt; my $Can_mkdir_With_Newline = mkdir $Test_Dir ;
&gt; eval { abs_path&#40;$Test_Dir&#41; ; 1 } or undef $Can_mkdir_With_Newline;
&gt; 
&gt; because abs_path&#40;$Test_Dir&#41; triggers &#34;No such file or directory at t/newline.t
&gt; line 16&#34;
</div>
I think that&#39;s relying on a quirk of abs_path&#40;&#41; which probably chdir&#39;s.  A
better test would be to try to chdir into the directory &#40;and then back to the
original&#41;.

You&#39;ve got the system that makes it fail at hand, want to take care of the
patch and testing it?

Also, might want to report to the Cygwin folks that you can make a directory
you can&#39;t chdir into.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1009492" href="/Public/Bug/Display.html?id=72924#txn-1009492">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;08&nbsp;13:29:22&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1009653" href="/Public/Bug/Display.html?id=72924#txn-1009653">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;08&nbsp;20:37:37&nbsp;2011</span>
    <span class="description">KENTNL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1009653/526145/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/526145">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza">On 2011-12-09 07:29:21, schwern@pobox.com wrote: <br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2011.12.3 2:34 PM, Kent Fredric via RT wrote: <br>
<div class="message-stanza open">&gt; &gt; But trying to chdir/ls into it from shell fails: <br>
</div>&gt;  <br>

&gt; Nuts. <br>

&gt;  <br>

&gt; Also, might want to report to the Cygwin folks that you can make a <br>

&gt; directory <br>

&gt; you can't chdir into. <br>
</div><br>

On further attempts it appears I&nbsp;*can*&nbsp;chdir into it, just its, well, weird. <br>

<br>

<p>Kent@Katipo /tmp<br>

mkdir &quot;$( /bin/echo.exe -ne &quot;bog\nstandard&quot; )&quot;</p>

<p>Kent@Katipo /tmp<br>

cd&nbsp; &quot;$( /bin/echo.exe -ne &quot;bog\nstandard&quot; )&quot;</p>

<p>Kent@Katipo /tmp/bogstandard<br>

$ echo &quot;$PWD&quot;<br>

/tmp/bog<br>

standard</p>

<p>Kent@Katipo /tmp/bogstandard<br>

$ find $PWD<br>

find: `/tmp/bog': No such file or directory<br>

find: `standard': No such file or directory<br>

<br>

Kent@Katipo /tmp/bogstandard<br>

$ find &quot;$PWD&quot;<br>

/tmp/bog?standard<br>

&nbsp;</p>

<p>In conclusion, I&nbsp;no longer know what the hell it is I am dealing with -_-<br>

&nbsp;</p>

<p>&nbsp;</p>

<br>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1009660" href="/Public/Bug/Display.html?id=72924#txn-1009660">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;08&nbsp;22:26:04&nbsp;2011</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #72924] Fails t/newline.t on Cygwin</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 08 Dec 2011 19:25:49 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-File-chdir [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1009660/526152/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/526152">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 986b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2011.12.8 5:37 PM, Kent Fredric via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On further attempts it appears I *can* chdir into it, just its, well, weird.
</div>
It&#39;s possible the problem is in the Perl/Cygwin chdir bindings.

Either way, if chdir $dir_with_newline doesn&#39;t work in Perl then that&#39;s all
File::chdir cares about.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Kent@Katipo /tmp
&gt; mkdir &#34;$&#40; /bin/echo.exe -ne &#34;bog\nstandard&#34; &#41;&#34;
&gt; 
&gt; Kent@Katipo /tmp
&gt; cd &#34;$&#40; /bin/echo.exe -ne &#34;bog\nstandard&#34; &#41;&#34;
&gt; 
&gt; Kent@Katipo /tmp/bogstandard
&gt; $ echo &#34;$PWD&#34;
&gt; /tmp/bog
&gt; standard
&gt; 
&gt; Kent@Katipo /tmp/bogstandard
&gt; $ find $PWD
&gt; find: `/tmp/bog&#39;: No such file or directory
&gt; find: `standard&#39;: No such file or directory
</div>
That makes some sense, there&#39;s whitespace in $PWD.  You&#39;d have the same
problem if PWD contains a space.  You asked it to search &#34;/tmp/bog&#34; and
&#34;standard&#34;.



-- 
191. Our Humvees cannot be assembled into a giant battle-robot.
    -- The 213 Things Skippy Is No Longer Allowed To Do In The U.S. Army
           <span class="clickylink"><a target="new" rel="nofollow" href="http://skippyslist.com/list/">http://skippyslist.com/list/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1011786" href="/Public/Bug/Display.html?id=72924#txn-1011786">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;15&nbsp;04:40:27&nbsp;2011</span>
    <span class="description">KENTNL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1011786/527421/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/527421">with headers</a>
<br />
<span class="downloadcontenttype">text/html 730b</span>
</div>
<div class="messagebody">
<div class="message-stanza"><p>Ok then. Seems perl bindings *do*&nbsp;work properly here too.</p>

<p>use 5.14.1;<br>

use strict;<br>

use warnings;<br>

<br>

mkdir(&quot;/tmp/bog\nstandard&quot;) or die &quot;Can't mkdir with \\n&quot;;<br>

chdir(&quot;/tmp/bog\nstandard&quot;) or die &quot;Can't chdir to dir with \\n&quot;;<br>

system(&quot;ls -la .&quot;);<br>

system(&quot;find \&quot;\$PWD\&quot;&quot;);<br>

rmdir(&quot;/tmp/bog\nstandard&quot;);<br>

<br>

&nbsp;</p>

<p>$ perl ex.pl<br>

total 40<br>

drwxr-xr-x+ 1 Kent None 0 Dec 15 22:39 .<br>

drwxrwxrwt+ 1 Kent root 0 Dec 15 22:39 ..<br>

/tmp/bog?standard<br>

<br>

&nbsp;</p>

<p>Anything else you can ask me for please do, I'm confused as hell now =)</p>

<p>&nbsp;</p>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1017475" href="/Public/Bug/Display.html?id=72924#txn-1017475">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;02&nbsp;11:24:56&nbsp;2012</span>
    <span class="description">KENTNL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1017475/530528/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/530528">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza"><p>Ok, I started re-hashing this and re-thinking it. Obviously the underlying infrastructure can handle it, just something is going wrong somewhere.</p>

<p>&nbsp;</p>

<p>&nbsp;use Test::More;<br>

+use Test::Fatal;<br>

<br>

&nbsp;&nbsp;&nbsp; local $CWD = $Test_Dir;<br>

+ is exception {<br>

+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; defined $CWD;<br>

+&nbsp;&nbsp;&nbsp; }, undef , &quot;Evaluating CWD doesn't panic&quot;;<br>

&nbsp;</p>

<p>So on my platform, for some reason, it fails when $CWD&nbsp;has a &quot;\n&quot;&nbsp;in it.</p>

<p>However, if I&nbsp;silence the fatal exception inside the &nbsp;{&nbsp;&nbsp;&nbsp;}&nbsp;area, </p>

<p>&nbsp;&nbsp;&nbsp; exception {<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is $CWD, abs_path;<br>

&nbsp;&nbsp;&nbsp; };<br>

&nbsp;</p>

<p>tests 2 and 3 pass successfully. </p>

<p>I&nbsp;haven't looked at how $CWD works under the hood yet, but I think this leads me to one of 2 conclusions</p>

<p>1. Its actually working, just for some reason falsely excepting when $CWD is evaluated, thinking it cant work when it has.</p>

<p>2. directory changes don't happen until $CWD&nbsp;is evaluated, not when $CWD&nbsp;is assigned as I first assumed.</p>

<p>Hopefully this is more constructive.</p>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1017495" href="/Public/Bug/Display.html?id=72924#txn-1017495">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;02&nbsp;11:38:08&nbsp;2012</span>
    <span class="description">KENTNL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1017495/530543/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/530543">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza">On 2012-01-03 05:24:56, KENTNL wrote: <br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Ok, I started re-hashing this and re-thinking it. Obviously the <br>

&gt; underlying <br>

&gt; infrastructure can handle it, just something is going wrong somewhere. <br>

&gt;  <br>

&gt; use Test::More; <br>

&gt; +use Test::Fatal; <br>

&gt;  <br>

&gt; local $CWD = $Test_Dir; <br>

&gt; + is exception { <br>

&gt; + defined $CWD; <br>

&gt; + }, undef , &quot;Evaluating CWD doesn't panic&quot;; <br>

&gt;  <br>

&gt; So on my platform, for some reason, it fails when $CWD has a &quot;\n&quot; in <br>

&gt; it. <br>

&gt;  <br>

&gt; However, if I silence the fatal exception inside the { } area, <br>

&gt;  <br>

&gt; exception { <br>

&gt; is $CWD, abs_path; <br>

&gt; }; <br>

&gt;  <br>

&gt; tests 2 and 3 pass successfully. <br>

&gt;  <br>

&gt; I haven't looked at how $CWD works under the hood yet, but I think <br>

&gt; this leads <br>

&gt; me to one of 2 conclusions <br>

&gt;  <br>

&gt; 1. Its actually working, just for some reason falsely excepting when <br>

&gt; $CWD is <br>

&gt; evaluated, thinking it cant work when it has. <br>

&gt;  <br>

&gt; 2. directory changes don't happen until $CWD is evaluated, not when <br>

&gt; $CWD is <br>

&gt; assigned as I first assumed. <br>

&gt;  <br>

&gt; Hopefully this is more constructive. <br>
</div><br>

<p>Ah!. So the CWD&nbsp;*does*&nbsp;happen on STORE, and the error ONLY&nbsp;happens on FETCH. Curious.</p>

<p>And the error line is this one:&nbsp;&nbsp; my (&nbsp;$cwd ) = Cwd::abs_path =~ /(.*)/s; </p>

<p>So further testing yeilds:</p>

<p>&nbsp;is exception {<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Cwd::abs_path;<br>

&nbsp;&nbsp;&nbsp; }, undef, 'Cwd::abs_path is broken';<br>

&nbsp;</p>

<p>Which as I suspect, fails. </p>

<p>So I&nbsp;guess its time to punt this problem over to File::Spec team. </p>

<p>&nbsp;</p>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1017544" href="/Public/Bug/Display.html?id=72924#txn-1017544">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;02&nbsp;12:47:30&nbsp;2012</span>
    <span class="description">KENTNL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1017544/530571/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/530571">with headers</a>
<br />
<span class="downloadcontenttype">text/html 417b</span>
</div>
<div class="messagebody">
<div class="message-stanza"><p><span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=73679">https://rt.cpan.org/Ticket/Display.html?id=73679</a></span> #&nbsp;The bug on File::Spec if you want to track it.</p>

<p>Turns out it looks like a problem in Cwd::fast_abs_path , which Cwd::abs_path resolves to on some platforms (&nbsp;ie:&nbsp;Cygwin ).</p>

<p>You can temporarily get around this by calling Cwd::_perl_abs_path instead which doesn't appear to have the same flaw, but probably has a larger speed penalty.</p>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1017547" href="/Public/Bug/Display.html?id=72924#txn-1017547">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;02&nbsp;12:47:31&nbsp;2012</span>
    <span class="description">KENTNL [...] cpan.org -  Dependency on https://rt.cpan.org/Ticket/Display.html?id=73679 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links DeleteLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1017548" href="/Public/Bug/Display.html?id=72924#txn-1017548">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;02&nbsp;12:48:18&nbsp;2012</span>
    <span class="description">KENTNL [...] cpan.org -  Dependency on https://rt.cpan.org/Ticket/Display.html?id=73679 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1017549" href="/Public/Bug/Display.html?id=72924#txn-1017549">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;02&nbsp;12:48:18&nbsp;2012</span>
    <span class="description">KENTNL [...] cpan.org -  Dependency on ticket #73679 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1017844" href="/Public/Bug/Display.html?id=72924#txn-1017844">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;02&nbsp;21:07:37&nbsp;2012</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #72924] Fails t/newline.t on Cygwin</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 2 Jan 2012 21:07:08 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-File-chdir [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Golden &lt;dagolden [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1017844/530750/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/530750">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 288b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, Jan 2, 2012 at 12:47 PM, Kent Fredric via RT
&lt;bug-File-chdir@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Turns out it looks like a problem in Cwd::fast_abs_path , which Cwd::abs_path
&gt; resolves to on some platforms &#40; ie: Cygwin &#41;.
</div>
Thanks, Kent, for doing such great sleuthing on this issue.

-- David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1460698" href="/Public/Bug/Display.html?id=72924#txn-1460698">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;05&nbsp;10:00:23&nbsp;2015</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1460698/777327/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/777327">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 76b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ticket migrated to github as <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/dagolden/File-chdir/issues/7">https://github.com/dagolden/File-chdir/issues/7</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links DeleteLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1460701" href="/Public/Bug/Display.html?id=72924#txn-1460701">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;05&nbsp;10:03:11&nbsp;2015</span>
    <span class="description">dagolden [...] cpan.org -  Dependency on ticket #73679 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1460703" href="/Public/Bug/Display.html?id=72924#txn-1460703">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;05&nbsp;10:03:11&nbsp;2015</span>
    <span class="description">dagolden [...] cpan.org -  Reference to ticket #73679 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1460705" href="/Public/Bug/Display.html?id=72924#txn-1460705">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;05&nbsp;10:03:26&nbsp;2015</span>
    <span class="description">dagolden [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.750184</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
