<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #79065 for WordNet-Similarity: Detecting WN2 and WN3 filetypes on Windows</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #79065 for WordNet-Similarity: Detecting WN2 and WN3 filetypes on Windows</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/WordNet-Similarity/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/WordNet-Similarity/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/WordNet-Similarity/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/WordNet-Similarity/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/WordNet-Similarity">WordNet-Similarity CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">79065</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/WordNet-Similarity/Active/">WordNet-Similarity</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">TPEDERSE [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
NGLENN [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-35948-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.05    </td>
  </tr>
  <tr id="CF-35949-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;17&nbsp;18:58:13&nbsp;2012</span>
    <span class="description">NGLENN [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Detecting WN2 and WN3 filetypes on Windows</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The current version of this module assumes that Windows users have the old  
style WordNet files installed, even though the default directory is 
labeled as WordNet 3.0. WordNet 3.0 has not been released in a Windows 
installer; for research at my university, we normally use Java libraries, 
etc., and so are not tied to this. We just download the &#34;Unix-like&#34; 
distribution and put the files somewhere. They&#39;re perfectly usable.

The problem is in utils/wnDepths.pl. I am including a patch which 
discovers the type of files used by looking for &#34;noun.dat&#34; and 
&#34;data.noun&#34;, etc. and using the one that is found.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Changed-method-of-detecting-WN-2-and-WN-3-style-dict.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">From e5a6c7593aefd75fe21d4a712fbcbc127b1a6653 Mon Sep 17 00:00:00 2001
From: Nathan Glenn &lt;garfieldnate@gmail.com&gt;
Date: Fri, 17 Aug 2012 18:46:20 -0400
Subject: [PATCH 1/1] Changed method of detecting WN 2- and WN 3-style dictionary files. The old version assumed that Windows users would have the older file types.

---
 utils/wnDepths.pl |   28 ++++++++++++++++++----------
 1 files changed, 18 insertions&#40;+&#41;, 10 deletions&#40;-&#41;

diff --git a/utils/wnDepths.pl b/utils/wnDepths.pl
index b8bd11e..a01149d 100755
--- a/utils/wnDepths.pl
+++ b/utils/wnDepths.pl
@@ -80,6 +80,20 @@ else
 # even for 64-bit Windows.  See here for why:
 # <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perlmonks.org/index.pl?node_id=315372">http://www.perlmonks.org/index.pl?node_id=315372</a></span>
 my $wnpath = &#40;$^O =~ /^MSWin/i&#41; ? $wnPCPath : $wnUnixPath;
+
+# determine the filenames for the noun and verb databases;
+# these names changed between WN 2.1 and 3.0
+my $nounFile = do{
+	my $twoPointOne = File::Spec-&gt;catfile&#40;$wnpath, &#34;noun.dat&#34;&#41;;
+	if&#40;-f $twoPointOne&#41;{ $twoPointOne; }
+	else { File::Spec-&gt;catfile&#40;$wnpath, &#34;data.noun&#34;&#41;; }
+};
+
+my $verbFile = do{
+	my $twoPointOne = File::Spec-&gt;catfile&#40;$wnpath, &#34;verb.dat&#34;&#41;;
+	if&#40;-f $twoPointOne&#41;{ $twoPointOne; }
+	else { File::Spec-&gt;catfile&#40;$wnpath, &#34;data.verb&#34;&#41;; }
+};
 print STDERR &#34;Loading WordNet::QueryData... &#34;;
 my $wn = WordNet::QueryData-&gt;new&#40;$wnpath&#41;;
 unless &#40;$wn&#41;
@@ -97,9 +111,7 @@ print STDERR &#34;done\n&#34;;
 
 # Find top-level nodes for nouns
 my %top_level;
-my $datafile = File::Spec-&gt;catfile&#40;$wnpath, &#34;data.noun&#34;&#41;;
-$datafile = File::Spec-&gt;catfile&#40;$wnpath, &#34;noun.dat&#34;&#41; if &#40;$^O =~ m/^MSWin/i&#41;;
-open FH, &#34;$datafile&#34; or die &#34;Cannot open $datafile: $!&#34;;
+open FH, &#34;$nounFile&#34; or die &#34;Cannot open $nounFile: $!&#34;;
 my $line;
 while &#40;$line = &lt;FH&gt;&#41;
 {
@@ -116,9 +128,7 @@ if &#40;$opt_verbose&#41;
 }
 
 # Find top-level nodes for verbs
-$datafile = File::Spec-&gt;catfile&#40;$wnpath, &#34;data.verb&#34;&#41;;
-$datafile = File::Spec-&gt;catfile&#40;$wnpath, &#34;verb.dat&#34;&#41; if &#40;$^O =~ /MSWin/i&#41;;
-open FH, &#34;$datafile&#34; or die &#34;Cannot open $datafile: $!&#34;;
+open FH, &#34;$verbFile&#34; or die &#34;Cannot open $verbFile: $!&#34;;
 while&#40;$line = &lt;FH&gt;&#41;
 {
   next if substr&#40;$line, 0, 2&#41; eq &#34;  &#34;;
@@ -314,13 +324,11 @@ sub findLeafs
   my $file;
   if &#40;$pos eq &#34;n&#34;&#41;
   {
-    $file = File::Spec-&gt;catfile&#40;$wnpath, &#34;data.noun&#34;&#41;;
-    $file = File::Spec-&gt;catfile&#40;$wnpath, &#34;noun.dat&#34;&#41; if $^O =~ /MSWin/i;
+    $file = $nounFile;
   }
   elsif &#40;$pos eq &#34;v&#34;&#41;
   {
-    $file = File::Spec-&gt;catfile&#40;$wnpath, &#34;data.verb&#34;&#41;;
-    $file = File::Spec-&gt;catfile&#40;$wnpath, &#34;verb.dat&#34;&#41; if $^O =~ /MSWin/i;
+    $file = $verbFile;
   }
   else
   {
-- 
1.7.4.msysgit.0

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;18&nbsp;16:24:37&nbsp;2012</span>
    <span class="description">TPEDERSE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for this patch - we don&#39;t work with Windows much ourselves so 
this kind of assistance is greatly appreciated! We&#39;ll incorporate this 
in our next release...

On Fri Aug 17 18:58:13 2012, NGLENN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The current version of this module assumes that Windows users have the 
</div>old  
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; style WordNet files installed, even though the default directory is 
&gt; labeled as WordNet 3.0. WordNet 3.0 has not been released in a Windows 
&gt; installer; for research at my university, we normally use Java 
</div>libraries, 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; etc., and so are not tied to this. We just download the &#34;Unix-like&#34; 
&gt; distribution and put the files somewhere. They&#39;re perfectly usable.
&gt; 
&gt; The problem is in utils/wnDepths.pl. I am including a patch which 
&gt; discovers the type of files used by looking for &#34;noun.dat&#34; and 
&gt; &#34;data.noun&#34;, etc. and using the one that is found.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;18&nbsp;16:24:38&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;18&nbsp;16:24:54&nbsp;2012</span>
    <span class="description">TPEDERSE [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;04&nbsp;10:13:21&nbsp;2015</span>
    <span class="description">TPEDERSE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">patch applied to version 2.07 of WordNet::Similarity, due to be released early October 2015
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;04&nbsp;12:08:55&nbsp;2015</span>
    <span class="description">TPEDERSE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Installed in version 2.07 of WordNet::Similarity, released today.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;04&nbsp;12:08:57&nbsp;2015</span>
    <span class="description">TPEDERSE [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
