<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #99 for Inline-Files: make install fails on no write</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #99 for Inline-Files: make install fails on no write</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Inline-Files/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Inline-Files/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Inline-Files/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Inline-Files/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Inline-Files">Inline-Files CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">99</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Inline-Files/Active/">Inline-Files</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mark [...] twoshortplanks.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-16910-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-16911-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;12&nbsp;19:45:30&nbsp;2001</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> make install fails on no write</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hmm, was trying to install this for the advent calendar and I
got a problem with make install.  I&#39;m not sure what&#39;s up here, so
here&#39;s a list of the output of the CPAN shell during a install...

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">cpan&gt; install Inline::Files
</div>CPAN: Storable loaded ok
Going to read /home/acme/.cpan/Metadata
Running install for module Inline::Files
Running make for D/DC/DCONWAY/Inline-Files-0.60.tar.gz

&lt;skip large chunk of stuff&gt;

Running make test
PERL_DL_NONLAZY=1 /usr/bin/perl -Iblib/arch -Iblib/lib -I/usr/lib/perl5/5.6.0/i3
86-linux -I/usr/lib/perl5/5.6.0 -e &#39;use Test::Harness qw&#40;&#38;runtests $verbose&#41;; $v
erbose=0; runtests @ARGV;&#39; t/*.t
t/00init.......ok                                                            
t/01basics.....ok                                                            
t/02write......ok                                                            
t/03nowrite....FAILED test 2                                                 
        Failed 1/2 tests, 50.00% okay
t/04create.....ok                                                            
t/05seek.......ok                                                            
t/06backup.....ok                                                            
t/07hash.......ok                                                            
Failed Test   Stat Wstat Total Fail  Failed  List of Failed
-------------------------------------------------------------------------------
t/03nowrite.t                2    1  50.00%  2
Failed 1/8 test scripts, 87.50% okay. 1/67 subtests failed, 98.51% okay.
make: *** [test_dynamic] Error 29
  /usr/bin/make test -- NOT OK

Running the test by hand gives:

[root@ns0 Inline-Files-0.60]# perl t/03nowrite.t 
1..2
not ok 1
# Failed test 1 in t/03nowrite.t at line 20
not ok 2
# Failed test 2 in t/03nowrite.t at line 35
This is the perl that ships with Redhat 7.2  as in

[root@ns0 Inline-Files-0.60]# uname -a
Linux ns0 2.4.7-10 #1 Thu Sep 6 17:21:28 EDT 2001 i586 unknown

It says:

[root@ns0 Inline-Files-0.60]# perl -v

This is perl, v5.6.0 built for i386-linux
&#40;blah blah copyright blah&#41;

Hope this is enough...if not, email me back or get acme or muttley to
try other things on the shared box....

Thanks for your help.

Mark.
</div></div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;15&nbsp;23:13:49&nbsp;2001</span>
    <span class="description">damian [...] conway.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 16 Dec 2001 15:14:59 +1100 &#40;EST&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Damian Conway &lt;damian [...] mail.csse.monash.edu.au&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Inline-Files [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re:  [cpan #99] make install fails on no write</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the bug report, Mark.

Damian
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;25&nbsp;04:33:46&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jgedeon [...] sbcglobal.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[damian@conway.org - Sat Dec 15 23:13:49 2001]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks for the bug report, Mark.
&gt; 
&gt; Damian
&gt; 
</div>
I had this issue too, the problem is that you are running the test as
root. For some reason the root user can still write to the file even
though it is set to read-only for everyone. Run the test as a normal
user and it works fine.

John Gedeon
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;25&nbsp;05:09:37&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jgsack [...] san.rr.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[guest - Wed Dec 12 19:45:30 2001]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hmm, was trying to install this for the advent calendar and I
&gt; got a problem with make install.  I&#39;m not sure what&#39;s up here, so
&gt; here&#39;s a list of the output of the CPAN shell during a install...
&gt; 
<div class="message-stanza open">&gt; cpan&gt; install Inline::Files
</div>&gt; CPAN: Storable loaded ok
&gt; Going to read /home/acme/.cpan/Metadata
&gt; Running install for module Inline::Files
&gt; Running make for D/DC/DCONWAY/Inline-Files-0.60.tar.gz
&gt; 
&gt; &lt;skip large chunk of stuff&gt;
&gt; 
&gt; Running make test
&gt; PERL_DL_NONLAZY=1 /usr/bin/perl -Iblib/arch -Iblib/lib
&gt;    -I/usr/lib/perl5/5.6.0/i3
&gt; 86-linux -I/usr/lib/perl5/5.6.0 -e &#39;use Test::Harness qw&#40;&#38;runtests
&gt;    $verbose&#41;; $v
&gt; erbose=0; runtests @ARGV;&#39; t/*.t
&gt; t/00init.......ok
&gt; t/01basics.....ok
&gt; t/02write......ok
&gt; t/03nowrite....FAILED test 2
&gt;       Failed 1/2 tests, 50.00% okay
&gt; t/04create.....ok
&gt; t/05seek.......ok
&gt; t/06backup.....ok
&gt; t/07hash.......ok
&gt; Failed Test   Stat Wstat Total Fail  Failed  List of Failed
&gt; ----------------------------------------------------------------------
</div>---------
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; t/03nowrite.t                2    1  50.00%  2
&gt; Failed 1/8 test scripts, 87.50% okay. 1/67 subtests failed, 98.51%
&gt;    okay.
&gt; make: *** [test_dynamic] Error 29
&gt;   /usr/bin/make test -- NOT OK
&gt; 
&gt; Running the test by hand gives:
&gt; 
&gt; [root@ns0 Inline-Files-0.60]# perl t/03nowrite.t
&gt; 1..2
&gt; not ok 1
&gt; # Failed test 1 in t/03nowrite.t at line 20
&gt; not ok 2
&gt; # Failed test 2 in t/03nowrite.t at line 35
&gt; This is the perl that ships with Redhat 7.2  as in
&gt; 
&gt; [root@ns0 Inline-Files-0.60]# uname -a
&gt; Linux ns0 2.4.7-10 #1 Thu Sep 6 17:21:28 EDT 2001 i586 unknown
&gt; 
&gt; It says:
&gt; 
&gt; [root@ns0 Inline-Files-0.60]# perl -v
&gt; 
&gt; This is perl, v5.6.0 built for i386-linux
&gt; &#40;blah blah copyright blah&#41;
&gt; 
&gt; Hope this is enough...if not, email me back or get acme or muttley to
&gt; try other things on the shared box....
&gt; 
&gt; Thanks for your help.
&gt; 
&gt; Mark.
</div>
DC et al-
The test 03nowrite.t itself seems to be the problem &#40;when run by root&#41;. 

I get something like:
  test 1/2 passes
  test 2/2 fails
Now it looks to me like test 2 doesn&#39;t work because it seems to check that a 
file with perms 444 &#40;no write&#41; cannot be written to, and &#40;of course&#41; when 
running as root, the perms don&#39;t matter.  

I couldn&#39;t figure out how to get the test suite to run as non-root -- got
a bunch of errors including &#34;Uncaught exception..Could not vf_load..BEGIN 
failed&#34;. 

I simply disabled the 2nd test of 03nowrite.t to verify that all the other 
tests for make test pass, and then did a make install. 

After install, I copied test 03nowrite and as non-root, it passes 2/2 tests.

Regards
..jim
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;21&nbsp;15:30:40&nbsp;2006</span>
    <span class="description">cpan [...] foss.daxal.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [cpan #99] make install fails on no write</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 21 Aug 2006 14:30:23 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Inline-Files [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Scott Edwards&#34; &lt;cpan [...] foss.daxal.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The included patch skips the failing test if you&#39;re root.  I suppose it 
could use skip&#40;-w foo,...&#41; but it doesn&#39;t... 

Damian can send me a perl6 book if he feels so inclined :&#41; 

It carries the same license and warranty as perl. 

Enjoy, 

Scott Edwards
 -- PAUSE: SUPAPLEX
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;21&nbsp;15:30:41&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;11&nbsp;13:51:39&nbsp;2010</span>
    <span class="description">ambs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This was fixed some time ago, when Damian gave me co-maintainership.
Forgot to look into tickets and close them.

Cheers
Alberto
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;11&nbsp;13:51:40&nbsp;2010</span>
    <span class="description">ambs [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
