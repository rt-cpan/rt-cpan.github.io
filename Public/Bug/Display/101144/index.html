<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #101144 for mod_perl: Compilation fails with perl 5.21.x &#40;related to Perl___notused&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #101144 for mod_perl: Compilation fails with perl 5.21.x &#40;related to Perl___notused&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/mod_perl/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/mod_perl/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/mod_perl/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/mod_perl/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/mod_perl">mod_perl CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">101144</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/mod_perl/Active/">mod_perl</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
SREZIC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-21786-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.0.8    </td>
  </tr>
  <tr id="CF-21787-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;26&nbsp;16:31:36&nbsp;2014</span>
    <span class="description">SREZIC [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Compilation fails with perl 5.21.x &#40;related to Perl___notused&#41;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Compilation fails with perl 5.21.5 on a FreeBSD 9.2 system. On the same system mod_perl builds fine with 5.18.4 &#40;and has only minor test failures&#41;:

cd &#34;src/modules/perl&#34; &#38;&#38; make
ccache cc -I/usr/local/src/CPAN/build/mod_perl-2.0.8-O4McxP/src/modules/perl -I/usr/local/src/CPAN/build/mod_perl-2.0.8-O4McxP/xs -I/usr/local/include/apr-1 -I/usr/local/include/apr-1 -I/usr/include -I/usr/local/include -I/usr/local/include/db5 -I/usr/local/include/apache22 -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_FORTIFY_SOURCE=2 -I/usr/perl5.21.5p/lib/5.21.5/amd64-freebsd/CORE -DMOD_PERL -DMP_COMPAT_1X -O2 -pipe -DPIC -fPIC  -c mod_perl.c &#38;&#38; mv mod_perl.o mod_perl.lo
mod_perl.c: In function &#39;set_taint_var&#39;:
mod_perl.c:165: error: &#39;Perl___notused&#39; redeclared as different kind of symbol
/usr/perl5.21.5p/lib/5.21.5/amd64-freebsd/CORE/inline.h:235: error: previous declaration of &#39;Perl___notused&#39; was here
*** [mod_perl.lo] Error code 1

Stop in /usr/local/src/CPAN/build/mod_perl-2.0.8-O4McxP/src/modules/perl.
*** [modperl_lib] Error code 1
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;06&nbsp;03:17:54&nbsp;2015</span>
    <span class="description">shay [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Dec 26 16:31:36 2014, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Compilation fails with perl 5.21.5 on a FreeBSD 9.2 system. On the
&gt; same system mod_perl builds fine with 5.18.4 &#40;and has only minor test
&gt; failures&#41;:
&gt; 
&gt; cd &#34;src/modules/perl&#34; &#38;&#38; make
&gt; ccache cc -I/usr/local/src/CPAN/build/mod_perl-2.0.8-
&gt; O4McxP/src/modules/perl -I/usr/local/src/CPAN/build/mod_perl-2.0.8-
&gt; O4McxP/xs -I/usr/local/include/apr-1 -I/usr/local/include/apr-1
&gt; -I/usr/include -I/usr/local/include -I/usr/local/include/db5
&gt; -I/usr/local/include/apache22 -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H
&gt; -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include
&gt; -D_FORTIFY_SOURCE=2 -I/usr/perl5.21.5p/lib/5.21.5/amd64-freebsd/CORE
&gt; -DMOD_PERL -DMP_COMPAT_1X -O2 -pipe -DPIC -fPIC  -c mod_perl.c &#38;&#38; mv
&gt; mod_perl.o mod_perl.lo
&gt; mod_perl.c: In function &#39;set_taint_var&#39;:
&gt; mod_perl.c:165: error: &#39;Perl___notused&#39; redeclared as different kind
&gt; of symbol
&gt; /usr/perl5.21.5p/lib/5.21.5/amd64-freebsd/CORE/inline.h:235: error:
&gt; previous declaration of &#39;Perl___notused&#39; was here
&gt; *** [mod_perl.lo] Error code 1
&gt; 
&gt; Stop in /usr/local/src/CPAN/build/mod_perl-2.0.8-
&gt; O4McxP/src/modules/perl.
&gt; *** [modperl_lib] Error code 1
</div>

Do you get the same failure with SVN trunk &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://svn.apache.org/repos/asf/perl/modperl/trunk&#41;">https://svn.apache.org/repos/asf/perl/modperl/trunk&#41;</a></span>? We are close to releasing 2.0.9 now. For me &#40;on Windows&#41;, trunk builds with perls &lt;= 5.21.7. There is a known problem with 5.21.8 which mod_perl will need to address, hopefully before the release of 5.22.0.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;06&nbsp;03:17:55&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;08&nbsp;10:43:24&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-02-06 03:17:54, SHAY wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri Dec 26 16:31:36 2014, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; Compilation fails with perl 5.21.5 on a FreeBSD 9.2 system. On the
&gt; &gt; same system mod_perl builds fine with 5.18.4 &#40;and has only minor test
&gt; &gt; failures&#41;:
&gt; &gt;
&gt; &gt; cd &#34;src/modules/perl&#34; &#38;&#38; make
&gt; &gt; ccache cc -I/usr/local/src/CPAN/build/mod_perl-2.0.8-
&gt; &gt; O4McxP/src/modules/perl -I/usr/local/src/CPAN/build/mod_perl-2.0.8-
&gt; &gt; O4McxP/xs -I/usr/local/include/apr-1 -I/usr/local/include/apr-1
&gt; &gt; -I/usr/include -I/usr/local/include -I/usr/local/include/db5
&gt; &gt; -I/usr/local/include/apache22 -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H
&gt; &gt; -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include
&gt; &gt; -D_FORTIFY_SOURCE=2 -I/usr/perl5.21.5p/lib/5.21.5/amd64-freebsd/CORE
&gt; &gt; -DMOD_PERL -DMP_COMPAT_1X -O2 -pipe -DPIC -fPIC  -c mod_perl.c &#38;&#38; mv
&gt; &gt; mod_perl.o mod_perl.lo
&gt; &gt; mod_perl.c: In function &#39;set_taint_var&#39;:
&gt; &gt; mod_perl.c:165: error: &#39;Perl___notused&#39; redeclared as different kind
&gt; &gt; of symbol
&gt; &gt; /usr/perl5.21.5p/lib/5.21.5/amd64-freebsd/CORE/inline.h:235: error:
&gt; &gt; previous declaration of &#39;Perl___notused&#39; was here
&gt; &gt; *** [mod_perl.lo] Error code 1
&gt; &gt;
&gt; &gt; Stop in /usr/local/src/CPAN/build/mod_perl-2.0.8-
&gt; &gt; O4McxP/src/modules/perl.
&gt; &gt; *** [modperl_lib] Error code 1
</div>&gt; 
&gt; 
&gt; Do you get the same failure with SVN trunk
&gt; &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://svn.apache.org/repos/asf/perl/modperl/trunk&#41;">https://svn.apache.org/repos/asf/perl/modperl/trunk&#41;</a></span>? We are close to
&gt; releasing 2.0.9 now. For me &#40;on Windows&#41;, trunk builds with perls &lt;=
&gt; 5.21.7. There is a known problem with 5.21.8 which mod_perl will need
&gt; to address, hopefully before the release of 5.22.0.
</div>
Yes, the same problem with perl 5.21.8 and r1655200.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;08&nbsp;10:46:16&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-02-08 10:43:24, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2015-02-06 03:17:54, SHAY wrote:
<div class="message-stanza open">&gt; &gt; On Fri Dec 26 16:31:36 2014, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; &gt; Compilation fails with perl 5.21.5 on a FreeBSD 9.2 system. On the
&gt; &gt; &gt; same system mod_perl builds fine with 5.18.4 &#40;and has only minor test
&gt; &gt; &gt; failures&#41;:
&gt; &gt; &gt;
&gt; &gt; &gt; cd &#34;src/modules/perl&#34; &#38;&#38; make
&gt; &gt; &gt; ccache cc -I/usr/local/src/CPAN/build/mod_perl-2.0.8-
&gt; &gt; &gt; O4McxP/src/modules/perl -I/usr/local/src/CPAN/build/mod_perl-2.0.8-
&gt; &gt; &gt; O4McxP/xs -I/usr/local/include/apr-1 -I/usr/local/include/apr-1
&gt; &gt; &gt; -I/usr/include -I/usr/local/include -I/usr/local/include/db5
&gt; &gt; &gt; -I/usr/local/include/apache22 -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H
&gt; &gt; &gt; -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include
&gt; &gt; &gt; -D_FORTIFY_SOURCE=2 -I/usr/perl5.21.5p/lib/5.21.5/amd64-freebsd/CORE
&gt; &gt; &gt; -DMOD_PERL -DMP_COMPAT_1X -O2 -pipe -DPIC -fPIC  -c mod_perl.c &#38;&#38; mv
&gt; &gt; &gt; mod_perl.o mod_perl.lo
&gt; &gt; &gt; mod_perl.c: In function &#39;set_taint_var&#39;:
&gt; &gt; &gt; mod_perl.c:165: error: &#39;Perl___notused&#39; redeclared as different kind
&gt; &gt; &gt; of symbol
&gt; &gt; &gt; /usr/perl5.21.5p/lib/5.21.5/amd64-freebsd/CORE/inline.h:235: error:
&gt; &gt; &gt; previous declaration of &#39;Perl___notused&#39; was here
&gt; &gt; &gt; *** [mod_perl.lo] Error code 1
&gt; &gt; &gt;
&gt; &gt; &gt; Stop in /usr/local/src/CPAN/build/mod_perl-2.0.8-
&gt; &gt; &gt; O4McxP/src/modules/perl.
&gt; &gt; &gt; *** [modperl_lib] Error code 1
</div>&gt; &gt; 
&gt; &gt; 
&gt; &gt; Do you get the same failure with SVN trunk
&gt; &gt; &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://svn.apache.org/repos/asf/perl/modperl/trunk&#41;">https://svn.apache.org/repos/asf/perl/modperl/trunk&#41;</a></span>? We are close to
&gt; &gt; releasing 2.0.9 now. For me &#40;on Windows&#41;, trunk builds with perls &lt;=
&gt; &gt; 5.21.7. There is a known problem with 5.21.8 which mod_perl will need
&gt; &gt; to address, hopefully before the release of 5.22.0.
</div>&gt; 
&gt; Yes, the same problem with perl 5.21.8 and r1655200.
</div>
And I see the same problem on a Debian/wheezy system.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;21&nbsp;12:06:25&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-02-08 10:43:24, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2015-02-06 03:17:54, SHAY wrote:
<div class="message-stanza open">&gt; &gt; On Fri Dec 26 16:31:36 2014, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; &gt; Compilation fails with perl 5.21.5 on a FreeBSD 9.2 system. On the
&gt; &gt; &gt; same system mod_perl builds fine with 5.18.4 &#40;and has only minor test
&gt; &gt; &gt; failures&#41;:
&gt; &gt; &gt;
&gt; &gt; &gt; cd &#34;src/modules/perl&#34; &#38;&#38; make
&gt; &gt; &gt; ccache cc -I/usr/local/src/CPAN/build/mod_perl-2.0.8-
&gt; &gt; &gt; O4McxP/src/modules/perl -I/usr/local/src/CPAN/build/mod_perl-2.0.8-
&gt; &gt; &gt; O4McxP/xs -I/usr/local/include/apr-1 -I/usr/local/include/apr-1
&gt; &gt; &gt; -I/usr/include -I/usr/local/include -I/usr/local/include/db5
&gt; &gt; &gt; -I/usr/local/include/apache22 -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H
&gt; &gt; &gt; -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include
&gt; &gt; &gt; -D_FORTIFY_SOURCE=2 -I/usr/perl5.21.5p/lib/5.21.5/amd64-freebsd/CORE
&gt; &gt; &gt; -DMOD_PERL -DMP_COMPAT_1X -O2 -pipe -DPIC -fPIC  -c mod_perl.c &#38;&#38; mv
&gt; &gt; &gt; mod_perl.o mod_perl.lo
&gt; &gt; &gt; mod_perl.c: In function &#39;set_taint_var&#39;:
&gt; &gt; &gt; mod_perl.c:165: error: &#39;Perl___notused&#39; redeclared as different kind
&gt; &gt; &gt; of symbol
&gt; &gt; &gt; /usr/perl5.21.5p/lib/5.21.5/amd64-freebsd/CORE/inline.h:235: error:
&gt; &gt; &gt; previous declaration of &#39;Perl___notused&#39; was here
&gt; &gt; &gt; *** [mod_perl.lo] Error code 1
&gt; &gt; &gt;
&gt; &gt; &gt; Stop in /usr/local/src/CPAN/build/mod_perl-2.0.8-
&gt; &gt; &gt; O4McxP/src/modules/perl.
&gt; &gt; &gt; *** [modperl_lib] Error code 1
</div>&gt; &gt; 
&gt; &gt; 
&gt; &gt; Do you get the same failure with SVN trunk
&gt; &gt; &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://svn.apache.org/repos/asf/perl/modperl/trunk&#41;">https://svn.apache.org/repos/asf/perl/modperl/trunk&#41;</a></span>? We are close to
&gt; &gt; releasing 2.0.9 now. For me &#40;on Windows&#41;, trunk builds with perls &lt;=
&gt; &gt; 5.21.7. There is a known problem with 5.21.8 which mod_perl will need
&gt; &gt; to address, hopefully before the release of 5.22.0.
</div>&gt; 
&gt; Yes, the same problem with perl 5.21.8 and r1655200.
&gt; 
</div>
The same problem also with 5.21.10.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;21&nbsp;12:36:47&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-03-21 12:06:25, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2015-02-08 10:43:24, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; On 2015-02-06 03:17:54, SHAY wrote:
<div class="message-stanza open">&gt; &gt; &gt; On Fri Dec 26 16:31:36 2014, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; Compilation fails with perl 5.21.5 on a FreeBSD 9.2 system. On the
&gt; &gt; &gt; &gt; same system mod_perl builds fine with 5.18.4 &#40;and has only minor test
&gt; &gt; &gt; &gt; failures&#41;:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; cd &#34;src/modules/perl&#34; &#38;&#38; make
&gt; &gt; &gt; &gt; ccache cc -I/usr/local/src/CPAN/build/mod_perl-2.0.8-
&gt; &gt; &gt; &gt; O4McxP/src/modules/perl -I/usr/local/src/CPAN/build/mod_perl-2.0.8-
&gt; &gt; &gt; &gt; O4McxP/xs -I/usr/local/include/apr-1 -I/usr/local/include/apr-1
&gt; &gt; &gt; &gt; -I/usr/include -I/usr/local/include -I/usr/local/include/db5
&gt; &gt; &gt; &gt; -I/usr/local/include/apache22 -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H
&gt; &gt; &gt; &gt; -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include
&gt; &gt; &gt; &gt; -D_FORTIFY_SOURCE=2 -I/usr/perl5.21.5p/lib/5.21.5/amd64-freebsd/CORE
&gt; &gt; &gt; &gt; -DMOD_PERL -DMP_COMPAT_1X -O2 -pipe -DPIC -fPIC  -c mod_perl.c &#38;&#38; mv
&gt; &gt; &gt; &gt; mod_perl.o mod_perl.lo
&gt; &gt; &gt; &gt; mod_perl.c: In function &#39;set_taint_var&#39;:
&gt; &gt; &gt; &gt; mod_perl.c:165: error: &#39;Perl___notused&#39; redeclared as different kind
&gt; &gt; &gt; &gt; of symbol
&gt; &gt; &gt; &gt; /usr/perl5.21.5p/lib/5.21.5/amd64-freebsd/CORE/inline.h:235: error:
&gt; &gt; &gt; &gt; previous declaration of &#39;Perl___notused&#39; was here
&gt; &gt; &gt; &gt; *** [mod_perl.lo] Error code 1
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Stop in /usr/local/src/CPAN/build/mod_perl-2.0.8-
&gt; &gt; &gt; &gt; O4McxP/src/modules/perl.
&gt; &gt; &gt; &gt; *** [modperl_lib] Error code 1
</div>&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; Do you get the same failure with SVN trunk
&gt; &gt; &gt; &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://svn.apache.org/repos/asf/perl/modperl/trunk&#41;">https://svn.apache.org/repos/asf/perl/modperl/trunk&#41;</a></span>? We are close to
&gt; &gt; &gt; releasing 2.0.9 now. For me &#40;on Windows&#41;, trunk builds with perls &lt;=
&gt; &gt; &gt; 5.21.7. There is a known problem with 5.21.8 which mod_perl will need
&gt; &gt; &gt; to address, hopefully before the release of 5.22.0.
</div>&gt; &gt; 
&gt; &gt; Yes, the same problem with perl 5.21.8 and r1655200.
&gt; &gt; 
</div>&gt; 
&gt; The same problem also with 5.21.10.
</div>
Maybe it has to do with a changed declaration &#40;?&#41; of Perl___notused. And maybe this gets used only in non-threaded builds, which might explain why you don&#39;t see this problem in a Windows build &#40;probably with threads enabled&#41;.

Anyway, if I disable the following lines in modperl_perl_includes.h:

/*
#undef dNOOP
#define dNOOP extern int __attribute__ &#40;&#40;unused&#41;&#41; Perl___notused
*/

then compilation works.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;23&nbsp;13:35:44&nbsp;2015</span>
    <span class="description">zefram [...] fysh.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #101144] Compilation fails with perl 5.21.x &#40;related to Perl___notused&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 23 Mar 2015 17:35:20 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-mod_perl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The problem is that mod_perl overrides Perl&#39;s definition of dNOOP with
one that uses the same symbol in an incompatible way.  Failures start
with Perl 5.21.1 because this version introduced some inline function
definitions that can end up using dNOOP internally.  The core inline.h
is processed too early for mod_perl&#39;s override, so functions defined
there and functions defined in mod_perl end up using different versions
of dNOOP, exposing the incompatibility.

Presumably mod_perl is trying to avoid the warnings that one used
to get with Perl 5.6.  That was fixed a long time ago, so mod_perl no
longer needs an override.  However, if it wants to keep the override, it
could avoid the clash of dNOOP definitions by using a different symbol.
Attached patch implements.

-zefram
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;01&nbsp;13:40:43&nbsp;2015</span>
    <span class="description">shay [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Mar 23 13:35:44 2015, zefram@fysh.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The problem is that mod_perl overrides Perl&#39;s definition of dNOOP with
&gt; one that uses the same symbol in an incompatible way.  Failures start
&gt; with Perl 5.21.1 because this version introduced some inline function
&gt; definitions that can end up using dNOOP internally.  The core inline.h
&gt; is processed too early for mod_perl&#39;s override, so functions defined
&gt; there and functions defined in mod_perl end up using different versions
&gt; of dNOOP, exposing the incompatibility.
&gt; 
&gt; Presumably mod_perl is trying to avoid the warnings that one used
&gt; to get with Perl 5.6.  That was fixed a long time ago, so mod_perl no
&gt; longer needs an override.  However, if it wants to keep the override, it
&gt; could avoid the clash of dNOOP definitions by using a different symbol.
&gt; Attached patch implements.
&gt; 
&gt; -zefram
</div>

Thanks for the patch &#40;and to Slaven for the report&#41;, which is now applied in revision r1670740.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;01&nbsp;13:40:55&nbsp;2015</span>
    <span class="description">shay [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
