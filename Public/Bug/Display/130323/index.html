<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #130323 for Date: t/date-hires.t fails &#40;with -Duselongdouble?&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #130323 for Date: t/date-hires.t fails &#40;with -Duselongdouble?&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Date/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Date/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Date/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Date/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Date">Date CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">130323</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Date/Active/">Date</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
SREZIC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-9482-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
4.0.0    </td>
  </tr>
  <tr id="CF-9483-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;17&nbsp;02:50:09&nbsp;2019</span>
    <span class="description">SREZIC [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> t/date-hires.t fails &#40;with -Duselongdouble?&#41;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The test suite fails on one of my smokers --- this one has perl compiled with -Duselongdouble:

...
    #   Failed test at t/date-hires.t line 23.
    #          got: &#39;1000000000.00000095&#39;
    #     expected: &#39;1000000000.000001&#39;

    #   Failed test at t/date-hires.t line 33.
    #          got: &#39;1000000000.00000095&#39;
    #     expected: &#39;1000000000.000001&#39;
    # Looks like you failed 2 tests of 10.

#   Failed test &#39;double &#38; string ctors&#39;
#   at t/date-hires.t line 34.

    #   Failed test at t/date-hires.t line 38.
    #          got: &#39;1530126740.34022999&#39;
    #     expected: &#39;1530126740.34023&#39;
    # Looks like you failed 1 test of 2.

#   Failed test &#39;hash ctor&#39;
#   at t/date-hires.t line 40.

    #   Failed test at t/date-hires.t line 44.
    #          got: &#39;1530126740.34022999&#39;
    #     expected: &#39;1530126740.34023&#39;
    # Looks like you failed 1 test of 2.

#   Failed test &#39;array ctor&#39;
#   at t/date-hires.t line 46.

    #   Failed test at t/date-hires.t line 60.
    #          got: &#39;1000000000.00000095&#39;
    #     expected: &#39;1000000000.000001&#39;

    #   Failed test at t/date-hires.t line 62.
    #          got: &#39;1000000000.00000203&#39;
    #     expected: &#39;1000000000.000002&#39;
    # Looks like you failed 2 tests of 5.

#   Failed test &#39;assignment&#39;
#   at t/date-hires.t line 71.
# Looks like you failed 4 tests of 8.
t/date-hires.t ............ 
Dubious, test returned 4 &#40;wstat 1024, 0x400&#41;
Failed 4/8 subtests 
...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;17&nbsp;10:10:14&nbsp;2019</span>
    <span class="description">syber.rus [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #130323] t/date-hires.t fails &#40;with -Duselongdouble?&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 17 Aug 2019 17:09:45 +0300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Date [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Олег Пронин &lt;syber.rus [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Oh, thank you!&#41;

By the way, i faced some troubles while testing cpan modules with
reporter-smoker. One author emailed me about his module that failed testing
on my smoker. The module was FFI::Platypus and i tested it by hand with
cpanm —look ... and saw the same fail somewhere in forks.pm.

The smoker was setup to install all modules it has tested to speedup the
process &#40;and every perlbrew instance grew up to 10Gb in two weeks&#41; I made a
pure install of the same perl on the same server and the module passed all
the tests. Is there a bug in CPAN::Reporter::Smoker?

сб, 17 авг. 2019 г. в 9:50, Slaven_Rezic via RT &lt;bug-Date@rt.cpan.org&gt;:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sat Aug 17 02:50:09 2019: Request 130323 was acted upon.
&gt; Transaction: Ticket created by SREZIC
&gt;        Queue: Date
&gt;      Subject: t/date-hires.t fails &#40;with -Duselongdouble?&#41;
&gt;    Broken in: 4.0.0
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: SREZIC@cpan.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=130323">https://rt.cpan.org/Ticket/Display.html?id=130323</a></span> &gt;
&gt;
&gt;
&gt; The test suite fails on one of my smokers --- this one has perl compiled
&gt; with -Duselongdouble:
&gt;
&gt; ...
&gt;     #   Failed test at t/date-hires.t line 23.
&gt;     #          got: &#39;1000000000.00000095&#39;
&gt;     #     expected: &#39;1000000000.000001&#39;
&gt;
&gt;     #   Failed test at t/date-hires.t line 33.
&gt;     #          got: &#39;1000000000.00000095&#39;
&gt;     #     expected: &#39;1000000000.000001&#39;
&gt;     # Looks like you failed 2 tests of 10.
&gt;
&gt; #   Failed test &#39;double &#38; string ctors&#39;
&gt; #   at t/date-hires.t line 34.
&gt;
&gt;     #   Failed test at t/date-hires.t line 38.
&gt;     #          got: &#39;1530126740.34022999&#39;
&gt;     #     expected: &#39;1530126740.34023&#39;
&gt;     # Looks like you failed 1 test of 2.
&gt;
&gt; #   Failed test &#39;hash ctor&#39;
&gt; #   at t/date-hires.t line 40.
&gt;
&gt;     #   Failed test at t/date-hires.t line 44.
&gt;     #          got: &#39;1530126740.34022999&#39;
&gt;     #     expected: &#39;1530126740.34023&#39;
&gt;     # Looks like you failed 1 test of 2.
&gt;
&gt; #   Failed test &#39;array ctor&#39;
&gt; #   at t/date-hires.t line 46.
&gt;
&gt;     #   Failed test at t/date-hires.t line 60.
&gt;     #          got: &#39;1000000000.00000095&#39;
&gt;     #     expected: &#39;1000000000.000001&#39;
&gt;
&gt;     #   Failed test at t/date-hires.t line 62.
&gt;     #          got: &#39;1000000000.00000203&#39;
&gt;     #     expected: &#39;1000000000.000002&#39;
&gt;     # Looks like you failed 2 tests of 5.
&gt;
&gt; #   Failed test &#39;assignment&#39;
&gt; #   at t/date-hires.t line 71.
&gt; # Looks like you failed 4 tests of 8.
&gt; t/date-hires.t ............
&gt; Dubious, test returned 4 &#40;wstat 1024, 0x400&#41;
&gt; Failed 4/8 subtests
&gt; ...
&gt;
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;17&nbsp;10:10:15&nbsp;2019</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;19&nbsp;12:58:21&nbsp;2019</span>
    <span class="description">syber.rus [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">fixed in new version &#40;4.0.1&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;19&nbsp;12:58:22&nbsp;2019</span>
    <span class="description">syber.rus [...] gmail.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
