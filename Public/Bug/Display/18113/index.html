<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #18113 for Net-DNS: still problems with test 11-inet6.t &#40;IPv6 enabled but no connectivity&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #18113 for Net-DNS: still problems with test 11-inet6.t &#40;IPv6 enabled but no connectivity&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-DNS/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-DNS">Net-DNS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">18113</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-DNS/Active/">Net-DNS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
k.heinz-cpan [...] onlinehome.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-22454-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.57    </td>
  </tr>
  <tr id="CF-22455-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




patch-aa<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/174928/59210/patch-aa">
Fri Mar 10 18:16:03 2006 (920b) by Guest
</a>
</font></li>
</ul>


patch-ab<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/174922/59200/patch-ab">
Fri Mar 10 18:09:14 2006 (1.8k) by Guest
</a>
</font></li>
</ul>


PGP.sig<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/224465/92948/PGP.sig">
Mon Jul 17 03:08:12 2006 (227b) by olaf [...] dacht.net
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/205518/78260/PGP.sig">
Thu Jun 08 09:39:24 2006 (227b) by olaf [...] dacht.net
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/176600/60532/PGP.sig">
Tue Mar 14 02:12:07 2006 (227b) by olaf [...] dacht.net
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/176397/60355/PGP.sig">
Mon Mar 13 10:14:39 2006 (227b) by olaf [...] dacht.net
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;10&nbsp;18:09:14&nbsp;2006</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> still problems with test 11-inet6.t &#40;IPv6 enabled but no
 connectivity&#41;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">While preparing a package of Net-DNS 0.57 for the pkgsrc package
collection on a NetBSD 3.0 system &#40;perl 5.8.7, IPv6 enabled but
without IPv6 connectivity, online tests disabled&#41; I get the following
during &#34;make test&#34;:

======================================
ok 1 - use Net::DNS;
# 
# The libraries needed for IPv6 support have been found
#               Now we establish if  we can bind to ::1
ok 2 # skip online tests are not enabled
Can&#39;t call method &#34;errorstring&#34; on an undefined value at t/11-inet6.t 
line 115.
ok 3 # skip online tests are not enabled
# Looks like you planned 11 tests but only ran 3.
# Looks like your test died just after 3.
dubious
        Test returned status 255 &#40;wstat 65280, 0xff00&#41;
DIED. FAILED tests 4-11
        Failed 8/11 tests, 27.27% okay &#40;less 2 skipped tests: 1 okay, 9.
09%&#41;
Failed Test  Stat Wstat Total Fail  Failed  List of Failed
------------------------------------------------------------------------
-------
t/11-inet6.t  255 65280    11   16 145.45%  4-11
2 subtests skipped.
Failed 1/1 test scripts, 0.00% okay. 8/11 subtests failed, 27.27% okay.
*** Error code 255
======================================


With the first attached patch &#40;patch-aa&#41; all tests can finish but
the results of tests 6 and 7 &#40;tcp6 _cannot_ succeed without an IPv6 
connection&#41; are still wrong because they rely on
&#34;$res-&gt;nameservers&#40;$AAAA_address&#41;&#34; from tests 2-4 which were skipped 
&#40;online tests disabled&#41;. Due to this relationship, I think tests 6 and
7 should also be skipped if online tests are not enabled &#40;see the second 
patch, patch-ab&#41;.

======================================
ok 1 - use Net::DNS;
# 
# The libraries needed for IPv6 support have been found
#               Now we establish if  we can bind to ::1
ok 2 # skip online tests are not enabled
ok 3 # skip online tests are not enabled
ok 4 # skip online tests are not enabled
ok 5 # skip No answer available to analyse &#40;unknown error or no error&#41;
not ok 6 - Correct errorstring when forcing v4

#     Failed test &#40;t/11-inet6.t at line 126&#41;
#          got: &#39;NOERROR&#39;
#     expected: &#39;no nameservers&#39;
# Looks like you failed 1 test of 11.
ok 7 - Query over tcp6  succeeded
ok 8 # skip online tests are not enabled
ok 9 # skip online tests are not enabled
ok 10 # skip axfr_start did not return a socket
ok 11 # skip axfr_start did not return a socket
dubious
        Test returned status 1 &#40;wstat 256, 0x100&#41;
DIED. FAILED test 6

======================================


With both patches applied, I get 10/11 test skipped when online tests 
are disabled and the following correct results with online tests 
enabled:

======================================
ok 1 - use Net::DNS;
# 
# The libraries needed for IPv6 support have been found
#               Now we establish if  we can bind to ::1
# 
# 
#       Testing for global IPv6 connectivity...
#                preparing...
ok 2 - Preparing  for v6 transport, got NS records for ripe.net
ok 3 - Preparing  for v4 transport, got A records for ns-pri.ripe.net
# 
#                Will try to connect to  ns-pri.ripe.net &#40;193.0.0.195&#41;
ok 4 - Preparing  for v6 transport, got AAAA records for ns-pri.ripe.net
# 
#                Will try to connect to  ns-pri.ripe.net &#40;2001:610:240:
0:53:0:0:3&#41;
# 
#                Connection failed: Send error: No route to host
# 
#                It seems you do not have global IPv6 connectivity&#39; 
#                This is not an error in Net::DNS 
#                You can confirm this by trying &#39;ping6 2001:610:240:0:
53:0:0:3&#39; 
# 
ok 5 # skip No answer available to analyse &#40;Send error: No route to 
host&#41;
# You can safely ignore the following message:
ok 6 - Correct errorstring when forcing v4
# configuring 2001:610:240:0:53:0:0:3 193.0.0.195 as nameservers
ok 7 - Fallback to V4 succeeded
ok 8 - Preparing  for v6 transport, got NS records for net-dns.org
ok 9 - Preparing  for v6 transport, got AAAA records for ns.hactrn.net
# 
#                Trying to connect to  ns.hactrn.net &#40;2002:425c:4242:0:
210:5aff:fe86:1f54&#41;
ok 10 # skip axfr_start did not return a socket
ok 11 # skip axfr_start did not return a socket
ok
        3/11 skipped: various reasons
All tests successful, 3 subtests skipped.
======================================
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> patch-ab</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/174922/59200/patch-ab">Download patch-ab</a><br />
<span class="downloadcontenttype">application/octet-stream 1.8k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;10&nbsp;18:16:03&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> .heinz-cpan [...] onlinehome.de</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; With the first attached patch &#40;patch-aa&#41; all tests can finish but
&gt; the results of tests 6 and 7 &#40;tcp6 _cannot_ succeed without an IPv6 
</div>
patch-aa was missing.

ciao
     Klaus
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/174928/59210/patch-aa">Download patch-aa</a><br />
<span class="downloadcontenttype">application/octet-stream 920b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;10&nbsp;18:16:04&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;13&nbsp;10:14:39&nbsp;2006</span>
    <span class="description">olaf [...] dacht.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18113] still problems with test 11-inet6.t &#40;IPv6 enabled but no connectivity&#41; </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 13 Mar 2006 16:14:27 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Olaf M. Kolkman&#34; &lt;olaf [...] dacht.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Mar 11, 2006, at 12:09 AM, Guest via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Fri Mar 10 18:09:14 2006: Request 18113 was acted upon.
&gt; Transaction: Ticket created by guest
&gt;        Queue: Net-DNS
&gt;      Subject: still problems with test 11-inet6.t &#40;IPv6 enabled but no
&gt;  connectivity&#41;
&gt;        Owner: Nobody
&gt;   Requestors: k.heinz-cpan@onlinehome.de
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=18113">http://rt.cpan.org/Ticket/Display.html?id=18113</a></span> &gt;
&gt;
&gt;
&gt; While preparing a package of Net-DNS 0.57 for the pkgsrc package
&gt; collection on a NetBSD 3.0 system &#40;perl 5.8.7, IPv6 enabled but
&gt; without IPv6 connectivity, online tests disabled&#41; I get the following
&gt; during &#34;make test&#34;:
</div>
Thanks... nasty cornercase in the test script that I had not catched.

I reckon that you can work around this in preparing the package &#40;Is  
the Net BSD ports collection working similar to the FreeBSD ports  
collection, with local patches and such?&#41;.


I am happy I only get bug reports for the test scripts :-&#41;...

--Olaf


------------------------------------------------------
Ik dacht net... heel even maar.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/176397/60355/PGP.sig">Download PGP.sig</a><br />
<span class="downloadcontenttype">application/pgp-signature 227b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;13&nbsp;13:42:17&nbsp;2006</span>
    <span class="description">k.heinz-cpan [...] onlinehome.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18113] still problems with test 11-inet6.t &#40;IPv6 enabled but no connectivity&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 13 Mar 2006 19:42:01 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Olaf M. Kolkman via RT&#34; &lt;bug-Net-DNS [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Klaus Heinz &lt;k.heinz-cpan [...] onlinehome.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Olaf M. Kolkman via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I reckon that you can work around this in preparing the package &#40;Is  
&gt; the Net BSD ports collection working similar to the FreeBSD ports  
&gt; collection, with local patches and such?&#41;.
</div>
Pkgsrc is quite similar to the FreeBSD ports system in this regard, so
it is not _that_ urgent to fix it in Net-DNS. On the other hand, we try
to minimize the amount of patches we have to keep in our own repository
so it would be nice if you could include them in the next release.

ciao
     Klaus
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;14&nbsp;02:12:07&nbsp;2006</span>
    <span class="description">olaf [...] dacht.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18113] still problems with test 11-inet6.t &#40;IPv6 enabled but no connectivity&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 14 Mar 2006 08:11:52 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Olaf M. Kolkman&#34; &lt;olaf [...] dacht.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Pkgsrc is quite similar to the FreeBSD ports system in this regard, so
&gt; it is not _that_ urgent to fix it in Net-DNS. On the other hand, we  
&gt; try
&gt; to minimize the amount of patches we have to keep in our own  
&gt; repository
&gt; so it would be nice if you could include them in the next release.
</div>

Off course... the trunk has been patched already.

--Olaf


------------------------------------------------------
Ik dacht net... heel even maar.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/176600/60532/PGP.sig">Download PGP.sig</a><br />
<span class="downloadcontenttype">application/pgp-signature 227b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;18&nbsp;05:17:42&nbsp;2006</span>
    <span class="description">OLAF [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;08&nbsp;09:28:37&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> João Guilherme Cardoso de Mello &#40;jguilherme [...] tw.inf.br&#41;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">remove te follow package &#40; and reinstall it later &#41;:


libio-socket-inet6-perl libnet-ip-perl libsocket6-perl
libmail-spf-query-perl libnet-cidr-lite-perl

now you are ready to install Net::DNS  :&#41;







On Sex. Mar. 10 18:09:14 2006, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; While preparing a package of Net-DNS 0.57 for the pkgsrc package
&gt; collection on a NetBSD 3.0 system &#40;perl 5.8.7, IPv6 enabled but
&gt; without IPv6 connectivity, online tests disabled&#41; I get the following
&gt; during &#34;make test&#34;:
&gt; 
&gt; ======================================
&gt; ok 1 - use Net::DNS;
&gt; # 
&gt; # The libraries needed for IPv6 support have been found
&gt; #               Now we establish if  we can bind to ::1
&gt; ok 2 # skip online tests are not enabled
&gt; Can&#39;t call method &#34;errorstring&#34; on an undefined value at t/11-inet6.t 
&gt; line 115.
&gt; ok 3 # skip online tests are not enabled
&gt; # Looks like you planned 11 tests but only ran 3.
&gt; # Looks like your test died just after 3.
&gt; dubious
&gt;         Test returned status 255 &#40;wstat 65280, 0xff00&#41;
&gt; DIED. FAILED tests 4-11
&gt;         Failed 8/11 tests, 27.27% okay &#40;less 2 skipped tests: 1 okay, 9.
&gt; 09%&#41;
&gt; Failed Test  Stat Wstat Total Fail  Failed  List of Failed
&gt; ------------------------------------------------------------------------
&gt; -------
&gt; t/11-inet6.t  255 65280    11   16 145.45%  4-11
&gt; 2 subtests skipped.
&gt; Failed 1/1 test scripts, 0.00% okay. 8/11 subtests failed, 27.27% okay.
&gt; *** Error code 255
&gt; ======================================
&gt; 
&gt; 
&gt; With the first attached patch &#40;patch-aa&#41; all tests can finish but
&gt; the results of tests 6 and 7 &#40;tcp6 _cannot_ succeed without an IPv6 
&gt; connection&#41; are still wrong because they rely on
&gt; &#34;$res-&gt;nameservers&#40;$AAAA_address&#41;&#34; from tests 2-4 which were skipped 
&gt; &#40;online tests disabled&#41;. Due to this relationship, I think tests 6 and
&gt; 7 should also be skipped if online tests are not enabled &#40;see the second 
&gt; patch, patch-ab&#41;.
&gt; 
&gt; ======================================
&gt; ok 1 - use Net::DNS;
&gt; # 
&gt; # The libraries needed for IPv6 support have been found
&gt; #               Now we establish if  we can bind to ::1
&gt; ok 2 # skip online tests are not enabled
&gt; ok 3 # skip online tests are not enabled
&gt; ok 4 # skip online tests are not enabled
&gt; ok 5 # skip No answer available to analyse &#40;unknown error or no error&#41;
&gt; not ok 6 - Correct errorstring when forcing v4
&gt; 
&gt; #     Failed test &#40;t/11-inet6.t at line 126&#41;
&gt; #          got: &#39;NOERROR&#39;
&gt; #     expected: &#39;no nameservers&#39;
&gt; # Looks like you failed 1 test of 11.
&gt; ok 7 - Query over tcp6  succeeded
&gt; ok 8 # skip online tests are not enabled
&gt; ok 9 # skip online tests are not enabled
&gt; ok 10 # skip axfr_start did not return a socket
&gt; ok 11 # skip axfr_start did not return a socket
&gt; dubious
&gt;         Test returned status 1 &#40;wstat 256, 0x100&#41;
&gt; DIED. FAILED test 6
&gt; 
&gt; ======================================
&gt; 
&gt; 
&gt; With both patches applied, I get 10/11 test skipped when online tests 
&gt; are disabled and the following correct results with online tests 
&gt; enabled:
&gt; 
&gt; ======================================
&gt; ok 1 - use Net::DNS;
&gt; # 
&gt; # The libraries needed for IPv6 support have been found
&gt; #               Now we establish if  we can bind to ::1
&gt; # 
&gt; # 
&gt; #       Testing for global IPv6 connectivity...
&gt; #                preparing...
&gt; ok 2 - Preparing  for v6 transport, got NS records for ripe.net
&gt; ok 3 - Preparing  for v4 transport, got A records for ns-pri.ripe.net
&gt; # 
&gt; #                Will try to connect to  ns-pri.ripe.net &#40;193.0.0.195&#41;
&gt; ok 4 - Preparing  for v6 transport, got AAAA records for ns-pri.ripe.net
&gt; # 
&gt; #                Will try to connect to  ns-pri.ripe.net &#40;2001:610:240:
&gt; 0:53:0:0:3&#41;
&gt; # 
&gt; #                Connection failed: Send error: No route to host
&gt; # 
&gt; #                It seems you do not have global IPv6 connectivity&#39; 
&gt; #                This is not an error in Net::DNS 
&gt; #                You can confirm this by trying &#39;ping6 2001:610:240:0:
&gt; 53:0:0:3&#39; 
&gt; # 
&gt; ok 5 # skip No answer available to analyse &#40;Send error: No route to 
&gt; host&#41;
&gt; # You can safely ignore the following message:
&gt; ok 6 - Correct errorstring when forcing v4
&gt; # configuring 2001:610:240:0:53:0:0:3 193.0.0.195 as nameservers
&gt; ok 7 - Fallback to V4 succeeded
&gt; ok 8 - Preparing  for v6 transport, got NS records for net-dns.org
&gt; ok 9 - Preparing  for v6 transport, got AAAA records for ns.hactrn.net
&gt; # 
&gt; #                Trying to connect to  ns.hactrn.net &#40;2002:425c:4242:0:
&gt; 210:5aff:fe86:1f54&#41;
&gt; ok 10 # skip axfr_start did not return a socket
&gt; ok 11 # skip axfr_start did not return a socket
&gt; ok
&gt;         3/11 skipped: various reasons
&gt; All tests successful, 3 subtests skipped.
&gt; ======================================
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;08&nbsp;09:28:38&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;08&nbsp;09:39:24&nbsp;2006</span>
    <span class="description">olaf [...] dacht.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18113] still problems with test 11-inet6.t &#40;IPv6 enabled but no connectivity&#41; </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 8 Jun 2006 15:38:23 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Olaf M. Kolkman&#34; &lt;olaf [...] dacht.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Jun 8, 2006, at 3:28 PM, Guest via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;        Queue: Net-DNS
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=18113">http://rt.cpan.org/Ticket/Display.html?id=18113</a></span> &gt;
&gt;
&gt; remove te follow package &#40; and reinstall it later &#41;:
&gt;
&gt;
&gt; libio-socket-inet6-perl libnet-ip-perl libsocket6-perl
&gt; libmail-spf-query-perl libnet-cidr-lite-perl
&gt;
&gt; now you are ready to install Net::DNS  :&#41;
&gt;
</div>


Is this with version 0.57 from CPAN or with the version that still  
lives in the SVN repository only and has not yet been released?

--Olaf
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/205518/78260/PGP.sig">Download PGP.sig</a><br />
<span class="downloadcontenttype">application/pgp-signature 227b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;15&nbsp;07:55:17&nbsp;2006</span>
    <span class="description">k.heinz-cpan [...] onlinehome.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18113] Resolved: still problems with test 11-inet6.t &#40;IPv6 enabled but no connectivity&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 15 Jul 2006 13:53:02 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Olaf Kolkman via RT &lt;bug-Net-DNS [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Klaus Heinz &lt;k.heinz-cpan [...] onlinehome.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Olaf Kolkman via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=18113">http://rt.cpan.org/Ticket/Display.html?id=18113</a></span> &gt;
</div>
I discovered that somehow in Net-DNS 0.58 one part of my patch-aa has
not been applied:

  t/11-inet6.................ok 1/11#                                          
  # The libraries needed for IPv6 support have been found
  #               Now we establish if  we can bind to ::1
  t/11-inet6.................ok 2/11# Looks like you planned 11 tests but only
  ran 10.
  t/11-inet6.................dubious                                           
          Test returned status 255 &#40;wstat 65280, 0xff00&#41;
  DIED. FAILED test 11
          Failed 1/11 tests, 90.91% okay &#40;less 9 skipped tests: 1 okay, 9.09%&#41;

Again, this is when IPv6 is enabled but online tests are disabled.
I will append the missing part of the patch again.

ciao
     Klaus
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;17&nbsp;03:08:11&nbsp;2006</span>
    <span class="description">olaf [...] dacht.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18113] Resolved: still problems with test 11-inet6.t &#40;IPv6 enabled but no connectivity&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 17 Jul 2006 09:07:28 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Olaf M. Kolkman&#34; &lt;olaf [...] dacht.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Again, this is when IPv6 is enabled but online tests are disabled.
&gt; I will append the missing part of the patch again.
&gt;
</div>
Hmm, puzzled of why this happened and why I did not notice.

Anyway, its fixed on the trunk. 0.59 should behave better, or at  
least have other bugs :-&#41;

Thanks!

--Olaf


------------------------------------------------------
Ik dacht net... heel even maar.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/224465/92948/PGP.sig">Download PGP.sig</a><br />
<span class="downloadcontenttype">application/pgp-signature 227b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;17&nbsp;11:04:22&nbsp;2006</span>
    <span class="description">k.heinz-cpan [...] onlinehome.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18113] Resolved: still problems with test 11-inet6.t &#40;IPv6 enabled but no connectivity&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 17 Jul 2006 17:02:39 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Olaf M. Kolkman via RT&#34; &lt;bug-Net-DNS [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Klaus Heinz &lt;k.heinz-cpan [...] onlinehome.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Olaf M. Kolkman via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hmm, puzzled of why this happened and why I did not notice.
&gt; 
&gt; Anyway, its fixed on the trunk. 0.59 should behave better, or at  
&gt; least have other bugs :-&#41;
</div>
We&#39;ll see :&#41;

I did not attach the patch because I am still struggling with this new
authentication scheme on rt.cpan.org. Neither Opera nor Firefox work for
me.

ciao
     Klaus
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;28&nbsp;07:40:39&nbsp;2007</span>
    <span class="description">OLAF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed in 0.59
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;28&nbsp;07:40:41&nbsp;2007</span>
    <span class="description">OLAF [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
