<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #42793 for Net-IP: reverse_ip Bug</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #42793 for Net-IP: reverse_ip Bug</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Net-IP">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Net-IP">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Net-IP">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Net-IP">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-IP">Net-IP CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">42793</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Net-IP">Net-IP</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">cpan [...] bat.ru
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
andreas.papst [...] univie.ac.at

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-22744-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-22745-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




ip_reverse.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/933812/484809/ip_reverse.patch">
Wed May 11 17:26:48 2011 (1.6k) by SILASMONK [...] cpan.org
</a>
</font></li>
</ul>


Net-IP.reverse_ip.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/658891/337835/Net-IP.reverse_ip.patch">
Thu Sep 03 13:02:36 2009 (1.7k) by FANY [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=42793">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-559849" href="/Public/Bug/Display.html?id=42793#txn-559849">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;26&nbsp;04:27:12&nbsp;2009</span>
    <span class="description">andreas.papst [...] univie.ac.at -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> reverse_ip Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 26 Jan 2009 10:26:06 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-IP [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Andreas Papst &lt;andreas.papst [...] univie.ac.at&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/559849/282610/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/282610">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 288b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Net::IP has a function reverse_ip that should return
the reverse IP in in-addr.arpa notation. In case of
1.2.3.0 it does not and returns 3.2.1.in-addr.arpa 
instead of 0.3.2.1.in-addr.arpa.

If you edit ip_reverse to not omit leading 0s,
other functions fail.

Kind Regards
Andreas
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-658891" href="/Public/Bug/Display.html?id=42793#txn-658891">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;03&nbsp;13:02:36&nbsp;2009</span>
    <span class="description">FANY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> manuel.valente [...] gmail.com</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/658891/337832/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/337832">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 101b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve just discovered the same problem.
Please find my suggestion for a patch attached.

Regards,
fany
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/658891/337835/Net-IP.reverse_ip.patch">Download Net-IP.reverse_ip.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -ur Net-IP-1.25/IP.pm Net-IP-1.26/IP.pm
--- Net-IP-1.25/IP.pm	2006-05-22 18:46:40.000000000 +0200
+++ Net-IP-1.26/IP.pm	2009-09-03 18:59:52.994133875 +0200
@@ -40,6 +40,7 @@
 package Net::IP;
 
 use strict;
+use Carp qw&#40;croak&#41;;
 use Math::BigInt;
 
 # Global Variables definition
@@ -47,7 +48,7 @@
   %IPv4ranges %IPv6ranges $useBigInt
   $IP_NO_OVERLAP $IP_PARTIAL_OVERLAP $IP_A_IN_B_OVERLAP $IP_B_IN_A_OVERLAP $IP_IDENTICAL&#41;;
 
-$VERSION = &#39;1.25&#39;;
+$VERSION = &#39;1.26&#39;;
 
 require Exporter;
 
@@ -1770,12 +1771,12 @@
     if &#40;$ip_version == 4&#41; {
         my @quads    = split /\./, $ip;
         my $no_quads = &#40;$len / 8&#41;;
+        croak&#40;&#34;A /$len object does not have a defined reverse name&#34;&#41;
+          if $no_quads != int $no_quads;
 
         my @reverse_quads = reverse @quads;
 
-        while &#40;@reverse_quads and $reverse_quads[0] == 0&#41; {
-            shift&#40;@reverse_quads&#41;;
-        }
+        splice @reverse_quads, 0, 4 - $no_quads;
 
         return join &#39;.&#39;, @reverse_quads, &#39;in-addr&#39;, &#39;arpa.&#39;;
     }
diff -ur Net-IP-1.25/t/ipv4.t Net-IP-1.26/t/ipv4.t
--- Net-IP-1.25/t/ipv4.t	2006-04-26 10:35:42.000000000 +0200
+++ Net-IP-1.26/t/ipv4.t	2009-09-03 18:55:30.410538089 +0200
@@ -12,7 +12,7 @@
 	};
 };
 
-my $numtests = 26;
+my $numtests = 27;
 
 # Create checker:
 my $T = typical ExtUtils::TBone;
@@ -43,6 +43,11 @@
 $T-&gt;ok_eq &#40;$ip-&gt;last_bin&#40;&#41;,&#39;11000011011100100101000011111111&#39;,$ip-&gt;error&#40;&#41;&#41;;
 $T-&gt;ok_eq &#40;$ip-&gt;last_ip&#40;&#41;,&#39;195.114.80.255&#39;,$ip-&gt;error&#40;&#41;&#41;;
 
+{    # for #42793: reverse_ip Bug
+    my $ip = Net::IP-&gt;new&#40;&#39;195.114.80.0&#39;&#41;;
+    $T-&gt;ok_eq&#40; $ip-&gt;reverse_ip, &#39;0.80.114.195.in-addr.arpa.&#39;, $ip-&gt;error &#41;;
+}
+
 $ip-&gt;set&#40;&#39;202.31.4/24&#39;&#41;;
 $T-&gt;ok_eq &#40;$ip-&gt;ip&#40;&#41;,&#39;202.31.4.0&#39;,$ip-&gt;error&#40;&#41;&#41;;
 
Only in Net-IP-1.26: testout
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-658892" href="/Public/Bug/Display.html?id=42793#txn-658892">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;03&nbsp;13:02:37&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-659269" href="/Public/Bug/Display.html?id=42793#txn-659269">#</a>      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;04&nbsp;04:21:52&nbsp;2009</span>
    <span class="description">FANY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/659269/338080/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/338080">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 67b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Also see bug #25169 &#40;and maybe merge them, if the system lets you.&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-933812" href="/Public/Bug/Display.html?id=42793#txn-933812">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;11&nbsp;17:26:48&nbsp;2011</span>
    <span class="description">SILASMONK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/933812/484808/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/484808">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 226b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Sep 04 04:21:52 2009, FANY wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Also see bug #25169 &#40;and maybe merge them, if the system lets you.&#41;
</div>
This bug is being fixed in Debian using the following patch. So now
whoever owns this module can take their pick. 
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> ip_reverse.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/933812/484809/ip_reverse.patch">Download ip_reverse.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Author: Nicholas Bamber &lt;nicholas@periapt.co.uk&gt;
Bug: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Public/Bug/Display.html?d=42793">http://rt.cpan.org/Public/Bug/Display.html?d=42793</a></span>
Bug-Debian: <span class="clickylink"><a target="new" rel="nofollow" href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=623681">http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=623681</a></span>
Subject: ip_reverse&#40;&#41; for IPv4 ignores prefixlen parameter
 The problem particularly occurs where there are a lot of zeros
 in the less significant quads. You can use a /number to force
 retention of those quads in the reversed address but the code
 was ignoring that instruction. There is some ambiguity over what
 should happen when the number of bits specified does not fall
 on a boundary. I have tested with Net::IP::XS and tried to follow
 what they do.
Last-Update: 2011-05-11
--- /dev/null
+++ b/t/reverse_ip.t
@@ -0,0 +1,13 @@
+use Test::More tests=&gt;4;
+use Net::IP;
+
+my $obj = Net::IP-&gt;new&#40;&#39;10.10.0.0/31&#39;&#41;;
+is&#40;$obj-&gt;reverse_ip, &#39;0.10.10.in-addr.arpa.&#39;, &#39;reverse_ip&#39;&#41;;
+$obj-&gt;set&#40;&#39;192.168.0.0/24&#39;&#41;;
+is&#40;$obj-&gt;reverse_ip, &#39;0.168.192.in-addr.arpa.&#39;, &#39;reverse_ip&#39;&#41;;
+$obj-&gt;set&#40;&#39;192.0.0.0/24&#39;&#41;;
+is&#40;$obj-&gt;reverse_ip, &#39;0.0.192.in-addr.arpa.&#39;, &#39;reverse_ip&#39;&#41;;
+$obj-&gt;set&#40;&#39;192.0.0.0/32&#39;&#41;;
+is&#40;$obj-&gt;reverse_ip, &#39;0.0.0.192.in-addr.arpa.&#39;, &#39;reverse_ip&#39;&#41;;
+
+
--- a/IP.pm
+++ b/IP.pm
@@ -1769,12 +1769,13 @@
 
     if &#40;$ip_version == 4&#41; {
         my @quads    = split /\./, $ip;
-        my $no_quads = &#40;$len / 8&#41;;
+        my $no_quads = 4 - int&#40;$len / 8&#41;;
 
         my @reverse_quads = reverse @quads;
 
-        while &#40;@reverse_quads and $reverse_quads[0] == 0&#41; {
+        while &#40;@reverse_quads and $reverse_quads[0] == 0 and $no_quads &gt; 0&#41; {
             shift&#40;@reverse_quads&#41;;
+            --$no_quads;
         }
 
         return join &#39;.&#39;, @reverse_quads, &#39;in-addr&#39;, &#39;arpa.&#39;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-949617" href="/Public/Bug/Display.html?id=42793#txn-949617">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;25&nbsp;22:40:44&nbsp;2011</span>
    <span class="description">cpan [...] bat.ru -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-949618" href="/Public/Bug/Display.html?id=42793#txn-949618">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;25&nbsp;22:41:27&nbsp;2011</span>
    <span class="description">cpan [...] bat.ru -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/949618/493789/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/493789">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 65b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fix committed into 1.27 release. Thanks for the patch and report!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-949621" href="/Public/Bug/Display.html?id=42793#txn-949621">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;25&nbsp;22:41:28&nbsp;2011</span>
    <span class="description">cpan [...] bat.ru -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.468583</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
