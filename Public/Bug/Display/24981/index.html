<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #24981 for Pod-Simple-Wiki: [PATCH] better Mediawiki support</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #24981 for Pod-Simple-Wiki: [PATCH] better Mediawiki support</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Pod-Simple-Wiki">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Pod-Simple-Wiki">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Pod-Simple-Wiki">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Pod-Simple-Wiki">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="http://github.com/jmcnamara/pod-simple-wiki/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Pod-Simple-Wiki">Pod-Simple-Wiki CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">24981</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Pod-Simple-Wiki">Pod-Simple-Wiki</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">jmcnamara [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
cjm [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-26188-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.07    </td>
  </tr>
  <tr id="CF-26189-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




nbsp.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/292604/132064/nbsp.patch">
Wed Feb 21 17:37:00 2007 (753b) by cjm [...] cpan.org
</a>
</font></li>
</ul>


wikipedia.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/291236/131318/wikipedia.patch">
Thu Feb 15 17:44:17 2007 (6.4k) by cjm [...] cpan.org
</a>
</font></li>
</ul>


wikipedia2.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/292492/132007/wikipedia2.patch">
Wed Feb 21 11:00:02 2007 (13k) by cjm [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=24981">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-291236" href="/Public/Bug/Display.html?id=24981#txn-291236">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;15&nbsp;17:44:17&nbsp;2007</span>
    <span class="description">cjm [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [PATCH] better Mediawiki support</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/291236/131315/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/131315">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve been using pod2wiki to put module documentation on my company&#39;s
wiki &#40;powered by Mediawiki&#41;.  It&#39;s been a great help, but I&#39;ve
encountered several issues.  Unfortunately, I don&#39;t have time to submit
individual patches, so I&#39;ve gathered everything together here.

The first issue was colons in =item entries &#40;like Module::Name&#41;.  I gave
a patch for 0.06 in bug 24704, and updated it for 0.07 in this patch.

After that, I discovered that nested over-text sections didn&#39;t format
properly.  Instead of indenting with multiple semicolons, you need to
use colons, with only the last one being a semicolon.

Next, it couldn&#39;t handle multiple paragraphs following one =item in an
over-text section.  I fixed that with _indent_text and changes to
_start_Para &#38; _end_item_text.

Then, I found that blank lines in &lt;code&gt; sections caused them to split
into separate sections.  I added code in _handle_text to insert spaces.

Finally, it didn&#39;t handle links at all.  I added a very crude hack for
that, but it&#39;s good enough for my needs.

I updated the tests so &#34;make test&#34; should pass.  I added a TODO test
indicating that you&#39;re not really handling nested lists properly.  It&#39;s
supposed to nest like this:
* Bullet item 1.0
*# Number item 1.1
*#; Foo
*#:Definition item 1.2
*#; Bar
*#:Definition item 2.2
*# Number item 2.1
* Bullet item 2.0

But what it currently outputs &#40;with this patch&#41; is this:
* Bullet item 1.0
## Number item 1.1
::; Foo
:::Definition item 1.2
::; Bar
:::Definition item 2.2
## Number item 2.1
* Bullet item 2.0

My patch does not address this, as it would require a more fundamental
architechtural change.

I think it might be good to split the &#39;wiki&#39; format into a derived class
and keep Pod::Simple::Wiki an abstract base class.  Otherwise, you can&#39;t
make a change for &#39;wiki&#39; format without risking it affecting the other
formats &#40;which may not want the change&#41;.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> wikipedia.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/291236/131318/wikipedia.patch">Download wikipedia.patch</a><br />
<span class="downloadcontenttype">text/x-diff 6.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/Pod/Simple/Wiki.pm	Thu Feb 01 16:04:02 2007
+++ lib/Pod/Simple/Wiki.pm	Thu Feb 15 10:31:22 2007
@@ -104,6 +104,11 @@
 
     my $self = shift;
 
+    if &#40;$self-&gt;{_indent_text}&#41; {
+      $self-&gt;{_wiki_text} .= $self-&gt;{_indent_text};
+      $self-&gt;{_indent_text} = &#39;&#39;;
+    }
+
     $self-&gt;{_wiki_text} .= $_[0];
 }
 
@@ -273,7 +278,7 @@
     }
 
     # Rejoin the tokens and whitespace.
-    $self-&gt;{_wiki_text} .= join &#39;&#39;, @tokens;
+    $self-&gt;_append&#40;join &#39;&#39;, @tokens&#41;;
 }
 
 
@@ -285,12 +290,14 @@
 sub _start_B  {$_[0]-&gt;_append_tag&#40;&#39;&lt;b&gt;&#39;&#41;   unless $_[0]-&gt;_skip_headings&#40;&#41;}
 sub _start_C  {$_[0]-&gt;_append_tag&#40;&#39;&lt;tt&gt;&#39;&#41;  unless $_[0]-&gt;_skip_headings&#40;&#41;}
 sub _start_F  {$_[0]-&gt;_start_I}
+sub _start_L  {$_[0]-&gt;_append_tag&#40;&#39;&lt;a&gt;&#39;&#41;   unless $_[0]-&gt;_skip_headings&#40;&#41;}
 
 sub _end_I    {$_[0]-&gt;_append_tag&#40;&#39;&lt;/i&gt;&#39;&#41;  unless $_[0]-&gt;_skip_headings&#40;&#41;}
 sub _end_B    {$_[0]-&gt;_append_tag&#40;&#39;&lt;/b&gt;&#39;&#41;  unless $_[0]-&gt;_skip_headings&#40;&#41;}
 sub _end_C    {$_[0]-&gt;_append_tag&#40;&#39;&lt;/tt&gt;&#39;&#41; unless $_[0]-&gt;_skip_headings&#40;&#41;}
 sub _end_F    {$_[0]-&gt;_end_I}
+sub _end_L    {$_[0]-&gt;_append_tag&#40;&#39;&lt;/a&gt;&#39;&#41;  unless $_[0]-&gt;_skip_headings&#40;&#41;}
 
 
 ###############################################################################
--- lib/Pod/Simple/Wiki/Mediawiki.pm	Thu Feb 01 16:04:06 2007
+++ lib/Pod/Simple/Wiki/Mediawiki.pm	Thu Feb 15 13:30:52 2007
@@ -32,6 +32,8 @@
             &#39;&lt;/tt&gt;&#39;  =&gt; &#39;&lt;/tt&gt;&#39;,
             &#39;&lt;pre&gt;&#39;  =&gt; &#34;\n&lt;code&gt;\n&#34;,
             &#39;&lt;/pre&gt;&#39; =&gt; &#34;\n&lt;/code&gt;\n&#34;,
+            &#39;&lt;a&gt;&#39;    =&gt; &#34;[[&#34;,
+            &#39;&lt;/a&gt;&#39;   =&gt; &#34;]]&#34;,
 
             &#39;&lt;h1&gt;&#39;   =&gt; &#39;==&#39;,
             &#39;&lt;/h1&gt;&#39;  =&gt; &#34;==\n&#34;,
@@ -81,7 +83,7 @@
          $self-&gt;_append&#40;&#39;#&#39; x $indent_level . &#39; &#39;&#41;;
     }
     elsif &#40;$item_type eq &#39;text&#39;&#41; {
-         $self-&gt;_append&#40;&#39;;&#39; x $indent_level . &#39; &#39;&#41;;
+         $self-&gt;_append&#40;&#39;:&#39; x &#40;$indent_level-1&#41; . &#39;; &#39;&#41;;
     }
 }
 
@@ -98,13 +100,17 @@
     my $self = shift;
     my $text = $_[0];
 
-    # Split the text into tokens but maintain the whitespace
-    my @tokens = split /&#40;\s+&#41;/, $text;
+    # Escape colons in definition lists:
+    if &#40;$self-&gt;{_in_item_text}&#41; {
+        $text =~ s/:/&#38;#58;/g;   # A colon would end the item
+    }
 
-    # Escape any tokens here.
+    # Escape empty lines in verbatim sections:
+    if &#40;$self-&gt;{_in_Verbatim}&#41; {
+        $text =~ s/^$/ /mg; # An empty line would split the section
+    }
 
-    # Rejoin the tokens and whitespace.
-    $self-&gt;{_wiki_text} .= join &#39;&#39;, @tokens;
+    $self-&gt;_append&#40;$text&#41;;
 }
 
 
@@ -117,7 +123,7 @@
 # Text     lists
 # Block    lists
 #
-sub _end_item_text     {$_[0]-&gt;_output&#40;&#39; : &#39;&#41;}
+sub _end_item_text     { }      # _start_Para will insert the :
 
 
 ###############################################################################
@@ -132,8 +138,12 @@
     my $indent_level = $self-&gt;{_item_indent};
 
     if &#40;$self-&gt;{_in_over_block}&#41; {
-        # Do something here is necessary
+      $self-&gt;{_indent_text} = &#40;&#39;:&#39; x $indent_level&#41;;
+    }
+
+    if &#40;$self-&gt;{_in_over_text}&#41; {
+      $self-&gt;{_indent_text} = &#34;\n&#34; . &#40;&#39;:&#39; x $indent_level&#41;;
     }
 }
 
--- t/05_03_wikipedia_lists.t	Thu Feb 01 09:39:52 2007
+++ t/05_03_wikipedia_lists.t	Thu Feb 15 13:53:30 2007
@@ -13,7 +13,7 @@
 use strict;
 
 use Pod::Simple::Wiki;
-use Test::More tests =&gt; 12;
+use Test::More tests =&gt; 14;
 
 my $style = &#39;wikipedia&#39;;
 
@@ -345,7 +345,8 @@
 # Expected output.
 #
 #
-; Foo : Definition item
+; Foo
+:Definition item
 
 ###############################################################################
 #
@@ -375,9 +376,12 @@
 # Expected output.
 #
 #
-; Foo : Definition item 1.0
-; Bar : Definition item 2.0
-; Baz : Definition item 3.0
+; Foo
+:Definition item 1.0
+; Bar
+:Definition item 2.0
+; Baz
+:Definition item 3.0
 
 ###############################################################################
 #
@@ -427,16 +431,24 @@
 # Expected output.
 #
 #
-; Foo : Definition item 1.0
-;; Foo : Definition item 1.1
-;;; Foo : Definition item 1.2
-;;; Bar : Definition item 2.2
-;; Bar : Definition item 2.1
-; Bar : Definition item 2.0
+; Foo
+:Definition item 1.0
+:; Foo
+::Definition item 1.1
+::; Foo
+:::Definition item 1.2
+::; Bar
+:::Definition item 2.2
+:; Bar
+::Definition item 2.1
+; Bar
+:Definition item 2.0
 
 ###############################################################################
 #
-# NAME: Test for varied nested list.
+# NAME: Test for varied nested list &#40;incorrect&#41;.
+#
+# Note that the output is not formatted correctly &#40;see the next TODO test&#41;
 #
 =pod
 
@@ -484,17 +496,76 @@
 #
 * Bullet item 1.0
 \## Number item 1.1
-;;; Foo : Definition item 1.2
-;;; Bar : Definition item 2.2
+::; Foo
+:::Definition item 1.2
+::; Bar
+:::Definition item 2.2
 \## Number item 2.1
 * Bullet item 2.0
 
+###############################################################################
+#
+# NAME: Test for varied nested list.
+#
+# TODO: Nest lists correctly
+#
+=pod
+
+=over
+
+=item *
+
+Bullet item 1.0
+
+=over
+
+=item 1
+
+Number item 1.1
+
+=over
+
+=item Foo
+
+Definition item 1.2
+
+=item Bar
+
+Definition item 2.2
+
+=back
+
+=item 2
+
+Number item 2.1
+
+=back
+
+=item *
+
+Bullet item 2.0
+
+=back
+
+=cut
+#
+#
+# Expected output.
+#
+#
+* Bullet item 1.0
+*# Number item 1.1
+*#; Foo
+*#:Definition item 1.2
+*#; Bar
+*#:Definition item 2.2
+*# Number item 2.1
+* Bullet item 2.0
+
 ################################################################################
 #
 # NAME: Test for definition list without =items, &lt;blockquote&gt;.
 #
-# TODO: Fix this later.
-#
 =pod
 
 =over
@@ -509,14 +580,12 @@
 # Expected output.
 #
 #
-; : This is a long sentence that forms part of a definition block.
+:This is a long sentence that forms part of a definition block.
 
 ################################################################################
 #
 # NAME: Test for definition list without a definition.
 #
-# TODO: Fix this later.
-#
 =pod
 
 =over
@@ -531,8 +600,31 @@
 # Expected output.
 #
 #
-; This is a long sentence that forms part of a definition block. :
+; This is a long sentence that forms part of a definition block.
+################################################################################
+#
+# NAME: Test 2 for definition list without a definition.
+#
+# TODO: Needs a newline after the first item
+#
+=pod
+
+=over
+
+=item This is a long sentence that forms part of a definition block.
 
+=item This is the next item.
+
+=back
+
+=cut
+#
+#
+# Expected output.
+#
+#
+; This is a long sentence that forms part of a definition block.
+; This is the next item.
 ###############################################################################
 #
 # End
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-292492" href="/Public/Bug/Display.html?id=24981#txn-292492">#</a>      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;21&nbsp;11:00:01&nbsp;2007</span>
    <span class="description">cjm [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/292492/132004/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/132004">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 348b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve attached an updated patch.  It includes all the previous changes, plus:

* Greatly improved link handling &#40;subclasses must define _format_link&#41;
* Removes extra blank line before &lt;code&gt; sections
* Escapes &#39;&#39; to prevent it being interpreted as a formatting code
* Accepts the &#34;mediawiki&#34; target to allow preformatted wiki-only text
* More tests
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/292492/132007/wikipedia2.patch">Download wikipedia2.patch</a><br />
<span class="downloadcontenttype">text/x-diff 13k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-292604" href="/Public/Bug/Display.html?id=24981#txn-292604">#</a>      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;21&nbsp;17:36:59&nbsp;2007</span>
    <span class="description">cjm [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/292604/132061/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/132061">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 120b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve added a small patch that adds support for S&lt;&gt; &#40;non-breaking spaces&#41;.
This should be applied after wikipedia2.patch.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/292604/132064/nbsp.patch">Download nbsp.patch</a><br />
<span class="downloadcontenttype">text/x-diff 753b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/Pod/Simple/Wiki.pm	Wed Feb 21 09:49:07 2007
+++ lib/Pod/Simple/Wiki.pm	Wed Feb 21 10:23:14 2007
@@ -68,7 +68,8 @@
     }
 
     my $self                    = Pod::Simple-&gt;new&#40;@_&#41;;
+       $self-&gt;nbsp_for_S&#40;1&#41;;
        $self-&gt;{_wiki_text}      = &#39;&#39;;
        $self-&gt;{_tags}           = $tags;
        $self-&gt;{output_fh}     ||= *STDOUT{IO};
--- lib/Pod/Simple/Wiki/Mediawiki.pm	Wed Feb 21 09:49:07 2007
+++ lib/Pod/Simple/Wiki/Mediawiki.pm	Wed Feb 21 10:25:17 2007
@@ -147,6 +147,8 @@
         $text =~ s/^$/ /mg;    # An empty line would split the section
       }
 
+      $text =~ s/\xA0/&#38;nbsp;/g; # Convert non-breaking spaces to entities
+
       $text =~ s/&#39;&#39;/&#39;&#38;#39;/g;   # It&#39;s not a formatting code
     } # end unless in data paragraph
 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-356068" href="/Public/Bug/Display.html?id=24981#txn-356068">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;27&nbsp;07:10:00&nbsp;2007</span>
    <span class="description">jmcnamara [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-356069" href="/Public/Bug/Display.html?id=24981#txn-356069">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;27&nbsp;07:10:44&nbsp;2007</span>
    <span class="description">jmcnamara [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/356069/160495/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/160495">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 44b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">

Patches added in version 0.08.

John.
-- 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-356070" href="/Public/Bug/Display.html?id=24981#txn-356070">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;27&nbsp;07:10:48&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-356072" href="/Public/Bug/Display.html?id=24981#txn-356072">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;27&nbsp;07:10:52&nbsp;2007</span>
    <span class="description">jmcnamara [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.491633</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
