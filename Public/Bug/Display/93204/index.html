<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #93204 for DBI: Uninitialized warnings in SqlEngine.pm</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #93204 for DBI: Uninitialized warnings in SqlEngine.pm</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=DBI">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=DBI">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=DBI">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=DBI">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBI">DBI CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">93204</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=DBI">DBI</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
Dan [...] DWright.Org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
ribasushi [...] leporine.io

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10328-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10329-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=93204">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1328970" href="/Public/Bug/Display.html?id=93204#txn-1328970">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;20&nbsp;13:58:42&nbsp;2014</span>
    <span class="description">Dan [...] DWright.Org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Uninitialized warnings in SqlEngine.pm</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1328970/704953/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/704953">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

After upgrading to the most recent DBI, I&#39;m getting the following warning, a lot:

Use of uninitialized value in concatenation &#40;.&#41; or string at /usr/local/lib/perl5/site_perl/5.8.3/i386-freebsd/DBI/DBD/SqlEngine.pm line 580.
Use of uninitialized value in concatenation &#40;.&#41; or string at /usr/local/lib/perl5/site_perl/5.8.3/i386-freebsd/DBI/DBD/SqlEngine.pm line 581.

Here is the offending code from sub FETCH:

 574         unless &#40;$attr_prefix&#41;
 575         {
 576             &#40; my $drv_class = $dbh-&gt;{ImplementorClass} &#41; =~ s/::db$//;
 577             $attr_prefix = DBI-&gt;driver_prefix&#40;$drv_class&#41;;
 578             $attrib      = $attr_prefix . $attrib;
 579         }
 580         my $valid_attrs = $attr_prefix . &#34;valid_attrs&#34;;
 581         my $ro_attrs    = $attr_prefix . &#34;readonly_attrs&#34;;

The problem is that I&#39;m connecting via my module, DBD::Multi, which isn&#39;t registered inside DBI, so driver_prefix&#40;&#41; is returning undef.   

I wonder if perhaps $attr_prefix could be changed to an empty string rather than undef in cases where a DBD module has not been registered with DBI?

Thanks,
-Dan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1328981" href="/Public/Bug/Display.html?id=93204#txn-1328981">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;20&nbsp;14:00:56&nbsp;2014</span>
    <span class="description">Dan [...] DWright.Org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dan [...] DWright.Org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1328981/704961/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/704961">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 158b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Feb 20 13:58:42 2014, DWRIGHT wrote:

*facepalm*    -- This ticket should have been put into the DBI queue, not the DBD-Pg queue. 

Sorry about that!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1328991" href="/Public/Bug/Display.html?id=93204#txn-1328991">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;20&nbsp;14:05:49&nbsp;2014</span>
    <span class="description">dwheeler [...] cpan.org -  Queue changed from DBD-Pg to DBI</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1328993" href="/Public/Bug/Display.html?id=93204#txn-1328993">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;20&nbsp;14:06:07&nbsp;2014</span>
    <span class="description">dwheeler [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1328993/704968/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/704968">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 224b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2014-02-20 14:00:56, DWRIGHT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Thu Feb 20 13:58:42 2014, DWRIGHT wrote:
&gt; 
&gt; *facepalm*    -- This ticket should have been put into the DBI queue,
&gt; not the DBD-Pg queue.
&gt; 
&gt; Sorry about that!
</div>

NP, I moved it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1328994" href="/Public/Bug/Display.html?id=93204#txn-1328994">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;20&nbsp;14:06:07&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1329023" href="/Public/Bug/Display.html?id=93204#txn-1329023">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;20&nbsp;15:04:27&nbsp;2014</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1329023/704988/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/704988">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 204b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I would need more information about the context, otherwise I would assume a dirty hack &#40;read: you&#39;re using a driver without registered prefix&#41;.

From my perspective this isn&#39;t a bug, it works as designed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1329035" href="/Public/Bug/Display.html?id=93204#txn-1329035">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;20&nbsp;15:15:47&nbsp;2014</span>
    <span class="description">Dan [...] DWright.Org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> TIMB [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #93204] Uninitialized warnings in SqlEngine.pm</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 20 Feb 2014 15:15:40 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBI [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Daniel Wright &lt;dan [...] dwright.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1329035/704991/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/704991">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 540b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Feb 20, 2014, at 3:04 PM, Jens Rehsack via RT &lt;bug-DBI@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=93204">https://rt.cpan.org/Ticket/Display.html?id=93204</a></span> &gt;
&gt; 
&gt; I would need more information about the context, otherwise I would assume a dirty hack &#40;read: you&#39;re using a driver without registered prefix&#41;.
&gt; 
&gt; From my perspective this isn&#39;t a bug, it works as designed.
</div>
I’m not sure I understand what you mean by “dirty hack.”    Are you suggesting that if a DBD driver has not been registered with DBI, then DBI is designed to fail when using it?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1329038" href="/Public/Bug/Display.html?id=93204#txn-1329038">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;20&nbsp;15:24:38&nbsp;2014</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1329038/704994/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/704994">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 261b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m saying, that DBI::DBD::SqlEngine is designed that way &#40;because we need more information about users ^^&#41;.

But SqlEngine is made in a generic way supporting driver attributes by registered prefix in DBI. I&#39;m open for proposals, but that&#39;s the current design.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1329041" href="/Public/Bug/Display.html?id=93204#txn-1329041">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;20&nbsp;15:35:23&nbsp;2014</span>
    <span class="description">Dan [...] DWright.Org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #93204] Uninitialized warnings in SqlEngine.pm</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 20 Feb 2014 15:35:18 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBI [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Daniel Wright &lt;dan [...] dwright.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1329041/704998/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/704998">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Feb 20, 2014, at 3:24 PM, Jens Rehsack via RT &lt;bug-DBI@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m saying, that DBI::DBD::SqlEngine is designed that way &#40;because we need more information about users ^^&#41;.
</div>
Hmm.. okay.

I note that back in 2010, your e-mail to me implied that registration was optional:

        <span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.dbi.dev/2010/08/msg6206.html">http://www.nntp.perl.org/group/perl.dbi.dev/2010/08/msg6206.html</a></span>

But that was 4 years ago.   So perhaps it is no longer applicable.   The most straightforward solution for my present issue may simply be to request to have DBD::Multi registered with DBI.    How may I do that?

However, I still believe there is a greater issue here:  I suspect that there are a lot of cases where not all users are able to share their information with you.    DBI is one of the most popular modules in CPAN.   I’m sure there are a lot of people using it in proprietary ways that they just can’t share.    The Robustness principle would suggest that it would be best if DBI allowed them to continue doing what they do, without emitting warnings.

However, if you are absolutely set on the design decision that  SqlEngine is supposed to break when you use it with an unregistered driver, then I recommend you make it die explicitly rather than allow it to output cryptic warnings.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1329041/704999/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/704999">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.5k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1329044" href="/Public/Bug/Display.html?id=93204#txn-1329044">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;20&nbsp;16:17:22&nbsp;2014</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1329044/705002/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/705002">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Feb 20 15:35:23 2014, DWRIGHT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; On Feb 20, 2014, at 3:24 PM, Jens Rehsack via RT &lt;bug-DBI@rt.cpan.org&gt;
&gt; wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; I&#39;m saying, that DBI::DBD::SqlEngine is designed that way &#40;because we
&gt; &gt; need more information about users ^^&#41;.
</div>&gt; 
&gt; Hmm.. okay.
&gt; 
&gt; I note that back in 2010, your e-mail to me implied that registration
&gt; was optional:
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.dbi.dev/2010/08/msg6206.html">http://www.nntp.perl.org/group/perl.dbi.dev/2010/08/msg6206.html</a></span>
&gt; 
&gt; But that was 4 years ago.   So perhaps it is no longer applicable.
</div>
Exactly ;&#41;
The initial recommendation was around a time where DBD::File deals with all the generic derived ones, but nowadays the most of the methods got refactored into common base class.

It is also mentioned in the doc that it&#39;s assumed: <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/dist/DBI/lib/DBI/DBD/SqlEngine/HowTo.pod#CREATING_DRIVER_CLASSES">http://search.cpan.org/dist/DBI/lib/DBI/DBD/SqlEngine/HowTo.pod#CREATING_DRIVER_CLASSES</a></span>

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The most straightforward solution for my present issue may simply be
&gt; to request to have DBD::Multi registered with DBI.    How may I do
&gt; that?
</div>
This should be enough - how sounds dmu_? &#40;substitute d with E and u with c^2 and you have the world formula \o/&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; However, I still believe there is a greater issue here:  I suspect
&gt; that there are a lot of cases where not all users are able to share
&gt; their information with you.    DBI is one of the most popular modules
&gt; in CPAN.   I’m sure there are a lot of people using it in proprietary
&gt; ways that they just can’t share.    The Robustness principle would
&gt; suggest that it would be best if DBI allowed them to continue doing
&gt; what they do, without emitting warnings.
</div>
I can imagine several ways:
1&#41; DBI generates on request a prefix based on driver name
2&#41; DBI allows self-registration &#40;eg. by allowing DBI-&gt;driver_prefix being a setter, too&#41;
3&#41; you replace DBI::driver_prefix by your own method and call SUPER unless a private driver prefix is requested
4&#41; DBI::DBD::SqlEngine caches driver prefixes &#40;to avoid expensive calls when FETCH/STORE attributes&#41; - this can be overloaded in sub-classes

Well, when I continue I would get more ideas, but I think none of them fits every requirement perfectly. For Open-Source drivers I recommend requesting a prefix, for closed source I recommend 3.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; However, if you are absolutely set on the design decision that
&gt; SqlEngine is supposed to break when you use it with an unregistered
&gt; driver, then I recommend you make it die explicitly rather than allow
&gt; it to output cryptic warnings.
</div>
This is true and could be done easily during initialisation.

Cheers,
Jens
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1329061" href="/Public/Bug/Display.html?id=93204#txn-1329061">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;20&nbsp;17:00:55&nbsp;2014</span>
    <span class="description">Dan [...] DWright.Org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #93204] Uninitialized warnings in SqlEngine.pm</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 20 Feb 2014 17:00:47 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBI [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Daniel Wright &lt;dan [...] dwright.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1329061/705013/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/705013">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Feb 20, 2014, at 4:17 PM, Jens Rehsack via RT &lt;bug-DBI@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The initial recommendation was around a time where DBD::File deals with all the generic derived ones, but nowadays the most of the methods got refactored into common base class.
</div>
Good to know.   Thanks.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; The most straightforward solution for my present issue may simply be
&gt;&gt; to request to have DBD::Multi registered with DBI.    How may I do
&gt;&gt; that?
</div>&gt; 
&gt; This should be enough - how sounds dmu_? &#40;substitute d with E and u with c^2 and you have the world formula \o/&#41;
</div>
Sounds fine to me.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I can imagine several ways:
&gt; 1&#41; DBI generates on request a prefix based on driver name
</div>
This would be my suggestion.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 2&#41; DBI allows self-registration &#40;eg. by allowing DBI-&gt;driver_prefix being a setter, too&#41;
</div>
Not a bad idea, except that if you let every CPAN author pick their own arbitrary prefix, you run the risk of multiple people picking the same thing, or somebody doing something evil by intentionally over-writing an existing prefix.   

At first, I was going to recommend throwing an exception if a driver attempts to register an already-registered prefix.   But on further consideration, I can see cases where that might be useful.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 3&#41; you replace DBI::driver_prefix by your own method and call SUPER unless a private driver prefix is requested
</div>
I like this idea, also.    Right now there is code in DBI that is calling driver_prefix&#40;&#41; like this:

577             $attr_prefix = DBI-&gt;driver_prefix&#40;$drv_class&#41;;

The code would need to be updated to look like this:

  $attr_prefix = $drv_class-&gt;driver_prefix&#40;&#41;

However you’d still have two challenges:

1&#41; Making this change in a backwards-compatible way.
2&#41; You’re still vulnerable to namespace collisions.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 4&#41; DBI::DBD::SqlEngine caches driver prefixes &#40;to avoid expensive calls when FETCH/STORE attributes&#41; - this can be overloaded in sub-classes
</div>
Also an interesting solution.   

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Well, when I continue I would get more ideas, but I think none of them fits every requirement perfectly. For Open-Source drivers I recommend requesting a prefix, for closed source I recommend 3.
</div>
Fair enough.

Thank you for your help.

-Dan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1329064" href="/Public/Bug/Display.html?id=93204#txn-1329064">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;20&nbsp;17:16:42&nbsp;2014</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1329064/705016/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/705016">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Feb 20 17:00:55 2014, DWRIGHT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I like this idea, also.    Right now there is code in DBI that is
&gt; calling driver_prefix&#40;&#41; like this:
&gt; 
&gt; 577             $attr_prefix = DBI-&gt;driver_prefix&#40;$drv_class&#41;;
</div>
See Package::Stash what I mean with &#34;replacing DBI::driver_prefix&#34; ;&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The code would need to be updated to look like this:
&gt; 
&gt; $attr_prefix = $drv_class-&gt;driver_prefix&#40;&#41;
</div>
Which is option 4 - but this would have to deal with the entire inheritance tree.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; However you’d still have two challenges:
&gt; 
&gt; 1&#41; Making this change in a backwards-compatible way.
&gt; 2&#41; You’re still vulnerable to namespace collisions.
</div>
As said, you can&#39;t solve that except we force registering an official name. Wise fortune said once: &#34;You cannot have everything, you have not enough room to store it&#34; :&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; 4&#41; DBI::DBD::SqlEngine caches driver prefixes &#40;to avoid expensive
&gt; &gt; calls when FETCH/STORE attributes&#41; - this can be overloaded in sub-
&gt; &gt; classes
</div>&gt; 
&gt; Also an interesting solution.
</div>
It doesn&#39;t lack of phantasy to find a solution. You&#39;ve seen that no solution rules them all. 

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Well, when I continue I would get more ideas, but I think none of
&gt; &gt; them fits every requirement perfectly. For Open-Source drivers I
&gt; &gt; recommend requesting a prefix, for closed source I recommend 3.
</div>&gt; 
&gt; Fair enough.
</div>
I think we should improve documentation about those two options driver authors have.

Cheers,
Jens
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1331057" href="/Public/Bug/Display.html?id=93204#txn-1331057">#</a>      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;25&nbsp;17:47:30&nbsp;2014</span>
    <span class="description">TIMB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1331057/706077/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/706077">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 731b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Daniel.

I&#39;ll register DBD::Multi with &#39;multi_&#39; as the prefix in the next DBI release, if that&#39;s ok with you.

Jens, I agree with Daniel that using a non-registered driver should trigger at least a clear warning.

I don&#39;t want to add self-registration to the DBI, but SqlEngine &#40;or whatever&#41; could support an override mechanism for such cases if it&#39;s important enough. &#40;It doesn&#39;t seem to be important to me. I&#39;ve never refused driver registration. It&#39;s a formality just to ensure a unique prefix.&#41;

For the &#39;closed source&#39; the x_ prefix may be useful as it&#39;s reserved for &#39;private use&#39;. However that probably doesn&#39;t fit this use case.

Anyway, in summary, it seems that getting DBD::Multi registered will resolve this case.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1331194" href="/Public/Bug/Display.html?id=93204#txn-1331194">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;26&nbsp;03:55:38&nbsp;2014</span>
    <span class="description">ribasushi [...] leporine.io -  Cc RIBASUSHI added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.568352</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
