<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #60944 for GDGraph: true type fonts in windows</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #60944 for GDGraph: true type fonts in windows</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/GDGraph/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/GDGraph/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/GDGraph/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/GDGraph/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/GDGraph">GDGraph CPAN distribution</a>.</p>


<h3>Maintainer&#40;s&#41;&#39; notes</h3>

<p>There are plenty of good ideas of what people can do published here on the queue. Turning a patch from the tracker into a pull request is not one of them. In order to get maintainers' attention way more quickier, PR should have at least a sample included. We know it's hard to test images generating software, but it doesn't mean we can not test numbers produced by intermediate algorithms used to generate these images, so either a test or a sample.</p>



<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">60944</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/GDGraph/Active/">GDGraph</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
Alfredo.Ospina [...] jacobs.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-14346-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-14347-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;01&nbsp;11:00:28&nbsp;2010</span>
    <span class="description">Alfredo.Ospina [...] jacobs.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> true type fonts in windows</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 1 Sep 2010 08:00:13 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-GDGraph [...] rt.cpan.org&#34; &lt;bug-GDGraph [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Ospina, Alfredo&#34; &lt;Alfredo.Ospina [...] jacobs.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">GDGraph v1.44
Perl v5.10.1
Windows XP &#38; Windows Server 2008

I can&#39;t seem to get true type fonts to work in Windows &#40;ActiveState distribution&#41;.  Everytime I try to use a true type font, it displays the default font instead.  I&#39;ve tried setting the font path using GD::Text-&gt;font_path&#40;&#39;C:/windows/fonts&#39;&#41; to no avail.  Starting to think this is a bug.  Not getting any errors, just not displaying font properly.

Alfredo Ospina
Jacobs Engineering Group
248.633.1489
248.633.1414 fax
alfredo.ospina@jacobs.com


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">________________________________
NOTICE - This communication may contain confidential and privileged information that is for the sole use of the intended recipient. Any viewing, copying or distribution of, or reliance on this message by unintended recipients is strictly prohibited. If you have received this message in error, please notify us immediately by replying to the message and deleting it from your computer.
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;01&nbsp;18:25:58&nbsp;2010</span>
    <span class="description">mverb [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Sep 01 11:00:28 2010, Alfredo.Ospina@jacobs.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; GDGraph v1.44
&gt; Perl v5.10.1
&gt; Windows XP &#38; Windows Server 2008
&gt; 
&gt; I can&#39;t seem to get true type fonts to work in Windows &#40;ActiveState
&gt;    distribution&#41;.  Everytime I try to use a true type font, it
&gt;    displays the default font instead.  I&#39;ve tried setting the font
&gt;    path using GD::Text-&gt;font_path&#40;&#39;C:/windows/fonts&#39;&#41; to no avail.
&gt;    Starting to think this is a bug.  Not getting any errors, just not
&gt;    displaying font properly.
&gt; 
&gt; Alfredo Ospina
&gt; Jacobs Engineering Group
&gt; 248.633.1489
&gt; 248.633.1414 fax
&gt; alfredo.ospina@jacobs.com
</div>
Hi Alfredo,

If Truetype fonts aren&#39;t working, that can have several causes, the 
least likely one being a bug in GD::Graph.

Could you try to use a TrueType font directly from GD itself?

Something like

$gd_object-&gt;stringFT&#40;$black, &#39;c:\full\path\to\font\file.ttf&#39;, 12, 0, 10, 
10, &#34;Test&#34;&#41;;

should work.

An other alternative is to try to test suite that comes with GD, or the 
GD::Text disctribution, or the test suite that comes with the GD::Graph 
source distribution. The GD::Graph source distribution uses a test which 
only uses a truetype font that is packaged with the test. The GD::Text 
source distribution also has a test only using packaged truetype fonts. 
If that works, then Truetype is working, but something is wrong with the 
font path or font path search.

GD::Graph uses GD::Text internally, which I think you already know, so 
any problems with truetype fonts that are my problems would be in that 
package. Yours is the first report I&#39;ve had about fonts not working on 
windows &#40;as far as I know&#41;, so I suspect that there is something not 
entirely right with your installation, or your GD.

It is possible that you have a GD that is compiled without TrueType 
support.

Also: You need to use the name of the font file, not the name of the 
font. Neither GD, nor GD::Text do any parsing of the font files to build 
a font database, so neither has any knowledge of font metadata, 
including the name.

Regards,
Martien
-- 
Stop destroying the world. It&#39;s where I keep all my stuff.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;01&nbsp;18:26:02&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;02&nbsp;09:41:37&nbsp;2010</span>
    <span class="description">Alfredo.Ospina [...] jacobs.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #60944] true type fonts in windows </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 2 Sep 2010 06:41:23 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-GDGraph [...] rt.cpan.org&#34; &lt;bug-GDGraph [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Ospina, Alfredo&#34; &lt;Alfredo.Ospina [...] jacobs.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Martien,

I really appreciate your prompt response.  I will try some of the items that you have listed to attempt to get it to work.  I can tell you that GD-Graph came installed with the Perl 5.10.1 distribution from Active State.  I have also tried every combination of font paths I can think of, and have specified the font with the font filename. I will let you know what the results are of further test.

Again, thank you for responding.

Alfredo Ospina
Jacobs Engineering Group
248.633.1489
248.633.1414 fax
alfredo.ospina@jacobs.com



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Martien Verbruggen via RT [mailto:bug-GDGraph@rt.cpan.org]
Sent: Wednesday, September 01, 2010 6:26 PM
To: Ospina, Alfredo
Subject: [rt.cpan.org #60944] true type fonts in windows

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=60944">https://rt.cpan.org/Ticket/Display.html?id=60944</a></span> &gt;

On Wed Sep 01 11:00:28 2010, Alfredo.Ospina@jacobs.com wrote:
<div class="message-stanza open">&gt; GDGraph v1.44
&gt; Perl v5.10.1
&gt; Windows XP &#38; Windows Server 2008
&gt;
&gt; I can&#39;t seem to get true type fonts to work in Windows &#40;ActiveState
&gt;    distribution&#41;.  Everytime I try to use a true type font, it
&gt;    displays the default font instead.  I&#39;ve tried setting the font
&gt;    path using GD::Text-&gt;font_path&#40;&#39;C:/windows/fonts&#39;&#41; to no avail.
&gt;    Starting to think this is a bug.  Not getting any errors, just not
&gt;    displaying font properly.
&gt;
&gt; Alfredo Ospina
&gt; Jacobs Engineering Group
&gt; 248.633.1489
&gt; 248.633.1414 fax
&gt; alfredo.ospina@jacobs.com
</div>
Hi Alfredo,

If Truetype fonts aren&#39;t working, that can have several causes, the least likely one being a bug in GD::Graph.

Could you try to use a TrueType font directly from GD itself?

Something like

$gd_object-&gt;stringFT&#40;$black, &#39;c:\full\path\to\font\file.ttf&#39;, 12, 0, 10, 10, &#34;Test&#34;&#41;;

should work.

An other alternative is to try to test suite that comes with GD, or the GD::Text disctribution, or the test suite that comes with the GD::Graph source distribution. The GD::Graph source distribution uses a test which only uses a truetype font that is packaged with the test. The GD::Text source distribution also has a test only using packaged truetype fonts.
If that works, then Truetype is working, but something is wrong with the font path or font path search.

GD::Graph uses GD::Text internally, which I think you already know, so any problems with truetype fonts that are my problems would be in that package. Yours is the first report I&#39;ve had about fonts not working on windows &#40;as far as I know&#41;, so I suspect that there is something not entirely right with your installation, or your GD.

It is possible that you have a GD that is compiled without TrueType support.

Also: You need to use the name of the font file, not the name of the font. Neither GD, nor GD::Text do any parsing of the font files to build a font database, so neither has any knowledge of font metadata, including the name.

Regards,
Martien
--
Stop destroying the world. It&#39;s where I keep all my stuff.

NOTICE - This communication may contain confidential and privileged information that is for the sole use of the intended recipient. Any viewing, copying or distribution of, or reliance on this message by unintended recipients is strictly prohibited. If you have received this message in error, please notify us immediately by replying to the message and deleting it from your computer.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;11&nbsp;07:18:46&nbsp;2010</span>
    <span class="description">patermanns [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> patermanns [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Sep 02 09:41:37 2010, Alfredo.Ospina@jacobs.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I really appreciate your prompt response.  I will try some of the
&gt;    items that you have listed to attempt to get it to work.  I can
&gt;    tell you that GD-Graph came installed with the Perl 5.10.1
&gt;    distribution from Active State.  I have also tried every
&gt;    combination of font paths I can think of, and have specified the
&gt;    font with the font filename. I will let you know what the results
&gt;    are of further test.
</div>
I wonder if you have had any success with this. I am using an earlier
version of ActiveState Perl &#40;5.8.9&#41; and the following works on Windows
&#40;and Red Hat Linux&#41;:

# ==================================
# Font directory
my $font_path = &#40;$^O =~ m/^MSWin/&#41;? &#39;C:\\WINDOWS\\Fonts\\&#39;:
&#39;/usr/share/fonts/liberation/&#39;;
my $font_name = &#40;$^O =~ m/^MSWin/&#41;? &#39;ARIAL&#39;: &#39;LiberationSans-Regular&#39;;

....

$graph-&gt;set_title_font&#40;&#34;$font_path$font_name.ttf&#34;, 12&#41;;
# ==================================

Note the backslashes in the path and that the font size needs to be
specified for a Truetype font.

Hope this helps!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;21&nbsp;16:51:51&nbsp;2013</span>
    <span class="description">RUZ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> New GD::Graph co-maintainer and new release on CPAN</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

You recieved this message as you filed a bug report or feature request against GD::Graph module on CPAN.

My name is Ruslan and I&#39;m new co-maintainer of the module. I&#39;ve updated the module to 1.45 with doc changes and released it to CPAN. See distribution status [1].

I have TODO list for several releases, so if your ticket was a patch then turning it into a nice pull request may expedite inclusion :&#41;

[1] <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~ruz/GDGraph-1.45/Graph.pm#DISTRIBUTION_STATUS">http://search.cpan.org/~ruz/GDGraph-1.45/Graph.pm#DISTRIBUTION_STATUS</a></span>

-- 
Best regards, Ruslan.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
