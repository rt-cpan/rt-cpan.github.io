<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #61432 for Net-FTPSSL: Override PASV IP address, and override HELP lookup</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #61432 for Net-FTPSSL: Override PASV IP address, and override HELP lookup</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-FTPSSL/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-FTPSSL/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-FTPSSL/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-FTPSSL/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-FTPSSL">Net-FTPSSL CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">61432</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-FTPSSL/Active/">Net-FTPSSL</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
arthurdent99 [...] hotmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-22628-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.15    </td>
  </tr>
  <tr id="CF-22629-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<ul>
<li>
0.16</li>
<li>
0.17</li>
</ul>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;17&nbsp;12:26:57&nbsp;2010</span>
    <span class="description">arthurdent99 [...] hotmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Override PASV IP address, and override HELP lookup</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am submitting a patch to Net::FTPSSL to correct two issues by adding
three new options: Commands, SiteCommands, and OverridePASV.

A particular vendor that I have to deal with runs an FTPS server that
identifies itself as &#34;Connect:Enterprise UNIX&#34;.  Connect:Enterprise is a
product of Sterling Commerce &#40;www.sterlingcommerce.com&#41;.  IBM just
acquired Sterling Commerce from AT&#38;T on August 27th.

There appears to be an issue with Connect:Enterprise when the HELP
command is issued.  The first &#34;214&#34; line of HELP is sent encrypted, but
the following list of recognized commands is sent in cleartext for some
reason, which breaks the command channel.  I do not understand why the
list of commands is being sent in cleartext; this behavior does not
occur with vsftpd.  Net::FTPSSL displays the first &#34;214&#34; line, then
displays &#34;555 Unexpected EOF on command channel socket!&#34;.  A Wireshark
capture confirms that the entire conversation is encrypted except for
the list of commands &#40;which is quite readable&#41;.

To get around the issue, I have added two new options to the new&#40;&#41;
constructor: Commands, and SiteCommands.  Both the Commands and
SiteCommands options expect a reference to an array.  By passing a list
of recognized commands to new&#40;&#41;, the HELP cache in the code is
pre-populated, so the HELP command never actually runs.  With this
option, I am finally able to upload a file to a Connect:Enterprise FTPS
server.  This could also come in handy for those sites where HELP
reports that a certain command is usable, but trying to use that command
breaks the connection; if you can override the list of acceptable
commands from the start, you can prevent the command from being used.

I have been dealing with two separate vendors running
Connect:Enterprise.  Both FTPS sites have the same HELP command issue. 
I am sure that others who have to deal with this software would
appreciate these new options.

Another option I have added to the new&#40;&#41; constructor is the OverridePASV
option, which is either true or false.  This comes in handy when the
FTPS server has not been properly configured to report back the correct
IP address to the PASV command.

The other vendor using Connect:Enterprise is reporting the internal,
non-routable IP address of their FTPS server &#40;10.x.x.x&#41; in the PASV
command output, instead of their external IP address.  This seems to be
an issue with vendors who do not know how to properly set up their FTPS
server.  I called them and explained that there is an option in their
server software to change the IP address reported by the PASV command,
but they claim that option does not exist in Connect:Enterprise.  I do
not believe that, but in any case they&#39;re not going to fix their server.
 The data channel can&#39;t route to the invalid IP address, so the
connection times out.

The OverridePASV option will cause Net::FTPSSL to ignore the IP
address portion of the PASV command output, and it will continue to use
the original address of the connection.  This may not work in situations
where round-robin DNS is being used by the vendor to load-balance FTPS
connections, but vendors who are doing load balancing are usually smart
enough to configure their FTPS servers properly in the first place.

FileZilla will automatically override the IP address returned by the
PASV command if it determines that the IP address is unroutable.  That
could be another method to use instead of having an OverridePASV option,
but I went with a very simple patch as proof-of-concept.  It shouldn&#39;t
be too hard to add automatic detection of unroutable IP addresses if you
wanted to do that instead.

FileZilla does not try to run the HELP command &#40;it tries to run FEAT
instead, which fails&#41;, so perhaps that&#39;s why FileZilla has been working
as well.

I also can&#39;t make a TLS connection to these two FTPS sites using
Net::FTPSSL, although FileZilla can make TLS connections to these sites.
 That&#39;s a separate issue, though, so I&#39;ll file that under a separate
ticket.  I have been able to get around this so far by forcing an SSL
connection instead.

FYI, I am running Red Hat Enterprise Linux 5.5, with Perl 5.8.8, and
Net::FTPSSL 0.15.


Thanks,

Chris Thompson
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> debugfile.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Net-FTPSSL Version: 0.15

Server &#40;port&#41;: ftps.amajorbank.com &#40;20021&#41;

SKT &lt;&lt;&lt; 220 Welcome to A Major Bank Data Distribution Services. Time = 10:32:37
SKT &gt;&gt;&gt; AUTH SSL
SKT &lt;&lt;&lt; 234 AUTH TLS-P/SSL OK.
&gt;&gt;&gt; USER myusername
&lt;&lt;&lt; 331 Password required for myusername.
&gt;&gt;&gt; PASS *******
&lt;&lt;&lt; 230 Connect:Enterprise UNIX login ok, access restrictions apply.
&gt;&gt;&gt; TYPE A
&lt;&lt;&lt; 200 Type set to A.
&gt;&gt;&gt; PBSZ 0
&lt;&lt;&lt; 200 PBSZ 0 OK.
&gt;&gt;&gt; PROT P
&lt;&lt;&lt; 200 PROT P OK, data channel will be secured.
&gt;&gt;&gt; PASV
&lt;&lt;&lt; 227 Entering Passive Mode &#40;11,22,33,44,82,8&#41;
&gt;&gt;&gt; HELP
&lt;&lt;&lt; 214- The following commands are recognized &#40;* =&gt;&#39;s unimplemented&#41;.
&lt;&lt;+ 555 Unexpected EOF on command channel socket!
&lt;&lt;+ 502 Unknown command ALLO.
&gt;&gt;&gt; STOR myfile.txt
&lt;&lt;+ 555 Can&#39;t read command channel socket: 
&gt;&gt;&gt; QUIT
&lt;&lt;+ 555 Can&#39;t write command on socket: Broken pipe
&lt;&lt;+ 555 Unexpected EOF on command channel socket!
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> FTPSSL.015.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- FTPSSL.pm	2010-04-27 11:02:25.000000000 -0500
+++ FTPSSL.pm.new	2010-09-16 15:39:19.000000000 -0500
@@ -69,6 +69,8 @@
   my $arg          = &#40;ref &#40;$_[0]&#41; eq &#34;HASH&#34;&#41; ? $_[0] : {@_};
 
   my %ssl_args;    # Only referenced via $advanced.
+  my @supported_cmds;       # Only referenced via $commands.
+  my @supported_site_cmds;  # Only referenced via $site_commands.
 
   my $encrypt_mode = $arg-&gt;{Encryption} || EXP_CRYPT;
   my $port         = $arg-&gt;{Port} || &#40;&#40;$encrypt_mode eq IMP_CRYPT&#41; ? 990 : 21&#41;;
@@ -88,6 +90,12 @@
   my $advanced     = &#40;ref &#40;$arg-&gt;{SSL_Advanced}&#41; eq &#34;HASH&#34;&#41;
                                    ? $arg-&gt;{SSL_Advanced} : \%ssl_args;
 
+  my $commands     = &#40;ref &#40;$arg-&gt;{Commands}&#41; eq &#34;ARRAY&#34;&#41;
+                                   ? $arg-&gt;{Commands} : \@supported_cmds;
+  my $site_commands = &#40;ref &#40;$arg-&gt;{SiteCommands}&#41; eq &#34;ARRAY&#34;&#41;
+                                   ? $arg-&gt;{SiteCommands} : \@supported_site_cmds;
+  my $override_pasv = $arg-&gt;{OverridePASV} || 0;
+
   # Determine where to write the Debug info to ...
   if &#40; $use_logfile &#41; {
      my $open_mode = &#40; $debug == 2 &#41; ? &#34;&gt;&gt;&#34; : &#34;&gt;&#34;;
@@ -207,6 +215,11 @@
   ${*$obj}{data_prot} = $data_prot;
   ${*$obj}{Croak}     = $die;
   ${*$obj}{FixPutTs}  = ${*$obj}{FixGetTs} = $pres_ts;
+  ${*$obj}{Commands}  = $commands;
+  ${*$obj}{SiteCommands}  = $site_commands;
+  ${*$obj}{Host}      = $host;
+  ${*$obj}{OverridePASV} = $override_pasv;
+
 
   ${*$obj}{ftpssl_filehandle} = $FTPS_ERROR  if &#40; $debug == 2 &#41;;
   $FTPS_ERROR = undef;
@@ -273,7 +286,14 @@
 
   my @address = split&#40; /,/, $3 &#41;;
 
-  my $host = join&#40; &#39;.&#39;, @address[ 0 .. 3 ] &#41;;
+  my $host;
+  if &#40;${*$self}{OverridePASV}&#41; {
+    $host = ${*$self}{Host};
+    _print_LOG &#40; $self, &#34;--- Overriding PASV mode IP address with: $host\n&#34; &#41;;
+  }
+  else {
+    $host = join&#40; &#39;.&#39;, @address[ 0 .. 3 ] &#41;;
+  }
   my $port = $address[4] * 256 + $address[5];
 
   my $socket;
@@ -1365,6 +1385,46 @@
       return &#40; &#40;defined $hlp&#41; ? $hlp : \%help &#41;;
    }
 
+   my @commands = @{${*$self}{Commands}};
+   my @site_commands = @{${*$self}{SiteCommands}};
+   my $helpmsg;
+
+   if &#40;$all_cmds &#38;&#38; @commands &gt; 0&#41; {
+        _print_LOG &#40; $self, &#34;--- Overriding HELP command with the following commands: \n&#34; &#41;;
+        $helpmsg = &#34;214-The following commands are recognized.\n&#34;;
+        foreach &#40;@commands&#41; {
+           $help{$_} = 1   if &#40;$_ !~ m/[*]$/&#41;;
+           $helpmsg .= &#34; $_\n&#34;;
+           _print_LOG &#40; $self, &#34;--- Command: &#34; . $_ . &#34;\n&#34; &#41;;
+        }
+        $helpmsg .= &#34;214 Help OK.\n&#34;;
+   }
+   elsif &#40;$site_cmd &#38;&#38; @site_commands &gt; 0&#41; {
+        _print_LOG &#40; $self, &#34;--- Overriding SITE HELP command with the following commands: \n&#34; &#41;;
+        $helpmsg = &#34;214-The following commands are recognized.\n&#34;;
+        foreach &#40;@site_commands&#41; {
+           $help{$_} = 1   if &#40;$_ !~ m/[*]$/&#41;;
+           $helpmsg .= &#34; $_\n&#34;;
+           _print_LOG &#40; $self, &#34;--- Site Command: &#34; . $_ . &#34;\n&#34; &#41;;
+        }
+        $helpmsg .= &#34;214 Help OK.\n&#34;;
+   }
+
+   # If we don&#39;t find anything, it&#39;s a problem.  So don&#39;t cache if so ...
+   if &#40;scalar &#40;keys %help&#41; &gt; 0&#41; {
+      if &#40;$all_cmds&#41; {
+         # Add the assumed OPTS command required if FEAT is supported!
+         # Even though not all servers support OPTS as is required with FEAT.
+         $help{OPTS} = 1  if &#40;$help{FEAT}&#41;;     # RFC 2389
+
+         ${*$self}{help_cmds_found} = \%help;
+         ${*$self}{help_cmds_msg} = $helpmsg;
+      } else {
+         ${*$self}{&#34;help_${cmd}_found&#34;} = \%help;
+         ${*$self}{&#34;help_${cmd}_msg&#34;} = $helpmsg;
+      }
+   }
+   else {
    $self-&gt;command &#40;&#34;HELP&#34;, @_&#41;;
 
    # Now lets see if we need to parse the result to get a hash of the
@@ -1411,6 +1471,7 @@
    } else {
       ${*$self}{&#34;help_${cmd}_msg&#34;} = $self-&gt;last_message &#40;&#41;;
    }
+   }
 
    return &#40;\%help&#41;;
 }
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;17&nbsp;15:31:08&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Chris,

Thanks for reporting this problem and providing a patch.  Your
description of the issues were well thought out.  I&#39;ll have to think on
what you&#39;ve sent me for a while.  I don&#39;t want to break anything else to
play nice with Connect:Enterprise when it doesn&#39;t want to play nice itself.

Just a few questions in the mean time about your 3 issues.

What version of IO::SOCKET::SSL, IO::Socket::INET, and
Net::SSLeay::Handle are you using.  These 3 modules are heavily used by
my module.

On the PASV command issue:
I think your proposed solution is probably the only one that makes sense
unless I can figure out how FireZilla determined the IP Address the
server returned was bad.  I can&#39;t use ping sine quite a few servers
disable responding to ping.  Does it look like FireZilla times out
before it retries with the same host instead of the returned value? 
Just checking if the IP Address of the host changes doesn&#39;t do any good
since a server is allowed to redirect the data channel to another server
to handle the request.  I need to think a bit more before I determine if
the new option should be just a flag or require you to specify what host
to use for the data chanel.

On the TLS vs SSL issue:
As long as SSL is working I&#39;ll wait on your other ticket with more
details.  There is no rule that states a server has to support both
protocols.  I wouldn&#39;t be surprised if FireZilla automatically tries SSL
if TLS doesn&#39;t work.  SSL is the older of the 2 protocols after all.  So
I&#39;m going to consider this a non-issue as far as this ticket is concerned.


Finally On the help command:  [ $ftps-&gt;_help&#40;&#41;; ]
If I understood you right, the leading 214- was encrypted, the list of
commands was in clear text, and the trailing 214 was encrypted again. 
And once the clear text was encountered, it broke the FTPS connection
for my code and nothing else worked again.

On the help site command: [ $ftps-&gt;_help &#40;&#34;SITE&#34;&#41;; ]
I really don&#39;t think an override option was needed since my code base
really doesn&#39;t use it.  I just provided it since some systems returned a
list of site commands while others just returned a syntax statement.  So
that someone could do $ftps-&gt;supported &#40;&#34;SITE&#34;, &#34;UMASK&#34;&#41;.  But I am
curious, if you called _help&#40;&#34;SITE&#34;&#41; in your code did it encounter the
same issues as if you just called _help&#40;&#41;?

What happens if you ran it against another legal command like
$ftps-&gt;_help&#40;&#34;noop&#34;&#41;?  Or an invalid command like $ftps-&gt;_help&#40;&#34;xxxx&#34;&#41;;
 I&#39;m just trying to get a feel for how this server handles help in
general to prevent other code from breaking.

So it might be better if based on what you tell me about my questions
above to just allow the user to override the supported&#40;&#41; function with
their own code like I do for the callback functions against the data
channel.  Requiring it to be reset before you log in or as an option to
new. &#40;login calls supported if you want to preserve timestamps&#41;.  Or
write a sysread&#40;&#41; wrapper for response&#40;&#41; to re-establish the connection,
but that sounds really messy and I&#39;m not sure at this point if it can be
done at all without looking at the code much closer.  Or look at other
creative solutions like your vsftpd program did.

Finally, did you run into any other commands besides &#34;HELP&#34; that sent
things over the command channel in clear text?  Violations of the FTPS
spec for the command channel can get really messy to handle.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;17&nbsp;15:31:10&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;17&nbsp;20:33:13&nbsp;2010</span>
    <span class="description">arthurdent99 [...] hotmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> arthurdent99 [...] hotmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for your reply.

I am using IO::Socket::SSL v1.33, IO::Socket::INET v1.31,
Net::SSLeay::Handle v0.61.  They&#39;re all the latest versions on CPAN at
the moment.

I believe that FileZilla determines if the IP address is invalid by
simply comparing it to the reserved IP addresses listed in RFC 1918. 
Here is a quote from RFC 1918:

---
The Internet Assigned Numbers Authority &#40;IANA&#41; has reserved the
following three blocks of the IP address space for private internets:

     10.0.0.0        -   10.255.255.255  &#40;10/8 prefix&#41;
     172.16.0.0      -   172.31.255.255  &#40;172.16/12 prefix&#41;
     192.168.0.0     -   192.168.255.255 &#40;192.168/16 prefix&#41;
---

If the IP address returned by PASV falls into any of these three private
address spaces, then FileZilla uses the original host instead of the IP
address returned by the PASV command.  I think that&#39;s as far as
FileZilla goes to determine if the IP address is invalid.  Pinging
shouldn&#39;t be necessary.  Any address that is not in one of those private
address spaces should be treated normally.

Your description of the HELP issue is correct: the leading 214- was
encrypted, the list of commands was in clear text, and the trailing 214
was encrypted again.  And once the clear text was encountered, it broke
the FTPS connection for your code and nothing else worked again.  That&#39;s
why I pre-loaded the cache that _help creates, so that the actual HELP
command will never run.

All I am doing in my script is logging in, issuing a put command, and
logging out.  Put calls _common_put, _common_put calls alloc, alloc
calls supported, supported calls _help, and then _help crashes if the
HELP command is actually run.  I am not directly calling the supported
subroutine, it&#39;s being called indirectly through put.

I threw in the SiteCommands option to pre-load the cache that _help
creates for the SITE commands.  I haven&#39;t actually used any of the SITE
commands.  I just now ran the $ftps-&gt;supported &#40;&#34;SITE&#34;, &#34;UMASK&#34;&#41; that
you mentioned, and it calls _help to do a &#34;HELP SITE&#34; command.  The
&#34;HELP SITE&#34; command is causing the connection to crash just as the
regular HELP command does; the supported SITE commands are returned in
cleartext just as the regular HELP commands are.

Apparently HELP followed by anything breaks the connection.

I haven&#39;t really tried sending any other commands other than what&#39;s
necessary to log in and send a file, so I don&#39;t know if there are any
other commands that break as spectacularly as HELP.

As far as the TLS connection goes, FileZilla starts with an AUTH TLS
command, and it succeeds by getting a &#34;234 AUTH TLS-C/TLS OK.&#34; message.
 It never switches to SSL.  When I try to connect with TLS using
Net::FTPSSL, I get the following message:

TLSv1: SSL connect attempt failed with unknown errorerror:1408F10B:SSL
routines:SSL3_GET_RECORD:wrong version number.

But that&#39;s really a separate item to worry about.  I&#39;m able to connect
via SSL, so I&#39;m not terribly worried about it now &#40;even though TLS is
supposed to be more secure&#41;.  I can make a separate ticket for that in
the future.

I hope I have explained things well.  Thanks for your help.  Let me know
if there&#39;s anything else you&#39;d like me to do.


Thanks,

Chris Thompson
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;20&nbsp;18:04:34&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Chris,

Thanks for your reply.

Just so you know, I plan on calling the new options OverrideHELP &#38;
OverridePASV.  Since my docs clearly say that checking if a particular
site command is supported depends on the server, I won&#39;t be implementing
an OverrideHelpSite command at this time.  It will just always return
false.  But maybe I&#39;ll change my mind once I start coding.

Just so you know, the only 4 commands checked internally are ALLO, NOOP,
MFMT and MDTM.  So those are the only commands needed in your override
array if they are all supported.  I&#39;m assuming you don&#39;t call
supported&#40;&#41; yourself in your code.

I&#39;m planning to make OverrideHELP accept an array, or a scalar 1 or 0. 
For always TRUE or always FALSE if you don&#39;t want to list all the commands.

OverridePASV will take as it&#39;s argument the host name.  Just in case it
has to be redirected to something else.  More than likely if you don&#39;t
provide a name, I&#39;ll make sure it defaults to the host name passed.

I&#39;m planning on working on the code next weekend as I make tweaks to
your patch.  I just wish I had access to a server that behaved this way
so that I could try out some alternatives to see if I could resolve this
dynamically without the need of new option flags.

Curtis
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;22&nbsp;10:07:10&nbsp;2010</span>
    <span class="description">arthurdent99 [...] hotmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> arthurdent99 [...] hotmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

Thanks for working on this.  I&#39;d be happy to test any patches that you
come up with.  I&#39;ll be gone next week on vacation, but I should be
available to test things after that.

The FTPS sites running Connect:Enterprise that I am dealing with are
financial institutions.  I can&#39;t get you direct access to them,
unfortunately.  I know it&#39;s frustrating trying to fix a problem that you
don&#39;t have access to.

Thanks for pointing out the changes that you will be making.  You&#39;ve
obviously put some thought into the best way to make it work.

Let me know if I can help in any way.


Thanks,

Chris Thompson
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;27&nbsp;15:14:44&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Chris,

I completed my initial implementation of the patch over the weekend with
the override options.  Would you care to try it out?

If this works for you, we can see about figuring out a more dynamic
solution.  It may take a bit of trial &#38; error if you are willing to
collaborate with me on the fix.  But I&#39;m not all that confident that
there is a real fix since I don&#39;t remember seeing this behavior
described in the FTPS specs.

My initial idea is to see if I can keep a copy of the original clear
channel socket open and see if when the encrypted channel errors out if
the original socket connection will pick up after the error.  If so
drain the socket and go back to the original encrypted channel again. 
But I doubt if it&#39;s that simple.  It never really is.

Anything that you can send me on what your FTPS server is doing would be
extremely helpful since you can&#39;t give me access directly.  Or if you
can find any technical documentation on your server that describes what
it is doing on the HELP command.

If need be, we can communicate outside this public chain for the nitty
gritty details.

I look forward to hearing how this patch works for you.

Curtis

On Wed Sep 22 10:07:10 2010, christhompson wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,
&gt; 
&gt; Thanks for working on this.  I&#39;d be happy to test any patches that you
&gt; come up with.  I&#39;ll be gone next week on vacation, but I should be
&gt; available to test things after that.
&gt; 
&gt; The FTPS sites running Connect:Enterprise that I am dealing with are
&gt; financial institutions.  I can&#39;t get you direct access to them,
&gt; unfortunately.  I know it&#39;s frustrating trying to fix a problem that you
&gt; don&#39;t have access to.
&gt; 
&gt; Thanks for pointing out the changes that you will be making.  You&#39;ve
&gt; obviously put some thought into the best way to make it work.
&gt; 
&gt; Let me know if I can help in any way.
&gt; 
&gt; 
&gt; Thanks,
&gt; 
&gt; Chris Thompson
</div></div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> FTPSSL.pm</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;12&nbsp;18:02:37&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Chris,

I provided you a beta of my fixes to NET-FTPSSL a couple of weeks ago. 
How goes your testing?  I&#39;m going on vacation next week so I&#39;m hoping to
get some feedback soon.

Curtis
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;01&nbsp;20:39:06&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Chris,

Any luck in evaluating the beta I sent you a while ago?  I just want 
to hear if it&#39;s working out for you so I can include it in the next 
release.

Curtis

On Tue Oct 12 18:02:37 2010, CLEACH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Chris,
&gt; 
&gt; I provided you a beta of my fixes to NET-FTPSSL a couple of weeks 
</div>ago. 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; How goes your testing?  I&#39;m going on vacation next week so I&#39;m 
</div>hoping to
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; get some feedback soon.
&gt; 
&gt; Curtis
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;04&nbsp;13:25:54&nbsp;2010</span>
    <span class="description">arthurdent99 [...] hotmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> arthurdent99 [...] hotmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

Sorry to take so long in replying to you.  Things have been a bit crazy
around here since I returned from vacation.  I had to finish a major
project for several customers &#40;which is partly why I needed the vacation!&#41;.

Yes, your changes appear to be working just fine.  I am able to override
the PASV mode IP address with OverridePASV, and I am able to pass
OverrideHELP an array reference &#40;which is good, because
Connect:Enterprise doesn&#39;t support the MFMT command&#41;, and I am also able
to pass OverrideHELP a &#34;1&#34; to say that all the commands are supported. 
It looks good to me!

I&#39;m still forced to use SSL instead of TLS when connecting to the
Connect:Enterprise servers, but that&#39;s a separate issue as I mentioned
before.  It&#39;s working well otherwise, so I&#39;m happy.

Thanks so much for your help!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;04&nbsp;14:00:46&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the confirmation,

It&#39;s going to be a bit longer until the official release comes out.  I 
have another feature I&#39;m considering before I make this beta official.

I&#39;ve been asked about adding EPSV and I&#39;m seeing how dificult it would 
be to add it to the same release as this one.  From the specs I&#39;ve 
read so far, it may have been a better solution than OverridePASV.  I 
wouldn&#39;t be surprised if those other FTP programs you talked about 
swapped over to EPSV if they had issues with PASV instead of what we 
came up with.

But I plan on supporting both solutions sooner or later.  It&#39;s just a 
question if EPSV will make this release or not.

Curtis

On Thu Nov 04 13:25:54 2010, christhompson wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,
&gt; 
&gt; Sorry to take so long in replying to you.  Things have been a bit 
</div>crazy
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; around here since I returned from vacation.  I had to finish a major
&gt; project for several customers &#40;which is partly why I needed the 
</div>vacation!&#41;.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Yes, your changes appear to be working just fine.  I am able to 
</div>override
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; the PASV mode IP address with OverridePASV, and I am able to pass
&gt; OverrideHELP an array reference &#40;which is good, because
&gt; Connect:Enterprise doesn&#39;t support the MFMT command&#41;, and I am also 
</div>able
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; to pass OverrideHELP a &#34;1&#34; to say that all the commands are 
</div>supported. 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It looks good to me!
&gt; 
&gt; I&#39;m still forced to use SSL instead of TLS when connecting to the
&gt; Connect:Enterprise servers, but that&#39;s a separate issue as I 
</div>mentioned
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; before.  It&#39;s working well otherwise, so I&#39;m happy.
&gt; 
&gt; Thanks so much for your help!
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;04&nbsp;15:24:30&nbsp;2010</span>
    <span class="description">arthurdent99 [...] hotmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> arthurdent99 [...] hotmail.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

I&#39;ve attached the log from FileZilla as it connects to one of the
Connect:Enterprise servers and uploads a file, to answer your query
about whether EPSV was used when PASV returns an invalid address.  It
appears that FileZilla simply detects the invalid IP address returned by
PASV and uses the original address instead.  It always uses PASV, and
doesn&#39;t use EPSV.

Also, as you see in the logs, TLS works fine with FileZilla, but doesn&#39;t
work with Net::FTPSSL.  I have to force SSL mode with Net::FTPSSL to get
it to work.  I wouldn&#39;t be at all surprised if Connect:Enterprise is
doing something non-standard SSL-wise, but perhaps FileZilla is working
around the issue somehow, just as they auto-detect the invalid IP
address issue.  That&#39;s just a guess, however.  FileZilla is open source
and is written in C++.  You can download the source code and the
executable from <span class="clickylink"><a target="new" rel="nofollow" href="http://filezilla-project.org/download.php">http://filezilla-project.org/download.php</a></span> , if that will
help you any.

In any case, your code is working great now.  I just replied to answer
your question about EPSV.  I hope this information is helpful to you.

Thanks,

Chris Thompson
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> FileZilla.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Status:	Resolving address of ftps.testsite.com
Status:	Connecting to 1.2.3.4:10021...
Status:	Connection established, waiting for welcome message...
Response:	220 &lt;&lt;&lt;Connect:Enterprise UNIX 2.4.02 Secure FTP&gt;&gt;&gt; at dsvssw04z FTP server ready. Time = 13:41:52
Command:	AUTH TLS
Response:	234 AUTH TLS-C/TLS OK.
Status:	Initializing TLS...
Status:	Verifying certificate...
Command:	USER myusername
Status:	TLS/SSL connection established.
Response:	331 Password required for myusername.
Command:	PASS ********
Response:	230 Connect:Enterprise UNIX login ok, access restrictions apply.
Command:	SYST
Response:	215 UNKNOWN Type: L8
Command:	FEAT
Response:	500 &#39;FEAT&#39;: command not understood.
Command:	PBSZ 0
Response:	200 PBSZ 0 OK.
Command:	PROT P
Response:	200 PROT P OK, data channel will be secured.
Status:	Connected
Status:	Retrieving directory listing...
Command:	PWD
Response:	257 &#34;/myusername&#34; is current directory.
Command:	TYPE I
Response:	200 Type set to I.
Command:	PASV
Response:	227 Entering Passive Mode &#40;10,3,20,11,39,38&#41;
Status:	Server sent passive reply with unroutable address. Using server address instead.
Command:	LIST
Response:	150 Opening BINARY mode data connection for .
Response:	226 Transfer complete.
Status:	Directory listing successful
Status:	Resolving address of ftps.testsite.com
Status:	Connecting to 1.2.3.4:10021...
Status:	Connection established, waiting for welcome message...
Response:	220 &lt;&lt;&lt;Connect:Enterprise UNIX 2.4.02 Secure FTP&gt;&gt;&gt; at dsvssw04z FTP server ready. Time = 13:42:33
Command:	AUTH TLS
Response:	234 AUTH TLS-C/TLS OK.
Status:	Initializing TLS...
Status:	Verifying certificate...
Command:	USER myusername
Status:	TLS/SSL connection established.
Response:	331 Password required for myusername.
Command:	PASS ********
Response:	230 Connect:Enterprise UNIX login ok, access restrictions apply.
Command:	PBSZ 0
Response:	200 PBSZ 0 OK.
Command:	PROT P
Response:	200 PROT P OK, data channel will be secured.
Status:	Connected
Status:	Starting upload of C:\Temp\testfile.txt
Command:	CWD /myusername
Response:	250 CWD command successful.
Command:	PWD
Response:	257 &#34;/myusername&#34; is current directory.
Command:	TYPE A
Response:	200 Type set to A.
Command:	PASV
Response:	227 Entering Passive Mode &#40;10,3,20,11,39,38&#41;
Status:	Server sent passive reply with unroutable address. Using server address instead.
Command:	STOR testfile.txt
Response:	150 Opening ASCII mode data connection for testfile.txt.
Response:	226- Transfer complete - acknowledgment message is pending.
Response:	226- Transfer complete - acknowledgment message is pending.
Response:	226 Transfer complete &#40;Batch Number = 1595&#41;.
Status:	File transfer successful, transferred 39 bytes in 9 seconds
Status:	Retrieving directory listing...
Command:	TYPE I
Response:	200 Type set to I.
Command:	PASV
Response:	227 Entering Passive Mode &#40;10,3,20,11,39,40&#41;
Status:	Server sent passive reply with unroutable address. Using server address instead.
Command:	LIST
Response:	150 Opening BINARY mode data connection for .
Response:	226 Transfer complete.
Status:	Directory listing successful
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;04&nbsp;15:39:23&nbsp;2010</span>
    <span class="description">arthurdent99 [...] hotmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> arthurdent99 [...] hotmail.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Oops, I forgot to mention also:  apparently Connect:Enterprise doesn&#39;t
support EPSV.  I&#39;ve attached the list of commands returned by the HELP
command, if that will help you any.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> commands.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">AUTH    SMNT*   STRU    MAIL*   ALLO    CWD     STAT    XRMD    SIZE
PROT    REIN*   MODE    MSND*   REST    XCWD    HELP    PWD     MDTM
PBSZ    QUIT    RETR    MSOM*   RNFR    LIST    NOOP    XPWD    CCC
USER    PORT    STOR    MSAM*   RNTO    NLST    MKD     CDUP
PASS    PASV    APPE    MRSQ*   ABOR    SITE    XMKD    XCUP
ACCT*   TYPE    MLFL*   MRCP*   DELE    SYST    RMD     STOU
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;01&nbsp;13:09:45&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Chris,

Sorry about taking so long in getting the official release to FTPSSL 
v0.16 out.  Getting the other new features into this release took a 
bit longer than expected.

The major difference from the beta I sent you earlier is the addition 
of EPSV as well.

Curtis
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;01&nbsp;13:10:50&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Fixed in 0.16 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;01&nbsp;13:12:17&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;02&nbsp;12:03:41&nbsp;2010</span>
    <span class="description">arthurdent99 [...] hotmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> arthurdent99 [...] hotmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

I just tried to install your new version from CPAN, and I received the
following error during &#34;make test&#34;.  The server was running Red Hat
Enterprise Linux 5.3 with Perl 5.8.8.  Do you think that it&#39;s just a
matter of some of the tests needing to be updated, or are there other
issues that I need to worry about?

[root@jfs Net-FTPSSL-0.16]# make test
PERL_DL_NONLAZY=1 /usr/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34;
&#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
t/00-basic.t .... ok
t/10-complex.t .. 1/57 #
# You can also perform a deeper test.
# Some information will be required for this test:
# A secure ftp server address, a user, a password and a directory
# where the user has permissions to read and write.
#
# Do you want to make a deeper test ? [y/N]

t/10-complex.t .. 2/57 # Looks like you planned 57 tests but ran 50.
t/10-complex.t .. Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
Failed 7/57 subtests
        &#40;less 49 skipped subtests: 1 okay&#41;

Test Summary Report
-------------------
t/10-complex.t &#40;Wstat: 65280 Tests: 50 Failed: 0&#41;
  Non-zero exit status: 255
  Parse errors: Bad plan.  You planned 57 tests but ran 50.
Files=2, Tests=53,  5 wallclock secs &#40; 0.04 usr  0.02 sys +  0.20 cusr 
0.14 csys =  0.40 CPU&#41;
Result: FAIL
Failed 1/2 test programs. 0/53 subtests failed.
make: *** [test_dynamic] Error 255
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;02&nbsp;12:03:42&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;02&nbsp;12:27:40&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Chris,

A quick question.  Are you trying to test against a server with your 
HELP issue?  Or the PASV issue?  The test cases don&#39;t take these 
issues into consideration.

I&#39;ll have to take a look at t/10-complex.t to see if I can address 
that issue.

In the mean time, can you tar up all the t/*.txt files and send them 
to me?  I&#39;d like to verify if that&#39;s the case.  If it is, I&#39;ll have a 
v0.17 out in a few days that asks if we have to consider that problem.

My best guess at this point is that you will answer yes to one of the 
above questions &#38; I still have croak turned on when the command 
fails.  One of these days I&#39;ll have to clean up the test script.  It&#39;s 
gotten real messy over time.

In the mean time I&#39;ll look into the croak issue while I&#39;m waiting for 
your response.

Curtis

On Thu Dec 02 12:03:41 2010, christhompson wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,
&gt; 
&gt; I just tried to install your new version from CPAN, and I received 
</div>the
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; following error during &#34;make test&#34;.  The server was running Red Hat
&gt; Enterprise Linux 5.3 with Perl 5.8.8.  Do you think that it&#39;s just a
&gt; matter of some of the tests needing to be updated, or are there other
&gt; issues that I need to worry about?
&gt; 
&gt; [root@jfs Net-FTPSSL-0.16]# make test
&gt; PERL_DL_NONLAZY=1 /usr/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34;
&gt; &#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
&gt; t/00-basic.t .... ok
&gt; t/10-complex.t .. 1/57 #
&gt; # You can also perform a deeper test.
&gt; # Some information will be required for this test:
&gt; # A secure ftp server address, a user, a password and a directory
&gt; # where the user has permissions to read and write.
&gt; #
&gt; # Do you want to make a deeper test ? [y/N]
&gt; 
&gt; t/10-complex.t .. 2/57 # Looks like you planned 57 tests but ran 50.
&gt; t/10-complex.t .. Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
&gt; Failed 7/57 subtests
&gt;         &#40;less 49 skipped subtests: 1 okay&#41;
&gt; 
&gt; Test Summary Report
&gt; -------------------
&gt; t/10-complex.t &#40;Wstat: 65280 Tests: 50 Failed: 0&#41;
&gt;   Non-zero exit status: 255
&gt;   Parse errors: Bad plan.  You planned 57 tests but ran 50.
&gt; Files=2, Tests=53,  5 wallclock secs &#40; 0.04 usr  0.02 sys +  0.20 
</div>cusr 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 0.14 csys =  0.40 CPU&#41;
&gt; Result: FAIL
&gt; Failed 1/2 test programs. 0/53 subtests failed.
&gt; make: *** [test_dynamic] Error 255
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;14&nbsp;18:06:17&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Chris,

I haven&#39;t heard back from you on issues with the test script of 
v0.16.  As I suspected, it was an issue with the 10-complex.t test 
script instead of the release itself.

As I looked into it I discovered serveral issues and started on a 
redesign of it.  It did indeed fail if you didn&#39;t ask for a deaper 
test &#40;fixed&#41;, and I added a check to see if the server connection 
needed to use OverrideHELP to avoid a lot of failures when you 
requested a deaper test.

But I&#39;m at a loss at this point without something to test against to 
automate the detection of the need to use OverridePASV in the test 
script as the deaper test is being performed.  I need to see some log 
files to see if I can detect it.  I don&#39;t really like adding an 
additional quesion for the deaper test, since that would only confuse 
anyone doing the testing.

There is going to be a v0.17 hopefully before X-Mass if I can ever 
finish off the changes to 10-complex.t.

Curtis


On Thu Dec 02 12:27:40 2010, CLEACH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Chris,
&gt; 
&gt; A quick question.  Are you trying to test against a server with your 
&gt; HELP issue?  Or the PASV issue?  The test cases don&#39;t take these 
&gt; issues into consideration.
&gt; 
&gt; I&#39;ll have to take a look at t/10-complex.t to see if I can address 
&gt; that issue.
&gt; 
&gt; In the mean time, can you tar up all the t/*.txt files and send them 
&gt; to me?  I&#39;d like to verify if that&#39;s the case.  If it is, I&#39;ll have 
</div>a 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; v0.17 out in a few days that asks if we have to consider that 
</div>problem.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; My best guess at this point is that you will answer yes to one of 
</div>the 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; above questions &#38; I still have croak turned on when the command 
&gt; fails.  One of these days I&#39;ll have to clean up the test script.  
</div>It&#39;s 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; gotten real messy over time.
&gt; 
&gt; In the mean time I&#39;ll look into the croak issue while I&#39;m waiting 
</div>for 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; your response.
&gt; 
&gt; Curtis
&gt; 
&gt; On Thu Dec 02 12:03:41 2010, christhompson wrote:
<div class="message-stanza open">&gt; &gt; Hello,
&gt; &gt; 
&gt; &gt; I just tried to install your new version from CPAN, and I received 
</div>&gt; the
<div class="message-stanza open">&gt; &gt; following error during &#34;make test&#34;.  The server was running Red Hat
&gt; &gt; Enterprise Linux 5.3 with Perl 5.8.8.  Do you think that it&#39;s just 
</div></div>a
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; matter of some of the tests needing to be updated, or are there 
</div></div>other
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; issues that I need to worry about?
&gt; &gt; 
&gt; &gt; [root@jfs Net-FTPSSL-0.16]# make test
&gt; &gt; PERL_DL_NONLAZY=1 /usr/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34;
&gt; &gt; &#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
&gt; &gt; t/00-basic.t .... ok
&gt; &gt; t/10-complex.t .. 1/57 #
&gt; &gt; # You can also perform a deeper test.
&gt; &gt; # Some information will be required for this test:
&gt; &gt; # A secure ftp server address, a user, a password and a directory
&gt; &gt; # where the user has permissions to read and write.
&gt; &gt; #
&gt; &gt; # Do you want to make a deeper test ? [y/N]
&gt; &gt; 
&gt; &gt; t/10-complex.t .. 2/57 # Looks like you planned 57 tests but ran 
</div></div>50.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; t/10-complex.t .. Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
&gt; &gt; Failed 7/57 subtests
&gt; &gt;         &#40;less 49 skipped subtests: 1 okay&#41;
&gt; &gt; 
&gt; &gt; Test Summary Report
&gt; &gt; -------------------
&gt; &gt; t/10-complex.t &#40;Wstat: 65280 Tests: 50 Failed: 0&#41;
&gt; &gt;   Non-zero exit status: 255
&gt; &gt;   Parse errors: Bad plan.  You planned 57 tests but ran 50.
&gt; &gt; Files=2, Tests=53,  5 wallclock secs &#40; 0.04 usr  0.02 sys +  0.20 
</div>&gt; cusr 
<div class="message-stanza open">&gt; &gt; 0.14 csys =  0.40 CPU&#41;
&gt; &gt; Result: FAIL
&gt; &gt; Failed 1/2 test programs. 0/53 subtests failed.
&gt; &gt; make: *** [test_dynamic] Error 255
</div>&gt; 
&gt; 
</div></div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 10-complex.t</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;04&nbsp;12:29:04&nbsp;2011</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Chris,

The problem was just in t/10-complex.t when you answered &#34;No&#34; to the 
deaper test.  There wasn&#39;t a bug in the Net::FTPSSL class itself with 
regards to this ticket.

The new release that just came out &#40;v0.17&#41; fixed that test issue and 
now tests for both your issues so the deeper tests should work for 
your problem servers as well.  But of course I can&#39;t 100% guarentee it 
since I don&#39;t have any servers with your issues.  I&#39;d appreciate you 
running the new t/10-complex.t against your servers.  No need to 
update what you are running today to do this test.

There was also another minor bug fix in this release that may or may 
not have affected you.  But if you ever see your commands &#38; responses 
begining to not match, I&#39;d recommend you upgrade then.  Since the bug 
was in retrieving the response to the command.

Curtis

On Tue Dec 14 18:06:17 2010, CLEACH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Chris,
&gt; 
&gt; I haven&#39;t heard back from you on issues with the test script of 
&gt; v0.16.  As I suspected, it was an issue with the 10-complex.t test 
&gt; script instead of the release itself.
&gt; 
&gt; As I looked into it I discovered serveral issues and started on a 
&gt; redesign of it.  It did indeed fail if you didn&#39;t ask for a deaper 
&gt; test &#40;fixed&#41;, and I added a check to see if the server connection 
&gt; needed to use OverrideHELP to avoid a lot of failures when you 
&gt; requested a deaper test.
&gt; 
&gt; But I&#39;m at a loss at this point without something to test against to 
&gt; automate the detection of the need to use OverridePASV in the test 
&gt; script as the deaper test is being performed.  I need to see some 
</div>log 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; files to see if I can detect it.  I don&#39;t really like adding an 
&gt; additional quesion for the deaper test, since that would only 
</div>confuse 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; anyone doing the testing.
&gt; 
&gt; There is going to be a v0.17 hopefully before X-Mass if I can ever 
&gt; finish off the changes to 10-complex.t.
&gt; 
&gt; Curtis
&gt; 
&gt; 
&gt; On Thu Dec 02 12:27:40 2010, CLEACH wrote:
<div class="message-stanza open">&gt; &gt; Hi Chris,
&gt; &gt; 
&gt; &gt; A quick question.  Are you trying to test against a server with 
</div></div>your 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; HELP issue?  Or the PASV issue?  The test cases don&#39;t take these 
&gt; &gt; issues into consideration.
&gt; &gt; 
&gt; &gt; I&#39;ll have to take a look at t/10-complex.t to see if I can address 
&gt; &gt; that issue.
&gt; &gt; 
&gt; &gt; In the mean time, can you tar up all the t/*.txt files and send 
</div></div>them 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; to me?  I&#39;d like to verify if that&#39;s the case.  If it is, I&#39;ll 
</div></div>have 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; a 
<div class="message-stanza open">&gt; &gt; v0.17 out in a few days that asks if we have to consider that 
</div>&gt; problem.
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; My best guess at this point is that you will answer yes to one of 
</div>&gt; the 
<div class="message-stanza open">&gt; &gt; above questions &#38; I still have croak turned on when the command 
&gt; &gt; fails.  One of these days I&#39;ll have to clean up the test script.  
</div>&gt; It&#39;s 
<div class="message-stanza open">&gt; &gt; gotten real messy over time.
&gt; &gt; 
&gt; &gt; In the mean time I&#39;ll look into the croak issue while I&#39;m waiting 
</div>&gt; for 
<div class="message-stanza open">&gt; &gt; your response.
&gt; &gt; 
&gt; &gt; Curtis
&gt; &gt; 
&gt; &gt; On Thu Dec 02 12:03:41 2010, christhompson wrote:
<div class="message-stanza open">&gt; &gt; &gt; Hello,
&gt; &gt; &gt; 
&gt; &gt; &gt; I just tried to install your new version from CPAN, and I 
</div></div></div>received 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; the
<div class="message-stanza open">&gt; &gt; &gt; following error during &#34;make test&#34;.  The server was running Red 
</div></div></div>Hat
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; Enterprise Linux 5.3 with Perl 5.8.8.  Do you think that it&#39;s 
</div></div>just 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; a
<div class="message-stanza open">&gt; &gt; &gt; matter of some of the tests needing to be updated, or are there 
</div>&gt; other
<div class="message-stanza open">&gt; &gt; &gt; issues that I need to worry about?
&gt; &gt; &gt; 
&gt; &gt; &gt; [root@jfs Net-FTPSSL-0.16]# make test
&gt; &gt; &gt; PERL_DL_NONLAZY=1 /usr/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34;
&gt; &gt; &gt; &#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
&gt; &gt; &gt; t/00-basic.t .... ok
&gt; &gt; &gt; t/10-complex.t .. 1/57 #
&gt; &gt; &gt; # You can also perform a deeper test.
&gt; &gt; &gt; # Some information will be required for this test:
&gt; &gt; &gt; # A secure ftp server address, a user, a password and a directory
&gt; &gt; &gt; # where the user has permissions to read and write.
&gt; &gt; &gt; #
&gt; &gt; &gt; # Do you want to make a deeper test ? [y/N]
&gt; &gt; &gt; 
&gt; &gt; &gt; t/10-complex.t .. 2/57 # Looks like you planned 57 tests but ran 
</div>&gt; 50.
<div class="message-stanza open">&gt; &gt; &gt; t/10-complex.t .. Dubious, test returned 255 &#40;wstat 65280, 
</div></div>0xff00&#41;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; Failed 7/57 subtests
&gt; &gt; &gt;         &#40;less 49 skipped subtests: 1 okay&#41;
&gt; &gt; &gt; 
&gt; &gt; &gt; Test Summary Report
&gt; &gt; &gt; -------------------
&gt; &gt; &gt; t/10-complex.t &#40;Wstat: 65280 Tests: 50 Failed: 0&#41;
&gt; &gt; &gt;   Non-zero exit status: 255
&gt; &gt; &gt;   Parse errors: Bad plan.  You planned 57 tests but ran 50.
&gt; &gt; &gt; Files=2, Tests=53,  5 wallclock secs &#40; 0.04 usr  0.02 sys +  
</div></div>0.20 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; cusr 
<div class="message-stanza open">&gt; &gt; &gt; 0.14 csys =  0.40 CPU&#41;
&gt; &gt; &gt; Result: FAIL
&gt; &gt; &gt; Failed 1/2 test programs. 0/53 subtests failed.
&gt; &gt; &gt; make: *** [test_dynamic] Error 255
</div>&gt; &gt; 
&gt; &gt; 
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;04&nbsp;12:30:48&nbsp;2011</span>
    <span class="description">CLEACH [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;04&nbsp;12:31:19&nbsp;2011</span>
    <span class="description">CLEACH [...] cpan.org -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;04&nbsp;12:31:24&nbsp;2011</span>
    <span class="description">CLEACH [...] cpan.org -  Status changed from &#39;deleted&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;04&nbsp;12:33:47&nbsp;2011</span>
    <span class="description">CLEACH [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;04&nbsp;12:33:48&nbsp;2011</span>
    <span class="description">CLEACH [...] cpan.org -  Fixed in 0.17 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
