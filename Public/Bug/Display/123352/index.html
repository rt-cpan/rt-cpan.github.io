<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #123352 for Module-Info: fails tests with 5.27.5</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #123352 for Module-Info: fails tests with 5.27.5</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Module-Info/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Module-Info/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Module-Info/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Module-Info/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Module-Info">Module-Info CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">123352</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Module-Info/Active/">Module-Info</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
john [...] genehack.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-21624-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-21625-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;21&nbsp;20:09:03&nbsp;2017</span>
    <span class="description">john [...] genehack.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> fails tests with 5.27.5</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 21 Oct 2017 17:07:57 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-Info [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John SJ Anderson &lt;john [...] genehack.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">PERL_DL_NONLAZY=1 &#34;/opt/plenv/versions/5.27.5/bin/perl5.27.5&#34; &#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
B::Module::Info,modules_used use failed with 255 saying:
require not bare 5.006 at line 3

use strict &#40;&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/lib/Module/Info.pm&#34; line 4

use warnings &#40;&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/lib/Module/Info.pm&#34; line 5

use Carp &#40;&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/lib/Module/Info.pm&#34; line 6

use File::Spec &#40;&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/lib/Module/Info.pm&#34; line 7

use Config &#40;&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/lib/Module/Info.pm&#34; line 8

Undefined subroutine &#38;B::LISTOP::name called at blib/lib/B/Module/Info.pm line 67.

CHECK failed--call queue aborted.
#     Failed test &#40;t/Module-Info.t at line 102&#41;
#          got: &#39;0&#39;
#     expected: &#39;7&#39;
#     Failed test &#40;t/Module-Info.t at line 103&#41;
#     Structures begin differing at:
#          $got-&gt;[0] = Does not exist
#     $expected-&gt;[0] = &#39;Carp&#39;
B::Module::Info,modules_used use failed with 255 saying:
use strict &#40;&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/t/lib/Foo.pm&#34; line 3

use vars &#40;&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/t/lib/Foo.pm&#34; line 6

use strict &#40;&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/t/lib/Foo.pm&#34; line 26

use strict &#40;&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/t/lib/Foo.pm&#34; line 37

require not bare 5.004 at line 46

require not bare 5 at line 48

use lib &#40;&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/t/lib/Foo.pm&#34; line 49

require not bare t/lib/Bar.pm at line 64

Undefined subroutine &#38;B::LISTOP::name called at blib/lib/B/Module/Info.pm line 67.

CHECK failed--call queue aborted.
#     Failed test &#40;t/Module-Info.t at line 204&#41;
#          got: &#39;0&#39;
#     expected: &#39;8&#39;
#     Failed test &#40;t/Module-Info.t at line 205&#41;
#     Structures begin differing at:
#          $got-&gt;[0] = Does not exist
#     $expected-&gt;[0] = &#39;Carp&#39;
B::Module::Info,subs_called use failed with 255 saying:
Can&#39;t locate object method &#34;ARRAY&#34; via package &#34;B::NULL&#34; at blib/lib/B/Module/Info.pm line 263.

CHECK failed--call queue aborted.
#     Failed test &#40;t/Module-Info.t at line 297&#41;
#     Structures begin differing at:
#          $got-&gt;[0] = Does not exist
#     $expected-&gt;[0] = &#39;HASH&#40;0x7fe19c069b40&#41;&#39;
B::Module::Info,subs_called use failed with 255 saying:
Can&#39;t locate object method &#34;ARRAY&#34; via package &#34;B::NULL&#34; at blib/lib/B/Module/Info.pm line 263.

CHECK failed--call queue aborted.
#     Failed test &#40;t/Module-Info.t at line 299&#41;
#     Structures begin differing at:
#          $got-&gt;[0] = Does not exist
#     $expected-&gt;[0] = &#39;HASH&#40;0x7fe19c06a290&#41;&#39;
B::Module::Info,modules_used use failed with 255 saying:
use Cwd &#40;&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/t/lib/Bar.pm&#34; line 3

use Cwd &#40;1&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/t/lib/Bar.pm&#34; line 4

use Cwd &#40;1.00102&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/t/lib/Bar.pm&#34; line 5

use Cwd &#40;v1.1.2&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/t/lib/Bar.pm&#34; line 6

require bare strict.pm at line 15

Undefined subroutine &#38;B::LISTOP::isa called at /opt/plenv/versions/5.27.5/lib/perl5/site_perl/5.27.5/darwin-2level/B/Utils.pm line 669.

CHECK failed--call queue aborted.
#     Failed test &#40;t/Module-Info.t at line 304&#41;
#          got: &#39;0&#39;
#     expected: &#39;3&#39;
#     Failed test &#40;t/Module-Info.t at line 305&#41;
#     Structures begin differing at:
#          $got-&gt;[0] = Does not exist
#     $expected-&gt;[0] = &#39;Carp&#39;
# Looks like you failed 8 tests of 59.
t/Module-Info.t .......... 
Dubious, test returned 8 &#40;wstat 2048, 0x800&#41;
Failed 8/59 subtests 
t/n0_die_on_error.t ...... ok
B::Module::Info,modules_used use failed with 255 saying:
use Cwd &#40;&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/t/lib/Bar.pm&#34; line 3

use Cwd &#40;1&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/t/lib/Bar.pm&#34; line 4

use Cwd &#40;1.00102&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/t/lib/Bar.pm&#34; line 5

use Cwd &#40;v1.1.2&#41; at &#34;/Users/genehack/.cpanm/work/1508630030.13362/Module-Info-0.37/t/lib/Bar.pm&#34; line 6

require bare strict.pm at line 15

Undefined subroutine &#38;B::LISTOP::isa called at /opt/plenv/versions/5.27.5/lib/perl5/site_perl/5.27.5/darwin-2level/B/Utils.pm line 669.

CHECK failed--call queue aborted.
#     Failed test &#40;t/n1_modules_required.t at line 15&#41;
#     Structures begin differing at:
#          $got-&gt;[0] = Does not exist
#     $expected-&gt;[0] = &#39;Carp&#39;
Can&#39;t use an undefined value as an ARRAY reference at t/n1_modules_required.t line 18.
# Looks like you planned 3 tests but only ran 1.
# Looks like your test died just after 1.
t/n1_modules_required.t .. 
Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
Failed 3/3 subtests 
t/n2_safe.t .............. ok
t/n3_version.t ........... ok
t/zy_pod_coverage.t ...... skipped: these tests are for release candidate testing
t/zz_pod.t ............... ok

Test Summary Report
-------------------
t/Module-Info.t        &#40;Wstat: 2048 Tests: 59 Failed: 8&#41;
  Failed tests:  16-17, 52-53, 56-59
  Non-zero exit status: 8
t/n1_modules_required.t &#40;Wstat: 65280 Tests: 1 Failed: 1&#41;
  Failed test:  1
  Non-zero exit status: 255
  Parse errors: Bad plan.  You planned 3 tests but ran 1.
Files=7, Tests=111,  1 wallclock secs &#40; 0.04 usr  0.02 sys +  0.98 cusr  0.22 csys =  1.26 CPU&#41;
Result: FAIL
Failed 2/7 test programs. 9/111 subtests failed.
make: *** [test_dynamic] Error 255
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;21&nbsp;23:23:45&nbsp;2017</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> sprout [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Bisect points to v5.27.4-55-g6a4fc5265b

commit 6a4fc5265ba102bfd84de80bdb946121153387af
Author: Father Chrysostomos &lt;sprout@cpan.org&gt;
Date:   Sun Sep 10 22:12:50 2017 -0700

    B.pm: Remove unused var
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;21&nbsp;23:23:46&nbsp;2017</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;21&nbsp;23:47:48&nbsp;2017</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Darn, scratch that. It&#39;s not reproducable.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;22&nbsp;23:27:42&nbsp;2017</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Oct 21 23:47:48 2017, ANDK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Darn, scratch that. It&#39;s not reproducable.
</div>
I see that it is calling all_roots from B::Utils and then taking references to subroutines whose names are in the hash, like this: \&#38;$key

B::Utils is returning names like B::LISTOP::name in the hash &#40;there is no such subroutine&#41;, so taking a reference to it creates a stub and stops $listop-&gt;name from working.

Do you get different test results with different B::Utils versions?  I tested with 0.27.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;22&nbsp;23:28:12&nbsp;2017</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Oct 22 23:27:42 2017, SPROUT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat Oct 21 23:47:48 2017, ANDK wrote:
<div class="message-stanza open">&gt; &gt; Darn, scratch that. It&#39;s not reproducable.
</div>&gt; 
&gt; I see that it is calling all_roots from B::Utils and then taking
&gt; references to subroutines whose names are in the hash, like this:
&gt; \&#38;$key
</div>
I mean the hash returned by all_roots.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; B::Utils is returning names like B::LISTOP::name in the hash &#40;there is
&gt; no such subroutine&#41;, so taking a reference to it creates a stub and
&gt; stops $listop-&gt;name from working.
&gt; 
&gt; Do you get different test results with different B::Utils versions?  I
&gt; tested with 0.27.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;23&nbsp;02:36:40&nbsp;2017</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">My latest experiment showed that reverting v5.27.4-55-g6a4fc5265b and v5.27.4-69-g6077332135 fixes the problem. I tried that on top of v5.27.5-95-gd1589979b3.

The reason why I said scratch that was because I got seemingly contradicting results due to a completely unrelated problem &#40;with PERL_USE_UNSAFE_INC and Task::Weaken&#41;. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;23&nbsp;12:54:52&nbsp;2017</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Oct 23 02:36:40 2017, ANDK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; My latest experiment showed that reverting v5.27.4-55-g6a4fc5265b and
&gt; v5.27.4-69-g6077332135 fixes the problem. I tried that on top of
&gt; v5.27.5-95-gd1589979b3.
&gt; 
&gt; The reason why I said scratch that was because I got seemingly
&gt; contradicting results due to a completely unrelated problem &#40;with
&gt; PERL_USE_UNSAFE_INC and Task::Weaken&#41;.
</div>
B::Utils does not take method caches into account.  It returns not only the names of all subroutines, but also the names under which they have been cached as methods.  It turns out that the dummy assignment in B::walksymtable, that appeared to be a useless line of code left over from refactoring, was actually doing something useful &#40;clearing cached methods&#41;.  It is perfectly reasonable to expect -&gt;CV to point to something only if there is a real sub there &#40;as opposed to a cached method&#41;, so I have restored this presumably accidental behaviour of B.pm and added a test, in perl commit 1cc318c.

This ticket I think can be closed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;29&nbsp;08:44:12&nbsp;2017</span>
    <span class="description">ANDK [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
