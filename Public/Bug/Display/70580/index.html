<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #70580 for Net-SNMP: SNMP.pm Debug flag patch</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #70580 for Net-SNMP: SNMP.pm Debug flag patch</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-SNMP/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-SNMP/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-SNMP/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-SNMP/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-SNMP">Net-SNMP CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">70580</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">stalled</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">1 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-SNMP/Active/">Net-SNMP</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">dtown [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
BitCard [...] ResonatorSoft.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-23238-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
v6.0.1    </td>
  </tr>
  <tr id="CF-23239-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;29&nbsp;12:35:33&nbsp;2011</span>
    <span class="description">BitCard [...] ResonatorSoft.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> SNMP.pm Debug flag patch</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Made the following changes:

* Removed some overly verbose debug messages within get_entries
* Added a debug flag for SNMP.pm itself

Seems to work okay.  The get_entries messages were to hit multiple times
on each and every response packet.  This sort of verbosity isn&#39;t
available on get_table, so I removed the DEBUG_INFO lines.  Figured they
were useful when the feature was first being implemented, but it&#39;s just
spammy now.

The debug flag gives the user the ability to filter out messages like
that, since SNMP.pm holds a lot of code.  Previously, if there were ANY
debug flags turned on, then the DEBUG_INFO messages from SNMP.pm would
be turned on.  This patch fixes that.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> SNMP-DebugFlag.patch.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -bcdr /usr/local/share/perl/5.10.1/Net/SNMP.pm Net/SNMP.pm
*** /usr/local/share/perl/5.10.1/Net/SNMP.pm	2010-09-09 20:02:45.000000000 -0400
--- Net/SNMP.pm	2011-08-01 10:12:13.000000000 -0400
***************
*** 137,144 ****
            GET_BULK_REQUEST INFORM_REQUEST SNMPV2_TRAP REPORT &#41;
     ],
     debug       =&gt; [
!       qw&#40; DEBUG_ALL DEBUG_NONE DEBUG_MESSAGE DEBUG_TRANSPORT DEBUG_DISPATCHER
!           DEBUG_PROCESSING DEBUG_SECURITY snmp_debug &#41;
     ],
     generictrap =&gt; [
        qw&#40; COLD_START WARM_START LINK_DOWN LINK_UP AUTHENTICATION_FAILURE
--- 159,166 ----
            GET_BULK_REQUEST INFORM_REQUEST SNMPV2_TRAP REPORT &#41;
     ],
     debug       =&gt; [
!       qw&#40; DEBUG_ALL DEBUG_NONE DEBUG_SNMP DEBUG_MESSAGE DEBUG_TRANSPORT
!           DEBUG_DISPATCHER DEBUG_PROCESSING DEBUG_SECURITY snmp_debug &#41;
     ],
     generictrap =&gt; [
        qw&#40; COLD_START WARM_START LINK_DOWN LINK_UP AUTHENTICATION_FAILURE
***************
*** 165,170 ****
--- 187,193 ----
  
  sub DEBUG_ALL         { 0xff }  # All
  sub DEBUG_NONE        { 0x00 }  # None
+ sub DEBUG_SNMP        { 0x01 }  # Main Net::SNMP functions
  sub DEBUG_MESSAGE     { 0x02 }  # Message/PDU encoding/decoding
  sub DEBUG_TRANSPORT   { 0x04 }  # Transport Layer
  sub DEBUG_DISPATCHER  { 0x08 }  # Dispatcher
***************
*** 173,179 ****
  
  ## Package variables
  
! our $DEBUG = DEBUG_NONE;        # Debug mask 
  
  our $DISPATCHER;                # Dispatcher instance
  
--- 196,203 ----
  
  ## Package variables
  
! our $DEBUG_MASK = DEBUG_NONE;   # Debug mask
! our $DEBUG      = 0;            # Debug mode for just Net::SNMP
  
  our $DISPATCHER;                # Dispatcher instance
  
***************
*** 1947,1952 ****
--- 2020,2029 ----
  
  =item *
  
+ 0x01 - Main Net::SNMP functions
+ 
+ =item *
+ 
  0x02 - Message or PDU encoding and decoding
  
  =item *
***************
*** 1985,2001 ****
  
     if &#40;@_ == 2&#41; {
  
!       $DEBUG = &#40;$mask =~ /^\d+$/&#41; ? $mask : &#40;$mask&#41; ? DEBUG_ALL : DEBUG_NONE;
  
!       eval { Net::SNMP::Message-&gt;debug&#40;$DEBUG &#38; DEBUG_MESSAGE&#41;;              };
!       eval { Net::SNMP::Transport-&gt;debug&#40;$DEBUG &#38; DEBUG_TRANSPORT&#41;;          };
!       eval { Net::SNMP::Dispatcher-&gt;debug&#40;$DEBUG &#38; DEBUG_DISPATCHER&#41;;        };
!       eval { Net::SNMP::MessageProcessing-&gt;debug&#40;$DEBUG &#38; DEBUG_PROCESSING&#41;; };
!       eval { Net::SNMP::Security-&gt;debug&#40;$DEBUG &#38; DEBUG_SECURITY&#41;;            };
  
     }
  
!    return $DEBUG;
  }
  
  sub snmp_debug
--- 2062,2079 ----
  
     if &#40;@_ == 2&#41; {
  
!       $DEBUG_MASK = &#40;$mask =~ /^\d+$/&#41; ? $mask : &#40;$mask&#41; ? DEBUG_ALL : DEBUG_NONE;
  
!       $DEBUG = $DEBUG_MASK &#38; DEBUG_SNMP;
!       eval { Net::SNMP::Message-&gt;debug&#40;$DEBUG_MASK &#38; DEBUG_MESSAGE&#41;;              };
!       eval { Net::SNMP::Transport-&gt;debug&#40;$DEBUG_MASK &#38; DEBUG_TRANSPORT&#41;;          };
!       eval { Net::SNMP::Dispatcher-&gt;debug&#40;$DEBUG_MASK &#38; DEBUG_DISPATCHER&#41;;        };
!       eval { Net::SNMP::MessageProcessing-&gt;debug&#40;$DEBUG_MASK &#38; DEBUG_PROCESSING&#41;; };
!       eval { Net::SNMP::Security-&gt;debug&#40;$DEBUG_MASK &#38; DEBUG_SECURITY&#41;;            };
  
     }
  
!    return $DEBUG_MASK;
  }
  
  sub snmp_debug
***************
*** 2836,2848 ****
              # The response column does not map to the the request, there
              # could be a &#34;hole&#34; or we are out of entries.
  
-             DEBUG_INFO&#40;&#39;last_entry: column mismatch: %s&#39;, $name&#41;;
              $last_entry = TRUE;
              next;
           }
  
-          DEBUG_INFO&#40;&#39;found index [%s]&#39;, $index&#41;;
- 
           # Validate the index of the response.
  
           if &#40;&#40;defined $argv-&gt;{start_index}&#41; &#38;&#38;
--- 2915,2924 ----
***************
*** 2897,2903 ****
              @row = &#40;&#41;;
              $row_index = $index;
              $row[$col_num] = $name;
-             DEBUG_INFO&#40;&#39;new minimum row_index [%s]&#39;, $row_index&#41;;
  
           } else {
  
--- 2973,2978 ----
***************
*** 2950,2956 ****
        # Store the maximum index found to be used for the next request.
        if &#40;oid_lex_cmp&#40;$row_index, $max_index&#41; &gt; 0&#41; {
           $max_index = $row_index;
-          DEBUG_INFO&#40;&#39;new max_index [%s]&#39;, $max_index&#41;;
        }
  
     }
--- 3025,3030 ----
***************
*** 3048,3055 ****
        }
     }
  
!    # Send the next PDU with no delay.
!    $DISPATCHER-&gt;send_pdu&#40;$this-&gt;{_pdu}, 0&#41;;
  
     return;
  }
--- 3122,3130 ----
        }
     }
  
!    # Send the next PDU as a priority
!    # &#40;Existing requests get priority over new ones&#41;
!    $DISPATCHER-&gt;send_pdu_priority&#40;$this-&gt;{_pdu}&#41;;
  
     return;
  }
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;29&nbsp;12:39:14&nbsp;2011</span>
    <span class="description">BitCard [...] ResonatorSoft.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> BitCard [...] ResonatorSoft.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry, disregard the last item on the patch &#40;send_pdu_priority change&#41;.
 Leftover from another patch, and I have confirmed that it&#39;s not missing
for the other one.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;01&nbsp;22:32:16&nbsp;2011</span>
    <span class="description">dtown [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I will consider the specific flag for the top level module, but always
felt that if any debugging was enabled, debugging at the top level
should be enabled since it is the core module.

I will not remove the debugging in get_table&#40;&#41;.  There have been many
unique problems with this method and the debug messages have aided in
their resolution.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;01&nbsp;22:32:17&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;01&nbsp;22:32:53&nbsp;2011</span>
    <span class="description">dtown [...] cpan.org -  Given to DTOWN</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;10:56:36&nbsp;2012</span>
    <span class="description">dtown [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">1 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This request will be addressed when there are enough changes to the
Net::SNMP module to warrant a new release.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;10:56:37&nbsp;2012</span>
    <span class="description">dtown [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
