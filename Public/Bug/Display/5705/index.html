<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #5705 for WWW-Mechanize-Cached: documentation sug - Referer</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #5705 for WWW-Mechanize-Cached: documentation sug - Referer</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/WWW-Mechanize-Cached/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/WWW-Mechanize-Cached/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/WWW-Mechanize-Cached/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/WWW-Mechanize-Cached/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="http://github.com/oalders/www-mechanize-cached/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/WWW-Mechanize-Cached">WWW-Mechanize-Cached CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">5705</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">1.5 hours (90 min)

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/WWW-Mechanize-Cached/Active/">WWW-Mechanize-Cached</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
svhwan_fourms1

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Unimportant    </td>
  </tr>
  <tr id="CF-36220-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-36221-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;17&nbsp;16:54:10&nbsp;2004</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> documentation sug - Referer</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Under oddities, you say that sometimes it appears that the caching doesn&#39;t work because of the Referer.  But you don&#39;t say how to fix it.

     Looking at the WWW:Mechanize code, I found it was tracking my last_uri and was only really using that to establish the Referer.  So I found that if after every &#34;get,&#34; I did a 

     delete $mechObj{&#39;last_uri&#39;};

It cleaned the Referer out of the GET header, and the caching worked.  It might be worth mentioning that it the docs.
     I have also speculated that instead of deleting &#39;last_uri&#39;, I _MIGHT_ be able to do a get with:

     $mechObj-&gt;get&#40;$uriToGet, &#39;Referer&#39; =&gt; undef&#41;;
or maybe &#39;&#39; instead of undef.  I&#39;ll try and test that in the next week.

I don&#39;t know if there&#39;s some value to keeping the referer, though both of these methods could be used to explicitly set it instead of delete it.  But this addresses the Referer issue you brought up in Oddities.

-Steve

PS I&#39;d also like to be able to explicitly set the expire time on a per-get basis, but I&#39;ll try and code that up and submit it later.  I had a hack for that in 1.26, but I need to rework it a little and cleean it up in 1.30.  It basically came down to overloading the get and intercepting the additional optional parameter.  But I think I can do it cleaner than I did the first time.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;07&nbsp;16:31:05&nbsp;2009</span>
    <span class="description">olaf [...] wundersolutions.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> olaf [...] wundersolutions.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Mar 17 16:54:10 2004, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Under oddities, you say that sometimes it appears that the caching
&gt;    doesn&#39;t work because of the Referer.  But you don&#39;t say how to fix
&gt;    it.
&gt; 
&gt;      Looking at the WWW:Mechanize code, I found it was tracking my
&gt;    last_uri and was only really using that to establish the Referer.
&gt;    So I found that if after every &#34;get,&#34; I did a
&gt; 
&gt;      delete $mechObj{&#39;last_uri&#39;};
&gt; 
&gt; It cleaned the Referer out of the GET header, and the caching worked.
&gt;    It might be worth mentioning that it the docs.
&gt;      I have also speculated that instead of deleting &#39;last_uri&#39;, I
&gt;    _MIGHT_ be able to do a get with:
&gt; 
&gt;      $mechObj-&gt;get&#40;$uriToGet, &#39;Referer&#39; =&gt; undef&#41;;
&gt; or maybe &#39;&#39; instead of undef.  I&#39;ll try and test that in the next
&gt;    week.
&gt; 
&gt; I don&#39;t know if there&#39;s some value to keeping the referer, though both
&gt;    of these methods could be used to explicitly set it instead of
&gt;    delete it.  But this addresses the Referer issue you brought up in
&gt;    Oddities.
&gt; 
&gt; -Steve
&gt; 
&gt; PS I&#39;d also like to be able to explicitly set the expire time on a
&gt;    per-get basis, but I&#39;ll try and code that up and submit it later.
&gt;    I had a hack for that in 1.26, but I need to rework it a little and
&gt;    cleean it up in 1.30.  It basically came down to overloading the
&gt;    get and intercepting the additional optional parameter.  But I
&gt;    think I can do it cleaner than I did the first time.
</div>
Hi,

I realize it has been a very long time since you opened this ticket.  I
just recently took over maintenance of this module.  Referring to your
ticket, I don&#39;t see the &#34;oddities&#34; in the documentation for this module
anymore.  Is it possible this bug has already been cleared up and the
ticket just hasn&#39;t been closed?

If you&#39;re still using the module and this is still an issue for you,
please let me know.  Otherwise I will go ahead and close this ticket.

All the best,

Olaf
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;07&nbsp;16:31:07&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;01&nbsp;09:15:29&nbsp;2009</span>
    <span class="description">MichaelRWolf [...] att.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 07 16:31:05 2009, OALDERS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Mar 17 16:54:10 2004, guest wrote:
<div class="message-stanza open">&gt; &gt; Under oddities, you say that sometimes it appears that the caching
&gt; &gt;    doesn&#39;t work because of the Referer.  But you don&#39;t say how to fix
&gt; &gt;    it.
</div></div>
[...]


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; I realize it has been a very long time since you opened this ticket.  I
&gt; just recently took over maintenance of this module.  Referring to your
&gt; ticket, I don&#39;t see the &#34;oddities&#34; in the documentation for this module
&gt; anymore.
</div>
Look in the &#34;Bugs and Limitations&#34; section for the string &#34;Referer&#34;, not
the string &#34;oddities&#34;.  Based on the current documentation, it appears
that the problem still exists.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;14&nbsp;00:30:50&nbsp;2010</span>
    <span class="description">olaf [...] wundersolutions.com -  Correspondence added</span>
    <span class="time-taken">90 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Nov 01 09:15:29 2009, MichaelRWolf@att.net wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Oct 07 16:31:05 2009, OALDERS wrote:
<div class="message-stanza open">&gt; &gt; On Wed Mar 17 16:54:10 2004, guest wrote:
<div class="message-stanza open">&gt; &gt; &gt; Under oddities, you say that sometimes it appears that the caching
&gt; &gt; &gt;    doesn&#39;t work because of the Referer.  But you don&#39;t say how to fix
&gt; &gt; &gt;    it.
</div></div>&gt; 
&gt; [...]
&gt; 
&gt; 
<div class="message-stanza open">&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt; I realize it has been a very long time since you opened this ticket.  I
&gt; &gt; just recently took over maintenance of this module.  Referring to your
&gt; &gt; ticket, I don&#39;t see the &#34;oddities&#34; in the documentation for this module
&gt; &gt; anymore.
</div>&gt; 
&gt; Look in the &#34;Bugs and Limitations&#34; section for the string &#34;Referer&#34;, not
&gt; the string &#34;oddities&#34;.  Based on the current documentation, it appears
&gt; that the problem still exists.
&gt; 
</div>
I finally had a chance to take a closer look at this.  It is fixed in
1.36 which will be released to the CPAN in the coming week.

Thank you very much for bringing this up.  I realize it has been a long
time since you initially opened this ticket but at least it&#39;s fixed now.  :&#41;

Thanks,

Olaf
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;14&nbsp;00:30:51&nbsp;2010</span>
    <span class="description">olaf [...] wundersolutions.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
