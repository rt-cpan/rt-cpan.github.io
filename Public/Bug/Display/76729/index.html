<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #76729 for IPC-Cmd: Re: Compillng perl on z/OS - first problems</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #76729 for IPC-Cmd: Re: Compillng perl on z/OS - first problems</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/IPC-Cmd/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/IPC-Cmd/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/IPC-Cmd/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/IPC-Cmd/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/IPC-Cmd">IPC-Cmd CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">76729</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">deleted</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/IPC-Cmd/Active/">IPC-Cmd</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
nick [...] ccl4.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-17338-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-17339-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;20&nbsp;12:05:54&nbsp;2012</span>
    <span class="description">nick [...] ccl4.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> perl5-porters [...] perl.org, perl-mvs [...] perl.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: Compillng perl on z/OS - first problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 20 Apr 2012 17:05:15 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Mariusz Stakowski &lt;Mariusz.Stakowski [...] asseco.pl&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Nicholas Clark &lt;nick [...] ccl4.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, Apr 17, 2012 at 04:57:43PM +0200, Mariusz Stakowski wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;                                 Hello list,
&gt; 
&gt;                 I finally tried to compile perl on z/OS. I have taken perl 
&gt; 5.14.2 source. I have encountered errors during configuration stage. There 
&gt; might be my faults - I have read INSTALL and README but I am not sure if I 
&gt; have given right parameters. It is possible that my system needs some 
&gt; configuration too. I would appreciate some help in making it working. I 
&gt; have no groff yet but this is not a big problem I think.
</div>
Thanks for trying this, and reporting back.

I&#39;m going to inline at least part of your file conf.errors, indented 4
spaces, as it&#39;s *very* strange, with comments on the left margin.
This is it, *in order*:

    WARNING CCN3296 ./patchlevel.h:132   #include file &#34;git_version.h&#34; not found.
    ERROR CCN3198 perl.c:512   #if, #else, #elif, #ifdef, #ifndef block must be ended with #endif.
    FSUM3065 The COMPILE step ended with return code 12.
    FSUM3017 Could not compile .83886901.c. Correct the errors and try again.
    Finding dependencies for perly.o.
    ERROR CCN3202 perly.c:86    #endif can only appear at the end of a #if, #elif, #ifdef or #ifndef block.
    FSUM3065 The COMPILE step ended with return code 12.
    FSUM3017 Could not compile .67109688.c. Correct the errors and try again.
    Finding dependencies for pp.o.
    Finding dependencies for pp_hot.o.
    Finding dependencies for pp_ctl.o.
    Finding dependencies for pp_sys.o.

This suggests two problems:

1&#41; more than one make process running in parallel
   You shouldn&#39;t be seeing all these &#34;Finding dependencies for ...&#34; lines
   interspersed with compiling output. The &#34;Finding dependencies&#34; should
   complete before any compiling starts

2&#41; each make process ignoring any sort of dependency rules
   In that, there&#39;s a dependency from perl.o on git_version.h, so why is
   the make utility ignoring it, and attempting to compile perl.c
   generating git_version.h?

   In fact, is there a Makefile at all? Or is a make utility getting ahead
   of itself and attempting to use default .c to .o rules to compile every
   .c file it can see?


    ERROR CCN3010 ./time64.c:479   Macro PeRl_CaTiFy invoked with a null argument for parameter a.
    ERROR CCN3010 ./time64.c:479   Macro PeRl_CaTiFy invoked with a null argument for parameter a.
    FSUM3065 The COMPILE step ended with return code 12.
    FSUM3017 Could not compile .83886910.c. Correct the errors and try again.
    Finding dependencies for regcomp.o.
    ERROR CCN3213 regcomp.c:275   Macro name TRIE_TYPE_IS_SAFE cannot be redefined.
    FSUM3065 The COMPILE step ended with return code 12.
    FSUM3017 Could not compile .67109692.c. Correct the errors and try again.
    Finding dependencies for regexec.o.
    ERROR CCN3287 regexec.c:36    The parameter list on the definition of macro _CCC_TRY_NONLOCALE is not complete.
    ERROR CCN3287 regexec.c:37    The parameter list on the definition of macro CCC_TRY is not complete.
    ERROR CCN3287 regexec.c:38    The parameter list on the definition of macro CCC_TRY_U is not complete.
    ERROR CCN3287 regexec.c:70    The parameter list on the definition of macro REXEC_TRIE_READ_CHAR is not complete.
    FSUM3065 The COMPILE step ended with return code 12.
    FSUM3017 Could not compile .83886915.c. Correct the errors and try again.
    Finding dependencies for utf8.o.
    Finding dependencies for sv.o.
    Finding dependencies for taint.o.
    Finding dependencies for toke.o.
    Finding dependencies for util.o.
    Finding dependencies for deb.o.
    Finding dependencies for run.o.
    Finding dependencies for universal.o.
    Finding dependencies for pad.o.
    Finding dependencies for globals.o.
    WARNING CCN3296 ./perl.h:4315  #include file &#34;uudmap.h&#34; not found.
    WARNING CCN3296 ./perl.h:4318  #include file &#34;bitcount.h&#34; not found.

Again, these two files should have been generated before they are included.
Makefile dependencies to ensure this are being ignored.

    FSUM3065 The COMPILE step ended with return code 4.
    Finding dependencies for keywords.o.
    Finding dependencies for perlio.o.
    Finding dependencies for perlapi.o.
    Finding dependencies for numeric.o.
    Finding dependencies for mathoms.o.
    Finding dependencies for locale.o.
    Finding dependencies for pp_pack.o.
    ERROR CCN3294 pp_pack.c:115   Syntax error in expression on #if directive.

Line 115 of pp_pack.c in perl 5.14.2 is this:

#define SIZE32 4

That&#39;s not even an #if directive. Which file is the compiler actually
seeing? If it is seeing the right pp_pack.c, why is its diagnostic output
confused?

    FSUM3065 The COMPILE step ended with return code 12.
    FSUM3017 Could not compile .67109729.c. Correct the errors and try again.
    Finding dependencies for pp_sort.o.
    Finding dependencies for miniperlmain.o.
    Finding dependencies for opmini.o.
    Finding dependencies for perlmini.o.
    WARNING CCN3296 ./patchlevel.h:132   #include file &#34;git_version.h&#34; not found.
    ERROR CCN3198 perlmini.c:512   #if, #else, #elif, #ifdef, #ifndef block must be ended with #endif.
    FSUM3065 The COMPILE step ended with return code 12.
    FSUM3017 Could not compile .67109737.c. Correct the errors and try again.
    echo Makefile.SH cflags.SH config_h.SH makedepend.SH myconfig.SH pod/Makefile.SH | tr &#39; &#39; &#39;\n&#39; &gt;.shlist
    Updating makefile...
    cd x2p; make depend
    sh ../makedepend MAKE=make
    echo hash.c  str.c util.c walk.c | tr &#39; &#39; &#39;\n&#39; &gt;.clist
    Finding dependencies for hash.o.
    Finding dependencies for str.o.
    Finding dependencies for util.o.
    Finding dependencies for walk.o.
    echo Makefile.SH cflags.SH | tr &#39; &#39; &#39;\n&#39; &gt;.shlist
    Updating makefile...
    Now you must run &#39;make&#39;


What&#39;s *supposed* to happen is

1: user runs ./Configure, which ends up generating config.sh
2: ./Configure uses values in config.sh to run all the files *.SH,
   which are shell scripts that extract various other files. In particular,
   Makefile.SH extracts Makefile, and makedepend.SH extracts makedepend
3: ./Configure &#40;by default&#41; runs makedepend. However, there&#39;s also a
   dependency rule in Makefile to make this happen.
   makedepend processes Makefile and generates makefile.
   &#40;it&#39;s makedepend which is outputting all those &#34;Finding dependencies&#34; lines&#41;
   makefile is simply Makefile with a lot of dependency rules concatenated
   on the end.
4: *At this point* user runs make
   make picks &#39;makefile&#39; as the file to read &#40;&#39;Makefile&#39; is second choice&#41;
   and runs with it. For a clean build, it doesn&#39;t actually matter if it got
   &#39;Makefile&#39; instead, because dependency rules only matter if rebuilding
   after editing source files.

What seems to be happening is

a&#41; make running at the same time as makedepend
b&#41; make not even bothering act on the dependency rules in the Makefile 

which makes me wonder - is make even reading &#39;Makefile&#39;?

So

1: Which make program are you using? GNU make, or the system supplied make?
2: What&#39;s the default filename that the make program tries to read?
3: What happens if you re-run make at this point?
   Does it now pick up on the correct Makefile?
4: If not, what happens if you run
   make -f Makefile
   ? Does that work?

Nicholas Clark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;16&nbsp;06:30:19&nbsp;2012</span>
    <span class="description">BINGOS [...] cpan.org -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
