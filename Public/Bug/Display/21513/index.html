<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #21513 for Inline-Java: Java Object not properly created</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #21513 for Inline-Java: Java Object not properly created</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Inline-Java/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Inline-Java/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Inline-Java/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Inline-Java/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Inline-Java">Inline-Java CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">21513</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Inline-Java/Active/">Inline-Java</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">patl [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
joe.workman [...] gs.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-16926-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-16927-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;15&nbsp;08:15:47&nbsp;2006</span>
    <span class="description">joe.workman [...] gs.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Java Object not properly created</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">First a disclaimer:
I am new to Inline::Java and the JDBC module, and do not know Java. 
This may be a bug in Inline::Java but but I thought I would log the 
bug here since I can not even make a connection to a database via 
JDBC. I will also log the bug in JDBC but I think its a issue with 
Inline::Java.  

Environment:
Solaris 5.8 Generic_108528-18 sun4u sparc SUNW,Ultra-80
perl v5.8.6
Inline::Java v0.51
JDBC v0.01

The Runtime Error:

09-15-2006 11:04:44 INFO: Started : ovaa_alarmdef_exception
09-15-2006 11:04:44 INFO: Version : 1.0
09-15-2006 11:04:44 INFO: Pid : 2825
09-15-2006 11:04:44 INFO: Loglevel : 4
09-15-2006 11:04:44 INFO: Cmd Line : 
09-15-2006 11:04:44 INFO: Loading driver . . . 
09-15-2006 11:04:44 INFO: Successfully loaded daffodil driver!!
09-15-2006 11:04:44 INFO: Connecting to daffodil . . .
09-15-2006 11:04:44 FATAL: Wrong number of arguments at /opt/gsperl-
5.8.6_1/lib/site_perl/5.8.6/sun4-solaris-thread-
multi/Inline/Java/Object.pm line 107
09-15-2006 11:04:44 FATAL: Processing aborted!

The Code:
use JDBC;
sub connect_to_daffodil {
$_log-&gt;info&#40;&#39;Loading driver . . . &#39;&#41;;
JDBC-&gt;load_driver&#40;&#39;in.co.daffodil.db.rmi.RmiDaffodilDBDriver&#39;&#41;;
$_log-&gt;info&#40;&#39;Successfully loaded daffodil driver!!&#39;&#41;;

my $url = &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;;
my $user = &#39;DAFFODIL&#39;;
my $pass = &#39;daff0d1l&#39;;

$_log-&gt;info&#40;&#39;Connecting to daffodil . . . &#39;&#41;;
my $con = JDBC-&gt;getConnection&#40;$url, $user, $pass&#41;;
$_log-&gt;info&#40;&#39;Successfully connected to daffodil!!&#39;&#41;;
return $con;
}

Notes:

As you can see, I am just trying to make a basic connection to a 
Daffodil database via JDBC. The code seem identical to the example in 
the POD. Maybe there has been a change in Inline::Java that broke 
JDBC? 

Dubugging:

I hope that soem of thsi debugging may help in find the solution. 
After looking into Inline::Java::Object the problem is apparently a 
problem with the $args variable when 
Inline::Java::Class::CastArguments is called. While digging a little 
further I see that it has to do with $args and the $protos-&gt;key-

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;signature in this method do not have the same number of elements 
</div>
&#40;args has 3 was the signature of the first proto only has 1&#41;. 

args:$VAR1 = [
&#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;,
&#39;DAFFODIL&#39;,
&#39;daff0d1l&#39;
];
protos:$VAR1 = {
&#39;java.lang.String&#39; =&gt; {
&#39;STATIC&#39; =&gt; 1,
&#39;IDX&#39; =&gt; 568,
&#39;SIGNATURE&#39; =&gt; [
&#39;java.lang.String&#39;
]
},
&#39;java.lang.String, java.lang.String, java.lang.String&#39; =&gt; {
&#39;
STATIC&#39; =&gt; 1,
&#39;
IDX&#39; =&gt; 569,
&#39;
SIGNATURE&#39; =&gt; [

&#39;java.lang.String&#39;,

&#39;java.lang.String&#39;,

&#39;java.lang.String&#39;

]
},
&#39;java.lang.String, java.util.Properties&#39; =&gt; {
&#39;STATIC&#39; =&gt; 1,
&#39;IDX&#39; =&gt; 567,
&#39;SIGNATURE&#39; =&gt; 
[

&#39;java.lang.String&#39;,

&#39;java.util.Properties&#39;

]
}
};


I then traced this back to the bind_method in Java.pm where the 
__validate_protype mehtod is called. But this is where I am currently 
stuck. I understand the code but following it at this point is tricky. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;15&nbsp;08:53:14&nbsp;2006</span>
    <span class="description">patrick.leboutillier [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21513] Java Object not properly created</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 15 Sep 2006 08:52:59 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Inline-Java [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Patrick LeBoutillier&#34; &lt;patrick.leboutillier [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Joe,

Can you set the PERL_INLINE_JAVA_DEBUG environment variable to &#34;5&#34;
and re-run your script?

You should get a LOT of debugging info about what Inline::Java is trying to do.
From that debug info we should be albe to tell what method is in error, how many
argument have been passed and how many arguments Inline::Java thinks the method
has.

Patrick

On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Fri Sep 15 08:15:47 2006: Request 21513 was acted upon.
&gt; Transaction: Ticket created by josephworkman
&gt;        Queue: Inline-Java
&gt;      Subject: Java Object not properly created
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: Important
&gt;        Owner: Nobody
&gt;   Requestors: joe.workman@gs.com
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt;
&gt;
&gt; First a disclaimer:
&gt; I am new to Inline::Java and the JDBC module, and do not know Java.
&gt; This may be a bug in Inline::Java but but I thought I would log the
&gt; bug here since I can not even make a connection to a database via
&gt; JDBC. I will also log the bug in JDBC but I think its a issue with
&gt; Inline::Java.
&gt;
&gt; Environment:
&gt; Solaris 5.8 Generic_108528-18 sun4u sparc SUNW,Ultra-80
&gt; perl v5.8.6
&gt; Inline::Java v0.51
&gt; JDBC v0.01
&gt;
&gt; The Runtime Error:
&gt;
&gt; 09-15-2006 11:04:44 INFO: Started : ovaa_alarmdef_exception
&gt; 09-15-2006 11:04:44 INFO: Version : 1.0
&gt; 09-15-2006 11:04:44 INFO: Pid : 2825
&gt; 09-15-2006 11:04:44 INFO: Loglevel : 4
&gt; 09-15-2006 11:04:44 INFO: Cmd Line :
&gt; 09-15-2006 11:04:44 INFO: Loading driver . . .
&gt; 09-15-2006 11:04:44 INFO: Successfully loaded daffodil driver!!
&gt; 09-15-2006 11:04:44 INFO: Connecting to daffodil . . .
&gt; 09-15-2006 11:04:44 FATAL: Wrong number of arguments at /opt/gsperl-
&gt; 5.8.6_1/lib/site_perl/5.8.6/sun4-solaris-thread-
&gt; multi/Inline/Java/Object.pm line 107
&gt; 09-15-2006 11:04:44 FATAL: Processing aborted!
&gt;
&gt; The Code:
&gt; use JDBC;
&gt; sub connect_to_daffodil {
&gt; $_log-&gt;info&#40;&#39;Loading driver . . . &#39;&#41;;
&gt; JDBC-&gt;load_driver&#40;&#39;in.co.daffodil.db.rmi.RmiDaffodilDBDriver&#39;&#41;;
&gt; $_log-&gt;info&#40;&#39;Successfully loaded daffodil driver!!&#39;&#41;;
&gt;
&gt; my $url = &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;;
&gt; my $user = &#39;DAFFODIL&#39;;
&gt; my $pass = &#39;daff0d1l&#39;;
&gt;
&gt; $_log-&gt;info&#40;&#39;Connecting to daffodil . . . &#39;&#41;;
&gt; my $con = JDBC-&gt;getConnection&#40;$url, $user, $pass&#41;;
&gt; $_log-&gt;info&#40;&#39;Successfully connected to daffodil!!&#39;&#41;;
&gt; return $con;
&gt; }
&gt;
&gt; Notes:
&gt;
&gt; As you can see, I am just trying to make a basic connection to a
&gt; Daffodil database via JDBC. The code seem identical to the example in
&gt; the POD. Maybe there has been a change in Inline::Java that broke
&gt; JDBC?
&gt;
&gt; Dubugging:
&gt;
&gt; I hope that soem of thsi debugging may help in find the solution.
&gt; After looking into Inline::Java::Object the problem is apparently a
&gt; problem with the $args variable when
&gt; Inline::Java::Class::CastArguments is called. While digging a little
&gt; further I see that it has to do with $args and the $protos-&gt;key-
&gt;
<div class="message-stanza open">&gt; &gt;signature in this method do not have the same number of elements
</div>&gt;
&gt; &#40;args has 3 was the signature of the first proto only has 1&#41;.
&gt;
&gt; args:$VAR1 = [
&gt; &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;,
&gt; &#39;DAFFODIL&#39;,
&gt; &#39;daff0d1l&#39;
&gt; ];
&gt; protos:$VAR1 = {
&gt; &#39;java.lang.String&#39; =&gt; {
&gt; &#39;STATIC&#39; =&gt; 1,
&gt; &#39;IDX&#39; =&gt; 568,
&gt; &#39;SIGNATURE&#39; =&gt; [
&gt; &#39;java.lang.String&#39;
&gt; ]
&gt; },
&gt; &#39;java.lang.String, java.lang.String, java.lang.String&#39; =&gt; {
&gt; &#39;
&gt; STATIC&#39; =&gt; 1,
&gt; &#39;
&gt; IDX&#39; =&gt; 569,
&gt; &#39;
&gt; SIGNATURE&#39; =&gt; [
&gt;
&gt; &#39;java.lang.String&#39;,
&gt;
&gt; &#39;java.lang.String&#39;,
&gt;
&gt; &#39;java.lang.String&#39;
&gt;
&gt; ]
&gt; },
&gt; &#39;java.lang.String, java.util.Properties&#39; =&gt; {
&gt; &#39;STATIC&#39; =&gt; 1,
&gt; &#39;IDX&#39; =&gt; 567,
&gt; &#39;SIGNATURE&#39; =&gt;
&gt; [
&gt;
&gt; &#39;java.lang.String&#39;,
&gt;
&gt; &#39;java.util.Properties&#39;
&gt;
&gt; ]
&gt; }
&gt; };
&gt;
&gt;
&gt; I then traced this back to the bind_method in Java.pm where the
&gt; __validate_protype mehtod is called. But this is where I am currently
&gt; stuck. I understand the code but following it at this point is tricky.
&gt;
</div>

-- 
=====================
Patrick LeBoutillier
Laval, Québec, Canada
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;15&nbsp;08:53:16&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;15&nbsp;09:11:34&nbsp;2006</span>
    <span class="description">joe.workman [...] gs.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #21513] Java Object not properly created</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 15 Sep 2006 14:08:39 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Inline-Java [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Workman, Joe&#34; &lt;joe.workman [...] gs.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for they speedy response. I really appreciate it! Here is the output from the debug. 

Cheers
Joe 

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org] 
Sent: Friday, September 15, 2006 1:53 PM
To: Workman, Joe
Subject: Re: [rt.cpan.org #21513] Java Object not properly created


&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;

Joe,

Can you set the PERL_INLINE_JAVA_DEBUG environment variable to &#34;5&#34;
and re-run your script?

You should get a LOT of debugging info about what Inline::Java is trying to do.
From that debug info we should be albe to tell what method is in error, how many
argument have been passed and how many arguments Inline::Java thinks the method
has.

Patrick

On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt;
&gt; Fri Sep 15 08:15:47 2006: Request 21513 was acted upon.
&gt; Transaction: Ticket created by josephworkman
&gt;        Queue: Inline-Java
&gt;      Subject: Java Object not properly created
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: Important
&gt;        Owner: Nobody
&gt;   Requestors: joe.workman@gs.com
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt;
&gt;
&gt; First a disclaimer:
&gt; I am new to Inline::Java and the JDBC module, and do not know Java.
&gt; This may be a bug in Inline::Java but but I thought I would log the
&gt; bug here since I can not even make a connection to a database via
&gt; JDBC. I will also log the bug in JDBC but I think its a issue with
&gt; Inline::Java.
&gt;
&gt; Environment:
&gt; Solaris 5.8 Generic_108528-18 sun4u sparc SUNW,Ultra-80
&gt; perl v5.8.6
&gt; Inline::Java v0.51
&gt; JDBC v0.01
&gt;
&gt; The Runtime Error:
&gt;
&gt; 09-15-2006 11:04:44 INFO: Started : ovaa_alarmdef_exception
&gt; 09-15-2006 11:04:44 INFO: Version : 1.0
&gt; 09-15-2006 11:04:44 INFO: Pid : 2825
&gt; 09-15-2006 11:04:44 INFO: Loglevel : 4
&gt; 09-15-2006 11:04:44 INFO: Cmd Line :
&gt; 09-15-2006 11:04:44 INFO: Loading driver . . .
&gt; 09-15-2006 11:04:44 INFO: Successfully loaded daffodil driver!!
&gt; 09-15-2006 11:04:44 INFO: Connecting to daffodil . . .
&gt; 09-15-2006 11:04:44 FATAL: Wrong number of arguments at /opt/gsperl-
&gt; 5.8.6_1/lib/site_perl/5.8.6/sun4-solaris-thread-
&gt; multi/Inline/Java/Object.pm line 107
&gt; 09-15-2006 11:04:44 FATAL: Processing aborted!
&gt;
&gt; The Code:
&gt; use JDBC;
&gt; sub connect_to_daffodil {
&gt; $_log-&gt;info&#40;&#39;Loading driver . . . &#39;&#41;;
&gt; JDBC-&gt;load_driver&#40;&#39;in.co.daffodil.db.rmi.RmiDaffodilDBDriver&#39;&#41;;
&gt; $_log-&gt;info&#40;&#39;Successfully loaded daffodil driver!!&#39;&#41;;
&gt;
&gt; my $url = &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;;
&gt; my $user = &#39;DAFFODIL&#39;;
&gt; my $pass = &#39;daff0d1l&#39;;
&gt;
&gt; $_log-&gt;info&#40;&#39;Connecting to daffodil . . . &#39;&#41;;
&gt; my $con = JDBC-&gt;getConnection&#40;$url, $user, $pass&#41;;
&gt; $_log-&gt;info&#40;&#39;Successfully connected to daffodil!!&#39;&#41;;
&gt; return $con;
&gt; }
&gt;
&gt; Notes:
&gt;
&gt; As you can see, I am just trying to make a basic connection to a
&gt; Daffodil database via JDBC. The code seem identical to the example in
&gt; the POD. Maybe there has been a change in Inline::Java that broke
&gt; JDBC?
&gt;
&gt; Dubugging:
&gt;
&gt; I hope that soem of thsi debugging may help in find the solution.
&gt; After looking into Inline::Java::Object the problem is apparently a
&gt; problem with the $args variable when
&gt; Inline::Java::Class::CastArguments is called. While digging a little
&gt; further I see that it has to do with $args and the $protos-&gt;key-
&gt;
<div class="message-stanza open">&gt; &gt;signature in this method do not have the same number of elements
</div>&gt;
&gt; &#40;args has 3 was the signature of the first proto only has 1&#41;.
&gt;
&gt; args:$VAR1 = [
&gt; &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;,
&gt; &#39;DAFFODIL&#39;,
&gt; &#39;daff0d1l&#39;
&gt; ];
&gt; protos:$VAR1 = {
&gt; &#39;java.lang.String&#39; =&gt; {
&gt; &#39;STATIC&#39; =&gt; 1,
&gt; &#39;IDX&#39; =&gt; 568,
&gt; &#39;SIGNATURE&#39; =&gt; [
&gt; &#39;java.lang.String&#39;
&gt; ]
&gt; },
&gt; &#39;java.lang.String, java.lang.String, java.lang.String&#39; =&gt; {
&gt; &#39;
&gt; STATIC&#39; =&gt; 1,
&gt; &#39;
&gt; IDX&#39; =&gt; 569,
&gt; &#39;
&gt; SIGNATURE&#39; =&gt; [
&gt;
&gt; &#39;java.lang.String&#39;,
&gt;
&gt; &#39;java.lang.String&#39;,
&gt;
&gt; &#39;java.lang.String&#39;
&gt;
&gt; ]
&gt; },
&gt; &#39;java.lang.String, java.util.Properties&#39; =&gt; {
&gt; &#39;STATIC&#39; =&gt; 1,
&gt; &#39;IDX&#39; =&gt; 567,
&gt; &#39;SIGNATURE&#39; =&gt;
&gt; [
&gt;
&gt; &#39;java.lang.String&#39;,
&gt;
&gt; &#39;java.util.Properties&#39;
&gt;
&gt; ]
&gt; }
&gt; };
&gt;
&gt;
&gt; I then traced this back to the bind_method in Java.pm where the
&gt; __validate_protype mehtod is called. But this is where I am currently
&gt; stuck. I understand the code but following it at this point is tricky.
&gt;
</div>

-- 
=====================
Patrick LeBoutillier
Laval, Québec, Canada
</div></div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;15&nbsp;21:23:45&nbsp;2006</span>
    <span class="description">patrick.leboutillier [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21513] Java Object not properly created</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 15 Sep 2006 21:23:30 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Inline-Java [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Patrick LeBoutillier&#34; &lt;patrick.leboutillier [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Joe,

I would like to try an reproduce the bug on my station. Can you send
me the Daffodil classes or are they proprietary? If they are, can you
reproduce the bug with another JDBC driver?

Patrick


On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;        Queue: Inline-Java
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt;
&gt; Thanks for they speedy response. I really appreciate it! Here is the output from the debug.
&gt;
&gt; Cheers
&gt; Joe
&gt;
&gt; -----Original Message-----
&gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; Sent: Friday, September 15, 2006 1:53 PM
&gt; To: Workman, Joe
&gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt;
&gt;
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt;
&gt; Joe,
&gt;
&gt; Can you set the PERL_INLINE_JAVA_DEBUG environment variable to &#34;5&#34;
&gt; and re-run your script?
&gt;
&gt; You should get a LOT of debugging info about what Inline::Java is trying to do.
&gt; From that debug info we should be albe to tell what method is in error, how many
&gt; argument have been passed and how many arguments Inline::Java thinks the method
&gt; has.
&gt;
&gt; Patrick
&gt;
&gt; On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt;
&gt; &gt; Fri Sep 15 08:15:47 2006: Request 21513 was acted upon.
&gt; &gt; Transaction: Ticket created by josephworkman
&gt; &gt;        Queue: Inline-Java
&gt; &gt;      Subject: Java Object not properly created
&gt; &gt;    Broken in: &#40;no value&#41;
&gt; &gt;     Severity: Important
&gt; &gt;        Owner: Nobody
&gt; &gt;   Requestors: joe.workman@gs.com
&gt; &gt;       Status: new
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; First a disclaimer:
&gt; &gt; I am new to Inline::Java and the JDBC module, and do not know Java.
&gt; &gt; This may be a bug in Inline::Java but but I thought I would log the
&gt; &gt; bug here since I can not even make a connection to a database via
&gt; &gt; JDBC. I will also log the bug in JDBC but I think its a issue with
&gt; &gt; Inline::Java.
&gt; &gt;
&gt; &gt; Environment:
&gt; &gt; Solaris 5.8 Generic_108528-18 sun4u sparc SUNW,Ultra-80
&gt; &gt; perl v5.8.6
&gt; &gt; Inline::Java v0.51
&gt; &gt; JDBC v0.01
&gt; &gt;
&gt; &gt; The Runtime Error:
&gt; &gt;
&gt; &gt; 09-15-2006 11:04:44 INFO: Started : ovaa_alarmdef_exception
&gt; &gt; 09-15-2006 11:04:44 INFO: Version : 1.0
&gt; &gt; 09-15-2006 11:04:44 INFO: Pid : 2825
&gt; &gt; 09-15-2006 11:04:44 INFO: Loglevel : 4
&gt; &gt; 09-15-2006 11:04:44 INFO: Cmd Line :
&gt; &gt; 09-15-2006 11:04:44 INFO: Loading driver . . .
&gt; &gt; 09-15-2006 11:04:44 INFO: Successfully loaded daffodil driver!!
&gt; &gt; 09-15-2006 11:04:44 INFO: Connecting to daffodil . . .
&gt; &gt; 09-15-2006 11:04:44 FATAL: Wrong number of arguments at /opt/gsperl-
&gt; &gt; 5.8.6_1/lib/site_perl/5.8.6/sun4-solaris-thread-
&gt; &gt; multi/Inline/Java/Object.pm line 107
&gt; &gt; 09-15-2006 11:04:44 FATAL: Processing aborted!
&gt; &gt;
&gt; &gt; The Code:
&gt; &gt; use JDBC;
&gt; &gt; sub connect_to_daffodil {
&gt; &gt; $_log-&gt;info&#40;&#39;Loading driver . . . &#39;&#41;;
&gt; &gt; JDBC-&gt;load_driver&#40;&#39;in.co.daffodil.db.rmi.RmiDaffodilDBDriver&#39;&#41;;
&gt; &gt; $_log-&gt;info&#40;&#39;Successfully loaded daffodil driver!!&#39;&#41;;
&gt; &gt;
&gt; &gt; my $url = &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;;
&gt; &gt; my $user = &#39;DAFFODIL&#39;;
&gt; &gt; my $pass = &#39;daff0d1l&#39;;
&gt; &gt;
&gt; &gt; $_log-&gt;info&#40;&#39;Connecting to daffodil . . . &#39;&#41;;
&gt; &gt; my $con = JDBC-&gt;getConnection&#40;$url, $user, $pass&#41;;
&gt; &gt; $_log-&gt;info&#40;&#39;Successfully connected to daffodil!!&#39;&#41;;
&gt; &gt; return $con;
&gt; &gt; }
&gt; &gt;
&gt; &gt; Notes:
&gt; &gt;
&gt; &gt; As you can see, I am just trying to make a basic connection to a
&gt; &gt; Daffodil database via JDBC. The code seem identical to the example in
&gt; &gt; the POD. Maybe there has been a change in Inline::Java that broke
&gt; &gt; JDBC?
&gt; &gt;
&gt; &gt; Dubugging:
&gt; &gt;
&gt; &gt; I hope that soem of thsi debugging may help in find the solution.
&gt; &gt; After looking into Inline::Java::Object the problem is apparently a
&gt; &gt; problem with the $args variable when
&gt; &gt; Inline::Java::Class::CastArguments is called. While digging a little
&gt; &gt; further I see that it has to do with $args and the $protos-&gt;key-
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt;signature in this method do not have the same number of elements
</div>&gt; &gt;
&gt; &gt; &#40;args has 3 was the signature of the first proto only has 1&#41;.
&gt; &gt;
&gt; &gt; args:$VAR1 = [
&gt; &gt; &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;,
&gt; &gt; &#39;DAFFODIL&#39;,
&gt; &gt; &#39;daff0d1l&#39;
&gt; &gt; ];
&gt; &gt; protos:$VAR1 = {
&gt; &gt; &#39;java.lang.String&#39; =&gt; {
&gt; &gt; &#39;STATIC&#39; =&gt; 1,
&gt; &gt; &#39;IDX&#39; =&gt; 568,
&gt; &gt; &#39;SIGNATURE&#39; =&gt; [
&gt; &gt; &#39;java.lang.String&#39;
&gt; &gt; ]
&gt; &gt; },
&gt; &gt; &#39;java.lang.String, java.lang.String, java.lang.String&#39; =&gt; {
&gt; &gt; &#39;
&gt; &gt; STATIC&#39; =&gt; 1,
&gt; &gt; &#39;
&gt; &gt; IDX&#39; =&gt; 569,
&gt; &gt; &#39;
&gt; &gt; SIGNATURE&#39; =&gt; [
&gt; &gt;
&gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt;
&gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt;
&gt; &gt; &#39;java.lang.String&#39;
&gt; &gt;
&gt; &gt; ]
&gt; &gt; },
&gt; &gt; &#39;java.lang.String, java.util.Properties&#39; =&gt; {
&gt; &gt; &#39;STATIC&#39; =&gt; 1,
&gt; &gt; &#39;IDX&#39; =&gt; 567,
&gt; &gt; &#39;SIGNATURE&#39; =&gt;
&gt; &gt; [
&gt; &gt;
&gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt;
&gt; &gt; &#39;java.util.Properties&#39;
&gt; &gt;
&gt; &gt; ]
&gt; &gt; }
&gt; &gt; };
&gt; &gt;
&gt; &gt;
&gt; &gt; I then traced this back to the bind_method in Java.pm where the
&gt; &gt; __validate_protype mehtod is called. But this is where I am currently
&gt; &gt; stuck. I understand the code but following it at this point is tricky.
&gt; &gt;
</div>&gt;
&gt;
&gt; --
&gt; =====================
&gt; Patrick LeBoutillier
&gt; Laval, Québec, Canada
&gt;
&gt;
&gt;
&gt;
</div>

-- 
=====================
Patrick LeBoutillier
Laval, Québec, Canada
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;18&nbsp;12:29:55&nbsp;2006</span>
    <span class="description">joe.workman [...] gs.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #21513] Java Object not properly created</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 18 Sep 2006 10:22:48 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Inline-Java [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Workman, Joe&#34; &lt;joe.workman [...] gs.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">We are using the Open-source daffodil db called One$DB. You can download a version from here:

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.daffodildb.com/one-dollar-db.html">http://www.daffodildb.com/one-dollar-db.html</a></span>

I have a the jar file if you would like me to email it to you but I figured it may be easier if you just download a full copy for yourself. 

Cheers
Joe 

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org] 
Sent: Saturday, September 16, 2006 2:24 AM
To: Workman, Joe
Subject: Re: [rt.cpan.org #21513] Java Object not properly created


&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;

Joe,

I would like to try an reproduce the bug on my station. Can you send
me the Daffodil classes or are they proprietary? If they are, can you
reproduce the bug with another JDBC driver?

Patrick


On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt;
&gt;        Queue: Inline-Java
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt;
&gt; Thanks for they speedy response. I really appreciate it! Here is the output from the debug.
&gt;
&gt; Cheers
&gt; Joe
&gt;
&gt; -----Original Message-----
&gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; Sent: Friday, September 15, 2006 1:53 PM
&gt; To: Workman, Joe
&gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt;
&gt;
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt;
&gt; Joe,
&gt;
&gt; Can you set the PERL_INLINE_JAVA_DEBUG environment variable to &#34;5&#34;
&gt; and re-run your script?
&gt;
&gt; You should get a LOT of debugging info about what Inline::Java is trying to do.
&gt; From that debug info we should be albe to tell what method is in error, how many
&gt; argument have been passed and how many arguments Inline::Java thinks the method
&gt; has.
&gt;
&gt; Patrick
&gt;
&gt; On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt;
&gt; &gt; Fri Sep 15 08:15:47 2006: Request 21513 was acted upon.
&gt; &gt; Transaction: Ticket created by josephworkman
&gt; &gt;        Queue: Inline-Java
&gt; &gt;      Subject: Java Object not properly created
&gt; &gt;    Broken in: &#40;no value&#41;
&gt; &gt;     Severity: Important
&gt; &gt;        Owner: Nobody
&gt; &gt;   Requestors: joe.workman@gs.com
&gt; &gt;       Status: new
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; First a disclaimer:
&gt; &gt; I am new to Inline::Java and the JDBC module, and do not know Java.
&gt; &gt; This may be a bug in Inline::Java but but I thought I would log the
&gt; &gt; bug here since I can not even make a connection to a database via
&gt; &gt; JDBC. I will also log the bug in JDBC but I think its a issue with
&gt; &gt; Inline::Java.
&gt; &gt;
&gt; &gt; Environment:
&gt; &gt; Solaris 5.8 Generic_108528-18 sun4u sparc SUNW,Ultra-80
&gt; &gt; perl v5.8.6
&gt; &gt; Inline::Java v0.51
&gt; &gt; JDBC v0.01
&gt; &gt;
&gt; &gt; The Runtime Error:
&gt; &gt;
&gt; &gt; 09-15-2006 11:04:44 INFO: Started : ovaa_alarmdef_exception
&gt; &gt; 09-15-2006 11:04:44 INFO: Version : 1.0
&gt; &gt; 09-15-2006 11:04:44 INFO: Pid : 2825
&gt; &gt; 09-15-2006 11:04:44 INFO: Loglevel : 4
&gt; &gt; 09-15-2006 11:04:44 INFO: Cmd Line :
&gt; &gt; 09-15-2006 11:04:44 INFO: Loading driver . . .
&gt; &gt; 09-15-2006 11:04:44 INFO: Successfully loaded daffodil driver!!
&gt; &gt; 09-15-2006 11:04:44 INFO: Connecting to daffodil . . .
&gt; &gt; 09-15-2006 11:04:44 FATAL: Wrong number of arguments at /opt/gsperl-
&gt; &gt; 5.8.6_1/lib/site_perl/5.8.6/sun4-solaris-thread-
&gt; &gt; multi/Inline/Java/Object.pm line 107
&gt; &gt; 09-15-2006 11:04:44 FATAL: Processing aborted!
&gt; &gt;
&gt; &gt; The Code:
&gt; &gt; use JDBC;
&gt; &gt; sub connect_to_daffodil {
&gt; &gt; $_log-&gt;info&#40;&#39;Loading driver . . . &#39;&#41;;
&gt; &gt; JDBC-&gt;load_driver&#40;&#39;in.co.daffodil.db.rmi.RmiDaffodilDBDriver&#39;&#41;;
&gt; &gt; $_log-&gt;info&#40;&#39;Successfully loaded daffodil driver!!&#39;&#41;;
&gt; &gt;
&gt; &gt; my $url = &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;;
&gt; &gt; my $user = &#39;DAFFODIL&#39;;
&gt; &gt; my $pass = &#39;daff0d1l&#39;;
&gt; &gt;
&gt; &gt; $_log-&gt;info&#40;&#39;Connecting to daffodil . . . &#39;&#41;;
&gt; &gt; my $con = JDBC-&gt;getConnection&#40;$url, $user, $pass&#41;;
&gt; &gt; $_log-&gt;info&#40;&#39;Successfully connected to daffodil!!&#39;&#41;;
&gt; &gt; return $con;
&gt; &gt; }
&gt; &gt;
&gt; &gt; Notes:
&gt; &gt;
&gt; &gt; As you can see, I am just trying to make a basic connection to a
&gt; &gt; Daffodil database via JDBC. The code seem identical to the example in
&gt; &gt; the POD. Maybe there has been a change in Inline::Java that broke
&gt; &gt; JDBC?
&gt; &gt;
&gt; &gt; Dubugging:
&gt; &gt;
&gt; &gt; I hope that soem of thsi debugging may help in find the solution.
&gt; &gt; After looking into Inline::Java::Object the problem is apparently a
&gt; &gt; problem with the $args variable when
&gt; &gt; Inline::Java::Class::CastArguments is called. While digging a little
&gt; &gt; further I see that it has to do with $args and the $protos-&gt;key-
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt;signature in this method do not have the same number of elements
</div>&gt; &gt;
&gt; &gt; &#40;args has 3 was the signature of the first proto only has 1&#41;.
&gt; &gt;
&gt; &gt; args:$VAR1 = [
&gt; &gt; &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;,
&gt; &gt; &#39;DAFFODIL&#39;,
&gt; &gt; &#39;daff0d1l&#39;
&gt; &gt; ];
&gt; &gt; protos:$VAR1 = {
&gt; &gt; &#39;java.lang.String&#39; =&gt; {
&gt; &gt; &#39;STATIC&#39; =&gt; 1,
&gt; &gt; &#39;IDX&#39; =&gt; 568,
&gt; &gt; &#39;SIGNATURE&#39; =&gt; [
&gt; &gt; &#39;java.lang.String&#39;
&gt; &gt; ]
&gt; &gt; },
&gt; &gt; &#39;java.lang.String, java.lang.String, java.lang.String&#39; =&gt; {
&gt; &gt; &#39;
&gt; &gt; STATIC&#39; =&gt; 1,
&gt; &gt; &#39;
&gt; &gt; IDX&#39; =&gt; 569,
&gt; &gt; &#39;
&gt; &gt; SIGNATURE&#39; =&gt; [
&gt; &gt;
&gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt;
&gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt;
&gt; &gt; &#39;java.lang.String&#39;
&gt; &gt;
&gt; &gt; ]
&gt; &gt; },
&gt; &gt; &#39;java.lang.String, java.util.Properties&#39; =&gt; {
&gt; &gt; &#39;STATIC&#39; =&gt; 1,
&gt; &gt; &#39;IDX&#39; =&gt; 567,
&gt; &gt; &#39;SIGNATURE&#39; =&gt;
&gt; &gt; [
&gt; &gt;
&gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt;
&gt; &gt; &#39;java.util.Properties&#39;
&gt; &gt;
&gt; &gt; ]
&gt; &gt; }
&gt; &gt; };
&gt; &gt;
&gt; &gt;
&gt; &gt; I then traced this back to the bind_method in Java.pm where the
&gt; &gt; __validate_protype mehtod is called. But this is where I am currently
&gt; &gt; stuck. I understand the code but following it at this point is tricky.
&gt; &gt;
</div>&gt;
&gt;
&gt; --
&gt; =====================
&gt; Patrick LeBoutillier
&gt; Laval, Québec, Canada
&gt;
&gt;
&gt;
&gt;
</div>

-- 
=====================
Patrick LeBoutillier
Laval, Québec, Canada
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;18&nbsp;18:49:16&nbsp;2006</span>
    <span class="description">patrick.leboutillier [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21513] Java Object not properly created</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 18 Sep 2006 18:48:59 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Inline-Java [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Patrick LeBoutillier&#34; &lt;patrick.leboutillier [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Joe,

In ran the following script:

=====
use strict ;

use JDBC ;

JDBC-&gt;load_driver&#40;&#39;in.co.daffodil.db.rmi.RmiDaffodilDBDriver&#39;&#41;;
warn &#34;driver loaded&#34; ;

my $url = &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;;
my $user = &#39;DAFFODIL&#39;;
my $pass = &#39;daff0d1l&#39;;

eval {
        warn &#34;getting connection&#34; ;
        my $con = JDBC-&gt;getConnection&#40;$url, $user, $pass&#41;;
} ;
die $@-&gt;getMessage&#40;&#41; if $@  ;
=====

And got the following output:

driver loaded at daff.pl line 6, &lt;GEN18&gt; line 5.
getting connection at daff.pl line 13, &lt;GEN18&gt; line 5.
java.rmi.ConnectException: Connection refused to host: localhost;
nested exception is:
        java.net.ConnectException: Connection refused at daff.pl line
16, &lt;GEN18&gt; line 9.

This is normal since I don&#39;t have a Daffodil server running, but
what&#39;s strange is that it managed to call the getConnection method
without problems. I&#39;m running Inline::Java 0.51 with perl 5.8.5 on
Linux x86.

Can you try my test script and see if you get the same result?

Patrick


On 9/18/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;        Queue: Inline-Java
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt;
&gt; We are using the Open-source daffodil db called One$DB. You can download a version from here:
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.daffodildb.com/one-dollar-db.html">http://www.daffodildb.com/one-dollar-db.html</a></span>
&gt;
&gt; I have a the jar file if you would like me to email it to you but I figured it may be easier if you just download a full copy for yourself.
&gt;
&gt; Cheers
&gt; Joe
&gt;
&gt; -----Original Message-----
&gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; Sent: Saturday, September 16, 2006 2:24 AM
&gt; To: Workman, Joe
&gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt;
&gt;
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt;
&gt; Joe,
&gt;
&gt; I would like to try an reproduce the bug on my station. Can you send
&gt; me the Daffodil classes or are they proprietary? If they are, can you
&gt; reproduce the bug with another JDBC driver?
&gt;
&gt; Patrick
&gt;
&gt;
&gt; On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt;
&gt; &gt;        Queue: Inline-Java
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt;
&gt; &gt; Thanks for they speedy response. I really appreciate it! Here is the output from the debug.
&gt; &gt;
&gt; &gt; Cheers
&gt; &gt; Joe
&gt; &gt;
&gt; &gt; -----Original Message-----
&gt; &gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; &gt; Sent: Friday, September 15, 2006 1:53 PM
&gt; &gt; To: Workman, Joe
&gt; &gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt; &gt;
&gt; &gt;
&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt;
&gt; &gt; Joe,
&gt; &gt;
&gt; &gt; Can you set the PERL_INLINE_JAVA_DEBUG environment variable to &#34;5&#34;
&gt; &gt; and re-run your script?
&gt; &gt;
&gt; &gt; You should get a LOT of debugging info about what Inline::Java is trying to do.
&gt; &gt; From that debug info we should be albe to tell what method is in error, how many
&gt; &gt; argument have been passed and how many arguments Inline::Java thinks the method
&gt; &gt; has.
&gt; &gt;
&gt; &gt; Patrick
&gt; &gt;
&gt; &gt; On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt; Fri Sep 15 08:15:47 2006: Request 21513 was acted upon.
&gt; &gt; &gt; Transaction: Ticket created by josephworkman
&gt; &gt; &gt;        Queue: Inline-Java
&gt; &gt; &gt;      Subject: Java Object not properly created
&gt; &gt; &gt;    Broken in: &#40;no value&#41;
&gt; &gt; &gt;     Severity: Important
&gt; &gt; &gt;        Owner: Nobody
&gt; &gt; &gt;   Requestors: joe.workman@gs.com
&gt; &gt; &gt;       Status: new
&gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; First a disclaimer:
&gt; &gt; &gt; I am new to Inline::Java and the JDBC module, and do not know Java.
&gt; &gt; &gt; This may be a bug in Inline::Java but but I thought I would log the
&gt; &gt; &gt; bug here since I can not even make a connection to a database via
&gt; &gt; &gt; JDBC. I will also log the bug in JDBC but I think its a issue with
&gt; &gt; &gt; Inline::Java.
&gt; &gt; &gt;
&gt; &gt; &gt; Environment:
&gt; &gt; &gt; Solaris 5.8 Generic_108528-18 sun4u sparc SUNW,Ultra-80
&gt; &gt; &gt; perl v5.8.6
&gt; &gt; &gt; Inline::Java v0.51
&gt; &gt; &gt; JDBC v0.01
&gt; &gt; &gt;
&gt; &gt; &gt; The Runtime Error:
&gt; &gt; &gt;
&gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Started : ovaa_alarmdef_exception
&gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Version : 1.0
&gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Pid : 2825
&gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Loglevel : 4
&gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Cmd Line :
&gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Loading driver . . .
&gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Successfully loaded daffodil driver!!
&gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Connecting to daffodil . . .
&gt; &gt; &gt; 09-15-2006 11:04:44 FATAL: Wrong number of arguments at /opt/gsperl-
&gt; &gt; &gt; 5.8.6_1/lib/site_perl/5.8.6/sun4-solaris-thread-
&gt; &gt; &gt; multi/Inline/Java/Object.pm line 107
&gt; &gt; &gt; 09-15-2006 11:04:44 FATAL: Processing aborted!
&gt; &gt; &gt;
&gt; &gt; &gt; The Code:
&gt; &gt; &gt; use JDBC;
&gt; &gt; &gt; sub connect_to_daffodil {
&gt; &gt; &gt; $_log-&gt;info&#40;&#39;Loading driver . . . &#39;&#41;;
&gt; &gt; &gt; JDBC-&gt;load_driver&#40;&#39;in.co.daffodil.db.rmi.RmiDaffodilDBDriver&#39;&#41;;
&gt; &gt; &gt; $_log-&gt;info&#40;&#39;Successfully loaded daffodil driver!!&#39;&#41;;
&gt; &gt; &gt;
&gt; &gt; &gt; my $url = &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;;
&gt; &gt; &gt; my $user = &#39;DAFFODIL&#39;;
&gt; &gt; &gt; my $pass = &#39;daff0d1l&#39;;
&gt; &gt; &gt;
&gt; &gt; &gt; $_log-&gt;info&#40;&#39;Connecting to daffodil . . . &#39;&#41;;
&gt; &gt; &gt; my $con = JDBC-&gt;getConnection&#40;$url, $user, $pass&#41;;
&gt; &gt; &gt; $_log-&gt;info&#40;&#39;Successfully connected to daffodil!!&#39;&#41;;
&gt; &gt; &gt; return $con;
&gt; &gt; &gt; }
&gt; &gt; &gt;
&gt; &gt; &gt; Notes:
&gt; &gt; &gt;
&gt; &gt; &gt; As you can see, I am just trying to make a basic connection to a
&gt; &gt; &gt; Daffodil database via JDBC. The code seem identical to the example in
&gt; &gt; &gt; the POD. Maybe there has been a change in Inline::Java that broke
&gt; &gt; &gt; JDBC?
&gt; &gt; &gt;
&gt; &gt; &gt; Dubugging:
&gt; &gt; &gt;
&gt; &gt; &gt; I hope that soem of thsi debugging may help in find the solution.
&gt; &gt; &gt; After looking into Inline::Java::Object the problem is apparently a
&gt; &gt; &gt; problem with the $args variable when
&gt; &gt; &gt; Inline::Java::Class::CastArguments is called. While digging a little
&gt; &gt; &gt; further I see that it has to do with $args and the $protos-&gt;key-
&gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt;signature in this method do not have the same number of elements
</div>&gt; &gt; &gt;
&gt; &gt; &gt; &#40;args has 3 was the signature of the first proto only has 1&#41;.
&gt; &gt; &gt;
&gt; &gt; &gt; args:$VAR1 = [
&gt; &gt; &gt; &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;,
&gt; &gt; &gt; &#39;DAFFODIL&#39;,
&gt; &gt; &gt; &#39;daff0d1l&#39;
&gt; &gt; &gt; ];
&gt; &gt; &gt; protos:$VAR1 = {
&gt; &gt; &gt; &#39;java.lang.String&#39; =&gt; {
&gt; &gt; &gt; &#39;STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &#39;IDX&#39; =&gt; 568,
&gt; &gt; &gt; &#39;SIGNATURE&#39; =&gt; [
&gt; &gt; &gt; &#39;java.lang.String&#39;
&gt; &gt; &gt; ]
&gt; &gt; &gt; },
&gt; &gt; &gt; &#39;java.lang.String, java.lang.String, java.lang.String&#39; =&gt; {
&gt; &gt; &gt; &#39;
&gt; &gt; &gt; STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &#39;
&gt; &gt; &gt; IDX&#39; =&gt; 569,
&gt; &gt; &gt; &#39;
&gt; &gt; &gt; SIGNATURE&#39; =&gt; [
&gt; &gt; &gt;
&gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt;
&gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt;
&gt; &gt; &gt; &#39;java.lang.String&#39;
&gt; &gt; &gt;
&gt; &gt; &gt; ]
&gt; &gt; &gt; },
&gt; &gt; &gt; &#39;java.lang.String, java.util.Properties&#39; =&gt; {
&gt; &gt; &gt; &#39;STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &#39;IDX&#39; =&gt; 567,
&gt; &gt; &gt; &#39;SIGNATURE&#39; =&gt;
&gt; &gt; &gt; [
&gt; &gt; &gt;
&gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt;
&gt; &gt; &gt; &#39;java.util.Properties&#39;
&gt; &gt; &gt;
&gt; &gt; &gt; ]
&gt; &gt; &gt; }
&gt; &gt; &gt; };
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; I then traced this back to the bind_method in Java.pm where the
&gt; &gt; &gt; __validate_protype mehtod is called. But this is where I am currently
&gt; &gt; &gt; stuck. I understand the code but following it at this point is tricky.
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; =====================
&gt; &gt; Patrick LeBoutillier
&gt; &gt; Laval, Québec, Canada
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
</div>&gt;
&gt;
&gt; --
&gt; =====================
&gt; Patrick LeBoutillier
&gt; Laval, Québec, Canada
&gt;
&gt;
</div>

-- 
=====================
Patrick LeBoutillier
Laval, Québec, Canada
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;19&nbsp;13:23:53&nbsp;2006</span>
    <span class="description">joe.workman [...] gs.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #21513] Java Object not properly created</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 19 Sep 2006 18:23:26 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Inline-Java [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Workman, Joe&#34; &lt;joe.workman [...] gs.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Well your code works . . . From there I did figure out that what was causing my code to bomb was a signal handler. I had this:

$SIG{&#39;__DIE__&#39;} = \&#38;death_handler ;

Why would this signal handler cause problems? When I comment this line out, everything works great! I really appreciate the help! Is there any way that I can keep my signal handler? I could just localize it inside an eval block. Is that the best way?

Cheers
Joe 

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org] 
Sent: Monday, September 18, 2006 11:49 PM
To: Workman, Joe
Subject: Re: [rt.cpan.org #21513] Java Object not properly created


&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;

Joe,

In ran the following script:

=====
use strict ;

use JDBC ;

JDBC-&gt;load_driver&#40;&#39;in.co.daffodil.db.rmi.RmiDaffodilDBDriver&#39;&#41;;
warn &#34;driver loaded&#34; ;

my $url = &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;;
my $user = &#39;DAFFODIL&#39;;
my $pass = &#39;daff0d1l&#39;;

eval {
        warn &#34;getting connection&#34; ;
        my $con = JDBC-&gt;getConnection&#40;$url, $user, $pass&#41;;
} ;
die $@-&gt;getMessage&#40;&#41; if $@  ;
=====

And got the following output:

driver loaded at daff.pl line 6, &lt;GEN18&gt; line 5.
getting connection at daff.pl line 13, &lt;GEN18&gt; line 5.
java.rmi.ConnectException: Connection refused to host: localhost;
nested exception is:
        java.net.ConnectException: Connection refused at daff.pl line
16, &lt;GEN18&gt; line 9.

This is normal since I don&#39;t have a Daffodil server running, but
what&#39;s strange is that it managed to call the getConnection method
without problems. I&#39;m running Inline::Java 0.51 with perl 5.8.5 on
Linux x86.

Can you try my test script and see if you get the same result?

Patrick


On 9/18/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt;
&gt;        Queue: Inline-Java
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt;
&gt; We are using the Open-source daffodil db called One$DB. You can download a version from here:
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.daffodildb.com/one-dollar-db.html">http://www.daffodildb.com/one-dollar-db.html</a></span>
&gt;
&gt; I have a the jar file if you would like me to email it to you but I figured it may be easier if you just download a full copy for yourself.
&gt;
&gt; Cheers
&gt; Joe
&gt;
&gt; -----Original Message-----
&gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; Sent: Saturday, September 16, 2006 2:24 AM
&gt; To: Workman, Joe
&gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt;
&gt;
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt;
&gt; Joe,
&gt;
&gt; I would like to try an reproduce the bug on my station. Can you send
&gt; me the Daffodil classes or are they proprietary? If they are, can you
&gt; reproduce the bug with another JDBC driver?
&gt;
&gt; Patrick
&gt;
&gt;
&gt; On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt;
&gt; &gt;        Queue: Inline-Java
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt;
&gt; &gt; Thanks for they speedy response. I really appreciate it! Here is the output from the debug.
&gt; &gt;
&gt; &gt; Cheers
&gt; &gt; Joe
&gt; &gt;
&gt; &gt; -----Original Message-----
&gt; &gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; &gt; Sent: Friday, September 15, 2006 1:53 PM
&gt; &gt; To: Workman, Joe
&gt; &gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt; &gt;
&gt; &gt;
&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt;
&gt; &gt; Joe,
&gt; &gt;
&gt; &gt; Can you set the PERL_INLINE_JAVA_DEBUG environment variable to &#34;5&#34;
&gt; &gt; and re-run your script?
&gt; &gt;
&gt; &gt; You should get a LOT of debugging info about what Inline::Java is trying to do.
&gt; &gt; From that debug info we should be albe to tell what method is in error, how many
&gt; &gt; argument have been passed and how many arguments Inline::Java thinks the method
&gt; &gt; has.
&gt; &gt;
&gt; &gt; Patrick
&gt; &gt;
&gt; &gt; On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt; Fri Sep 15 08:15:47 2006: Request 21513 was acted upon.
&gt; &gt; &gt; Transaction: Ticket created by josephworkman
&gt; &gt; &gt;        Queue: Inline-Java
&gt; &gt; &gt;      Subject: Java Object not properly created
&gt; &gt; &gt;    Broken in: &#40;no value&#41;
&gt; &gt; &gt;     Severity: Important
&gt; &gt; &gt;        Owner: Nobody
&gt; &gt; &gt;   Requestors: joe.workman@gs.com
&gt; &gt; &gt;       Status: new
&gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; First a disclaimer:
&gt; &gt; &gt; I am new to Inline::Java and the JDBC module, and do not know Java.
&gt; &gt; &gt; This may be a bug in Inline::Java but but I thought I would log the
&gt; &gt; &gt; bug here since I can not even make a connection to a database via
&gt; &gt; &gt; JDBC. I will also log the bug in JDBC but I think its a issue with
&gt; &gt; &gt; Inline::Java.
&gt; &gt; &gt;
&gt; &gt; &gt; Environment:
&gt; &gt; &gt; Solaris 5.8 Generic_108528-18 sun4u sparc SUNW,Ultra-80
&gt; &gt; &gt; perl v5.8.6
&gt; &gt; &gt; Inline::Java v0.51
&gt; &gt; &gt; JDBC v0.01
&gt; &gt; &gt;
&gt; &gt; &gt; The Runtime Error:
&gt; &gt; &gt;
&gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Started : ovaa_alarmdef_exception
&gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Version : 1.0
&gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Pid : 2825
&gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Loglevel : 4
&gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Cmd Line :
&gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Loading driver . . .
&gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Successfully loaded daffodil driver!!
&gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Connecting to daffodil . . .
&gt; &gt; &gt; 09-15-2006 11:04:44 FATAL: Wrong number of arguments at /opt/gsperl-
&gt; &gt; &gt; 5.8.6_1/lib/site_perl/5.8.6/sun4-solaris-thread-
&gt; &gt; &gt; multi/Inline/Java/Object.pm line 107
&gt; &gt; &gt; 09-15-2006 11:04:44 FATAL: Processing aborted!
&gt; &gt; &gt;
&gt; &gt; &gt; The Code:
&gt; &gt; &gt; use JDBC;
&gt; &gt; &gt; sub connect_to_daffodil {
&gt; &gt; &gt; $_log-&gt;info&#40;&#39;Loading driver . . . &#39;&#41;;
&gt; &gt; &gt; JDBC-&gt;load_driver&#40;&#39;in.co.daffodil.db.rmi.RmiDaffodilDBDriver&#39;&#41;;
&gt; &gt; &gt; $_log-&gt;info&#40;&#39;Successfully loaded daffodil driver!!&#39;&#41;;
&gt; &gt; &gt;
&gt; &gt; &gt; my $url = &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;;
&gt; &gt; &gt; my $user = &#39;DAFFODIL&#39;;
&gt; &gt; &gt; my $pass = &#39;daff0d1l&#39;;
&gt; &gt; &gt;
&gt; &gt; &gt; $_log-&gt;info&#40;&#39;Connecting to daffodil . . . &#39;&#41;;
&gt; &gt; &gt; my $con = JDBC-&gt;getConnection&#40;$url, $user, $pass&#41;;
&gt; &gt; &gt; $_log-&gt;info&#40;&#39;Successfully connected to daffodil!!&#39;&#41;;
&gt; &gt; &gt; return $con;
&gt; &gt; &gt; }
&gt; &gt; &gt;
&gt; &gt; &gt; Notes:
&gt; &gt; &gt;
&gt; &gt; &gt; As you can see, I am just trying to make a basic connection to a
&gt; &gt; &gt; Daffodil database via JDBC. The code seem identical to the example in
&gt; &gt; &gt; the POD. Maybe there has been a change in Inline::Java that broke
&gt; &gt; &gt; JDBC?
&gt; &gt; &gt;
&gt; &gt; &gt; Dubugging:
&gt; &gt; &gt;
&gt; &gt; &gt; I hope that soem of thsi debugging may help in find the solution.
&gt; &gt; &gt; After looking into Inline::Java::Object the problem is apparently a
&gt; &gt; &gt; problem with the $args variable when
&gt; &gt; &gt; Inline::Java::Class::CastArguments is called. While digging a little
&gt; &gt; &gt; further I see that it has to do with $args and the $protos-&gt;key-
&gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt;signature in this method do not have the same number of elements
</div>&gt; &gt; &gt;
&gt; &gt; &gt; &#40;args has 3 was the signature of the first proto only has 1&#41;.
&gt; &gt; &gt;
&gt; &gt; &gt; args:$VAR1 = [
&gt; &gt; &gt; &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;,
&gt; &gt; &gt; &#39;DAFFODIL&#39;,
&gt; &gt; &gt; &#39;daff0d1l&#39;
&gt; &gt; &gt; ];
&gt; &gt; &gt; protos:$VAR1 = {
&gt; &gt; &gt; &#39;java.lang.String&#39; =&gt; {
&gt; &gt; &gt; &#39;STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &#39;IDX&#39; =&gt; 568,
&gt; &gt; &gt; &#39;SIGNATURE&#39; =&gt; [
&gt; &gt; &gt; &#39;java.lang.String&#39;
&gt; &gt; &gt; ]
&gt; &gt; &gt; },
&gt; &gt; &gt; &#39;java.lang.String, java.lang.String, java.lang.String&#39; =&gt; {
&gt; &gt; &gt; &#39;
&gt; &gt; &gt; STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &#39;
&gt; &gt; &gt; IDX&#39; =&gt; 569,
&gt; &gt; &gt; &#39;
&gt; &gt; &gt; SIGNATURE&#39; =&gt; [
&gt; &gt; &gt;
&gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt;
&gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt;
&gt; &gt; &gt; &#39;java.lang.String&#39;
&gt; &gt; &gt;
&gt; &gt; &gt; ]
&gt; &gt; &gt; },
&gt; &gt; &gt; &#39;java.lang.String, java.util.Properties&#39; =&gt; {
&gt; &gt; &gt; &#39;STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &#39;IDX&#39; =&gt; 567,
&gt; &gt; &gt; &#39;SIGNATURE&#39; =&gt;
&gt; &gt; &gt; [
&gt; &gt; &gt;
&gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt;
&gt; &gt; &gt; &#39;java.util.Properties&#39;
&gt; &gt; &gt;
&gt; &gt; &gt; ]
&gt; &gt; &gt; }
&gt; &gt; &gt; };
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; I then traced this back to the bind_method in Java.pm where the
&gt; &gt; &gt; __validate_protype mehtod is called. But this is where I am currently
&gt; &gt; &gt; stuck. I understand the code but following it at this point is tricky.
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; =====================
&gt; &gt; Patrick LeBoutillier
&gt; &gt; Laval, Québec, Canada
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
</div>&gt;
&gt;
&gt; --
&gt; =====================
&gt; Patrick LeBoutillier
&gt; Laval, Québec, Canada
&gt;
&gt;
</div>

-- 
=====================
Patrick LeBoutillier
Laval, Québec, Canada
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;19&nbsp;13:38:33&nbsp;2006</span>
    <span class="description">patrick.leboutillier [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21513] Java Object not properly created</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 19 Sep 2006 13:38:13 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Inline-Java [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Patrick LeBoutillier&#34; &lt;patrick.leboutillier [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Joe,

After the fact I realized that that could be the problem. Inside the
Inline::Java code there
are quite a few calls that are eval&#39;ed:

eval {
};
if &#40;$@&#41;{
   # ...
}

Unfortunately, these exceptions will trigger $SIG{&#39;__DIE__&#39;} handlers
&#40;even if they are caught&#41;. I suppose Inline::Java could localize
$SIG{&#39;__DIE__&#39;} all over the place to protect against this, I&#39;ll ask
around and see what the best practice is.


Cheers,

Patrick


On 9/19/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;        Queue: Inline-Java
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt;
&gt; Well your code works . . . From there I did figure out that what was causing my code to bomb was a signal handler. I had this:
&gt;
&gt; $SIG{&#39;__DIE__&#39;} = \&#38;death_handler ;
&gt;
&gt; Why would this signal handler cause problems? When I comment this line out, everything works great! I really appreciate the help! Is there any way that I can keep my signal handler? I could just localize it inside an eval block. Is that the best way?
&gt;
&gt; Cheers
&gt; Joe
&gt;
&gt; -----Original Message-----
&gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; Sent: Monday, September 18, 2006 11:49 PM
&gt; To: Workman, Joe
&gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt;
&gt;
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt;
&gt; Joe,
&gt;
&gt; In ran the following script:
&gt;
&gt; =====
&gt; use strict ;
&gt;
&gt; use JDBC ;
&gt;
&gt; JDBC-&gt;load_driver&#40;&#39;in.co.daffodil.db.rmi.RmiDaffodilDBDriver&#39;&#41;;
&gt; warn &#34;driver loaded&#34; ;
&gt;
&gt; my $url = &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;;
&gt; my $user = &#39;DAFFODIL&#39;;
&gt; my $pass = &#39;daff0d1l&#39;;
&gt;
&gt; eval {
&gt;         warn &#34;getting connection&#34; ;
&gt;         my $con = JDBC-&gt;getConnection&#40;$url, $user, $pass&#41;;
&gt; } ;
&gt; die $@-&gt;getMessage&#40;&#41; if $@  ;
&gt; =====
&gt;
&gt; And got the following output:
&gt;
&gt; driver loaded at daff.pl line 6, &lt;GEN18&gt; line 5.
&gt; getting connection at daff.pl line 13, &lt;GEN18&gt; line 5.
&gt; java.rmi.ConnectException: Connection refused to host: localhost;
&gt; nested exception is:
&gt;         java.net.ConnectException: Connection refused at daff.pl line
&gt; 16, &lt;GEN18&gt; line 9.
&gt;
&gt; This is normal since I don&#39;t have a Daffodil server running, but
&gt; what&#39;s strange is that it managed to call the getConnection method
&gt; without problems. I&#39;m running Inline::Java 0.51 with perl 5.8.5 on
&gt; Linux x86.
&gt;
&gt; Can you try my test script and see if you get the same result?
&gt;
&gt; Patrick
&gt;
&gt;
&gt; On 9/18/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt;
&gt; &gt;        Queue: Inline-Java
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt;
&gt; &gt; We are using the Open-source daffodil db called One$DB. You can download a version from here:
&gt; &gt;
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.daffodildb.com/one-dollar-db.html">http://www.daffodildb.com/one-dollar-db.html</a></span>
&gt; &gt;
&gt; &gt; I have a the jar file if you would like me to email it to you but I figured it may be easier if you just download a full copy for yourself.
&gt; &gt;
&gt; &gt; Cheers
&gt; &gt; Joe
&gt; &gt;
&gt; &gt; -----Original Message-----
&gt; &gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; &gt; Sent: Saturday, September 16, 2006 2:24 AM
&gt; &gt; To: Workman, Joe
&gt; &gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt; &gt;
&gt; &gt;
&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt;
&gt; &gt; Joe,
&gt; &gt;
&gt; &gt; I would like to try an reproduce the bug on my station. Can you send
&gt; &gt; me the Daffodil classes or are they proprietary? If they are, can you
&gt; &gt; reproduce the bug with another JDBC driver?
&gt; &gt;
&gt; &gt; Patrick
&gt; &gt;
&gt; &gt;
&gt; &gt; On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt;        Queue: Inline-Java
&gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Thanks for they speedy response. I really appreciate it! Here is the output from the debug.
&gt; &gt; &gt;
&gt; &gt; &gt; Cheers
&gt; &gt; &gt; Joe
&gt; &gt; &gt;
&gt; &gt; &gt; -----Original Message-----
&gt; &gt; &gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; &gt; &gt; Sent: Friday, September 15, 2006 1:53 PM
&gt; &gt; &gt; To: Workman, Joe
&gt; &gt; &gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Joe,
&gt; &gt; &gt;
&gt; &gt; &gt; Can you set the PERL_INLINE_JAVA_DEBUG environment variable to &#34;5&#34;
&gt; &gt; &gt; and re-run your script?
&gt; &gt; &gt;
&gt; &gt; &gt; You should get a LOT of debugging info about what Inline::Java is trying to do.
&gt; &gt; &gt; From that debug info we should be albe to tell what method is in error, how many
&gt; &gt; &gt; argument have been passed and how many arguments Inline::Java thinks the method
&gt; &gt; &gt; has.
&gt; &gt; &gt;
&gt; &gt; &gt; Patrick
&gt; &gt; &gt;
&gt; &gt; &gt; On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Fri Sep 15 08:15:47 2006: Request 21513 was acted upon.
&gt; &gt; &gt; &gt; Transaction: Ticket created by josephworkman
&gt; &gt; &gt; &gt;        Queue: Inline-Java
&gt; &gt; &gt; &gt;      Subject: Java Object not properly created
&gt; &gt; &gt; &gt;    Broken in: &#40;no value&#41;
&gt; &gt; &gt; &gt;     Severity: Important
&gt; &gt; &gt; &gt;        Owner: Nobody
&gt; &gt; &gt; &gt;   Requestors: joe.workman@gs.com
&gt; &gt; &gt; &gt;       Status: new
&gt; &gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; First a disclaimer:
&gt; &gt; &gt; &gt; I am new to Inline::Java and the JDBC module, and do not know Java.
&gt; &gt; &gt; &gt; This may be a bug in Inline::Java but but I thought I would log the
&gt; &gt; &gt; &gt; bug here since I can not even make a connection to a database via
&gt; &gt; &gt; &gt; JDBC. I will also log the bug in JDBC but I think its a issue with
&gt; &gt; &gt; &gt; Inline::Java.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Environment:
&gt; &gt; &gt; &gt; Solaris 5.8 Generic_108528-18 sun4u sparc SUNW,Ultra-80
&gt; &gt; &gt; &gt; perl v5.8.6
&gt; &gt; &gt; &gt; Inline::Java v0.51
&gt; &gt; &gt; &gt; JDBC v0.01
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; The Runtime Error:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Started : ovaa_alarmdef_exception
&gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Version : 1.0
&gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Pid : 2825
&gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Loglevel : 4
&gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Cmd Line :
&gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Loading driver . . .
&gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Successfully loaded daffodil driver!!
&gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Connecting to daffodil . . .
&gt; &gt; &gt; &gt; 09-15-2006 11:04:44 FATAL: Wrong number of arguments at /opt/gsperl-
&gt; &gt; &gt; &gt; 5.8.6_1/lib/site_perl/5.8.6/sun4-solaris-thread-
&gt; &gt; &gt; &gt; multi/Inline/Java/Object.pm line 107
&gt; &gt; &gt; &gt; 09-15-2006 11:04:44 FATAL: Processing aborted!
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; The Code:
&gt; &gt; &gt; &gt; use JDBC;
&gt; &gt; &gt; &gt; sub connect_to_daffodil {
&gt; &gt; &gt; &gt; $_log-&gt;info&#40;&#39;Loading driver . . . &#39;&#41;;
&gt; &gt; &gt; &gt; JDBC-&gt;load_driver&#40;&#39;in.co.daffodil.db.rmi.RmiDaffodilDBDriver&#39;&#41;;
&gt; &gt; &gt; &gt; $_log-&gt;info&#40;&#39;Successfully loaded daffodil driver!!&#39;&#41;;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; my $url = &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;;
&gt; &gt; &gt; &gt; my $user = &#39;DAFFODIL&#39;;
&gt; &gt; &gt; &gt; my $pass = &#39;daff0d1l&#39;;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; $_log-&gt;info&#40;&#39;Connecting to daffodil . . . &#39;&#41;;
&gt; &gt; &gt; &gt; my $con = JDBC-&gt;getConnection&#40;$url, $user, $pass&#41;;
&gt; &gt; &gt; &gt; $_log-&gt;info&#40;&#39;Successfully connected to daffodil!!&#39;&#41;;
&gt; &gt; &gt; &gt; return $con;
&gt; &gt; &gt; &gt; }
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Notes:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; As you can see, I am just trying to make a basic connection to a
&gt; &gt; &gt; &gt; Daffodil database via JDBC. The code seem identical to the example in
&gt; &gt; &gt; &gt; the POD. Maybe there has been a change in Inline::Java that broke
&gt; &gt; &gt; &gt; JDBC?
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Dubugging:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I hope that soem of thsi debugging may help in find the solution.
&gt; &gt; &gt; &gt; After looking into Inline::Java::Object the problem is apparently a
&gt; &gt; &gt; &gt; problem with the $args variable when
&gt; &gt; &gt; &gt; Inline::Java::Class::CastArguments is called. While digging a little
&gt; &gt; &gt; &gt; further I see that it has to do with $args and the $protos-&gt;key-
&gt; &gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt;signature in this method do not have the same number of elements
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &#40;args has 3 was the signature of the first proto only has 1&#41;.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; args:$VAR1 = [
&gt; &gt; &gt; &gt; &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;,
&gt; &gt; &gt; &gt; &#39;DAFFODIL&#39;,
&gt; &gt; &gt; &gt; &#39;daff0d1l&#39;
&gt; &gt; &gt; &gt; ];
&gt; &gt; &gt; &gt; protos:$VAR1 = {
&gt; &gt; &gt; &gt; &#39;java.lang.String&#39; =&gt; {
&gt; &gt; &gt; &gt; &#39;STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &gt; &#39;IDX&#39; =&gt; 568,
&gt; &gt; &gt; &gt; &#39;SIGNATURE&#39; =&gt; [
&gt; &gt; &gt; &gt; &#39;java.lang.String&#39;
&gt; &gt; &gt; &gt; ]
&gt; &gt; &gt; &gt; },
&gt; &gt; &gt; &gt; &#39;java.lang.String, java.lang.String, java.lang.String&#39; =&gt; {
&gt; &gt; &gt; &gt; &#39;
&gt; &gt; &gt; &gt; STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &gt; &#39;
&gt; &gt; &gt; &gt; IDX&#39; =&gt; 569,
&gt; &gt; &gt; &gt; &#39;
&gt; &gt; &gt; &gt; SIGNATURE&#39; =&gt; [
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &#39;java.lang.String&#39;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; ]
&gt; &gt; &gt; &gt; },
&gt; &gt; &gt; &gt; &#39;java.lang.String, java.util.Properties&#39; =&gt; {
&gt; &gt; &gt; &gt; &#39;STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &gt; &#39;IDX&#39; =&gt; 567,
&gt; &gt; &gt; &gt; &#39;SIGNATURE&#39; =&gt;
&gt; &gt; &gt; &gt; [
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &#39;java.util.Properties&#39;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; ]
&gt; &gt; &gt; &gt; }
&gt; &gt; &gt; &gt; };
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I then traced this back to the bind_method in Java.pm where the
&gt; &gt; &gt; &gt; __validate_protype mehtod is called. But this is where I am currently
&gt; &gt; &gt; &gt; stuck. I understand the code but following it at this point is tricky.
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; --
&gt; &gt; &gt; =====================
&gt; &gt; &gt; Patrick LeBoutillier
&gt; &gt; &gt; Laval, Québec, Canada
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; =====================
&gt; &gt; Patrick LeBoutillier
&gt; &gt; Laval, Québec, Canada
&gt; &gt;
&gt; &gt;
</div>&gt;
&gt;
&gt; --
&gt; =====================
&gt; Patrick LeBoutillier
&gt; Laval, Québec, Canada
&gt;
&gt;
</div>

-- 
=====================
Patrick LeBoutillier
Laval, Québec, Canada
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;19&nbsp;16:45:20&nbsp;2006</span>
    <span class="description">patrick.leboutillier [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21513] Java Object not properly created</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 19 Sep 2006 16:45:05 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Inline-Java [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Patrick LeBoutillier&#34; &lt;patrick.leboutillier [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Joe,

Placing this at the beginning of you&#39;re handler apparently
will solve your problem:

die $@ if $^S;

Patrick



On 9/19/06, Patrick LeBoutillier via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;        Queue: Inline-Java
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt;
&gt; Joe,
&gt;
&gt; After the fact I realized that that could be the problem. Inside the
&gt; Inline::Java code there
&gt; are quite a few calls that are eval&#39;ed:
&gt;
&gt; eval {
&gt; };
&gt; if &#40;$@&#41;{
&gt;    # ...
&gt; }
&gt;
&gt; Unfortunately, these exceptions will trigger $SIG{&#39;__DIE__&#39;} handlers
&gt; &#40;even if they are caught&#41;. I suppose Inline::Java could localize
&gt; $SIG{&#39;__DIE__&#39;} all over the place to protect against this, I&#39;ll ask
&gt; around and see what the best practice is.
&gt;
&gt;
&gt; Cheers,
&gt;
&gt; Patrick
&gt;
&gt;
&gt; On 9/19/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt;
&gt; &gt;        Queue: Inline-Java
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt;
&gt; &gt; Well your code works . . . From there I did figure out that what was causing my code to bomb was a signal handler. I had this:
&gt; &gt;
&gt; &gt; $SIG{&#39;__DIE__&#39;} = \&#38;death_handler ;
&gt; &gt;
&gt; &gt; Why would this signal handler cause problems? When I comment this line out, everything works great! I really appreciate the help! Is there any way that I can keep my signal handler? I could just localize it inside an eval block. Is that the best way?
&gt; &gt;
&gt; &gt; Cheers
&gt; &gt; Joe
&gt; &gt;
&gt; &gt; -----Original Message-----
&gt; &gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; &gt; Sent: Monday, September 18, 2006 11:49 PM
&gt; &gt; To: Workman, Joe
&gt; &gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt; &gt;
&gt; &gt;
&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt;
&gt; &gt; Joe,
&gt; &gt;
&gt; &gt; In ran the following script:
&gt; &gt;
&gt; &gt; =====
&gt; &gt; use strict ;
&gt; &gt;
&gt; &gt; use JDBC ;
&gt; &gt;
&gt; &gt; JDBC-&gt;load_driver&#40;&#39;in.co.daffodil.db.rmi.RmiDaffodilDBDriver&#39;&#41;;
&gt; &gt; warn &#34;driver loaded&#34; ;
&gt; &gt;
&gt; &gt; my $url = &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;;
&gt; &gt; my $user = &#39;DAFFODIL&#39;;
&gt; &gt; my $pass = &#39;daff0d1l&#39;;
&gt; &gt;
&gt; &gt; eval {
&gt; &gt;         warn &#34;getting connection&#34; ;
&gt; &gt;         my $con = JDBC-&gt;getConnection&#40;$url, $user, $pass&#41;;
&gt; &gt; } ;
&gt; &gt; die $@-&gt;getMessage&#40;&#41; if $@  ;
&gt; &gt; =====
&gt; &gt;
&gt; &gt; And got the following output:
&gt; &gt;
&gt; &gt; driver loaded at daff.pl line 6, &lt;GEN18&gt; line 5.
&gt; &gt; getting connection at daff.pl line 13, &lt;GEN18&gt; line 5.
&gt; &gt; java.rmi.ConnectException: Connection refused to host: localhost;
&gt; &gt; nested exception is:
&gt; &gt;         java.net.ConnectException: Connection refused at daff.pl line
&gt; &gt; 16, &lt;GEN18&gt; line 9.
&gt; &gt;
&gt; &gt; This is normal since I don&#39;t have a Daffodil server running, but
&gt; &gt; what&#39;s strange is that it managed to call the getConnection method
&gt; &gt; without problems. I&#39;m running Inline::Java 0.51 with perl 5.8.5 on
&gt; &gt; Linux x86.
&gt; &gt;
&gt; &gt; Can you try my test script and see if you get the same result?
&gt; &gt;
&gt; &gt; Patrick
&gt; &gt;
&gt; &gt;
&gt; &gt; On 9/18/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt;        Queue: Inline-Java
&gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; We are using the Open-source daffodil db called One$DB. You can download a version from here:
&gt; &gt; &gt;
&gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.daffodildb.com/one-dollar-db.html">http://www.daffodildb.com/one-dollar-db.html</a></span>
&gt; &gt; &gt;
&gt; &gt; &gt; I have a the jar file if you would like me to email it to you but I figured it may be easier if you just download a full copy for yourself.
&gt; &gt; &gt;
&gt; &gt; &gt; Cheers
&gt; &gt; &gt; Joe
&gt; &gt; &gt;
&gt; &gt; &gt; -----Original Message-----
&gt; &gt; &gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; &gt; &gt; Sent: Saturday, September 16, 2006 2:24 AM
&gt; &gt; &gt; To: Workman, Joe
&gt; &gt; &gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Joe,
&gt; &gt; &gt;
&gt; &gt; &gt; I would like to try an reproduce the bug on my station. Can you send
&gt; &gt; &gt; me the Daffodil classes or are they proprietary? If they are, can you
&gt; &gt; &gt; reproduce the bug with another JDBC driver?
&gt; &gt; &gt;
&gt; &gt; &gt; Patrick
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;        Queue: Inline-Java
&gt; &gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Thanks for they speedy response. I really appreciate it! Here is the output from the debug.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Cheers
&gt; &gt; &gt; &gt; Joe
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; -----Original Message-----
&gt; &gt; &gt; &gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; &gt; &gt; &gt; Sent: Friday, September 15, 2006 1:53 PM
&gt; &gt; &gt; &gt; To: Workman, Joe
&gt; &gt; &gt; &gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Joe,
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Can you set the PERL_INLINE_JAVA_DEBUG environment variable to &#34;5&#34;
&gt; &gt; &gt; &gt; and re-run your script?
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; You should get a LOT of debugging info about what Inline::Java is trying to do.
&gt; &gt; &gt; &gt; From that debug info we should be albe to tell what method is in error, how many
&gt; &gt; &gt; &gt; argument have been passed and how many arguments Inline::Java thinks the method
&gt; &gt; &gt; &gt; has.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Patrick
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Fri Sep 15 08:15:47 2006: Request 21513 was acted upon.
&gt; &gt; &gt; &gt; &gt; Transaction: Ticket created by josephworkman
&gt; &gt; &gt; &gt; &gt;        Queue: Inline-Java
&gt; &gt; &gt; &gt; &gt;      Subject: Java Object not properly created
&gt; &gt; &gt; &gt; &gt;    Broken in: &#40;no value&#41;
&gt; &gt; &gt; &gt; &gt;     Severity: Important
&gt; &gt; &gt; &gt; &gt;        Owner: Nobody
&gt; &gt; &gt; &gt; &gt;   Requestors: joe.workman@gs.com
&gt; &gt; &gt; &gt; &gt;       Status: new
&gt; &gt; &gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; First a disclaimer:
&gt; &gt; &gt; &gt; &gt; I am new to Inline::Java and the JDBC module, and do not know Java.
&gt; &gt; &gt; &gt; &gt; This may be a bug in Inline::Java but but I thought I would log the
&gt; &gt; &gt; &gt; &gt; bug here since I can not even make a connection to a database via
&gt; &gt; &gt; &gt; &gt; JDBC. I will also log the bug in JDBC but I think its a issue with
&gt; &gt; &gt; &gt; &gt; Inline::Java.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Environment:
&gt; &gt; &gt; &gt; &gt; Solaris 5.8 Generic_108528-18 sun4u sparc SUNW,Ultra-80
&gt; &gt; &gt; &gt; &gt; perl v5.8.6
&gt; &gt; &gt; &gt; &gt; Inline::Java v0.51
&gt; &gt; &gt; &gt; &gt; JDBC v0.01
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; The Runtime Error:
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Started : ovaa_alarmdef_exception
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Version : 1.0
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Pid : 2825
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Loglevel : 4
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Cmd Line :
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Loading driver . . .
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Successfully loaded daffodil driver!!
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Connecting to daffodil . . .
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 FATAL: Wrong number of arguments at /opt/gsperl-
&gt; &gt; &gt; &gt; &gt; 5.8.6_1/lib/site_perl/5.8.6/sun4-solaris-thread-
&gt; &gt; &gt; &gt; &gt; multi/Inline/Java/Object.pm line 107
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 FATAL: Processing aborted!
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; The Code:
&gt; &gt; &gt; &gt; &gt; use JDBC;
&gt; &gt; &gt; &gt; &gt; sub connect_to_daffodil {
&gt; &gt; &gt; &gt; &gt; $_log-&gt;info&#40;&#39;Loading driver . . . &#39;&#41;;
&gt; &gt; &gt; &gt; &gt; JDBC-&gt;load_driver&#40;&#39;in.co.daffodil.db.rmi.RmiDaffodilDBDriver&#39;&#41;;
&gt; &gt; &gt; &gt; &gt; $_log-&gt;info&#40;&#39;Successfully loaded daffodil driver!!&#39;&#41;;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; my $url = &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;;
&gt; &gt; &gt; &gt; &gt; my $user = &#39;DAFFODIL&#39;;
&gt; &gt; &gt; &gt; &gt; my $pass = &#39;daff0d1l&#39;;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; $_log-&gt;info&#40;&#39;Connecting to daffodil . . . &#39;&#41;;
&gt; &gt; &gt; &gt; &gt; my $con = JDBC-&gt;getConnection&#40;$url, $user, $pass&#41;;
&gt; &gt; &gt; &gt; &gt; $_log-&gt;info&#40;&#39;Successfully connected to daffodil!!&#39;&#41;;
&gt; &gt; &gt; &gt; &gt; return $con;
&gt; &gt; &gt; &gt; &gt; }
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Notes:
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; As you can see, I am just trying to make a basic connection to a
&gt; &gt; &gt; &gt; &gt; Daffodil database via JDBC. The code seem identical to the example in
&gt; &gt; &gt; &gt; &gt; the POD. Maybe there has been a change in Inline::Java that broke
&gt; &gt; &gt; &gt; &gt; JDBC?
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Dubugging:
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; I hope that soem of thsi debugging may help in find the solution.
&gt; &gt; &gt; &gt; &gt; After looking into Inline::Java::Object the problem is apparently a
&gt; &gt; &gt; &gt; &gt; problem with the $args variable when
&gt; &gt; &gt; &gt; &gt; Inline::Java::Class::CastArguments is called. While digging a little
&gt; &gt; &gt; &gt; &gt; further I see that it has to do with $args and the $protos-&gt;key-
&gt; &gt; &gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt;signature in this method do not have the same number of elements
</div>&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &#40;args has 3 was the signature of the first proto only has 1&#41;.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; args:$VAR1 = [
&gt; &gt; &gt; &gt; &gt; &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;,
&gt; &gt; &gt; &gt; &gt; &#39;DAFFODIL&#39;,
&gt; &gt; &gt; &gt; &gt; &#39;daff0d1l&#39;
&gt; &gt; &gt; &gt; &gt; ];
&gt; &gt; &gt; &gt; &gt; protos:$VAR1 = {
&gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39; =&gt; {
&gt; &gt; &gt; &gt; &gt; &#39;STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &gt; &gt; &#39;IDX&#39; =&gt; 568,
&gt; &gt; &gt; &gt; &gt; &#39;SIGNATURE&#39; =&gt; [
&gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39;
&gt; &gt; &gt; &gt; &gt; ]
&gt; &gt; &gt; &gt; &gt; },
&gt; &gt; &gt; &gt; &gt; &#39;java.lang.String, java.lang.String, java.lang.String&#39; =&gt; {
&gt; &gt; &gt; &gt; &gt; &#39;
&gt; &gt; &gt; &gt; &gt; STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &gt; &gt; &#39;
&gt; &gt; &gt; &gt; &gt; IDX&#39; =&gt; 569,
&gt; &gt; &gt; &gt; &gt; &#39;
&gt; &gt; &gt; &gt; &gt; SIGNATURE&#39; =&gt; [
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; ]
&gt; &gt; &gt; &gt; &gt; },
&gt; &gt; &gt; &gt; &gt; &#39;java.lang.String, java.util.Properties&#39; =&gt; {
&gt; &gt; &gt; &gt; &gt; &#39;STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &gt; &gt; &#39;IDX&#39; =&gt; 567,
&gt; &gt; &gt; &gt; &gt; &#39;SIGNATURE&#39; =&gt;
&gt; &gt; &gt; &gt; &gt; [
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &#39;java.util.Properties&#39;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; ]
&gt; &gt; &gt; &gt; &gt; }
&gt; &gt; &gt; &gt; &gt; };
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; I then traced this back to the bind_method in Java.pm where the
&gt; &gt; &gt; &gt; &gt; __validate_protype mehtod is called. But this is where I am currently
&gt; &gt; &gt; &gt; &gt; stuck. I understand the code but following it at this point is tricky.
&gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; --
&gt; &gt; &gt; &gt; =====================
&gt; &gt; &gt; &gt; Patrick LeBoutillier
&gt; &gt; &gt; &gt; Laval, Québec, Canada
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; --
&gt; &gt; &gt; =====================
&gt; &gt; &gt; Patrick LeBoutillier
&gt; &gt; &gt; Laval, Québec, Canada
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; =====================
&gt; &gt; Patrick LeBoutillier
&gt; &gt; Laval, Québec, Canada
&gt; &gt;
&gt; &gt;
</div>&gt;
&gt;
&gt; --
&gt; =====================
&gt; Patrick LeBoutillier
&gt; Laval, Québec, Canada
&gt;
&gt;
</div>

-- 
=====================
Patrick LeBoutillier
Laval, Québec, Canada
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;20&nbsp;06:32:01&nbsp;2006</span>
    <span class="description">joe.workman [...] gs.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #21513] Java Object not properly created</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 20 Sep 2006 11:29:36 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Inline-Java [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Workman, Joe&#34; &lt;joe.workman [...] gs.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Very cool! Thank you soo much for all you help. I am very impressed with the level of support you gave me. 

Cheers
Joe 

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org] 
Sent: Tuesday, September 19, 2006 9:45 PM
To: Workman, Joe
Subject: Re: [rt.cpan.org #21513] Java Object not properly created


&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;

Joe,

Placing this at the beginning of you&#39;re handler apparently
will solve your problem:

die $@ if $^S;

Patrick



On 9/19/06, Patrick LeBoutillier via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt;
&gt;        Queue: Inline-Java
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt;
&gt; Joe,
&gt;
&gt; After the fact I realized that that could be the problem. Inside the
&gt; Inline::Java code there
&gt; are quite a few calls that are eval&#39;ed:
&gt;
&gt; eval {
&gt; };
&gt; if &#40;$@&#41;{
&gt;    # ...
&gt; }
&gt;
&gt; Unfortunately, these exceptions will trigger $SIG{&#39;__DIE__&#39;} handlers
&gt; &#40;even if they are caught&#41;. I suppose Inline::Java could localize
&gt; $SIG{&#39;__DIE__&#39;} all over the place to protect against this, I&#39;ll ask
&gt; around and see what the best practice is.
&gt;
&gt;
&gt; Cheers,
&gt;
&gt; Patrick
&gt;
&gt;
&gt; On 9/19/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt;
&gt; &gt;        Queue: Inline-Java
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt;
&gt; &gt; Well your code works . . . From there I did figure out that what was causing my code to bomb was a signal handler. I had this:
&gt; &gt;
&gt; &gt; $SIG{&#39;__DIE__&#39;} = \&#38;death_handler ;
&gt; &gt;
&gt; &gt; Why would this signal handler cause problems? When I comment this line out, everything works great! I really appreciate the help! Is there any way that I can keep my signal handler? I could just localize it inside an eval block. Is that the best way?
&gt; &gt;
&gt; &gt; Cheers
&gt; &gt; Joe
&gt; &gt;
&gt; &gt; -----Original Message-----
&gt; &gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; &gt; Sent: Monday, September 18, 2006 11:49 PM
&gt; &gt; To: Workman, Joe
&gt; &gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt; &gt;
&gt; &gt;
&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt;
&gt; &gt; Joe,
&gt; &gt;
&gt; &gt; In ran the following script:
&gt; &gt;
&gt; &gt; =====
&gt; &gt; use strict ;
&gt; &gt;
&gt; &gt; use JDBC ;
&gt; &gt;
&gt; &gt; JDBC-&gt;load_driver&#40;&#39;in.co.daffodil.db.rmi.RmiDaffodilDBDriver&#39;&#41;;
&gt; &gt; warn &#34;driver loaded&#34; ;
&gt; &gt;
&gt; &gt; my $url = &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;;
&gt; &gt; my $user = &#39;DAFFODIL&#39;;
&gt; &gt; my $pass = &#39;daff0d1l&#39;;
&gt; &gt;
&gt; &gt; eval {
&gt; &gt;         warn &#34;getting connection&#34; ;
&gt; &gt;         my $con = JDBC-&gt;getConnection&#40;$url, $user, $pass&#41;;
&gt; &gt; } ;
&gt; &gt; die $@-&gt;getMessage&#40;&#41; if $@  ;
&gt; &gt; =====
&gt; &gt;
&gt; &gt; And got the following output:
&gt; &gt;
&gt; &gt; driver loaded at daff.pl line 6, &lt;GEN18&gt; line 5.
&gt; &gt; getting connection at daff.pl line 13, &lt;GEN18&gt; line 5.
&gt; &gt; java.rmi.ConnectException: Connection refused to host: localhost;
&gt; &gt; nested exception is:
&gt; &gt;         java.net.ConnectException: Connection refused at daff.pl line
&gt; &gt; 16, &lt;GEN18&gt; line 9.
&gt; &gt;
&gt; &gt; This is normal since I don&#39;t have a Daffodil server running, but
&gt; &gt; what&#39;s strange is that it managed to call the getConnection method
&gt; &gt; without problems. I&#39;m running Inline::Java 0.51 with perl 5.8.5 on
&gt; &gt; Linux x86.
&gt; &gt;
&gt; &gt; Can you try my test script and see if you get the same result?
&gt; &gt;
&gt; &gt; Patrick
&gt; &gt;
&gt; &gt;
&gt; &gt; On 9/18/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt;        Queue: Inline-Java
&gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; We are using the Open-source daffodil db called One$DB. You can download a version from here:
&gt; &gt; &gt;
&gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.daffodildb.com/one-dollar-db.html">http://www.daffodildb.com/one-dollar-db.html</a></span>
&gt; &gt; &gt;
&gt; &gt; &gt; I have a the jar file if you would like me to email it to you but I figured it may be easier if you just download a full copy for yourself.
&gt; &gt; &gt;
&gt; &gt; &gt; Cheers
&gt; &gt; &gt; Joe
&gt; &gt; &gt;
&gt; &gt; &gt; -----Original Message-----
&gt; &gt; &gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; &gt; &gt; Sent: Saturday, September 16, 2006 2:24 AM
&gt; &gt; &gt; To: Workman, Joe
&gt; &gt; &gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Joe,
&gt; &gt; &gt;
&gt; &gt; &gt; I would like to try an reproduce the bug on my station. Can you send
&gt; &gt; &gt; me the Daffodil classes or are they proprietary? If they are, can you
&gt; &gt; &gt; reproduce the bug with another JDBC driver?
&gt; &gt; &gt;
&gt; &gt; &gt; Patrick
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;        Queue: Inline-Java
&gt; &gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Thanks for they speedy response. I really appreciate it! Here is the output from the debug.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Cheers
&gt; &gt; &gt; &gt; Joe
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; -----Original Message-----
&gt; &gt; &gt; &gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; &gt; &gt; &gt; Sent: Friday, September 15, 2006 1:53 PM
&gt; &gt; &gt; &gt; To: Workman, Joe
&gt; &gt; &gt; &gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Joe,
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Can you set the PERL_INLINE_JAVA_DEBUG environment variable to &#34;5&#34;
&gt; &gt; &gt; &gt; and re-run your script?
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; You should get a LOT of debugging info about what Inline::Java is trying to do.
&gt; &gt; &gt; &gt; From that debug info we should be albe to tell what method is in error, how many
&gt; &gt; &gt; &gt; argument have been passed and how many arguments Inline::Java thinks the method
&gt; &gt; &gt; &gt; has.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Patrick
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Fri Sep 15 08:15:47 2006: Request 21513 was acted upon.
&gt; &gt; &gt; &gt; &gt; Transaction: Ticket created by josephworkman
&gt; &gt; &gt; &gt; &gt;        Queue: Inline-Java
&gt; &gt; &gt; &gt; &gt;      Subject: Java Object not properly created
&gt; &gt; &gt; &gt; &gt;    Broken in: &#40;no value&#41;
&gt; &gt; &gt; &gt; &gt;     Severity: Important
&gt; &gt; &gt; &gt; &gt;        Owner: Nobody
&gt; &gt; &gt; &gt; &gt;   Requestors: joe.workman@gs.com
&gt; &gt; &gt; &gt; &gt;       Status: new
&gt; &gt; &gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; First a disclaimer:
&gt; &gt; &gt; &gt; &gt; I am new to Inline::Java and the JDBC module, and do not know Java.
&gt; &gt; &gt; &gt; &gt; This may be a bug in Inline::Java but but I thought I would log the
&gt; &gt; &gt; &gt; &gt; bug here since I can not even make a connection to a database via
&gt; &gt; &gt; &gt; &gt; JDBC. I will also log the bug in JDBC but I think its a issue with
&gt; &gt; &gt; &gt; &gt; Inline::Java.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Environment:
&gt; &gt; &gt; &gt; &gt; Solaris 5.8 Generic_108528-18 sun4u sparc SUNW,Ultra-80
&gt; &gt; &gt; &gt; &gt; perl v5.8.6
&gt; &gt; &gt; &gt; &gt; Inline::Java v0.51
&gt; &gt; &gt; &gt; &gt; JDBC v0.01
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; The Runtime Error:
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Started : ovaa_alarmdef_exception
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Version : 1.0
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Pid : 2825
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Loglevel : 4
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Cmd Line :
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Loading driver . . .
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Successfully loaded daffodil driver!!
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Connecting to daffodil . . .
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 FATAL: Wrong number of arguments at /opt/gsperl-
&gt; &gt; &gt; &gt; &gt; 5.8.6_1/lib/site_perl/5.8.6/sun4-solaris-thread-
&gt; &gt; &gt; &gt; &gt; multi/Inline/Java/Object.pm line 107
&gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 FATAL: Processing aborted!
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; The Code:
&gt; &gt; &gt; &gt; &gt; use JDBC;
&gt; &gt; &gt; &gt; &gt; sub connect_to_daffodil {
&gt; &gt; &gt; &gt; &gt; $_log-&gt;info&#40;&#39;Loading driver . . . &#39;&#41;;
&gt; &gt; &gt; &gt; &gt; JDBC-&gt;load_driver&#40;&#39;in.co.daffodil.db.rmi.RmiDaffodilDBDriver&#39;&#41;;
&gt; &gt; &gt; &gt; &gt; $_log-&gt;info&#40;&#39;Successfully loaded daffodil driver!!&#39;&#41;;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; my $url = &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;;
&gt; &gt; &gt; &gt; &gt; my $user = &#39;DAFFODIL&#39;;
&gt; &gt; &gt; &gt; &gt; my $pass = &#39;daff0d1l&#39;;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; $_log-&gt;info&#40;&#39;Connecting to daffodil . . . &#39;&#41;;
&gt; &gt; &gt; &gt; &gt; my $con = JDBC-&gt;getConnection&#40;$url, $user, $pass&#41;;
&gt; &gt; &gt; &gt; &gt; $_log-&gt;info&#40;&#39;Successfully connected to daffodil!!&#39;&#41;;
&gt; &gt; &gt; &gt; &gt; return $con;
&gt; &gt; &gt; &gt; &gt; }
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Notes:
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; As you can see, I am just trying to make a basic connection to a
&gt; &gt; &gt; &gt; &gt; Daffodil database via JDBC. The code seem identical to the example in
&gt; &gt; &gt; &gt; &gt; the POD. Maybe there has been a change in Inline::Java that broke
&gt; &gt; &gt; &gt; &gt; JDBC?
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Dubugging:
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; I hope that soem of thsi debugging may help in find the solution.
&gt; &gt; &gt; &gt; &gt; After looking into Inline::Java::Object the problem is apparently a
&gt; &gt; &gt; &gt; &gt; problem with the $args variable when
&gt; &gt; &gt; &gt; &gt; Inline::Java::Class::CastArguments is called. While digging a little
&gt; &gt; &gt; &gt; &gt; further I see that it has to do with $args and the $protos-&gt;key-
&gt; &gt; &gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt;signature in this method do not have the same number of elements
</div>&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &#40;args has 3 was the signature of the first proto only has 1&#41;.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; args:$VAR1 = [
&gt; &gt; &gt; &gt; &gt; &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;,
&gt; &gt; &gt; &gt; &gt; &#39;DAFFODIL&#39;,
&gt; &gt; &gt; &gt; &gt; &#39;daff0d1l&#39;
&gt; &gt; &gt; &gt; &gt; ];
&gt; &gt; &gt; &gt; &gt; protos:$VAR1 = {
&gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39; =&gt; {
&gt; &gt; &gt; &gt; &gt; &#39;STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &gt; &gt; &#39;IDX&#39; =&gt; 568,
&gt; &gt; &gt; &gt; &gt; &#39;SIGNATURE&#39; =&gt; [
&gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39;
&gt; &gt; &gt; &gt; &gt; ]
&gt; &gt; &gt; &gt; &gt; },
&gt; &gt; &gt; &gt; &gt; &#39;java.lang.String, java.lang.String, java.lang.String&#39; =&gt; {
&gt; &gt; &gt; &gt; &gt; &#39;
&gt; &gt; &gt; &gt; &gt; STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &gt; &gt; &#39;
&gt; &gt; &gt; &gt; &gt; IDX&#39; =&gt; 569,
&gt; &gt; &gt; &gt; &gt; &#39;
&gt; &gt; &gt; &gt; &gt; SIGNATURE&#39; =&gt; [
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; ]
&gt; &gt; &gt; &gt; &gt; },
&gt; &gt; &gt; &gt; &gt; &#39;java.lang.String, java.util.Properties&#39; =&gt; {
&gt; &gt; &gt; &gt; &gt; &#39;STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &gt; &gt; &#39;IDX&#39; =&gt; 567,
&gt; &gt; &gt; &gt; &gt; &#39;SIGNATURE&#39; =&gt;
&gt; &gt; &gt; &gt; &gt; [
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &#39;java.util.Properties&#39;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; ]
&gt; &gt; &gt; &gt; &gt; }
&gt; &gt; &gt; &gt; &gt; };
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; I then traced this back to the bind_method in Java.pm where the
&gt; &gt; &gt; &gt; &gt; __validate_protype mehtod is called. But this is where I am currently
&gt; &gt; &gt; &gt; &gt; stuck. I understand the code but following it at this point is tricky.
&gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; --
&gt; &gt; &gt; &gt; =====================
&gt; &gt; &gt; &gt; Patrick LeBoutillier
&gt; &gt; &gt; &gt; Laval, Québec, Canada
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; --
&gt; &gt; &gt; =====================
&gt; &gt; &gt; Patrick LeBoutillier
&gt; &gt; &gt; Laval, Québec, Canada
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; =====================
&gt; &gt; Patrick LeBoutillier
&gt; &gt; Laval, Québec, Canada
&gt; &gt;
&gt; &gt;
</div>&gt;
&gt;
&gt; --
&gt; =====================
&gt; Patrick LeBoutillier
&gt; Laval, Québec, Canada
&gt;
&gt;
</div>

-- 
=====================
Patrick LeBoutillier
Laval, Québec, Canada
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;20&nbsp;09:00:09&nbsp;2006</span>
    <span class="description">patl [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;20&nbsp;09:03:20&nbsp;2006</span>
    <span class="description">patl [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Issue resolved. Problem with $SIG{__DIE__} not specifically related to
Inline::Java.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;20&nbsp;09:03:21&nbsp;2006</span>
    <span class="description">patl [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;20&nbsp;09:08:41&nbsp;2006</span>
    <span class="description">patrick.leboutillier [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21513] Java Object not properly created</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 20 Sep 2006 09:08:23 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Inline-Java [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Patrick LeBoutillier&#34; &lt;patrick.leboutillier [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Joe,

On 9/20/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;        Queue: Inline-Java
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt;
&gt; Very cool! Thank you soo much for all you help. I am very impressed with the level of support you gave me.
</div>
You&#39;re welcome. When the user is cooperative and respectful
&#40;unfortunately that is not always the case&#41; it is easier to find some
time to help them out.

Cheers,

Patrick

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Cheers
&gt; Joe
&gt;
&gt; -----Original Message-----
&gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; Sent: Tuesday, September 19, 2006 9:45 PM
&gt; To: Workman, Joe
&gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt;
&gt;
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt;
&gt; Joe,
&gt;
&gt; Placing this at the beginning of you&#39;re handler apparently
&gt; will solve your problem:
&gt;
&gt; die $@ if $^S;
&gt;
&gt; Patrick
&gt;
&gt;
&gt;
&gt; On 9/19/06, Patrick LeBoutillier via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt;
&gt; &gt;        Queue: Inline-Java
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt;
&gt; &gt; Joe,
&gt; &gt;
&gt; &gt; After the fact I realized that that could be the problem. Inside the
&gt; &gt; Inline::Java code there
&gt; &gt; are quite a few calls that are eval&#39;ed:
&gt; &gt;
&gt; &gt; eval {
&gt; &gt; };
&gt; &gt; if &#40;$@&#41;{
&gt; &gt;    # ...
&gt; &gt; }
&gt; &gt;
&gt; &gt; Unfortunately, these exceptions will trigger $SIG{&#39;__DIE__&#39;} handlers
&gt; &gt; &#40;even if they are caught&#41;. I suppose Inline::Java could localize
&gt; &gt; $SIG{&#39;__DIE__&#39;} all over the place to protect against this, I&#39;ll ask
&gt; &gt; around and see what the best practice is.
&gt; &gt;
&gt; &gt;
&gt; &gt; Cheers,
&gt; &gt;
&gt; &gt; Patrick
&gt; &gt;
&gt; &gt;
&gt; &gt; On 9/19/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt;        Queue: Inline-Java
&gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Well your code works . . . From there I did figure out that what was causing my code to bomb was a signal handler. I had this:
&gt; &gt; &gt;
&gt; &gt; &gt; $SIG{&#39;__DIE__&#39;} = \&#38;death_handler ;
&gt; &gt; &gt;
&gt; &gt; &gt; Why would this signal handler cause problems? When I comment this line out, everything works great! I really appreciate the help! Is there any way that I can keep my signal handler? I could just localize it inside an eval block. Is that the best way?
&gt; &gt; &gt;
&gt; &gt; &gt; Cheers
&gt; &gt; &gt; Joe
&gt; &gt; &gt;
&gt; &gt; &gt; -----Original Message-----
&gt; &gt; &gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; &gt; &gt; Sent: Monday, September 18, 2006 11:49 PM
&gt; &gt; &gt; To: Workman, Joe
&gt; &gt; &gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Joe,
&gt; &gt; &gt;
&gt; &gt; &gt; In ran the following script:
&gt; &gt; &gt;
&gt; &gt; &gt; =====
&gt; &gt; &gt; use strict ;
&gt; &gt; &gt;
&gt; &gt; &gt; use JDBC ;
&gt; &gt; &gt;
&gt; &gt; &gt; JDBC-&gt;load_driver&#40;&#39;in.co.daffodil.db.rmi.RmiDaffodilDBDriver&#39;&#41;;
&gt; &gt; &gt; warn &#34;driver loaded&#34; ;
&gt; &gt; &gt;
&gt; &gt; &gt; my $url = &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;;
&gt; &gt; &gt; my $user = &#39;DAFFODIL&#39;;
&gt; &gt; &gt; my $pass = &#39;daff0d1l&#39;;
&gt; &gt; &gt;
&gt; &gt; &gt; eval {
&gt; &gt; &gt;         warn &#34;getting connection&#34; ;
&gt; &gt; &gt;         my $con = JDBC-&gt;getConnection&#40;$url, $user, $pass&#41;;
&gt; &gt; &gt; } ;
&gt; &gt; &gt; die $@-&gt;getMessage&#40;&#41; if $@  ;
&gt; &gt; &gt; =====
&gt; &gt; &gt;
&gt; &gt; &gt; And got the following output:
&gt; &gt; &gt;
&gt; &gt; &gt; driver loaded at daff.pl line 6, &lt;GEN18&gt; line 5.
&gt; &gt; &gt; getting connection at daff.pl line 13, &lt;GEN18&gt; line 5.
&gt; &gt; &gt; java.rmi.ConnectException: Connection refused to host: localhost;
&gt; &gt; &gt; nested exception is:
&gt; &gt; &gt;         java.net.ConnectException: Connection refused at daff.pl line
&gt; &gt; &gt; 16, &lt;GEN18&gt; line 9.
&gt; &gt; &gt;
&gt; &gt; &gt; This is normal since I don&#39;t have a Daffodil server running, but
&gt; &gt; &gt; what&#39;s strange is that it managed to call the getConnection method
&gt; &gt; &gt; without problems. I&#39;m running Inline::Java 0.51 with perl 5.8.5 on
&gt; &gt; &gt; Linux x86.
&gt; &gt; &gt;
&gt; &gt; &gt; Can you try my test script and see if you get the same result?
&gt; &gt; &gt;
&gt; &gt; &gt; Patrick
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; On 9/18/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;        Queue: Inline-Java
&gt; &gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; We are using the Open-source daffodil db called One$DB. You can download a version from here:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.daffodildb.com/one-dollar-db.html">http://www.daffodildb.com/one-dollar-db.html</a></span>
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I have a the jar file if you would like me to email it to you but I figured it may be easier if you just download a full copy for yourself.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Cheers
&gt; &gt; &gt; &gt; Joe
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; -----Original Message-----
&gt; &gt; &gt; &gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; &gt; &gt; &gt; Sent: Saturday, September 16, 2006 2:24 AM
&gt; &gt; &gt; &gt; To: Workman, Joe
&gt; &gt; &gt; &gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Joe,
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I would like to try an reproduce the bug on my station. Can you send
&gt; &gt; &gt; &gt; me the Daffodil classes or are they proprietary? If they are, can you
&gt; &gt; &gt; &gt; reproduce the bug with another JDBC driver?
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Patrick
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;        Queue: Inline-Java
&gt; &gt; &gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Thanks for they speedy response. I really appreciate it! Here is the output from the debug.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Cheers
&gt; &gt; &gt; &gt; &gt; Joe
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; -----Original Message-----
&gt; &gt; &gt; &gt; &gt; From: Patrick LeBoutillier via RT [mailto:bug-Inline-Java@rt.cpan.org]
&gt; &gt; &gt; &gt; &gt; Sent: Friday, September 15, 2006 1:53 PM
&gt; &gt; &gt; &gt; &gt; To: Workman, Joe
&gt; &gt; &gt; &gt; &gt; Subject: Re: [rt.cpan.org #21513] Java Object not properly created
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Joe,
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Can you set the PERL_INLINE_JAVA_DEBUG environment variable to &#34;5&#34;
&gt; &gt; &gt; &gt; &gt; and re-run your script?
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; You should get a LOT of debugging info about what Inline::Java is trying to do.
&gt; &gt; &gt; &gt; &gt; From that debug info we should be albe to tell what method is in error, how many
&gt; &gt; &gt; &gt; &gt; argument have been passed and how many arguments Inline::Java thinks the method
&gt; &gt; &gt; &gt; &gt; has.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Patrick
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; On 9/15/06, Joe Workman via RT &lt;bug-Inline-Java@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; Fri Sep 15 08:15:47 2006: Request 21513 was acted upon.
&gt; &gt; &gt; &gt; &gt; &gt; Transaction: Ticket created by josephworkman
&gt; &gt; &gt; &gt; &gt; &gt;        Queue: Inline-Java
&gt; &gt; &gt; &gt; &gt; &gt;      Subject: Java Object not properly created
&gt; &gt; &gt; &gt; &gt; &gt;    Broken in: &#40;no value&#41;
&gt; &gt; &gt; &gt; &gt; &gt;     Severity: Important
&gt; &gt; &gt; &gt; &gt; &gt;        Owner: Nobody
&gt; &gt; &gt; &gt; &gt; &gt;   Requestors: joe.workman@gs.com
&gt; &gt; &gt; &gt; &gt; &gt;       Status: new
&gt; &gt; &gt; &gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21513">http://rt.cpan.org/Ticket/Display.html?id=21513</a></span> &gt;
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; First a disclaimer:
&gt; &gt; &gt; &gt; &gt; &gt; I am new to Inline::Java and the JDBC module, and do not know Java.
&gt; &gt; &gt; &gt; &gt; &gt; This may be a bug in Inline::Java but but I thought I would log the
&gt; &gt; &gt; &gt; &gt; &gt; bug here since I can not even make a connection to a database via
&gt; &gt; &gt; &gt; &gt; &gt; JDBC. I will also log the bug in JDBC but I think its a issue with
&gt; &gt; &gt; &gt; &gt; &gt; Inline::Java.
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; Environment:
&gt; &gt; &gt; &gt; &gt; &gt; Solaris 5.8 Generic_108528-18 sun4u sparc SUNW,Ultra-80
&gt; &gt; &gt; &gt; &gt; &gt; perl v5.8.6
&gt; &gt; &gt; &gt; &gt; &gt; Inline::Java v0.51
&gt; &gt; &gt; &gt; &gt; &gt; JDBC v0.01
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; The Runtime Error:
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Started : ovaa_alarmdef_exception
&gt; &gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Version : 1.0
&gt; &gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Pid : 2825
&gt; &gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Loglevel : 4
&gt; &gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Cmd Line :
&gt; &gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Loading driver . . .
&gt; &gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Successfully loaded daffodil driver!!
&gt; &gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 INFO: Connecting to daffodil . . .
&gt; &gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 FATAL: Wrong number of arguments at /opt/gsperl-
&gt; &gt; &gt; &gt; &gt; &gt; 5.8.6_1/lib/site_perl/5.8.6/sun4-solaris-thread-
&gt; &gt; &gt; &gt; &gt; &gt; multi/Inline/Java/Object.pm line 107
&gt; &gt; &gt; &gt; &gt; &gt; 09-15-2006 11:04:44 FATAL: Processing aborted!
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; The Code:
&gt; &gt; &gt; &gt; &gt; &gt; use JDBC;
&gt; &gt; &gt; &gt; &gt; &gt; sub connect_to_daffodil {
&gt; &gt; &gt; &gt; &gt; &gt; $_log-&gt;info&#40;&#39;Loading driver . . . &#39;&#41;;
&gt; &gt; &gt; &gt; &gt; &gt; JDBC-&gt;load_driver&#40;&#39;in.co.daffodil.db.rmi.RmiDaffodilDBDriver&#39;&#41;;
&gt; &gt; &gt; &gt; &gt; &gt; $_log-&gt;info&#40;&#39;Successfully loaded daffodil driver!!&#39;&#41;;
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; my $url = &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;;
&gt; &gt; &gt; &gt; &gt; &gt; my $user = &#39;DAFFODIL&#39;;
&gt; &gt; &gt; &gt; &gt; &gt; my $pass = &#39;daff0d1l&#39;;
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; $_log-&gt;info&#40;&#39;Connecting to daffodil . . . &#39;&#41;;
&gt; &gt; &gt; &gt; &gt; &gt; my $con = JDBC-&gt;getConnection&#40;$url, $user, $pass&#41;;
&gt; &gt; &gt; &gt; &gt; &gt; $_log-&gt;info&#40;&#39;Successfully connected to daffodil!!&#39;&#41;;
&gt; &gt; &gt; &gt; &gt; &gt; return $con;
&gt; &gt; &gt; &gt; &gt; &gt; }
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; Notes:
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; As you can see, I am just trying to make a basic connection to a
&gt; &gt; &gt; &gt; &gt; &gt; Daffodil database via JDBC. The code seem identical to the example in
&gt; &gt; &gt; &gt; &gt; &gt; the POD. Maybe there has been a change in Inline::Java that broke
&gt; &gt; &gt; &gt; &gt; &gt; JDBC?
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; Dubugging:
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; I hope that soem of thsi debugging may help in find the solution.
&gt; &gt; &gt; &gt; &gt; &gt; After looking into Inline::Java::Object the problem is apparently a
&gt; &gt; &gt; &gt; &gt; &gt; problem with the $args variable when
&gt; &gt; &gt; &gt; &gt; &gt; Inline::Java::Class::CastArguments is called. While digging a little
&gt; &gt; &gt; &gt; &gt; &gt; further I see that it has to do with $args and the $protos-&gt;key-
&gt; &gt; &gt; &gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt; &gt;signature in this method do not have the same number of elements
</div>&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; &#40;args has 3 was the signature of the first proto only has 1&#41;.
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; args:$VAR1 = [
&gt; &gt; &gt; &gt; &gt; &gt; &#39;jdbc:daffodilDB://localhost:3456/ovaa&#39;,
&gt; &gt; &gt; &gt; &gt; &gt; &#39;DAFFODIL&#39;,
&gt; &gt; &gt; &gt; &gt; &gt; &#39;daff0d1l&#39;
&gt; &gt; &gt; &gt; &gt; &gt; ];
&gt; &gt; &gt; &gt; &gt; &gt; protos:$VAR1 = {
&gt; &gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39; =&gt; {
&gt; &gt; &gt; &gt; &gt; &gt; &#39;STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &gt; &gt; &gt; &#39;IDX&#39; =&gt; 568,
&gt; &gt; &gt; &gt; &gt; &gt; &#39;SIGNATURE&#39; =&gt; [
&gt; &gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39;
&gt; &gt; &gt; &gt; &gt; &gt; ]
&gt; &gt; &gt; &gt; &gt; &gt; },
&gt; &gt; &gt; &gt; &gt; &gt; &#39;java.lang.String, java.lang.String, java.lang.String&#39; =&gt; {
&gt; &gt; &gt; &gt; &gt; &gt; &#39;
&gt; &gt; &gt; &gt; &gt; &gt; STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &gt; &gt; &gt; &#39;
&gt; &gt; &gt; &gt; &gt; &gt; IDX&#39; =&gt; 569,
&gt; &gt; &gt; &gt; &gt; &gt; &#39;
&gt; &gt; &gt; &gt; &gt; &gt; SIGNATURE&#39; =&gt; [
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39;
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; ]
&gt; &gt; &gt; &gt; &gt; &gt; },
&gt; &gt; &gt; &gt; &gt; &gt; &#39;java.lang.String, java.util.Properties&#39; =&gt; {
&gt; &gt; &gt; &gt; &gt; &gt; &#39;STATIC&#39; =&gt; 1,
&gt; &gt; &gt; &gt; &gt; &gt; &#39;IDX&#39; =&gt; 567,
&gt; &gt; &gt; &gt; &gt; &gt; &#39;SIGNATURE&#39; =&gt;
&gt; &gt; &gt; &gt; &gt; &gt; [
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; &#39;java.lang.String&#39;,
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; &#39;java.util.Properties&#39;
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; ]
&gt; &gt; &gt; &gt; &gt; &gt; }
&gt; &gt; &gt; &gt; &gt; &gt; };
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; I then traced this back to the bind_method in Java.pm where the
&gt; &gt; &gt; &gt; &gt; &gt; __validate_protype mehtod is called. But this is where I am currently
&gt; &gt; &gt; &gt; &gt; &gt; stuck. I understand the code but following it at this point is tricky.
&gt; &gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; --
&gt; &gt; &gt; &gt; &gt; =====================
&gt; &gt; &gt; &gt; &gt; Patrick LeBoutillier
&gt; &gt; &gt; &gt; &gt; Laval, Québec, Canada
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; --
&gt; &gt; &gt; &gt; =====================
&gt; &gt; &gt; &gt; Patrick LeBoutillier
&gt; &gt; &gt; &gt; Laval, Québec, Canada
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; --
&gt; &gt; &gt; =====================
&gt; &gt; &gt; Patrick LeBoutillier
&gt; &gt; &gt; Laval, Québec, Canada
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; =====================
&gt; &gt; Patrick LeBoutillier
&gt; &gt; Laval, Québec, Canada
&gt; &gt;
&gt; &gt;
</div>&gt;
&gt;
&gt; --
&gt; =====================
&gt; Patrick LeBoutillier
&gt; Laval, Québec, Canada
&gt;
&gt;
</div>

-- 
=====================
Patrick LeBoutillier
Laval, Québec, Canada
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;20&nbsp;09:08:42&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;16&nbsp;22:15:59&nbsp;2007</span>
    <span class="description">patl [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Not really an Inline::Java problem. Issue with a global $SIG{__DIE__}
handler.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;16&nbsp;22:16:12&nbsp;2007</span>
    <span class="description">patl [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
