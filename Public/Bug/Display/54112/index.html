<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #54112 for libintl-perl: libintl-perl 1.20 unhandled win32 exception with strawberry Perl</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #54112 for libintl-perl: libintl-perl 1.20 unhandled win32 exception with strawberry Perl</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=libintl-perl">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=libintl-perl">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=libintl-perl">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=libintl-perl">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/libintl-perl">libintl-perl CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">54112</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=libintl-perl">libintl-perl</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
gert.kello [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-18278-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-18279-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




AfterException.log<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/726330/375138/AfterException.log">
Fri Jan 29 03:42:15 2010 (27.1k) by gert.kello [...] gmail.com
</a>
</font></li>
</ul>


BeforeException.log<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/726330/375137/BeforeException.log">
Fri Jan 29 03:42:15 2010 (21.8k) by gert.kello [...] gmail.com
</a>
</font></li>
</ul>


perlV.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/726330/375135/perlV.txt">
Fri Jan 29 03:42:14 2010 (2.2k) by gert.kello [...] gmail.com
</a>
</font></li>
</ul>


UnhandledException.png<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/726330/375136/UnhandledException.png">
Fri Jan 29 03:42:15 2010 (6k) by gert.kello [...] gmail.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=54112">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-726330" href="/Public/Bug/Display.html?id=54112#txn-726330">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;29&nbsp;03:42:14&nbsp;2010</span>
    <span class="description">gert.kello [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> csjewell [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> libintl-perl 1.20 unhandled win32 exception with strawberry Perl</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 29 Jan 2010 10:41:05 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libintl-perl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Gert Kello &lt;gert.kello [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/726330/375133/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/375133">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 833b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi.

I&#39;m trying to install the LibIntl-Perl module from CPAN
&#40;G/GU/GUIDO/libintl-perl-1.20.tar.gz&#41; using strawberry perl, but it raises
an unhandled win32 exception in perl.exe when doing
./tests/03bindtextdomain_xs.t. Screenshot attached &#40;yet it is very
uninformative&#41;
Also attached CPAN output in two log files, before &#38; after the exception
occurred. Well, I assume the after part is not that interesting anymore.

I also asked about it in
#win32&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://widget.mibbit.com/?settings=1c154d53c72ad8cfdfab3caa051b30a2&#38;server=irc.perl.org&#38;channel=%23win32&#38;noServerTab=false&#38;noServerNotices=true&#38;noServerMotd=true&#38;autoConnect=true">http://widget.mibbit.com/?settings=1c154d53c72ad8cfdfab3caa051b30a2&#38;server=irc.perl.org&#38;channel=%23win32&#38;noServerTab=false&#38;noServerNotices=true&#38;noServerMotd=true&#38;autoConnect=true</a></span>&gt;channel
at
irc.perl.org, and they suggested sending that e-mail.

Perl version is info is in attached perlV.txt file

Let me know if You need any additional information about the system I&#39;m
running.

Gert
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/726330/375134/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/375134">with headers</a>
<br />
<span class="downloadcontenttype">text/html 958b</span>
</div>
<div class="messagebody">
</div>
</div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/726330/375135/perlV.txt">Download perlV.txt</a><br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/726330/375136/UnhandledException.png">Download UnhandledException.png</a><br />
<span class="downloadcontenttype">image/png 6k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/726330/375137/BeforeException.log">Download BeforeException.log</a><br />
<span class="downloadcontenttype">application/octet-stream 21.8k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/726330/375138/AfterException.log">Download AfterException.log</a><br />
<span class="downloadcontenttype">application/octet-stream 27.1k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-726351" href="/Public/Bug/Display.html?id=54112#txn-726351">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;29&nbsp;06:11:28&nbsp;2010</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/726351/375150/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/375150">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 843b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

the XS version of libintl-perl is an extremely simple wrapper around the
gettext library installed on the system.  It just passes function
arguments from Perl to C, and the return value back from C to Perl.  If
this was a problem, your Perl wouldn&#39;t work at all.

It is next to impossible that this is a bug in libintl-perl, and very
unlikely that it is a bug in your Perl interpreter.  I&#39;m almost sure
that the culprit is gettext library on your system.

You can test that by re-writing the test in C.  This is relatively
straightforward. If you have the same exception, you know that it is not
a Perl related problem.

You may also want to have a look at Locale::Messages::select_package&#40;&#41;.
 You can deactivate the XS version altogether, and only use the pure
Perl version.  You will not see a big performance penalty.

Cheers,
Guido 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-726353" href="/Public/Bug/Display.html?id=54112#txn-726353">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;29&nbsp;06:11:29&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-726382" href="/Public/Bug/Display.html?id=54112#txn-726382">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;29&nbsp;08:15:12&nbsp;2010</span>
    <span class="description">gert.kello [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> csjewell [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #54112] libintl-perl 1.20 unhandled win32 exception  with strawberry Perl</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 29 Jan 2010 13:28:03 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libintl-perl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Gert Kello &lt;gert.kello [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/726382/375166/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/375166">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 321b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi.

Actually I would assume that the libintl-perl &#38; strawberry perl maintainers
would sort it out &#40;disable the the XS version for strawberry or provide
&#34;working&#34; copy of gettext library&#41;

BTW, do You check during install that the gettext library is present in
system? As far as I can tell, it is not in my PATH...

Gert
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/726382/375167/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/375167">with headers</a>
<br />
<span class="downloadcontenttype">text/html 358b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-726417" href="/Public/Bug/Display.html?id=54112#txn-726417">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;29&nbsp;09:43:12&nbsp;2010</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/726417/375185/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/375185">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Am Fr 29. Jan 2010, 08:15:12, gert.kello@gmail.com schrieb:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi.
&gt; 
&gt; Actually I would assume that the libintl-perl &#38; strawberry perl
</div>maintainers
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; would sort it out &#40;disable the the XS version for strawberry or provide
&gt; &#34;working&#34; copy of gettext library&#41;
&gt; 
&gt; BTW, do You check during install that the gettext library is present in
&gt; system? As far as I can tell, it is not in my PATH...
</div>
When you build libintl-perl, the first line of output reads &#34;Checking
whether we can compile the XS version ...&#34;. Does that answer your question?

About the rest: I have never heard of strawberry perl before, I don&#39;t
have a working MS-DOS aka Windows installation, leave alone Visual C or
whatever.  How should I be able to sort that out for you?

The binding &#40;libintl-perl&#41;, the script interpreter &#40;strawberry perl&#41; or
the library &#40;gettext&#41; cause the crash, and it is highly unlikely that
the binding is the culprit in this case.  Please ask the maintainers of
strawberry perl whether they can reproduce the problem on their
machines.  They have at least the same operating system.

I will send you a bottle of good Bulgarian wine if you can prove me that
a bug in libintl-perl causes this crash.

Cheers,
Guido

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Gert
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-726877" href="/Public/Bug/Display.html?id=54112#txn-726877">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;30&nbsp;11:25:52&nbsp;2010</span>
    <span class="description">gert.kello [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #54112] libintl-perl 1.20 unhandled win32 exception  with strawberry Perl</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 30 Jan 2010 18:24:49 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libintl-perl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Gert Kello &lt;gert.kello [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/726877/375419/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/375419">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
<div class="message-stanza open">&gt; &gt;
&gt; &gt; BTW, do You check during install that the gettext library is present in
&gt; &gt; system? As far as I can tell, it is not in my PATH...
</div>&gt;
&gt; When you build libintl-perl, the first line of output reads &#34;Checking
&gt; whether we can compile the XS version ...&#34;. Does that answer your question?
&gt;
&gt;
</div>Well, I also did read the README.win32, it did talk about ActiveState perl &#38;
skipping the xs version. For some reason I thought You are checking the Perl
interpreter...

The binding &#40;libintl-perl&#41;, the script interpreter &#40;strawberry perl&#41; or
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; the library &#40;gettext&#41; cause the crash, and it is highly unlikely that
&gt; the binding is the culprit in this case.  Please ask the maintainers of
&gt; strawberry perl whether they can reproduce the problem on their
&gt; machines.  They have at least the same operating system.
&gt;
</div>
My first call was them. And they suggested to report here.

I narrowed down this problem a bit:
gettext_xs.pm file, line 136

sub bindtextdomain &#40;$;$&#41; {
    my &#40;$domain, $directory&#41; = @_;
    if &#40;defined $domain
    &#38;&#38; length $domain
    &#38;&#38; defined $directory
    &#38;&#38; length $directory
&#40;I added some line breaks to set comments&#41;
seems like the &#34;defined $directory&#34; causes that error when called like
my $bound_domain = bindtextdomain &#39;existing&#39;;
03bindtextdomain_xs.t, line 30

if I comment out the &#34;&#38;&#38; defined $directory &#38;&#38; length $directory&#34; part, then
error does not happen anymore &#40;it happens if just the &#34;&#38;&#38; length $directory&#34;
is commented out&#41; It also does not happen if called is modified to be
my $bound_domain = bindtextdomain &#39;existing&#39;, &#39;1&#39;;

Really sounds like something has messed up the memory structures..
Unfortunately I&#39;m really green in the whole perl area &#40;newbie in perl
itself, c/c++ and also in gnu toolchain&#41;. so it really takes me time to find
out the error reasons...

Regards,
Gert
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/726877/375420/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/375420">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.4k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-727341" href="/Public/Bug/Display.html?id=54112#txn-727341">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;01&nbsp;04:55:28&nbsp;2010</span>
    <span class="description">gert.kello [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> csjewell [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #54112] libintl-perl 1.20 unhandled win32 exception  with strawberry Perl</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 1 Feb 2010 11:53:51 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libintl-perl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Gert Kello &lt;gert.kello [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/727341/375641/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/375641">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;
&gt; The binding &#40;libintl-perl&#41;, the script interpreter &#40;strawberry perl&#41; or
<div class="message-stanza open">&gt;&gt; the library &#40;gettext&#41; cause the crash, and it is highly unlikely that
&gt;&gt; the binding is the culprit in this case.  Please ask the maintainers of
&gt;&gt; strawberry perl whether they can reproduce the problem on their
&gt;&gt; machines.  They have at least the same operating system.
&gt;&gt;
</div>&gt;
&gt;
&gt; if I comment out the &#34;&#38;&#38; defined $directory &#38;&#38; length $directory&#34; part,
&gt; then error does not happen anymore &#40;it happens if just the &#34;&#38;&#38; length
&gt; $directory&#34; is commented out&#41; It also does not happen if called is modified
&gt; to be
&gt; my $bound_domain = bindtextdomain &#39;existing&#39;, &#39;1&#39;;
&gt;
</div>
I feel SO stupid at moment...
Well, digging a bit into source &#38; getting my perl debugger to work again:
The following calls to bindtextdomain fail:

    return &#38;Locale::gettext_xs::_bindtextdomain;
    return &#38;Locale::gettext_xs::_bindtextdomain&#40;&#39;&#39;,&#39;&#39;&#41;;
    return &#38;Locale::gettext_xs::_bindtextdomain&#40;&#39;existing&#39;&#41;;

The following ones work:
    return &#38;Locale::gettext_xs::_bindtextdomain&#40;&#39;existing&#39;, &#39;.&#39;&#41;;
    return &#38;Locale::gettext_xs::_bindtextdomain&#40;&#39;&#39;, &#39;.&#39;&#41;;
    return &#38;Locale::gettext_xs::_bindtextdomain&#40;undef&#40;&#41;, &#39;.&#39;&#41;;

Seems to be caused by the error made while porting gettext into win32. The
original bindtextdomain function is

char *
BINDTEXTDOMAIN &#40;const char *domainname, const char *dirname&#41;
{
  set_binding_values &#40;domainname, &#38;dirname, NULL&#41;;
  return &#40;char *&#41; dirname;
}

but seems like the gnuwin32 port &#40;
<span class="clickylink"><a target="new" rel="nofollow" href="http://gnuwin32.sourceforge.net/packages/gettext.htm&#41;">http://gnuwin32.sourceforge.net/packages/gettext.htm&#41;</a></span> misses the safeguard
for NULL dirname
char *
BINDTEXTDOMAIN &#40;const char *domainname, const char *dirname&#41;
{
  if &#40;!access &#40;dirname, R_OK&#41;&#41; {
      set_binding_values &#40;domainname, &#38;dirname, NULL&#41;;
      return &#40;char *&#41; dirname;
  } else {
      char *locale_dirname, *installdir = strdup &#40;dirname&#41;, *s;
      if &#40;&#40;s = strrchr &#40;installdir, &#39;/&#39;&#41;&#41;&#41; *s = &#39;\0&#39;;
      if &#40;&#40;s = strrchr &#40;installdir, &#39;/&#39;&#41;&#41;&#41; *s = &#39;\0&#39;;
      locale_dirname = relocatex &#40;installdir, dirname&#41;;
      set_binding_values &#40;domainname, &#40;const char **&#41; &#38;locale_dirname,
NULL&#41;;
      if &#40;installdir&#41;
          free &#40;installdir&#41;;
      return &#40;char *&#41; locale_dirname;
  }
}

I will carry this case over to gnuwin32

Gert
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/727341/375642/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/375642">with headers</a>
<br />
<span class="downloadcontenttype">text/html 3k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-727399" href="/Public/Bug/Display.html?id=54112#txn-727399">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;01&nbsp;08:11:37&nbsp;2010</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> csjewell [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/727399/375670/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/375670">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 303b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

can you try to git update libintl-perl?

Alternatively, change gettext_xs/gettext_xs.xs lines 250-252 to read
like this:

        /* Treat empty or undefined strings as NULL.  */
        if &#40;!domain || domain[0] == &#39;\000&#39;&#41;
                XSRETURN_UNDEF;

Does that fix your problem?

Cheers,
Guido
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-727402" href="/Public/Bug/Display.html?id=54112#txn-727402">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;01&nbsp;08:19:01&nbsp;2010</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> csjewell [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/727402/375673/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/375673">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 523b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Am Mo 01. Feb 2010, 08:11:37, GUIDO wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;         /* Treat empty or undefined strings as NULL.  */
&gt;         if &#40;!domain || domain[0] == &#39;\000&#39;&#41;
&gt;                 XSRETURN_UNDEF;
&gt; 
&gt; Does that fix your problem?
</div>
If yes, the case is pretty clear.  Your &#40;C&#41; version of bindtextdomain&#40;&#41;
segfaults if it receives a NULL pointer for the first argument &#40;the
textdomain&#41;.  The GNU and Solaris version obviously handles this case
gracefully.

I don&#39;t think that this has anything to do with you Perl interpreter.

Cheers,
Guido
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-727612" href="/Public/Bug/Display.html?id=54112#txn-727612">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;01&nbsp;15:39:15&nbsp;2010</span>
    <span class="description">gert.kello [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #54112] libintl-perl 1.20 unhandled win32 exception  with strawberry Perl</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 1 Feb 2010 22:38:06 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libintl-perl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Gert Kello &lt;gert.kello [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/727612/375781/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/375781">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 815b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 1 February 2010 15:19, GUIDO via RT &lt;bug-libintl-perl@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=54112">https://rt.cpan.org/Ticket/Display.html?id=54112</a></span> &gt;
&gt;
&gt; Am Mo 01. Feb 2010, 08:11:37, GUIDO wrote:
<div class="message-stanza open">&gt; &gt;         /* Treat empty or undefined strings as NULL.  */
&gt; &gt;         if &#40;!domain || domain[0] == &#39;\000&#39;&#41;
&gt; &gt;                 XSRETURN_UNDEF;
&gt; &gt;
&gt; &gt; Does that fix your problem?
</div>&gt;
&gt; If yes, the case is pretty clear.  Your &#40;C&#41; version of bindtextdomain&#40;&#41;
&gt; segfaults if it receives a NULL pointer for the first argument &#40;the
&gt; textdomain&#41;.  The GNU and Solaris version obviously handles this case
&gt; gracefully.
&gt;
&gt;
</div>Hi.

I tried to tell that the GnuWin32 port of gettext library has a problem that
it segfaults if the &#34;directory&#34; parameter is NULL - GnuWin32 to blame here.

It works fine if the &#34;domain&#34; parameter is NULL.

Gert
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/727612/375782/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/375782">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.2k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-727801" href="/Public/Bug/Display.html?id=54112#txn-727801">#</a>      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;02&nbsp;02:57:06&nbsp;2010</span>
    <span class="description">gert.kello [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> csjewell [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #54112] libintl-perl 1.20 unhandled win32 exception  with strawberry Perl</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 2 Feb 2010 09:56:08 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libintl-perl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Gert Kello &lt;gert.kello [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/727801/375878/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/375878">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 96b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Reported in GnuWin32 project:

<span class="clickylink"><a target="new" rel="nofollow" href="https://sourceforge.net/support/tracker.php?aid=2944447">https://sourceforge.net/support/tracker.php?aid=2944447</a></span>

Gert

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/727801/375879/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/375879">with headers</a>
<br />
<span class="downloadcontenttype">text/html 373b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1169692" href="/Public/Bug/Display.html?id=54112#txn-1169692">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;14&nbsp;11:24:35&nbsp;2013</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1169692/616746/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/616746">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 10b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Not a bug.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1169694" href="/Public/Bug/Display.html?id=54112#txn-1169694">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;14&nbsp;11:24:36&nbsp;2013</span>
    <span class="description">GUIDO [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.813299</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
