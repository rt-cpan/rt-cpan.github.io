<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #72638 for SQL-Statement: [CODE] Filling in the SQL92 gaps for functions</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #72638 for SQL-Statement: [CODE] Filling in the SQL92 gaps for functions</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/SQL-Statement/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/SQL-Statement/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/SQL-Statement/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/SQL-Statement/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/SQL-Statement">SQL-Statement CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">72638</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">50 hours (3000 min)

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/SQL-Statement/Active/">SQL-Statement</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
BBYRD [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
mjevans [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-29588-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-29589-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Functions-patch.txt.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1125352/592012/Functions-patch.txt.gz">
Tue Oct 02 15:28:51 2012 (22.7k) by BBYRD [...] cpan.org
</a>
</font></li>
</ul>


Functions-patch.zip<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1012230/527670/Functions-patch.zip">
Fri Dec 16 02:37:38 2011 (75.2k) by BBYRD [...] cpan.org
</a>
</font></li>
</ul>


SQL-Functions.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1002992/522573/SQL-Functions.pl">
Wed Nov 23 00:52:16 2011 (9.6k) by BBYRD [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;23&nbsp;00:52:16&nbsp;2011</span>
    <span class="description">BBYRD [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [CODE] Filling in the SQL92 gaps for functions</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Needs some testing, but this code fills in almost all of the missing
functions from the SQL-92 standard.  A vast majority of them are
pre-existing Perl functions or one-liners, so these are the ones I&#39;ve
implemented here.  Because of this, the GetInfo sub should also
implement the following &#40;includes a few corrections&#41;:

my %r = %DBI::Const::GetInfo::ODBC::ReturnValues;
my %i = %DBI::Const::GetInfo::ODBC::InfoTypes;

$info{ $i{SQL_CREATE_TABLE} }             = $r{SQL_CT_CREATE_TABLE} +
$r{SQL_CT_COMMIT_DELETE} + $r{SQL_CT_LOCAL_TEMPORARY};
$info{ $i{SQL_COLUMN_ALIAS} }             = &#39;Y&#39;;
$info{ $i{SQL_SQL92_DATETIME_FUNCTIONS} } = $r{SQL_SDF_CURRENT_DATE} +
$r{SQL_SDF_CURRENT_TIME} + $r{SQL_SDF_CURRENT_TIMESTAMP};
$info{ $i{SQL_NUMERIC_FUNCTIONS} }        = 0x00ffffff  # all of them!
$info{ $i{SQL_SQL92_NUMERIC_VALUE_FUNCTIONS} } = $r{SQL_SNVF_BIT_LENGTH}
+ $r{SQL_SNVF_CHAR_LENGTH} + $r{SQL_SNVF_CHARACTER_LENGTH} +
$r{SQL_SNVF_OCTET_LENGTH} + $r{SQL_SNVF_POSITION};  # &#40;only missing EXTRACT&#41;
$info{ $i{SQL_SQL92_STRING_FUNCTIONS} }   = 0x000000fe;  # &#40;now with
TRANSLATE support; only missing CONVERT here&#41;
$info{ $i{SQL_STRING_FUNCTIONS} }         = 0x00ff7fff;  # &#40;only missing
DIFFERENCE&#41;
$info{ $i{SQL_SYSTEM_FUNCTIONS} }         = $r{SQL_FN_SYS_DBNAME} +
$r{SQL_FN_SYS_IFNULL} + $r{SQL_FN_SYS_USERNAME};

I still have a CONVERT/CAST function halfway done, though I&#39;ve been busy
with other things ATM.  In the meantime, can this be implemented to bulk
up the built-ins?
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> SQL-Functions.pl</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl

=head2 Numeric Functions

=head3 abs, ceiling, floor, round, truncate, exp, log, ln, log10, mod, power, rand, sign, sqrt

B&lt;ABS&gt;

 # purpose   : find the absolute value of a given numeric expression
 # arguments : numeric expression

=cut

sub SQL_FUNCTION_ABS { return abs&#40;$_[2]&#41;; }

=pod

B&lt;CEILING&gt; &#40;aka B&lt;CEIL&gt;&#41; &#38; B&lt;FLOOR&gt;

 # purpose   : rounds up/down to the nearest integer
 # arguments : numeric expression

=cut

sub SQL_FUNCTION_CEILING { my $i = int&#40;$_[2]&#41;; return $i == $_[2] ? $i : $i + 1; }
sub SQL_FUNCTION_FLOOR   { return int&#40;$_[2]&#41;; }
*SQL_FUNCTION_CEIL = \&#38;SQL_FUNCTION_CEILING;

=pod

B&lt;ROUND&gt;

 # purpose   : round X with Y number of digits
 # arguments : X, optional Y defaults to 0

=cut

sub SQL_FUNCTION_ROUND { return sprintf&#40;&#34;%.*f&#34;, int&#40;$_[3]&#41;, $_[2]&#41;; }

=pod

B&lt;TRUNCATE&gt; aka B&lt;TRUNC&gt;

 # purpose   : similar to ROUND, but removes the decimal
 # arguments : X, optional Y defaults to 0

=cut

sub SQL_FUNCTION_TRUNCATE { my $d = 10 ** int&#40;$_[3]&#41;; return sprintf&#40;&#34;%.*f&#34;, int&#40;$_[3]&#41;, int&#40;$_[2]*$d&#41; / $d&#41;; }
*SQL_FUNCTION_TRUNC = \&#38;SQL_FUNCTION_TRUNCATE;

=pod

B&lt;EXP&gt;

 # purpose   : raise e to the power of a number
 # arguments : numeric expression

=cut

sub SQL_FUNCTION_EXP { return &#40;sinh&#40;1&#41;+cosh&#40;1&#41;&#41; ** $_[2]; }  # e = sinh&#40;X&#41;+cosh&#40;X&#41;

=pod

B&lt;LOG&gt;

 # purpose   : base B logarithm of X
 # arguments : B, X or just one argument of X for base 10

=cut

sub SQL_FUNCTION_LOG { return $_[3] ? log&#40;$_[3]&#41; / log&#40;$_[2]&#41; : log&#40;$_[2]&#41; / log&#40;10&#41;; }

=pod

B&lt;LN&gt; &#38; B&lt;LOG10&gt;

 # purpose   : natural logarithm &#40;base e&#41; or base 10 of X
 # arguments : numeric expression

=cut

sub SQL_FUNCTION_LN    { return log&#40;$_[2]&#41;; }
sub SQL_FUNCTION_LOG10 { return SQL_FUNCTION_LOG&#40;@_[0..2]&#41;; }

=pod

B&lt;MOD&gt;

 # purpose   : modulus, or remainder, left over from dividing X / Y
 # arguments : X, Y

=cut

sub SQL_FUNCTION_MOD { return $_[2] % $_[3]; }

=pod

B&lt;POWER&gt; aka B&lt;POW&gt;

 # purpose   : X to the power of Y
 # arguments : X, Y

=cut

sub SQL_FUNCTION_POWER { return $_[2] ** $_[3]; }
*SQL_FUNCTION_POW = \&#38;SQL_FUNCTION_POWER;

=pod

B&lt;RAND&gt;

 # purpose   : random fractional number greater than or equal to 0 and less than the value of X
 # arguments : X &#40;with optional seed value of Y&#41;

=cut

sub SQL_FUNCTION_RAND { $_[3] &#38;&#38; srand&#40;$_[3]&#41;; return rand&#40;$_[2]&#41;; }

=pod

B&lt;SIGN&gt;

 # purpose   : returns -1, 0, 1, NULL for negative, 0, positive, NULL values, respectively
 # arguments : numeric expression

=cut

sub SQL_FUNCTION_SIGN { return defined&#40;$_[2]&#41; ? &#40;$_[2] &lt;=&gt; 0&#41; : undef; }

=pod

B&lt;SQRT&gt;

 # purpose   : square root of X
 # arguments : X

=cut

sub SQL_FUNCTION_SQRT { return sqrt&#40;$_[2]&#41;; }

=pod

=head2 Trigonometric Functions

=head3 acos, acosec, acosech, acosh, acot, acotan, acotanh, acoth, acsc, acsch, asec, asech, asin, asinh, atan, atan2, atanh, cos, cosec, cosech, cosh, cot, cotan, cotanh, coth, csc, csch, deg2deg, deg2grad, deg2rad, degrees, grad2deg, grad2grad, grad2rad, pi, rad2deg, rad2grad, rad2rad, radians, sec, sech, sin, sinh, tan, tanh

All of these functions work exactly like their counterparts in L&lt;Math::Trig&gt;; go there for documentation.  B&lt;RADIANS&gt; and B&lt;DEGREES&gt; are included for SQL-92 compatibility, and map to B&lt;DEG2RAD&gt; and B&lt;RAD2DEG&gt;, respectively.

=cut

use Math::Trig;  # core module since Perl 5.004

sub SQL_FUNCTION_ACOS      { return acos      &#40;$_[2]&#41;;        }
sub SQL_FUNCTION_ACOSEC    { return acosec    &#40;$_[2]&#41;;        }
sub SQL_FUNCTION_ACOSECH   { return acosech   &#40;$_[2]&#41;;        }
sub SQL_FUNCTION_ACOSH     { return acosh     &#40;$_[2]&#41;;        }
sub SQL_FUNCTION_ACOT      { return acot      &#40;$_[2]&#41;;        }sub SQL_FUNCTION_ACOTAN    { return acotan    &#40;$_[2]&#41;;        }sub SQL_FUNCTION_ACOTANH   { return acotanh   &#40;$_[2]&#41;;        }sub SQL_FUNCTION_ACOTH     { return acoth     &#40;$_[2]&#41;;        }sub SQL_FUNCTION_ACSC      { return acsc      &#40;$_[2]&#41;;        }sub SQL_FUNCTION_ACSCH     { return acsch     &#40;$_[2]&#41;;        }sub SQL_FUNCTION_ASEC      { return asec      &#40;$_[2]&#41;;        }sub SQL_FUNCTION_ASECH     { return asech     &#40;$_[2]&#41;;        }sub SQL_FUNCTION_ASIN      { return asin      &#40;$_[2]&#41;;        }sub SQL_FUNCTION_ASINH     { return asinh     &#40;$_[2]&#41;;        }sub SQL_FUNCTION_ATAN      { return atan      &#40;$_[2]&#41;;        }sub SQL_FUNCTION_ATAN2     { return atan2     &#40;$_[2], $_[3]&#41;; }sub SQL_FUNCTION_ATANH     { return atanh     &#40;$_[2]&#41;;        }sub SQL_FUNCTION_COS       { return cos       &#40;$_[2]&#41;;        }
sub SQL_FUNCTION_COSEC     { return cosec     &#40;$_[2]&#41;;        }
sub SQL_FUNCTION_COSECH    { return cosech    &#40;$_[2]&#41;;        }sub SQL_FUNCTION_COSH      { return cosh      &#40;$_[2]&#41;;        }sub SQL_FUNCTION_COT       { return cot       &#40;$_[2]&#41;;        }sub SQL_FUNCTION_COTAN     { return cotan     &#40;$_[2]&#41;;        }sub SQL_FUNCTION_COTANH    { return cotanh    &#40;$_[2]&#41;;        }
sub SQL_FUNCTION_COTH      { return coth      &#40;$_[2]&#41;;        }sub SQL_FUNCTION_CSC       { return csc       &#40;$_[2]&#41;;        }sub SQL_FUNCTION_CSCH      { return csch      &#40;$_[2]&#41;;        }sub SQL_FUNCTION_DEG2DEG   { return deg2deg   &#40;$_[2]&#41;;        }
sub SQL_FUNCTION_RAD2RAD   { return rad2rad   &#40;$_[2]&#41;;        }
sub SQL_FUNCTION_GRAD2GRAD { return grad2grad &#40;$_[2]&#41;;        }
sub SQL_FUNCTION_DEG2GRAD  { return deg2grad  &#40;$_[2], $_[3]&#41;; }sub SQL_FUNCTION_DEG2RAD   { return deg2rad   &#40;$_[2], $_[3]&#41;; }sub SQL_FUNCTION_DEGREES   { return rad2deg   &#40;$_[2], $_[3]&#41;; }sub SQL_FUNCTION_GRAD2DEG  { return grad2deg  &#40;$_[2], $_[3]&#41;; }sub SQL_FUNCTION_GRAD2RAD  { return grad2rad  &#40;$_[2], $_[3]&#41;; }sub SQL_FUNCTION_PI        { return pi;                       }sub SQL_FUNCTION_RAD2DEG   { return rad2deg   &#40;$_[2], $_[3]&#41;; }sub SQL_FUNCTION_RAD2GRAD  { return rad2grad  &#40;$_[2], $_[3]&#41;; }sub SQL_FUNCTION_RADIANS   { return deg2rad   &#40;$_[2], $_[3]&#41;; }sub SQL_FUNCTION_SEC       { return sec       &#40;$_[2]&#41;;        }sub SQL_FUNCTION_SECH      { return sech      &#40;$_[2]&#41;;        }sub SQL_FUNCTION_SIN       { return sin       &#40;$_[2]&#41;;        }sub SQL_FUNCTION_SINH      { return sinh      &#40;$_[2]&#41;;        }sub SQL_FUNCTION_TAN       { return tan       &#40;$_[2]&#41;;        }sub SQL_FUNCTION_TANH      { return tanh      &#40;$_[2]&#41;;        }
=head2 String Functions

=head3 --- Attach to existing #String_Functions ---

B&lt;BIT_LENGTH&gt;

 # purpose   : length of the string in bits
 # arguments : string

=cut

*SQL_FUNCTION_IFNULL           = \&#38;SQL_FUNCTION_COALESCE;
*SQL_FUNCTION_CHARACTER_LENGTH = \&#38;SQL_FUNCTION_CHARACTER_LENGTH;
*SQL_FUNCTION_UCASE            = \&#38;SQL_FUNCTION_UPPER;
*SQL_FUNCTION_LCASE            = \&#38;SQL_FUNCTION_LOWER;

sub SQL_FUNCTION_BIT_LENGTH {
   my @v = @_[0..1]; my $str = $_[2];
   # Number of bits on first character = CEIL&#40;LOG2&#40;ord&#40;$str&#41;&#41;&#41; + rest of string = OCTET_LENGTH&#40;substr&#40;$str, 1&#41;&#41; * 8
   return SQL_FUNCTION_CEILING&#40;@v, SQL_FUNCTION_LOG&#40;@v, ord&#40;$str&#41;, 2&#41;&#41; + SQL_FUNCTION_OCTET_LENGTH&#40;@v, substr&#40;$str, 1&#41;&#41; * 8;
}

=pod

B&lt;OCTET_LENGTH&gt;

 # purpose   : length of the string in bytes &#40;not characters&#41;
 # arguments : string

=cut

use Encode;  # core module since Perl 5.7.1

sub SQL_FUNCTION_OCTET_LENGTH { return length&#40;Encode::encode_utf8&#40;$_[2]&#41;&#41;; }  # per Perldoc

=pod

B&lt;TRANSLATE&gt;

 # purpose   : transliteration; replace a set of characters in a string with another set of characters &#40;a la tr///&#41;
 # arguments : string, string to replace, replacement string

=cut

sub SQL_FUNCTION_TRANSLATE {
   my &#40;$self, $owner, $str, $oldlist, $newlist&#41; = @_;
   $oldlist =~ s{&#40;/\-&#41;}{\\$1}g;
   $newlist =~ s{&#40;/\-&#41;}{\\$1}g;
   eval &#34;$str =~ tr/$oldlist/$newlist/&#34;;
   return $str;
}

=pod

B&lt;ASCII&gt; &#38; B&lt;CHAR&gt;

 # purpose   : same as ord and chr, respectively
 # arguments : string or character &#40;or number for CHAR&#41;

=cut

sub SQL_FUNCTION_ASCII { return ord&#40;$_[2]&#41;; }
sub SQL_FUNCTION_CHAR  { return chr&#40;$_[2]&#41;; }

=pod

B&lt;INSERT&gt;

 # purpose   : string where L characters have been deleted from STR1, beginning at S, and where STR2 has been inserted into STR1, beginning at S.
 # arguments : STR1, S, L, STR2

=cut

sub SQL_FUNCTION_INSERT {  # just like a 4-parameter substr in Perl
   my $str = $_[2];
   substr&#40;$str, @_[3..5]&#41;;
   return $str; 
}

=pod

B&lt;LOCATE&gt;

 # purpose   : starting position &#40;one-based&#41; of the first occurrence of STR1 within STR2
 # arguments : STR1, STR2, and an optional S &#40;starting position to search&#41;

=cut

sub SQL_FUNCTION_LOCATE {
   my &#40;$self, $owner, $substr, $str, $s&#41; = @_;
   $s = int&#40;$s&#41;;
   my $pos = index&#40; substr&#40;$str, $s&#41;, $substr &#41; + 1;
   return $pos &#38;&#38; $pos + $s;
}

=pod

B&lt;LEFT&gt; &#38; B&lt;RIGHT&gt;

 # purpose   : leftmost or rightmost L characters in STR
 # arguments : STR1, L

=cut

sub SQL_FUNCTION_LEFT  { return substr&#40;$_[2], 0, $_[3]&#41;; }
sub SQL_FUNCTION_RIGHT { return substr&#40;$_[2], -$_[3]&#41;; }

=pod

B&lt;LTRIM&gt; &#38; B&lt;RTRIM&gt;

 # purpose   : left/right counterparts for TRIM
 # arguments : string

=cut

sub SQL_FUNCTION_LTRIM {
   my $str = $_[2];
   $str =~ s/^\s+//;
   return $str; 
}
sub SQL_FUNCTION_RTRIM {
   my $str = $_[2];
   $str =~ s/\s+$//;
   return $str; 
}

=pod

B&lt;REPEAT&gt;

 # purpose   : string composed of STR1 repeated C times.
 # arguments : STR1, C

=cut

sub SQL_FUNCTION_REPEAT { return $_[2] x int&#40;$_[3]&#41;; }

=pod

B&lt;SPACE&gt;

 # purpose   : a string of spaces
 # arguments : number of spaces

=cut

sub SQL_FUNCTION_SPACE { return &#39; &#39; x int&#40;$_[2]&#41;; }

=head2 System Functions

=head3 

B&lt;DBNAME&gt; &#38; B&lt;USERNAME&gt;

 # purpose   : name of the database / username
 # arguments : none

=cut

sub SQL_FUNCTION_DBNAME   { return $_[1]-&gt;{Database}{Name};         }
sub SQL_FUNCTION_USERNAME { return $_[1]-&gt;{Database}{CURRENT_USER}; }
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;25&nbsp;05:20:50&nbsp;2011</span>
    <span class="description">REHSACK [...] cpan.org -  Cc mjevans@cpan.org added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;25&nbsp;05:20:51&nbsp;2011</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Martin, can you please verify the request? I can&#39;t do &#40;lack of
knowledge&#41; and would apply the patch upon your instructions when working
on next S::S release.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;25&nbsp;05:20:52&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;25&nbsp;14:04:14&nbsp;2011</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Nov 25 05:20:51 2011, REHSACK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Martin, can you please verify the request? I can&#39;t do &#40;lack of
&gt; knowledge&#41; and would apply the patch upon your instructions when working
&gt; on next S::S release.
</div>
I can verify the getinfo bit but only if you tell me that the attached
SQL-Functions.pl are really included with S::S. I don&#39;t directly use
S::S so are the functions mentioned in SQL-Functions.pl already
supported in S::S or are you adding them?

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;26&nbsp;15:10:23&nbsp;2011</span>
    <span class="description">BBYRD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Nov 25 14:04:14 2011, MJEVANS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I can verify the getinfo bit but only if you tell me that the attached
&gt; SQL-Functions.pl are really included with S::S. I don&#39;t directly use
&gt; S::S so are the functions mentioned in SQL-Functions.pl already
&gt; supported in S::S or are you adding them?
</div>
These are additions.  They would go into the appropriate &#40;or new&#41;
sections within SQL::Statement::Functions, the built-in functions
section.  There would also be some test cases to create, updates to the
S:S:F docs to remove the bogus $rowhash parameter, and a small list
update to the Built-In Functions section in SQL::Statement::Syntax.

Would you like me to write a full patch on this?  I just wanted to throw
this out there to make sure it was good to be implemented.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;27&nbsp;02:31:26&nbsp;2011</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Nov 26 15:10:23 2011, BBYRD wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri Nov 25 14:04:14 2011, MJEVANS wrote:
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; I can verify the getinfo bit but only if you tell me that the attached
&gt; &gt; SQL-Functions.pl are really included with S::S. I don&#39;t directly use
&gt; &gt; S::S so are the functions mentioned in SQL-Functions.pl already
&gt; &gt; supported in S::S or are you adding them?
</div>&gt; 
&gt; These are additions.
</div>
Then it&#39;s probably on me to answer.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  They would go into the appropriate &#40;or new&#41;
&gt; sections within SQL::Statement::Functions, the built-in functions
&gt; section.  There would also be some test cases to create, updates to the
&gt; S:S:F docs to remove the bogus $rowhash parameter,
</div>
I reworked all built-in functions when rewriting the row execution.
I&#39;m currently unsure whether the $rowhash attribute of SQL::Statement is
required and may be required by some functions &#40;but they need all the
same API&#41;.

Have a look into SQL::Statement::Function how they get called now.

Before you remove anything, please write tests to approve _all_
functions working correctly &#40;do the tests as the newly written
full-flavor-tests&#41;. The tests may also cover your newly written DBD&#39;s
&#40;even if I&#39;m not sure that they&#39;re necessary&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; and a small list
&gt; update to the Built-In Functions section in SQL::Statement::Syntax.
</div>
That would be welcome.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Would you like me to write a full patch on this?  I just wanted to throw
&gt; this out there to make sure it was good to be implemented.
</div>
It would be good in general when the get_info method of DBI will get
correct and complete values from SQL::Statement::GetInfo. Please start
your effort there.

Finally, please don&#39;t do RT&#39;s like this - ask on dbi-dev@ when you have
questions. I&#39;m very busy and looking on your last RT&#39;s, beside one I
expect I will not be able to do handle them but have to reject them,
because of no patch, no tests - just some idea put into a ticket queue.
And: the idea is not grounded - you didn&#39;t research for currently
existing solutions &#40;seems you know DBD::CSV only&#41; and how to adapt them,
didn&#39;t read DBI::DBD::SqlEngine neither it&#39;s developer manual.

Please - either start asking on dbi-dev@ or dbi-users@ or ask in irc.
Otherwise one fine day I don&#39;t have a choice but rejecting your tickets
because of
<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/dist/SQL-Statement-1.33/lib/SQL/Statement.pm#SUPPORT">http://search.cpan.org/dist/SQL-Statement-1.33/lib/SQL/Statement.pm#SUPPORT</a></span>
- read again, please.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;28&nbsp;10:44:58&nbsp;2011</span>
    <span class="description">BBYRD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Nov 27 02:31:26 2011, REHSACK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I reworked all built-in functions when rewriting the row execution.
&gt; I&#39;m currently unsure whether the $rowhash attribute of SQL::Statement is
&gt; required and may be required by some functions &#40;but they need all the
&gt; same API&#41;.
&gt; 
&gt; Have a look into SQL::Statement::Function how they get called now.
</div>
I already checked S:S:Functions and they all start with &#40;$self, $owner,
other params&#41;.  This is a disconnect between what the docs say and what
all of the other functions say, hence a source of confusion.  I see no
indication of $rowhash within S:S:Function &#40;singular&#41;.  I think this
parameter had been removed at some point.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Before you remove anything, please write tests to approve _all_
&gt; functions working correctly &#40;do the tests as the newly written
&gt; full-flavor-tests&#41;. The tests may also cover your newly written DBD&#39;s
&gt; &#40;even if I&#39;m not sure that they&#39;re necessary&#41;.
</div>
Are there any examples of built-in function testing?  &#40;Don&#39;t see
anything obvious in t/*.&#41;  Otherwise, it looks like I&#39;ll need to bang
out a test platform for the existing ones as well.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Would you like me to write a full patch on this?  I just wanted to throw
&gt; &gt; this out there to make sure it was good to be implemented.
</div>&gt; 
&gt; It would be good in general when the get_info method of DBI will get
&gt; correct and complete values from SQL::Statement::GetInfo. Please start
&gt; your effort there.
</div>
Sure.  What do you mean &#34;when the get_info method of DBI will get
correct&#34;?  Are there inaccuracies with the ODBC codes within DBI, or do
you just want me to add the changes I detailed?  &#40;Using the number and
comment style from S:S:GI, of course.  I favor consistency over anything
else.&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Finally, please don&#39;t do RT&#39;s like this - ask on dbi-dev@ when you have
&gt; questions. I&#39;m very busy and looking on your last RT&#39;s, beside one I
&gt; expect I will not be able to do handle them but have to reject them,
&gt; because of no patch, no tests - just some idea put into a ticket queue.
</div>
Well, if it needs to be stalled, that&#39;s fine, but please don&#39;t reject
them on the basis of a lack of patch.  Some of the tickets are there to
capture the idea as something that should be fixed in the future, even
if I don&#39;t immediately throw out a patch.  I tend to view tickets and
emails differently: tickets track things forever, and email is for
discussions that may eventually be forgotten about.

But, yeah, I will at least do some preliminary discussions on dbi-dev@
for these cases.  I added this one into RT because I already had a
semi-patch available. 

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; And: the idea is not grounded - you didn&#39;t research for currently
&gt; existing solutions &#40;seems you know DBD::CSV only&#41; and how to adapt them,
</div>
After studying the code and documentation for DBI and S:S for the last 6
months, I think I&#39;m pretty well-versed on many of the functions within
the two modules.  And many of the issues involve problems with S:S or
DBI, not a specific DBD module.  Whether or not I implement some sort of
solution in the DBD module doesn&#39;t mean the root cause is fixed.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; didn&#39;t read DBI::DBD::SqlEngine neither it&#39;s developer manual.
</div>
I tend to focus on S:S, since the statement development is more robust.
 Yes, I do need to go back and make some things compatible for Nano, but
in some cases, S:S will just be a module dependency for that DBD module.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Please - either start asking on dbi-dev@ or dbi-users@ or ask in irc.
&gt; Otherwise one fine day I don&#39;t have a choice but rejecting your tickets
&gt; because of
&gt;
</div><span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/dist/SQL-Statement-1.33/lib/SQL/Statement.pm#SUPPORT">http://search.cpan.org/dist/SQL-Statement-1.33/lib/SQL/Statement.pm#SUPPORT</a></span>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; - read again, please.
</div>
Which tells me to add the ticket to RT with a detailed description.  I
do that for most of the tickets.  Regardless, I&#39;ll go ahead and
introduce the concept to dbi-dev@ / IRC first.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;16&nbsp;02:37:38&nbsp;2011</span>
    <span class="description">BBYRD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">3000 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Finally got this out there.  A lot of good updates to the test plan as
well.  I&#39;ve included the test reports in the ZIP as well.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Functions-patch.zip</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1012230/527670/Functions-patch.zip">Download Functions-patch.zip</a><br />
<span class="downloadcontenttype">application/x-zip 75.2k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;02&nbsp;14:28:05&nbsp;2012</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Dec 16 02:37:38 2011, BBYRD wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Finally got this out there.  A lot of good updates to the test plan as
&gt; well.  I&#39;ve included the test reports in the ZIP as well.
</div>
Can you resend the patch as unified diff?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;02&nbsp;15:28:51&nbsp;2012</span>
    <span class="description">BBYRD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Oct 02 14:28:05 2012, REHSACK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri Dec 16 02:37:38 2011, BBYRD wrote:
<div class="message-stanza open">&gt; &gt; Finally got this out there.  A lot of good updates to the test plan as
&gt; &gt; well.  I&#39;ve included the test reports in the ZIP as well.
</div>&gt; 
&gt; Can you resend the patch as unified diff?
</div>
Sure.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Functions-patch.txt.gz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1125352/592012/Functions-patch.txt.gz">Download Functions-patch.txt.gz</a><br />
<span class="downloadcontenttype">application/x-targz 22.7k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;04&nbsp;07:51:04&nbsp;2012</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Oct 02 15:28:51 2012, BBYRD wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue Oct 02 14:28:05 2012, REHSACK wrote:
<div class="message-stanza open">&gt; &gt; On Fri Dec 16 02:37:38 2011, BBYRD wrote:
<div class="message-stanza open">&gt; &gt; &gt; Finally got this out there.  A lot of good updates to the test plan as
&gt; &gt; &gt; well.  I&#39;ve included the test reports in the ZIP as well.
</div>&gt; &gt; 
&gt; &gt; Can you resend the patch as unified diff?
</div>&gt; 
&gt; Sure.
</div>
Thanks - was good to do that, because of some hunks failed to apply &#40;and
universal diff is much easier to read for reviewing and manual applying&#41;.

Committed with minor changes &#40;local disable &#39;refs&#39; warning, rewrite
uninitialized, ...&#41; - if you like you can review commit on revision 15417.

Thanks a lot for that impressive work.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;29&nbsp;09:45:34&nbsp;2012</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Release is out containing the included patch. Thanks for submitting.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;29&nbsp;09:45:35&nbsp;2012</span>
    <span class="description">REHSACK [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
