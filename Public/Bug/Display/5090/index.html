<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #5090 for Net-DNS: Insecure Dependency in Net::DNS with Cygwin</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #5090 for Net-DNS: Insecure Dependency in Net::DNS with Cygwin</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-DNS/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-DNS">Net-DNS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">5090</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-DNS/Active/">Net-DNS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">rt-cpan [...] triv.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
caelum [...] debian.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-22454-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.45    </td>
  </tr>
  <tr id="CF-22455-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;28&nbsp;13:32:42&nbsp;2004</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Insecure Dependency in Net::DNS with Cygwin</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Somehow Net::DNS is failing a UDP query, then is trying to send out a TCP query with tainted data under Cygwin. Debug output and backtrace attached.

Tried with CPAN version and development snapshot of Net::DNS.

Also reported here:

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.cygwin.com/ml/cygwin/2004-01/msg01280.html">http://www.cygwin.com/ml/cygwin/2004-01/msg01280.html</a></span>

The script that generates this error is:

------------------------
#!/usr/bin/perl -T

use strict;
use warnings;
use Net::DNS;
use Carp;

$SIG{__DIE__} = sub { confess @_ };

my $res = Net::DNS::Resolver-&gt;new&#40;debug =&gt; 1&#41;;
my  @mx = mx&#40;$res, &#34;customoffers.com&#34;&#41;;
------------------------

Operating System:

Cygwin 1.5.7+ &#40;CVS snapshot&#41;, Windows XP Pro

My perl -V output:

Summary of my perl5 &#40;revision 5.0 version 8 subversion 2&#41; configuration:
  Platform:
    osname=cygwin, osvers=1.5.5&#40;0.9432&#41;, archname=cygwin-thread-multi-64int
    uname=&#39;cygwin_nt-5.0 troubardix 1.5.5&#40;0.9432&#41; 2003-09-20 16:31 i686 unknown unknown cygwin &#39;
    config_args=&#39;-de -Dmksymlinks -Duse64bitint -Dusethreads -Doptimize=-O2 -Dman3ext=3pm&#39;
    hint=recommended, useposix=true, d_sigaction=define
    usethreads=define use5005threads=undef useithreads=define usemultiplicity=define
    useperlio=define d_sfio=undef uselargefiles=define usesocks=undef
    use64bitint=define use64bitall=undef uselongdouble=undef
    usemymalloc=y, bincompat5005=undef
  Compiler:
    cc=&#39;gcc&#39;, ccflags =&#39;-DPERL_USE_SAFE_PUTENV -fno-strict-aliasing&#39;,
    optimize=&#39;-O2&#39;,
    cppflags=&#39;-DPERL_USE_SAFE_PUTENV -fno-strict-aliasing&#39;
    ccversion=&#39;&#39;, gccversion=&#39;3.3.1 &#40;cygming special&#41;&#39;, gccosandvers=&#39;&#39;
    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=12
    ivtype=&#39;long long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;, lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;ld2&#39;, ldflags =&#39; -s -L/usr/local/lib&#39;
    libpth=/usr/local/lib /usr/lib /lib
    libs=-lgdbm -ldb -lcrypt -lgdbm_compat
    perllibs=-lcrypt -lgdbm_compat
    libc=/usr/lib/libc.a, so=dll, useshrplib=true, libperl=libperl.a
    gnulibc_version=&#39;&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=dll, d_dlsymun=undef, ccdlflags=&#39; -s&#39;
    cccdlflags=&#39; &#39;, lddlflags=&#39; -s -L/usr/local/lib&#39;


Characteristics of this binary &#40;from libperl&#41;: 
  Compile-time options: MULTIPLICITY USE_ITHREADS USE_64_BIT_INT USE_LARGE_FILES PERL_IMPLICIT_CONTEXT
  Built under cygwin
  Compiled at Nov  7 2003 12:06:28
  %ENV:
    PERLDOC_PAGER=&#34;less -isrRqX&#34;
    CYGWIN=&#34;tty export glob ntsec winsymlinks check_case:strict server&#34;
  @INC:
    /usr/lib/perl5/5.8.2/cygwin-thread-multi-64int
    /usr/lib/perl5/5.8.2
    /usr/lib/perl5/site_perl/5.8.2/cygwin-thread-multi-64int
    /usr/lib/perl5/site_perl/5.8.2
    /usr/lib/perl5/site_perl
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">;; query&#40;customoffers.com, MX, IN&#41;
;; send_udp&#40;192.168.1.243:53&#41;
;; send_udp&#40;192.168.1.1:53&#41;
;; answer from 192.168.1.1:53 : 507 bytes
;; HEADER SECTION
;; id = 4853
;; qr = 1    opcode = QUERY    aa = 0    tc = 1    rd = 1
;; ra = 1    ad = 0    cd = 0    rcode  = NOERROR
;; qdcount = 1  ancount = 23  nscount = 0  arcount = 0

;; QUESTION SECTION &#40;1 record&#41;
;; customoffers.com.	IN	MX

;; ANSWER SECTION &#40;23 records&#41;
customoffers.com.	38288	IN	MX	110 om7.customoffers.com.
customoffers.com.	38288	IN	MX	120 om8.customoffers.com.
customoffers.com.	38288	IN	MX	130 om9.customoffers.com.
customoffers.com.	38288	IN	MX	140 om10.customoffers.com.
customoffers.com.	38288	IN	MX	150 om11.customoffers.com.
customoffers.com.	38288	IN	MX	160 om12.customoffers.com.
customoffers.com.	38288	IN	MX	170 om13.customoffers.com.
customoffers.com.	38288	IN	MX	180 om14.customoffers.com.
customoffers.com.	38288	IN	MX	190 om15.customoffers.com.
customoffers.com.	38288	IN	MX	200 om16.customoffers.com.
customoffers.com.	38288	IN	MX	210 om17.customoffers.com.
customoffers.com.	38288	IN	MX	10 mail.customoffers.com.
customoffers.com.	38288	IN	MX	11 contact.customoffers.com.
customoffers.com.	38288	IN	MX	20 oc1.customoffers.com.
customoffers.com.	38288	IN	MX	30 oc2.customoffers.com.
customoffers.com.	38288	IN	MX	40 oc3.customoffers.com.
customoffers.com.	38288	IN	MX	45 oc4.customoffers.com.
customoffers.com.	38288	IN	MX	46 oc5.customoffers.com.
customoffers.com.	38288	IN	MX	50 om1.customoffers.com.
customoffers.com.	38288	IN	MX	60 om2.customoffers.com.
customoffers.com.	38288	IN	MX	70 om3.customoffers.com.
customoffers.com.	38288	IN	MX	80 om4.customoffers.com.
customoffers.com.	38288	IN	MX	90 om5.customoffers.com.

;; AUTHORITY SECTION &#40;0 records&#41;

;; ADDITIONAL SECTION &#40;0 records&#41;
;;
;; packet truncated: retrying using TCP
;; send_tcp&#40;192.168.1.243:53&#41; &#40;src port = 0&#41;
Insecure dependency in connect while running with -T switch at /usr/lib/perl5/5.8.2/cygwin-thread-multi-64int/IO/Socket.pm line 114.
	main::__ANON__&#40;&#39;Insecure dependency in connect while running with -T switch a...&#39;&#41; called at /usr/lib/perl5/5.8.2/cygwin-thread-multi-64int/IO/Socket.pm line 114
	IO::Socket::connect&#40;&#39;IO::Socket::INET=GLOB&#40;0xa2b2be8&#41;&#39;,&#39;\x{2}\x{0}\x{0}5\x{c0}\x{a8}\x{1}\x{f3}\x{0}\x{0}\x{0}\x{0}\x{0}\x{0}\x{0}\x{0}&#39;&#41; called at /usr/lib/perl5/5.8.2/IO/Socket/INET.pm line 224
	IO::Socket::INET::connect&#40;&#39;IO::Socket::INET=GLOB&#40;0xa2b2be8&#41;&#39;,&#39;\x{2}\x{0}\x{0}5\x{c0}\x{a8}\x{1}\x{f3}\x{0}\x{0}\x{0}\x{0}\x{0}\x{0}\x{0}\x{0}&#39;&#41; called at /usr/lib/perl5/5.8.2/IO/Socket/INET.pm line 199
	IO::Socket::INET::configure&#40;&#39;IO::Socket::INET=GLOB&#40;0xa2b2be8&#41;&#39;,&#39;HASH&#40;0xa27699c&#41;&#39;&#41; called at /usr/lib/perl5/5.8.2/cygwin-thread-multi-64int/IO/Socket.pm line 48
	IO::Socket::new&#40;&#39;IO::Socket::INET&#39;,&#39;PeerAddr&#39;,192.168.1.243,&#39;PeerPort&#39;,53,&#39;LocalAddr&#39;,0.0.0.0,&#39;LocalPort&#39;,&#39;undef&#39;,...&#41; called at /usr/lib/perl5/5.8.2/IO/Socket/INET.pm line 32
	IO::Socket::INET::new&#40;&#39;IO::Socket::INET&#39;,&#39;PeerAddr&#39;,192.168.1.243,&#39;PeerPort&#39;,53,&#39;LocalAddr&#39;,0.0.0.0,&#39;LocalPort&#39;,&#39;undef&#39;,...&#41; called at /usr/lib/perl5/site_perl/5.8.2/cygwin-thread-multi-64int/Net/DNS/Resolver/Base.pm line 492
	Net::DNS::Resolver::Base::send_tcp&#40;&#39;Net::DNS::Resolver=HASH&#40;0xa29f268&#41;&#39;,&#39;Net::DNS::Packet=HASH&#40;0xa1af28c&#41;&#39;,&#39;\x{12}\x{f5}\x{1}\x{0}\x{0}\x{1}\x{0}\x{0}\x{0}\x{0}\x{0}\x{0}\x{c}customoffers\x{3}com\x{0}\x{0}\x{f}\x{0}\x{1}&#39;&#41; called at /usr/lib/perl5/site_perl/5.8.2/cygwin-thread-multi-64int/Net/DNS/Resolver/Base.pm line 445
	Net::DNS::Resolver::Base::send&#40;&#39;Net::DNS::Resolver=HASH&#40;0xa29f268&#41;&#39;,&#39;Net::DNS::Packet=HASH&#40;0xa1af28c&#41;&#39;&#41; called at /usr/lib/perl5/site_perl/5.8.2/cygwin-thread-multi-64int/Net/DNS/Resolver/Base.pm line 423
	Net::DNS::Resolver::Base::query&#40;&#39;Net::DNS::Resolver=HASH&#40;0xa29f268&#41;&#39;,&#39;customoffers.com&#39;,&#39;MX&#39;,&#39;IN&#39;&#41; called at /usr/lib/perl5/site_perl/5.8.2/cygwin-thread-multi-64int/Net/DNS.pm line 299
	Net::DNS::mx&#40;&#39;Net::DNS::Resolver=HASH&#40;0xa29f268&#41;&#39;,&#39;customoffers.com&#39;&#41; called at taintmode-mx-lookup.pl line 11
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;06&nbsp;00:44:58&nbsp;2004</span>
    <span class="description">rt-cpan [...] triv.org -  Status changed from &#39;new&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;06&nbsp;00:44:58&nbsp;2004</span>
    <span class="description">rt-cpan [...] triv.org -  Given to CREIN</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
