<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #91316 for Net-OSCAR: Error when callback snac_error is triggered: Can&#39;t use string &#40;&#34;1&#34;&#41; as a subroutine ref....</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #91316 for Net-OSCAR: Error when callback snac_error is triggered: Can&#39;t use string &#40;&#34;1&#34;&#41; as a subroutine ref....</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-OSCAR/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-OSCAR/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-OSCAR/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-OSCAR/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-OSCAR">Net-OSCAR CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">91316</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">new</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-OSCAR/Active/">Net-OSCAR</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
starman617 [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-22974-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-22975-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;11&nbsp;00:01:36&nbsp;2013</span>
    <span class="description">starman617 [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Error when callback snac_error is triggered: Can&#39;t use string &#40;&#34;1&#34;&#41; as a subroutine ref....</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 10 Dec 2013 20:59:26 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-OSCAR [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Todd A &lt;starman617 [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

Software versions:

    Perl &#40;v5.16.0&#41; built for darwin-2level

    Net-OSCAR-1.928

    Mac OS X 10.7.5

    uname -a gives: Darwin Stormwind.private 11.4.2 Darwin Kernel
    Version 11.4.2: Thu Aug 23 16:25:48 PDT 2012;
    root:xnu-1699.32.7~1/RELEASE_X86_64 x86_64

_THE GOAL_

I&#39;m attempting to trap the following error:

         OSCAR session: Unknown SNAC 1/21:
           00 03 00 1E  68 74 74 70   3A 2F 2F 61  70 69 2E 61     .... 
http  ://a pi.a
           69 6D 2E 6E  65 74 2F 6C   69 66 65 73  74 72 65 61     im.n 
et/l  ifes trea
           6D 2F 00 04  00 2A 68 74   74 70 3A 2F  2F 6F 2E 61     m/.. 
.*ht  tp:/ /o.a
           6F 6C 63 64  6E 2E 63 6F   6D 2F 6C 69  66 65 73 74     olcd 
n.co  m/li fest
           72 65 61 6D  2F 63 6C 69   65 6E 74 2F  66 75 6C 6C     ream 
/cli  ent/ full
           00 05 00 28  68 74 74 70   3A 2F 2F 6F  2E 61 6F 6C     ...&#40; 
http  ://o .aol
           63 64 6E 2E  63 6F 6D 2F   6C 69 66 65  73 74 72 65     cdn. 
com/  life stre
           61 6D 2F 63  6C 69 65 6E   74 2F 6D 65  00 07 00 25     am/c 
lien  t/me ...%
           68 74 74 70  3A 2F 2F 6F   2E 61 6F 6C  63 64 6E 2E     http 
://o  .aol cdn.
           63 6F 6D 2F  6C 69 66 65   73 74 72 65  61 6D 2F 70     com/ 
life  stre am/p
           68 6F 74 6F  2F 00 08 00   27 68 74 74  70 3A 2F 2F     hoto 
/...  &#39;htt p://
           6C 69 66 65  73 74 72 65   61 6D 2E 61  6F 6C 2E 63     life 
stre  am.a ol.c
           6F 6D 2F 70  68 6F 74 6F   2F 75 70 6C  6F 61 64 3F     om/p 
hoto  /upl oad?
           00 09 00 13  68 74 74 70   3A 2F 2F 61  70 69 2E 61     .... 
http  ://a pi.a
           69 6D 2E 6E  65 74 2F 00   0A 00 22 68  74 74 70 3A     im.n 
et/.  ..&#34;h ttp:
           2F 2F 6C 69  66 65 73 74   72 65 61 6D  2E 61 6F 6C     //li 
fest  ream .aol
           2E 63 6F 6D  2F 73 65 74   74 69 6E 67  73 00 0B 00     .com 
/set  ting s...
           21 68 74 74  70 3A 2F 2F   6C 69 66 65  73 74 72 65     !htt 
p://  life stre
           61 6D 2E 61  6F 6C 2E 63   6F 6D 2F 73  74 72 65 61     am.a 
ol.c  om/s trea
           6D 2F 00 0C  00 1D 68 74   74 70 73 3A  2F 2F 6D 79     m/.. 
..ht  tps: //my
           2E 73 63 72  65 65 6E 6E   61 6D 65 2E  61 6F 6C 2E     .scr 
eenn  ame. aol.
           63 6F 6D 00  0D 00 24 68   74 74 70 3A  2F 2F 61 62     com. 
..$h  ttp: //ab
           61 70 69 2E  61 62 77 65   62 2E 61 6F  6C 2E 63 6F     api. 
abwe  b.ao l.co
           6D 2F 41 42  57 65 62 41   70 69 2F 00  0E 00 1D 68     m/AB 
WebA  pi/. ...h
           74 74 70 73  3A 2F 2F 64   62 72 2E 73  65 72 76 69     ttps 
://d  br.s ervi
           63 65 73 2E  61 6F 6C 2E   63 6F 6D 2F  00 0F 00 1A     ces. 
aol.  com/ ....
           68 74 74 70  3A 2F 2F 6C   69 66 65 73  74 72 65 61     http 
://l  ifes trea
           6D 2E 61 6F  6C 2E 63 6F   6D 2F 00 10  00 2B 68 74     m.ao 
l.co  m/.. .+ht
           74 70 3A 2F  2F 6C 69 66   65 73 74 72  65 61 6D 2E     tp:/ 
/lif  estr eam.
           61 6F 6C 2E  63 6F 6D 2F   70 68 6F 74  6F 2F 6C 69     aol. 
com/  phot o/li
           66 65 73 74  72 65 61 6D   2F 00 11 00  1F 68 74 74     fest 
ream  /... .htt
           70 3A 2F 2F  77 77 77 2E   61 69 6D 2E  63 6F 6D 2F     p:// 
www.  aim. com/
           69 6D 5F 6E  65 74 77 6F   72 6B 73 3F  00 12 00 19     im_n 
etwo  rks? ....
           68 74 74 70  3A 2F 2F 61   70 69 2E 61  69 6D 2E 6E     http 
://a  pi.a im.n
           65 74 2F 69  6D 6C 6F 67   2F 00 13 00  2E 68 74 74     et/i 
mlog  /... .htt
           70 3A 2F 2F  6F 2E 61 6F   6C 63 64 6E  2E 63 6F 6D     p:// 
o.ao  lcdn .com
           2F 6C 69 66  65 73 74 72   65 61 6D 2F  63 6C 69 65     /lif 
estr  eam/ clie
           6E 74 2F 77  61 74 63 68   65 72 73 00  14 00 14 68     nt/w 
atch  ers. ...h
           74 74 70 73  3A 2F 2F 61   70 69 2E 61  69 6D 2E 6E     ttps 
://a  pi.a im.n
           65 74 2F 00  15 00 1F 68   74 74 70 73  3A 2F 2F 61     et/. 
...h  ttps ://a
           70 69 2E 61  69 6D 2E 6E   65 74 2F 6C  69 66 65 73     pi.a 
im.n  et/l ifes
           74 72 65 61  6D 2F 00 16   00 2D 68 74  74 70 3A 2F     trea 
m/..  .-ht tp:/
           2F 61 69 6D  2E 63 6F 6D   2F 2E 73 65  74 74 69 6E     /aim 
.com  /.se ttin
           67 73 2F 6D  6F 62 69 6C   65 2F 6E 6F  74 69 66 69     gs/m 
obil  e/no tifi
           63 61 74 69  6F 6E 73 00   17 00 28 68  74 74 70 3A     cati 
ons.  ..&#40;h ttp:
           2F 2F 61 69  6D 2E 63 6F   6D 2F 2E 73  65 74 74 69     //ai 
m.co  m/.s etti
           6E 67 73 2F  6D 6F 62 69   6C 65 2F 61  63 63 6F 75     ngs/ 
mobi  le/a ccou
           6E 74 73 00  18 00 1B 68   74 74 70 3A  2F 2F 73 74     nts. 
...h  ttp: //st
           61 67 69 6E  67 2E 61 70   69 2E 61 69  6D 2E 6E 65     agin 
g.ap  i.ai m.ne
           74 2F                                                   t/

_THE PROBLEM_

I get:

    $ ./oscar-bug.pl
    Executing callback: got_snac_error
    Done executing callback: got_snac_error
    Can&#39;t use string &#40;&#34;1&#34;&#41; as a subroutine ref while &#34;strict refs&#34; in
    use at
    /Users/taa/perl5/perlbrew/perls/perl-5.16.0/lib/site_perl/5.16.0/Net/OSCAR.pm
    line 2456.
    $

Here is the minimal code to duplicate the problem &#40;also including as an 
attachment to this email&#41;:

    #!/usr/bin/perl -w

    use strict;
    use warnings;

    #12-09-2003, 02:07 AM <span class="clickylink"><a target="new" rel="nofollow" href="http://tinyurl.com/q2zv6an">http://tinyurl.com/q2zv6an</a></span>: &#34;Re:newbie perl
    question using Net::OSCAR module&#34;
    use Net::OSCAR qw&#40;:standard&#41;;

    # Set configuration params --------------------------------
    my $aim = Net::OSCAR-&gt;new&#40;&#41;;
    $aim-&gt;signon&#40;screenname =&gt; &#34;screenname&#34;, password =&gt; &#34;password&#34;,
    OSCAR_SVC_AIM&#41;;
    $aim-&gt;set_callback_snac_unknown&#40;&#38;got_snac_error&#41;;
    # ------------------------------------------------------------

    # Main Loop
    while&#40;1&#41; {
       $aim-&gt;do_one_loop&#40;&#41;;
    }

    sub got_snac_error {
        print &#34;Executing callback: got_snac_error\n&#34;;
        my &#40;$aim, $connection, %snac, $data&#41; = @_;
        print &#34;Done executing callback: got_snac_error\n&#34;;
    }

In my testing, by process of elimination, the error only happens if I&#39;ve 
registered set_callback_snac_unknown.
</div></div>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
