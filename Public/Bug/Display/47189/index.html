<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #47189 for Data-Throttler: throttle calculation issue</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #47189 for Data-Throttler: throttle calculation issue</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Data-Throttler/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Data-Throttler/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Data-Throttler/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Data-Throttler/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Data-Throttler">Data-Throttler CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">47189</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Data-Throttler/Active/">Data-Throttler</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
buzz [...] exotica.org.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-43102-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.02    </td>
  </tr>
  <tr id="CF-43103-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;20&nbsp;12:52:03&nbsp;2009</span>
    <span class="description">buzz [...] exotica.org.uk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have the following code:

my $ip = $ENV{&#34;REMOTE_ADDR&#34;};
my $throttler = Data::Throttler-&gt;new&#40;
  max_items =&gt; 40, # 40 downloads every
  interval  =&gt; 7200, # 2 hours
  db_file   =&gt; &#34;/tmp/throttle.dat&#34;,
&#41;;

$no_throttle = $throttler-&gt;try_push&#40; key =&gt; $ip &#41;;

however it seems after running the script for some time, it is
miscalculating. for example I hit the script about 10 times today after
not using it for some days and I seem to be already throttled.

I&#39;m not sure how to debug this.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;20&nbsp;13:22:18&nbsp;2009</span>
    <span class="description">MSCHILLI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jun 20 12:52:03 2009, exobuzz wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;for example I hit the script about 10 times today after
&gt; not using it for some days and I seem to be already throttled.
&gt; I&#39;m not sure how to debug this.
</div>
This is very easy to debug, just add

    use Log::Log4perl qw&#40;:easy&#41;;
    Log::Log4perl-&gt;easy_init&#40;$DEBUG&#41;;

at the top of the script and you&#39;ll see how full the throttler&#39;s buckets
are and how the decision to throttle or not throttle is made.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;20&nbsp;13:22:18&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;20&nbsp;15:50:59&nbsp;2009</span>
    <span class="description">buzz [...] exotica.org.uk -  Subject changed from &#40;no value&#41; to &#39;throttle calculation issue&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;20&nbsp;15:53:19&nbsp;2009</span>
    <span class="description">buzz [...] exotica.org.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; at the top of the script and you&#39;ll see how full the throttler&#39;s buckets
&gt; are and how the decision to throttle or not throttle is made.
</div>
im not sure I understand the log completely, but does it make sense to
you when it increases counter by 1 &#40;25/40&#41; and then the next time it is
refused?

2009/06/20 18:34:15&gt; Trying to push 87.194.172.115 18:34:15 1
2009/06/20 18:34:15&gt; Searching bucket for time=18:34:15
2009/06/20 18:34:15&gt; No bucket found for time=18:34:15
2009/06/20 18:34:15&gt; Rotating buckets time=18:34:15 head=0
2009/06/20 18:34:15&gt; Adding bucket: 18:07:53 - 18:19:52
2009/06/20 18:34:15&gt; Adding bucket: 18:19:53 - 18:31:52
2009/06/20 18:34:16&gt; Adding bucket: 18:31:53 - 18:43:52
2009/06/20 18:34:16&gt; Adding bucket: 18:43:53 - 18:55:52
2009/06/20 18:34:16&gt; After rotation: 16:55:53 - 18:55:52 &#40;covers 18:34:15&#41;
2009/06/20 18:34:16&gt; Searching bucket for time=18:34:15
2009/06/20 18:34:16&gt; Found bucket 18:31:53 - 18:43:52
2009/06/20 18:34:16&gt; Increasing counter 87.194.172.115 by 1 &#40;25|40&#41;
2009/06/20 18:34:36&gt; Trying to push 87.194.172.115 18:34:36 1
2009/06/20 18:34:36&gt; Searching bucket for time=18:34:36
2009/06/20 18:34:36&gt; Found bucket 18:31:53 - 18:43:52
2009/06/20 18:34:37&gt; Not increasing counter 87.194.172.115 by 1 &#40;already
at max&#41;
2009/06/20 20:45:46&gt; Trying to push 87.194.172.115 20:45:46 1
2009/06/20 20:45:46&gt; Searching bucket for time=20:45:46
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;20&nbsp;16:05:23&nbsp;2009</span>
    <span class="description">buzz [...] exotica.org.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Perhaps I understand the system wrong. If i set to 40 per 2 hours,
and then try to make 11 requests in under half an hour, will it throttle
the last one ? it seems to make 11 buckets if I dont make a request for
2 hours and then make one. If i want people to be able to &#34;burst&#34; 20
requests but no more than 40 in a two hour period, do i need to change
the number of buckets ?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;20&nbsp;19:12:56&nbsp;2009</span>
    <span class="description">MSCHILLI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jun 20 16:05:23 2009, exobuzz wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Perhaps I understand the system wrong. If i set to 40 per 2 hours,
&gt; and then try to make 11 requests in under half an hour, will it throttle
&gt; the last one ? 
</div>
No, you should be ok. If you have no history, and those 11 requests
trickle in within half an hour, you still have 19 left to hit the
specified quota of 40.

I suspect that you have prefilled buckets already when you&#39;re starting
the program and those previously filled buckets lift you over the limit
because their values count to the defined two-hour window as well.

To see what&#39;s in the buckets, run

    print $throttler-&gt;buckets_dump&#40;&#41;;

as described in the last part of the documentation.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;20&nbsp;19:30:54&nbsp;2009</span>
    <span class="description">buzz [...] exotica.org.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hmm, I&#39;m not sure how to handle this then. The application is a web cgi,
that can be requested at any time. I want to limit visitors use of it by
ip. I had assumed I could just leave it running and your thing would
cleanup as it needs? if on monday at 5pm I requested the cgi 5 times,
then come back on tuesday at 5pm, will it handle that? do old requests
older than a 2 hour window &#40;my setting&#41; get removed?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;20&nbsp;20:34:23&nbsp;2009</span>
    <span class="description">MSCHILLI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jun 20 19:30:54 2009, exobuzz wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hmm, I&#39;m not sure how to handle this then. The application is a 
&gt; web cgi, that can be requested at any time. I want to limit 
&gt; visitors use of it by ip.
</div>
That&#39;s exactly what it&#39;s for.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I had assumed I could just leave it running and your thing would
&gt; cleanup as it needs? if on monday at 5pm I requested the cgi 5 times,
&gt; then come back on tuesday at 5pm, will it handle that?
</div>
If your window is two hours, then it&#39;ll limit the number of requests to
the defined value N during any two hour window.

In your example, there&#39;s 24 hours between the two requests, which means
the previous value will be long forgotten. At Tuesday 5pm, you&#39;ll have
the full quota of N available again.

If you&#39;re looking to limit the maximum lifetime requests instead, you
need a simple counter, not a throttler.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;21&nbsp;04:43:10&nbsp;2009</span>
    <span class="description">buzz [...] exotica.org.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Then there does seem to be something odd.

at 18:34 i get throttled

2009/06/20 18:34:37&gt; Not increasing counter 87.194.172.115 by 1 &#40;already
at max

i wait 2 hours and then i am able to do 11 requests &#40;the number of
buckets before getting throttled again&#41;

2009/06/20 20:45:46&gt; Trying to push 87.194.172.115 20:45:46 1
2009/06/20 20:45:46&gt; Searching bucket for time=20:45:46
2009/06/20 20:45:46&gt; No bucket found for time=20:45:46
2009/06/20 20:45:46&gt; Rotating buckets time=20:45:46 head=4
2009/06/20 20:45:46&gt; Adding bucket: 18:55:53 - 19:07:52
2009/06/20 20:45:46&gt; Adding bucket: 19:07:53 - 19:19:52
2009/06/20 20:45:47&gt; Adding bucket: 19:19:53 - 19:31:52
2009/06/20 20:45:47&gt; Adding bucket: 19:31:53 - 19:43:52
2009/06/20 20:45:47&gt; Adding bucket: 19:43:53 - 19:55:52
2009/06/20 20:45:47&gt; Adding bucket: 19:55:53 - 20:07:52
2009/06/20 20:45:47&gt; Adding bucket: 20:07:53 - 20:19:52
2009/06/20 20:45:47&gt; Adding bucket: 20:19:53 - 20:31:52
2009/06/20 20:45:47&gt; Adding bucket: 20:31:53 - 20:43:52
2009/06/20 20:45:47&gt; Adding bucket: 20:43:53 - 20:55:52
2009/06/20 20:45:47&gt; Adding bucket: 20:55:53 - 21:07:52
2009/06/20 20:45:47&gt; After rotation: 19:07:53 - 21:07:52 &#40;covers 20:45:46&#41;
2009/06/20 20:45:47&gt; Searching bucket for time=20:45:46
2009/06/20 20:45:47&gt; Found bucket 20:43:53 - 20:55:52
2009/06/20 20:45:47&gt; Increasing counter 87.194.172.115 by 1 &#40;0|40&#41;
2009/06/20 20:46:27&gt; Trying to push 87.194.172.115 20:46:27 1
2009/06/20 20:46:27&gt; Searching bucket for time=20:46:27
2009/06/20 20:46:27&gt; Found bucket 20:43:53 - 20:55:52
2009/06/20 20:46:28&gt; Increasing counter 87.194.172.115 by 1 &#40;1|40&#41;
2009/06/20 20:46:55&gt; Trying to push 87.194.172.115 20:46:55 1
2009/06/20 20:46:55&gt; Searching bucket for time=20:46:55
2009/06/20 20:46:55&gt; Found bucket 20:43:53 - 20:55:52
2009/06/20 20:46:55&gt; Increasing counter 87.194.172.115 by 1 &#40;2|40&#41;
2009/06/20 20:47:38&gt; Trying to push 87.194.172.115 20:47:38 1
2009/06/20 20:47:38&gt; Searching bucket for time=20:47:38
2009/06/20 20:47:38&gt; Found bucket 20:43:53 - 20:55:52
2009/06/20 20:47:39&gt; Increasing counter 87.194.172.115 by 1 &#40;3|40&#41;
2009/06/20 20:48:16&gt; Trying to push 87.194.172.115 20:48:16 1
2009/06/20 20:48:16&gt; Searching bucket for time=20:48:16
2009/06/20 20:48:16&gt; Found bucket 20:43:53 - 20:55:52
2009/06/20 20:48:16&gt; Increasing counter 87.194.172.115 by 1 &#40;4|40&#41;
2009/06/20 20:51:46&gt; Trying to push 87.194.172.115 20:51:46 1
2009/06/20 20:51:46&gt; Searching bucket for time=20:51:46
2009/06/20 20:51:46&gt; Found bucket 20:43:53 - 20:55:52
2009/06/20 20:51:46&gt; Increasing counter 87.194.172.115 by 1 &#40;5|40&#41;
2009/06/20 20:57:31&gt; Trying to push 87.194.172.115 20:57:31 1
2009/06/20 20:57:31&gt; Searching bucket for time=20:57:31
2009/06/20 20:57:31&gt; 20:57:31 covered by last bucket
2009/06/20 20:57:31&gt; Increasing counter 87.194.172.115 by 1 &#40;6|40&#41;
2009/06/20 20:58:16&gt; Trying to push 87.194.172.115 20:58:16 1
2009/06/20 20:58:16&gt; Searching bucket for time=20:58:16
2009/06/20 20:58:16&gt; 20:58:16 covered by last bucket
2009/06/20 20:58:16&gt; Increasing counter 87.194.172.115 by 1 &#40;13|40&#41;
2009/06/20 20:58:32&gt; Trying to push 87.194.172.115 20:58:32 1
2009/06/20 20:58:32&gt; Searching bucket for time=20:58:32
2009/06/20 20:58:32&gt; 20:58:32 covered by last bucket
2009/06/20 20:58:32&gt; Increasing counter 87.194.172.115 by 1 &#40;20|40&#41;
2009/06/20 20:59:11&gt; Trying to push 87.194.172.115 20:59:11 1
2009/06/20 20:59:11&gt; Searching bucket for time=20:59:11
2009/06/20 20:59:11&gt; 20:59:11 covered by last bucket
2009/06/20 20:59:11&gt; Increasing counter 87.194.172.115 by 1 &#40;27|40&#41;
2009/06/20 20:59:22&gt; Trying to push 87.194.172.115 20:59:22 1
2009/06/20 20:59:22&gt; Searching bucket for time=20:59:22
2009/06/20 20:59:22&gt; 20:59:22 covered by last bucket
2009/06/20 20:59:22&gt; Increasing counter 87.194.172.115 by 1 &#40;34|40&#41;
2009/06/20 21:00:04&gt; Trying to push 87.194.172.115 21:00:04 1
2009/06/20 21:00:05&gt; Searching bucket for time=21:00:04
2009/06/20 21:00:05&gt; 21:00:04 covered by last bucket
2009/06/20 21:00:05&gt; Not increasing counter 87.194.172.115 by 1 &#40;already
at max&#41;

which is why I thought I would need more buckets ?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;23&nbsp;08:23:44&nbsp;2009</span>
    <span class="description">m [...] perlmeister.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #47189] throttle calculation issue</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 23 Jun 2009 05:22:49 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Jools Smyth via RT &lt;bug-Data-Throttler [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mike Schilli &lt;m [...] perlmeister.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun, 21 Jun 2009, Jools Smyth via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; which is why I thought I would need more buckets ?
</div>
Hmm, I think you&#39;re right, something&#39;s iffy here. I&#39;ll investigate right
after YAPC is over.

-- Mike

Mike Schilli
m@perlmeister.com
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;27&nbsp;19:21:33&nbsp;2009</span>
    <span class="description">MSCHILLI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yup, this was a bug, I just fixed it:
<span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/mschilli/data-throttler-perl/commit/b54eeed8029033998b4f9622160fcc5adcd45cfa">http://github.com/mschilli/data-throttler-perl/commit/b54eeed8029033998b4f9622160fcc5adcd45cfa</a></span>

The 0.03 release is on its way to CPAN, please check it out and let me
know if it fixes the problem you&#39;re seeing. Thanks for reporting this.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;27&nbsp;19:21:35&nbsp;2009</span>
    <span class="description">MSCHILLI [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
