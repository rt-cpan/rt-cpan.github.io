<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #48324 for Moose: documentation q. re Moose-0.87&gt;Moose::Manual::MethodModifiers</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #48324 for Moose: documentation q. re Moose-0.87&gt;Moose::Manual::MethodModifiers</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Moose/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Moose/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Moose/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Moose/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Moose">Moose CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">48324</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Moose/Active/">Moose</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
BrigJ [...] IntoText.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-38786-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-38787-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;30&nbsp;09:40:23&nbsp;2009</span>
    <span class="description">BrigJ [...] IntoText.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;30&nbsp;09:47:05&nbsp;2009</span>
    <span class="description">BrigJ [...] IntoText.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">In the &#39;OVERRIDE AND SUPER&#39; section of
<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~drolsky/Moose-0.87/lib/Moose/Manual/MethodModifiers.pod">http://search.cpan.org/~drolsky/Moose-0.87/lib/Moose/Manual/MethodModifiers.pod</a></span>
I have a question about the example.

It says:

 package Employee;
  use Moose;
  extends &#39;Person&#39;;
  has &#39;job_title&#39; =&gt; &#40; is =&gt; &#39;rw&#39; &#41;;
  override &#39;display_name&#39; =&gt; sub {
      my $self = shift;
      return super&#40;&#41; . q{, } . $self-&gt;title&#40;&#41;;
  };


But should that last line read as:
      return super&#40;&#41; . q{, } . $self-&gt;job_title&#40;&#41;;

&#40;Which leads to:  if not, then what is &#39;title&#40;&#41;&#39;?&#41;




As an aside, when I read the original example about &#39;around&#39;, which showed:
  around &#39;foo&#39; =&gt; sub {
      my $orig = shift;
      my $self = shift;

      print &#34;I&#39;m around foo\n&#34;;

      $self-&gt;$orig&#40;@_&#41;;

      print &#34;I&#39;m still around foo\n&#34;;
  };

I was confused.

Later you point out that:  &#34;An around modifier receives the original
method as its first argument, then the object, and finally any arguments
passed to the method.&#34;

Ah, now it makes sense.  But perhaps the example can be changed to read:

  around &#39;foo&#39; =&gt; sub {
      my $orig = shift;     # the original method
      my $self = shift;     # the object

      print &#34;I&#39;m around foo\n&#34;;

      $self-&gt;$orig&#40;@_&#41;;     # optional to even invoke the original method

      print &#34;I&#39;m still around foo\n&#34;;
  };
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;30&nbsp;09:47:07&nbsp;2009</span>
    <span class="description">BrigJ [...] IntoText.com -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;30&nbsp;10:39:50&nbsp;2009</span>
    <span class="description">BrigJ [...] IntoText.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Just so that I understand, method modifiers run as separate methods from
the intended method so that effectively what&#39;s happening is an
invocation of:

$object-&gt;method&#40;1, 2&#41;;

would be treated as:
$object-&gt;before&#40;1, 2&#41;;
$object-&gt;method&#40;1, 2&#41;;

so that &#39;before&#39; receives a ref to the object as its first parameter,
such that
      my $self = shift;
works for the &#39;before&#39; part

and then &#39;method&#39; receives a ref to the same object so that its
      my $self = shift;
also knows about the object at hand.


Suppose the &#39;before&#39; sub alters &#39;@_&#39; via &#39;shift&#39;, that won&#39;t change what
&#39;method&#39; sees when it starts processing &#39;@_&#39;, correct, since they each
receive a set of the original parameters &#40;1, 2&#41; for use via their own
@_?  Or do &#39;before&#39; and &#39;method&#39; each work off of the same &#34;@_&#34; array so
that changes by &#39;before&#39; affect what &#39;method&#39; sees in @_?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;30&nbsp;10:47:31&nbsp;2009</span>
    <span class="description">stevan.little [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is actually fairly well detailed in Class::MOP::Class here =&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~drolsky/Class-MOP-">http://search.cpan.org/~drolsky/Class-MOP-</a></span>
0.91/lib/Class/MOP/Class.pm#Method_Modifiers



On Thu Jul 30 10:39:50 2009, BrigJ@IntoText.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Just so that I understand, method modifiers run as separate methods from
&gt; the intended method so that effectively what&#39;s happening is an
&gt; invocation of:
&gt; 
&gt; $object-&gt;method&#40;1, 2&#41;;
&gt; 
&gt; would be treated as:
&gt; $object-&gt;before&#40;1, 2&#41;;
&gt; $object-&gt;method&#40;1, 2&#41;;
&gt; 
&gt; so that &#39;before&#39; receives a ref to the object as its first parameter,
&gt; such that
&gt;       my $self = shift;
&gt; works for the &#39;before&#39; part
&gt; 
&gt; and then &#39;method&#39; receives a ref to the same object so that its
&gt;       my $self = shift;
&gt; also knows about the object at hand.
&gt; 
&gt; 
&gt; Suppose the &#39;before&#39; sub alters &#39;@_&#39; via &#39;shift&#39;, that won&#39;t change what
&gt; &#39;method&#39; sees when it starts processing &#39;@_&#39;, correct, since they each
&gt; receive a set of the original parameters &#40;1, 2&#41; for use via their own
&gt; @_?  Or do &#39;before&#39; and &#39;method&#39; each work off of the same &#34;@_&#34; array so
&gt; that changes by &#39;before&#39; affect what &#39;method&#39; sees in @_?
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;30&nbsp;10:58:06&nbsp;2009</span>
    <span class="description">BrigJ [...] IntoText.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Another question arising from reading about Roles involves the order of
processing any &#39;before&#39; modifiers.  The method-modifier documentation
describes the order of processing as:

   before 2
    before 1
     around 2
      around 1
       primary
      around 1
     around 2
    after 1
   after 2


but then the Roles documentation says something normal for &#39;after&#39; but
leaves the &#39;before&#39; order vague.  That is, in the following example do
all the &#39;before&#39; sections of &#39;Breakable&#39; run before the &#39;before&#39;
sections of &#39;ExplodeOnBreakage&#39; or do the &#39;before&#39; sections of
&#39;ExplodeOnBreakage&#39; run first?


  package MovieCar;

  use Moose;

  extends &#39;Car&#39;;

  with &#39;Breakable&#39;, &#39;ExplodesOnBreakage&#39;;

Assuming that the new ExplodesOnBreakage method also has an after
modifier on break, the after modifiers will run one after the other. The
modifier from Breakable will run first, then the one from
ExplodesOnBreakage.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;11&nbsp;11:55:57&nbsp;2009</span>
    <span class="description">DROLSKY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The bug tracker is not a good place to have a discussion.

Please come to the Moose IRC channel &#40;#moose on irc.perl.org&#41; or send
email to the moose@perl.org list.

I&#39;m closing this ticket, so please don&#39;t reply to it directly, or it
will be re-opened.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;11&nbsp;11:55:59&nbsp;2009</span>
    <span class="description">DROLSKY [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
