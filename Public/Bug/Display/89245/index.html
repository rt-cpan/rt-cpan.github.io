<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #89245 for B-Hooks-EndOfScope: B::Hooks::EndOfScope fails to report dependency on Variable::Magic</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #89245 for B-Hooks-EndOfScope: B::Hooks::EndOfScope fails to report dependency on Variable::Magic</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/B-Hooks-EndOfScope/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/B-Hooks-EndOfScope/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/B-Hooks-EndOfScope/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/B-Hooks-EndOfScope/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/B-Hooks-EndOfScope">B-Hooks-EndOfScope CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">89245</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/B-Hooks-EndOfScope/Active/">B-Hooks-EndOfScope</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jkeenan [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
ribasushi [...] leporine.io

<br />
rjbs [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-224248-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-224249-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;03&nbsp;22:23:53&nbsp;2013</span>
    <span class="description">jkeenan [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> rjbs [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> B::Hooks::EndOfScope fails to report dependency on Variable::Magic</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">When a CPAN distribution has a dependency on B-Hooks-EndOfScope, it also has a dependency on everything on which B-Hooks-EndOfScope depends.  That means that it&#39;s essential that all of B-Hooks-EndOfScope&#39;s dependencies be locatable and reported.

I have encountered the following problem twice in the last year-and-a-half while trying to install Dist::Zilla.  Dist::Zilla has a dependency on namespace::autoclean, which in turn has a dependency on B::Hooks::EndOfScope &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://deps.cpantesters.org/?module=Dist::Zilla&#41;">http://deps.cpantesters.org/?module=Dist::Zilla&#41;</a></span>.  The Makefile in B-Hooks-EndOfScope &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://cpansearch.perl.org/src/BOBTFISH/B-Hooks-EndOfScope-0.12/Makefile.PL&#41;">http://cpansearch.perl.org/src/BOBTFISH/B-Hooks-EndOfScope-0.12/Makefile.PL&#41;</a></span> reports a dependency on Variable::Magic thusly:

#########
my %OPT_RUN_DEPS = &#40;can_xs&#40;&#41; ? &#40;
  &#39;Variable::Magic&#39; =&gt; &#39;0.48&#39;, # when changing, also change it in B::Hooks::EndOfScope::XS

  # make sure we smoke the pure-perl version fallback
  is_smoker&#40;&#41; ? &#40; &#39;Devel::Hide&#39; =&gt; &#39;0.0007&#39; &#41; : &#40;&#41;,
&#41; : &#40;&#41; &#41;;
#########

There is no mention of Variable::Magic in B-Hooks-EndOfScope&#39;s dist.ini file &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://cpansearch.perl.org/src/BOBTFISH/B-Hooks-EndOfScope-0.12/dist.ini&#41;">http://cpansearch.perl.org/src/BOBTFISH/B-Hooks-EndOfScope-0.12/dist.ini&#41;</a></span>.

Consequences:

1. CPAN Dependencies fails to report Variable::Magic as a prerequisite for B::Hooks::EndOfScope -- and vice versa.  &#40;See:  <span class="clickylink"><a target="new" rel="nofollow" href="http://deps.cpantesters.org/?module=B::Hooks::EndOfScope;perl=5.18.0;os=any%20OS;pureperl=0">http://deps.cpantesters.org/?module=B::Hooks::EndOfScope;perl=5.18.0;os=any%20OS;pureperl=0</a></span> and <span class="clickylink"><a target="new" rel="nofollow" href="http://deps.cpantesters.org/depended-on-by.pl?dist=Variable-Magic-0.53.&#41;">http://deps.cpantesters.org/depended-on-by.pl?dist=Variable-Magic-0.53.&#41;</a></span>

2. Because this dependency is not detected, installation of Dist::Zilla fails with output as in the attachment.

This needs diagnosis and correction.

Thank you very much.
Jim Keenan
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> variable-magic-missing.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Can&#39;t locate Variable/Magic.pm in @INC &#40;you may need to install the Variable::Magic module&#41; &#40;@INC contains: /Users/jimk/.cpan/build/Dist-Zilla-4.300039-K4QNYH/blib/arch /Users/jimk/.cpan/build/Dist-Zilla-4.300039-K4QNYH/blib/lib /Users/jimk/.cpan/build/Dist-Zilla-4.300039-K4QNYH/blib/lib /Users/jimk/.cpan/build/Dist-Zilla-4.300039-K4QNYH/blib/arch /usr/local/lib/perl5/site_perl/5.18.0/darwin-2level /usr/local/lib/perl5/site_perl/5.18.0 /usr/local/lib/perl5/5.18.0/darwin-2level /usr/local/lib/perl5/5.18.0 /usr/local/lib/perl5/site_perl/5.16.0 /usr/local/lib/perl5/site_perl/5.14.2 /usr/local/lib/perl5/site_perl/5.14.0 /usr/local/lib/perl5/site_perl/5.12.0 /usr/local/lib/perl5/site_perl/5.10.1 /usr/local/lib/perl5/site_perl/5.10.0 /usr/local/lib/perl5/site_perl/5.8.6 /usr/local/lib/perl5/site_perl .&#41; at /usr/local/lib/perl5/site_perl/5.16.0/B/Hooks/EndOfScope.pm line 14.
BEGIN failed--compilation aborted at /usr/local/lib/perl5/site_perl/5.16.0/B/Hooks/EndOfScope.pm line 14.
Compilation failed in require at /usr/local/lib/perl5/site_perl/5.10.1/namespace/autoclean.pm line 10.
BEGIN failed--compilation aborted at /usr/local/lib/perl5/site_perl/5.10.1/namespace/autoclean.pm line 10.
Compilation failed in require at /usr/local/lib/perl5/site_perl/5.16.0/MooseX/OneArgNew.pm line 11.
BEGIN failed--compilation aborted at /usr/local/lib/perl5/site_perl/5.16.0/MooseX/OneArgNew.pm line 11.
Compilation failed in require at /usr/local/lib/perl5/site_perl/5.18.0/darwin-2level/Moose/Exporter.pm line 409.
...
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;04&nbsp;17:55:43&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #89245] B::Hooks::EndOfScope fails to report dependency on Variable::Magic</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 4 Oct 2013 14:55:29 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> James E Keenan via RT &lt;bug-B-Hooks-EndOfScope [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karen Etheridge &lt;ether [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, Oct 03, 2013 at 10:23:55PM -0400, James E Keenan via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; When a CPAN distribution has a dependency on B-Hooks-EndOfScope, it also has a dependency on everything on which B-Hooks-EndOfScope depends.  That means that it&#39;s essential that all of B-Hooks-EndOfScope&#39;s dependencies be locatable and reported.
&gt; 
&gt; I have encountered the following problem twice in the last year-and-a-half while trying to install Dist::Zilla.  Dist::Zilla has a dependency on namespace::autoclean, which in turn has a dependency on B::Hooks::EndOfScope &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://deps.cpantesters.org/?module=Dist::Zilla&#41;">http://deps.cpantesters.org/?module=Dist::Zilla&#41;</a></span>.  The Makefile in B-Hooks-EndOfScope &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://cpansearch.perl.org/src/BOBTFISH/B-Hooks-EndOfScope-0.12/Makefile.PL&#41;">http://cpansearch.perl.org/src/BOBTFISH/B-Hooks-EndOfScope-0.12/Makefile.PL&#41;</a></span> reports a dependency on Variable::Magic thusly:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There is no mention of Variable::Magic in B-Hooks-EndOfScope&#39;s dist.ini file &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://cpansearch.perl.org/src/BOBTFISH/B-Hooks-EndOfScope-0.12/dist.ini&#41;">http://cpansearch.perl.org/src/BOBTFISH/B-Hooks-EndOfScope-0.12/dist.ini&#41;</a></span>.
</div>
Since this dependency is only used if the XS component is used, it
shouldn&#39;t be listed as a hard dep &#40;in META.*&#41;, but rather added at install
time via MYMETA.*.  However, this isn&#39;t being done, so I agree there&#39;s a
problem there &#40;the dzil-specific solution involves adding some extra code
to Makefile.PL to detect the presence of a compiler and add additional
prereqs to the makefile args&#41;.

However, I&#39;m wondering how this problem hasn&#39;t come up before.  e.g. the
first thing I do when I build a new dev perl is install Dist::Zilla
&#40;actually my pluginbundle, which has Dist::Zilla upstream of it&#41;, and I
haven&#39;t run into this problem...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;04&nbsp;17:55:44&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;05&nbsp;17:40:59&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2013-10-04 14:55:43, ETHER wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Since this dependency is only used if the XS component is used, it
&gt; shouldn&#39;t be listed as a hard dep &#40;in META.*&#41;, but rather added at
&gt; install
&gt; time via MYMETA.*.  However, this isn&#39;t being done, so I agree there&#39;s
&gt; a
&gt; problem there &#40;the dzil-specific solution involves adding some extra
&gt; code
&gt; to Makefile.PL to detect the presence of a compiler and add additional
&gt; prereqs to the makefile args&#41;.
</div>
I was totally braindead when I wrote this. The dependency *is* being added to MYMETA.* when &#39;perl Makefile.PL&#39; is run - you even quoted the code that does it -- so if you&#39;re not getting Variable::Magic added as a prereq, you don&#39;t have a compiler &#40;or rather - the heuristic for detecting a compiler is failing&#41;.

Jim, can you attach the MYMETA.yml,json that is generated for you when you run &#39;make realclean; perl Makefile.PL&#39;?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;05&nbsp;19:08:37&nbsp;2013</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Oct 05 17:40:59 2013, ETHER wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I was totally braindead when I wrote this. The dependency *is* being
&gt; added to MYMETA.* when &#39;perl Makefile.PL&#39; is run - you even quoted the
&gt; code that does it -- so if you&#39;re not getting Variable::Magic added as
&gt; a prereq, you don&#39;t have a compiler &#40;or rather - the heuristic for
&gt; detecting a compiler is failing&#41;.
&gt; 
&gt; Jim, can you attach the MYMETA.yml,json that is generated for you when
&gt; you run &#39;make realclean; perl Makefile.PL&#39;?
</div>
I&#39;m not sure exactly what you mean and, in any event, I subsequently installed Variable::Magic manually via &#39;cpan&#39;, then resumed the long march through the upgrade of Dist::Zilla.  So I&#39;m not sure if I can reproduce the conditions in which this failure occurred.

FWIW, I downloaded and built B-Hooks-EndOfScope once again via &#39;cpan&#39;; chdir-ed to the build directory; called &#39;make realclean; perl Makefile.PL&#39;; and came up with the two files attached.

Thank you very much.
Jim Keenan
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> MYMETA.json</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">{
   &#34;abstract&#34; : &#34;Execute code after a scope finished compilation&#34;,
   &#34;author&#34; : [
      &#34;Florian Ragwitz &lt;rafl@debian.org&gt;&#34;,
      &#34;Peter Rabbitson &lt;ribasushi@cpan.org&gt;&#34;
   ],
   &#34;dynamic_config&#34; : 0,
   &#34;generated_by&#34; : &#34;Dist::Zilla version 4.300028, CPAN::Meta::Converter version 2.120921&#34;,
   &#34;license&#34; : [
      &#34;perl_5&#34;
   ],
   &#34;meta-spec&#34; : {
      &#34;url&#34; : &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/perldoc?CPAN::Meta::Spec">http://search.cpan.org/perldoc?CPAN::Meta::Spec</a></span>&#34;,
      &#34;version&#34; : &#34;2&#34;
   },
   &#34;name&#34; : &#34;B-Hooks-EndOfScope&#34;,
   &#34;prereqs&#34; : {
      &#34;build&#34; : {
         &#34;requires&#34; : {
            &#34;Test::More&#34; : &#34;0.88&#34;
         }
      },
      &#34;configure&#34; : {
         &#34;requires&#34; : {
            &#34;ExtUtils::CBuilder&#34; : &#34;0.26&#34;,
            &#34;ExtUtils::MakeMaker&#34; : &#34;6.30&#34;
         }
      },
      &#34;develop&#34; : {
         &#34;requires&#34; : {
            &#34;Pod::Coverage::TrustPod&#34; : &#34;0&#34;,
            &#34;Test::Pod&#34; : &#34;1.41&#34;,
            &#34;Test::Pod::Coverage&#34; : &#34;1.08&#34;
         }
      },
      &#34;runtime&#34; : {
         &#34;requires&#34; : {
            &#34;Module::Implementation&#34; : &#34;0.05&#34;,
            &#34;Module::Runtime&#34; : &#34;0.012&#34;,
            &#34;Sub::Exporter::Progressive&#34; : &#34;0.001006&#34;,
            &#34;Variable::Magic&#34; : &#34;0.48&#34;
         }
      },
      &#34;test&#34; : {
         &#34;requires&#34; : {
            &#34;Test::More&#34; : &#34;0.88&#34;
         }
      }
   },
   &#34;release_status&#34; : &#34;stable&#34;,
   &#34;resources&#34; : {
      &#34;bugtracker&#34; : {
         &#34;mailto&#34; : &#34;bug-B-Hooks-EndOfScope@rt.cpan.org&#34;,
         &#34;web&#34; : &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Public/Dist/B-Hooks-EndOfScope/Active/">http://rt.cpan.org/Public/Dist/Display.html?Name=B-Hooks-EndOfScope</a></span>&#34;
      },
      &#34;homepage&#34; : &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://metacpan.org/release/B-Hooks-EndOfScope">http://metacpan.org/release/B-Hooks-EndOfScope</a></span>&#34;,
      &#34;repository&#34; : {
         &#34;type&#34; : &#34;git&#34;,
         &#34;url&#34; : &#34;git://github.com/rafl/b-hooks-endofscope.git&#34;,
         &#34;web&#34; : &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/rafl/b-hooks-endofscope">http://github.com/rafl/b-hooks-endofscope</a></span>&#34;
      }
   },
   &#34;version&#34; : &#34;0.12&#34;,
   &#34;x_Dist_Zilla&#34; : {
      &#34;perl&#34; : {
         &#34;version&#34; : &#34;5.016000&#34;
      },
      &#34;plugins&#34; : [
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::Prereqs&#34;,
            &#34;config&#34; : {
               &#34;Dist::Zilla::Plugin::Prereqs&#34; : {
                  &#34;phase&#34; : &#34;runtime&#34;,
                  &#34;type&#34; : &#34;requires&#34;
               }
            },
            &#34;name&#34; : &#34;Prereqs&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::Prereqs&#34;,
            &#34;config&#34; : {
               &#34;Dist::Zilla::Plugin::Prereqs&#34; : {
                  &#34;phase&#34; : &#34;test&#34;,
                  &#34;type&#34; : &#34;requires&#34;
               }
            },
            &#34;name&#34; : &#34;TestRequires&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::Prereqs&#34;,
            &#34;config&#34; : {
               &#34;Dist::Zilla::Plugin::Prereqs&#34; : {
                  &#34;phase&#34; : &#34;configure&#34;,
                  &#34;type&#34; : &#34;requires&#34;
               }
            },
            &#34;name&#34; : &#34;ConfigureRequires&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::Metadata&#34;,
            &#34;name&#34; : &#34;Metadata&#34;,
            &#34;version&#34; : &#34;3.03&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::MakeMaker::Custom&#34;,
            &#34;name&#34; : &#34;MakeMaker::Custom&#34;,
            &#34;version&#34; : &#34;4.11&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::GatherDir&#34;,
            &#34;name&#34; : &#34;@Filter/@Basic/GatherDir&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::PruneCruft&#34;,
            &#34;name&#34; : &#34;@Filter/@Basic/PruneCruft&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::ManifestSkip&#34;,
            &#34;name&#34; : &#34;@Filter/@Basic/ManifestSkip&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::MetaYAML&#34;,
            &#34;name&#34; : &#34;@Filter/@Basic/MetaYAML&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::License&#34;,
            &#34;name&#34; : &#34;@Filter/@Basic/License&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::Readme&#34;,
            &#34;name&#34; : &#34;@Filter/@Basic/Readme&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::ExtraTests&#34;,
            &#34;name&#34; : &#34;@Filter/@Basic/ExtraTests&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::ExecDir&#34;,
            &#34;name&#34; : &#34;@Filter/@Basic/ExecDir&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::ShareDir&#34;,
            &#34;name&#34; : &#34;@Filter/@Basic/ShareDir&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::Manifest&#34;,
            &#34;name&#34; : &#34;@Filter/@Basic/Manifest&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::TestRelease&#34;,
            &#34;name&#34; : &#34;@Filter/@Basic/TestRelease&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::ConfirmRelease&#34;,
            &#34;name&#34; : &#34;@Filter/@Basic/ConfirmRelease&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::UploadToCPAN&#34;,
            &#34;name&#34; : &#34;@Filter/@Basic/UploadToCPAN&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::MetaConfig&#34;,
            &#34;name&#34; : &#34;@Filter/MetaConfig&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::MetaJSON&#34;,
            &#34;name&#34; : &#34;@Filter/MetaJSON&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::PkgVersion&#34;,
            &#34;name&#34; : &#34;@Filter/PkgVersion&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::PodSyntaxTests&#34;,
            &#34;name&#34; : &#34;@Filter/PodSyntaxTests&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::NoTabsTests&#34;,
            &#34;name&#34; : &#34;@Filter/NoTabsTests&#34;,
            &#34;version&#34; : &#34;0.01&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::PodCoverageTests&#34;,
            &#34;name&#34; : &#34;@Filter/PodCoverageTests&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::MetaResources&#34;,
            &#34;name&#34; : &#34;@Filter/MetaResources&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::Authority&#34;,
            &#34;name&#34; : &#34;@Filter/Authority&#34;,
            &#34;version&#34; : &#34;1.006&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::EOLTests&#34;,
            &#34;name&#34; : &#34;@Filter/EOLTests&#34;,
            &#34;version&#34; : &#34;0.02&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::PodWeaver&#34;,
            &#34;name&#34; : &#34;@Filter/PodWeaver&#34;,
            &#34;version&#34; : &#34;3.101641&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::FinderCode&#34;,
            &#34;name&#34; : &#34;:InstallModules&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::FinderCode&#34;,
            &#34;name&#34; : &#34;:IncModules&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::FinderCode&#34;,
            &#34;name&#34; : &#34;:TestFiles&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::FinderCode&#34;,
            &#34;name&#34; : &#34;:ExecFiles&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::FinderCode&#34;,
            &#34;name&#34; : &#34;:ShareFiles&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         },
         {
            &#34;class&#34; : &#34;Dist::Zilla::Plugin::FinderCode&#34;,
            &#34;name&#34; : &#34;:MainModule&#34;,
            &#34;version&#34; : &#34;4.300028&#34;
         }
      ],
      &#34;zilla&#34; : {
         &#34;class&#34; : &#34;Dist::Zilla::Dist::Builder&#34;,
         &#34;config&#34; : {
            &#34;is_trial&#34; : &#34;0&#34;
         },
         &#34;version&#34; : &#34;4.300028&#34;
      }
   },
   &#34;x_authority&#34; : &#34;cpan:FLORA&#34;
}
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> MYMETA.yml</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">---
abstract: &#39;Execute code after a scope finished compilation&#39;
author:
  - &#39;Florian Ragwitz &lt;rafl@debian.org&gt;&#39;
  - &#39;Peter Rabbitson &lt;ribasushi@cpan.org&gt;&#39;
build_requires:
  Test::More: 0.88
configure_requires:
  ExtUtils::CBuilder: 0.26
  ExtUtils::MakeMaker: 6.30
dynamic_config: 0
generated_by: &#39;Dist::Zilla version 4.300028, CPAN::Meta::Converter version 2.120921&#39;
license: perl
meta-spec:
  url: <span class="clickylink"><a target="new" rel="nofollow" href="http://module-build.sourceforge.net/META-spec-v1.4.html">http://module-build.sourceforge.net/META-spec-v1.4.html</a></span>
  version: 1.4
name: B-Hooks-EndOfScope
requires:
  Module::Implementation: 0.05
  Module::Runtime: 0.012
  Sub::Exporter::Progressive: 0.001006
  Variable::Magic: 0.48
resources:
  bugtracker: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Public/Dist/B-Hooks-EndOfScope/Active/">http://rt.cpan.org/Public/Dist/Display.html?Name=B-Hooks-EndOfScope</a></span>
  homepage: <span class="clickylink"><a target="new" rel="nofollow" href="http://metacpan.org/release/B-Hooks-EndOfScope">http://metacpan.org/release/B-Hooks-EndOfScope</a></span>
  repository: git://github.com/rafl/b-hooks-endofscope.git
version: 0.12
x_Dist_Zilla:
  perl:
    version: 5.016000
  plugins:
    -
      class: Dist::Zilla::Plugin::Prereqs
      config:
        Dist::Zilla::Plugin::Prereqs:
          phase: runtime
          type: requires
      name: Prereqs
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::Prereqs
      config:
        Dist::Zilla::Plugin::Prereqs:
          phase: test
          type: requires
      name: TestRequires
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::Prereqs
      config:
        Dist::Zilla::Plugin::Prereqs:
          phase: configure
          type: requires
      name: ConfigureRequires
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::Metadata
      name: Metadata
      version: 3.03
    -
      class: Dist::Zilla::Plugin::MakeMaker::Custom
      name: MakeMaker::Custom
      version: 4.11
    -
      class: Dist::Zilla::Plugin::GatherDir
      name: &#39;@Filter/@Basic/GatherDir&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::PruneCruft
      name: &#39;@Filter/@Basic/PruneCruft&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::ManifestSkip
      name: &#39;@Filter/@Basic/ManifestSkip&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::MetaYAML
      name: &#39;@Filter/@Basic/MetaYAML&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::License
      name: &#39;@Filter/@Basic/License&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::Readme
      name: &#39;@Filter/@Basic/Readme&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::ExtraTests
      name: &#39;@Filter/@Basic/ExtraTests&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::ExecDir
      name: &#39;@Filter/@Basic/ExecDir&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::ShareDir
      name: &#39;@Filter/@Basic/ShareDir&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::Manifest
      name: &#39;@Filter/@Basic/Manifest&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::TestRelease
      name: &#39;@Filter/@Basic/TestRelease&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::ConfirmRelease
      name: &#39;@Filter/@Basic/ConfirmRelease&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::UploadToCPAN
      name: &#39;@Filter/@Basic/UploadToCPAN&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::MetaConfig
      name: &#39;@Filter/MetaConfig&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::MetaJSON
      name: &#39;@Filter/MetaJSON&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::PkgVersion
      name: &#39;@Filter/PkgVersion&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::PodSyntaxTests
      name: &#39;@Filter/PodSyntaxTests&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::NoTabsTests
      name: &#39;@Filter/NoTabsTests&#39;
      version: 0.01
    -
      class: Dist::Zilla::Plugin::PodCoverageTests
      name: &#39;@Filter/PodCoverageTests&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::MetaResources
      name: &#39;@Filter/MetaResources&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::Authority
      name: &#39;@Filter/Authority&#39;
      version: 1.006
    -
      class: Dist::Zilla::Plugin::EOLTests
      name: &#39;@Filter/EOLTests&#39;
      version: 0.02
    -
      class: Dist::Zilla::Plugin::PodWeaver
      name: &#39;@Filter/PodWeaver&#39;
      version: 3.101641
    -
      class: Dist::Zilla::Plugin::FinderCode
      name: &#39;:InstallModules&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::FinderCode
      name: &#39;:IncModules&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::FinderCode
      name: &#39;:TestFiles&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::FinderCode
      name: &#39;:ExecFiles&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::FinderCode
      name: &#39;:ShareFiles&#39;
      version: 4.300028
    -
      class: Dist::Zilla::Plugin::FinderCode
      name: &#39;:MainModule&#39;
      version: 4.300028
  zilla:
    class: Dist::Zilla::Dist::Builder
    config:
      is_trial: 0
    version: 4.300028
x_authority: cpan:FLORA
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;05&nbsp;20:14:58&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2013-10-05 16:08:37, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I&#39;m not sure exactly what you mean and, in any event, I subsequently
&gt; installed Variable::Magic manually via &#39;cpan&#39;, then resumed the long
&gt; march through the upgrade of Dist::Zilla.  So I&#39;m not sure if I can
&gt; reproduce the conditions in which this failure occurred.
&gt; 
&gt; FWIW, I downloaded and built B-Hooks-EndOfScope once again via &#39;cpan&#39;;
&gt; chdir-ed to the build directory; called &#39;make realclean; perl
&gt; Makefile.PL&#39;; and came up with the two files attached.
</div>
perl Makefile.PL creates MYMETA.json and MYMETA.yml, which contain the final list of prerequisites and other metadata, tailored to your particular environment. In those files, I see that Variable::Magic is indeed being specified as a prerequisite.  I&#39;m not sure why your cpan client isn&#39;t seeing that -- what version is it?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;06&nbsp;05:27:00&nbsp;2013</span>
    <span class="description">LEONT [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Oct 03 22:23:53 2013, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; When a CPAN distribution has a dependency on B-Hooks-EndOfScope, it
&gt; also has a dependency on everything on which B-Hooks-EndOfScope
&gt; depends.  That means that it&#39;s essential that all of B-Hooks-
&gt; EndOfScope&#39;s dependencies be locatable and reported.
&gt; 
&gt; I have encountered the following problem twice in the last year-and-a-
&gt; half while trying to install Dist::Zilla.  Dist::Zilla has a
&gt; dependency on namespace::autoclean, which in turn has a dependency on
&gt; B::Hooks::EndOfScope
&gt; &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://deps.cpantesters.org/?module=Dist::Zilla&#41;">http://deps.cpantesters.org/?module=Dist::Zilla&#41;</a></span>.  The Makefile in B-
&gt; Hooks-EndOfScope &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://cpansearch.perl.org/src/BOBTFISH/B-Hooks-">http://cpansearch.perl.org/src/BOBTFISH/B-Hooks-</a></span>
&gt; EndOfScope-0.12/Makefile.PL&#41; reports a dependency on Variable::Magic
&gt; thusly:
&gt; 
&gt; #########
&gt; my %OPT_RUN_DEPS = &#40;can_xs&#40;&#41; ? &#40;
&gt;   &#39;Variable::Magic&#39; =&gt; &#39;0.48&#39;, # when changing, also change it in
&gt; B::Hooks::EndOfScope::XS
&gt; 
&gt; # make sure we smoke the pure-perl version fallback
&gt; is_smoker&#40;&#41; ? &#40; &#39;Devel::Hide&#39; =&gt; &#39;0.0007&#39; &#41; : &#40;&#41;,
&gt; &#41; : &#40;&#41; &#41;;
&gt; #########
&gt; 
&gt; There is no mention of Variable::Magic in B-Hooks-EndOfScope&#39;s
&gt; dist.ini file &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://cpansearch.perl.org/src/BOBTFISH/B-Hooks-">http://cpansearch.perl.org/src/BOBTFISH/B-Hooks-</a></span>
&gt; EndOfScope-0.12/dist.ini&#41;.
&gt; 
&gt; Consequences:
&gt; 
&gt; 1. CPAN Dependencies fails to report Variable::Magic as a prerequisite
&gt; for B::Hooks::EndOfScope -- and vice versa.  &#40;See:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://deps.cpantesters.org/?module=B::Hooks::EndOfScope;perl=5.18.0;os=any%20OS;pureperl=0">http://deps.cpantesters.org/?module=B::Hooks::EndOfScope;perl=5.18.0;os=any%20OS;pureperl=0</a></span>
&gt; and <span class="clickylink"><a target="new" rel="nofollow" href="http://deps.cpantesters.org/depended-on-by.pl?dist=Variable-Magic-">http://deps.cpantesters.org/depended-on-by.pl?dist=Variable-Magic-</a></span>
&gt; 0.53.&#41;
&gt; 
&gt; 2. Because this dependency is not detected, installation of
&gt; Dist::Zilla fails with output as in the attachment.
</div>
The problem is in your paths, you&#39;re including older perls&#39; pure-perl paths. In this particular case, it seems to be loading B::Hooks::EndOfScope from 5.16.0, which is probably an older version that relied on Variable::Magic unconditionally. However, because it doesn&#39;t use 5.16.0&#39;s architecture-specific dirs, where that Variable::Magic should live, it blows up.

I would recommend to no longer compile perls that reuse older perl dirs, it&#39; just asking for trouble. The -Dinc_version_list=none argument to configure should do this trick.

I recommend closing this ticket.

Leon
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;06&nbsp;05:44:08&nbsp;2013</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Oct 06 05:27:00 2013, LEONT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I would recommend to no longer compile perls that reuse older perl
&gt; dirs, it&#39; just asking for trouble. The -Dinc_version_list=none
&gt; argument to configure should do this trick.
</div>
Interesting option... Can you think of a reason perlbrew doesn&#39;t do that by default...?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;06&nbsp;06:23:26&nbsp;2013</span>
    <span class="description">ribasushi [...] leporine.io -  Cc RIBASUSHI added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;06&nbsp;06:40:08&nbsp;2013</span>
    <span class="description">LEONT [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Oct 06 05:44:08 2013, RIBASUSHI wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun Oct 06 05:27:00 2013, LEONT wrote:
<div class="message-stanza open">&gt; &gt; I would recommend to no longer compile perls that reuse older perl
&gt; &gt; dirs, it&#39; just asking for trouble. The -Dinc_version_list=none
&gt; &gt; argument to configure should do this trick.
</div>&gt; 
&gt; Interesting option... Can you think of a reason perlbrew doesn&#39;t do
&gt; that by default...?
</div>
It doesn&#39;t because it doesn&#39;t need to. Configure automatically sets this up when different perls use the same prefixes &#40;e.g. /usr/local/lib/perl5/$version/&#41;. perlbrew uses a new prefix for every perl, so this doesn&#39;t happen.

Leon
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;06&nbsp;11:49:36&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;06&nbsp;12:11:21&nbsp;2013</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> ether [...] cpan.org, rjbs [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am disappointed in the resolution of this ticket.  What that resolution boils down to is, &#34;Don&#39;t use &#39;cpan&#39;; only use &#39;perlbrew&#39;&#34; and &#34;Change the way you have been building perl from source for the past nine years.&#34;

However, the only reason that I encountered this problem was that I was trying to re-install Dist::Zilla, and the only reason I was trying to do that was to be able to work on YAML-Tiny as requested by David Golden.  I have, however, decided that the tax which Dist::Zilla &#40;and its associated bundles&#41; imposes on my time is too great to pay.

&#40;In the case of YAML-Tiny I spent more than five hours getting Dist::Zilla installed -- and even then couldn&#39;t say &#39;dzil build&#39; or &#39;dzil test&#39; because I still faced the task of installing the 324 dependencies in the bundle associated with the github distribution of YAML-Tiny.  But this morning it took me only five minutes to write a Makefile.PL that just works.&#41;

So, since I&#39;m not going to be using Dist::Zilla going forward, I don&#39;t care whether this bug in B::Hooks::EndOfScope gets fixed or not.

If anyone would like to discuss this further with me, please contact me off list.

Thank you very much.
Jim Keenan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;06&nbsp;13:01:28&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #89245] B::Hooks::EndOfScope fails to report dependency on Variable::Magic</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 6 Oct 2013 10:01:12 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> James E Keenan via RT &lt;bug-B-Hooks-EndOfScope [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karen Etheridge &lt;ether [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun, Oct 06, 2013 at 12:11:22PM -0400, James E Keenan via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=89245">https://rt.cpan.org/Ticket/Display.html?id=89245</a></span> &gt;
&gt; 
&gt; I am disappointed in the resolution of this ticket.  What that resolution boils down to is, &#34;Don&#39;t use &#39;cpan&#39;; only use &#39;perlbrew&#39;&#34; and &#34;Change the way you have been building perl from source for the past nine years.&#34;
</div>
cpan is a client; perlbrew is a mechanism for installing and managing
multiple perl installs; they don&#39;t relate to each other at all here. My
mentioning of &#39;cpan&#39; was a red herring; it wasn&#39;t the problem at all.  The
problem, as LeonT pointed out, was bringing in older perls&#39; install libs
into the @INC chain, so an older installation of B::Hooks::EndOfScope was
taking precedence, but not also dragging in the parallel install of
Variable::Magic because it has an XS component, therefore arch-specific
&#40;therefore in another install dir&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; However, the only reason that I encountered this problem was that I was trying to re-install Dist::Zilla, and the only reason I was trying to do that was to be able to work on YAML-Tiny as requested by David Golden.  I have, however, decided that the tax which Dist::Zilla &#40;and its associated bundles&#41; imposes on my time is too great to pay.
</div>
It&#39;s nothing to do with Dist::Zilla, other than the fact that DZ happens to
&#40;indirectly!&#41; use B::Hooks::EndOfScope.  Blaming it on this tool is unfair and
totally unfounded.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#40;In the case of YAML-Tiny I spent more than five hours getting Dist::Zilla installed -- and even then couldn&#39;t say &#39;dzil build&#39; or &#39;dzil test&#39; because I still faced the task of installing the 324 dependencies in the bundle associated with the github distribution of YAML-Tiny.  But this morning it took me only five minutes to write a Makefile.PL that just works.&#41;
</div>
fwiw, in YAML-Tiny you should be fine with just doing &#39;prove -lr t&#39;. The
distribution tests do not rely on the distribution being built.  It&#39;s
always nice to be able to run the author and release tests too, but during
normal development, it&#39;s not necessary, and I wouldn&#39;t impose it as a
mandatory requirement of anyone assisting with bug-blasting or other
routine maintenance.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So, since I&#39;m not going to be using Dist::Zilla going forward, I don&#39;t care whether this bug in B::Hooks::EndOfScope gets fixed or not.
</div>
I&#39;m sorry you had a bad experience, but you&#39;re aiming your frustration at
the wrong target.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;06&nbsp;13:10:37&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">For those following along at home -- there is nothing to be fixed in the B-Hooks-EndOfScope distribution - the prereq is properly declared via MYMETA as a dynamic requirement.

I&#39;ve also added a CONTRIBUTING file to the YAML-Tiny distribution as a helper to show how to bypass Dist::Zilla during development, and how to install the plugins the distribution uses.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;08&nbsp;15:07:54&nbsp;2013</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Oct 06 13:10:37 2013, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; For those following along at home -- there is nothing to be fixed in
&gt; the B-Hooks-EndOfScope distribution - the prereq is properly declared
&gt; via MYMETA as a dynamic requirement.
</div>
I think the real issue is that namespace::autoclean is only depending on B::Hooks::EndOfScope version &#34;0&#34;.  If it depended on a newer version that had the conditional dependency sorted out, then finding an old version in an old @INC directory wouldn&#39;t matter.

Depending on &#34;0&#34; for anything is a bit dangerous.  Though I do it quite often myself, it&#39;s really a bad practice.

Jim -- I&#39;m really sorry you hit this bug.  I&#39;d never realized what $Config{inc_version_list} really did because I don&#39;t think I&#39;ve ever built perl without its own prefix.  Scary!

&#40;I tend to use /opt/perl/v5.x.y/... for my custom perls.&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;09&nbsp;00:24:37&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2013-10-08 12:07:54, DAGOLDEN wrote:
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I think the real issue is that namespace::autoclean is only depending
&gt; on B::Hooks::EndOfScope version &#34;0&#34;.  If it depended on a newer
&gt; version that had the conditional dependency sorted out, then finding
&gt; an old version in an old @INC directory wouldn&#39;t matter.
</div>
This has been done.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
