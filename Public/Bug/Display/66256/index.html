<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #66256 for TAP-Harness-JUnit: Version 0.34 of TAP::Harness::JUnit.pm</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #66256 for TAP-Harness-JUnit: Version 0.34 of TAP::Harness::JUnit.pm</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=TAP-Harness-JUnit">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=TAP-Harness-JUnit">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=TAP-Harness-JUnit">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=TAP-Harness-JUnit">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/TAP-Harness-JUnit">TAP-Harness-JUnit CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">66256</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=TAP-Harness-JUnit">TAP-Harness-JUnit</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">JLAVALLEE [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
shahzad_naeem [...] blueyonder.co.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-223104-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-223105-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=66256">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-904500" href="/Public/Bug/Display.html?id=66256#txn-904500">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;28&nbsp;11:15:36&nbsp;2011</span>
    <span class="description">shahzad_naeem [...] blueyonder.co.uk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Version 0.34 of TAP::Harness::JUnit.pm</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 28 Feb 2011 16:15:12 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-TAP-Harness-JUnit [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Shahzad Naeem &lt;shahzad_naeem [...] blueyonder.co.uk&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/904500/469161/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/469161">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 442b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

There seems to be a bug in the feature that ignores the exit status of 
test scripts.

Specifically, on line 301 of JUnit.pm it looks like the code to ignore a 
non-zero
test exit status if the test script has errors has been commented out.

The code looks right, but maybe it causes issues with existing test suites?

For me uncommenting the line and commenting the original works fine.

Hope this helps.

Regards,

Shahzad Naeem
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/904500/469162/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/469162">with headers</a>
<br />
<span class="downloadcontenttype">text/html 990b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-905575" href="/Public/Bug/Display.html?id=66256#txn-905575">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;01&nbsp;20:07:56&nbsp;2011</span>
    <span class="description">JLAVALLEE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/905575/469758/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/469758">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 471b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Are you suggesting the following change?

--- a/lib/TAP/Harness/JUnit.pm
+++ b/lib/TAP/Harness/JUnit.pm
@@ -298,8 +298,8 @@ sub parsetest {
        }
 
        # Bad return value. See BUGS
-       #elsif &#40;$badretval and not $xml-&gt;{errors}&#41; {
-       elsif &#40;$badretval&#41; {
+       elsif &#40;$badretval and not $xml-&gt;{errors}&#41; {
+       #elsif &#40;$badretval&#41; {
                # Fake a failed test
                push @{$xml-&gt;{testcase}}, {
                        &#39;time&#39; =&gt; 0,
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-905578" href="/Public/Bug/Display.html?id=66256#txn-905578">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;01&nbsp;20:07:57&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-905708" href="/Public/Bug/Display.html?id=66256#txn-905708">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;02&nbsp;04:12:32&nbsp;2011</span>
    <span class="description">shahzad_naeem [...] blueyonder.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #66256] Version 0.34 of TAP::Harness::JUnit.pm</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 02 Mar 2011 09:12:08 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-TAP-Harness-JUnit [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Shahzad Naeem &lt;shahzad_naeem [...] blueyonder.co.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/905708/469830/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/469830">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Yes that change works for me. It looks like somebody &#40;possibly you?&#41; 
already had considered it.

Alternatively, an new option could be added to make the code selective 
and keep the original
behaviour the default. Something like &#39;noscripterrorcountfail&#39; which 
defaults to 0

     elsif &#40;  $badretval
                and
                &#40; &#40; not $noscripterrorcountfail &#41; &#41;
                   or
                   &#40; $noscripterrorcountfail and not $xml-&gt;{errors}  &#41;  &#41;
             &#41; { ...

I am happy with either, but I suppose the second method keeps everything 
backwards compatible
and is probably better.

Regards,

Shahzad Naeem

On 02/03/2011 01:07, Jeff Lavallee via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=66256">https://rt.cpan.org/Ticket/Display.html?id=66256</a></span>&gt;
&gt;
&gt; Are you suggesting the following change?
&gt;
&gt; --- a/lib/TAP/Harness/JUnit.pm
&gt; +++ b/lib/TAP/Harness/JUnit.pm
&gt; @@ -298,8 +298,8 @@ sub parsetest {
&gt;          }
&gt;
&gt;          # Bad return value. See BUGS
&gt; -       #elsif &#40;$badretval and not $xml-&gt;{errors}&#41; {
&gt; -       elsif &#40;$badretval&#41; {
&gt; +       elsif &#40;$badretval and not $xml-&gt;{errors}&#41; {
&gt; +       #elsif &#40;$badretval&#41; {
&gt;                  # Fake a failed test
&gt;                  push @{$xml-&gt;{testcase}}, {
&gt;                          &#39;time&#39; =&gt;  0,
&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-905959" href="/Public/Bug/Display.html?id=66256#txn-905959">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;02&nbsp;15:26:43&nbsp;2011</span>
    <span class="description">shahzad_naeem [...] blueyonder.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #66256] Version 0.34 of TAP::Harness::JUnit.pm</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 02 Mar 2011 20:26:10 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-TAP-Harness-JUnit [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Shahzad Naeem &lt;shahzad_naeem [...] blueyonder.co.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/905959/469968/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/469968">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 888b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I&#39;ve done a bit more digging, I do not have the problem on my Fedora 12 
server.

On investigating, it has version 0.32-3.fc12 and it seems that the 
original code is
as described by the change below.

Any idea why the code was changed ?

Regards,

Shahzad Naeem

On 02/03/2011 01:07, Jeff Lavallee via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=66256">https://rt.cpan.org/Ticket/Display.html?id=66256</a></span>&gt;
&gt;
&gt; Are you suggesting the following change?
&gt;
&gt; --- a/lib/TAP/Harness/JUnit.pm
&gt; +++ b/lib/TAP/Harness/JUnit.pm
&gt; @@ -298,8 +298,8 @@ sub parsetest {
&gt;          }
&gt;
&gt;          # Bad return value. See BUGS
&gt; -       #elsif &#40;$badretval and not $xml-&gt;{errors}&#41; {
&gt; -       elsif &#40;$badretval&#41; {
&gt; +       elsif &#40;$badretval and not $xml-&gt;{errors}&#41; {
&gt; +       #elsif &#40;$badretval&#41; {
&gt;                  # Fake a failed test
&gt;                  push @{$xml-&gt;{testcase}}, {
&gt;                          &#39;time&#39; =&gt;  0,
&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-905972" href="/Public/Bug/Display.html?id=66256#txn-905972">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;02&nbsp;16:23:18&nbsp;2011</span>
    <span class="description">JLAVALLEE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/905972/469975/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/469975">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I suspect the change was part of one of the patches applied from the RT queue for the 0.33 
release, but I haven&#39;t identified which one yet.  I hope to look into it today or tomorrow.


On Wed Mar 02 15:26:43 2011, shahzad_naeem@blueyonder.co.uk wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; I&#39;ve done a bit more digging, I do not have the problem on my Fedora 12 
&gt; server.
&gt; 
&gt; On investigating, it has version 0.32-3.fc12 and it seems that the 
&gt; original code is
&gt; as described by the change below.
&gt; 
&gt; Any idea why the code was changed ?
&gt; 
&gt; Regards,
&gt; 
&gt; Shahzad Naeem
&gt; 
&gt; On 02/03/2011 01:07, Jeff Lavallee via RT wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=66256">https://rt.cpan.org/Ticket/Display.html?id=66256</a></span>&gt;
&gt; &gt;
&gt; &gt; Are you suggesting the following change?
&gt; &gt;
&gt; &gt; --- a/lib/TAP/Harness/JUnit.pm
&gt; &gt; +++ b/lib/TAP/Harness/JUnit.pm
&gt; &gt; @@ -298,8 +298,8 @@ sub parsetest {
&gt; &gt;          }
&gt; &gt;
&gt; &gt;          # Bad return value. See BUGS
&gt; &gt; -       #elsif &#40;$badretval and not $xml-&gt;{errors}&#41; {
&gt; &gt; -       elsif &#40;$badretval&#41; {
&gt; &gt; +       elsif &#40;$badretval and not $xml-&gt;{errors}&#41; {
&gt; &gt; +       #elsif &#40;$badretval&#41; {
&gt; &gt;                  # Fake a failed test
&gt; &gt;                  push @{$xml-&gt;{testcase}}, {
&gt; &gt;                          &#39;time&#39; =&gt;  0,
&gt; &gt;
&gt; &gt;
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-906169" href="/Public/Bug/Display.html?id=66256#txn-906169">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;03&nbsp;00:02:01&nbsp;2011</span>
    <span class="description">JLAVALLEE [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-906170" href="/Public/Bug/Display.html?id=66256#txn-906170">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;03&nbsp;00:13:15&nbsp;2011</span>
    <span class="description">JLAVALLEE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/906170/470047/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/470047">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 192b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">It looks like this change was part of the patch for RT 56521.  In any case, I&#39;ve reverted that 
particular line and released v0.35 to CPAN.  Please let me know if it fixes your issue.

Thanks!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-906244" href="/Public/Bug/Display.html?id=66256#txn-906244">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;03&nbsp;04:58:14&nbsp;2011</span>
    <span class="description">shahzad_naeem [...] blueyonder.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #66256] Version 0.34 of TAP::Harness::JUnit.pm</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 03 Mar 2011 09:58:08 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-TAP-Harness-JUnit [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Shahzad Naeem &lt;shahzad_naeem [...] blueyonder.co.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/906244/470084/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/470084">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 370b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks,

I will install v0.35 and let you know.

Shahzad

On 03/03/2011 05:13, Jeff Lavallee via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=66256">https://rt.cpan.org/Ticket/Display.html?id=66256</a></span>&gt;
&gt;
&gt; It looks like this change was part of the patch for RT 56521.  In any case, I&#39;ve reverted that
&gt; particular line and released v0.35 to CPAN.  Please let me know if it fixes your issue.
&gt;
&gt; Thanks!
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-906321" href="/Public/Bug/Display.html?id=66256#txn-906321">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;03&nbsp;09:17:16&nbsp;2011</span>
    <span class="description">shahzad_naeem [...] blueyonder.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #66256] Version 0.34 of TAP::Harness::JUnit.pm</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 03 Mar 2011 14:17:05 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-TAP-Harness-JUnit [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Shahzad Naeem &lt;shahzad_naeem [...] blueyonder.co.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/906321/470134/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/470134">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 405b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I&#39;ve used v0.35 and it seems to be fine.
Ok to close the bug.

Regards,

Shahzad Naeem

On 03/03/2011 05:13, Jeff Lavallee via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=66256">https://rt.cpan.org/Ticket/Display.html?id=66256</a></span>&gt;
&gt;
&gt; It looks like this change was part of the patch for RT 56521.  In any case, I&#39;ve reverted that
&gt; particular line and released v0.35 to CPAN.  Please let me know if it fixes your issue.
&gt;
&gt; Thanks!
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-906409" href="/Public/Bug/Display.html?id=66256#txn-906409">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;03&nbsp;12:16:47&nbsp;2011</span>
    <span class="description">JLAVALLEE [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.432476</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
