<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #18843 for Curses: Fails on FreeBSD, easy fix</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #18843 for Curses: Fails on FreeBSD, easy fix</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Curses/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Curses/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Curses/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Curses/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Curses">Curses CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">18843</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Curses/Active/">Curses</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dmuey [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-8784-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.13    </td>
  </tr>
  <tr id="CF-8785-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;21&nbsp;17:01:48&nbsp;2006</span>
    <span class="description">dmuey [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Fails on FreeBSD, easy fix</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">If Makefile.PL tested for this condition and created the link below if needed it be solved:

This server is FreeBSD 5.3-RELEASE &#40;we;ve seen it on numerouse FreeBSD servers&#41;
I&#39;ll cpecifically look into and report back how it works on 4 and 6

redspot# tar xzf Curses-1.13.tgz
redspot# cd Curses-1.13
redspot#

redspot# perl Makefile.PL
GEN    function:  not applicable
PANELS functions: not enabled
MENUS  functions: not enabled
FORMS  functions: not enabled

Making a guess for $inc and/or $libs...
Making a guess for &#34;c-config.h&#34;...

I&#39;m sorry, but I couldn&#39;t find a hints file that was configured for
your OS &#40;named hints/c-freebsd.h&#41;.  You will need to create and configure a
&#34;c-config.h&#34; file for yourself.  Please see the &#34;INSTALL&#34; directions
for pointers on how to do this.
redspot#

redspot# ln -s hints/c-freebsd.ncurses.h c-config.h
redspot# perl Makefile.PL
GEN    function:  not applicable
PANELS functions: not enabled
MENUS  functions: not enabled
FORMS  functions: not enabled

Making a guess for $inc and/or $libs...
Checking if your kit is complete...
Looks good
Writing Makefile for Curses
redspot#

then it installs :&#41;

hints/c-freebsd.ncurses.h is the one you want to use apparently as hints/c-freebsd.bsd.h 
fails every time &#40;even though /usr/include/ncurses.h is just a symlink to /usr/include/
curses.h&#41;

I beleive this is all the port of it is doing but it&#39;d be nicer to use CPAN on every server 
regardless of OS
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;21&nbsp;17:18:15&nbsp;2006</span>
    <span class="description">dmuey [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This server is FreeBSD 5.3-RELEASE &#40;we;ve seen it on numerouse FreeBSD
&gt; servers&#41;
&gt; I&#39;ll cpecifically look into and report back how it works on 4 and 6
</div>
Exact same on 4.11-RELEASE
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;21&nbsp;17:18:16&nbsp;2006</span>
    <span class="description">dmuey [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;08&nbsp;09:53:58&nbsp;2006</span>
    <span class="description">dmuey [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">When using new Makefile.PL you sent to me:


redspot# perl Makefile.PL
GEN    function:  not applicable
PANELS functions: not enabled
MENUS  functions: not enabled
FORMS  functions: not enabled

Making a guess for $inc and/or $libs...
Use of uninitialized value in concatenation &#40;.&#41; or string at Makefile.PL
line 195.
Guesses:  includes &#39;&#39;, libs &#39;-lcurses -ltermcap&#39; Curses type 
Writing Makefile for Curses
redspot# 

changing the freesbd default to ncurses:

redspot# perl Makefile.PL
GEN    function:  not applicable
PANELS functions: not enabled
MENUS  functions: not enabled
FORMS  functions: not enabled

Making a guess for $inc and/or $libs...
Use of uninitialized value in concatenation &#40;.&#41; or string at Makefile.PL
line 195.
Guesses:  includes &#39;&#39;, libs &#39;-lncurses&#39; Curses type 
Writing Makefile for Curses
redspot# 

The make was identical except where the name differed:

redspot# diff -u default_bsd_make.txt default_ncurses_make.txt 
--- default_bsd_make.txt        Mon May  8 08:48:25 2006
+++ default_ncurses_make.txt    Mon May  8 08:50:14 2006
@@ -2,7 +2,7 @@
 Checking capabilities of the Ncurses libraries.
 Set CURSES_VERBOSE environment variable to see the details of the tests.
 
-Doing test compiles with the compile command &#39;cc -DSYM=&#34;_C_SYM_&#34; 
-DAPPLLIB_EXP=&#34;/usr/local/lib/perl5/5.8.8/BSDPAN&#34; -DHAS_FPSETMASK
-DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe
-Wdeclaration-after-statement -I/usr/local/include -o _C_FILE_
_C_FILE_.c  -L/usr/local/lib -lcurses -ltermcap&gt;/dev/null 2&gt;&#38;1&#39;
+Doing test compiles with the compile command &#39;cc -DSYM=&#34;_C_SYM_&#34; 
-DAPPLLIB_EXP=&#34;/usr/local/lib/perl5/5.8.8/BSDPAN&#34; -DHAS_FPSETMASK
-DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe
-Wdeclaration-after-statement -I/usr/local/include -o _C_FILE_
_C_FILE_.c  -L/usr/local/lib -lncurses&gt;/dev/null 2&gt;&#38;1&#39;
 function &#39;waddch&#39; found
 function &#39;wechochar&#39; found
 function &#39;waddchstr&#39; found
@@ -385,7 +385,7 @@
 Running Mkbootstrap for Curses &#40;&#41;
 chmod 644 Curses.bs
 rm -f blib/arch/auto/Curses/Curses.so
-LD_RUN_PATH=&#34;/usr/lib&#34; cc  -shared  -L/usr/local/lib Curses.o  -o
blib/arch/auto/Curses/Curses.so         -lcurses -ltermcap     
+LD_RUN_PATH=&#34;/usr/lib&#34; cc  -shared  -L/usr/local/lib Curses.o  -o
blib/arch/auto/Curses/Curses.so         -lncurses      
 chmod 755 blib/arch/auto/Curses/Curses.so
 cp Curses.bs blib/arch/auto/Curses/Curses.bs
 chmod 644 blib/arch/auto/Curses/Curses.bs
redspot# 

This should be rectified :&#41;
redspot# make test
No tests defined for Curses extension.
redspot#

but then make install went along well:

redspot# perl -le &#39;use Curses;print $Curses::VERSION;&#39;
1.13
redspot# 

So it looks like your new Makefile.PL was just the thing :&#41;

I&#39;d say upload to pause ASAP!

Thanks
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;09&nbsp;16:25:02&nbsp;2006</span>
    <span class="description">dmuey [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On May 8, 2006, at 9:16 PM, Bryan Henderson wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; How come you don&#39;t use the built in rt.cpan.org system for  
&gt; &gt; communication, you&#39;d have seen it April 21st instead of by chance :&#41;
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I haven&#39;t found any way to make rt.cpan.org draw my attention to
&gt; something the day it is posted.  If you know, do tell.  But I didn&#39;t
</div>
mine come to my CPAN id&#39;s email, I imagine yours is no longer forwarded
to a valid address.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; see your report by chance.  I poll rt.cpan.org once a month.
</div>
cool.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; I can&#39;t see how Makefile.PL would do what it does in your report.
</div>&gt; &gt;
&gt; &gt; Thats why I posted the output in the ticket,
</div>&gt;
&gt; I didn&#39;t see anything in that output that gave a clue as to how 
&gt; Makefile.PL did what it did.
</div>
I&#39;m sorry if it seemed vague:

<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=18843">http://rt.cpan.org/Ticket/Display.html?id=18843</a></span>

redspot# perl Makefile.PL
...
I&#39;m sorry, but I couldn&#39;t find a hints file that was configured for
your OS &#40;named hints/c-freebsd.h&#41;. You will need to create and configure a
&#34;c-config.h&#34; file for yourself. Please see the &#34;INSTALL&#34; directions
for pointers on how to do this.
redspot#

redspot# ln -s hints/c-freebsd.ncurses.h c-config.h
redspot# perl Makefile.PL
...
Checking if your kit is complete...
Looks good
Writing Makefile for Curses
redspot#

hints/c-freebsd.ncurses.h is the one you want to use apparently as
hints/c-freebsd.bsd.h
fails every time &#40;even though /usr/include/ncurses.h is just a symlink
to /usr/include/
curses.h&#41;

To me that&#39;d show that the logic that chooses the file that it uses for
FreeBSD is either flawed or at least needs adjusted to fit FreeBSD&#39;s
oddness.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; I&#39;ve attached a current version that at least prints some additional
&gt; &gt; &gt; information.  Could you run it and see what it does?
</div>&gt; &gt;
&gt; &gt; It appears to be good to go:
</div>&gt; 
&gt; I just downloaded 1.13 and compared, and there is no significant
&gt; difference between the Makefile.PL I sent you and the one in the
&gt; package.  There&#39;s a minor cleanup to help me read it and a few added
&gt; informational messages.
</div>
I&#39;ll try them both on a different server and see what i can find, can
you use  <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=18843">http://rt.cpan.org/Ticket/Display.html?id=18843</a></span> instead of
direct email from now on?

thanks
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;04&nbsp;20:44:20&nbsp;2006</span>
    <span class="description">GIRAFFED [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
