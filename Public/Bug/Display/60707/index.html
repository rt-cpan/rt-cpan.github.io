<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #60707 for Tk: Install Failures - Strawberry 5.12.1.0, 64 bit</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #60707 for Tk: Install Failures - Strawberry 5.12.1.0, 64 bit</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Tk/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Tk/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Tk/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Tk/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Tk">Tk CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">60707</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Tk/Active/">Tk</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jerome.vivancos [...] laposte.net

<br />
persicom [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
matthew.persico [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-33610-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
804.028_503    </td>
  </tr>
  <tr id="CF-33611-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




64bit.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/822655/426210/64bit.patch">
Wed Aug 25 22:33:42 2010 (304b) by SREZIC [...] cpan.org
</a>
</font></li>
</ul>


bug tk compil.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/915572/474868/bug%20tk%20compil.txt">
Sun Mar 27 13:17:22 2011 (54.5k) by jerome.vivancos [...] laposte.net
</a>
</font></li>
</ul>


Makefile<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/883332/457762/Makefile">
Tue Jan 18 13:35:43 2011 (27.8k) by ASB [...] cpan.org
</a>
</font></li>
</ul>


Perl version.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/915572/474869/Perl%20version.txt">
Sun Mar 27 13:17:22 2011 (2.4k) by jerome.vivancos [...] laposte.net
</a>
</font></li>
</ul>


png.h<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/836523/433324/png.h">
Sun Sep 26 18:27:01 2010 (141.1k) by matthew.persico [...] verizon.net
</a>
</font></li>
</ul>


Tk-804.028_503-1282706499.log<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/822028/425917/Tk-804.028_503-1282706499.log">
Tue Aug 24 23:23:52 2010 (246k) by persicom [...] cpan.org
</a>
</font></li>
</ul>


Tk-804.029-1282705805.log<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/822028/425916/Tk-804.029-1282705805.log">
Tue Aug 24 23:23:52 2010 (238.7k) by persicom [...] cpan.org
</a>
</font></li>
</ul>


tk.strawberry.dmake1.log<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/883332/457761/tk.strawberry.dmake1.log">
Tue Jan 18 13:35:43 2011 (886b) by ASB [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;24&nbsp;23:23:51&nbsp;2010</span>
    <span class="description">persicom [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> matthew.persico [...] gmail.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Install Failures - Strawberry 5.12.1.0, 64 bit</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fails to build with Strawberry. Release notes say to use this version for 
64 bit compiling. Build log attached.

I have also included a failed build for 029.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Tk-804.029-1282705805.log</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/822028/425916/Tk-804.029-1282705805.log">Download Tk-804.029-1282705805.log</a><br />
<span class="downloadcontenttype">application/octet-stream 238.7k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Tk-804.028_503-1282706499.log</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/822028/425917/Tk-804.028_503-1282706499.log">Download Tk-804.028_503-1282706499.log</a><br />
<span class="downloadcontenttype">application/octet-stream 246k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;25&nbsp;22:33:42&nbsp;2010</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2010-08-24 23:23:51, PERSICOM wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Fails to build with Strawberry. Release notes say to use this version for 
&gt; 64 bit compiling. Build log attached.
&gt; 
&gt; I have also included a failed build for 029.
</div>
Hello Matthew,

can you try the attached patch against 029?

Regards,
    Slaven
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 64bit.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff --git c/pTk/mTk/xlib/X11/X.h w/pTk/mTk/xlib/X11/X.h
index 95db07f..a1cf10c 100644
--- c/pTk/mTk/xlib/X11/X.h
+++ w/pTk/mTk/xlib/X11/X.h
@@ -40,7 +40,7 @@ SOFTWARE.
 
 /* Resources */
 
-#ifdef _WIN64
+#if defined&#40;_WIN64&#41; &#38;&#38; defined&#40;_MSC_VER&#41;
 typedef __int64 XID;
 #else
 typedef unsigned long XID;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;25&nbsp;22:33:43&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;26&nbsp;22:18:14&nbsp;2010</span>
    <span class="description">matthew.persico [...] verizon.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #60707] Install Failures - Strawberry 5.12.1.0, 64 bit</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 26 Aug 2010 22:18:07 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Matthew Persico &lt;matthew.persico [...] verizon.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">  On 8/25/2010 10:33 PM, Slaven_Rezic via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=60707">https://rt.cpan.org/Ticket/Display.html?id=60707</a></span>&gt;
&gt;
&gt; On 2010-08-24 23:23:51, PERSICOM wrote:
<div class="message-stanza open">&gt;&gt; Fails to build with Strawberry. Release notes say to use this version for
&gt;&gt; 64 bit compiling. Build log attached.
&gt;&gt;
&gt;&gt; I have also included a failed build for 029.
</div>&gt; Hello Matthew,
&gt;
&gt; can you try the attached patch against 029?
&gt;
&gt; Regards,
&gt;      Slaven
&gt;
</div>Thank you. I got further this time. Now I get:

cp PNG.pm ..\blib\lib\Tk\PNG.pm

C:\strawberry\5.12.1.0.32\perl\bin\perl.exe 
C:\strawberry\5.12.1.0.32\perl\lib\ExtUtils\xsubpp  -typemap

C:\strawberry\5.12.1.0.32\perl\lib\ExtUtils\typemap -typemap 
C:/strawberry/5.12.1.0.32/cpan/build/Tk-804.029-GqmL64/Tk/typemap  
PNG.xs &gt; PNG.xsc &#38;&#38; C:\strawberry\5.12.1.0.32\perl\bin\perl.exe 
-MExtUtils::Command -e &#34;mv&#34; -- PNG.xsc PNG.c

gcc -c  -I.. -I/usr/local/include -I.. -I../pTk/mTk/xlib        -s -O2 
-DWIN32 -DHAVE_DES_FCRYPT -DUSE_SITECUSTOMIZE -DPERL_IMPLICIT_CONTEXT 
-DPERL_IMPLICIT_SYS -fno-strict-aliasing -mms-bitfields 
-DPERL_MSVCRT_READFIX -s -O2         -DVERSION=\&#34;4.004\&#34;   
-DXS_VERSION=\&#34;804.029\&#34;  &#34;-IC:\strawberry\5.12.1.0.32\perl\lib\CORE&#34;   
-Wall -Wno-implicit-int -Wno-comment -Wno-unused 
-D__USE_FIXED_PROTOTYPES__ PNG.c

dmake:  Error: -- `png.h&#39; not found, and can&#39;t be made
dmake.exe:  Error code 255, while making &#39;subdirs&#39;
   SREZIC/Tk-804.029.tar.gz
   C:\strawberry\5.12.1.0.32\c\bin\dmake.exe -- NOT OK
Failed during this command:
  SREZIC/Tk-804.029.tar.gz                     : make NO

The file is in the package though:

matthew@mop ~
$ cd /cygdrive/c/strawberry/5.12.1.0.32/cpan/build/Tk-804.029-GqmL64

matthew@mop /cygdrive/c/strawberry/5.12.1.0.32/cpan/build/Tk-804.029-GqmL64
$ find . -name png.h
./PNG/libpng/png.h

BTW I&#39;m not building under cygwin, just using &#39;find&#39; from that package.

Since the patch was so small, I patched by hand. For future reference, 
using only strawberry tools, where would I normally put the patch and 
what command would I run to apply it?
-- 

Matthew
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;26&nbsp;15:39:53&nbsp;2010</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2010-08-26 22:18:14, matthew.persico@verizon.net wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;   On 8/25/2010 10:33 PM, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=60707">https://rt.cpan.org/Ticket/Display.html?id=60707</a></span>&gt;
&gt; &gt;
&gt; &gt; On 2010-08-24 23:23:51, PERSICOM wrote:
<div class="message-stanza open">&gt; &gt;&gt; Fails to build with Strawberry. Release notes say to use this 
</div></div></div>version for
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; 64 bit compiling. Build log attached.
&gt; &gt;&gt;
&gt; &gt;&gt; I have also included a failed build for 029.
</div>&gt; &gt; Hello Matthew,
&gt; &gt;
&gt; &gt; can you try the attached patch against 029?
&gt; &gt;
&gt; &gt; Regards,
&gt; &gt;      Slaven
&gt; &gt;
</div>&gt; Thank you. I got further this time. Now I get:
&gt; 
&gt; cp PNG.pm ..\blib\lib\Tk\PNG.pm
&gt; 
&gt; C:\strawberry\5.12.1.0.32\perl\bin\perl.exe 
&gt; C:\strawberry\5.12.1.0.32\perl\lib\ExtUtils\xsubpp  -typemap
&gt; 
&gt; C:\strawberry\5.12.1.0.32\perl\lib\ExtUtils\typemap -typemap 
&gt; C:/strawberry/5.12.1.0.32/cpan/build/Tk-804.029-GqmL64/Tk/typemap  
&gt; PNG.xs &gt; PNG.xsc &#38;&#38; C:\strawberry\5.12.1.0.32\perl\bin\perl.exe 
&gt; -MExtUtils::Command -e &#34;mv&#34; -- PNG.xsc PNG.c
&gt; 
&gt; gcc -c  -I.. -I/usr/local/include -I.. -I../pTk/mTk/xlib        -s -O2 
&gt; -DWIN32 -DHAVE_DES_FCRYPT -DUSE_SITECUSTOMIZE -DPERL_IMPLICIT_CONTEXT 
&gt; -DPERL_IMPLICIT_SYS -fno-strict-aliasing -mms-bitfields 
&gt; -DPERL_MSVCRT_READFIX -s -O2         -DVERSION=\&#34;4.004\&#34;   
&gt; -DXS_VERSION=\&#34;804.029\&#34;  &#34;-IC:\strawberry\5.12.1.0.32\perl\lib\CORE&#34;   
&gt; -Wall -Wno-implicit-int -Wno-comment -Wno-unused 
&gt; -D__USE_FIXED_PROTOTYPES__ PNG.c
&gt; 
&gt; dmake:  Error: -- `png.h&#39; not found, and can&#39;t be made
&gt; dmake.exe:  Error code 255, while making &#39;subdirs&#39;
&gt;    SREZIC/Tk-804.029.tar.gz
&gt;    C:\strawberry\5.12.1.0.32\c\bin\dmake.exe -- NOT OK
&gt; Failed during this command:
&gt;   SREZIC/Tk-804.029.tar.gz                     : make NO
&gt; 
&gt; The file is in the package though:
&gt; 
&gt; matthew@mop ~
&gt; $ cd /cygdrive/c/strawberry/5.12.1.0.32/cpan/build/Tk-804.029-GqmL64
&gt; 
&gt; matthew@mop /cygdrive/c/strawberry/5.12.1.0.32/cpan/build/Tk-804.029-
</div>GqmL64
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; $ find . -name png.h
&gt; ./PNG/libpng/png.h
</div>
Can you send me the contents of the generated PNG/Makefile?
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; BTW I&#39;m not building under cygwin, just using &#39;find&#39; from that 
</div>package.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Since the patch was so small, I patched by hand. For future reference, 
&gt; using only strawberry tools, where would I normally put the patch and 
&gt; what command would I run to apply it?
</div>
Usually with the &#34;patch&#34; program, which should be available with cygwin:

    patch -p1 &lt; /path/to/patchfile

while being in the root directory of the source distribution.

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;26&nbsp;18:27:00&nbsp;2010</span>
    <span class="description">matthew.persico [...] verizon.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #60707] Install Failures - Strawberry 5.12.1.0, 64 bit</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 26 Sep 2010 18:26:14 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Matthew Persico &lt;matthew.persico [...] verizon.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">  File attached. Thank you.

On 9/26/2010 3:39 PM, Slaven_Rezic via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=60707">https://rt.cpan.org/Ticket/Display.html?id=60707</a></span>&gt;
&gt;
&gt; On 2010-08-26 22:18:14, matthew.persico@verizon.net wrote:
<div class="message-stanza open">&gt;&gt;    On 8/25/2010 10:33 PM, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt;&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=60707">https://rt.cpan.org/Ticket/Display.html?id=60707</a></span>&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On 2010-08-24 23:23:51, PERSICOM wrote:
<div class="message-stanza open">&gt;&gt;&gt;&gt; Fails to build with Strawberry. Release notes say to use this
</div></div></div>&gt; version for
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; 64 bit compiling. Build log attached.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I have also included a failed build for 029.
</div>&gt;&gt;&gt; Hello Matthew,
&gt;&gt;&gt;
&gt;&gt;&gt; can you try the attached patch against 029?
&gt;&gt;&gt;
&gt;&gt;&gt; Regards,
&gt;&gt;&gt;       Slaven
&gt;&gt;&gt;
</div>&gt;&gt; Thank you. I got further this time. Now I get:
&gt;&gt;
&gt;&gt; cp PNG.pm ..\blib\lib\Tk\PNG.pm
&gt;&gt;
&gt;&gt; C:\strawberry\5.12.1.0.32\perl\bin\perl.exe
&gt;&gt; C:\strawberry\5.12.1.0.32\perl\lib\ExtUtils\xsubpp  -typemap
&gt;&gt;
&gt;&gt; C:\strawberry\5.12.1.0.32\perl\lib\ExtUtils\typemap -typemap
&gt;&gt; C:/strawberry/5.12.1.0.32/cpan/build/Tk-804.029-GqmL64/Tk/typemap
&gt;&gt; PNG.xs&gt;  PNG.xsc&#38;&#38;  C:\strawberry\5.12.1.0.32\perl\bin\perl.exe
&gt;&gt; -MExtUtils::Command -e &#34;mv&#34; -- PNG.xsc PNG.c
&gt;&gt;
&gt;&gt; gcc -c  -I.. -I/usr/local/include -I.. -I../pTk/mTk/xlib        -s -O2
&gt;&gt; -DWIN32 -DHAVE_DES_FCRYPT -DUSE_SITECUSTOMIZE -DPERL_IMPLICIT_CONTEXT
&gt;&gt; -DPERL_IMPLICIT_SYS -fno-strict-aliasing -mms-bitfields
&gt;&gt; -DPERL_MSVCRT_READFIX -s -O2         -DVERSION=\&#34;4.004\&#34;
&gt;&gt; -DXS_VERSION=\&#34;804.029\&#34;  &#34;-IC:\strawberry\5.12.1.0.32\perl\lib\CORE&#34;
&gt;&gt; -Wall -Wno-implicit-int -Wno-comment -Wno-unused
&gt;&gt; -D__USE_FIXED_PROTOTYPES__ PNG.c
&gt;&gt;
&gt;&gt; dmake:  Error: -- `png.h&#39; not found, and can&#39;t be made
&gt;&gt; dmake.exe:  Error code 255, while making &#39;subdirs&#39;
&gt;&gt;     SREZIC/Tk-804.029.tar.gz
&gt;&gt;     C:\strawberry\5.12.1.0.32\c\bin\dmake.exe -- NOT OK
&gt;&gt; Failed during this command:
&gt;&gt;    SREZIC/Tk-804.029.tar.gz                     : make NO
&gt;&gt;
&gt;&gt; The file is in the package though:
&gt;&gt;
&gt;&gt; matthew@mop ~
&gt;&gt; $ cd /cygdrive/c/strawberry/5.12.1.0.32/cpan/build/Tk-804.029-GqmL64
&gt;&gt;
&gt;&gt; matthew@mop /cygdrive/c/strawberry/5.12.1.0.32/cpan/build/Tk-804.029-
</div>&gt; GqmL64
<div class="message-stanza open">&gt;&gt; $ find . -name png.h
&gt;&gt; ./PNG/libpng/png.h
</div>&gt; Can you send me the contents of the generated PNG/Makefile?
&gt;
<div class="message-stanza open">&gt;&gt; BTW I&#39;m not building under cygwin, just using &#39;find&#39; from that
</div>&gt; package.
<div class="message-stanza open">&gt;&gt; Since the patch was so small, I patched by hand. For future reference,
&gt;&gt; using only strawberry tools, where would I normally put the patch and
&gt;&gt; what command would I run to apply it?
</div>&gt; Usually with the &#34;patch&#34; program, which should be available with cygwin:
&gt;
&gt;      patch -p1&lt;  /path/to/patchfile
&gt;
&gt; while being in the root directory of the source distribution.
&gt;
&gt; Regards,
&gt;      Slaven
&gt;
&gt;
&gt;
</div>

-- 
Matthew
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;18&nbsp;13:35:43&nbsp;2011</span>
    <span class="description">ASB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi!

I have some problems installing Tk, but after applying the patch 
mentioned in this ticket, I only get 2 tests that crahses dmake test: 
create.t and zzTixGrid.t.

Test summary is attached, also the PNG/Makefile.
Tk-804.029 didn&#39;t work here, too.

--------------------------------------
More information:
* OS: Windows 7 x64
* Perl: Strawberry perl 5, version 12, subversion 2 &#40;v5.12.2&#41; built for 
MSWin32-x64-multi-thread
* Tk: 804.028503
* Compiler:
C:\zwischen\Tk\Tk-804.028_503&gt;gcc -v
Using built-in specs.
Target: x86_64-w64-mingw32
Configured with: ../gcc44-svn/configure --target=x86_64-w64-mingw32 --
host=x86_6
4-w64-mingw32 --disable-multilib --disable-nls --disable-win32-registry 
--prefix
=/mingw64 --with-gmp=/mingw64 --with-mpfr=/mingw64 --enable-
languages=c,c++
Thread model: win32
gcc version 4.4.3 &#40;GCC&#41;

hth, Alex
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> tk.strawberry.dmake1.log</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/883332/457761/tk.strawberry.dmake1.log">Download tk.strawberry.dmake1.log</a><br />
<span class="downloadcontenttype">application/octet-stream 886b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Makefile</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/883332/457762/Makefile">Download Makefile</a><br />
<span class="downloadcontenttype">application/octet-stream 27.8k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Create even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;27&nbsp;13:17:22&nbsp;2011</span>
    <span class="description">jerome.vivancos [...] laposte.net - Ticket #67002:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Tk building fail on windows 7 64 bits</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I tried to build Tk module version 804.029 but building failed while
making pTk lib  &#40;see logs enclosed in &#34;bug tk compil.txt&#34;&#41;.

Last error message:

    dmake:  Error code 129, while making &#39;ClientWin.o&#39;
    dmake.EXE:  Error code 255, while making &#39;pTk\libpTk.a&#39;
      SREZIC/Tk-804.029.tar.gz
      C:\Strawberry\c\bin\dmake.EXE -- NOT OK
    Failed during this command:
     SREZIC/Tk-804.029.tar.gz                     : make NO

OS version: Windows 7 64Bits
Perl Version: 5.12.2   &#40;see file &#34;perl version.txt&#34; for details&#41;.


J. Vivancos
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> bug tk compil.txt</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Perl version.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">C:\&gt;perl -V
Summary of my perl5 &#40;revision 5 version 12 subversion 2&#41; configuration:

  Platform:
    osname=MSWin32, osvers=6.1, archname=MSWin32-x64-multi-thread
    uname=&#39;Win32 strawberryperl 5.12.2.0 #1 Sat Nov  6 10:03:20 2010 x64&#39;
    config_args=&#39;undef&#39;
    hint=recommended, useposix=true, d_sigaction=undef
    useithreads=define, usemultiplicity=define
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=define, use64bitall=undef, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;gcc&#39;, ccflags =&#39; -s -O2 -DWIN32 -DHAVE_DES_FCRYPT -DWIN64 -DCONSERVATIVE  -DUSE_SITECUSTOMIZE -DPERL_IMPLICIT_C
NTEXT -DPERL_IMPLICIT_SYS -fno-strict-aliasing -mms-bitfields -DPERL_MSVCRT_READFIX&#39;,
    optimize=&#39;-s -O2&#39;,
    cppflags=&#39;-DWIN32&#39;
    ccversion=&#39;&#39;, gccversion=&#39;4.4.3&#39;, gccosandvers=&#39;&#39;
    intsize=4, longsize=4, ptrsize=8, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=12
    ivtype=&#39;long long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;long long&#39;, lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;g++&#39;, ldflags =&#39;-s -L&#34;C:\Strawberry\perl\lib\CORE&#34; -L&#34;C:\Strawberry\c\lib&#34;&#39;
    libpth=C:\Strawberry\c\lib C:\Strawberry\c\x86_64-w64-mingw32\lib
    libs=-lmoldname -lkernel32 -luser32 -lgdi32 -lwinspool -lcomdlg32 -ladvapi32 -lshell32 -lole32 -loleaut32 -lnetapi3
 -luuid -lws2_32 -lmpr -lwinmm -lversion -lodbc32 -lodbccp32 -lcomctl32
    perllibs=-lmoldname -lkernel32 -luser32 -lgdi32 -lwinspool -lcomdlg32 -ladvapi32 -lshell32 -lole32 -loleaut32 -lnet
pi32 -luuid -lws2_32 -lmpr -lwinmm -lversion -lodbc32 -lodbccp32 -lcomctl32
    libc=, so=dll, useshrplib=true, libperl=libperl512.a
    gnulibc_version=&#39;&#39;
  Dynamic Linking:
    dlsrc=dl_win32.xs, dlext=dll, d_dlsymun=undef, ccdlflags=&#39; &#39;
    cccdlflags=&#39; &#39;, lddlflags=&#39;-mdll -s -L&#34;C:\Strawberry\perl\lib\CORE&#34; -L&#34;C:\Strawberry\c\lib&#34;&#39;


Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options: MULTIPLICITY PERL_DONT_CREATE_GVSV
                        PERL_IMPLICIT_CONTEXT PERL_IMPLICIT_SYS
                        PERL_MALLOC_WRAP PL_OP_SLAB_ALLOC USE_64_BIT_INT
                        USE_ITHREADS USE_LARGE_FILES USE_PERLIO USE_PERL_ATOF
                        USE_SITECUSTOMIZE
  Built under MSWin32
  Compiled at Nov  6 2010 10:11:48
  @INC:
    C:/Strawberry/perl/site/lib
    C:/Strawberry/perl/vendor/lib
    C:/Strawberry/perl/lib
    .

C:\&gt;</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;08&nbsp;13:58:14&nbsp;2011</span>
    <span class="description">egman.ekki [...] gmail.com - Ticket #67002:  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> egman.ekki [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Mar 27 13:17:22 2011, jvivancos wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; I tried to build Tk module version 804.029 but building failed while
&gt; making pTk lib  &#40;see logs enclosed in &#34;bug tk compil.txt&#34;&#41;.
&gt; 
&gt; Last error message:
&gt; 
&gt;     dmake:  Error code 129, while making &#39;ClientWin.o&#39;
&gt;     dmake.EXE:  Error code 255, while making &#39;pTk\libpTk.a&#39;
&gt;       SREZIC/Tk-804.029.tar.gz
&gt;       C:\Strawberry\c\bin\dmake.EXE -- NOT OK
&gt;     Failed during this command:
&gt;      SREZIC/Tk-804.029.tar.gz                     : make NO
&gt; 
&gt; OS version: Windows 7 64Bits
&gt; Perl Version: 5.12.2   &#40;see file &#34;perl version.txt&#34; for details&#41;.
&gt; 
&gt; 
&gt; J. Vivancos
</div>

Hello, have you tried patch posted here?
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Public/Bug/Display.html?id=60707">https://rt.cpan.org/Public/Bug/Display.html?id=60707</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;08&nbsp;13:58:15&nbsp;2011</span>
    <span class="description">The RT System itself - Ticket #67002:  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;14&nbsp;02:20:49&nbsp;2011</span>
    <span class="description">SREZIC [...] cpan.org - Ticket #67002:  Merged into ticket #60707</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;14&nbsp;02:20:49&nbsp;2011</span>
    <span class="description">SREZIC [...] cpan.org -  Merged into ticket #60707</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;14&nbsp;02:21:43&nbsp;2011</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2010-08-24 23:23:51, PERSICOM wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Fails to build with Strawberry. Release notes say to use this version for 
&gt; 64 bit compiling. Build log attached.
&gt; 
&gt; I have also included a failed build for 029.
</div>
This should be fixed with Tk-804.029_500.

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;14&nbsp;02:21:44&nbsp;2011</span>
    <span class="description">SREZIC [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
