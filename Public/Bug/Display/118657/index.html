<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #118657 for Prima: Prima won&#39;t install on plain windows: img\codec_X11.c:7:23: fatal error: X11/Xlib.h: No such file or directory</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #118657 for Prima: Prima won&#39;t install on plain windows: img\codec_X11.c:7:23: fatal error: X11/Xlib.h: No such file or directory</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Prima">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Prima">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Prima">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Prima">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Prima">Prima CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">118657</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Prima">Prima</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
MITHALDU [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-27120-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-27121-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=118657">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681181" href="/Public/Bug/Display.html?id=118657#txn-1681181">#</a>      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;06&nbsp;20:00:49&nbsp;2016</span>
    <span class="description">MITHALDU [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Prima won&#39;t install on plain windows: img\codec_X11.c:7:23: fatal
 error: X11/Xlib.h: No such file or directory</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681181/902448/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902448">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 723b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I installed the codec pack mentioned in the readme &#40;should be mentioned in the main module, and maybe even get a prompt when mfpl is interactive&#41;. Yet still i get this error:

gcc -c  -Iinclude -Iinclude/generic  -fopenmp   -s -O2 -DWIN32 -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -fno-strict-aliasing -mms-bitfields -s -O2        -DVERSION=\&#34;1.49\&#34;    -DXS_VERSION=\&#34;1.49\&#34;  &#34;-IC:\strawberry\perl\lib\CORE&#34;   img\codec_X11.c -o img\codec_X11.o
img\codec_X11.c:7:23: fatal error: X11/Xlib.h: No such file or directory
compilation terminated.
dmake.EXE:  Error code 129, while making &#39;img\codec_X11.o&#39;

Full details:

<span class="clickylink"><a target="new" rel="nofollow" href="https://gist.github.com/wchristian/6f6fa73a46950b988937c8d20476faec">https://gist.github.com/wchristian/6f6fa73a46950b988937c8d20476faec</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681198" href="/Public/Bug/Display.html?id=118657#txn-1681198">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;01:34:25&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681198/902459/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902459">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 288b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Christian,

It looks that you have already a x11 installed, which gets in conflict with Prima:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Checking for x11 using pkg-config...1.6.3
</div>
I believe it might be misconfigured; you can try to run 

&#34;pkg-config --cflags-only-I x11&#34;

on your system to see if it has X11.h there.

Dmitry
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681199" href="/Public/Bug/Display.html?id=118657#txn-1681199">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;01:34:25&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681201" href="/Public/Bug/Display.html?id=118657#txn-1681201">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;01:48:17&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681201/902461/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902461">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 387b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Oh, this is not plain windows, this is strawberry -- it should have all graphic libraries installed by default &#40;you only need the codec pack for activestate perl&#41;.

Is it by chance a pre-5.20 strawberry? Prima still should be working on them with no problem &#40;it had pkgconfig problem fixed in 5.20&#41;, but could you possible give me the strawberry version so I could try to reproduce?

/dk
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681203" href="/Public/Bug/Display.html?id=118657#txn-1681203">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;02:01:05&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681203/902463/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902463">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 75b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hmm no, just tried on sb-5.18.1, all is good. Looks like a pkgconfig issue.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681308" href="/Public/Bug/Display.html?id=118657#txn-1681308">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;09:43:57&nbsp;2016</span>
    <span class="description">MITHALDU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681308/902495/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902495">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 234b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">It is Strawberry 18.4. Here&#39;s an archive of it: <span class="clickylink"><a target="new" rel="nofollow" href="https://dl.dropboxusercontent.com/u/10190786/strawberry.rar">https://dl.dropboxusercontent.com/u/10190786/strawberry.rar</a></span>

Also, i meant plain because it&#39;s not cygwin, and at the current time strawberry *is* the de factor default perl on windows.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681339" href="/Public/Bug/Display.html?id=118657#txn-1681339">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;11:17:07&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681339/902515/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902515">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 213b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Just tried, all good as well. Also, the archive doesn&#39;t have any pkg-config.bat which was used by Makefile.PL as seen in the log file you&#39;ve sent -- are you sure it was not dragged in by your non-strawberry setup?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681353" href="/Public/Bug/Display.html?id=118657#txn-1681353">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;12:08:03&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681353/902525/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902525">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 111b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#40;btw if you don&#39;t want to waste time on debugging you can just &#39;rm img/codec_X11.c&#39; and re-run Makefile.PL etc&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681372" href="/Public/Bug/Display.html?id=118657#txn-1681372">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;12:58:21&nbsp;2016</span>
    <span class="description">MITHALDU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681372/902544/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902544">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 326b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m fine with debugging. As for pkg-config: I have set up cygwin to be visible from cmd shell by default and it looks like it&#39;s finding that one:

C:\Users\Mithaldu&gt;which pkg-config
/usr/bin/pkg-config

Maybe your mfpl needs to recognize that and ignore pkg-config if it&#39;s a cygwin one when being run by a normal windows perl?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681374" href="/Public/Bug/Display.html?id=118657#txn-1681374">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;13:14:14&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681374/902546/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902546">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 679b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Maybe your mfpl needs to recognize that and ignore pkg-config if it&#39;s
&gt; a cygwin one when being run by a normal windows perl?
</div>
It could be a valid thing to do, but the problem is that modern strawberries &#40;&gt;=5.20&#41; also have pkg-config included :&#41; I don&#39;t think that differing between pkg-config.bat and pkg-config.exe is a good idea.

I also think that generally mixing up cygwin and native win32 tools is a dangerous endeavour - f.ex. consider how find.exe is different there -- if you mix one with another, then all bets are off...

I can add a non-default option to mfpl to ignore pkg-config, if that helps you though, something like &#34;perl Makefile.PL USE_PKGCONFIG=0&#34; . 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681376" href="/Public/Bug/Display.html?id=118657#txn-1681376">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;14:00:03&nbsp;2016</span>
    <span class="description">MITHALDU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681376/902548/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902548">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; pkg-config.bat
</div>
It is not pkg-config.bat. It is a cygwin executable built to run primarily within the cygwin environment.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I also think that generally mixing up cygwin and native win32 tools is
&gt; a dangerous endeavour - f.ex. consider how find.exe is different there
&gt; -- if you mix one with another, then all bets are off...
</div>
Doing this is a very normal and standard way of installing cygwin and recommended in many cygwin install guides. You&#39;re almost guaranteed to run into this with a person who has perl and cygwin on their windows.

&#40;The find thing is also a red herring since the cygwin find does not override the windows find, and inside the cygwin shell environment the cygwin path comes first, so windows find isn&#39;t mixed into the process.&#41;
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I can add a non-default option to mfpl to ignore pkg-config, if that
&gt; helps you though, something like &#34;perl Makefile.PL USE_PKGCONFIG=0&#34; .
</div>
That would help me, but i&#39;m not interested in that. I would prefer to see a general solution for all other users as well. Instead of dumping it on the user this would be fine and unproblematic:

$use_pkgconfig = 0 # cygwin pkg-config on win32 perl
  if $^O eq &#39;MSWin32&#39; and `which pkg-config 2&gt;nul` =~ m@^/@;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681408" href="/Public/Bug/Display.html?id=118657#txn-1681408">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;14:15:12&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681408/902568/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902568">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Nov 07 14:00:03 2016, MITHALDU wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; pkg-config.bat
</div>&gt; 
&gt; It is not pkg-config.bat. It is a cygwin executable built to run
&gt; primarily within the cygwin environment.
</div>
Yes, I was referring to strawberry&#39;s one - it&#39;s .bat &#40;vs cygwin&#39;s .exe&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You&#39;re almost guaranteed to run into this with a person who has perl and cygwin on their windows.
</div>
Well I don&#39;t agree to that. Cygwin by default doesn&#39;t install itself into PATH, while strawberry does. From Makefile.pl&#39;s point of view, all tools it runs should be properly configured by perl, -- it calls gcc and ld, so if one mixes them, that wouldn&#39;t work either. 


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; That would help me, but i&#39;m not interested in that. I would prefer to
&gt; see a general solution for all other users as well. Instead of dumping
&gt; it on the user this would be fine and unproblematic:
&gt; 
&gt; $use_pkgconfig = 0 # cygwin pkg-config on win32 perl
&gt;   if $^O eq &#39;MSWin32&#39; and `which pkg-config 2&gt;nul` =~ m@^/@;
</div>
I would say the general solution is to upgrade strawberry to 5.20 as it has this problem fixed. Also, this solution won&#39;t work on 5.18 strawberry because &#34;which&#34; is not found in it, and it will make things worse on 5.20 mixed with cygwin because it won&#39;t let Prima use the legitimate pkg-config from strawberry.

Generally, I&#39;m not against fixing this problem. It&#39;s just I don&#39;t see a good reliable way to detect cygwin vs non-cygwin. If there was an unambiguous way to tell one from another, f.ex. &#39;test [ pkg-config -v ] == &#34;cygwin&#34;&#39; I would just apply the fix and be done with it. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681436" href="/Public/Bug/Display.html?id=118657#txn-1681436">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;14:37:39&nbsp;2016</span>
    <span class="description">MITHALDU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681436/902587/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902587">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">`which`not existing is no problem, since it comes default with cygwin. If there&#39;s a cygwin pkg-config around, then there&#39;s a cygwin which, and if there&#39;s no cygwin pkg-config, then the which isn&#39;t there either. The 2&gt;nul takes care of the error message about &#34;executable not found&#34;.

That said, i did forget that which will always give the path in the cygwin notation, i.e.:

  C:\Users\Mithaldu&gt;which pkg-config
  /usr/bin/pkg-config

vs

  C:\Users\Mithaldu&gt;which pkg-config
  /cygdrive/c/strawberry/perl/bin/pkg-config

I think it would be fine to modify the code to this:

  $use_pkgconfig = 0 # cygwin pkg-config on win32 perl
    if $^O eq &#39;MSWin32&#39; and `which pkg-config 2&gt;nul` =~ m@^/usr/bin/pkg-config@;

On the other hand, strawberry&#39;s pkg-config is very explicit about what it is:

  C:\Users\Mithaldu&gt;pkg-config --help
  Name:
      PkgConfig - Pure-Perl Core-Only replacement for pkg-config

Versus cygwin&#39;s:

  C:\Users\Mithaldu&gt;pkg-config --help
  Usage:
    pkg-config [OPTION...]
  
  Help Options:

You could also match on the --help header under Strawberry.

Strawberry pkg-config also has this option, which the cygwin one lacks:

  C:\Users\Mithaldu&gt;pkg-config --real-version
  ppkg-config - cruftless pkg-config
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681440" href="/Public/Bug/Display.html?id=118657#txn-1681440">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;15:33:07&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681440/902591/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902591">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 263b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">All right, if you insist :&#41;

I totally don&#39;t buy it that there are more than one person in the world running 5.18 AND cygwin, but okay -- I have committed the patch, please check out the latest github version if it works for you:

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/dk/Prima">https://github.com/dk/Prima</a></span>

/dk
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681474" href="/Public/Bug/Display.html?id=118657#txn-1681474">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;16:18:09&nbsp;2016</span>
    <span class="description">MITHALDU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681474/902614/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902614">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 722b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Nov 07 21:33:07 2016, KARASIK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; All right, if you insist :&#41;
</div>
Thanks for indulging me. :&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I totally don&#39;t buy it that there are more than one person in the
&gt; world running 5.18 AND cygwin, but okay -- I have committed the patch,
&gt; please check out the latest github version if it works for you:
</div>
Well, running Cygwin like that is much-recommended, and people being lazy is natural human trait. ;&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/dk/Prima">https://github.com/dk/Prima</a></span>
</div>
Hrm, this compiled fine, but now the tests segfault *immediately*. In this gist are four logs where i progressively remove more things, up to and including cygwin, but still get crashes during `dmake test`.

<span class="clickylink"><a target="new" rel="nofollow" href="https://gist.github.com/wchristian/755daa0fba1cf5611255f5d5285b6209">https://gist.github.com/wchristian/755daa0fba1cf5611255f5d5285b6209</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681476" href="/Public/Bug/Display.html?id=118657#txn-1681476">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;16:39:22&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681476/902616/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902616">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 592b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hrm, this compiled fine, but now the tests segfault *immediately*. In
&gt; this gist are four logs where i progressively remove more things, up
&gt; to and including cygwin, but still get crashes during `dmake test`.
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://gist.github.com/wchristian/755daa0fba1cf5611255f5d5285b6209">https://gist.github.com/wchristian/755daa0fba1cf5611255f5d5285b6209</a></span>
</div>

This is crap. But, I really can&#39;t reproduce it with 5.18-4, everything works just fine for me, all tests passed, no problem at all. 

Could you possibly, just for the sake of a clear experiment, remove cygwin from PATH completely and re-build? If some wrong tools were used, everything could be possible.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681478" href="/Public/Bug/Display.html?id=118657#txn-1681478">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;16:43:01&nbsp;2016</span>
    <span class="description">MITHALDU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681478/902618/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902618">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 279b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Could you possibly, just for the sake of a clear experiment, remove
&gt; cygwin from PATH completely and re-build?
</div>
That is exactly what i did in the third log. :&#41;

It also happens under 5.24 with cygwin removed: <span class="clickylink"><a target="new" rel="nofollow" href="https://gist.github.com/wchristian/8e6f97b290de15f498fbfbb084e62091">https://gist.github.com/wchristian/8e6f97b290de15f498fbfbb084e62091</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681480" href="/Public/Bug/Display.html?id=118657#txn-1681480">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;17:05:04&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681480/902620/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902620">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 306b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Well... I&#39;ve never seen anything like that before. This must be something rather low-level. Does &#39;perl -Mblib -MPrima -e 1&#39; coredump as well? If yes, then I&#39;m throwing a towel - the last ever thing to check if &#34;ldd blib\arch\auto\Prima\Prima.xs.dll&#34; makes any sense. Other than this, I&#39;m lost, am afraid...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681482" href="/Public/Bug/Display.html?id=118657#txn-1681482">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;17:14:24&nbsp;2016</span>
    <span class="description">MITHALDU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681482/902622/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902622">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 201b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">It does indeed.

I&#39;ve not been able to find useful stacktraces in the event viewer or with the visual studio debugger.

I do remember Prima worked on my system once, so i will try and bisect tomorrow.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1681509" href="/Public/Bug/Display.html?id=118657#txn-1681509">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;08&nbsp;01:44:32&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1681509/902642/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902642">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 151b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I would suspect the linked libraries - removing codecs &#40;the same way you did with X11.c&#41; and using WITH_OPENMP=0 for minimal setup might hint something
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682018" href="/Public/Bug/Display.html?id=118657#txn-1682018">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;10&nbsp;13:53:26&nbsp;2016</span>
    <span class="description">MITHALDU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1682018/902931/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902931">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 245b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Good news, after noticing that the CPAN 1.49 doesn&#39;t immediately fall over, i bisected things down:

<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=118657">https://rt.cpan.org/Ticket/Display.html?id=118657</a></span>

GOOD: 1c7094ea8d7698245b0045ced2d06ad96136ee93

BAD: 3038c3756140448daa432d52add6e65ce647fa87
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682025" href="/Public/Bug/Display.html?id=118657#txn-1682025">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;10&nbsp;14:54:44&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1682025/902938/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902938">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 329b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you! 

However, it is still mysterious - it looks like functions returned by LoadLibrary are bad. Those are new Win8 functions that might or might not be available on the system ... What is the OS version you are using? Do you think it would be possible to add some debug info to find out where the crash occurs, and why?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682027" href="/Public/Bug/Display.html?id=118657#txn-1682027">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;10&nbsp;15:01:49&nbsp;2016</span>
    <span class="description">MITHALDU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1682027/902940/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902940">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 88b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m on windows 10 64 bit pro.

I&#39;ll do some print debugging to see if i can pinpoint it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682029" href="/Public/Bug/Display.html?id=118657#txn-1682029">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;10&nbsp;15:22:07&nbsp;2016</span>
    <span class="description">MITHALDU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1682029/902942/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902942">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 290b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Does this help you any?

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/wchristian/Prima/commit/59dc79fe63aa6bba5ba958a94c4ca6312be1b574">https://github.com/wchristian/Prima/commit/59dc79fe63aa6bba5ba958a94c4ca6312be1b574</a></span>

I think it might be triggering some event after leaving the dpi change function, and then crashes in that event, but i don&#39;t know how to figure out where in the code that might be.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682040" href="/Public/Bug/Display.html?id=118657#txn-1682040">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;10&nbsp;15:37:07&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1682040/902949/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902949">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 202b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you! It helps, somewhat, it seems that the stack is being royally fucked up. Is your perl also 64 bit? Just 5 minutes ago I also tried on Windows 10 64-bit &#40;non-Pro though&#41; and all went just fine.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682042" href="/Public/Bug/Display.html?id=118657#txn-1682042">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;10&nbsp;15:40:16&nbsp;2016</span>
    <span class="description">MITHALDU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1682042/902951/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902951">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 186b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">It&#39;s apparently 32 bit with 64bit ints?

This is perl 5, version 24, subversion 0 &#40;v5.24.0&#41; built for MSWin32-x86-multi-thread-64int

Let me know if i can be helpful in any other way. :&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682059" href="/Public/Bug/Display.html?id=118657#txn-1682059">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;10&nbsp;15:57:23&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1682059/902959/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902959">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 108b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the research! I can reproduce the problem with 32-bit perl. It&#39;s crazy :&#41; I&#39;ll keep you in touch.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682065" href="/Public/Bug/Display.html?id=118657#txn-1682065">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;10&nbsp;16:24:48&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1682065/902963/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902963">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 82b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I think I found it. Could you possibly test the latest github snapshot? Thank you!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682075" href="/Public/Bug/Display.html?id=118657#txn-1682075">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;10&nbsp;17:06:38&nbsp;2016</span>
    <span class="description">MITHALDU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1682075/902968/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/902968">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 362b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yep, that did it! Mind explaining what that change does? Just a little curious. :&#41;

Also, this test fail is left:

t/Object/Fonts.t ........ 796/1274
#   Failed test &#39;text wrap XVMSymbol&#39;
#   at t/Object/Fonts.t line 75.
#     &#39;3&#39;
#         &gt;
#     &#39;4&#39;
# Looks like you failed 1 test of 1274.
t/Object/Fonts.t ........ Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682167" href="/Public/Bug/Display.html?id=118657#txn-1682167">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;11&nbsp;04:04:00&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1682167/903003/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/903003">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Nov 10 17:06:38 2016, MITHALDU wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Yep, that did it! Mind explaining what that change does? Just a little
&gt; curious. :&#41;
</div>
The change applies a very special hint to compiler to generate the C call conforming to Windows API convention &#40;__stdcall&#41;, because apparently by default C compilers use __cdecl. You can read more on <span class="clickylink"><a target="new" rel="nofollow" href="https://en.wikipedia.org/wiki/X86_calling_conventions">https://en.wikipedia.org/wiki/X86_calling_conventions</a></span> if you&#39;re curious, but TL;DR is basically that if you call a function as one while it is another, the stack will be corrupted, which we just observed. Strangely there were no problem on 64-bit perl calling native 64-bit DLL, but with 32-bit perl using WOW64 layer it just happened.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Also, this test fail is left:
&gt; 
&gt; t/Object/Fonts.t ........ 796/1274
&gt; #   Failed test &#39;text wrap XVMSymbol&#39;
&gt; #   at t/Object/Fonts.t line 75.
&gt; #     &#39;3&#39;
&gt; #         &gt;
&gt; #     &#39;4&#39;
&gt; # Looks like you failed 1 test of 1274.
&gt; t/Object/Fonts.t ........ Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
</div>
This is very mild, but for pedantry sake I&#39;d like to ask you to upload the offending xvmsymbol.ttf somewhere so I could check out what went wrong.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682169" href="/Public/Bug/Display.html?id=118657#txn-1682169">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;11&nbsp;04:15:34&nbsp;2016</span>
    <span class="description">MITHALDU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1682169/903005/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/903005">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 421b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Nov 11 10:04:00 2016, KARASIK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [...]
</div>
Thanks for the explanation and the link for further reading. It makes a lot more sense now. :&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This is very mild, but for pedantry sake I&#39;d like to ask you to upload
&gt; the offending xvmsymbol.ttf somewhere so I could check out what went
&gt; wrong.
</div>
Ah, that&#39;s a font containing icons for a World of Tanks mod. :D

<span class="clickylink"><a target="new" rel="nofollow" href="https://dl.dropboxusercontent.com/u/10190786/xvm.zip">https://dl.dropboxusercontent.com/u/10190786/xvm.zip</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682384" href="/Public/Bug/Display.html?id=118657#txn-1682384">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;12&nbsp;05:02:12&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1682384/903109/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/903109">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 159b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes, that was an interesting font :&#41; I made the test to assume less, so it shouldn&#39;t fail now. Luckily, that was never a bug, just the test expecting too much.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682386" href="/Public/Bug/Display.html?id=118657#txn-1682386">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;12&nbsp;05:13:41&nbsp;2016</span>
    <span class="description">MITHALDU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1682386/903111/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/903111">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 25b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ha, cheers!

Result: PASS
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682388" href="/Public/Bug/Display.html?id=118657#txn-1682388">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;12&nbsp;05:37:53&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1682388/903113/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/903113">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 118b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Nov 12 05:13:41 2016, MITHALDU wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Ha, cheers!
&gt; 
&gt; Result: PASS
</div>
Cool! I guess we close the issue then $&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1682390" href="/Public/Bug/Display.html?id=118657#txn-1682390">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;12&nbsp;05:37:53&nbsp;2016</span>
    <span class="description">KARASIK [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.951909</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
