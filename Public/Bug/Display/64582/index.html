<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #64582 for Perl-Critic: Perl::Critic::PolicyFactory shouldn&#39;t warn if profile disables non-installed policy &#40;patch&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #64582 for Perl-Critic: Perl::Critic::PolicyFactory shouldn&#39;t warn if profile disables non-installed policy &#40;patch&#41;</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Perl-Critic">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Perl-Critic">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Perl-Critic">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Perl-Critic">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/Perl-Critic/Perl-Critic/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Perl-Critic">Perl-Critic CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">64582</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Perl-Critic">Perl-Critic</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dschrag [...] oneupweb.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-25198-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.109    </td>
  </tr>
  <tr id="CF-25199-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




policyfactory.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/878630/455089/policyfactory.diff">
Fri Jan 07 13:15:59 2011 (575b) by http://dmaestro12.myopenid.com/
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=64582">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-878630" href="/Public/Bug/Display.html?id=64582#txn-878630">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;07&nbsp;13:15:59&nbsp;2011</span>
    <span class="description">http://dmaestro12.myopenid.com/ -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Perl::Critic::PolicyFactory shouldn&#39;t warn if profile disables
 non-installed policy &#40;patch&#41;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/878630/455088/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/455088">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 579b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">We have different versions of Perl &#40;and Perl::Critic&#41; installed, but use
a common perlcriticrc. We want to disable a few newer policies, but
older versions of Perl::Critic don&#39;t have those installed and warn
because it is mentioned in the user profile.

For example, with a .perlcriticrc containing:

  [-Test::Test]

And a file Test.pm containing:

  package Test;
  use warnings;
  use strict;
  1;

The following warning is unnecessary:

  dmaestro@dev:~$ perlcritic Test.pm
  Policy &#34;Perl::Critic::Policy::Test::Test&#34; is not installed.
  Test.pm source OK
  dmaestro@dev:~$
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> policyfactory.diff</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/878630/455089/policyfactory.diff">Download policyfactory.diff</a><br />
<span class="downloadcontenttype">text/x-diff 575b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- Perl/Critic/PolicyFactory.pm.org	2010-11-29 12:06:45.000000000 -0500
+++ Perl/Critic/PolicyFactory.pm	2011-01-07 11:03:25.000000000 -0500
@@ -300,7 +300,8 @@
     my %known_policies = hashify&#40; $self-&gt;site_policy_names&#40;&#41; &#41;;
 
     for my $policy_name &#40; $profile-&gt;listed_policies&#40;&#41; &#41; {
-        if &#40; not exists $known_policies{$policy_name} &#41; {
+        if &#40; not exists $known_policies{$policy_name} and
+             not $profile-&gt;policy_is_disabled&#40;$policy_name&#41; &#41; {
             my $message = qq{Policy &#34;$policy_name&#34; is not installed.};
 
             if &#40; $errors &#41; {
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-878689" href="/Public/Bug/Display.html?id=64582#txn-878689">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;07&nbsp;15:38:37&nbsp;2011</span>
    <span class="description">jeff [...] imaginative-software.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #64582] Perl::Critic::PolicyFactory shouldn&#39;t warn if profile disables  non-installed policy &#40;patch&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 7 Jan 2011 12:38:13 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeffrey Thalhammer &lt;jeff [...] imaginative-software.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/878689/455116/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/455116">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 370b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Try setting the --profile-strictness=quiet option.  This will suppress that warning.  It might also suppress some other non-fatal warnings, but off the top of my head, I&#39;m not sure what those are.  Let me know if that doesn&#39;t work for you.

Happy New Year!

Jeffrey Thalhammer
Imaginative Software Systems
vcard: <span class="clickylink"><a target="new" rel="nofollow" href="http://www.imaginative-software.com/contact/jeff.vcf">http://www.imaginative-software.com/contact/jeff.vcf</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-878692" href="/Public/Bug/Display.html?id=64582#txn-878692">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;07&nbsp;15:38:38&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-878693" href="/Public/Bug/Display.html?id=64582#txn-878693">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;07&nbsp;16:04:40&nbsp;2011</span>
    <span class="description">http://dmaestro12.myopenid.com/ -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/878693/455119/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/455119">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Jan 07 15:38:37 2011, jeff@imaginative-software.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Try setting the --profile-strictness=quiet option.  This will suppress
&gt;    that warning.  It might also suppress some other non-fatal
&gt;    warnings, but off the top of my head, I&#39;m not sure what those are.
&gt;    Let me know if that doesn&#39;t work for you.
&gt; 
&gt; Happy New Year!
&gt; 
&gt; Jeffrey Thalhammer
&gt; Imaginative Software Systems
&gt; vcard: <span class="clickylink"><a target="new" rel="nofollow" href="http://www.imaginative-software.com/contact/jeff.vcf">http://www.imaginative-software.com/contact/jeff.vcf</a></span>
&gt; 
</div>Thanks for your response, Jeff.

I tried the &#39;quiet&#39; option, but it also suppresses warnings if
attributes are set for a module which is not installed - a case I&#39;d
definitely like to know about.

I had to think a little more about my request, since turning this
warning off might mask a misspelling of a module _intended_ to be
disabled; but I think overall I&#39;d rather not be warned. And I&#39;d like our
site-wide configuration to be in the .perlcriticrc, not in additional
command options.

Of course, even if the patch is accepted, I&#39;ll have to upgrade all the
Perl::Critic installations to that level ;-&#41;

Your call &#40;or maybe others will comment if they&#39;ve run into this?&#41;
whether the change is useful enough.

DLS
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-878696" href="/Public/Bug/Display.html?id=64582#txn-878696">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;07&nbsp;16:23:18&nbsp;2011</span>
    <span class="description">http://dmaestro12.myopenid.com/ -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/878696/455122/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/455122">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 860b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Jan 07 16:04:40 2011, <span class="clickylink"><a target="new" rel="nofollow" href="http://dmaestro12.myopenid.com/">http://dmaestro12.myopenid.com/</a></span> wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri Jan 07 15:38:37 2011, jeff@imaginative-software.com wrote:
<div class="message-stanza open">&gt; &gt; Try setting the --profile-strictness=quiet option.  This will suppress
&gt; &gt;    that warning.  It might also suppress some other non-fatal
&gt; &gt;    warnings, but off the top of my head, I&#39;m not sure what those are.
</div>&gt; I had to think a little more about my request, since turning this
&gt; warning off might mask a misspelling of a module _intended_ to be
&gt; disabled; but I think overall I&#39;d rather not be warned. And I&#39;d like our
&gt; site-wide configuration to be in the .perlcriticrc, not in additional
&gt; command options.
&gt; 
</div>
Oh, I see that can be used easily in the profile itself, so the
command-line option isn&#39;t needed after all. Though I still don&#39;t want
it to warn me about _disabling_ options that don&#39;t exist.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; DLS
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-878702" href="/Public/Bug/Display.html?id=64582#txn-878702">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;07&nbsp;16:33:50&nbsp;2011</span>
    <span class="description">jeff [...] imaginative-software.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #64582] Perl::Critic::PolicyFactory shouldn&#39;t warn if profile disables non-installed policy &#40;patch&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 7 Jan 2011 13:33:37 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeffrey Thalhammer &lt;jeff [...] imaginative-software.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/878702/455125/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/455125">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Jan 7, 2011, at 1:04 PM, <span class="clickylink"><a target="new" rel="nofollow" href="http://dmaestro12.myopenid.com/">http://dmaestro12.myopenid.com/</a></span> via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I tried the &#39;quiet&#39; option, but it also suppresses warnings if
&gt; attributes are set for a module which is not installed - a case I&#39;d
&gt; definitely like to know about.
</div>
True.  But with a common configuration, that risk might be pretty low.  Each time you edit your config &#40;which is hopefully not too often&#41;, you can run your newest version of perlcritic with the --profile-strictness=fatal to verify that it is sane.  Everyone else using older versions can just run blindly with --profile-strictness=quiet.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I had to think a little more about my request, since turning this
&gt; warning off might mask a misspelling of a module _intended_ to be
&gt; disabled; but I think overall I&#39;d rather not be warned.
</div>
Yeah, this could be argued either way.  I&#39;ll have to think about which scenario is more likely to be the &#34;right&#34; one.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; And I&#39;d like our
&gt; site-wide configuration to be in the .perlcriticrc, not in additional
&gt; command options.
</div>
As with any other command-line option, you can put --profile-strictness in your .perlcriticrc file.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Of course, even if the patch is accepted, I&#39;ll have to upgrade all the
&gt; Perl::Critic installations to that level ;-&#41;
</div>
Also true.  And if everyone has the same Perl::Critic version, then the whole problem goes away.  If you&#39;ve managed to get everyone to use a common config, then hopefully it shouldn&#39;t take too much arm wrestling to get everyone to use the same library version.

I&#39;ll let the other P::C developers comment before making any decisions on the patch.  Thanks for sending it.

Jeffrey Thalhammer
Imaginative Software Systems
vcard: <span class="clickylink"><a target="new" rel="nofollow" href="http://www.imaginative-software.com/contact/jeff.vcf">http://www.imaginative-software.com/contact/jeff.vcf</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-879558" href="/Public/Bug/Display.html?id=64582#txn-879558">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;09&nbsp;20:39:58&nbsp;2011</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/879558/455570/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/455570">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m still not completely sure where I come out on this. My knee-jerk is
that we should accept the patch. But when I think about it, I tend to
believe we should not, at least as submitted. I hate that, especially
when someone has gone to the trouble to track down the behavior they
would like to change, and come up with a patch for it. It seems a poor
reward for their diligence.

When I think about it, my model is deleting a file. It can be argued
that it should not be an error when you try to delete a file which is
not there, because the end state is the same -- no file. But whether you
spell delete &#39;rm&#39;, &#39;del&#39;, &#39;delete&#39;, or even &#39;pip /de&#39;, every
command-line deletion program I can think of warns on an attempt to
delete a non-existent file, at least by default. Most of them also have
some way to suppress warnings, and the suppression is not limited to the
warning about a non-existent file.

If that analogy is any good, then Perl::Critic already works that way.
But in that case I&#39;m inclined to see the request as a wish for a way to
suppress warnings on disabling non-existent policies, without
suppressing anything else. And the question becomes how best to do that.

I can think of two ways to go without removing the ability to be warned
when a disabled module does not exist: one is another global option
&#40;something like --ignore-non-existent-policy, or
--non-existent-policy=quiet|warn|fatal&#41;; the other is syntax on the
module specification in .perlcriticrc &#40;something like
[--NonExistent::Policy], or maybe even [-disable -quietly
NonExistent::Policy].&#41; The global option has a known implementation
path, but if tinkering with the module specification can be made to work
it would be more flexible.

Of course, no matter what we do, the requester has to upgrade
Perl::Critic to get the benefit. But an upgrade would fix his problem
even if we did nothing.

Make of all this what you will.

Tom
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-879774" href="/Public/Bug/Display.html?id=64582#txn-879774">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;10&nbsp;11:43:23&nbsp;2011</span>
    <span class="description">http://dmaestro12.myopenid.com/ -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/879774/455701/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/455701">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jan 09 20:39:58 2011, WYANT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m still not completely sure where I come out on this. My knee-jerk is
&gt; that we should accept the patch. But when I think about it, I tend to
&gt; believe we should not, at least as submitted. I hate that, especially
&gt; when someone has gone to the trouble to track down the behavior they
&gt; would like to change, and come up with a patch for it. It seems a poor
&gt; reward for their diligence.
&gt; 
</div>
In my case, I am rewarded sufficiently by your thoughtful responses, so
no worries!

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; When I think about it, my model is deleting a file. It can be argued
&gt; that it should not be an error when you try to delete a file which is
&gt; not there, because the end state is the same -- no file. But whether you
&gt; spell delete &#39;rm&#39;, &#39;del&#39;, &#39;delete&#39;, or even &#39;pip /de&#39;, every
&gt; command-line deletion program I can think of warns on an attempt to
&gt; delete a non-existent file, at least by default. Most of them also have
&gt; some way to suppress warnings, and the suppression is not limited to the
&gt; warning about a non-existent file.
&gt; 
&gt; If that analogy is any good, then Perl::Critic already works that way.
&gt; But in that case I&#39;m inclined to see the request as a wish for a way to
&gt; suppress warnings on disabling non-existent policies, without
&gt; suppressing anything else. And the question becomes how best to do that.
&gt; 
&gt; ... 
&gt; Of course, no matter what we do, the requester has to upgrade
&gt; Perl::Critic to get the benefit. But an upgrade would fix his problem
&gt; even if we did nothing.
&gt; 
&gt; Make of all this what you will.
&gt; 
&gt; Tom
</div>
I&#39;m more and more persuaded that just suppressing the warning for the
case I don&#39;t like is not the right thing. It makes the &#39;strictness&#39;
parameter too &#34;potentially surprising&#34;. I was definitely surprised by
the behavior I saw, but there is adequate provision in the
-profile-strictness parameter for most usage.

My surprise was really the result of a versioning issue, not a
strictness issue, so I think after all that&#39;s where it should be
addressed &#40;if at all&#41;. My humble proposal is this:

Add a parameter named &#39;-validate-at-version&#39; which accepts a
Perl::Critic version number, or a range between two versions. The
actions would be as follows:

1. If the Perl::Critic version in use is equal to the highest version in
the validation range, or no parameter is given, validate everything
according to the strictness parameter.

2. If a range is given, and the Perl::Critic version falls within this
range, but is not the highest, then skip validation errors/warnings that
are likely caused by versioning &#40;such as my case where a new Policy is
desired to be disabled&#41;. Yes, errors as well, for consistency.

3. If the Perl::Critic version is outside the given range, then add a
warning/error for ProfileVersionMismatch.

Omitting this parameter then behaves exactly as now.

Using a single value enforces a specific version of Perl::Critic for the
given policy.

Using a range value implies that the policy is designed for the latest
Perl::Critic version given, but previous versions within the range are
known to be suitable as well. Probably should warn in the documentation
against using this casually!

While I think this is the right answer, I&#39;m not prepared to supply a new
patch immediately. Hopefully I can find an opportunity in the next few
months if you agree it is worthwhile.

Thanks!

DLS
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.571997</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
