<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #36687 for Perl6-Junction: Need to get values from junctions</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #36687 for Perl6-Junction: Need to get values from junctions</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Perl6-Junction/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Perl6-Junction/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Perl6-Junction/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Perl6-Junction/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Perl6-Junction">Perl6-Junction CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">36687</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Perl6-Junction/Active/">Perl6-Junction</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ovid [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-25340-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.30000    </td>
  </tr>
  <tr id="CF-25341-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;12&nbsp;10:49:21&nbsp;2008</span>
    <span class="description">ovid [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Need to get values from junctions</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I discovered that sometimes I need to create a new junction based on an
old junction.  Actually, I need to sometimes add and delete values from
junctions, but since I think they&#39;re intended to be immutable, I decided
that just being able to fetch and filter the scalar values to create new
functions was a good alternative.  For example:

  my $number = any&#40; 0 .. 19 &#41;;
  while &#40;$number-&gt;values&#41; {
      my $random_number int&#40;rand&#40;20&#41;&#41;;
      if &#40; $number == $random_number &#41; {
          # handle some task and discard the number
          $number = any&#40; 
              grep { $_ != $random_number } $number-&gt;values
          &#41;;
      }
  }

Not being able to build new junctions based on old ones has been a huge
obstacle in what I&#39;m currently working on and I didn&#39;t want to merely do
something like @$junction since that&#39;s violating encapsulation.

I&#39;ve attached a patch which allows this functionality &#40;it might look a
bit strange because I&#39;ve done some refactoring which utilizes documented
overload behavior&#41;.  I&#39;ve updated the docs, but not increased the
version number because I&#39;m unfamiliar with your versioning scheme.

Cheers,
Ovid
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> perl6-junction.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -uNr Perl6-Junction.orig/Changes Perl6-Junction/Changes
--- Perl6-Junction.orig/Changes	2007-05-11 13:37:02.000000000 +0100
+++ Perl6-Junction/Changes	2008-06-12 15:27:57.000000000 +0100
@@ -1,3 +1,6 @@
+    - Added &#39;values&#39; method to ensure that we can fetch data from junctions
+      and create new junctions based upon old ones.
+
 1.30000 2007-05-11
 
 	- Non-development release.
diff -uNr Perl6-Junction.orig/MANIFEST Perl6-Junction/MANIFEST
--- Perl6-Junction.orig/MANIFEST	2007-05-11 13:37:16.000000000 +0100
+++ Perl6-Junction/MANIFEST	2008-06-12 15:25:33.000000000 +0100
@@ -1,5 +1,6 @@
 Changes
 lib/Perl6/Junction.pm
+lib/Perl6/Junction/Base.pm
 lib/Perl6/Junction/All.pm
 lib/Perl6/Junction/Any.pm
 lib/Perl6/Junction/None.pm
diff -uNr Perl6-Junction.orig/lib/Perl6/Junction/All.pm Perl6-Junction/lib/Perl6/Junction/All.pm
--- Perl6-Junction.orig/lib/Perl6/Junction/All.pm	2007-05-11 13:36:06.000000000 +0100
+++ Perl6-Junction/lib/Perl6/Junction/All.pm	2008-06-12 14:00:49.000000000 +0100
@@ -2,28 +2,7 @@
 use strict;
 our $VERSION = &#39;1.30000&#39;;
 
-use overload&#40;
-    &#39;==&#39;   =&gt; \&#38;num_eq,
-    &#39;!=&#39;   =&gt; \&#38;num_ne,
-    &#39;&gt;=&#39;   =&gt; \&#38;num_ge,
-    &#39;&gt;&#39;    =&gt; \&#38;num_gt,
-    &#39;&lt;=&#39;   =&gt; \&#38;num_le,
-    &#39;&lt;&#39;    =&gt; \&#38;num_lt,
-    &#39;eq&#39;   =&gt; \&#38;str_eq,
-    &#39;ne&#39;   =&gt; \&#38;str_ne,
-    &#39;ge&#39;   =&gt; \&#38;str_ge,
-    &#39;gt&#39;   =&gt; \&#38;str_gt,
-    &#39;le&#39;   =&gt; \&#38;str_le,
-    &#39;lt&#39;   =&gt; \&#38;str_lt,
-    &#39;bool&#39; =&gt; \&#38;bool,
-    &#39;&#34;&#34;&#39;   =&gt; sub {shift},
-&#41;;
-
-sub all {
-    my &#40; $proto, @param &#41; = @_;
-
-    return bless \@param, $proto;
-}
+use base &#39;Perl6::Junction::Base&#39;;
 
 sub num_eq {
     return regex_eq&#40;@_&#41; if ref&#40; $_[1] &#41; eq &#39;Regexp&#39;;
diff -uNr Perl6-Junction.orig/lib/Perl6/Junction/Any.pm Perl6-Junction/lib/Perl6/Junction/Any.pm
--- Perl6-Junction.orig/lib/Perl6/Junction/Any.pm	2007-05-11 13:36:10.000000000 +0100
+++ Perl6-Junction/lib/Perl6/Junction/Any.pm	2008-06-12 14:01:10.000000000 +0100
@@ -2,28 +2,7 @@
 use strict;
 our $VERSION = &#39;1.30000&#39;;
 
-use overload&#40;
-    &#39;==&#39;   =&gt; \&#38;num_eq,
-    &#39;!=&#39;   =&gt; \&#38;num_ne,
-    &#39;&gt;=&#39;   =&gt; \&#38;num_ge,
-    &#39;&gt;&#39;    =&gt; \&#38;num_gt,
-    &#39;&lt;=&#39;   =&gt; \&#38;num_le,
-    &#39;&lt;&#39;    =&gt; \&#38;num_lt,
-    &#39;eq&#39;   =&gt; \&#38;str_eq,
-    &#39;ne&#39;   =&gt; \&#38;str_ne,
-    &#39;ge&#39;   =&gt; \&#38;str_ge,
-    &#39;gt&#39;   =&gt; \&#38;str_gt,
-    &#39;le&#39;   =&gt; \&#38;str_le,
-    &#39;lt&#39;   =&gt; \&#38;str_lt,
-    &#39;bool&#39; =&gt; \&#38;bool,
-    &#39;&#34;&#34;&#39;   =&gt; sub {shift},
-&#41;;
-
-sub any {
-    my &#40; $proto, @param &#41; = @_;
-
-    return bless \@param, $proto;
-}
+use base &#39;Perl6::Junction::Base&#39;;
 
 sub num_eq {
     return regex_eq&#40;@_&#41; if ref&#40; $_[1] &#41; eq &#39;Regexp&#39;;
diff -uNr Perl6-Junction.orig/lib/Perl6/Junction/Base.pm Perl6-Junction/lib/Perl6/Junction/Base.pm
--- Perl6-Junction.orig/lib/Perl6/Junction/Base.pm	1970-01-01 00:00:00.000000000 +0000
+++ Perl6-Junction/lib/Perl6/Junction/Base.pm	2008-06-12 15:02:15.000000000 +0100
@@ -0,0 +1,60 @@
+package Perl6::Junction::Base;
+use strict;
+our $VERSION = &#39;1.30000&#39;;
+
+BEGIN {
+    my @methods = qw&#40;
+        num_eq
+        num_ne
+        num_ge
+        num_gt
+        num_le
+        num_lt
+        str_eq
+        str_ne
+        str_ge
+        str_gt
+        str_le
+        str_lt
+        bool
+    &#41;;
+
+    # See &#34;Inheritance and overloading&#34; in &#34;perldoc overload&#34;.  This behavior
+    # is correct, but OH MY GOD it&#39;s confusing as hell.
+    # Basically, overloading doesn&#39;t allow you to override these methods, so
+    # you need to redispatch to the correct class.  Calling 
+    foreach my $method &#40;@methods&#41; {
+        no strict &#39;refs&#39;;
+        *$method = sub { shift-&gt;$method&#40;@_&#41; };
+    }
+}
+
+use overload&#40;
+    &#39;==&#39;   =&gt; \&#38;num_eq,
+    &#39;!=&#39;   =&gt; \&#38;num_ne,
+    &#39;&gt;=&#39;   =&gt; \&#38;num_ge,
+    &#39;&gt;&#39;    =&gt; \&#38;num_gt,
+    &#39;&lt;=&#39;   =&gt; \&#38;num_le,
+    &#39;&lt;&#39;    =&gt; \&#38;num_lt,
+    &#39;eq&#39;   =&gt; \&#38;str_eq,
+    &#39;ne&#39;   =&gt; \&#38;str_ne,
+    &#39;ge&#39;   =&gt; \&#38;str_ge,
+    &#39;gt&#39;   =&gt; \&#38;str_gt,
+    &#39;le&#39;   =&gt; \&#38;str_le,
+    &#39;lt&#39;   =&gt; \&#38;str_lt,
+    &#39;bool&#39; =&gt; \&#38;bool,
+    &#39;&#34;&#34;&#39;   =&gt; sub {shift},
+&#41;;
+
+sub new {
+    my &#40; $class, @param &#41; = @_;
+    return bless \@param, $class;
+}
+
+sub values {
+    my $self = shift;
+    return wantarray ? @$self : [ @$self ];
+}
+
+1;
+
diff -uNr Perl6-Junction.orig/lib/Perl6/Junction/None.pm Perl6-Junction/lib/Perl6/Junction/None.pm
--- Perl6-Junction.orig/lib/Perl6/Junction/None.pm	2007-05-11 13:36:14.000000000 +0100
+++ Perl6-Junction/lib/Perl6/Junction/None.pm	2008-06-12 14:01:45.000000000 +0100
@@ -2,28 +2,7 @@
 use strict;
 our $VERSION = &#39;1.30000&#39;;
 
-use overload&#40;
-    &#39;==&#39;   =&gt; \&#38;num_eq,
-    &#39;!=&#39;   =&gt; \&#38;num_ne,
-    &#39;&gt;=&#39;   =&gt; \&#38;num_ge,
-    &#39;&gt;&#39;    =&gt; \&#38;num_gt,
-    &#39;&lt;=&#39;   =&gt; \&#38;num_le,
-    &#39;&lt;&#39;    =&gt; \&#38;num_lt,
-    &#39;eq&#39;   =&gt; \&#38;str_eq,
-    &#39;ne&#39;   =&gt; \&#38;str_ne,
-    &#39;ge&#39;   =&gt; \&#38;str_ge,
-    &#39;gt&#39;   =&gt; \&#38;str_gt,
-    &#39;le&#39;   =&gt; \&#38;str_le,
-    &#39;lt&#39;   =&gt; \&#38;str_lt,
-    &#39;bool&#39; =&gt; \&#38;bool,
-    &#39;&#34;&#34;&#39;   =&gt; sub {shift},
-&#41;;
-
-sub none {
-    my &#40; $class, @param &#41; = @_;
-
-    return bless \@param, $class;
-}
+use base &#39;Perl6::Junction::Base&#39;;
 
 sub num_eq {
     return regex_eq&#40;@_&#41; if ref&#40; $_[1] &#41; eq &#39;Regexp&#39;;
diff -uNr Perl6-Junction.orig/lib/Perl6/Junction/One.pm Perl6-Junction/lib/Perl6/Junction/One.pm
--- Perl6-Junction.orig/lib/Perl6/Junction/One.pm	2007-05-11 13:36:18.000000000 +0100
+++ Perl6-Junction/lib/Perl6/Junction/One.pm	2008-06-12 14:01:26.000000000 +0100
@@ -2,28 +2,7 @@
 use strict;
 our $VERSION = &#39;1.30000&#39;;
 
-use overload&#40;
-    &#39;==&#39;   =&gt; \&#38;num_eq,
-    &#39;!=&#39;   =&gt; \&#38;num_ne,
-    &#39;&gt;=&#39;   =&gt; \&#38;num_ge,
-    &#39;&gt;&#39;    =&gt; \&#38;num_gt,
-    &#39;&lt;=&#39;   =&gt; \&#38;num_le,
-    &#39;&lt;&#39;    =&gt; \&#38;num_lt,
-    &#39;eq&#39;   =&gt; \&#38;str_eq,
-    &#39;ne&#39;   =&gt; \&#38;str_ne,
-    &#39;ge&#39;   =&gt; \&#38;str_ge,
-    &#39;gt&#39;   =&gt; \&#38;str_gt,
-    &#39;le&#39;   =&gt; \&#38;str_le,
-    &#39;lt&#39;   =&gt; \&#38;str_lt,
-    &#39;bool&#39; =&gt; \&#38;bool,
-    &#39;&#34;&#34;&#39;   =&gt; sub {shift},
-&#41;;
-
-sub one {
-    my &#40; $class, @param &#41; = @_;
-
-    return bless \@param, $class;
-}
+use base &#39;Perl6::Junction::Base&#39;;
 
 sub num_eq {
     return regex_eq&#40;@_&#41; if ref&#40; $_[1] &#41; eq &#39;Regexp&#39;;
diff -uNr Perl6-Junction.orig/lib/Perl6/Junction.pm Perl6-Junction/lib/Perl6/Junction.pm
--- Perl6-Junction.orig/lib/Perl6/Junction.pm	2007-05-11 13:34:00.000000000 +0100
+++ Perl6-Junction/lib/Perl6/Junction.pm	2008-06-12 15:10:54.000000000 +0100
@@ -15,19 +15,19 @@
 our %EXPORT_TAGS = &#40; ALL =&gt; [@routines] &#41;;
 
 sub all {
-    return Perl6::Junction::All-&gt;all&#40;@_&#41;;
+    return Perl6::Junction::All-&gt;new&#40;@_&#41;;
 }
 
 sub any {
-    return Perl6::Junction::Any-&gt;any&#40;@_&#41;;
+    return Perl6::Junction::Any-&gt;new&#40;@_&#41;;
 }
 
 sub none {
-    return Perl6::Junction::None-&gt;none&#40;@_&#41;;
+    return Perl6::Junction::None-&gt;new&#40;@_&#41;;
 }
 
 sub one {
-    return Perl6::Junction::One-&gt;one&#40;@_&#41;;
+    return Perl6::Junction::One-&gt;new&#40;@_&#41;;
 }
 
 1;
@@ -124,11 +124,22 @@
 Returns true only if B&lt;one and only one&gt; argument tests true according to 
 the operator used.
 
+=head1 ALTERING JUNCTIONS
+
+You cannot alter junctions.  Instead, you can create new junctions out of old
+junctions.  You can do this by calling the C&lt;values&gt; method on a junction.
+
+ my $numbers = any&#40;qw/1 2 3 4 5/&#41;;
+ print $numbers == 3 ? &#39;Yes&#39; : &#39;No&#39;;   # Yes
+
+ $numbers = any&#40; grep { $_ != 3 } $numbers-&gt;values &#41;;
+ print $numbers == 3 ? &#39;Yes&#39; : &#39;No&#39;;   # No
+
 =head1 EXPORT
 
 &#39;all&#39;, &#39;any&#39;, &#39;none&#39;, &#39;one&#39;, as requested.
 
-All subroutines can be called by it&#39;s fully qualified name, if you don&#39;t 
+All subroutines can be called by its fully qualified name, if you don&#39;t 
 want to export them.
 
   use Perl6::Junction;
diff -uNr Perl6-Junction.orig/t/all.t Perl6-Junction/t/all.t
--- Perl6-Junction.orig/t/all.t	2007-01-08 16:49:42.000000000 +0000
+++ Perl6-Junction/t/all.t	2008-06-12 15:21:29.000000000 +0100
@@ -1,5 +1,5 @@
 use strict;
-use Test::More tests =&gt; 87;
+use Test::More tests =&gt; 90;
 
 use Perl6::Junction &#39;all&#39;;
 
@@ -105,3 +105,11 @@
 ok&#40; !all&#40; &#39;a&#39;, undef, &#39;c&#39; &#41;, &#39;! bool&#39; &#41;;
 
 like&#40; all&#40; 1, 2 &#41;, qr/^Perl6::Junction::All=/, &#39;stringified to ref&#39; &#41;;
+
+my @data = qw&#40;3 4 5 6 7&#41;;
+my $junction = all&#40;@data&#41;;
+can_ok $junction, &#39;values&#39;;
+my @values = $junction-&gt;values;
+is_deeply \@values, \@data, &#39;values&#40;&#41; in list context&#39;;
+my $values = $junction-&gt;values;
+is_deeply $values, \@data, &#39;values&#40;&#41; in scalar context&#39;;
diff -uNr Perl6-Junction.orig/t/any.t Perl6-Junction/t/any.t
--- Perl6-Junction.orig/t/any.t	2007-01-08 16:49:44.000000000 +0000
+++ Perl6-Junction/t/any.t	2008-06-12 15:21:47.000000000 +0100
@@ -1,5 +1,5 @@
 use strict;
-use Test::More tests =&gt; 72;
+use Test::More tests =&gt; 75;
 
 use Perl6::Junction &#39;any&#39;;
 
@@ -91,3 +91,10 @@
 
 like&#40; any&#40; 1, 2 &#41;, qr/^Perl6::Junction::Any=/, &#39;stringified to ref&#39; &#41;;
 
+my @data = qw&#40;3 4 5 6 7&#41;;
+my $junction = any&#40;@data&#41;;
+can_ok $junction, &#39;values&#39;;
+my @values = $junction-&gt;values;
+is_deeply \@values, \@data, &#39;values&#40;&#41; in list context&#39;;
+my $values = $junction-&gt;values;
+is_deeply $values, \@data, &#39;values&#40;&#41; in scalar context&#39;;
diff -uNr Perl6-Junction.orig/t/none.t Perl6-Junction/t/none.t
--- Perl6-Junction.orig/t/none.t	2007-01-08 16:49:43.000000000 +0000
+++ Perl6-Junction/t/none.t	2008-06-12 15:22:08.000000000 +0100
@@ -1,5 +1,5 @@
 use strict;
-use Test::More tests =&gt; 78;
+use Test::More tests =&gt; 81;
 
 use Perl6::Junction &#39;none&#39;;
 
@@ -97,3 +97,10 @@
 
 like&#40; none&#40; 1, 2 &#41;, qr/^Perl6::Junction::None=/, &#39;stringified to ref&#39; &#41;;
 
+my @data = qw&#40;3 4 5 6 7&#41;;
+my $junction = none&#40;@data&#41;;
+can_ok $junction, &#39;values&#39;;
+my @values = $junction-&gt;values;
+is_deeply \@values, \@data, &#39;values&#40;&#41; in list context&#39;;
+my $values = $junction-&gt;values;
+is_deeply $values, \@data, &#39;values&#40;&#41; in scalar context&#39;;
diff -uNr Perl6-Junction.orig/t/one.t Perl6-Junction/t/one.t
--- Perl6-Junction.orig/t/one.t	2007-01-08 16:49:43.000000000 +0000
+++ Perl6-Junction/t/one.t	2008-06-12 15:22:34.000000000 +0100
@@ -1,5 +1,5 @@
 use strict;
-use Test::More tests =&gt; 95;
+use Test::More tests =&gt; 98;
 
 use Perl6::Junction &#39;one&#39;;
 
@@ -114,3 +114,10 @@
 
 like&#40; one&#40; 1, 2 &#41;, qr/^Perl6::Junction::One=/, &#39;stringified to ref&#39; &#41;;
 
+my @data = qw&#40;3 4 5 6 7&#41;;
+my $junction = one&#40;@data&#41;;
+can_ok $junction, &#39;values&#39;;
+my @values = $junction-&gt;values;
+is_deeply \@values, \@data, &#39;values&#40;&#41; in list context&#39;;
+my $values = $junction-&gt;values;
+is_deeply $values, \@data, &#39;values&#40;&#41; in scalar context&#39;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;20&nbsp;04:49:21&nbsp;2008</span>
    <span class="description">ovid [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Jun 12 10:49:21 2008, OVID wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I discovered that sometimes I need to create a new junction based on an
&gt; old junction.  Actually, I need to sometimes add and delete values from
&gt; junctions, but since I think they&#39;re intended to be immutable, I decided
&gt; that just being able to fetch and filter the scalar values to create new
&gt; functions was a good alternative.  For example:
&gt; 
&gt;   my $number = any&#40; 0 .. 19 &#41;;
&gt;   while &#40;$number-&gt;values&#41; {
&gt;       my $random_number int&#40;rand&#40;20&#41;&#41;;
&gt;       if &#40; $number == $random_number &#41; {
&gt;           # handle some task and discard the number
&gt;           $number = any&#40; 
&gt;               grep { $_ != $random_number } $number-&gt;values
&gt;           &#41;;
&gt;       }
&gt;   }
&gt; 
&gt; Not being able to build new junctions based on old ones has been a huge
&gt; obstacle in what I&#39;m currently working on and I didn&#39;t want to merely do
&gt; something like @$junction since that&#39;s violating encapsulation.
&gt; 
&gt; I&#39;ve attached a patch which allows this functionality &#40;it might look a
&gt; bit strange because I&#39;ve done some refactoring which utilizes documented
&gt; overload behavior&#41;.  I&#39;ve updated the docs, but not increased the
&gt; version number because I&#39;m unfamiliar with your versioning scheme.
</div>
I should submit an updated patch.  In the new base class, switching from
code references to strings for the overloaded methods makes the pain
&#40;see the awful *$method = sub { shift-&gt;$method } bit&#41;

Cheers,
Ovid
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;20&nbsp;04:49:23&nbsp;2008</span>
    <span class="description">ovid [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;20&nbsp;04:58:39&nbsp;2008</span>
    <span class="description">cpan [...] fireartist.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks, I&#39;ve applied the patch - though after following the use.perl.org
thread, I changed the overloading from \&#38;foo to &#34;foo&#34;, and was able to
remove the funky BEGIN block.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve updated the docs, but not increased the
&gt; version number because I&#39;m unfamiliar with your versioning scheme.
</div>
Hmm, looking at the history of version numbers, it seems neither am I ;&#41;

However, I&#39;ve dreamed up a new number and uploaded a new release to cpan.

Cheers,
carl
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;20&nbsp;04:58:42&nbsp;2008</span>
    <span class="description">cpan [...] fireartist.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;20&nbsp;14:14:57&nbsp;2008</span>
    <span class="description">curtis_ovid_poe [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #36687] Need to get values from junctions </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 20 Jun 2008 10:18:36 +0100 &#40;BST&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl6-Junction [...] rt.cpan.org, ovid [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ovid &lt;curtis_ovid_poe [...] yahoo.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks!  I&#39;m looking forward to it.  It will save us a lot of trouble
:&#41;

Cheers,
Ovid
--- Carl Franks via RT &lt;bug-Perl6-Junction@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=36687">http://rt.cpan.org/Ticket/Display.html?id=36687</a></span> &gt;
&gt; 
&gt; Thanks, I&#39;ve applied the patch - though after following the
&gt; use.perl.org
&gt; thread, I changed the overloading from \&#38;foo to &#34;foo&#34;, and was able
&gt; to
&gt; remove the funky BEGIN block.
&gt; 
<div class="message-stanza open">&gt; &gt; I&#39;ve updated the docs, but not increased the
&gt; &gt; version number because I&#39;m unfamiliar with your versioning scheme.
</div>&gt; 
&gt; Hmm, looking at the history of version numbers, it seems neither am I
&gt; ;&#41;
&gt; 
&gt; However, I&#39;ve dreamed up a new number and uploaded a new release to
&gt; cpan.
&gt; 
&gt; Cheers,
&gt; carl
&gt; 
&gt; 
</div>

--
Buy the book  - <span class="clickylink"><a target="new" rel="nofollow" href="http://www.oreilly.com/catalog/perlhks/">http://www.oreilly.com/catalog/perlhks/</a></span>
Personal blog - <span class="clickylink"><a target="new" rel="nofollow" href="http://publius-ovidius.livejournal.com/">http://publius-ovidius.livejournal.com/</a></span>
Tech blog     - <span class="clickylink"><a target="new" rel="nofollow" href="http://use.perl.org/~Ovid/journal/">http://use.perl.org/~Ovid/journal/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;20&nbsp;14:14:58&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;02&nbsp;04:08:20&nbsp;2008</span>
    <span class="description">cpan [...] fireartist.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
