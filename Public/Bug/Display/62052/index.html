<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #62052 for Math-BigInt: BigInt documentation is a tad misleading for brsft</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #62052 for Math-BigInt: BigInt documentation is a tad misleading for brsft</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Math-BigInt/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Math-BigInt/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Math-BigInt/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Math-BigInt/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Math-BigInt">Math-BigInt CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">62052</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Math-BigInt/Active/">Math-BigInt</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
Test [...] globis.net

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-20500-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-20501-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.9994    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;11&nbsp;13:04:26&nbsp;2010</span>
    <span class="description">Test [...] globis.net -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> BigInt documentation is a tad misleading for brsft</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 11 Oct 2010 19:04:00 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Test &lt;Test [...] globis.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Package: Math::BigInt
Distribution: straight from cpan.
Verison: 1.89

Thanks for the code. I&#39;m grateful. Honest. But I did encounter a wee 
disappointment.

The html documentation seems to state:

brsft&#40;&#41; 
&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/%7Eflora/Math-BigInt-1.96/lib/Math/BigInt.pm#___top&gt;">http://search.cpan.org/%7Eflora/Math-BigInt-1.96/lib/Math/BigInt.pm#___top&gt;</a></span>
$x-&gt;brsft&#40;$y,$n&#41;;

Shifts $x right by $y in base $n. Default is base 2, used are usually 10 
and 2, but others work, too.

But looking in the pod documentation in the distrution package: line 
3183 of the synopsis states

   $x-&gt;brsft&#40;$y&#41;;       # right shift in base 2
                # returns &#40;quo,rem&#41; or quo if in scalar context

However, the real working code does not seem to be at all context 
sensitive i.e. it never returns rem &#40;comes back as undef&#41;

I find this is a bit of a shame for simple situations where you want to 
take the first and second nibble e.g. like stripping out the first and 
second 64 bits of an IPv6 address to be stored in a MySQL database which 
can&#39;t handle 128 bits in one integer.

I ended up using:

sub IP_to_db {
   # make sure the input really is a bigint
   my $bint = Math::BigInt-&gt;new&#40;shift&#41;;

   my $top_nibble=Math::BigInt-&gt;new&#40;1&#41;;
   $top_nibble-&gt;blsft&#40;64&#41;; # left shift 64 bits
   my $nibble_a;
   my $nibble_b;
   &#40;$nibble_a,$nibble_b&#41;= $bint-&gt;bdiv&#40;$top_nibble&#41;; # split into 2*64 
bits for MySQL

which is probably a lot less efficient than
   my $nibble_a;
   my $nibble_b;
   &#40;$nibble_a,$nibble_b&#41;= $bint-&gt;brsft&#40;64&#41;;

&#40;depending on the internal representation of course&#41;

redards,
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;12&nbsp;02:41:30&nbsp;2010</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is clearly a bug in the documentation. There is nothing in the code
for brsft&#40;&#41; and blsft&#40;&#41; indicating that these methods were ever supposed
to return both the quotient and the remainder. I have attached a patch
that corrects the POD.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Math-BigInt-id-62052.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/Math/BigInt.pm.orig	2010-10-12 08:23:49.218113600 +0200
+++ lib/Math/BigInt.pm	2010-10-12 08:44:19.507182400 +0200
@@ -3180,10 +3180,8 @@
   $x-&gt;bpow&#40;$y&#41;;		   # power of arguments &#40;x ** y&#41;
   $x-&gt;blsft&#40;$y&#41;;	   # left shift in base 2
   $x-&gt;brsft&#40;$y&#41;;	   # right shift in base 2
-			   # returns &#40;quo,rem&#41; or quo if in scalar context
   $x-&gt;blsft&#40;$y,$n&#41;;	   # left shift by $y places in base $n
   $x-&gt;brsft&#40;$y,$n&#41;;	   # right shift by $y places in base $n
-			   # returns &#40;quo,rem&#41; or quo if in scalar context
   
   $x-&gt;band&#40;$y&#41;;		   # bitwise and
   $x-&gt;bior&#40;$y&#41;;		   # bitwise inclusive or
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;12&nbsp;02:41:31&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;12&nbsp;03:24:49&nbsp;2010</span>
    <span class="description">Test [...] globis.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #62052] BigInt documentation is a tad misleading for brsft</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 12 Oct 2010 09:24:30 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Test &lt;Test [...] globis.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Peter John Acklam via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=62052">https://rt.cpan.org/Ticket/Display.html?id=62052</a></span>&gt;
&gt;
&gt; This is clearly a bug in the documentation. There is nothing in the code
&gt; for brsft&#40;&#41; and blsft&#40;&#41; indicating that these methods were ever supposed
&gt; to return both the quotient and the remainder. I have attached a patch
&gt; that corrects the POD.
&gt;    
</div>Fair enough. I accept that explanation and shall continue to use my 
alternative code.

Just FYI: in the rather ancient World of integer arithmetic and 8 bit 
microprocessors, it was common when performing operations like logical 
shift right or arithmetic shift left to preserve the bits that &#34;fell off 
the end&#34; during the shift so you could use them in another result see 
e.g. 6502 LSR &#38; ASL opcodes where the additional bit drops into the 
&#34;carry bit&#34; which you can then shift into another register, thus 
extending maths beyond your original 8 bits. That exactly corresponds to 
what I was trying to do &#40;except for 64 bits&#41; although I accept that the 
general point of the bigint lib is that normally you shouldn&#39;t have to 
perform such primitive operations. Shame MySQL still has the hard 64 bit 
limit on integers. Maybe I/someone should be adding this to the Net::IP 
library, as I suspect it will be quite a common requirement.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;12&nbsp;06:03:46&nbsp;2010</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Oct 12 03:24:49 2010, Test@globis.net wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Fair enough. I accept that explanation and shall continue to use my 
&gt; alternative code. &#40;...&#41;
</div>
Thanks for the information. It turns out that both the code and the
documentation for Math::BigFloat suggest that the behaviour you want
corresponds to that of Math::BigFloat, that the return values of brsft&#40;&#41;
in list context is indeed the quotient and the remainder.

Firstly, it seems inconsistent to me that Math::BigInt and
Math::BigFloat behaves differently. I think either both of them or none
of them ought to return the quotient and remainder in list context.

Secondly, it seems that the behaviour of Math::BigFloat doesn&#39;t match
the documentation:

$ perl -I. -MMath::BigFloat -wle &#39;$x = Math::BigFloat -&gt; new&#40;2345&#41;; &#40;$q,
$r&#41; = $x -&gt; brsft&#40;2, 10&#41;; print for $x, $q, $r&#39;
23.45
23.45
45

While the input is shifted two places, the output in $q is clearly not
the quotient.

Now, if only Math-BigInt had an active maintainer ...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;12&nbsp;06:22:06&nbsp;2010</span>
    <span class="description">rafl [...] debian.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #62052] BigInt documentation is a tad misleading for brsft</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 12 Oct 2010 12:20:57 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Florian Ragwitz &lt;rafl [...] debian.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Peter John Acklam via RT&#34; &lt;bug-Math-BigInt@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Now, if only Math-BigInt had an active maintainer ...
</div>
FWIW, I&#39;m right here, listening to the discussion about this and the
various other tickets, and the last release of Math-BigInt happened 2
weeks ago.

While I don&#39;t have the resources to attend to each issue immediately, I
do try to work on the various Math-Big*/bignum RT queues, as you
might&#39;ve noticed from $many to 1 open issue within the last few weeks.

I&#39;m sorry if that isn&#39;t as active as you might wish, but I am trying my
best under the given constraints. Any help, especially those in the form
of patches, but also simply reporting issues, or following the RT queue
and discussing issues, is *hugely* appreciated.
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;12&nbsp;06:31:18&nbsp;2010</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Oct 12 06:22:06 2010, FLORA wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#34;Peter John Acklam via RT&#34; &lt;bug-Math-BigInt@rt.cpan.org&gt; writes:
&gt; 
<div class="message-stanza open">&gt; &gt; Now, if only Math-BigInt had an active maintainer ...
</div>&gt; 
&gt; FWIW, I&#39;m right here &#40;...&#41;
</div>
I&#39;m very sorry, I thought TELS was the only maintainer. I contacted him,
but I got a reply telling me he had no time to maintain this
distribution. I see now that there are several other maintainers. And I
fully understand that you can&#39;t reply immediately. Again, sorry about that.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;12&nbsp;06:40:33&nbsp;2010</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Oct 12 06:03:46 2010, pjacklam wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Secondly, it seems that the behaviour of Math::BigFloat doesn&#39;t match
&gt; the documentation:
&gt; 
&gt; $ perl -I. -MMath::BigFloat -wle &#39;$x = Math::BigFloat -&gt; new&#40;2345&#41;; &#40;$q,
&gt; $r&#41; = $x -&gt; brsft&#40;2, 10&#41;; print for $x, $q, $r&#39;
&gt; 23.45
&gt; 23.45
&gt; 45
&gt; 
&gt; While the input is shifted two places, the output in $q is clearly not
&gt; the quotient.
</div>
After re-thinking this, $q = 23.45 is of course the quotient, assuming
that you are dividing 2345 by 10**2. However, when one is talking about
quotient and remainder &#40;$q and $r, say&#41; after dividing a numerator by a
denominator &#40;$n and $d, say&#41;, it usually means that one gets a $q and $r
satisfying $n = $q * $d + $r. That is not the case with Math::BigFloat&#39;s
brsft&#40;&#41;. So, while the behaviour of Math::BigFloat might not be wrong, I
think it is a little - what shall I say? - unexpected.

I think the most useful and intuitive would be if

Math::BigFloat -&gt; new&#40;2345&#41; -&gt; brsft&#40;2, 10&#41;

returned 23.45 in scalar context, and &#40;23, 45&#41; in list context.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;12&nbsp;06:42:15&nbsp;2010</span>
    <span class="description">rafl [...] debian.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> undisclosed-recipients:;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #62052] BigInt documentation is a tad misleading for brsft</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 12 Oct 2010 12:41:08 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Florian Ragwitz &lt;rafl [...] debian.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Peter John Acklam via RT&#34; &lt;bug-Math-BigInt@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue Oct 12 06:22:06 2010, FLORA wrote:
<div class="message-stanza open">&gt;&gt; &#34;Peter John Acklam via RT&#34; &lt;bug-Math-BigInt@rt.cpan.org&gt; writes:
&gt;&gt;
<div class="message-stanza open">&gt;&gt; &gt; Now, if only Math-BigInt had an active maintainer ...
</div>&gt;&gt;
&gt;&gt; FWIW, I&#39;m right here &#40;...&#41;
</div>&gt;
&gt; I&#39;m very sorry, I thought TELS was the only maintainer. I contacted
&gt; him, but I got a reply telling me he had no time to maintain this
&gt; distribution. I see now that there are several other maintainers. And
&gt; I fully understand that you can&#39;t reply immediately. Again, sorry
&gt; about that.
</div>
Don&#39;t worry. I really appreciate your comments providing extra
information on the various Big* tickets. This sort of thing makes going
through all of a little bit this later *much* easier.
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;12&nbsp;13:22:00&nbsp;2010</span>
    <span class="description">jonathan [...] leto.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #62052] BigInt documentation is a tad misleading for brsft</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 12 Oct 2010 10:21:31 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jonathan Leto &lt;jonathan [...] leto.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Howdy,

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;&gt; On Tue Oct 12 06:22:06 2010, FLORA wrote:
<div class="message-stanza open">&gt;&gt;&gt; &#34;Peter John Acklam via RT&#34; &lt;bug-Math-BigInt@rt.cpan.org&gt; writes:
&gt;&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt; &gt; Now, if only Math-BigInt had an active maintainer ...
</div>&gt;&gt;&gt;
&gt;&gt;&gt; FWIW, I&#39;m right here &#40;...&#41;
</div></div>
I am here too, for some definition of &#34;active.&#34; I tried to take over
for TELS, but then realized I don&#39;t have as much time as I would like
to work on it. I commend Florian for actually making things happen
lately.

Duke

-- 
Jonathan &#34;Duke&#34; Leto
jonathan@leto.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://leto.net">http://leto.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;09&nbsp;14:02:39&nbsp;2012</span>
    <span class="description">BBYRD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> jonathan [...] leto.net, rafl [...] debian.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This appears to still be an issue.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;perl -I. -MMath::BigFloat -wle &#34;$x = Math::BigFloat -&gt; new&#40;2345&#41;; &#40;$q,
</div>$r&#41; = $x -&gt; brsft&#40;2, 10&#41;; print for $x, $q, $r&#34;
23.45
23.45
45
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;15&nbsp;14:28:16&nbsp;2014</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The subject is inaccurate. The documentation for brsft&#40;&#41; in both BigInt and BigFloat are fine. The bug is in bdiv&#40;&#41;:

The expression

&#40;$q, $r&#41; = Math::BigFloat -&gt; new&#40;$a&#41; -&gt; brsft&#40;$b, $c&#41;&#39;

is computed as

&#40;$q, $r&#41; = Math::BigFloat -&gt; new&#40;$a&#41; -&gt; bdiv&#40;$b -&gt; bpow&#40;$c&#41;&#41;&#39;

so the example above,

$ perl -Idist/Math-BigInt/lib/ -MMath::BigFloat -wle &#39;$x = Math::BigFloat -&gt; new&#40;2345&#41;; &#40;$q, $r&#41; = $x -&gt; brsft&#40;2, 10&#41;; print for $x, $q, $r&#39;
23.45
23.45
45

can be simplified into

$ perl -Idist/Math-BigInt/lib/ -MMath::BigFloat -wle &#39;&#40;$q, $r&#41; = Math::BigFloat -&gt; new&#40;2345&#41; -&gt; bdiv&#40;100&#41;; print for $q, $r&#39;
23.45
45

which illustrates the same problem. In list context, this should give 23 and 45. So the bug is actually in bdiv&#40;&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;15&nbsp;17:13:50&nbsp;2014</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Patch sent upstream:

<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/Ticket/Display.html?id=121668">https://rt.perl.org/Ticket/Display.html?id=121668</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;04&nbsp;14:30:01&nbsp;2016</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed in version 1.9994.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;04&nbsp;14:30:07&nbsp;2016</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;04&nbsp;14:30:09&nbsp;2016</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Fixed in 1.9994 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
