<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #38484 for CGI: Needs Test: CGI-3.40 url&#40;&#41; method still has incorrect behavior with URL-encoded characters</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #38484 for CGI: Needs Test: CGI-3.40 url&#40;&#41; method still has incorrect behavior with URL-encoded characters</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=CGI">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=CGI">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=CGI">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=CGI">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/leejo/CGI.pm/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/CGI">CGI CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">38484</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">2 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=CGI">CGI</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">MARKSTOS [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dmaszle [...] mendelbio.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-230860-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-230861-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=38484">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-497436" href="/Public/Bug/Display.html?id=38484#txn-497436">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;14&nbsp;11:55:50&nbsp;2008</span>
    <span class="description">dmaszle [...] mendelbio.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> CGI-3.40 url&#40;&#41; method still has incorrect behavior with URL-encoded characters</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 14 Aug 2008 08:55:20 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI.pm [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Don Maszle &lt;dmaszle [...] mendelbio.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/497436/246274/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/246274">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This has been reported in early 3.x versions &#40;ref: #18752&#41;, but has yet
to be addressed in the recent 3.40 release.

On our SunOS 5.9 sparc Sun-Fire-V890 using Perl 5.8.5.  It appears that
&#40;at least&#41; the -query switch of url&#40;&#41; is not handled properly if the URI
contains encoded characters.  The program at the end can be used to
demonstrate.

When called with
     <span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef">http://localhost/cgi-bin/url.cgi?q=abc%0Adef</a></span>

url&#40;&#41; incorrectly returns *all* URLs with the query string attached.

When called with
     <span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef">http://localhost/cgi-bin/url.cgi?q=abc%0Adef</a></span>

url&#40;&#41; correctly returns URLs with the query string attached
only when the attribute -query=&gt;1 is set.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">__________________________________________________________________________
#!/usr/bin/perl -w
use CGI;
my $Q = new CGI;

print $Q-&gt;header, $Q-&gt;start_html;
print &#34;&lt;h1&gt;CGI::url&#40;&#41; Test&lt;/h1&gt;\n&#34;;
print &#34;&lt;br&gt;Apache :&lt;b&gt;&#39;&#34;.$ENV{REQUEST_URI}.&#34;&#39;&lt;/b&gt;\n&#34;;
print &#34;&lt;br&gt;No Args:&#39;&#34;.$Q-&gt;url.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;rel1, query0: &#34;.$Q-&gt;url&#40;-relative=&gt;1,-query=&gt;0&#41;.&#34;\n&#34;;
print &#34;&lt;form action=\x22&#34;.$Q-&gt;url&#40;-relative=&gt;1,-query=&gt;0&#41;.&#34;\x22&gt;&lt;input type=submit&gt;&lt;/form&gt;&#34;;

print &#34;&lt;h2&gt;Using -key Arguments&lt;/h2&gt;\n&#34;;
print &#34;Abs : 0:&#39;&#34;.$Q-&gt;url&#40;-absolute=&gt;0&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;Abs : 1:&#39;&#34;.$Q-&gt;url&#40;-absolute=&gt;1&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;&#34;;
print &#34;&lt;br&gt;Query: 0, Abs : 0:&#39;&#34;.$Q-&gt;url&#40;-absolute=&gt;0,-query=&gt;0&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;Query: 0, Abs : 1:&#39;&#34;.$Q-&gt;url&#40;-absolute=&gt;1,-query=&gt;0&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;&#34;;
print &#34;&lt;br&gt;Query: 1, Abs : 0:&#39;&#34;.$Q-&gt;url&#40;-absolute=&gt;0,-query=&gt;1&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;Query: 1, Abs : 1:&#39;&#34;.$Q-&gt;url&#40;-absolute=&gt;1,-query=&gt;1&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;&#34;;

print &#34;&lt;br&gt;Rel : 0:&#39;&#34;.$Q-&gt;url&#40;-relative=&gt;0&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;Rel : 1:&#39;&#34;.$Q-&gt;url&#40;-relative=&gt;1&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;&#34;;
print &#34;&lt;br&gt;Query: 0, Rel : 0:&#39;&#34;.$Q-&gt;url&#40;-relative=&gt;0,-query=&gt;0&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;Query: 0, Rel : 1:&#39;&#34;.$Q-&gt;url&#40;-relative=&gt;1,-query=&gt;0&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;&#34;;
print &#34;&lt;br&gt;Query: 1, Rel : 0:&#39;&#34;.$Q-&gt;url&#40;-relative=&gt;0,-query=&gt;1&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;Query: 1, Rel : 1:&#39;&#34;.$Q-&gt;url&#40;-relative=&gt;1,-query=&gt;1&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;&#34;;

print &#34;&lt;br&gt;Full: 0:&#39;&#34;.$Q-&gt;url&#40;-full=&gt;0&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;Full: 1:&#39;&#34;.$Q-&gt;url&#40;-full=&gt;1&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;&#34;;
print &#34;&lt;br&gt;Path: 0:&#39;&#34;.$Q-&gt;url&#40;-path_info=&gt;0&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;Path: 1:&#39;&#34;.$Q-&gt;url&#40;-path_info=&gt;1&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;&#34;;
print &#34;&lt;br&gt;Qury: 0:&#39;&#34;.$Q-&gt;url&#40;-query=&gt;0&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;Qury: 1:&#39;&#34;.$Q-&gt;url&#40;-query=&gt;1&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;&#34;;
print &#34;&lt;br&gt;Base: 0:&#39;&#34;.$Q-&gt;url&#40;-base=&gt;0&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;Base: 1:&#39;&#34;.$Q-&gt;url&#40;-base=&gt;1&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;&#34;;
print &#34;&lt;br&gt;Rewr: 0:&#39;&#34;.$Q-&gt;url&#40;-rewrite=&gt;0&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;Rewr: 1:&#39;&#34;.$Q-&gt;url&#40;-rewrite=&gt;1&#41;.&#34;&#39;\n&#34;;
print &#34;&lt;br&gt;&#34;;

print $Q-&gt;end_html;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-497463" href="/Public/Bug/Display.html?id=38484#txn-497463">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;14&nbsp;12:43:52&nbsp;2008</span>
    <span class="description">LDS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">2 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/497463/246293/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/246293">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 384b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ran your script on version 3.40 and was unable to confirm the behavior
when the query string contains URL escapes.

Perhaps I misunderstand the test condition, since the two URLs that you
report have identical &#40;as far as I can see&#41; query strings.

Please feel free to reopen the bug report if I have misunderstood and if
you can provide a script that generates the incorrect behavior.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-497464" href="/Public/Bug/Display.html?id=38484#txn-497464">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;14&nbsp;12:43:53&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-497466" href="/Public/Bug/Display.html?id=38484#txn-497466">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;14&nbsp;12:43:54&nbsp;2008</span>
    <span class="description">LDS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-497468" href="/Public/Bug/Display.html?id=38484#txn-497468">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;14&nbsp;12:43:55&nbsp;2008</span>
    <span class="description">LDS [...] cpan.org -  Given to LDS</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-497490" href="/Public/Bug/Display.html?id=38484#txn-497490">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;14&nbsp;13:05:03&nbsp;2008</span>
    <span class="description">dmaszle [...] mendelbio.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #38484] Resolved: CGI-3.40 url&#40;&#41; method still has incorrect behavior with URL-encoded characters</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 14 Aug 2008 10:04:49 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI.pm [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Don Maszle &lt;dmaszle [...] mendelbio.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/497490/246310/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/246310">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Lincoln, thank you for the fast response.  I read your note
on the report page, and embarrassingly noticed that I had copied
and pasted the second url without modification.  Removing
the &#39;%&#39; gives me different behavior on our systems.  Here are the
two responses as reported identically by both our SunFire running
Perl 5.8.5 with CGI-3.40, Apache 1.3 and Solaris9 and an i686 box
running Perl 5.8.8, CGI-3.35, Apache2, and Ubuntu 7.04 &#40;GNU/Linux 2.6.2&#41;.

Also, I should amend my assertion that the query appears in all
cases.  I does not appear when either -base=&gt;1 or -rewrite=&gt;0,
however the query appears doubled up when query=&gt;1.
Thank you for reopening this.

Don Maszle

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

CGI::url&#40;&#41; Test

Apache :&#39;/cgi-bin/url.cgi?q=abc%0Adef&#39;
No Args:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;</a></span>
rel1, query0: url.cgi?q=abc%0Adef
Using -key Arguments
Abs : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;</a></span>
Abs : 1:&#39;/cgi-bin/url.cgi?q=abc%0Adef&#39;

Query: 0, Abs : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;</a></span>
Query: 0, Abs : 1:&#39;/cgi-bin/url.cgi?q=abc%0Adef&#39;

Query: 1, Abs : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef?q=abc%0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef?q=abc%0Adef&#39;</a></span>
Query: 1, Abs : 1:&#39;/cgi-bin/url.cgi?q=abc%0Adef?q=abc%0Adef&#39;

Rel : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;</a></span>
Rel : 1:&#39;url.cgi?q=abc%0Adef&#39;

Query: 0, Rel : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;</a></span>
Query: 0, Rel : 1:&#39;url.cgi?q=abc%0Adef&#39;

Query: 1, Rel : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef?q=abc%0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef?q=abc%0Adef&#39;</a></span>
Query: 1, Rel : 1:&#39;url.cgi?q=abc%0Adef?q=abc%0Adef&#39;

Full: 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;</a></span>
Full: 1:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;</a></span>

Path: 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;</a></span>
Path: 1:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;</a></span>

Qury: 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;</a></span>
Qury: 1:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef?q=abc%0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef?q=abc%0Adef&#39;</a></span>

Base: 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;</a></span>
Base: 1:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost">http://localhost</a></span>&#39;

Rewr: 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;">http://localhost/cgi-bin/url.cgi&#39;</a></span>
Rewr: 1:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;</a></span>

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
CGI::url&#40;&#41; Test

Apache :&#39;/cgi-bin/url.cgi?q=abc0Adef&#39;
No Args:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;">http://localhost/cgi-bin/url.cgi&#39;</a></span>
rel1, query0: url.cgi
Using -key Arguments
Abs : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;">http://localhost/cgi-bin/url.cgi&#39;</a></span>
Abs : 1:&#39;/cgi-bin/url.cgi&#39;

Query: 0, Abs : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;">http://localhost/cgi-bin/url.cgi&#39;</a></span>
Query: 0, Abs : 1:&#39;/cgi-bin/url.cgi&#39;

Query: 1, Abs : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc0Adef&#39;</a></span>
Query: 1, Abs : 1:&#39;/cgi-bin/url.cgi?q=abc0Adef&#39;

Rel : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;">http://localhost/cgi-bin/url.cgi&#39;</a></span>
Rel : 1:&#39;url.cgi&#39;

Query: 0, Rel : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;">http://localhost/cgi-bin/url.cgi&#39;</a></span>
Query: 0, Rel : 1:&#39;url.cgi&#39;

Query: 1, Rel : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc0Adef&#39;</a></span>
Query: 1, Rel : 1:&#39;url.cgi?q=abc0Adef&#39;

Full: 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;">http://localhost/cgi-bin/url.cgi&#39;</a></span>
Full: 1:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;">http://localhost/cgi-bin/url.cgi&#39;</a></span>

Path: 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;">http://localhost/cgi-bin/url.cgi&#39;</a></span>
Path: 1:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;">http://localhost/cgi-bin/url.cgi&#39;</a></span>

Qury: 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;">http://localhost/cgi-bin/url.cgi&#39;</a></span>
Qury: 1:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc0Adef&#39;</a></span>

Base: 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;">http://localhost/cgi-bin/url.cgi&#39;</a></span>
Base: 1:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost">http://localhost</a></span>&#39;

Rewr: 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;">http://localhost/cgi-bin/url.cgi&#39;</a></span>
Rewr: 1:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;">http://localhost/cgi-bin/url.cgi&#39;</a></span>
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


Lincoln_D_Stein via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=38484">http://rt.cpan.org/Ticket/Display.html?id=38484</a></span> &gt;
&gt; 
&gt; According to our records, your request has been resolved. If you have any
&gt; further questions or concerns, please respond to this message.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-497491" href="/Public/Bug/Display.html?id=38484#txn-497491">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;14&nbsp;13:05:05&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-641776" href="/Public/Bug/Display.html?id=38484#txn-641776">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;29&nbsp;22:58:58&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Reference to ticket #18752 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Steal odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-641781" href="/Public/Bug/Display.html?id=38484#txn-641781">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;29&nbsp;23:13:08&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Stolen from LDS</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-641782" href="/Public/Bug/Display.html?id=38484#txn-641782">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;29&nbsp;23:13:27&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Subject changed from &#39;CGI-3.40 url&#40;&#41; method still has incorrect behavior with URL-encoded characters&#39; to &#39;Needs Test: CGI-3.40 url&#40;&#41; method still has incorrect behavior with URL-encoded characters&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-641783" href="/Public/Bug/Display.html?id=38484#txn-641783">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;29&nbsp;23:15:55&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/641783/328034/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/328034">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 892b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Don,

Thanks for the report and the test script. However, from running the
test script, it&#39;s difficult to know which outputs you consider correct
and which ones you consider to be wrong. I&#39;ve rewritten two details from
the test in the Test::More style. This makes it clear which results are
intended to be the correct ones. 

These two tests pass with 3.43. Are there other tests you can write that
fail your expectationis when run against 3.43?

####

#!/usr/bin/perl -w
use Test::More &#39;no_plan&#39;;

$ENV{REQUEST_URI} = &#39;/cgi-bin/url.cgi?q=abc%0Adef&#39;;

use CGI;
my $Q = CGI-&gt;new&#40;&#39;q=abc%0Adef&#39;&#41;;

is&#40;$Q-&gt;url&#40;-absolute=&gt;0,-query=&gt;0&#41;,
   ,&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;">http://localhost/cgi-bin/url.cgi&#39;</a></span>
   ,&#39;abs=&gt;0, query=&gt;0 == <span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;&#41;">http://localhost/cgi-bin/url.cgi&#39;&#41;</a></span>;
is&#40;$Q-&gt;url&#40;-absolute=&gt;0,-query=&gt;1&#41;,
    ,&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;</a></span>
   , &#39;abs=&gt;1, query=&gt;1 == <span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;&#41;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;&#41;</a></span>;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-641989" href="/Public/Bug/Display.html?id=38484#txn-641989">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;30&nbsp;12:28:48&nbsp;2009</span>
    <span class="description">dmaszle [...] mendelbio.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #38484] Needs Test: CGI-3.40 url&#40;&#41; method still has incorrect behavior with URL-encoded characters</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 30 Jul 2009 09:28:28 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI pm &lt;bug-CGI.pm [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Don _Franklin_ Maszle &lt;dmaszle [...] mendelbio.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/641989/328170/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/328170">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks Mark.  I&#39;ve installed 3.43 and it appears to be correct.
The output from my definitively non-unit-like test is given below.

All appears to be OK, specifically, the encoded characters are 
represented correctly and the doubled parameter - value pairs are
no longer there.  It&#39;s a bit difficult for me to define the correct
behavior in all circumstances since some semantics don&#39;t entirely
make sense to me.  &#40;For example, I&#39;m not sure why an &#39;absolute&#39; url
is not fully qualified, whereas a non-absolute one is.&#41;

The cases below simply helped me to delineate which instances were
problematic so I could report on and work around them.

all the best,

don


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
CGI::url&#40;&#41; Test 3.43

Apache :&#39;/cgi-bin/test/url.cgi?q=abc%0Adef&#39;
No Args:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;">http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;</a></span>
rel1, query0: url.cgi
Using -key Arguments
Abs : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;">http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;</a></span>
Abs : 1:&#39;/cgi-bin/test/url.cgi&#39;

Query: 0, Abs : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;">http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;</a></span>
Query: 0, Abs : 1:&#39;/cgi-bin/test/url.cgi&#39;

Query: 1, Abs : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://haldane.mendelbio.com/cgi-bin/test/url.cgi?q=abc%0Adef&#39;">http://haldane.mendelbio.com/cgi-bin/test/url.cgi?q=abc%0Adef&#39;</a></span>
Query: 1, Abs : 1:&#39;/cgi-bin/test/url.cgi?q=abc%0Adef&#39;

Rel : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;">http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;</a></span>
Rel : 1:&#39;url.cgi&#39;

Query: 0, Rel : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;">http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;</a></span>
Query: 0, Rel : 1:&#39;url.cgi&#39;

Query: 1, Rel : 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://haldane.mendelbio.com/cgi-bin/test/url.cgi?q=abc%0Adef&#39;">http://haldane.mendelbio.com/cgi-bin/test/url.cgi?q=abc%0Adef&#39;</a></span>
Query: 1, Rel : 1:&#39;url.cgi?q=abc%0Adef&#39;

Full: 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;">http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;</a></span>
Full: 1:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;">http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;</a></span>

Path: 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;">http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;</a></span>
Path: 1:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;">http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;</a></span>

Qury: 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;">http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;</a></span>
Qury: 1:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://haldane.mendelbio.com/cgi-bin/test/url.cgi?q=abc%0Adef&#39;">http://haldane.mendelbio.com/cgi-bin/test/url.cgi?q=abc%0Adef&#39;</a></span>

Base: 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;">http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;</a></span>
Base: 1:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://haldane.mendelbio.com">http://haldane.mendelbio.com</a></span>&#39;

Rewr: 0:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;">http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;</a></span>
Rewr: 1:&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;">http://haldane.mendelbio.com/cgi-bin/test/url.cgi&#39;</a></span> 


----- &#34;MARKSTOS via RT&#34; &lt;bug-CGI.pm@rt.cpan.org&gt; wrote:

| &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=38484">https://rt.cpan.org/Ticket/Display.html?id=38484</a></span> &gt;
| 
| Don,
| 
| Thanks for the report and the test script. However, from running the
| test script, it&#39;s difficult to know which outputs you consider
| correct
| and which ones you consider to be wrong. I&#39;ve rewritten two details
| from
| the test in the Test::More style. This makes it clear which results
| are
| intended to be the correct ones. 
| 
| These two tests pass with 3.43. Are there other tests you can write
| that
| fail your expectationis when run against 3.43?
| 
| ####
| 
| #!/usr/bin/perl -w
| use Test::More &#39;no_plan&#39;;
| 
| $ENV{REQUEST_URI} = &#39;/cgi-bin/url.cgi?q=abc%0Adef&#39;;
| 
| use CGI;
| my $Q = CGI-&gt;new&#40;&#39;q=abc%0Adef&#39;&#41;;
| 
| is&#40;$Q-&gt;url&#40;-absolute=&gt;0,-query=&gt;0&#41;,
|    ,&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;">http://localhost/cgi-bin/url.cgi&#39;</a></span>
|    ,&#39;abs=&gt;0, query=&gt;0 == <span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi&#39;&#41;">http://localhost/cgi-bin/url.cgi&#39;&#41;</a></span>;
| is&#40;$Q-&gt;url&#40;-absolute=&gt;0,-query=&gt;1&#41;,
|     ,&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;</a></span>
|    , &#39;abs=&gt;1, query=&gt;1 ==
| <span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;&#41;">http://localhost/cgi-bin/url.cgi?q=abc%0Adef&#39;&#41;</a></span>;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-642081" href="/Public/Bug/Display.html?id=38484#txn-642081">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;30&nbsp;15:17:08&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1367203" href="/Public/Bug/Display.html?id=38484#txn-1367203">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;May&nbsp;23&nbsp;14:29:26&nbsp;2014</span>
    <span class="description">The RT System itself -  Queue changed from CGI.pm to CGI</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.520008</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
