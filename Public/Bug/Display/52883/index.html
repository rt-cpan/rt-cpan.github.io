<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #52883 for DBD-DB2: DB2 using $dbh-&gt;disconect&#40;&#41; then core dump </title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #52883 for DBD-DB2: DB2 using $dbh-&gt;disconect&#40;&#41; then core dump </h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-DB2/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-DB2/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-DB2/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-DB2/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-DB2">DBD-DB2 CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">52883</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-DB2/Active/">DBD-DB2</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">opendev [...] us.ibm.com
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
fgkenshin [...] 163.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-10084-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.76    </td>
  </tr>
  <tr id="CF-10085-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;17&nbsp;22:32:46&nbsp;2009</span>
    <span class="description">fgkenshin [...] 163.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> DB2 using $dbh-&gt;disconect&#40;&#41; then core dump</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">64bit  SunOS SE-M4K 5.10 Generic_137137-09 sun4u sparc SUNW,SPARC-Enterprise
DB2 database：v9.7
DBD::DB2: DBD-DB2-1.76 （cpan）
DBI: 1.45    $DBI::VERSION = &#34;1.45&#34;; # ==&gt; ALSO update the version in
the pod text below!


bash-3.00# perl Makefile.PL

Configuring DBD::DB2...
Remember to actually read the README and CAVEATS files!

Using DB2 in &#34;/opt/IBM/db2/V9.7/&#34;
System: perl5.008 DBI1.45 sunos se-m4k 5.10 generic_137137-09 sun4u
sparc sunw,sparc-enterprise  sun4-solaris dl_dlopen.xs
Compiler: gcc -O -fno-strict-aliasing -D_LARGEFILE_SOURCE
-D_FILE_OFFSET_BITS=64
Includes: -I&#34;/opt/IBM/db2/V9.7//include&#34;
-I&#34;/usr/local/lib/perl5/site_perl/5.8.0/sun4-solaris/auto/DBI&#34;
-I&#34;/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/DBI&#34;-I&#34;/usr/local/lib/perl5/site_perl/5.8.0/sun4-solaris/auto/DBI&#34;
Libraries: -L/opt/IBM/db2/V9.7//lib64 -ldb2

Checking if your kit is complete...
Looks good
Checking if your kit is complete...
Looks good
Writing Makefile for DBD::DB2::Constants
Writing Makefile for DBD::DB2
bash-3.00# make
cp DB2.pm blib/lib/DBD/DB2.pm
cp lib/Bundle/DBD/DB2.pm blib/lib/Bundle/DBD/DB2.pm
cp DB2.pod blib/lib/DBD/DB2.pod
cp Constants.pm ../blib/lib/DBD/DB2/Constants.pm
AutoSplitting ../blib/lib/DBD/DB2/Constants.pm
&#40;../blib/lib/auto/DBD/DB2/Constants&#41;
/usr/local/bin/perl /usr/local/lib/perl5/5.8.0/ExtUtils/xsubpp  -typemap
/usr/local/lib/perl5/5.8.0/ExtUtils/typemap  Constants.xs &gt;
Constants.xsc &#38;&#38; mv Constants.xsc Constants.c
gcc -c  -I&#34;/opt/IBM/db2/V9.7//include&#34;  -fno-strict-aliasing
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O    -DVERSION=\&#34;1.74\&#34; 
-DXS_VERSION=\&#34;1.74\&#34; -fPIC
&#34;-I/usr/local/lib/perl5/5.8.0/sun4-solaris/CORE&#34;  Constants.c
Running Mkbootstrap for DBD::DB2::Constants &#40;&#41;
chmod 644 Constants.bs
rm -f ../blib/arch/auto/DBD/DB2/Constants/Constants.so
LD_RUN_PATH=&#34;&#34; gcc  -G -L/usr/local/lib Constants.o  -o
../blib/arch/auto/DBD/DB2/Constants/Constants.so   
chmod 755 ../blib/arch/auto/DBD/DB2/Constants/Constants.so
cp Constants.bs ../blib/arch/auto/DBD/DB2/Constants/Constants.bs
chmod 644 ../blib/arch/auto/DBD/DB2/Constants/Constants.bs
/usr/local/bin/perl /usr/local/lib/perl5/5.8.0/ExtUtils/xsubpp  -typemap
/usr/local/lib/perl5/5.8.0/ExtUtils/typemap  DB2.xs &gt; DB2.xsc &#38;&#38; mv
DB2.xsc DB2.c
gcc -c  -I&#34;/opt/IBM/db2/V9.7//include&#34;
-I&#34;/usr/local/lib/perl5/site_perl/5.8.0/sun4-solaris/auto/DBI&#34;
-I&#34;/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/DBI&#34;-I&#34;/usr/local/lib/perl5/site_perl/5.8.0/sun4-solaris/auto/DBI&#34;
 -fno-strict-aliasing -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O   
-DVERSION=\&#34;1.74\&#34;  -DXS_VERSION=\&#34;1.74\&#34; -fPIC
&#34;-I/usr/local/lib/perl5/5.8.0/sun4-solaris/CORE&#34;  DB2.c
gcc -c  -I&#34;/opt/IBM/db2/V9.7//include&#34;
-I&#34;/usr/local/lib/perl5/site_perl/5.8.0/sun4-solaris/auto/DBI&#34;
-I&#34;/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/DBI&#34;-I&#34;/usr/local/lib/perl5/site_perl/5.8.0/sun4-solaris/auto/DBI&#34;
 -fno-strict-aliasing -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O   
-DVERSION=\&#34;1.74\&#34;  -DXS_VERSION=\&#34;1.74\&#34; -fPIC
&#34;-I/usr/local/lib/perl5/5.8.0/sun4-solaris/CORE&#34;  dbdimp.c
dbdimp.c: In function `diagnoseError&#39;:
dbdimp.c:51: warning: unreachable code at beginning of switch statement
Running Mkbootstrap for DBD::DB2 &#40;&#41;
chmod 644 DB2.bs
rm -f blib/arch/auto/DBD/DB2/DB2.so
LD_RUN_PATH=&#34;/opt/IBM/db2/V9.7//lib64&#34; gcc  -G -L/usr/local/lib DB2.o 
dbdimp.o  -o blib/arch/auto/DBD/DB2/DB2.so  -L/opt/IBM/db2/V9.7//lib64
-ldb2 
ld: 致命的: 文件 /opt/IBM/db2/V9.7//lib64/libdb2.so：错误的 ELF 类
型：ELFCLASS64
ld: 致命的: 文件处理错误。无输出写到blib/arch/auto/DBD/DB2/DB2.so
collect2: ld returned 1 exit status
*** Error code 1
make: Fatal error: Command failed for target `blib/arch/auto/DBD/DB2/DB2.so&#39;

when i rewrite Makefile.PL using /opt/IBM/db2/V9.7/lib32/ to link,it&#39;s ok

when using this test.pl,it will core dump
#!/usr/local/bin/perl -w
use DBI;
use strict;
# Open a connection
my $dbh = DBI-&gt;connect&#40;&#34;dbi:DB2:dbnms&#34;, &#34;db2admin&#34;,&#34;db2admin&#34;,
{RaiseError =&gt; 1}&#41;;
# use VALUES to retrieve value from special register
my $stmt = &#34;Values CURRENT DATE&#34;;
my $sth = $dbh-&gt;prepare&#40;$stmt&#41;;
$sth-&gt;execute&#40;&#41;;
# associate variables with output columns...
my $col1;
$sth-&gt;bind_col&#40;1,\$col1&#41;;
while &#40;$sth-&gt;fetch&#41; { print &#34;Today is: $col1\n&#34;; }
$sth-&gt;finish&#40;&#41;;
$dbh-&gt;disconnect&#40;&#41;;

bash-3.00# ./test.pl
Today is: 2009-12-16
段错误 &#40;core dumped&#41;

this core dump may cause at disconnect

bash-3.00# pstack core
core &#39;core&#39; of 28002:  /usr/local/bin/perl -w ./testdb2.pl
ff032090 strlen  &#40;2851bc, 1f8360, fef6f690, 1150f8, 0, ffbff388&#41; + 50
fef67ec4 setErrorFromDiagRecInfo &#40;2851bc, 1, 1, fef6f690, 0, 20002&#41; + 134
fef67d44 diagnoseError &#40;ffff0000, 1, 1, ffffffff, fef6fce8, 1&#41; + a8
fef69348 db2_db_disconnect &#40;0, 1f8360, 0, 0, 252e08, 0&#41; + 1c0
fef64084 XS_DBD__DB2__db_disconnect &#40;2822f0, 2393f0, 0, 252e08, 112270,
fef63e28&#41; + 25c
fefdd598 XS_DBI_dispatch &#40;2393f0, 2851bc, 1203b8, 0, 0, 1f8360&#41; + 1790
0008090c Perl_pp_entersub &#40;111c00, 252e14, 0, 1, 252e0c, 252e18&#41; + 560
00078e60 Perl_runops_standard &#40;111c00, 0, ffc00000, 800000, 114400,
1f6c10&#41; + 30
00027428 S_run_body &#40;1, 0, 0, fffffff8, ff352a00, 114af0&#41; + 134
00027074 perl_run &#40;114c80, 114800, 3, ffbff9b4, ffffffff, 2&#41; + 8c
000240b0 main    &#40;3, ffbff9b4, ffbff9c4, 114a40, ff350100, 0&#41; + 90
00023eb8 _start  &#40;0, 0, 0, 0, 0, 0&#41; + 5c
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;17&nbsp;22:35:05&nbsp;2009</span>
    <span class="description">fgkenshin [...] 163.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">PS：perl version
-bash-3.00$ perl -v

This is perl, v5.8.0 built for sun4-solaris
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;17&nbsp;22:35:06&nbsp;2009</span>
    <span class="description">fgkenshin [...] 163.com -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;17&nbsp;22:36:27&nbsp;2009</span>
    <span class="description">fgkenshin [...] 163.com -  Status changed from &#39;open&#39; to &#39;new&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Take odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;17&nbsp;23:26:24&nbsp;2009</span>
    <span class="description">opendev [...] us.ibm.com -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;17&nbsp;23:45:50&nbsp;2009</span>
    <span class="description">opendev [...] us.ibm.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Kenshin,

The core dump seems to happen in the string fuction strlen, which might
be called by DBI &#40;not called anywhere in the setDiagnoseError method in
DBD-DB2&#41;. Could you upgrade your DBI version and check if the same is
reproducible.

If the problem is still seen I would need a CLI trace for more analysis
on this. Follow the steps in the link below to obtain a CLI trace.
<span class="clickylink"><a target="new" rel="nofollow" href="http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.trb.doc/doc/t0054958.html">http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.trb.doc/doc/t0054958.html</a></span>

-- 
Thanks
Praveen
IBM OpenSource Application Development Team
India Software Labs, Bangalore &#40;India&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;17&nbsp;23:45:52&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;18&nbsp;01:37:44&nbsp;2009</span>
    <span class="description">fgkenshin [...] 163.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">在 2009-12-17 23:45:50 星期四 时，IBMTORDB2 写到：
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Kenshin,
&gt; 
&gt; The core dump seems to happen in the string fuction strlen, which
&gt; might
&gt; be called by DBI &#40;not called anywhere in the setDiagnoseError method
&gt; in
&gt; DBD-DB2&#41;. Could you upgrade your DBI version and check if the same is
&gt; reproducible.
&gt; 
&gt; If the problem is still seen I would need a CLI trace for more
&gt; analysis
&gt; on this. Follow the steps in the link below to obtain a CLI trace.
&gt;
</div><span class="clickylink"><a target="new" rel="nofollow" href="http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.trb.doc/doc/t0054958.html">http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.trb.doc/doc/t0054958.html</a></span>

i upgrade DBI to 1.601,because my perl vesion is 5.8.0,an rebuild
DBD::DB2-1.76, core dump still exists。 the attach file is follow the
<span class="clickylink"><a target="new" rel="nofollow" href="http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.trb.doc/doc/t0054958.html,then">http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.trb.doc/doc/t0054958.html,then</a></span>
Generated after running test.pl
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;21&nbsp;07:58:31&nbsp;2009</span>
    <span class="description">opendev [...] us.ibm.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Kenshin,

From CLI trace it is clear that the Disconnect is taken place
successfully. From the core dump that you have pasted the call to strlen
is seen after call to setErrorFromDiagRecInfo of dbdimp.c, will need to
check how the control reached here. 

Have you set the DBI trace level, if yes to what value? 

Also would require some inputs from your side to look more into this
problem as it would take time for me to get hold of a Solaris box. 

The function setErrorFromDiagRecInfo is called only in 3 cases namely
when the return code form database is either SQL_SUCCESS_WITH_INFO,
SQL_NO_DATA_FOUND or SQL_ERROR. But from the CLI trace it is seen that
none of this return code is received after disconnect. Could you put in
a printf statement in function static SQLRETURN diagnoseError&#40;....&#41; to
check what is the rc &#40; parameter to the said function &#41; value received
before the core dump.

-- 
Thanks
Praveen
IBM OpenSource Application Development Team
India Software Labs, Bangalore &#40;India&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;27&nbsp;23:25:18&nbsp;2010</span>
    <span class="description">opendev [...] us.ibm.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi

The issue is been fixed and is available in the new release 1.78
<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/CPAN/authors/id/I/IB/IBMTORDB2/DBD-DB2-1.78.tar.gz">http://search.cpan.org/CPAN/authors/id/I/IB/IBMTORDB2/DBD-DB2-1.78.tar.gz</a></span>

-- 
Thanks
Praveen
IBM OpenSource Application Development Team
India Software Labs, Bangalore &#40;India&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;27&nbsp;23:25:21&nbsp;2010</span>
    <span class="description">opendev [...] us.ibm.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
