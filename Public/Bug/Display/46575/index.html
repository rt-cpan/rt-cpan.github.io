<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #46575 for Math-Polynomial: pretty-printing polynomials</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #46575 for Math-Polynomial: pretty-printing polynomials</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Math-Polynomial">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Math-Polynomial">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Math-Polynomial">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Math-Polynomial">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Math-Polynomial">Math-Polynomial CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">46575</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Math-Polynomial">Math-Polynomial</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">hasch-cpan [...] cozap.com
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
user42 [...] zip.com.au

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
randomcoder1 [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-20850-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-20851-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.003    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Polynomial.pm.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/659538/338242/Polynomial.pm.patch">
Fri Sep 04 17:17:22 2009 (1.5k) by randomcoder1 [...] gmail.com
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/651638/333970/Polynomial.pm.patch">
Fri Aug 21 23:29:33 2009 (852b) by randomcoder1 [...] gmail.com
</a>
</font></li>
</ul>


test_pol.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/659541/338249/test_pol.pl">
Fri Sep 04 17:19:41 2009 (417b) by randomcoder1 [...] gmail.com
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/651638/333973/test_pol.pl">
Fri Aug 21 23:29:33 2009 (356b) by randomcoder1 [...] gmail.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=46575">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-612867" href="/Public/Bug/Display.html?id=46575#txn-612867">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;01&nbsp;08:15:15&nbsp;2009</span>
    <span class="description">hasch-cpan [...] cozap.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> pretty-printing polynomials</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/612867/311019/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/311019">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 667b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This idea came up during discussion of a bug [rt.cpan.org #44829] and
has now a ticket of its own.

Kevin Ryde has asked for more options wrt stringification, in particular
output formatted like perl code used in evaluating polynomials.  This
could go into a module Math::Polynomial::PrettyPrint or some namespace
indicating that polynomial expressions are being optimized using
Horner&#39;s method.

This feature is purely a matter of formatting data already available
through Math::Polynomial.  A possible implementation has been hidden in
the examples collection distributed with the module, but a more
accessible application interface remains to be designed.

-Martin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-612870" href="/Public/Bug/Display.html?id=46575#txn-612870">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;01&nbsp;08:15:47&nbsp;2009</span>
    <span class="description">hasch-cpan [...] cozap.com -  Reference to ticket #44829 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-613843" href="/Public/Bug/Display.html?id=46575#txn-613843">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;02&nbsp;21:49:28&nbsp;2009</span>
    <span class="description">user42 [...] zip.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46575] AutoReply: pretty-printing polynomials</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 03 Jun 2009 11:48:59 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-Polynomial [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/613843/311612/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/311612">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 271b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Don&#39;t forget to avoid &#34;$str .=&#34;, since it makes stringizing an O&#40;N^2&#41;
operation, where of course it should be linear.  For me it only seems to
hurt at about 100,000 coeffs, which is pretty humongous, but good
algorithms well implemented has to be the aim of any library.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-613933" href="/Public/Bug/Display.html?id=46575#txn-613933">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;03&nbsp;05:34:11&nbsp;2009</span>
    <span class="description">hasch-cpan [...] cozap.com -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-648860" href="/Public/Bug/Display.html?id=46575#txn-648860">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;17&nbsp;01:45:51&nbsp;2009</span>
    <span class="description">randomcoder1 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/648860/332165/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/332165">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 89b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">What kind of pretty printing did you have in mind ?
First idea I can think of is LaTeX ..
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-648861" href="/Public/Bug/Display.html?id=46575#txn-648861">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;17&nbsp;01:45:51&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-650079" href="/Public/Bug/Display.html?id=46575#txn-650079">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;19&nbsp;09:41:50&nbsp;2009</span>
    <span class="description">hasch-cpan [...] cozap.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/650079/332974/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/332974">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 856b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Aug 17 01:45:51 2009, WSDOOKADR wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; What kind of pretty printing did you have in mind ?
&gt; First idea I can think of is LaTeX ..
</div>
There are plenty of possibilities, all involving
some kind of text processing based on information coming
from a polynomial object.  I think, however, that most
of this processing could be done in a way that is useful
for more kinds of arithmetic expressions than just
polynomials.

Examples:  Simplifying, rounding, formatting as code for
a given language &#40;such as your typesetting system&#41;.

For that reason I am inclined to drop this wishlist item
from the Math::Polynomial roadmap in favor of a more
general solution in a more general namespace.

If you know of other modules Math::Polynomial should
interface with in order to extend its formatting
capabilities &#40;or whatever&#41;, I am open for suggestions.

-Martin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-650166" href="/Public/Bug/Display.html?id=46575#txn-650166">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;19&nbsp;12:28:20&nbsp;2009</span>
    <span class="description">randomcoder1 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/650166/333022/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/333022">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Aug 19 09:41:50 2009, MHASCH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Aug 17 01:45:51 2009, WSDOOKADR wrote:
<div class="message-stanza open">&gt; &gt; What kind of pretty printing did you have in mind ?
&gt; &gt; First idea I can think of is LaTeX ..
</div>&gt; 
&gt; There are plenty of possibilities, all involving
&gt; some kind of text processing based on information coming
&gt; from a polynomial object.  I think, however, that most
&gt; of this processing could be done in a way that is useful
&gt; for more kinds of arithmetic expressions than just
&gt; polynomials.
&gt; 
&gt; Examples:  Simplifying, rounding, formatting as code for
&gt; a given language &#40;such as your typesetting system&#41;.
</div>
Can you be more explicit about &#39;simplifying&#39; and &#39;rounding&#39; ?
I&#39;m not sure what you mean.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; For that reason I am inclined to drop this wishlist item
&gt; from the Math::Polynomial roadmap in favor of a more
&gt; general solution in a more general namespace.
&gt; 
&gt; If you know of other modules Math::Polynomial should
&gt; interface with in order to extend its formatting
&gt; capabilities &#40;or whatever&#41;, I am open for suggestions.
&gt; 
&gt; -Martin
</div>
For example a more general way of doing these things would be:
First we use&#40;or we extend so that we can use&#41; Math::Symbolic on a
polynomial to create a parse tree from it &#40; parse_from_string method 
from Math::Symbolic &#41;.
Then we use   Math::Symbolic::Custom::LaTeXDumper to take that 
Math::Symbolic tree and use the method to_latex that LaTeXDumper 
provides
in order to get LaTeX code ,and then we can draw images of the
formula of the polynomial.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-651097" href="/Public/Bug/Display.html?id=46575#txn-651097">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;20&nbsp;19:54:44&nbsp;2009</span>
    <span class="description">hasch-cpan [...] cozap.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/651097/333629/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/333629">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Aug 19 12:28:20 2009, WSDOOKADR wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Aug 19 09:41:50 2009, MHASCH wrote:
<div class="message-stanza open">&gt; &gt; On Mon Aug 17 01:45:51 2009, WSDOOKADR wrote:
<div class="message-stanza open">&gt; &gt; &gt; What kind of pretty printing did you have in mind ?
</div>&gt; &gt; Examples:  Simplifying, rounding, formatting as code for
&gt; &gt; a given language &#40;such as your typesetting system&#41;.
</div>&gt; Can you be more explicit about &#39;simplifying&#39; and &#39;rounding&#39; ?
&gt; I&#39;m not sure what you mean.
</div>
One form already mentioned was a Horner schema, which may be
&#34;simplified&#34; by way of constant folding and redundant parentheses
elimination.  &#34;Rounding&#34; meant rounding of coefficients for terse
output.  None of these examples is terribly important, my point
being that one should carefully consider what features to put
into a specialized polynomial package and what elsewhere.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; If you know of other modules Math::Polynomial should
&gt; &gt; interface with in order to extend its formatting
&gt; &gt; capabilities &#40;or whatever&#41;, I am open for suggestions.
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; For example a more general way of doing these things would be:
&gt; First we use&#40;or we extend so that we can use&#41; Math::Symbolic on a
&gt; polynomial to create a parse tree from it &#40; parse_from_string method 
&gt; from Math::Symbolic &#41;. [...]
</div>
A symbolic calculator is definitely something useful to be
compatible with.  Nice suggestion.

-Martin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-651140" href="/Public/Bug/Display.html?id=46575#txn-651140">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;20&nbsp;22:40:19&nbsp;2009</span>
    <span class="description">randomcoder1 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/651140/333660/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/333660">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Aug 20 19:54:44 2009, MHASCH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Aug 19 12:28:20 2009, WSDOOKADR wrote:
<div class="message-stanza open">&gt; &gt; On Wed Aug 19 09:41:50 2009, MHASCH wrote:
<div class="message-stanza open">&gt; &gt; &gt; On Mon Aug 17 01:45:51 2009, WSDOOKADR wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; What kind of pretty printing did you have in mind ?
</div>&gt; &gt; &gt; Examples:  Simplifying, rounding, formatting as code for
&gt; &gt; &gt; a given language &#40;such as your typesetting system&#41;.
</div>&gt; &gt; Can you be more explicit about &#39;simplifying&#39; and &#39;rounding&#39; ?
&gt; &gt; I&#39;m not sure what you mean.
</div>&gt; 
&gt; One form already mentioned was a Horner schema, which may be
&gt; &#34;simplified&#34; by way of constant folding and redundant parentheses
&gt; elimination.
</div>
From what I remember from school and from refreshing my memory from here
If you&#39;re refering to this <span class="clickylink"><a target="new" rel="nofollow" href="http://planetmath.org/encyclopedia/">http://planetmath.org/encyclopedia/</a></span>
HornersRule.html
and here <span class="clickylink"><a target="new" rel="nofollow" href="http://en.wikipedia.org/wiki/Horner_scheme">http://en.wikipedia.org/wiki/Horner_scheme</a></span>

I think that after applying Horner&#39;s scheme the polynomial will
 look like

a0+x&#40;a1+x&#40;a2+x&#40;...+x&#40;a_{n-1}+x*an&#41;...&#41;
So basically there will be lots of parenthesis.
If however some of the ais happen to be 0 , then then yes we can
fold some parenthesis , is that what you&#39;re reffering to ?


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  &#34;Rounding&#34; meant rounding of coefficients for terse
&gt; output. 
</div>
Option1 sprintf&#40;&#34;%.3f&#34;,3.141592&#41;;
Option2 Number::Format
Option3 Math::Round
Option4 Math::Round::Var

Which would be best ?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; None of these examples is terribly important, my point
&gt; being that one should carefully consider what features to put
&gt; into a specialized polynomial package and what elsewhere.
</div>
So this feature should lie elsewhere ? Where ?
&#40;same namespace I presume&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; If you know of other modules Math::Polynomial should
&gt; &gt; &gt; interface with in order to extend its formatting
&gt; &gt; &gt; capabilities &#40;or whatever&#41;, I am open for suggestions.
</div></div>&gt; 
<div class="message-stanza open">&gt; &gt; For example a more general way of doing these things would be:
&gt; &gt; First we use&#40;or we extend so that we can use&#41; Math::Symbolic on a
&gt; &gt; polynomial to create a parse tree from it &#40; parse_from_string 
</div></div>method 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; from Math::Symbolic &#41;. [...]
</div>&gt; 
&gt; A symbolic calculator is definitely something useful to be
&gt; compatible with.  Nice suggestion.
&gt; 
&gt; -Martin
</div>
With a small modification to the as_string routine of your module,
I had to add a &#34;*&#34; to the end of line 634 in Polynomial.pm
634             $result .= $config{&#39;convert_coeff&#39;}-&gt;&#40;$coeff&#41;.&#34;*&#34;;
So that the output could be parsed by Math::Symbolic


  1 use Math::Polynomial;
  2 use Math::Symbolic::Custom::LaTeXDumper;
  3 use Math::Symbolic qw/parse_from_string/;
  4 use Data::Dumper;
  5 use feature &#39;say&#39;;
  6 $p = Math::Polynomial-&gt;new&#40;0, -2, 3, 1&#41;;
  7
  8
  9 my $tree = parse_from_string&#40;$p-&gt;as_string&#41;;
 10 #print Dumper $tree;
 11
 12 say $tree-&gt;to_latex;
 13 say $p;

OUTPUT:
x^3 + 3 x^2 + -2 x
&#40;x^3 + 3* x^2 + -2* x&#41;


P.S. : can I use html tags here ? how do I format some code ?


Actually , the initial output of your code was valid LaTeX&#40;before I 
modified it with the &#34;*&#34;&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-651471" href="/Public/Bug/Display.html?id=46575#txn-651471">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;21&nbsp;19:19:27&nbsp;2009</span>
    <span class="description">hasch-cpan [...] cozap.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/651471/333875/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/333875">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 865b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Aug 20 22:40:19 2009, WSDOOKADR wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; With a small modification to the as_string routine of your module,
&gt; I had to add a &#34;*&#34; to the end of line 634 in Polynomial.pm
&gt; 634             $result .= $config{&#39;convert_coeff&#39;}-&gt;&#40;$coeff&#41;.&#34;*&#34;;
&gt; So that the output could be parsed by Math::Symbolic
</div>
Good grief, don&#39;t fiddle with internals like this &#40;actually breaking
things&#41;, just look more closely at the docs.
The proper way of getting an asterisk in that place would be something
like calling $p-&gt;as_string&#40;{&#39;times&#39; =&gt; &#39;*&#39;}&#41; or setting such defaults
beforehand using the string_config method.

Your observation that, through an intermediate string representation,
there would be no need for a dedicated interface to Math::Symbolic, is
valuable advice, though.

Thank you for sharing your ideas in this thread.  I think I am now close
to a conclusion.

-Martin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-651485" href="/Public/Bug/Display.html?id=46575#txn-651485">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;21&nbsp;20:39:53&nbsp;2009</span>
    <span class="description">user42 [...] zip.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46575] pretty-printing polynomials</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 22 Aug 2009 10:39:10 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-Polynomial [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/651485/333885/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/333885">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 771b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Petrea Corneliu Stefan via RT&#34; &lt;bug-Math-Polynomial@rt.cpan.org&gt; writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; a0+x&#40;a1+x&#40;a2+x&#40;...+x&#40;a_{n-1}+x*an&#41;...&#41;
</div>
Yes, and perhaps laid out across multiple lines for clarity if the
coefficients are a bit big.  A form using &#34;+=&#34; and &#34;*=&#34; into a single
variable might help perl save a little copying of values, when cut and
pasted into code to be run.  &#40;Even C/C++ likewise if the coeffs are not
a native float/int type.&#41;

I suspect the base printing options can give TeX, probably other formats
like nroff too.  A canned set of options for that might be nice.  But
other forms like Horner with parens, or a little bit of lightweight
common subexpression noticing, are rearranged a bit.  Some direct ascii
art would be another possibility &#40;with even more limited use&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-651638" href="/Public/Bug/Display.html?id=46575#txn-651638">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;21&nbsp;23:29:32&nbsp;2009</span>
    <span class="description">randomcoder1 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/651638/333967/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/333967">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Aug 21 20:39:53 2009, user42@zip.com.au wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#34;Petrea Corneliu Stefan via RT&#34; &lt;bug-Math-Polynomial@rt.cpan.org&gt; 
</div>writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt;
&gt; &gt; a0+x&#40;a1+x&#40;a2+x&#40;...+x&#40;a_{n-1}+x*an&#41;...&#41;
</div>&gt; 
&gt; Yes, and perhaps laid out across multiple lines for clarity if the
&gt; coefficients are a bit big.  A form using &#34;+=&#34; and &#34;*=&#34; into a single
&gt; variable might help perl save a little copying of values, when cut and
&gt; pasted into code to be run.  &#40;Even C/C++ likewise if the coeffs are 
</div>not
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; a native float/int type.&#41;
</div>
Can you give an example here of how we&#39;d use the *= and += ?
I will attach a patch , please let me know if it&#39;s what you were 
thinking of.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I suspect the base printing options can give TeX, probably other 
</div>formats
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; like nroff too.  A canned set of options for that might be nice.  But
&gt; other forms like Horner with parens, or a little bit of lightweight
&gt; common subexpression noticing, are rearranged a bit.  Some direct 
</div>ascii
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; art would be another possibility &#40;with even more limited use&#41;.
</div>
So bottom line is I&#39;ve used the Horner representation and written
a method called pretty_print for this.
As a last proposal , I think we could include mimetex along with 
Math::Polynomial and have it compiled so that we can generate images
of the polynomials.
Here is mimetex -&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.forkosh.com/mimetex.html">http://www.forkosh.com/mimetex.html</a></span>
I&#39;ve written also a test_pol.pl that will show the output of the print 
method.
I will also write the output here:

&#40;&#40;&#40;&#40;&#40;&#40;&#40;&#40;&#40;&#40;&#40;&#40;&#40;&#40;6 * x&#41; + 6&#41; * x&#41; * x&#41; * x&#41; + 3&#41; * x&#41; * x&#41; + 1&#41; * x&#41; + 3&#41; 
* x&#41; + &#40;-2&#41;&#41; * x&#41; + 2

&#40;&#40;&#40;&#40;&#40;&#40;&#40;&#40;&#40;&#40;&#40;&#40;&#40;&#40;6 * x&#41;
 + 6&#41;
 * x&#41;
 * x&#41;
 * x&#41;
 + 3&#41;
 * x&#41;
 * x&#41;
 + 1&#41;
 * x&#41;
 + 3&#41;
 * x&#41;
 + &#40;-2&#41;
&#41;
 * x&#41;
 + 2

&#40;6 x^9 + 6 x^8 + 3 x^5 + x^3 + 3 x^2 + -2 x + 2&#41;


Patches rolled in.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/651638/333970/Polynomial.pm.patch">Download Polynomial.pm.patch</a><br />
<span class="downloadcontenttype">text/x-diff 852b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- Polynomial.pm	2009-06-12 15:00:28.000000000 +0300
+++ /usr/local/share/perl/5.10.0/Math/Polynomial.pm	2009-08-22 06:29:16.000000000 +0300
@@ -589,6 +589,26 @@
     return $ad-&gt;evaluate&#40;$upper&#41; - $ad-&gt;evaluate&#40;$lower&#41;;
 }
 
+sub pretty_print {
+    my &#40;$this , $multiple_lines&#41; = @_;
+    use Math::Symbolic;
+    my $x = Math::Symbolic::Variable-&gt;new&#40;&#39;x&#39;&#41;;
+
+    my @ais = reverse $this-&gt;coeff; # we want them from the smallest one to the largest one
+    my $pretty = Math::Symbolic-&gt;parse_from_string&#40;sprintf &#34;%s&#34;,shift @ais&#41;;
+
+    for my $coeff &#40;@ais &#41; {
+	$pretty *= $x;
+	$pretty += $coeff if $coeff;
+    };
+
+    my $output = $pretty-&gt;to_string&#40;&#41;;
+    if&#40; defined $multiple_lines &#38;&#38; $multiple_lines == 1 &#41; {
+	$output =~ s/\&#41;/\&#41;\n/g;
+    }
+    return $output ;
+}
+
 sub as_string {
     my &#40;$this, $params&#41; = @_;
     my %config = &#40;
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/651638/333973/test_pol.pl">Download test_pol.pl</a><br />
<span class="downloadcontenttype">text/x-perl 356b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">use Math::Polynomial;
use Math::Symbolic::Custom::LaTeXDumper;
use Math::Symbolic qw/parse_from_string/;
use Data::Dumper;
use feature &#39;say&#39;;
$p = Math::Polynomial-&gt;new&#40;2, -2, 3, 1 , 0 , 3 , 0 , 0 , 6, 6&#41;;  


#my $tree = parse_from_string&#40;$p-&gt;as_string&#41;;
#print Dumper $tree;

say $p-&gt;pretty_print.&#34;\n&#34;;
say $p-&gt;pretty_print&#40;1&#41;.&#34;\n&#34;;
say $p;

#print $p;

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-655075" href="/Public/Bug/Display.html?id=46575#txn-655075">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;28&nbsp;20:14:44&nbsp;2009</span>
    <span class="description">user42 [...] zip.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46575] pretty-printing polynomials</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Aug 2009 10:13:50 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-Polynomial [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/655075/335889/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/335889">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 703b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Petrea Corneliu Stefan via RT&#34; &lt;bug-Math-Polynomial@rt.cpan.org&gt; writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; I will attach a patch , please let me know if it&#39;s what you were 
&gt; thinking of.
</div>
Not really, or not with the name pretty_print.  The horner form
including += style is quite an ugly print actually, it&#39;d be a slightly
specialized thing, not necessarily in the main .pm file.  I expect
Math::Symbolic isn&#39;t needed to print it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ... * x&#41; * x&#41; * x&#41;
</div>
There&#39;d be a choice between multiple &#34;*&#34; multiplies and an exponential
&#34;**&#34; there.  Which one is better might depend on the coefficient type.
For plain floats perhaps 3 or more would definitely be &#34;**&#34;.  Or give
&#34;**&#34; always and let perl and/or the coeff module worry about it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-657789" href="/Public/Bug/Display.html?id=46575#txn-657789">#</a>      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;01&nbsp;12:03:42&nbsp;2009</span>
    <span class="description">hasch-cpan [...] cozap.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/657789/337181/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/337181">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am now thinking of a small addition to the base module that will
support generating Horner schemes as well as Math::Symbolic trees via
another configurable output method, named as_tree.

The deal is that as_tree will deliver arithmetic atoms to callback
functions which in turn can call Math::Symbolic constructors or simply
add their arguments to a string.  It may be feasible to refactor
as_string into a wrapper for as_tree with some intelligent parameter
conversion.  Whether power sums or Horner-type grouping are used would
be one of the configuration options.

The downside is that we then give an even more low-level tool than
as_string into the hands of our poor users.  It will probably require
tons of documentation and never be used outside the test suite.

A way to avoid this might be to declare as_tree an obscure feature while
providing a couple of convenience wrappers with nice defaults.
This in turn can bring us back to the beginning of this thread where
Kevin simply wanted to have nested parentheses in the string output.

Bottom line: The API design is once again more tricky to get right than
implementing the algorithms.  But I like that.  Thanks for bearing with
me so far.

-Martin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-659538" href="/Public/Bug/Display.html?id=46575#txn-659538">#</a>      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;04&nbsp;17:17:22&nbsp;2009</span>
    <span class="description">randomcoder1 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/659538/338239/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/338239">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 838b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Done.


On Fri Aug 28 20:14:44 2009, user42@zip.com.au wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#34;Petrea Corneliu Stefan via RT&#34; &lt;bug-Math-Polynomial@rt.cpan.org&gt; 
</div>writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt;
&gt; &gt; I will attach a patch , please let me know if it&#39;s what you were 
&gt; &gt; thinking of.
</div>&gt; 
&gt; Not really, or not with the name pretty_print.  The horner form
&gt; including += style is quite an ugly print actually, it&#39;d be a slightly
&gt; specialized thing, not necessarily in the main .pm file.  I expect
&gt; Math::Symbolic isn&#39;t needed to print it.
&gt; 
<div class="message-stanza open">&gt; &gt; ... * x&#41; * x&#41; * x&#41;
</div>&gt; 
&gt; There&#39;d be a choice between multiple &#34;*&#34; multiplies and an exponential
&gt; &#34;**&#34; there.  Which one is better might depend on the coefficient type.
&gt; For plain floats perhaps 3 or more would definitely be &#34;**&#34;.  Or give
&gt; &#34;**&#34; always and let perl and/or the coeff module worry about it.
</div>
-- 
Your bugs , they are afraid of me.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/659538/338242/Polynomial.pm.patch">Download Polynomial.pm.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- /usr/local/share/perl/5.10.0/Math/Polynomial.pm	2009-06-12 00:51:47.000000000 +0300
+++ Math/Polynomial.pm	2009-09-05 00:05:35.000000000 +0300
@@ -589,6 +589,60 @@
     return $ad-&gt;evaluate&#40;$upper&#41; - $ad-&gt;evaluate&#40;$lower&#41;;
 }
 
+sub pretty_print {
+
+	my &#40;$this , $multiple_lines , $pack&#41; = @_;
+
+	my @ais = reverse $this-&gt;coeff; # we want them from the smallest one to the largest one
+	# by ais we mean actually  a_i , the generic coefficient
+
+	my $pretty = &#39;&#39;;
+	if&#40; defined $pack &#38;&#38; $pack == 1 &#41; {
+
+	} else {
+		$pretty = &#39;&#40;&#39;x$this-&gt;degree&#40;&#41;;
+	}
+	$pretty .= shift @ais;
+
+	my $parens = 0;
+	my $power = 0; # actually I&#39;m strong
+
+	for my $coeff &#40;@ais &#41; {
+	    my $coeffstr = 
+		$coeff &gt; 0
+		? &#34;+$coeff&#34;
+		: $coeff; # this is to avoid cases like   x + -2 or similar things
+	    if&#40; defined $pack &#38;&#38; $pack == 1 &#41; {
+		if&#40; $coeff == 0 &#41; {
+		    $power++;
+		} else {
+		    $parens++; 
+		    # we count how many parenthesis we closed so we know how many to open &#40; scratching left ear with right hand&#41;
+		    if&#40; $power &gt; 0 &#41; {
+			$pretty .= &#39; x**&#39;.&#40;$power+1&#41;.&#34; $coeffstr&#41;&#34;;
+		    } else {
+			$pretty .= &#34; x $coeffstr &#41;&#34;;
+		    };
+		    $power=0;
+		}
+	    } else {
+		$pretty .= &#39; x&#39;;
+		$pretty .= &#34;$coeffstr&#34; if $coeff;
+		$pretty .= &#39;&#41;&#39;;
+	    };
+	};
+
+	if&#40; defined $pack &#38;&#38; $pack == 1 &#41; {
+		$pretty = &#40; &#39;&#40;&#39;x$parens &#41;
+			  .$pretty; # prepend the needed open parenthesis
+	}
+
+	if&#40; defined $multiple_lines &#38;&#38; $multiple_lines == 1 &#41; {
+		$pretty =~ s/\&#41;/\&#41;\n/g;
+	}
+	return $pretty ;
+}
+
 sub as_string {
     my &#40;$this, $params&#41; = @_;
     my %config = &#40;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-659541" href="/Public/Bug/Display.html?id=46575#txn-659541">#</a>      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;04&nbsp;17:19:41&nbsp;2009</span>
    <span class="description">randomcoder1 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/659541/338246/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/338246">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Also , a script to test it with is attached.

Sample output:

WITHOUT Packing -&gt; &#40;&#40;&#40;&#40;&#40;&#40;&#40;&#40;&#40;6 x+6&#41; x&#41; x&#41; x+3&#41; x&#41; x+1&#41; x+3&#41; x-2&#41; x+2&#41;

With    Packing -&gt; &#40;&#40;&#40;&#40;&#40;&#40;6 x +6 &#41; x**3 +3&#41; x**2 +1&#41; x +3 &#41; x -2 &#41; x +2 &#41;

As String       -&gt; &#40;6 x^9 + 6 x^8 + 3 x^5 + x^3 + 3 x^2 + -2 x + 2&#41;


On Fri Aug 28 20:14:44 2009, user42@zip.com.au wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#34;Petrea Corneliu Stefan via RT&#34; &lt;bug-Math-Polynomial@rt.cpan.org&gt; 
</div>writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt;
&gt; &gt; I will attach a patch , please let me know if it&#39;s what you were 
&gt; &gt; thinking of.
</div>&gt; 
&gt; Not really, or not with the name pretty_print.  The horner form
&gt; including += style is quite an ugly print actually, it&#39;d be a slightly
&gt; specialized thing, not necessarily in the main .pm file.  I expect
&gt; Math::Symbolic isn&#39;t needed to print it.
&gt; 
<div class="message-stanza open">&gt; &gt; ... * x&#41; * x&#41; * x&#41;
</div>&gt; 
&gt; There&#39;d be a choice between multiple &#34;*&#34; multiplies and an exponential
&gt; &#34;**&#34; there.  Which one is better might depend on the coefficient type.
&gt; For plain floats perhaps 3 or more would definitely be &#34;**&#34;.  Or give
&gt; &#34;**&#34; always and let perl and/or the coeff module worry about it.
</div>

-- 
Your bugs , they are afraid of me.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/659541/338249/test_pol.pl">Download test_pol.pl</a><br />
<span class="downloadcontenttype">text/x-perl 417b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">use lib &#39;./&#39;;
use Math::Polynomial;
use Data::Dumper;

sub say {
	print &#40;@_,&#34;\n&#34;&#41;;
};

#say Dumper %INC;
my @coeff_array =&#40;2, -2, 3, 1 , 0 , 3 , 0 , 0 , 6, 6&#41;;
$p = Math::Polynomial-&gt;new&#40;@coeff_array&#41;;  


#my $tree = parse_from_string&#40;$p-&gt;as_string&#41;;
#print Dumper $tree;

say &#34;COEFF @coeff_array&#34;.&#34;\n&#34;;
say $p-&gt;pretty_print.&#34;\n&#34;;
#say $p-&gt;pretty_print&#40;1&#41;.&#34;\n&#34;;
say $p-&gt;pretty_print&#40;0,1&#41;.&#34;\n&#34;;
say $p;

#print $p;


</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-659544" href="/Public/Bug/Display.html?id=46575#txn-659544">#</a>      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;04&nbsp;17:28:22&nbsp;2009</span>
    <span class="description">randomcoder1 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/659544/338252/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/338252">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Sep 01 12:03:42 2009, MHASCH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I am now thinking of a small addition to the base module that will
&gt; support generating Horner schemes as well as Math::Symbolic trees via
&gt; another configurable output method, named as_tree.
&gt; 
&gt; The deal is that as_tree will deliver arithmetic atoms 
</div>
can you please describe what you mean by &#34;arithmetic atoms&#34; ?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; to callback
&gt; functions which in turn can call Math::Symbolic constructors or simply
&gt; add their arguments to a string.  It may be feasible to refactor
&gt; as_string into a wrapper for as_tree with some intelligent parameter
&gt; conversion.  Whether power sums or Horner-type grouping are used would
&gt; be one of the configuration options.
&gt; 
&gt; The downside is that we then give an even more low-level tool than
&gt; as_string into the hands of our poor users.  It will probably require
&gt; tons of documentation and never be used outside the test suite.
</div>
If needed I can write docs. I&#39;m not in a rush :&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; A way to avoid this might be to declare as_tree an obscure feature 
</div>while
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; providing a couple of convenience wrappers with nice defaults.
&gt; This in turn can bring us back to the beginning of this thread where
&gt; Kevin simply wanted to have nested parentheses in the string output.
&gt; 
&gt; Bottom line: The API design is once again more tricky to get right 
</div>than
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; implementing the algorithms.  But I like that.  Thanks for bearing 
</div>with
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; me so far.
&gt; 
&gt; -Martin
</div>
-- 
Your bugs , they are afraid of me.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-660119" href="/Public/Bug/Display.html?id=46575#txn-660119">#</a>      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;06&nbsp;20:36:09&nbsp;2009</span>
    <span class="description">user42 [...] zip.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> randomcoder1 [...] gmail.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46575] pretty-printing polynomials</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 07 Sep 2009 10:35:39 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-Polynomial [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/660119/338571/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/338571">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 652b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Martin Becker via RT&#34; &lt;bug-Math-Polynomial@rt.cpan.org&gt; writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; as_tree.
</div>
Sounds both a bit too general and a bit too specific at the same time,
if that&#39;s not a contradiction :&#41;.

But inter-operation with Math::Symbolic sounds good.  I don&#39;t know much
about it, perhaps its what I should be using for the final expressions I
was fiddling with, especially since I end up being in two variables.

Of course for inter-operation there&#39;s always a choice which module to
have the conversion, whether Math::Polynomial spits out a symbolic, or
Math::Symbolic can take in a poly.  If Math::Symbolic is biggish anyway
you&#39;d be tempted to put code there ...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-836307" href="/Public/Bug/Display.html?id=46575#txn-836307">#</a>      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;26&nbsp;05:45:46&nbsp;2010</span>
    <span class="description">hasch-cpan [...] cozap.com -  Fixed in 1.003 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-836308" href="/Public/Bug/Display.html?id=46575#txn-836308">#</a>      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;26&nbsp;05:45:46&nbsp;2010</span>
    <span class="description">hasch-cpan [...] cozap.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/836308/433230/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/433230">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 288b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Version 1.003 of Math::Polynomial adds two methods as_horner_tree and 
as_power_sum_tree to the conversions toolbox. Both can be used to generate operand 
trees as well as plain strings. Examples are documented.

Thanks for the discussion. I consider this wishlist issue resolved.
-Martin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-836311" href="/Public/Bug/Display.html?id=46575#txn-836311">#</a>      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;26&nbsp;05:45:51&nbsp;2010</span>
    <span class="description">hasch-cpan [...] cozap.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.947747</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
