<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #25144 for Math-BigInt: [PATCH] Math::BigFloat-&gt;new considers any reference a BigInt.</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #25144 for Math-BigInt: [PATCH] Math::BigFloat-&gt;new considers any reference a BigInt.</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Math-BigInt/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Math-BigInt/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Math-BigInt/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Math-BigInt/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Math-BigInt">Math-BigInt CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">25144</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">10 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Math-BigInt/Active/">Math-BigInt</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">TELS [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mschwern [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-20500-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.79    </td>
  </tr>
  <tr id="CF-20501-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;25&nbsp;15:33:14&nbsp;2007</span>
    <span class="description">mschwern [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [PATCH] Math::BigFloat-&gt;new considers any reference a BigInt.</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">If you pass in a reference to Math::BigFloat-&gt;new&#40;&#41; it assumes its a
BigInt object.  This assumption breaks overloaded objects.

    $bigfloat = Math::BigFloat-&gt;new&#40;$overloaded_number&#41;;

It thinks its a BigInt and tries to call as_number&#40;&#41; on it.

The attached patch tests for and fixes this.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> new_overloaded.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Auto-merging &#40;0, 27642&#41; /local/Math-BigInt to /vendor/Math-BigInt &#40;base /vendor/Math-BigInt:27640&#41;.
A   t/new_overloaded.t
U   lib/Math/BigFloat.pm
==== Patch &lt;-&gt; level 1
Source: 9c88509d-e914-0410-b01c-b9530614cbfe:/local/Math-BigInt:27642
Target: 9c88509d-e914-0410-b01c-b9530614cbfe:/vendor/Math-BigInt:27640
Log:
 r27641@windhund:  schwern | 2007-02-25 12:16:14 -0800
 Local copy
 r27642@windhund:  schwern | 2007-02-25 12:30:13 -0800
 Math::BigFloat-&gt;new would consider any reference to be a BigInt.  This
 broke overloaded non-BigInts.

=== t/new_overloaded.t
==================================================================
--- t/new_overloaded.t	&#40;revision 27640&#41;
+++ t/new_overloaded.t	&#40;patch - level 1&#41;
@@ -0,0 +1,32 @@
+#!/usr/bin/perl -w
+
+# Math::BigFloat-&gt;new had a bug where it would assume any object is a
+# BigInt which broke overloaded non-BigInts.
+
+use Test::More tests =&gt; 4;
+
+
+package Overloaded::Num;
+
+use overload &#39;0+&#39; =&gt; sub { ${$_[0]} },
+             fallback =&gt; 1;
+sub new {
+    my&#40;$class, $num&#41; = @_;
+    return bless \$num, $class;
+}
+
+
+package main;
+
+use Math::BigFloat;
+
+my $overloaded_num = Overloaded::Num-&gt;new&#40;2.23&#41;;
+is $overloaded_num, 2.23;
+
+my $bigfloat = Math::BigFloat-&gt;new&#40;$overloaded_num&#41;;
+is $bigfloat, 2.23, &#39;BigFloat-&gt;new accepts overloaded numbers&#39;;
+
+my $bigint = Math::BigInt-&gt;new&#40;Overloaded::Num-&gt;new&#40;3&#41;&#41;;
+is $bigint, 3, &#39;BigInt-&gt;new accepts overloaded numbers&#39;;
+
+is&#40; Math::BigFloat-&gt;new&#40;$bigint&#41;, 3, &#39;BigFloat from BigInt&#39; &#41;;
=== lib/Math/BigFloat.pm
==================================================================
--- lib/Math/BigFloat.pm	&#40;revision 27640&#41;
+++ lib/Math/BigFloat.pm	&#40;patch - level 1&#41;
@@ -127,7 +127,7 @@
 
   my $self = {}; bless $self, $class;
   # shortcut for bigints and its subclasses
-  if &#40;&#40;ref&#40;$wanted&#41;&#41; &#38;&#38; &#40;ref&#40;$wanted&#41; ne $class&#41;&#41;
+  if &#40;&#40;ref&#40;$wanted&#41;&#41; &#38;&#38; eval { $wanted-&gt;isa&#40;&#34;Math::BigInt&#34;&#41; }&#41;
     {
     $self-&gt;{_m} = $wanted-&gt;as_number&#40;&#41;-&gt;{value}; # get us a bigint copy
     $self-&gt;{_e} = $MBI-&gt;_zero&#40;&#41;;

==== BEGIN SVK PATCH BLOCK ====
Version: svk v2.0.0 &#40;darwin&#41;

eJyNVN9v21QULhLiwbzxS0IMcdk82oq6ude/GjssC6hN2q7tKtGNhw1Z19fHjZljB/9oqOpOJE5W
xAMvSLzuiRf+Gf6U/QscO20ZotUqJcqN7znfOd/x951uctDqsKLdpoXMaPHt4we2vc8z0b/L9EI2
C/CCLE5kowjhCEJZK8L4UNaLiA8Ab9M4T0R1yHhyCFl1CMQzyNpthnDNOdxGDXEBW6O6PIujVLZq
eCdLAGRWmJ21oqNVH0dmVpEC3tSwTgJHQRrEEbahrpm6iiEYzzA/HkLkJHGcXV6pVTYtRBin4FTw
FaRRxasyUqoTvCABgT0d49OsRrrIrgP1KwKReOD+J7Ru0zgv9Doiwx46ZgWkyc2Ce57jByFU48ga
EYyc+AiSMOYeeKtVcdWR1UJh1+Opc7z6lg+H4bGTwU+ZB2HGqxqOI+tNC0e9t7CwMBPjDyZbPz/v
Pv1ra/iiO35nM56tj2/9vjP2f8Hfcn18sP7FeGMMf+D3t/XJJ5Pu5P3ywfj2tDf+au+js+34xf54
ZUP+dX/y42S9/Lg3CafrZHLw4fjhJOmVn26W97ulWu7dOtuNzrbL5mS37E565XePyrcn2+Vg1pu+
tTntOdP3ysflVncajbem2cZns96T2Z3PG3maNNwgagyRP1FGknSH7PKsb9vfBIddnEimtHE+pM89
wombH5JRHxIgQUZGcR7iwzTNB0B4dExi9wecDwlSwhEF87cijOoHok/cJH4G5N8hkyiOlHRVkvIU
yAGkmW3vxgib4TEl99pEb0mSNOTiGT8E8tC29/JBiyzSLxfT3CUnRD6RnSf0+1NyuiIRn4ehi6Gs
JZ0MjpdkEWJTK0SO8sEyuUc6TiuBLE8i4oaQpuTpCmlJpwMeRFhjcExkBwPJvSV1VdWWW1KAqW5w
6OOTFbLIhYBhhhRdSNLFINqKtOUgylaQ5dIy8ZN4sEgwqaO/rvC5tFBpmlpwaHJhUN/QVQq6Yfpi
zXWFblLWpK4JZqWjWuDGFQJvVgJvVO+jdsAbVa5fopkXPqx7UeklUOPiva4OB3XVN4Iac9BrpG5W
JJsuaDrzhWVYwvQ0ChQsy6SaMHSfctWUTTb3wuzV/dmrnXfvLrz0F/5cmP399cvncMTD6o2OeJSB
p7SDlC/dvpQgSuj2Mjm9cr51acuydOYC+J6laz6n1KKM44hNBpbZ9KBeD6pqFCSpeLLOKIi8fh55
NiGp6I8AdVEQldI1haqKahCm2sy0mU4U2qRUIjuxwAZFPDyW5hDqTSA0ajPtAuIqQ83dI3DjBh4k
tX8S8NFakUAbxMRFT517aJWQg36QSle7aB6DXkKmSrutFsh2vuMP6kVt24+iAFNSHt7FBagXw0pO
WoH7G//keeBVW7ARVjRrhZwjXghD1szCEs2mQS1PAYvpCtUZVVzKhOJahkZNpgvXh/ayWlxbwCoa
RxB5cXJFBXrTCpWKbhJn/5+MXVP5B0vbWqE=
==== END SVK PATCH BLOCK ====
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;01&nbsp;16:39:45&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Feb 25 15:33:14 2007, MSCHWERN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If you pass in a reference to Math::BigFloat-&gt;new&#40;&#41; it assumes its a
&gt; BigInt object.  This assumption breaks overloaded objects.
&gt; 
&gt;     $bigfloat = Math::BigFloat-&gt;new&#40;$overloaded_number&#41;;
&gt; 
&gt; It thinks its a BigInt and tries to call as_number&#40;&#41; on it.
&gt; 
&gt; The attached patch tests for and fixes this.
</div>
Thanx, just one question:

+  if &#40;&#40;ref&#40;$wanted&#41;&#41; &#38;&#38; eval { $wanted-&gt;isa&#40;&#34;Math::BigInt&#34;&#41; }&#41;

Would it be okay to write this as:

+  if &#40;&#40;ref&#40;$wanted&#41;&#41; &#38;&#38; UNIVERSAL::isa&#40;$wanted,&#34;Math::BigInt&#34;&#41;&#41;

I don&#39;t like to introduce needless evals.

Best wishes,

Tels
 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;01&nbsp;16:39:48&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;01&nbsp;16:40:23&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;04&nbsp;10:03:06&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">10 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I just released Math::BigInt 1.80 to CPAN, which hopefully fixes this issue.

Thank you for your report, and sorry for the long delay.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;04&nbsp;10:03:12&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;13&nbsp;11:59:28&nbsp;2007</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> MSCHWERN [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Mar 01 16:39:45 2007, TELS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanx, just one question:
&gt; 
&gt; +  if &#40;&#40;ref&#40;$wanted&#41;&#41; &#38;&#38; eval { $wanted-&gt;isa&#40;&#34;Math::BigInt&#34;&#41; }&#41;
&gt; 
&gt; Would it be okay to write this as:
&gt; 
&gt; +  if &#40;&#40;ref&#40;$wanted&#41;&#41; &#38;&#38; UNIVERSAL::isa&#40;$wanted,&#34;Math::BigInt&#34;&#41;&#41;
&gt; 
&gt; I don&#39;t like to introduce needless evals.
</div>
Sorry, I didn&#39;t see this message because of the RT email outages.

No, its not ok.  $wanted may override isa&#40;&#41; and UNIVERSAL::isa&#40;&#41; as a
function does not honor this.  Also eval BLOCK is not the same as eval
STRING and does not have nearly the overhead.  Its not worth worrying about.

There are legit reasons to override isa&#40;&#41;.  For example, seemless
delegation to a Math:BigFloat object.

package Thing;

sub new {
    my&#40;$class, $number&#41; = @_;

    my $self = bless {}, $class;

    $self-&gt;{bigfloat} = Math::BigFloat-&gt;new&#40;$number&#41;;

    return $self;
}

sub AUTOLOAD {
    ...blah blah autoload stuff...

    return $self-&gt;{bigfloat}-&gt;$method&#40;@args&#41;;
}

sub isa {
    my&#40;$class, $isa&#41; = @_;

    return 1 if $class-&gt;{bigfloat}-&gt;isa&#40;$isa&#41;;
    return $class-&gt;SUPER::isa&#40;$isa&#41;;
}

sub can {
    my&#40;$class, $method&#41; = @_;

    return 1 if $class-&gt;{bigfloat}-&gt;can&#40;$method&#41;;
    return $class-&gt;SUPER::can&#40;$method&#41;;
}
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;13&nbsp;11:59:31&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;09&nbsp;13:19:03&nbsp;2012</span>
    <span class="description">BBYRD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> MSCHWERN [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Apr 13 11:59:28 2007, MSCHWERN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; No, its not ok.  $wanted may override isa&#40;&#41; and UNIVERSAL::isa&#40;&#41; as a
&gt; function does not honor this.  Also eval BLOCK is not the same as eval
&gt; STRING and does not have nearly the overhead.  Its not worth worrying
</div>about.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; There are legit reasons to override isa&#40;&#41;.  For example, seemless
&gt; delegation to a Math:BigFloat object.
</div>
Is this still an issue?  There are still references to UNIVERSAL:: calls
in BigFloat.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;09&nbsp;20:51:36&nbsp;2012</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #25144] [PATCH] Math::BigFloat-&gt;new considers any reference a BigInt.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 09 Jul 2012 17:51:23 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2012.7.9 10:19 AM, Brendan Byrd via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; There are legit reasons to override isa&#40;&#41;.  For example, seemless
&gt;&gt; delegation to a Math:BigFloat object.
</div>&gt; 
&gt; Is this still an issue?  There are still references to UNIVERSAL:: calls
&gt; in BigFloat.
</div>
Yes, it&#39;s still an issue in the sense that calling UNIVERSAL::isa or can
breaks encapsulation.  The first two calls will fail of $wanted overrides
can&#40;&#41; or isa&#40;&#41;.

Math::BigFloat&#39;s own isa&#40;&#41; override does not honor its parent&#39;s possible isa&#40;&#41;
override.  The isa&#40;&#41; override in the subclass of MBF in t/upgradef.t also does
not honor MBF&#39;s isa&#40;&#41; override and happens to work by knowing the details of
MBF&#39;s isa&#40;&#41; and repeating them.  This is the first example of recursive irony
I&#39;ve encountered.

A patch is attached.  I don&#39;t know why Tels didn&#39;t want to use eval blocks,
probably a misplaced micro-optimization concern.


-- 
Alligator sandwich, and make it snappy!
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
