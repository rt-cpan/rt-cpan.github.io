<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #89365 for DBD-ODBC: t/02simple.t failure on Debian with mysql ODBC driver</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #89365 for DBD-ODBC: t/02simple.t failure on Debian with mysql ODBC driver</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-ODBC/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-ODBC/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-ODBC/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-ODBC/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-ODBC">DBD-ODBC CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">89365</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-ODBC/Active/">DBD-ODBC</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
MICHIELB [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10188-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10189-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.45    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;09&nbsp;08:10:45&nbsp;2013</span>
    <span class="description">MICHIELB [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> t/02simple.t failure on Debian with mysql ODBC driver</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I installed libmyodbc in debian from the repositories.
The t/02simple.t test fails on DBD::ODBC, latest version from CPAN, and also when run on the git master branch.

contents of /etc/odbcinst.ini

[MySQL]
Description = ODBC for MySQL
Driver = /usr/lib/i386-linux-gnu/odbc/libmyodbc.so
Setup = /usr/lib/i386-linux-gnu/odbc/libodbcmyS.so
FileUsage = 1

# Perl 5.14.2
# osname=linux, osvers=2.6.32-5-686-bigmem, archname=i486-linux-gnu-thread-multi-64int
# Using DBI 1.622
# Using DBD::ODBC 1.44_3
# Using DBMS_NAME &#39;MySQL&#39;
# Using DBMS_VER &#39;5.5.31-0+wheezy1&#39;
# Using DRIVER_NAME &#39;libmyodbc5.so&#39;
# Using DRIVER_VER &#39;05.01.0010&#39;
# odbc_has_unicode 0

DBI_DSN=dbi:ODBC:DRIVER={MySQL};Server=localhost;Port=3306;Database=test

#   Failed test &#39;ReadOnly set&#39;
#   at t/02simple.t line 57.
#          got: &#39;0&#39;
#     expected: &#39;1&#39;
# Looks like you failed 1 test of 66.
t/02simple.t ................. Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/66 subtests 
        &#40;less 3 skipped subtests: 62 okay&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;09&nbsp;08:33:27&nbsp;2013</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 09 08:10:45 2013, MICHIELB wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; I installed libmyodbc in debian from the repositories.
&gt; The t/02simple.t test fails on DBD::ODBC, latest version from CPAN,
&gt; and also when run on the git master branch.
&gt; 
&gt; contents of /etc/odbcinst.ini
&gt; 
&gt; [MySQL]
&gt; Description = ODBC for MySQL
&gt; Driver = /usr/lib/i386-linux-gnu/odbc/libmyodbc.so
&gt; Setup = /usr/lib/i386-linux-gnu/odbc/libodbcmyS.so
&gt; FileUsage = 1
&gt; 
&gt; # Perl 5.14.2
&gt; # osname=linux, osvers=2.6.32-5-686-bigmem, archname=i486-linux-gnu-
&gt; thread-multi-64int
&gt; # Using DBI 1.622
&gt; # Using DBD::ODBC 1.44_3
&gt; # Using DBMS_NAME &#39;MySQL&#39;
&gt; # Using DBMS_VER &#39;5.5.31-0+wheezy1&#39;
&gt; # Using DRIVER_NAME &#39;libmyodbc5.so&#39;
&gt; # Using DRIVER_VER &#39;05.01.0010&#39;
&gt; # odbc_has_unicode 0
&gt; 
&gt; DBI_DSN=dbi:ODBC:DRIVER={MySQL};Server=localhost;Port=3306;Database=test
&gt; 
&gt; #   Failed test &#39;ReadOnly set&#39;
&gt; #   at t/02simple.t line 57.
&gt; #          got: &#39;0&#39;
&gt; #     expected: &#39;1&#39;
&gt; # Looks like you failed 1 test of 66.
&gt; t/02simple.t ................. Dubious, test returned 1 &#40;wstat 256,
&gt; 0x100&#41;
&gt;  Failed 1/66 subtests
&gt;         &#40;less 3 skipped subtests: 62 okay&#41;
</div>
The problem here is DBD::ODBC calls SQLSetConnectAttr to set SQL_ACCESS_MODE and when it asks for it back it is not what it was set to. It is possibly the same issue as with SQLite in that it may be the ODBC driver says it doesn&#39;t do SQL_ACCESS_MODE and although DBD::ODBC can detect this and issue a warning the warning will never be seen because of <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=89015">https://rt.cpan.org/Ticket/Display.html?id=89015</a></span> in DBI.

However, it could just as easily be a bug in the MySQL driver. I cannot tell without seeing what the call to SQLSetConnectAttr returns. If it is SQL_SUCCESS_WITH_INFO it does not handle it and can be added to the SQLite list thus waiting for DBI fix &#40;which I personally, haven&#39;t quite got to grips with yet&#41;.

If you are prepared to do a unixODBC log to tell me which of the above it is you do this:

Edit /etc/odbcinst.ini and the top of this file add something like:

[ODBC]
Trace=yes
TraceFile=/tmp/unixodbc.log

Now just run the 02simple test with something like:

prove -vb t/02simple.t

Now edit /etc/odbcinst.ini to change the Yes to a No &#40;or logging will slow down ODBC from now on&#41;. Look in /tmp/unixodbc.log for SQL_ACCESS_MODE string and paste around 20 or lines before and after it here.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;09&nbsp;08:33:27&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;09&nbsp;08:45:59&nbsp;2013</span>
    <span class="description">MICHIELB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">attached the test &#38; log output.

t/02simple.t .. 
1..66
ok 1 - use DBI;
ok 2 - use ODBCTEST;
# 
# Perl 5.19.4
# osname=linux, osvers=3.2.0-4-686-pae, archname=i686-linux
# Using DBI 1.628
# Using DBD::ODBC 1.44_3
# Using DBMS_NAME &#39;MySQL&#39;
# Using DBMS_VER &#39;5.5.31-0+wheezy1&#39;
# Using DRIVER_NAME &#39;libmyodbc5.so&#39;
# Using DRIVER_VER &#39;05.01.0010&#39;
# odbc_has_unicode 0
not ok 3 - ReadOnly set

#   Failed test &#39;ReadOnly set&#39;
#   at t/02simple.t line 57.
#          got: &#39;0&#39;
#     expected: &#39;1&#39;
ok 4 - ReadOnly cleared
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> unixodbc.log</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;09&nbsp;08:58:57&nbsp;2013</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 09 08:45:59 2013, MICHIELB wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; attached the test &#38; log output.
&gt; 
&gt; t/02simple.t .. 
&gt; 1..66
&gt; ok 1 - use DBI;
&gt; ok 2 - use ODBCTEST;
&gt; # 
&gt; # Perl 5.19.4
&gt; # osname=linux, osvers=3.2.0-4-686-pae, archname=i686-linux
&gt; # Using DBI 1.628
&gt; # Using DBD::ODBC 1.44_3
&gt; # Using DBMS_NAME &#39;MySQL&#39;
&gt; # Using DBMS_VER &#39;5.5.31-0+wheezy1&#39;
&gt; # Using DRIVER_NAME &#39;libmyodbc5.so&#39;
&gt; # Using DRIVER_VER &#39;05.01.0010&#39;
&gt; # odbc_has_unicode 0
&gt; not ok 3 - ReadOnly set
&gt; 
&gt; #   Failed test &#39;ReadOnly set&#39;
&gt; #   at t/02simple.t line 57.
&gt; #          got: &#39;0&#39;
&gt; #     expected: &#39;1&#39;
&gt; ok 4 - ReadOnly cleared
</div>
In this case:

[ODBC][10959][1381322599.058070][SQLSetConnectAttr.c][321]
                Entry:            
                        Connection = 0x9766b98            
                        Attribute = SQL_ATTR_ACCESS_MODE            
                        Value = 0x1            
                        StrLen = -5
[ODBC][10959][1381322599.058101][SQLSetConnectAttr.c][675]
                Exit:[SQL_SUCCESS]                 &lt;--- NOTE success
[ODBC][10959][1381322599.058148][SQLGetConnectAttr.c][285]
                Entry:            
                        Connection = 0x9766b98            
                        Attribute = SQL_ATTR_ACCESS_MODE            
                        Value = 0xbf910c14            
                        Buffer Length = -5            
                        StrLen = &#40;nil&#41;
[ODBC][10959][1381322599.058176][SQLGetConnectAttr.c][757]
                Exit:[SQL_SUCCESS]

but value coming back was not 1 - so ODBC driver broken.

Chalk this one down to an ODBC driver issue. It can return SQL_SUCCESS_WITH_INFO and option value changed &#40;i.e., it does not do it&#41; or SQL_SUCCESS and it should return the value previous set.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;31&nbsp;05:04:02&nbsp;2013</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 09 08:58:57 2013, MJEVANS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Oct 09 08:45:59 2013, MICHIELB wrote:
<div class="message-stanza open">&gt; &gt; attached the test &#38; log output.
&gt; &gt;
&gt; &gt; t/02simple.t ..
&gt; &gt; 1..66
&gt; &gt; ok 1 - use DBI;
&gt; &gt; ok 2 - use ODBCTEST;
&gt; &gt; #
&gt; &gt; # Perl 5.19.4
&gt; &gt; # osname=linux, osvers=3.2.0-4-686-pae, archname=i686-linux
&gt; &gt; # Using DBI 1.628
&gt; &gt; # Using DBD::ODBC 1.44_3
&gt; &gt; # Using DBMS_NAME &#39;MySQL&#39;
&gt; &gt; # Using DBMS_VER &#39;5.5.31-0+wheezy1&#39;
&gt; &gt; # Using DRIVER_NAME &#39;libmyodbc5.so&#39;
&gt; &gt; # Using DRIVER_VER &#39;05.01.0010&#39;
&gt; &gt; # odbc_has_unicode 0
&gt; &gt; not ok 3 - ReadOnly set
&gt; &gt;
&gt; &gt; #   Failed test &#39;ReadOnly set&#39;
&gt; &gt; #   at t/02simple.t line 57.
&gt; &gt; #          got: &#39;0&#39;
&gt; &gt; #     expected: &#39;1&#39;
&gt; &gt; ok 4 - ReadOnly cleared
</div>&gt; 
&gt; In this case:
&gt; 
&gt; [ODBC][10959][1381322599.058070][SQLSetConnectAttr.c][321]
&gt;                             Entry:
&gt;                                     Connection = 0x9766b98
&gt;                                     Attribute = SQL_ATTR_ACCESS_MODE
&gt;                                     Value = 0x1
&gt;                         StrLen = -5
&gt; [ODBC][10959][1381322599.058101][SQLSetConnectAttr.c][675]
&gt;                 Exit:[SQL_SUCCESS]                 &lt;--- NOTE success
&gt; [ODBC][10959][1381322599.058148][SQLGetConnectAttr.c][285]
&gt;                             Entry:
&gt;                                     Connection = 0x9766b98
&gt;                                     Attribute = SQL_ATTR_ACCESS_MODE
&gt;                                     Value = 0xbf910c14
&gt;                                     Buffer Length = -5
&gt;                         StrLen = &#40;nil&#41;
&gt; [ODBC][10959][1381322599.058176][SQLGetConnectAttr.c][757]
&gt;                 Exit:[SQL_SUCCESS]
&gt; 
&gt; but value coming back was not 1 - so ODBC driver broken.
&gt; 
&gt; Chalk this one down to an ODBC driver issue. It can return
&gt; SQL_SUCCESS_WITH_INFO and option value changed &#40;i.e., it does not do
&gt; it&#41; or SQL_SUCCESS and it should return the value previous set.
&gt; 
&gt; Martin
</div>
I should have worked around this one in v 1.45 now. After discussion on dbi-dev and irc it was suggested that drivers which return SQL_SUCCCESS_WITH_INFO and option value changed should just cause DBD::ODBC to act like readonly is set and return that value if asked.

DBD::ODBC also issues a warning in this case but you need the most recent DBI release to get that.

I closing this now but by all means reopen if you find I&#39;m wrong.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;31&nbsp;05:04:03&nbsp;2013</span>
    <span class="description">bohica [...] ntlworld.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;31&nbsp;05:04:03&nbsp;2013</span>
    <span class="description">bohica [...] ntlworld.com -  Fixed in 1.45 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;31&nbsp;11:00:52&nbsp;2013</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Just to clear up this rt and re discussion on irc.

The problem with mysql was not the same as sqlite &#40;which I originally guessed it was and hence why I wrote this rt off with that explantion&#41;. In mysql&#39;s case it looks like a straight forward bug that if you set SQL_ACCESS_MODE to 1 then read it back again it is 0 and the setting returned SQL_SUCCESS not SQL_SUCCESS_WITH_INFO, option value changed.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
