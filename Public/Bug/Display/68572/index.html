<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #68572 for Compress-Bzip2: Build fails when using non-standard library locations</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #68572 for Compress-Bzip2: Build fails when using non-standard library locations</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Compress-Bzip2">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Compress-Bzip2">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Compress-Bzip2">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Compress-Bzip2">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Compress-Bzip2">Compress-Bzip2 CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">68572</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Compress-Bzip2">Compress-Bzip2</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">RURBAN [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
lfmunozmejias [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
LEONT [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-7544-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.09    </td>
  </tr>
  <tr id="CF-7545-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




perl-info<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/940931/489160/perl-info">
Tue May 31 12:48:40 2011 (28k) by lfmunozmejias [...] gmail.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=68572">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-940931" href="/Public/Bug/Display.html?id=68572#txn-940931">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;31&nbsp;12:48:40&nbsp;2011</span>
    <span class="description">lfmunozmejias [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Build fails when using non-standard library locations</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/940931/489159/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/489159">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have a bunch of Solaris systems that have Perl as shipped by OpenCSW.
Thus, the libraries are installed under /opt/csw/lib... In these
systems, Compress::Bzip2 fails to resolve the correct libperl or libbz2,
and thus everything breaks:

 $ ldd show_bzversion
        libperl.so =&gt;    &#40;file not found&#41;
        libbz2.so.1.0 =&gt;         &#40;file not found&#41;
        libc.so.1 =&gt;     /lib/libc.so.1
        libm.so.2 =&gt;     /lib/libm.so.2
        /platform/SUNW,Sun-Fire-V490/lib/libc_psr.so.1

I can solve it by adding &#34;LD_RUN_PATH=/opt/csw/lib&#34; to the make
invocation, but that doesn&#39;t work for the Makefile.PL, so it always
builds its own bz2 stuff, and doesn&#39;t fix the tests. For the tests, I&#39;d
need to run

make test LD_RUN_PATH=/opt/csw/lib

And it doesn&#39;t work for a CPAN installation, which is a pain. I attach
the output of perl -V:.* for better details. And LD_LIBRARY_PATH is not
an option.

It should rely on the -R /opt/csw/lib that is already present in
$Config{ccdldflags}, or in $Config{libpth} or $Config{libspath&#41;, but it
 doesn&#39;t and I don&#39;t find a good place to instruct Makefile.PL to use it.

I already have plenty of modules with shared objects that work and pass
their tests perfectly.

Thanks.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> perl-info</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/940931/489160/perl-info">Download perl-info</a><br />
<span class="downloadcontenttype">application/octet-stream 28k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1195161" href="/Public/Bug/Display.html?id=68572#txn-1195161">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;26&nbsp;20:07:21&nbsp;2013</span>
    <span class="description">RURBAN [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1195162" href="/Public/Bug/Display.html?id=68572#txn-1195162">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;26&nbsp;20:07:28&nbsp;2013</span>
    <span class="description">RURBAN [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1197131" href="/Public/Bug/Display.html?id=68572#txn-1197131">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;01&nbsp;11:27:01&nbsp;2013</span>
    <span class="description">RURBAN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1197131/631851/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/631851">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is fact an EUMM bug, 
LDDLFLAGS missing CCDLFLAGS.

I wonder how solaris or systems which rely on proper rpath&#39;s managed to install anything at all.
I&#39;ve fixed it in our Makefile.PL and added an EUMM bug 
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=84345">https://rt.cpan.org/Ticket/Display.html?id=84345</a></span>

On Tue May 31 12:48:40 2011, lfmunoz wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have a bunch of Solaris systems that have Perl as shipped by OpenCSW.
&gt; Thus, the libraries are installed under /opt/csw/lib... In these
&gt; systems, Compress::Bzip2 fails to resolve the correct libperl or libbz2,
&gt; and thus everything breaks:
&gt; 
&gt;  $ ldd show_bzversion
&gt;         libperl.so =&gt;    &#40;file not found&#41;
&gt;         libbz2.so.1.0 =&gt;         &#40;file not found&#41;
&gt;         libc.so.1 =&gt;     /lib/libc.so.1
&gt;         libm.so.2 =&gt;     /lib/libm.so.2
&gt;         /platform/SUNW,Sun-Fire-V490/lib/libc_psr.so.1
&gt; 
&gt; I can solve it by adding &#34;LD_RUN_PATH=/opt/csw/lib&#34; to the make
&gt; invocation, but that doesn&#39;t work for the Makefile.PL, so it always
&gt; builds its own bz2 stuff, and doesn&#39;t fix the tests. For the tests, I&#39;d
&gt; need to run
&gt; 
&gt; make test LD_RUN_PATH=/opt/csw/lib
&gt; 
&gt; And it doesn&#39;t work for a CPAN installation, which is a pain. I attach
&gt; the output of perl -V:.* for better details. And LD_LIBRARY_PATH is not
&gt; an option.
&gt; 
&gt; It should rely on the -R /opt/csw/lib that is already present in
&gt; $Config{ccdldflags}, or in $Config{libpth} or $Config{libspath&#41;, but it
&gt;  doesn&#39;t and I don&#39;t find a good place to instruct Makefile.PL to use it.
&gt; 
&gt; I already have plenty of modules with shared objects that work and pass
&gt; their tests perfectly.
&gt; 
&gt; Thanks.
</div>
-- 
Reini Urban
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1197134" href="/Public/Bug/Display.html?id=68572#txn-1197134">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;01&nbsp;11:27:02&nbsp;2013</span>
    <span class="description">RURBAN [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1197141" href="/Public/Bug/Display.html?id=68572#txn-1197141">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;01&nbsp;12:07:54&nbsp;2013</span>
    <span class="description">RURBAN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1197141/631858/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/631858">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 39b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed in 2.11, thanks!
-- 
Reini Urban
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1197144" href="/Public/Bug/Display.html?id=68572#txn-1197144">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;01&nbsp;12:07:55&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;patched&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1197145" href="/Public/Bug/Display.html?id=68572#txn-1197145">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;01&nbsp;12:07:55&nbsp;2013</span>
    <span class="description">RURBAN [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1198316" href="/Public/Bug/Display.html?id=68572#txn-1198316">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;04&nbsp;02:57:02&nbsp;2013</span>
    <span class="description">ppisar [...] redhat.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ppisar [...] redhat.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1198316/632569/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/632569">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 682b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dne Ãšt 31.KvÄ›ten.2011 12:48:40, lfmunoz napsal&#40;a&#41;:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  $ ldd show_bzversion
&gt;         libperl.so =&gt;    &#40;file not found&#41;
&gt;         libbz2.so.1.0 =&gt;         &#40;file not found&#41;
&gt;         libc.so.1 =&gt;     /lib/libc.so.1
&gt;         libm.so.2 =&gt;     /lib/libm.so.2
&gt;         /platform/SUNW,Sun-Fire-V490/lib/libc_psr.so.1
&gt; 
</div>This is wrongly configured perl. There is no reason why show_bzversion should be linked against perl if the only &#40;non-standard library&#41; symbol it uses is BZ2_bzlibVersion from bzip2.

Location of bzip2 library is questionable. I&#39;ve never used the bundled one, but I use system wide library, so I have no idea where Compress-Bzip2 should put the library to.

-- Petr
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1198319" href="/Public/Bug/Display.html?id=68572#txn-1198319">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;04&nbsp;02:57:04&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1198871" href="/Public/Bug/Display.html?id=68572#txn-1198871">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;05&nbsp;11:45:35&nbsp;2013</span>
    <span class="description">RURBAN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1198871/632906/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/632906">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Apr 04 02:57:02 2013, ppisar wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Dne Ãšt 31.KvÄ›ten.2011 12:48:40, lfmunoz napsal&#40;a&#41;:
<div class="message-stanza open">&gt; &gt;  $ ldd show_bzversion
&gt; &gt;         libperl.so =&gt;    &#40;file not found&#41;
&gt; &gt;         libbz2.so.1.0 =&gt;         &#40;file not found&#41;
&gt; &gt;         libc.so.1 =&gt;     /lib/libc.so.1
&gt; &gt;         libm.so.2 =&gt;     /lib/libm.so.2
&gt; &gt;         /platform/SUNW,Sun-Fire-V490/lib/libc_psr.so.1
&gt; &gt;
</div>&gt; This is wrongly configured perl. There is no reason why show_bzversion
&gt; should be linked against perl if the only &#40;non-standard library&#41;
&gt; symbol it uses is BZ2_bzlibVersion from bzip2.
&gt; 
&gt; Location of bzip2 library is questionable. I&#39;ve never used the bundled
&gt; one, but I use system wide library, so I have no idea where Compress-
&gt; Bzip2 should put the library to.
</div>
Hi,

Yes, we might link show_bzversion against libperl.so because we do not do a whole configure dance just to show the version of the linked bz2 library, 
and we need the perl configuration for any extra libpaths and rpaths to respect the configuration when perl was being installed, such as 
-R /opt/csw/lib.

If you use the system library the path needs to show up in the perl configuration &#40;lddflags and cccdlflags&#41;, so the linker can use it for Bzip2.so and show_bzversion. 
libperl.so is ignored yes, but must show up via ldd. 
If not your rpath setting is broken.

On my solaris cfg I have with e.g. gcc:
rurban@solaris:~/Perl/Compress-Bzip2$ ldd show_bzversion
        libbz2.so.1 =&gt;   /usr/lib/libbz2.so.1
        libssp.so.0 =&gt;   /usr/lib/libssp.so.0
        libc.so.1 =&gt;     /lib/libc.so.1
        libgcc_s.so.1 =&gt;         /usr/lib/libgcc_s.so.1
        libm.so.2 =&gt;     /lib/libm.so.2
or with cc:
rurban@solaris:~/Perl/Compress-Bzip2$ ldd show_bzversion
        libbz2.so.1 =&gt;   /usr/lib/64/libbz2.so.1
        libc.so.1 =&gt;     /lib/64/libc.so.1
        libm.so.2 =&gt;     /lib/64/libm.so.2

-- 
Reini Urban
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1198874" href="/Public/Bug/Display.html?id=68572#txn-1198874">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;05&nbsp;11:45:37&nbsp;2013</span>
    <span class="description">RURBAN [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1393446" href="/Public/Bug/Display.html?id=68572#txn-1393446">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;01&nbsp;10:42:49&nbsp;2014</span>
    <span class="description">RURBAN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1393446/740037/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/740037">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Apr 01 11:27:01 2013, RURBAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This is fact an EUMM bug,
&gt; LDDLFLAGS missing CCDLFLAGS.
</div>
Not really. EUMM told me it&#39;s a wrong perl configuration instead, and it seems right:

<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=84345">https://rt.cpan.org/Ticket/Display.html?id=84345</a></span>

&#34;ccdlflags is what you pass when linking executables, and lddlflags is what you pass when linking loadable-objects/shared-libraries. I suspect the correct solution is not that MakeMaker should add those ccdlflags, but that -R &lt;whatever&gt; should be added to that particular perl&#39;s configuration.&#34;

So LDDLFLAGS is wrong in your perl.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I wonder how solaris or systems which rely on proper rpath&#39;s managed
&gt; to install anything at all.
&gt;  I&#39;ve fixed it in our Makefile.PL and added an EUMM bug
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=84345">https://rt.cpan.org/Ticket/Display.html?id=84345</a></span>
&gt; 
&gt; On Tue May 31 12:48:40 2011, lfmunoz wrote:
<div class="message-stanza open">&gt; &gt; I have a bunch of Solaris systems that have Perl as shipped by
&gt; &gt; OpenCSW.
&gt; &gt; Thus, the libraries are installed under /opt/csw/lib... In these
&gt; &gt; systems, Compress::Bzip2 fails to resolve the correct libperl or
&gt; &gt; libbz2,
&gt; &gt; and thus everything breaks:
&gt; &gt;
&gt; &gt; $ ldd show_bzversion
&gt; &gt;        libperl.so =&gt;    &#40;file not found&#41;
&gt; &gt;        libbz2.so.1.0 =&gt;         &#40;file not found&#41;
&gt; &gt;        libc.so.1 =&gt;     /lib/libc.so.1
&gt; &gt;        libm.so.2 =&gt;     /lib/libm.so.2
&gt; &gt;        /platform/SUNW,Sun-Fire-V490/lib/libc_psr.so.1
&gt; &gt;
&gt; &gt; I can solve it by adding &#34;LD_RUN_PATH=/opt/csw/lib&#34; to the make
&gt; &gt; invocation, but that doesn&#39;t work for the Makefile.PL, so it always
&gt; &gt; builds its own bz2 stuff, and doesn&#39;t fix the tests. For the tests,
&gt; &gt; I&#39;d
&gt; &gt; need to run
&gt; &gt;
&gt; &gt; make test LD_RUN_PATH=/opt/csw/lib
&gt; &gt;
&gt; &gt; And it doesn&#39;t work for a CPAN installation, which is a pain. I
&gt; &gt; attach
&gt; &gt; the output of perl -V:.* for better details. And LD_LIBRARY_PATH is
&gt; &gt; not
&gt; &gt; an option.
&gt; &gt;
&gt; &gt; It should rely on the -R /opt/csw/lib that is already present in
&gt; &gt; $Config{ccdldflags}, or in $Config{libpth} or $Config{libspath&#41;, but
&gt; &gt; it
&gt; &gt;  doesn&#39;t and I don&#39;t find a good place to instruct Makefile.PL to use
&gt; &gt; it.
&gt; &gt;
&gt; &gt; I already have plenty of modules with shared objects that work and
&gt; &gt; pass
&gt; &gt; their tests perfectly.
</div></div>
-- 
Reini Urban
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1393447" href="/Public/Bug/Display.html?id=68572#txn-1393447">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;01&nbsp;10:42:50&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1393450" href="/Public/Bug/Display.html?id=68572#txn-1393450">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;01&nbsp;10:42:50&nbsp;2014</span>
    <span class="description">RURBAN [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1395458" href="/Public/Bug/Display.html?id=68572#txn-1395458">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;06&nbsp;18:44:48&nbsp;2014</span>
    <span class="description">LEONT [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1395458/740973/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/740973">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue May 31 12:48:40 2011, lfmunoz wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have a bunch of Solaris systems that have Perl as shipped by OpenCSW.
&gt; Thus, the libraries are installed under /opt/csw/lib... In these
&gt; systems, Compress::Bzip2 fails to resolve the correct libperl or libbz2,
&gt; and thus everything breaks:
&gt; 
&gt;  $ ldd show_bzversion
&gt;         libperl.so =&gt;    &#40;file not found&#41;
&gt;         libbz2.so.1.0 =&gt;         &#40;file not found&#41;
&gt;         libc.so.1 =&gt;     /lib/libc.so.1
&gt;         libm.so.2 =&gt;     /lib/libm.so.2
&gt;         /platform/SUNW,Sun-Fire-V490/lib/libc_psr.so.1
</div>
AFAICT show_bzversion should be compiled with ccdlflags anyway, that will add the correct -R flag.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I can solve it by adding &#34;LD_RUN_PATH=/opt/csw/lib&#34; to the make
&gt; invocation, but that doesn&#39;t work for the Makefile.PL, so it always
&gt; builds its own bz2 stuff, and doesn&#39;t fix the tests. For the tests, I&#39;d
&gt; need to run
&gt;
&gt; make test LD_RUN_PATH=/opt/csw/lib
</div>
All of this raises more questions than it answers. Could you provide the output of a clean make before Reini&#39;s fix, that will at least give some idea of what was going on.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; And it doesn&#39;t work for a CPAN installation, which is a pain. I attach
&gt; the output of perl -V:.* for better details. And LD_LIBRARY_PATH is not
&gt; an option.
</div>
Agreed.

Leon
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1395459" href="/Public/Bug/Display.html?id=68572#txn-1395459">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;06&nbsp;18:44:48&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1395470" href="/Public/Bug/Display.html?id=68572#txn-1395470">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;06&nbsp;19:56:05&nbsp;2014</span>
    <span class="description">RURBAN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1395470/740979/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/740979">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I agree with LEONT.

I&#39;ve added ccdlflags to show_bzversion also to be able to find non-standard libbz2.

Done with 2.18

On Wed Aug 06 18:44:48 2014, LEONT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue May 31 12:48:40 2011, lfmunoz wrote:
<div class="message-stanza open">&gt; &gt; I have a bunch of Solaris systems that have Perl as shipped by
&gt; &gt; OpenCSW.
&gt; &gt; Thus, the libraries are installed under /opt/csw/lib... In these
&gt; &gt; systems, Compress::Bzip2 fails to resolve the correct libperl or
&gt; &gt; libbz2,
&gt; &gt; and thus everything breaks:
&gt; &gt;
&gt; &gt; $ ldd show_bzversion
&gt; &gt;        libperl.so =&gt;    &#40;file not found&#41;
&gt; &gt;        libbz2.so.1.0 =&gt;         &#40;file not found&#41;
&gt; &gt;        libc.so.1 =&gt;     /lib/libc.so.1
&gt; &gt;        libm.so.2 =&gt;     /lib/libm.so.2
&gt; &gt;        /platform/SUNW,Sun-Fire-V490/lib/libc_psr.so.1
</div>&gt; 
&gt; AFAICT show_bzversion should be compiled with ccdlflags anyway, that
&gt; will add the correct -R flag.
&gt; 
<div class="message-stanza open">&gt; &gt; I can solve it by adding &#34;LD_RUN_PATH=/opt/csw/lib&#34; to the make
&gt; &gt; invocation, but that doesn&#39;t work for the Makefile.PL, so it always
&gt; &gt; builds its own bz2 stuff, and doesn&#39;t fix the tests. For the tests,
&gt; &gt; I&#39;d
&gt; &gt; need to run
&gt; &gt;
&gt; &gt; make test LD_RUN_PATH=/opt/csw/lib
</div>&gt; 
&gt; All of this raises more questions than it answers. Could you provide
&gt; the output of a clean make before Reini&#39;s fix, that will at least give
&gt; some idea of what was going on.
&gt; 
<div class="message-stanza open">&gt; &gt; And it doesn&#39;t work for a CPAN installation, which is a pain. I
&gt; &gt; attach
&gt; &gt; the output of perl -V:.* for better details. And LD_LIBRARY_PATH is
&gt; &gt; not
&gt; &gt; an option.
</div>&gt; 
&gt; Agreed.
&gt; 
&gt; Leon
</div>

-- 
Reini Urban
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1395473" href="/Public/Bug/Display.html?id=68572#txn-1395473">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;06&nbsp;19:56:06&nbsp;2014</span>
    <span class="description">RURBAN [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1395911" href="/Public/Bug/Display.html?id=68572#txn-1395911">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;07&nbsp;10:25:44&nbsp;2014</span>
    <span class="description">LEONT [...] cpan.org -  Cc LEONT added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.669602</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
