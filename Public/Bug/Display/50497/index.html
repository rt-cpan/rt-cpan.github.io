<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #50497 for Flickr-Upload: Pull my patches from git://git.nix.is/avar/pm/Flickr-Upload</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #50497 for Flickr-Upload: Pull my patches from git://git.nix.is/avar/pm/Flickr-Upload</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Flickr-Upload/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Flickr-Upload/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Flickr-Upload/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Flickr-Upload/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Flickr-Upload">Flickr-Upload CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">50497</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Flickr-Upload/Active/">Flickr-Upload</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
avar [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-13680-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.32    </td>
  </tr>
  <tr id="CF-13681-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;14&nbsp;14:05:24&nbsp;2009</span>
    <span class="description">avar [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Pull my patches from git://git.nix.is/avar/pm/Flickr-Upload</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">My repository at git://git.nix.is/avar/pm/Flickr-Upload has numerous 
improvements. Including a fix for RT#50493.

See here for a patch listing: <span class="clickylink"><a target="new" rel="nofollow" href="http://git.nix.is/?p=avar/pm/Flickr-">http://git.nix.is/?p=avar/pm/Flickr-</a></span>
Upload;a=summary

It includes the fix for <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=50493">https://rt.cpan.org/Ticket/Display.html?id=50493</a></span>

Attached is the output of git format-patch --stdout 
77f2d561665af0cef16b6623b0e5c8ea4f929816..
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> my-local-mods.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 6b2b1a87ccd4eabe66b28db56a2df7bf6e5f0f2b Mon Sep 17 00:00:00 2001
From: =?utf-8?q?=C3=86var=20Arnfj=C3=B6r=C3=B0=20Bjarmason?= &lt;avarab@gmail.com&gt;
Date: Wed, 14 Oct 2009 17:12:00 +0000
Subject: [PATCH 1/5] Solve RT#50493. Sometimes Flickr::Upload will die during upload due to network errors.

Before it would do this:

    Uploading img_4289.jpg...
    junk &#39;500 read failed: Connection reset by peer
    &#39; before XML element

and simply die. Now it&#39;ll try again in case of errors:

    Uploading img_4289.jpg...
    Failed uploading attempt attempt 1/3, trying again. [...]
    Uploading img_4289.jpg...
---
 Upload.pm              |   27 +++++++++++++++++----
 t/failupload_timeout.t |   60 ++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 82 insertions&#40;+&#41;, 5 deletions&#40;-&#41;
 create mode 100644 t/failupload_timeout.t

diff --git a/Upload.pm b/Upload.pm
index 69e7e63..048e0f5 100644
--- a/Upload.pm
+++ b/Upload.pm
@@ -268,11 +268,28 @@ sub upload_request {
 	my $req = shift;
 	die &#34;expecting a HTTP::Request&#34; unless $req-&gt;isa&#40;&#39;HTTP::Request&#39;&#41;;
 
-	my $res = $self-&gt;request&#40; $req &#41;;
-	return &#40;&#41; unless defined $res;
+	# Try 3 times to upload data. Without this flickr_upload is bound
+	# to die on large uploads due to some miscellaneous network
+	# issues. Timeouts on flickr or something else.
+	my &#40;$res, $tree&#41;;
+	my $tries = 3;
+	for my $try &#40;1 .. $tries&#41; {
+		# Try to upload
+		$res = $self-&gt;request&#40; $req &#41;;
+		return &#40;&#41; unless defined $res;
+
+		if &#40;$res-&gt;is_success&#41; {
+			$tree = XML::Parser::Lite::Tree::instance&#40;&#41;-&gt;parse&#40;$res-&gt;decoded_content&#40;&#41;&#41;;
+			return &#40;&#41; unless defined $tree;
+			last;
+		} else {
+			my $what_next = &#40;$try == $tries ? &#34;giving up&#34; : &#34;trying again&#34;&#41;;
+			my $status = $res-&gt;status_line;
 
-	my $tree = XML::Parser::Lite::Tree::instance&#40;&#41;-&gt;parse&#40;$res-&gt;decoded_content&#40;&#41;&#41;;
-	return &#40;&#41; unless defined $tree;
+			print STDERR &#34;Failed uploading attempt attempt $try/$tries, $what_next. Message from server was: &#39;$status&#39;\n&#34;;
+			next;
+		}
+	}
 
 	my $photoid = response_tag&#40;$tree, &#39;rsp&#39;, &#39;photoid&#39;&#41;;
 	my $ticketid = response_tag&#40;$tree, &#39;rsp&#39;, &#39;ticketid&#39;&#41;;
diff --git a/t/failupload_timeout.t b/t/failupload_timeout.t
new file mode 100644
index 0000000..1cbcfd7
--- /dev/null
+++ b/t/failupload_timeout.t
@@ -0,0 +1,60 @@
+no strict &#39;refs&#39;;
+no warnings &#39;redefine&#39;;
+use Test::More qw&#40;no_plan&#41;;
+BEGIN { use_ok&#40;&#39;Flickr::Upload&#39;&#41; };
+
+# Overwrite LWP::UserAgent::request to emulate the server closing the
+# connection on us. Which can happen e.g. if the network sucks or if
+# we C-z flickr_upload
+
+BEGIN {
+	our $old_request = *{&#34;LWP::UserAgent::request&#34;}{CODE};
+	our $times = 0;
+}
+
+sub LWP::UserAgent::request {
+	$times ++;
+
+	# Return the real LWP::UserAgent::request
+	if &#40;$times == 3&#41; {
+		*LWP::UserAgent::request = $old_request;
+		goto &#38;LWP::UserAgent::request;
+	}
+
+	bless&#40;{
+		_content =&gt; &#34;500 Server closed connection without sending any data back\n&#34;,
+		_headers =&gt; bless&#40;{
+			&#34;client-date&#34;	 =&gt; &#34;Wed, 14 Oct 2009 14:44:46 GMT&#34;,
+			&#34;client-warning&#34; =&gt; &#34;Internal response&#34;,
+			&#34;content-type&#34;	 =&gt; &#34;text/plain&#34;,
+		}, &#34;HTTP::Headers&#34;&#41;,
+		_msg =&gt; &#34;Server closed connection without sending any data back&#34;,
+		_rc =&gt; 500,
+		_request =&gt; &#39;fix&#39;,
+	}, &#34;HTTP::Response&#34;&#41;,
+}
+
+my $api_key = &#39;8dcf37880da64acfe8e30bb1091376b7&#39;;
+my $not_so_secret = &#39;2f3695d0562cdac7&#39;;
+
+# grab auth token. If none, fail nicely.
+my $pw = &#39;******&#39;;
+open&#40; F, &#39;&lt;&#39;, &#39;t/password&#39; &#41; || &#40;print STDERR &#34;No password file\n&#34; &#38;&#38; exit 0&#41;;
+$pw = &lt;F&gt;;
+chomp $pw;
+close F;
+
+my $ua = Flickr::Upload-&gt;new&#40;{&#39;key&#39;=&gt;$api_key, &#39;secret&#39;=&gt;$not_so_secret}&#41;;
+ok&#40;defined $ua&#41;;
+
+my $rc = $ua-&gt;upload&#40;
+	&#39;photo&#39; =&gt; &#39;t/testimage.jpg&#39;,
+	&#39;auth_token&#39; =&gt; $pw,
+	&#39;tags&#39; =&gt; &#34;test kernel perl cat dog&#34;,
+	&#39;description&#39; =&gt; &#34;Flickr Upload test for $0&#34;,
+	&#39;is_public&#39; =&gt; 0,
+	&#39;is_friend&#39; =&gt; 0,
+	&#39;is_family&#39; =&gt; 0,
+&#41;;
+
+ok&#40; defined $rc &#41;;
-- 
1.6.2


From 27a4da0cbd6b5556069d7007f692c7c888b6f325 Mon Sep 17 00:00:00 2001
From: =?utf-8?q?=C3=86var=20Arnfj=C3=B6r=C3=B0=20Bjarmason?= &lt;avarab@gmail.com&gt;
Date: Wed, 14 Oct 2009 17:32:11 +0000
Subject: [PATCH 2/5] &#34;git-log&#34; has been deprecated in favor of &#34;git log&#34;

---
 Makefile.PL |    2 +-
 1 files changed, 1 insertions&#40;+&#41;, 1 deletions&#40;-&#41;

diff --git a/Makefile.PL b/Makefile.PL
index cef266a..322c87b 100644
--- a/Makefile.PL
+++ b/Makefile.PL
@@ -3,7 +3,7 @@ use ExtUtils::MakeMaker;
 sub MY::postamble {
 	return &lt;&lt;END;
 ChangeLog: Makefile
-	git-log --pretty=fuller --decorate . &gt;ChangeLog
+	git log --pretty=fuller --decorate . &gt;ChangeLog
 
 META.yml: Makefile
 	touch META.yml
-- 
1.6.2


From 8d8f04c98438c938ee9894c33cfc2f4a2d0d7ae5 Mon Sep 17 00:00:00 2001
From: =?utf-8?q?=C3=86var=20Arnfj=C3=B6r=C3=B0=20Bjarmason?= &lt;avarab@gmail.com&gt;
Date: Wed, 14 Oct 2009 17:45:41 +0000
Subject: [PATCH 3/5] Add a --report switch to suppress the &#34;Waiting for upload results&#34; message

Also add a facility to allow the default of --progress and --report to
be changed via the ~/.flickrrc configuration file.
---
 flickr_upload |   54 ++++++++++++++++++++++++++++++++++++++----------------
 1 files changed, 38 insertions&#40;+&#41;, 16 deletions&#40;-&#41;

diff --git a/flickr_upload b/flickr_upload
index 321ad8c..88f81f8 100755
--- a/flickr_upload
+++ b/flickr_upload
@@ -17,6 +17,7 @@ my $man = 0;
 my $auth = 0;
 my $progress = 0;
 my $check = 0;
+my $report = 1;
 
 if&#40; open CONFIG, &#34;&lt; $ENV{HOME}/.flickrrc&#34; &#41; {
 	while&#40; &lt;CONFIG&gt; &#41; {
@@ -28,6 +29,10 @@ if&#40; open CONFIG, &#34;&lt; $ENV{HOME}/.flickrrc&#34; &#41; {
 			$api_key = $2;
 		} elsif&#40; $1 eq &#34;secret&#34; &#41; {
 			$not_so_secret = $2;
+		} elsif&#40; $1 eq &#34;progress&#34; &#41; {
+			$progress = $2;
+		} elsif&#40; $1 eq &#34;report&#34; &#41; {
+			$report = $2;
 		} else {
 			$args{$1} = $2;
 		}
@@ -51,6 +56,7 @@ GetOptions&#40;
 	&#39;auth&#39; =&gt; \$auth,
 	&#39;progress&#39; =&gt; \$progress,
 	&#39;check&#39; =&gt; \$check,
+	&#39;report&#39; =&gt; \$report,
 	&#39;option=s&#39; =&gt; \%args,
 &#41; or pod2usage&#40;2&#41;;
 pod2usage&#40;1&#41; if $help;
@@ -170,24 +176,26 @@ while&#40; my $photo = shift @ARGV &#41; {
 }
 
 # check
-print &#34;Waiting for upload results &#40;ctrl-C if you don&#39;t care&#41;...\n&#34;;
-do {
-	sleep 1;
-	my @checked = $ua-&gt;check_upload&#40; keys %tickets &#41;;
-	for&#40; @checked &#41; {
-		if&#40; $_-&gt;{complete} == 0 &#41; {
-			# not done yet, don&#39;t do anythig
-		} elsif&#40; $_-&gt;{complete} == 1 &#41; {
-			# uploaded, got photoid
-			print &#34;$tickets{$_-&gt;{id}} is at &#34; .
+if&#40; $report &#41; {
+	print &#34;Waiting for upload results &#40;ctrl-C if you don&#39;t care&#41;...\n&#34;;
+	do {
+		sleep 1;
+		my @checked = $ua-&gt;check_upload&#40; keys %tickets &#41;;
+		for&#40; @checked &#41; {
+			if&#40; $_-&gt;{complete} == 0 &#41; {
+				# not done yet, don&#39;t do anythig
+			} elsif&#40; $_-&gt;{complete} == 1 &#41; {
+				# uploaded, got photoid
+				print &#34;$tickets{$_-&gt;{id}} is at &#34; .
 				&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.flickr.com/tools/uploader_edit.gne?ids=$_-">http://www.flickr.com/tools/uploader_edit.gne?ids=$_-</a></span>&gt;{photoid}\n&#34;;
-			delete $tickets{$_-&gt;{id}};
-		} else {
-			print &#34;$tickets{$_-&gt;{id}} failed to get photoid\n&#34;;
-			delete $tickets{$_-&gt;{id}};
+				delete $tickets{$_-&gt;{id}};
+			} else {
+				print &#34;$tickets{$_-&gt;{id}} failed to get photoid\n&#34;;
+				delete $tickets{$_-&gt;{id}};
+			}
 		}
-	}
-} while&#40; %tickets &#41;;
+	} while&#40; %tickets &#41;;
+}
 
 exit 0;
 
@@ -372,6 +380,20 @@ upload an image. The output is the raw results of the API call.
 Display a progress bar for each upload with L&lt;Term::ProgressBar&gt;. That
 optional module will have to be installed on the system.
 
+The default can be changed in the configuration file:
+
+    echo progress=1 &gt;~/.flickrrc
+
+=item --report
+
+Report the status of each upload ticket after uploading the batch via
+L&lt;Flickr::Upload&#39;s check_upload
+method|Flickr::Upload/check_upload&gt;. On by default.
+
+The default can be changed in the configuration file:
+
+    echo progress=0 &gt;~/.flickrrc
+
 =item --key &lt;api_key&gt;
 
 =item --secret &lt;secret&gt;
-- 
1.6.2


From d9ccd247ca8b59e3e10329c6b4533c97a9ef0d30 Mon Sep 17 00:00:00 2001
From: =?utf-8?q?=C3=86var=20Arnfj=C3=B6r=C3=B0=20Bjarmason?= &lt;avarab@gmail.com&gt;
Date: Wed, 14 Oct 2009 17:50:41 +0000
Subject: [PATCH 4/5] Make --progress and --report boolean &#40;!&#41; switches in Getopt::Long

This means --no-report and --no-progress can be specified as well as
--report and --progress.
---
 flickr_upload |   14 ++++++++------
 1 files changed, 8 insertions&#40;+&#41;, 6 deletions&#40;-&#41;

diff --git a/flickr_upload b/flickr_upload
index 88f81f8..e28688f 100755
--- a/flickr_upload
+++ b/flickr_upload
@@ -54,9 +54,9 @@ GetOptions&#40;
 	&#39;key=s&#39; =&gt; \$api_key,
 	&#39;secret=s&#39; =&gt; \$not_so_secret,
 	&#39;auth&#39; =&gt; \$auth,
-	&#39;progress&#39; =&gt; \$progress,
+	&#39;progress!&#39; =&gt; \$progress,
 	&#39;check&#39; =&gt; \$check,
-	&#39;report&#39; =&gt; \$report,
+	&#39;report!&#39; =&gt; \$report,
 	&#39;option=s&#39; =&gt; \%args,
 &#41; or pod2usage&#40;2&#41;;
 pod2usage&#40;1&#41; if $help;
@@ -375,22 +375,24 @@ Checks the authentication token via the flickr.auth.checkToken API call.
 This can be used to verify API keys and credentials without trying to
 upload an image. The output is the raw results of the API call.
 
-=item --progress
+=item --progress, --no-progress
 
 Display a progress bar for each upload with L&lt;Term::ProgressBar&gt;. That
 optional module will have to be installed on the system.
 
-The default can be changed in the configuration file:
+The default is not to display a progress bar. That can be changed in
+the configuration file:
 
     echo progress=1 &gt;~/.flickrrc
 
-=item --report
+=item --report, --no-report
 
 Report the status of each upload ticket after uploading the batch via
 L&lt;Flickr::Upload&#39;s check_upload
 method|Flickr::Upload/check_upload&gt;. On by default.
 
-The default can be changed in the configuration file:
+The default is to display a report after each upload. That can be
+changed in the configuration file:
 
     echo progress=0 &gt;~/.flickrrc
 
-- 
1.6.2


From 5c210ab9bac949075c6a46d5d87718c79f3d6551 Mon Sep 17 00:00:00 2001
From: =?utf-8?q?=C3=86var=20Arnfj=C3=B6r=C3=B0=20Bjarmason?= &lt;avarab@gmail.com&gt;
Date: Wed, 14 Oct 2009 17:58:20 +0000
Subject: [PATCH 5/5] Add myself to AUTHORS/COPYRIGHT

---
 Upload.pm     |    7 +++++--
 flickr_upload |    4 +++-
 2 files changed, 8 insertions&#40;+&#41;, 3 deletions&#40;-&#41;

diff --git a/Upload.pm b/Upload.pm
index 048e0f5..c97a917 100644
--- a/Upload.pm
+++ b/Upload.pm
@@ -410,15 +410,18 @@ L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://flickr.com/services/api/">http://flickr.com/services/api/</a></span>&gt;
 
 L&lt;Flickr::API&gt;
 
-=head1 AUTHOR
+=head1 AUTHORS
 
 Christophe Beauregard, L&lt;cpb@cpan.org&gt;
 
+E&lt;AElig&gt;var ArnfjE&lt;ouml&gt;rE&lt;eth&gt; Bjarmason, &lt;avar@cpan.org&gt;
+
 =head1 COPYRIGHT AND LICENSE
 
 This module is not an official Flickr.com &#40;or Ludicorp, or Yahoo&#41; service.
 
-Copyright &#40;C&#41; 2004,2005 by Christophe Beauregard
+Copyright &#40;C&#41; 2004-2008 by Christophe Beauregard and 2008-2009 by
+E&lt;AElig&gt;var ArnfjE&lt;ouml&gt;rE&lt;eth&gt; Bjarmason
 
 This library is free software; you can redistribute it and/or modify
 it under the same terms as Perl itself, either Perl version 5.8.3 or,
diff --git a/flickr_upload b/flickr_upload
index e28688f..bf4c2a0 100755
--- a/flickr_upload
+++ b/flickr_upload
@@ -469,10 +469,12 @@ your Flickr profile. You may want to do all that stuff in one place.
 
 Error handling could be better.
 
-=head1 AUTHOR
+=head1 AUTHORS
 
 Christophe Beauregard, L&lt;cpb@cpan.org&gt;.
 
+E&lt;AElig&gt;var ArnfjE&lt;ouml&gt;rE&lt;eth&gt; Bjarmason, &lt;avar@cpan.org&gt;.
+
 =head1 SEE ALSO
 
 L&lt;flickr.com&gt;
-- 
1.6.2

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;24&nbsp;16:07:32&nbsp;2014</span>
    <span class="description">SSEVERIN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">All of this appears to have been incorporated in the 1.4 release.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;24&nbsp;16:07:32&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;24&nbsp;16:07:33&nbsp;2014</span>
    <span class="description">SSEVERIN [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
