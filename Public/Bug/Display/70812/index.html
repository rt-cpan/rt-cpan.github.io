<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #70812 for Geo-CountryFlags: File::SafeDO is required during Makefile.PL so install fails</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #70812 for Geo-CountryFlags: File::SafeDO is required during Makefile.PL so install fails</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Geo-CountryFlags/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Geo-CountryFlags/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Geo-CountryFlags/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Geo-CountryFlags/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Geo-CountryFlags">Geo-CountryFlags CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">70812</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Geo-CountryFlags/Active/">Geo-CountryFlags</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
RWSTAUNER [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-14452-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.01    </td>
  </tr>
  <tr id="CF-14453-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;08&nbsp;10:49:09&nbsp;2011</span>
    <span class="description">RWSTAUNER [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> File::SafeDO is required during Makefile.PL so install fails</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">While File::SafeDO is reported as a prereq in Makefile.PL and META.yml,
the Makefile.PL also attempts to load the included Util.pm which
requires the file so the installation dies during Makefile.PL.

File::SafeDO must be explicitly installed before Geo::CountryFlags.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;08&nbsp;14:36:26&nbsp;2011</span>
    <span class="description">michael [...] bizsystems.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Sep 08 10:49:09 2011, RWSTAUNER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; While File::SafeDO is reported as a prereq in Makefile.PL and META.yml,
&gt; the Makefile.PL also attempts to load the included Util.pm which
&gt; requires the file so the installation dies during Makefile.PL.
&gt; 
&gt; File::SafeDO must be explicitly installed before Geo::CountryFlags.
</div>
So install it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;08&nbsp;14:36:27&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;08&nbsp;14:36:27&nbsp;2011</span>
    <span class="description">michael [...] bizsystems.com -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;08&nbsp;14:49:54&nbsp;2011</span>
    <span class="description">RWSTAUNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Sep 08 11:36:26 2011, MIKER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Thu Sep 08 10:49:09 2011, RWSTAUNER wrote:
<div class="message-stanza open">&gt; &gt; While File::SafeDO is reported as a prereq in Makefile.PL and META.yml,
&gt; &gt; the Makefile.PL also attempts to load the included Util.pm which
&gt; &gt; requires the file so the installation dies during Makefile.PL.
&gt; &gt; 
&gt; &gt; File::SafeDO must be explicitly installed before Geo::CountryFlags.
</div>&gt; 
&gt; So install it.
</div>
I did.

I just thought it wasn&#39;t very cpan-like &#40;or user-friendly&#41; to make
someone scan the warnings of a failed install &#40;possibly try to figure
out why it didn&#39;t work&#41; and then run a separate cpan command to install
something they don&#39;t know they needed.

That makes this module less-installable by automated tools &#40;though I do
see that cpanminus has explicit provisions to work around this sort of
thing&#41;.

I just thought I&#39;d point it out in case you didn&#39;t realize.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;08&nbsp;14:49:55&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;08&nbsp;14:50:16&nbsp;2011</span>
    <span class="description">RWSTAUNER [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;08&nbsp;14:59:59&nbsp;2011</span>
    <span class="description">michael [...] insulin-pumpers.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #70812] File::SafeDO is required during Makefile.PL so install fails </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 08 Sep 2011 12:00:06 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Geo-CountryFlags [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> michael [...] insulin-pumpers.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Geo-CountryFlags
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=70812">https://rt.cpan.org/Ticket/Display.html?id=70812</a></span> &gt;
&gt; 
&gt; On Thu Sep 08 11:36:26 2011, MIKER wrote:
<div class="message-stanza open">&gt; &gt; On Thu Sep 08 10:49:09 2011, RWSTAUNER wrote:
<div class="message-stanza open">&gt; &gt; &gt; While File::SafeDO is reported as a prereq in Makefile.PL and
&gt; &gt; &gt; META.yml, the Makefile.PL also attempts to load the included
&gt; &gt; &gt; Util.pm which requires the file so the installation dies during
&gt; &gt; &gt; Makefile.PL.
&gt; &gt; &gt; 
&gt; &gt; &gt; File::SafeDO must be explicitly installed before
&gt; &gt; &gt; Geo::CountryFlags.
</div>&gt; &gt; 
&gt; &gt; So install it.
</div>&gt; 
&gt; I did.
&gt; 
&gt; I just thought it wasn&#39;t very cpan-like &#40;or user-friendly&#41; to make
&gt; someone scan the warnings of a failed install &#40;possibly try to figure
&gt; out why it didn&#39;t work&#41; and then run a separate cpan command to
&gt; install something they don&#39;t know they needed.
&gt; 
&gt; That makes this module less-installable by automated tools &#40;though I
&gt; do see that cpanminus has explicit provisions to work around this sort
&gt; of thing&#41;.
&gt; 
&gt; I just thought I&#39;d point it out in case you didn&#39;t realize.
</div>
hmmm.... what would you suggest? I have many modules that have 
dependencies and I run into this situation when using other peoples 
modules as well. I did an install of a module yesterday that had 4 
dependencies, each of those combined had another dozen dependencies, 
it took a couple of hours to get it all done, so I see your point. I 
just don&#39;t have a good solution.

Michael
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;08&nbsp;15:00:00&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;08&nbsp;20:02:58&nbsp;2011</span>
    <span class="description">RWSTAUNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; hmmm.... what would you suggest? I have many modules that have 
&gt; dependencies and I run into this situation when using other peoples 
&gt; modules as well. I did an install of a module yesterday that had 4 
&gt; dependencies, each of those combined had another dozen dependencies, 
&gt; it took a couple of hours to get it all done, so I see your point. I 
&gt; just don&#39;t have a good solution.
&gt; 
&gt; Michael
</div>
It&#39;s expected that a module may have prereqs
but typically the cpan* installers can resolve them automatically.  I
recall previously finding dists that use their own modules during
Makefile.PL &#40;and therefore attempt to use prereqs before being able to
declare them&#41;, though if you said you had &#40;found others out there like
this&#41; I&#39;d certainly believe it.

It just now occurred to me that this is what the &#39;configure_requires&#39;
key is for in the CPAN::Meta file.

Applying the attached patch works for me.
According to the CPAN.pm change log it should work starting with cpan
1.91_51 which is from 2007-07-07 &#40;stable 1.92 as of 2007-09-15&#41;.

The patch upgrades the META.yml to version 1.4 of the spec &#40;where
configure_requires was introduced&#41; and adds File::SafeDO in
&#39;configure_requires&#39;.  Prereqs listed there are attempted to be resolved
before running Makefile.PL.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Geo-CountryFlags-configure_requires.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- Geo-CountryFlags-1.01-4TL9Sr/META.yml	2008-10-16 19:58:36.000000000 -0700
+++ Geo-CountryFlags-1.01/META.yml	2011-09-08 16:35:37.942004745 -0700
@@ -6,9 +6,11 @@ license:             ~
 author:              ~
 generated_by:        ExtUtils::MakeMaker version 6.42
 distribution_type:   module
+configure_requires:
+    File::SafeDO:                  0.11
 requires:     
     File::SafeDO:                  0.11
     LWP::Simple:                   0
 meta-spec:
-    url:     <span class="clickylink"><a target="new" rel="nofollow" href="http://module-build.sourceforge.net/META-spec-v1.3.html">http://module-build.sourceforge.net/META-spec-v1.3.html</a></span>
-    version: 1.3
+    url:     <span class="clickylink"><a target="new" rel="nofollow" href="http://module-build.sourceforge.net/META-spec-v1.4.html">http://module-build.sourceforge.net/META-spec-v1.4.html</a></span>
+    version: 1.4
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;11&nbsp;18:50:35&nbsp;2011</span>
    <span class="description">michael [...] bizsystems.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Interesting.... the META.yml that is in the CPAN distro already includes
the prereqs you propose below. Perhaps your system regenerated it
without File::SafeDo for some reason???

On Thu Sep 08 20:02:58 2011, RWSTAUNER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; hmmm.... what would you suggest? I have many modules that have 
&gt; &gt; dependencies and I run into this situation when using other peoples 
&gt; &gt; modules as well. I did an install of a module yesterday that had 4 
&gt; &gt; dependencies, each of those combined had another dozen dependencies, 
&gt; &gt; it took a couple of hours to get it all done, so I see your point. I 
&gt; &gt; just don&#39;t have a good solution.
&gt; &gt; 
&gt; &gt; Michael
</div>&gt; 
&gt; It&#39;s expected that a module may have prereqs
&gt; but typically the cpan* installers can resolve them automatically.  I
&gt; recall previously finding dists that use their own modules during
&gt; Makefile.PL &#40;and therefore attempt to use prereqs before being able to
&gt; declare them&#41;, though if you said you had &#40;found others out there like
&gt; this&#41; I&#39;d certainly believe it.
&gt; 
&gt; It just now occurred to me that this is what the &#39;configure_requires&#39;
&gt; key is for in the CPAN::Meta file.
&gt; 
&gt; Applying the attached patch works for me.
&gt; According to the CPAN.pm change log it should work starting with cpan
&gt; 1.91_51 which is from 2007-07-07 &#40;stable 1.92 as of 2007-09-15&#41;.
&gt; 
&gt; The patch upgrades the META.yml to version 1.4 of the spec &#40;where
&gt; configure_requires was introduced&#41; and adds File::SafeDO in
&gt; &#39;configure_requires&#39;.  Prereqs listed there are attempted to be resolved
&gt; before running Makefile.PL.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;11&nbsp;18:50:36&nbsp;2011</span>
    <span class="description">michael [...] bizsystems.com -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;11&nbsp;19:12:12&nbsp;2011</span>
    <span class="description">RWSTAUNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Nov 11 16:50:35 2011, MIKER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Interesting.... the META.yml that is in the CPAN distro already includes
&gt; the prereqs you propose below. Perhaps your system regenerated it
&gt; without File::SafeDo for some reason???
&gt;
</div>
The current release on CPAN includes those in the &#39;requires&#39; section but
not in &#39;configure_requires&#39; which is what I was proposing:

<span class="clickylink"><a target="new" rel="nofollow" href="http://cpansearch.perl.org/src/MIKER/Geo-CountryFlags-1.01/META.yml">http://cpansearch.perl.org/src/MIKER/Geo-CountryFlags-1.01/META.yml</a></span>

they should also be declared in &#39;configure_requires&#39; in order for the
cpan client to install them before attempting the Makefile.PL
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;11&nbsp;19:12:13&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;11&nbsp;19:43:14&nbsp;2011</span>
    <span class="description">michael [...] bizsystems.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes, I understand. However the behavior that causes the auto-build
difficulty is an apparent flaw in CPAN.pm that is present up through
perl 5.12 distro and fixed thereafter. Patching META.yml is not
satisfactory to me as it is auto generated by ExtUtils::MakeMaker and
&#34;config_requires&#34; is deprecated in recent versions of CPAN::Meta::Spec

I would prefer not to mess with this.

On Fri Nov 11 19:12:12 2011, RWSTAUNER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri Nov 11 16:50:35 2011, MIKER wrote:
<div class="message-stanza open">&gt; &gt; Interesting.... the META.yml that is in the CPAN distro already includes
&gt; &gt; the prereqs you propose below. Perhaps your system regenerated it
&gt; &gt; without File::SafeDo for some reason???
&gt; &gt;
</div>&gt; 
&gt; The current release on CPAN includes those in the &#39;requires&#39; section but
&gt; not in &#39;configure_requires&#39; which is what I was proposing:
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://cpansearch.perl.org/src/MIKER/Geo-CountryFlags-1.01/META.yml">http://cpansearch.perl.org/src/MIKER/Geo-CountryFlags-1.01/META.yml</a></span>
&gt; 
&gt; they should also be declared in &#39;configure_requires&#39; in order for the
&gt; cpan client to install them before attempting the Makefile.PL
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;11&nbsp;19:43:15&nbsp;2011</span>
    <span class="description">michael [...] bizsystems.com -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
