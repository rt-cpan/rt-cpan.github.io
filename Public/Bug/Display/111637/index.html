<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #111637 for ExtUtils-ModuleMaker: Not safe against parallel runs?</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #111637 for ExtUtils-ModuleMaker: Not safe against parallel runs?</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=ExtUtils-ModuleMaker">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=ExtUtils-ModuleMaker">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=ExtUtils-ModuleMaker">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=ExtUtils-ModuleMaker">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/ExtUtils-ModuleMaker">ExtUtils-ModuleMaker CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">111637</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=ExtUtils-ModuleMaker">ExtUtils-ModuleMaker</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">jkeenan [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
SREZIC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
ribasushi [...] leporine.io

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-12500-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.55    </td>
  </tr>
  <tr id="CF-12501-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.58    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




0001-Document-safety-limitations-of-File-Save-Home.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1713079/920431/0001-Document-safety-limitations-of-File-Save-Home.patch">
Wed Mar 29 09:45:15 2017 (3.3k) by jkeenan [...] cpan.org
</a>
</font></li>
</ul>


test-modulemaker-makefile-pl.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1762930/948759/test-modulemaker-makefile-pl.diff">
Thu Dec 21 12:07:45 2017 (1017b) by jkeenan [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=111637">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1590039" href="/Public/Bug/Display.html?id=111637#txn-1590039">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;01&nbsp;15:13:38&nbsp;2016</span>
    <span class="description">SREZIC [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Not safe against parallel runs?</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1590039/850081/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/850081">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 615b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">There&#39;s a number of test failures visible at <span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=ExtUtils-ModuleMaker%200.55">http://matrix.cpantesters.org/?dist=ExtUtils-ModuleMaker%200.55</a></span> and I suspect that these fails are caused by parallel test runs &#40;e.g. ANDK&#39;s smoker is known to test for many perl versions in parallel on the same machine&#41;.

The list of tests which fail may be seen in the top regression list at
<span class="clickylink"><a target="new" rel="nofollow" href="http://analysis.cpantesters.org/solved?distv=ExtUtils-ModuleMaker-0.55">http://analysis.cpantesters.org/solved?distv=ExtUtils-ModuleMaker-0.55</a></span>

I think the problem is that some of the test scripts write to ~/.modulemaker/ExtUtils/ModuleMaker/Personal/Defaults.pm
If it is so, maybe you should just fake a unique temporary HOME directory for tests?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1590053" href="/Public/Bug/Display.html?id=111637#txn-1590053">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;01&nbsp;15:36:39&nbsp;2016</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1590053/850089/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/850089">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2016-02-01 15:13:38, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There&#39;s a number of test failures visible at
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=ExtUtils-ModuleMaker%200.55">http://matrix.cpantesters.org/?dist=ExtUtils-ModuleMaker%200.55</a></span> and I
&gt; suspect that these fails are caused by parallel test runs &#40;e.g. ANDK&#39;s
&gt; smoker is known to test for many perl versions in parallel on the same
&gt; machine&#41;.
&gt; 
&gt; The list of tests which fail may be seen in the top regression list at
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://analysis.cpantesters.org/solved?distv=ExtUtils-ModuleMaker-0.55">http://analysis.cpantesters.org/solved?distv=ExtUtils-ModuleMaker-0.55</a></span>
&gt; 
&gt; I think the problem is that some of the test scripts write to
&gt; ~/.modulemaker/ExtUtils/ModuleMaker/Personal/Defaults.pm
&gt; If it is so, maybe you should just fake a unique temporary HOME
&gt; directory for tests?
</div>
It seems that worse things can happen: I observed that ExtUtils-ModuleMaker together with File-Save-Home tried to delete the whole system. Here excerpts from the log:

...
  JKEENAN/ExtUtils-ModuleMaker-0.55.tar.gz
  /usr/bin/make -- OK
Running make test
PERL_DL_NONLAZY=1 &#34;/bbbike/perl-5.20.1D/bin/perl&#34; &#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/01_ini.t t/03_q
uick.t t/04_compact.t t/05_abstract.t t/06_build.t t/07_proxy.t t/10_standard_text.t t/13_alt_block_new_method.t t/14_mmkr_alt_block_new_method.t t/failsafe/201.t t/failsafe/202.t t/failsafe/
203.t t/failsafe/204.t t/failsafe/205.t t/failsafe/206.t t/failsafe/207.t t/failsafe/208.t t/failsafe/209.t t/failsafe/210.t t/failsafe/211.t t/license/apache.t t/license/apache_1_1.t t/licen
se/artistic.t t/license/artistic_agg.t t/license/bsd.t t/license/gpl.t t/license/gpl_2.t t/license/ibm.t t/license/ibm_1_0.t t/license/intel.t t/license/jabber.t t/license/jabber_1_0.t t/lice
nse/lgpl.t t/license/lgpl_2_1.t t/license/libpng.t t/license/looselips.t t/license/mit.t t/license/mitre.t t/license/mozilla.t t/license/mozilla_1_0.t t/license/mozilla_1_1.t t/license/mpl.t 
t/license/mpl_1_0.t t/license/mpl_1_1.t t/license/nethack.t t/license/nokia.t t/license/nokia_1_0a.t t/license/nokos.t t/license/nokos_1_0a.t t/license/perl.t t/license/python.t t/license/q.t
 t/license/q_1_0.t t/license/r_bsd.t t/license/ricoh.t t/license/ricoh_1_0.t t/license/sissl.t t/license/sleepycat.t t/license/sun.t t/license/vovida.t t/license/vovida_1_0.t t/license/zlib.t
 t/makedefaults/1201.t t/makedefaults/1202.t t/makedefaults/1203.t t/miscargs/901.t t/miscargs/902.t t/miscargs/903.t t/miscargs/904.t t/miscargs/905.t t/miscargs/906.t t/miscargs/907.t t/mis
cargs/908.t t/miscargs/909.t t/miscargs/910.t t/miscargs/911.t t/miscargs/912.t t/miscargs/913.t t/miscargs/914.t t/miscargs/915.t t/miscargs/916.t t/miscargs/917.t t/miscargs/918.t t/miscarg
s/919.t t/miscargs/920.t t/miscargs/921.t t/miscargs/922.t t/miscargs/923.t t/mmkr/801.t t/mmkr/802.t t/mmkr/803.t t/mmkr/804.t t/mmkr/805.t t/mmkr/806.t t/mmkr/807.t t/mmkr/808.t
...
t/license/python.t ................ ok
t/license/q.t ..................... ok
t/license/q_1_0.t ................. ok
Unable to rename /home/eserte/.modulemaker/ExtUtils/ModuleMaker/Personal/Defaults.pm: No such file or directory at t/license/r_bsd.t line 14.
Use of chdir&#40;&#39;&#39;&#41; or chdir&#40;undef&#41; as chdir&#40;&#41; is deprecated at /tmpfs/.cpan-build/2016020118/ExtUtils-ModuleMaker-0.55-fpYaI4/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 467.
Use of uninitialized value $home in concatenation &#40;.&#41; or string at /home/eserte/.cpan/build/2016020118/File-Save-Home-0.09-nfjUmR/blib/lib/File/Save/Home.pm line 276.
Use of uninitialized value $subdir_top in concatenation &#40;.&#41; or string at /home/eserte/.cpan/build/2016020118/File-Save-Home-0.09-nfjUmR/blib/lib/File/Save/Home.pm line 276.
Couldn&#39;t unlink /vmlinuz: Permission denied at /home/eserte/.cpan/build/2016020118/File-Save-Home-0.09-nfjUmR/blib/lib/File/Save/Home.pm line 273.
Couldn&#39;t unlink /initrd.img: Permission denied at /home/eserte/.cpan/build/2016020118/File-Save-Home-0.09-nfjUmR/blib/lib/File/Save/Home.pm line 273.
Couldn&#39;t unlink /dev/log: Permission denied at /home/eserte/.cpan/build/2016020118/File-Save-Home-0.09-nfjUmR/blib/lib/File/Save/Home.pm line 273.
Couldn&#39;t unlink /dev/xconsole: Permission denied at /home/eserte/.cpan/build/2016020118/File-Save-Home-0.09-nfjUmR/blib/lib/File/Save/Home.pm line 273.
Couldn&#39;t unlink /dev/shm: Permission denied at /home/eserte/.cpan/build/2016020118/File-Save-Home-0.09-nfjUmR/blib/lib/File/Save/Home.pm line 273.
Couldn&#39;t unlink /dev/root: Permission denied at /home/eserte/.cpan/build/2016020118/File-Save-Home-0.09-nfjUmR/blib/lib/File/Save/Home.pm line 273.
Couldn&#39;t unlink /dev/MAKEDEV: Permission denied at /home/eserte/.cpan/build/2016020118/File-Save-Home-0.09-nfjUmR/blib/lib/File/Save/Home.pm line 273.
... etc. ...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1590055" href="/Public/Bug/Display.html?id=111637#txn-1590055">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;01&nbsp;15:36:51&nbsp;2016</span>
    <span class="description">SREZIC [...] cpan.org -  Severity Critical added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1590840" href="/Public/Bug/Display.html?id=111637#txn-1590840">#</a>      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;03&nbsp;08:42:35&nbsp;2016</span>
    <span class="description">ribasushi [...] leporine.io -  Cc RIBASUSHI added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1701626" href="/Public/Bug/Display.html?id=111637#txn-1701626">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;30&nbsp;08:44:11&nbsp;2017</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1701626/913909/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/913909">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here is another case of a test run that triggered the equivalent of &#39;rm -rf /&#39;, but fortunately some lucky circumstances stopped the catastrophy in time and caught the activities in a logfile. I append a few of the illustrative lines of the output.

 : CPAN::Reporter: make result is &#39;pass&#39;, No errors.
 :   JKEENAN/ExtUtils-ModuleMaker-0.55.tar.gz
 :   /usr/bin/make -- OK
 : Running make test
 : PERL_DL_NONLAZY=1 &#34;/tmp/basesmoker-reloperl-QWNp/bin/perl&#34; &#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/01_ini.t t/03_quick.t t/04_compact.t t/05_abstract.t t/06_build.t t/07_proxy.t t/10_standard_text.t t/13_alt_block_new_method.t t/14_mmkr_alt_block_new_method.t t/failsafe/201.t t/failsafe/202.t t/failsafe/203.t t/failsafe/204.t t/failsafe/205.t t/failsafe/206.t t/failsafe/207.t t/failsafe/208.t t/failsafe/209.t t/failsafe/210.t t/failsafe/211.t t/license/apache.t t/license/apache_1_1.t t/license/artistic.t t/license/artistic_agg.t t/license/bsd.t t/license/gpl.t t/license/gpl_2.t t/license/ibm.t t/license/ibm_1_0.t t/license/intel.t t/license/jabber.t t/license/jabber_1_0.t t/license/lgpl.t t/license/lgpl_2_1.t t/license/libpng.t t/license/looselips.t t/license/mit.t t/license/mitre.t t/license/mozilla.t t/license/mozilla_1_0.t t/license/mozilla_1_1.t t/license/mpl.t t/license/mpl_1_0.t t/license/mpl_1_1.t t/license/nethack.t t/license/nokia.t t/license/nokia_1_0a.t t/license/nokos.t t/license/nokos_1_0a.t t/license/perl.t t/license/python.t t/license/q.t t/license/q_1_0.t t/license/r_bsd.t t/license/ricoh.t t/license/ricoh_1_0.t t/license/sissl.t t/license/sleepycat.t t/license/sun.t t/license/vovida.t t/license/vovida_1_0.t t/license/zlib.t t/makedefaults/1201.t t/makedefaults/1202.t t/makedefaults/1203.t t/miscargs/901.t t/miscargs/902.t t/miscargs/903.t t/miscargs/904.t t/miscargs/905.t t/miscargs/906.t t/miscargs/907.t t/miscargs/908.t t/miscargs/909.t t/miscargs/910.t t/miscargs/911.t t/miscargs/912.t t/miscargs/913.t t/miscargs/914.t t/miscargs/915.t t/miscargs/916.t t/miscargs/917.t t/miscargs/918.t t/miscargs/919.t t/miscargs/920.t t/miscargs/921.t t/miscargs/922.t t/miscargs/923.t t/mmkr/801.t t/mmkr/802.t t/mmkr/803.t t/mmkr/804.t t/mmkr/805.t t/mmkr/806.t t/mmkr/807.t t/mmkr/808.t
 : t/01_ini.t ........................ ok
 [...]
 : t/mmkr/801.t ...................... ok
 : Unable to create desired directory /home/sand/.modulemaker: File exists at /tmp/loop_over_bdir-13369-fam6wS/ExtUtils-ModuleMaker-0.55-0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 448.
 : 
 : #   Failed test &#39;changed back to original directory after testing&#39;
 : #   at /home/sand/src/perl/repoperls/installed-perls/host/k93msid/v5.25.9-58-gbb78386f13/89ad/lib/site_perl/5.25.10/Test/Builder.pm line 135.
 : Use of uninitialized value $home in concatenation &#40;.&#41; or string at /home/sand/src/perl/repoperls/installed-perls/host/k93msid/v5.25.9-58-gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line 276.
 : Use of uninitialized value $subdir_top in concatenation &#40;.&#41; or string at /home/sand/src/perl/repoperls/installed-perls/host/k93msid/v5.25.9-58-gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line 276.
 : Couldn&#39;t unlink /sbin/iptables-save: Permission denied at /home/sand/src/perl/repoperls/installed-perls/host/k93msid/v5.25.9-58-gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line 273.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1701627" href="/Public/Bug/Display.html?id=111637#txn-1701627">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;30&nbsp;08:44:15&nbsp;2017</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1701663" href="/Public/Bug/Display.html?id=111637#txn-1701663">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;30&nbsp;10:10:50&nbsp;2017</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1701663/913927/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/913927">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 395b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jan 30 08:44:11 2017, ANDK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Here is another case of a test run that triggered the equivalent of
&gt; &#39;rm -rf /&#39;, but fortunately some lucky circumstances stopped the
&gt; catastrophy in time and caught the activities in a logfile. I append a
&gt; few of the illustrative lines of the output.
&gt; 
</div>
This ticket had completely escaped my attention.  I will investigate.  Thank you very much.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1701666" href="/Public/Bug/Display.html?id=111637#txn-1701666">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;30&nbsp;10:11:05&nbsp;2017</span>
    <span class="description">jkeenan [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1701667" href="/Public/Bug/Display.html?id=111637#txn-1701667">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;30&nbsp;10:53:57&nbsp;2017</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> rGeoffrey [...] PlatypiVentures.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1701667/913930/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/913930">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Feb 01 15:13:38 2016, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There&#39;s a number of test failures visible at
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=ExtUtils-ModuleMaker%200.55">http://matrix.cpantesters.org/?dist=ExtUtils-ModuleMaker%200.55</a></span> and I
&gt; suspect that these fails are caused by parallel test runs &#40;e.g. ANDK&#39;s
&gt; smoker is known to test for many perl versions in parallel on the same
&gt; machine&#41;.
&gt; 
&gt; The list of tests which fail may be seen in the top regression list at
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://analysis.cpantesters.org/solved?distv=ExtUtils-ModuleMaker-0.55">http://analysis.cpantesters.org/solved?distv=ExtUtils-ModuleMaker-0.55</a></span>
&gt; 
&gt; I think the problem is that some of the test scripts write to
&gt; ~/.modulemaker/ExtUtils/ModuleMaker/Personal/Defaults.pm
&gt; If it is so, maybe you should just fake a unique temporary HOME
&gt; directory for tests?
</div>
Slaven, Andreas:  What I&#39;m going to do as a diagnostic is to first release a new version to CPAN which eliminates all the test files that call the scripts/modulemaker utility.

#####
$ ack &#39;script\/modulemaker&#39; t
t/mmkr/801.t
33:        ok&#40;! system&#40;qq{$^X -I&#34;$cwd/blib/lib&#34; &#34;$cwd/blib/script/modulemaker&#34; -In EU::MM::Testing::Defaults -a &#34;Module abstract &#40;&lt;= 44 characters&#41; goes here&#34; -u &#34;Hilton Stallone&#34; -p RAMBO -o &#34;Parliamentary Pictures&#34; -w <span class="clickylink"><a target="new" rel="nofollow" href="http://parliamentarypictures.com">http://parliamentarypictures.com</a></span> -e hiltons\@parliamentarypictures.com }&#41;, 

t/mmkr/802.t
36:        ok&#40;! system&#40;qq{$^X -I&#34;$cwd/blib/lib&#34; &#34;$cwd/blib/script/modulemaker&#34; -In My::Research::Module }&#41;, 

t/mmkr/803.t
33:        ok&#40;! system&#40;qq{$^X -I&#34;$cwd/blib/lib&#34; &#34;$cwd/blib/script/modulemaker&#34; -Icn XYZ::ABC -a \&#34;This is very abstract.\&#34;}&#41;,  #&#34;

t/mmkr/808.t
35:        ok&#40;! system&#40;qq{$^X -I&#34;$cwd/blib/lib&#34; &#34;$cwd/blib/script/modulemaker&#34; -Icqn &#34;$module_name&#34; -v 0.3 }&#41;,

t/mmkr/804.t
33:        ok&#40;! system&#40;qq{$^X -I&#34;$cwd/blib/lib&#34; &#34;$cwd/blib/script/modulemaker&#34; -Icn XYZ::ABC -a \&#34;This is very abstract.\&#34; -u \&#34;John Q Public\&#34;}&#41;, #&#34;

t/mmkr/807.t
35:        ok&#40;! system&#40;qq{$^X -I&#34;$cwd/blib/lib&#34; &#34;$cwd/blib/script/modulemaker&#34; -Icqn &#34;$module_name&#34; }&#41;,

t/mmkr/806.t
35:        ok&#40;! system&#40;qq{$^X -I&#34;$cwd/blib/lib&#34; &#34;$cwd/blib/script/modulemaker&#34; -IcPn &#34;$module_name&#34; }&#41;,

t/mmkr/805.t
33:        ok&#40;! system&#40;qq{$^X -I&#34;$cwd/blib/lib&#34; &#34;$cwd/blib/script/modulemaker&#34; -Icn XYZ::ABC -a \&#34;This is very abstract.\&#34; -u \&#34;John Q Public\&#34; -e jqpublic\@calamity.jane.net}&#41;,   #&#34;

t/makedefaults/1203.t
44:        ok&#40;! system&#40;qq{$^X -I&#34;$cwd/blib/lib&#34; &#34;$cwd/blib/script/modulemaker&#34; -Isn EU::MM::Testing::Defaults -a &#34;Module abstract &#40;&lt;= 44 characters&#41; goes here&#34; -u &#34;Hilton Stallone&#34; -p RAMBO -o &#34;Parliamentary Pictures&#34; -w <span class="clickylink"><a target="new" rel="nofollow" href="http://parliamentarypictures.com">http://parliamentarypictures.com</a></span> -e hiltons\@parliamentarypictures.com }&#41;, 

t/14_mmkr_alt_block_new_method.t
46:        ok&#40;! system&#40;qq{$^X -I&#34;$odir/blib/lib&#34; &#34;$odir/blib/script/modulemaker&#34; -Icn Alpha::$testmod -d ExtUtils::ModuleMaker::Alt_block_new_method }&#41;, 
#####

That appears to be where all reported test failures are concentrated.

Taking that step should alleviate the immediate problem and buy me some time to explore further.

Thank you very much.
Jim Keenan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1704315" href="/Public/Bug/Display.html?id=111637#txn-1704315">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;10&nbsp;22:03:04&nbsp;2017</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1704315/915488/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/915488">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jan 30 08:44:11 2017, ANDK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Here is another case of a test run that triggered the equivalent of
&gt; &#39;rm -rf /&#39;, but fortunately some lucky circumstances stopped the
&gt; catastrophy in time and caught the activities in a logfile. I append a
&gt; few of the illustrative lines of the output.
&gt; 
&gt; : CPAN::Reporter: make result is &#39;pass&#39;, No errors.
&gt; :   JKEENAN/ExtUtils-ModuleMaker-0.55.tar.gz
&gt; :   /usr/bin/make -- OK
&gt; : Running make test
&gt; : PERL_DL_NONLAZY=1 &#34;/tmp/basesmoker-reloperl-QWNp/bin/perl&#34; &#34;-
&gt; MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef
&gt; *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34;
&gt; t/01_ini.t t/03_quick.t t/04_compact.t t/05_abstract.t t/06_build.t
&gt; t/07_proxy.t t/10_standard_text.t t/13_alt_block_new_method.t
&gt; t/14_mmkr_alt_block_new_method.t t/failsafe/201.t t/failsafe/202.t
&gt; t/failsafe/203.t t/failsafe/204.t t/failsafe/205.t t/failsafe/206.t
&gt; t/failsafe/207.t t/failsafe/208.t t/failsafe/209.t t/failsafe/210.t
&gt; t/failsafe/211.t t/license/apache.t t/license/apache_1_1.t
&gt; t/license/artistic.t t/license/artistic_agg.t t/license/bsd.t
&gt; t/license/gpl.t t/license/gpl_2.t t/license/ibm.t t/license/ibm_1_0.t
&gt; t/license/intel.t t/license/jabber.t t/license/jabber_1_0.t
&gt; t/license/lgpl.t t/license/lgpl_2_1.t t/license/libpng.t
&gt; t/license/looselips.t t/license/mit.t t/license/mitre.t
&gt; t/license/mozilla.t t/license/mozilla_1_0.t t/license/mozilla_1_1.t
&gt; t/license/mpl.t t/license/mpl_1_0.t t/license/mpl_1_1.t
&gt; t/license/nethack.t t/license/nokia.t t/license/nokia_1_0a.t
&gt; t/license/nokos.t t/license/nokos_1_0a.t t/license/perl.t
&gt; t/license/python.t t/license/q.t t/license/q_1_0.t t/license/r_bsd.t
&gt; t/license/ricoh.t t/license/ricoh_1_0.t t/license/sissl.t
&gt; t/license/sleepycat.t t/license/sun.t t/license/vovida.t
&gt; t/license/vovida_1_0.t t/license/zlib.t t/makedefaults/1201.t
&gt; t/makedefaults/1202.t t/makedefaults/1203.t t/miscargs/901.t
&gt; t/miscargs/902.t t/miscargs/903.t t/miscargs/904.t t/miscargs/905.t
&gt; t/miscargs/906.t t/miscargs/907.t t/miscargs/908.t t/miscargs/909.t
&gt; t/miscargs/910.t t/miscargs/911.t t/miscargs/912.t t/miscargs/913.t
&gt; t/miscargs/914.t t/miscargs/915.t t/miscargs/916.t t/miscargs/917.t
&gt; t/miscargs/918.t t/miscargs/919.t t/miscargs/920.t t/miscargs/921.t
&gt; t/miscargs/922.t t/miscargs/923.t t/mmkr/801.t t/mmkr/802.t
&gt; t/mmkr/803.t t/mmkr/804.t t/mmkr/805.t t/mmkr/806.t t/mmkr/807.t
&gt; t/mmkr/808.t
&gt; : t/01_ini.t ........................ ok
&gt; [...]
&gt; : t/mmkr/801.t ...................... ok
&gt; : Unable to create desired directory /home/sand/.modulemaker: File
&gt; exists at /tmp/loop_over_bdir-13369-fam6wS/ExtUtils-ModuleMaker-0.55-
&gt; 0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 448.
&gt;  :
&gt; : #   Failed test &#39;changed back to original directory after testing&#39;
&gt; : #   at /home/sand/src/perl/repoperls/installed-
&gt; perls/host/k93msid/v5.25.9-58-
&gt; gbb78386f13/89ad/lib/site_perl/5.25.10/Test/Builder.pm line 135.
&gt; : Use of uninitialized value $home in concatenation &#40;.&#41; or string at
&gt; /home/sand/src/perl/repoperls/installed-perls/host/k93msid/v5.25.9-58-
&gt; gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line 276.
&gt; : Use of uninitialized value $subdir_top in concatenation &#40;.&#41; or
&gt; string at /home/sand/src/perl/repoperls/installed-
&gt; perls/host/k93msid/v5.25.9-58-
&gt; gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line 276.
&gt; : Couldn&#39;t unlink /sbin/iptables-save: Permission denied at
&gt; /home/sand/src/perl/repoperls/installed-perls/host/k93msid/v5.25.9-58-
&gt; gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line 273.
</div>
Andreas, Slaven:  In both of these reports, an uninitialized value is reported in File::Save::Home.  I have just now uploaded v0.10 of File-Save-Home to CPAN, wherein I croak if I can&#39;t remove a file or directory.   Can you check that out?

I should say:  I don&#39;t understand how this triggered a cascade of problems.

Do you run your CPANtesters runs as root?

Thank you very much.
Jim Keenan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1704758" href="/Public/Bug/Display.html?id=111637#txn-1704758">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;13&nbsp;02:33:14&nbsp;2017</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1704758/915745/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/915745">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 7.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2017-02-10 22:03:04, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Jan 30 08:44:11 2017, ANDK wrote:
<div class="message-stanza open">&gt; &gt; Here is another case of a test run that triggered the equivalent of
&gt; &gt; &#39;rm -rf /&#39;, but fortunately some lucky circumstances stopped the
&gt; &gt; catastrophy in time and caught the activities in a logfile. I append
&gt; &gt; a
&gt; &gt; few of the illustrative lines of the output.
&gt; &gt;
&gt; &gt; : CPAN::Reporter: make result is &#39;pass&#39;, No errors.
&gt; &gt; :   JKEENAN/ExtUtils-ModuleMaker-0.55.tar.gz
&gt; &gt; :   /usr/bin/make -- OK
&gt; &gt; : Running make test
&gt; &gt; : PERL_DL_NONLAZY=1 &#34;/tmp/basesmoker-reloperl-QWNp/bin/perl&#34; &#34;-
&gt; &gt; MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef
&gt; &gt; *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34;
&gt; &gt; t/01_ini.t t/03_quick.t t/04_compact.t t/05_abstract.t t/06_build.t
&gt; &gt; t/07_proxy.t t/10_standard_text.t t/13_alt_block_new_method.t
&gt; &gt; t/14_mmkr_alt_block_new_method.t t/failsafe/201.t t/failsafe/202.t
&gt; &gt; t/failsafe/203.t t/failsafe/204.t t/failsafe/205.t t/failsafe/206.t
&gt; &gt; t/failsafe/207.t t/failsafe/208.t t/failsafe/209.t t/failsafe/210.t
&gt; &gt; t/failsafe/211.t t/license/apache.t t/license/apache_1_1.t
&gt; &gt; t/license/artistic.t t/license/artistic_agg.t t/license/bsd.t
&gt; &gt; t/license/gpl.t t/license/gpl_2.t t/license/ibm.t t/license/ibm_1_0.t
&gt; &gt; t/license/intel.t t/license/jabber.t t/license/jabber_1_0.t
&gt; &gt; t/license/lgpl.t t/license/lgpl_2_1.t t/license/libpng.t
&gt; &gt; t/license/looselips.t t/license/mit.t t/license/mitre.t
&gt; &gt; t/license/mozilla.t t/license/mozilla_1_0.t t/license/mozilla_1_1.t
&gt; &gt; t/license/mpl.t t/license/mpl_1_0.t t/license/mpl_1_1.t
&gt; &gt; t/license/nethack.t t/license/nokia.t t/license/nokia_1_0a.t
&gt; &gt; t/license/nokos.t t/license/nokos_1_0a.t t/license/perl.t
&gt; &gt; t/license/python.t t/license/q.t t/license/q_1_0.t t/license/r_bsd.t
&gt; &gt; t/license/ricoh.t t/license/ricoh_1_0.t t/license/sissl.t
&gt; &gt; t/license/sleepycat.t t/license/sun.t t/license/vovida.t
&gt; &gt; t/license/vovida_1_0.t t/license/zlib.t t/makedefaults/1201.t
&gt; &gt; t/makedefaults/1202.t t/makedefaults/1203.t t/miscargs/901.t
&gt; &gt; t/miscargs/902.t t/miscargs/903.t t/miscargs/904.t t/miscargs/905.t
&gt; &gt; t/miscargs/906.t t/miscargs/907.t t/miscargs/908.t t/miscargs/909.t
&gt; &gt; t/miscargs/910.t t/miscargs/911.t t/miscargs/912.t t/miscargs/913.t
&gt; &gt; t/miscargs/914.t t/miscargs/915.t t/miscargs/916.t t/miscargs/917.t
&gt; &gt; t/miscargs/918.t t/miscargs/919.t t/miscargs/920.t t/miscargs/921.t
&gt; &gt; t/miscargs/922.t t/miscargs/923.t t/mmkr/801.t t/mmkr/802.t
&gt; &gt; t/mmkr/803.t t/mmkr/804.t t/mmkr/805.t t/mmkr/806.t t/mmkr/807.t
&gt; &gt; t/mmkr/808.t
&gt; &gt; : t/01_ini.t ........................ ok
&gt; &gt; [...]
&gt; &gt; : t/mmkr/801.t ...................... ok
&gt; &gt; : Unable to create desired directory /home/sand/.modulemaker: File
&gt; &gt; exists at /tmp/loop_over_bdir-13369-fam6wS/ExtUtils-ModuleMaker-0.55-
&gt; &gt; 0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 448.
&gt; &gt;  :
&gt; &gt; : #   Failed test &#39;changed back to original directory after testing&#39;
&gt; &gt; : #   at /home/sand/src/perl/repoperls/installed-
&gt; &gt; perls/host/k93msid/v5.25.9-58-
&gt; &gt; gbb78386f13/89ad/lib/site_perl/5.25.10/Test/Builder.pm line 135.
&gt; &gt; : Use of uninitialized value $home in concatenation &#40;.&#41; or string at
&gt; &gt; /home/sand/src/perl/repoperls/installed-perls/host/k93msid/v5.25.9-
&gt; &gt; 58-
&gt; &gt; gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line 276.
&gt; &gt; : Use of uninitialized value $subdir_top in concatenation &#40;.&#41; or
&gt; &gt; string at /home/sand/src/perl/repoperls/installed-
&gt; &gt; perls/host/k93msid/v5.25.9-58-
&gt; &gt; gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line 276.
&gt; &gt; : Couldn&#39;t unlink /sbin/iptables-save: Permission denied at
&gt; &gt; /home/sand/src/perl/repoperls/installed-perls/host/k93msid/v5.25.9-
&gt; &gt; 58-
&gt; &gt; gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line 273.
</div>&gt; 
&gt; Andreas, Slaven:  In both of these reports, an uninitialized value is
&gt; reported in File::Save::Home.  I have just now uploaded v0.10 of File-
&gt; Save-Home to CPAN, wherein I croak if I can&#39;t remove a file or
&gt; directory.   Can you check that out?
</div>
Unfortunately the problem still exists. I could reproduce it on a Ubuntu 16.04 system with two processes acting on the ExtUtils-ModuleMaker-0.56 testsuite at the same time. Here&#39; an excerpt of the log:

...
PERL_DL_NONLAZY=1 &#34;/opt/perl-5.22.2/bin/perl&#34; &#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/01_ini.t t/03_quick.t t/04_compact.t t/05_abstract.t t/06_build.t t/07_proxy.t t/10_standard_t
ext.t t/13_alt_block_new_method.t t/failsafe/201.t t/failsafe/202.t t/failsafe/203.t t/failsafe/204.t t/failsafe/205.t t/failsafe/206.t t/failsafe/207.t t/failsafe/208.t t/failsafe/209.t t/failsafe/210.t t/failsafe/211.t t/license/apache.t t/license/apache_1_1.t t/l
icense/artistic.t t/license/artistic_agg.t t/license/bsd.t t/license/gpl.t t/license/gpl_2.t t/license/ibm.t t/license/ibm_1_0.t t/license/intel.t t/license/jabber.t t/license/jabber_1_0.t t/license/lgpl.t t/license/lgpl_2_1.t t/license/libpng.t t/license/looselips.
t t/license/mit.t t/license/mitre.t t/license/mozilla.t t/license/mozilla_1_0.t t/license/mozilla_1_1.t t/license/mpl.t t/license/mpl_1_0.t t/license/mpl_1_1.t t/license/nethack.t t/license/nokia.t t/license/nokia_1_0a.t t/license/nokos.t t/license/nokos_1_0a.t t/li
cense/perl.t t/license/python.t t/license/q.t t/license/q_1_0.t t/license/r_bsd.t t/license/ricoh.t t/license/ricoh_1_0.t t/license/sissl.t t/license/sleepycat.t t/license/sun.t t/license/vovida.t t/license/vovida_1_0.t t/license/zlib.t t/makedefaults/1201.t t/maked
efaults/1202.t t/miscargs/901.t t/miscargs/902.t t/miscargs/903.t t/miscargs/904.t t/miscargs/905.t t/miscargs/906.t t/miscargs/907.t t/miscargs/908.t t/miscargs/909.t t/miscargs/910.t t/miscargs/911.t t/miscargs/912.t t/miscargs/913.t t/miscargs/914.t t/miscargs/91
5.t t/miscargs/916.t t/miscargs/917.t t/miscargs/918.t t/miscargs/919.t t/miscargs/920.t t/miscargs/921.t t/miscargs/922.t t/miscargs/923.t
...
t/license/lgpl_2_1.t ......... ok
Unable to create desired directory /home/cpansand/.modulemaker: File exists at /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 448.
Use of uninitialized value in -f at /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 270.
Use of uninitialized value in chdir at /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 468.
Use of chdir&#40;&#39;&#39;&#41; or chdir&#40;undef&#41; as chdir&#40;&#41; is deprecated at /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 468.
Use of uninitialized value $home in concatenation &#40;.&#41; or string at /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-1/blib/lib/File/Save/Home.pm line 276.
Use of uninitialized value $subdir_top in concatenation &#40;.&#41; or string at /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-1/blib/lib/File/Save/Home.pm line 276.
Couldn&#39;t unlink /vmlinuz.old: Permission denied at /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-1/blib/lib/File/Save/Home.pm line 273.
Couldn&#39;t unlink /installimage.conf: Permission denied at /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-1/blib/lib/File/Save/Home.pm line 273.
Couldn&#39;t unlink /installimage.debug: Permission denied at /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-1/blib/lib/File/Save/Home.pm line 273.
Couldn&#39;t unlink /vmlinuz: Permission denied at /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-1/blib/lib/File/Save/Home.pm line 273.
Couldn&#39;t unlink /initrd.img: Permission denied at /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-1/blib/lib/File/Save/Home.pm line 273.
... &#40;etc&#41; ...

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I should say:  I don&#39;t understand how this triggered a cascade of
&gt; problems.
&gt; 
&gt; Do you run your CPANtesters runs as root?
</div>
No.

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1704761" href="/Public/Bug/Display.html?id=111637#txn-1704761">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;13&nbsp;02:46:30&nbsp;2017</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1704761/915748/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/915748">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 9.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2017-02-13 02:33:14, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2017-02-10 22:03:04, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; On Mon Jan 30 08:44:11 2017, ANDK wrote:
<div class="message-stanza open">&gt; &gt; &gt; Here is another case of a test run that triggered the equivalent of
&gt; &gt; &gt; &#39;rm -rf /&#39;, but fortunately some lucky circumstances stopped the
&gt; &gt; &gt; catastrophy in time and caught the activities in a logfile. I
&gt; &gt; &gt; append
&gt; &gt; &gt; a
&gt; &gt; &gt; few of the illustrative lines of the output.
&gt; &gt; &gt;
&gt; &gt; &gt; : CPAN::Reporter: make result is &#39;pass&#39;, No errors.
&gt; &gt; &gt; :   JKEENAN/ExtUtils-ModuleMaker-0.55.tar.gz
&gt; &gt; &gt; :   /usr/bin/make -- OK
&gt; &gt; &gt; : Running make test
&gt; &gt; &gt; : PERL_DL_NONLAZY=1 &#34;/tmp/basesmoker-reloperl-QWNp/bin/perl&#34; &#34;-
&gt; &gt; &gt; MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef
&gt; &gt; &gt; *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34;
&gt; &gt; &gt; t/01_ini.t t/03_quick.t t/04_compact.t t/05_abstract.t t/06_build.t
&gt; &gt; &gt; t/07_proxy.t t/10_standard_text.t t/13_alt_block_new_method.t
&gt; &gt; &gt; t/14_mmkr_alt_block_new_method.t t/failsafe/201.t t/failsafe/202.t
&gt; &gt; &gt; t/failsafe/203.t t/failsafe/204.t t/failsafe/205.t t/failsafe/206.t
&gt; &gt; &gt; t/failsafe/207.t t/failsafe/208.t t/failsafe/209.t t/failsafe/210.t
&gt; &gt; &gt; t/failsafe/211.t t/license/apache.t t/license/apache_1_1.t
&gt; &gt; &gt; t/license/artistic.t t/license/artistic_agg.t t/license/bsd.t
&gt; &gt; &gt; t/license/gpl.t t/license/gpl_2.t t/license/ibm.t
&gt; &gt; &gt; t/license/ibm_1_0.t
&gt; &gt; &gt; t/license/intel.t t/license/jabber.t t/license/jabber_1_0.t
&gt; &gt; &gt; t/license/lgpl.t t/license/lgpl_2_1.t t/license/libpng.t
&gt; &gt; &gt; t/license/looselips.t t/license/mit.t t/license/mitre.t
&gt; &gt; &gt; t/license/mozilla.t t/license/mozilla_1_0.t t/license/mozilla_1_1.t
&gt; &gt; &gt; t/license/mpl.t t/license/mpl_1_0.t t/license/mpl_1_1.t
&gt; &gt; &gt; t/license/nethack.t t/license/nokia.t t/license/nokia_1_0a.t
&gt; &gt; &gt; t/license/nokos.t t/license/nokos_1_0a.t t/license/perl.t
&gt; &gt; &gt; t/license/python.t t/license/q.t t/license/q_1_0.t
&gt; &gt; &gt; t/license/r_bsd.t
&gt; &gt; &gt; t/license/ricoh.t t/license/ricoh_1_0.t t/license/sissl.t
&gt; &gt; &gt; t/license/sleepycat.t t/license/sun.t t/license/vovida.t
&gt; &gt; &gt; t/license/vovida_1_0.t t/license/zlib.t t/makedefaults/1201.t
&gt; &gt; &gt; t/makedefaults/1202.t t/makedefaults/1203.t t/miscargs/901.t
&gt; &gt; &gt; t/miscargs/902.t t/miscargs/903.t t/miscargs/904.t t/miscargs/905.t
&gt; &gt; &gt; t/miscargs/906.t t/miscargs/907.t t/miscargs/908.t t/miscargs/909.t
&gt; &gt; &gt; t/miscargs/910.t t/miscargs/911.t t/miscargs/912.t t/miscargs/913.t
&gt; &gt; &gt; t/miscargs/914.t t/miscargs/915.t t/miscargs/916.t t/miscargs/917.t
&gt; &gt; &gt; t/miscargs/918.t t/miscargs/919.t t/miscargs/920.t t/miscargs/921.t
&gt; &gt; &gt; t/miscargs/922.t t/miscargs/923.t t/mmkr/801.t t/mmkr/802.t
&gt; &gt; &gt; t/mmkr/803.t t/mmkr/804.t t/mmkr/805.t t/mmkr/806.t t/mmkr/807.t
&gt; &gt; &gt; t/mmkr/808.t
&gt; &gt; &gt; : t/01_ini.t ........................ ok
&gt; &gt; &gt; [...]
&gt; &gt; &gt; : t/mmkr/801.t ...................... ok
&gt; &gt; &gt; : Unable to create desired directory /home/sand/.modulemaker: File
&gt; &gt; &gt; exists at /tmp/loop_over_bdir-13369-fam6wS/ExtUtils-ModuleMaker-
&gt; &gt; &gt; 0.55-
&gt; &gt; &gt; 0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 448.
&gt; &gt; &gt;  :
&gt; &gt; &gt; : #   Failed test &#39;changed back to original directory after
&gt; &gt; &gt; testing&#39;
&gt; &gt; &gt; : #   at /home/sand/src/perl/repoperls/installed-
&gt; &gt; &gt; perls/host/k93msid/v5.25.9-58-
&gt; &gt; &gt; gbb78386f13/89ad/lib/site_perl/5.25.10/Test/Builder.pm line 135.
&gt; &gt; &gt; : Use of uninitialized value $home in concatenation &#40;.&#41; or string
&gt; &gt; &gt; at
&gt; &gt; &gt; /home/sand/src/perl/repoperls/installed-perls/host/k93msid/v5.25.9-
&gt; &gt; &gt; 58-
&gt; &gt; &gt; gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line 276.
&gt; &gt; &gt; : Use of uninitialized value $subdir_top in concatenation &#40;.&#41; or
&gt; &gt; &gt; string at /home/sand/src/perl/repoperls/installed-
&gt; &gt; &gt; perls/host/k93msid/v5.25.9-58-
&gt; &gt; &gt; gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line 276.
&gt; &gt; &gt; : Couldn&#39;t unlink /sbin/iptables-save: Permission denied at
&gt; &gt; &gt; /home/sand/src/perl/repoperls/installed-perls/host/k93msid/v5.25.9-
&gt; &gt; &gt; 58-
&gt; &gt; &gt; gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line 273.
</div>&gt; &gt;
&gt; &gt; Andreas, Slaven:  In both of these reports, an uninitialized value is
&gt; &gt; reported in File::Save::Home.  I have just now uploaded v0.10 of
&gt; &gt; File-
&gt; &gt; Save-Home to CPAN, wherein I croak if I can&#39;t remove a file or
&gt; &gt; directory.   Can you check that out?
</div>&gt; 
&gt; Unfortunately the problem still exists. I could reproduce it on a
&gt; Ubuntu 16.04 system with two processes acting on the ExtUtils-
&gt; ModuleMaker-0.56 testsuite at the same time. Here&#39; an excerpt of the
&gt; log:
&gt; 
&gt; ...
&gt; PERL_DL_NONLAZY=1 &#34;/opt/perl-5.22.2/bin/perl&#34; &#34;-
&gt; MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef
&gt; *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34;
&gt; t/01_ini.t t/03_quick.t t/04_compact.t t/05_abstract.t t/06_build.t
&gt; t/07_proxy.t t/10_standard_t
&gt; ext.t t/13_alt_block_new_method.t t/failsafe/201.t t/failsafe/202.t
&gt; t/failsafe/203.t t/failsafe/204.t t/failsafe/205.t t/failsafe/206.t
&gt; t/failsafe/207.t t/failsafe/208.t t/failsafe/209.t t/failsafe/210.t
&gt; t/failsafe/211.t t/license/apache.t t/license/apache_1_1.t t/l
&gt; icense/artistic.t t/license/artistic_agg.t t/license/bsd.t
&gt; t/license/gpl.t t/license/gpl_2.t t/license/ibm.t t/license/ibm_1_0.t
&gt; t/license/intel.t t/license/jabber.t t/license/jabber_1_0.t
&gt; t/license/lgpl.t t/license/lgpl_2_1.t t/license/libpng.t
&gt; t/license/looselips.
&gt; t t/license/mit.t t/license/mitre.t t/license/mozilla.t
&gt; t/license/mozilla_1_0.t t/license/mozilla_1_1.t t/license/mpl.t
&gt; t/license/mpl_1_0.t t/license/mpl_1_1.t t/license/nethack.t
&gt; t/license/nokia.t t/license/nokia_1_0a.t t/license/nokos.t
&gt; t/license/nokos_1_0a.t t/li
&gt; cense/perl.t t/license/python.t t/license/q.t t/license/q_1_0.t
&gt; t/license/r_bsd.t t/license/ricoh.t t/license/ricoh_1_0.t
&gt; t/license/sissl.t t/license/sleepycat.t t/license/sun.t
&gt; t/license/vovida.t t/license/vovida_1_0.t t/license/zlib.t
&gt; t/makedefaults/1201.t t/maked
&gt; efaults/1202.t t/miscargs/901.t t/miscargs/902.t t/miscargs/903.t
&gt; t/miscargs/904.t t/miscargs/905.t t/miscargs/906.t t/miscargs/907.t
&gt; t/miscargs/908.t t/miscargs/909.t t/miscargs/910.t t/miscargs/911.t
&gt; t/miscargs/912.t t/miscargs/913.t t/miscargs/914.t t/miscargs/91
&gt; 5.t t/miscargs/916.t t/miscargs/917.t t/miscargs/918.t
&gt; t/miscargs/919.t t/miscargs/920.t t/miscargs/921.t t/miscargs/922.t
&gt; t/miscargs/923.t
&gt; ...
&gt; t/license/lgpl_2_1.t ......... ok
&gt; Unable to create desired directory /home/cpansand/.modulemaker: File
&gt; exists at /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-
&gt; 0.56-0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 448.
&gt; Use of uninitialized value in -f at
&gt; /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-
&gt; 0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 270.
&gt; Use of uninitialized value in chdir at
&gt; /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-
&gt; 0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 468.
&gt; Use of chdir&#40;&#39;&#39;&#41; or chdir&#40;undef&#41; as chdir&#40;&#41; is deprecated at
&gt; /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-
&gt; 0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 468.
&gt; Use of uninitialized value $home in concatenation &#40;.&#41; or string at
&gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; 1/blib/lib/File/Save/Home.pm line 276.
&gt; Use of uninitialized value $subdir_top in concatenation &#40;.&#41; or string
&gt; at /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; 1/blib/lib/File/Save/Home.pm line 276.
&gt; Couldn&#39;t unlink /vmlinuz.old: Permission denied at
&gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; 1/blib/lib/File/Save/Home.pm line 273.
&gt; Couldn&#39;t unlink /installimage.conf: Permission denied at
&gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; 1/blib/lib/File/Save/Home.pm line 273.
&gt; Couldn&#39;t unlink /installimage.debug: Permission denied at
&gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; 1/blib/lib/File/Save/Home.pm line 273.
&gt; Couldn&#39;t unlink /vmlinuz: Permission denied at
&gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; 1/blib/lib/File/Save/Home.pm line 273.
&gt; Couldn&#39;t unlink /initrd.img: Permission denied at
&gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; 1/blib/lib/File/Save/Home.pm line 273.
&gt; ... &#40;etc&#41; ...
&gt; 
</div>
Sorry, for some reason my smoker did not use the newest version of File-Save-Home. With 0.10 I cannot reproduce the removal of / anymore. It still may fail like this:

...
Unable to create desired directory /home/cpansand/.modulemaker: File exists at /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-11/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 448.
Use of uninitialized value in -f at /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-11/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 270.
Use of uninitialized value in chdir at /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-11/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 468.

#   Failed test &#39;changed back to original directory after testing&#39;
#   at /opt/perl-5.24.1/lib/site_perl/5.24.1/Test/Builder.pm line 135.
Use of uninitialized value $home in -d at /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.10-11/blib/lib/File/Save/Home.pm line 261.
Use of uninitialized value $home in concatenation &#40;.&#41; or string at /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.10-11/blib/lib/File/Save/Home.pm line 261.
Home directory &#39;&#39; apparently lost at /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-11/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 469.
END failed--call queue aborted.
# Looks like your test exited with 2 just after 7.
t/license/sun.t ..............
Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
Failed 11/17 subtests
...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1713079" href="/Public/Bug/Display.html?id=111637#txn-1713079">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;29&nbsp;09:45:15&nbsp;2017</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1713079/920430/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/920430">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 11.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Feb 13 02:46:30 2017, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2017-02-13 02:33:14, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; On 2017-02-10 22:03:04, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; &gt; On Mon Jan 30 08:44:11 2017, ANDK wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; Here is another case of a test run that triggered the equivalent
&gt; &gt; &gt; &gt; of
&gt; &gt; &gt; &gt; &#39;rm -rf /&#39;, but fortunately some lucky circumstances stopped the
&gt; &gt; &gt; &gt; catastrophy in time and caught the activities in a logfile. I
&gt; &gt; &gt; &gt; append
&gt; &gt; &gt; &gt; a
&gt; &gt; &gt; &gt; few of the illustrative lines of the output.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; : CPAN::Reporter: make result is &#39;pass&#39;, No errors.
&gt; &gt; &gt; &gt; :   JKEENAN/ExtUtils-ModuleMaker-0.55.tar.gz
&gt; &gt; &gt; &gt; :   /usr/bin/make -- OK
&gt; &gt; &gt; &gt; : Running make test
&gt; &gt; &gt; &gt; : PERL_DL_NONLAZY=1 &#34;/tmp/basesmoker-reloperl-QWNp/bin/perl&#34; &#34;-
&gt; &gt; &gt; &gt; MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef
&gt; &gt; &gt; &gt; *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;,
&gt; &gt; &gt; &gt; &#39;blib/arch&#39;&#41;&#34;
&gt; &gt; &gt; &gt; t/01_ini.t t/03_quick.t t/04_compact.t t/05_abstract.t
&gt; &gt; &gt; &gt; t/06_build.t
&gt; &gt; &gt; &gt; t/07_proxy.t t/10_standard_text.t t/13_alt_block_new_method.t
&gt; &gt; &gt; &gt; t/14_mmkr_alt_block_new_method.t t/failsafe/201.t
&gt; &gt; &gt; &gt; t/failsafe/202.t
&gt; &gt; &gt; &gt; t/failsafe/203.t t/failsafe/204.t t/failsafe/205.t
&gt; &gt; &gt; &gt; t/failsafe/206.t
&gt; &gt; &gt; &gt; t/failsafe/207.t t/failsafe/208.t t/failsafe/209.t
&gt; &gt; &gt; &gt; t/failsafe/210.t
&gt; &gt; &gt; &gt; t/failsafe/211.t t/license/apache.t t/license/apache_1_1.t
&gt; &gt; &gt; &gt; t/license/artistic.t t/license/artistic_agg.t t/license/bsd.t
&gt; &gt; &gt; &gt; t/license/gpl.t t/license/gpl_2.t t/license/ibm.t
&gt; &gt; &gt; &gt; t/license/ibm_1_0.t
&gt; &gt; &gt; &gt; t/license/intel.t t/license/jabber.t t/license/jabber_1_0.t
&gt; &gt; &gt; &gt; t/license/lgpl.t t/license/lgpl_2_1.t t/license/libpng.t
&gt; &gt; &gt; &gt; t/license/looselips.t t/license/mit.t t/license/mitre.t
&gt; &gt; &gt; &gt; t/license/mozilla.t t/license/mozilla_1_0.t
&gt; &gt; &gt; &gt; t/license/mozilla_1_1.t
&gt; &gt; &gt; &gt; t/license/mpl.t t/license/mpl_1_0.t t/license/mpl_1_1.t
&gt; &gt; &gt; &gt; t/license/nethack.t t/license/nokia.t t/license/nokia_1_0a.t
&gt; &gt; &gt; &gt; t/license/nokos.t t/license/nokos_1_0a.t t/license/perl.t
&gt; &gt; &gt; &gt; t/license/python.t t/license/q.t t/license/q_1_0.t
&gt; &gt; &gt; &gt; t/license/r_bsd.t
&gt; &gt; &gt; &gt; t/license/ricoh.t t/license/ricoh_1_0.t t/license/sissl.t
&gt; &gt; &gt; &gt; t/license/sleepycat.t t/license/sun.t t/license/vovida.t
&gt; &gt; &gt; &gt; t/license/vovida_1_0.t t/license/zlib.t t/makedefaults/1201.t
&gt; &gt; &gt; &gt; t/makedefaults/1202.t t/makedefaults/1203.t t/miscargs/901.t
&gt; &gt; &gt; &gt; t/miscargs/902.t t/miscargs/903.t t/miscargs/904.t
&gt; &gt; &gt; &gt; t/miscargs/905.t
&gt; &gt; &gt; &gt; t/miscargs/906.t t/miscargs/907.t t/miscargs/908.t
&gt; &gt; &gt; &gt; t/miscargs/909.t
&gt; &gt; &gt; &gt; t/miscargs/910.t t/miscargs/911.t t/miscargs/912.t
&gt; &gt; &gt; &gt; t/miscargs/913.t
&gt; &gt; &gt; &gt; t/miscargs/914.t t/miscargs/915.t t/miscargs/916.t
&gt; &gt; &gt; &gt; t/miscargs/917.t
&gt; &gt; &gt; &gt; t/miscargs/918.t t/miscargs/919.t t/miscargs/920.t
&gt; &gt; &gt; &gt; t/miscargs/921.t
&gt; &gt; &gt; &gt; t/miscargs/922.t t/miscargs/923.t t/mmkr/801.t t/mmkr/802.t
&gt; &gt; &gt; &gt; t/mmkr/803.t t/mmkr/804.t t/mmkr/805.t t/mmkr/806.t t/mmkr/807.t
&gt; &gt; &gt; &gt; t/mmkr/808.t
&gt; &gt; &gt; &gt; : t/01_ini.t ........................ ok
&gt; &gt; &gt; &gt; [...]
&gt; &gt; &gt; &gt; : t/mmkr/801.t ...................... ok
&gt; &gt; &gt; &gt; : Unable to create desired directory /home/sand/.modulemaker:
&gt; &gt; &gt; &gt; File
&gt; &gt; &gt; &gt; exists at /tmp/loop_over_bdir-13369-fam6wS/ExtUtils-ModuleMaker-
&gt; &gt; &gt; &gt; 0.55-
&gt; &gt; &gt; &gt; 0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 448.
&gt; &gt; &gt; &gt;  :
&gt; &gt; &gt; &gt; : #   Failed test &#39;changed back to original directory after
&gt; &gt; &gt; &gt; testing&#39;
&gt; &gt; &gt; &gt; : #   at /home/sand/src/perl/repoperls/installed-
&gt; &gt; &gt; &gt; perls/host/k93msid/v5.25.9-58-
&gt; &gt; &gt; &gt; gbb78386f13/89ad/lib/site_perl/5.25.10/Test/Builder.pm line 135.
&gt; &gt; &gt; &gt; : Use of uninitialized value $home in concatenation &#40;.&#41; or string
&gt; &gt; &gt; &gt; at
&gt; &gt; &gt; &gt; /home/sand/src/perl/repoperls/installed-
&gt; &gt; &gt; &gt; perls/host/k93msid/v5.25.9-
&gt; &gt; &gt; &gt; 58-
&gt; &gt; &gt; &gt; gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line
&gt; &gt; &gt; &gt; 276.
&gt; &gt; &gt; &gt; : Use of uninitialized value $subdir_top in concatenation &#40;.&#41; or
&gt; &gt; &gt; &gt; string at /home/sand/src/perl/repoperls/installed-
&gt; &gt; &gt; &gt; perls/host/k93msid/v5.25.9-58-
&gt; &gt; &gt; &gt; gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line
&gt; &gt; &gt; &gt; 276.
&gt; &gt; &gt; &gt; : Couldn&#39;t unlink /sbin/iptables-save: Permission denied at
&gt; &gt; &gt; &gt; /home/sand/src/perl/repoperls/installed-
&gt; &gt; &gt; &gt; perls/host/k93msid/v5.25.9-
&gt; &gt; &gt; &gt; 58-
&gt; &gt; &gt; &gt; gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line
&gt; &gt; &gt; &gt; 273.
</div>&gt; &gt; &gt;
&gt; &gt; &gt; Andreas, Slaven:  In both of these reports, an uninitialized value
&gt; &gt; &gt; is
&gt; &gt; &gt; reported in File::Save::Home.  I have just now uploaded v0.10 of
&gt; &gt; &gt; File-
&gt; &gt; &gt; Save-Home to CPAN, wherein I croak if I can&#39;t remove a file or
&gt; &gt; &gt; directory.   Can you check that out?
</div>&gt; &gt;
&gt; &gt; Unfortunately the problem still exists. I could reproduce it on a
&gt; &gt; Ubuntu 16.04 system with two processes acting on the ExtUtils-
&gt; &gt; ModuleMaker-0.56 testsuite at the same time. Here&#39; an excerpt of the
&gt; &gt; log:
&gt; &gt;
&gt; &gt; ...
&gt; &gt; PERL_DL_NONLAZY=1 &#34;/opt/perl-5.22.2/bin/perl&#34; &#34;-
&gt; &gt; MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef
&gt; &gt; *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34;
&gt; &gt; t/01_ini.t t/03_quick.t t/04_compact.t t/05_abstract.t t/06_build.t
&gt; &gt; t/07_proxy.t t/10_standard_t
&gt; &gt; ext.t t/13_alt_block_new_method.t t/failsafe/201.t t/failsafe/202.t
&gt; &gt; t/failsafe/203.t t/failsafe/204.t t/failsafe/205.t t/failsafe/206.t
&gt; &gt; t/failsafe/207.t t/failsafe/208.t t/failsafe/209.t t/failsafe/210.t
&gt; &gt; t/failsafe/211.t t/license/apache.t t/license/apache_1_1.t t/l
&gt; &gt; icense/artistic.t t/license/artistic_agg.t t/license/bsd.t
&gt; &gt; t/license/gpl.t t/license/gpl_2.t t/license/ibm.t t/license/ibm_1_0.t
&gt; &gt; t/license/intel.t t/license/jabber.t t/license/jabber_1_0.t
&gt; &gt; t/license/lgpl.t t/license/lgpl_2_1.t t/license/libpng.t
&gt; &gt; t/license/looselips.
&gt; &gt; t t/license/mit.t t/license/mitre.t t/license/mozilla.t
&gt; &gt; t/license/mozilla_1_0.t t/license/mozilla_1_1.t t/license/mpl.t
&gt; &gt; t/license/mpl_1_0.t t/license/mpl_1_1.t t/license/nethack.t
&gt; &gt; t/license/nokia.t t/license/nokia_1_0a.t t/license/nokos.t
&gt; &gt; t/license/nokos_1_0a.t t/li
&gt; &gt; cense/perl.t t/license/python.t t/license/q.t t/license/q_1_0.t
&gt; &gt; t/license/r_bsd.t t/license/ricoh.t t/license/ricoh_1_0.t
&gt; &gt; t/license/sissl.t t/license/sleepycat.t t/license/sun.t
&gt; &gt; t/license/vovida.t t/license/vovida_1_0.t t/license/zlib.t
&gt; &gt; t/makedefaults/1201.t t/maked
&gt; &gt; efaults/1202.t t/miscargs/901.t t/miscargs/902.t t/miscargs/903.t
&gt; &gt; t/miscargs/904.t t/miscargs/905.t t/miscargs/906.t t/miscargs/907.t
&gt; &gt; t/miscargs/908.t t/miscargs/909.t t/miscargs/910.t t/miscargs/911.t
&gt; &gt; t/miscargs/912.t t/miscargs/913.t t/miscargs/914.t t/miscargs/91
&gt; &gt; 5.t t/miscargs/916.t t/miscargs/917.t t/miscargs/918.t
&gt; &gt; t/miscargs/919.t t/miscargs/920.t t/miscargs/921.t t/miscargs/922.t
&gt; &gt; t/miscargs/923.t
&gt; &gt; ...
&gt; &gt; t/license/lgpl_2_1.t ......... ok
&gt; &gt; Unable to create desired directory /home/cpansand/.modulemaker: File
&gt; &gt; exists at /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-
&gt; &gt; 0.56-0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 448.
&gt; &gt; Use of uninitialized value in -f at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-
&gt; &gt; 0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 270.
&gt; &gt; Use of uninitialized value in chdir at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-
&gt; &gt; 0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 468.
&gt; &gt; Use of chdir&#40;&#39;&#39;&#41; or chdir&#40;undef&#41; as chdir&#40;&#41; is deprecated at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-
&gt; &gt; 0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 468.
&gt; &gt; Use of uninitialized value $home in concatenation &#40;.&#41; or string at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; &gt; 1/blib/lib/File/Save/Home.pm line 276.
&gt; &gt; Use of uninitialized value $subdir_top in concatenation &#40;.&#41; or string
&gt; &gt; at /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; &gt; 1/blib/lib/File/Save/Home.pm line 276.
&gt; &gt; Couldn&#39;t unlink /vmlinuz.old: Permission denied at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; &gt; 1/blib/lib/File/Save/Home.pm line 273.
&gt; &gt; Couldn&#39;t unlink /installimage.conf: Permission denied at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; &gt; 1/blib/lib/File/Save/Home.pm line 273.
&gt; &gt; Couldn&#39;t unlink /installimage.debug: Permission denied at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; &gt; 1/blib/lib/File/Save/Home.pm line 273.
&gt; &gt; Couldn&#39;t unlink /vmlinuz: Permission denied at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; &gt; 1/blib/lib/File/Save/Home.pm line 273.
&gt; &gt; Couldn&#39;t unlink /initrd.img: Permission denied at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; &gt; 1/blib/lib/File/Save/Home.pm line 273.
&gt; &gt; ... &#40;etc&#41; ...
&gt; &gt;
</div>&gt; 
&gt; Sorry, for some reason my smoker did not use the newest version of
&gt; File-Save-Home. With 0.10 I cannot reproduce the removal of / anymore.
&gt; It still may fail like this:
&gt; 
&gt; ...
&gt; Unable to create desired directory /home/cpansand/.modulemaker: File
&gt; exists at /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-
&gt; 0.56-11/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 448.
&gt; Use of uninitialized value in -f at
&gt; /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-
&gt; 11/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 270.
&gt; Use of uninitialized value in chdir at
&gt; /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-
&gt; 11/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 468.
&gt; 
&gt; #   Failed test &#39;changed back to original directory after testing&#39;
&gt; #   at /opt/perl-5.24.1/lib/site_perl/5.24.1/Test/Builder.pm line 135.
&gt; Use of uninitialized value $home in -d at
&gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.10-
&gt; 11/blib/lib/File/Save/Home.pm line 261.
&gt; Use of uninitialized value $home in concatenation &#40;.&#41; or string at
&gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.10-
&gt; 11/blib/lib/File/Save/Home.pm line 261.
&gt; Home directory &#39;&#39; apparently lost at
&gt; /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-
&gt; 11/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 469.
&gt; END failed--call queue aborted.
&gt; # Looks like your test exited with 2 just after 7.
&gt; t/license/sun.t ..............
&gt; Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
&gt; Failed 11/17 subtests
&gt; ...
</div>
Slaven, Andreas:

I have not forgotten about this RT ticket.  In recent months I have studied, thought a lot about, and, hopefully, learned a lot about race conditions and TOCTTOU errors.  I don&#39;t yet have a solution for the problems discussed in this ticket, but I would like to ask for your feedback on one documentation improvement.

ExtUtils::ModuleMaker makes use of File::Save::Home to test the placement of a personal preferences &#40;&#34;dot-rc&#34;&#41; file underneath the user&#39;s home directory.  Currently, File::Save::Home &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~jkeenan/File-Save-Home-0.10/lib/File/Save/Home.pm#DESCRIPTION&#41;">http://search.cpan.org/~jkeenan/File-Save-Home-0.10/lib/File/Save/Home.pm#DESCRIPTION&#41;</a></span> is described as follows:

#####
In the course of deploying an application on another user&#39;s system, you sometimes need to place a file in or underneath that user&#39;s home directory. Can you do so safely?

This Perl extension provides several functions which try to determine whether you can, indeed, safely create directories and files underneath a user&#39;s home directory. Among other things, if you are placing a file in such a location only temporarily -- say, for testing purposes -- you can temporarily hide any already existing file with the same name and restore it to its original name and timestamps when you are done.
#####

I propose to add the patch attached to File-Save-Home&#39;s documentation immediately after the DESCRIPTION above.  I would then use the content of the patch to guide me in revising the documentation of File-Save-Home&#39;s exportable functions.  That would in turn shape my further response to the problems described in this RT and elsewhere.

So, could you please review the patch attached and let me know if and where my understanding of these problems is incomplete?

Thank you very much.
Jim Keenan
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0001-Document-safety-limitations-of-File-Save-Home.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1713079/920431/0001-Document-safety-limitations-of-File-Save-Home.patch">Download 0001-Document-safety-limitations-of-File-Save-Home.patch</a><br />
<span class="downloadcontenttype">text/x-diff 3.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 8c6f7ab71b26947d0e998540ad791577ee7597be Mon Sep 17 00:00:00 2001
From: James E Keenan &lt;jkeenan@cpan.org&gt;
Date: Wed, 29 Mar 2017 09:33:12 -0400
Subject: [PATCH] Document safety limitations of File::Save::Home.

---
 lib/File/Save/Home.pm | 55 +++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 55 insertions&#40;+&#41;

diff --git a/lib/File/Save/Home.pm b/lib/File/Save/Home.pm
index a63570f..3f76c32 100644
--- a/lib/File/Save/Home.pm
+++ b/lib/File/Save/Home.pm
@@ -99,6 +99,61 @@ only temporarily -- say, for testing purposes -- you can temporarily hide
 any already existing file with the same name and restore it to its original
 name and timestamps when you are done.
 
+=head2 Limitations
+
+The preceding description was written in 2005.  Experience has shown that any
+claim that one can make about the B&lt;safety&gt; of the creation or deletion of
+directories and files underneath a user&#39;s home directory must be qualified.
+File::Save::Home is satisfactory for the use case for which it was originally
+designed, but there are other situations where it falls short.
+
+The original use case for which File::Save::Home was designed was to support
+the placement of B&lt;personal preference files&gt; in a user&#39;s home directory.
+Such personal preference files are often referred to as B&lt;dot-rc files&gt;
+because their names typically start with a C&lt;.&gt; character to render them
+hidden from commands like C&lt;ls&gt; and end in C&lt;rc&gt; much like C&lt;.bashrc&gt; or
+&lt;.shrc&gt;.  A developer using CPAN::Mini, for example, often makes use of
+C&lt;.minicpanrc&gt; to store the developer&#39;s preferred CPAN mirror.
+File::Save::Home was created specifically to support the creation of a
+C&lt;.modulemakerrc&gt; file by users of ExtUtils::ModuleMaker and a C&lt;.podmultirc&gt;
+file by users of Pod::Multi.  &#40;ExtUtils::ModuleMaker and Pod::Multi are
+maintained by the author of File::Save::Home.&#41;  These libraries are
+B&lt;developer&#39;s tools&gt;, I&lt;i.e.,&gt; they are intended to assist individual humans
+in software development rather than being used &#34;in production.&#34;  As such,
+their use of dot-rc files implicitly assumes:
+
+=over 4
+
+=item *
+
+Only one user is concerned with the status of the directories and files,
+including dot-rc files, underneath the user&#39;s home directory.
+
+=item *
+
+Only one user has permissions to create, modify or remove directories and
+files underneath the user&#39;s home directory -- an assumption that is easily
+violated by a superuser such as C&lt;root&gt;.
+
+=item *
+
+The user is running processes to create, modify or remove directories and
+files underneath the user&#39;s home directory B&lt;one-at-a-time&gt;, C&lt;i.e.,&gt; the user
+is B&lt;not&gt; running such processes B&lt;in parallel&gt;.  Running such processes in
+parallel would raise the possibility, for example, of process trying to rename
+a dot-rc file that a second, parallel process had already deleted.
+
+=back
+
+When either the second or third assumption above is violated, we have the
+possibility of B&lt;race conditions&gt;
+&#40;L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://en.wikipedia.org/wiki/Race_condition">https://en.wikipedia.org/wiki/Race_condition</a></span>&gt;&#41; and B&lt;time of check to time
+of use &#40;TOCTTOU&#41; errors&gt;
+&#40;L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://en.wikipedia.org/wiki/Time_of_check_to_time_of_use">https://en.wikipedia.org/wiki/Time_of_check_to_time_of_use</a></span>&gt;&#41;.  Such
+conditions may lead to either spurious testing failures &#40;I&lt;e.g.,&gt; when
+CPANtesteers run tests in parallel on libraries using File::Save::Home&#41; or to
+security violations.
+
 =head1 USAGE
 
 =head2 C&lt;get_home_directory&#40;&#41;&gt;
-- 
2.7.4

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1757229" href="/Public/Bug/Display.html?id=111637#txn-1757229">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;11&nbsp;15:54:15&nbsp;2017</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1757229/945534/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/945534">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 12.3k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1757264" href="/Public/Bug/Display.html?id=111637#txn-1757264">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;11&nbsp;20:20:03&nbsp;2017</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1757264/945555/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/945555">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 13.2k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1757267" href="/Public/Bug/Display.html?id=111637#txn-1757267">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;11&nbsp;20:20:04&nbsp;2017</span>
    <span class="description">jkeenan [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1757269" href="/Public/Bug/Display.html?id=111637#txn-1757269">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;11&nbsp;20:20:22&nbsp;2017</span>
    <span class="description">jkeenan [...] cpan.org -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1762930" href="/Public/Bug/Display.html?id=111637#txn-1762930">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;21&nbsp;12:07:44&nbsp;2017</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> rGeoffrey [...] PlatypiVentures.com</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1762930/948758/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/948758">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jan 30 10:53:57 2017, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Feb 01 15:13:38 2016, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; There&#39;s a number of test failures visible at
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=ExtUtils-ModuleMaker%200.55">http://matrix.cpantesters.org/?dist=ExtUtils-ModuleMaker%200.55</a></span> and I
&gt; &gt; suspect that these fails are caused by parallel test runs &#40;e.g.
&gt; &gt; ANDK&#39;s
&gt; &gt; smoker is known to test for many perl versions in parallel on the
&gt; &gt; same
&gt; &gt; machine&#41;.
&gt; &gt;
</div></div>
[snip]

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Slaven, Andreas:  What I&#39;m going to do as a diagnostic is to first
&gt; release a new version to CPAN which eliminates all the test files that
&gt; call the scripts/modulemaker utility.
&gt; 
</div>
[snip]

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; That appears to be where all reported test failures are concentrated.
&gt; 
&gt; Taking that step should alleviate the immediate problem and buy me
&gt; some time to explore further.
&gt; 
</div>
Slaven, Andreas:

Much earlier this year &#40;Jan 30 2017&#41;, I released to CPAN ExtUtils-ModuleMaker-0.56.tar.gz.  In that tarball I removed entirely all tests of the &#39;scripts/modulemaker&#39; executable file.  That was intended as a *partial* to the problem of unsafe parallel runs discussed in this ticket.

I&#39;ve now encountered bugs in the &#39;modulemaker&#39; utility which I would like to fix.  I have to be able to test those fixes.  To do so, I would like to restore the deleted tests to the distribution *but under a new &#39;xt/&#39; directory* rather than under &#39;t/&#39;.  In addition, I would like to modify Makefile.PL such that the &#39;test&#39; target includes the files under &#39;xt/&#39; *but only when $ENV{PERL_MODULEMAKER_AUTHOR_TESTING} is set to a true value*.  As in the patch attached.

I presume that a CPANtester such as yourself would never say &#39;export PERL_MODULEMAKER_AUTHOR_TESTING=1&#39; prior to a test run and that hence &#40;a&#41; the &#39;xt/&#39; tests would never be run by a CPAN tester; and &#40;b&#41; the problem discussed in this RT would, at least, not grow worse.

Is that presumption correct?

Thank you very much.
Jim Keenan
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> test-modulemaker-makefile-pl.diff</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1762930/948759/test-modulemaker-makefile-pl.diff">Download test-modulemaker-makefile-pl.diff</a><br />
<span class="downloadcontenttype">text/x-diff 1017b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff --git a/Makefile.PL b/Makefile.PL
index ac06482..4051766 100644
--- a/Makefile.PL
+++ b/Makefile.PL
@@ -3,6 +3,9 @@ require 5.006;
 
 my $mm_ver = ExtUtils::MakeMaker-&gt;VERSION;
 
+my $regular_tests_str = join q{ }, map {glob} qw&#40; t/*.t t/*/*.t &#41;;
+my $author_tests_str  = join q{ }, map {glob} qw&#40; xt/*.t xt/*/*.t &#41;;
+
 WriteMakefile&#40;
     NAME         =&gt; &#39;ExtUtils::ModuleMaker&#39;,
     VERSION_FROM =&gt; &#39;lib/ExtUtils/ModuleMaker.pm&#39;,
@@ -21,7 +24,11 @@ WriteMakefile&#40;
                      &#39;Test::More&#39; =&gt; 0.44,
                     },
     LICENSE      =&gt; &#34;perl&#34;,
-    test        =&gt; { TESTS =&gt; join q{ }, map {glob} qw&#40; t/*.t t/*/*.t &#41; },
+    test        =&gt; &#40;
+                    $ENV{PERL_MODULEMAKER_AUTHOR_TESTING}
+                        ? { TESTS =&gt; join q{ } =&gt; &#40; $regular_tests_str, $author_tests_str &#41; }
+                        : { TESTS =&gt; $regular_tests_str }
+                &#41;,
     &#40;$mm_ver &lt; 6.46 ? &#40;&#41; : &#40;META_MERGE =&gt; {
         &#39;meta-spec&#39; =&gt; { version =&gt; 2 },
         dynamic_config =&gt; 1,
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1785024" href="/Public/Bug/Display.html?id=111637#txn-1785024">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;03&nbsp;14:18:27&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> rGeoffrey [...] PlatypiVentures.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1785024/960257/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/960257">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 10.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Feb 13 02:46:30 2017, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2017-02-13 02:33:14, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; On 2017-02-10 22:03:04, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; &gt; On Mon Jan 30 08:44:11 2017, ANDK wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; Here is another case of a test run that triggered the equivalent
&gt; &gt; &gt; &gt; of
&gt; &gt; &gt; &gt; &#39;rm -rf /&#39;, but fortunately some lucky circumstances stopped the
&gt; &gt; &gt; &gt; catastrophy in time and caught the activities in a logfile. I
&gt; &gt; &gt; &gt; append
&gt; &gt; &gt; &gt; a
&gt; &gt; &gt; &gt; few of the illustrative lines of the output.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; : CPAN::Reporter: make result is &#39;pass&#39;, No errors.
&gt; &gt; &gt; &gt; :   JKEENAN/ExtUtils-ModuleMaker-0.55.tar.gz
&gt; &gt; &gt; &gt; :   /usr/bin/make -- OK
&gt; &gt; &gt; &gt; : Running make test
&gt; &gt; &gt; &gt; : PERL_DL_NONLAZY=1 &#34;/tmp/basesmoker-reloperl-QWNp/bin/perl&#34; &#34;-
&gt; &gt; &gt; &gt; MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef
&gt; &gt; &gt; &gt; *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;,
&gt; &gt; &gt; &gt; &#39;blib/arch&#39;&#41;&#34;
&gt; &gt; &gt; &gt; t/01_ini.t t/03_quick.t t/04_compact.t t/05_abstract.t
&gt; &gt; &gt; &gt; t/06_build.t
&gt; &gt; &gt; &gt; t/07_proxy.t t/10_standard_text.t t/13_alt_block_new_method.t
&gt; &gt; &gt; &gt; t/14_mmkr_alt_block_new_method.t t/failsafe/201.t
&gt; &gt; &gt; &gt; t/failsafe/202.t
&gt; &gt; &gt; &gt; t/failsafe/203.t t/failsafe/204.t t/failsafe/205.t
&gt; &gt; &gt; &gt; t/failsafe/206.t
&gt; &gt; &gt; &gt; t/failsafe/207.t t/failsafe/208.t t/failsafe/209.t
&gt; &gt; &gt; &gt; t/failsafe/210.t
&gt; &gt; &gt; &gt; t/failsafe/211.t t/license/apache.t t/license/apache_1_1.t
&gt; &gt; &gt; &gt; t/license/artistic.t t/license/artistic_agg.t t/license/bsd.t
&gt; &gt; &gt; &gt; t/license/gpl.t t/license/gpl_2.t t/license/ibm.t
&gt; &gt; &gt; &gt; t/license/ibm_1_0.t
&gt; &gt; &gt; &gt; t/license/intel.t t/license/jabber.t t/license/jabber_1_0.t
&gt; &gt; &gt; &gt; t/license/lgpl.t t/license/lgpl_2_1.t t/license/libpng.t
&gt; &gt; &gt; &gt; t/license/looselips.t t/license/mit.t t/license/mitre.t
&gt; &gt; &gt; &gt; t/license/mozilla.t t/license/mozilla_1_0.t
&gt; &gt; &gt; &gt; t/license/mozilla_1_1.t
&gt; &gt; &gt; &gt; t/license/mpl.t t/license/mpl_1_0.t t/license/mpl_1_1.t
&gt; &gt; &gt; &gt; t/license/nethack.t t/license/nokia.t t/license/nokia_1_0a.t
&gt; &gt; &gt; &gt; t/license/nokos.t t/license/nokos_1_0a.t t/license/perl.t
&gt; &gt; &gt; &gt; t/license/python.t t/license/q.t t/license/q_1_0.t
&gt; &gt; &gt; &gt; t/license/r_bsd.t
&gt; &gt; &gt; &gt; t/license/ricoh.t t/license/ricoh_1_0.t t/license/sissl.t
&gt; &gt; &gt; &gt; t/license/sleepycat.t t/license/sun.t t/license/vovida.t
&gt; &gt; &gt; &gt; t/license/vovida_1_0.t t/license/zlib.t t/makedefaults/1201.t
&gt; &gt; &gt; &gt; t/makedefaults/1202.t t/makedefaults/1203.t t/miscargs/901.t
&gt; &gt; &gt; &gt; t/miscargs/902.t t/miscargs/903.t t/miscargs/904.t
&gt; &gt; &gt; &gt; t/miscargs/905.t
&gt; &gt; &gt; &gt; t/miscargs/906.t t/miscargs/907.t t/miscargs/908.t
&gt; &gt; &gt; &gt; t/miscargs/909.t
&gt; &gt; &gt; &gt; t/miscargs/910.t t/miscargs/911.t t/miscargs/912.t
&gt; &gt; &gt; &gt; t/miscargs/913.t
&gt; &gt; &gt; &gt; t/miscargs/914.t t/miscargs/915.t t/miscargs/916.t
&gt; &gt; &gt; &gt; t/miscargs/917.t
&gt; &gt; &gt; &gt; t/miscargs/918.t t/miscargs/919.t t/miscargs/920.t
&gt; &gt; &gt; &gt; t/miscargs/921.t
&gt; &gt; &gt; &gt; t/miscargs/922.t t/miscargs/923.t t/mmkr/801.t t/mmkr/802.t
&gt; &gt; &gt; &gt; t/mmkr/803.t t/mmkr/804.t t/mmkr/805.t t/mmkr/806.t t/mmkr/807.t
&gt; &gt; &gt; &gt; t/mmkr/808.t
&gt; &gt; &gt; &gt; : t/01_ini.t ........................ ok
&gt; &gt; &gt; &gt; [...]
&gt; &gt; &gt; &gt; : t/mmkr/801.t ...................... ok
&gt; &gt; &gt; &gt; : Unable to create desired directory /home/sand/.modulemaker:
&gt; &gt; &gt; &gt; File
&gt; &gt; &gt; &gt; exists at /tmp/loop_over_bdir-13369-fam6wS/ExtUtils-ModuleMaker-
&gt; &gt; &gt; &gt; 0.55-
&gt; &gt; &gt; &gt; 0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 448.
&gt; &gt; &gt; &gt;  :
&gt; &gt; &gt; &gt; : #   Failed test &#39;changed back to original directory after
&gt; &gt; &gt; &gt; testing&#39;
&gt; &gt; &gt; &gt; : #   at /home/sand/src/perl/repoperls/installed-
&gt; &gt; &gt; &gt; perls/host/k93msid/v5.25.9-58-
&gt; &gt; &gt; &gt; gbb78386f13/89ad/lib/site_perl/5.25.10/Test/Builder.pm line 135.
&gt; &gt; &gt; &gt; : Use of uninitialized value $home in concatenation &#40;.&#41; or string
&gt; &gt; &gt; &gt; at
&gt; &gt; &gt; &gt; /home/sand/src/perl/repoperls/installed-
&gt; &gt; &gt; &gt; perls/host/k93msid/v5.25.9-
&gt; &gt; &gt; &gt; 58-
&gt; &gt; &gt; &gt; gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line
&gt; &gt; &gt; &gt; 276.
&gt; &gt; &gt; &gt; : Use of uninitialized value $subdir_top in concatenation &#40;.&#41; or
&gt; &gt; &gt; &gt; string at /home/sand/src/perl/repoperls/installed-
&gt; &gt; &gt; &gt; perls/host/k93msid/v5.25.9-58-
&gt; &gt; &gt; &gt; gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line
&gt; &gt; &gt; &gt; 276.
&gt; &gt; &gt; &gt; : Couldn&#39;t unlink /sbin/iptables-save: Permission denied at
&gt; &gt; &gt; &gt; /home/sand/src/perl/repoperls/installed-
&gt; &gt; &gt; &gt; perls/host/k93msid/v5.25.9-
&gt; &gt; &gt; &gt; 58-
&gt; &gt; &gt; &gt; gbb78386f13/89ad/lib/site_perl/5.25.10/File/Save/Home.pm line
&gt; &gt; &gt; &gt; 273.
</div>&gt; &gt; &gt;
&gt; &gt; &gt; Andreas, Slaven:  In both of these reports, an uninitialized value
&gt; &gt; &gt; is
&gt; &gt; &gt; reported in File::Save::Home.  I have just now uploaded v0.10 of
&gt; &gt; &gt; File-
&gt; &gt; &gt; Save-Home to CPAN, wherein I croak if I can&#39;t remove a file or
&gt; &gt; &gt; directory.   Can you check that out?
</div>&gt; &gt;
&gt; &gt; Unfortunately the problem still exists. I could reproduce it on a
&gt; &gt; Ubuntu 16.04 system with two processes acting on the ExtUtils-
&gt; &gt; ModuleMaker-0.56 testsuite at the same time. Here&#39; an excerpt of the
&gt; &gt; log:
&gt; &gt;
&gt; &gt; ...
&gt; &gt; PERL_DL_NONLAZY=1 &#34;/opt/perl-5.22.2/bin/perl&#34; &#34;-
&gt; &gt; MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef
&gt; &gt; *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34;
&gt; &gt; t/01_ini.t t/03_quick.t t/04_compact.t t/05_abstract.t t/06_build.t
&gt; &gt; t/07_proxy.t t/10_standard_t
&gt; &gt; ext.t t/13_alt_block_new_method.t t/failsafe/201.t t/failsafe/202.t
&gt; &gt; t/failsafe/203.t t/failsafe/204.t t/failsafe/205.t t/failsafe/206.t
&gt; &gt; t/failsafe/207.t t/failsafe/208.t t/failsafe/209.t t/failsafe/210.t
&gt; &gt; t/failsafe/211.t t/license/apache.t t/license/apache_1_1.t t/l
&gt; &gt; icense/artistic.t t/license/artistic_agg.t t/license/bsd.t
&gt; &gt; t/license/gpl.t t/license/gpl_2.t t/license/ibm.t t/license/ibm_1_0.t
&gt; &gt; t/license/intel.t t/license/jabber.t t/license/jabber_1_0.t
&gt; &gt; t/license/lgpl.t t/license/lgpl_2_1.t t/license/libpng.t
&gt; &gt; t/license/looselips.
&gt; &gt; t t/license/mit.t t/license/mitre.t t/license/mozilla.t
&gt; &gt; t/license/mozilla_1_0.t t/license/mozilla_1_1.t t/license/mpl.t
&gt; &gt; t/license/mpl_1_0.t t/license/mpl_1_1.t t/license/nethack.t
&gt; &gt; t/license/nokia.t t/license/nokia_1_0a.t t/license/nokos.t
&gt; &gt; t/license/nokos_1_0a.t t/li
&gt; &gt; cense/perl.t t/license/python.t t/license/q.t t/license/q_1_0.t
&gt; &gt; t/license/r_bsd.t t/license/ricoh.t t/license/ricoh_1_0.t
&gt; &gt; t/license/sissl.t t/license/sleepycat.t t/license/sun.t
&gt; &gt; t/license/vovida.t t/license/vovida_1_0.t t/license/zlib.t
&gt; &gt; t/makedefaults/1201.t t/maked
&gt; &gt; efaults/1202.t t/miscargs/901.t t/miscargs/902.t t/miscargs/903.t
&gt; &gt; t/miscargs/904.t t/miscargs/905.t t/miscargs/906.t t/miscargs/907.t
&gt; &gt; t/miscargs/908.t t/miscargs/909.t t/miscargs/910.t t/miscargs/911.t
&gt; &gt; t/miscargs/912.t t/miscargs/913.t t/miscargs/914.t t/miscargs/91
&gt; &gt; 5.t t/miscargs/916.t t/miscargs/917.t t/miscargs/918.t
&gt; &gt; t/miscargs/919.t t/miscargs/920.t t/miscargs/921.t t/miscargs/922.t
&gt; &gt; t/miscargs/923.t
&gt; &gt; ...
&gt; &gt; t/license/lgpl_2_1.t ......... ok
&gt; &gt; Unable to create desired directory /home/cpansand/.modulemaker: File
&gt; &gt; exists at /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-
&gt; &gt; 0.56-0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 448.
&gt; &gt; Use of uninitialized value in -f at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-
&gt; &gt; 0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 270.
&gt; &gt; Use of uninitialized value in chdir at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-
&gt; &gt; 0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 468.
&gt; &gt; Use of chdir&#40;&#39;&#39;&#41; or chdir&#40;undef&#41; as chdir&#40;&#41; is deprecated at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-
&gt; &gt; 0/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 468.
&gt; &gt; Use of uninitialized value $home in concatenation &#40;.&#41; or string at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; &gt; 1/blib/lib/File/Save/Home.pm line 276.
&gt; &gt; Use of uninitialized value $subdir_top in concatenation &#40;.&#41; or string
&gt; &gt; at /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; &gt; 1/blib/lib/File/Save/Home.pm line 276.
&gt; &gt; Couldn&#39;t unlink /vmlinuz.old: Permission denied at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; &gt; 1/blib/lib/File/Save/Home.pm line 273.
&gt; &gt; Couldn&#39;t unlink /installimage.conf: Permission denied at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; &gt; 1/blib/lib/File/Save/Home.pm line 273.
&gt; &gt; Couldn&#39;t unlink /installimage.debug: Permission denied at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; &gt; 1/blib/lib/File/Save/Home.pm line 273.
&gt; &gt; Couldn&#39;t unlink /vmlinuz: Permission denied at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; &gt; 1/blib/lib/File/Save/Home.pm line 273.
&gt; &gt; Couldn&#39;t unlink /initrd.img: Permission denied at
&gt; &gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.09-
&gt; &gt; 1/blib/lib/File/Save/Home.pm line 273.
&gt; &gt; ... &#40;etc&#41; ...
&gt; &gt;
</div>&gt; 
&gt; Sorry, for some reason my smoker did not use the newest version of
&gt; File-Save-Home. With 0.10 I cannot reproduce the removal of / anymore.
&gt; It still may fail like this:
&gt; 
&gt; ...
&gt; Unable to create desired directory /home/cpansand/.modulemaker: File
&gt; exists at /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-
&gt; 0.56-11/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 448.
&gt; Use of uninitialized value in -f at
&gt; /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-
&gt; 11/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 270.
&gt; Use of uninitialized value in chdir at
&gt; /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-
&gt; 11/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 468.
&gt; 
&gt; #   Failed test &#39;changed back to original directory after testing&#39;
&gt; #   at /opt/perl-5.24.1/lib/site_perl/5.24.1/Test/Builder.pm line 135.
&gt; Use of uninitialized value $home in -d at
&gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.10-
&gt; 11/blib/lib/File/Save/Home.pm line 261.
&gt; Use of uninitialized value $home in concatenation &#40;.&#41; or string at
&gt; /home/cpansand/.cpan/build/2017021306/File-Save-Home-0.10-
&gt; 11/blib/lib/File/Save/Home.pm line 261.
&gt; Home directory &#39;&#39; apparently lost at
&gt; /home/cpansand/.cpan/build/2017021306/ExtUtils-ModuleMaker-0.56-
&gt; 11/blib/lib/ExtUtils/ModuleMaker/Auxiliary.pm line 469.
&gt; END failed--call queue aborted.
&gt; # Looks like your test exited with 2 just after 7.
&gt; t/license/sun.t ..............
&gt; Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
&gt; Failed 11/17 subtests
&gt; ...
</div>
I released ExtUtils-ModuleMaker version 0.57 to CPAN yesterday.  This version should address the concerns raised in this ticket.

* It completely eliminates dependences on File-Save-Home in favor of File-HomeDir.

* It adapts code from CPAN-Reporter&#39;s test suite to mock a user&#39;s home directory.  All relevant test files use this technique to construct a tempdir which masquerade as a homedir and then other tempdirs for specific unit tests.

As a result, to the best of my understanding the EU-MM test suite no longer touches a tester&#39;s real home directory.

I&#39;m going to keep this ticket open for a while because I am considering restoring some of the tests that I removed from the test suite a couple of years ago and adapting them to this new, better technique.

Please let me know of any anomalies you find.

Thank you very much.
Jim Keenan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1785028" href="/Public/Bug/Display.html?id=111637#txn-1785028">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;03&nbsp;14:18:28&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1785315" href="/Public/Bug/Display.html?id=111637#txn-1785315">#</a>      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;05&nbsp;19:12:55&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1785317" href="/Public/Bug/Display.html?id=111637#txn-1785317">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sat&nbsp;May&nbsp;05&nbsp;19:12:55&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Fixed in 0.58 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.722736</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
