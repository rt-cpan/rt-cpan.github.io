<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #25377 for ExtUtils-Manifest: [PATCH] fix VMS test failures</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #25377 for ExtUtils-Manifest: [PATCH] fix VMS test failures</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=ExtUtils-Manifest">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=ExtUtils-Manifest">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=ExtUtils-Manifest">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=ExtUtils-Manifest">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="http://github.com/Perl-Toolchain-Gang/ExtUtils-Manifest/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/ExtUtils-Manifest">ExtUtils-Manifest CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">25377</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=ExtUtils-Manifest">ExtUtils-Manifest</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
cberry [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-40882-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.51    </td>
  </tr>
  <tr id="CF-40883-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




manifest.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/297138/134474/manifest.patch">
Sun Mar 11 19:40:11 2007 (2.1k) by cberry [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=25377">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-297138" href="/Public/Bug/Display.html?id=25377#txn-297138">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;11&nbsp;19:40:11&nbsp;2007</span>
    <span class="description">cberry [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [PATCH] fix VMS test failures</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/297138/134471/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/134471">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The attached patch fixes Manifest.t failures currently appearing in blead.  It removes some 
VMS-specific clobberng of the key/value pair in mkmanifest&#40;&#41; just before writing a line out to 
the file.  This only affected the &#34;yarrow&#34; test example because that&#39;s the key that had a value.  
I have no idea why that code was in there in the first place, but removing it seems to get 
things working again.  

I also &#40;on VMS only&#41; use underscores instead of dots in the filenames of backup files since 
multiple dots are illegal in filenames on older systems and require awkward escaping on 
newer systems.

Here it is in-line and also attached.

--- lib/ExtUtils/Manifest.pm;-0 Wed Mar  7 22:13:24 2007
+++ lib/ExtUtils/Manifest.pm    Sun Mar 11 17:26:42 2007
@@ -13,7 +13,7 @@ use vars qw&#40;$VERSION @ISA @EXPORT_OK
           $Is_MacOS $Is_VMS
           $Debug $Verbose $Quiet $MANIFEST $DEFAULT_MSKIP&#41;;

-$VERSION = &#39;1.51&#39;;
+$VERSION = &#39;1.51_01&#39;;
 @ISA=&#40;&#39;Exporter&#39;&#41;;
 @EXPORT_OK = qw&#40;mkmanifest
                 manicheck  filecheck  fullcheck  skipcheck
@@ -93,7 +93,9 @@ sub mkmanifest {
     my $read = &#40;-r &#39;MANIFEST&#39; &#38;&#38; maniread&#40;&#41;&#41; or $manimiss++;
     $read = {} if $manimiss;
     local *M;
-    rename $MANIFEST, &#34;$MANIFEST.bak&#34; unless $manimiss;
+    my $bakbase = $MANIFEST;
+    $bakbase =~ s/\./_/g if $Is_VMS; # avoid double dots
+    rename $MANIFEST, &#34;$bakbase.bak&#34; unless $manimiss;
     open M, &#34;&gt;$MANIFEST&#34; or die &#34;Could not open $MANIFEST: $!&#34;;
     my $skip = _maniskip&#40;&#41;;
     my $found = manifind&#40;&#41;;
@@ -112,7 +114,6 @@ sub mkmanifest {
            warn &#34;Added to $MANIFEST: $file\n&#34; unless exists $read-&gt;{$file};
        }
        my $text = $all{$file};
-       &#40;$file,$text&#41; = split&#40;/\s+/,$text,2&#41; if $Is_VMS &#38;&#38; $text;
        $file = _unmacify&#40;$file&#41;;
        my $tabs = &#40;5 - &#40;length&#40;$file&#41;+1&#41;/8&#41;;
        $tabs = 1 if $tabs &lt; 1;
@@ -405,8 +406,10 @@ sub _check_mskip_directives {
     }
     close M;
     return unless $flag;
-    rename $mfile, &#34;$mfile.bak&#34;;
-    warn &#34;Debug: Saving original $mfile as $mfile.bak\n&#34; if $Debug;
+    my $bakbase = $mfile;
+    $bakbase =~ s/\./_/g if $Is_VMS;  # avoid double dots
+    rename $mfile, &#34;$bakbase.bak&#34;;
+    warn &#34;Debug: Saving original $mfile as $bakbase.bak\n&#34; if $Debug;
     unless &#40;open M, &#34;&gt;$mfile&#34;&#41; {
         warn &#34;Problem opening $mfile: $!&#34;;
         return;
--- lib/ExtUtils/t/Manifest.t;-0        Wed Mar  7 22:13:25 2007
+++ lib/ExtUtils/t/Manifest.t   Sun Mar 11 17:23:32 2007
@@ -249,7 +249,8 @@ is&#40; $files-&gt;{foobar}, &#39;&#39;,    &#39;
         &#39;mymanifest.skip excluded via mydefault.skip&#39; &#41;;
     ok&#40; ! exists $files-&gt;{&#39;mydefault.skip&#39;},
         &#39;mydefault.skip excluded via mydefault.skip&#39; &#41;;
-    $Files{&#34;$_.bak&#34;}++ for &#40;qw&#40;MANIFEST MANIFEST.SKIP&#41;&#41;;
+    my $extsep = $Is_VMS ? &#39;_&#39; : &#39;.&#39;;
+    $Files{&#34;$_.bak&#34;}++ for &#40;&#39;MANIFEST&#39;, &#34;MANIFEST${extsep}SKIP&#34;&#41;;
 }

 add_file&#40;&#39;MANIFEST&#39;   =&gt; &#39;Makefile.PL&#39;&#41;;
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> manifest.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/297138/134474/manifest.patch">Download manifest.patch</a><br />
<span class="downloadcontenttype">text/x-diff 2.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/ExtUtils/Manifest.pm;-0	Wed Mar  7 22:13:24 2007
+++ lib/ExtUtils/Manifest.pm	Sun Mar 11 17:26:42 2007
@@ -13,7 +13,7 @@ use vars qw&#40;$VERSION @ISA @EXPORT_OK 
           $Is_MacOS $Is_VMS 
           $Debug $Verbose $Quiet $MANIFEST $DEFAULT_MSKIP&#41;;
 
-$VERSION = &#39;1.51&#39;;
+$VERSION = &#39;1.51_01&#39;;
 @ISA=&#40;&#39;Exporter&#39;&#41;;
 @EXPORT_OK = qw&#40;mkmanifest
                 manicheck  filecheck  fullcheck  skipcheck
@@ -93,7 +93,9 @@ sub mkmanifest {
     my $read = &#40;-r &#39;MANIFEST&#39; &#38;&#38; maniread&#40;&#41;&#41; or $manimiss++;
     $read = {} if $manimiss;
     local *M;
-    rename $MANIFEST, &#34;$MANIFEST.bak&#34; unless $manimiss;
+    my $bakbase = $MANIFEST;
+    $bakbase =~ s/\./_/g if $Is_VMS; # avoid double dots
+    rename $MANIFEST, &#34;$bakbase.bak&#34; unless $manimiss;
     open M, &#34;&gt;$MANIFEST&#34; or die &#34;Could not open $MANIFEST: $!&#34;;
     my $skip = _maniskip&#40;&#41;;
     my $found = manifind&#40;&#41;;
@@ -112,7 +114,6 @@ sub mkmanifest {
 	    warn &#34;Added to $MANIFEST: $file\n&#34; unless exists $read-&gt;{$file};
 	}
 	my $text = $all{$file};
-	&#40;$file,$text&#41; = split&#40;/\s+/,$text,2&#41; if $Is_VMS &#38;&#38; $text;
 	$file = _unmacify&#40;$file&#41;;
 	my $tabs = &#40;5 - &#40;length&#40;$file&#41;+1&#41;/8&#41;;
 	$tabs = 1 if $tabs &lt; 1;
@@ -405,8 +406,10 @@ sub _check_mskip_directives {
     }
     close M;
     return unless $flag;
-    rename $mfile, &#34;$mfile.bak&#34;;
-    warn &#34;Debug: Saving original $mfile as $mfile.bak\n&#34; if $Debug;
+    my $bakbase = $mfile;
+    $bakbase =~ s/\./_/g if $Is_VMS;  # avoid double dots
+    rename $mfile, &#34;$bakbase.bak&#34;;
+    warn &#34;Debug: Saving original $mfile as $bakbase.bak\n&#34; if $Debug;
     unless &#40;open M, &#34;&gt;$mfile&#34;&#41; {
         warn &#34;Problem opening $mfile: $!&#34;;
         return;
--- lib/ExtUtils/t/Manifest.t;-0	Wed Mar  7 22:13:25 2007
+++ lib/ExtUtils/t/Manifest.t	Sun Mar 11 17:23:32 2007
@@ -249,7 +249,8 @@ is&#40; $files-&gt;{foobar}, &#39;&#39;,    &#39;          
         &#39;mymanifest.skip excluded via mydefault.skip&#39; &#41;;
     ok&#40; ! exists $files-&gt;{&#39;mydefault.skip&#39;},
         &#39;mydefault.skip excluded via mydefault.skip&#39; &#41;;
-    $Files{&#34;$_.bak&#34;}++ for &#40;qw&#40;MANIFEST MANIFEST.SKIP&#41;&#41;;
+    my $extsep = $Is_VMS ? &#39;_&#39; : &#39;.&#39;;
+    $Files{&#34;$_.bak&#34;}++ for &#40;&#39;MANIFEST&#39;, &#34;MANIFEST${extsep}SKIP&#34;&#41;;
 }
 
 add_file&#40;&#39;MANIFEST&#39;   =&gt; &#39;Makefile.PL&#39;&#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-468946" href="/Public/Bug/Display.html?id=25377#txn-468946">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;14:08:02&nbsp;2008</span>
    <span class="description">SMPETERS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> SMPETERS [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/468946/231219/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/231219">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Mar 11 19:40:11 2007, CBERRY wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The attached patch fixes Manifest.t failures currently appearing in
&gt; blead.  It removes some
&gt; VMS-specific clobberng of the key/value pair in mkmanifest&#40;&#41; just
&gt; before writing a line out to
&gt; the file.  This only affected the &#34;yarrow&#34; test example because that&#39;s
&gt; the key that had a value.
&gt; I have no idea why that code was in there in the first place, but
&gt; removing it seems to get
&gt; things working again.
&gt; 
&gt; I also &#40;on VMS only&#41; use underscores instead of dots in the filenames
&gt; of backup files since
&gt; multiple dots are illegal in filenames on older systems and require
&gt; awkward escaping on
&gt; newer systems.
&gt; 
&gt; Here it is in-line and also attached.
&gt; 
&gt; --- lib/ExtUtils/Manifest.pm;-0 Wed Mar  7 22:13:24 2007
&gt; +++ lib/ExtUtils/Manifest.pm    Sun Mar 11 17:26:42 2007
&gt; @@ -13,7 +13,7 @@ use vars qw&#40;$VERSION @ISA @EXPORT_OK
&gt;            $Is_MacOS $Is_VMS
&gt;            $Debug $Verbose $Quiet $MANIFEST $DEFAULT_MSKIP&#41;;
&gt; 
&gt; -$VERSION = &#39;1.51&#39;;
&gt; +$VERSION = &#39;1.51_01&#39;;
&gt;  @ISA=&#40;&#39;Exporter&#39;&#41;;
&gt;  @EXPORT_OK = qw&#40;mkmanifest
&gt;                  manicheck  filecheck  fullcheck  skipcheck
&gt; @@ -93,7 +93,9 @@ sub mkmanifest {
&gt;      my $read = &#40;-r &#39;MANIFEST&#39; &#38;&#38; maniread&#40;&#41;&#41; or $manimiss++;
&gt;      $read = {} if $manimiss;
&gt;      local *M;
&gt; -    rename $MANIFEST, &#34;$MANIFEST.bak&#34; unless $manimiss;
&gt; +    my $bakbase = $MANIFEST;
&gt; +    $bakbase =~ s/\./_/g if $Is_VMS; # avoid double dots
&gt; +    rename $MANIFEST, &#34;$bakbase.bak&#34; unless $manimiss;
&gt;      open M, &#34;&gt;$MANIFEST&#34; or die &#34;Could not open $MANIFEST: $!&#34;;
&gt;      my $skip = _maniskip&#40;&#41;;
&gt;      my $found = manifind&#40;&#41;;
&gt; @@ -112,7 +114,6 @@ sub mkmanifest {
&gt;             warn &#34;Added to $MANIFEST: $file\n&#34; unless exists $read-
<div class="message-stanza open">&gt; &gt;{$file};
</div>&gt;         }
&gt;         my $text = $all{$file};
&gt; -       &#40;$file,$text&#41; = split&#40;/\s+/,$text,2&#41; if $Is_VMS &#38;&#38; $text;
&gt;         $file = _unmacify&#40;$file&#41;;
&gt;         my $tabs = &#40;5 - &#40;length&#40;$file&#41;+1&#41;/8&#41;;
&gt;         $tabs = 1 if $tabs &lt; 1;
&gt; @@ -405,8 +406,10 @@ sub _check_mskip_directives {
&gt;      }
&gt;      close M;
&gt;      return unless $flag;
&gt; -    rename $mfile, &#34;$mfile.bak&#34;;
&gt; -    warn &#34;Debug: Saving original $mfile as $mfile.bak\n&#34; if $Debug;
&gt; +    my $bakbase = $mfile;
&gt; +    $bakbase =~ s/\./_/g if $Is_VMS;  # avoid double dots
&gt; +    rename $mfile, &#34;$bakbase.bak&#34;;
&gt; +    warn &#34;Debug: Saving original $mfile as $bakbase.bak\n&#34; if $Debug;
&gt;      unless &#40;open M, &#34;&gt;$mfile&#34;&#41; {
&gt;          warn &#34;Problem opening $mfile: $!&#34;;
&gt;          return;
&gt; --- lib/ExtUtils/t/Manifest.t;-0        Wed Mar  7 22:13:25 2007
&gt; +++ lib/ExtUtils/t/Manifest.t   Sun Mar 11 17:23:32 2007
&gt; @@ -249,7 +249,8 @@ is&#40; $files-&gt;{foobar}, &#39;&#39;,    &#39;
&gt;          &#39;mymanifest.skip excluded via mydefault.skip&#39; &#41;;
&gt;      ok&#40; ! exists $files-&gt;{&#39;mydefault.skip&#39;},
&gt;          &#39;mydefault.skip excluded via mydefault.skip&#39; &#41;;
&gt; -    $Files{&#34;$_.bak&#34;}++ for &#40;qw&#40;MANIFEST MANIFEST.SKIP&#41;&#41;;
&gt; +    my $extsep = $Is_VMS ? &#39;_&#39; : &#39;.&#39;;
&gt; +    $Files{&#34;$_.bak&#34;}++ for &#40;&#39;MANIFEST&#39;, &#34;MANIFEST${extsep}SKIP&#34;&#41;;
&gt;  }
&gt; 
&gt;  add_file&#40;&#39;MANIFEST&#39;   =&gt; &#39;Makefile.PL&#39;&#41;;
</div>

Hi Randy,

The patch above seemed to be missed for the 1.52 and 1.53 releases.  Are
there some concerns with this patch.  This code has been live in the
Perl core, including Perl 5.10, for quite some time
&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://public.activestate.com/cgi-bin/perlbrowse/p/30544">http://public.activestate.com/cgi-bin/perlbrowse/p/30544</a></span>&gt;.  Any way we
can get this into a release?

Thanks,

Steve Peters
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-468947" href="/Public/Bug/Display.html?id=25377#txn-468947">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;14:08:04&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-469629" href="/Public/Bug/Display.html?id=25377#txn-469629">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;03&nbsp;23:41:23&nbsp;2008</span>
    <span class="description">RKOBES [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/469629/231626/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/231626">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 252b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for pointing this out, Steve, and sorry for missing it. I&#39;ve
incorporated this into the ExtUtils-Manifest svn sources:
    <span class="clickylink"><a target="new" rel="nofollow" href="http://svn.perl.org/modules/ExtUtils-Manifest/trunk/">http://svn.perl.org/modules/ExtUtils-Manifest/trunk/</a></span>
and will be releasing this as ExtUtils-Manifest-1.54 to CPAN shortly.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-469632" href="/Public/Bug/Display.html?id=25377#txn-469632">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;03&nbsp;23:41:24&nbsp;2008</span>
    <span class="description">RKOBES [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.383322</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
