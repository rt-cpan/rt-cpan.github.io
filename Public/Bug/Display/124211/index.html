<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #124211 for Catalyst-Plugin-Static-Simple: Tests fail &#40;with latest MIME::Types?&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #124211 for Catalyst-Plugin-Static-Simple: Tests fail &#40;with latest MIME::Types?&#41;</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Catalyst-Plugin-Static-Simple">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Catalyst-Plugin-Static-Simple">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Catalyst-Plugin-Static-Simple">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Catalyst-Plugin-Static-Simple">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Catalyst-Plugin-Static-Simple">Catalyst-Plugin-Static-Simple CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">124211</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Catalyst-Plugin-Static-Simple">Catalyst-Plugin-Static-Simple</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
rasmus [...] gal.dk

<br />
SREZIC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
CHORNY [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-5294-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
0.34</li>
<li>
0.35</li>
</ul>
    </td>
  </tr>
  <tr id="CF-5295-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.36    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Catalyst-Plugin-Static-Simple-unknown-mimetype.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1773360/954239/Catalyst-Plugin-Static-Simple-unknown-mimetype.patch">
Sun Feb 25 13:05:43 2018 (1.5k) by emmanuel [...] seyman.fr
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=124211">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1767651" href="/Public/Bug/Display.html?id=124211#txn-1767651">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;24&nbsp;14:16:39&nbsp;2018</span>
    <span class="description">SREZIC [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Tests fail &#40;with latest MIME::Types?&#41;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1767651/951351/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/951351">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On some of my smokers two tests fail:

#   Failed test &#39;unknown extension as text/plain ok&#39;
#   at t/04static.t line 34.
#          got: &#39;audio/atrac-advanced-lossless&#39;
#     expected: &#39;text/plain&#39;
# Looks like you failed 1 test of 9.
t/04static.t ............. 
Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/9 subtests 

#   Failed test &#39;qr regex path ok&#39;
#   at t/05dirs.t line 34.
#          got: &#39;image/vnd.mozilla.apng&#39;
#     expected: &#39;image/png&#39;
# Looks like you failed 1 test of 13.
t/05dirs.t ............... 
Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/13 subtests 


This seems to happen with the newest MIME::Types. Statistical analysis:

****************************************************************
Regression &#39;mod:MIME::Types&#39;
****************************************************************
Name                   Theta          StdErr     T-stat
[0=&#39;const&#39;]           1.0000          0.0000    16969925824857838.00
[1=&#39;eq_2.11&#39;]        -0.0000          0.0000      -3.33
[2=&#39;eq_2.13&#39;]        -0.0000          0.0000      -4.68
[3=&#39;eq_2.14&#39;]        -0.0000          0.0000      -5.58
[4=&#39;eq_2.16&#39;]        -1.0000          0.0000    -16463246267008416.00

R^2= 1.000, N= 150, K= 5
****************************************************************
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1768020" href="/Public/Bug/Display.html?id=124211#txn-1768020">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;27&nbsp;05:04:52&nbsp;2018</span>
    <span class="description">MARKOV [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1768020/951539/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/951539">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 926b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jan 24 14:16:39 2018, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On some of my smokers two tests fail:
&gt; 
&gt; #   Failed test &#39;unknown extension as text/plain ok&#39;
&gt; #   at t/04static.t line 34.
&gt; #          got: &#39;audio/atrac-advanced-lossless&#39;
&gt; #     expected: &#39;text/plain&#39;
</div>
The extension used in this test as now a valid use, hence does not return the
default anymore.  You need to find a different extension to try this with... for
instance &#39;kcdj289hih289d&#39; which will probably never get assigned.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; #   Failed test &#39;qr regex path ok&#39;
&gt; #   at t/05dirs.t line 34.
&gt; #          got: &#39;image/vnd.mozilla.apng&#39;
&gt; #     expected: &#39;image/png&#39;
&gt; # Looks like you failed 1 test of 13.
&gt; t/05dirs.t ............... 
&gt; Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
</div>
And this one was an issue with MIME::Types.  Although image/vnd.mozilla.apng also
uses the &#39;png&#39; extension, it should be used as the preferred mime-type for &#39;png&#39;.
Fixes with release 2.17
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1768021" href="/Public/Bug/Display.html?id=124211#txn-1768021">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;27&nbsp;05:04:54&nbsp;2018</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1768061" href="/Public/Bug/Display.html?id=124211#txn-1768061">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;27&nbsp;13:58:08&nbsp;2018</span>
    <span class="description">vanstyn [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1768061/951560/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/951560">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jan 27 05:04:52 2018, MARKOV wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Jan 24 14:16:39 2018, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; On some of my smokers two tests fail:
&gt; &gt;
&gt; &gt; #   Failed test &#39;unknown extension as text/plain ok&#39;
&gt; &gt; #   at t/04static.t line 34.
&gt; &gt; #          got: &#39;audio/atrac-advanced-lossless&#39;
&gt; &gt; #     expected: &#39;text/plain&#39;
</div>&gt; 
&gt; The extension used in this test as now a valid use, hence does not
&gt; return the
&gt; default anymore.  You need to find a different extension to try this
&gt; with... for
&gt; instance &#39;kcdj289hih289d&#39; which will probably never get assigned.
&gt; 
</div>
I just started to try and make this change, however, it seems that after 
moving to a still unused extension, MIME::Types &#40;2.17&#41; is now returning 
empty string instead of text/plain.

See GitHub Issue: <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/markov2/perl5-MIME-Types/issues/2">https://github.com/markov2/perl5-MIME-Types/issues/2</a></span>



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; #   Failed test &#39;qr regex path ok&#39;
&gt; &gt; #   at t/05dirs.t line 34.
&gt; &gt; #          got: &#39;image/vnd.mozilla.apng&#39;
&gt; &gt; #     expected: &#39;image/png&#39;
&gt; &gt; # Looks like you failed 1 test of 13.
&gt; &gt;  t/05dirs.t ...............
&gt; &gt; Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
</div>&gt; 
&gt; And this one was an issue with MIME::Types.  Although
&gt; image/vnd.mozilla.apng also
&gt; uses the &#39;png&#39; extension, it should be used as the preferred mime-type
&gt; for &#39;png&#39;.
&gt; Fixes with release 2.17
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1768622" href="/Public/Bug/Display.html?id=124211#txn-1768622">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;29&nbsp;12:45:18&nbsp;2018</span>
    <span class="description">CHORNY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1768622/951856/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/951856">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 596b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jan 27 13:58:08 2018, VANSTYN wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I just started to try and make this change, however, it seems that after 
&gt; moving to a still unused extension, MIME::Types &#40;2.17&#41; is now returning 
&gt; empty string instead of text/plain.
&gt; 
&gt; See GitHub Issue: <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/markov2/perl5-MIME-Types/issues/2">https://github.com/markov2/perl5-MIME-Types/issues/2</a></span>
</div>
As I see Catalyst::Plugin::Static::Simple already handles that:

if &#40; $type &#41; { #line 257
  ....
}
else {
  ...
  return &#39;text/plain&#39;;
}
 
After renaming &#39;err.omg&#39; to different extensions and modifying 04static.t and 07mime_types.t tests pass.

-- 
Alexandr Ciornii, <span class="clickylink"><a target="new" rel="nofollow" href="http://chorny.net">http://chorny.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1768626" href="/Public/Bug/Display.html?id=124211#txn-1768626">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;29&nbsp;12:53:54&nbsp;2018</span>
    <span class="description">CHORNY [...] cpan.org -  Cc CHORNY added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1772524" href="/Public/Bug/Display.html?id=124211#txn-1772524">#</a>      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;21&nbsp;21:26:18&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1772524/953766/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/953766">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 468b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jan 24 14:16:39 2018, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On some of my smokers two tests fail:
&gt; 
&gt; #   Failed test &#39;unknown extension as text/plain ok&#39;
&gt; #   at t/04static.t line 34.
&gt; #          got: &#39;audio/atrac-advanced-lossless&#39;
&gt; #     expected: &#39;text/plain&#39;
&gt; # Looks like you failed 1 test of 9.
&gt; t/04static.t ............. 
&gt; Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
&gt; Failed 1/9 subtests 
&gt; 
</div>
And I just ran into this testing this distro with perl-5.27.9 on Linux.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1773360" href="/Public/Bug/Display.html?id=124211#txn-1773360">#</a>      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;25&nbsp;13:05:43&nbsp;2018</span>
    <span class="description">emmanuel [...] seyman.fr -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [rt.cpan.org #124211 ] Tests fail &#40;with latest MIME::Types?&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 25 Feb 2018 18:57:32 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Catalyst-Plugin-Static-Simple [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Emmanuel Seyman &lt;emmanuel [...] seyman.fr&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1773360/954238/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/954238">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 56b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
I&#39;m using this patch to make the tests pass.

Emmanuel
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1773360/954239/Catalyst-Plugin-Static-Simple-unknown-mimetype.patch">Download Catalyst-Plugin-Static-Simple-unknown-mimetype.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.5k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1773856" href="/Public/Bug/Display.html?id=124211#txn-1773856">#</a>      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;27&nbsp;15:23:57&nbsp;2018</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> emmanuel [...] seyman.fr</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1773856/954496/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/954496">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 284b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2018-02-25 13:05:43, emmanuel@seyman.fr wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I&#39;m using this patch to make the tests pass.
</div>
CPAN.pm users may use the following distroprefs file to automatically apply the patch:
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/eserte/srezic-cpan-distroprefs/blob/master/Catalyst-Plugin-Static-Simple.yml">https://github.com/eserte/srezic-cpan-distroprefs/blob/master/Catalyst-Plugin-Static-Simple.yml</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Create even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1774132" href="/Public/Bug/Display.html?id=124211#txn-1774132">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;01&nbsp;14:34:02&nbsp;2018</span>
    <span class="description">rasmus [...] gal.dk - Ticket #124631:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Test fails</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 1 Mar 2018 20:27:08 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Catalyst-Plugin-Static-Simple [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Rasmus Skaarup &lt;rasmus [...] gal.dk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1774132/954658/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/954658">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
[Catalyst-Plugin-Static-Simple-0.34]$ make test
PERL_DL_NONLAZY=1 &#34;/home/user/perl5/perlbrew/perls/perl-5.26.1/bin/perl5.26.1&#34; &#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches; test_harness&#40;0, &#39;inc&#39;, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/01use.t t/04static.t t/05dirs.t t/06include_path.t t/07mime_types.t t/08subreq.t t/09ignore_ext.t t/10ignore_dirs.t t/11serve_static.t t/12check_error_scope.t t/13no_include_path.t t/14deprecated.t t/20debug.t
t/01use.t ................ ok   
t/04static.t ............. 1/9 
#   Failed test &#39;unknown extension as text/plain ok&#39;
#   at t/04static.t line 35.
#          got: &#39;audio/atrac-advanced-lossless&#39;
#     expected: &#39;text/plain&#39;
# Looks like you failed 1 test of 9.
t/04static.t ............. Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/9 subtests 
t/05dirs.t ............... ok     
t/06include_path.t ....... ok   
t/07mime_types.t ......... ok   
t/08subreq.t ............. ok   
t/09ignore_ext.t ......... ok   
t/10ignore_dirs.t ........ ok   
t/11serve_static.t ....... ok   
t/12check_error_scope.t .. ^C


How to reproduce:

FreeBSD 11.1
perlbrew install perl-5.26.1
cpan —interactive -v Task::Catalyst
&lt;wait a bit&gt;


How to fix:

Change line 35 of t/04static.t from:

is&#40; $res-&gt;content_type, &#39;text/plain&#39;, &#39;unknown extension as text/plain ok&#39; &#41;;

to

is&#40; $res-&gt;content_type, &#39;audio/atrac-advanced-lossless&#39;&#39;, &#39;unknown extension as audio/atrac-advanced-lossless&#39; ok&#39; &#41;;


Or even better, change “unknown” file extension to something other than OMG! :-&#41;



Br
Rasmus Skaarup
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1776568" href="/Public/Bug/Display.html?id=124211#txn-1776568">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;14&nbsp;07:55:44&nbsp;2018</span>
    <span class="description">ilmari+cpan [...] ilmari.org - Ticket #124631:  Merged into ticket #124211</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1776569" href="/Public/Bug/Display.html?id=124211#txn-1776569">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;14&nbsp;07:55:45&nbsp;2018</span>
    <span class="description">ilmari+cpan [...] ilmari.org -  Merged into ticket #124211</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1776592" href="/Public/Bug/Display.html?id=124211#txn-1776592">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;14&nbsp;14:53:50&nbsp;2018</span>
    <span class="description">SREZIC [...] cpan.org -  Broken in 0.35 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1776593" href="/Public/Bug/Display.html?id=124211#txn-1776593">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;14&nbsp;14:56:30&nbsp;2018</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1776593/955948/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/955948">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2018-01-24 14:16:39, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On some of my smokers two tests fail:
&gt; 
&gt; #   Failed test &#39;unknown extension as text/plain ok&#39;
&gt; #   at t/04static.t line 34.
&gt; #          got: &#39;audio/atrac-advanced-lossless&#39;
&gt; #     expected: &#39;text/plain&#39;
&gt; # Looks like you failed 1 test of 9.
&gt; t/04static.t ............. 
&gt; Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
&gt; Failed 1/9 subtests 
&gt; 
&gt; #   Failed test &#39;qr regex path ok&#39;
&gt; #   at t/05dirs.t line 34.
&gt; #          got: &#39;image/vnd.mozilla.apng&#39;
&gt; #     expected: &#39;image/png&#39;
&gt; # Looks like you failed 1 test of 13.
&gt; t/05dirs.t ............... 
&gt; Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
&gt; Failed 1/13 subtests 
&gt; 
&gt; 
&gt; This seems to happen with the newest MIME::Types. Statistical analysis:
&gt; 
&gt; ****************************************************************
&gt; Regression &#39;mod:MIME::Types&#39;
&gt; ****************************************************************
&gt; Name                         Theta          StdErr     T-stat
&gt; [0=&#39;const&#39;]                 1.0000          0.0000    16969925824857838.00
&gt; [1=&#39;eq_2.11&#39;]              -0.0000          0.0000      -3.33
&gt; [2=&#39;eq_2.13&#39;]              -0.0000          0.0000      -4.68
&gt; [3=&#39;eq_2.14&#39;]              -0.0000          0.0000      -5.58
&gt; [4=&#39;eq_2.16&#39;]              -1.0000          0.0000    -16463246267008416.00
&gt; 
&gt; R^2= 1.000, N= 150, K= 5
&gt; ****************************************************************
</div>
If the problematic MIME::Types 2.16 is installed, then the test suite still fails:

#   Failed test &#39;qr regex path ok&#39;
#   at t/05dirs.t line 34.
#          got: &#39;image/vnd.mozilla.apng&#39;
#     expected: &#39;image/png&#39;
# Looks like you failed 1 test of 13.
t/05dirs.t ............... 
Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/13 subtests 

Happens on some of my smokers which did not get the update to 2.17.
Maybe it would be good if the prereq version in Makefile.PL would be dynamically increased if MIME::Types 2.16 is installed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1776692" href="/Public/Bug/Display.html?id=124211#txn-1776692">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;06:59:53&nbsp;2018</span>
    <span class="description">ilmari [...] ilmari.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #124211] Tests fail &#40;with latest MIME::Types?&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 15 Mar 2018 10:59:29 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Catalyst-Plugin-Static-Simple [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ilmari [...] ilmari.org &#40;Dagfinn Ilmari Mannsåker&#41;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1776692/956001/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/956001">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Slaven_Rezic via RT&#34; &lt;bug-Catalyst-Plugin-Static-Simple@rt.cpan.org&gt;
writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If the problematic MIME::Types 2.16 is installed, then the test suite still fails:
&gt;
&gt; #   Failed test &#39;qr regex path ok&#39;
&gt; #   at t/05dirs.t line 34.
&gt; #          got: &#39;image/vnd.mozilla.apng&#39;
&gt; #     expected: &#39;image/png&#39;
&gt; # Looks like you failed 1 test of 13.
&gt; t/05dirs.t ............... 
&gt; Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
&gt; Failed 1/13 subtests 
&gt;
&gt; Happens on some of my smokers which did not get the update to 2.17.
&gt; Maybe it would be good if the prereq version in Makefile.PL would be
&gt; dynamically increased if MIME::Types 2.16 is installed.
</div>
I have instead relaxed the test to allow image/.*png, will do a new
release shortly.

- ilmari
-- 
- Twitter seems more influential [than blogs] in the &#39;gets reported in
  the mainstream press&#39; sense at least.               - Matt McLeod
- That&#39;d be because the content of a tweet is easier to condense down
  to a mainstream media article.                      - Calle Dybedahl
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1776770" href="/Public/Bug/Display.html?id=124211#txn-1776770">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;14:04:35&nbsp;2018</span>
    <span class="description">ilmari+cpan [...] ilmari.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1776770/956039/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/956039">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 41b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This has been fixed in 0.36, now on CPAN.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1776773" href="/Public/Bug/Display.html?id=124211#txn-1776773">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;14:04:38&nbsp;2018</span>
    <span class="description">ilmari+cpan [...] ilmari.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1776775" href="/Public/Bug/Display.html?id=124211#txn-1776775">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;14:04:38&nbsp;2018</span>
    <span class="description">ilmari+cpan [...] ilmari.org -  Fixed in 0.36 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.5859</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
