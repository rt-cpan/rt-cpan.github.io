<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #18112 for Net-Daemon: forkm test hangs for Solaris 8</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #18112 for Net-Daemon: forkm test hangs for Solaris 8</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Net-Daemon">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Net-Daemon">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Net-Daemon">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Net-Daemon">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-Daemon">Net-Daemon CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">18112</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Net-Daemon">Net-Daemon</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
feldt [...] nhn.ou.edu

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-22384-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-22385-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=18112">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-174877" href="/Public/Bug/Display.html?id=18112#txn-174877">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;10&nbsp;17:25:42&nbsp;2006</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> forkm test hangs for Solaris 8</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/174877/59153/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/59153">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 396b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">test Net-Daemon-0.39 hangs and never returns when it attempts
the forkm test.   This is for perl 5.8.3 sun4-solaris-thread-multi
under Solaris 8 &#40;SunOS 5.8&#41; with the latest recommended
and security patches &#40;March 2006&#41; installed.  I have
Net::Daemon 0.38 installed and had no problem when it
was installed.

&#40;I couldn&#39;t choose 0.39 from the &#39;Broken in&#39; menu above
since it only lists up to 0.38&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-180751" href="/Public/Bug/Display.html?id=18112#txn-180751">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;27&nbsp;07:29:54&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> peter.jestico [...] pipex.net</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/180751/63028/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/63028">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 54b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Experiencing the same problem on a Solaris9 platform
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-180752" href="/Public/Bug/Display.html?id=18112#txn-180752">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;27&nbsp;07:30:02&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-189673" href="/Public/Bug/Display.html?id=18112#txn-189673">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;24&nbsp;11:45:29&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> michael.vanhorn [...] wright.edu</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/189673/68351/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/68351">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 47b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
I&#39;m seeing the same behavior on Solaris 10 x86
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-189718" href="/Public/Bug/Display.html?id=18112#txn-189718">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;24&nbsp;15:10:34&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Nobody</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/189718/68382/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/68382">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 169b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Apr 24 11:45:29 2006, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I&#39;m seeing the same behavior on Solaris 10 x86
</div>

I&#39;m seeing it on Solaris 2.8 Sparc, with a new
perl 5.8.8 &#40;no threads&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-189740" href="/Public/Bug/Display.html?id=18112#txn-189740">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;24&nbsp;16:31:21&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> sgilbert [...] nvidia.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/189740/68391/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/68391">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 329b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Apr 24 15:10:34 2006, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Apr 24 11:45:29 2006, guest wrote:
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; I&#39;m seeing the same behavior on Solaris 10 x86
</div>&gt; 
&gt; 
&gt; I&#39;m seeing it on Solaris 2.8 Sparc, with a new
&gt; perl 5.8.8 &#40;no threads&#41;.
&gt; 
</div>

I&#39;m getting the same behavior on Sparc Solaris 2.8 with perl
5.8.8...both with and without threads.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-321701" href="/Public/Bug/Display.html?id=18112#txn-321701">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;23&nbsp;08:55:58&nbsp;2007</span>
    <span class="description">m.nooning [...] comcast.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> m.nooning [...] comcast.net</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/321701/147059/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/147059">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 268b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">It has been a long time since you reported this.  Sorry about that.

If you are still interested, try Net-Daemon/Net-Daemon-0.40.tar.gz which
is now on CPAN.  The fixes were not about the problem you are reporting,
but since then Perl and Net-Daemon have changed some.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-321824" href="/Public/Bug/Display.html?id=18112#txn-321824">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;23&nbsp;13:52:22&nbsp;2007</span>
    <span class="description">feldt [...] nhn.ou.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18112] forkm test hangs for Solaris 8</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 23 May 2007 12:51:41 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Daemon [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Andy Feldt &lt;feldt [...] nhn.ou.edu&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/321824/147131/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/147131">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 113b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I just tested Version 0.40 on Solaris 8, perl 5.8.8/sun4-solaris-thread-multi
and the test still hangs at forkm.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-321844" href="/Public/Bug/Display.html?id=18112#txn-321844">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;23&nbsp;14:04:09&nbsp;2007</span>
    <span class="description">MNOONING [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/321844/147145/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/147145">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 450b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">A Solaris tester.  Outstanding!

Please do me a favor and test version 0.41.  I just submitted it today.
 I see it is now on CPAN.

Otherwise, in t/forkm.t --&gt; sub CatchChild, change the &#34;if &#40;keys ..&#34;
line to match what is below and test again.

                if &#40;keys&#40;%childs&#41; == 0&#41; {
                    # We ae done when the last of our ten childs are gone.
                    ShowResults&#40;&#41;;
                    last;
                }


Thanks
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-322099" href="/Public/Bug/Display.html?id=18112#txn-322099">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;24&nbsp;13:43:08&nbsp;2007</span>
    <span class="description">feldt [...] nhn.ou.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18112] forkm test hangs for Solaris 8</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 24 May 2007 12:42:48 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Daemon [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Andy Feldt &lt;feldt [...] nhn.ou.edu&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/322099/147276/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/147276">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 335b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I just tested version 0.41 on Solaris 8, perl 5.8.8/sun4-solaris-thread-multi
with the same hang on the forkm test.  I edited forkm.t to set $debug = 1
and ran the test again.  The forkm.log file contained only:

13228: Start
13229: END: -&gt; handle=undef
13229: END: &lt;-

and this was there before I hit ^C to end the test when it hung.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-322283" href="/Public/Bug/Display.html?id=18112#txn-322283">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;25&nbsp;10:52:33&nbsp;2007</span>
    <span class="description">m.nooning [...] comcast.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> m.nooning [...] comcast.net</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/322283/147396/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/147396">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Please use the forkm.t file pasted below.  It is the same one you have,
but sprinkled with print statements.
---------------------------------paste forkm.t with print statements
# -*- perl -*-
#

require 5.004;
use strict;
use IO::Socket &#40;&#41;;
use Config &#40;&#41;;
use Net::Daemon::Test &#40;&#41;;
use Fcntl &#40;&#41;;
use Config &#40;&#41;;


my $debug = 1;
my $dh;
if &#40;$debug&#41; {
    $dh = Symbol::gensym&#40;&#41;; print STDERR &#40;&#34;16: pid $$, ref dh is :&#34;,
ref&#40;$dh&#41;, &#34;\n&#34;&#41;;
    open&#40;$dh, &#34;&gt;&#34;, &#34;forkm.log&#34;&#41; or die &#34;Failed to open forkm.log: $!&#34;;
}

sub log&#40;$&#41; {
    my $msg = shift; print STDERR &#40;&#34;21: $$ msg is $msg:\n&#34;&#41;;
    print $dh &#34;$$: $msg\n&#34; if $dh;
}

&#38;log&#40;&#34;Start&#34;&#41;;
my $ok;
eval {
  if &#40;$^O ne &#34;MSWin32&#34;&#41; {
    my $pid = fork&#40;&#41;;
    if &#40;defined&#40;$pid&#41;&#41; {
      if &#40;!$pid&#41; {print STDERR &#40;&#34;31: child $$ is about to exit\n&#34;&#41;; exit
0; } # Child
    }
    $ok = 1;
  }
};
if &#40;!$ok&#41; {
  &#38;log&#40;&#34;!ok&#34;&#41;;
  print &#34;1..0\n&#34;;
  exit;
}


$| = 1;
$^W = 1;


my&#40;$handle, $port&#41;;
if &#40;@ARGV&#41; {
    $port = shift @ARGV; print STDERR &#40;&#34;\n49: port $port\n&#34;&#41;;
} else {
    &#40;$handle, $port&#41; = Net::Daemon::Test-&gt;Child
        &#40;10, $^X, &#39;-Iblib/lib&#39;, &#39;-Iblib/arch&#39;, &#39;t/server&#39;,
         &#39;--mode=fork&#39;, &#39;logfile=stderr&#39;, &#39;debug&#39;&#41;;  print STDERR &#40;&#34;\n53: port
$port\n&#34;&#41;;
}


sub IsNum {
    my $str = shift;
    &#40;defined&#40;$str&#41;  &#38;&#38;  $str =~ /&#40;\d+&#41;/&#41; ? $1 : undef;
}


sub ReadWrite {
    my $fh = shift; my $i = shift; my $j = shift;
    &#38;log&#40;&#34;ReadWrite: -&gt; fh=$fh, i=$i, j=$j&#34;&#41;;
    if &#40;!$fh-&gt;print&#40;&#34;$j\n&#34;&#41;  ||  !$fh-&gt;flush&#40;&#41;&#41; {
        die &#34;Child $i: Error while writing $j: &#34; . $fh-&gt;error&#40;&#41; . &#34; &#40;$!&#41;&#34;;
    }
    my $line = $fh-&gt;getline&#40;&#41;;
    &#38;log&#40;&#34;ReadWrite: line=$line&#34;&#41;;
    die &#34;Child $i: Error while reading: &#34; . $fh-&gt;error&#40;&#41; . &#34; &#40;$!&#41;&#34;
        unless defined&#40;$line&#41;; print STDERR &#40;&#34;72: Did not die\n&#34;&#41;;
    my $num;
    die &#34;Child $i: Cannot parse result: $line&#34;
        unless defined&#40;$num = IsNum&#40;$line&#41;&#41;; print STDERR &#40;&#34;75: Did not die\n&#34;&#41;;
    die &#34;Child $i: Expected &#34; . &#40;$j*2&#41; . &#34;, got $num&#34;
        unless $j*2 == $num; print STDERR &#40;&#34;77: Did not die\n&#34;&#41;;
    &#38;log&#40;&#34;ReadWrite: &lt;-&#34;&#41;; print STDERR &#40;&#34;78: after log ReadWrite\n&#34;&#41;;
}


sub MyChild {
    my $i = shift;

    &#38;log&#40;&#34;MyChild: -&gt; $i&#34;&#41;;

    eval {
        my $fh = IO::Socket::INET-&gt;new&#40;&#39;PeerAddr&#39; =&gt; &#39;127.0.0.1&#39;,
                                       &#39;PeerPort&#39; =&gt; $port&#41;;
        if &#40;!$fh&#41; {
            &#38;log&#40;&#34;MyChild: Cannot connect: $!&#34;&#41;;
            die &#34;Cannot connect: $!&#34;;
        }
        for &#40;my $j = 0;  $j &lt; 1000;  $j++&#41; {
            ReadWrite&#40;$fh, $i, $j&#41;;
        }
    };
    if &#40;$@&#41; {
        print STDERR &#34;Client: Error $@\n&#34;;
        &#38;log&#40;&#34;MyChild: Client: Error $@&#34;&#41;;
        return 0;
    }
    &#38;log&#40;&#34;MyChild: &lt;-&#34;&#41;;
    return 1;
}


sub ShowResults {
    &#38;log&#40;&#34;ShowResults: -&gt;&#34;&#41;;
    my @results;
    for &#40;my $i = 1;  $i &lt;= 10;  $i++&#41; {
        $results[$i-1] = &#34;not ok $i\n&#34;;
    }
    if &#40;open&#40;LOG, &#34;&lt;log&#34;&#41;&#41; {
        while &#40;defined&#40;my $line = &lt;LOG&gt;&#41;&#41; {
            if &#40;$line =~ /&#40;\d+&#41;/&#41; {
                $results[$1-1] = $line;
            }
        }
    }
    for &#40;my $i = 1;  $i &lt;= 10;  $i++&#41; {
        print $results[$i-1];
    }
    &#38;log&#40;&#34;ShowResults: &lt;-&#34;&#41;;
    exit 0;
}

my %childs;
sub CatchChild {
    &#38;log&#40;&#34;CatchChild: -&gt;&#34;&#41;;
    for&#40;;;&#41; {
        my $pid = wait;
        if &#40;$pid &gt; 0&#41; {
            &#38;log&#40;&#34;CatchChild: $pid&#34;&#41;;
            if &#40;exists $childs{$pid}&#41; {print STDERR &#40;&#34;135: childs $pid is :&#34;,
$childs{$pid}, &#34;\n&#34;&#41;;
                delete $childs{$pid};
                if &#40;keys&#40;%childs&#41; == 0&#41; {
                    # We ae done when the last of our ten childs are gone.
                    ShowResults&#40;&#41;;
                    last;
                }
            }
        }
    }
    $SIG{&#39;CHLD&#39;} = \&#38;CatchChild;
    &#38;log&#40;&#34;CatchChild: &lt;-&#34;&#41;;
}
$SIG{&#39;CHLD&#39;} = \&#38;CatchChild;

# Spawn 10 childs, each of them running a series of test
unlink &#34;log&#34;;
&#38;log&#40;&#34;Spawning childs&#34;&#41;;
for &#40;my $i = 0;  $i &lt; 10;  $i++&#41; {
    if &#40;defined&#40;my $pid = fork&#40;&#41;&#41;&#41; {
        if &#40;$pid&#41; {
            # This is the parent
            $childs{$pid} = $i; print STDERR &#40;&#34;157: $$ Created childs $pid\n&#34;&#41;;
        } else {print STDERR &#40;&#34;158: pid $$\n&#34;&#41;;
            &#38;log&#40;&#34;Child starting&#34;&#41;;
            # This is the child
            undef $handle;
            %childs = &#40;&#41;;
            my $result = MyChild&#40;$i&#41;;
            my $fh = Symbol::gensym&#40;&#41;; print STDERR &#40;&#34;164: ref fh is :&#34;,
ref&#40;$fh&#41;, &#34;:\n&#34;&#41;; 
            if &#40;!open&#40;$fh, &#34;&gt;&gt;log&#34;&#41;  ||  !flock&#40;$fh, 2&#41;  ||
                !seek&#40;$fh, 0, 2&#41;  ||
                !&#40;print $fh &#40;&#40;$result ? &#34;ok &#34; : &#34;not ok &#34;&#41;, &#40;$i+1&#41;, &#34;\n&#34;&#41;&#41;  ||
                !close&#40;$fh&#41;&#41; {
                print STDERR &#34;Error while writing log file: $!\n&#34;;
                exit 1;
            }
            exit 0;
        }
    } else {
        print STDERR &#34;Failed to create new child: $!\n&#34;;
        exit 1;
    }
}

my $secs = 120;
while &#40;$secs &gt; 0&#41; {
    $secs -= sleep $secs;
}

END {
    &#38;log&#40;&#34;END: -&gt; handle=&#34; . &#40;defined&#40;$handle&#41; ? $handle : &#34;undef&#34;&#41;&#41;;
    if &#40;$handle&#41; { print STDERR &#40;&#34;\n187 handle $handle\n&#34;&#41;;
        $handle-&gt;Terminate&#40;&#41;;
        undef $handle;
    }
    while &#40;my&#40;$var, $val&#41; = each %childs&#41; { print STDERR &#40;&#34;\n191:
killing child $var and val is $val\n&#34;&#41;;
        kill &#39;TERM&#39;, $var;
    }
    %childs = &#40;&#41;;
    unlink &#34;ndtest.prt&#34;;
    &#38;log&#40;&#34;END: &lt;-&#34;&#41;;
    exit 0;
}
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-322311" href="/Public/Bug/Display.html?id=18112#txn-322311">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;25&nbsp;11:46:46&nbsp;2007</span>
    <span class="description">feldt [...] nhn.ou.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18112] forkm test hangs for Solaris 8</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 25 May 2007 10:45:33 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Daemon [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Andy Feldt &lt;feldt [...] nhn.ou.edu&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/322311/147410/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/147410">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 691b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Using the forkm.t variant with print statements yields:

$ gmake test
PERL_DL_NONLAZY=1 /usr/local/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34; 
&#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
t/base..........ok
t/config........ok
t/fork..........ok
t/forkm.........16: pid 18566, ref dh is :GLOB
21: 18566 msg is Start:
31: child 18567 is about to exit
21: 18567 msg is END: -&gt; handle=undef:
21: 18567 msg is END: &lt;-:

53: port
34214
21: 18566 msg is CatchChild: -&gt;:
21: 18566 msg is CatchChild: 18567:
^Cgmake: *** [test_dynamic] Error 130
$

where the ^C is typed after the hang has occurred.
The forkm.log file contains &#40;as before&#41;:

18566: Start
18567: END: -&gt; handle=undef
18567: END: &lt;-
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-322366" href="/Public/Bug/Display.html?id=18112#txn-322366">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;25&nbsp;16:22:17&nbsp;2007</span>
    <span class="description">m.nooning [...] comcast.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> m.nooning [...] comcast.net</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/322366/147445/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/147445">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 557b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 53: port
&gt; 34214
</div>Your results make it look like $port has a newline character embedded as
the first character of $port.  I suspect that it might be a
typographical error on your part.

Please double check that line 53 ends with the print statement below.  I
added the two colons around $port, as you see, just to double check.

 print STDERR &#40;&#34;\n53: port :$port:\n&#34;&#41;;

It could be true that Net::Daemon::Test is returning a $port that has a
newline character embedded as the first character, but before I go
digging, please do the double check.

Thanks
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-322403" href="/Public/Bug/Display.html?id=18112#txn-322403">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;25&nbsp;21:00:17&nbsp;2007</span>
    <span class="description">feldt [...] nhn.ou.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18112] forkm test hangs for Solaris 8</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 25 May 2007 20:00:01 -0500 &#40;CDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Daemon [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Andy Feldt &lt;feldt [...] nhn.ou.edu&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/322403/147473/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/147473">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 248b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The newline was my fault for simply using cut-and-paste to generate
your version of the file.  So, ignore that newline from my output.
I looked at the file and do not see any other line wraps that would
have affected output or running of the code.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-322412" href="/Public/Bug/Display.html?id=18112#txn-322412">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;25&nbsp;22:02:54&nbsp;2007</span>
    <span class="description">feldt [...] nhn.ou.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18112] forkm test hangs for Solaris 8</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 25 May 2007 21:02:24 -0500 &#40;CDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Daemon [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Andy Feldt &lt;feldt [...] nhn.ou.edu&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/322412/147482/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/147482">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">It occurred to me that I ought to try actually running the test
with the correction.  The first time, it ran through to completion &#40;!&#41;
generating a lot of output &#40;and indidicating it had failed only
the forkm.t test&#41;.  So, I wanted to save this in a file and
tried:  gmake test &gt; test.txt 2&gt;&#38;1

This, however, hung as before with a small amount of output in
test.txt.  So I did some experimenting.  I found that every time I
tried to redirect stdout and stderr the test hung.  Even more oddly,
I found that running just a &#39;gmake test&#39; hangs about 1/2 the time
and runs to completion the rest.

I am including the gist of one that completed.  I don&#39;t have a
way to catch the beginning &#40;my terminal buffer from home right
now is not large enough&#41;, but the screen receives sets &#40;presumably
1000&#41; of:

:
72: Did not die
75: Did not die
77: Did not die
21: 19093 msg is ReadWrite: &lt;-:
78: after log ReadWrite
21: 19093 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3a5b38&#41;, i=0, j=756:
21: 19093 msg is ReadWrite: line=1512

with &#39;j=756&#39; incrementing by one each time and &#39;line=1512&#39; incrementing
by two each time.  It ends with:

72: Did not die
75: Did not die
77: Did not die
21: 19093 msg is ReadWrite: &lt;-:
78: after log ReadWrite
21: 19093 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3a5b38&#41;, i=0, j=999:
21: 19093 msg is ReadWrite: line=1998
:
72: Did not die
75: Did not die
77: Did not die
21: 19093 msg is ReadWrite: &lt;-:
78: after log ReadWrite
21: 19093 msg is MyChild: &lt;-:
164: ref fh is :GLOB:
21: 19093 msg is END: -&gt; handle=undef:
21: 19093 msg is END: &lt;-:
21: 19090 msg is CatchChild: 19093:
135: childs 19093 is :0
21: 19090 msg is ShowResults: -&gt;:
21: 19090 msg is ShowResults: &lt;-:
21: 19090 msg is END: -&gt; handle=Net::Daemon::Test::Fork=SCALAR&#40;0x38603c&#41;:

187 handle Net::Daemon::Test::Fork=SCALAR&#40;0x38603c&#41;
21: 19090 msg is END: &lt;-:
t/forkm.........FAILED tests 2-10                                            
        Failed 9/10 tests, 10.00% okay
t/ithread.......Perl exited with active threads:
        0 running and unjoined
        1 finished and unjoined
        0 running and detached
t/ithread.......ok                                                           
t/ithreadm......ok                                                           
t/loop-child....ok                                                           
t/loop..........ok                                                           
t/single........ok                                                           
t/thread........skipped
        all skipped: no reason given
t/threadm.......ok                                                           
t/unix..........ok                                                           
Failed Test Stat Wstat Total Fail  List of Failed
-------------------------------------------------------------------------------
t/forkm.t                 10    9  2-10
1 test skipped.
Failed 1/12 test scripts. 9/68 subtests failed.
Files=12, Tests=68, 74 wallclock secs &#40; 6.75 cusr +  1.94 csys =  8.69 CPU&#41;
Failed 1/12 test programs. 9/68 subtests failed.
gmake: *** [test_dynamic] Error 29

The forkm.log file begins with:

19090: Start
19091: END: -&gt; handle=undef
19091: END: &lt;-
19090: Spawning childs
19093: Child starting
19093: MyChild: -&gt; 0
19093: ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3a5b38&#41;, i=0, j=0
19093: ReadWrite: line=0

19093: ReadWrite: &lt;-
19093: ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3a5b38&#41;, i=0, j=1
19093: ReadWrite: line=2

and continues in this vein as well, ending with:

19093: ReadWrite: &lt;-
19093: ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3a5b38&#41;, i=0, j=999
19093: ReadWrite: line=1998

19093: ReadWrite: &lt;-
19093: MyChild: &lt;-
19093: END: -&gt; handle=undef
19093: END: &lt;-
19090: CatchChild: -&gt;
19090: CatchChild: 19091
19090: CatchChild: 19093
19090: ShowResults: -&gt;
19090: ShowResults: &lt;-
19090: END: -&gt; handle=Net::Daemon::Test::Fork=SCALAR&#40;0x38603c&#41;
19090: END: &lt;-
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-324076" href="/Public/Bug/Display.html?id=18112#txn-324076">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;02&nbsp;12:33:04&nbsp;2007</span>
    <span class="description">m.nooning [...] comcast.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> m.nooning [...] comcast.net</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/324076/148434/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/148434">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 5.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I did not realize until your reply that you would get up to 10,000 debug
prints from sub ReadWrite alone.  I changed the debug statements in sub
ReadWrite to only print to STDERR upon failure.  I also made other debug
print changes.

Please rerun forkm.t, this time using the one pasted below.  There
should only be a hundred lines or so.  From the Net-Daemon directory,
please run

perl -Mblib t/forkm.t

on Solaris and post the results.

Thanks
------------------------paste forkm.t
# -*- perl -*-
#

require 5.004;
use strict;
use IO::Socket &#40;&#41;;
use Config &#40;&#41;;
use Net::Daemon::Test &#40;&#41;;
use Fcntl &#40;&#41;;
use Config &#40;&#41;;


my $debug = 1;
my $dh;
if &#40;$debug&#41; {
    $dh = Symbol::gensym&#40;&#41;;
    print STDERR &#40;__LINE__, &#34;: pid $$, ref dh is :&#34;, ref&#40;$dh&#41;, &#34;\n&#34;&#41;;
    open&#40;$dh, &#34;&gt;&#34;, &#34;forkm.log&#34;&#41; or die &#34;Failed to open forkm.log: $!&#34;;
}

sub log&#40;$&#41; {
    my $msg = shift; print STDERR &#40;__LINE__, &#34;: $$ msg is $msg:\n&#34;&#41;;
    print $dh &#34;$$: $msg\n&#34; if $dh;
}

&#38;log&#40;&#34;Start&#34;&#41;;
my $ok;
eval {
  if &#40;$^O ne &#34;MSWin32&#34;&#41; {
    my $pid = fork&#40;&#41;;
    if &#40;defined&#40;$pid&#41;&#41; {
      if &#40;!$pid&#41; {
        # Child
        print STDERR &#40;__LINE__, &#34;: child $$ is about to exit\n&#34;&#41;;
        exit 0;
      } 
    }
    $ok = 1;
  }
};
if &#40;!$ok&#41; {
  &#38;log&#40;&#34;!ok&#34;&#41;;
  print &#34;1..0\n&#34;;
  exit;
}


$| = 1;
$^W = 1;


my&#40;$handle, $port&#41;;
if &#40;@ARGV&#41; {
    $port = shift @ARGV; print STDERR &#40;&#34;\n&#34;, __LINE__, &#34;: port $port\n&#34;&#41;;
} else {
    &#40;$handle, $port&#41; = Net::Daemon::Test-&gt;Child
        &#40;10, $^X, &#39;-Iblib/lib&#39;, &#39;-Iblib/arch&#39;, &#39;t/server&#39;,
         &#39;--mode=fork&#39;, &#39;logfile=stderr&#39;, &#39;debug&#39;&#41;;
     print STDERR &#40;&#34;\n&#34;, __LINE__, &#34;: port :$port:\n&#34;&#41;;
}


sub IsNum {
    my $str = shift;
    &#40;defined&#40;$str&#41;  &#38;&#38;  $str =~ /&#40;\d+&#41;/&#41; ? $1 : undef;
}

# $i is 1 to 10, $j is 9..999
sub ReadWrite {
    my $fh = shift; my $i = shift; my $j = shift;
    &#38;log&#40;&#34;ReadWrite: -&gt; fh=$fh, i=$i, j=$j&#34;&#41;;
    if &#40;!$fh-&gt;print&#40;&#34;$j\n&#34;&#41;  ||  !$fh-&gt;flush&#40;&#41;&#41; {
        print STDERR &#40;__LINE__, &#34;: $$  :$i: :$j: Could not fh-&gt;print\n&#34;&#41;;
        die &#34;Child $i: Error while writing $j: &#34; . $fh-&gt;error&#40;&#41; . &#34; &#40;$!&#41;&#34;;
    }
    my $line = $fh-&gt;getline&#40;&#41;;
    if &#40;!defined&#40;$line&#41; &#41; {
      print STDERR &#40;__LINE__, &#34;: $$ :$i: :$j: The line is NOT defined\n&#34;&#41;;
      die &#34;Child $i: Error while reading: &#34; . $fh-&gt;error&#40;&#41; . &#34; &#40;$!&#41;&#34;;
    } else {
      &#38;log&#40;&#34;ReadWrite: line=$line&#34;&#41;;
    }

    my $num;
    if &#40;!defined&#40;$num = IsNum&#40;$line&#41;&#41;&#41; { 
      print STDERR &#40;__LINE__, &#34;: $$ :$i: :$j: num  = IsNum is not
defined\n&#34;&#41;;
      die &#34;Child $i: Cannot parse result: $line&#34;;
    }
    if &#40;!&#40;$j*2 == $num&#41;&#41; {
      print STDERR &#40;__LINE__, &#34;: $$ :$i: :$j: j*2 &#34;, $j*2, &#34; is not
$num\n&#34;&#41;;
      die &#34;Child $i: Expected &#34; . &#40;$j*2&#41; . &#34;, got $num&#34;;
    }
    &#38;log&#40;&#34;ReadWrite: &lt;-&#34;&#41;;
}


sub MyChild {
    my $i = shift; # $i will be 1 to 10

    &#38;log&#40;&#34;MyChild: -&gt; $i&#34;&#41;;

    eval {
        my $fh = IO::Socket::INET-&gt;new&#40;&#39;PeerAddr&#39; =&gt; &#39;127.0.0.1&#39;,
                                       &#39;PeerPort&#39; =&gt; $port&#41;;
        print STDERR &#40;__LINE__, &#34;: PeerPort :$port:\n&#34;&#41;;
        if &#40;!$fh&#41; {
            print STDERR &#40;__LINE__, &#34;: No fh, cannot connect: $!\n&#34;&#41;;
            &#38;log&#40;&#34;MyChild: Cannot connect: $!&#34;&#41;;
            die &#34;Cannot connect: $!&#34;;
        }
        for &#40;my $j = 0;  $j &lt; 1000;  $j++&#41; {
            ReadWrite&#40;$fh, $i, $j&#41;;
        }
    };
    if &#40;$@&#41; {
        print STDERR &#40;__LINE__, &#34;Client: Error $@\n&#34;&#41;;
        &#38;log&#40;&#34;MyChild: Client: Error $@&#34;&#41;;
        return 0;
    }
    &#38;log&#40;&#34;MyChild: &lt;-&#34;&#41;;
    print STDERR &#40;__LINE__, &#34;: PeerPort :$port:\n&#34;&#41;;

    return 1;
}


sub ShowResults {
    &#38;log&#40;&#34;ShowResults: -&gt;&#34;&#41;;
    my @results;
    for &#40;my $i = 1;  $i &lt;= 10;  $i++&#41; {
        $results[$i-1] = &#34;not ok $i\n&#34;;
    }
    if &#40;open&#40;LOG, &#34;&lt;log&#34;&#41;&#41; {
        while &#40;defined&#40;my $line = &lt;LOG&gt;&#41;&#41; {
            if &#40;$line =~ /&#40;\d+&#41;/&#41; {
                $results[$1-1] = $line;
            }
        }
    }
    for &#40;my $i = 1;  $i &lt;= 10;  $i++&#41; {
        print $results[$i-1];
    }
    &#38;log&#40;&#34;ShowResults: &lt;-&#34;&#41;;
    exit 0;
}

my %childs;
sub CatchChild {
    &#38;log&#40;&#34;CatchChild: -&gt;&#34;&#41;;
    for&#40;;;&#41; {
        my $pid = wait;
        if &#40;$pid &gt; 0&#41; {
            &#38;log&#40;&#34;CatchChild: $pid&#34;&#41;;
            if &#40;exists $childs{$pid}&#41; {
                print STDERR &#40;__LINE__, &#34;: childs $pid is :&#34;,
$childs{$pid}, &#34;\n&#34;&#41;;
                delete $childs{$pid};
                if &#40;keys&#40;%childs&#41; == 0&#41; {
                    print STDERR &#40;__LINE__, &#34;: \%childs is 0\n&#34;&#41;;
                    # We ae done when the last of our ten childs are gone.
                    ShowResults&#40;&#41;;
                    print STDERR &#40;__LINE__, &#34;: \n&#34;&#41;;
                    last;
                } else {
                    print STDERR &#40;__LINE__, &#34;: Should see this nine
times\n&#34;&#41;;
                }
            }
        }
    }
    print STDERR &#40;__LINE__, &#34;: No more childs\n&#34;&#41;;
    $SIG{&#39;CHLD&#39;} = \&#38;CatchChild;
    &#38;log&#40;&#34;CatchChild: &lt;-&#34;&#41;;
}
$SIG{&#39;CHLD&#39;} = \&#38;CatchChild;

# Spawn 10 childs, each of them running a series of test
unlink &#34;log&#34;;
&#38;log&#40;&#34;Spawning childs&#34;&#41;;
for &#40;my $i = 0;  $i &lt; 10;  $i++&#41; {
    if &#40;defined&#40;my $pid = fork&#40;&#41;&#41;&#41; {
        if &#40;$pid&#41; {
            # This is the parent
            $childs{$pid} = $i;
            print STDERR &#40;__LINE__, &#34;: $$ Created childs $pid\n&#34;&#41;;
        } else {
            print STDERR &#40;__LINE__, &#34;: pid $$\n&#34;&#41;;
            &#38;log&#40;&#34;Child starting&#34;&#41;;
            # This is the child
            undef $handle;
            %childs = &#40;&#41;;
            my $result = MyChild&#40;$i&#41;;
            my $fh = Symbol::gensym&#40;&#41;;
            print STDERR &#40;__LINE__, &#34;: ref fh is :&#34;, ref&#40;$fh&#41;, &#34;:\n&#34;&#41;; 
            if &#40;!open&#40;$fh, &#34;&gt;&gt;log&#34;&#41;  ||  !flock&#40;$fh, 2&#41;  ||
                !seek&#40;$fh, 0, 2&#41;  ||
                !&#40;print $fh &#40;&#40;$result ? &#34;ok &#34; : &#34;not ok &#34;&#41;, &#40;$i+1&#41;, &#34;\n&#34;&#41;&#41;  ||
                !close&#40;$fh&#41;&#41; {
                print STDERR &#40;__LINE__, &#34;Error while writing log file: $!\n&#34;&#41;;
                exit 1;
            }
            exit 0;
        }
    } else {
        print STDERR &#40;__LINE__, &#34;Failed to create new child: $!\n&#34;&#41;;
        exit 1;
    }
}

my $secs = 120;
while &#40;$secs &gt; 0&#41; {
    $secs -= sleep $secs;
}

END {
    &#38;log&#40;&#34;END: -&gt; handle=&#34; . &#40;defined&#40;$handle&#41; ? $handle : &#34;undef&#34;&#41;&#41;;
    if &#40;$handle&#41; {
        print STDERR &#40;&#34;\n&#34;, __LINE__, &#34; handle $handle\n&#34;&#41;;
        $handle-&gt;Terminate&#40;&#41;;
        undef $handle;
    }
    while &#40;my&#40;$var, $val&#41; = each %childs&#41; {
        print STDERR &#40;&#34;\n&#34;, __LINE__, &#34;: killing child $var and val is
$val\n&#34;&#41;;
        kill &#39;TERM&#39;, $var;
    }
    %childs = &#40;&#41;;
    unlink &#34;ndtest.prt&#34;;
    &#38;log&#40;&#34;END: &lt;-&#34;&#41;;
    exit 0;
}
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-324471" href="/Public/Bug/Display.html?id=18112#txn-324471">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;04&nbsp;14:53:48&nbsp;2007</span>
    <span class="description">feldt [...] nhn.ou.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18112] forkm test hangs for Solaris 8</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 04 Jun 2007 13:51:08 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Daemon [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Andy Feldt &lt;feldt [...] nhn.ou.edu&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/324471/148621/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/148621">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 6.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ok, I have run the latest forkm test as indicated.  I ran it 20 times obtaining
two different failure modes &#40;meaning the test hung at the end&#41; and two
different success modes &#40;meaning I got a prompt back&#41;.  These can be categorized
by the appearance of lines like:

22: 5559 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3e9428&#41;, i=0, j=0:

The first failure category contains none of these lines.  The second contains
1000 lines with i=0 &#40;and j from 0 to 999&#41;.  The first success case contains
the i=0 lines and also contains 1000 lines with i=1.  The second success case
adds 1000 lines with i=2.

There were 10 cases of failure1, 7 cases of failure2, 2 cases of success1 and
a single case of success2 out of the 20 attempts.

Examples of each mode &#40;ellipsis for removed content&#41;:

=== failure mode 1 ===
17: pid 5534, ref dh is :GLOB
22: 5534 msg is Start:
Starting server: /usr/local/bin/perl -Iblib/lib -Iblib/arch t/server --mode=fork 
logfile=stderr debug
34: child 5536 is about to exit
22: 5536 msg is END: -&gt; handle=undef:
22: 5536 msg is END: &lt;-:
1..10

59: port :52585:
22: 5534 msg is CatchChild: -&gt;:
22: 5534 msg is CatchChild: 5536:
=== end failure mode 1 ===

=== failure mode 2 ===
17: pid 5550, ref dh is :GLOB
22: 5550 msg is Start:
Starting server: /usr/local/bin/perl -Iblib/lib -Iblib/arch t/server --mode=fork
  logfile=stderr debug
34: child 5552 is about to exit
22: 5552 msg is END: -&gt; handle=undef:
22: 5552 msg is END: &lt;-:
1..10

59: port :52600:
22: 5550 msg is Spawning childs:
185: pid 5559
22: 5559 msg is Child starting:
22: 5559 msg is MyChild: -&gt; 0:
22: 5550 msg is CatchChild: -&gt;:
22: 5550 msg is CatchChild: 5552:
105: PeerPort :52600:
22: 5559 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3e9428&#41;, i=0, j=0:
22: 5559 msg is ReadWrite: line=0
:
22: 5559 msg is ReadWrite: &lt;-:
22: 5559 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3e9428&#41;, i=0, j=1:
22: 5559 msg is ReadWrite: line=2
:
... &#40;repeat blocks with line+=2, j+=1&#41;
22: 5559 msg is ReadWrite: &lt;-:
22: 5559 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3e9428&#41;, i=0, j=999:
22: 5559 msg is ReadWrite: line=1998
:
22: 5559 msg is ReadWrite: &lt;-:
22: 5559 msg is MyChild: &lt;-:
121: PeerPort :52600:
192: ref fh is :GLOB:
22: 5559 msg is END: -&gt; handle=undef:
22: 5559 msg is END: &lt;-:
22: 5550 msg is CatchChild: 5559:
=== end failure mode 2 ===

=== success mode 1 ===
17: pid 5877, ref dh is :GLOB
22: 5877 msg is Start:
Starting server: /usr/local/bin/perl -Iblib/lib -Iblib/arch t/server --mode=fork
  logfile=stderr debug
34: child 5880 is about to exit
22: 5880 msg is END: -&gt; handle=undef:
22: 5880 msg is END: &lt;-:
1..10

59: port :52834:
22: 5877 msg is Spawning childs:
183: 5877 Created childs 5882
185: pid 5882
22: 5882 msg is Child starting:
22: 5882 msg is MyChild: -&gt; 0:
185: pid 5883
22: 5883 msg is Child starting:
22: 5883 msg is MyChild: -&gt; 1:
22: 5877 msg is CatchChild: -&gt;:
22: 5877 msg is CatchChild: 5880:
105: PeerPort :52834:
22: 5882 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3e94b0&#41;, i=0, j=0:
105: PeerPort :52834:
22: 5883 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3e94b0&#41;, i=1, j=0:
22: 5882 msg is ReadWrite: line=0
:
... &#40;middle removed&#41;
22: 5882 msg is ReadWrite: &lt;-:
22: 5882 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3e94b0&#41;, i=0, j=999:
22: 5882 msg is ReadWrite: line=1998
:
22: 5882 msg is ReadWrite: &lt;-:
22: 5882 msg is MyChild: &lt;-:
121: PeerPort :52834:
192: ref fh is :GLOB:
22: 5882 msg is END: -&gt; handle=undef:
22: 5882 msg is END: &lt;-:
22: 5877 msg is CatchChild: 5882:
155: childs 5882 is :0
158: %childs is 0
22: 5877 msg is ShowResults: -&gt;:
ok 1
ok 2
not ok 3
not ok 4
not ok 5
not ok 6
not ok 7
not ok 8
not ok 9
not ok 10
22: 5877 msg is ShowResults: &lt;-:
22: 5877 msg is END: -&gt; handle=Net::Daemon::Test::Fork=SCALAR&#40;0x2cd3b4&#41;:

216 handle Net::Daemon::Test::Fork=SCALAR&#40;0x2cd3b4&#41;
22: 5877 msg is END: &lt;-:
=== end success mode 1 ===

=== success mode 2 ===
17: pid 5918, ref dh is :GLOB
22: 5918 msg is Start:
Starting server: /usr/local/bin/perl -Iblib/lib -Iblib/arch t/server --mode=fork
  logfile=stderr debug
34: child 5920 is about to exit
22: 5920 msg is END: -&gt; handle=undef:
22: 5920 msg is END: &lt;-:
1..10

59: port :52866:
22: 5918 msg is Spawning childs:
183: 5918 Created childs 5940
185: pid 5940
22: 5940 msg is Child starting:
22: 5940 msg is MyChild: -&gt; 0:
185: pid 5941
22: 5941 msg is Child starting:
22: 5941 msg is MyChild: -&gt; 1:
183: 5918 Created childs 5941
105: PeerPort :52866:
22: 5940 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3e9428&#41;, i=0, j=0:
185: pid 5942
22: 5942 msg is Child starting:
22: 5942 msg is MyChild: -&gt; 2:
22: 5918 msg is CatchChild: -&gt;:
105: PeerPort :52866:
22: 5941 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3e9428&#41;, i=1, j=0:
22: 5918 msg is CatchChild: 5920:
105: PeerPort :52866:
22: 5942 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3e9428&#41;, i=2, j=0:
22: 5940 msg is ReadWrite: line=0
:
... &#40;many lines removed&#41;
22: 5942 msg is ReadWrite: &lt;-:
22: 5942 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3e9428&#41;, i=2, j=578:
22: 5918 msg is CatchChild: 5941:
155: childs 5941 is :1
158: %childs is 0
22: 5918 msg is ShowResults: -&gt;:
22: 5942 msg is ReadWrite: line=1156
:
22: 5942 msg is ReadWrite: &lt;-:
22: 5942 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3e9428&#41;, i=2, j=579:
22: 5942 msg is ReadWrite: line=1158
:
22: 5942 msg is ReadWrite: &lt;-:
22: 5942 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3e9428&#41;, i=2, j=580:
ok 1
ok 2
not ok 3
not ok 4
not ok 5
not ok 6
not ok 7
not ok 8
not ok 9
not ok 10
22: 5918 msg is ShowResults: &lt;-:
22: 5942 msg is ReadWrite: line=1160
:
22: 5942 msg is ReadWrite: &lt;-:
22: 5942 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3e9428&#41;, i=2, j=581:
22: 5918 msg is END: -&gt; handle=Net::Daemon::Test::Fork=SCALAR&#40;0x2cd324&#41;:

216 handle Net::Daemon::Test::Fork=SCALAR&#40;0x2cd324&#41;
22: 5942 msg is ReadWrite: line=1162
:
22: 5942 msg is ReadWrite: &lt;-:
22: 5942 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3e9428&#41;, i=2, j=582:
22: 5918 msg is END: &lt;-:
22: 5942 msg is ReadWrite: line=1164
:
... &#40;many lines removed - all blocks with i=2&#41;
22: 5942 msg is ReadWrite: &lt;-:
22: 5942 msg is ReadWrite: -&gt; fh=IO::Socket::INET=GLOB&#40;0x3e9428&#41;, i=2, j=999:
22: 5942 msg is ReadWrite: line=1998
:
22: 5942 msg is ReadWrite: &lt;-:
22: 5942 msg is MyChild: &lt;-:
121: PeerPort :52866:
192: ref fh is :GLOB:
22: 5942 msg is END: -&gt; handle=undef:
22: 5942 msg is END: &lt;-:
=== end success mode 2 ===
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-324559" href="/Public/Bug/Display.html?id=18112#txn-324559">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;04&nbsp;21:16:16&nbsp;2007</span>
    <span class="description">m.nooning [...] comcast.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> m.nooning [...] comcast.net</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/324559/148673/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/148673">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 307b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the work.

I was hoping that the prints from one of the error sections would show.
 Unfortunately not one single one of them show.  Consequently there are
no tell-tale failures to back track on.

I&#39;ll have to give this more thought.  At this point I would welcome
suggestions from anyone.

Thanks
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-324767" href="/Public/Bug/Display.html?id=18112#txn-324767">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;05&nbsp;10:55:08&nbsp;2007</span>
    <span class="description">LGODDARD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> LGODDARD [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/324767/148790/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/148790">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 5.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is now fine on Debian:

  CPAN.pm: Going to build M/MN/MNOONING/Net-Daemon/Net-Daemon-
0.41.tar.gz

Checking if your kit is complete...
Looks good
Writing Makefile for Net::Daemon
cp lib/Net/Daemon/Test.pm blib/lib/Net/Daemon/Test.pm
cp lib/Net/Daemon/Log.pm blib/lib/Net/Daemon/Log.pm
cp lib/Net/.svn/format blib/lib/Net/.svn/format
cp lib/Net/Daemon/.svn/format blib/lib/Net/Daemon/.svn/format
cp lib/.svn/entries blib/lib/.svn/entries
cp lib/Net/Daemon.pm blib/lib/Net/Daemon.pm
cp lib/Net/Daemon/.svn/text-base/Log.pm.svn-base 
blib/lib/Net/Daemon/.svn/text-base/Log.pm.svn-base
cp lib/Net/.svn/entries blib/lib/Net/.svn/entries
cp lib/Net/Daemon/.svn/text-base/Test.pm.svn-base 
blib/lib/Net/Daemon/.svn/text-base/Test.pm.svn-base
cp lib/Net/.svn/text-base/Daemon.pm.svn-base blib/lib/Net/.svn/text-
base/Daemon.pm.svn-base
cp lib/Net/Daemon/.svn/entries blib/lib/Net/Daemon/.svn/entries
cp lib/.svn/format blib/lib/.svn/format
Manifying blib/man3/Net::Daemon::Test.3pm
Manifying blib/man3/Net::Daemon::Log.3pm
Manifying blib/man3/Net::Daemon.3pm
  MNOONING/Net-Daemon/Net-Daemon-0.41.tar.gz
  /usr/bin/make -- OK
Running make test
PERL_DL_NONLAZY=1 /usr/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-
e&#34; &#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
t/base..........ok
t/config........ok
t/fork..........ok
t/forkm.........ok
t/ithread.......Perl exited with active threads:
        0 running and unjoined
        1 finished and unjoined
        0 running and detached
t/ithread.......ok
t/ithreadm......ok
t/loop-child....ok
t/loop..........ok
t/single........ok
t/thread........skipped
        all skipped: no reason given
t/threadm.......ok
t/unix..........ok
All tests successful, 1 test skipped.
Files=12, Tests=68, 82 wallclock secs &#40; 5.47 cusr +  0.72 csys =  6.19 
CPU&#41;
  MNOONING/Net-Daemon/Net-Daemon-0.41.tar.gz
  /usr/bin/make test -- OK
Running make install
Installing /usr/local/share/perl/5.8.4/Net/Daemon.pm
Installing /usr/local/share/perl/5.8.4/Net/Daemon/Test.pm
Installing /usr/local/share/perl/5.8.4/Net/Daemon/Log.pm
Installing /usr/local/share/perl/5.8.4/Net/Daemon/.svn/format
Installing /usr/local/share/perl/5.8.4/Net/Daemon/.svn/entries
Installing /usr/local/share/perl/5.8.4/Net/Daemon/.svn/text-
base/Log.pm.svn-base
Installing /usr/local/share/perl/5.8.4/Net/Daemon/.svn/text-
base/Test.pm.svn-base
Installing /usr/local/share/perl/5.8.4/Net/.svn/format
Installing /usr/local/share/perl/5.8.4/Net/.svn/entries
Installing /usr/local/share/perl/5.8.4/Net/.svn/text-base/Daemon.pm.svn-
base
Installing /usr/local/share/perl/5.8.4/.svn/entries
Installing /usr/local/share/perl/5.8.4/.svn/format
Installing /usr/local/man/man3/Net::Daemon::Test.3pm
Installing /usr/local/man/man3/Net::Daemon::Log.3pm
Installing /usr/local/man/man3/Net::Daemon.3pm
Writing /usr/local/lib/perl/5.8.4/auto/Net/Daemon/.packlist
Appending installation info to /usr/local/lib/perl/5.8.4/perllocal.pod
  MNOONING/Net-Daemon/Net-Daemon-0.41.tar.gz
  /usr/bin/make install  -- OK

lgoddard@uk-sandbox:~/trafficjam/trunk$ perl -V
Summary of my perl5 &#40;revision 5 version 8 subversion 4&#41; configuration:
  Platform:
    osname=linux, osvers=2.6.15.6, archname=i386-linux-thread-multi
    uname=&#39;linux ernie 2.6.15.6 #1 thu mar 16 13:11:55 est 2006 i686 
gnulinux &#39;
    config_args=&#39;-Dusethreads -Duselargefiles -Dccflags=-DDEBIAN -
Dcccdlflags=-fPIC -Darchname=i386-linux -Dprefix=/usr -
Dprivlib=/usr/share/perl/5.8 -Darchlib=/usr/lib/perl/5.8 -
Dvendorprefix=/usr -Dvendorlib=/usr/share/perl5 -
Dvendorarch=/usr/lib/perl5 -Dsiteprefix=/usr/local -
Dsitelib=/usr/local/share/perl/5.8.4 -
Dsitearch=/usr/local/lib/perl/5.8.4 -Dman1dir=/usr/share/man/man1 -
Dman3dir=/usr/share/man/man3 -Dsiteman1dir=/usr/local/man/man1 -
Dsiteman3dir=/usr/local/man/man3 -Dman1ext=1 -Dman3ext=3perl -
Dpager=/usr/bin/sensible-pager -Uafs -Ud_csh -Uusesfio -Uusenm -
Duseshrplib -Dlibperl=libperl.so.5.8.4 -Dd_dosuid -des&#39;
    hint=recommended, useposix=true, d_sigaction=define
    usethreads=define use5005threads=undef useithreads=define 
usemultiplicity=define
    useperlio=define d_sfio=undef uselargefiles=define usesocks=undef
    use64bitint=undef use64bitall=undef uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;cc&#39;, ccflags =&#39;-D_REENTRANT -D_GNU_SOURCE -DTHREADS_HAVE_PIDS -
DDEBIAN -fno-strict-aliasing -I/usr/local/include -D_LARGEFILE_SOURCE -
D_FILE_OFFSET_BITS=64&#39;,
    optimize=&#39;-O2&#39;,
    cppflags=&#39;-D_REENTRANT -D_GNU_SOURCE -DTHREADS_HAVE_PIDS -DDEBIAN -
fno-strict-aliasing -I/usr/local/include&#39;
    ccversion=&#39;&#39;, gccversion=&#39;3.3.5 &#40;Debian 1:3.3.5-13&#41;&#39;, 
gccosandvers=&#39;&#39;
    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=1234
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=12
    ivtype=&#39;long&#39;, ivsize=4, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;, 
lseeksize=8
    alignbytes=4, prototype=define
  Linker and Libraries:
    ld=&#39;cc&#39;, ldflags =&#39; -L/usr/local/lib&#39;
    libpth=/usr/local/lib /lib /usr/lib
    libs=-lgdbm -lgdbm_compat -ldb -ldl -lm -lpthread -lc -lcrypt
    perllibs=-ldl -lm -lpthread -lc -lcrypt
    libc=/lib/libc-2.3.2.so, so=so, useshrplib=true, 
libperl=libperl.so.5.8.4
    gnulibc_version=&#39;2.3.2&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags=&#39;-Wl,-E&#39;
    cccdlflags=&#39;-fPIC&#39;, lddlflags=&#39;-shared -L/usr/local/lib&#39;


Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options: MULTIPLICITY USE_ITHREADS USE_LARGE_FILES 
PERL_IMPLICIT_CONTEXT
  Built under linux
  Compiled at May 10 2006 03:55:26
  @INC:
    /etc/perl
    /usr/local/lib/perl/5.8.4
    /usr/local/share/perl/5.8.4
    /usr/lib/perl5
    /usr/share/perl5
    /usr/lib/perl/5.8
    /usr/share/perl/5.8
    /usr/local/lib/site_perl
    .
lgoddard@uk-sandbox:~/trafficjam/trunk$
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-326875" href="/Public/Bug/Display.html?id=18112#txn-326875">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;14&nbsp;21:14:56&nbsp;2007</span>
    <span class="description">m.nooning [...] comcast.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> m.nooning [...] comcast.net</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/326875/150029/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/150029">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 119b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Try this on Solaris 8.  Just below the ok statement on line 33 of
t/forkm.t, add the wait statement below.

    wait;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-326997" href="/Public/Bug/Display.html?id=18112#txn-326997">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;15&nbsp;10:06:25&nbsp;2007</span>
    <span class="description">feldt [...] nhn.ou.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18112] forkm test hangs for Solaris 8</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 15 Jun 2007 09:05:27 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Daemon [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Andy Feldt &lt;feldt [...] nhn.ou.edu&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/326997/150085/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/150085">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 136b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">That did it!  I ran the test 10 times just to make sure
&#40;since it was clearly a timing issue&#41; and it was successful
each time.  Thanks!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-327111" href="/Public/Bug/Display.html?id=18112#txn-327111">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;16&nbsp;16:14:58&nbsp;2007</span>
    <span class="description">m.nooning [...] comcast.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> m.nooning [...] comcast.net</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/327111/150142/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/150142">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 578b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Excellent.

Many thanks to Mr. Bowman for the tip.

Mr. Bowman, between yesterday and today my computer died.  I am on an
old one I keep around.  I am too lazy to dig into the emails of the dead
computers hard drive to figure out who wrote me with the &#34;wait;&#34; tip.  I
hope I am getting your name right.  In any case, good call.


I just added version Net-Daemon-0.42 to CPAN.  It should show up by
tomorrow morning.  Since you have Solaris, please download it and try it
out again, and let me know how it went.  If everything iss okay I will
then close out this bug.


Thanks
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-327277" href="/Public/Bug/Display.html?id=18112#txn-327277">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;17&nbsp;16:31:52&nbsp;2007</span>
    <span class="description">MNOONING [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/327277/150230/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/150230">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 267b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I needed to put in another version, 0.43, because I had .svn
&#40;subversion&#41; directories in the tar.gz file of 0.42, and I failed to inc
the version number in the proper .pm file.

Otherwise 0.43 is the same as 0.42.

Time and CPAN testers will tell us if this is fixed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1912514" href="/Public/Bug/Display.html?id=18112#txn-1912514">#</a>      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;22&nbsp;18:18:19&nbsp;2020</span>
    <span class="description">TODDR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1912514/1024351/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1024351">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 74b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ticket migrated to github as <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/toddr/Net-Daemon/issues/10">https://github.com/toddr/Net-Daemon/issues/10</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1912517" href="/Public/Bug/Display.html?id=18112#txn-1912517">#</a>      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;22&nbsp;18:18:20&nbsp;2020</span>
    <span class="description">TODDR [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 1.123392</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
