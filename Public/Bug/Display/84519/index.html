<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #84519 for XML-Simple: Slow in parsing huge 5MB XML</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #84519 for XML-Simple: Slow in parsing huge 5MB XML</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/XML-Simple/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/XML-Simple/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/XML-Simple/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/XML-Simple/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/XML-Simple">XML-Simple CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">84519</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/XML-Simple/Active/">XML-Simple</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">grantm [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
issh88 [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-37628-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.15    </td>
  </tr>
  <tr id="CF-37629-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




xmlfile<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1199977/633507/xmlfile">
Tue Apr 09 01:48:51 2013 (5198.5k) by issh88 [...] gmail.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;09&nbsp;01:48:51&nbsp;2013</span>
    <span class="description">issh88 [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Slow in parsing huge 5MB XML</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

We are using XML::Simple to convert XML string into a Perl data structure.
The size of XML string varies from few lines  to MBs.

While testing, we have noticed that to convert a XML string of
size 5MB into a Perl data structure,

XML::Simple - version 2.15 took few seconds whereas
XML::Simple - version 2.20 took 13-18 minutes causing the
execution time of our test to shoot up.

Another interesting observation is that, XML::Simple &#40;2.20&#41; doesn&#39;t
take too much time if we specify the file name &#40;which has XML content&#41;
instead of specifying the XML content as a string.

To reproduce this issue, the following simple script can be used,

[isshwar@qalnb06 profile]$ cat xmlcheck.pl
use XML::Simple;
use DateTime;
my $xml= new XML::Simple;
open &#40;FH, &#39;&lt;xmlfile&#39;&#41;;
my @arr = &lt;FH&gt;;
print DateTime-&gt;now . &#34;\n&#34;;
my $ref = $xml-&gt;XMLin&#40;&#34;@arr&#34;&#41;;
print DateTime-&gt;now . &#34;\n&#34;;
[isshwar@cyclrtp31 ~]$

I&#39;ve attached the XML file &#39;xmlfile&#39; used.

Results obtained:

Perl 5.14 takes 18+ minutes approx
[isshwar@qalnb06 profile]$ /usr/software/bin/perl5.14.0  xmlcheck.pl
2013-04-09T05:09:56
2013-04-09T05:28:21
[isshwar@qalnb06 profile]$

With Perl 5.8.8, it just takes few sec.
/usr/software/perl-implementation/perl-5.14.0/bin/perl
[isshwar@qalnb06 profile]$ /usr/software/bin/perl5.8.8 xmlcheck.pl
2013-04-08T13:40:59
2013-04-08T13:41:05
[isshwar@qalnb06 profile]$

The FAQ said,

If you find that XML::Simple is very slow reading XML, the most likely reason is that you have XML::SAX installed but no additional SAX parser module. The XML::SAX distribution includes an XML parser written entirely in Perl. This is very portable but not very fast. For better performance install either XML::SAX::Expat or XML::LibXML.

But we have both the modules installed.

[isshwar@qalnb06 ~]$ /usr/software/bin/perl5.14.0 -e &#39;use XML::SAX::Expat&#39;
[isshwar@qalnb06 ~]$ /usr/software/bin/perl5.14.0 -e &#39;use XML::LibXML&#39;
[isshwar@qalnb06 ~]$

I also did profiling and found that,

XML::Simple &#40;version 2.15&#41; uses
XML::Parser::Expat::ParseString &#40;xsub&#41; which took inclusive time
of 13 sec

XML::Simple &#40;version 2.20&#41; uses
XML::LibXML::_parse_sax_string &#40;xsub&#41; which took inclusive time
of 1110 sec

The version of XML::LibXML which we are using is &#34;2.0004&#34;.
This is bit older, I tried to get the latest version of XML::LibXML,
in my local workspace using &#39;cpanm&#39; and even with that, this
issue is seen.

When I switched preferred parser, it was able to parse the XML really very fast.

setenv XML_SIMPLE_PREFERRED_PARSER XML::Parser

[isshwar@qalnb06 profile]$ /usr/software/bin/perl5.14.0 xmlcheck.pl
2013-04-09T05:40:29
2013-04-09T05:40:31
[isshwar@qalnb06 profile]$

Since the documentation recommends using SAX parser and we have been using SAX parser currently with XML::Simple-2.15, the slowness is not letting us move to the latest version XML::Simple-2.20 and still use SAX parser.

Please help us in resolving this issue. Kindly let me know, if the usage has gone wrong anywhere or you need any further information.

We should thank you for providing such a useful module that it
helped us to handle XML-&gt;Perl data structure conversion so easily
these many years.
-------------------------------------------------------------
Other config details:

[isshwar@qalnb06 ~]$ uname -a
Linux qalnb06.eng.btc.netapp.in 2.6.18-164.10.1.el5ntap1 #1 SMP Mon May 3 17:50:00 PDT 2010 x86_64 x86_64 x86_64 GNU/Linux
[isshwar@qalnb06 ~]$


[isshwar@qalnb06 ~]$ /usr/software/bin/perl5.14.0 -v

This is perl 5, version 14, subversion 0 &#40;v5.14.0&#41; built for x86_64-linux-thread-multi

Copyright 1987-2011, Larry Wall

Perl may be copied only under the terms of either the Artistic License or the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using &#34;man perl&#34; or &#34;perldoc perl&#34;.  If you have access to the
Internet, point your browser at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.org/">http://www.perl.org/</a></span>, the Perl Home Page.

[isshwar@qalnb06 ~]$
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> xmlfile</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1199977/633507/xmlfile">Download xmlfile</a><br />
<span class="downloadcontenttype">application/octet-stream 5m</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;09&nbsp;01:52:30&nbsp;2013</span>
    <span class="description">issh88 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> issh88 [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Apr 09 01:48:51 2013, Isshwarya wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; We are using XML::Simple to convert XML string into a Perl data
&gt;    structure.
&gt; The size of XML string varies from few lines  to MBs.
&gt; 
&gt; While testing, we have noticed that to convert a XML string of
&gt; size 5MB into a Perl data structure,
&gt; 
&gt; XML::Simple - version 2.15 took few seconds whereas
&gt; XML::Simple - version 2.20 took 13-18 minutes causing the
&gt; execution time of our test to shoot up.
&gt; 
&gt; Another interesting observation is that, XML::Simple &#40;2.20&#41; doesn&#39;t
&gt; take too much time if we specify the file name &#40;which has XML content&#41;
&gt; instead of specifying the XML content as a string.
&gt; 
&gt; To reproduce this issue, the following simple script can be used,
&gt; 
&gt; [isshwar@qalnb06 profile]$ cat xmlcheck.pl
&gt; use XML::Simple;
&gt; use DateTime;
&gt; my $xml= new XML::Simple;
&gt; open &#40;FH, &#39;&lt;xmlfile&#39;&#41;;
&gt; my @arr = &lt;FH&gt;;
&gt; print DateTime-&gt;now . &#34;\n&#34;;
&gt; my $ref = $xml-&gt;XMLin&#40;&#34;@arr&#34;&#41;;
&gt; print DateTime-&gt;now . &#34;\n&#34;;
&gt; [isshwar@cyclrtp31 ~]$
&gt; 
&gt; I&#39;ve attached the XML file &#39;xmlfile&#39; used.
&gt; 
&gt; Results obtained:
&gt; 
&gt; Perl 5.14 takes 18+ minutes approx
&gt; [isshwar@qalnb06 profile]$ /usr/software/bin/perl5.14.0  xmlcheck.pl
&gt; 2013-04-09T05:09:56
&gt; 2013-04-09T05:28:21
&gt; [isshwar@qalnb06 profile]$
&gt; 
&gt; With Perl 5.8.8, it just takes few sec.
&gt; /usr/software/perl-implementation/perl-5.14.0/bin/perl
&gt; [isshwar@qalnb06 profile]$ /usr/software/bin/perl5.8.8 xmlcheck.pl
&gt; 2013-04-08T13:40:59
&gt; 2013-04-08T13:41:05
&gt; [isshwar@qalnb06 profile]$
&gt; 
&gt; The FAQ said,
&gt; 
&gt; If you find that XML::Simple is very slow reading XML, the most likely
&gt;    reason is that you have XML::SAX installed but no additional SAX
&gt;    parser module. The XML::SAX distribution includes an XML parser
&gt;    written entirely in Perl. This is very portable but not very fast.
&gt;    For better performance install either XML::SAX::Expat or
&gt;    XML::LibXML.
&gt; 
&gt; But we have both the modules installed.
&gt; 
&gt; [isshwar@qalnb06 ~]$ /usr/software/bin/perl5.14.0 -e &#39;use
&gt;    XML::SAX::Expat&#39;
&gt; [isshwar@qalnb06 ~]$ /usr/software/bin/perl5.14.0 -e &#39;use XML::LibXML&#39;
&gt; [isshwar@qalnb06 ~]$
&gt; 
&gt; I also did profiling and found that,
&gt; 
&gt; XML::Simple &#40;version 2.15&#41; uses
&gt; XML::Parser::Expat::ParseString &#40;xsub&#41; which took inclusive time
&gt; of 13 sec
&gt; 
&gt; XML::Simple &#40;version 2.20&#41; uses
&gt; XML::LibXML::_parse_sax_string &#40;xsub&#41; which took inclusive time
&gt; of 1110 sec
&gt; 
&gt; The version of XML::LibXML which we are using is &#34;2.0004&#34;.
&gt; This is bit older, I tried to get the latest version of XML::LibXML,
&gt; in my local workspace using &#39;cpanm&#39; and even with that, this
&gt; issue is seen.
&gt; 
&gt; When I switched preferred parser, it was able to parse the XML really
&gt;    very fast.
&gt; 
&gt; setenv XML_SIMPLE_PREFERRED_PARSER XML::Parser
&gt; 
&gt; [isshwar@qalnb06 profile]$ /usr/software/bin/perl5.14.0 xmlcheck.pl
&gt; 2013-04-09T05:40:29
&gt; 2013-04-09T05:40:31
&gt; [isshwar@qalnb06 profile]$
&gt; 
&gt; Since the documentation recommends using SAX parser and we have been
&gt;    using SAX parser currently with XML::Simple-2.15, the slowness is
&gt;    not letting us move to the latest version XML::Simple-2.20 and
&gt;    still use SAX parser.
&gt; 
&gt; Please help us in resolving this issue. Kindly let me know, if the
&gt;    usage has gone wrong anywhere or you need any further information.
&gt; 
&gt; We should thank you for providing such a useful module that it
&gt; helped us to handle XML-&gt;Perl data structure conversion so easily
&gt; these many years.
&gt; -------------------------------------------------------------
&gt; Other config details:
&gt; 
&gt; [isshwar@qalnb06 ~]$ uname -a
&gt; Linux qalnb06.eng.btc.netapp.in 2.6.18-164.10.1.el5ntap1 #1 SMP Mon
&gt;    May 3 17:50:00 PDT 2010 x86_64 x86_64 x86_64 GNU/Linux
&gt; [isshwar@qalnb06 ~]$
&gt; 
&gt; 
&gt; [isshwar@qalnb06 ~]$ /usr/software/bin/perl5.14.0 -v
&gt; 
&gt; This is perl 5, version 14, subversion 0 &#40;v5.14.0&#41; built for x86_64-
&gt;    linux-thread-multi
&gt; 
&gt; Copyright 1987-2011, Larry Wall
&gt; 
&gt; Perl may be copied only under the terms of either the Artistic License
&gt;    or the
&gt; GNU General Public License, which may be found in the Perl 5 source
&gt;    kit.
&gt; 
&gt; Complete documentation for Perl, including FAQ lists, should be found
&gt;    on
&gt; this system using &#34;man perl&#34; or &#34;perldoc perl&#34;.  If you have access to
&gt;    the
&gt; Internet, point your browser at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.org/">http://www.perl.org/</a></span>, the Perl Home
&gt;    Page.
&gt; 
&gt; [isshwar@qalnb06 ~]$
</div>
Sorry, I&#39;ve wrongly selected 2.15 in &#39;Borken_in&#39; field. It should have
been 2.20. I tried to update the field again and I&#39;m not able to.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;10&nbsp;03:43:07&nbsp;2013</span>
    <span class="description">grantm [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This really does sound like your default parser is XML::SAX::PurePerl.  Possibly the ParserDetails.ini file was not updated when you installed the other parser modules.

Running this one-liner from a command shell will tell what the default SAX parser is:

  perl -MXML::SAX -le &#34;print ref&#40;XML::SAX::ParserFactory-&gt;parser&#40;&#41;&#41;&#34;

On my system, it prints out:

  XML::SAX::ExpatXS

If the result is XML::SAX::PurePerl then you&#39;ll need to find the file called XML/SAX/ParserDetails.ini somewhere in you Perl lib search path. You can edit the file and add a section like this to the end of the file:

[XML::SAX::ExpatXS]
<span class="clickylink"><a target="new" rel="nofollow" href="http://xml.org/sax/features/external-general-entities">http://xml.org/sax/features/external-general-entities</a></span> = 1
<span class="clickylink"><a target="new" rel="nofollow" href="http://xml.org/sax/features/external-parameter-entities">http://xml.org/sax/features/external-parameter-entities</a></span> = 1
<span class="clickylink"><a target="new" rel="nofollow" href="http://xmlns.perl.org/sax/recstring">http://xmlns.perl.org/sax/recstring</a></span> = 1
<span class="clickylink"><a target="new" rel="nofollow" href="http://xmlns.perl.org/sax/locator">http://xmlns.perl.org/sax/locator</a></span> = 1
<span class="clickylink"><a target="new" rel="nofollow" href="http://xml.org/sax/features/xmlns-uris">http://xml.org/sax/features/xmlns-uris</a></span> = 1
<span class="clickylink"><a target="new" rel="nofollow" href="http://xmlns.perl.org/sax/ns-attributes">http://xmlns.perl.org/sax/ns-attributes</a></span> = 1
<span class="clickylink"><a target="new" rel="nofollow" href="http://xml.org/sax/features/namespaces">http://xml.org/sax/features/namespaces</a></span> = 1
<span class="clickylink"><a target="new" rel="nofollow" href="http://xmlns.perl.org/sax/version-2.1">http://xmlns.perl.org/sax/version-2.1</a></span> = 1
<span class="clickylink"><a target="new" rel="nofollow" href="http://xmlns.perl.org/sax/xmlns-uris">http://xmlns.perl.org/sax/xmlns-uris</a></span> = 1
<span class="clickylink"><a target="new" rel="nofollow" href="http://xmlns.perl.org/sax/join-character-data">http://xmlns.perl.org/sax/join-character-data</a></span> = 1


The last parser module listed will be the default.

Regards
Grant
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;10&nbsp;03:43:07&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;10&nbsp;03:43:07&nbsp;2013</span>
    <span class="description">grantm [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;10&nbsp;05:24:05&nbsp;2013</span>
    <span class="description">issh88 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #84519] Slow in parsing huge 5MB XML</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 10 Apr 2013 14:53:50 +0530</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-Simple [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Isshwarya M &lt;issh88 [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Grant,

Thanks for the quick reply.

I tried your commandline to obtain the parser.

[isshwar@qalnb06 ~]$ /usr/software/bin/perl5.14.0 -MXML::SAX -le &#34;print
ref&#40;XML::SAX::ParserFactory-&gt;parser&#40;&#41;&#41;&#34;
XML::LibXML::SAX
[isshwar@qalnb06 ~]$

[isshwar@qalnb06 ~]$ cat
/usr/software/perl-implementation/perl-5.14.0/lib/site_perl/5.14.0/XML/SAX/ParserDetails.ini
[XML::SAX::Expat]
<span class="clickylink"><a target="new" rel="nofollow" href="http://xml.org/sax/features/namespaces">http://xml.org/sax/features/namespaces</a></span> = 1
<span class="clickylink"><a target="new" rel="nofollow" href="http://xml.org/sax/features/external-general-entities">http://xml.org/sax/features/external-general-entities</a></span> = 1
<span class="clickylink"><a target="new" rel="nofollow" href="http://xml.org/sax/features/external-parameter-entities">http://xml.org/sax/features/external-parameter-entities</a></span> = 1

[XML::LibXML::SAX::Parser]
<span class="clickylink"><a target="new" rel="nofollow" href="http://xml.org/sax/features/namespaces">http://xml.org/sax/features/namespaces</a></span> = 1

[XML::LibXML::SAX]
<span class="clickylink"><a target="new" rel="nofollow" href="http://xml.org/sax/features/namespaces">http://xml.org/sax/features/namespaces</a></span> = 1


[isshwar@qalnb06 ~]$

Do you see any issues in using XML::LibXML::SAX? We don&#39;t have
XML::SAX::ExpatXS
installed in our system and I can get it installed though.





On 10 April 2013 13:13, Grant McLean via RT &lt;bug-XML-Simple@rt.cpan.org&gt;wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=84519">https://rt.cpan.org/Ticket/Display.html?id=84519</a></span> &gt;
&gt;
&gt; This really does sound like your default parser is XML::SAX::PurePerl.
&gt;  Possibly the ParserDetails.ini file was not updated when you installed the
&gt; other parser modules.
&gt;
&gt; Running this one-liner from a command shell will tell what the default SAX
&gt; parser is:
&gt;
&gt;   perl -MXML::SAX -le &#34;print ref&#40;XML::SAX::ParserFactory-&gt;parser&#40;&#41;&#41;&#34;
&gt;
&gt; On my system, it prints out:
&gt;
&gt;   XML::SAX::ExpatXS
&gt;
&gt; If the result is XML::SAX::PurePerl then you&#39;ll need to find the file
&gt; called XML/SAX/ParserDetails.ini somewhere in you Perl lib search path. You
&gt; can edit the file and add a section like this to the end of the file:
&gt;
&gt; [XML::SAX::ExpatXS]
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://xml.org/sax/features/external-general-entities">http://xml.org/sax/features/external-general-entities</a></span> = 1
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://xml.org/sax/features/external-parameter-entities">http://xml.org/sax/features/external-parameter-entities</a></span> = 1
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://xmlns.perl.org/sax/recstring">http://xmlns.perl.org/sax/recstring</a></span> = 1
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://xmlns.perl.org/sax/locator">http://xmlns.perl.org/sax/locator</a></span> = 1
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://xml.org/sax/features/xmlns-uris">http://xml.org/sax/features/xmlns-uris</a></span> = 1
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://xmlns.perl.org/sax/ns-attributes">http://xmlns.perl.org/sax/ns-attributes</a></span> = 1
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://xml.org/sax/features/namespaces">http://xml.org/sax/features/namespaces</a></span> = 1
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://xmlns.perl.org/sax/version-2.1">http://xmlns.perl.org/sax/version-2.1</a></span> = 1
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://xmlns.perl.org/sax/xmlns-uris">http://xmlns.perl.org/sax/xmlns-uris</a></span> = 1
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://xmlns.perl.org/sax/join-character-data">http://xmlns.perl.org/sax/join-character-data</a></span> = 1
&gt;
&gt;
&gt; The last parser module listed will be the default.
&gt;
&gt; Regards
&gt; Grant
&gt;
&gt;
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;10&nbsp;05:39:36&nbsp;2013</span>
    <span class="description">grantm [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Apr 10 05:24:05 2013, Isshwarya wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I tried your commandline to obtain the parser.
&gt; 
&gt; [isshwar@qalnb06 ~]$ /usr/software/bin/perl5.14.0 -MXML::SAX -le
&gt; &#34;print ref&#40;XML::SAX::ParserFactory-&gt;parser&#40;&#41;&#41;&#34;
&gt; XML::LibXML::SAX
&gt; [isshwar@qalnb06 ~]$
</div>
OK - well that&#39;s definitely not XML::SAX::PurePerl :-&#41;

I would not expect XML::LibXML::SAX to be slow, but I have not used it extensively.

Try editing the ParserDetails.ini to move the [XML::SAX::Expat] section to the bottom of the file.

Grant
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;11&nbsp;11:56:57&nbsp;2013</span>
    <span class="description">issh88 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #84519] Slow in parsing huge 5MB XML</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 11 Apr 2013 21:26:42 +0530</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-Simple [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Isshwarya M &lt;issh88 [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks Grant.  I moved XML::SAX::Expat to the bottom and that did the
magic. It&#39;s a lot more better now.

[isshwar@qalnb06 profile]$ /usr/software/bin/perl5.14.0 xmlcheck.pl
2013-04-11T15:50:01
2013-04-11T15:50:07

I also checked the ParserDetails.ini picked up by our Perl5.8.8
installation and it&#39;s also using XML::SAX::Expat.

Thanks much for your quick response. The issue is resolved now. Feel free
to move the bug status to closed/fixed. Thanks again!



On 10 April 2013 15:09, Grant McLean via RT &lt;bug-XML-Simple@rt.cpan.org&gt;wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=84519">https://rt.cpan.org/Ticket/Display.html?id=84519</a></span> &gt;
&gt;
&gt; On Wed Apr 10 05:24:05 2013, Isshwarya wrote:
<div class="message-stanza open">&gt; &gt; I tried your commandline to obtain the parser.
&gt; &gt;
&gt; &gt; [isshwar@qalnb06 ~]$ /usr/software/bin/perl5.14.0 -MXML::SAX -le
&gt; &gt; &#34;print ref&#40;XML::SAX::ParserFactory-&gt;parser&#40;&#41;&#41;&#34;
&gt; &gt; XML::LibXML::SAX
&gt; &gt; [isshwar@qalnb06 ~]$
</div>&gt;
&gt; OK - well that&#39;s definitely not XML::SAX::PurePerl :-&#41;
&gt;
&gt; I would not expect XML::LibXML::SAX to be slow, but I have not used it
&gt; extensively.
&gt;
&gt; Try editing the ParserDetails.ini to move the [XML::SAX::Expat] section to
&gt; the bottom of the file.
&gt;
&gt; Grant
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;11&nbsp;14:31:20&nbsp;2013</span>
    <span class="description">grantm [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
