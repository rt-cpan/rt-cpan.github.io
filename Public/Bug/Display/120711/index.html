<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #120711 for Math-Pari: Fails tests  without &#39;.&#39; in @INC</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #120711 for Math-Pari: Fails tests  without &#39;.&#39; in @INC</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Math-Pari">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Math-Pari">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Math-Pari">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Math-Pari">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Math-Pari">Math-Pari CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">120711</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Math-Pari">Math-Pari</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
KENTNL [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-20832-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-20833-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




do.log<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1712735/920215/do.log">
Mon Mar 27 17:53:58 2017 (5.6k) by public [...] khwilliamson.com
</a>
</font></li>
</ul>


Math-Pari-2.10.809.0-no-dot-inc.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1732226/931413/Math-Pari-2.10.809.0-no-dot-inc.patch">
Sat Jun 10 21:37:13 2017 (1012b) by KENTNL [...] cpan.org
</a>
</font></li>
</ul>


no-flto.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1732226/931414/no-flto.patch">
Sat Jun 10 21:37:13 2017 (2.8k) by KENTNL [...] cpan.org
</a>
</font></li>
</ul>


pari-2.3.5-no-dot-inc.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1732226/931415/pari-2.3.5-no-dot-inc.patch">
Sat Jun 10 21:37:13 2017 (1.5k) by KENTNL [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=120711">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1711869" href="/Public/Bug/Display.html?id=120711#txn-1711869">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;23&nbsp;08:58:44&nbsp;2017</span>
    <span class="description">KENTNL [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Fails tests  without &#39;.&#39; in @INC</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1711869/919723/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/919723">with headers</a>
<br />
<span class="downloadcontenttype">text/html 4.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza"><p>
	On 5.25.10+ where default_inc_excludes_dot is defined ( default on .11+ ), Math::Pari fails tests with a bunch of blocks that look like unhandled &quot;do $file&quot; failures.<br>

	<br>

	Said failures disappear under PERL_USE_UNSAFE_INC=1<br>

	<br>

	&nbsp;</p>

<p>
	PERL_DL_NONLAZY=1 &quot;/home/kent/perl5/perlbrew/perls/5.25.10-nossp-sdbm-nopmc-nodot/bin/perl5.25.10&quot; &quot;-MExtUtils::Command::MM&quot; &quot;-MTest::Harness&quot; &quot;-e&quot; &quot;undef *Test::Harness::Switches; test_harness(0, &#39;blib/lib&#39;, &#39;blib/arch&#39;)&quot; t/<br>

	*.t<br>

	t/55_analyz.t .............<br>

	No subtests run<br>

	t/000_load-problem.t ...... ok<br>

	t/55_ploth.t ..............<br>

	No subtests run<br>

	t/55_polyser.t ............<br>

	No subtests run<br>

	t/55_program.t ............<br>

	No subtests run<br>

	t/55_sumiter.t ............<br>

	No subtests run<br>

	t/55_trans.t ..............<br>

	No subtests run<br>

	t/01_no_extra_newlines.t .. ok<br>

	t/55_elliptic.t ...........<br>

	No subtests run<br>

	t/55_graph.t ..............<br>

	No subtests run<br>

	t/55_linear.t .............<br>

	No subtests run<br>

	t/55_nfields.t ............<br>

	No subtests run<br>

	t/55_number.t .............<br>

	No subtests run<br>

	t/55_objets.t .............<br>

	No subtests run<br>

	# Can&#39;t locate Term/Gnuplot.pm in @INC, ignoring the test<br>

	t/PlotRect.t .............. skipped: Can&#39;t locate Term/Gnuplot.pm in @INC<br>

	Binary number &gt; 0b11111111111111111111111111111111 non-portable at (eval 3) line 6.<br>

	Binary number &gt; 0b11111111111111111111111111111111 non-portable at (eval 3) line 7.<br>

	Binary number &gt; 0b11111111111111111111111111111111 non-portable at (eval 3) line 11.<br>

	Hexadecimal number &gt; 0xffffffff non-portable at (eval 3) line 12.<br>

	Binary number &gt; 0b11111111111111111111111111111111 non-portable at (eval 3) line 13.<br>

	t/00_Pari.t ............... ok<br>

	t/zz_leak.t ............... ok<br>

	Test Summary Report<br>

	-------------------<br>

	t/55_analyz.t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Wstat: 0 Tests: 0 Failed: 0)<br>

	&nbsp; Parse errors: No plan found in TAP output<br>

	t/55_ploth.t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Wstat: 0 Tests: 0 Failed: 0)<br>

	&nbsp; Parse errors: No plan found in TAP output<br>

	t/55_polyser.t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Wstat: 0 Tests: 0 Failed: 0)<br>

	&nbsp; Parse errors: No plan found in TAP output<br>

	t/55_program.t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Wstat: 0 Tests: 0 Failed: 0)<br>

	&nbsp; Parse errors: No plan found in TAP output<br>

	t/55_sumiter.t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Wstat: 0 Tests: 0 Failed: 0)<br>

	&nbsp; Parse errors: No plan found in TAP output<br>

	t/55_trans.t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Wstat: 0 Tests: 0 Failed: 0)<br>

	&nbsp; Parse errors: No plan found in TAP output<br>

	t/55_elliptic.t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Wstat: 0 Tests: 0 Failed: 0)<br>

	&nbsp; Parse errors: No plan found in TAP output<br>

	t/55_graph.t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Wstat: 0 Tests: 0 Failed: 0)<br>

	&nbsp; Parse errors: No plan found in TAP output<br>

	t/55_linear.t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Wstat: 0 Tests: 0 Failed: 0)<br>

	&nbsp; Parse errors: No plan found in TAP output<br>

	t/55_nfields.t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Wstat: 0 Tests: 0 Failed: 0)<br>

	&nbsp; Parse errors: No plan found in TAP output<br>

	t/55_number.t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Wstat: 0 Tests: 0 Failed: 0)<br>

	&nbsp; Parse errors: No plan found in TAP output<br>

	t/55_objets.t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Wstat: 0 Tests: 0 Failed: 0)<br>

	&nbsp; Parse errors: No plan found in TAP output<br>

	Files=17, Tests=564,&nbsp; 3 wallclock secs ( 0.10 usr&nbsp; 0.03 sys +&nbsp; 3.04 cusr&nbsp; 0.08 csys =&nbsp; 3.25 CPU)<br>

	<br>

	&nbsp;</p>

<p>
	<br>

	<br>

	--&nbsp;<br>

	- CPAN kentnl@cpan.org<br>

	- Gentoo Perl Maintainer kentnl@gentoo.org ( perl@gentoo.org )<br>

	&nbsp;</p>


</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1712075" href="/Public/Bug/Display.html?id=120711#txn-1712075">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;23&nbsp;21:54:31&nbsp;2017</span>
    <span class="description">nospam-abuse [...] ilyaz.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> perl5-porters [...] perl.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120711] Fails tests  without &#39;.&#39; in @INC</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 23 Mar 2017 18:54:13 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Kent Fredric via RT &lt;bug-Math-Pari [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ilya Zakharevich &lt;nospam-abuse [...] ilyaz.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1712075/919830/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/919830">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 819b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, Mar 23, 2017 at 08:58:50AM -0400, Kent Fredric via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thu Mar 23 08:58:44 2017: Request 120711 was acted upon.
&gt; Transaction: Ticket created by KENTNL
&gt;        Queue: Math-Pari
&gt;      Subject: Fails tests  without &#39;.&#39; in @INC
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: KENTNL@cpan.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120711">https://rt.cpan.org/Ticket/Display.html?id=120711</a></span> &gt;
&gt; 
&gt; 
&gt; On 5.25.10+ where default_inc_excludes_dot is defined &#40; default on .11+ &#41;,
&gt; Math::Pari fails tests with a bunch of blocks that look like unhandled &#34;do
&gt; $file&#34; failures.
</div>
This is a bug in Perl.  perlfunc is clear about what 
     do EXPR
should do:

  Uses the value of EXPR as a filename and executes the contents of
  the file as a Perl script.

Hope this helps,
Ilya
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1712076" href="/Public/Bug/Display.html?id=120711#txn-1712076">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;23&nbsp;21:54:31&nbsp;2017</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1712079" href="/Public/Bug/Display.html?id=120711#txn-1712079">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;23&nbsp;22:33:42&nbsp;2017</span>
    <span class="description">KENTNL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1712079/919833/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/919833">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza"><p>
	On 2017-03-24 14:54:31, nospam-abuse@ilyaz.org wrote:<br>

	&gt; This is a bug in Perl. perlfunc is clear about what<br>

	&gt; do EXPR<br>

	&gt; should do:<br>

	&gt;<br>

	&gt; Uses the value of EXPR as a filename and executes the contents of<br>

	&gt; the file as a Perl script.<br>

	&gt;</p>

<p>
	Unfortunately for many people, this isn&#39;t true.<br>

	<br>

	Read the other lines</p>

<p>
	----</p>

<p>
	is largely like<br>

	<br>

	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; eval `cat stat.pl`;<br>

	<br>

	except that it&#39;s more concise, runs no external processes, keeps<br>

	track of the current filename for error messages, searches the<br>

	&nbsp;@INC directories, and updates %INC if the file is found<br>

	<br>

	---<br>

	<br>

	Specifically, &quot;Searches the @INC directories&quot;<br>

	<br>

	<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/distribution/perl/pod/perlfunc.pod#do">https://metacpan.org/pod/distribution/perl/pod/perlfunc.pod#do</a></span></p>

<p>
	I really really wish it was a bug in Perl, but its defined behaviour, and it shares implementation details with &quot;require&quot; ( they&#39;re more or less aliases to the same function block but toggle different flags so they have different dealing with exception handling paths )<br>

	<br>

	And it _will_ intentionally behave as I&#39;ve stated in this bug in the final 5.26 release, P5P know this, and its a &quot;by design&quot; decision at this point.</p>

<p>
	If things were otherwise, I would have a lot less work triaging this mess :(<br>

	<br>

	--&nbsp;<br>

	- CPAN kentnl@cpan.org<br>

	- Gentoo Perl Maintainer kentnl@gentoo.org ( perl@gentoo.org )<br>

	&nbsp;</p>


</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1712346" href="/Public/Bug/Display.html?id=120711#txn-1712346">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;24&nbsp;19:54:15&nbsp;2017</span>
    <span class="description">nospam-abuse [...] ilyaz.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Mailing list Perl5 &lt;perl5-porters [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120711] Fails tests  without &#39;.&#39; in @INC</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 24 Mar 2017 16:53:48 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Kent Fredric via RT &lt;bug-Math-Pari [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ilya Zakharevich &lt;nospam-abuse [...] ilyaz.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1712346/919978/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/919978">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, Mar 23, 2017 at 10:33:42PM -0400, Kent Fredric via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; This is a bug in Perl. perlfunc is clear about what
&gt; &gt;   do EXPR
&gt; &gt; should do:
&gt; &gt;
&gt; &gt;    Uses the value of EXPR as a filename and executes the contents of
&gt; &gt;   the file as a Perl script.
&gt; &gt;
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Read the other lines
</div>
Other lines cannot negate what is written in the main line, they may
only enhance it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; is largely like
&gt; 
&gt; eval `cat stat.pl`;
&gt; 
&gt; except that it&#39;s more concise, runs no external processes, keeps
&gt; track of the current filename for error messages, searches the
&gt; @INC directories, and updates %INC if the file is found
&gt; 
&gt; ---
&gt; 
&gt; Specifically, &#34;Searches the @INC directories&#34;
</div>
But this does not say that this the ONLY thing it does.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/distribution/perl/pod/perlfunc.pod#do">https://metacpan.org/pod/distribution/perl/pod/perlfunc.pod#do</a></span>
&gt; 
&gt; I really really wish it was a bug in Perl
</div>
It is.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; but its defined behaviour,
</div>
The defined behaviour is to look for a FILE, not for a module-like-“thingy”.  So if
a file is present, it should be loaded.  How ELSE can one load a file?!

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; and it shares implementation details with &#34;require&#34;
</div>
***This*** is a bug.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; And it _will_ intentionally behave as I&#39;ve stated in this bug in the final 5.26
&gt; release, P5P know this, and its a &#34;by design&#34; decision at this point.
</div>
This this decision should be changed — in case of `do´.  Unless
specifically requested, `do´ should always look for a file — possibly,
as a fallback in the case @INC-search failed.

Ilya
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1712349" href="/Public/Bug/Display.html?id=120711#txn-1712349">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;24&nbsp;20:10:50&nbsp;2017</span>
    <span class="description">zefram [...] fysh.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Kent Fredric via RT &lt;bug-Math-Pari [...] rt.cpan.org&gt;, Mailing list Perl5 &lt;perl5-porters [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120711] Fails tests  without &#39;.&#39; in @INC</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 25 Mar 2017 00:10:36 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Ilya Zakharevich &lt;nospam-abuse [...] ilyaz.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1712349/919981/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/919981">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 195b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ilya Zakharevich wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;Other lines cannot negate what is written in the main line, they may
&gt;only enhance it.
</div>
If there is any bug here, it is in the documentation, not the behaviour.

-zefram
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1712382" href="/Public/Bug/Display.html?id=120711#txn-1712382">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;25&nbsp;02:47:08&nbsp;2017</span>
    <span class="description">demerphq [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Kent Fredric via RT &lt;bug-Math-Pari [...] rt.cpan.org&gt;, Mailing list Perl5 &lt;perl5-porters [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120711] Fails tests without &#39;.&#39; in @INC</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 25 Mar 2017 07:46:48 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Ilya Zakharevich &lt;nospam-abuse [...] ilyaz.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> demerphq &lt;demerphq [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1712382/919992/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/919992">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 25 March 2017 at 00:53, Ilya Zakharevich &lt;nospam-abuse@ilyaz.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Thu, Mar 23, 2017 at 10:33:42PM -0400, Kent Fredric via RT wrote:
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; This is a bug in Perl. perlfunc is clear about what
&gt;&gt; &gt;   do EXPR
&gt;&gt; &gt; should do:
&gt;&gt; &gt;
&gt;&gt; &gt;    Uses the value of EXPR as a filename and executes the contents of
&gt;&gt; &gt;   the file as a Perl script.
&gt;&gt; &gt;
</div></div>&gt;
<div class="message-stanza open">&gt;&gt; Read the other lines
</div>&gt;
&gt; Other lines cannot negate what is written in the main line, they may
&gt; only enhance it.
&gt;
<div class="message-stanza open">&gt;&gt; is largely like
&gt;&gt;
&gt;&gt; eval `cat stat.pl`;
&gt;&gt;
&gt;&gt; except that it&#39;s more concise, runs no external processes, keeps
&gt;&gt; track of the current filename for error messages, searches the
&gt;&gt; @INC directories, and updates %INC if the file is found
&gt;&gt;
&gt;&gt; ---
&gt;&gt;
&gt;&gt; Specifically, &#34;Searches the @INC directories&#34;
</div>&gt;
&gt; But this does not say that this the ONLY thing it does.
&gt;
&gt;
<div class="message-stanza open">&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/distribution/perl/pod/perlfunc.pod#do">https://metacpan.org/pod/distribution/perl/pod/perlfunc.pod#do</a></span>
&gt;&gt;
&gt;&gt; I really really wish it was a bug in Perl
</div>&gt;
&gt; It is.
&gt;
<div class="message-stanza open">&gt;&gt; but its defined behaviour,
</div>&gt;
&gt; The defined behaviour is to look for a FILE, not for a module-like-“thingy”.  So if
&gt; a file is present, it should be loaded.  How ELSE can one load a file?!
&gt;
<div class="message-stanza open">&gt;&gt; and it shares implementation details with &#34;require&#34;
</div>&gt;
&gt; ***This*** is a bug.
&gt;
<div class="message-stanza open">&gt;&gt; And it _will_ intentionally behave as I&#39;ve stated in this bug in the final 5.26
&gt;&gt; release, P5P know this, and its a &#34;by design&#34; decision at this point.
</div>&gt;
&gt; This this decision should be changed — in case of `do´.  Unless
&gt; specifically requested, `do´ should always look for a file — possibly,
&gt; as a fallback in the case @INC-search failed.
</div>
You are literally a year or so late to this debate.

It has been decided that the security implications of having do read
from the current directory by default are unacceptable and that
behavior has been removed.

It looks like your script is depending on that behavior, and the
breakage is part of the fallout of this security precaution.
Unfortunately we are not going to revert that, nor concede that the
change of behavior is a bug. It is a deliberate, well thought through
security decision that your code will have to adapt to.

Yves

-- 
perl -Mre=debug -e &#34;/just|another|perl|hacker/&#34;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1712735" href="/Public/Bug/Display.html?id=120711#txn-1712735">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;27&nbsp;17:53:58&nbsp;2017</span>
    <span class="description">public [...] khwilliamson.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Kent Fredric via RT &lt;bug-Math-Pari [...] rt.cpan.org&gt;, Mailing list Perl5 &lt;perl5-porters [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120711] Fails tests without &#39;.&#39; in @INC</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 27 Mar 2017 15:53:21 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> demerphq &lt;demerphq [...] gmail.com&gt;, Ilya Zakharevich &lt;nospam-abuse [...] ilyaz.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karl Williamson &lt;public [...] khwilliamson.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1712735/920214/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/920214">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 03/25/2017 12:46 AM, demerphq wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 25 March 2017 at 00:53, Ilya Zakharevich &lt;nospam-abuse@ilyaz.org&gt; wrote:
<div class="message-stanza open">&gt;&gt; On Thu, Mar 23, 2017 at 10:33:42PM -0400, Kent Fredric via RT wrote:
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; This is a bug in Perl. perlfunc is clear about what
&gt;&gt;&gt;&gt;   do EXPR
&gt;&gt;&gt;&gt; should do:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;    Uses the value of EXPR as a filename and executes the contents of
&gt;&gt;&gt;&gt;   the file as a Perl script.
&gt;&gt;&gt;&gt;
</div></div>&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt; Read the other lines
</div>&gt;&gt;
&gt;&gt; Other lines cannot negate what is written in the main line, they may
&gt;&gt; only enhance it.
&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt; is largely like
&gt;&gt;&gt;
&gt;&gt;&gt; eval `cat stat.pl`;
&gt;&gt;&gt;
&gt;&gt;&gt; except that it&#39;s more concise, runs no external processes, keeps
&gt;&gt;&gt; track of the current filename for error messages, searches the
&gt;&gt;&gt; @INC directories, and updates %INC if the file is found
&gt;&gt;&gt;
&gt;&gt;&gt; ---
&gt;&gt;&gt;
&gt;&gt;&gt; Specifically, &#34;Searches the @INC directories&#34;
</div>&gt;&gt;
&gt;&gt; But this does not say that this the ONLY thing it does.
&gt;&gt;
&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/distribution/perl/pod/perlfunc.pod#do">https://metacpan.org/pod/distribution/perl/pod/perlfunc.pod#do</a></span>
&gt;&gt;&gt;
&gt;&gt;&gt; I really really wish it was a bug in Perl
</div>&gt;&gt;
&gt;&gt; It is.
&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt; but its defined behaviour,
</div>&gt;&gt;
&gt;&gt; The defined behaviour is to look for a FILE, not for a module-like-“thingy”.  So if
&gt;&gt; a file is present, it should be loaded.  How ELSE can one load a file?!
&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt; and it shares implementation details with &#34;require&#34;
</div>&gt;&gt;
&gt;&gt; ***This*** is a bug.
&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt; And it _will_ intentionally behave as I&#39;ve stated in this bug in the final 5.26
&gt;&gt;&gt; release, P5P know this, and its a &#34;by design&#34; decision at this point.
</div>&gt;&gt;
&gt;&gt; This this decision should be changed — in case of `do´.  Unless
&gt;&gt; specifically requested, `do´ should always look for a file — possibly,
&gt;&gt; as a fallback in the case @INC-search failed.
</div>&gt;
&gt; You are literally a year or so late to this debate.
&gt;
&gt; It has been decided that the security implications of having do read
&gt; from the current directory by default are unacceptable and that
&gt; behavior has been removed.
&gt;
&gt; It looks like your script is depending on that behavior, and the
&gt; breakage is part of the fallout of this security precaution.
&gt; Unfortunately we are not going to revert that, nor concede that the
&gt; change of behavior is a bug. It is a deliberate, well thought through
&gt; security decision that your code will have to adapt to.
&gt;
&gt; Yves
&gt;
</div>
However, we did not do a source audit of the distribution to find 
affected files that we ship.  I noticed this building and testing on win32.

Attached is the output of

ack --type=perl -H --no-color &#34;\bdo\b\s*&#40;qq?\s*.|&#39;|\&#34;&#41;[^.]&#34; &gt; do.log

on blead, with some obvious false positives omitted.  It includes pods, 
as we should not be giving bad advice in pods.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1712735/920215/do.log">Download do.log</a><br />
<span class="downloadcontenttype">text/x-log 5.6k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1712785" href="/Public/Bug/Display.html?id=120711#txn-1712785">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;27&nbsp;22:04:37&nbsp;2017</span>
    <span class="description">public [...] khwilliamson.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Kent Fredric via RT &lt;bug-Math-Pari [...] rt.cpan.org&gt;, Mailing list Perl5 &lt;perl5-porters [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120711] Fails tests without &#39;.&#39; in @INC</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 27 Mar 2017 20:04:07 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> demerphq &lt;demerphq [...] gmail.com&gt;, Ilya Zakharevich &lt;nospam-abuse [...] ilyaz.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karl Williamson &lt;public [...] khwilliamson.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1712785/920249/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/920249">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 03/27/2017 03:53 PM, Karl Williamson wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 03/25/2017 12:46 AM, demerphq wrote:
<div class="message-stanza open">&gt;&gt; On 25 March 2017 at 00:53, Ilya Zakharevich &lt;nospam-abuse@ilyaz.org&gt;
&gt;&gt; wrote:
<div class="message-stanza open">&gt;&gt;&gt; On Thu, Mar 23, 2017 at 10:33:42PM -0400, Kent Fredric via RT wrote:
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt; This is a bug in Perl. perlfunc is clear about what
&gt;&gt;&gt;&gt;&gt;   do EXPR
&gt;&gt;&gt;&gt;&gt; should do:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;    Uses the value of EXPR as a filename and executes the contents of
&gt;&gt;&gt;&gt;&gt;   the file as a Perl script.
&gt;&gt;&gt;&gt;&gt;
</div></div>&gt;&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt;&gt; Read the other lines
</div>&gt;&gt;&gt;
&gt;&gt;&gt; Other lines cannot negate what is written in the main line, they may
&gt;&gt;&gt; only enhance it.
&gt;&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt;&gt; is largely like
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; eval `cat stat.pl`;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; except that it&#39;s more concise, runs no external processes, keeps
&gt;&gt;&gt;&gt; track of the current filename for error messages, searches the
&gt;&gt;&gt;&gt; @INC directories, and updates %INC if the file is found
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; ---
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Specifically, &#34;Searches the @INC directories&#34;
</div>&gt;&gt;&gt;
&gt;&gt;&gt; But this does not say that this the ONLY thing it does.
&gt;&gt;&gt;
&gt;&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/distribution/perl/pod/perlfunc.pod#do">https://metacpan.org/pod/distribution/perl/pod/perlfunc.pod#do</a></span>
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I really really wish it was a bug in Perl
</div>&gt;&gt;&gt;
&gt;&gt;&gt; It is.
&gt;&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt;&gt; but its defined behaviour,
</div>&gt;&gt;&gt;
&gt;&gt;&gt; The defined behaviour is to look for a FILE, not for a
&gt;&gt;&gt; module-like-“thingy”.  So if
&gt;&gt;&gt; a file is present, it should be loaded.  How ELSE can one load a file?!
&gt;&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt;&gt; and it shares implementation details with &#34;require&#34;
</div>&gt;&gt;&gt;
&gt;&gt;&gt; ***This*** is a bug.
&gt;&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt;&gt; And it _will_ intentionally behave as I&#39;ve stated in this bug in the
&gt;&gt;&gt;&gt; final 5.26
&gt;&gt;&gt;&gt; release, P5P know this, and its a &#34;by design&#34; decision at this point.
</div>&gt;&gt;&gt;
&gt;&gt;&gt; This this decision should be changed — in case of `do´.  Unless
&gt;&gt;&gt; specifically requested, `do´ should always look for a file — possibly,
&gt;&gt;&gt; as a fallback in the case @INC-search failed.
</div>&gt;&gt;
&gt;&gt; You are literally a year or so late to this debate.
&gt;&gt;
&gt;&gt; It has been decided that the security implications of having do read
&gt;&gt; from the current directory by default are unacceptable and that
&gt;&gt; behavior has been removed.
&gt;&gt;
&gt;&gt; It looks like your script is depending on that behavior, and the
&gt;&gt; breakage is part of the fallout of this security precaution.
&gt;&gt; Unfortunately we are not going to revert that, nor concede that the
&gt;&gt; change of behavior is a bug. It is a deliberate, well thought through
&gt;&gt; security decision that your code will have to adapt to.
&gt;&gt;
&gt;&gt; Yves
&gt;&gt;
</div>&gt;
&gt; However, we did not do a source audit of the distribution to find
&gt; affected files that we ship.  I noticed this building and testing on win32.
&gt;
&gt; Attached is the output of
&gt;
&gt; ack --type=perl -H --no-color &#34;\bdo\b\s*&#40;qq?\s*.|&#39;|\&#34;&#41;[^.]&#34; &gt; do.log
&gt;
&gt; on blead, with some obvious false positives omitted.  It includes pods,
&gt; as we should not be giving bad advice in pods.
</div>
I created an updated list and any discussion of it should move to [perl 
#131069]
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1712822" href="/Public/Bug/Display.html?id=120711#txn-1712822">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;28&nbsp;11:36:37&nbsp;2017</span>
    <span class="description">fawaka [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Ilya Zakharevich &lt;nospam-abuse [...] ilyaz.org&gt;, Kent Fredric via RT &lt;bug-Math-Pari [...] rt.cpan.org&gt;,  Mailing list Perl5 &lt;perl5-porters [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120711] Fails tests without &#39;.&#39; in @INC</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 28 Mar 2017 17:36:05 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> demerphq &lt;demerphq [...] gmail.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Leon Timmermans &lt;fawaka [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1712822/920275/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/920275">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, Mar 25, 2017 at 7:46 AM, demerphq &lt;demerphq@gmail.com&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You are literally a year or so late to this debate.
</div>
I don&#39;t think you&#39;re being fair there. He&#39;s &#34;a year late&#34; to a debate
that is still largely hidden from the world in the security RT queue.
and if he&#39;s &#34;literally a year or so late&#34; how come this change has
landed last weak instead of last June? CPAN authors giving feedback to
p5p 4 days after a change landed in an unstable release are not late,
they are *early*.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It is a deliberate, well thought through
&gt; security decision that your code will have to adapt to.
</div>
If it&#39;s well thought through, how come no one on p5p seemed to realize
the full impact of this change on do specifically until a month ago?
If it&#39;s well thought through, how come the documentation around this
change is non-existent?
If it&#39;s well thought through, how come we&#39;re still not done updating
core tests and modules for this change?

Don&#39;t get me wrong, I believe this change is unavoidable, but it has
become a hasty job that we clearly don&#39;t fully have under our control.
Even if we are making this change for good reasons, **we are knowingly
breaking other people&#39;s code without a transition period**, and we
should take responsibility for that. I can&#39;t think of any appropriate
reaction that doesn&#39;t contain &#40;and preferably start with&#41; the word
&#34;sorry&#34; and has a far more humble tone.

TLDR; Ilya, sorry we&#39;re breaking your code like this, but we felt we
had little choice for reasons that aren&#39;t fully in the public domain
yet.

Leon
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1713050" href="/Public/Bug/Display.html?id=120711#txn-1713050">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;29&nbsp;06:43:01&nbsp;2017</span>
    <span class="description">xsawyerx [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Kent Fredric via RT &lt;bug-Math-Pari [...] rt.cpan.org&gt;, Mailing list Perl5 &lt;perl5-porters [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120711] Fails tests without &#39;.&#39; in @INC</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 29 Mar 2017 12:42:39 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Leon Timmermans &lt;fawaka [...] gmail.com&gt;, demerphq &lt;demerphq [...] gmail.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sawyer X &lt;xsawyerx [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1713050/920408/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/920408">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">[Top-posted]

While I agree with most of what you say, Leon, I think you&#39;re missing
Yves&#39; point - or what I understand to be Yves&#39; point.

Unfortunately done in haste, unfortunately with no transition period,
but the decision was made and the change is in. With full &#40;and
warranted&#41; apologies, it isn&#39;t an &#34;Oops! We didn&#39;t realize we removed
&#39;.&#39; from @INC. Let&#39;s bring it back and bikeshed on how to solve it.&#34;

That&#39;s an important distinction and I think that&#39;s also what Yves meant.
We are apologetic about this, but we are also resolute.


On 03/28/2017 05:36 PM, Leon Timmermans wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat, Mar 25, 2017 at 7:46 AM, demerphq &lt;demerphq@gmail.com&gt; wrote:
<div class="message-stanza open">&gt;&gt; You are literally a year or so late to this debate.
</div>&gt; I don&#39;t think you&#39;re being fair there. He&#39;s &#34;a year late&#34; to a debate
&gt; that is still largely hidden from the world in the security RT queue.
&gt; and if he&#39;s &#34;literally a year or so late&#34; how come this change has
&gt; landed last weak instead of last June? CPAN authors giving feedback to
&gt; p5p 4 days after a change landed in an unstable release are not late,
&gt; they are *early*.
&gt;
<div class="message-stanza open">&gt;&gt; It is a deliberate, well thought through
&gt;&gt; security decision that your code will have to adapt to.
</div>&gt; If it&#39;s well thought through, how come no one on p5p seemed to realize
&gt; the full impact of this change on do specifically until a month ago?
&gt; If it&#39;s well thought through, how come the documentation around this
&gt; change is non-existent?
&gt; If it&#39;s well thought through, how come we&#39;re still not done updating
&gt; core tests and modules for this change?
&gt;
&gt; Don&#39;t get me wrong, I believe this change is unavoidable, but it has
&gt; become a hasty job that we clearly don&#39;t fully have under our control.
&gt; Even if we are making this change for good reasons, **we are knowingly
&gt; breaking other people&#39;s code without a transition period**, and we
&gt; should take responsibility for that. I can&#39;t think of any appropriate
&gt; reaction that doesn&#39;t contain &#40;and preferably start with&#41; the word
&gt; &#34;sorry&#34; and has a far more humble tone.
&gt;
&gt; TLDR; Ilya, sorry we&#39;re breaking your code like this, but we felt we
&gt; had little choice for reasons that aren&#39;t fully in the public domain
&gt; yet.
&gt;
&gt; Leon
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1713061" href="/Public/Bug/Display.html?id=120711#txn-1713061">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;29&nbsp;07:21:22&nbsp;2017</span>
    <span class="description">demerphq [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Leon Timmermans &lt;fawaka [...] gmail.com&gt;, Kent Fredric via RT &lt;bug-Math-Pari [...] rt.cpan.org&gt;,  Mailing list Perl5 &lt;perl5-porters [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120711] Fails tests without &#39;.&#39; in @INC</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 29 Mar 2017 13:21:11 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Sawyer X &lt;xsawyerx [...] gmail.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> demerphq &lt;demerphq [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1713061/920416/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/920416">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 708b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 29 March 2017 at 12:42, Sawyer X &lt;xsawyerx@gmail.com&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [Top-posted]
&gt;
&gt; While I agree with most of what you say, Leon, I think you&#39;re missing
&gt; Yves&#39; point - or what I understand to be Yves&#39; point.
&gt;
&gt; Unfortunately done in haste, unfortunately with no transition period,
&gt; but the decision was made and the change is in. With full &#40;and
&gt; warranted&#41; apologies, it isn&#39;t an &#34;Oops! We didn&#39;t realize we removed
&gt; &#39;.&#39; from @INC. Let&#39;s bring it back and bikeshed on how to solve it.&#34;
&gt;
&gt; That&#39;s an important distinction and I think that&#39;s also what Yves meant.
&gt; We are apologetic about this, but we are also resolute.
</div>
Yes this, and I didn&#39;t mean to be rude. If I was then I apologize.

cheers,
Yves
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1713141" href="/Public/Bug/Display.html?id=120711#txn-1713141">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;29&nbsp;17:28:34&nbsp;2017</span>
    <span class="description">nospam-abuse [...] ilyaz.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> demerphq &lt;demerphq [...] gmail.com&gt;, Kent Fredric via RT &lt;bug-Math-Pari [...] rt.cpan.org&gt;, Mailing list Perl5 &lt;perl5-porters [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120711] Fails tests without &#39;.&#39; in @INC</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 29 Mar 2017 14:28:26 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Leon Timmermans &lt;fawaka [...] gmail.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ilya Zakharevich &lt;nospam-abuse [...] ilyaz.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1713141/920503/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/920503">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, Mar 28, 2017 at 05:36:05PM +0200, Leon Timmermans wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If it&#39;s well thought through, how come no one on p5p seemed to realize
&gt; the full impact of this change on do specifically until a month ago?
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; TLDR; Ilya, sorry we&#39;re breaking your code like this, but we felt we
&gt; had little choice for reasons that aren&#39;t fully in the public domain
&gt; yet.
</div>
Because of all the secrecy, all I can do is inference; and from these
two chunks of your message, I infer that “these reasons” have nothing
to do with `do EXPR´.

If so, then the fact that `do EXPR´ and `require´ CURRENTLY use the
same code should not be a reason for a complete break up of `do EXPR´.

=======================================================

Anyway, the documented behaviour of `do EXPR´ is to load a file.  And,
so far, nobody yet addressed HOW can one re-implement this documented
behaviour when the Perl’s bug in question is present.

I cannot add &#39;.&#39; to @INC since this would make the `require´s done
from the loaded file unsecure.  So: how?

Puzzled,
Ilya
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1713144" href="/Public/Bug/Display.html?id=120711#txn-1713144">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;29&nbsp;17:50:21&nbsp;2017</span>
    <span class="description">zefram [...] fysh.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Leon Timmermans &lt;fawaka [...] gmail.com&gt;, demerphq &lt;demerphq [...] gmail.com&gt;, Kent Fredric via RT &lt;bug-Math-Pari [...] rt.cpan.org&gt;, Mailing list Perl5 &lt;perl5-porters [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120711] Fails tests without &#39;.&#39; in @INC</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 29 Mar 2017 22:49:55 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Ilya Zakharevich &lt;nospam-abuse [...] ilyaz.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1713144/920506/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/920506">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 411b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ilya Zakharevich wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;Anyway, the documented behaviour of `do EXPR&#39; is to load a file.  And,
&gt;so far, nobody yet addressed HOW can one re-implement this documented
&gt;behaviour
</div>
Stick a &#34;./&#34; on the front of your relative pathname.  You need to do this
regardless of whether &#34;.&#34; is in @INC: to get the behaviour of just loading
the file of the supplied name you want to avoid the @INC search entirely.

-zefram
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1715042" href="/Public/Bug/Display.html?id=120711#txn-1715042">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;01&nbsp;07:22:05&nbsp;2017</span>
    <span class="description">davem [...] iabyn.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Ilya Zakharevich &lt;nospam-abuse [...] ilyaz.org&gt;, Leon Timmermans &lt;fawaka [...] gmail.com&gt;, demerphq &lt;demerphq [...] gmail.com&gt;, Kent Fredric via RT &lt;bug-Math-Pari [...] rt.cpan.org&gt;, Mailing list Perl5 &lt;perl5-porters [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120711] Fails tests without &#39;.&#39; in @INC</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 1 Apr 2017 12:21:40 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dave Mitchell &lt;davem [...] iabyn.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1715042/921820/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/921820">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Mar 29, 2017 at 10:49:55PM +0100, Zefram wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Ilya Zakharevich wrote:
<div class="message-stanza open">&gt; &gt;Anyway, the documented behaviour of `do EXPR&#39; is to load a file.  And,
&gt; &gt;so far, nobody yet addressed HOW can one re-implement this documented
&gt; &gt;behaviour
</div>&gt; 
&gt; Stick a &#34;./&#34; on the front of your relative pathname.  You need to do this
&gt; regardless of whether &#34;.&#34; is in @INC: to get the behaviour of just loading
&gt; the file of the supplied name you want to avoid the @INC search entirely.
</div>

I propose the following change to do&#39;s entry in perlfunc, making it
clearer if and when @INC is searched:

before:

    =item do EXPR

    Uses the value of EXPR as a filename and executes the contents of the
    file as a Perl script.

        do &#39;./stat.pl&#39;;

    is largely like

        eval `cat stat.pl`;

after:

    =item do EXPR

    Uses the value of EXPR as a filename and executes the contents of the
    file as a Perl script:

        do &#39;./stat.pl&#39;;    # file is located relative to the current directory
        do &#39;/foo/stat.pl&#39;; # file is located at the specified absolute path

        do &#39;stat.pl&#39;;      # file is searched for within @INC
        do &#39;foo/stat.pl&#39;;  # file is searched for within @INC

    do &#39;./stat.pl&#39; is largely like

        eval `cat stat.pl`;



-- 
Indomitable in retreat, invincible in advance, insufferable in victory
    -- Churchill on Montgomery
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1715101" href="/Public/Bug/Display.html?id=120711#txn-1715101">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;01&nbsp;12:31:43&nbsp;2017</span>
    <span class="description">public [...] khwilliamson.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Ilya Zakharevich &lt;nospam-abuse [...] ilyaz.org&gt;, Leon Timmermans &lt;fawaka [...] gmail.com&gt;, demerphq &lt;demerphq [...] gmail.com&gt;, Kent Fredric via RT &lt;bug-Math-Pari [...] rt.cpan.org&gt;, Mailing list Perl5 &lt;perl5-porters [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120711] Fails tests without &#39;.&#39; in @INC</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 1 Apr 2017 10:31:06 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Dave Mitchell &lt;davem [...] iabyn.com&gt;, Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karl Williamson &lt;public [...] khwilliamson.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1715101/921855/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/921855">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 04/01/2017 05:21 AM, Dave Mitchell wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed, Mar 29, 2017 at 10:49:55PM +0100, Zefram wrote:
<div class="message-stanza open">&gt;&gt; Ilya Zakharevich wrote:
<div class="message-stanza open">&gt;&gt;&gt; Anyway, the documented behaviour of `do EXPR&#39; is to load a file.  And,
&gt;&gt;&gt; so far, nobody yet addressed HOW can one re-implement this documented
&gt;&gt;&gt; behaviour
</div>&gt;&gt;
&gt;&gt; Stick a &#34;./&#34; on the front of your relative pathname.  You need to do this
&gt;&gt; regardless of whether &#34;.&#34; is in @INC: to get the behaviour of just loading
&gt;&gt; the file of the supplied name you want to avoid the @INC search entirely.
</div>&gt;
&gt;
&gt; I propose the following change to do&#39;s entry in perlfunc, making it
&gt; clearer if and when @INC is searched:
&gt;
&gt; before:
&gt;
&gt;     =item do EXPR
&gt;
&gt;     Uses the value of EXPR as a filename and executes the contents of the
&gt;     file as a Perl script.
&gt;
&gt;         do &#39;./stat.pl&#39;;
&gt;
&gt;     is largely like
&gt;
&gt;         eval `cat stat.pl`;
&gt;
&gt; after:
&gt;
&gt;     =item do EXPR
&gt;
&gt;     Uses the value of EXPR as a filename and executes the contents of the
&gt;     file as a Perl script:
&gt;
&gt;         do &#39;./stat.pl&#39;;    # file is located relative to the current directory
&gt;         do &#39;/foo/stat.pl&#39;; # file is located at the specified absolute path
&gt;
&gt;         do &#39;stat.pl&#39;;      # file is searched for within @INC
&gt;         do &#39;foo/stat.pl&#39;;  # file is searched for within @INC
&gt;
&gt;     do &#39;./stat.pl&#39; is largely like
&gt;
&gt;         eval `cat stat.pl`;
&gt;
&gt;
&gt;
</div>
+1
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1715221" href="/Public/Bug/Display.html?id=120711#txn-1715221">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;02&nbsp;06:45:59&nbsp;2017</span>
    <span class="description">xsawyerx [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Ilya Zakharevich &lt;nospam-abuse [...] ilyaz.org&gt;, Leon Timmermans &lt;fawaka [...] gmail.com&gt;, demerphq &lt;demerphq [...] gmail.com&gt;, Kent Fredric via RT &lt;bug-Math-Pari [...] rt.cpan.org&gt;, Mailing list Perl5 &lt;perl5-porters [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120711] Fails tests without &#39;.&#39; in @INC</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 2 Apr 2017 12:45:01 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Karl Williamson &lt;public [...] khwilliamson.com&gt;, Dave Mitchell &lt;davem [...] iabyn.com&gt;, Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sawyer X &lt;xsawyerx [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1715221/921928/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/921928">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">

On 04/01/2017 06:31 PM, Karl Williamson wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 04/01/2017 05:21 AM, Dave Mitchell wrote:
<div class="message-stanza open">&gt;&gt; On Wed, Mar 29, 2017 at 10:49:55PM +0100, Zefram wrote:
<div class="message-stanza open">&gt;&gt;&gt; Ilya Zakharevich wrote:
<div class="message-stanza open">&gt;&gt;&gt;&gt; Anyway, the documented behaviour of `do EXPR&#39; is to load a file.  And,
&gt;&gt;&gt;&gt; so far, nobody yet addressed HOW can one re-implement this documented
&gt;&gt;&gt;&gt; behaviour
</div>&gt;&gt;&gt;
&gt;&gt;&gt; Stick a &#34;./&#34; on the front of your relative pathname.  You need to do
&gt;&gt;&gt; this
&gt;&gt;&gt; regardless of whether &#34;.&#34; is in @INC: to get the behaviour of just
&gt;&gt;&gt; loading
&gt;&gt;&gt; the file of the supplied name you want to avoid the @INC search
&gt;&gt;&gt; entirely.
</div>&gt;&gt;
&gt;&gt;
&gt;&gt; I propose the following change to do&#39;s entry in perlfunc, making it
&gt;&gt; clearer if and when @INC is searched:
&gt;&gt;
&gt;&gt; before:
&gt;&gt;
&gt;&gt;     =item do EXPR
&gt;&gt;
&gt;&gt;     Uses the value of EXPR as a filename and executes the contents of
&gt;&gt; the
&gt;&gt;     file as a Perl script.
&gt;&gt;
&gt;&gt;         do &#39;./stat.pl&#39;;
&gt;&gt;
&gt;&gt;     is largely like
&gt;&gt;
&gt;&gt;         eval `cat stat.pl`;
&gt;&gt;
&gt;&gt; after:
&gt;&gt;
&gt;&gt;     =item do EXPR
&gt;&gt;
&gt;&gt;     Uses the value of EXPR as a filename and executes the contents of
&gt;&gt; the
&gt;&gt;     file as a Perl script:
&gt;&gt;
&gt;&gt;         do &#39;./stat.pl&#39;;    # file is located relative to the current
&gt;&gt; directory
&gt;&gt;         do &#39;/foo/stat.pl&#39;; # file is located at the specified
&gt;&gt; absolute path
&gt;&gt;
&gt;&gt;         do &#39;stat.pl&#39;;      # file is searched for within @INC
&gt;&gt;         do &#39;foo/stat.pl&#39;;  # file is searched for within @INC
&gt;&gt;
&gt;&gt;     do &#39;./stat.pl&#39; is largely like
&gt;&gt;
&gt;&gt;         eval `cat stat.pl`;
&gt;&gt;
&gt;&gt;
&gt;&gt;
</div>&gt;
&gt; +1
</div>
+1 !
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1715779" href="/Public/Bug/Display.html?id=120711#txn-1715779">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;03&nbsp;03:38:05&nbsp;2017</span>
    <span class="description">davem [...] iabyn.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Ilya Zakharevich &lt;nospam-abuse [...] ilyaz.org&gt;, Leon Timmermans &lt;fawaka [...] gmail.com&gt;, demerphq &lt;demerphq [...] gmail.com&gt;, Kent Fredric via RT &lt;bug-Math-Pari [...] rt.cpan.org&gt;, Mailing list Perl5 &lt;perl5-porters [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120711] Fails tests without &#39;.&#39; in @INC</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 3 Apr 2017 08:37:15 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dave Mitchell &lt;davem [...] iabyn.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1715779/922203/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/922203">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 913b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, Apr 01, 2017 at 12:21:40PM +0100, Dave Mitchell wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed, Mar 29, 2017 at 10:49:55PM +0100, Zefram wrote:
<div class="message-stanza open">&gt; &gt; Ilya Zakharevich wrote:
<div class="message-stanza open">&gt; &gt; &gt;Anyway, the documented behaviour of `do EXPR&#39; is to load a file.  And,
&gt; &gt; &gt;so far, nobody yet addressed HOW can one re-implement this documented
&gt; &gt; &gt;behaviour
</div>&gt; &gt; 
&gt; &gt; Stick a &#34;./&#34; on the front of your relative pathname.  You need to do this
&gt; &gt; regardless of whether &#34;.&#34; is in @INC: to get the behaviour of just loading
&gt; &gt; the file of the supplied name you want to avoid the @INC search entirely.
</div>&gt; 
&gt; 
&gt; I propose the following change to do&#39;s entry in perlfunc, making it
&gt; clearer if and when @INC is searched:
</div>
Now done with v5.25.11-28-g5fc3895

-- 
Wesley Crusher gets beaten up by his classmates for being a smarmy git,
and consequently has a go at making some friends of his own age for a
change.
    -- Things That Never Happen in &#34;Star Trek&#34; #18
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1732226" href="/Public/Bug/Display.html?id=120711#txn-1732226">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;10&nbsp;21:37:13&nbsp;2017</span>
    <span class="description">KENTNL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1732226/931412/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/931412">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza"><p>
	The fix for Math-Pari itself looks simple enough, a one-line patch fixes the core problem with &quot;do&quot; assuming &quot;./&quot; and instead explicitly using &quot;./&quot;<br>

	<br>

	The harder part is working around upstream pari ( which this code builds with ) being similarly broken due to its own &#39;.&#39; in @INC shenangans.<br>

	<br>

	However, that too looks like a simple enough fix, just applying it for CPAN users of Math::Pari might be problematic. ( Also attached though )<br>

	<br>

	Though it seems more severe than just failing tests now, and it turns out you might have install failures without these patches.</p>

<p>
	I haven&#39;t thoroughly tested this as much as I&#39;d like, but it does at least pass basic sanity now with PERL_USE_UNSAFE_INC=0 in environment.<br>

	<br>

	As a bonus, I stumbled onto problems compiling Math-Pari when Perl was compiled with -flto, and I fixed that by just lopping -flto out of relevant variables so it works again.&nbsp; ( Patch also attached ), but I have no idea how good that fix is, and its not necessarily something I&#39;d worry about filing a bug for, so its just presented in case somebody gets bored and finds the addition useful.<br>

	<br>

	<br>

	--&nbsp;<br>

	- CPAN kentnl@cpan.org<br>

	- Gentoo Perl Maintainer kentnl@gentoo.org ( perl@gentoo.org )<br>

	&nbsp;</p>


</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Math-Pari-2.10.809.0-no-dot-inc.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1732226/931413/Math-Pari-2.10.809.0-no-dot-inc.patch">Download Math-Pari-2.10.809.0-no-dot-inc.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1012b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 712cff175abfbf95428ed09a875a15f4047ce105 Mon Sep 17 00:00:00 2001
From: Kent Fredric &lt;kentfredric@gmail.com&gt;
Date: Sun, 11 Jun 2017 13:22:46 +1200
Subject: [PATCH] Fix &#34;do&#34; to forcibly use a relative path on Perl 5.26

Reliance on &#34;.&#34; in @INC was previously how this worked. But that
becomes broken on Perl 5.26

Resolves RT#120711 &#40; Well, at least the Math-Pari parts, the pari
    parts themselves need additional fixing, and that&#39;s not viable
    to really perform in Math::Pari &#41;

Bug: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120711">https://rt.cpan.org/Ticket/Display.html?id=120711</a></span>
---
 test_eng/ex.t | 2 +-
 1 file changed, 1 insertion&#40;+&#41;, 1 deletion&#40;-&#41;

diff --git a/test_eng/ex.t b/test_eng/ex.t
index a1a2286..0ad57ee 100644
--- a/test_eng/ex.t
+++ b/test_eng/ex.t
@@ -10,5 +10,5 @@ $dir1 = &#34;CHANGE_ME&#34;;
 $dir1 = &#34;$dir/../$dir1&#34; unless $dir1 =~ m|^&#40;[a-z]:&#41;?[\\/]|i;
 @ARGV = &#34;$dir1/src/test/$long_bits/$name&#34;;
 @ARGV = &#34;$dir1/src/test/32/$name&#34; unless -r $ARGV[0];
-do &#39;test_eng/Testout.pm&#39;;
+do &#39;./test_eng/Testout.pm&#39;;
 die if $@;
-- 
2.13.1

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> no-flto.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1732226/931414/no-flto.patch">Download no-flto.patch</a><br />
<span class="downloadcontenttype">text/x-diff 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From c169041dfa888ec3815aa5bacc97bcc0f21dc318 Mon Sep 17 00:00:00 2001
From: Kent Fredric &lt;kentfredric@gmail.com&gt;
Date: Sun, 11 Jun 2017 13:05:59 +1200
Subject: [PATCH] Disable -flto as it breaks compile.

LTO seems to be bad for static/shared libraries or something.

Turning it off until somebody works out how to make it not cause
a compile failure, on top of all the crap Pari does.
---
 Makefile.PL | 17 ++++++++++++-----
 1 file changed, 12 insertions&#40;+&#41;, 5 deletions&#40;-&#41;

diff --git a/Makefile.PL b/Makefile.PL
index f3025bd..c32eb6a 100644
--- a/Makefile.PL
+++ b/Makefile.PL
@@ -42,18 +42,23 @@ Could not find GP/PARI build directory, please run Makefile.PL
 with paridir=/directory option.
 EOD
 
+my $optimize = $Config{optimize};
+my $ldflags  = $Config{ldflags};
+
+s/&#40;^|\s&#41;-flto&#40;\s|$&#41;/$1$2/ for $optimize, $ldflags;
+
 my $gcc_version
   = defined&#40;$Config{gccversion}&#41; ? &#34;, gccversion=$Config{gccversion}&#34; : &#34;&#34;;
 print &lt;&lt;EOP;
 Setting up Math::Pari with Perl $] on $^O version $Config{osvers};
    cc=$Config{cc}$gcc_version, cccdlflags=&#39;$Config{cccdlflags}&#39;,
    ccflags=&#39;$Config{ccflags}&#39;,
-   optimize=&#39;$Config{optimize}&#39;,
-   ld=$Config{ld}, ldflags=&#39;$Config{ldflags}&#39;.
+   optimize=&#39;$optimize&#39;,
+   ld=$Config{ld}, ldflags=&#39;$ldflags&#39;.
 EOP
 
 if &#40;$^O eq &#39;solaris&#39; and $Config{cc} eq &#39;gcc&#39;
-    and &#40;    $Config{optimize}   =~ s/&#40;?&lt;!\S&#41;&#40;-xarch=386|-xildoff&#41;&#40;?!\S&#41;//g
+    and &#40;    $optimize   =~ s/&#40;?&lt;!\S&#41;&#40;-xarch=386|-xildoff&#41;&#40;?!\S&#41;//g
           or $Config{cccdlflags} =~ s/&#40;?&lt;!\S&#41;-KPIC&#40;?!\S&#41;/-fPIC/ &#41;&#41; {
   # Vendor&#39;s Perl has major problems with building extensions; try to fix this
   # One way is to use perlgcc; but it does not work with 5.8.4
@@ -61,7 +66,7 @@ if &#40;$^O eq &#39;solaris&#39; and $Config{cc} eq &#39;gcc&#39;
   print &lt;&lt;EOP;
 
 ... Broken config of gcc-on-Solaris detected!  I would try to work around this.
-... Reset: cccdlflags --&gt; &#39;$Config{cccdlflags}&#39;,   optimize -&gt; &#39;$Config{optimize}&#39;.
+... Reset: cccdlflags --&gt; &#39;$Config{cccdlflags}&#39;,   optimize -&gt; &#39;$optimize&#39;.
 
 EOP
 }
@@ -181,7 +186,7 @@ $define .= &#39; -DLONG_SHORTER_THAN_IV&#39; if $perl_int_size &gt; $longsize;
 
 $define .= &#39; -Derr=pari_err&#39;; # On linux it can get a wrong dynamic loading
 $define .= &#39; -DHAVE_LADD&#39; if $opts{have_ladd};
-$define .= &#39; -DGCC_INLINE&#39; if $Config{gccversion} and not $Config{optimize} =~ /-g\b/;
+$define .= &#39; -DGCC_INLINE&#39; if $Config{gccversion} and not $optimize =~ /-g\b/;
 $define .= &#39; -DHAVE_PARIPRIV&#39; if -f &#34;$paridir/src/headers/paripriv.h&#34;;
 #$define .= &#39; -DNO_GRAPHICS_PARI&#39; unless -f &#34;$paridir/src/graph/plotgnuplot.c&#34;;
 
@@ -200,6 +205,8 @@ my $extra_inc = extra_includes&#40;$paridir&#41;;
 &#38;WriteMakefile&#40;
 	       LIBS	     =&gt;  $libs,
 	       INC	     =&gt; $extra_inc . &#39; -I $&#40;PARI_DIR&#41;/src/headers -I $&#40;PARI_DIR&#41;/src -I ./libPARI&#39;,
+         OPTIMIZE  =&gt; $optimize,
+         LDFLAGS   =&gt; $ldflags,
 	       NAME	     =&gt; &#39;Math::Pari&#39;,
 	       &#40;$common::parilib ? &#40;&#41; :
 		 &#40;MYEXTLIB   =&gt;  &#39;libPARI/libPARI$&#40;LIB_EXT&#41;&#39;&#41;&#41;,
-- 
2.13.1

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> pari-2.3.5-no-dot-inc.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1732226/931415/pari-2.3.5-no-dot-inc.patch">Download pari-2.3.5-no-dot-inc.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 4f1e00df5ea1e51042146f6277bb1af02f249cc3 Mon Sep 17 00:00:00 2001
From: Kent Fredric &lt;kentfredric@gmail.com&gt;
Date: Sun, 11 Jun 2017 10:31:03 +1200
Subject: [PATCH] Fix for 5.26 removal of &#39;.&#39; in @INC

Previous scripts assumed CWD was in @INC and that &#34;PARI::822&#34; was in
wherever CWD was.

This fixes both of those, and the latter, because its not obvious
from the build system where one should assume CWD to be.

Instead, the absolute path of the directory of these scripts is
inserted into @INC
---
 src/desc/gen_member | 4 ++++
 src/desc/gen_proto  | 4 ++++
 src/desc/merge_822  | 4 ++++
 3 files changed, 12 insertions&#40;+&#41;

diff --git a/src/desc/gen_member b/src/desc/gen_member
index 2f3cf52..66dea2b 100755
--- a/src/desc/gen_member
+++ b/src/desc/gen_member
@@ -1,4 +1,8 @@
 #!/usr/bin/perl -w
+use File::Spec;
+use File::Basename qw&#40; dirname &#41;;
+use lib dirname&#40;File::Spec-&gt;rel2abs&#40;__FILE__&#41;&#41;;
+
 use PARI::822;
 
 $class=&#39;member_functions&#39;;
diff --git a/src/desc/gen_proto b/src/desc/gen_proto
index 1b507fa..2fb4d3f 100755
--- a/src/desc/gen_proto
+++ b/src/desc/gen_proto
@@ -1,4 +1,8 @@
 #!/usr/bin/perl -w
+use File::Spec;
+use File::Basename qw&#40; dirname &#41;;
+use lib dirname&#40;File::Spec-&gt;rel2abs&#40;__FILE__&#41;&#41;;
+
 use PARI::822;
 
 $class=$ARGV[0];
diff --git a/src/desc/merge_822 b/src/desc/merge_822
index a02d612..9ca8252 100755
--- a/src/desc/merge_822
+++ b/src/desc/merge_822
@@ -1,4 +1,8 @@
 #!/usr/bin/perl -w
+use File::Spec;
+use File::Basename qw&#40; dirname &#41;;
+use lib dirname&#40;File::Spec-&gt;rel2abs&#40;__FILE__&#41;&#41;;
+
 use PARI::822;
 
 PARI::822::read&#40;\%funcs,$_,1&#41;
-- 
2.13.1

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1797817" href="/Public/Bug/Display.html?id=120711#txn-1797817">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;29&nbsp;04:27:36&nbsp;2018</span>
    <span class="description">nospam-abuse [...] ilyaz.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> ;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120711] Fails tests  without &#39;.&#39; in @INC</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 29 Jul 2018 01:27:16 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Kent Fredric via RT &lt;bug-Math-Pari [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ilya Zakharevich &lt;nospam-abuse [...] ilyaz.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1797817/966858/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/966858">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, Jun 10, 2017 at 09:37:14PM -0400, Kent Fredric via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The fix for Math-Pari itself looks simple enough, a one-line patch fixes the
&gt; core problem with &#34;do&#34; assuming &#34;./&#34; and instead explicitly using &#34;./&#34;
</div>
I know — but I’m sitting on hundreds of scripts written in timespan of
decades…  Do not think I’m alone in such a situation…

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The harder part is working around upstream pari &#40; which this code builds with &#41;
&gt; being similarly broken due to its own &#39;.&#39; in @INC shenangans.
</div>
I just changed «$^X » to «$^X -I.» in all invocations of these scripts by Math::PariBuilder.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As a bonus, I stumbled onto problems compiling Math-Pari when Perl was compiled
&gt; with -flto, and I fixed that by just lopping -flto out of relevant variables so
&gt; it works again. &#40; Patch also attached &#41;, but I have no idea how good that fix
&gt; is, and its not necessarily something I&#39;d worry about filing a bug for, so its
&gt; just presented in case somebody gets bored and finds the addition useful.
</div>
Interesting…  Could you provide more details on your compiler
environment &#40;gcc?  version?&#41; and how this -flto got there &#40;from Perl’s
./Configure?&#41;.

Thanks,
Ilya
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1797968" href="/Public/Bug/Display.html?id=120711#txn-1797968">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;30&nbsp;05:34:27&nbsp;2018</span>
    <span class="description">KENTNL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1797968/966922/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/966922">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza">On 2018-07-29 20:27:36, nospam-abuse@ilyaz.org wrote:<br>

<br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Interesting&hellip; Could you provide more details on your compiler<br>

&gt; environment (gcc? version?) and how this -flto got there (from Perl&rsquo;s<br>

&gt; ./Configure?).<br>

&gt;<br>
</div><br>

I can probably do a bit better: Here&#39;s a travis config that runs on cron that builds an -flto perl.<br>

<br>

<span class="clickylink"><a target="new" rel="nofollow" href="https://travis-ci.org/gentoo-perl/perl-patchset/jobs/409682234/config">https://travis-ci.org/gentoo-perl/perl-patchset/jobs/409682234/config</a></span><br>

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/gentoo-perl/perl-patchset/blob/perl-5.24/travis-utils/compile-perl.sh#L23-L31">https://github.com/gentoo-perl/perl-patchset/blob/perl-5.24/travis-utils/compile-perl.sh#L23-L31</a></span><br>

<br>

The gist of doing it is simply setting:<br>

<br>


<pre>
<span>CFLAGS=&quot;-O2 -pipe -flto&quot; 
LDFLAGS=&quot;-Wl,-O1 -Wl,--as-needed -flto&quot;

Via <span>-Doptimize=<span>${CFLAGS} and <span>-Dldflags=<span>${LDFLAGS}</span></span></span></span> to ./Configure 

Alas, you&#39;ll note blead currently is failing its own tests with this flag configuration, despite there being fixes in Configure that previously had problems.

( New tests in EUMM fail hard, and toolchain is a bit of a turd soup with regards to permitting externally-defined compile controls on a per-package basis )

All the same, it would be nice to have them sorted out, because one day we can pray toolchain works here.

( Sorry for brevity, gotta dash )

</span></pre>

<br>

--&nbsp;<br>

- CPAN kentnl@cpan.org<br>

- Gentoo Perl Maintainer kentnl@gentoo.org ( perl@gentoo.org )<br>


</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.887215</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
