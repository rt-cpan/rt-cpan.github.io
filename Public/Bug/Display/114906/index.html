<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #114906 for Audio-TagLib: [Win32] Some test failures with perl-5.24.0</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #114906 for Audio-TagLib: [Win32] Some test failures with perl-5.24.0</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Audio-TagLib/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Audio-TagLib/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Audio-TagLib/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Audio-TagLib/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Audio-TagLib">Audio-TagLib CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">114906</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Audio-TagLib/Active/">Audio-TagLib</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
sisyphus [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-3098-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.65    </td>
  </tr>
  <tr id="CF-3099-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;31&nbsp;09:33:14&nbsp;2016</span>
    <span class="description">sisyphus [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [Win32] Some test failures with perl-5.24.0</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Geoff,

Just an FYI.

On Windows, I&#39;ve built Audio-TagLib-1.65 &#40;taglib-1.9.1&#41; on a number of perls &#40;both 32-bit and 64-bit&#41; ranging from 5.12.0 through to 5.24.0.

All tests pass, except for the 5.24.0 perls which all produce the following 2 failures:

###############################
C:\Audio-TagLib-1.65&gt;perl -Mblib t/TagLib_File.t
1..13
ok 1 - use Audio::TagLib::File;
ok 2 - Audio::TagLib::File-&gt;can&#40;...&#41;
not ok 3
#   Failed test at t/TagLib_File.t line 24.
#          got: &#39;d&#39;
#     expected: &#39;sample/guitar.mp3&#39;
# method name&#40;&#41; failed
TagLib: File::length&#40;&#41; -- Failed to get the file size.
ok 4
ok 5
ok 6
ok 7
TagLib: File::seek&#40;&#41; -- Failed to set the file pointer.
TagLib: File::tell&#40;&#41; -- Failed to get the file pointer.
TagLib: File::length&#40;&#41; -- Failed to get the file size.
TagLib: File::seek&#40;&#41; -- Failed to set the file pointer.
ok 8
ok 9
ok 10
TagLib: File::seek&#40;&#41; -- Failed to set the file pointer.
TagLib: File::tell&#40;&#41; -- Failed to get the file pointer.
ok 11
ok 12
ok 13
# Looks like you failed 1 test of 13.

C:\Audio-TagLib-1.65&gt;perl -Mblib t/TagLib_FileRef.t
1..15
ok 1 - use Audio::TagLib::FileRef;
ok 2 - Audio::TagLib::FileRef-&gt;can&#40;...&#41;
ok 3
TagLib: Could not open file sample/guitar.mp3
TagLib: Could not open file sample/guitar.mp3
not ok 4
#   Failed test at t/TagLib_FileRef.t line 17.
#          got: &#39;|&#39;
#     expected: &#39;sample/guitar.mp3&#39;
# method create&#40;file&#41; failed
ok 5 - An object of class &#39;Audio::TagLib::FileRef&#39; isa &#39;Audio::TagLib::FileRef&#39;
ok 6 - An object of class &#39;Audio::TagLib::FileRef&#39; isa &#39;Audio::TagLib::FileRef&#39;
ok 7 - An object of class &#39;Audio::TagLib::FileRef&#39; isa &#39;Audio::TagLib::FileRef&#39;
ok 8 - An object of class &#39;Audio::TagLib::FileRef&#39; isa &#39;Audio::TagLib::FileRef&#39;
ok 9 - An object of class &#39;Audio::TagLib::Tag&#39; isa &#39;Audio::TagLib::Tag&#39;
ok 10 - An object of class &#39;Audio::TagLib::AudioProperties&#39; isa &#39;Audio::TagLib::AudioProperties&#39;
ok 11 - An object of class &#39;Audio::TagLib::File&#39; isa &#39;Audio::TagLib::File&#39;
ok 12
ok 13
ok 14
ok 15
# Looks like you failed 1 test of 15.

###############################

I have 4 builds of perl-5.24.0:
MSWin32-x64-multi-thread
MSWin32-x64-multi-thread-ld
MSWin32-x86-multi-thread-64int
MSWin32-x86-multi-thread-64int-ld

Cheers,
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;31&nbsp;18:36:31&nbsp;2016</span>
    <span class="description">geoff [...] hughes.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114906] [Win32] Some test failures with perl-5.24.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 31 May 2016 15:36:11 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Audio-TagLib [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Geoffrey Leach &lt;geoff [...] hughes.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Sisyphus,

Thanks for the data. I&#39;ll see if I can figure it out!

Geoffrey

On 05/31/2016 06:33:19 AM, Sisyphus via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Tue May 31 09:33:14 2016: Request 114906 was acted upon.
&gt; Transaction: Ticket created by SISYPHUS
&gt;        Queue: Audio-TagLib
&gt;      Subject: [Win32] Some test failures with perl-5.24.0
&gt;    Broken in: 1.65
&gt;     Severity: Normal
&gt;        Owner: Nobody
&gt;   Requestors: sisyphus@cpan.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114906">https://rt.cpan.org/Ticket/Display.html?id=114906</a></span> &gt;
&gt; 
&gt; 
&gt; Hi Geoff,
&gt; 
&gt; Just an FYI.
&gt; 
&gt; On Windows, I&#39;ve built Audio-TagLib-1.65 &#40;taglib-1.9.1&#41; on a number of
&gt; perls &#40;both 32-bit and 64-bit&#41; ranging from 5.12.0 through to 5.24.0.
&gt; 
&gt; All tests pass, except for the 5.24.0 perls which all produce the
&gt; following 2 failures:
&gt; 
&gt; ###############################
&gt; C:\Audio-TagLib-1.65&gt;perl -Mblib t/TagLib_File.t
&gt; 1..13
&gt; ok 1 - use Audio::TagLib::File;
&gt; ok 2 - Audio::TagLib::File-&gt;can&#40;...&#41;
&gt; not ok 3
&gt; #   Failed test at t/TagLib_File.t line 24.
&gt; #          got: &#39;d&#39;
&gt; #     expected: &#39;sample/guitar.mp3&#39;
&gt; # method name&#40;&#41; failed
&gt; TagLib: File::length&#40;&#41; -- Failed to get the file size.
&gt; ok 4
&gt; ok 5
&gt; ok 6
&gt; ok 7
&gt; TagLib: File::seek&#40;&#41; -- Failed to set the file pointer.
&gt; TagLib: File::tell&#40;&#41; -- Failed to get the file pointer.
&gt; TagLib: File::length&#40;&#41; -- Failed to get the file size.
&gt; TagLib: File::seek&#40;&#41; -- Failed to set the file pointer.
&gt; ok 8
&gt; ok 9
&gt; ok 10
&gt; TagLib: File::seek&#40;&#41; -- Failed to set the file pointer.
&gt; TagLib: File::tell&#40;&#41; -- Failed to get the file pointer.
&gt; ok 11
&gt; ok 12
&gt; ok 13
&gt; # Looks like you failed 1 test of 13.
&gt; 
&gt; C:\Audio-TagLib-1.65&gt;perl -Mblib t/TagLib_FileRef.t
&gt; 1..15
&gt; ok 1 - use Audio::TagLib::FileRef;
&gt; ok 2 - Audio::TagLib::FileRef-&gt;can&#40;...&#41;
&gt; ok 3
&gt; TagLib: Could not open file sample/guitar.mp3
&gt; TagLib: Could not open file sample/guitar.mp3
&gt; not ok 4
&gt; #   Failed test at t/TagLib_FileRef.t line 17.
&gt; #          got: &#39;|&#39;
&gt; #     expected: &#39;sample/guitar.mp3&#39;
&gt; # method create&#40;file&#41; failed
&gt; ok 5 - An object of class &#39;Audio::TagLib::FileRef&#39; isa
&gt; &#39;Audio::TagLib::FileRef&#39;
&gt; ok 6 - An object of class &#39;Audio::TagLib::FileRef&#39; isa
&gt; &#39;Audio::TagLib::FileRef&#39;
&gt; ok 7 - An object of class &#39;Audio::TagLib::FileRef&#39; isa
&gt; &#39;Audio::TagLib::FileRef&#39;
&gt; ok 8 - An object of class &#39;Audio::TagLib::FileRef&#39; isa
&gt; &#39;Audio::TagLib::FileRef&#39;
&gt; ok 9 - An object of class &#39;Audio::TagLib::Tag&#39; isa
&gt; &#39;Audio::TagLib::Tag&#39;
&gt; ok 10 - An object of class &#39;Audio::TagLib::AudioProperties&#39; isa
&gt; &#39;Audio::TagLib::AudioProperties&#39;
&gt; ok 11 - An object of class &#39;Audio::TagLib::File&#39; isa
&gt; &#39;Audio::TagLib::File&#39;
&gt; ok 12
&gt; ok 13
&gt; ok 14
&gt; ok 15
&gt; # Looks like you failed 1 test of 15.
&gt; 
&gt; ###############################
&gt; 
&gt; I have 4 builds of perl-5.24.0:
&gt; MSWin32-x64-multi-thread
&gt; MSWin32-x64-multi-thread-ld
&gt; MSWin32-x86-multi-thread-64int
&gt; MSWin32-x86-multi-thread-64int-ld
&gt; 
&gt; Cheers,
&gt; Rob
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;31&nbsp;18:36:32&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;31&nbsp;19:39:01&nbsp;2016</span>
    <span class="description">sisyphus1 [...] optusnet.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114906] [Win32] Some test failures with perl-5.24.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 1 Jun 2016 09:38:01 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Audio-TagLib [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &lt;sisyphus1 [...] optusnet.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Geoff,

I haven&#39;t given you much to work with.
My perls-5.24.0 and taglib-1.9.1 were all built using the same gcc-5.3.0.

In t/TagLib_File.t I tried changing the line:

my $file = &#34;sample/guitar.mp3&#34;;
to
my $file = &#34;sample\\guitar.mp3&#34;;

but that, unsurprisingly, makes no difference and test 3 still reports that 
I got &#40;apparently&#41; random garbage.

However, if I move guitar.mp3 up to the top level source directory &#40;and set 
&#39;$file = &#34;guitar.mp3&#34;&#39;&#41; then all tests pass:

##################################
C:\sis\Audio-TagLib-1.65&gt;perl t/TagLib_File.t
1..13
ok 1 - use Audio::TagLib::File;
ok 2 - Audio::TagLib::File-&gt;can&#40;...&#41;
ok 3
ok 4
ok 5
ok 6
ok 7
TagLib: File::seek&#40;&#41; -- Failed to set the file pointer.
ok 8
ok 9
ok 10
ok 11
ok 12
ok 13

C:\sis\Audio-TagLib-1.65&gt;pmver Audio::TagLib
1.65
##################################

Or, I can get the same result by leaving $file set to &#34;guitar.mp3&#34; and 
cd&#39;ing to the &#34;sample&#34; directory:

##################################
C:\sis\Audio-TagLib-1.65\sample&gt;perl ../t/TagLib_File.t
1..13
ok 1 - use Audio::TagLib::File;
ok 2 - Audio::TagLib::File-&gt;can&#40;...&#41;
ok 3
ok 4
ok 5
ok 6
ok 7
TagLib: File::seek&#40;&#41; -- Failed to set the file pointer.
ok 8
ok 9
ok 10
ok 11
ok 12
ok 13
##################################

Does this ring any alarm bells for you ?
It doesn&#39;t help *me* to figure out what&#39;s going awry ;-&#41;

Do you have access to a Windows machine with Strawberry Perl ?
&#40;I haven&#39;t yet tested on Strawberry Perl 5.24.0, but I will.&#41;

Cheers,
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;31&nbsp;19:49:29&nbsp;2016</span>
    <span class="description">geoff [...] hughes.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114906] [Win32] Some test failures with perl-5.24.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 31 May 2016 16:48:55 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Audio-TagLib [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Geoffrey Leach &lt;geoff [...] hughes.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hmmmm ... verrrry interesting. Clearly, I was ignoring Windoze. There are ways to fix that. Stay tuned.


On 05/31/2016 04:39:02 PM, sisyphus1@optusnet.com.au via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Audio-TagLib
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114906">https://rt.cpan.org/Ticket/Display.html?id=114906</a></span> &gt;
&gt; 
&gt; Hi Geoff,
&gt; 
&gt; I haven&#39;t given you much to work with.
&gt; My perls-5.24.0 and taglib-1.9.1 were all built using the same
&gt; gcc-5.3.0.
&gt; 
&gt; In t/TagLib_File.t I tried changing the line:
&gt; 
&gt; my $file = &#34;sample/guitar.mp3&#34;;
&gt; to
&gt; my $file = &#34;sample\\guitar.mp3&#34;;
&gt; 
&gt; but that, unsurprisingly, makes no difference and test 3 still reports
&gt; that 
&gt; I got &#40;apparently&#41; random garbage.
&gt; 
&gt; However, if I move guitar.mp3 up to the top level source directory
&gt; &#40;and set 
&gt; &#39;$file = &#34;guitar.mp3&#34;&#39;&#41; then all tests pass:
&gt; 
&gt; ##################################
&gt; C:\sis\Audio-TagLib-1.65&gt;perl t/TagLib_File.t
&gt; 1..13
&gt; ok 1 - use Audio::TagLib::File;
&gt; ok 2 - Audio::TagLib::File-&gt;can&#40;...&#41;
&gt; ok 3
&gt; ok 4
&gt; ok 5
&gt; ok 6
&gt; ok 7
&gt; TagLib: File::seek&#40;&#41; -- Failed to set the file pointer.
&gt; ok 8
&gt; ok 9
&gt; ok 10
&gt; ok 11
&gt; ok 12
&gt; ok 13
&gt; 
&gt; C:\sis\Audio-TagLib-1.65&gt;pmver Audio::TagLib
&gt; 1.65
&gt; ##################################
&gt; 
&gt; Or, I can get the same result by leaving $file set to &#34;guitar.mp3&#34; and
&gt; 
&gt; cd&#39;ing to the &#34;sample&#34; directory:
&gt; 
&gt; ##################################
&gt; C:\sis\Audio-TagLib-1.65\sample&gt;perl ../t/TagLib_File.t
&gt; 1..13
&gt; ok 1 - use Audio::TagLib::File;
&gt; ok 2 - Audio::TagLib::File-&gt;can&#40;...&#41;
&gt; ok 3
&gt; ok 4
&gt; ok 5
&gt; ok 6
&gt; ok 7
&gt; TagLib: File::seek&#40;&#41; -- Failed to set the file pointer.
&gt; ok 8
&gt; ok 9
&gt; ok 10
&gt; ok 11
&gt; ok 12
&gt; ok 13
&gt; ##################################
&gt; 
&gt; Does this ring any alarm bells for you ?
&gt; It doesn&#39;t help *me* to figure out what&#39;s going awry ;-&#41;
&gt; 
&gt; Do you have access to a Windows machine with Strawberry Perl ?
&gt; &#40;I haven&#39;t yet tested on Strawberry Perl 5.24.0, but I will.&#41;
&gt; 
&gt; Cheers,
&gt; Rob
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;26&nbsp;17:45:07&nbsp;2016</span>
    <span class="description">geoff [...] hughes.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114906] [Win32] Some test failures with perl-5.24.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 26 Jun 2016 14:44:32 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Audio-TagLib [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Geoffrey Leach &lt;geoff [...] hughes.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry for the delay.

Please try &#34;..\sample\guitar.mp3&#34;. I believe that this correctly reflects the path structure under windows. Sorry, but I don&#39;t have access to windows Perl.

On 05/31/2016 04:39:02 PM, sisyphus1@optusnet.com.au via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Audio-TagLib
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114906">https://rt.cpan.org/Ticket/Display.html?id=114906</a></span> &gt;
&gt; 
&gt; Hi Geoff,
&gt; 
&gt; I haven&#39;t given you much to work with.
&gt; My perls-5.24.0 and taglib-1.9.1 were all built using the same
&gt; gcc-5.3.0.
&gt; 
&gt; In t/TagLib_File.t I tried changing the line:
&gt; 
&gt; my $file = &#34;sample/guitar.mp3&#34;;
&gt; to
&gt; my $file = &#34;sample\\guitar.mp3&#34;;
&gt; 
&gt; but that, unsurprisingly, makes no difference and test 3 still reports
&gt; that 
&gt; I got &#40;apparently&#41; random garbage.
&gt; 
&gt; However, if I move guitar.mp3 up to the top level source directory
&gt; &#40;and set 
&gt; &#39;$file = &#34;guitar.mp3&#34;&#39;&#41; then all tests pass:
&gt; 
&gt; ##################################
&gt; C:\sis\Audio-TagLib-1.65&gt;perl t/TagLib_File.t
&gt; 1..13
&gt; ok 1 - use Audio::TagLib::File;
&gt; ok 2 - Audio::TagLib::File-&gt;can&#40;...&#41;
&gt; ok 3
&gt; ok 4
&gt; ok 5
&gt; ok 6
&gt; ok 7
&gt; TagLib: File::seek&#40;&#41; -- Failed to set the file pointer.
&gt; ok 8
&gt; ok 9
&gt; ok 10
&gt; ok 11
&gt; ok 12
&gt; ok 13
&gt; 
&gt; C:\sis\Audio-TagLib-1.65&gt;pmver Audio::TagLib
&gt; 1.65
&gt; ##################################
&gt; 
&gt; Or, I can get the same result by leaving $file set to &#34;guitar.mp3&#34; and
&gt; 
&gt; cd&#39;ing to the &#34;sample&#34; directory:
&gt; 
&gt; ##################################
&gt; C:\sis\Audio-TagLib-1.65\sample&gt;perl ../t/TagLib_File.t
&gt; 1..13
&gt; ok 1 - use Audio::TagLib::File;
&gt; ok 2 - Audio::TagLib::File-&gt;can&#40;...&#41;
&gt; ok 3
&gt; ok 4
&gt; ok 5
&gt; ok 6
&gt; ok 7
&gt; TagLib: File::seek&#40;&#41; -- Failed to set the file pointer.
&gt; ok 8
&gt; ok 9
&gt; ok 10
&gt; ok 11
&gt; ok 12
&gt; ok 13
&gt; ##################################
&gt; 
&gt; Does this ring any alarm bells for you ?
&gt; It doesn&#39;t help *me* to figure out what&#39;s going awry ;-&#41;
&gt; 
&gt; Do you have access to a Windows machine with Strawberry Perl ?
&gt; &#40;I haven&#39;t yet tested on Strawberry Perl 5.24.0, but I will.&#41;
&gt; 
&gt; Cheers,
&gt; Rob
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;27&nbsp;07:58:11&nbsp;2016</span>
    <span class="description">sisyphus1 [...] optusnet.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114906] [Win32] Some test failures with perl-5.24.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 27 Jun 2016 21:57:17 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Audio-TagLib [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &lt;sisyphus1 [...] optusnet.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message----- 
From: geoff@hughes.net via RT
Sent: Monday, June 27, 2016 7:45 AM
To: sisyphus@cpan.org
Subject: Re: [rt.cpan.org #114906] [Win32] Some test failures with 
perl-5.24.0

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114906">https://rt.cpan.org/Ticket/Display.html?id=114906</a></span> &gt;

<div class="message-stanza open">&gt; Please try &#34;..\sample\guitar.mp3&#34;. I believe that this correctly reflects 
&gt; the path structure under windows. Sorry, but I don&#39;t have access to 
&gt; windows Perl.
</div>
The current setting of &#34;sample/guitar.mp3&#34; is correct for all systems 
&#40;including Windows&#41;.
When running &#39;make test&#39;, the cwd is the top level source folder.
The file sample/guitar.mp3 is found ok - the problem is that, for some 
reason, there are function calls that will succeed only if guitar.mp3 is in 
the cwd &#40; &#38;&#38; if TagLib_File.t&#39;s $file specifies the guitar.mp3 that&#39;s in the 
cwd&#41;.

I think that, somewhere, there must be something that mangles windows paths.
Do you know of anything in the source &#40;including xs files&#41; that&#39;s geared 
towards Windows specifically ? &#40;I couldn&#39;t find any Windows-specific stuff 
at all.&#41;

Do you know of anything in the source &#40;including xs files&#41; that assumes that 
the filepath separator is a forward slash ?
Windows generally recognizes both / and \ as filepath separators but they 
are not *always* interchangeable.

Incidentally - when I have guitar.mp3 in the cwd &#40;and all tests pass&#41; I get:

C:\sisyphusion\Audio-TagLib-1.65&gt;perl t/TagLib_File.t
1..13
ok 1 - use Audio::TagLib::File;
ok 2 - Audio::TagLib::File-&gt;can&#40;...&#41;
ok 3
ok 4
ok 5
ok 6
ok 7
TagLib: File::seek&#40;&#41; -- Failed to set the file pointer.
ok 8
ok 9
ok 10
ok 11
ok 12
ok 13

Does that &#34;TagLib: File::seek&#40;&#41; -- Failed to set the file pointer.&#34; in the 
middle indicate that something did not work as expected ?

Cheers,
Rob
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;27&nbsp;17:59:29&nbsp;2016</span>
    <span class="description">geoff [...] hughes.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114906] [Win32] Some test failures with perl-5.24.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 27 Jun 2016 14:59:00 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Audio-TagLib [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Geoffrey Leach &lt;geoff [...] hughes.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hmmm... clearly I know nothing about the interaction on windows &#41;:-

The only thing that I can think of is that the problem resides in the taglib code. Have you tried the test using a fully-qualified path &#40;with backslashes and volume?&#41;


On 06/27/2016 04:58:12 AM, sisyphus1@optusnet.com.au via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Audio-TagLib
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114906">https://rt.cpan.org/Ticket/Display.html?id=114906</a></span> &gt;
&gt; 
&gt; -----Original Message----- 
&gt; From: geoff@hughes.net via RT
&gt; Sent: Monday, June 27, 2016 7:45 AM
&gt; To: sisyphus@cpan.org
&gt; Subject: Re: [rt.cpan.org #114906] [Win32] Some test failures with 
&gt; perl-5.24.0
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114906">https://rt.cpan.org/Ticket/Display.html?id=114906</a></span> &gt;
&gt; 
<div class="message-stanza open">&gt; &gt; Please try &#34;..\sample\guitar.mp3&#34;. I believe that this correctly
</div>&gt; reflects 
<div class="message-stanza open">&gt; &gt; the path structure under windows. Sorry, but I don&#39;t have access to 
&gt; &gt; windows Perl.
</div>&gt; 
&gt; The current setting of &#34;sample/guitar.mp3&#34; is correct for all systems 
&gt; &#40;including Windows&#41;.
&gt; When running &#39;make test&#39;, the cwd is the top level source folder.
&gt; The file sample/guitar.mp3 is found ok - the problem is that, for some
&gt; 
&gt; reason, there are function calls that will succeed only if guitar.mp3
&gt; is in 
&gt; the cwd &#40; &#38;&#38; if TagLib_File.t&#39;s $file specifies the guitar.mp3 that&#39;s
&gt; in the 
&gt; cwd&#41;.
&gt; 
&gt; I think that, somewhere, there must be something that mangles windows
&gt; paths.
&gt; Do you know of anything in the source &#40;including xs files&#41; that&#39;s
&gt; geared 
&gt; towards Windows specifically ? &#40;I couldn&#39;t find any Windows-specific
&gt; stuff 
&gt; at all.&#41;
&gt; 
&gt; Do you know of anything in the source &#40;including xs files&#41; that
&gt; assumes that 
&gt; the filepath separator is a forward slash ?
&gt; Windows generally recognizes both / and \ as filepath separators but
&gt; they 
&gt; are not *always* interchangeable.
&gt; 
&gt; Incidentally - when I have guitar.mp3 in the cwd &#40;and all tests pass&#41;
&gt; I get:
&gt; 
&gt; C:\sisyphusion\Audio-TagLib-1.65&gt;perl t/TagLib_File.t
&gt; 1..13
&gt; ok 1 - use Audio::TagLib::File;
&gt; ok 2 - Audio::TagLib::File-&gt;can&#40;...&#41;
&gt; ok 3
&gt; ok 4
&gt; ok 5
&gt; ok 6
&gt; ok 7
&gt; TagLib: File::seek&#40;&#41; -- Failed to set the file pointer.
&gt; ok 8
&gt; ok 9
&gt; ok 10
&gt; ok 11
&gt; ok 12
&gt; ok 13
&gt; 
&gt; Does that &#34;TagLib: File::seek&#40;&#41; -- Failed to set the file pointer.&#34; in
&gt; the 
&gt; middle indicate that something did not work as expected ?
&gt; 
&gt; Cheers,
&gt; Rob
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;27&nbsp;20:51:34&nbsp;2016</span>
    <span class="description">sisyphus1 [...] optusnet.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114906] [Win32] Some test failures with perl-5.24.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 28 Jun 2016 10:50:40 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Audio-TagLib [...] rt.cpan.org&gt;, &lt;sisyphus [...] cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &lt;sisyphus1 [...] optusnet.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message----- 
From: geoff@hughes.net via RT
Sent: Tuesday, June 28, 2016 7:59 AM
To: sisyphus@cpan.org
Subject: Re: [rt.cpan.org #114906] [Win32] Some test failures with 
perl-5.24.0

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114906">https://rt.cpan.org/Ticket/Display.html?id=114906</a></span> &gt;

<div class="message-stanza open">&gt; The only thing that I can think of is that the problem resides in the 
&gt; taglib code.
&gt; Have you tried the test using a fully-qualified path &#40;with backslashes and 
&gt; volume?&#41;
</div>
Good idea - and if I specify the full path to the guitar.mp3 that&#39;s in the 
cwd, then the failure occurs.

Going a bit further, in Taglib_File.t I can specify ./guitar.mp3 in a number 
of ways:

$file = &#34;guitar.mp3&#34;;
$file = &#34;./guitar.mp3&#34;;
$file = &#34;sample/../guitar.mp3&#34;;
$file = &#34;C:/sisyphusion/Audio-TagLib-1.65/guitar.mp3&#34;;

All of those point to the same file - ie to the copy of guitar.mp3 that I 
placed in the top level source folder.
The first 2 work fine, but the next 2 produce the error.

It would have been better if the second one had failed. Then we would have 
compelling evidence that the problem was caused by the presence of the 
filepath separator &#40;/&#41;.
But perhaps the second one works only because the &#34;./&#34; gets removed before 
the location gets passed to taglib.
I don&#39;t think it&#39;s because taglib wants to receive a POSIX path - because 
the third attempt uses a valid POSIX path but still fails.

Anyway, I think you&#39;re notion that the problem is something in taglib is 
probably correct.
I think my pre-5.24.0 perl builds of Audio-TagLib use an earlier version of 
taglib - which may well be the reason that they pass.
Does Audio-TagLib provide a function to display the version of the 
underlying taglib library ? &#40;I couldn&#39;t spot one.&#41;

Whatever the problem is, it seems to be quite specific to whatever test 3 is 
testing.

At least the workaround is fairly simple &#40;if a bit tedious ;-&#41;

Cheers,
Rob
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;28&nbsp;17:19:40&nbsp;2016</span>
    <span class="description">geoff [...] hughes.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114906] [Win32] Some test failures with perl-5.24.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 28 Jun 2016 14:19:18 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Audio-TagLib [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Geoffrey Leach &lt;geoff [...] hughes.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Surely a fully-qualified path should work. There&#39;s something funny going on.

The most recent version of taglib is 11.1. Are you using that? Are you building it from source? I&#39;ll try to come up with some diagnostic patches.

On 06/27/2016 05:51:35 PM, sisyphus1@optusnet.com.au via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Audio-TagLib
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114906">https://rt.cpan.org/Ticket/Display.html?id=114906</a></span> &gt;
&gt; 
&gt; 
&gt; 
&gt; -----Original Message----- 
&gt; From: geoff@hughes.net via RT
&gt; Sent: Tuesday, June 28, 2016 7:59 AM
&gt; To: sisyphus@cpan.org
&gt; Subject: Re: [rt.cpan.org #114906] [Win32] Some test failures with 
&gt; perl-5.24.0
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114906">https://rt.cpan.org/Ticket/Display.html?id=114906</a></span> &gt;
&gt; 
<div class="message-stanza open">&gt; &gt; The only thing that I can think of is that the problem resides in
</div>&gt; the 
<div class="message-stanza open">&gt; &gt; taglib code.
&gt; &gt; Have you tried the test using a fully-qualified path &#40;with
</div>&gt; backslashes and 
<div class="message-stanza open">&gt; &gt; volume?&#41;
</div>&gt; 
&gt; Good idea - and if I specify the full path to the guitar.mp3 that&#39;s in
&gt; the 
&gt; cwd, then the failure occurs.
&gt; 
&gt; Going a bit further, in Taglib_File.t I can specify ./guitar.mp3 in a
&gt; number 
&gt; of ways:
&gt; 
&gt; $file = &#34;guitar.mp3&#34;;
&gt; $file = &#34;./guitar.mp3&#34;;
&gt; $file = &#34;sample/../guitar.mp3&#34;;
&gt; $file = &#34;C:/sisyphusion/Audio-TagLib-1.65/guitar.mp3&#34;;
&gt; 
&gt; All of those point to the same file - ie to the copy of guitar.mp3
&gt; that I 
&gt; placed in the top level source folder.
&gt; The first 2 work fine, but the next 2 produce the error.
&gt; 
&gt; It would have been better if the second one had failed. Then we would
&gt; have 
&gt; compelling evidence that the problem was caused by the presence of the
&gt; 
&gt; filepath separator &#40;/&#41;.
&gt; But perhaps the second one works only because the &#34;./&#34; gets removed
&gt; before 
&gt; the location gets passed to taglib.
&gt; I don&#39;t think it&#39;s because taglib wants to receive a POSIX path -
&gt; because 
&gt; the third attempt uses a valid POSIX path but still fails.
&gt; 
&gt; Anyway, I think you&#39;re notion that the problem is something in taglib
&gt; is 
&gt; probably correct.
&gt; I think my pre-5.24.0 perl builds of Audio-TagLib use an earlier
&gt; version of 
&gt; taglib - which may well be the reason that they pass.
&gt; Does Audio-TagLib provide a function to display the version of the 
&gt; underlying taglib library ? &#40;I couldn&#39;t spot one.&#41;
&gt; 
&gt; Whatever the problem is, it seems to be quite specific to whatever
&gt; test 3 is 
&gt; testing.
&gt; 
&gt; At least the workaround is fairly simple &#40;if a bit tedious ;-&#41;
&gt; 
&gt; Cheers,
&gt; Rob
&gt; 
&gt; 
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;28&nbsp;21:29:45&nbsp;2016</span>
    <span class="description">sisyphus1 [...] optusnet.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114906] [Win32] Some test failures with perl-5.24.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 29 Jun 2016 11:28:49 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Audio-TagLib [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &lt;sisyphus1 [...] optusnet.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message----- 
From: geoff@hughes.net via RT
Sent: Wednesday, June 29, 2016 7:19 AM
To: sisyphus@cpan.org
Subject: Re: [rt.cpan.org #114906] [Win32] Some test failures with 
perl-5.24.0

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114906">https://rt.cpan.org/Ticket/Display.html?id=114906</a></span> &gt;

<div class="message-stanza open">&gt; Surely a fully-qualified path should work. There&#39;s something funny going 
&gt; on.
</div>
Definitely. Although the fully qualified path enables the file to be found, 
this code doesn&#39;t work as intended:

my $fileref = Audio::TagLib::FileRef-&gt;new&#40;$file&#41;;
my $i = $fileref-&gt;file&#40;&#41;;
is&#40;$i-&gt;name&#40;&#41;, $file&#41; or
    diag&#40;&#34;method name&#40;&#41; failed&#34;&#41;;

For some reason $i-&gt;name is returning garbage.

I have taglib-1.9.1.
I prefer to build from source and I see:
<span class="clickylink"><a target="new" rel="nofollow" href="https://taglib.github.io/releases/taglib-1.11.tar.gz">https://taglib.github.io/releases/taglib-1.11.tar.gz</a></span>.

I&#39;ll give that a try and report back.

Other than that, do you have any code that gives us a meaningful look at 
what&#39;s in $fileref and $fileref-&gt;file&#40;&#41; ?

Cheers,
Rob
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;28&nbsp;22:57:49&nbsp;2016</span>
    <span class="description">geoff [...] hughes.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114906] [Win32] Some test failures with perl-5.24.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 28 Jun 2016 19:57:16 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Audio-TagLib [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Geoffrey Leach &lt;geoff [...] hughes.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The error message that you&#39;re getting comes from .../taglib-1.11/taglib/toolkit/tfilestream.cpp at 372. It appears that the author has neglected to follow the reccomended code for handling errors from seeking. Here&#39;s some code that can give us more insight.

Beginning at line 367:

#if GCL
  SetFilePointer&#40;d-&gt;file, offset, NULL, whence&#41;;

  const int lastError = GetLastError&#40;&#41;;
  if&#40;lastError != NO_ERROR &#38;&#38; lastError != ERROR_NEGATIVE_SEEK&#41;
    debug&#40;&#34;FileStream::seek&#40;&#41; -- Failed to set the file pointer.&#34;&#41;;
#endif
    DWORD dwPtr = SetFilePointer&#40;d-&gt;file, offset, NULL, whence&#41;;
   
    if &#40;dwPtr == INVALID_SET_FILE_POINTER&#41; // Test for failure { 
        // Obtain the error code. 
        DWORD dwError = GetLastError&#40;&#41; ; 
    
        cerr &lt;&lt; &#34;FileStream::seek&#40;&#41; -- Failed to set the file pointer &#40;new code&#41;&#34; &lt;&lt; endl;
        cerr &lt;&lt; &#34;FileStream::seek&#40;&#41; -- SetFilePointer returns INVALID_SET_FILE_POINTER&#34; &lt;&lt; endl;
        cerr &lt;&lt; &#34;FileStream::seek&#40;&#41; -- GetLastError returns &#34; &lt;&lt; dwError &lt;&lt; endl;
   } 
// end of GCL patch

I can&#39;t test this, so I need to lean on your help to diagnose. I would not be surprised if it turns out that the error message goes away.

On 06/28/2016 06:29:46 PM, sisyphus1@optusnet.com.au via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Audio-TagLib
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114906">https://rt.cpan.org/Ticket/Display.html?id=114906</a></span> &gt;
&gt; 
&gt; -----Original Message----- 
&gt; From: geoff@hughes.net via RT
&gt; Sent: Wednesday, June 29, 2016 7:19 AM
&gt; To: sisyphus@cpan.org
&gt; Subject: Re: [rt.cpan.org #114906] [Win32] Some test failures with 
&gt; perl-5.24.0
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114906">https://rt.cpan.org/Ticket/Display.html?id=114906</a></span> &gt;
&gt; 
<div class="message-stanza open">&gt; &gt; Surely a fully-qualified path should work. There&#39;s something funny
</div>&gt; going 
<div class="message-stanza open">&gt; &gt; on.
</div>&gt; 
&gt; Definitely. Although the fully qualified path enables the file to be
&gt; found, 
&gt; this code doesn&#39;t work as intended:
&gt; 
&gt; my $fileref = Audio::TagLib::FileRef-&gt;new&#40;$file&#41;;
&gt; my $i = $fileref-&gt;file&#40;&#41;;
&gt; is&#40;$i-&gt;name&#40;&#41;, $file&#41; or
&gt;     diag&#40;&#34;method name&#40;&#41; failed&#34;&#41;;
&gt; 
&gt; For some reason $i-&gt;name is returning garbage.
&gt; 
&gt; I have taglib-1.9.1.
&gt; I prefer to build from source and I see:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://taglib.github.io/releases/taglib-1.11.tar.gz">https://taglib.github.io/releases/taglib-1.11.tar.gz</a></span>.
&gt; 
&gt; I&#39;ll give that a try and report back.
&gt; 
&gt; Other than that, do you have any code that gives us a meaningful look
&gt; at 
&gt; what&#39;s in $fileref and $fileref-&gt;file&#40;&#41; ?
&gt; 
&gt; Cheers,
&gt; Rob
&gt; 
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;29&nbsp;05:50:18&nbsp;2016</span>
    <span class="description">sisyphus1 [...] optusnet.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114906] [Win32] Some test failures with perl-5.24.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 29 Jun 2016 19:49:36 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Audio-TagLib [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &lt;sisyphus1 [...] optusnet.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Using 1.11, things look a lot worse - though I suspect they are, in fact, no 
worse:

t/TagLib.t ....................................... 1/1 # Using taglib 1.11
t/TagLib.t ....................................... ok
t/TagLib_APE_Footer.t ............................ ok
t/TagLib_APE_Item.t .............................. 1/14
#   Failed test &#39;Using taglib 1.11&#39;
#   at t/TagLib_APE_Item.t line 44.
#          got: 27
#     expected: 13
# method size&#40;&#41; failed
# Looks like you failed 1 test of 14.
t/TagLib_APE_Item.t .............................. Dubious, test returned 1 
&#40;wstat 256, 0x100&#41;
Failed 1/14 subtests
t/TagLib_APE_ItemListMap.t ....................... ok
t/TagLib_APE_ItemListMap_Iterator.t .............. ok
t/TagLib_APE_Tag.t ............................... ok
t/TagLib_AudioProperties.t ....................... 1/6
#   Failed test at t/TagLib_AudioProperties.t line 13.
#          got: 6
#     expected: 7
# method length&#40;&#41; failed
# Looks like you failed 1 test of 6.
t/TagLib_AudioProperties.t ....................... Dubious, test returned 1 
&#40;wstat 256, 0x100&#41;
Failed 1/6 subtests
t/TagLib_ByteVector.t ............................ ok
t/TagLib_ByteVector_Iterator.t ................... ok
t/TagLib_ByteVectorList.t ........................ ok
t/TagLib_File.t .................................. 1/13
#   Failed test at t/TagLib_File.t line 26.
#          got: &#39;H&#39;
#     expected: &#39;sample/guitar.mp3&#39;
# method name&#40;&#41; failed

#   Failed test at t/TagLib_File.t line 31.
#          got: 101
#     expected: 1024
# method readBlock&#40;blocksize&#41; failed
# Looks like you failed 2 tests of 13.
t/TagLib_File.t .................................. Dubious, test returned 2 
&#40;wstat 512, 0x200&#41;
Failed 2/13 subtests
t/TagLib_FileRef.t ............................... 1/15 TagLib: Could not 
open file sample/guitar.mp3
TagLib: Could not open file sample/guitar.mp3

#   Failed test at t/TagLib_FileRef.t line 17.
#          got: &#39;^&#39;
#     expected: &#39;sample/guitar.mp3&#39;
# method create&#40;file&#41; failed
# Looks like you failed 1 test of 15.
t/TagLib_FileRef.t ............................... Dubious, test returned 1 
&#40;wstat 256, 0x100&#41;
Failed 1/15 subtests
t/TagLib_FileRef_FileTypeResolver.t .............. ok
t/TagLib_FLAC_File.t ............................. 1/10 TagLib: 
FLAC::File::streamInfoData&#40;&#41; -- This function is obsolete. Returning an 
empty ByteVector.
TagLib: FLAC::File::streamLength&#40;&#41; -- This function is obsolete. Returning 
zero.


#   Failed test at t/TagLib_FLAC_File.t line 36.
#          got: 0
#     expected: 343788
# method streamLength&#40;&#41; failed
# Looks like you failed 1 test of 10.
t/TagLib_FLAC_File.t ............................. Dubious, test returned 1 
&#40;wstat 256, 0x100&#41;
Failed 1/10 subtests
t/TagLib_FLAC_Properties.t ....................... 1/7
#   Failed test at t/TagLib_FLAC_Properties.t line 15.
#          got: 396
#     expected: 458
# method bitrate&#40;&#41; failed
# Looks like you failed 1 test of 7.
t/TagLib_FLAC_Properties.t ....................... Dubious, test returned 1 
&#40;wstat 256, 0x100&#41;
Failed 1/7 subtests
t/TagLib_ID3v1.t ................................. ok
t/TagLib_ID3v1_GenreMap.t ........................ ok
t/TagLib_ID3v1_GenreMap_Iterator.t ............... 1/8
#   Failed test at t/TagLib_ID3v1_GenreMap_Iterator.t line 21.
#          got: 148
#     expected: 34
# method next&#40;&#41; failed
# Looks like you failed 1 test of 8.
t/TagLib_ID3v1_GenreMap_Iterator.t ............... Dubious, test returned 1 
&#40;wstat 256, 0x100&#41;
Failed 1/8 subtests
t/TagLib_ID3v1_StringHandler.t ................... ok
t/TagLib_ID3v1_Tag.t ............................. ok
t/TagLib_ID3v2_AttachedPictureFrame.t ............ 1/10 TagLib: A picture 
frame must contain at least 5 bytes.
t/TagLib_ID3v2_AttachedPictureFrame.t ............ ok
t/TagLib_ID3v2_CommentsFrame.t ................... ok
t/TagLib_ID3v2_ExtendedHeader.t .................. ok
t/TagLib_ID3v2_Footer.t .......................... ok
t/TagLib_ID3v2_Frame.t ........................... ok
t/TagLib_ID3v2_FrameFactory.t .................... ok
t/TagLib_ID3v2_FrameList.t ....................... ok
t/TagLib_ID3v2_FrameList_Iterator.t .............. ok
t/TagLib_ID3v2_FrameListMap.t .................... ok
t/TagLib_ID3v2_FrameListMap_Iterator.t ........... ok
t/TagLib_ID3v2_Header.t .......................... 1/24
#   Failed test &#39;Using taglib 1.11&#39;
#   at t/TagLib_ID3v2_Header.t line 113.
# Compared $data-&gt;[3]
#    got : &#39;4&#39;
# expect : &#39;2&#39;
# method render&#40;&#41; failed
# Looks like you failed 1 test of 24.
t/TagLib_ID3v2_Header.t .......................... Dubious, test returned 1 
&#40;wstat 256, 0x100&#41;
Failed 1/24 subtests
t/TagLib_ID3v2_RelativeVolumeFrame.t ............. ok
t/TagLib_ID3v2_RelativeVolumeFrame_PeakVolume.t .. ok
t/TagLib_ID3v2_SynchData.t ....................... ok
t/TagLib_ID3v2_Tag.t ............................. ok
t/TagLib_ID3v2_TextIdentificationFrame.t ......... ok
t/TagLib_ID3v2_UniqueFileIdentifierFrame.t ....... ok
t/TagLib_ID3v2_UnknownFrame.t .................... ok
t/TagLib_ID3v2_UserTextIdentificationFrame.t ..... ok
t/TagLib_MPC_File.t .............................. ok
t/TagLib_MPC_Properties.t ........................ ok
t/TagLib_MPEG_File.t ............................. 1/16
#   Failed test at t/TagLib_MPEG_File.t line 32.
#          got: 0
#     expected: 104
# method firstFrameOffset&#40;&#41; failed

#   Failed test at t/TagLib_MPEG_File.t line 38.
#          got: 27794
#     expected: -1
# method lastFrameOffset&#40;&#41; failed
# Looks like you failed 2 tests of 16.
t/TagLib_MPEG_File.t ............................. Dubious, test returned 2 
&#40;wstat 512, 0x200&#41;
Failed 2/16 subtests
t/TagLib_MPEG_Header.t ........................... 1/15 TagLib: 
MPEG::Header::Header&#40;&#41; - This constructor is no longer used.

#   Failed test at t/TagLib_MPEG_Header.t line 34.
#          got: &#39;Version1&#39;
#     expected: &#39;Version2&#39;
# method version&#40;&#41; failed

#   Failed test at t/TagLib_MPEG_Header.t line 37.
#          got: 0
#     expected: 3
# method layer&#40;&#41; failed

#   Failed test at t/TagLib_MPEG_Header.t line 41.
#          got: 0
#     expected: 576
# method samplesPerFrame&#40;&#41; failed

#   Failed test at t/TagLib_MPEG_Header.t line 44.
#          got: 0
#     expected: 16000
# method sampleRate&#40;&#41; failed

#   Failed test at t/TagLib_MPEG_Header.t line 50.
#          got:
#     expected: 1
# method isValid&#40;&#41; failed

#   Failed test at t/TagLib_MPEG_Header.t line 53.
#          got:
#     expected: 1
# method isPadded&#40;&#41; failed

#   Failed test at t/TagLib_MPEG_Header.t line 56.
#          got:
#     expected: 1
# method isOriginal&#40;&#41; failed

#   Failed test at t/TagLib_MPEG_Header.t line 62.
#          got: 0
#     expected: 289
# method frameLength&#40;&#41; failed

#   Failed test at t/TagLib_MPEG_Header.t line 68.
#          got: 0
#     expected: 64
# method bitrate&#40;&#41; failed
# Looks like you failed 9 tests of 15.
t/TagLib_MPEG_Header.t ........................... Dubious, test returned 9 
&#40;wstat 2304, 0x900&#41;
Failed 9/15 subtests
t/TagLib_MPEG_Properties.t ....................... 1/12
#   Failed test at t/TagLib_MPEG_Properties.t line 13.
#          got: 6
#     expected: 7
# method length&#40;&#41; failed
# Looks like you failed 1 test of 12.
t/TagLib_MPEG_Properties.t ....................... Dubious, test returned 1 
&#40;wstat 256, 0x100&#41;
Failed 1/12 subtests
t/TagLib_MPEG_XingHeader.t ....................... ok
t/TagLib_Ogg_FieldListMap.t ...................... ok
t/TagLib_Ogg_FieldListMap_Iterator.t ............. ok
t/TagLib_Ogg_File.t .............................. ok
t/TagLib_Ogg_FLAC_File.t ......................... ok
t/TagLib_Ogg_Page.t .............................. ok
t/TagLib_Ogg_PageHeader.t ........................ ok
t/TagLib_Ogg_Vorbis_File.t ....................... ok
t/TagLib_Ogg_Vorbis_Properties.t ................. ok
t/TagLib_Ogg_XiphComment.t ....................... 1/18
#   Failed test at t/TagLib_Ogg_XiphComment.t line 51.
#          got: 105
#     expected: 109
# method render&#40;&#41; failed

#   Failed test at t/TagLib_Ogg_XiphComment.t line 53.
#          got: 105
#     expected: 109
# method render&#40;addFramingBit&#41; failed
# Looks like you failed 2 tests of 18.
t/TagLib_Ogg_XiphComment.t ....................... Dubious, test returned 2 
&#40;wstat 512, 0x200&#41;
Failed 2/18 subtests
t/TagLib_String.t ................................ ok
t/TagLib_String_Iterator.t ....................... ok
t/TagLib_StringList.t ............................ ok
t/TagLib_Tag.t ................................... ok
t/TagLib_Vorbis_File.t ........................... ok
t/TagLib_Vorbis_Properties.t ..................... ok

Here&#39;s one way of patching TagLib_APE_Item.t and TagLib_ID3v2_Header.t to 
remove their bugs:

#############################
--- t/TagLib_APE_Item.t_orig    2016-06-29 18:43:25 +1000
+++ t/TagLib_APE_Item.t    2016-06-29 19:09:14 +1000
@@ -38,7 +38,7 @@

$ver = qx{taglib-config --version};
chomp $ver;
-$is18 = $ver ge &#39;1.8&#39;;
+$is18 = v_num&#40;$ver&#41; &gt;= v_num&#40;&#39;1.8&#39;&#41;;

$size = $is18  ? 27 : 13;
cmp_ok&#40;$i-&gt;size&#40;&#41;, &#34;==&#34;, $size, &#34;Using taglib $ver&#34;&#41; 
or
@@ -64,3 +64,8 @@
$i-&gt;setType&#40;&#34;Text&#34;&#41;;
ok&#40;not $i-&gt;isEmpty&#40;&#41;&#41;                                                  or
     diag&#40;&#34;method isEmpty&#40;&#41; failed&#34;&#41;;
+
+sub v_num {
+  my @v = split /\./, $_[0];
+  return &#40;$v[0] * 10000&#41; + $v[1];
+}
--- t/TagLib_ID3v2_Header.t_orig    2016-06-29 19:20:50 +1000
+++ t/TagLib_ID3v2_Header.t    2016-06-29 19:28:31 +1000
@@ -75,7 +75,7 @@

$ver = qx{taglib-config --version};
chomp $ver;
-$is18 = $ver ge &#39;1.8&#39;;
+$is18 = v_num&#40;$ver&#41; &gt;= v_num&#40;&#39;1.8&#39;&#41;;

# Render changes things a bit
# The point to this test is to demonstrate that the
@@ -119,3 +119,8 @@
$i = Audio::TagLib::ID3v2::Header-&gt;new&#40;$data&#41;;
cmp_ok&#40;$i-&gt;majorVersion&#40;&#41;, &#39;==&#39;, 97&#41; 
or
     diag&#40;&#34;method majorVersion&#40;&#41; failed&#34;&#41;;
+
+sub v_num {
+  my @v = split /\./, $_[0];
+  return &#40;$v[0] * 10000&#41; + $v[1];
+}

#############################

Those bugs should not be specific to Windows.

And it looks like there&#39;s a couple of instances of the test scripts using 
functions/constructors that are no longer supported in 1.11.

Other than that, I think the failures are related to that same problem with 
&#34;samples/guitar.mp3&#34; path.

I&#39;ll take a closer look when I get a chance.

Cheers,
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;05&nbsp;08:09:54&nbsp;2016</span>
    <span class="description">sisyphus1 [...] optusnet.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114906] [Win32] Some test failures with perl-5.24.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 5 Jul 2016 22:09:05 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Audio-TagLib [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &lt;sisyphus1 [...] optusnet.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Hi Geoff,

Just looking at t/TagLib_AudioProperties.t.

It fails only one test - the one that tests the length of the file &#40;in 
seconds&#41;.

With 1.11 I&#39;m getting a value of 6, though 7 is what&#39;s expected and 7 is 
what I get with 1.9.1.

So ... looking at the 1.11 audioproperties.h, there&#39;s a comment about 
length:

* Returns the length of the file in seconds.  The length is rounded down to
* the nearest whole second.

But there&#39;s no such comment in the 1.9.1 audioproperties.h.
Is it possible that 1.11 and 1.9.1 measure length differently ?
Could 1.9.1 have rounded *up* to the nearest whole second ? .... or rounded 
to nearest ?

Have you built Audio-TagLib-1.65 against taglib-1.11 and experienced no 
problems ?

Cheers,
Rob 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;05&nbsp;13:35:38&nbsp;2016</span>
    <span class="description">geoff [...] hughes.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114906] [Win32] Some test failures with perl-5.24.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 05 Jul 2016 10:35:05 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Audio-TagLib [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Geoffrey Leach &lt;geoff [...] hughes.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m assuming that the difference is the result of changes to the taglib code. There&#39;s a fair amount of that.


On 07/05/2016 05:09:54 AM, sisyphus1@optusnet.com.au via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Audio-TagLib
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114906">https://rt.cpan.org/Ticket/Display.html?id=114906</a></span> &gt;
&gt; 
&gt; 
&gt; Hi Geoff,
&gt; 
&gt; Just looking at t/TagLib_AudioProperties.t.
&gt; 
&gt; It fails only one test - the one that tests the length of the file &#40;in
&gt; 
&gt; seconds&#41;.
&gt; 
&gt; With 1.11 I&#39;m getting a value of 6, though 7 is what&#39;s expected and 7
&gt; is 
&gt; what I get with 1.9.1.
&gt; 
&gt; So ... looking at the 1.11 audioproperties.h, there&#39;s a comment about 
&gt; length:
&gt; 
&gt; * Returns the length of the file in seconds.  The length is rounded
&gt; down to
&gt; * the nearest whole second.
&gt; 
&gt; But there&#39;s no such comment in the 1.9.1 audioproperties.h.
&gt; Is it possible that 1.11 and 1.9.1 measure length differently ?
&gt; Could 1.9.1 have rounded *up* to the nearest whole second ? .... or
&gt; rounded 
&gt; to nearest ?
&gt; 
&gt; Have you built Audio-TagLib-1.65 against taglib-1.11 and experienced
&gt; no 
&gt; problems ?
&gt; 
&gt; Cheers,
&gt; Rob 
&gt; 
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;07&nbsp;20:40:24&nbsp;2016</span>
    <span class="description">geoff [...] hughes.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114906] [Win32] Some test failures with perl-5.24.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 07 Jul 2016 17:39:53 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Audio-TagLib [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Geoffrey Leach &lt;geoff [...] hughes.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">An update on my previous reply. I checked the file with audacity, and it reports that the length of the file is, indeed, 7 seconds.

On 07/05/2016 05:09:54 AM, sisyphus1@optusnet.com.au via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Audio-TagLib
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114906">https://rt.cpan.org/Ticket/Display.html?id=114906</a></span> &gt;
&gt; 
&gt; 
&gt; Hi Geoff,
&gt; 
&gt; Just looking at t/TagLib_AudioProperties.t.
&gt; 
&gt; It fails only one test - the one that tests the length of the file &#40;in
&gt; 
&gt; seconds&#41;.
&gt; 
&gt; With 1.11 I&#39;m getting a value of 6, though 7 is what&#39;s expected and 7
&gt; is 
&gt; what I get with 1.9.1.
&gt; 
&gt; So ... looking at the 1.11 audioproperties.h, there&#39;s a comment about 
&gt; length:
&gt; 
&gt; * Returns the length of the file in seconds.  The length is rounded
&gt; down to
&gt; * the nearest whole second.
&gt; 
&gt; But there&#39;s no such comment in the 1.9.1 audioproperties.h.
&gt; Is it possible that 1.11 and 1.9.1 measure length differently ?
&gt; Could 1.9.1 have rounded *up* to the nearest whole second ? .... or
&gt; rounded 
&gt; to nearest ?
&gt; 
&gt; Have you built Audio-TagLib-1.65 against taglib-1.11 and experienced
&gt; no 
&gt; problems ?
&gt; 
&gt; Cheers,
&gt; Rob 
&gt; 
&gt; 
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
