<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #40905 for List-MoreUtils: Returning undef when none is passed an empty array is counterintuitive</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #40905 for List-MoreUtils: Returning undef when none is passed an empty array is counterintuitive</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/List-MoreUtils/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/List-MoreUtils/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/List-MoreUtils/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/List-MoreUtils/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/List-MoreUtils">List-MoreUtils CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">40905</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/List-MoreUtils/Active/">List-MoreUtils</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
cebratcher [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
ether [...] cpan.org

<br />
ribasushi [...] leporine.io

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-19166-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.22    </td>
  </tr>
  <tr id="CF-19167-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;13&nbsp;17:30:58&nbsp;2008</span>
    <span class="description">cebratcher [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Returning undef when none is passed an empty array is
 counterintuitive</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This snippet of code should logically output &#34;foo NOT found in bar&#34;:

##############################

my @bar = &#40;&#41;;

if &#40;none {/foo/} @bar&#41; {
    print &#34;foo NOT found in bar\n&#34;;
}
else {
    print &#34;foo found in bar\n&#34;
}

##############################

It doesn&#39;t as none returns undef if the given array is empty.  The
attached patch fixes this problem.

-Clif
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> none_empty_array.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff --git a/List-MoreUtils-0.22/MoreUtils.xs b/List-MoreUtils-0.22/MoreUtils.xs
index 9011867..595f343 100644
--- a/List-MoreUtils-0.22/MoreUtils.xs
+++ b/List-MoreUtils-0.22/MoreUtils.xs
@@ -295,7 +295,7 @@ CODE:
     CV *cv;
 
     if &#40;items &lt;= 1&#41;
-	XSRETURN_UNDEF;
+	XSRETURN_YES;
 
     cv = sv_2cv&#40;code, &#38;stash, &#38;gv, 0&#41;;
     PUSH_MULTICALL&#40;cv&#41;;
diff --git a/List-MoreUtils-0.22/lib/List/MoreUtils.pm b/List-MoreUtils-0.22/lib/List/MoreUtils.pm
index 01a2510..4923fbb 100644
--- a/List-MoreUtils-0.22/lib/List/MoreUtils.pm
+++ b/List-MoreUtils-0.22/lib/List/MoreUtils.pm
@@ -47,7 +47,7 @@ sub all &#40;&#38;@&#41; {
 
 sub none &#40;&#38;@&#41; {
     my $f = shift;
-    return if ! @_;
+    return 1 if ! @_;
     for &#40;@_&#41; {
 	return 0 if $f-&gt;&#40;&#41;;
     }
@@ -386,7 +386,8 @@ criterion given through BLOCK. Sets C&lt;$_&gt; for each item in LIST in turn:
     print &#34;No value defined&#34;
         if none { defined&#40;$_&#41; } @list;
 
-Returns false otherwise, or C&lt;undef&gt; if LIST is empty.
+As an empty list will never match the criterion, C&lt;none&gt; returns C&lt;1&gt; if LIST is empty,
+returns false otherwise.
 
 =item notall BLOCK LIST
 
diff --git a/List-MoreUtils-0.22/t/List-MoreUtils-pp.t b/List-MoreUtils-0.22/t/List-MoreUtils-pp.t
index 6382877..234b2aa 100644
--- a/List-MoreUtils-0.22/t/List-MoreUtils-pp.t
+++ b/List-MoreUtils-0.22/t/List-MoreUtils-pp.t
@@ -54,7 +54,7 @@ BEGIN { $TESTS += 4 }
     ok&#40;none { !defined } @list&#41;;
     ok&#40;none { $_ &gt; 10000 } @list&#41;;
     ok&#40;!none { defined } @list&#41;;
-    ok&#40;!defined none { }&#41;;
+    ok&#40;none { }&#41;;
 }
 
 # notall &#40;16...&#41;
diff --git a/List-MoreUtils-0.22/t/List-MoreUtils.t b/List-MoreUtils-0.22/t/List-MoreUtils.t
index 299b866..631eccc 100644
--- a/List-MoreUtils-0.22/t/List-MoreUtils.t
+++ b/List-MoreUtils-0.22/t/List-MoreUtils.t
@@ -63,7 +63,7 @@ BEGIN { $TESTS += 4 }
     ok&#40;none { !defined } @list&#41;;
     ok&#40;none { $_ &gt; 10000 } @list&#41;;
     ok&#40;!none { defined } @list&#41;;
-    ok&#40;!defined none { }&#41;;
+    ok&#40;none { }&#41;;
 }
 
 # notall &#40;15...&#41;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;12&nbsp;17:47:35&nbsp;2009</span>
    <span class="description">VPARSEVAL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is resolved in 0.23 which I just uploaded to the CPAN.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;12&nbsp;17:47:35&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;12&nbsp;17:47:36&nbsp;2009</span>
    <span class="description">VPARSEVAL [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;29&nbsp;12:31:37&nbsp;2010</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jul 12 14:47:35 2009, VPARSEVAL wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This is resolved in 0.23 which I just uploaded to the CPAN.
</div>
Note that the 0.23 code line is no longer in the latest release, 0.26.
Consequently this and a number of other tickets in this queue are no
longer resolved.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;29&nbsp;12:31:39&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;05&nbsp;20:10:15&nbsp;2010</span>
    <span class="description">adamk [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fix reapplied. Fixed in 0.27_03.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;05&nbsp;20:10:16&nbsp;2010</span>
    <span class="description">adamk [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;11&nbsp;01:09:04&nbsp;2013</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I disagree with the made change &#40;any/notall returns false, all returns true - like none&#41;. I prefer a reasonable discussion.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;11&nbsp;01:09:05&nbsp;2013</span>
    <span class="description">REHSACK [...] cpan.org -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;11&nbsp;01:17:39&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Cc ETHER added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;11&nbsp;11:35:38&nbsp;2013</span>
    <span class="description">rt-cpan [...] trout.me.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Oct 11 01:09:04 2013, REHSACK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I disagree with the made change &#40;any/notall returns false, all returns
&gt; true - like none&#41;. I prefer a reasonable discussion.
</div>
I think the problem here is looking at these in isolation. In order to get a coherent API, let&#39;s &#40;whether we actually add the section or not&#41; invent a proposed &#34;what functions do when passed an empty list&#34; section and list each one, its behaviour, and why that behaviour is consistent conceptually.

Note that I&#39;m not suggesting we simply rationalise the current behaviour, but instead propose a consistent set of behaviour - so if somebody wants to propose such a section, they should annotate where the behaviour changes from the current.

REHSACK, since you asked for the discussion, I hereby nominate you to produce the first proposal to provide a starting point. Well volunteered :D
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;22&nbsp;03:23:16&nbsp;2013</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> mst [...] shadowcat.co.uk, leonerd [...] leonerd.org.uk</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Okay - my proposal is to let the return value be correct instead of simple.

That means: for any, all, none and notall the return value should be undef in case of no items are specified.

Why? Because without any item, a decision whether any, all, not all or none item matches or don&#39;t matches a specific criteria can&#39;t be done. So consequently the return value should transport the information: no decision possible.

For boolean evaluation that makes not much difference:

if&#40;any { ... } @empty&#41; =&gt; not true, skip block
if&#40;!any { ... } @empty&#41; =&gt; true, execute block

Same for the rest ...

Cheers,
Jens
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;22&nbsp;07:18:16&nbsp;2013</span>
    <span class="description">leonerd-cpan [...] leonerd.org.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">In many ways this is analogous to the question of sum/product on empty
lists. You can draw an analogy between sum and any, by noting the
properties of addition vs boolean inclusive-or and the identities 0 and
false &#40;and ignoring for this argument the predicate function given to
&#39;any&#39;, we&#39;ll consider that A,B,C are the boolean results of the
predicate function mapped over the original input list&#41;:

  sum A,B,C = A + B + C = 0 + A + B + C
  sum A     = A         = 0 + A
  sum &#40;&#41;                = 0

  any A,B,C = A | B | C = false | A | B | C
  any A     = A         = false | A
  any &#40;&#41;                = false

To have any return false on an empty list is consistent with its
description - it failed to find any value in the input list that
satisfied its predicate, so it must return false.

Turning now to product and all, we can note again the properties of
multiplication vs boolean and, and the identities 1 and true:

  product A,B,C = A * B * C = 1 * A * B * C
  product A     = A         = 1 * A
  product &#40;&#41;                = 1

  all A,B,C = A &#38; B &#38; C = true &#38; A &#38; B &#38; C
  all A     = A         = true &#38; A
  all &#40;&#41;                = true

Having all return true on an empty list is also consistent with its
description - it could find no counter-example to the claim &#34;all these
values pass the predicate&#34;, so it must return true.

In all four cases, sum, product, any, all, they are simply the
&#40;associative&#41; list reduction of their input lists over their respective
binary operator, starting from the identity value of that operator

  function   op   id

  sum        +    0
  product    *    1
  any        ||   false
  all        &#38;&#38;   true

This is furthermore hinted at by the example definitions of these
functions in terms of the base &#39;reduce&#39; case:

  reduce { $a || $predicate-&gt;&#40;local $_ = $b&#41; } 0, @list   # any
  reduce { $a &#38;&#38; $predicate-&gt;&#40;local $_ = $b&#41; } 1, @list   # all

By way of a final motivation, you can also note the generalisation of
DeMorgan&#39;s law applied to the any/all:

          A &#38; B          == not&#40;   &#40;not A&#41; | &#40;not B&#41;    &#41;

  all { PREDICATE } LIST == not any { not PREDICATE } LIST

For this to remain true even when the LIST is empty, it is required
that any and all on empty lists return complementary values - all true,
any false.


Finally, I don&#39;t believe any of these functions should ever return undef - they are boolean predicate tests so should always return a defined boolean value.

-- 

Paul Evans
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;22&nbsp;11:55:37&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> cebratcher [...] gmail.com, ether [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #40905] Returning undef when none is passed an empty array is counterintuitive</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 22 Oct 2013 08:55:16 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Jens Rehsack via RT &lt;bug-List-MoreUtils [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karen Etheridge &lt;ether [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, Oct 22, 2013 at 03:23:17AM -0400, Jens Rehsack via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=40905">https://rt.cpan.org/Ticket/Display.html?id=40905</a></span> &gt;
&gt; 
&gt; Okay - my proposal is to let the return value be correct instead of simple.
&gt; 
&gt; That means: for any, all, none and notall the return value should be undef in case of no items are specified.
</div>
I must note that this is *not* the same as what the versions in
List::MoreUtils return &#40;ahead by several years in establishing an API&#41;:

any: returns FALSE if list is empty
all: returns TRUE if list is empty
none: returns TRUE if list is empty
notall: returns FALSE if list is empty

Given that List::Util and List::MoreUtils are often used at the same time,
and there are even libraries that combine the two into one
&#40;List::AllUtils&#41;, I would strongly suggest that the interfaces be kept
aligned.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;22&nbsp;12:32:02&nbsp;2013</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The question was at no point, what has List::MoreUtils in API - the point was, that it has changed without permission and asking back by hijacker. Sorry for inconvinience - but after 10 years you can ask for custom and practice.

You&#39;re chance here is to argue - and I completely follow LeoNerd&#39;s explanation, even if I think there is some truth in my point of view, too.

But hijacked custom and practice is - sorry - not a valid reason to keep it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;24&nbsp;15:46:04&nbsp;2013</span>
    <span class="description">ribasushi [...] leporine.io -  Cc RIBASUSHI added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;18&nbsp;04:46:01&nbsp;2014</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> ether [...] cpan.org, mst [...] shadowcat.co.uk</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Resolved by switching to Sub::Exporter and allow users to choose between alias implementation and tassilo&#39;s. WIth 0.401 alias implementation will be announced being depreciated and some time later a warning will be issued when using &#39;:all&#39; and even some more time later &#39;:all&#39; will disappear.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;18&nbsp;04:46:02&nbsp;2014</span>
    <span class="description">REHSACK [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
