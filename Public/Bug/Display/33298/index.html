<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #18676 for Gtk2: Gtk2 not installable from CPAN</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #18676 for Gtk2: Gtk2 not installable from CPAN</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Gtk2/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Gtk2/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Gtk2/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Gtk2/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Gtk2">Gtk2 CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">18676</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Gtk2/Active/">Gtk2</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
EWILHELM [...] cpan.org

<br />
schmorp [...] schmorp.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-15134-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-15135-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;12&nbsp;07:47:44&nbsp;2006</span>
    <span class="description">schmorp [...] schmorp.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Gtk2 not installable from CPAN</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 12 Apr 2006 13:47:06 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Gtk2 [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marc Lehmann &lt;schmorp [...] schmorp.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Trying to install Gtk2 from CPAN results in &#34;Depends.pm&#34; not being found,
without any indication of what the user could do.

It seems Gtk2 is missing dependencies on the modules it requires.

This used to work in the past, but does no longer.

-- 
                The choice of a
      -----==-     _GNU_
      ----==-- _       generation     Marc Lehmann
      ---==---&#40;_&#41;__  __ ____  __      pcg@goof.com
      --==---/ / _ \/ // /\ \/ /      <span class="clickylink"><a target="new" rel="nofollow" href="http://schmorp.de/">http://schmorp.de/</a></span>
      -=====/_/_//_/\_,_/ /_/\_\      XX11-RIPE
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;14&nbsp;10:14:44&nbsp;2006</span>
    <span class="description">kaffeetisch [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Apr 12 07:47:44 2006, schmorp@schmorp.de wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Trying to install Gtk2 from CPAN results in &#34;Depends.pm&#34; not being found,
&gt; without any indication of what the user could do.
&gt; 
&gt; It seems Gtk2 is missing dependencies on the modules it requires.
&gt; 
&gt; This used to work in the past, but does no longer.
</div>
This is weird.  The only modules Gtk2&#39;s Makefile.PL unconditionally uses
are EU::MM, File::Spec, and Cwd.  The rest &#40;including EU::Depends&#41; only
get used inside an eval.  If that eval fails, a fake Makefile is written
which contains, among others, EU::Depends as a fatal pre-requisite. 
This code hasn&#39;t actually been touched for more than a year.

Any ideas?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;14&nbsp;10:14:45&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;14&nbsp;14:53:51&nbsp;2006</span>
    <span class="description">schmorp [...] schmorp.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18676] Gtk2 not installable from CPAN</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 14 Apr 2006 20:53:03 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Torsten Schönfeld via RT &lt;bug-Gtk2 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marc Lehmann &lt;schmorp [...] schmorp.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, Apr 14, 2006 at 10:14:45AM -0400, Torsten Schönfeld via RT &lt;bug-Gtk2@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; This used to work in the past, but does no longer.
</div>&gt; 
&gt; This is weird.  The only modules Gtk2&#39;s Makefile.PL unconditionally uses
&gt; are EU::MM, File::Spec, and Cwd.  The rest &#40;including EU::Depends&#41; only
&gt; get used inside an eval.  If that eval fails, a fake Makefile is written
&gt; which contains, among others, EU::Depends as a fatal pre-requisite. 
&gt; This code hasn&#39;t actually been touched for more than a year.
&gt; 
&gt; Any ideas?
</div>
Just try it out without having EU:Depends and Gtk2 installed:

   Running make for T/TS/TSCH/Gtk2-1.104.tar.gz
     Is already unwrapped into directory /root/.cpan/build/Gtk2-1.104
     &#39;/localvol/opt/perl/bin/perl Makefile.PL&#39; returned status 512, won&#39;t make
   Running make test
     Make had some problems, won&#39;t test
   Running make install
     Make had some problems, won&#39;t install
   Failed during this command:
     TSCH/Gtk2-1.104.tar.gz                       : writemakefile NO &#39;/localvol/opt/perl/bin/perl Makefile.PL&#39; returned status 512

I know it did work, but maybe something outside Gtk2 changed, I have no
idea. I just got a number of reports that cpan fails, and tried it, and it
fails.

I am sorry that I can&#39;t give more insights right now :&#40;

-- 
                The choice of a
      -----==-     _GNU_
      ----==-- _       generation     Marc Lehmann
      ---==---&#40;_&#41;__  __ ____  __      pcg@goof.com
      --==---/ / _ \/ // /\ \/ /      <span class="clickylink"><a target="new" rel="nofollow" href="http://schmorp.de/">http://schmorp.de/</a></span>
      -=====/_/_//_/\_,_/ /_/\_\      XX11-RIPE
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;15&nbsp;16:53:07&nbsp;2006</span>
    <span class="description">kaffeetisch [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Apr 14 14:53:51 2006, schmorp@schmorp.de wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Just try it out without having EU:Depends and Gtk2 installed:
</div>
I just tried with CPANPLUS.pm.  Here&#39;s what I got:

--8&lt;--
Running [/usr/bin/perl -MCPANPLUS::Internals::Utils::Autoflush
Makefile.PL PREFIX=/home/torsten/opt/perl]...
Can&#39;t locate ExtUtils/Depends.pm in @INC &#40;@INC contains:  [...]&#41; at
&#40;eval 11&#41; line 1.
BEGIN failed--compilation aborted at &#40;eval 11&#41; line 1.

Checking if your kit is complete...
Looks good
MakeMaker FATAL: prerequisites not found &#40;Glib not installed,
ExtUtils::Depends not installed, ExtUtils::PkgConfig not installed&#41;

               Please install these modules first and rerun &#39;perl
Makefile.PL&#39;.
[ERROR] Could not run &#39;/usr/bin/perl Makefile.PL&#39;: Can&#39;t locate
ExtUtils/Depends.pm in @INC &#40;@INC contains [...]&#41; at &#40;eval 11&#41; line 1.
BEGIN failed--compilation aborted at &#40;eval 11&#41; line 1.

Checking if your kit is complete...
Looks good
MakeMaker FATAL: prerequisites not found &#40;Glib not installed,
ExtUtils::Depends not installed, ExtUtils::PkgConfig not installed&#41;

               Please install these modules first and rerun &#39;perl
Makefile.PL&#39;.
 -- cannot continue

[ERROR] Unable to create a new distribution object for &#39;Gtk2&#39; -- cannot
continue

Error installing &#39;Gtk2&#39;
--8&lt;--

I&#39;ll readily admit that this isn&#39;t exactly user-friendly.  But once I
installed the mentioned modules manually and re-ran &#39;install Gtk2&#39;,
everything worked.

Unless we include a mechanism that prompts the user and installs modules
automatically if desired, I think the above is as good as we&#39;re going to
get.

Now, it looks like you don&#39;t get those messages.  Is this a CPAN.pm
thing and is there anything we can do about it?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;15&nbsp;18:49:44&nbsp;2006</span>
    <span class="description">schmorp [...] schmorp.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18676] Gtk2 not installable from CPAN</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 16 Apr 2006 00:49:03 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Torsten Schönfeld via RT &lt;bug-Gtk2 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marc Lehmann &lt;schmorp [...] schmorp.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, Apr 15, 2006 at 04:53:09PM -0400, Torsten Schönfeld via RT &lt;bug-Gtk2@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I just tried with CPANPLUS.pm.  Here&#39;s what I got:
&gt; 
&gt; Unless we include a mechanism that prompts the user and installs modules
&gt; automatically if desired, I think the above is as good as we&#39;re going to
&gt; get.
</div>
Whats so bad about letting CPAN and CPANPLUS do it, like every other
module that has dependencies? Why would a new mechanism be required?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Now, it looks like you don&#39;t get those messages.  Is this a CPAN.pm
&gt; thing and is there anything we can do about it?
</div>
I do get similar messages. Its something about the generated Makefile
that makes problems. The only thing I know is that it once worked, but I
couldn&#39;t say wether CPANs depdency tracking changed or the Makefile.PL or
something else.

Automatic dependency tracking and installation works fine with other modules
- &#34;install Net::FCP&#34; will fetch and install Crypt::Twofish, Crypt::Rijndael
and so on.

I would look into the issue myself if I had enough time, which will
certainly happen some unspecified time in the future, so if you don&#39;t make
progress you can just keep the bug open as reminder and I&#39;ll look into it
when I have time for that again.

-- 
                The choice of a
      -----==-     _GNU_
      ----==-- _       generation     Marc Lehmann
      ---==---&#40;_&#41;__  __ ____  __      pcg@goof.com
      --==---/ / _ \/ // /\ \/ /      <span class="clickylink"><a target="new" rel="nofollow" href="http://schmorp.de/">http://schmorp.de/</a></span>
      -=====/_/_//_/\_,_/ /_/\_\      XX11-RIPE
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;16&nbsp;10:45:13&nbsp;2006</span>
    <span class="description">kaffeetisch [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Apr 15 18:49:44 2006, schmorp@schmorp.de wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Whats so bad about letting CPAN and CPANPLUS do it, like every other
&gt; module that has dependencies? Why would a new mechanism be required?
</div>
Well, the problem that&#39;s been haunting us for ages is that we need those
dependencies to generate a correct Makefile.  Gtk2 needs EU::Depends,
EU::PkgConfig, and Glib at Makefile.PL time.  But the only way to tell
CPAN/CPANPLUS what dependencies it should install is to write a Makefile
which lists those dependencies.

To solve this dilemma, we first check if those modules are already
installed.  If not, we write a fake Makefile which doesn&#39;t really do
anything but which lists the mentioned modules as fatal dependencies. 
In the past, this has caused CPAN/CPANPLUS to ask the user whether he
wants to install the pre-requisites.  This doesn&#39;t seem to happen
anymore.  Maybe that&#39;s due to the PREREQ_FATAL flag?

Anyway, even if CPAN/CPANPLUS still prompted the user, this approach
wouldn&#39;t really work either: After happily installing all the required
modules, CPAN/CPANPLUS would go back to the original module &#40;Gtk2, say&#41;
to try to install it.  But since there already is a Makefile whose mtime
is newer than Makefile.PL&#39;s, the Makefile wouldn&#39;t get regenerated.  The
fake Makefile already present doesn&#39;t do anything useful though, and
definitely doesn&#39;t build and install the module.

Over the last few years, a couple of possible solutions have been
suggested.  The ones I remember are bundling and using
ExtUtils::AutoInstall[1] and using CPAN.pm manually[2] to prompt the
user and install needed modules on demand.

[1]
<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~autrijus/ExtUtils-AutoInstall-0.63/lib/ExtUtils/AutoInstall.pm">http://search.cpan.org/~autrijus/ExtUtils-AutoInstall-0.63/lib/ExtUtils/AutoInstall.pm</a></span>
[2] <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=14369">https://rt.cpan.org/Ticket/Display.html?id=14369</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;16&nbsp;13:18:24&nbsp;2006</span>
    <span class="description">schmorp [...] schmorp.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> undisclosed-recipients: ;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18676] Gtk2 not installable from CPAN</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 16 Apr 2006 19:17:33 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Torsten Schönfeld via RT &lt;bug-Gtk2 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marc Lehmann &lt;schmorp [...] schmorp.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun, Apr 16, 2006 at 10:45:14AM -0400, Torsten Schönfeld via RT &lt;bug-Gtk2@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; wants to install the pre-requisites.  This doesn&#39;t seem to happen
&gt; anymore.  Maybe that&#39;s due to the PREREQ_FATAL flag?
</div>
Probably &#40;so something did change, after all, and if this is the only
thing this would explain why it worked but does no longer&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Anyway, even if CPAN/CPANPLUS still prompted the user, this approach
&gt; wouldn&#39;t really work either: After happily installing all the required
&gt; modules, CPAN/CPANPLUS would go back to the original module &#40;Gtk2, say&#41;
&gt; to try to install it.  But since there already is a Makefile whose mtime
</div>
Current versions of CPAN are supposed to regenerate the makefile &#40;mine does&#41;.
Even then, running install Gtk2 twice is much much easier than having to
install all dependencies manually.

Another solution which works with all CPAN versions is to create a
Bundle file &#40;which is basically an empty module with just the required
dependencies&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Over the last few years, a couple of possible solutions have been
&gt; suggested.  The ones I remember are bundling and using
&gt; ExtUtils::AutoInstall[1] and using CPAN.pm manually[2] to prompt the
&gt; user and install needed modules on demand.
</div>
The agreement, AFAICR, was that cpan is buggy in this respect and should
just regenerate the makefile. I am not sure how common the fix is, though.
Still, running install twice is an improvement over having to install
dependencies manually, as users simply don&#39;t know which moduels to install
and its atedious process to gobble up all dependencies yourself if you
just want Gtk2 to make some othe rprogram run.

-- 
                The choice of a
      -----==-     _GNU_
      ----==-- _       generation     Marc Lehmann
      ---==---&#40;_&#41;__  __ ____  __      pcg@goof.com
      --==---/ / _ \/ // /\ \/ /      <span class="clickylink"><a target="new" rel="nofollow" href="http://schmorp.de/">http://schmorp.de/</a></span>
      -=====/_/_//_/\_,_/ /_/\_\      XX11-RIPE
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;17&nbsp;13:52:57&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Apr 16 13:18:24 2006, schmorp@schmorp.de wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Maybe that&#39;s due to the PREREQ_FATAL flag?
</div>&gt; 
&gt; Probably &#40;so something did change, after all, and if this is the only
&gt; thing this would explain why it worked but does no longer&#41;.
</div>
This flag&#39;s been there for over a year as well.  If anything changed,
it&#39;s CPAN&#39;s and/or CPANPLUS&#39; interpretation of it.  The docs for EU::MM
have this to say about PREREQ_FATAL:

         If this parameter is true, failing to have the required modules
         &#40;or the right versions thereof&#41; will be fatal. perl Makefile.PL
will
         die with the proper message.

         [...]

         Do not use this parameter for simple requirements, which could be
         resolved at a later time, e.g. after an unsuccessful make test of
         your module.

This sounds like a pretty good match for our situation.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Current versions of CPAN are supposed to regenerate the makefile &#40;mine
&gt; does&#41;.
&gt; Even then, running install Gtk2 twice is much much easier than having
&gt; to
&gt; install all dependencies manually.
</div>
Ah, interesting.  So should we just remove PREREQ_FATAL and hope that
CPAN/CPANPLUS do the right thing?  That is, do they install the
dependencies *and* regenerate the Makefile afterwards if we simply
remove that flag?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Another solution which works with all CPAN versions is to create a
&gt; Bundle file &#40;which is basically an empty module with just the required
&gt; dependencies&#41;.
</div>
We have Gavin&#39;s Bundle::Gnome2, but that includes a lot more than just
Gtk2 and its dependencies.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;22&nbsp;14:14:23&nbsp;2006</span>
    <span class="description">kaffeetisch [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> scott [...] asofyet.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">In

  <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org//Ticket/Display.html?id=18869">http://rt.cpan.org//Ticket/Display.html?id=18869</a></span>

Steffen suggests using Module::Install to solve this issue.  That looks
doable, but I don&#39;t really like the idea of having to bundle
Module::Install with each and every of our modules.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;22&nbsp;19:56:01&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> muppet &lt;scott [...] asofyet.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Apr 22 14:14:23 2006, TSCH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In
&gt; 
&gt;   <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org//Ticket/Display.html?id=18869">http://rt.cpan.org//Ticket/Display.html?id=18869</a></span>
&gt; 
&gt; Steffen suggests using Module::Install to solve this issue.  That looks
&gt; doable, but I don&#39;t really like the idea of having to bundle
&gt; Module::Install with each and every of our modules.
</div>
We&#39;ve also considered AutoInstall, but balked at the same caveat about having to bundle the 
extra modules.  &#40;We would have to bundle it with every module because you can start 
installing from any point in the dependency tree.&#41;

The real problem was that CPAN and CPANPLUS wouldn&#39;t re-run Makefile.PL after the 
dependencies have been satisfied, and the dependencies must be satisfied because they are 
used inside Makefile.PL.  If this behavior has been fixed, then we should be able to make 
some trivial changes to the Makefile.PLs...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;04&nbsp;02:52:35&nbsp;2007</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The solution to this problem has come through the development of
META.yml and the new key configure_requires in there. So you need to add
something like

   configure_requires: {Glib =&gt; 1.16}    # pseudo code!

to you META.yml &#40;if I get the YAML right&#41; and CPAN.pm 1.92 and higher
will install Glib *before* running your Makefile.PL

CPANPLUS does not yet support configure_requires but is expected to follow.

How you get the thing into META.yml? I haven&#39;t tried but I seem to
recall there is a meta_add or meta_extra or some such in MakeMaker. Or
with Module::Build you get direct support with recent versions.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;07&nbsp;14:57:12&nbsp;2007</span>
    <span class="description">kaffeetisch [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Oct 04 02:52:35 2007, ANDK wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;    configure_requires: {Glib =&gt; 1.16}    # pseudo code!
</div>
Thanks for the reminder!  This is now implemented in HEAD of CVS for
Glib and Gtk2.  Our other modules will follow over time.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;07&nbsp;14:57:14&nbsp;2007</span>
    <span class="description">kaffeetisch [...] gmx.de -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;16&nbsp;03:27:07&nbsp;2008</span>
    <span class="description">EWILHELM [...] cpan.org - Ticket #33298:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Cairo dependency not resolved by installer</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The dependency on Cairo appears to just crash the Makefile.PL rather 
than reporting it in a way that would allow CPAN.pm to automatically 
install it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;24&nbsp;08:10:56&nbsp;2008</span>
    <span class="description">kaffeetisch [...] gmx.de - Ticket #33298:  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Feb 16 03:27:07 2008, EWILHELM wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The dependency on Cairo appears to just crash the Makefile.PL rather 
&gt; than reporting it in a way that would allow CPAN.pm to automatically 
&gt; install it.
</div>
I assume by crashing you mean that Makefile.PL reports that you lack the
Cairo module.  If so, then this is a known &#34;bug&#34;:
&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=18676">http://rt.cpan.org/Ticket/Display.html?id=18676</a></span>&gt;.  We largely blame it
on CPAN.pm/CPANPLUS.pm.  Recently, a solution surfaced
&#40;configure_requires in META.yml&#41; and we&#39;re using it in the unstable
series of our modules already.  This will soon hit CPAN.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;24&nbsp;08:10:58&nbsp;2008</span>
    <span class="description">The RT System itself - Ticket #33298:  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;24&nbsp;08:12:34&nbsp;2008</span>
    <span class="description">kaffeetisch [...] gmx.de - Ticket #33298:  Merged into ticket #18676</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;24&nbsp;08:12:34&nbsp;2008</span>
    <span class="description">kaffeetisch [...] gmx.de -  Merged into ticket #18676</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
