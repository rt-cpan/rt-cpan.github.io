<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #71220 for DBD-mysql: no error messages and silent failure of several functions  with clean install of 4.020</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #71220 for DBD-mysql: no error messages and silent failure of several functions  with clean install of 4.020</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=DBD-mysql">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=DBD-mysql">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=DBD-mysql">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=DBD-mysql">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-mysql">DBD-mysql CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">71220</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">deleted</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=DBD-mysql">DBD-mysql</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mark.macnair [...] specialisternescotland.co.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-10170-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
4.020    </td>
  </tr>
  <tr id="CF-10171-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=71220">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-981507" href="/Public/Bug/Display.html?id=71220#txn-981507">#</a>      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;25&nbsp;18:24:17&nbsp;2011</span>
    <span class="description">mark.macnair [...] specialisternescotland.co.uk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> no error messages and silent failure of several functions  with
 clean install of 4.020</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/981507/511055/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/511055">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 5.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On two seperate, standalone windows xp machines with SP 3 Home and Pro,  
strawberry perl 5.12.3 and 12.2.2
3 different version of mysql &#40; 5.0, 5.2 and 5.5.16&#41; 5.2 and 5.5
connecting from local host and remotely, 5.0 on a remote slackware server
and DBD:mysql 4.020, 

after installing DBD 4.020, I no longer recieve error messages, either
through default methods, $dhb-&gt;err* or $DBI::err* as follows:

use strict;
use warnings;
use DBI;
DBI-&gt;trace&#40;3&#41;;
my $dbh = DBI-&gt;connect&#40; &#39;dbi:mysql:test:192.168.0.2:3000&#39;, &#39;dadmin&#39;,
&#39;*&#39;,{ RaiseError =&gt; 1, mysql_enable_utf8 =&gt; 1, mysql_auto_reconnect =&gt;
0}&#41;;  #mysql 5.0 
$dbh-&gt;do&#40;&#34;show me an error message&#34;&#41;; #no errors being shown regardless
of machine, identical result with prepare&#40;&#41; execute&#40;&#41;

the DBI-&gt;trace&#40;3&#41; provoked output is :

    DBI 1.615-ithread default trace level set to 0x0/3 &#40;pid 4400 pi
4c417c&#41; at db_problem.pl line 4
    -&gt; DBI-&gt;connect&#40;dbi:mysql::192.168.0.2:3000, dadmin, ****,
HASH&#40;0x4c9194&#41;&#41;
    -&gt; DBI-&gt;install_driver&#40;mysql&#41; for MSWin32 perl=5.012002 pid=4400
ruid=0 euid=0
       install_driver: DBD::mysql version 4.020 loaded from
C:/strawberry/perl/site/lib/DBD/mysql.pm
    &lt;- install_driver= DBI::dr=HASH&#40;0xacc214&#41;
    !! warn: 0 CLEARED by call to connect method
    -&gt; connect for DBD::mysql::dr &#40;DBI::dr=HASH&#40;0xacc214&#41;~0xacc1a4
&#39;:192.168.0.2:3000&#39; &#39;dadmin&#39; **** HASH&#40;0xb2ce5c&#41;&#41; thr#4c417c
imp_dbh-&gt;connect: dsn = :192.168.0.2:3000, uid = dadmin, pwd = *
imp_dbh-&gt;my_login : dbname = NULL, uid = dadmin, pwd = *,host =
192.168.0.2, port = 3000
imp_dbh-&gt;mysql_dr_connect: host = |192.168.0.2|, port = 3000, uid =
dadmin, pwd = *
imp_dbh-&gt;bind_type_guessing: 0
imp_dbh-&gt;use_server_side_prepare: 0
mysql_options: MYSQL_SET_CHARSET_NAME=utf8
imp_dbh-&gt;mysql_dr_connect: client_flags = 2
imp_dbh-&gt;mysql_dr_connect: &lt;-    &lt;- connect= &#40; DBI::db=HASH&#40;0xbed3e4&#41; &#41;
[1 items] at DBI.pm line 665
    -&gt; STORE for DBD::mysql::db &#40;DBI::db=HASH&#40;0xacbb24&#41;~INNER
&#39;RaiseError&#39; 1&#41; thr#4c417c
    STORE DBI::db=HASH&#40;0xacbb24&#41; &#39;RaiseError&#39; =&gt; 1
    &lt;- STORE= &#40; 1 &#41; [1 items] at DBI.pm line 717
    -&gt; STORE for DBD::mysql::db &#40;DBI::db=HASH&#40;0xacbb24&#41;~INNER
&#39;PrintError&#39; 1&#41; thr#4c417c
    STORE DBI::db=HASH&#40;0xacbb24&#41; &#39;PrintError&#39; =&gt; 1
    &lt;- STORE= &#40; 1 &#41; [1 items] at DBI.pm line 717
    -&gt; STORE for DBD::mysql::db &#40;DBI::db=HASH&#40;0xacbb24&#41;~INNER
&#39;AutoCommit&#39; 1&#41; thr#4c417c
    &lt;- STORE= &#40; 1 &#41; [1 items] at DBI.pm line 717
    -&gt; STORE for DBD::mysql::db &#40;DBI::db=HASH&#40;0xacbb24&#41;~INNER
&#39;mysql_enable_utf8&#39; 1&#41; thr#4c417c
    &lt;- STORE= &#40; 1 &#41; [1 items] at DBI.pm line 720 via  at db_problem.pl
line 6
    -&gt; FETCH for DBD::mysql::db &#40;DBI::db=HASH&#40;0xacbb24&#41;~INNER
&#39;mysql_enable_utf8&#39;&#41; thr#4c417c
    &lt;- FETCH= &#40; 1 &#41; [1 items] at DBI.pm line 720
    -&gt; STORE for DBD::mysql::db &#40;DBI::db=HASH&#40;0xacbb24&#41;~INNER &#39;Username&#39;
&#39;dadmin&#39;&#41; thr#4c417c
    STORE DBI::db=HASH&#40;0xacbb24&#41; &#39;Username&#39; =&gt; &#39;dadmin&#39;
    &lt;- STORE= &#40; 1 &#41; [1 items] at DBI.pm line 720 via  at db_problem.pl
line 6
    &lt;&gt; FETCH= &#40; &#39;dadmin&#39; &#41; [1 items] &#40;&#39;Username&#39; from cache&#41; at DBI.pm
line 720
    -&gt; STORE for DBD::mysql::db &#40;DBI::db=HASH&#40;0xacbb24&#41;~INNER
&#39;mysql_auto_reconnect&#39; 0&#41; thr#4c417c
    &lt;- STORE= &#40; 1 &#41; [1 items] at DBI.pm line 720 via  at db_problem.pl
line 6
    -&gt; FETCH for DBD::mysql::db &#40;DBI::db=HASH&#40;0xacbb24&#41;~INNER
&#39;mysql_auto_reconnect&#39;&#41; thr#4c417c
    &lt;- FETCH= &#40; 0 &#41; [1 items] at DBI.pm line 720
    -&gt; connected in DBD::_::db for DBD::mysql::db
&#40;DBI::db=HASH&#40;0xbed3e4&#41;~0xacbb24 &#39;dbi:mysql::192.168.0.2:3000&#39; &#39;dadmin&#39;
&#39;*&#39; HASH&#40;0x4c9194&#41;&#41; thr#4c417c
    &lt;- connected= &#40; undef &#41; [1 items] at DBI.pm line 726
    &lt;- connect= DBI::db=HASH&#40;0xbed3e4&#41;
    -&gt; STORE for DBD::mysql::db &#40;DBI::db=HASH&#40;0xacbb24&#41;~INNER
&#39;dbi_connect_closure&#39; CODE&#40;0xacbfd4&#41;&#41; thr#4c417c
    STORE DBI::db=HASH&#40;0xacbb24&#41; &#39;dbi_connect_closure&#39; =&gt; CODE&#40;0xacbfd4&#41;
    &lt;- STORE= &#40; 1 &#41; [1 items] at DBI.pm line 735 via  at db_problem.pl
line 6
    -&gt; do for DBD::mysql::db &#40;DBI::db=HASH&#40;0xbed3e4&#41;~0xacbb24 &#39;pants&#39;&#41;
thr#4c417c
mysql.xs do&#40;&#41; use_server_side_prepare 0, async 0
mysql_st_internal_execute MYSQL_VERSION_ID 50144
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;parse_params statement pants
</div>    &lt;- do= &#40; undef &#41; [1 items] at db_problem.pl line 7
    &lt;&gt; DESTROY&#40;DBI::db=HASH&#40;0xbed3e4&#41;&#41; ignored for outer handle &#40;inner
DBI::db=HASH&#40;0xacbb24&#41; has ref cnt 1&#41;
    -&gt; DESTROY for DBD::mysql::db &#40;DBI::db=HASH&#40;0xacbb24&#41;~INNER&#41; thr#4c417c
imp_dbh-&gt;pmysql: c2437c
    &lt;- DESTROY= &#40; undef &#41; [1 items]
    -- DBI::END &#40;$@: , $!: &#41;
    -&gt; disconnect_all for DBD::mysql::dr
&#40;DBI::dr=HASH&#40;0xacc214&#41;~0xacc1a4&#41; thr#4c417c
    &lt;- disconnect_all= &#40; &#41; [0 items] &#40;not implemented&#41; at DBI.pm line
743 via  at db_problem.pl line 0
!   -&gt; DESTROY in DBD::_::common for DBD::mysql::dr
&#40;DBI::dr=HASH&#40;0xacc1a4&#41;~INNER&#41; thr#4c417c
!   &lt;- DESTROY= &#40; undef &#41; [1 items] during global destruction
!   &lt;&gt; DESTROY for DBI::dr=HASH&#40;0xacc214&#41; ignored &#40;inner handle gone&#41;


which I&#39;ve been told by someone much more familiar with the package
indicates that no messages are being sent at all.

I have tried a complete fresh install of perl, DBI, DBD:mysql on both
affected machines, and can confirm each time that the installation of
4.020 no longer provides error messages, and may be preventing any
statements from executing at all.The only alterations I can cause on my
mysql instalation through perl is with $dbh-&gt;func&#40;&#39;createdb&#39;,*,&#39;admin&#39;&#41;
statements.

It may be relevant that the issue was discovered when I upgraded to the
latest version after 
$dbh-&gt;func&#40;&#39;createdb&#39; $db_name,&#39;admin&#39;&#41;; caused &#39;sql server has gone
away&#39; error messages after the first attempt, with the  DBD:mysql 4.018
default shipped with strawberry perl 5.12.3. 

I can confirm that multiple func&#40;&#39;createdb&#39;,*,&#39;admin&#39;&#41; statements in
4.020 do create new databases, but I cannot then perform $dbh-&gt;do&#40;&#41;
statements to spawn tables in them, or any alterations to existing tables.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1262415" href="/Public/Bug/Display.html?id=71220#txn-1262415">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;13&nbsp;08:14:44&nbsp;2013</span>
    <span class="description">CAPTTOFU [...] cpan.org -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.238387</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
