<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #100214 for Email-Send-SMTP-Gmail: bug: fails to execute with undefined method &#34;message&#34;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #100214 for Email-Send-SMTP-Gmail: bug: fails to execute with undefined method &#34;message&#34;</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Email-Send-SMTP-Gmail">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Email-Send-SMTP-Gmail">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Email-Send-SMTP-Gmail">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Email-Send-SMTP-Gmail">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Email-Send-SMTP-Gmail">Email-Send-SMTP-Gmail CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">100214</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Email-Send-SMTP-Gmail">Email-Send-SMTP-Gmail</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
itzik.yarhi [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-236026-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-236027-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.87    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=100214">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1431072" href="/Public/Bug/Display.html?id=100214#txn-1431072">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;08&nbsp;18:12:19&nbsp;2014</span>
    <span class="description">itzik.yarhi [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> bug: fails to execute with undefined method &#34;message&#34;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 9 Nov 2014 01:11:36 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Email-Send-SMTP-Gmail [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Itzik Yarhi &lt;itzik.yarhi [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1431072/760594/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/760594">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 569b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi.

I cannot run  Email::Send::SMTP::Gmail  as I get the following error:
Can&#39;t call method &#34;message&#34; on an undefined value at
C:/itzik/Strawberry/perl/si
te/lib/Email/Send/SMTP/Gmail.pm line 91.

Please advice

I am using fresh installation of Strawberry Perl 5.20.
I used its CPAN tool to retrieve all packages needed.
It seems that  Net::SMTP  was modified, obsoleting &#39;message&#39; method.

Please help

BTW, the example code fails to run on restricted with the var &#39;$email&#39;
not-exist.
&#40;It should be $mail var everywhere at the example&#41;

Thanks a lot

---
itzik yarhi
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1431072/760595/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/760595">with headers</a>
<br />
<span class="downloadcontenttype">text/html 927b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1431161" href="/Public/Bug/Display.html?id=100214#txn-1431161">#</a>      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;09&nbsp;04:45:28&nbsp;2014</span>
    <span class="description">PECO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1431161/760652/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/760652">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I&#39;m testing with the latest SMTP.pm version &#40;2.31&#41; without errors.
Please, try the next simple code and let me know.

###########
use strict;
use warnings;

my &#40;$email,$error&#41; = Email::Send::SMTP::Gmail-&gt;new&#40;-debug=&gt;1,verbose=&gt;1,-smtp=&gt;&#39;smtp.gmail.com&#39;,-login=&gt;&#39;LOGIN&#39;,-pass=&gt;&#39;PASS&#39;&#41;; 

if&#40;$email==-1&#41;{
 print &#34;Error: $error\n&#34;;
 exit;
}
else{
 print &#34;\n\n\tBANNER: $email-&gt;banner&#40;&#41;\n\n&#34;;
}

###############

On Sat Nov 08 18:12:19 2014, itzik.yarhi@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi.
&gt; 
&gt; I cannot run  Email::Send::SMTP::Gmail  as I get the following error:
&gt; Can&#39;t call method &#34;message&#34; on an undefined value at
&gt; C:/itzik/Strawberry/perl/si
&gt; te/lib/Email/Send/SMTP/Gmail.pm line 91.
&gt; 
&gt; Please advice
&gt; 
&gt; I am using fresh installation of Strawberry Perl 5.20.
&gt; I used its CPAN tool to retrieve all packages needed.
&gt; It seems that  Net::SMTP  was modified, obsoleting &#39;message&#39; method.
&gt; 
&gt; Please help
&gt; 
&gt; BTW, the example code fails to run on restricted with the var &#39;$email&#39;
&gt; not-exist.
&gt; &#40;It should be $mail var everywhere at the example&#41;
&gt; 
&gt; Thanks a lot
&gt; 
&gt; ---
&gt; itzik yarhi
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1431162" href="/Public/Bug/Display.html?id=100214#txn-1431162">#</a>      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;09&nbsp;04:45:28&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1431349" href="/Public/Bug/Display.html?id=100214#txn-1431349">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;10&nbsp;00:02:36&nbsp;2014</span>
    <span class="description">itzik.yarhi [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #100214] bug: fails to execute with undefined method &#34;message&#34;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 10 Nov 2014 07:01:56 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Email-Send-SMTP-Gmail [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Itzik Yarhi &lt;itzik.yarhi [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1431349/760735/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/760735">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Juan.

Thanks a lot.

It seems the latest of  Net:SMTP is now  3.02.

Here is output:

C:\itzik\visitors&gt;perl send2.pl
Connecting to smtp.gmail.com using tls with LOGIN and timeout of 60
Net::SMTPS&gt;&gt;&gt; Net::SMTPS&#40;0.04&#41;
Net::SMTPS&gt;&gt;&gt;   IO::Socket::INET6&#40;2.72&#41;
Net::SMTPS&gt;&gt;&gt;     IO::Socket&#40;1.37&#41;
Net::SMTPS&gt;&gt;&gt;       IO::Handle&#40;1.35&#41;
Net::SMTPS&gt;&gt;&gt;         Exporter&#40;5.71&#41;
Net::SMTPS&gt;&gt;&gt;   Net::SMTP&#40;3.02&#41;
Net::SMTPS&gt;&gt;&gt;     Net::Cmd&#40;3.02&#41;
Net::SMTPS&gt;&gt;&gt;     IO::Socket::IP&#40;0.32&#41;
readline&#40;&#41; on unopened filehandle GEN0 at
C:/itzik/Strawberry/perl/lib/Net/Cmd.p
m line 371.
Can&#39;t call method &#34;message&#34; on an undefined value at
C:/itzik/Strawberry/perl/si
te/lib/Email/Send/SMTP/Gmail.pm line 91.



תודה

המשך יום נעים

---
itzik yarhi

On Sun, Nov 9, 2014 at 11:45 AM, Juan Jose San Martin via RT &lt;
bug-Email-Send-SMTP-Gmail@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=100214">https://rt.cpan.org/Ticket/Display.html?id=100214</a></span> &gt;
&gt;
&gt; Hi,
&gt;
&gt; I&#39;m testing with the latest SMTP.pm version &#40;2.31&#41; without errors.
&gt; Please, try the next simple code and let me know.
&gt;
&gt; ###########
&gt; use strict;
&gt; use warnings;
&gt;
&gt; my &#40;$email,$error&#41; =
&gt; Email::Send::SMTP::Gmail-&gt;new&#40;-debug=&gt;1,verbose=&gt;1,-smtp=&gt;&#39;smtp.gmail.com
&gt; &#39;,-login=&gt;&#39;LOGIN&#39;,-pass=&gt;&#39;PASS&#39;&#41;;
&gt;
&gt; if&#40;$email==-1&#41;{
&gt;  print &#34;Error: $error\n&#34;;
&gt;  exit;
&gt; }
&gt; else{
&gt;  print &#34;\n\n\tBANNER: $email-&gt;banner&#40;&#41;\n\n&#34;;
&gt; }
&gt;
&gt; ###############
&gt;
&gt; On Sat Nov 08 18:12:19 2014, itzik.yarhi@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; Hi.
&gt; &gt;
&gt; &gt; I cannot run  Email::Send::SMTP::Gmail  as I get the following error:
&gt; &gt; Can&#39;t call method &#34;message&#34; on an undefined value at
&gt; &gt; C:/itzik/Strawberry/perl/si
&gt; &gt; te/lib/Email/Send/SMTP/Gmail.pm line 91.
&gt; &gt;
&gt; &gt; Please advice
&gt; &gt;
&gt; &gt; I am using fresh installation of Strawberry Perl 5.20.
&gt; &gt; I used its CPAN tool to retrieve all packages needed.
&gt; &gt; It seems that  Net::SMTP  was modified, obsoleting &#39;message&#39; method.
&gt; &gt;
&gt; &gt; Please help
&gt; &gt;
&gt; &gt; BTW, the example code fails to run on restricted with the var &#39;$email&#39;
&gt; &gt; not-exist.
&gt; &gt; &#40;It should be $mail var everywhere at the example&#41;
&gt; &gt;
&gt; &gt; Thanks a lot
&gt; &gt;
&gt; &gt; ---
&gt; &gt; itzik yarhi
</div>&gt;
&gt;
&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1431349/760736/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/760736">with headers</a>
<br />
<span class="downloadcontenttype">text/html 3.2k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1431372" href="/Public/Bug/Display.html?id=100214#txn-1431372">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;10&nbsp;03:13:24&nbsp;2014</span>
    <span class="description">PECO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1431372/760748/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/760748">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I&#39;m unable to reproduce the issue :-/
Here is my output &#40;see versions&#41;

Connecting to smtp.gmail.com using tls with LOGIN and timeout of 60
Net::SMTPS&gt;&gt;&gt; Net::SMTPS&#40;0.04&#41;
Net::SMTPS&gt;&gt;&gt;   IO::Socket::INET6&#40;2.72&#41;
Net::SMTPS&gt;&gt;&gt;     IO::Socket&#40;1.36&#41;
Net::SMTPS&gt;&gt;&gt;       IO::Handle&#40;1.34&#41;
Net::SMTPS&gt;&gt;&gt;         Exporter&#40;5.70&#41;
Net::SMTPS&gt;&gt;&gt;   Net::SMTP&#40;3.02&#41;
Net::SMTPS&gt;&gt;&gt;     Net::Cmd&#40;3.02&#41;
Net::SMTPS&gt;&gt;&gt;     IO::Socket::IP&#40;0.32&#41;
Net::SMTPS=GLOB&#40;0x2bee6c8&#41;&lt;&lt;&lt; 220 mx.google.com ESMTP ai11sm12345676wid.7 - gsmtp

There are minor differences &#40;IO::Socket, IO::Handle, Exporter&#41; but I think the issue is related to IO::Socket, which is unable to create the socket over the network.

1&#41; Please, check your system is able to connect to smtp.google.com on 465.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; telnet smtp.gmail.com 465
</div>Trying 74.125.206.108...
Connected to gmail-smtp-msa.l.google.com.
Escape character is &#39;^]&#39;.
220 mx.google.com ESMTP t9sm22108914wjf.41 - gsmtp

2&#41; Use another layer &#40;see -layer=&gt;&#39;ssl&#39;&#41;

my &#40;$email,$error&#41;=Email::Send::SMTP::Gmail-&gt;new&#40;-debug=&gt;1,verbose=&gt;1,-smtp=&gt;&#39;smtp.gmail.com&#39;,-login=&gt;&#39;LOGIN&#39;,-pass=&gt;&#39;PASS&#39;,-layer=&gt;&#39;ssl&#39;&#41;; 

3&#41; Force another port &#40;see -port=&gt;&#39;25&#39;&#41;

my &#40;$email,$error&#41;=Email::Send::SMTP::Gmail-&gt;new&#40;-debug=&gt;1,verbose=&gt;1,-smtp=&gt;&#39;smtp.gmail.com&#39;,-login=&gt;&#39;LOGIN&#39;,-pass=&gt;&#39;PASS&#39;,-port=&gt;&#39;25&#39;&#41;; 

Regards,
Peco

On Mon Nov 10 00:02:36 2014, itzik.yarhi@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Juan.
&gt; 
&gt; Thanks a lot.
&gt; 
&gt; It seems the latest of  Net:SMTP is now  3.02.
&gt; 
&gt; Here is output:
&gt; 
&gt; C:\itzik\visitors&gt;perl send2.pl
&gt; Connecting to smtp.gmail.com using tls with LOGIN and timeout of 60
&gt; Net::SMTPS&gt;&gt;&gt; Net::SMTPS&#40;0.04&#41;
&gt; Net::SMTPS&gt;&gt;&gt;   IO::Socket::INET6&#40;2.72&#41;
&gt; Net::SMTPS&gt;&gt;&gt;     IO::Socket&#40;1.37&#41;
&gt; Net::SMTPS&gt;&gt;&gt;       IO::Handle&#40;1.35&#41;
&gt; Net::SMTPS&gt;&gt;&gt;         Exporter&#40;5.71&#41;
&gt; Net::SMTPS&gt;&gt;&gt;   Net::SMTP&#40;3.02&#41;
&gt; Net::SMTPS&gt;&gt;&gt;     Net::Cmd&#40;3.02&#41;
&gt; Net::SMTPS&gt;&gt;&gt;     IO::Socket::IP&#40;0.32&#41;
&gt; readline&#40;&#41; on unopened filehandle GEN0 at
&gt; C:/itzik/Strawberry/perl/lib/Net/Cmd.p
&gt; m line 371.
&gt; Can&#39;t call method &#34;message&#34; on an undefined value at
&gt; C:/itzik/Strawberry/perl/si
&gt; te/lib/Email/Send/SMTP/Gmail.pm line 91.
&gt; 
&gt; 
&gt; 
&gt; תודה
&gt; 
&gt; המשך יום נעים
&gt; 
&gt; ---
&gt; itzik yarhi
&gt; 
&gt; On Sun, Nov 9, 2014 at 11:45 AM, Juan Jose San Martin via RT &lt;
&gt; bug-Email-Send-SMTP-Gmail@rt.cpan.org&gt; wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=100214">https://rt.cpan.org/Ticket/Display.html?id=100214</a></span> &gt;
&gt; &gt;
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; I&#39;m testing with the latest SMTP.pm version &#40;2.31&#41; without errors.
&gt; &gt; Please, try the next simple code and let me know.
&gt; &gt;
&gt; &gt; ###########
&gt; &gt; use strict;
&gt; &gt; use warnings;
&gt; &gt;
&gt; &gt; my &#40;$email,$error&#41; =
&gt; &gt; Email::Send::SMTP::Gmail-&gt;new&#40;-debug=&gt;1,verbose=&gt;1,-smtp=&gt;&#39;smtp.gmail.com
&gt; &gt; &#39;,-login=&gt;&#39;LOGIN&#39;,-pass=&gt;&#39;PASS&#39;&#41;;
&gt; &gt;
&gt; &gt; if&#40;$email==-1&#41;{
&gt; &gt;  print &#34;Error: $error\n&#34;;
&gt; &gt;  exit;
&gt; &gt; }
&gt; &gt; else{
&gt; &gt;  print &#34;\n\n\tBANNER: $email-&gt;banner&#40;&#41;\n\n&#34;;
&gt; &gt; }
&gt; &gt;
&gt; &gt; ###############
&gt; &gt;
&gt; &gt; On Sat Nov 08 18:12:19 2014, itzik.yarhi@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; Hi.
&gt; &gt; &gt;
&gt; &gt; &gt; I cannot run  Email::Send::SMTP::Gmail  as I get the following error:
&gt; &gt; &gt; Can&#39;t call method &#34;message&#34; on an undefined value at
&gt; &gt; &gt; C:/itzik/Strawberry/perl/si
&gt; &gt; &gt; te/lib/Email/Send/SMTP/Gmail.pm line 91.
&gt; &gt; &gt;
&gt; &gt; &gt; Please advice
&gt; &gt; &gt;
&gt; &gt; &gt; I am using fresh installation of Strawberry Perl 5.20.
&gt; &gt; &gt; I used its CPAN tool to retrieve all packages needed.
&gt; &gt; &gt; It seems that  Net::SMTP  was modified, obsoleting &#39;message&#39; method.
&gt; &gt; &gt;
&gt; &gt; &gt; Please help
&gt; &gt; &gt;
&gt; &gt; &gt; BTW, the example code fails to run on restricted with the var &#39;$email&#39;
&gt; &gt; &gt; not-exist.
&gt; &gt; &gt; &#40;It should be $mail var everywhere at the example&#41;
&gt; &gt; &gt;
&gt; &gt; &gt; Thanks a lot
&gt; &gt; &gt;
&gt; &gt; &gt; ---
&gt; &gt; &gt; itzik yarhi
</div>&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1431374" href="/Public/Bug/Display.html?id=100214#txn-1431374">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;10&nbsp;03:13:25&nbsp;2014</span>
    <span class="description">PECO [...] cpan.org -  Fixed in 0.87 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1431781" href="/Public/Bug/Display.html?id=100214#txn-1431781">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;11&nbsp;04:40:12&nbsp;2014</span>
    <span class="description">drichards [...] jetbadger.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [rt.cpan.org #100214]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 11 Nov 2014 09:39:41 -0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Email-Send-SMTP-Gmail [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;David Richards&#34; &lt;drichards [...] jetbadger.co.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1431781/760982/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/760982">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,
I am using v0.87 and this bug is still there. It happens when connection to
SMTPS fails.
The problem is in the part of Gmail.pm below, shown with my changes.
In the original code, line 90 is only reached if &#34;not $self-&gt;{sender}&#34;, line
90 then tries to use $self-&gt;{sender} as an object with a method &#34;message&#40;&#41;&#34;.

85   else{
86     my $sec=undef;
87     if&#40;$layer eq &#39;tls&#39;&#41;{$sec=&#39;starttls&#39;;}
88     elsif&#40;$layer eq &#39;ssl&#39;&#41;{$sec=&#39;ssl&#39;;}
89     if &#40;not $self-&gt;{sender} = Net::SMTPS-&gt;new&#40;$smtp, Port =&gt;$port,
doSSL=&gt;$sec, Debug=&gt;$debug, SSL_verify_mode=&gt;$ssl_mode,
SSL_ca_file=&gt;$ssl_ca,SSL_ca_path=&gt;$ssl_path, Timeout=&gt;$timeout&#41;&#41;{
90 #      my $error_string=$self-&gt;{sender}-&gt;message&#40;&#41;;
91 #      chomp $error_string;
92       $self-&gt;{error}=$!;
93       print &#34;Could not connect to SMTP server\n&#34; if $debug;
94       return $self;
95       #return -1;
96     }
97   }

My application code then checks the object returned by the new&#40;&#41; method, so

    # Connect to the SMTP &#40;SSL&#41; server
    my $mail = Email::Send::SMTP::Gmail-&gt;new&#40;
        -smtp=&gt;$smtpserver,
        -login=&gt;$smtpuser,
        -pass=&gt;$smtppassword,
        -from=&gt;$from,
        -ssl_verify_mode =&gt; Net::SSLeay::VERIFY_NONE&#40;&#41;,        
        -debug =&gt; 1 &#41;;

    unless&#40; ref&#40;$mail&#41; &#41;
    {
        print &#34;SMTP Connection error: $mail\n&#34;;
    }
    else
    {
        ...

I hope that this is helpful.
Dave Richards
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1431800" href="/Public/Bug/Display.html?id=100214#txn-1431800">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;11&nbsp;05:48:33&nbsp;2014</span>
    <span class="description">PECO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1431800/760991/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/760991">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Catched. Thank you David.

New release 0.88 recently uploaded to CPAN.

Peco

On Tue Nov 11 04:40:12 2014, drichards@jetbadger.co.uk wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; I am using v0.87 and this bug is still there. It happens when connection to
&gt; SMTPS fails.
&gt; The problem is in the part of Gmail.pm below, shown with my changes.
&gt; In the original code, line 90 is only reached if &#34;not $self-&gt;{sender}&#34;, line
&gt; 90 then tries to use $self-&gt;{sender} as an object with a method &#34;message&#40;&#41;&#34;.
&gt; 
&gt; 85   else{
&gt; 86     my $sec=undef;
&gt; 87     if&#40;$layer eq &#39;tls&#39;&#41;{$sec=&#39;starttls&#39;;}
&gt; 88     elsif&#40;$layer eq &#39;ssl&#39;&#41;{$sec=&#39;ssl&#39;;}
&gt; 89     if &#40;not $self-&gt;{sender} = Net::SMTPS-&gt;new&#40;$smtp, Port =&gt;$port,
&gt; doSSL=&gt;$sec, Debug=&gt;$debug, SSL_verify_mode=&gt;$ssl_mode,
&gt; SSL_ca_file=&gt;$ssl_ca,SSL_ca_path=&gt;$ssl_path, Timeout=&gt;$timeout&#41;&#41;{
&gt; 90 #      my $error_string=$self-&gt;{sender}-&gt;message&#40;&#41;;
&gt; 91 #      chomp $error_string;
&gt; 92       $self-&gt;{error}=$!;
&gt; 93       print &#34;Could not connect to SMTP server\n&#34; if $debug;
&gt; 94       return $self;
&gt; 95       #return -1;
&gt; 96     }
&gt; 97   }
&gt; 
&gt; My application code then checks the object returned by the new&#40;&#41; method, so
&gt; 
&gt;     # Connect to the SMTP &#40;SSL&#41; server
&gt;     my $mail = Email::Send::SMTP::Gmail-&gt;new&#40;
&gt;         -smtp=&gt;$smtpserver,
&gt;         -login=&gt;$smtpuser,
&gt;         -pass=&gt;$smtppassword,
&gt;         -from=&gt;$from,
&gt;         -ssl_verify_mode =&gt; Net::SSLeay::VERIFY_NONE&#40;&#41;,        
&gt;         -debug =&gt; 1 &#41;;
&gt; 
&gt;     unless&#40; ref&#40;$mail&#41; &#41;
&gt;     {
&gt;         print &#34;SMTP Connection error: $mail\n&#34;;
&gt;     }
&gt;     else
&gt;     {
&gt;       ...
&gt; 
&gt; I hope that this is helpful.
&gt; Dave Richards
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1433067" href="/Public/Bug/Display.html?id=100214#txn-1433067">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;14&nbsp;14:07:03&nbsp;2014</span>
    <span class="description">itzik.yarhi [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #100214] bug: fails to execute with undefined method &#34;message&#34;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 14 Nov 2014 21:06:21 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Email-Send-SMTP-Gmail [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Itzik Yarhi &lt;itzik.yarhi [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1433067/761786/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761786">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear Juan.

I finally solved the issue.

I modified   SMTPS.pm  file, removing  INET6 support:

#eval {
#    require IO::Socket::INET6
#    and unshift @ISA, &#39;IO::Socket::INET6&#39;;
#} or do {
    require IO::Socket::INET
    and unshift @ISA, &#39;IO::Socket::INET&#39;;
#};

It works for me now.

Muchisimas gracias

Please, continue your great work.

itzik




תודה

המשך יום נעים

---
itzik yarhi

On Tue, Nov 11, 2014 at 12:48 PM, Juan Jose San Martin via RT &lt;
bug-Email-Send-SMTP-Gmail@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=100214">https://rt.cpan.org/Ticket/Display.html?id=100214</a></span> &gt;
&gt;
&gt; Catched. Thank you David.
&gt;
&gt; New release 0.88 recently uploaded to CPAN.
&gt;
&gt; Peco
&gt;
&gt; On Tue Nov 11 04:40:12 2014, drichards@jetbadger.co.uk wrote:
<div class="message-stanza open">&gt; &gt; Hi,
&gt; &gt; I am using v0.87 and this bug is still there. It happens when connection
</div>&gt; to
<div class="message-stanza open">&gt; &gt; SMTPS fails.
&gt; &gt; The problem is in the part of Gmail.pm below, shown with my changes.
&gt; &gt; In the original code, line 90 is only reached if &#34;not $self-&gt;{sender}&#34;,
</div>&gt; line
<div class="message-stanza open">&gt; &gt; 90 then tries to use $self-&gt;{sender} as an object with a method
</div>&gt; &#34;message&#40;&#41;&#34;.
<div class="message-stanza open">&gt; &gt;
&gt; &gt; 85   else{
&gt; &gt; 86     my $sec=undef;
&gt; &gt; 87     if&#40;$layer eq &#39;tls&#39;&#41;{$sec=&#39;starttls&#39;;}
&gt; &gt; 88     elsif&#40;$layer eq &#39;ssl&#39;&#41;{$sec=&#39;ssl&#39;;}
&gt; &gt; 89     if &#40;not $self-&gt;{sender} = Net::SMTPS-&gt;new&#40;$smtp, Port =&gt;$port,
&gt; &gt; doSSL=&gt;$sec, Debug=&gt;$debug, SSL_verify_mode=&gt;$ssl_mode,
&gt; &gt; SSL_ca_file=&gt;$ssl_ca,SSL_ca_path=&gt;$ssl_path, Timeout=&gt;$timeout&#41;&#41;{
&gt; &gt; 90 #      my $error_string=$self-&gt;{sender}-&gt;message&#40;&#41;;
&gt; &gt; 91 #      chomp $error_string;
&gt; &gt; 92       $self-&gt;{error}=$!;
&gt; &gt; 93       print &#34;Could not connect to SMTP server\n&#34; if $debug;
&gt; &gt; 94       return $self;
&gt; &gt; 95       #return -1;
&gt; &gt; 96     }
&gt; &gt; 97   }
&gt; &gt;
&gt; &gt; My application code then checks the object returned by the new&#40;&#41; method,
</div>&gt; so
<div class="message-stanza open">&gt; &gt;
&gt; &gt;     # Connect to the SMTP &#40;SSL&#41; server
&gt; &gt;     my $mail = Email::Send::SMTP::Gmail-&gt;new&#40;
&gt; &gt;         -smtp=&gt;$smtpserver,
&gt; &gt;         -login=&gt;$smtpuser,
&gt; &gt;         -pass=&gt;$smtppassword,
&gt; &gt;         -from=&gt;$from,
&gt; &gt;         -ssl_verify_mode =&gt; Net::SSLeay::VERIFY_NONE&#40;&#41;,
&gt; &gt;         -debug =&gt; 1 &#41;;
&gt; &gt;
&gt; &gt;     unless&#40; ref&#40;$mail&#41; &#41;
&gt; &gt;     {
&gt; &gt;         print &#34;SMTP Connection error: $mail\n&#34;;
&gt; &gt;     }
&gt; &gt;     else
&gt; &gt;     {
&gt; &gt;       ...
&gt; &gt;
&gt; &gt; I hope that this is helpful.
&gt; &gt; Dave Richards
&gt; &gt;
&gt; &gt;
</div>&gt;
&gt;
&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1433067/761787/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761787">with headers</a>
<br />
<span class="downloadcontenttype">text/html 3.4k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1461011" href="/Public/Bug/Display.html?id=100214#txn-1461011">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;06&nbsp;08:05:21&nbsp;2015</span>
    <span class="description">PECO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1461011/777487/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/777487">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Nov 14 14:07:03 2014, itzik.yarhi@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Dear Juan.
&gt; 
&gt; I finally solved the issue.
&gt; 
&gt; I modified   SMTPS.pm  file, removing  INET6 support:
&gt; 
&gt; #eval {
&gt; #    require IO::Socket::INET6
&gt; #    and unshift @ISA, &#39;IO::Socket::INET6&#39;;
&gt; #} or do {
&gt;     require IO::Socket::INET
&gt;     and unshift @ISA, &#39;IO::Socket::INET&#39;;
&gt; #};
&gt; 
&gt; It works for me now.
&gt; 
&gt; Muchisimas gracias
&gt; 
&gt; Please, continue your great work.
&gt; 
&gt; itzik
&gt; 
&gt; 
&gt; 
&gt; 
&gt; תודה
&gt; 
&gt; המשך יום נעים
&gt; 
&gt; ---
&gt; itzik yarhi
&gt; 
&gt; On Tue, Nov 11, 2014 at 12:48 PM, Juan Jose San Martin via RT &lt;
&gt; bug-Email-Send-SMTP-Gmail@rt.cpan.org&gt; wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=100214">https://rt.cpan.org/Ticket/Display.html?id=100214</a></span> &gt;
&gt; &gt;
&gt; &gt; Catched. Thank you David.
&gt; &gt;
&gt; &gt; New release 0.88 recently uploaded to CPAN.
&gt; &gt;
&gt; &gt; Peco
&gt; &gt;
&gt; &gt; On Tue Nov 11 04:40:12 2014, drichards@jetbadger.co.uk wrote:
<div class="message-stanza open">&gt; &gt; &gt; Hi,
&gt; &gt; &gt; I am using v0.87 and this bug is still there. It happens when connection
</div>&gt; &gt; to
<div class="message-stanza open">&gt; &gt; &gt; SMTPS fails.
&gt; &gt; &gt; The problem is in the part of Gmail.pm below, shown with my changes.
&gt; &gt; &gt; In the original code, line 90 is only reached if &#34;not $self-&gt;{sender}&#34;,
</div>&gt; &gt; line
<div class="message-stanza open">&gt; &gt; &gt; 90 then tries to use $self-&gt;{sender} as an object with a method
</div>&gt; &gt; &#34;message&#40;&#41;&#34;.
<div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt; 85   else{
&gt; &gt; &gt; 86     my $sec=undef;
&gt; &gt; &gt; 87     if&#40;$layer eq &#39;tls&#39;&#41;{$sec=&#39;starttls&#39;;}
&gt; &gt; &gt; 88     elsif&#40;$layer eq &#39;ssl&#39;&#41;{$sec=&#39;ssl&#39;;}
&gt; &gt; &gt; 89     if &#40;not $self-&gt;{sender} = Net::SMTPS-&gt;new&#40;$smtp, Port =&gt;$port,
&gt; &gt; &gt; doSSL=&gt;$sec, Debug=&gt;$debug, SSL_verify_mode=&gt;$ssl_mode,
&gt; &gt; &gt; SSL_ca_file=&gt;$ssl_ca,SSL_ca_path=&gt;$ssl_path, Timeout=&gt;$timeout&#41;&#41;{
&gt; &gt; &gt; 90 #      my $error_string=$self-&gt;{sender}-&gt;message&#40;&#41;;
&gt; &gt; &gt; 91 #      chomp $error_string;
&gt; &gt; &gt; 92       $self-&gt;{error}=$!;
&gt; &gt; &gt; 93       print &#34;Could not connect to SMTP server\n&#34; if $debug;
&gt; &gt; &gt; 94       return $self;
&gt; &gt; &gt; 95       #return -1;
&gt; &gt; &gt; 96     }
&gt; &gt; &gt; 97   }
&gt; &gt; &gt;
&gt; &gt; &gt; My application code then checks the object returned by the new&#40;&#41; method,
</div>&gt; &gt; so
<div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt;     # Connect to the SMTP &#40;SSL&#41; server
&gt; &gt; &gt;     my $mail = Email::Send::SMTP::Gmail-&gt;new&#40;
&gt; &gt; &gt;         -smtp=&gt;$smtpserver,
&gt; &gt; &gt;         -login=&gt;$smtpuser,
&gt; &gt; &gt;         -pass=&gt;$smtppassword,
&gt; &gt; &gt;         -from=&gt;$from,
&gt; &gt; &gt;         -ssl_verify_mode =&gt; Net::SSLeay::VERIFY_NONE&#40;&#41;,
&gt; &gt; &gt;         -debug =&gt; 1 &#41;;
&gt; &gt; &gt;
&gt; &gt; &gt;     unless&#40; ref&#40;$mail&#41; &#41;
&gt; &gt; &gt;     {
&gt; &gt; &gt;         print &#34;SMTP Connection error: $mail\n&#34;;
&gt; &gt; &gt;     }
&gt; &gt; &gt;     else
&gt; &gt; &gt;     {
&gt; &gt; &gt;       ...
&gt; &gt; &gt;
&gt; &gt; &gt; I hope that this is helpful.
&gt; &gt; &gt; Dave Richards
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1461013" href="/Public/Bug/Display.html?id=100214#txn-1461013">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;06&nbsp;08:05:24&nbsp;2015</span>
    <span class="description">PECO [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.621576</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
