<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #37880 for Business-ISBN: as_string incorrectly format publisher code</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #37880 for Business-ISBN: as_string incorrectly format publisher code</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Business-ISBN/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Business-ISBN/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Business-ISBN/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Business-ISBN/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/briandfoy/business-isbn/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Business-ISBN">Business-ISBN CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">37880</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Business-ISBN/Active/">Business-ISBN</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jan [...] tomasek.cz

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-4584-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.03    </td>
  </tr>
  <tr id="CF-4585-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;23&nbsp;09:30:20&nbsp;2008</span>
    <span class="description">jan [...] tomasek.cz -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> as_string incorrectly format publisher code</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I discovered that version 2.03 with Bussiness::ISBN::Data version 1.17
incorrectly format publisher code:

Correct ISBN         Wrong ISBN printed by as_string
=================    =========================
978-0-88986-695-9 &lt;&gt; 978-0-8898-6695-9
978-3-86541-216-4 &lt;&gt; 978-3-8654-1216-4
978-80-7043-554-0 &lt;&gt; 978-80-704-3554-0
978-80-7355-077-6 &lt;&gt; 978-80-735-5077-6
978-80-8070-735-4 &lt;&gt; 978-80-807-0735-4
978-80-86583-12-9 &lt;&gt; 978-80-865-8312-9
978-80-86742-00-7 &lt;&gt; 978-80-867-4200-7
978-80-969243-7-0 &lt;&gt; 978-80-969-2437-0
978-960-6766-23-7 &lt;&gt; 978-960-67-6623-7
978-973-667-260-6 &lt;&gt; 978-973-66-7260-6
978-973-739-423-1 &lt;&gt; 978-973-73-9423-1

Example test script is attached.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> test-isbn.pl</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl -w

use strict;
use Business::ISBN;

my @isbn = &#40;
	 &#39;978-0-88986-695-9&#39;,
	 &#39;978-3-86541-216-4&#39;,
	 &#39;978-80-7043-554-0&#39;,
	 &#39;978-80-7355-077-6&#39;,
	 &#39;978-80-8070-735-4&#39;,
	 &#39;978-80-86583-12-9&#39;,
	 &#39;978-80-86742-00-7&#39;,
	 &#39;978-80-969243-7-0&#39;,
	 &#39;978-960-6766-23-7&#39;,
	 &#39;978-973-667-260-6&#39;,
	 &#39;978-973-739-423-1&#39;,
	 &#41;;

foreach my $isbn &#40;@isbn&#41; {
  my $isbn_object = Business::ISBN-&gt;new&#40;$isbn&#41;;

  if &#40;$isbn ne $isbn_object-&gt;as_string&#41; {
    print &#34;$isbn &lt;&gt; &#34;.$isbn_object-&gt;as_string.&#34;\n&#34;;
  };
};
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;23&nbsp;14:33:55&nbsp;2008</span>
    <span class="description">bdfoy [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jul 23 09:30:20 2008, semik wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I discovered that version 2.03 with Bussiness::ISBN::Data version 1.17
&gt; incorrectly format publisher code:
</div>
The publisher codes come from the International ISBN agency &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.isbn">http://www.isbn</a></span>-
international.org/converter/ranges.htm&#41;, and according to the stuff they&#39;ve posted the code is 
doing it right.

Where did you get the example numbers? Are they from published books? Can you tell me 
which publishers belong to those books?

Thanks,
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;23&nbsp;14:34:02&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;24&nbsp;06:44:05&nbsp;2008</span>
    <span class="description">jan [...] tomasek.cz -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jan [...] tomasek.cz</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dne st 23.čec.2008 14:33:55, BDFOY napsal&#40;a&#41;:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The publisher codes come from the International ISBN agency
&gt; &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.isbn-international.org/converter/ranges.htm&#41;">http://www.isbn-international.org/converter/ranges.htm&#41;</a></span>, and
&gt; according to the stuff they&#39;ve posted the code is doing it right.
&gt; 
&gt; Where did you get the example numbers? Are they from published books?
&gt; Can you tell me which publishers belong to those books?
</div>
I work for CESNET we are Czech Academic NREN and as academic
organization we are responsible for evidence of all publications
published by our authors. Those example numbers are from our internal
database of publications - numbers which are beening misspelled by the
as_string&#40;&#41; function. I got a few examples to show that publications
are really real one, see them:

<span class="clickylink"><a target="new" rel="nofollow" href="http://staff.cesnet.cz/~semik/978-0-9789217-2-9_CD.jpg">http://staff.cesnet.cz/~semik/978-0-9789217-2-9_CD.jpg</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://staff.cesnet.cz/~semik/978-0-9789217-2-9_IEEE_Explore.jpg">http://staff.cesnet.cz/~semik/978-0-9789217-2-9_IEEE_Explore.jpg</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://staff.cesnet.cz/~semik/978-960-6766-23-7.jpeg">http://staff.cesnet.cz/~semik/978-960-6766-23-7.jpeg</a></span>

Those examples above are from China and from Spain.

Numbers 978-80-* belongs to the Czech Republic or the Slovak Republic
&#40;we were formerly one country until 1992&#41;.

Czech publishers can be searched in the Databases of the National
Library CR:

<span class="clickylink"><a target="new" rel="nofollow" href="http://sigma.nkp.cz/F/?func=file&#38;file_name=find-a&#38;local_base=nak">http://sigma.nkp.cz/F/?func=file&#38;file_name=find-a&#38;local_base=nak</a></span> &#40;I&#39;m
sorry Czech version only, English somehow doesn&#39;t work for me. Fill
&#34;Identifikátor&#34;.&#41;.

978-80-7043   Západočeská univerzita  
<span class="clickylink"><a target="new" rel="nofollow" href="http://sigma.nkp.cz/F/34GKBP1RVMASS4LB8HM4PBVN6GPTE3SLBCG2GL184HQKY1GHI3-01689?func=full-set-set&#38;set_number=025374&#38;set_entry=000001&#38;format=033">http://sigma.nkp.cz/F/34GKBP1RVMASS4LB8HM4PBVN6GPTE3SLBCG2GL184HQKY1GHI3-01689?func=full-set-set&#38;set_number=025374&#38;set_entry=000001&#38;format=033</a></span>

978-80-7355   Novotný Zdeněk ing. CSc. Brno
<span class="clickylink"><a target="new" rel="nofollow" href="http://sigma.nkp.cz/F/2V8BSTMKV73PC1LVICD1RFNSGIPG6B12CNQMHQQ8U3GUPVY73H-00026?func=full-set-set&#38;set_number=025641&#38;set_entry=000001&#38;format=033">http://sigma.nkp.cz/F/2V8BSTMKV73PC1LVICD1RFNSGIPG6B12CNQMHQQ8U3GUPVY73H-00026?func=full-set-set&#38;set_number=025641&#38;set_entry=000001&#38;format=033</a></span>

978-80-86583  Česká společnost uživatelů otevřených systémů EurOpen.CZ
<span class="clickylink"><a target="new" rel="nofollow" href="http://sigma.nkp.cz/F/GD4HJVFAV9HHBPKCKFXMK3LPNL815SE64I3T6L2Y8T9NXEA9VE-02941?func=full-set-set&#38;set_number=025820&#38;set_entry=000001&#38;format=033">http://sigma.nkp.cz/F/GD4HJVFAV9HHBPKCKFXMK3LPNL815SE64I3T6L2Y8T9NXEA9VE-02941?func=full-set-set&#38;set_number=025820&#38;set_entry=000001&#38;format=033</a></span>

978-80-86742  Zeithamlová Milena ing. - Agentura Action M
<span class="clickylink"><a target="new" rel="nofollow" href="http://sigma.nkp.cz/F/GD4HJVFAV9HHBPKCKFXMK3LPNL815SE64I3T6L2Y8T9NXEA9VE-02055?func=full-set-set&#38;set_number=025888&#38;set_entry=000001&#38;format=033">http://sigma.nkp.cz/F/GD4HJVFAV9HHBPKCKFXMK3LPNL815SE64I3T6L2Y8T9NXEA9VE-02055?func=full-set-set&#38;set_number=025888&#38;set_entry=000001&#38;format=033</a></span>

Following two codes belong to some Slovak publishers. I do not known
how to get their names.

978-80-8070

978-80-969243


If you need any more info I will try to help. Just be place patient,
next week I&#39;m on holidays.

Jan Tomasek
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;24&nbsp;12:40:12&nbsp;2008</span>
    <span class="description">bdfoy [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Okay, I see that the books have those ISBNs, but I really need some sort of documentation 
from one of the ISBN agencies that show that those are valid ranges. I know from my 
experience working with publishers that sometimes the ISBNs they work with are wrong, so 
seeing them put it on a book doesn&#39;t mean it is valid.

I have to stick with the legal ranges assigned by the International ISBN Agency, so that&#39;s the 
sort of documentation I need. I can see on <span class="clickylink"><a target="new" rel="nofollow" href="http://www.nkp.cz/files/isbn_prirucka.pdf">http://www.nkp.cz/files/isbn_prirucka.pdf</a></span> that 
the group 80 ranges are different from those on the International ISBN Agency website, but it 
also looks like that PDF has an error in the last range in table 2 in section 5.6. Since it&#39;s in 
Czech, I&#39;ll have to do a bit of work to figure out what to do with the ranges in Tables 1 and 2 
from that section.

If you have official documentation of ranges for the other national agencies, that would be 
helpful.

In the mean time, you can locally adjust the ranges in your version of Business::ISBN::Data to 
report what you need.
Thanks,
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;26&nbsp;08:57:14&nbsp;2008</span>
    <span class="description">bdfoy [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;20&nbsp;20:00:11&nbsp;2011</span>
    <span class="description">bdfoy [...] cpan.org -  Status changed from &#39;stalled&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
