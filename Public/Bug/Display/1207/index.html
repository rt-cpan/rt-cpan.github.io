<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #1207 for Imager: Memory Fault with .40pre2 on HP/UX with wide TIFFs</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #1207 for Imager: Memory Fault with .40pre2 on HP/UX with wide TIFFs</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Imager/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Imager/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Imager/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Imager/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Imager">Imager CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">1207</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Imager/Active/">Imager</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
glen_stewart [...] associate.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-16790-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.40    </td>
  </tr>
  <tr id="CF-16791-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;28&nbsp;15:50:42&nbsp;2002</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Memory Fault with .40pre2 on HP/UX with wide TIFFs</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m trying to crop a wide TIFF image generated from a HPGL image using hp2xx.  The image is too wide for us, so we plan
to split it into two images using crop.  This is a J16 size sheet.  We have J24 and J32 that will be split into 3 and 4 sheets
respectively - we hope &#40;-:

Am I misusing Imager, or is this a bug?  Appreciate your help.

Glen



Using Perl 5.61.  The script I&#39;m running is:
---
#!/opt/perl5/bin/perl -w
use strict;
use Imager;
  Imager::init&#40;log=&gt;&#34;logfile.txt&#34;&#41;;
  die &#34;Usage: crop.pl filename\n&#34; if !-f $ARGV[0];
  my $file = shift;  
  my $img=Imager-&gt;new&#40;&#41;;
  $img-&gt;read&#40;file=&gt;$file&#41; or die &#34;error on \&#34;$file\&#34;: &#34;.$img-&gt;{ERRSTR}.&#34;\n&#34;;
  my $newimg = $img-&gt;crop&#40;width=&gt;50, height=&gt;50&#41;;
  $newimg-&gt;write&#40;file=&gt;&#34;1_$file&#34;&#41;;
---

The logfile output is:
---
[2002/06/28 15:41:11]      log.c:35      0: Imager - log started &#40;level = 1&#41;
[2002/06/28 15:41:11]  Imager.xs:125     1: Imager 0.40pre2 starting
[2002/06/28 15:41:11]  iolayer.c:980     1: io_new_fd&#40;fd 4&#41;
[2002/06/28 15:41:11]       io.c:236     1: mymalloc&#40;size 60&#41; -&gt; 401c0cc0
[2002/06/28 15:41:11]  iolayer.c:992     1: &#40;401c0cc0&#41; &lt;- io_new_fd
[2002/06/28 15:41:11]  iolayer.c:828     1: io_glue_commit_types&#40;ig 401c0cc0&#41;
[2002/06/28 15:41:11]  iolayer.c:829     1: io_glue_commit_types: source type 0 &#40;FDSEEK&#41;
[2002/06/28 15:41:11]     tiff.c:327     1: i_readtiff_wiol&#40;ig 401c0cc0, length -1&#41;
[2002/06/28 15:41:11]     tiff.c:118     1: i_readtiff_wiol: width=26408, height=10208, channels=1
[2002/06/28 15:41:11]     tiff.c:119     1: i_readtiff_wiol: not tiled
[2002/06/28 15:41:11]     tiff.c:120     1: i_readtiff_wiol: not byte swapped
[2002/06/28 15:41:11]    image.c:352     1: i_img_empty_ch&#40;*im 00000000, x 26408, y 10208, ch 1&#41;
[2002/06/28 15:41:11]       io.c:236     1: mymalloc&#40;size 128&#41; -&gt; 40015a30
[2002/06/28 15:41:11]       io.c:236     1: mymalloc&#40;size 269572864&#41; -&gt; 401c1808
[2002/06/28 15:41:12]    image.c:369     1: &#40;40015a30&#41; &lt;- i_img_empty_ch
[2002/06/28 15:41:12]       io.c:236     1: mymalloc&#40;size 200&#41; -&gt; 400a5840
[2002/06/28 15:41:12]       io.c:236     1: mymalloc&#40;size 20&#41; -&gt; 401bec28
[2002/06/28 15:41:12]       io.c:236     1: mymalloc&#40;size 7&#41; -&gt; 40122830
[2002/06/28 15:41:12]       io.c:236     1: mymalloc&#40;size 4&#41; -&gt; 400686ac
[2002/06/28 15:41:12]       io.c:236     1: mymalloc&#40;size 7&#41; -&gt; 40122828
[2002/06/28 15:41:12]       io.c:236     1: mymalloc&#40;size 4&#41; -&gt; 400686a8
[2002/06/28 15:41:12]     tiff.c:264     1: i_readtiff_wiol: rowsperstrip=-888414101
---
</div></div>

<div class="messagebody">
<img alt="j16.tiff" title="j16.tiff" src="/Ticket/Attachment/71211/4347/" /></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;29&nbsp;11:45:55&nbsp;2002</span>
    <span class="description">addi [...] umich.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Jun 2002 11:50:46 -0400 &#40;EDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Arnar Mar Hrafnkelsson &lt;addi [...] umich.edu&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Guest via RT &lt;bug-Imager [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [cpan #1207] Memory Fault with .40pre2 on HP/UX with wide TIFFs</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">

Hey Glen, 

I generated an image of that size and ran imager on it and it seemed to
work quite ok...
My guess is that the problem is either with the libtiff on the machine or
the thing that generates the images.  Can you run tiffinfo on the file in
question and send me the output?

-- Arnar


On Fri, 28 Jun 2002, Guest via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 
&gt; This message about Imager was sent to you by guest via rt.cpan.org
&gt; 
&gt; Full context and any attached attachments can be found at:
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=1207">https://rt.cpan.org/Ticket/Display.html?id=1207</a></span> &gt;
&gt; 
&gt; I&#39;m trying to crop a wide TIFF image generated from a HPGL image using hp2xx.  The image is too wide for us, so we plan
&gt; to split it into two images using crop.  This is a J16 size sheet.  We have J24 and J32 that will be split into 3 and 4 sheets
&gt; respectively - we hope &#40;-:
&gt; 
&gt; Am I misusing Imager, or is this a bug?  Appreciate your help.
&gt; 
&gt; Glen
&gt; 
&gt; 
&gt; 
&gt; Using Perl 5.61.  The script I&#39;m running is:
&gt; ---
&gt; #!/opt/perl5/bin/perl -w
&gt; use strict;
&gt; use Imager;
&gt;   Imager::init&#40;log=&gt;&#34;logfile.txt&#34;&#41;;
&gt;   die &#34;Usage: crop.pl filename\n&#34; if !-f $ARGV[0];
&gt;   my $file = shift;  
&gt;   my $img=Imager-&gt;new&#40;&#41;;
&gt;   $img-&gt;read&#40;file=&gt;$file&#41; or die &#34;error on \&#34;$file\&#34;: &#34;.$img-&gt;{ERRSTR}.&#34;\n&#34;;
&gt;   my $newimg = $img-&gt;crop&#40;width=&gt;50, height=&gt;50&#41;;
&gt;   $newimg-&gt;write&#40;file=&gt;&#34;1_$file&#34;&#41;;
&gt; ---
&gt; 
&gt; The logfile output is:
&gt; ---
&gt; [2002/06/28 15:41:11]      log.c:35      0: Imager - log started &#40;level = 1&#41;
&gt; [2002/06/28 15:41:11]  Imager.xs:125     1: Imager 0.40pre2 starting
&gt; [2002/06/28 15:41:11]  iolayer.c:980     1: io_new_fd&#40;fd 4&#41;
&gt; [2002/06/28 15:41:11]       io.c:236     1: mymalloc&#40;size 60&#41; -&gt; 401c0cc0
&gt; [2002/06/28 15:41:11]  iolayer.c:992     1: &#40;401c0cc0&#41; &lt;- io_new_fd
&gt; [2002/06/28 15:41:11]  iolayer.c:828     1: io_glue_commit_types&#40;ig 401c0cc0&#41;
&gt; [2002/06/28 15:41:11]  iolayer.c:829     1: io_glue_commit_types: source type 0 &#40;FDSEEK&#41;
&gt; [2002/06/28 15:41:11]     tiff.c:327     1: i_readtiff_wiol&#40;ig 401c0cc0, length -1&#41;
&gt; [2002/06/28 15:41:11]     tiff.c:118     1: i_readtiff_wiol: width=26408, height=10208, channels=1
&gt; [2002/06/28 15:41:11]     tiff.c:119     1: i_readtiff_wiol: not tiled
&gt; [2002/06/28 15:41:11]     tiff.c:120     1: i_readtiff_wiol: not byte swapped
&gt; [2002/06/28 15:41:11]    image.c:352     1: i_img_empty_ch&#40;*im 00000000, x 26408, y 10208, ch 1&#41;
&gt; [2002/06/28 15:41:11]       io.c:236     1: mymalloc&#40;size 128&#41; -&gt; 40015a30
&gt; [2002/06/28 15:41:11]       io.c:236     1: mymalloc&#40;size 269572864&#41; -&gt; 401c1808
&gt; [2002/06/28 15:41:12]    image.c:369     1: &#40;40015a30&#41; &lt;- i_img_empty_ch
&gt; [2002/06/28 15:41:12]       io.c:236     1: mymalloc&#40;size 200&#41; -&gt; 400a5840
&gt; [2002/06/28 15:41:12]       io.c:236     1: mymalloc&#40;size 20&#41; -&gt; 401bec28
&gt; [2002/06/28 15:41:12]       io.c:236     1: mymalloc&#40;size 7&#41; -&gt; 40122830
&gt; [2002/06/28 15:41:12]       io.c:236     1: mymalloc&#40;size 4&#41; -&gt; 400686ac
&gt; [2002/06/28 15:41:12]       io.c:236     1: mymalloc&#40;size 7&#41; -&gt; 40122828
&gt; [2002/06/28 15:41:12]       io.c:236     1: mymalloc&#40;size 4&#41; -&gt; 400686a8
&gt; [2002/06/28 15:41:12]     tiff.c:264     1: i_readtiff_wiol: rowsperstrip=-888414101
&gt; ---
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;10&nbsp;08:16:48&nbsp;2002</span>
    <span class="description">ADDI [...] cpan.org -  Status changed from &#39;new&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
