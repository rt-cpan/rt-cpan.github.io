<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #130290 for Date-Converter: Documentation for BC dates</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #130290 for Date-Converter: Documentation for BC dates</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Date-Converter/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Date-Converter/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Date-Converter/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Date-Converter/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Date-Converter">Date-Converter CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">130290</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">new</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Date-Converter/Active/">Date-Converter</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
J2N-FORGET [...] orange.fr

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Unimportant    </td>
  </tr>
  <tr id="CF-225984-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-225985-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




comp-p5<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1859768/998833/comp-p5">
Tue Aug 13 01:20:17 2019 (6.1k) by J2N-FORGET [...] orange.fr
</a>
</font></li>
</ul>


comp-p5-result<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1859768/998834/comp-p5-result">
Tue Aug 13 01:20:17 2019 (5.7k) by J2N-FORGET [...] orange.fr
</a>
</font></li>
</ul>


cvt-he-gr.cl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1859768/998835/cvt-he-gr.cl">
Tue Aug 13 01:20:17 2019 (1.9k) by J2N-FORGET [...] orange.fr
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;13&nbsp;01:20:17&nbsp;2019</span>
    <span class="description">J2N-FORGET [...] orange.fr -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Documentation for BC dates</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">As I was working on my Perl 6 module Date::Calendar::Hebrew, I have
written some Common Lisp code and some Perl 5 code to convert Hebrew
dates to Gregorian and compare four Perl 5 modules with Reingold&#39;s and
Dershowitz&#39;s calendrica-3.0.cl in Common Lisp.

The two source files and the result file are annexed to this
RT ticket.

As you can see in the result file, there are differences between
calendrica-3.0.cl and Date::Converter. In my opinion, it is *unfair*
to call these differences &#34;errors&#34;. They all involve BC dates. I think
that Date::Converter uses the historian way of dealing with BC dates
while calendrica-3.0.cl uses the mathematician way. On the other hand,
there is a *remote* possibility that Date::Converter is buggy with BC
dates.

Here is a more detailed explanation, ready for cut-and-paste

=head2 Dates before the Epoch

The following explanations apply to the Gregorian calendar, but the
general idea applies to all calendars included in C&lt;Date::Converter&gt;.

There are two ways of dealing with dates before a calendar&#39;s epoch,
e.g. 1st January 1 AD for the Gregorian calendar: the mathematicians&#39;
way and the historians&#39; way.

The mathematicians consider that the numbering of the years follows
the natural flow of the integer numbers. Before year 1 you have year 0
and before that, year -1, year -2 and so on. The eve of 1st January 1
AD is 31st December 0. 366 days before 1st January 1 AD is 1st January
0 &#40;remember the leap year rule&#41;. And 367 days before 1st January 1 AD
is 31st December -1.

On the other hand, historians do not use a zero year. With their
numbering scheme, the year before 1 AD is 1 BC.

C&lt;Date::Converter&gt; uses the historian numbering. The only caveat is
that &#34;1 BC&#34; is expressed as a numeric value C&lt;-1&gt;, &#34;2 BC&#34; as C&lt;-2&gt; and
so on.

end of copy-paste

I have not checked how Date::Converter deals with the negative years
in other calendars. If they behave differently from the Gregorian
calendar, you will have to make some alterations to my explanation. I
have supposed that the module implements all carendars in similar
ways.

You may also add this other paragraph

=head3 Proleptic Calendar

Some people may argue that the discussion above is pointless because
there are no Gregorian dates before 15th October 1582. The Gregorian
calendar used in this module is the I&lt;proleptic&gt; Gregorian calendar,
that is, a calendar extending the Gregorian calendar into the past
until the BC years, while keeping the Gregorian leap year rule and the
fact that the beginning of the year is the 1st of January, not the
25th March or Easter or some other date.

end of copy-paste

And if my supposition about using the historians&#39; numbering scheme is
wrong, if the processing of negative years is actually a bug, can you
fix the arithmetic in your module please?

And while it is not the place in a bug tracker, I want to add:

-- Many thanks to you for writing &#34;Perl Deep Dive&#34;, which helped me
a lot to write Perl 6 modules and Perl 6 code &#40;similar thanks to
Laurent and brian&#41;.

-- Many thanks for writing Date::Converter, which was the basis for
the algorithmic part of Date::Calendar::Hebrew.

-- Many thanks for organizing several YAPC::EU conferences, plus
a few days ago PerlCon in Riga.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> comp-p5</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1859768/998833/comp-p5">Download comp-p5</a><br />
<span class="downloadcontenttype">application/octet-stream 6.1k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> comp-p5-result</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1859768/998834/comp-p5-result">Download comp-p5-result</a><br />
<span class="downloadcontenttype">application/octet-stream 5.7k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> cvt-he-gr.cl</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1859768/998835/cvt-he-gr.cl">Download cvt-he-gr.cl</a><br />
<span class="downloadcontenttype">application/octet-stream 1.9k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;13&nbsp;14:54:28&nbsp;2019</span>
    <span class="description">J2N-FORGET [...] orange.fr -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Post-scriptum. I have read the source of Date::Converter and now I am
sure, the differences I have found are definitely *not* a bug. They
are the result of the functions y_common_to_astronomical and
y_astronomical_to_common. I have rewritten my POD suggestions to use
the same vocabulary as the Perl code. Here they are:


=head2 Dates before the Epoch

The following explanations apply to the Gregorian calendar, but the
general idea applies to all calendars included in C&lt;Date::Converter&gt;.

There are two ways of dealing with dates before a calendar&#39;s epoch,
e.g. 1st January 1 AD for the Gregorian calendar: the astronomers&#39; way
and the common way, used among others by the historians.

The astronomers consider that the numbering of the years follows the
natural flow of the integer numbers. Before year 1 you have year 0 and
before that, year -1, year -2 and so on. The eve of 1st January 1 AD
is 31st December 0. 366 days before 1st January 1 AD is 1st January 0
&#40;remember the leap year rule&#41;. And 367 days before 1st January 1 AD is
31st December -1.

On the other hand, the common way does not use a zero year. With this
numbering scheme, the year before 1 AD is 1 BC.

C&lt;Date::Converter&gt; uses the common numbering. The only caveat is that
&#34;1 BC&#34; is expressed as a numeric value C&lt;-1&gt;, &#34;2 BC&#34; as C&lt;-2&gt; and so
on.

=head3 Proleptic Calendar

Some people may argue that the discussion above is pointless because
there are no Gregorian dates before 15th October 1582. The Gregorian
calendar used in this module is the I&lt;proleptic&gt; Gregorian calendar,
that is, a calendar extending the Gregorian calendar into the past
until the BC years, while keeping the Gregorian leap year rule and the
fact that the beginning of the year is the 1st of January, not the
25th March or Easter or some other date &#40;as was the case in various
regions during the Middle Ages&#41;.

end of copy-paste
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
