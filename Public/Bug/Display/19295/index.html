<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #19295 for Business-PayPal-API: 10520 error in DirectPayments</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #19295 for Business-PayPal-API: 10520 error in DirectPayments</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Business-PayPal-API/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Business-PayPal-API/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Business-PayPal-API/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Business-PayPal-API/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="http://github.com/oalders/business-paypal-api/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Business-PayPal-API">Business-PayPal-API CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">19295</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">2 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Business-PayPal-API/Active/">Business-PayPal-API</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
lwagar [...] expressproducts.net

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-38804-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-38805-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;16&nbsp;22:43:31&nbsp;2006</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 10520 error in DirectPayments</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">DirectPayments is missing ShippingTotal so if you have shipping you just
get a 10520 error from PayPal because the totals don&#39;t balance.

now I just need to figure out why the order is going through to PayPal,
but i am not getting back a value for $resp{Ack}.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> DirectPayments.pm</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">package Business::PayPal::API::DirectPayments;

use 5.008001;
use strict;
use warnings;

use SOAP::Lite;
#use SOAP::Lite +trace =&gt; &#39;debug&#39;;
use Business::PayPal::API &#40;&#41;;

our @ISA = qw&#40;Business::PayPal::API&#41;;
our $VERSION = &#39;0.01&#39;;
our $CVS_VERSION = &#39;$Id: DirectPayments.pm,v 1.1 2006/04/18 16:23:18 scott Exp $&#39;;
our @EXPORT_OK = qw&#40;DoDirectPaymentRequest&#41;;

sub DoDirectPaymentRequest {
    my $self = shift;
    my %args = @_;

    my %types =&#40; PaymentAction     =&gt; &#39;&#39;,
                 # Payment Detail
                 OrderTotal        =&gt; &#39;xs:string&#39;,
                 ItemTotal         =&gt; &#39;xsd:string&#39;,
                 TaxTotal          =&gt; &#39;xsd:string&#39;,
                 ShippingTotal     =&gt; &#39;xsd:string&#39;,
                 ButtonSource      =&gt; &#39;xsd:string&#39;,
                 # Credit Card
                 CreditCardType    =&gt; &#39;&#39;,
                 CreditCardNumber  =&gt; &#39;xsd:string&#39;,
                 ExpMonth          =&gt; &#39;xs:int&#39;,
                 ExpYear           =&gt; &#39;xs:int&#39;,
                 # CardOwner
                 Payer             =&gt; &#39;ns:EmailAddressType&#39;,
                 # Payer Name
                 FirstName         =&gt; &#39;xs:string&#39;,
                 LastName          =&gt; &#39;xs:string&#39;,
                 #  Payer Address - shipping address not yet implemented
                 Street1           =&gt; &#39;xs:string&#39;,
                 Street2           =&gt; &#39;xs:string&#39;,
                 CityName          =&gt; &#39;xs:string&#39;,
                 StateOrProvince   =&gt; &#39;xs:string&#39;,
                 Country           =&gt; &#39;xs:string&#39;,
                 PostalCode        =&gt; &#39;xs:string&#39;,
                 # Misc
                 CVV2              =&gt; &#39;xs:string&#39;,
                 IPAddress         =&gt; &#39;xs:string&#39;,
                 MerchantSessionId =&gt; &#39;xs:string&#39;,
               &#41;;

    $args{currencyID} ||= &#39;USD&#39;;
    $args{PaymentAction} ||= &#39;Sale&#39;;

    #Assemble Credit Card Information
    my @payername = &#40; SOAP::Data-&gt;name&#40;FirstName =&gt; $args{FirstName}&#41;,
                      SOAP::Data-&gt;name&#40;LastName =&gt; $args{LastName}&#41;,
                    &#41;;

    my @payeraddr = &#40; SOAP::Data-&gt;name&#40;Street1 =&gt; $args{Street1} &#41;-&gt;type&#40;$types{Street1}&#41;,
                      SOAP::Data-&gt;name&#40;Street2 =&gt; $args{Street2} &#41;-&gt;type&#40;$types{Street2}&#41;,
                      SOAP::Data-&gt;name&#40;CityName =&gt; $args{CityName} &#41;-&gt;type&#40;$types{CityName}&#41;,
                      SOAP::Data-&gt;name&#40;StateOrProvince =&gt; $args{StateOrProvince} &#41;-&gt;type&#40;$types{StateOrProvince}&#41;,
                      SOAP::Data-&gt;name&#40;Country =&gt; $args{Country} &#41;-&gt;type&#40;$types{Country}&#41;,
                      SOAP::Data-&gt;name&#40;PostalCode =&gt; $args{PostalCode} &#41;-&gt;type&#40;$types{PostalCode}&#41;,
                    &#41;;

    my @ccard = &#40; SOAP::Data-&gt;name&#40;CreditCardType =&gt; $args{CreditCardType}&#41;-&gt;type&#40;$types{CreditCardType}&#41;,
                  SOAP::Data-&gt;name&#40;CreditCardNumber =&gt; $args{CreditCardNumber}&#41;-&gt;type&#40;$types{CreditCardNumber}&#41;,
                  SOAP::Data-&gt;name&#40;ExpMonth =&gt; $args{ExpMonth}&#41;-&gt;type&#40;$types{ExpMonth}&#41;,
                  SOAP::Data-&gt;name&#40;ExpYear =&gt; $args{ExpYear}&#41;-&gt;type&#40;$types{ExpYear}&#41;,
                &#41;;

    my @ccowner = &#40; SOAP::Data-&gt;name
                    &#40;CardOwner =&gt; \SOAP::Data-&gt;value
                     &#40; SOAP::Data-&gt;name&#40;Payer =&gt; $args{Payer}&#41;-&gt;type&#40;$types{Payer}&#41;,
                       SOAP::Data-&gt;name&#40;PayerName =&gt; \SOAP::Data-&gt;value &#40; @payername &#41;&#41;,
                       SOAP::Data-&gt;name&#40;Address =&gt; \SOAP::Data-&gt;value&#40; @payeraddr &#41;&#41;,
                     &#41;
                    &#41;
                  &#41;;

    push&#40; @ccard, @ccowner&#41;;
    push&#40; @ccard, SOAP::Data-&gt;name&#40;CVV2 =&gt; $args{CVV2}&#41;-&gt;type&#40;$types{CVV2}&#41;&#41;;

    #Assemble Payment Details
    my @paydetail = &#40; SOAP::Data-&gt;name&#40;OrderTotal =&gt; $args{OrderTotal}&#41;
                      -&gt;attr&#40;{currencyID=&gt;$args{currencyID}}&#41;-&gt;type&#40;$types{currencyID}&#41;,
                      SOAP::Data-&gt;name&#40;ItemTotal =&gt; $args{ItemTotal}&#41;
                      -&gt;attr&#40;{currencyID =&gt; $args{currencyID}}&#41;-&gt;type&#40;$types{currencyID}&#41;,
                      SOAP::Data-&gt;name&#40;TaxTotal =&gt; $args{TaxTotal}&#41;
                      -&gt;attr&#40;{currencyID =&gt; $args{currencyID}}&#41;-&gt;type&#40;$types{currencyID}&#41;,
                      SOAP::Data-&gt;name&#40;ShippingTotal =&gt; $args{ShippingTotal}&#41;
                      -&gt;attr&#40;{currencyID =&gt; $args{currencyID}}&#41;-&gt;type&#40;$types{currencyID}&#41;,
                      SOAP::Data-&gt;name&#40;ButtonSource =&gt; $args{ButtonSource}&#41;-&gt;type&#40;$types{ButtonSource}&#41;
                    &#41;;

    my @payreqdetail = &#40; SOAP::Data-&gt;name&#40;PaymentAction =&gt; $args{PaymentAction}&#41;-&gt;type&#40;&#39;&#39;&#41;,
                         SOAP::Data-&gt;name&#40;PaymentDetails =&gt;\SOAP::Data-&gt;value&#40; @paydetail &#41;&#41;,
                         SOAP::Data-&gt;name&#40;CreditCard =&gt; \SOAP::Data-&gt;value&#40; @ccard&#41;&#41;,
                         SOAP::Data-&gt;name&#40;IPAddress =&gt; $args{IPAddress}&#41;-&gt;type&#40;$types{IPAddress}&#41;,
                         SOAP::Data-&gt;name&#40;MerchantSessionId =&gt; $args{MerchantSessionId}&#41;-&gt;type&#40;$types{MerchantSessionId}&#41;,
                       &#41;;

    #Assemble request
    my @reqval = &#40; SOAP::Data-&gt;value&#40;$self-&gt;version_req&#41;,
                   SOAP::Data-&gt;name&#40; DoDirectPaymentRequestDetails =&gt; \SOAP::Data-&gt;value&#40; @payreqdetail &#41;&#41;-&gt;attr&#40;{xmlns=&gt;&#34;urn:ebay:apis:eBLBaseComponents&#34;}&#41;,
                 &#41;;
    my $request = &#40;SOAP::Data-&gt;name&#40;DoDirectPaymentRequest =&gt; \SOAP::Data-&gt;value&#40;@reqval&#41;&#41;, &#41;;
    my $som = $self-&gt;doCall&#40; DoDirectPaymentReq  =&gt; $request &#41; or return;
    my $path = &#39;./&#39;;
    my %response = &#40;&#41;;
    unless&#40; $self-&gt;getBasic&#40;$som, $path, \%response&#41; &#41; {
        $self-&gt;getErrors&#40;$som, $path, \%response&#41;;
        return %response;
    }

    $self-&gt;getFields&#40; $som, $path, \%response, { TransactionID =&gt; &#39;TransactionID&#39;,
                                                 Amount        =&gt; &#39;Amount&#39;,
                                                 AVSCode       =&gt; &#39;AVSCode&#39;,
                                                 CVV2Code      =&gt; &#39;CVV2Code&#39;,
                                                 Timestamp     =&gt; &#39;Timestamp&#39;,
                                               }
                    &#41;;

    return %response;
}

1;

__END__

=head1 NAME

Business::PayPal::API::DirectPayments - PayPal DirectPayments API

=head1 SYNOPSIS

use Business::PayPal::API qw&#40;DirectPayments&#41;;

## see Business::PayPal::API documentation for parameters

my $pp = new Business::PayPal::API&#40;
                       Username =&gt; &#39;name_api1.example.org&#39;,
                       Password =&gt; &#39;somepass&#39;,
                       CertFile =&gt; &#39;/path/to/tester1.cert_key_pem.txt&#39;,
                       KeyFile =&gt;  &#39;/path/to/tester1.cert_key_pem.txt&#39;,
                       sandbox =&gt; 1,
                       &#41;;

my %response = $pp-&gt;DoDirectPaymentRequest &#40;
                      PaymentAction		=&gt; &#39;Sale&#39;,
                      OrderTotal		=&gt; 13.59,
                      TaxTotal			=&gt; 0.0,
                      ShippingTotal		=&gt; 0.0,
                      ItemTotal			=&gt; 0.0,
                      HandlingTotal		=&gt; 0.0,
                      CreditCardType	=&gt; &#39;Visa&#39;,
                      CreditCardNumber	=&gt; &#39;4561435600988217&#39;,
                      ExpMonth			=&gt; &#39;01&#39;,
                      ExpYear			=&gt; &#39;2007&#39;,
                      CVV2                    =&gt; &#39;123&#39;,
                      FirstName			=&gt; &#39;James&#39;,
                      LastName			=&gt; &#39;PuffDaddy&#39;,
                      Street1			=&gt; &#39;1st Street LaCausa&#39;,
                      Street2			=&gt; &#39;&#39;,
                      CityName			=&gt; &#39;La&#39;,
                      StateOrProvince	=&gt; &#39;Ca&#39;,
                      PostalCode		=&gt; &#39;90210&#39;,
                      Country			=&gt; &#39;US&#39;,
                      Payer                    =&gt; &#39;Joe@Example.org&#39;,
                      CurrencyID		=&gt; &#39;USD&#39;,
                      IPAddress			=&gt; &#39;10.0.0.1&#39;,
                      MerchantSessionID	=&gt; &#39;10113301&#39;,
                      &#41;;

=head1 DESCRIPTION

B&lt;Business::PayPal::API::DirectPayments&gt; implements PayPal&#39;s
B&lt;DirectPayments&gt; API using SOAP::Lite to make direct API calls to
PayPal&#39;s SOAP API server. It also implements support for testing via
PayPal&#39;s I&lt;sandbox&gt;. Please see L&lt;Business::PayPal::API&gt; for details
on using the PayPal sandbox.

=head2 DoDirectPaymentRequest

Implements PayPal&#39;s B&lt;DoDirectPaymentRequest&gt; API call. Supported
parameters include:

        PaymentAction           &#40; Sale|Authorize, Sale is default &#41;
        OrderTotal
        TaxTotal
        ShippingTotal
        ItemTotal
        HandlingTotal
        CreditCardType
        CreditCardNumber
        ExpMonth                &#40; two digits, leading zero &#41;
        ExpYear                 &#40; four digits, 20XX &#41;
        CVV2
        FirstName
        LastName
        Street1
        Street2
        CityName
        StateOrProvince
        PostalCode
        Country
        Payer
        CurrencyID              &#40;USD is default&#41;
        IPAddress
        MerchantSessionID

as described in the PayPal &#34;Web Services API Reference&#34; document.

Returns a hash containing the results of the transaction. The B&lt;Ack&gt;
element and TransactionID are the most useful return values.

Example:

  my %resp = $pp-&gt;DoDirectPaymentRequest&#40;
                    PaymentAction =&gt; &#39;Sale&#39;,
                    OrderTotal    =&gt; &#39;10.99&#39;,
                    ...
			 &#41;;

  unless&#40; $resp{Ack} ne &#39;Success&#39; &#41; {
      for my $error &#40; @{$response{Errors}} &#41; {
          warn &#34;Error: &#34; . $error-&gt;{LongMessage} . &#34;\n&#34;;
      }
  }

=head2 ERROR HANDLING

See the B&lt;ERROR HANDLING&gt; section of B&lt;Business::PayPal::API&gt; for
information on handling errors.

=head2 EXPORT

None by default.

=head1 SEE ALSO

L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://developer.paypal.com/en_US/pdf/PP_APIReference.pdf">https://developer.paypal.com/en_US/pdf/PP_APIReference.pdf</a></span>&gt;

=head1 AUTHOR

Daniel Hembree E&lt;lt&gt;danny@dynamical.orgE&lt;gt&gt;

=head1 COPYRIGHT AND LICENSE

Copyright &#40;C&#41; 2006 by Daniel P. Hembree

This library is free software; you can redistribute it and/or modify
it under the same terms as Perl itself, either Perl version 5.8.5 or,
at your option, any later version of Perl 5 you may have available.


=cut
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;18&nbsp;05:30:57&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> danny [...] dynamical.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue May 16 22:43:31 2006, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; DirectPayments is missing ShippingTotal so if you have shipping you just
&gt; get a 10520 error from PayPal because the totals don&#39;t balance.
&gt; 
&gt; now I just need to figure out why the order is going through to PayPal,
&gt; but i am not getting back a value for $resp{Ack}.
</div>
The shipping total, and handling total were&#39;t implemented in the first
version of the module. Reference is made to this in the comments
concerning the ShipToAddress field but it should have been made clearer.

The extra charges are not very useful in the DirectPay context. These
orders aren&#39;t being processed by PayPal, only billed to the credit card.
Nerver the less, the fields will be added in the next update.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;18&nbsp;05:30:58&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;03&nbsp;16:27:35&nbsp;2007</span>
    <span class="description">danny-hembree [...] dynamical.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The additional field was added in version .40 on Oct 6th 2006.

On Thu May 18 05:30:57 2006, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue May 16 22:43:31 2006, guest wrote:
<div class="message-stanza open">&gt; &gt; DirectPayments is missing ShippingTotal so if you have shipping you just
&gt; &gt; get a 10520 error from PayPal because the totals don&#39;t balance.
&gt; &gt; 
&gt; &gt; now I just need to figure out why the order is going through to PayPal,
&gt; &gt; but i am not getting back a value for $resp{Ack}.
</div>&gt; 
&gt; The shipping total, and handling total were&#39;t implemented in the first
&gt; version of the module. Reference is made to this in the comments
&gt; concerning the ShipToAddress field but it should have been made clearer.
&gt; 
&gt; The extra charges are not very useful in the DirectPay context. These
&gt; orders aren&#39;t being processed by PayPal, only billed to the credit card.
&gt; Nerver the less, the fields will be added in the next update.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;15&nbsp;17:07:02&nbsp;2007</span>
    <span class="description">scott [...] mailblock.net -  Correspondence added</span>
    <span class="time-taken">2 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> danny [...] dynamical.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Just closing this old bug; this fix was applied as Danny said in 0.40.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;15&nbsp;17:07:10&nbsp;2007</span>
    <span class="description">scott [...] mailblock.net -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
