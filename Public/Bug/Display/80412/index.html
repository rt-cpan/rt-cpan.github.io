<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #80412 for autodie: autodie hash order dependency</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #80412 for autodie: autodie hash order dependency</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=autodie">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=autodie">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=autodie">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=autodie">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/autodie">autodie CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">80412</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=autodie">autodie</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
yves [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
perl5-porters [...] perl.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-222998-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.12    </td>
  </tr>
  <tr id="CF-222999-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
2.13    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




autodie.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1133220/596340/autodie.patch">
Fri Oct 26 04:17:43 2012 (4.4k) by yves [...] cpan.org
</a>
</font></li>
</ul>


autodie_rpt.tar.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1133642/596549/autodie_rpt.tar.gz">
Sat Oct 27 04:02:06 2012 (3.1k) by demerphq [...] gmail.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=80412">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1133220" href="/Public/Bug/Display.html?id=80412#txn-1133220">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;26&nbsp;04:17:43&nbsp;2012</span>
    <span class="description">yves [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> perl5-porters [...] perl.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> autodie hash order dependency</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1133220/596339/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/596339">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 600b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have been working on making it possible to add new hash algorithms to 
perl core and on making the hash seed random per process for security 
reasons. 

In my work on this I have encountered a hash order dependency bug in the 
t/hints_pod_examples.t. I could not actually explain the bug but making 
hash order processing deterministic solved the problem. The attached 
patch contains some fixes and a version bump.

It would be really nice if this or an equivalent fix could get applied 
sometime soon as I would like to merge my hash changes to core soon and 
this is a roadblock.

Thanks,
Yves
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> autodie.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1133220/596340/autodie.patch">Download autodie.patch</a><br />
<span class="downloadcontenttype">text/x-diff 4.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">commit 420f9bf288956d21861eed96530892987372758f
Author: Yves Orton &lt;demerphq@gmail.com&gt;
Date:   Mon Aug 27 08:54:50 2012 +0200

    fix a hash key order dependency in cpan/autodie/t/hints_pod_examples.t
    
    At the same time make part of the internals deterministic Just In Case.
    
    Version bump on autodie to 2.13 as well.

diff --git a/cpan/autodie/lib/Fatal.pm b/cpan/autodie/lib/Fatal.pm
index 87d9da4..ce17af9 100644
--- a/cpan/autodie/lib/Fatal.pm
+++ b/cpan/autodie/lib/Fatal.pm
@@ -40,7 +40,7 @@ use constant ERROR_58_HINTS =&gt; q{Non-subroutine %s hints for %s are not supporte
 use constant MIN_IPC_SYS_SIMPLE_VER =&gt; 0.12;
 
 # All the Fatal/autodie modules share the same version number.
-our $VERSION = &#39;2.12&#39;;
+our $VERSION = &#39;2.13&#39;;
 
 our $Debug ||= 0;
 
@@ -118,6 +118,7 @@ my %TAGS = &#40;
     &#39;:2.10&#39;  =&gt; [qw&#40;:default&#41;],
     &#39;:2.11&#39;  =&gt; [qw&#40;:default&#41;],
     &#39;:2.12&#39;  =&gt; [qw&#40;:default&#41;],
+    &#39;:2.13&#39;  =&gt; [qw&#40;:default&#41;],
 &#41;;
 
 # chmod was only introduced in 2.07
@@ -409,7 +410,9 @@ sub _install_subs {
 
     my $pkg_sym = &#34;${pkg}::&#34;;
 
-    while&#40;my &#40;$sub_name, $sub_ref&#41; = each %$subs_to_reinstate&#41; {
+    # It does not hurt to do this in a predictable order, and might help debugging.
+    foreach my $sub_name &#40;sort keys %$subs_to_reinstate&#41; {
+        my $sub_ref= $subs_to_reinstate-&gt;{$sub_name};
 
         my $full_path = $pkg_sym.$sub_name;
 
diff --git a/cpan/autodie/lib/autodie.pm b/cpan/autodie/lib/autodie.pm
index a2360e3..71a6a5e 100644
--- a/cpan/autodie/lib/autodie.pm
+++ b/cpan/autodie/lib/autodie.pm
@@ -8,7 +8,7 @@ our @ISA = qw&#40;Fatal&#41;;
 our $VERSION;
 
 BEGIN {
-    $VERSION = &#39;2.12&#39;;
+    $VERSION = &#39;2.13&#39;;
 }
 
 use constant ERROR_WRONG_FATAL =&gt; q{
diff --git a/cpan/autodie/lib/autodie/exception.pm b/cpan/autodie/lib/autodie/exception.pm
index cd06639..45c723d 100644
--- a/cpan/autodie/lib/autodie/exception.pm
+++ b/cpan/autodie/lib/autodie/exception.pm
@@ -14,7 +14,7 @@ use overload
 
 use if &#40;$] &gt;= 5.010&#41;, overload =&gt; &#39;~~&#39;  =&gt; &#34;matches&#34;;
 
-our $VERSION = &#39;2.12&#39;;
+our $VERSION = &#39;2.13&#39;;
 
 my $PACKAGE = __PACKAGE__;  # Useful to have a scalar for hash keys.
 
diff --git a/cpan/autodie/lib/autodie/exception/system.pm b/cpan/autodie/lib/autodie/exception/system.pm
index d3047a8..0489b61 100644
--- a/cpan/autodie/lib/autodie/exception/system.pm
+++ b/cpan/autodie/lib/autodie/exception/system.pm
@@ -5,7 +5,7 @@ use warnings;
 use base &#39;autodie::exception&#39;;
 use Carp qw&#40;croak&#41;;
 
-our $VERSION = &#39;2.12&#39;;
+our $VERSION = &#39;2.13&#39;;
 
 my $PACKAGE = __PACKAGE__;
 
diff --git a/cpan/autodie/lib/autodie/hints.pm b/cpan/autodie/lib/autodie/hints.pm
index 71c8be3..36715e9 100644
--- a/cpan/autodie/lib/autodie/hints.pm
+++ b/cpan/autodie/lib/autodie/hints.pm
@@ -5,7 +5,7 @@ use warnings;
 
 use constant PERL58 =&gt; &#40; $] &lt; 5.009 &#41;;
 
-our $VERSION = &#39;2.12&#39;;
+our $VERSION = &#39;2.13&#39;;
 
 =head1 NAME
 
diff --git a/cpan/autodie/t/hints_pod_examples.t b/cpan/autodie/t/hints_pod_examples.t
index a3c6f0f..21a85fd 100644
--- a/cpan/autodie/t/hints_pod_examples.t
+++ b/cpan/autodie/t/hints_pod_examples.t
@@ -152,22 +152,43 @@ my $perl58_fix = &#40;
 &#41;;
 
 # Some of the tests provide different hints for scalar or list context
-
-while &#40;my &#40;$test, $exception_expected&#41; = each %scalar_tests&#41; {
-    eval &#34;
+# NOTE: these tests are sensitive to order &#40;not sure why&#41; therefore
+# this loop must use a sorted list of keys . Otherwise there is an occasional
+# failure like this:
+#
+#   Failed test &#39;scalar test - zero_scalar&#40;&#34;&#34;&#41;&#39;
+#   at cpan/autodie/t/hints_pod_examples.t line 168.
+#          got: &#39;Can&#39;t zero_scalar&#40;&#39;&#39;&#41;:  at cpan/autodie/t/hints_pod_examples.t line 157
+# &#39;
+#     expected: &#39;&#39;
+#
+#
+#         my $scalar = zero_scalar&#40;&#34;&#34;&#41;;
+#         1;
+
+
+foreach my $test &#40;sort keys %scalar_tests&#41; {
+    my $exception_expected= $scalar_tests{$test};
+    my $ok= eval&#40;my $code= &#34;
         $perl58_fix
         my \$scalar = $test;
-    &#34;;
+        1;
+    &#34;&#41;;
 
     if &#40;$exception_expected&#41; {
-        isnt&#40;&#34;$@&#34;, &#34;&#34;, &#34;scalar test - $test&#34;&#41;;
+        isnt&#40;$ok ? &#34;&#34; : &#34;$@&#34;, &#34;&#34;, &#34;scalar test - $test&#34;&#41;
+            or diag&#40;$code&#41;;
     }
     else {
-        is&#40;$@, &#34;&#34;, &#34;scalar test - $test&#34;&#41;;
+        is&#40;$ok ? &#34;&#34; : &#34;$@&#34;, &#34;&#34;, &#34;scalar test - $test&#34;&#41;
+            or diag&#40;$code&#41;;
     }
 }
 
-while &#40;my &#40;$test, $exception_expected&#41; = each %list_tests&#41; {
+
+# this set of test is not *known* to be order dependent however we sort it anyway out caution
+foreach my $test &#40;sort keys %list_tests&#41; {
+    my $exception_expected= $list_tests{$test};
     eval &#34;
         $perl58_fix
         my \@array = $test;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1133577" href="/Public/Bug/Display.html?id=80412#txn-1133577">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;26&nbsp;21:04:40&nbsp;2012</span>
    <span class="description">pjf [...] perltraining.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #80412] autodie hash order dependency</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 27 Oct 2012 12:04:27 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-autodie [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Paul Fenwick &lt;pjf [...] perltraining.com.au&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1133577/596512/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/596512">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 10/26/2012 07:17 PM, Yves via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have been working on making it possible to add new hash algorithms to 
&gt; perl core and on making the hash seed random per process for security 
&gt; reasons. 
</div>
You rock.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In my work on this I have encountered a hash order dependency bug in the 
&gt; t/hints_pod_examples.t. I could not actually explain the bug but making 
&gt; hash order processing deterministic solved the problem. The attached 
&gt; patch contains some fixes and a version bump.
</div>
Weird.

I&#39;ve noticed the patch changes _install_subs to be deterministic in order,
too. Just to check, is that just a precaution, or do we actually see things
break with the new hash implementation?

The patch looks awesome, but I&#39;m worried if there&#39;s anything in autodie
which is order dependent.  I know it&#39;s asking even more from you, but do you
have a copy of a failing output from the unpatched hints_pod_examples.t ?
Even without your patches to Perl&#39;s hash code, I should be able to manually
change the ordering of the tests used and see if I can reproduce it on an
unpatched Perl, and hopefully figure out what&#39;s causing the root of the
failures.

Your patch rocks, by the way.

If I can&#39;t find the underlying cause in a couple of days, I&#39;ll apply your
patch and push to the CPAN so this isn&#39;t blocking you any more.  Do feel
free to nudge me on this if I haven&#39;t done so.

Paul

-- 
Paul Fenwick &lt;pjf@perltraining.com.au&gt; | <span class="clickylink"><a target="new" rel="nofollow" href="http://perltraining.com.au/">http://perltraining.com.au/</a></span>
Director of Training                   | Ph:  +61 3 9354 6001
Perl Training Australia                | Fax: +61 3 9354 2681
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1133580" href="/Public/Bug/Display.html?id=80412#txn-1133580">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;26&nbsp;21:04:41&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1133642" href="/Public/Bug/Display.html?id=80412#txn-1133642">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;27&nbsp;04:02:05&nbsp;2012</span>
    <span class="description">demerphq [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> perl5-porters [...] perl.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #80412] autodie hash order dependency</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 27 Oct 2012 10:01:54 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-autodie [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> demerphq &lt;demerphq [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1133642/596548/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/596548">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 27 October 2012 03:04, Paul Fenwick via RT &lt;bug-autodie@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80412">https://rt.cpan.org/Ticket/Display.html?id=80412</a></span> &gt;
&gt;
&gt; On 10/26/2012 07:17 PM, Yves via RT wrote:
</div>[....]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve noticed the patch changes _install_subs to be deterministic in order,
&gt; too. Just to check, is that just a precaution, or do we actually see things
&gt; break with the new hash implementation?
</div>
From my point of view it is just a precaution. When I was debugging
things this was the first possible hash ordering issue i saw.

I just re-checked, and making that change alone does nothing. So you
could hypothetically stick with the current code. Although I
personally would want a deterministic ordering.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The patch looks awesome, but I&#39;m worried if there&#39;s anything in autodie
&gt; which is order dependent.  I know it&#39;s asking even more from you, but do you
&gt; have a copy of a failing output from the unpatched hints_pod_examples.t ?
</div>
Attached is tar.gz of the test output if I revert my patch and run it
a few times. There are multiple fails and at least one pass in the tar
file. With hash randomization the test output is different every run.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Even without your patches to Perl&#39;s hash code, I should be able to manually
&gt; change the ordering of the tests used and see if I can reproduce it on an
&gt; unpatched Perl, and hopefully figure out what&#39;s causing the root of the
&gt; failures.
</div>
I have to admit I found those tests non obvious so I didn&#39;t dig very
deep in to how changing the test execution order would cause this.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If I can&#39;t find the underlying cause in a couple of days, I&#39;ll apply your
&gt; patch and push to the CPAN so this isn&#39;t blocking you any more.  Do feel
&gt; free to nudge me on this if I haven&#39;t done so.
</div>
Thanks,
Yves
-- 
perl -Mre=debug -e &#34;/just|another|perl|hacker/&#34;
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1133642/596549/autodie_rpt.tar.gz">Download autodie_rpt.tar.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 3.1k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1136084" href="/Public/Bug/Display.html?id=80412#txn-1136084">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;03&nbsp;08:54:17&nbsp;2012</span>
    <span class="description">demerphq [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #80412] autodie hash order dependency</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 3 Nov 2012 13:54:08 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-autodie [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> demerphq &lt;demerphq [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1136084/597879/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/597879">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 350b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 27 October 2012 03:04, Paul Fenwick via RT &lt;bug-autodie@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If I can&#39;t find the underlying cause in a couple of days, I&#39;ll apply your
&gt; patch and push to the CPAN so this isn&#39;t blocking you any more.  Do feel
&gt; free to nudge me on this if I haven&#39;t done so.
</div>
Nudge. :-&#41;

Yves

-- 
perl -Mre=debug -e &#34;/just|another|perl|hacker/&#34;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1137722" href="/Public/Bug/Display.html?id=80412#txn-1137722">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;07&nbsp;22:29:34&nbsp;2012</span>
    <span class="description">PJF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1137722/598783/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/598783">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 318b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Nov 03 08:54:17 2012, demerphq@gmail.com wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Nudge. :-&#41;
</div>
Oops!  New autodie pushed to the CPAN with your pathces applied.  I
still hope to investigate what&#39;s going on under the hood, but hopefully
this means autodie won&#39;t be a roadblock any more.

Sorry about the late apply, and keep being awesome!

Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1137725" href="/Public/Bug/Display.html?id=80412#txn-1137725">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;07&nbsp;22:29:35&nbsp;2012</span>
    <span class="description">PJF [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1137775" href="/Public/Bug/Display.html?id=80412#txn-1137775">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;08&nbsp;03:02:52&nbsp;2012</span>
    <span class="description">demerphq [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> yves [...] cpan.org, perl5-porters [...] perl.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #80412] autodie hash order dependency</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 8 Nov 2012 09:02:39 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-autodie [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> demerphq &lt;demerphq [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1137775/598816/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/598816">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 719b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 8 November 2012 04:29, PJF via RT &lt;bug-autodie@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80412">https://rt.cpan.org/Ticket/Display.html?id=80412</a></span> &gt;
&gt;
&gt; On Sat Nov 03 08:54:17 2012, demerphq@gmail.com wrote:
&gt;
<div class="message-stanza open">&gt;&gt; Nudge. :-&#41;
</div>&gt;
&gt; Oops!  New autodie pushed to the CPAN with your pathces applied.  I
&gt; still hope to investigate what&#39;s going on under the hood, but hopefully
&gt; this means autodie won&#39;t be a roadblock any more.
&gt;
&gt; Sorry about the late apply, and keep being awesome!
</div>
Nice. You applied that in a way I didnt have to anything more than
cherry-pick my commit.  :-&#41;

So, I have pushed this to blead with

91d419acae8f9fecd22ae9054297725fbddda0a2

Thanks for the support!

Yves


-- 
perl -Mre=debug -e &#34;/just|another|perl|hacker/&#34;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1137778" href="/Public/Bug/Display.html?id=80412#txn-1137778">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;08&nbsp;03:02:54&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;patched&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1274066" href="/Public/Bug/Display.html?id=80412#txn-1274066">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;13&nbsp;05:47:27&nbsp;2013</span>
    <span class="description">niels [...] thykier.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1274066/674794/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/674794">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 136b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

According to the Changes file, this bug was fixed in v2.13.  Marking it as resolved and adding &#34;fixed in&#34; version for it.

~Niels
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1274069" href="/Public/Bug/Display.html?id=80412#txn-1274069">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;13&nbsp;05:47:28&nbsp;2013</span>
    <span class="description">niels [...] thykier.net -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1274071" href="/Public/Bug/Display.html?id=80412#txn-1274071">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;13&nbsp;05:47:28&nbsp;2013</span>
    <span class="description">niels [...] thykier.net -  Fixed in 2.13 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.579148</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
