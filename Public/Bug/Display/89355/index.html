<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #89355 for podlators: documentation: &#34;generating ascii text&#34; is out of date</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #89355 for podlators: documentation: &#34;generating ascii text&#34; is out of date</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=podlators">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=podlators">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=podlators">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=podlators">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/podlators">podlators CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">89355</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=podlators">podlators</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">RRA [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ether [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-26322-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-26323-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
4.00    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=89355">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1272605" href="/Public/Bug/Display.html?id=89355#txn-1272605">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;08&nbsp;19:04:44&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> No way to fetch the document encoding</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1272605/673945/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/673945">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 317b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I see, from a Data::Dumper of a Pod::Text object, that there is an &#39;encoding&#39; field, but there is no method accessor to get at this information.

Also, the documentation describes Pod::Text as generating &#34;ascii text&#34;, but if encodings are respected, it&#39;s not ascii, is it?  Is the intent to provide encoding support?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1272608" href="/Public/Bug/Display.html?id=89355#txn-1272608">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;08&nbsp;19:09:51&nbsp;2013</span>
    <span class="description">rra [...] stanford.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #89355] No way to fetch the document encoding</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 08 Oct 2013 16:09:38 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-podlators [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Russ Allbery &lt;rra [...] stanford.edu&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1272608/673948/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/673948">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Karen Etheridge via RT&#34; &lt;bug-podlators@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Tue Oct 08 19:04:44 2013: Request 89355 was acted upon.
&gt; Transaction: Ticket created by ETHER
&gt;        Queue: podlators
&gt;      Subject: No way to fetch the document encoding
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: Normal
&gt;        Owner: Nobody
&gt;   Requestors: ether@cpan.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=89355">https://rt.cpan.org/Ticket/Display.html?id=89355</a></span> &gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I see, from a Data::Dumper of a Pod::Text object, that there is an
&gt; &#39;encoding&#39; field, but there is no method accessor to get at this
&gt; information.
</div>
There is.  It&#39;s even called encoding&#40;&#41;.  :&#41;  But it&#39;s provided by
Pod::Simple and therefore not separately documented.  As the Pod::Text man
page says:

    As a derived class from Pod::Simple, Pod::Text supports the same
    methods and interfaces. See Pod::Simple for all the details

That said, Pod::Text, like most POD formatters, generally acts in
streaming mode, so there isn&#39;t a great point in the process to ask it what
the encoding is prior to outputting the results.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Also, the documentation describes Pod::Text as generating &#34;ascii text&#34;,
&gt; but if encodings are respected, it&#39;s not ascii, is it?  Is the intent to
&gt; provide encoding support?
</div>
This is just a documentation bug.  I&#39;ll correct it.  Pod::Text has
supported various encodings for some time; see the documentation of the
utf8 constructor argument for the details of how encoding works.

-- 
Russ Allbery &#40;rra@stanford.edu&#41;             &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.eyrie.org/~eagle/">http://www.eyrie.org/~eagle/</a></span>&gt;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1272609" href="/Public/Bug/Display.html?id=89355#txn-1272609">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;08&nbsp;19:09:51&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1272616" href="/Public/Bug/Display.html?id=89355#txn-1272616">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;08&nbsp;19:25:27&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #89355] No way to fetch the document encoding</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 8 Oct 2013 16:25:10 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;rra [...] stanford.edu via RT&#34; &lt;bug-podlators [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karen Etheridge &lt;ether [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1272616/673954/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/673954">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 992b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, Oct 08, 2013 at 07:09:51PM -0400, rra@stanford.edu via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There is.  It&#39;s even called encoding&#40;&#41;.  :&#41;  But it&#39;s provided by
&gt; Pod::Simple and therefore not separately documented.  As the Pod::Text man
&gt; page says:
</div>
Aha, I missed that!

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; That said, Pod::Text, like most POD formatters, generally acts in
&gt; streaming mode, so there isn&#39;t a great point in the process to ask it what
&gt; the encoding is prior to outputting the results.
</div>
I suppose I&#39;m confused about the API then...  If I&#39;m getting the content in
string form, rather than as a file, I need to know what layers I should put
on the filehandle when I write it.  I will read the Pod::Simple docs!

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This is just a documentation bug.  I&#39;ll correct it.  Pod::Text has
&gt; supported various encodings for some time; see the documentation of the
&gt; utf8 constructor argument for the details of how encoding works.
</div>
kk. if all the encoding logic is in Pod::Simple, I can see how the
discrepancy in the docs would sneak in.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1272618" href="/Public/Bug/Display.html?id=89355#txn-1272618">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;08&nbsp;19:30:22&nbsp;2013</span>
    <span class="description">rra [...] stanford.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #89355] No way to fetch the document encoding</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 08 Oct 2013 16:30:08 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-podlators [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Russ Allbery &lt;rra [...] stanford.edu&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1272618/673956/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/673956">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Karen Etheridge via RT&#34; &lt;bug-podlators@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; That said, Pod::Text, like most POD formatters, generally acts in
&gt;&gt; streaming mode, so there isn&#39;t a great point in the process to ask it
&gt;&gt; what the encoding is prior to outputting the results.
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I suppose I&#39;m confused about the API then...  If I&#39;m getting the content
&gt; in string form, rather than as a file, I need to know what layers I
&gt; should put on the filehandle when I write it.  I will read the
&gt; Pod::Simple docs!
</div>
Ah!  The general rule of thumb is that you shouldn&#39;t have to worry about
it provided that you write an =encoding directive at the start of the
stream.  If you do that, the default is for Pod::Text to output the same
encoding that it got in, and the output will already be encoded before
it&#39;s written to the file handle.

At least, that&#39;s how it&#39;s all supposed to work, but I&#39;ve gotten this wrong
several times, so it wouldn&#39;t surprise me a great deal if there are still
bugs lurking.

-- 
Russ Allbery &#40;rra@stanford.edu&#41;             &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.eyrie.org/~eagle/">http://www.eyrie.org/~eagle/</a></span>&gt;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1272621" href="/Public/Bug/Display.html?id=89355#txn-1272621">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;08&nbsp;19:37:51&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1272621/673959/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/673959">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2013-10-08 16:30:22, rra@stanford.edu wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Ah!  The general rule of thumb is that you shouldn&#39;t have to worry about
&gt; it provided that you write an =encoding directive at the start of the
&gt; stream.  If you do that, the default is for Pod::Text to output the same
&gt; encoding that it got in, and the output will already be encoded before
&gt; it&#39;s written to the file handle.
</div>
Is it possible to get the text back, decoded, as a string, so I can do further processing on it before writing it out to a file myself? In that case, I&#39;d need to know what the encoding is so I can write it properly.  &#40;One usecase here is Dist::Zilla file generation - files are &#39;created&#39; using an object that stores the content, with the content made available to other plugins for more massaging, and then written out to disk at the very end all at once. And I&#39;m working on a bug in a plugin that is currently doing this wrong - i.e. it&#39;s encoding-blind.&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; At least, that&#39;s how it&#39;s all supposed to work, but I&#39;ve gotten this wrong
&gt; several times, so it wouldn&#39;t surprise me a great deal if there are still
&gt; bugs lurking.
</div>
Heh, I think unicode has that effect on everyone :D
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1272623" href="/Public/Bug/Display.html?id=89355#txn-1272623">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;08&nbsp;19:39:18&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Subject changed from &#39;No way to fetch the document encoding&#39; to &#39;documentation: &#34;generating ascii text&#34; is out of date&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1272632" href="/Public/Bug/Display.html?id=89355#txn-1272632">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;08&nbsp;20:35:38&nbsp;2013</span>
    <span class="description">rra [...] stanford.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #89355] No way to fetch the document encoding</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 08 Oct 2013 17:35:20 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-podlators [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Russ Allbery &lt;rra [...] stanford.edu&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1272632/673966/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/673966">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Karen Etheridge via RT&#34; &lt;bug-podlators@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: podlators
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=89355">https://rt.cpan.org/Ticket/Display.html?id=89355</a></span> &gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2013-10-08 16:30:22, rra@stanford.edu wrote:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Ah!  The general rule of thumb is that you shouldn&#39;t have to worry
&gt;&gt; about it provided that you write an =encoding directive at the start of
&gt;&gt; the stream.  If you do that, the default is for Pod::Text to output the
&gt;&gt; same encoding that it got in, and the output will already be encoded
&gt;&gt; before it&#39;s written to the file handle.
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Is it possible to get the text back, decoded, as a string, so I can do
&gt; further processing on it before writing it out to a file myself? In that
&gt; case, I&#39;d need to know what the encoding is so I can write it properly.
&gt; &#40;One usecase here is Dist::Zilla file generation - files are &#39;created&#39;
&gt; using an object that stores the content, with the content made available
&gt; to other plugins for more massaging, and then written out to disk at the
&gt; very end all at once. And I&#39;m working on a bug in a plugin that is
&gt; currently doing this wrong - i.e. it&#39;s encoding-blind.&#41;
</div>
$parser-&gt;output_string&#40;\$output&#41; will put all of the output into $output.
I believe that Pod::Simple treats this as equivalent to a file handle and
does output encoding before adding it to that string, but I&#39;m not positive
about that &#40;I haven&#39;t tested&#41;.  If so, it will be encoded in whatever
encoding is declared by the =encoding string.

That said, I would recommend standardizing on UTF-8, because that will let
you pass utf8 =&gt; 1 to Pod::Text&#39;s constructor, which will override all
that and force the encoding to be in UTF-8.  Then you can just decode the
$output stream with decode&#40;&#39;UTF-8&#39;, $output&#41; and you should get back Perl
internal strings.

-- 
Russ Allbery &#40;rra@stanford.edu&#41;             &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.eyrie.org/~eagle/">http://www.eyrie.org/~eagle/</a></span>&gt;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1273006" href="/Public/Bug/Display.html?id=89355#txn-1273006">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;09&nbsp;14:11:47&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #89355] No way to fetch the document encoding</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 9 Oct 2013 11:11:24 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;rra [...] stanford.edu via RT&#34; &lt;bug-podlators [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karen Etheridge &lt;ether [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1273006/674197/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/674197">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, Oct 08, 2013 at 08:35:38PM -0400, rra@stanford.edu via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; $parser-&gt;output_string&#40;\$output&#41; will put all of the output into $output.
&gt; I believe that Pod::Simple treats this as equivalent to a file handle and
&gt; does output encoding before adding it to that string, but I&#39;m not positive
&gt; about that &#40;I haven&#39;t tested&#41;.  If so, it will be encoded in whatever
&gt; encoding is declared by the =encoding string.
</div>
Right - what I&#39;m saying is that sometimes we don&#39;t *want* the content
encoded yet, because we&#39;ll be doing some more processing of that text
before we write it out to a file ourselves -- so we&#39;ll need to know what
the encoding is, so we can apply the right layer to the $fh when we write
it.  for example, Pod::Weaver... working on already-encoded octets isn&#39;t
optimal here.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; That said, I would recommend standardizing on UTF-8, because that will let
&gt; you pass utf8 =&gt; 1 to Pod::Text&#39;s constructor, which will override all
&gt; that and force the encoding to be in UTF-8.  Then you can just decode the
&gt; $output stream with decode&#40;&#39;UTF-8&#39;, $output&#41; and you should get back Perl
&gt; internal strings.
</div>
This might be enough, but users upstream might be using other encodings
other than UTF-8 &#40;and I believe Dist::Zilla intends to support that&#41;.

However, as long as we know the actual encoding of the string &#40;actually a
bytestring&#41; we get back, we can decode it properly, do our munging, and
the re-encode without generating mojibake.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1273488" href="/Public/Bug/Display.html?id=89355#txn-1273488">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;10&nbsp;19:25:16&nbsp;2013</span>
    <span class="description">rra [...] stanford.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #89355] No way to fetch the document encoding</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 10 Oct 2013 16:25:01 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-podlators [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Russ Allbery &lt;rra [...] stanford.edu&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1273488/674464/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/674464">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Karen Etheridge via RT&#34; &lt;bug-podlators@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Right - what I&#39;m saying is that sometimes we don&#39;t *want* the content
&gt; encoded yet, because we&#39;ll be doing some more processing of that text
&gt; before we write it out to a file ourselves -- so we&#39;ll need to know what
&gt; the encoding is, so we can apply the right layer to the $fh when we
&gt; write it.  for example, Pod::Weaver... working on already-encoded octets
&gt; isn&#39;t optimal here.
</div>
I&#39;m not sure there&#39;s any way to get Pod::Simple to not encode, so I&#39;m not
sure whether this is something you can deal with via layers.  But I
haven&#39;t investigated this myself.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; That said, I would recommend standardizing on UTF-8, because that will
&gt;&gt; let you pass utf8 =&gt; 1 to Pod::Text&#39;s constructor, which will override
&gt;&gt; all that and force the encoding to be in UTF-8.  Then you can just
&gt;&gt; decode the $output stream with decode&#40;&#39;UTF-8&#39;, $output&#41; and you should
&gt;&gt; get back Perl internal strings.
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This might be enough, but users upstream might be using other encodings
&gt; other than UTF-8 &#40;and I believe Dist::Zilla intends to support that&#41;.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; However, as long as we know the actual encoding of the string &#40;actually
&gt; a bytestring&#41; we get back, we can decode it properly, do our munging,
&gt; and the re-encode without generating mojibake.
</div>
Yeah, that was the strategy that I was thinking of.  I don&#39;t know if you
always know the encoding of the string, but I think you&#39;re going to want
to know that regardless for other reasons.  Dealing safely with strings in
unknown encodings is rather difficult.

-- 
Russ Allbery &#40;rra@stanford.edu&#41;             &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.eyrie.org/~eagle/">http://www.eyrie.org/~eagle/</a></span>&gt;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1568876" href="/Public/Bug/Display.html?id=89355#txn-1568876">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;02&nbsp;00:49:07&nbsp;2015</span>
    <span class="description">RRA [...] cpan.org -  Fixed in 4.00 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1568877" href="/Public/Bug/Display.html?id=89355#txn-1568877">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;02&nbsp;00:49:07&nbsp;2015</span>
    <span class="description">RRA [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1568879" href="/Public/Bug/Display.html?id=89355#txn-1568879">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;02&nbsp;00:49:14&nbsp;2015</span>
    <span class="description">RRA [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.570534</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
