<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #72082 for Module-ScanDeps: $FindBin::Bin issue on Moudel::ScanDeps 1.04</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #72082 for Module-ScanDeps: $FindBin::Bin issue on Moudel::ScanDeps 1.04</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Module-ScanDeps">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Module-ScanDeps">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Module-ScanDeps">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Module-ScanDeps">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Module-ScanDeps">Module-ScanDeps CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">72082</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Module-ScanDeps">Module-ScanDeps</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">RSCHUPP [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mdengfeng [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-21736-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-21737-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




findbin.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/994805/518011/findbin.patch">
Tue Nov 01 18:11:10 2011 (1.3k) by RSCHUPP [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=72082">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-994433" href="/Public/Bug/Display.html?id=72082#txn-994433">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;01&nbsp;01:21:49&nbsp;2011</span>
    <span class="description">mdengfeng [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> $FindBin::Bin issue on Moudel::ScanDeps 1.04</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 1 Nov 2011 13:21:36 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-ScanDeps [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> DengFeng Mao &lt;mdengfeng [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/994433/517812/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/517812">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 11.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi, Experts

    I got some issue on Module::ScanDeps 1.04. But not on Module::ScanDeps
1.02.
    There is a simple test.pl file. You can get the its content in below
&#39;cat&#39; command. On the host hostA, the version of Module::ScanDeps is 1.02.
 The &#39;scandeps.pl&#39; can output the correct result.
    For the same test.pl file. On the hostBm the version of
Module::ScanDeps is 1.04, The &#39;scandeps.pl&#39; command get some issue.
    It seems the &#39;$FindBin::Bin&#39; was redirected to &#39;/tmp&#39; instead of the
correct folder.  So it caused some modules can&#39;t be used correctly.


Thanks in advance.

Dengfeng


=======================================================
                                   hostA
=======================================================
hostA [216]: ls
lib  test.pl
hostA [217]: cat test.pl

use FindBin;
use lib &#34;$FindBin::Bin/lib&#34;;

use MYMODULE;

print &#34;Hello World!\n&#34;

hostA [218]: perl -V
Summary of my perl5 &#40;revision 5 version 12 subversion 3&#41; configuration:

  Platform:
    osname=linux, osvers=2.6.18-164.el5, archname=x86_64-linux-thread-multi
    uname=&#39;linux hostA 2.6.18-164.el5 #1 smp tue aug 18 15:51:48 edt 2009
x86_64 x86_64 x86_64 gnulinux &#39;
    config_args=&#39;-Dcc=gcc -Dusethreads -Duse64bitall
-Dprefix=/home/dfmao/perl-5.12.3/linuxR_x86 -de&#39;
    hint=recommended, useposix=true, d_sigaction=define
    useithreads=define, usemultiplicity=define
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=define, use64bitall=define, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;gcc&#39;, ccflags =&#39;-D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing
-pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE
-D_FILE_OFFSET_BITS=64&#39;,
    optimize=&#39;-O2&#39;,
    cppflags=&#39;-D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe
-fstack-protector -I/usr/local/include&#39;
    ccversion=&#39;&#39;, gccversion=&#39;4.1.2 20080704 &#40;Red Hat 4.1.2-46&#41;&#39;,
gccosandvers=&#39;&#39;
    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
    ivtype=&#39;long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;,
lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;gcc&#39;, ldflags =&#39; -fstack-protector -L/usr/local/lib&#39;
    libpth=/usr/local/lib /lib /usr/lib /lib64 /usr/lib64 /usr/local/lib64
    libs=-lnsl -lgdbm -ldb -ldl -lm -lcrypt -lutil -lpthread -lc
    perllibs=-lnsl -ldl -lm -lcrypt -lutil -lpthread -lc
    libc=/lib/libc-2.5.so, so=so, useshrplib=false, libperl=libperl.a
    gnulibc_version=&#39;2.5&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags=&#39;-Wl,-E&#39;
    cccdlflags=&#39;-fPIC&#39;, lddlflags=&#39;-shared -O2 -L/usr/local/lib
-fstack-protector&#39;


Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options: MULTIPLICITY PERL_DONT_CREATE_GVSV
                        PERL_IMPLICIT_CONTEXT PERL_MALLOC_WRAP
USE_64_BIT_ALL
                        USE_64_BIT_INT USE_ITHREADS USE_LARGE_FILES
                        USE_PERLIO USE_PERL_ATOF USE_REENTRANT_API
  Built under linux
  Compiled at Jul  7 2011 10:01:50
  @INC:

/home/dfmao/perl-5.12.3/linuxR_x86/lib/site_perl/5.12.3/x86_64-linux-thread-multi
    /home/dfmao/perl-5.12.3/linuxR_x86/lib/site_perl/5.12.3
    /home/dfmao/perl-5.12.3/linuxR_x86/lib/5.12.3/x86_64-linux-thread-multi
    /home/dfmao/perl-5.12.3/linuxR_x86/lib/5.12.3
    .
hostA [219]: perl -MModule::ScanDeps -e &#39;print $Module::ScanDeps::VERSION&#39;
1.02

hostA [220]: scandeps.pl  -c test.pl
&#39;MYMODULE&#39;                      =&gt; &#39;undef&#39;,
&#39;Archive::Zip::Archive&#39;         =&gt; &#39;1.30&#39;,
&#39;Archive::Zip::DirectoryMember&#39; =&gt; &#39;1.30&#39;,
&#39;Archive::Zip::FileMember&#39;      =&gt; &#39;1.30&#39;,
&#39;Archive::Zip::Member&#39;          =&gt; &#39;1.30&#39;,
&#39;Archive::Zip::NewFileMember&#39;   =&gt; &#39;1.30&#39;,
&#39;Archive::Zip::StringMember&#39;    =&gt; &#39;1.30&#39;,
&#39;Archive::Zip::ZipFileMember&#39;   =&gt; &#39;1.30&#39;,
&#39;URI::URL&#39;                      =&gt; &#39;5.03&#39;,
&#39;Expect&#39;                        =&gt; &#39;1.21&#39;,
&#39;HTTP::Request&#39;                 =&gt; &#39;5.827&#39;,
&#39;HTTP::Date&#39;                    =&gt; &#39;5.831&#39;,
&#39;URI::http&#39;                     =&gt; &#39;undef&#39;,
&#39;LWP::UserAgent&#39;                =&gt; &#39;5.835&#39;,
&#39;LWP::Authen::Digest&#39;           =&gt; &#39;undef&#39;,
&#39;LWP::Authen::Ntlm&#39;             =&gt; &#39;5.835&#39;,
&#39;LWP::Protocol::GHTTP&#39;          =&gt; &#39;undef&#39;,
&#39;LWP::Protocol::cpan&#39;           =&gt; &#39;undef&#39;,
&#39;LWP::Protocol::data&#39;           =&gt; &#39;undef&#39;,
&#39;LWP::Protocol::file&#39;           =&gt; &#39;undef&#39;,
&#39;LWP::Protocol::ftp&#39;            =&gt; &#39;undef&#39;,
&#39;LWP::Protocol::gopher&#39;         =&gt; &#39;undef&#39;,
&#39;LWP::Protocol::https&#39;          =&gt; &#39;undef&#39;,
&#39;LWP::Protocol::https10&#39;        =&gt; &#39;undef&#39;,
&#39;LWP::Protocol::loopback&#39;       =&gt; &#39;undef&#39;,
&#39;LWP::Protocol::mailto&#39;         =&gt; &#39;undef&#39;,
&#39;LWP::Protocol::nntp&#39;           =&gt; &#39;undef&#39;,
&#39;LWP::Protocol::nogo&#39;           =&gt; &#39;undef&#39;,
&#39;LWP::Authen::Basic&#39;            =&gt; &#39;undef&#39;,
&#39;LWP::Protocol::http&#39;           =&gt; &#39;undef&#39;,
&#39;LWP::Protocol::http10&#39;         =&gt; &#39;undef&#39;,
&#39;HTML::LinkExtor&#39;               =&gt; &#39;3.60&#39;,
&#39;Archive::Zip&#39;                  =&gt; &#39;1.30&#39;,
&#39;Crypt::SSLeay::X509&#39;           =&gt; &#39;undef&#39;,
&#39;Crypt::SSLeay::CTX&#39;            =&gt; &#39;undef&#39;,
&#39;IO::Pty&#39;                       =&gt; &#39;1.10&#39;,
&#39;IO::Tty&#39;                       =&gt; &#39;1.10&#39;,
&#39;HTML::Tagset&#39;                  =&gt; &#39;3.20&#39;,
&#39;HTML::Parser&#39;                  =&gt; &#39;3.68&#39;,
&#39;URI&#39;                           =&gt; &#39;1.58&#39;,
&#39;URI::data&#39;                     =&gt; &#39;undef&#39;,
&#39;URI::_query&#39;                   =&gt; &#39;undef&#39;,
&#39;URI::_punycode&#39;                =&gt; &#39;0.03&#39;,
&#39;URI::_userpass&#39;                =&gt; &#39;undef&#39;,
&#39;URI::mailto&#39;                   =&gt; &#39;undef&#39;,
&#39;URI::IRI&#39;                      =&gt; &#39;undef&#39;,
&#39;URI::QueryParam&#39;               =&gt; &#39;undef&#39;,
&#39;URI::Split&#39;                    =&gt; &#39;undef&#39;,
&#39;URI::_foreign&#39;                 =&gt; &#39;undef&#39;,
&#39;URI::_segment&#39;                 =&gt; &#39;undef&#39;,
&#39;URI::file::FAT&#39;                =&gt; &#39;undef&#39;,
&#39;URI::file::Mac&#39;                =&gt; &#39;undef&#39;,
&#39;URI::file::OS2&#39;                =&gt; &#39;undef&#39;,
&#39;URI::file::QNX&#39;                =&gt; &#39;undef&#39;,
&#39;URI::ftp&#39;                      =&gt; &#39;undef&#39;,
&#39;URI::gopher&#39;                   =&gt; &#39;undef&#39;,
&#39;URI::https&#39;                    =&gt; &#39;undef&#39;,
&#39;URI::ldapi&#39;                    =&gt; &#39;undef&#39;,
&#39;URI::ldaps&#39;                    =&gt; &#39;undef&#39;,
&#39;URI::mms&#39;                      =&gt; &#39;undef&#39;,
&#39;URI::nntp&#39;                     =&gt; &#39;undef&#39;,
&#39;URI::pop&#39;                      =&gt; &#39;undef&#39;,
&#39;URI::rlogin&#39;                   =&gt; &#39;undef&#39;,
&#39;URI::rsync&#39;                    =&gt; &#39;undef&#39;,
&#39;URI::rtspu&#39;                    =&gt; &#39;undef&#39;,
&#39;URI::sips&#39;                     =&gt; &#39;undef&#39;,
&#39;URI::snews&#39;                    =&gt; &#39;undef&#39;,
&#39;URI::ssh&#39;                      =&gt; &#39;undef&#39;,
&#39;URI::telnet&#39;                   =&gt; &#39;undef&#39;,
&#39;URI::tn3270&#39;                   =&gt; &#39;undef&#39;,
&#39;URI::Heuristic&#39;                =&gt; &#39;4.19&#39;,
&#39;URI::_idna&#39;                    =&gt; &#39;undef&#39;,
&#39;URI::file::Unix&#39;               =&gt; &#39;undef&#39;,
&#39;URI::ldap&#39;                     =&gt; &#39;1.11&#39;,
&#39;URI::rtsp&#39;                     =&gt; &#39;undef&#39;,
&#39;URI::_login&#39;                   =&gt; &#39;undef&#39;,
&#39;URI::file::Win32&#39;              =&gt; &#39;undef&#39;,
&#39;URI::file::Base&#39;               =&gt; &#39;undef&#39;,
&#39;URI::_ldap&#39;                    =&gt; &#39;1.11&#39;,
&#39;URI::news&#39;                     =&gt; &#39;undef&#39;,
&#39;URI::sip&#39;                      =&gt; &#39;0.10&#39;,
&#39;URI::_generic&#39;                 =&gt; &#39;undef&#39;,
&#39;URI::_server&#39;                  =&gt; &#39;undef&#39;,
&#39;HTTP::Cookies::Netscape&#39;       =&gt; &#39;5.832&#39;,
&#39;HTTP::Message&#39;                 =&gt; &#39;5.837&#39;,
&#39;IO::Tty::Constant&#39;             =&gt; &#39;undef&#39;,
&#39;HTML::Entities&#39;                =&gt; &#39;3.68&#39;,
&#39;File::Listing&#39;                 =&gt; &#39;5.837&#39;,
&#39;HTTP::Negotiate&#39;               =&gt; &#39;5.835&#39;,
&#39;LWP::MediaTypes&#39;               =&gt; &#39;5.835&#39;,
&#39;Net::HTTP&#39;                     =&gt; &#39;5.834&#39;,
&#39;HTTP::Status&#39;                  =&gt; &#39;5.817&#39;,
&#39;Net::HTTPS&#39;                    =&gt; &#39;5.819&#39;,
&#39;Net::SSL&#39;                      =&gt; &#39;2.85&#39;,
&#39;HTML::HeadParser&#39;              =&gt; &#39;3.66&#39;,
&#39;HTTP::Config&#39;                  =&gt; &#39;5.835&#39;,
&#39;HTTP::Request::Common&#39;         =&gt; &#39;5.824&#39;,
&#39;LWP::ConnCache&#39;                =&gt; &#39;5.810&#39;,
&#39;HTTP::Cookies&#39;                 =&gt; &#39;5.837&#39;,
&#39;HTTP::Headers&#39;                 =&gt; &#39;5.835&#39;,
&#39;HTTP::Headers::Util&#39;           =&gt; &#39;5.817&#39;,
&#39;LWP::MemberMixin&#39;              =&gt; &#39;undef&#39;,
&#39;LWP&#39;                           =&gt; &#39;5.837&#39;,
&#39;LWP::Protocol&#39;                 =&gt; &#39;5.829&#39;,
&#39;HTTP::Response&#39;                =&gt; &#39;5.836&#39;,
&#39;PAR::Dist&#39;                     =&gt; &#39;0.47&#39;,
&#39;YAML::Tiny&#39;                    =&gt; &#39;1.50&#39;,
&#39;Net::HTTP::Methods&#39;            =&gt; &#39;5.834&#39;,
&#39;Crypt::SSLeay::Conn&#39;           =&gt; &#39;undef&#39;,
&#39;Crypt::SSLeay::Err&#39;            =&gt; &#39;undef&#39;,
&#39;Crypt::SSLeay::MainContext&#39;    =&gt; &#39;undef&#39;,
&#39;Crypt::SSLeay&#39;                 =&gt; &#39;0.58&#39;,
&#39;LWP::Simple&#39;                   =&gt; &#39;5.835&#39;,
&#39;URI::WithBase&#39;                 =&gt; &#39;2.19&#39;,
&#39;URI::file&#39;                     =&gt; &#39;4.20&#39;,
&#39;URI::Escape&#39;                   =&gt; &#39;3.30&#39;,
==================================================


===============================================
                hostB
===============================================

hostB [210]: ls
lib  test.pl
hostB [211]: cat test.pl

use FindBin;
use lib &#34;$FindBin::Bin/lib&#34;;

use MYMODULE;



print &#34;Hello World!\n&#34;
hostB [212]: perl -V
Summary of my perl5 &#40;revision 5 version 12 subversion 3&#41; configuration:

  Platform:
    osname=linux, osvers=2.6.9-34.el, archname=ppc64-linux-thread-multi
    uname=&#39;linux hostB 2.6.9-34.el #1 smp fri feb 24 16:46:57 est 2006
ppc64 ppc64 ppc64 gnulinux &#39;
    config_args=&#39;-Dcc=gcc -Dusethreads
-Dprefix=/home/dfmao/perl-5.12.3/plinuxR -de&#39;
    hint=recommended, useposix=true, d_sigaction=define
    useithreads=define, usemultiplicity=define
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=undef, use64bitall=undef, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;gcc&#39;, ccflags =&#39;-D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing
-pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64&#39;,
    optimize=&#39;-O1&#39;,
    cppflags=&#39;-D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe
-I/usr/local/include&#39;
    ccversion=&#39;&#39;, gccversion=&#39;3.4.5 20051201 &#40;Red Hat 3.4.5-2&#41;&#39;,
gccosandvers=&#39;&#39;
    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=4321
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=8
    ivtype=&#39;long&#39;, ivsize=4, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;,
lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;gcc&#39;, ldflags =&#39; -L/usr/local/lib&#39;
    libpth=/usr/local/lib /lib /usr/lib /lib64 /usr/lib64
    libs=-lnsl -lgdbm -ldb -ldl -lm -lcrypt -lutil -lpthread -lc
    perllibs=-lnsl -ldl -lm -lcrypt -lutil -lpthread -lc
    libc=/lib/libc-2.3.4.so, so=so, useshrplib=false, libperl=libperl.a
    gnulibc_version=&#39;2.3.4&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags=&#39;-Wl,-E&#39;
    cccdlflags=&#39;-fPIC&#39;, lddlflags=&#39;-shared -O1 -L/usr/local/lib&#39;


Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options: MULTIPLICITY PERL_DONT_CREATE_GVSV
                        PERL_IMPLICIT_CONTEXT PERL_MALLOC_WRAP USE_ITHREADS
                        USE_LARGE_FILES USE_PERLIO USE_PERL_ATOF
                        USE_REENTRANT_API
  Built under linux
  Compiled at Oct 26 2011 23:07:19
  @INC:

/home/dfmao/perl-5.12.3/plinuxR/lib/site_perl/5.12.3/ppc64-linux-thread-multi
    /home/dfmao/perl-5.12.3/plinuxR/lib/site_perl/5.12.3
    /home/dfmao/perl-5.12.3/plinuxR/lib/5.12.3/ppc64-linux-thread-multi
    /home/dfmao/perl-5.12.3/plinuxR/lib/5.12.3
    .

hostB [215]: perl -MModule::ScanDeps -e &#39;print $Module::ScanDeps::VERSION&#39;
1.04

hostB [216]: scandeps.pl -c test.pl
Can&#39;t locate MYMODULE.pm in @INC &#40;@INC contains: /tmp/lib
/home/dfmao/perl-5.12.3/plinuxR/lib/site_perl/5.12.3/ppc64-linux-thread-multi
/home/dfmao/perl-5.12.3/plinuxR/lib/site_perl/5.12.3
/home/dfmao/perl-5.12.3/plinuxR/lib/5.12.3/ppc64-linux-thread-multi
/home/dfmao/perl-5.12.3/plinuxR/lib/5.12.3 .&#41; at test.pl line 5.
BEGIN failed--compilation aborted at test.pl line 5.
SYSTEM ERROR in compiling test.pl: 512 at
/home/dfmao/perl-5.12.3/plinuxR/lib/site_perl/5.12.3/Module/ScanDeps.pm
line 1265.


-- 
---------------------------------------------------------
Market is wrong, But I am right!
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/994433/517813/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/517813">with headers</a>
<br />
<span class="downloadcontenttype">text/html 18.7k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-994787" href="/Public/Bug/Display.html?id=72082#txn-994787">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;01&nbsp;17:49:10&nbsp;2011</span>
    <span class="description">RSCHUPP [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Take odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-994788" href="/Public/Bug/Display.html?id=72082#txn-994788">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;01&nbsp;17:49:13&nbsp;2011</span>
    <span class="description">RSCHUPP [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-994805" href="/Public/Bug/Display.html?id=72082#txn-994805">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;01&nbsp;18:11:09&nbsp;2011</span>
    <span class="description">RSCHUPP [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/994805/518010/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/518010">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 872b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">OK, I see what&#39;s happening: 

When you call scandeps.pl with option
-c &#40;or -x&#41; it creates a temporary file that contains the text
of the file to scan plus some prologue code. This prologue code
will be called at the end of compilation &#40;-c&#41; or execution &#40;-x&#41;
and just dumps the contents of %INC, $INC etc. scandeps.pl runs
an inferior perl on this temporary file and reads back the information.

This temporary file used to be created in your working directory,
so if your script is also located there, FindBin for your script
and for the temp file would come to the same result.

In 1.04 I changed it so that the temp file is created in your
platform&#39;s temp directory. That explains why you see /tmp/lib
in @INC in the error message.

Can you try the attached patch? It makes FindBin return
the correct result by setting $0 to the path of your script.

Cheers, Roderich
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> findbin.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/994805/518011/findbin.patch">Download findbin.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Index: lib/Module/ScanDeps.pm
===================================================================
--- lib/Module/ScanDeps.pm	&#40;revision 1285&#41;
+++ lib/Module/ScanDeps.pm	&#40;working copy&#41;
@@ -1241,14 +1241,23 @@
     my &#40;$feed_fh, $feed_file&#41; = File::Temp::tempfile&#40;&#41;;
     my $dump_file = &#34;$feed_file.out&#34;;
 
+    require Data::Dumper;
+
+    # fake $0 &#40;to $file&#41; so that FindBin works as expected
+    # NOTE: We don&#39;t directly assign to $0 as it has magic &#40;that may
+    # fail, cf. perlvar&#40;1&#41;&#41;, instead we alias *0 to a package variable
+    # holding the correct value.
+    print $feed_fh &#34;BEGIN { &#34;, 
+                   Data::Dumper-&gt;Dump&#40;[ $file ], [ &#34;Module::ScanDeps::DataFeed::_0&#34; ]&#41;,
+                   &#34;*0 = \\\$Module::ScanDeps::DataFeed::_0; }\n&#34;;
+
     print $feed_fh $do_compile ? &#34;INIT {\n&#34; : &#34;END {\n&#34;;
     # NOTE: When compiling the block will run _after_ all CHECK blocks
     # &#40;but _before_ the first INIT block&#41; and will terminate the program.
     # When executing the block will run as the first END block and 
     # the programs continues.
 
-    # correctly escape filenames
-    require Data::Dumper;
+    # correctly escape strings containing filenames
     print $feed_fh map { &#34;my $_&#34; } Data::Dumper-&gt;Dump&#40;
                        [ $INC{&#34;Module/ScanDeps/DataFeed.pm&#34;}, $dump_file ],
                        [ qw&#40; datafeedpm dump_file &#41; ]&#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-994903" href="/Public/Bug/Display.html?id=72082#txn-994903">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;01&nbsp;21:36:00&nbsp;2011</span>
    <span class="description">mdengfeng [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #72082] $FindBin::Bin issue on Moudel::ScanDeps 1.04</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 2 Nov 2011 09:35:51 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-ScanDeps [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> DengFeng Mao &lt;mdengfeng [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/994903/518068/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/518068">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes, the patch works for the FindBin case now. scandeps.pl can output the
correct modules.
Really appreciate your quick response.

Thanks
Dengfeng

2011/11/2 Roderich Schupp via RT &lt;bug-Module-ScanDeps@rt.cpan.org&gt;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=72082">https://rt.cpan.org/Ticket/Display.html?id=72082</a></span> &gt;
&gt;
&gt; OK, I see what&#39;s happening:
&gt;
&gt; When you call scandeps.pl with option
&gt; -c &#40;or -x&#41; it creates a temporary file that contains the text
&gt; of the file to scan plus some prologue code. This prologue code
&gt; will be called at the end of compilation &#40;-c&#41; or execution &#40;-x&#41;
&gt; and just dumps the contents of %INC, $INC etc. scandeps.pl runs
&gt; an inferior perl on this temporary file and reads back the information.
&gt;
&gt; This temporary file used to be created in your working directory,
&gt; so if your script is also located there, FindBin for your script
&gt; and for the temp file would come to the same result.
&gt;
&gt; In 1.04 I changed it so that the temp file is created in your
&gt; platform&#39;s temp directory. That explains why you see /tmp/lib
&gt; in @INC in the error message.
&gt;
&gt; Can you try the attached patch? It makes FindBin return
&gt; the correct result by setting $0 to the path of your script.
&gt;
&gt; Cheers, Roderich
&gt;
&gt;
&gt;
&gt;
</div>

-- 
---------------------------------------------------------
Market is wrong, But I am right!
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/994903/518069/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/518069">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.8k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-995178" href="/Public/Bug/Display.html?id=72082#txn-995178">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;02&nbsp;14:31:28&nbsp;2011</span>
    <span class="description">RSCHUPP [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/995178/518244/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/518244">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 237b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2011-11-01 21:36:00, mdengfeng@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Yes, the patch works for the FindBin case now. scandeps.pl can output the
&gt; correct modules.
</div>
Thanks for confirming. 
Fix is contained in 1.05, just uploaded to CPAN.

Cheers, Roderich
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-995182" href="/Public/Bug/Display.html?id=72082#txn-995182">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;02&nbsp;14:31:29&nbsp;2011</span>
    <span class="description">RSCHUPP [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.352513</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
