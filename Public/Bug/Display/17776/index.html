<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #17776 for Perl-Critic: 3rd arg to Violation-&gt;new&#40;&#41; must be ARRAY ref ...</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #17776 for Perl-Critic: 3rd arg to Violation-&gt;new&#40;&#41; must be ARRAY ref ...</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Perl-Critic">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Perl-Critic">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Perl-Critic">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Perl-Critic">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/Perl-Critic/Perl-Critic/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Perl-Critic">Perl-Critic CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">17776</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Perl-Critic">Perl-Critic</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">thaljef [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
david.pitt [...] nab.com.au

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-25198-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
0.13</li>
<li>
0.14</li>
</ul>
    </td>
  </tr>
  <tr id="CF-25199-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.15    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=17776">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-166837" href="/Public/Bug/Display.html?id=17776#txn-166837">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;20&nbsp;20:29:52&nbsp;2006</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 3rd arg to Violation-&gt;new&#40;&#41; must be ARRAY ref ...</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/166837/53577/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/53577">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Perl-Critic-0.13
Perl-Critic-0.14

$ perlcritic &lt;&lt;EoT
#!/usr/bin/perl

#my %H1 = &#40;A =&gt; [ 1 ], B =&gt; [ 2 ], C =&gt; []&#41;;
my %H2 = &#40;
    A =&gt; [1],
    B =&gt; [2],
    C =&gt; []
&#41;;
EoT
3rd arg to Violation-&gt;new&#40;&#41; must be ARRAY ref 
at /opt/perl/5.8.7/lib/site_perl/Perl/Critic/Policy/CodeLayout/RequireT
railingCommas.pm line 34

Interestingly this is affected by whitespace, the same declaration on 
line 3 invokes the violation OK.

$ perl -V
Summary of my perl5 &#40;revision 5 version 8 subversion 7&#41; configuration:
  Platform:
    osname=solaris, osvers=2.8, archname=sun4-solaris-64
    uname=&#39;sunos tdevs183 5.8 generic_117350-05 sun4u sparc sunw,netra-
t12 &#39;
    config_args=&#39;-Duseshrplib -Duse64bitall -Dprefix=/opt/perl/5.8.7 -
Dscriptdir=/opt/perl/5.8.7/bin -
Dinstallprefix=/tmp/kalm/build_perl/5.8.7/core/dist//opt/perl/5.8.7 -
Darchlib=/opt/perl/5.8.7/lib/sun4-solaris-64 -
Dprivlib=/opt/perl/5.8.7/lib -
Dsitearch=/opt/perl/5.8.7/lib/site_perl/sun4-solaris-64 -
Dsitelib=/opt/perl/5.8.7/lib/site_perl -Dlocincpth=/opt/local/include -
Dloclibpth=/opt/local/lib -Dperl5=/opt/perl/5.8.7/bin/perl -des&#39;
    hint=recommended, useposix=true, d_sigaction=define
    usethreads=undef use5005threads=undef useithreads=undef 
usemultiplicity=undef
    useperlio=define d_sfio=undef uselargefiles=define usesocks=undef
    use64bitint=define use64bitall=define uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;cc&#39;, ccflags =&#39;-xarch=v9 -I/opt/local/include -
D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64&#39;,
    optimize=&#39;-O&#39;,
    cppflags=&#39;-xarch=v9 -I/opt/local/include&#39;
    ccversion=&#39;Sun C 5.5 Patch 112760-15 2004/11/10&#39;, gccversion=&#39;&#39;, 
gccosandvers=&#39;&#39;
    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=87654321
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
    ivtype=&#39;long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;, 
lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;cc&#39;, ldflags =&#39; -xarch=v9 -L/usr/lib/sparcv9 -
L/usr/ccs/lib/sparcv9 -L/opt/studio8/SUNWspro/prod/lib/v9 -
L/opt/local/lib &#39;
    
libpth=/usr/lib/sparcv9 /usr/ccs/lib/sparcv9 /opt/studio8/SUNWspro/prod
/lib/v9 /opt/local/lib /usr/lib /usr/ccs/lib /usr/local/lib
    libs=-lsocket -lnsl -ldl -lm -lc
    perllibs=-lsocket -lnsl -ldl -lm -lc
    libc=/usr/lib/sparcv9/libc.so, so=so, useshrplib=true, 
libperl=libperl.so
    gnulibc_version=&#39;&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags=&#39;  -
R /opt/perl/5.8.7/lib/sun4-solaris-64/CORE&#39;
    cccdlflags=&#39;-KPIC&#39;, lddlflags=&#39; -G -xarch=v9 -L/usr/lib/sparcv9 -
L/usr/ccs/lib/sparcv9 -L/opt/studio8/SUNWspro/prod/lib/v9 -
L/opt/local/lib&#39;


Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options: USE_64_BIT_INT USE_64_BIT_ALL USE_LARGE_FILES
  Built under solaris
  Compiled at Dec 16 2005 15:56:37
  %ENV:
    
PERL5LIB=&#34;/opt/kalmd/lib:/home/dpitt/myperl/lib/site_perl:/home/dpitt/m
yperl/lib&#34;
  @INC:
    /opt/kalmd/lib
    /home/dpitt/myperl/lib/site_perl/5.8.7/sun4-solaris-64
    /home/dpitt/myperl/lib/site_perl/5.8.7
    /home/dpitt/myperl/lib/site_perl
    /home/dpitt/myperl/lib/sun4-solaris-64
    /home/dpitt/myperl/lib
    /opt/perl/5.8.7/lib/sun4-solaris-64
    /opt/perl/5.8.7/lib
    /opt/perl/5.8.7/lib/site_perl/sun4-solaris-64
    /opt/perl/5.8.7/lib/site_perl
    /opt/perl/5.8.7/lib/site_perl
    .

$ uname -a
SunOS tdevs183 5.8 Generic_117350-28 sun4u sparc SUNW,Netra-T12
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-166946" href="/Public/Bug/Display.html?id=17776#txn-166946">#</a>      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;21&nbsp;01:26:57&nbsp;2006</span>
    <span class="description">thaljef [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-166947" href="/Public/Bug/Display.html?id=17776#txn-166947">#</a>      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;21&nbsp;01:26:58&nbsp;2006</span>
    <span class="description">thaljef [...] cpan.org -  Given to THALJEF</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-168711" href="/Public/Bug/Display.html?id=17776#txn-168711">#</a>      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;26&nbsp;17:03:24&nbsp;2006</span>
    <span class="description">thaljef [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/168711/54640/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/54640">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 843b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have not been able to reproduce this bug.  The Violation class is 
definitely not compatible between versions 0.13 and versions 0.14.  Is 
it possible that you have combined the distributions somehow?

The one-line example passes because the RequireTrailingComma policy 
only applies to list declarations that are multi-line.

-Jeff

On Mon Feb 20 20:29:52 2006, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Perl-Critic-0.13
&gt; Perl-Critic-0.14
&gt; 
&gt; $ perlcritic &lt;&lt;EoT
&gt; #!/usr/bin/perl
&gt; 
&gt; #my %H1 = &#40;A =&gt; [ 1 ], B =&gt; [ 2 ], C =&gt; []&#41;;
&gt; my %H2 = &#40;
&gt;     A =&gt; [1],
&gt;     B =&gt; [2],
&gt;     C =&gt; []
&gt; &#41;;
&gt; EoT
&gt; 3rd arg to Violation-&gt;new&#40;&#41; must be ARRAY ref 
&gt; 
</div>at /opt/perl/5.8.7/lib/site_perl/Perl/Critic/Policy/CodeLayout/RequireT
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; railingCommas.pm line 34
&gt; 
&gt; Interestingly this is affected by whitespace, the same declaration 
</div>on 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; line 3 invokes the violation OK.
</div> 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-168713" href="/Public/Bug/Display.html?id=17776#txn-168713">#</a>      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;26&nbsp;17:32:34&nbsp;2006</span>
    <span class="description">david.pitt [...] nab.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> jeffrey_thalhammer [...] yahoo.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17776] 3rd arg to Violation-&gt;new&#40;&#41; must be ARRAY ref ...</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 27 Feb 2006 09:31:37 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David.Pitt [...] nab.com.au</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/168713/54642/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/54642">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Hi Jeffrey,

The bug occurs under our clean Perl 5.8.7/Perl-Critic 0.13 install, and
also under a dirty 5.6.1/0.14 install. I&#39;ll try it again when we upgrade
the clean environment to P::C 0.14, in the meantime don&#39;t worry about it.

Haven&#39;t had a response from Corporate Affairs about your case study, will
ping them this week.

Regards,

David Pitt  | Basel II Technology | National Australia Bank Limited
Phone +61 3 8641 2014 | Email david.pitt@nab.com.au | Level 6, 500 Bourke
Street, Melbourne


                                                                           
             &#34;Jeffrey                                                      
             Thalhammer via                                                
             RT&#34;                                                        To 
             &lt;bug-Perl-Critic@         david.pitt@nab.com.au               
             rt.cpan.org&gt;                                               cc 
                                                                           
             27/02/2006 09:03                                      Subject 
             AM                        [rt.cpan.org #17776] 3rd arg to     
                                       Violation-&gt;new&#40;&#41; must be ARRAY ref  
                                       ...                                 
             Please respond to                                             
             bug-Perl-Critic@r                                             
                t.cpan.org                                                 
                                                                           
                                                                           
                                                                           




I have not been able to reproduce this bug.  The Violation class is
definitely not compatible between versions 0.13 and versions 0.14.  Is
it possible that you have combined the distributions somehow?

The one-line example passes because the RequireTrailingComma policy
only applies to list declarations that are multi-line.

-Jeff

On Mon Feb 20 20:29:52 2006, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Perl-Critic-0.13
&gt; Perl-Critic-0.14
&gt;
&gt; $ perlcritic &lt;&lt;EoT
&gt; #!/usr/bin/perl
&gt;
&gt; #my %H1 = &#40;A =&gt; [ 1 ], B =&gt; [ 2 ], C =&gt; []&#41;;
&gt; my %H2 = &#40;
&gt;     A =&gt; [1],
&gt;     B =&gt; [2],
&gt;     C =&gt; []
&gt; &#41;;
&gt; EoT
&gt; 3rd arg to Violation-&gt;new&#40;&#41; must be ARRAY ref
&gt;
</div>at /opt/perl/5.8.7/lib/site_perl/Perl/Critic/Policy/CodeLayout/RequireT
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; railingCommas.pm line 34
&gt;
&gt; Interestingly this is affected by whitespace, the same declaration
</div>on
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; line 3 invokes the violation OK.
</div>




National Australia Bank Limited - ACN 004 044 937
This email may contain confidential information. If you are not the intended recipient, please immediately notify us at postmaster@nab.com.au or by replying to the sender, and then destroy all copies of this email. Except where this email indicates otherwise, views expressed in this email are those of the sender and not of National Australia Bank Limited. Advice in this email does not take account of your objectives, financial situation, or needs. It is important for you to consider these matters and, if the e-mail refers to a product&#40;s&#41;, you should read the relevant Product Disclosure Statement&#40;s&#41;/other disclosure document&#40;s&#41; before making any decisions. If you do not want email marketing from us in future, forward this email with &#34;unsubscribe&#34; in the subject line to Unsubscribe@nab.com.au in order to stop marketing emails from this sender. National Australia Bank Limited does not represent that this email is free of errors, viruses or interference
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-181758" href="/Public/Bug/Display.html?id=17776#txn-181758">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;30&nbsp;14:06:38&nbsp;2006</span>
    <span class="description">thaljef [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/181758/63677/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/63677">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m almost certain this is caused by the incompatibilities between 
version 0.13 and later versions.  The easiest solution is to delete 
the Perl/Critic/Policy directory in your installation and reinstall.  
Beware if you have installed any custom Policy modules in that 
directory.

-Jeff

On Mon Feb 20 20:29:52 2006, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Perl-Critic-0.13
&gt; Perl-Critic-0.14
&gt; 
&gt; $ perlcritic &lt;&lt;EoT
&gt; #!/usr/bin/perl
&gt; 
&gt; #my %H1 = &#40;A =&gt; [ 1 ], B =&gt; [ 2 ], C =&gt; []&#41;;
&gt; my %H2 = &#40;
&gt;     A =&gt; [1],
&gt;     B =&gt; [2],
&gt;     C =&gt; []
&gt; &#41;;
&gt; EoT
&gt; 3rd arg to Violation-&gt;new&#40;&#41; must be ARRAY ref 
&gt; 
</div>at /opt/perl/5.8.7/lib/site_perl/Perl/Critic/Policy/CodeLayout/RequireT
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; railingCommas.pm line 34
&gt; 
&gt; Interestingly this is affected by whitespace, the same declaration 
</div>on 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; line 3 invokes the violation OK.
&gt; 
&gt; $ perl -V
&gt; Summary of my perl5 &#40;revision 5 version 8 subversion 7&#41; 
</div>configuration:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;   Platform:
&gt;     osname=solaris, osvers=2.8, archname=sun4-solaris-64
&gt;     uname=&#39;sunos tdevs183 5.8 generic_117350-05 sun4u sparc 
</div>sunw,netra-
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; t12 &#39;
&gt;     config_args=&#39;-Duseshrplib -Duse64bitall -
</div>Dprefix=/opt/perl/5.8.7 -
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Dscriptdir=/opt/perl/5.8.7/bin -
&gt; Dinstallprefix=/tmp/kalm/build_perl/5.8.7/core/dist//opt/perl/5.8.7 -
&gt; Darchlib=/opt/perl/5.8.7/lib/sun4-solaris-64 -
&gt; Dprivlib=/opt/perl/5.8.7/lib -
&gt; Dsitearch=/opt/perl/5.8.7/lib/site_perl/sun4-solaris-64 -
&gt; Dsitelib=/opt/perl/5.8.7/lib/site_perl -
</div>Dlocincpth=/opt/local/include -
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Dloclibpth=/opt/local/lib -Dperl5=/opt/perl/5.8.7/bin/perl -des&#39;
&gt;     hint=recommended, useposix=true, d_sigaction=define
&gt;     usethreads=undef use5005threads=undef useithreads=undef 
&gt; usemultiplicity=undef
&gt;     useperlio=define d_sfio=undef uselargefiles=define usesocks=undef
&gt;     use64bitint=define use64bitall=define uselongdouble=undef
&gt;     usemymalloc=n, bincompat5005=undef
&gt;   Compiler:
&gt;     cc=&#39;cc&#39;, ccflags =&#39;-xarch=v9 -I/opt/local/include -
&gt; D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64&#39;,
&gt;     optimize=&#39;-O&#39;,
&gt;     cppflags=&#39;-xarch=v9 -I/opt/local/include&#39;
&gt;     ccversion=&#39;Sun C 5.5 Patch 112760-15 2004/11/10&#39;, gccversion=&#39;&#39;, 
&gt; gccosandvers=&#39;&#39;
&gt;     intsize=4, longsize=8, ptrsize=8, doublesize=8, 
</div>byteorder=87654321
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;     d_longlong=define, longlongsize=8, d_longdbl=define, 
</div>longdblsize=16
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;     ivtype=&#39;long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8, 
</div>Off_t=&#39;off_t&#39;, 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; lseeksize=8
&gt;     alignbytes=8, prototype=define
&gt;   Linker and Libraries:
&gt;     ld=&#39;cc&#39;, ldflags =&#39; -xarch=v9 -L/usr/lib/sparcv9 -
&gt; L/usr/ccs/lib/sparcv9 -L/opt/studio8/SUNWspro/prod/lib/v9 -
&gt; L/opt/local/lib &#39;
&gt;     
&gt; 
</div>libpth=/usr/lib/sparcv9 /usr/ccs/lib/sparcv9 /opt/studio8/SUNWspro/prod
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; /lib/v9 /opt/local/lib /usr/lib /usr/ccs/lib /usr/local/lib
&gt;     libs=-lsocket -lnsl -ldl -lm -lc
&gt;     perllibs=-lsocket -lnsl -ldl -lm -lc
&gt;     libc=/usr/lib/sparcv9/libc.so, so=so, useshrplib=true, 
&gt; libperl=libperl.so
&gt;     gnulibc_version=&#39;&#39;
&gt;   Dynamic Linking:
&gt;     dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags=&#39;  -
&gt; R /opt/perl/5.8.7/lib/sun4-solaris-64/CORE&#39;
&gt;     cccdlflags=&#39;-KPIC&#39;, lddlflags=&#39; -G -xarch=v9 -L/usr/lib/sparcv9 -
&gt; L/usr/ccs/lib/sparcv9 -L/opt/studio8/SUNWspro/prod/lib/v9 -
&gt; L/opt/local/lib&#39;
&gt; 
&gt; 
&gt; Characteristics of this binary &#40;from libperl&#41;:
&gt;   Compile-time options: USE_64_BIT_INT USE_64_BIT_ALL USE_LARGE_FILES
&gt;   Built under solaris
&gt;   Compiled at Dec 16 2005 15:56:37
&gt;   %ENV:
&gt;     
&gt; 
</div>PERL5LIB=&#34;/opt/kalmd/lib:/home/dpitt/myperl/lib/site_perl:/home/dpitt/m
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; yperl/lib&#34;
&gt;   @INC:
&gt;     /opt/kalmd/lib
&gt;     /home/dpitt/myperl/lib/site_perl/5.8.7/sun4-solaris-64
&gt;     /home/dpitt/myperl/lib/site_perl/5.8.7
&gt;     /home/dpitt/myperl/lib/site_perl
&gt;     /home/dpitt/myperl/lib/sun4-solaris-64
&gt;     /home/dpitt/myperl/lib
&gt;     /opt/perl/5.8.7/lib/sun4-solaris-64
&gt;     /opt/perl/5.8.7/lib
&gt;     /opt/perl/5.8.7/lib/site_perl/sun4-solaris-64
&gt;     /opt/perl/5.8.7/lib/site_perl
&gt;     /opt/perl/5.8.7/lib/site_perl
&gt;     .
&gt; 
&gt; $ uname -a
&gt; SunOS tdevs183 5.8 Generic_117350-28 sun4u sparc SUNW,Netra-T12
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-184835" href="/Public/Bug/Display.html?id=17776#txn-184835">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;09&nbsp;21:13:19&nbsp;2006</span>
    <span class="description">thaljef [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-184836" href="/Public/Bug/Display.html?id=17776#txn-184836">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;09&nbsp;21:13:19&nbsp;2006</span>
    <span class="description">thaljef [...] cpan.org -  Fixed in 0.15 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.37506</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
