<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #83980 for libintl-perl: Test failures during installation</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #83980 for libintl-perl: Test failures during installation</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/libintl-perl/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/libintl-perl/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/libintl-perl/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/libintl-perl/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/libintl-perl">libintl-perl CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">83980</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/libintl-perl/Active/">libintl-perl</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ether [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-18278-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-18279-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




screenlog.9<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1353116/718035/screenlog.9">
Mon Apr 21 19:25:58 2014 (75.9k) by ether [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;15&nbsp;17:34:42&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Test failures</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 15 Mar 2013 12:47:31 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libintl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karen Etheridge &lt;ether [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;02&nbsp;18:00:51&nbsp;2013</span>
    <span class="description">MSCHOUT [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">What OS are you seeing this on?

I&#39;m getting the same failure on OS X 10.8, but not on Linux.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;02&nbsp;18:00:52&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;02&nbsp;18:04:41&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #83980] Test failures</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 2 Apr 2013 15:04:17 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> MSCHOUT via RT &lt;bug-libintl-perl [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karen Etheridge &lt;ether [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, Apr 02, 2013 at 06:00:52PM -0400, MSCHOUT via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=83980">https://rt.cpan.org/Ticket/Display.html?id=83980</a></span> &gt;
&gt; 
&gt; What OS are you seeing this on?
&gt; I&#39;m getting the same failure on OS X 10.8, but not on Linux.
</div>
Mac OS 10.6.8.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;08&nbsp;17:54:26&nbsp;2013</span>
    <span class="description">dwheeler [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2013-04-02 18:00:51, MSCHOUT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; What OS are you seeing this on?
&gt; 
&gt; I&#39;m getting the same failure on OS X 10.8, but not on Linux.
</div>
I see it on OS X 10.8.3, but only on Perl 5.17.

David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;07&nbsp;18:43:21&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Subject changed from &#39;Test failures&#39; to &#39;Test failures during installation&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;07&nbsp;18:43:21&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Severity Important added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;13&nbsp;12:54:01&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here is another clue:

&#40;from #cpantesters-discuss&#41;

02:11 &lt; Mithaldu&gt; BinGOs: this should be a thing of impossibility: 
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/dde7c558-bb3b-11e2-8c80-50d7c5c10595">http://www.cpantesters.org/cpan/report/dde7c558-bb3b-11e2-8c80-50d7c5c10595</a></span>
02:11 &lt; dipsy&gt; [ CPAN Testers Reports: Report for Locale-Simple-0.015 ] 
02:11 &lt; Mithaldu&gt; BinGOs: any chance i can ssh into your system and try to 
                  reproduce?
02:12 &lt; Mithaldu&gt; or at least talk this through with you?
02:23 &lt; BinGOs&gt; there&#39;s no way to get to that machine via ssh
02:25 &lt; Mithaldu&gt; BinGOs: ok, do you know if openbsd has any weirdness about 
                  environment variables then?
02:25 &lt; BinGOs&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/e84fd636-bb6b-11e2-ad73-dd0a7cfad375">http://www.cpantesters.org/cpan/report/e84fd636-bb6b-11e2-ad73-dd0a7cfad375</a></span> # the same there
02:25 &lt; dipsy&gt; [ CPAN Testers Reports: Report for Locale-Simple-0.015 ] 
02:26 &lt; BinGOs&gt; weird in what way ?
02:26 &lt; Mithaldu&gt; changing them or anything
02:27 &lt; Mithaldu&gt; see, what&#39;s going on here is this:
02:27 &lt; Mithaldu&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/GETTY/Locale-Simple-0.015/t/10-gettext.t">https://metacpan.org/source/GETTY/Locale-Simple-0.015/t/10-gettext.t</a></span>
02:27 &lt; dipsy&gt; [ t/10-gettext.t - metacpan.org ] 
02:27 &lt; Mithaldu&gt; it sets a bunch of envs there
02:27 &lt; Mithaldu&gt; you know what
02:27 &lt; Mithaldu&gt; nevermind
02:27 &lt; Mithaldu&gt; i&#39;m dumb
02:27 &lt; Mithaldu&gt; getty too
02:27 &lt; Mithaldu&gt; because he wrote a dumb test
02:27 &lt; BinGOs&gt; have you got a ssh public key
02:28 &lt; Mithaldu&gt; it shouldn&#39;t be using Locale::gettext_pp there
02:28 &lt; Mithaldu&gt; that should be _dumb
02:28 &lt; Mithaldu&gt; and in fact it should be using Locale::Simple, and not 
                  locale::gettext
02:32 &lt; Mithaldu&gt; BinGOs: thanks for the offer, but the next release will have 
                  that fixed :&#41;
02:32 &lt; Mithaldu&gt; also thanks for the smoking :D
02:36 &lt; BinGOs&gt; kein problem
09:47 &lt; ether&gt; those errors look similar to what I&#39;ve gotten from Locale::Util
09:47 &lt; ether&gt; see <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=83980">https://rt.cpan.org/Ticket/Display.html?id=83980</a></span>
09:48 &lt; dipsy&gt; [ Bug #83980 for libintl-perl: Test failures during 
               installation ] 
09:49 &lt; ether&gt; it also uses Locale::gettext_pp - should it not be?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;13&nbsp;13:10:01&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
09:49 &lt; ether&gt; it also uses Locale::gettext_pp - should it not be?
09:59 &lt; Mithaldu&gt; ether: you probably want to use gettext_dumb
09:59 &lt; Mithaldu&gt; _pp only selects the chosen locale if the operating system 
                  itself supports it for that user
10:00 &lt; Mithaldu&gt; &#40;so sprintf and what have you will also be working in the 
                  correct locale&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;20&nbsp;05:10:42&nbsp;2013</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">It looks to me that your gettext installation incorrectly caches locale settings.  It is probably this bug that has been fixed in the meantime: <span class="clickylink"><a target="new" rel="nofollow" href="https://savannah.gnu.org/bugs/?38162">https://savannah.gnu.org/bugs/?38162</a></span>

Does an upgrade of GNU gettext fix the issue?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;20&nbsp;12:10:32&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #83980] Test failures during installation</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 20 May 2013 09:10:12 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> GUIDO via RT &lt;bug-libintl-perl [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karen Etheridge &lt;ether [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, May 20, 2013 at 05:10:42AM -0400, GUIDO via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=83980">https://rt.cpan.org/Ticket/Display.html?id=83980</a></span> &gt;
&gt; 
&gt; It looks to me that your gettext installation incorrectly caches locale settings.  It is probably this bug that has been fixed in the meantime: <span class="clickylink"><a target="new" rel="nofollow" href="https://savannah.gnu.org/bugs/?38162">https://savannah.gnu.org/bugs/?38162</a></span>
&gt; 
&gt; Does an upgrade of GNU gettext fix the issue?
</div>
I already have 0.18.2 installed, which is the latest release.
That bug hasn&#39;t been released yet, but it sounds quite possible that this
could be the root issue.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;21&nbsp;07:19:48&nbsp;2013</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon May 20 12:10:32 2013, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I already have 0.18.2 installed, which is the latest release.
&gt; That bug hasn&#39;t been released yet, but it sounds quite possible that
&gt; this
&gt; could be the root issue.
</div>
0.18.2 still suffers from that bug.  So this is certainly the reason.

And unfortunately there is no way for me to work around that bug.  If it is an issue &#40;it seldom is&#41; you can always enforce the pure Perl backend with Locale::Messages::select_package&#40;&#41;.

Close this ticket?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;21&nbsp;10:44:20&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #83980] Test failures during installation</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 21 May 2013 07:43:59 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> GUIDO via RT &lt;bug-libintl-perl [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karen Etheridge &lt;ether [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, May 21, 2013 at 07:19:49AM -0400, GUIDO via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; And unfortunately there is no way for me to work around that bug.  If it is an issue &#40;it seldom is&#41; you can always enforce the pure Perl backend with Locale::Messages::select_package&#40;&#41;.
</div>
Is it not an option to call Locale::Simple/gettext_dumb rather than
gettext_pp, as described in the irc log above?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;21&nbsp;10:55:38&nbsp;2013</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue May 21 10:44:20 2013, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Is it not an option to call Locale::Simple/gettext_dumb rather than
&gt; gettext_pp, as described in the irc log above?
</div>
See <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~guido/libintl-perl-1.23/lib/Locale/gettext_dumb.pm#USAGE">http://search.cpan.org/~guido/libintl-perl-1.23/lib/Locale/gettext_dumb.pm#USAGE</a></span>

There are two possible reasons why you may want to use Locale::gettext_dumb:

1&#41; The locale that your messages are in is missing on your system.
2&#41; You need thread-safety.

In any case, the downside is that whatever textual messages the operating system produces is in a different language and/or encoding than what your application produces.  See this:

    warn __x&#40;&#34;Error opening &#39;{file}&#39;: {error}!\n&#34;,
             file =&gt; $filename, error =&gt; $!&#41;;

This is guaranteed to be consistent for Locale::gettext_xs and Locale::gettext_pp.  But if you use Locale::gettext_dumb the message and the content of $! may use different locale settings.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;06&nbsp;03:55:10&nbsp;2014</span>
    <span class="description">dmacks [...] netspace.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #83980]  Test failures during installation</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 06 Jan 2014 03:54:58 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libintl-perl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Daniel Macks&#34; &lt;dmacks [...] netspace.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On OS X 10.8, libintl-perl-1.23 still fails against libintl-0.18.3.1, which does include the <span class="clickylink"><a target="new" rel="nofollow" href="https://savannah.gnu.org/bugs/?38162">https://savannah.gnu.org/bugs/?38162</a></span> change. Same results for perl-5.12.4 &#40;from OS X&#41; and perl-5.12.6 &#40;from fink&#41;. 

dan

--
Daniel Macks
dmacks@netspace.org
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;06&nbsp;06:33:49&nbsp;2014</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mo 06. Jan 2014, 03:55:10, dmacks@netspace.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On OS X 10.8, libintl-perl-1.23 still fails against libintl-0.18.3.1,
&gt; which does include the <span class="clickylink"><a target="new" rel="nofollow" href="https://savannah.gnu.org/bugs/?38162">https://savannah.gnu.org/bugs/?38162</a></span> change.
&gt; Same results for perl-5.12.4 &#40;from OS X&#41; and perl-5.12.6 &#40;from fink&#41;.
</div>
I have no Mac around at the moment.  But since libintl-perl only links against libintl there is not much that I could do about the issue anyway.

Can&#39;t you enfoce using the Perl version? You just have to write 

    Locale::Messages-&gt;select_package &#40;&#39;gettext_pp&#39;&#41;;

into a BEGIN block.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;06&nbsp;17:57:27&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2014-01-06 00:55:10, dmacks@netspace.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On OS X 10.8, libintl-perl-1.23 still fails against libintl-0.18.3.1,
&gt; which does include the <span class="clickylink"><a target="new" rel="nofollow" href="https://savannah.gnu.org/bugs/?38162">https://savannah.gnu.org/bugs/?38162</a></span> change.
&gt; Same results for perl-5.12.4 &#40;from OS X&#41; and perl-5.12.6 &#40;from fink&#41;.
</div>
Confirmed, I&#39;m running the gettext @0.18.3.1_2 &#40;devel&#41; package from macports and have the same test failures.

Are we *really really* sure that this bug in gettext is the cause?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;07&nbsp;03:43:04&nbsp;2014</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Am Mo 06. Jan 2014, 17:57:27, ETHER schrieb:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Are we *really really* sure that this bug in gettext is the cause?
</div>
Can you copy the output of the failed test?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;07&nbsp;12:14:09&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #83980] Test failures during installation</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 7 Jan 2014 09:13:51 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> GUIDO via RT &lt;bug-libintl-perl [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karen Etheridge &lt;ether [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;21&nbsp;19:25:58&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2014-01-07 09:14:09, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue, Jan 07, 2014 at 03:43:05AM -0500, GUIDO via RT wrote:
<div class="message-stanza open">&gt; &gt; Can you copy the output of the failed test?
</div>&gt; 
&gt; I wonder if you might find it useful to print the version of the
&gt; gettext
&gt; library that is found, from Makefile.PL or during relevant tests?
&gt; 
&gt; &#39;gettext --version&#39; reports gettext &#40;GNU gettext-runtime&#41; 0.18.3
&gt; 
</div>
Hi, just following up...

currently, &#34;gettext --version&#34; prints &#34;gettext &#40;GNU gettext-runtime&#41; 0.18.3&#34;, and &#34;port list gettext&#34; reports &#34;gettext  @0.18.3.2  devel/gettext&#34;.

&#34;locale&#34; prints:

LANG=&#34;en_CA.UTF-8&#34;
LC_COLLATE=&#34;en_CA.UTF-8&#34;
LC_CTYPE=&#34;en_CA.UTF-8&#34;
LC_MESSAGES=&#34;en_CA.UTF-8&#34;
LC_MONETARY=&#34;en_CA.UTF-8&#34;
LC_NUMERIC=&#34;en_CA.UTF-8&#34;
LC_TIME=&#34;en_CA.UTF-8&#34;
LC_ALL=


I just cloned your git repo at git://git.guido-flohr.net/perl/libintl-perl.git, and ran perl Makefile.PL; make; make test -- results are attached, but all tests passed!  I&#39;m not sure what you&#39;re doing when you package up your dist for shipping, but this is likely quite significant.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> screenlog.9</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1353116/718035/screenlog.9">Download screenlog.9</a><br />
<span class="downloadcontenttype">application/octet-stream 75.9k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;21&nbsp;19:57:39&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2013-05-21 04:19:48, GUIDO wrote:
If
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; it is an issue &#40;it seldom is&#41; you can always enforce the pure Perl
&gt; backend with Locale::Messages::select_package&#40;&#41;.
</div>

Locale::Messages is in this distribution, so that&#39;s not very helpful - one needs to get the distribution installed first before one can select a pure perl backend.  The PP version needs to be in a separate dist for it to be usable by application code.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;03&nbsp;22:12:44&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> dmacks [...] netspace.org, bug-libintl [...] rt.cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">

Hi, following up on this issue again...

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I just cloned your git repo at git://git.guido-flohr.net/perl/libintl-perl.git, and ran perl Makefile.PL; make; make test -- results are attached, but all tests passed! I&#39;m not sure what you&#39;re doing when you package up your dist for shipping, but this is likely quite significant.
</div>
There are quite significant differences between the git repository and what is up on the CPAN. For one, the version in git thinks it is version 2.0.0, not 1.23. But it actually appears that all revisions after 1.20 are not reflected in git.

Further: *TESTS PASS IN GIT*. This means it will be possible for me &#40;once you have updated the git repository to reflect recent releases&#41; to perform a bisection on the code and find out just when tests started failing, which should be quite helpful towards finding an ultimate solution.

And then:

On 2014-04-21 16:57:39, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2013-05-21 04:19:48, GUIDO wrote:
<div class="message-stanza open">&gt; &gt; If it is an issue &#40;it seldom is&#41; you can always enforce the pure Perl
&gt; &gt; backend with Locale::Messages::select_package&#40;&#41;.
</div>&gt; 
&gt; Locale::Messages is in this distribution, so that&#39;s not very helpful -
&gt; one needs to get the distribution installed first before one can
&gt; select a pure perl backend.  The PP version needs to be in a separate
&gt; dist for it to be usable by application code.
</div>
Again: a pure-perl implementation needs to ship separately from its XS equivalent, or the pure perl variant will never be able be installed on its own. And otherwise, what is the point?

And:

: [ether@tequila git/libintl-perl].9$; gettext --version
gettext &#40;GNU gettext-runtime&#41; 0.19.2
Copyright &#40;C&#41; 1995-1997, 2000-2007 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://gnu.org/licenses/gpl.html">http://gnu.org/licenses/gpl.html</a></span>&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Written by Ulrich Drepper.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;25&nbsp;14:31:49&nbsp;2015</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza">I have hit the same problem on OS X 10.10.2 with Macports.&nbsp; This is in the dependency chain for Sqitch (<span class="clickylink"><a target="new" rel="nofollow" href="http://sqitch.org/&#41;">http://sqitch.org/&#41;</a></span> and makes Sqitch troublesome to install.<br>

<br>

$ gettext --version<br>

gettext (GNU gettext-runtime) 0.19.4<br>

<br>

Test Summary Report<br>

-------------------<br>

./tests/03environment_xs.t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Wstat: 0 Tests: 85 Failed: 53)<br>

&nbsp; Failed tests:&nbsp; 8-9, 12, 14-15, 17-18, 21, 24, 26-27, 30<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32-60, 62-63, 66, 68-69, 71-72, 75, 78<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 80-81, 84<br>

./tests/03language_xs.t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Wstat: 0 Tests: 8 Failed: 1)<br>

&nbsp; Failed test:&nbsp; 8<br>

Files=183, Tests=4480, 11 wallclock secs ( 1,05 usr&nbsp; 0,39 sys +&nbsp; 8,06 cusr&nbsp; 1,30 csys = 10,80 CPU)<br>

Result: FAIL<br>


</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;25&nbsp;17:08:38&nbsp;2015</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">To reiterate &#40;again&#41; points made in previous comments on this ticket -- some previous commits in git do pass tests, so it would be extremely helpful to update the git repository to reflect all recent releases, so at least other people can try to source-dive and figure out what the problem is.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;26&nbsp;12:34:21&nbsp;2015</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Am Mi 25. Mär 2015, 17:08:38, ETHER schrieb:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; To reiterate &#40;again&#41; points made in previous comments on this ticket
&gt; -- some previous commits in git do pass tests, so it would be
&gt; extremely helpful to update the git repository to reflect all recent
&gt; releases, so at least other people can try to source-dive and figure
&gt; out what the problem is.
</div>
The original git repository was down some time due to a hardware failure.  In the meantime I have recovered the repository and made it available here:

    git://git.cantanea.com/libintl-perl.git

The branch for the current distribution is &#34;v1&#34;.  That&#39;s why you saw significant changes between CPAN and my git.

I have a Mac with ports at hand now, and will have another look at the issue as soon as possible.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;27&nbsp;06:21:45&nbsp;2015</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Tested again on a Mac.  The problem is not in libintl-perl but in GNU gettext for Mac OS X, see my new bug report: <span class="clickylink"><a target="new" rel="nofollow" href="https://savannah.gnu.org/bugs/index.php?44645">https://savannah.gnu.org/bugs/index.php?44645</a></span>

There is no workaround, it is a real showstopper on the Mac and the test reports that correctly.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;27&nbsp;06:21:47&nbsp;2015</span>
    <span class="description">GUIDO [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;31&nbsp;03:26:29&nbsp;2015</span>
    <span class="description">GUIDO [...] cpan.org -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;31&nbsp;03:36:52&nbsp;2015</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Please see the related discussion at the gettext bug tracker here: <span class="clickylink"><a target="new" rel="nofollow" href="https://savannah.gnu.org/bugs/?func=detailitem&#38;item_id=44645">https://savannah.gnu.org/bugs/?func=detailitem&#38;item_id=44645</a></span>

Conclusion: As a workaround, I will provide a wrapper Locale::Messages::setlocale&#40;&#41; that should be called instead of POSIX::setlocale&#40;&#41; for internationalized Perl programs.  That is a little bit ugly but the alternative would be to completely disable the XS interface for platforms where GNU gettext defines its own libintl_setlocale&#40;&#41; wrapper.  And after all, that is exactly what GNU gettext does, only that their wrapper is hidden by the the C preprocessor.

I will try to provide an updated version of libintl_perl in the first half of April.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;08&nbsp;07:25:03&nbsp;2015</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">fixed in 1.24
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;08&nbsp;07:25:09&nbsp;2015</span>
    <span class="description">GUIDO [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;18&nbsp;13:05:10&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-04-08 04:25:03, GUIDO wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; fixed in 1.24
</div>
Hi, just to follow up again -- this is still a problem on some OSX boxes.

Tests pass on this system &#40;OSX 10.10&#41;:

    : [ether@jaeger ~].0$; uname -a
    Darwin jaeger 14.5.0 Darwin Kernel Version 14.5.0: Tue Sep  1 21:23:09 PDT 2015; root:xnu-2782.50.1~1/RELEASE_X86_64 x86_64
    : [ether@jaeger ~].0$; gettext --version
    gettext &#40;GNU gettext-runtime&#41; 0.19.6
    Copyright &#40;C&#41; 1995-1997, 2000-2007 Free Software Foundation, Inc.
    License GPLv3+: GNU GPL version 3 or later &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://gnu.org/licenses/gpl.html">http://gnu.org/licenses/gpl.html</a></span>&gt;
    This is free software: you are free to change and redistribute it.
    There is NO WARRANTY, to the extent permitted by law.
    Written by Ulrich Drepper.


But fail on this system &#40;OSX 10.8&#41;:

    : [ether@bourbon ~]$; uname -a
    Darwin bourbon 12.6.0 Darwin Kernel Version 12.6.0: Wed Mar 18 16:23:48 PDT 2015; root:xnu-2050.48.19~1/RELEASE_X86_64 x86_64
    : [ether@bourbon ~]$; gettext --version
    gettext &#40;GNU gettext-runtime&#41; 0.19.7
    Copyright &#40;C&#41; 1995-1997, 2000-2007 Free Software Foundation, Inc.
    License GPLv3+: GNU GPL version 3 or later &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://gnu.org/licenses/gpl.html">http://gnu.org/licenses/gpl.html</a></span>&gt;
    This is free software: you are free to change and redistribute it.
    There is NO WARRANTY, to the extent permitted by law.
    Written by Ulrich Drepper.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;18&nbsp;13:05:10&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;16&nbsp;14:43:37&nbsp;2016</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Hi,

Am Do 18. Feb 2016, 13:05:10, ETHER schrieb:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2015-04-08 04:25:03, GUIDO wrote:
<div class="message-stanza open">&gt; &gt; fixed in 1.24
</div>&gt; 
&gt; Hi, just to follow up again -- this is still a problem on some OSX
&gt; boxes.
</div>
And on other BSD style systems, sigh. :&#40;

I think I will run only a very basic test of the XS version during normal installations and will skip all other tests unless requested by setting some environment variable.  The original idea was to ensure that the pure Perl version behaves as the XS version but the behavior of the XS version seems to be unpredictable on many systems.

I&#39;m using Mac OS X myself, and have access to three more Macs and still cannot reproduce the failures.  I think this is a hopeless case and is actually not really relevant.  Test failures of the XS version indicate that other localized software would have the same problems.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Tests pass on this system &#40;OSX 10.10&#41;:
&gt; 
&gt; : [ether@jaeger ~].0$; uname -a
&gt; Darwin jaeger 14.5.0 Darwin Kernel Version 14.5.0: Tue Sep  1 21:23:09
&gt; PDT 2015; root:xnu-2782.50.1~1/RELEASE_X86_64 x86_64
&gt; : [ether@jaeger ~].0$; gettext --version
&gt; gettext &#40;GNU gettext-runtime&#41; 0.19.6
&gt; Copyright &#40;C&#41; 1995-1997, 2000-2007 Free Software Foundation, Inc.
&gt; License GPLv3+: GNU GPL version 3 or later
&gt; &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://gnu.org/licenses/gpl.html">http://gnu.org/licenses/gpl.html</a></span>&gt;
&gt; This is free software: you are free to change and redistribute it.
&gt; There is NO WARRANTY, to the extent permitted by law.
&gt; Written by Ulrich Drepper.
&gt; 
&gt; 
&gt; But fail on this system &#40;OSX 10.8&#41;:
&gt; 
&gt; : [ether@bourbon ~]$; uname -a
&gt; Darwin bourbon 12.6.0 Darwin Kernel Version 12.6.0: Wed Mar 18
&gt; 16:23:48 PDT 2015; root:xnu-2050.48.19~1/RELEASE_X86_64 x86_64
&gt; : [ether@bourbon ~]$; gettext --version
&gt; gettext &#40;GNU gettext-runtime&#41; 0.19.7
&gt; Copyright &#40;C&#41; 1995-1997, 2000-2007 Free Software Foundation, Inc.
&gt; License GPLv3+: GNU GPL version 3 or later
&gt; &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://gnu.org/licenses/gpl.html">http://gnu.org/licenses/gpl.html</a></span>&gt;
&gt; This is free software: you are free to change and redistribute it.
&gt; There is NO WARRANTY, to the extent permitted by law.
&gt; Written by Ulrich Drepper.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;16&nbsp;16:10:59&nbsp;2016</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed in 1.25.  The XS tests are now disabled by default.  You have to set the environment variable &#34;TEST_LIBINTL_PERL_XS_VERSION&#34; to a Perl truth variable in order to activate them.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;16&nbsp;16:11:02&nbsp;2016</span>
    <span class="description">GUIDO [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;16&nbsp;16:12:01&nbsp;2016</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Am Mo 16. Mai 2016, 16:10:59, GUIDO schrieb:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Fixed in 1.25.  The XS tests are now disabled by default.  You have to
&gt; set the environment variable &#34;TEST_LIBINTL_PERL_XS_VERSION&#34; to a Perl
&gt; truth variable in order to activate them.
</div>
What is a Perl &#34;truth variable&#34;? A typo ...
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
