<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #84472 for WWW-Scripter: patch: make content&#40;&#41; return correct content when request chain contains both 302 and JavaScript redirects</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #84472 for WWW-Scripter: patch: make content&#40;&#41; return correct content when request chain contains both 302 and JavaScript redirects</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=WWW-Scripter">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=WWW-Scripter">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=WWW-Scripter">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=WWW-Scripter">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/WWW-Scripter">WWW-Scripter CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">84472</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=WWW-Scripter">WWW-Scripter</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
lxp [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">
sprout [...] cpan.org

<br />

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-226806-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.029    </td>
  </tr>
  <tr id="CF-226807-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.030    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




0001-failing-test-for-incorrect-content-after-302-JS.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1211758/639914/0001-failing-test-for-incorrect-content-after-302-JS.patch">
Tue May 14 02:09:39 2013 (1.9k) by lxp [...] cpan.org
</a>
</font></li>
</ul>


0002-make-update_html-return-the-current-response.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1211758/639915/0002-make-update_html-return-the-current-response.patch">
Tue May 14 02:09:39 2013 (1.2k) by lxp [...] cpan.org
</a>
</font></li>
</ul>


http-log.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1199214/633095/http-log.txt">
Sat Apr 06 10:49:50 2013 (382.1k) by lxp [...] cpan.org
</a>
</font></li>
</ul>


rt-84472.t<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1207360/637490/rt-84472.t">
Wed May 01 23:07:26 2013 (1.3k) by lxp [...] cpan.org
</a>
</font></li>
</ul>


www-scripter-stack-trace.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1202234/634724/www-scripter-stack-trace.txt">
Sun Apr 14 22:09:58 2013 (8.7k) by lxp [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=84472">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1199214" href="/Public/Bug/Display.html?id=84472#txn-1199214">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;06&nbsp;10:49:50&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> content&#40;&#41; not returning content from most recent response</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1199214/633094/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/633094">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m running the following code to attempt to log into a banking website.  &#40;The website is excessively complex; almost every request results in an HTTP redirect or some JavaScript to advance to another resource.&#41;

use WWW::Scripter &#40;&#41;; 
my $ua = WWW::Scripter-&gt;new;
$ua-&gt;use_plugin&#40;&#39;JavaScript&#39;&#41;;
$ua-&gt;get&#40;&#39;<span class="clickylink"><a target="new" rel="nofollow" href="https://www.ubank.com.au/NAGAuthn/ubank.secgate.action&#39;&#41;">https://www.ubank.com.au/NAGAuthn/ubank.secgate.action&#39;&#41;</a></span>;
$ua-&gt;submit_form&#40;
    with_fields =&gt; {
        f_username  =&gt; &#39;user@example.com&#39;,
        password    =&gt; cipher&#40;&#39;LetMeIn123&#39;&#41;,
    },
&#41;;
print substr&#40;$ua-&gt;content, 0, 70&#41;, &#34;...\n&#34;;

Running the above code with the following options yields a log of every request and response &#40;including response content&#41;, attached as http-log.txt.

$ LOG_SHOW_CATEGORY=1 TRACE=1 perl -MLog::Any::App -MLog::Any::For::LWP=-log_response_body,1

$ua-&gt;content returns content for the response shown at line 2394--even though WWW::Scripter correctly parses the JavaScript in that response and GETs the next resource, shown at line 2606.  I expect the latter response to be made available via $ua-&gt;content rather than the former.

Peculiarly, the response content at line 2606 seems incomplete.  I don&#39;t know whether this is due to the server or the logging.  It may explain why $ua-&gt;content doesn&#39;t hold the expected content though.

Any assistance in resolving this issue will be very gratefully received.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> http-log.txt</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1199214/633095/http-log.txt">Download http-log.txt</a><br />
<span class="downloadcontenttype">text/plain 382.1k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1201842" href="/Public/Bug/Display.html?id=84472#txn-1201842">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;14&nbsp;02:05:02&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1201842/634529/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/634529">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 799b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Apr 07 01:49:50 2013, LXP wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Peculiarly, the response content at line 2606 seems incomplete.  I
&gt;    don&#39;t know whether this is due to the server or the logging.  It
&gt;    may explain why $ua-&gt;content doesn&#39;t hold the expected content
&gt;    though.
</div>
It seems that the response referenced above is in fact incomplete, but
seemingly not because of the server or the logging.

I&#39;ve just noticed that the response, requested via HTTPS, uses &#34;chunked&#34;
content transfer encoding.  It looks like only the first chunk might be
getting returned in the response object, but I&#39;ll need to work out how
to debug that in greater detail.  I recognise that this alone is not a
WWW::Scripter issue.

But could this explain why the response is not getting returned by the
&#34;content&#34; method of WWW::Scripter?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1202165" href="/Public/Bug/Display.html?id=84472#txn-1202165">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;14&nbsp;19:59:20&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1202165/634690/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/634690">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 684b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Apr 14 16:05:02 2013, LXP wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve just noticed that the response, requested via HTTPS, uses &#34;chunked&#34;
&gt; content transfer encoding.  It looks like only the first chunk might be
&gt; getting returned in the response object, but I&#39;ll need to work out how
&gt; to debug that in greater detail.  I recognise that this alone is not a
&gt; WWW::Scripter issue.
</div>
The incomplete response was a red herring caused by an &#34;unexpected&#34;
User-Agent string being sent in the request.  Pretending to be a certain
mainstream Windows browser solves that problem.

In any event, it still seems that the malformed response is what should
have been getting returned by content&#40;&#41;, not the one before it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1202199" href="/Public/Bug/Display.html?id=84472#txn-1202199">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;14&nbsp;21:01:15&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Reference by ticket #84639 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1202234" href="/Public/Bug/Display.html?id=84472#txn-1202234">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;14&nbsp;22:09:58&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1202234/634723/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/634723">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 847b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Apr 15 09:59:20 2013, LXP wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In any event, it still seems that the malformed response is what should
&gt; have been getting returned by content&#40;&#41;, not the one before it.
</div>
I&#39;ve determined the cause of the problem:

At the time that the desired request is being handled by the
&#34;_update_page&#34; method, other calls to _update_page lower in the stack
are waiting to finish.  Attached is the stack trace in my case when the
content that I want is being handled; as there are two more _update_page
calls waiting to finish, my desired content is overwritten twice as the
stack unwinds.

Not evident in the stack trace, but possibly related, is the fact that
subsequent GETs occur by WWW::Scripter in my case after it stops
processing the desired page--presumably because content from prior pages
is still waiting to be fetched lower in the stack.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> www-scripter-stack-trace.txt</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1202234/634724/www-scripter-stack-trace.txt">Download www-scripter-stack-trace.txt</a><br />
<span class="downloadcontenttype">text/plain 8.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">WWW::Scripter::_update_page&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;HTTP::Request=HASH&#40;0x61d6ef8&#41;&#39;, &#39;HTTP::Response=HASH&#40;0x62cd2f0&#41;&#39;&#41; called at .../WWW/Scripter.pm line 266
WWW::Scripter::request&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;HTTP::Request=HASH&#40;0x61d6ef8&#41;&#39;&#41; called at .../LWP/UserAgent.pm line 418
LWP::UserAgent::get&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;<span class="clickylink"><a target="new" rel="nofollow" href="https://www.ubank.com.au/ubank/web/my-money/overview;PORTSESS...&#39;&#41;">https://www.ubank.com.au/ubank/web/my-money/overview;PORTSESS...&#39;&#41;</a></span> called at .../WWW/Mechanize.pm line 407
WWW::Mechanize::get&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;JE::String=ARRAY&#40;0x61d4ff0&#41;&#39;&#41; called at .../WWW/Scripter.pm line 271
WWW::Scripter::get&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;JE::String=ARRAY&#40;0x61d4ff0&#41;&#39;&#41; called at .../WWW/Scripter.pm line 1601
WWW::Scripter::Location::replace&#40;&#39;WWW::Scripter::Location=REF&#40;0x2faede0&#41;&#39;, &#39;JE::String=ARRAY&#40;0x61d4ff0&#41;&#39;&#41; called at .../JE.pm line 1537
JE::__ANON__&#40;&#39;JE::Object::Proxy=REF&#40;0x61d4af8&#41;&#39;, &#39;JE::String=ARRAY&#40;0x61d4ff0&#41;&#39;&#41; called at .../JE/Object/Function.pm line 466
JE::Object::Function::apply&#40;&#39;JE::Object::Function=REF&#40;0x618d3a0&#41;&#39;, &#39;JE::Object::Proxy=REF&#40;0x61d4af8&#41;&#39;, &#39;JE::String=ARRAY&#40;0x61d4ff0&#41;&#39;&#41; called at .../JE/LValue.pm line 114
JE::LValue::call&#40;&#39;JE::LValue=ARRAY&#40;0x61d5668&#41;&#39;, &#39;JE::String=ARRAY&#40;0x61d4ff0&#41;&#39;&#41; called at .../JE/Code.pm line 1287
JE::Code::Expression::eval&#40;&#39;JE::Code::Expression=ARRAY&#40;0x61cce48&#41;&#39;&#41; called at .../JE/Code.pm line 1377
JE::Code::Expression::_eval_term&#40;&#39;JE::Code::Expression=ARRAY&#40;0x61cce48&#41;&#39;&#41; called at .../JE/Code.pm line 1145
JE::Code::Expression::eval&#40;&#39;JE::Code::Expression=ARRAY&#40;0x61cc938&#41;&#39;&#41; called at .../JE/Code.pm line 368
JE::Code::Statement::eval&#40;&#39;JE::Code::Statement=ARRAY&#40;0x61cc248&#41;&#39;&#41; called at .../JE/Code.pm line 349
JE::Code::Statement::eval&#40;&#39;JE::Code::Statement=ARRAY&#40;0x618ad98&#41;&#39;&#41; called at .../JE/Code.pm line 186
eval {...} called at .../JE/Code.pm line 157
JE::Code::execute&#40;&#39;JE::Code=HASH&#40;0x6195bd0&#41;&#39;&#41; called at .../JE.pm line 815
JE::eval&#40;&#39;WWW::Scripter::Plugin::JavaScript::JE=REF&#40;0x5f5b2b8&#41;&#39;, &#39;\x{a}/*\x{a}** Copyright &#40;c&#41; 2008, Oracle and/or its affiliates. All ...&#39;, &#39;URI::https=SCALAR&#40;0x5f3f2e8&#41;&#39;, 1&#41; called at .../WWW/Scripter/Plugin/JavaScript.pm line 104
WWW::Scripter::Plugin::JavaScript::eval&#40;&#39;WWW::Scripter::Plugin::JavaScript=ARRAY&#40;0x3484d10&#41;&#39;, &#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;\x{a}/*\x{a}** Copyright &#40;c&#41; 2008, Oracle and/or its affiliates. All ...&#39;, &#39;URI::https=SCALAR&#40;0x5f3f2e8&#41;&#39;, 1, 1&#41; called at .../WWW/Scripter.pm line 448
WWW::Scripter::__ANON__&#40;&#39;HTML::DOM=HASH&#40;0x5f3e760&#41;&#39;, &#39;HTML::DOM::Element::Script=HASH&#40;0x5f0c0f8&#41;&#39;&#41; called at .../HTML/DOM.pm line 496
HTML::DOM::__ANON__&#40;&#39;HTML::DOM::Element::Script=HASH&#40;0x5f0c0f8&#41;&#39;, &#39;script&#39;, &#39;HTML::DOM::Element::HTML=HASH&#40;0x5f0b858&#41;&#39;&#41; called at .../HTML/DOM/_TreeBuilder.pm line 1118
HTML::DOM::_TreeBuilder::end&#40;&#39;HTML::DOM::Element::HTML=HASH&#40;0x5f0b858&#41;&#39;, &#39;script&#39;, &#39;&lt;/script&gt;&#39;&#41; called at .../HTML/DOM.pm line 383
HTML::DOM::Element::HTML::end&#40;&#39;HTML::DOM::Element::HTML=HASH&#40;0x5f0b858&#41;&#39;, &#39;script&#39;, &#39;&lt;/script&gt;&#39;&#41; called at .../HTML/DOM.pm line 726
eval {...} called at .../HTML/DOM.pm line 726
HTML::DOM::write&#40;&#39;HTML::DOM=HASH&#40;0x5f3e760&#41;&#39;, &#39;&lt;html lang=&#34;en-AU&#34;&gt;&lt;head&gt;&lt;script&gt;\x{a}/*\x{a}** Copyright &#40;c&#41; 2008, O...&#39;&#41; called at .../WWW/Scripter.pm line 543
WWW::Scripter::update_html&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;&lt;html lang=&#34;en-AU&#34;&gt;&lt;head&gt;&lt;script&gt;\x{a}/*\x{a}** Copyright &#40;c&#41; 2008, O...&#39;&#41; called at .../WWW/Scripter.pm line 311
WWW::Scripter::_update_page&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;HTTP::Request=HASH&#40;0x5f3e8c8&#41;&#39;, &#39;HTTP::Response=HASH&#40;0x5e4c090&#41;&#39;&#41; called at .../WWW/Scripter.pm line 266
WWW::Scripter::request&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;HTTP::Request=HASH&#40;0x5f3e8c8&#41;&#39;, undef, undef, &#39;HTTP::Response=HASH&#40;0x5e4c150&#41;&#39;&#41; called at .../LWP/UserAgent.pm line 349
LWP::UserAgent::request&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;HTTP::Request=HASH&#40;0x5e421a8&#41;&#39;, undef, undef, &#39;HTTP::Response=HASH&#40;0x5e4b970&#41;&#39;&#41; called at .../WWW/Mechanize.pm line 2503
WWW::Mechanize::_make_request&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;HTTP::Request=HASH&#40;0x5e421a8&#41;&#39;, undef, undef, &#39;HTTP::Response=HASH&#40;0x5e4b970&#41;&#39;&#41; called at .../WWW/Scripter.pm line 247
WWW::Scripter::request&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;HTTP::Request=HASH&#40;0x5e421a8&#41;&#39;, undef, undef, &#39;HTTP::Response=HASH&#40;0x5e4b970&#41;&#39;&#41; called at .../LWP/UserAgent.pm line 349
LWP::UserAgent::request&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;HTTP::Request=HASH&#40;0x5e41fb0&#41;&#39;&#41; called at .../WWW/Mechanize.pm line 2503
WWW::Mechanize::_make_request&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;HTTP::Request=HASH&#40;0x5e41fb0&#41;&#39;&#41; called at .../WWW/Scripter.pm line 247
WWW::Scripter::request&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;HTTP::Request=HASH&#40;0x5e41fb0&#41;&#39;&#41; called at .../LWP/UserAgent.pm line 418
LWP::UserAgent::get&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;<span class="clickylink"><a target="new" rel="nofollow" href="https://www.ubank.com.au/obrar.cgi?encreply=wjmY5mbQrN11JvXp8...&#39;&#41;">https://www.ubank.com.au/obrar.cgi?encreply=wjmY5mbQrN11JvXp8...&#39;&#41;</a></span> called at .../WWW/Mechanize.pm line 407
WWW::Mechanize::get&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;JE::String=ARRAY&#40;0x5e30628&#41;&#39;&#41; called at .../WWW/Scripter.pm line 271
WWW::Scripter::get&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;JE::String=ARRAY&#40;0x5e30628&#41;&#39;&#41; called at .../WWW/Scripter.pm line 1538
WWW::Scripter::Location::href&#40;&#39;WWW::Scripter::Location=REF&#40;0x2faede0&#41;&#39;, &#39;JE::String=ARRAY&#40;0x5e30628&#41;&#39;&#41; called at .../JE.pm line 1727
JE::__ANON__&#40;&#39;JE::Object::Proxy=REF&#40;0x5e41b30&#41;&#39;, &#39;JE::String=ARRAY&#40;0x5e30628&#41;&#39;, undef&#41; called at .../JE/Object.pm line 374
JE::Object::prop&#40;&#39;JE::Object::Proxy=REF&#40;0x5e41b30&#41;&#39;, &#39;href&#39;, &#39;JE::String=ARRAY&#40;0x5e30628&#41;&#39;&#41; called at .../JE/LValue.pm line 100
JE::LValue::set&#40;&#39;JE::LValue=ARRAY&#40;0x5e41770&#41;&#39;, &#39;JE::String=ARRAY&#40;0x5e30628&#41;&#39;&#41; called at .../JE/Code.pm line 1200
eval {...} called at .../JE/Code.pm line 1200
JE::Code::Expression::eval&#40;&#39;JE::Code::Expression=ARRAY&#40;0x5dafaa0&#41;&#39;&#41; called at .../JE/Code.pm line 1377
JE::Code::Expression::_eval_term&#40;&#39;JE::Code::Expression=ARRAY&#40;0x5dafaa0&#41;&#39;&#41; called at .../JE/Code.pm line 1145
JE::Code::Expression::eval&#40;&#39;JE::Code::Expression=ARRAY&#40;0x5daf9e0&#41;&#39;&#41; called at .../JE/Code.pm line 349
JE::Code::Statement::eval&#40;&#39;JE::Code::Statement=ARRAY&#40;0x5daf8c0&#41;&#39;&#41; called at .../JE/Code.pm line 186
eval {...} called at .../JE/Code.pm line 157
JE::Code::execute&#40;&#39;JE::Code=HASH&#40;0x5e1fce0&#41;&#39;, &#39;WWW::Scripter::Plugin::JavaScript::JE=REF&#40;0x5aeed30&#41;&#39;, &#39;JE::Scope=ARRAY&#40;0x5e41a58&#41;&#39;, 2&#41; called at .../JE/Object/Function.pm line 486
JE::Object::Function::apply&#40;&#39;JE::Object::Function=REF&#40;0x5e1ffb0&#41;&#39;, &#39;WWW::Scripter::Plugin::JavaScript::JE=REF&#40;0x5aeed30&#41;&#39;, &#39;JE::String=ARRAY&#40;0x5e30628&#41;&#39;&#41; called at .../JE/LValue.pm line 114
JE::LValue::call&#40;&#39;JE::LValue=ARRAY&#40;0x5e2dd30&#41;&#39;, &#39;JE::String=ARRAY&#40;0x5e30628&#41;&#39;&#41; called at .../JE/Code.pm line 1287
JE::Code::Expression::eval&#40;&#39;JE::Code::Expression=ARRAY&#40;0x5dcb9a0&#41;&#39;&#41; called at .../JE/Code.pm line 1377
JE::Code::Expression::_eval_term&#40;&#39;JE::Code::Expression=ARRAY&#40;0x5dcb9a0&#41;&#39;&#41; called at .../JE/Code.pm line 1145
JE::Code::Expression::eval&#40;&#39;JE::Code::Expression=ARRAY&#40;0x5dcb640&#41;&#39;&#41; called at .../JE/Code.pm line 349
JE::Code::Statement::eval&#40;&#39;JE::Code::Statement=ARRAY&#40;0x5dcb3a0&#41;&#39;&#41; called at .../JE/Code.pm line 186
eval {...} called at .../JE/Code.pm line 157
JE::Code::execute&#40;&#39;JE::Code=HASH&#40;0x5e3ee40&#41;&#39;, &#39;WWW::Scripter::Plugin::JavaScript::JE=REF&#40;0x5aeed30&#41;&#39;, &#39;JE::Scope=ARRAY&#40;0x5e3a9a8&#41;&#39;, 2&#41; called at .../JE/Object/Function.pm line 486
JE::Object::Function::apply&#40;&#39;JE::Object::Function=REF&#40;0x5e3f068&#41;&#39;, &#39;WWW::Scripter::Plugin::JavaScript::JE=REF&#40;0x5aeed30&#41;&#39;, &#39;JE::Object::Proxy=REF&#40;0x5a48a60&#41;&#39;&#41; called at .../JE/Object/Function.pm line 334
JE::Object::Function::call_with&#40;&#39;JE::Object::Function=REF&#40;0x5e3f068&#41;&#39;, &#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;HTML::DOM::Event=HASH&#40;0x5a4f338&#41;&#39;&#41; called at .../HTML/DOM/EventTarget.pm line 217
HTML::DOM::EventTarget::__ANON__&#40;&#39;HTML::DOM::Event=HASH&#40;0x5a4f338&#41;&#39;&#41; called at .../HTML/DOM/EventTarget.pm line 356
eval {...} called at .../HTML/DOM/EventTarget.pm line 359
HTML::DOM::EventTarget::_dispatch_event&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, 1, &#39;HTML::DOM::Event=HASH&#40;0x5a4f338&#41;&#39;&#41; called at .../HTML/DOM/EventTarget.pm line 250
HTML::DOM::EventTarget::dispatchEvent&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;HTML::DOM::Event=HASH&#40;0x5a4f338&#41;&#39;&#41; called at .../HTML/DOM/EventTarget.pm line 492
HTML::DOM::EventTarget::trigger_event&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;load&#39;, &#39;target&#39;, &#39;HTML::DOM=HASH&#40;0x5a4b968&#41;&#39;&#41; called at .../WWW/Scripter.pm line 552
WWW::Scripter::update_html&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;\x{d}\x{a}\x{d}\x{a}\x{d}\x{a}\x{d}\x{a}\x{d}\x{a}\x{d}\x{a}\x{d}\x{a}\x{d}\x{a}    &lt;!DOCTYPE html PUBLIC &#34;-//W3C//DTD XHTML ...&#39;&#41; called at .../WWW/Scripter.pm line 311
WWW::Scripter::_update_page&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;HTTP::Request=HASH&#40;0x5a3f868&#41;&#39;, &#39;HTTP::Response=HASH&#40;0x5a4b3b0&#41;&#39;&#41; called at .../WWW/Scripter.pm line 266
WWW::Scripter::request&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;HTTP::Request=HASH&#40;0x5a3f868&#41;&#39;&#41; called at .../WWW/Scripter.pm line 650
WWW::Scripter::submit&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;&#41; called at .../WWW/Mechanize.pm line 1920
WWW::Mechanize::submit_form&#40;&#39;WWW::Scripter=HASH&#40;0x3487c90&#41;&#39;, &#39;with_fields&#39;, &#39;HASH&#40;0x35df8a0&#41;&#39;&#41; called at test.pl line 97
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction links DeleteLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1202239" href="/Public/Bug/Display.html?id=84472#txn-1202239">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;14&nbsp;22:11:35&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Reference by ticket #84639 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1207114" href="/Public/Bug/Display.html?id=84472#txn-1207114">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;01&nbsp;09:23:53&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1207114/637357/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/637357">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Apr 15 12:09:58 2013, LXP wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve determined the cause of the problem:
&gt; 
&gt; At the time that the desired request is being handled by the
&gt; &#34;_update_page&#34; method, other calls to _update_page lower in the stack
&gt; are waiting to finish.  Attached is the stack trace in my case when the
&gt; content that I want is being handled; as there are two more _update_page
&gt; calls waiting to finish, my desired content is overwritten twice as the
&gt; stack unwinds.
</div>
After further investigation I can explain the problem more &#34;simply&#34; &#40;or
at least as simply as the website I&#39;m dealing with allows&#41;:

1.  Request resource A via POST.
2.  Server responds with HTML containing JavaScript:

    window.top.location.href = B;

3.  _update_page is started with request A and response A, and does not
    complete yet.
4.  Request resource B via GET.
5.  Server responds with 302 redirect to resource C.
5.  Request resource C via GET.
6.  Server responds with 302 redirect to resource D.
7.  Request resource D via GET.
8.  Server responds with HTML containing JavaScript:

    document.location.replace&#40;E&#41;;

9.  Another _update_page call is added to the stack with request D and
    response D, and does not complete yet.  There is one other pending
    _update_page run on the stack.
10. Request resource E via GET.
11. Server responds with desired HTML.
12. Another _update_page call is added to the stack with request E and
    response E, and does not complete yet.  There are two other pending
    _update_page runs on the stack.
13. _update_page is called for each of response E&#39;s many useless
    JavaScript dependencies.
14. The _update_page call in step 12 completes with the WWW::Scripter
    instance&#39;s &#34;content&#34; attribute holding the content of response E.
    There are still two other pending _update_page runs on the stack.
15. The _update_page call in step 9 completes with the WWW::Scripter
    instance&#39;s &#34;content&#34; attribute still holding the content of response
    E.  There is still one other pending _update_page run on the stack.
16. A new _update_page call is made with request C and response D, and
    completes with the WWW::Scripter instance&#39;s &#34;content&#34; attribute now
    holding the content of response D.  There is still one other pending
    _update_page run on the stack.
17. Another new _update_page call is made with request B and response D,
    and completes with the WWW::Scripter instance&#39;s &#34;content&#34; attribute
    still holding the content of response D.  There is still one other
    pending _update_page run on the stack.
18. The _update_page call in step 3 completes with the WWW::Scripter
    instance&#39;s &#34;content&#34; attribute still holding the content of response
    D.
19. $w-&gt;content erroneously returns response D&#39;s content instead of
    response E&#39;s content.

Looking at the above sequence of events, the following things stand out
for me:

*   Document dependencies such as external .js files seem to cause
    recursive calls to _update_page, as do JavaScript redirects.
*   The 302 responses in steps 5 and 6 don&#39;t seem to trigger the above-
    mentioned recursion.
*   It seems a little strange that redirections would be treated
    differently based on whether they&#39;re initiated through server
    response headers or client scripts.
*   In steps 16 and 17, _update_page is called with mismatching request/
    response pairs.  Further, these calls involve requests that don&#39;t
    have corresponding &#34;end point&#34; responses.  This is almost certainly
    a bug.

I suppose that the next step for me in diagnosing this bug would be to
look very carefully at how WWW::Scripter interacts with WWW::Mechanize
&#40;or LWP::UserAgent&#41; when redirects are occurring.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1207116" href="/Public/Bug/Display.html?id=84472#txn-1207116">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;01&nbsp;09:28:13&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1207116/637359/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/637359">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 406b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed May 01 23:23:53 2013, LXP wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; *   In steps 16 and 17, _update_page is called with mismatching request/
&gt;     response pairs.  Further, these calls involve requests that don&#39;t
&gt;     have corresponding &#34;end point&#34; responses.  This is almost certainly
&gt;     a bug.
</div>
WWW::Scripter&#39;s &#34;request&#34; method is responsible for triggering the
_update_page calls mentioned above, and is probably the culprit.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1207118" href="/Public/Bug/Display.html?id=84472#txn-1207118">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;01&nbsp;09:34:00&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1207118/637361/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/637361">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 447b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed May 01 23:23:53 2013, LXP wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 4.  Request resource B via GET.
&gt; 5.  Server responds with 302 redirect to resource C.
&gt; 5.  Request resource C via GET.
&gt; 6.  Server responds with 302 redirect to resource D.
</div>
A test can be written for something like this by writing some custom
LWP::UserAgent handlers to emulate responses with 302 status codes for
certain request types.  It would be really good to distill all of this
into a Perl test.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1207360" href="/Public/Bug/Display.html?id=84472#txn-1207360">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;01&nbsp;23:07:26&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1207360/637489/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/637489">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed May 01 23:34:00 2013, LXP wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed May 01 23:23:53 2013, LXP wrote:
<div class="message-stanza open">&gt; &gt; 4.  Request resource B via GET.
&gt; &gt; 5.  Server responds with 302 redirect to resource C.
&gt; &gt; 5.  Request resource C via GET.
&gt; &gt; 6.  Server responds with 302 redirect to resource D.
</div>&gt; 
&gt; A test can be written for something like this by writing some custom
&gt; LWP::UserAgent handlers to emulate responses with 302 status codes for
&gt; certain request types.  It would be really good to distill all of this
&gt; into a Perl test.
</div>
The attached Perl test conveys the problem more simply again:

*   Requesting Resource 1 causes a 302 redirect to Resource 2.
*   Resource 2 is HTML with a JavaScript redirect to Resource 3.
*   Resource 3 holds the desired content.

WWW::Scripter&#39;s &#34;content&#34; method returns the desired content when
Resources 3 and 2 are requested, but not when Resource 1 is requested.

Sadly this test requires WWW::Scripter::Plugin::JavaScript, but after
further delving it should be possible to produce another test to convey
the problem without an external dependency.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> rt-84472.t</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1207360/637490/rt-84472.t">Download rt-84472.t</a><br />
<span class="downloadcontenttype">text/x-perl 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/env perl

use strict;
use warnings;

use lib &#39;t&#39;;
use HTTP::Response &#40;&#41;;
use WWW::Scripter &#40;&#41;;
use WWW::Scripter::Plugin::JavaScript &#40;&#41;;

my $w = WWW::Scripter-&gt;new&#40; autocheck =&gt; 1 &#41;;
$w-&gt;use_plugin&#40;&#39;JavaScript&#39;&#41;;

for &#40;
    [ &#39;/R1&#39; =&gt; \&#39;fake:///R2&#39;                                                ],
    [ &#39;/R2&#39; =&gt; &#39;&lt;script&gt; document.location.replace&#40;&#34;fake:///R3&#34;&#41; &lt;/script&gt;&#39; ],
    [ &#39;/R3&#39; =&gt; &#39;DESIRED CONTENT&#39;                                            ],
&#41; {
    my &#40;$req_path, $res_content&#41; = @$_;
    my $is_redir = ref $res_content;
    $w-&gt;set_my_handler&#40;
        &#39;request_send&#39;,
        sub {
            my $req = shift;
            my $res = HTTP::Response-&gt;new&#40; $is_redir ? 302 : 200 &#41;;
            $res-&gt;request&#40;$req&#41;;
            if &#40;$is_redir&#41; {
                $res-&gt;header&#40; &#39;Location&#39; =&gt; $$res_content &#41;;
            }
            else {
                $res-&gt;content&#40;$res_content&#41;;
                # Ensure &lt;script&gt;s get executed.
                $res-&gt;header&#40; &#39;Content-Type&#39; =&gt; &#39;text/html&#39; &#41;
                    if $res_content =~ /script/;
            }
            return $res;
        },
        &#40; m_scheme =&gt; &#39;fake&#39;, m_path =&gt; $req_path &#41;,
    &#41;;
}

use tests 3;
for &#40;qw{ /R3 /R2 /R1 }&#41; {
    $w-&gt;get&#40;&#34;fake://$_&#34;&#41;;
    is $w-&gt;content, &#39;DESIRED CONTENT&#39;,
        &#34;&#39;content&#39; method must return correct response for request $_&#34;;
}
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1207363" href="/Public/Bug/Display.html?id=84472#txn-1207363">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;01&nbsp;23:08:52&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  AdminCc sprout@cpan.org added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1207365" href="/Public/Bug/Display.html?id=84472#txn-1207365">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;01&nbsp;23:10:03&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Subject changed from &#39;content&#40;&#41; not returning content from most recent response&#39; to &#39;content&#40;&#41; not returning correct content when redirect chain contains both 302 and JavaScript redirects&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1207366" href="/Public/Bug/Display.html?id=84472#txn-1207366">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;01&nbsp;23:12:52&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1207366/637494/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/637494">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 209b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#40;I&#39;ve explicitly added your unmunged email address to this ticket now,
because looking at your default RT email address I suspect that RT has
just been shooting all of the past correspondence into the aether.&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1207378" href="/Public/Bug/Display.html?id=84472#txn-1207378">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;01&nbsp;23:25:05&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Subject changed from &#39;content&#40;&#41; not returning correct content when redirect chain contains both 302 and JavaScript redirects&#39; to &#39;content&#40;&#41; returns incorrect content when request chain contains both 302 and JavaScript redirects&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1207379" href="/Public/Bug/Display.html?id=84472#txn-1207379">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;02&nbsp;00:19:48&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1207379/637500/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/637500">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed May 01 23:28:13 2013, LXP wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed May 01 23:23:53 2013, LXP wrote:
<div class="message-stanza open">&gt; &gt; *   In steps 16 and 17, _update_page is called with mismatching request/
&gt; &gt;     response pairs.  Further, these calls involve requests that don&#39;t
&gt; &gt;     have corresponding &#34;end point&#34; responses.  This is almost certainly
&gt; &gt;     a bug.
</div>&gt; 
&gt; WWW::Scripter&#39;s &#34;request&#34; method is responsible for triggering the
&gt; _update_page calls mentioned above, and is probably the culprit.
</div>
The way &#34;_make_request&#34; is used in &#34;request&#34; is the problem.

&#34;_make_request&#34; is provided by WWW::Mechanize and just proxies to
&#34;request&#34; in LWP::UserAgent.

When running the supplied test:

*   _make_request takes a request for Resource 3 &#40;the desired content&#41;
     and returns it.
*   _make_request takes a request for Resource 2 &#40;the page with a JS
    redirect to Resource 3&#41; and returns it.
*   _make_request takes a request for Resource 1 &#40;the 302 redirect&#41; but
    returns Resource 2.

As far as LWP::UserAgent would be concerned, this is correct behaviour
as it has no knowledge of JavaScript.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1207381" href="/Public/Bug/Display.html?id=84472#txn-1207381">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;02&nbsp;00:29:09&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Reference to https://github.com/Lx/WWW-Scripter/commits/content-after-302-js-redirs added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1208121" href="/Public/Bug/Display.html?id=84472#txn-1208121">#</a>      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;04&nbsp;02:20:38&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1208121/637884/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/637884">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu May 02 14:19:48 2013, LXP wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The way &#34;_make_request&#34; is used in &#34;request&#34; is the problem.
</div>
I retract that, and instead suggest that the problem is caused by the
&#34;_update_page&#34; method assuming that the &#34;update_html&#34; method won&#39;t cause
the response object to change.

A naive fix would be to make the &#34;update_html&#34; method return the current
response object &#40;it currently returns nothing&#41; and make &#34;_update_page&#34;
return whatever response &#34;update_html&#34; returns instead of the response
object passed into itself.

This fix causes the test attached to this ticket to pass, but sadly it
also causes test &#34;credentials.t&#34; to die.

On Thu May 02 13:07:26 2013, LXP wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sadly this test requires WWW::Scripter::Plugin::JavaScript, but after
&gt; further delving it should be possible to produce another test to
&gt; convey the problem without an external dependency.
</div>
It&#39;s possible to cause a client-side redirect in a browser using the
&#34;meta refresh&#34; technique, which involves placing a particular &#34;meta&#34; tag
in the document&#39;s &#34;head.&#34;  As JavaScript is not required for this type
of redirect to occur, the JavaScript plugin would not be required for
the test.

Unfortunately, WWW::Scripter at this time does not appear to handle
pages using the &#34;meta refresh&#34; technique.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1211758" href="/Public/Bug/Display.html?id=84472#txn-1211758">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;14&nbsp;02:09:39&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> patch: make content&#40;&#41; return correct content when request chain
 contains both 302 and JavaScript redirects</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1211758/639913/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/639913">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 962b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat May 04 16:20:38 2013, LXP wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; A naive fix would be to make the &#34;update_html&#34; method return the
&gt; current response object &#40;it currently returns nothing&#41; and make
&gt; &#34;_update_page&#34; return whatever response &#34;update_html&#34; returns instead
&gt; of the response object passed into itself.
&gt; 
&gt; This fix causes the test attached to this ticket to pass, but sadly it
&gt; also causes test &#34;credentials.t&#34; to die.
</div>
It caused errors in other tests because I forgot to adjust one of the
&#34;returns.&#34;  The attached patches provide new tests and a solution for
this problem.

It&#39;s a bit of a shame that so many hours of effort on this problem
resulted in a fix of only three lines, but such is life!

The attached test still requires the JavaScript plugin to be installed;
I couldn&#39;t see any obvious way to test the behaviour without it.  It
will probably be necessary to skip the test if it can&#39;t be rewritten,
and if that plugin is not available on the end user&#39;s system.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0001-failing-test-for-incorrect-content-after-302-JS.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1211758/639914/0001-failing-test-for-incorrect-content-after-302-JS.patch">Download 0001-failing-test-for-incorrect-content-after-302-JS.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 802c57b46abfaae065f1063567b35dcb7f982d86 Mon Sep 17 00:00:00 2001
From: Alex Peters &lt;lxp@cpan.org&gt;
Date: Thu, 2 May 2013 13:23:53 +1000
Subject: [PATCH 1/2] failing test for incorrect content after 302/JS

The &#34;content&#34; method returns the wrong content when the request chain
contains both 302 and JavaScript redirects.  See [rt.cpan.org #84472].
---
 t/rt-84472.t |   45 +++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 45 insertions&#40;+&#41;
 create mode 100644 t/rt-84472.t

diff --git a/t/rt-84472.t b/t/rt-84472.t
new file mode 100644
index 0000000..0280336
--- /dev/null
+++ b/t/rt-84472.t
@@ -0,0 +1,45 @@
+#!/usr/bin/env perl
+
+use strict;
+use warnings;
+
+use lib &#39;t&#39;;
+use HTTP::Response &#40;&#41;;
+use WWW::Scripter &#40;&#41;;
+use WWW::Scripter::Plugin::JavaScript &#40;&#41;;
+
+my $w = WWW::Scripter-&gt;new&#40; autocheck =&gt; 1 &#41;;
+$w-&gt;use_plugin&#40;&#39;JavaScript&#39;&#41;;
+
+for &#40;
+    [ &#39;/R1&#39; =&gt; \&#39;fake:///R2&#39;                                                ],
+    [ &#39;/R2&#39; =&gt; &#39;&lt;script&gt; document.location.replace&#40;&#34;fake:///R3&#34;&#41; &lt;/script&gt;&#39; ],
+    [ &#39;/R3&#39; =&gt; &#39;DESIRED CONTENT&#39;                                            ],
+&#41; {
+    my &#40;$req_path, $res_content&#41; = @$_;
+    my $is_redir = ref $res_content;
+    $w-&gt;set_my_handler&#40;
+        &#39;request_send&#39;,
+        sub {
+            my $req = shift;
+            my $res = HTTP::Response-&gt;new&#40; $is_redir ? 302 : 200 &#41;;
+            $res-&gt;request&#40;$req&#41;;
+            if &#40;$is_redir&#41; {
+                $res-&gt;header&#40; &#39;Location&#39; =&gt; $$res_content &#41;;
+            }
+            else {
+                $res-&gt;header&#40; &#39;Content-Type&#39; =&gt; &#39;text/html&#39; &#41;;
+                $res-&gt;content&#40;$res_content&#41;;
+            }
+            return $res;
+        },
+        &#40; m_scheme =&gt; &#39;fake&#39;, m_path =&gt; $req_path &#41;,
+    &#41;;
+}
+
+use tests 3;
+for &#40;qw{ /R3 /R2 /R1 }&#41; {
+    $w-&gt;get&#40;&#34;fake://$_&#34;&#41;;
+    like $w-&gt;content, qr/DESIRED CONTENT/,
+        &#34;&#39;content&#39; method must return correct response for request $_&#34;;
+}
-- 
1.7.10.4

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0002-make-update_html-return-the-current-response.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1211758/639915/0002-make-update_html-return-the-current-response.patch">Download 0002-make-update_html-return-the-current-response.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 16c13cdd0e844057f2bd79ffe7e8077340219bc2 Mon Sep 17 00:00:00 2001
From: Alex Peters &lt;lxp@cpan.org&gt;
Date: Tue, 14 May 2013 15:47:50 +1000
Subject: [PATCH 2/2] make update_html return the current response

This is necessary because the current response might change as a result
of client-side redirects.  Fixes [rt.cpan.org #84472].
---
 lib/WWW/Scripter.pm |    6 +++---
 1 file changed, 3 insertions&#40;+&#41;, 3 deletions&#40;-&#41;

diff --git a/lib/WWW/Scripter.pm b/lib/WWW/Scripter.pm
index 71f335f..6002ead 100644
--- a/lib/WWW/Scripter.pm
+++ b/lib/WWW/Scripter.pm
@@ -312,7 +312,7 @@ sub _update_page {
      !defined $$self{Scripter_dumb} || $$self{Scripter_dumb}
      and $self-&gt;is_html
     &#41; {
-        $self-&gt;update_html&#40;$content&#41;;
+        $res = $self-&gt;update_html&#40;$content&#41;;
     }
     else {
         $self-&gt;{content} = $content;
@@ -349,7 +349,7 @@ sub update_html {
 	if&#40;my $doc = $document{$res}&#41; {
 		$self-&gt;document&#40;$doc&#41;;
 		$self-&gt;{form} = &#40;$self-&gt;{forms} = $doc-&gt;forms&#41;-&gt;[0];
-		return;
+		return $res;
 	}
 
 	my $life_raft = $self;
@@ -554,7 +554,7 @@ sub update_html {
 	# banana
 	$self-&gt;{form} ||= $self-&gt;{forms}[0];
 
-	return;
+	return $self-&gt;{res};
 }
 
 # Not an override, but used by update_html
-- 
1.7.10.4

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1211760" href="/Public/Bug/Display.html?id=84472#txn-1211760">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;14&nbsp;02:09:47&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Subject changed from &#39;content&#40;&#41; returns incorrect content when request chain contains both 302 and JavaScript redirects&#39; to &#39;patch: make content&#40;&#41; return correct content when request chain contains both 302 and JavaScript redirects&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links DeleteLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1217437" href="/Public/Bug/Display.html?id=84472#txn-1217437">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;28&nbsp;06:28:53&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Reference to https://github.com/Lx/WWW-Scripter/commits/content-after-302-js-redirs deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1217438" href="/Public/Bug/Display.html?id=84472#txn-1217438">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;28&nbsp;06:28:53&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Reference to https://github.com/cpansprout/www-scripter/commit/cb15988e2f00ec69fea3cf4cdf0e486a324e4571 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1217439" href="/Public/Bug/Display.html?id=84472#txn-1217439">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;28&nbsp;06:28:53&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Reference to https://github.com/cpansprout/www-scripter/commit/1915007c054ec41c65684d9d3a9fa32577a0ad05 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1217444" href="/Public/Bug/Display.html?id=84472#txn-1217444">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;28&nbsp;06:34:11&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Reference to ticket #85673 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1217448" href="/Public/Bug/Display.html?id=84472#txn-1217448">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;28&nbsp;06:35:10&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1217448/642898/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/642898">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 625b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat May 04 16:20:38 2013, LXP wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It&#39;s possible to cause a client-side redirect in a browser using the
&gt; &#34;meta refresh&#34; technique, which involves placing a particular &#34;meta&#34;
&gt; tag in the document&#39;s &#34;head.&#34;  As JavaScript is not required for this
&gt; type of redirect to occur, the JavaScript plugin would not be required
&gt; for the test.
&gt; 
&gt; Unfortunately, WWW::Scripter at this time does not appear to handle
&gt; pages using the &#34;meta refresh&#34; technique.
</div>
This concern has been moved to [rt.cpan.org #85673].

The functionality problems described in this ticket have been addressed
by the release of WWW-Scripter v0.030.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1217450" href="/Public/Bug/Display.html?id=84472#txn-1217450">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;28&nbsp;06:35:10&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Fixed in 0.030 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1217451" href="/Public/Bug/Display.html?id=84472#txn-1217451">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;May&nbsp;28&nbsp;06:35:45&nbsp;2013</span>
    <span class="description">lxp [...] cpan.org -  Status changed from &#39;new&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.921092</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
