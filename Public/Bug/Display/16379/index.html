<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #16379 for Devel-Cover: Html_minimal gets confused by refactoring</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #16379 for Devel-Cover: Html_minimal gets confused by refactoring</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Devel-Cover/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Devel-Cover/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Devel-Cover/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Devel-Cover/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/pjcj/Devel--Cover/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Devel-Cover">Devel-Cover CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">16379</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Devel-Cover/Active/">Devel-Cover</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
tylerm [...] activestate.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-11022-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.55    </td>
  </tr>
  <tr id="CF-11023-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;08&nbsp;22:32:34&nbsp;2005</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Html_minimal gets confused by refactoring</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

  I just removed a some branches from my code and re-ran devel::cover on my unit tests. The HTML output showed a lower percentage of coverage than what actually happened, and I got the following output when I ran &#34;cover&#34;:

Use of uninitialized value in concatenation &#40;.&#41; or string at /usr/local/lib/perl/5.8.7/Devel/Cover/Report/Html_minimal.pm line 530, &lt;$in&gt; line 145.
Use of uninitialized value in concatenation &#40;.&#41; or string at /usr/local/lib/perl/5.8.7/Devel/Cover/Report/Html_minimal.pm line 530, &lt;$in&gt; line 146.
Use of uninitialized value in concatenation &#40;.&#41; or string at /usr/local/lib/perl/5.8.7/Devel/Cover/Report/Html_minimal.pm line 530, &lt;$in&gt; line 146.
Use of uninitialized value in concatenation &#40;.&#41; or string at /usr/local/lib/perl/5.8.7/Devel/Cover/Report/Html_minimal.pm line 530, &lt;$in&gt; line 146.
Use of uninitialized value in concatenation &#40;.&#41; or string at /usr/local/lib/perl/5.8.7/Devel/Cover/Report/Html_minimal.pm line 530, &lt;$in&gt; line 146.
Use of uninitialized value in concatenation &#40;.&#41; or string at /usr/local/lib/perl/5.8.7/Devel/Cover/Report/Html_minimal.pm line 530, &lt;$in&gt; line 147.

    After removing the &#39;cover_db&#39; directory and running again, I got the expected results.

    Cheers,
       Tyler
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;02&nbsp;07:14:53&nbsp;2006</span>
    <span class="description">PJCJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I know it&#39;s a litle late, but do you have any code I could use to
recreate this problem?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;02&nbsp;07:14:55&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;09&nbsp;15:16:36&nbsp;2007</span>
    <span class="description">EWILHELM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> cover gets confused by TAP::Parser</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> tapx-dev [...] hexten.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Aug 02 07:14:53 2006, PJCJ wrote:   
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I know it&#39;s a litle late, but do you have any code I could use to   
&gt; recreate this problem?   
</div>   
I do :-D 
  
I&#39;ve checked 0.50 thru 0.61 against TAP::Parser and found that the  
&#39;uninitialized value&#39; trouble starts at 0.56 and continues thereafter.  
  
I&#39;m using r212 of TAP::Parser from <span class="clickylink"><a target="new" rel="nofollow" href="http://svn.hexten.net/tapx/trunk/">http://svn.hexten.net/tapx/trunk/</a></span>,  
though you should be able to replicate it with the latest tarball off  
of CPAN.  You can replicate this experiment with the bash code in the  
first link, or simply grab my stderr/stdout outputs from the second  
link.  
  
  <span class="clickylink"><a target="new" rel="nofollow" href="http://scratchcomputing.com/tmp/dc.binary_search.txt">http://scratchcomputing.com/tmp/dc.binary_search.txt</a></span>   
  <span class="clickylink"><a target="new" rel="nofollow" href="http://scratchcomputing.com/tmp/devel-cover-errs.tar.gz">http://scratchcomputing.com/tmp/devel-cover-errs.tar.gz</a></span>   
  
Thanks,  
Eric  
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;19&nbsp;20:49:01&nbsp;2007</span>
    <span class="description">LEIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> LEIF [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">OK I have a patch

--- Devel-Cover-0.61-bad/lib/Devel/Cover/DB.pm  2007-01-11
06:42:48.000000000 +1100
+++ Devel-Cover-0.61-good/lib/Devel/Cover/DB.pm 2007-08-12
01:03:18.000000000 +1000
@@ -708,7 +708,7 @@
             while &#40;my &#40;$criterion, $fc&#41; = each %$f&#41;
             {
                 my $get = &#34;get_$criterion&#34;;
-                my $sc  = $st-&gt;$get&#40;$digests{$digest}&#41;;
+                my $sc  = $st-&gt;$get&#40;$file&#41;;
                 # print STDERR &#34;$criterion: &#34;, Dumper $sc, $fc;
                 next unless $sc;  # TODO - why?
                 my $cc  = $cf-&gt;{$criterion} ||= {};

Maybe there is something wrong with the digest entries, but I&#39;ll leave
that to Paul.

I made this patch to D::C 0.61 and the test harness still passes - this
patch actually reverts this line to back how it was in D::C 0.55.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;31&nbsp;18:51:11&nbsp;2013</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Aug 09 15:16:36 2007, EWILHELM wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Aug 02 07:14:53 2006, PJCJ wrote:   
<div class="message-stanza open">&gt; &gt; I know it&#39;s a litle late, but do you have any code I could use to   
&gt; &gt; recreate this problem?   
</div>&gt;    
&gt; I do :-D 
&gt;   
&gt; I&#39;ve checked 0.50 thru 0.61 against TAP::Parser and found that the  
&gt; &#39;uninitialized value&#39; trouble starts at 0.56 and continues thereafter.  
&gt;   
&gt; I&#39;m using r212 of TAP::Parser from <span class="clickylink"><a target="new" rel="nofollow" href="http://svn.hexten.net/tapx/trunk/">http://svn.hexten.net/tapx/trunk/</a></span>,  
&gt; though you should be able to replicate it with the latest tarball off  
&gt; of CPAN.  You can replicate this experiment with the bash code in the  
&gt; first link, or simply grab my stderr/stdout outputs from the second  
&gt; link.  
&gt;   
&gt;   <span class="clickylink"><a target="new" rel="nofollow" href="http://scratchcomputing.com/tmp/dc.binary_search.txt">http://scratchcomputing.com/tmp/dc.binary_search.txt</a></span>   
&gt;   <span class="clickylink"><a target="new" rel="nofollow" href="http://scratchcomputing.com/tmp/devel-cover-errs.tar.gz">http://scratchcomputing.com/tmp/devel-cover-errs.tar.gz</a></span>   
&gt;   
&gt; Thanks,  
&gt; Eric  
</div>
Eric,

In advance of this year&#39;s Perl QA hackathon, I was reviewing older tickets in Devel::Cover&#39;s rt.cpan.org queue &#40;it now uses <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/pjcj/Devel--Cover/issues&#41;">https://github.com/pjcj/Devel--Cover/issues&#41;</a></span> and came across this one.  The links mentioned above give 404s.  Are you still experiencing problems with Devel::Cover which would warrant keeping this ticket open?

Thank you very much.
Jim Keenan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;12&nbsp;12:08:36&nbsp;2013</span>
    <span class="description">PJCJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry I let this ticket lie for so long.

I believe that the current code has solved this problem, and so I&#39;m closing this ticket.  If anyone can reproduce the problem with the current code, please feel free to reopen the ticket.

Thanks to all concerned,
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;12&nbsp;12:08:36&nbsp;2013</span>
    <span class="description">PJCJ [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
