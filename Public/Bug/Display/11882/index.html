<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #11882 for Data-JavaScript-Anon: Backslashes in strings not properly escaped</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #11882 for Data-JavaScript-Anon: Backslashes in strings not properly escaped</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Data-JavaScript-Anon">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Data-JavaScript-Anon">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Data-JavaScript-Anon">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Data-JavaScript-Anon">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Data-JavaScript-Anon">Data-JavaScript-Anon CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">11882</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">15 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Data-JavaScript-Anon">Data-JavaScript-Anon</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
cdavaz [...] us.ibm.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-9132-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.3    </td>
  </tr>
  <tr id="CF-9133-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Anon.pm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/126846/32576/Anon.pm">
Tue Mar 15 11:48:43 2005 (11.3k) by 
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=11882">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-126846" href="/Public/Bug/Display.html?id=11882#txn-126846">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;15&nbsp;11:48:43&nbsp;2005</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Backslashes in strings not properly escaped</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/126846/32575/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/32575">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 252b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I was dumping an anonymous hash holding a value with a backslash in it. The string was dumped like this: &#34;C:\&#34;, escaping the quote and causing a syntax error. I added a line to the anon_scalar method:

$value =~ s/\\/\\\\/g;

which solves this problem.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/126846/32576/Anon.pm">Download Anon.pm</a><br />
<span class="downloadcontenttype">text/x-perl 11.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">package Data::JavaScript::Anon;

# This package provides a mechanism to convert the main basic Perl structures
# into JavaScript structures, making it easier to transfer data
# from Perl to JavaScript.

use strict;
use UNIVERSAL &#39;isa&#39;;

use vars qw{$VERSION $errstr $RE_NUMERIC $RE_NUMERIC_HASHKEY};
BEGIN {
	$VERSION = &#39;0.3&#39;;
	$errstr  = &#39;&#39;;

	# Attempt to define a single, all encompasing,
	# regex for detecting a legal JavaScript number.
	# We do not support the exotic values, such as Infinite and NaN.
	my $_sci = qr/[eE]&#40;?:\+|\-&#41;?\d+/;                   # The scientific notation exponent &#40; e.g. &#39;e+12&#39; &#41;
	my $_dec = qr/\.\d+/;                               # The decimal section &#40; e.g. &#39;.0212&#39; &#41;
	my $_int = qr/&#40;?:[1-9]\d*|0&#41;/;                      # The integers section &#40; e.g. &#39;2312&#39; &#41;
	my $real = qr/&#40;?:$_int&#40;?:$_dec&#41;?|$_dec&#41;&#40;?:$_sci&#41;?/; # Merge the integer, decimal and scientific parts
	my $_hex = qr/0[xX][0-9a-fA-F]+/;                   # Hexidecimal notation
	my $_oct = qr/0[0-8]+/;                             # Octal notation

	# The final combination of all posibilities for a straight number
	# The string to match must have no extra characters
	$RE_NUMERIC = qr/^&#40;?:\+|\-&#41;??&#40;?:$real|$_hex|$_oct&#41;$/;

	# The numeric for of the hash key is similar, but without the + or - allowed
	$RE_NUMERIC_HASHKEY = qr/^&#40;?:$real|$_hex|$_oct&#41;$/;
}





#####################################################################
# Top Level Dumping Methods

sub anon_dump {
	my $class = shift;
	my $something = shift;
	my $processed = shift || {};

	# Handle the undefined case
	return &#39;undefined&#39; unless defined $something;

	# Handle the basic non-reference case
	return $class-&gt;anon_scalar&#40; $something &#41; unless ref $something;

	# Check to see if we have processed this reference before.
	# This should catch circular, cross-linked, or otherwise complex things
	# that we can&#39;t handle.
	if &#40; $processed-&gt;{$something} &#41; {
		return $class-&gt;_err_found_twice&#40; $something &#41;;
	} else {
		$processed-&gt;{$something} = 1;
	}

	# Handle the SCALAR reference case, which in our case we treat
	# like a normal scalar.
	if &#40; isa&#40; $something, &#39;SCALAR&#39; &#41; &#41; {
		return $class-&gt;anon_scalar&#40; $something &#41;;
	}

	# Handle the array case by generating an anonymous array
	if &#40; isa&#40; $something, &#39;ARRAY&#39; &#41; &#41; {
		# Create and return the array
		my $list = join &#39;, &#39;, map { $class-&gt;anon_dump&#40;$_, $processed&#41; } @$something;
		return &#34;[ $list ]&#34;;
	}

	# Handle the hash case by generating an anonymous object/hash
	if &#40; isa&#40; $something, &#39;HASH&#39; &#41; &#41; {
		# Create and return the anonymous hash
		my $pairs = join &#39;, &#39;, map {
				$class-&gt;anon_hash_key&#40; $_ &#41;
					. &#39;: &#39;
					. $class-&gt;anon_dump&#40; $something-&gt;{$_}, $processed &#41;
				} keys %$something;
		return &#34;{ $pairs }&#34;;
	}

	$class-&gt;_err_not_supported&#40; $something &#41;;
}

# Same thing, but creating a variable
sub var_dump {
	my $class = shift;
	my $name = shift or return undef;
	my $value = $class-&gt;anon_dump&#40; shift &#41;;
	&#34;var $name = $value;&#34;;
}

# Wrap some JavaScript in a HTML script tag
sub script_wrap {
	&#34;&lt;script language=\&#34;JavaScript\&#34; type=\&#34;text/JavaScript\&#34;&gt;\n&#34;
		. &#34;&lt;!--\n\n$_[1]\n// --&gt;\n&#34;
		. &#34;&lt;/script&gt;&#34;;
}

# Is a particular string a legal JavaScript number.
# Returns true if a legal JavaScript number.
# Returns false otherwise.
sub is_a_number {
	my $class = shift;
	my $number = &#40;defined $_[0] and ! ref $_[0]&#41; ? shift : &#39;&#39;;
	$number =~ m/$RE_NUMERIC/ ? 1 : &#39;&#39;;
}





#####################################################################
# Basic Variable Creation Statements

# Create a Javascript scalar given the javascript variable name
# and a reference to the scalar.
sub var_scalar {
	my $class = shift;
	my $name = shift or return undef;
	my $scalar_ref = isa&#40; $_[0], &#39;SCALAR&#39; &#41; ? shift : return undef;
	my $value = $class-&gt;js_value&#40; $$scalar_ref &#41; or return undef;
	&#34;var $name = $value;&#34;;
}

# Create a Javascript array given the javascript array name
# and a reference to the array.
sub var_array {
	my $class = shift;
	my $name = shift or return undef;
	my $array_ref = isa&#40; $_[0], &#39;ARRAY&#39; &#41; ? shift : return undef;
	my $list = join &#39;, &#39;, map { $class-&gt;anon_dump&#40;$_&#41; } @$array_ref;
	&#34;var $name = new Array&#40; $list &#41;;&#34;;
}

# Create a Javascript hash &#40; which is just an object &#41;, given
# the variable name, and a reference to a hash.
sub var_hash {
	my $class = shift;
	my $name = shift or return undef;
	my $hash_ref = isa&#40; $_[0], &#39;HASH&#39; &#41; ? shift : return undef;
	my $struct = $class-&gt;anon_hash&#40; $hash_ref &#41; or return undef;
	&#34;var $name = $struct;&#34;;
}





#####################################################################
# Basic Serialisation And Escaping Methods

# Turn a single perl value into a single javascript value
sub anon_scalar {
	my $class = shift;
	my $value = isa&#40; $_[0], &#39;SCALAR&#39; &#41; ? ${shift&#40;&#41;} : shift;
	return &#39;null&#39; unless defined $value;

	# Don&#39;t quote if it is numeric
	return $value if $value =~ /$RE_NUMERIC/;

  $value =~ s/\\/\\\\/g;
	$value =~ s/&#34;/\\&#34;/g;
	&#39;&#34;&#39; . $value . &#39;&#34;&#39;;
}

# Turn a single perl value into a javascript hash key
sub anon_hash_key {
	my $class = shift;
	my $value = &#40;defined $_[0] and ! ref $_[0]&#41; ? shift : return undef;

	# Don&#39;t quote if it is just a set of word characters or numeric
	return $value if $value =~ /^[^\W\d]\w*$/;
	return $value if $value =~ /$RE_NUMERIC_HASHKEY/;

	# Escape and quote
	$value =~ s/&#34;/\\&#34;/g;
	&#39;&#34;&#39; . $value . &#39;&#34;&#39;;
}

# Create a Javascript array given the javascript array name
# and a reference to the array.
sub anon_array {
	my $class = shift;
	my $name = shift or return undef;
	my $array_ref = isa&#40; $_[0], &#39;ARRAY&#39; &#41; ? shift : return undef;
	my $list = join &#39;, &#39;, map { $class-&gt;anon_scalar&#40;$_&#41; } @$array_ref;
	&#34;[ $list ]&#34;;
}

# Create a Javascript hash &#40; which is just an object &#41;, given
# the variable name, and a reference to a hash.
sub anon_hash {
	my $class = shift;
	my $name = shift or return undef;
	my $hash_ref = isa&#40; $_[0], &#39;HASH&#39; &#41; ? shift : return undef;
	my $pairs = join &#39;, &#39;, map { 
			$class-&gt;anon_hash_key&#40; $_ &#41;
				. &#39;: &#39;
				. $class-&gt;anon_scalar&#40; $hash_ref-&gt;{$_} &#41;
			} keys %$hash_ref;
	&#34;{ $pairs }&#34;;
}





#####################################################################
# Utility and Error Methods

sub _err_found_twice {
	my $class = shift;
	my $something = ref $_[0] || &#39;a reference&#39;;
	$errstr = &#34;Found $something in your dump more than once. &#34;
		. &#34;Data::JavaScript::Anon does not support complex, &#34;
		. &#34;circular, or cross-linked data structures&#34;;
	undef;
}

sub _err_not_supported {
	my $class = shift;
	my $something = ref $_[0] || &#39;A reference of unknown type&#39;;
	$errstr = &#34;$something was found in the dump struct. &#34;
		. &#34;Data::JavaScript::Anon only supports objects based on, &#34;
		. &#34;or references to SCALAR, ARRAY and HASH type variables.&#34;;
	undef;
}

1;

__END__

=head1 NAME

Data::JavaScript::Anon - Create big, dumb and/or anonymous data structures in JavaScript

=head1 SYNOPSIS

  # Dump an arbitrary structure to javascript
  Data::JavaScript::Anon-&gt;anon_dump&#40; [ &#39;a&#39;, &#39;b&#39;, { a =&gt; 1, b =&gt; 2 } ] &#41;;

=head1 DESCRIPTION

Data::JavaScript::Anon provides the ability to dump large simple data
structures to JavaScript. That is, things that don&#39;t need to be a class,
or have special methods or whatever.

The method it uses is to write anonymous variables, in the same way you
would in Perl. The following shows some examples.

  # Perl anonymous array
  [ 1, &#39;a&#39;, &#39;Foo Bar&#39; ]
  
  # JavaScript equivalent &#40; yes, it&#39;s exactly the same &#41;
  [ 1, &#39;a&#39;, &#39;Foo Bar&#39; ]
  
  # Perl anonymous hash
  { foo =&gt; 1, bar =&gt; &#39;bar&#39; }
  
  # JavaScript equivalent
  { foo: 1, bar: &#39;bar&#39; }

One advantage of doing it in this method is that you do not have to
co-ordinate variable names between your HTML templates and Perl. You
could use a simple Template Toolkit phrase like the following to get
data into your HTML templates.

  var javascript_data = [% data $];

In this way, it doesn&#39;t matter WHAT the HTML template calls a
particular variables, the data dumps just the same. This could help
you keep the work of JavaScript and Perl programmers &#40; assuming you
were using different people &#41; seperate, without creating 
cross-dependencies between their code, such as variable names.

The variables you dump can also be of arbitrary depth and complexity,
with a few limitations.

=over 4

=item ARRAY and HASH only

Since arrays and hashs are all that is supported by JavaScript, they
are the only things you can use in your structs. Any references or a
different underlying type will be detected and an error returned.

Note that Data::JavaScript::Anon will use the UNDERLYING type of the
data. This means that the blessed classes or objects will be ignored
and their data based on the object&#39;s underlying implementation type.

This can be a positive thing, as you can put objects for which you expect
a certain dump structure into the data to dump, and it will convert to 
unblessed, more stupid, JavaScript objects cleanly.

=item No Circular References

Since circular references can&#39;t be defined in a single anonymous struct,
they are not allowed. Try something like L&lt;Data::JavaScript&gt; instead.
Although not supported, they will be detected, and an error returned.

=back

=head1 MAIN METHODS

All methods are called as methods directly, in the form
C&lt;&lt; Data::JavaScript::Anon-&gt;anon_dump&#40; [ &#39;etc&#39; ] &#41; &gt;&gt;.

=head2 anon_dump STRUCT

The main method of the class, anon_dump takes a single arbitrary data
struct, and converts it into an anonymous JavaScript struct.

If needed, the argument can even be a normal text string, although it
wouldn&#39;t do a lot to it. :&#41;

Returns a string containing the JavaScript struct on success, or C&lt;undef&gt;
if an error is found.

=head2 var_dump $name, STRUCT

As above, but the C&lt;var_dump&gt; method allows you to specify a variable name,
with the resulting JavaScript being C&lt;var name = struct;&gt;. Note that the
method WILL put the trailing semi-colon on the string.

=head2 script_wrap $javascript

The C&lt;script_wrap&gt; method is a quick way of wrapping a normal JavaScript html
tag around your JavaScript.

=head2 is_a_number $scalar

When generating the javascript, numbers will be printed directly and not
quoted. The C&lt;is_a_number&gt; method provides convenient access to the test
that is used to see if something is a number. The test handles just about
everything legal in JavaScript, with the one exception of the exotics, such
as Infinite, -Infinit and NaN.

Returns true is a scalar is numberic, or false otherwise.

=head1 SECONDARY METHODS

The following are a little less general, but may be of some use.

=head2 var_scalar $name, \$scalar

Creates a named variable from a scalar reference.

=head2 var_array $name, \@array

Creates a named variable from an array reference.

=head2 var_hash $name, \%hash

Creates a named variable from a hash reference.

=head2 anon_scalar \$scalar

Creates an anonymous JavaScript value from a scalar reference.

=head2 anon_array \@array

Creates an anonymous JavaScript array from an array reference.

=head2 anon_hash \%hash

Creates an anonymous JavaScript object from a hash reference.

=head2 anon_hash_key $value

Applys the formatting for a key in a JavaScript object

=head1 SUPPORT

Bugs should be reported via the CPAN bug tracker at:

<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/NoAuth/ReportBug.html?Queue=Data%3A%3AJavaScript%3A%3AAnon">http://rt.cpan.org/NoAuth/ReportBug.html?Queue=Data%3A%3AJavaScript%3A%3AAnon</a></span>

For other comments or queries, contact the author.

=head1 AUTHOR

Adam Kennedy &#40;Maintainer&#41;, L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://ali.as/">http://ali.as/</a></span>&gt;, cpan@ali.as

=head1 COPYRIGHT

Copyright &#40;c&#41; 2003 Adam Kennedy. All rights reserved.
This program is free software; you can redistribute
it and/or modify it under the same terms as Perl itself.

The full text of the license can be found in the
LICENSE file included with this module.

=cut
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-126847" href="/Public/Bug/Display.html?id=11882#txn-126847">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;24&nbsp;22:54:15&nbsp;2005</span>
    <span class="description">adamk [...] cpan.org -  Status changed from &#39;new&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.283589</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
