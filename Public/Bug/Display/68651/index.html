<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #68651 for Module-Build: unacceptable performance : 40mins+ per ./Build invocation</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #68651 for Module-Build: unacceptable performance : 40mins+ per ./Build invocation</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Module-Build/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Module-Build/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Module-Build/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Module-Build/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Module-Build">Module-Build CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">68651</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Module-Build/Active/">Module-Build</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jason.vas.dias [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-21558-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-21559-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;04&nbsp;14:47:57&nbsp;2011</span>
    <span class="description">jason.vas.dias [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> unacceptable performance : 40mins+ per ./Build invocation</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">It seems every time cpan&#40;1&#41; or I run any generated ./Build script, 
giving a &#34;make&#34; or &#34;install&#34; command , it takes over 40 minutes 
for each invocation to complete .

This is on a linux 2.6.38+ glibc-2.13 gcc-4.6.0 binutils-2.21.51.20110407
x86_64 box.

The Build process grows huge &#40; &gt; 600MB RSS &#41;  ,  and an strace shows
accesses to these  absurd  file names :

open&#40;&#34;bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/biopen&#40;&#34;bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/ldscripts/tic3xcoff.xu&#34;,
O_RDONLY&#41; = 6
...
stat&#40;&#34;bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/ldscripts/tic3xcoff.xu&#34;,
{st_mode=S_IFREG|0644, st_size=1191, ...}&#41; = 0
...
open&#40;&#34;bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/bin/ldscripts/tic3xcoff.xu&#34;,
O_RDONLY&#41; = 6
...

For instance to build Crypt::OpenSSL::CA takes around 1 hour 20 mins
on my 2.2Ghz x86_64 with 2GB RAM and 80GB free disk space - is this
normal ?

This takes 1 hour 20 mins:

Creating new &#39;Build&#39; script for &#39;Crypt-OpenSSL-CA&#39; version &#39;0.21&#39;
/usr/bin/perl Build --makefile_env_macros 1                      
Building Crypt-OpenSSL-CA                                        
/usr/bin/perl Build --makefile_env_macros 1 install              
Building Crypt-OpenSSL-CA                                        
Files found in blib/arch: installing files in blib/lib into architecture
dependent library tree

What can I do to achieve acceptable Module::Build performance ?
 
Doing a full CPAN rebuild could take weeks on my platform at this
rate .
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;04&nbsp;23:40:50&nbsp;2011</span>
    <span class="description">kwilliams [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Wow, that&#39;s an impressively long time.

What version of perl, &#38; what version of Module::Build?

 -Ken
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;04&nbsp;23:40:51&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;05&nbsp;08:26:51&nbsp;2011</span>
    <span class="description">jason.vas.dias [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jason.vas.dias [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jun 04 23:40:50 2011, KWILLIAMS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Wow, that&#39;s an impressively long time.
&gt; 
&gt; What version of perl, &#38; what version of Module::Build?
&gt; 
&gt;  -Ken
</div>Hi Ken - thanks for responding -
Oops, sorry, can&#39;t believe I didn&#39;t mention that info  in my first post -
I just built perl-5.14.1-maint from GIT &#40;making sure it passes its test
suite&#41; and did part of a &#39;cpan upgrade&#39;, which installed Module::Build
0.38 .
I can provide strace logs / core dumps of one of these huge Build
processes over a website if you like .
Regards,
Jason
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;05&nbsp;08:32:52&nbsp;2011</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #68651] unacceptable performance : 40mins+ per ./Build invocation</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 5 Jun 2011 08:32:22 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-Build [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Golden &lt;dagolden [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun, Jun 5, 2011 at 8:26 AM, Jason Vas Dias via RT
&lt;bug-Module-Build@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I just built perl-5.14.1-maint from GIT &#40;making sure it passes its test
&gt; suite&#41; and did part of a &#39;cpan upgrade&#39;, which installed Module::Build
&gt; 0.38 .
</div>
Perl 5.14.0 includes Module::Build 0.38.  If you have 5.14 or later,
it shouldn&#39;t install Moduile::Build from cpan.  That is suspicious and
makes me wonder if your perl is somehow incorrectly configured or
installed.  Please attach the output of your perl -V.

Are you getting this failure from an *installed* Perl or are you
trying to run cpan from within the Perl source directory?  If the
latter, please install it to a temporary directory and try your tests
using a fully installed Perl.

Also, do you have a .modulebuildrc file that is setting any variables?

-- David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;05&nbsp;08:58:29&nbsp;2011</span>
    <span class="description">jason.vas.dias [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jason.vas.dias [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jun 05 08:32:52 2011, DAGOLDEN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  Please attach the output of your perl -V.
</div>
$ perl -V                                                              
                                                          
Summary of my perl5 &#40;revision 5 version 14 subversion 1&#41; configuration:
                                                          
  Commit id: e316d6ee85eca41b286bbab119c9ae8decb17d7d                  
                                                          
  Platform:                                                            
                                                          
    osname=linux, osvers=2.6.38.2, archname=x86_64-linux-thread-multi  
                                                          
    uname=&#39;linux jvdspc 2.6.26-rc9.jvd #1 smp thu jul 10 15:01:47 edt
2008 x86_64 amd turion&#40;tm&#41; 64 x2 mobile technology tl-64 authenticamd
gnulinux &#39;
    config_args=&#39;-f config.sh -d&#39;                                      
                                                                       
      
    hint=previous, useposix=true, d_sigaction=define                   
                                                                       
      
    useithreads=define, usemultiplicity=define                         
                                                                       
      
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
                                                                       
     
    use64bitint=define, use64bitall=define, uselongdouble=undef        
                                                                       
      
    usemymalloc=n, bincompat5005=undef                                 
                                                                       
      
  Compiler:                                                            
                                                                       
      
    cc=&#39;gcc&#39;, ccflags =&#39;-fPIC&#39;,                                        
                                                                       
      
    optimize=&#39;-O -g&#39;,                                                  
                                                                       
      
    cppflags=&#39;-D_REENTRANT -D_GNU_SOURCE -DDEBUGGING
-fno-strict-aliasing -pipe -fstack-protector -D_REENTRANT -D_GNU_SOURCE
-DDEBUGGING -fno-strict-aliasing -pipe -fstack-protector
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_REENTRANT -D_GNU_SOURCE
-DDEBUGGING -fno-strict-aliasing -pipe -fstack-protector
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_REENTRANT -D_GNU_SOURCE
-DDEBUGGING -fno-strict-aliasing -pipe -fstack-protector
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_REENTRANT -D_GNU_SOURCE
-DDEBUGGING -fno-strict-aliasing -pipe -fstack-protector
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_REENTRANT -D_GNU_SOURCE
-DDEBUGGING -fno-strict-aliasing -pipe -fstack-protector
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_REENTRANT -D_GNU_SOURCE
-DDEBUGGING -fno-strict-aliasing -pipe -fstack-protector
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_REENTRANT -D_GNU_SOURCE
-DDEBUGGING -fno-strict-aliasing -pipe -fstack-protector
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -fPIC -fPIC&#39;                
                                                                       
                                                                          
    ccversion=&#39;&#39;, gccversion=&#39;4.6.0&#39;, gccosandvers=&#39;&#39;                  
                                                                       
                      
    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678 
                                                                       
                      
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
                                                                       
                      
    ivtype=&#39;long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;,
lseeksize=8                                                            
                       
    alignbytes=8, prototype=define                                     
                                                                       
                      
  Linker and Libraries:                                                
                                                                       
                      
    ld=&#39;gcc&#39;, ldflags =&#39;-Wl,--export-dynamic -fstack-protector&#39;        
                                                                       
                      
    libpth=/usr/lib64 /lib64                                           
                                                                       
                      
    libs=-lnsl -lgdbm -ldb -ldl -lm -lcrypt -lutil -lpthread -lc
-lgdbm_compat                                                          
                             
    perllibs=-lnsl -ldl -lm -lcrypt -lutil -lpthread -lc               
                                                                       
                      
    libc=/lib64/libc.so.6, so=so, useshrplib=true, libperl=libperl.so  
                                                                       
                      
    gnulibc_version=&#39;2.13&#39;                                             
                                                                       
                      
  Dynamic Linking:                                                     
                                                                       
                      
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags=&#39;-O -g
-fstack-protector -fPIC
-Wl,--export-dynamic,-rpath,/usr/lib/perl5/5.14.0/x86_64-linux-thread-multi/CORE
-Wl,-rpath,/usr/lib/perl5/5.14.0/x86_64-linux-thread-multi/CORE
-Wl,-rpath,/usr/lib/perl5/5.14.0/x86_64-linux-thread-multi/CORE&#39;       
                       
    cccdlflags=&#39;-fPIC&#39;, lddlflags=&#39;-shared -O -g -fstack-protector -fPIC
-Wl,--export-dynamic&#39;                                                  
                     


Characteristics of this binary &#40;from libperl&#41;: 
  Compile-time options: MULTIPLICITY PERL_DONT_CREATE_GVSV
                        PERL_IMPLICIT_CONTEXT PERL_MALLOC_WRAP
                        PERL_PRESERVE_IVUV USE_64_BIT_ALL USE_64_BIT_INT
                        USE_ITHREADS USE_LARGE_FILES USE_PERLIO
USE_PERL_ATOF
                        USE_REENTRANT_API
  Locally applied patches:
        RC0
  Built under linux
  Compiled at Jun  2 2011 21:19:26
  @INC:
    /usr/lib/perl5/site_perl/5.14.0/x86_64-linux-thread-multi
    /usr/lib/perl5/site_perl/5.14.0
    /usr/lib/perl5/vendor_perl/5.14.0/x86_64-linux-thread-multi
    /usr/lib/perl5/vendor_perl/5.14.0
    /usr/lib/perl5/5.14.0/x86_64-linux-thread-multi
    /usr/lib/perl5/5.14.0
    /usr/lib/perl5/site_perl/5.14.0
    /usr/lib/perl5/vendor_perl/5.14.0
    /usr/lib/perl5/vendor_perl/5.12.0
    /usr/lib/perl5/vendor_perl/5.12.0/x86_64-linux-thread-multi
    /usr/lib/perl5/vendor_perl/5.10.1/x86_64-linux-thread-multi
    /usr/lib/perl5/vendor_perl/5.10.1
    /usr/lib/perl5/vendor_perl/5.10.1/x86_64-linux-thread-multi
    /usr/lib/perl5/vendor_perl/5.10.0/x86_64-linux-thread-multi
    /usr/lib/perl5/vendor_perl/5.10.0
    /usr/lib/perl5/vendor_perl/5.10.0/x86_64-linux-thread-multi
    /usr/lib/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi
    /usr/lib/perl5/vendor_perl/5.8.8
    /usr/lib/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi
    /usr/lib/perl5/vendor_perl/5.8.7
    /usr/lib/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi
    /usr/lib/perl5/site_perl/5.10.0/x86_64-linux-thread-multi
    /usr/lib/perl5/site_perl/5.10.0
    /usr/lib/perl5/site_perl/5.8.8]
    /usr/lib/perl5/site_perl/5.10.1/x86_64-linux-thread-multi
    /usr/lib/perl5/site_perl/5.10.1
    /usr/lib/perl5/site_perl/5.10.1/x86_64-linux-thread-multi
    /usr/lib/perl5/site_perl/5.10.0/x86_64-linux-thread-multi
    /usr/lib/perl5/site_perl/5.10.0
    /usr/lib/perl5/site_perl/5.10.0/x86_64-linux-thread-multi
    /usr/lib/perl5/site_perl/5.8.8/x86_64-linux-thread-multi
    /usr/lib/perl5/site_perl/5.8.8
    /usr/lib/perl5/site_perl/5.8.8/x86_64-linux-thread-multi
    /usr/lib/perl5/site_perl/5.8.7
    /usr/lib/perl5/site_perl/5.8.8/x86_64-linux-thread-multi
    .

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; a freshly installed  PERL .
</div>
Sorry, yes, Module::Build WAS the one installed from PERL&#39;s core modules
during 5.14.1 build .

I noticed this problem when doing a &#34;cpan upgrade&#34; AFTER installation
of a fresh new perl-5.14.1 . 
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Also, do you have a .modulebuildrc file that is setting any variables?
&gt; -- David
</div>
It happens with EVERY module build that uses Module::Build - I have no
.modulebuildrc - you mean ~/.modulebuildrc ? This doesn&#39;t exist - where
would this file be ? 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;05&nbsp;16:29:49&nbsp;2011</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #68651] unacceptable performance : 40mins+ per ./Build invocation</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 05 Jun 2011 13:29:38 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-Build [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2011.6.5 5:58 AM, Jason Vas Dias via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Summary of my perl5 &#40;revision 5 version 14 subversion 1&#41; configuration:
&gt;                                                           
&gt;   Commit id: e316d6ee85eca41b286bbab119c9ae8decb17d7d                  
</div>
Its entirely probable you found a bug in that version of perl.  Do you have
the same problem with a freshly built 5.14.0?


-- 
Whip me, beat me, make my code compatible with VMS!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;05&nbsp;18:28:16&nbsp;2011</span>
    <span class="description">jason.vas.dias [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jason.vas.dias [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Aha !  I had a cyclic link : /usr/bin/bin -&gt; /usr/bin  .

Once this is removed,  performance is again &#34;acceptable&#34; - 
around 4 minutes to build Crypt::OpenSSL::CA instead of 40 -

But why is every generated Module::Build script scanning ALL
files under /usr/bin and /usr/lib ? This is @ 8GB of files
on my sytem .

How can I disable generation of this /usr/{bin,lib} file scan by
Module::Build ?

And what mechanism is it using to do cyclic link detection ?
whatever it is, it is a highly inefficient one - an efficient
one is to check that one has not processed a directory inode
before,  as follows &#40;a fragment doing recursive descent of
a directory tree in a perl program I wrote&#41; :


my &#40;$dev,$dino &#41;=&#40; &#40;stat&#40;$dir&#41;&#41;[0 ... 1] &#41;;
$dinodes{$dino} = $dir ;
do
{
    $dir = pop&#40;@dirs&#41;;

    opendir&#40;D,$dir&#41;||die&#40;&#34;opendir&#40;$dir&#41; failed: $? : $!&#34;&#41;;

    ENT:while&#40; readdir&#40;D&#41; &#41;
    {
        my $ent = $_;
        if&#40; &#40;$ent eq &#39;.&#39;&#41; || &#40;$ent eq &#39;..&#39;&#41; &#41;
        {
            next ENT;
        }
        my &#40; $ent_dev, $ent_ino &#41; = &#40; &#40;stat&#40;$dir.&#39;/&#39;.$ent&#41;&#41;[0 ... 1] &#41;;
        if&#40; &#40; $ent_dev ne $dev &#41;
          ||&#40; -l $dir.&#39;/&#39;.$ent &#41;
          &#41;
        {
            next ENT;
        }
        if&#40; -d $dir.&#39;/&#39;.$ent &#41;
        {
            if&#40;  !exists&#40; $dinodes{$ent_ino} &#41; &#41;
            {
                $dinodes{$ent_ino} = $dir.&#39;/&#39;.$ent;
                push&#40;@dirs, $dir.&#39;/&#39;.$ent &#41; ;
            }
        }else
        {
          ...

Please don&#39;t check for cyclic links by just waiting for the filename
/ directory depth to grow too long !  
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;05&nbsp;22:22:23&nbsp;2011</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #68651] unacceptable performance : 40mins+ per ./Build invocation</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 5 Jun 2011 22:21:53 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-Build [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Golden &lt;dagolden [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun, Jun 5, 2011 at 6:28 PM, Jason Vas Dias via RT
&lt;bug-Module-Build@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; But why is every generated Module::Build script scanning ALL
&gt; files under /usr/bin and /usr/lib ? This is @ 8GB of files
&gt; on my sytem .
</div>
I suspect it&#39;s trying to confirm that the perl binary that is running
&#34;Build&#34; is the same as the perl binary used to run &#34;Build.PL&#34;.  That
is actually a non-trivial task.

If you run it with an absolute path, does it help any?

  $ /opt/path/to/perl Build.PL
  $ ./Build

Or

  $ /opt/path/to/perl Build.PL
  $ /opt/path/to/perl Build

-- David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;06&nbsp;08:00:31&nbsp;2011</span>
    <span class="description">jason.vas.dias [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jason.vas.dias [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jun 05 22:22:23 2011, DAGOLDEN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If you run it with an absolute path, does it help any?
&gt; 
&gt;   $ /opt/path/to/perl Build.PL
&gt;   $ ./Build
&gt; 
&gt; Or
&gt; 
&gt;   $ /opt/path/to/perl Build.PL
&gt;   $ /opt/path/to/perl Build
&gt; 
</div>
Hi David -

No, neither seems to have any effect :
    
    $ /usr/bin/perl Build.PL
    $ time /usr/bin/perl ./Build
Building Crypt OpenSSL-CA
...
real    5m20.154s
user    0m21.635s
sys     0m18.389s

An strace shows it is still scanning every file under 
/usr/lib/perl5 ,  /usr/bin , and /usr/lib  :

     $ &#40; strace -f -e trace=open /usr/bin/perl Build &#41; 2&gt;&#38;1 | 
       tee /tmp/Build_opens.log; 
      ... # takes @ 5 mins
     $ egrep &#39;^open[&#40;]&#34;&#40;bin|lib&#41;/&#39; /tmp/Build_opens.log | wc -l
60544

And the log shows it is still scanning every file :
...
   open&#40;&#34;lib/ldscripts/msp430x447.xr&#34;, O_RDONLY&#41; = 6
   open&#40;&#34;lib/ldscripts/msp430x447.xr&#34;, O_RDONLY&#41; = 6
   open&#40;&#34;lib/ldscripts/hppalinux.xc&#34;, O_RDONLY&#41; = 6
   open&#40;&#34;lib/ldscripts/hppalinux.xc&#34;, O_RDONLY&#41; = 6
...

Same thing happens with:
   $ /usr/bin/perl ./Build.PL
   $ ./Build
A full scan of all files under /usr/{bin,lib} still occurs .

Surely there should be some way of disabling this scan ?

And what about fixing the inefficient and naive cyclic link detection ?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;06&nbsp;11:21:50&nbsp;2011</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #68651] unacceptable performance : 40mins+ per ./Build invocation</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 6 Jun 2011 11:21:21 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-Build [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Golden &lt;dagolden [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun, Jun 5, 2011 at 6:28 PM, Jason Vas Dias via RT
&lt;bug-Module-Build@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Once this is removed,  performance is again &#34;acceptable&#34; -
&gt; around 4 minutes to build Crypt::OpenSSL::CA instead of 40 -
</div>
Crypt::OpenSSL::CA has a very customized Build.PL script.  Are you
seeing similar slowdowns for other Build.PL distributions?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; But why is every generated Module::Build script scanning ALL
&gt; files under /usr/bin and /usr/lib ? This is @ 8GB of files
&gt; on my sytem .
&gt;
&gt; How can I disable generation of this /usr/{bin,lib} file scan by
&gt; Module::Build ?
</div>
I&#39;m not convinced this is a Module::Build issue.  Build.PL can run
*anything* and something else could be misbehaving.  As far as I know,
other than resolving $^X=&#34;perl&#34; to an absolute path, there shouldn&#39;t
be much if any bin directory scanning going on.  At most, something
might iterate PATH to check for a program, but I don&#39;t think anything
is recursively traversing directories.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; And what mechanism is it using to do cyclic link detection ?
</div>
It&#39;s not.

-- David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;06&nbsp;13:05:07&nbsp;2011</span>
    <span class="description">kwilliams [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">When you have the circular link on your system, what does
File::Spec-&gt;path&#40;&#41; return?  Is it super-long, or of reasonable length?

If that doesn&#39;t provide any useful information, then it would be great
to get a perl-level stack trace showing where in the code it&#39;s crapping up.

 -Ken
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;06&nbsp;14:41:34&nbsp;2011</span>
    <span class="description">jason.vas.dias [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jason.vas.dias [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hmm, this is getting interesting - responding to David &#38; Ken&#39;s comments
below -
On Monday 06 June 2011 16:21:51 DGOLDEN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Crypt::OpenSSL::CA has a very customized Build.PL script.  Are you
&gt; seeing similar slowdowns for other Build.PL distributions?
&gt; 
</div>Yes :

 $ cd Encode-Detect-1.0.1
 $ time perl Build.PL &#38;&#38; perl Build
...
ExtUtils::Mkbootstrap::Mkbootstrap&#40;&#39;blib/arch/auto/Encode/Detect/Detector/Detector.bs&#39;&#41;
gcc -shared -O -g -fstack-protector -fPIC -Wl,--export-dynamic -o
blib/arch/auto/Encode/Detect/Detector/Detector.so
lib/Encode/Detect/Detector.o src/LangThaiModel.o src/nsSBCharSetProber.o
src/LangCyrillicModel.o src/LangHebrewModel.o src/nsEUCKRProber.o
src/LangHungarianModel.o src/nsHebrewProber.o src/JpCntx.o
src/nsSBCSGroupProber.o src/nsMBCSGroupProber.o src/nsEscCharsetProber.o
src/nsUniversalDetector.o src/CharDistribution.o src/nsBig5Prober.o
src/nsEscSM.o src/nsMBCSSM.o src/nsLatin1Prober.o src/nsEUCTWProber.o
src/nsUTF8Prober.o src/nsSJISProber.o src/nsEUCJPProber.o
src/nsGB2312Prober.o src/nsCharSetProber.o src/LangGreekModel.o
src/LangBulgarianModel.o -lstdc++

real    3m25.251s
user    0m5.681s
sys     0m8.891s
$

It takes @ 20secs to emit the C++ link line, then hangs for @ 3mins
doing the scan, as an strace excerpt shows :

stat&#40;&#34;bin/ldscripts/armelf.xsw&#34;, {st_mode=S_IFREG|0644, st_size=7272,
...}&#41; = 0
open&#40;&#34;bin/ldscripts/armelf.xsw&#34;, O_RDONLY&#41; = 6

Trying to get a perl stack trace ...

Wow! lots of tiny xterms with separate debug sessions popped up when
I did :
  $ perl -d ./Build 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">    &gt; t
    &gt; c
</div>Then when it enters the scan I pressed  ^C and did
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">    &gt; T
</div>  DB&lt;1&gt; T
. =
Pod::Html::scan_dir&#40;&#39;lib/perl5/5.14.0/x86_64-linux-thread-multi/auto/POSIX&#39;,
1&#41; called from file `/usr/lib/perl5/5.14.0/Pod/Html.pm&#39; line 1015
. =
Pod::Html::scan_dir&#40;&#39;lib/perl5/5.14.0/x86_64-linux-thread-multi/auto&#39;,
1&#41; called from file `/usr/lib/perl5/5.14.0/Pod/Html.pm&#39; line 1015
. = Pod::Html::scan_dir&#40;&#39;lib/perl5/5.14.0/x86_64-linux-thread-multi&#39;, 1&#41;
called from file `/usr/lib/perl5/5.14.0/Pod/Html.pm&#39; line 1015
. = Pod::Html::scan_dir&#40;&#39;lib/perl5/5.14.0&#39;, 1&#41; called from file
`/usr/lib/perl5/5.14.0/Pod/Html.pm&#39; line 876
. = Pod::Html::scan_podpath&#40;&#39;/usr&#39;, 1, 0&#41; called from file
`/usr/lib/perl5/5.14.0/Pod/Html.pm&#39; line 773
. = Pod::Html::get_cache&#40;&#39;./pod2htmd.tmp&#39;, &#39;./pod2htmi.tmp&#39;, ref&#40;ARRAY&#41;,
&#39;/usr&#39;, 1&#41; called from file `/usr/lib/perl5/5.14.0/Pod/Html.pm&#39; line 500
. = Pod::Html::pod2html&#40;&#39;--flush&#39;, &#39;--title=Encode::Detect - An
Encode::Encoding subclass that detects the encoding of data&#39;,
&#39;--podpath=lib/perl5/5.14.0:bin:lib/perl5/site_perl/5.14.0&#39;,
&#39;--infile=blib/lib/Encode/Detect.pm&#39;,
&#39;--outfile=blib/libhtml/site/lib/Encode/Detect.tmp&#39;, &#39;--podroot=/usr&#39;,
&#39;--htmlroot=../../..&#39;, &#39;--header&#39;, &#39;--backlink=Back to Top&#39;&#41; called from
file `/usr/lib/perl5/5.14.0/Module/Build/Base.pm&#39; line 3447
$ = eval {...} called from file
`/usr/lib/perl5/5.14.0/Module/Build/Base.pm&#39; line 3449
. = Module::Build::Base::htmlify_pods&#40;ref&#40;Module::Build&#41;, &#39;lib&#39;&#41; called
from file `/usr/lib/perl5/5.14.0/Module/Build/Base.pm&#39; line 3324
$ = Module::Build::Base::ACTION_html&#40;ref&#40;Module::Build&#41;&#41; called from
file `/usr/lib/perl5/5.14.0/Module/Build/Base.pm&#39; line 2024
. = Module::Build::Base::_call_action&#40;ref&#40;Module::Build&#41;, &#39;html&#39;&#41; called
from file `/usr/lib/perl5/5.14.0/Module/Build/Base.pm&#39; line 5250
$ = Module::Build::Base::depends_on&#40;ref&#40;Module::Build&#41;, &#39;manpages&#39;,
&#39;html&#39;&#41; called from file `/usr/lib/perl5/5.14.0/Module/Build/Base.pm&#39;
line 3183
$ = Module::Build::Base::ACTION_docs&#40;ref&#40;Module::Build&#41;&#41; called from
file `/usr/lib/perl5/5.14.0/Module/Build/Base.pm&#39; line 2024
. = Module::Build::Base::_call_action&#40;ref&#40;Module::Build&#41;, &#39;docs&#39;&#41; called
from file `/usr/lib/perl5/5.14.0/Module/Build/Base.pm&#39; line 5250
$ = Module::Build::Base::depends_on&#40;ref&#40;Module::Build&#41;, &#39;docs&#39;&#41; called
from file `/usr/lib/perl5/5.14.0/Module/Build/Base.pm&#39; line 2865
$ = Module::Build::Base::ACTION_build&#40;ref&#40;Module::Build&#41;&#41; called from
file `/usr/lib/perl5/5.14.0/Module/Build/Base.pm&#39; line 2024
. = Module::Build::Base::_call_action&#40;ref&#40;Module::Build&#41;, &#39;build&#39;&#41;
called from file `/usr/lib/perl5/5.14.0/Module/Build/Base.pm&#39; line 2012
. = Module::Build::Base::dispatch&#40;ref&#40;Module::Build&#41;&#41; called from file
`Build&#39; line 58


On Mon Jun 06 13:05:07 2011, KWILLIAMS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; When you have the circular link on your system, what does
&gt; File::Spec-&gt;path&#40;&#41; return?  Is it super-long, or of reasonable length?
&gt; 
&gt; If that doesn&#39;t provide any useful information, then it would be great
&gt; to get a perl-level stack trace showing where in the code it&#39;s
</div>crapping up.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
</div>
Looks like Pod::Html - I guess I should take this up with them ? 
It really makes using CPAN a nightmare on my system.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;06&nbsp;14:51:41&nbsp;2011</span>
    <span class="description">jason.vas.dias [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jason.vas.dias [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 06 13:05:07 2011, KWILLIAMS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; When you have the circular link on your system, what does
&gt; File::Spec-&gt;path&#40;&#41; return?  Is it super-long, or of reasonable length?
&gt; 
</div>
$ perl -e &#39;use File::Spec; print join&#40;&#34; &#34;,File::Spec-&gt;path&#40;&#41;&#41;,&#34;\n&#34;;&#39;
. /bin /usr/bin /sbin /usr/sbin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;06&nbsp;14:53:43&nbsp;2011</span>
    <span class="description">jason.vas.dias [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jason.vas.dias [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 06 14:51:41 2011, jvdias wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Jun 06 13:05:07 2011, KWILLIAMS wrote:
<div class="message-stanza open">&gt; &gt; When you have the circular link on your system, what does
&gt; &gt; File::Spec-&gt;path&#40;&#41; return?  Is it super-long, or of reasonable length?
&gt; &gt; 
</div>&gt; 
&gt; $ perl -e &#39;use File::Spec; print join&#40;&#34; &#34;,File::Spec-&gt;path&#40;&#41;&#41;,&#34;\n&#34;;&#39;
&gt; . /bin /usr/bin /sbin /usr/sbin
</div>
$ ln -s /usr/bin /usr/bin
$ perl -e &#39;use File::Spec; print join&#40;&#34; &#34;,File::Spec-&gt;path&#40;&#41;&#41;,&#34;\n&#34;;&#39;
. /bin /usr/bin /sbin /usr/sbin


 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;06&nbsp;15:08:08&nbsp;2011</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #68651] unacceptable performance : 40mins+ per ./Build invocation</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 6 Jun 2011 15:07:40 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-Build [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Golden &lt;dagolden [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, Jun 6, 2011 at 2:41 PM, Jason Vas Dias via RT
&lt;bug-Module-Build@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Looks like Pod::Html - I guess I should take this up with them ?
</div>
Please do.

You should also be able to configure Perl without HTML directories and
then Module::Build shouldn&#39;t attempt to build them.

-- David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;08&nbsp;11:20:10&nbsp;2011</span>
    <span class="description">dagolden [...] cpan.org -  Severity Important added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;08&nbsp;12:02:46&nbsp;2011</span>
    <span class="description">dagolden [...] cpan.org -  Severity Important changed to Normal</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
