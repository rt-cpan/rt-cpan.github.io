<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #89921 for Devel-Gladiator: a better description of how to interpret report results</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #89921 for Devel-Gladiator: a better description of how to interpret report results</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Devel-Gladiator/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Devel-Gladiator/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Devel-Gladiator/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Devel-Gladiator/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Devel-Gladiator">Devel-Gladiator CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">89921</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">new</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Devel-Gladiator/Active/">Devel-Gladiator</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
arfreitas [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-224000-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.04    </td>
  </tr>
  <tr id="CF-224001-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;31&nbsp;08:04:33&nbsp;2013</span>
    <span class="description">arfreitas [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> a better description of how to interpret report results</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

Devel::Gladiator is great, but the results are a bit difficult to understand without an understanding of Perl internals. For example, the output below &#40;with results rearranged to references counts per object and counting for each iteration of an application, separated by pipe&#41;:

ARRAY|1321|1465|1573
CODE|536|551|566
FSA::State|20|30|40
GLOB|953|954|954
HASH|274|313|352
REF|566|798|994
REF-ARRAY|158|272|350
REF-CODE|97|142|187
REF-FSA::State|56|84|112
REF-HASH|90|129|168
REF-Regexp|12|18|24
Regexp|12|18|24
SCALAR|10156|10303|10447

While it is easy to spot the package named objects &#40;as &#34;FSA::State&#34;&#41; and try to remove the circular references, how should I deal with the objects SCALAR, Regexp, GLOB, CODE and ARRAY? Are they all related to the main package? So, the correct way to make those tests is to run everything inside a sub, giving the perl interpreter a chance to reclaim they from memory?

It would be great with the Pod include more information on this or a reference to anything that helps go through the details.

I attached the test example that generates the output as an example.

Thank you,
Alceu
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> ComplexInstance.pm</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">package Test::ComplexInstance;
use warnings;
use strict;
use FSA::Rules;

sub get {

    my $ls_params_regex =
      qr/list\sparams&#40;\sfor\sserver\s\w+\sfor\scomponent\s\w+&#41;?/;
    my $ls_tasks_regex =
      qr/list\stasks&#40;\sfor\sserver\s\w+\scomponent\sgroup?\s\w+&#41;?/;
    my $ls_servers_regex   = qr/list\sserver&#40;s&#41;?.*/;
    my $ls_comp_defs_regex = qr/list\scomp\sdefs?&#40;\s\w+&#41;?/;
    my $conn_greet =
qr/^Siebel\sEnterprise\sApplications\sSiebel\sServer\sManager\,\sVersion.*/;
    my $srvrmgr_prompt = qr/^srvrmgr&#40;\:[\w\_\-]+&#41;?&gt;\s&#40;.*&#41;?$/;

    my %params = &#40;
        done =&gt; sub {

            my $self = shift;

            my $curr_line = shift&#40; @{ $self-&gt;notes&#40;&#39;all_data&#39;&#41; } &#41;;
            $self-&gt;notes&#40; &#39;line_num&#39; =&gt; &#40; $self-&gt;notes&#40;&#39;line_num&#39;&#41; + 1 &#41; &#41;;

            if &#40; defined&#40;$curr_line&#41; &#41; {

                if &#40; defined&#40; $self-&gt;notes&#40;&#39;last_command&#39;&#41; &#41;
                    and &#40; $self-&gt;notes&#40;&#39;last_command&#39;&#41; eq &#39;exit&#39; &#41; &#41;
                {

                    return 1;

                }
                else {

                    $self-&gt;notes&#40; line =&gt; $curr_line &#41;;
                    return 0;

                }

            }
            else {

                return 1;

            }

        }
    &#41;;

    my $fsa = FSA::Rules-&gt;new&#40;
        \%params,
        no_data =&gt; {
            rules =&gt; [
                greetings =&gt; sub {

                    my $state = shift;

                    if &#40; defined&#40; $state-&gt;notes&#40;&#39;line&#39;&#41; &#41; &#41; {

                        return &#40; $state-&gt;notes&#40;&#39;line&#39;&#41; =~ $conn_greet &#41;;

                    }
                    else {

                        return 0;

                    }

                },
                command_submission =&gt; sub {

                    my $state = shift;

                    if &#40; defined&#40; $state-&gt;notes&#40;&#39;line&#39;&#41; &#41; &#41; {

                        return &#40; $state-&gt;notes&#40;&#39;line&#39;&#41; =~ $srvrmgr_prompt &#41;;

                    }
                    else {

                        return 0;

                    }

                },
                no_data =&gt; sub { return 1 }
            ],
            message =&gt; &#39;Line read&#39;

        },
        greetings =&gt; {
            label    =&gt; &#39;greetings message from srvrmgr&#39;,
            on_enter =&gt; sub {

                my $state = shift;
                $state-&gt;notes&#40; is_cmd_changed     =&gt; 0 &#41;;
                $state-&gt;notes&#40; is_data_wanted     =&gt; 1 &#41;;
                $state-&gt;notes&#40; &#39;create_greetings&#39; =&gt; 1 &#41;
                  unless &#40; $state-&gt;notes&#40;&#39;greetings_created&#39;&#41; &#41;;
            },
            on_exit =&gt; sub {

                my $state = shift;
                $state-&gt;notes&#40; is_data_wanted =&gt; 0 &#41;;

            },
            rules =&gt; [
                command_submission =&gt; sub {

                    my $state = shift;
                    return &#40; $state-&gt;notes&#40;&#39;line&#39;&#41; =~ $srvrmgr_prompt &#41;;

                },
                greetings =&gt; sub { return 1 }
            ],
            message =&gt; &#39;prompt found&#39;
        },
        end =&gt; {
            rules =&gt; [
                no_data =&gt; sub {
                    return 1;
                  }
            ],
            message =&gt; &#39;EOF&#39;
        },
        list_comp =&gt; {
            label    =&gt; &#39;parses output from a list comp command&#39;,
            on_enter =&gt; sub {
                my $state = shift;
                $state-&gt;notes&#40; is_cmd_changed =&gt; 0 &#41;;
                $state-&gt;notes&#40; is_data_wanted =&gt; 1 &#41;;
            },
            on_exit =&gt; sub {

                my $state = shift;
                $state-&gt;notes&#40; is_data_wanted =&gt; 0 &#41;;

            },
            rules =&gt; [
                command_submission =&gt; sub {

                    my $state = shift;
                    return &#40; $state-&gt;notes&#40;&#39;line&#39;&#41; =~ $srvrmgr_prompt &#41;;

                },
                list_comp =&gt; sub { return 1; }
            ],
            message =&gt; &#39;prompt found&#39;
        },
        list_comp_types =&gt; {
            label    =&gt; &#39;parses output from a list comp types command&#39;,
            on_enter =&gt; sub {
                my $state = shift;
                $state-&gt;notes&#40; is_cmd_changed =&gt; 0 &#41;;
                $state-&gt;notes&#40; is_data_wanted =&gt; 1 &#41;;
            },
            on_exit =&gt; sub {

                my $state = shift;
                $state-&gt;notes&#40; is_data_wanted =&gt; 0 &#41;;

            },
            rules =&gt; [
                command_submission =&gt; sub {

                    my $state = shift;
                    return &#40; $state-&gt;notes&#40;&#39;line&#39;&#41; =~ $srvrmgr_prompt &#41;;

                },
                list_comp_types =&gt; sub { return 1; }
            ],
            message =&gt; &#39;prompt found&#39;
        },
        list_params =&gt; {
            label    =&gt; &#39;parses output from a list params command&#39;,
            on_enter =&gt; sub {
                my $state = shift;
                $state-&gt;notes&#40; is_cmd_changed =&gt; 0 &#41;;
                $state-&gt;notes&#40; is_data_wanted =&gt; 1 &#41;;
            },
            on_exit =&gt; sub {

                my $state = shift;
                $state-&gt;notes&#40; is_data_wanted =&gt; 0 &#41;;

            },
            rules =&gt; [
                command_submission =&gt; sub {

                    my $state = shift;
                    return &#40; $state-&gt;notes&#40;&#39;line&#39;&#41; =~ $srvrmgr_prompt &#41;;

                },
                list_params =&gt; sub { return 1; }
            ],
            message =&gt; &#39;prompt found&#39;
        },
        list_comp_def =&gt; {
            label    =&gt; &#39;parses output from a list comp def command&#39;,
            on_enter =&gt; sub {
                my $state = shift;
                $state-&gt;notes&#40; is_cmd_changed =&gt; 0 &#41;;
                $state-&gt;notes&#40; is_data_wanted =&gt; 1 &#41;;
            },
            on_exit =&gt; sub {

                my $state = shift;
                $state-&gt;notes&#40; is_data_wanted =&gt; 0 &#41;;

            },
            rules =&gt; [
                command_submission =&gt; sub {

                    my $state = shift;
                    return &#40; $state-&gt;notes&#40;&#39;line&#39;&#41; =~ $srvrmgr_prompt &#41;;

                },
                list_comp_def =&gt; sub { return 1; }
            ],
            message =&gt; &#39;prompt found&#39;
        },
        list_tasks =&gt; {
            label    =&gt; &#39;parses output from a list tasks command&#39;,
            on_enter =&gt; sub {
                my $state = shift;
                $state-&gt;notes&#40; is_cmd_changed =&gt; 0 &#41;;
                $state-&gt;notes&#40; is_data_wanted =&gt; 1 &#41;;
            },
            on_exit =&gt; sub {

                my $state = shift;
                $state-&gt;notes&#40; is_data_wanted =&gt; 0 &#41;;

            },
            rules =&gt; [
                command_submission =&gt; sub {

                    my $state = shift;
                    return &#40; $state-&gt;notes&#40;&#39;line&#39;&#41; =~ $srvrmgr_prompt &#41;;

                },
                list_tasks =&gt; sub { return 1; }
            ],
            message =&gt; &#39;prompt found&#39;
        },
        list_servers =&gt; {
            label    =&gt; &#39;parses output from a list servers command&#39;,
            on_enter =&gt; sub {
                my $state = shift;
                $state-&gt;notes&#40; is_cmd_changed =&gt; 0 &#41;;
                $state-&gt;notes&#40; is_data_wanted =&gt; 1 &#41;;
            },
            on_exit =&gt; sub {

                my $state = shift;
                $state-&gt;notes&#40; is_data_wanted =&gt; 0 &#41;;

            },
            rules =&gt; [
                command_submission =&gt; sub {

                    my $state = shift;
                    return &#40; $state-&gt;notes&#40;&#39;line&#39;&#41; =~ $srvrmgr_prompt &#41;;

                },
                list_servers =&gt; sub { return 1; }
            ],
            message =&gt; &#39;prompt found&#39;
        },
        load_preferences =&gt; {
            label    =&gt; &#39;parses output from a load preferences command&#39;,
            on_enter =&gt; sub {
                my $state = shift;
                $state-&gt;notes&#40; is_cmd_changed =&gt; 0 &#41;;
                $state-&gt;notes&#40; is_data_wanted =&gt; 1 &#41;;
            },
            on_exit =&gt; sub {

                my $state = shift;
                $state-&gt;notes&#40; is_data_wanted =&gt; 0 &#41;;

            },
            rules =&gt; [
                command_submission =&gt; sub {

                    my $state = shift;
                    return &#40; $state-&gt;notes&#40;&#39;line&#39;&#41; =~ $srvrmgr_prompt &#41;;

                },
                load_preferences =&gt; sub { return 1; }
            ],
            message =&gt; &#39;prompt found&#39;
        },
        command_submission =&gt; {
            do =&gt; sub {

                my $state = shift;

                my $cmd = &#40; $state-&gt;notes&#40;&#39;line&#39;&#41; =~ $srvrmgr_prompt &#41;[1];

                if &#40; &#40; defined&#40;$cmd&#41; &#41; and &#40; $cmd ne &#39;&#39; &#41; &#41; {

                    # removing spaces from command
                    $cmd =~ s/^\s+//;
                    $cmd =~ s/\s+$//;

                    $state-&gt;notes&#40; last_command   =&gt; $cmd &#41;;
                    $state-&gt;notes&#40; is_cmd_changed =&gt; 1 &#41;;

                }
                else {

                    $state-&gt;notes&#40; last_command   =&gt; &#39;&#39; &#41;;
                    $state-&gt;notes&#40; is_cmd_changed =&gt; 1 &#41;;

                }

            },
            rules =&gt; [
                list_comp =&gt; sub {

                    my $state = shift;

                    if &#40; $state-&gt;notes&#40;&#39;last_command&#39;&#41; eq &#39;list comp&#39; &#41; {

                        return 1;

                    }
                    else {

                        return 0;

                    }

                },
                list_comp_types =&gt; sub {

                    my $state = shift;

                    if &#40; &#40; $state-&gt;notes&#40;&#39;last_command&#39;&#41; eq &#39;list comp types&#39; &#41;
                        or
                        &#40; $state-&gt;notes&#40;&#39;last_command&#39;&#41; eq &#39;list comp type&#39; &#41; &#41;
                    {

                        return 1;

                    }
                    else {

                        return 0;

                    }

                },
                list_params =&gt; sub {

                    my $state = shift;

                    if &#40; $state-&gt;notes&#40;&#39;last_command&#39;&#41; =~ $ls_params_regex &#41; {

                        return 1;

                    }
                    else {

                        return 0;

                    }

                },
                list_tasks =&gt; sub {

                    my $state = shift;

                    if &#40; $state-&gt;notes&#40;&#39;last_command&#39;&#41; =~ $ls_tasks_regex &#41; {

                        return 1;

                    }
                    else {

                        return 0;

                    }

                },
                list_servers =&gt; sub {

                    my $state = shift;

                    if &#40; $state-&gt;notes&#40;&#39;last_command&#39;&#41; =~ $ls_servers_regex &#41; {

                        return 1;

                    }
                    else {

                        return 0;

                    }

                },
                list_comp_def =&gt; sub {

                    my $state = shift;

                    if &#40; $state-&gt;notes&#40;&#39;last_command&#39;&#41; =~ $ls_comp_defs_regex &#41;
                    {

                        return 1;

                    }
                    else {

                        return 0;

                    }

                },
                load_preferences =&gt; sub {

                    my $state = shift;

                    if &#40; $state-&gt;notes&#40;&#39;last_command&#39;&#41; eq &#39;load preferences&#39; &#41; {

                        return 1;

                    }
                    else {

                        return 0;

                    }

                },
                no_data =&gt; sub {

                    my $state = shift;

                    if &#40; $state-&gt;notes&#40;&#39;last_command&#39;&#41; eq &#39;&#39; &#41; {

                        return 1;

                    }
                    else {

                        return 0;

                    }

                },

                # add other possibilities here of list commands
                command_submission =&gt;
                  sub { return 1; }    # this must be the last item

            ],
            message =&gt; &#39;command submitted&#39;
        }
    &#41;;

    return $fsa;

}

1;
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Gladiator.pm</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">package Test::Gladiator;

use Scalar::Util qw&#40;weaken&#41;;
use Cwd;
use File::Spec;

sub new {

    my $class = shift;

    my $file = File::Spec-&gt;catfile&#40; getcwd&#40;&#41;, &#39;gladiator_output.txt&#39; &#41;;

    open&#40; my $out, &#39;&gt;&#39;, $file &#41; or die &#34;Cannot create $file: $!&#34;;

    my $self = { counting =&gt; {}, out_h =&gt; $out };

    return bless $self, $class;

}

sub DESTROY {

    my $self = shift;

    close&#40; $self-&gt;{out_h} &#41; or die $!;

}

sub show_accounting {

    my $self = shift;
    my $out  = $self-&gt;{out_h};

    foreach my $key &#40; sort&#40; keys&#40; %{ $self-&gt;{counting} } &#41; &#41; &#41; {

        print $out $key, &#39;|&#39;, join&#40; &#39;|&#39;, @{ $self-&gt;{counting}-&gt;{$key} } &#41;,
          &#34;\n&#34;
          if &#40;
            $self-&gt;{counting}-&gt;{$key}-&gt;[1] &gt; $self-&gt;{counting}-&gt;{$key}-&gt;[0] &#41;;

    }

}

sub count_leaks {

    my $self = shift;

    my $total = 0;

    foreach my $key &#40; keys&#40; %{ $self-&gt;{counting} } &#41; &#41; {

        my $last = $#{ $self-&gt;{counting}-&gt;{$key} };

        $total++
          if &#40; $self-&gt;{counting}-&gt;{$key}-&gt;[$last] &gt;
            $self-&gt;{counting}-&gt;{$key}-&gt;[ $last - 1 ] &#41;;

    }

    return $total;

}

sub increment_count {

    my $self    = shift;
    my $current = shift;

    weaken&#40;$current&#41;;

    foreach my $key &#40; keys&#40; %{$current} &#41; &#41; {

        if &#40; exists&#40; $self-&gt;{counting}-&gt;{$key} &#41; &#41; {

            push&#40; @{ $self-&gt;{counting}-&gt;{$key} }, $current-&gt;{$key} &#41;;

        }
        else {

            $self-&gt;{counting}-&gt;{$key} = [ $current-&gt;{$key} ];

        }

    }

}

1;
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> leak.t</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
