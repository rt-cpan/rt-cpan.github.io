<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #107925 for MCE: Reg. use of REGEXP items in MCE</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #107925 for MCE: Reg. use of REGEXP items in MCE</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=MCE">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=MCE">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=MCE">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=MCE">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/marioroy/mce-perl/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/MCE">MCE CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">107925</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=MCE">MCE</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
rissenaj [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-246582-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-246583-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=107925">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1547140" href="/Public/Bug/Display.html?id=107925#txn-1547140">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;12:26:21&nbsp;2015</span>
    <span class="description">rissenaj [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Reg. use of REGEXP items in MCE</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 22 Oct 2015 16:26:02 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-MCE [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Rissen Joseph &lt;rissenaj [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1547140/826091/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/826091">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 423b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Mario,

    I need to do a regex matching of a list of regular expressions passed
inside an MCE flow task. I am encountering the following error

Can&#39;t store REGEXP items at C:/Perl64/lib/Storable.pm line 340,
&lt;__ANONIO__&gt; line 2, at C:/Perl64/site/lib/MCE/Queue.pm line 863.

   Looks like an issue when trying to serialize a REGEXP using Storable.
Could you please let me know if there is a workaround.

Thanks
Rissen
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1547140/826092/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/826092">with headers</a>
<br />
<span class="downloadcontenttype">text/html 568b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1547143" href="/Public/Bug/Display.html?id=107925#txn-1547143">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;12:32:10&nbsp;2015</span>
    <span class="description">marioeroy [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #107925] Reg. use of REGEXP items in MCE</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 22 Oct 2015 12:31:54 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-MCE [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mario Roy &lt;marioeroy [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1547143/826096/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/826096">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 182b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Rissen,

Can you provide a small script so that I can reproduce the issue. MCE 1.7
will be released soon and want to include the fix if feasible.

Thanks.

Kind regards,
Mario
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1547143/826097/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/826097">with headers</a>
<br />
<span class="downloadcontenttype">text/html 355b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1547144" href="/Public/Bug/Display.html?id=107925#txn-1547144">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;12:32:11&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1547161" href="/Public/Bug/Display.html?id=107925#txn-1547161">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;13:13:47&nbsp;2015</span>
    <span class="description">rissenaj [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #107925] Reg. use of REGEXP items in MCE</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 22 Oct 2015 17:13:22 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-MCE [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Rissen Joseph &lt;rissenaj [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1547161/826114/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/826114">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Mario,

    Please find below a sample code for find with the issue.


# START

use warnings;
use Time::HiRes &#39;sleep&#39;;
use MCE;
use MCE::Flow;
use MCE::Queue;
use Data::Dumper;
use File::Basename;


sub gatherDataClosure
{
  my $gatherRef = $_[0];

  return sub {
    my &#40;$key, $value&#41; = @_;

    push &#40;@{ $gatherRef-&gt;{FoundFiles}-&gt;{$key} }, $value&#41;;
    return;
  }
}

sub find
{
  my &#40;$args&#41; = @_;
  my @dirsToSearch = @_;

  # Queues
  my $dirQueue;
  my $srchQueue;
  my $sharedResrcMutex;
  my @regexesToMatch;
  my %results;

  @regexesToMatch = defined&#40;$args-&gt;{regexData}&#41; ?
                    &#40;&#40;ref&#40;$args-&gt;{regexData}&#41; eq &#34;ARRAY&#34;&#41; ? @{
$args-&gt;{regexData} } : &#40; $args-&gt;{regexData} &#41;&#41; :
                    &#40;&#41;;

  if&#40;!scalar&#40;@dirsToSearch&#41;&#41;
  {
    print &#34;\nfind: Atleast one directory need to be specified for search\n&#34;;
    exit 1;
  }

  if &#40;!scalar&#40;@regexesToMatch&#41;&#41;
  {
    print &#34;\nfind: Regex data is mandatory\n&#34;;
    exit 1;
  }


  use constant {
    MAX_PRODUCERS =&gt; 7,
    MAX_CONSUMERS =&gt; 8,
  };

  $dirQueue   = MCE::Queue-&gt;new&#40;queue =&gt; \@dirsToSearch&#41;;
  $srchQueue  = MCE::Queue-&gt;new&#40;fast =&gt; 1&#41;;


  MCE::Flow::init {
    task_end =&gt; sub {
      my &#40;$mce, $task_id, $task_name&#41; = @_;

      $srchQueue-&gt;enqueue&#40;&#40;undef&#41; x MAX_CONSUMERS&#41;
      if $task_name eq &#39;prod&#39;;
    },
    gather =&gt; gatherDataClosure&#40;\%results&#41;
  };

  ## Override any MCE options and run. Notice how max_workers and
  ## task_name take an anonymous array to configure both tasks.

  mce_flow {
    max_workers =&gt; [ MAX_PRODUCERS, MAX_CONSUMERS ],
    task_name   =&gt; [ &#39;prod&#39;, &#39;cons&#39; ],
  },
  sub {
    ## Prod Task. Allow time for wid 1 to enqueue any dir entries.
    ## Otherwise, workers &#40;wid 2+&#41; may terminate early.
    sleep 0.1 if MCE-&gt;task_wid &gt; 1;

    while &#40;defined &#40;my $dir = $dirQueue-&gt;dequeue_nb&#41;&#41;
    {
      my &#40;@files, @dirs&#41;;
      foreach &#40;glob&#40;&#34;$dir/*&#34;&#41;&#41;
      {
        if &#40;-d $_&#41;
        {
          push @dirs, $_;
          next;
        }
        push @files, $_;
      }

      if &#40;scalar @dirs&#41;
      {
        $dirQueue-&gt;enqueue&#40;@dirs&#41;;
        $srchQueue-&gt;enqueue&#40;@dirs&#41;;
      }
      $srchQueue-&gt;enqueue&#40;@files&#41; if scalar @files;
    }
  },
  sub {
    ## Cons Task.
    while &#40;defined &#40;my $node = $srchQueue-&gt;dequeue&#41;&#41; {

      foreach &#40;@regexesToMatch&#41;
      {
        MCE-&gt;gather&#40;$_, $node&#41; if &#40;$node =~ qr/$_/i&#41;;
      }

    }
  };

  ## Workers persist in models. This may be ommitted. It will run
  ## automatically during exiting if not already called.

  MCE::Flow::finish;
  return %results;
}



my $regex = qr/[a-zA-Z0-9]+\.txt$/;
my %srchResults = find&#40;{regexData =&gt; $regex}, &#34;C:/temp&#34;&#41;;
print Dumper&#40;\%srchResults&#41;;

#END

Thanks
Rissen

On Thu, Oct 22, 2015 at 9:32 AM Mario Roy via RT &lt;bug-MCE@rt.cpan.org&gt;
wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=107925">https://rt.cpan.org/Ticket/Display.html?id=107925</a></span> &gt;
&gt;
&gt; Hello Rissen,
&gt;
&gt; Can you provide a small script so that I can reproduce the issue. MCE 1.7
&gt; will be released soon and want to include the fix if feasible.
&gt;
&gt; Thanks.
&gt;
&gt; Kind regards,
&gt; Mario
&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1547161/826115/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/826115">with headers</a>
<br />
<span class="downloadcontenttype">text/html 5.1k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1547188" href="/Public/Bug/Display.html?id=107925#txn-1547188">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;14:15:33&nbsp;2015</span>
    <span class="description">marioeroy [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #107925] Reg. use of REGEXP items in MCE</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 22 Oct 2015 14:15:10 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-MCE [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mario Roy &lt;marioeroy [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1547188/826143/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/826143">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 935b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Rissen,

Should that be a shift, not @_ for $args?

sub find
{
  my &#40;$args&#41; = shift;
  my @dirsToSearch = @_;

  print &#34;## args : $args\n&#34;;
  print &#34;## dirsToSearch : @dirsToSearch\n&#34;;

  ...
}

The issue is still there as far as Storable not serializing REGEXP. But,
the script runs and complains during gathering only. Perhaps, have a lookup
hash with your regex patterns and gather the key or string value, not $_
&#40;Regexp&#41;.

      foreach &#40;@regexesToMatch&#41;
      {
        MCE-&gt;gather&#40;$_, $node&#41; if &#40;$node =~ qr/$_/i&#41;;
      }


I tried freezing a Regexp reference and Storable complains. Unfortunately,
am not able to work around this.

use strict;
use warnings;

use Storable qw&#40; freeze &#41;;

my $regex = qr/[a-zA-Z0-9]+\.txt$/;

print ref&#40;$regex&#41;, &#34;\n&#34;;

my $regex_frozen = freeze&#40;$regex&#41;;


-- Output

Regexp
Can&#39;t store REGEXP items at /usr/lib64/perl5/vendor_perl/Storable.pm line
340, at test.pl line 11.

Regards,
Mario
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1547188/826144/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/826144">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.6k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1547191" href="/Public/Bug/Display.html?id=107925#txn-1547191">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;14:48:36&nbsp;2015</span>
    <span class="description">rissenaj [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #107925] Reg. use of REGEXP items in MCE</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 22 Oct 2015 18:48:18 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-MCE [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Rissen Joseph &lt;rissenaj [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1547191/826148/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/826148">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Mario,

   Oops, yeah, that needs to be shift!. Thanks for your quick reply. I will
try using a lookup hash instead for gather.

Thanks
Rissen

On Thu, Oct 22, 2015 at 11:16 AM Mario Roy via RT &lt;bug-MCE@rt.cpan.org&gt;
wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=107925">https://rt.cpan.org/Ticket/Display.html?id=107925</a></span> &gt;
&gt;
&gt; Hello Rissen,
&gt;
&gt; Should that be a shift, not @_ for $args?
&gt;
&gt; sub find
&gt; {
&gt;   my &#40;$args&#41; = shift;
&gt;   my @dirsToSearch = @_;
&gt;
&gt;   print &#34;## args : $args\n&#34;;
&gt;   print &#34;## dirsToSearch : @dirsToSearch\n&#34;;
&gt;
&gt;   ...
&gt; }
&gt;
&gt; The issue is still there as far as Storable not serializing REGEXP. But,
&gt; the script runs and complains during gathering only. Perhaps, have a lookup
&gt; hash with your regex patterns and gather the key or string value, not $_
&gt; &#40;Regexp&#41;.
&gt;
&gt;       foreach &#40;@regexesToMatch&#41;
&gt;       {
&gt;         MCE-&gt;gather&#40;$_, $node&#41; if &#40;$node =~ qr/$_/i&#41;;
&gt;       }
&gt;
&gt;
&gt; I tried freezing a Regexp reference and Storable complains. Unfortunately,
&gt; am not able to work around this.
&gt;
&gt; use strict;
&gt; use warnings;
&gt;
&gt; use Storable qw&#40; freeze &#41;;
&gt;
&gt; my $regex = qr/[a-zA-Z0-9]+\.txt$/;
&gt;
&gt; print ref&#40;$regex&#41;, &#34;\n&#34;;
&gt;
&gt; my $regex_frozen = freeze&#40;$regex&#41;;
&gt;
&gt;
&gt; -- Output
&gt;
&gt; Regexp
&gt; Can&#39;t store REGEXP items at /usr/lib64/perl5/vendor_perl/Storable.pm line
&gt; 340, at test.pl line 11.
&gt;
&gt; Regards,
&gt; Mario
&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1547191/826149/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/826149">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.9k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1547193" href="/Public/Bug/Display.html?id=107925#txn-1547193">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;15:02:32&nbsp;2015</span>
    <span class="description">rissenaj [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #107925] Reg. use of REGEXP items in MCE</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 22 Oct 2015 19:02:10 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-MCE [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Rissen Joseph &lt;rissenaj [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1547193/826152/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/826152">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m new to MCE, with all the different models made available as part of the
distribution, it was really easy to start coding right away. Great
examples!.

Thanks
Rissen

On Thu, Oct 22, 2015 at 11:48 AM Rissen Joseph &lt;rissenaj@gmail.com&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Mario,
&gt;
&gt;    Oops, yeah, that needs to be shift!. Thanks for your quick reply. I
&gt; will try using a lookup hash instead for gather.
&gt;
&gt; Thanks
&gt; Rissen
&gt;
&gt; On Thu, Oct 22, 2015 at 11:16 AM Mario Roy via RT &lt;bug-MCE@rt.cpan.org&gt;
&gt; wrote:
&gt;
<div class="message-stanza open">&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=107925">https://rt.cpan.org/Ticket/Display.html?id=107925</a></span> &gt;
&gt;&gt;
&gt;&gt; Hello Rissen,
&gt;&gt;
&gt;&gt; Should that be a shift, not @_ for $args?
&gt;&gt;
&gt;&gt; sub find
&gt;&gt; {
&gt;&gt;   my &#40;$args&#41; = shift;
&gt;&gt;   my @dirsToSearch = @_;
&gt;&gt;
&gt;&gt;   print &#34;## args : $args\n&#34;;
&gt;&gt;   print &#34;## dirsToSearch : @dirsToSearch\n&#34;;
&gt;&gt;
&gt;&gt;   ...
&gt;&gt; }
&gt;&gt;
&gt;&gt; The issue is still there as far as Storable not serializing REGEXP. But,
&gt;&gt; the script runs and complains during gathering only. Perhaps, have a
&gt;&gt; lookup
&gt;&gt; hash with your regex patterns and gather the key or string value, not $_
&gt;&gt; &#40;Regexp&#41;.
&gt;&gt;
&gt;&gt;       foreach &#40;@regexesToMatch&#41;
&gt;&gt;       {
&gt;&gt;         MCE-&gt;gather&#40;$_, $node&#41; if &#40;$node =~ qr/$_/i&#41;;
&gt;&gt;       }
&gt;&gt;
&gt;&gt;
&gt;&gt; I tried freezing a Regexp reference and Storable complains. Unfortunately,
&gt;&gt; am not able to work around this.
&gt;&gt;
&gt;&gt; use strict;
&gt;&gt; use warnings;
&gt;&gt;
&gt;&gt; use Storable qw&#40; freeze &#41;;
&gt;&gt;
&gt;&gt; my $regex = qr/[a-zA-Z0-9]+\.txt$/;
&gt;&gt;
&gt;&gt; print ref&#40;$regex&#41;, &#34;\n&#34;;
&gt;&gt;
&gt;&gt; my $regex_frozen = freeze&#40;$regex&#41;;
&gt;&gt;
&gt;&gt;
&gt;&gt; -- Output
&gt;&gt;
&gt;&gt; Regexp
&gt;&gt; Can&#39;t store REGEXP items at /usr/lib64/perl5/vendor_perl/Storable.pm line
&gt;&gt; 340, at test.pl line 11.
&gt;&gt;
&gt;&gt; Regards,
&gt;&gt; Mario
&gt;&gt;
&gt;&gt;
</div></div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1547193/826153/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/826153">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.4k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1556682" href="/Public/Bug/Display.html?id=107925#txn-1556682">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;12&nbsp;13:51:42&nbsp;2015</span>
    <span class="description">MARIOROY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1556682/830865/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/830865">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 98b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Marking this as resolved as the limitation is with the Storable module, not MCE.

Thank you,
Mario
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1556684" href="/Public/Bug/Display.html?id=107925#txn-1556684">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;12&nbsp;13:51:48&nbsp;2015</span>
    <span class="description">MARIOROY [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.583763</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
