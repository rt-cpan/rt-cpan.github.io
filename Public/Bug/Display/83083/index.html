<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #83083 for DBD-ODBC: Miscellaneous compile warnings</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #83083 for DBD-ODBC: Miscellaneous compile warnings</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-ODBC/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-ODBC/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-ODBC/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-ODBC/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-ODBC">DBD-ODBC CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">83083</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-ODBC/Active/">DBD-ODBC</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ribasushi [...] leporine.io

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Unimportant    </td>
  </tr>
  <tr id="CF-10188-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10189-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;01&nbsp;01:20:12&nbsp;2013</span>
    <span class="description">ribasushi [...] leporine.io -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Miscellaneous compile warnings</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Martin,

Tested latest DBD::ODBC, seems to work great. However a number of
warnings scrolled by at compilation time. The &#39;duplicate function
definition&#39; one is particularly ominous.

Cheers

cc -c -I/usr/include  -I.
-I/home/rabbit/perl5/perlbrew/perls/5.17.8/lib/site_perl/5.17.8/x86_64-linux-thread-multi-64int-ld/auto/DBI
-D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -fstack-protector
-I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2  
-DVERSION=\&#34;1.42_5\&#34; -DXS_VERSION=\&#34;1.42_5\&#34; -fPIC
&#34;-I/home/rabbit/perl5/perlbrew/perls/5.17.8/lib/5.17.8/x86_64-linux-thread-multi-64int-ld/CORE&#34;
 -I/usr/include ConvertUTF.c
/home/rabbit/perl5/perlbrew/perls/5.17.8/bin/perl5.17.8 -p -e
&#34;s/~DRIVER~/ODBC/g&#34;
/home/rabbit/perl5/perlbrew/perls/5.17.8/lib/site_perl/5.17.8/x86_64-linux-thread-multi-64int-ld/auto/DBI/Driver.xst
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ODBC.xsi
</div>/home/rabbit/perl5/perlbrew/perls/5.17.8/bin/perl5.17.8
/home/rabbit/perl5/perlbrew/perls/5.17.8/lib/5.17.8/ExtUtils/xsubpp 
-typemap
/home/rabbit/perl5/perlbrew/perls/5.17.8/lib/5.17.8/ExtUtils/typemap 
ODBC.xs &gt; ODBC.xsc &#38;&#38; mv ODBC.xsc ODBC.c
Warning: duplicate function definition &#39;data_sources&#39; detected in
ODBC.xs, line 482
cc -c -I/usr/include  -I.
-I/home/rabbit/perl5/perlbrew/perls/5.17.8/lib/site_perl/5.17.8/x86_64-linux-thread-multi-64int-ld/auto/DBI
-D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -fstack-protector
-I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2  
-DVERSION=\&#34;1.42_5\&#34; -DXS_VERSION=\&#34;1.42_5\&#34; -fPIC
&#34;-I/home/rabbit/perl5/perlbrew/perls/5.17.8/lib/5.17.8/x86_64-linux-thread-multi-64int-ld/CORE&#34;
 -I/usr/include ODBC.c
cc -c -I/usr/include  -I.
-I/home/rabbit/perl5/perlbrew/perls/5.17.8/lib/site_perl/5.17.8/x86_64-linux-thread-multi-64int-ld/auto/DBI
-D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -fstack-protector
-I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2  
-DVERSION=\&#34;1.42_5\&#34; -DXS_VERSION=\&#34;1.42_5\&#34; -fPIC
&#34;-I/home/rabbit/perl5/perlbrew/perls/5.17.8/lib/5.17.8/x86_64-linux-thread-multi-64int-ld/CORE&#34;
 -I/usr/include dbdimp.c
dbdimp.c: In function ‘odbc_set_query_timeout’:
dbdimp.c:197:24: warning: cast to pointer from integer of different size
[-Wint-to-pointer-cast]
dbdimp.c: In function ‘odbc_db_STORE_attrib’:
dbdimp.c:4660:18: warning: cast to pointer from integer of different
size [-Wint-to-pointer-cast]
dbdimp.c: In function ‘set_odbc_version’:
dbdimp.c:6400:28: warning: cast to pointer from integer of different
size [-Wint-to-pointer-cast]
dbdimp.c: In function ‘post_connect’:
dbdimp.c:6671:36: warning: cast to pointer from integer of different
size [-Wint-to-pointer-cast]
dbdimp.c: In function ‘odbc_st_execute_for_fetch’:
dbdimp.c:7164:25: warning: cast to pointer from integer of different
size [-Wint-to-pointer-cast]
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;03&nbsp;06:10:11&nbsp;2013</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Feb 01 01:20:12 2013, RIBASUSHI wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Martin,
&gt; 
&gt; Tested latest DBD::ODBC, seems to work great. However a number of
&gt; warnings scrolled by at compilation time. The &#39;duplicate function
&gt; definition&#39; one is particularly ominous.
&gt; 
&gt; Cheers
</div>
Thanks Peter.

The duplicate function warning has been there since before I took over
maintenance. I did look into years ago and and decided it was nothing to
worry about but I guess I should convince myself of that.

The other warnings are due to casting SQLINTEGER to SQLPOINTER &#40;where on
all platforms I know a SQLPOINTER is larger than an SQLINTEGER&#41; and it
occurs because SQLSetXXXAttr functions are multipurpose. They can be
used for setting integer values or pointer values so the argument is
defined as a SQLPOINTER and hence the cast.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;03&nbsp;06:10:13&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;26&nbsp;07:03:35&nbsp;2013</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Feb 03 06:10:11 2013, MJEVANS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri Feb 01 01:20:12 2013, RIBASUSHI wrote:
<div class="message-stanza open">&gt; &gt; Hi Martin,
&gt; &gt; 
&gt; &gt; Tested latest DBD::ODBC, seems to work great. However a number of
&gt; &gt; warnings scrolled by at compilation time. The &#39;duplicate function
&gt; &gt; definition&#39; one is particularly ominous.
&gt; &gt; 
&gt; &gt; Cheers
</div>&gt; 
&gt; Thanks Peter.
&gt; 
&gt; The duplicate function warning has been there since before I took over
&gt; maintenance. I did look into years ago and and decided it was nothing to
&gt; worry about but I guess I should convince myself of that.
</div>
Neh - if you say it is ok - it is ok ;&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The other warnings are due to casting SQLINTEGER to SQLPOINTER &#40;where on
&gt; all platforms I know a SQLPOINTER is larger than an SQLINTEGER&#41; and it
&gt; occurs because SQLSetXXXAttr functions are multipurpose. They can be
&gt; used for setting integer values or pointer values so the argument is
&gt; defined as a SQLPOINTER and hence the cast.
</div>
I see... but then why does the compiler issue a warning - doesn&#39;t it use
the sizes of the current system to decide what is a &#34;different size&#34;?
The reason I am trying to clarify this is because most of my perlbrews
look like this:

rabbit@Thesaurus:~$ perl &#39;-V:ivsize|ptrsize&#39;
ivsize=&#39;8&#39;;
ptrsize=&#39;4&#39;;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;26&nbsp;09:06:51&nbsp;2013</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Feb 26 07:03:35 2013, RIBASUSHI wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun Feb 03 06:10:11 2013, MJEVANS wrote:
<div class="message-stanza open">&gt; &gt; On Fri Feb 01 01:20:12 2013, RIBASUSHI wrote:
<div class="message-stanza open">&gt; &gt; &gt; Hi Martin,
&gt; &gt; &gt; 
&gt; &gt; &gt; Tested latest DBD::ODBC, seems to work great. However a number of
&gt; &gt; &gt; warnings scrolled by at compilation time. The &#39;duplicate function
&gt; &gt; &gt; definition&#39; one is particularly ominous.
&gt; &gt; &gt; 
&gt; &gt; &gt; Cheers
</div>&gt; &gt; 
&gt; &gt; Thanks Peter.
&gt; &gt; 
&gt; &gt; The duplicate function warning has been there since before I took over
&gt; &gt; maintenance. I did look into years ago and and decided it was nothing to
&gt; &gt; worry about but I guess I should convince myself of that.
</div>&gt; 
&gt; Neh - if you say it is ok - it is ok ;&#41;
&gt; 
<div class="message-stanza open">&gt; &gt; The other warnings are due to casting SQLINTEGER to SQLPOINTER &#40;where on
&gt; &gt; all platforms I know a SQLPOINTER is larger than an SQLINTEGER&#41; and it
&gt; &gt; occurs because SQLSetXXXAttr functions are multipurpose. They can be
&gt; &gt; used for setting integer values or pointer values so the argument is
&gt; &gt; defined as a SQLPOINTER and hence the cast.
</div>&gt; 
&gt; I see... but then why does the compiler issue a warning - doesn&#39;t it use
&gt; the sizes of the current system to decide what is a &#34;different size&#34;?
&gt; The reason I am trying to clarify this is because most of my perlbrews
&gt; look like this:
&gt; 
&gt; rabbit@Thesaurus:~$ perl &#39;-V:ivsize|ptrsize&#39;
&gt; ivsize=&#39;8&#39;;
&gt; ptrsize=&#39;4&#39;;
&gt; 
</div>
ivsize has nothing to do with it as the code does not pass an IV to an
ODBC APIs. The size of SQLINTEGER is the one that matters as it is this
which is cast to an SQLPOINTER. SQLINTEGER is always smaller or the same
size as an SQLPOINTER on all platforms I&#39;ve seen.

The problem is some ODBC APIs are general purpose and might need a
pointer argument or an integer argument. In these case MS define the
argument as an SQLPOINTER and if the SQLSet* call I&#39;m making to set a
connection or statement attribute is an integer value I have to cast to
SQLPOINTER or the compiler will warn &#40;e.g., setting auto commit is an
on/off value of 1 or 0 but the argument is an SQLPOINTER&#41;.

SQLINTEGER is 4 bytes on all platforms I&#39;ve even seen. MS introduced
SQLULEN/SQLLEN for 64 bit integers.

Does thi help convince you:

sources@fc64:~/martin$ cat rt83083.c 
#include &lt;stdio.h&gt;
#include &lt;sql.h&gt;
#include &lt;sqltypes.h&gt;

int main&#40;&#41; {
    SQLINTEGER i;
    SQLPOINTER p;

    printf&#40;&#34;sizeof&#40;SQLINTEGER&#41;=%lu\n&#34;, sizeof&#40;SQLINTEGER&#41;&#41;;
    printf&#40;&#34;sizeof&#40;SQLPOINTER&#41;=%lu\n&#34;, sizeof&#40;SQLPOINTER&#41;&#41;;
    i = 1;
    p = i;
    printf&#40;&#34;p = %p\n&#34;, p&#41;;
    p = &#40;SQLPOINTER&#41;i;
    printf&#40;&#34;p = %p\n&#34;, p&#41;;

    return 0;
}
sources@fc64:~/martin$ gcc -I /usr/local/easysoft/unixODBC/include/
-Wall rt83083.c 
rt83083.c: In function ‘main’:
rt83083.c:12: warning: assignment makes pointer from integer without a cast
rt83083.c:14: warning: cast to pointer from integer of different size
sources@fc64:~/martin$ ./a.out 
sizeof&#40;SQLINTEGER&#41;=4
sizeof&#40;SQLPOINTER&#41;=8
p = 0x1
p = 0x1

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;07&nbsp;12:59:24&nbsp;2013</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Feb 26 09:06:51 2013, MJEVANS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue Feb 26 07:03:35 2013, RIBASUSHI wrote:
<div class="message-stanza open">&gt; &gt; On Sun Feb 03 06:10:11 2013, MJEVANS wrote:
<div class="message-stanza open">&gt; &gt; &gt; On Fri Feb 01 01:20:12 2013, RIBASUSHI wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; Hi Martin,
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; Tested latest DBD::ODBC, seems to work great. However a number of
&gt; &gt; &gt; &gt; warnings scrolled by at compilation time. The &#39;duplicate function
&gt; &gt; &gt; &gt; definition&#39; one is particularly ominous.
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; Cheers
</div>&gt; &gt; &gt; 
&gt; &gt; &gt; Thanks Peter.
&gt; &gt; &gt; 
&gt; &gt; &gt; The duplicate function warning has been there since before I took over
&gt; &gt; &gt; maintenance. I did look into years ago and and decided it was nothing to
&gt; &gt; &gt; worry about but I guess I should convince myself of that.
</div>&gt; &gt; 
&gt; &gt; Neh - if you say it is ok - it is ok ;&#41;
&gt; &gt; 
<div class="message-stanza open">&gt; &gt; &gt; The other warnings are due to casting SQLINTEGER to SQLPOINTER &#40;where on
&gt; &gt; &gt; all platforms I know a SQLPOINTER is larger than an SQLINTEGER&#41; and it
&gt; &gt; &gt; occurs because SQLSetXXXAttr functions are multipurpose. They can be
&gt; &gt; &gt; used for setting integer values or pointer values so the argument is
&gt; &gt; &gt; defined as a SQLPOINTER and hence the cast.
</div>&gt; &gt; 
&gt; &gt; I see... but then why does the compiler issue a warning - doesn&#39;t it use
&gt; &gt; the sizes of the current system to decide what is a &#34;different size&#34;?
&gt; &gt; The reason I am trying to clarify this is because most of my perlbrews
&gt; &gt; look like this:
&gt; &gt; 
&gt; &gt; rabbit@Thesaurus:~$ perl &#39;-V:ivsize|ptrsize&#39;
&gt; &gt; ivsize=&#39;8&#39;;
&gt; &gt; ptrsize=&#39;4&#39;;
&gt; &gt; 
</div>&gt; 
&gt; ivsize has nothing to do with it as the code does not pass an IV to an
&gt; ODBC APIs. The size of SQLINTEGER is the one that matters as it is this
&gt; which is cast to an SQLPOINTER. SQLINTEGER is always smaller or the same
&gt; size as an SQLPOINTER on all platforms I&#39;ve seen.
&gt; 
&gt; The problem is some ODBC APIs are general purpose and might need a
&gt; pointer argument or an integer argument. In these case MS define the
&gt; argument as an SQLPOINTER and if the SQLSet* call I&#39;m making to set a
&gt; connection or statement attribute is an integer value I have to cast to
&gt; SQLPOINTER or the compiler will warn &#40;e.g., setting auto commit is an
&gt; on/off value of 1 or 0 but the argument is an SQLPOINTER&#41;.
&gt; 
&gt; SQLINTEGER is 4 bytes on all platforms I&#39;ve even seen. MS introduced
&gt; SQLULEN/SQLLEN for 64 bit integers.
&gt; 
&gt; Does thi help convince you:
&gt; 
&gt; sources@fc64:~/martin$ cat rt83083.c 
&gt; #include &lt;stdio.h&gt;
&gt; #include &lt;sql.h&gt;
&gt; #include &lt;sqltypes.h&gt;
&gt; 
&gt; int main&#40;&#41; {
&gt;     SQLINTEGER i;
&gt;     SQLPOINTER p;
&gt; 
&gt;     printf&#40;&#34;sizeof&#40;SQLINTEGER&#41;=%lu\n&#34;, sizeof&#40;SQLINTEGER&#41;&#41;;
&gt;     printf&#40;&#34;sizeof&#40;SQLPOINTER&#41;=%lu\n&#34;, sizeof&#40;SQLPOINTER&#41;&#41;;
&gt;     i = 1;
&gt;     p = i;
&gt;     printf&#40;&#34;p = %p\n&#34;, p&#41;;
&gt;     p = &#40;SQLPOINTER&#41;i;
&gt;     printf&#40;&#34;p = %p\n&#34;, p&#41;;
&gt; 
&gt;     return 0;
&gt; }
&gt; sources@fc64:~/martin$ gcc -I /usr/local/easysoft/unixODBC/include/
&gt; -Wall rt83083.c 
&gt; rt83083.c: In function ‘main’:
&gt; rt83083.c:12: warning: assignment makes pointer from integer without a cast
&gt; rt83083.c:14: warning: cast to pointer from integer of different size
&gt; sources@fc64:~/martin$ ./a.out 
&gt; sizeof&#40;SQLINTEGER&#41;=4
&gt; sizeof&#40;SQLPOINTER&#41;=8
&gt; p = 0x1
&gt; p = 0x1
&gt; 
&gt; Martin
</div>
There really is no way I can find around these 4 warnings. SQLPOINTER is always bigger or at least the same size as SQLUINTEGER. I cannot control the ODBC API which defines the arguments to SQLSetConnectAttr as SQLPOINTER and SQL_AUTOCOMMIT_ON etc as 0UL.

They&#39;ve been this way for over 10 years without issues so reluctantly I&#39;m marking this done. If you have a compelling argument to reopen then by all means do.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;07&nbsp;12:59:44&nbsp;2013</span>
    <span class="description">bohica [...] ntlworld.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
