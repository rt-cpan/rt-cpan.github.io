<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #114021 for XML-LibXML-Simple: dataloss with non-unique id attr</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #114021 for XML-LibXML-Simple: dataloss with non-unique id attr</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=XML-LibXML-Simple">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=XML-LibXML-Simple">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=XML-LibXML-Simple">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=XML-LibXML-Simple">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/XML-LibXML-Simple">XML-LibXML-Simple CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">114021</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=XML-LibXML-Simple">XML-LibXML-Simple</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
DAVEWOOD [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-220530-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-220531-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=114021">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1621352" href="/Public/Bug/Display.html?id=114021#txn-1621352">#</a>      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;27&nbsp;08:20:37&nbsp;2016</span>
    <span class="description">DAVEWOOD [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> dataloss with non-unique id attr</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1621352/868273/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/868273">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 984b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">As you can see in the attached example the first item is &#34;overriden&#34; without any warning. I am not saying that XML::LibXML::Simple is wrong here, but I dont know enough about XML to figure out where the error lies.

#!/usr/bin/env perl
use 5.018;
use warnings;
use XML::LibXML::Simple qw/ XMLin /;

sub xml2pl {
    my &#40; $xml &#41; = @_;

    my %config = &#40;
        KeepRoot   =&gt; 1,
        ForceArray =&gt; 0,
        KeyAttr    =&gt; undef,
    &#41;;
    my $xs = XML::LibXML::Simple-&gt;new&#40;%config&#41;;
    my $pl = $xs-&gt;XMLin&#40;$xml&#41;;
    return $pl;
}

my $xml = &lt;&lt;&#34;HERE&#34;;
&lt;result&gt;
  &lt;item id=&#34;id-123&#34;&gt;a&lt;/item&gt;
  &lt;item id=&#34;id-123&#34;&gt;b&lt;/item&gt;
&lt;/result&gt;
HERE

my $pl = xml2pl&#40;$xml&#41;;
use Data::Dumper;
say Dumper&#40;$pl&#41;;


$VAR1 = {
          &#39;result&#39; =&gt; {
                      &#39;item&#39; =&gt; {
                                &#39;id-123&#39; =&gt; {
                                            &#39;content&#39; =&gt; &#39;b&#39;
                                          }
                              }
                    }
        };
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1621586" href="/Public/Bug/Display.html?id=114021#txn-1621586">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;28&nbsp;02:34:52&nbsp;2016</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1621586/868417/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/868417">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2016-04-27 08:20:37, DAVEWOOD wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As you can see in the attached example the first item is &#34;overriden&#34;
&gt; without any warning. I am not saying that XML::LibXML::Simple is wrong
&gt; here, but I dont know enough about XML to figure out where the error
&gt; lies.
&gt; 
&gt; #!/usr/bin/env perl
&gt; use 5.018;
&gt; use warnings;
&gt; use XML::LibXML::Simple qw/ XMLin /;
&gt; 
&gt; sub xml2pl {
&gt;     my &#40; $xml &#41; = @_;
&gt; 
&gt; my %config = &#40;
&gt;     KeepRoot   =&gt; 1,
&gt;     ForceArray =&gt; 0,
&gt;     KeyAttr    =&gt; undef,
&gt; &#41;;
&gt; my $xs = XML::LibXML::Simple-&gt;new&#40;%config&#41;;
&gt; my $pl = $xs-&gt;XMLin&#40;$xml&#41;;
&gt; return $pl;
&gt; }
&gt; 
&gt; my $xml = &lt;&lt;&#34;HERE&#34;;
&gt; &lt;result&gt;
&gt;   &lt;item id=&#34;id-123&#34;&gt;a&lt;/item&gt;
&gt;   &lt;item id=&#34;id-123&#34;&gt;b&lt;/item&gt;
&gt; &lt;/result&gt;
&gt; HERE
&gt; 
&gt; my $pl = xml2pl&#40;$xml&#41;;
&gt; use Data::Dumper;
&gt; say Dumper&#40;$pl&#41;;
&gt; 
&gt; 
&gt; $VAR1 = {
&gt;           &#39;result&#39; =&gt; {
&gt;                       &#39;item&#39; =&gt; {
&gt;                                 &#39;id-123&#39; =&gt; {
&gt;                                             &#39;content&#39; =&gt; &#39;b&#39;
&gt;                                           }
&gt;                               }
&gt;                     }
&gt;         };
</div>
A warning is issued if perl is executed with the -w switch:

$ perl -w test.pl                                
&lt;item&gt; element has non-unique value in &#39;id&#39; key attribute: id-123 at /usr/perl5.22.1sp/lib/site_perl/5.22.1/XML/LibXML/Simple.pm line 463.
$VAR1 = {
          &#39;result&#39; =&gt; {
                      &#39;item&#39; =&gt; {
                                &#39;id-123&#39; =&gt; {
                                            &#39;content&#39; =&gt; &#39;b&#39;
                                          }
                              }
                    }
        };

Anyway, I wonder if this module should be marked as &#34;discouraged&#34;. After all it&#39;s a clone if XML::Simple, and that module has in the meantime this notice:
<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE">https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1621587" href="/Public/Bug/Display.html?id=114021#txn-1621587">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;28&nbsp;02:34:52&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1623433" href="/Public/Bug/Display.html?id=114021#txn-1623433">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;04&nbsp;04:18:00&nbsp;2016</span>
    <span class="description">DAVEWOOD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1623433/869336/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/869336">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Apr 28 02:34:52 2016, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2016-04-27 08:20:37, DAVEWOOD wrote:
<div class="message-stanza open">&gt; &gt; As you can see in the attached example the first item is &#34;overriden&#34;
&gt; &gt; without any warning. I am not saying that XML::LibXML::Simple is
&gt; &gt; wrong
&gt; &gt; here, but I dont know enough about XML to figure out where the error
&gt; &gt; lies.
&gt; &gt;
&gt; &gt; #!/usr/bin/env perl
&gt; &gt; use 5.018;
&gt; &gt; use warnings;
&gt; &gt; use XML::LibXML::Simple qw/ XMLin /;
&gt; &gt;
&gt; &gt; sub xml2pl {
&gt; &gt;     my &#40; $xml &#41; = @_;
&gt; &gt;
&gt; &gt; my %config = &#40;
&gt; &gt;     KeepRoot   =&gt; 1,
&gt; &gt;     ForceArray =&gt; 0,
&gt; &gt;     KeyAttr    =&gt; undef,
&gt; &gt; &#41;;
&gt; &gt; my $xs = XML::LibXML::Simple-&gt;new&#40;%config&#41;;
&gt; &gt; my $pl = $xs-&gt;XMLin&#40;$xml&#41;;
&gt; &gt; return $pl;
&gt; &gt; }
&gt; &gt;
&gt; &gt; my $xml = &lt;&lt;&#34;HERE&#34;;
&gt; &gt; &lt;result&gt;
&gt; &gt;   &lt;item id=&#34;id-123&#34;&gt;a&lt;/item&gt;
&gt; &gt;   &lt;item id=&#34;id-123&#34;&gt;b&lt;/item&gt;
&gt; &gt; &lt;/result&gt;
&gt; &gt; HERE
&gt; &gt;
&gt; &gt; my $pl = xml2pl&#40;$xml&#41;;
&gt; &gt; use Data::Dumper;
&gt; &gt; say Dumper&#40;$pl&#41;;
&gt; &gt;
&gt; &gt;
&gt; &gt; $VAR1 = {
&gt; &gt;           &#39;result&#39; =&gt; {
&gt; &gt;                       &#39;item&#39; =&gt; {
&gt; &gt;                                 &#39;id-123&#39; =&gt; {
&gt; &gt;                                             &#39;content&#39; =&gt; &#39;b&#39;
&gt; &gt;                                           }
&gt; &gt;                               }
&gt; &gt;                     }
&gt; &gt;         };
</div>&gt; 
&gt; A warning is issued if perl is executed with the -w switch:
&gt; 
&gt; $ perl -w test.pl
&gt; &lt;item&gt; element has non-unique value in &#39;id&#39; key attribute: id-123 at
&gt; /usr/perl5.22.1sp/lib/site_perl/5.22.1/XML/LibXML/Simple.pm line 463.
&gt; $VAR1 = {
&gt; &#39;result&#39; =&gt; {
&gt; &#39;item&#39; =&gt; {
&gt; &#39;id-123&#39; =&gt; {
&gt;             &#39;content&#39; =&gt; &#39;b&#39;
&gt;           }
&gt; }
&gt; }
&gt; };
&gt; 
&gt; Anyway, I wonder if this module should be marked as &#34;discouraged&#34;.
&gt; After all it&#39;s a clone if XML::Simple, and that module has in the
&gt; meantime this notice:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE">https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE</a></span>
</div>

I am using XML::LibXML::Simple, this module is not deprecated. Did you read the link you provided? It says to use XML::LibXML which I do. =&gt; &#34;XML::LibXML::Simple - XML::LibXML clone of XML::Simple::XMLin&#40;&#41;&#34;

My code demo does use warnings.
&#34;-w is the older version of the use warnings pragma, which is preferred nowadays. While -w is global, use warnings is lexical, and can be activated selectively.&#34; &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://stackoverflow.com/questions/12554179/difference-between-perl-and-perl-w&#41;">http://stackoverflow.com/questions/12554179/difference-between-perl-and-perl-w&#41;</a></span>

It appears that non-unique IDs are allowed. If you want uniqueness you declare it with something like &#34;&lt;xs:unique&gt;&#34;.
If this is true then XML::LibXML::Simple overriding the hash value where the key is the &#34;id&#34; in the output is a bug.

cheers
david
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1623435" href="/Public/Bug/Display.html?id=114021#txn-1623435">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;04&nbsp;04:53:50&nbsp;2016</span>
    <span class="description">solutions [...] overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> ;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114021] dataloss with non-unique id attr</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 4 May 2016 10:53:33 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> David Schmidt via RT &lt;bug-XML-LibXML-Simple [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;solutions [...] overmeer.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1623435/869338/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/869338">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">* David Schmidt via RT &#40;bug-XML-LibXML-Simple@rt.cpan.org&#41; [160504 08:18]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: XML-LibXML-Simple
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114021">https://rt.cpan.org/Ticket/Display.html?id=114021</a></span> &gt;
&gt; 
<div class="message-stanza open">&gt; &gt; &gt; As you can see in the attached example the first item is &#34;overriden&#34;
&gt; &gt; &gt; without any warning. I am not saying that XML::LibXML::Simple is
&gt; &gt; &gt; wrong here, but I dont know enough about XML to figure out where
&gt; &gt; &gt; the error lies.
</div></div>
&#40;I&#39;m just back after holidays&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; $ perl -w test.pl
&gt; &gt; &lt;item&gt; element has non-unique value in &#39;id&#39; key attribute: id-123 at
&gt; &gt; /usr/perl5.22.1sp/lib/site_perl/5.22.1/XML/LibXML/Simple.pm line 463.
&gt; &gt; $VAR1 = {
&gt; &gt; &#39;result&#39; =&gt; {
&gt; &gt; &#39;item&#39; =&gt; {
&gt; &gt; &#39;id-123&#39; =&gt; {
&gt; &gt;             &#39;content&#39; =&gt; &#39;b&#39;
&gt; &gt;           }
&gt; &gt; }
&gt; &gt; }
&gt; &gt; };
&gt; &gt; 
&gt; &gt; Anyway, I wonder if this module should be marked as &#34;discouraged&#34;.
&gt; &gt; After all it&#39;s a clone if XML::Simple, and that module has in the
&gt; &gt; meantime this notice:
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE">https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE</a></span>
</div>&gt; 
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I am using XML::LibXML::Simple, this module is not deprecated. [...]
</div>
&#34;discouraged&#34; is not an alias of &#34;deprecated&#34;.

Yes, it is much, much preferred to process XML with a schema: in that
case, you can optimize the Perl representation of the XML data in a
predictable way.

XML::Simple is a module with a &#40;too?&#41; high level of dwimmery, in the
Perl tradition.  And that makes it easy to shoot yourself in your foot
using it.  The manual is long, and you must read most of it to understand
all foot-angles.  Dwimmery, on the other hand, also shows what people
needed as functionality of time.  XML::LibXML::Simple attempts to be 
bugwards compatible with that interface.

You are hurt by the default use of KeyAttr, which automatically converts
items with attributes &#39;name&#39;, &#39;key&#39;, or &#39;id&#39; into HASHes.  This is a good
guess in the common sense.  For instance, the &#39;id&#39; attribute is nearly
always of ID-type as defined in W3C-schema&#39;s, which are required to be
unique for the document.

So: the easy work-around for you is to change the KeyAttr list.  That&#39;s
not a bug: it is described in the manual and follows common practice in
the real world.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; My code demo does use warnings.
&gt; &#34;-w is the older version of the use warnings pragma,
&gt; which is preferred nowadays. While -w is global, use
&gt; warnings is lexical, and can be activated selectively.&#34;
</div>
Yes, I never use &#39;-w&#39; myself.  XML::LibXML::Simple started with a pure
code copy of XML::Simple, but rewriting the DOM handling.   The original
module used &#34;warn &#39;...&#39; if $^W&#34; a lot, where $^W is directly related to
the &#39;-w&#39; command-line flag, not to &#39;no warnings&#39;.

I am considering now replacing the use of $^W for a clean warning class.
-- 
Regards,

               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1856931" href="/Public/Bug/Display.html?id=114021#txn-1856931">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;20&nbsp;09:18:45&nbsp;2019</span>
    <span class="description">MARKOV [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1856931/997512/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/997512">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 45b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Will not change the interface wrt XML::Simple
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1856933" href="/Public/Bug/Display.html?id=114021#txn-1856933">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;20&nbsp;09:18:46&nbsp;2019</span>
    <span class="description">MARKOV [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.329956</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
