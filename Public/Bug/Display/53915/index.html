<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #53915 for DBD-Oracle: DBD-Oracle with Oracle 11.2.0</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #53915 for DBD-Oracle: DBD-Oracle with Oracle 11.2.0</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-Oracle/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-Oracle/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-Oracle/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-Oracle/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/pythian/DBD-Oracle/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-Oracle">DBD-Oracle CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">53915</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">deleted</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-Oracle/Active/">DBD-Oracle</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">champoux [...] pythian.com
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
thorsten.hintemann [...] brillux.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10192-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10193-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;22&nbsp;06:34:54&nbsp;2010</span>
    <span class="description">thorsten.hintemann [...] brillux.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> DBD-Oracle with Oracle 11.2.0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 22 Jan 2010 12:36:23 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-DBD-Oracle [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Hintemann, Thorsten&#34; &lt;thorsten.hintemann [...] brillux.de&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space"> 
Version:             DBD-Oracle-1.23 &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~pythian/DBD-Oracle-1.23/">http://search.cpan.org/~pythian/DBD-Oracle-1.23/</a></span>&gt;  ; DBI-1.609 
Perl-Version:      This is perl, v5.8.8 built for x86_64-linux-thread-multi
Linux-Version:    Linux wwst-r1 2.6.18-128.1.16.el5 #1 SMP Fri Jun 26 10:53:31 EDT 2009 x86_64 x86_64 x86_64 GNU/Linux
 
Oracle-Version:   Oracle RAC 11.2.0
 
 
 
Problem:
 
we want to make a &#34;LOCAL=YES&#34;-Connection to our Oracle-Database and NOT with SQLNET. 
Since the upgrade from 11.1.0 to 11.2.0 we have a problem when we make a local connection and after this we make a system call like &#39;pwd&#39;.
the Exit-Code was not 0
 
This happens in 11.1.0 not.
 
 
Copy of our test-script
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</div>my $dbh;
use DBI;

# works
print &#34;____ LOCAL=NO Connect TNS_______________________\n&#34;;
$dbh = DBI-&gt;connect&#40;&#39;dbi:Oracle:ZENTRALE1&#39;,&#39;wws&#39;,&#39;wws&#39;&#41;;
print &#34;dbi: &#34; . $dbh . &#34;\n&#34;;
my $var;
if &#40;system&#40;&#34;pwd&#34;&#41; == 0&#41; {
        print &#34;works fins \n&#34;;
}
else {
        print &#34;it does not work\n&#34;;
}
$dbh-&gt;disconnect;
 
# do not work
print &#34;____ LOCAL=YES Connect _________________________\n&#34;;
$dbh = DBI-&gt;connect&#40;&#39;dbi:Oracle:&#39;,&#39;wws&#39;,&#39;wws&#39;&#41;;
print &#34;dbi: &#34; . $dbh . &#34;\n&#34;;
my $var;
if &#40;system&#40;&#34;pwd&#34;&#41; == 0&#41; {
        print &#34;works fins \n&#34;;
}
else {
        print &#34;it does not work\n&#34;;
}
$dbh-&gt;disconnect;
 

# works not after a local connect
print &#34;____ LOCAL=NO Connect TNS_______________________\n&#34;;
$dbh = DBI-&gt;connect&#40;&#39;dbi:Oracle:ZENTRALE1&#39;,&#39;wws&#39;,&#39;wws&#39;&#41;;
print &#34;dbi: &#34; . $dbh . &#34;\n&#34;;
my $var;
if &#40;system&#40;&#34;pwd&#34;&#41; == 0&#41; {
        print &#34;works fins \n&#34;;
}
else {
        print &#34;it does not work\n&#34;;
}
$dbh-&gt;disconnect;
&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 
 
 
 
Output of the script:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</div>wwst-r1&#40;test&#41;:/tmp# perl t.pl
____ LOCAL=NO Connect TNS_______________________
dbi: DBI::db=HASH&#40;0xcedb0b0&#41;
/tmp
works fins
____ LOCAL=YES Connect _________________________
dbi: DBI::db=HASH&#40;0xcedb7e0&#41;
/tmp
it does not work
____ LOCAL=NO Connect TNS_______________________
dbi: DBI::db=HASH&#40;0xcedac80&#41;
/tmp
it does not work
&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 
 
 

kind regards

  
Thorsten Hintemann

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">________________________________

Brillux GmbH &#38; Co. KG 
Thorsten Hintemann
EDV Systemadministration
Weseler Straße 401
48163 Münster

<div class="message-stanza open">________________________________

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.brillux.de">http://www.brillux.de</a></span> &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.brillux.de/">http://www.brillux.de/</a></span>&gt; 
thorsten.hintemann@brillux.de &lt;mailto:thorsten.hintemann@brillux.de&gt; 
Tel. +49 &#40;0&#41;251 7188-471 &lt;tel:+49-251-7188-471&gt; 
Fax +49 &#40;0&#41;251 7188-59913 &lt;tel:+49-251-7188-59913&gt; 

<div class="message-stanza open">________________________________

Brillux GmbH &#38; Co. KG, Sitz Münster, AG Münster HR A 3194
P.h.G. Brillux GmbH, Sitz Münster, AG Münster HR B 4272
GF Peter König, Franz Wilhelm König, Dr. Julius Schröder, Michael Thompson 

 
</div></div></div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;22&nbsp;07:27:55&nbsp;2010</span>
    <span class="description">champoux [...] pythian.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">We are going to need mort that that to go on.

In this case it can be very tricky to resolve as I canot replicate your 
enviornment to recreate the error

In this case if you could make this change in your test

$dbh = DBI-&gt;connect&#40;&#39;dbi:Oracle:ZENTRALE1&#39;,&#39;wws&#39;,&#39;wws&#39;,
{dbd_verbose=&gt;15}&#41;;

and then rerun it on both and post the results here I could at least 
see if there was any differance in the way the connect is going on.

The above trace will dump a large amount of you system enviornment.  If 
you do not want let the worl see that CPAN just tell me so and I will 
send you an email so you can send it to me directly off-line.


Off the top of my head I do not think this is a DBD::Oracle issue as 
you have not changed that  of course it could be if they change 
something in 11.2 that effect us.  I do not have a copy of 11.2 yet so 
I do not know

Cheers
John Scoles
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;22&nbsp;07:28:04&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;22&nbsp;08:40:48&nbsp;2010</span>
    <span class="description">champoux [...] pythian.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">No need to open another ticket but I know what might be going on here 
and It is normal behaiour

it is keeping your enviornment handle about 

as you can see in the first trace

OCINlsEnvironmentVariableGet&#40;46,0,93,0,2&#41;=SUCCESS
        OCINlsEnvironmentVariableGet&#40;46,0,94,0,2&#41;=SUCCESS
        OCINlsEnvCreate&#40;1f1cf368,THREADED |
OBJECT,3,0,0,0,0,0,0,46,46&#41;=SUCCESS
        OCIHandleAlloc&#40;1f22aca0,1f1cf370,OCI_HTYPE_ERROR,0,0&#41;=SUCCESS
           charset id=46, name=WE8ISO8859P15, ncharset id=46,
name=WE8ISO8859P15 &#40;csid: utf8=871 al32utf8=873&#41;
        OCIHandleAlloc&#40;1f22aca0,1f1cf378,OCI_HTYPE_SERVER,0,0&#41;=SUCCESS
        OCIHandleAlloc&#40;1f22aca0,1f1cf380,OCI_HTYPE_SVCCTX,0,0&#41;=SUCCESS
        OCIServerAttach&#40;1f26ff10, 1f26f788, &#34;ZENTRALE1&#34;, 9,


and then in the next log in you will see


OCIHandleAlloc&#40;1f22aca0,1f1cf370,OCI_HTYPE_ERROR,0,0&#41;=SUCCESS
           charset id=46, name=WE8ISO8859P15, ncharset id=46,
name=WE8ISO8859P15 &#40;csid: utf8=871 al32utf8=873&#41;
        OCIHandleAlloc&#40;1f22aca0,1f1cf378,OCI_HTYPE_SERVER,0,0&#41;=SUCCESS
        OCIHandleAlloc&#40;1f22aca0,1f1cf380,OCI_HTYPE_SVCCTX,0,0&#41;=SUCCESS
        OCIServerAttach&#40;1f26ff10, 1f26f788, &#34;ZENTRALE1&#34;, 9,
mode=DEFAULT,0&#41;=SUCCESS


the OCIHandleAlloc is re-using the envionment handle &#39;1f22aca0&#39; which 
is what it is suppose to do

disconnect only stops the currect OCI session and does not destroy the 
OCI enviornment &#40;Beleive me that is a good thing&#41;


In your case you are attmepting to change the envionment with the 
LOCAL=NO  so in-order to do that you have to &#39;Destroy&#39; the handle like 
this

$dbh-&gt;destroy&#40;&#41;;


give that a try and see if it works for you

cheers
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;27&nbsp;03:31:56&nbsp;2010</span>
    <span class="description">thorsten.hintemann [...] brillux.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> AW: [rt.cpan.org #53915] DBD-Oracle with Oracle 11.2.0 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 27 Jan 2010 09:08:18 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-DBD-Oracle [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Hintemann, Thorsten&#34; &lt;thorsten.hintemann [...] brillux.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">To destroy the session does not help me, because in some programs we open the database connection, make a system call and close then the connection.

this system call does not return the right return code.


my script demonstrate only, that it works over a tns-connection.

Kind regards

Thorsten Hintemann

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">________________________________________________________________________________
Brillux GmbH &#38; Co. KG 
Thorsten Hintemann
EDV Systemadministration
Weseler Straße 401
48163 Münster
<div class="message-stanza open">________________________________________________________________________________
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.brillux.de">http://www.brillux.de</a></span>
mailto:thorsten.hintemann@brillux.de
Tel. +49 &#40;0&#41;251 7188-471
Fax +49 &#40;0&#41;251 7188-59913
<div class="message-stanza open">________________________________________________________________________________
Brillux GmbH &#38; Co. KG, Sitz Münster, AG Münster HR A 3194
P.h.G. Brillux GmbH, Sitz Münster, AG Münster HR B 4272
GF Peter König, Franz Wilhelm König, Dr. Julius Schröder, Michael Thompson
</div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;27&nbsp;07:16:18&nbsp;2010</span>
    <span class="description">champoux [...] pythian.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Well if the destoy is not working for you I will have another look at 
it now that I know what to look for with  &#39;LOCAL=YES&#39; 

As you have update your DB from 11.1.0 to 11.2.0  that might be the 
cause especally if you are using RAC??  Have you checked with Oracle on 
this??

Will be hard for me to duplcate but I will give it a shot one more try
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;27&nbsp;07:21:46&nbsp;2010</span>
    <span class="description">thorsten.hintemann [...] brillux.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> AW: [rt.cpan.org #53915] DBD-Oracle with Oracle 11.2.0 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 27 Jan 2010 13:22:46 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-DBD-Oracle [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Hintemann, Thorsten&#34; &lt;thorsten.hintemann [...] brillux.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes we are using RAC and we have made the following szenario:


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</div># sqlplus user/pwd

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">SQL&gt; !
</div>pwd
exit
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">SQL&gt; exit sql.sqlcode
</div>
# echo $?
&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;

the exit-code was 0





Mit freundlichem Gruß

Thorsten Hintemann

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">________________________________________________________________________________
Brillux GmbH &#38; Co. KG 
Thorsten Hintemann
EDV Systemadministration
Weseler Straße 401
48163 Münster
<div class="message-stanza open">________________________________________________________________________________
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.brillux.de">http://www.brillux.de</a></span>
mailto:thorsten.hintemann@brillux.de
Tel. +49 &#40;0&#41;251 7188-471
Fax +49 &#40;0&#41;251 7188-59913
<div class="message-stanza open">________________________________________________________________________________
Brillux GmbH &#38; Co. KG, Sitz Münster, AG Münster HR A 3194
P.h.G. Brillux GmbH, Sitz Münster, AG Münster HR B 4272
GF Peter König, Franz Wilhelm König, Dr. Julius Schröder, Michael Thompson
</div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;27&nbsp;07:44:23&nbsp;2010</span>
    <span class="description">champoux [...] pythian.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Well I just ran your test script on a

9, 10, 10.2 box and they all work &#40;return a pwd&#41;

Me thinks it might be some sort of security feature or setting that has 
changed where you cannot run system commands while ???  but that is a 
long shot

I will ask another friend of mine to give this a try on his system as 
he might have a set up like yours

cheers
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;27&nbsp;10:11:35&nbsp;2010</span>
    <span class="description">champoux [...] pythian.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On thing that might release the enviornment is to try using 
ora_envhp=&gt;0 on connect

from the pod

ora_envhp 
The first time a connection is made a new OCI &#39;environment&#39; is created 
by DBD::Oracle and stored in the driver handle. Subsequent connects 
reuse &#40;share&#41; that same OCI environment by default.

The ora_envhp attribute can be used to disable the reuse of the OCI 
environment from a previous connect. If the value is 0 then a new OCI 
environment is allocated and used for this connection.

The OCI environment is what holds information about the client side 
context, such as the local NLS environment. So by altering %ENV and 
setting ora_envhp to 0 you can create connections with different NLS 
settings. This is most useful for testing.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;28&nbsp;07:55:27&nbsp;2010</span>
    <span class="description">thorsten.hintemann [...] brillux.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> AW: [rt.cpan.org #53915] DBD-Oracle with Oracle 11.2.0 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 28 Jan 2010 13:56:27 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-DBD-Oracle [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Hintemann, Thorsten&#34; &lt;thorsten.hintemann [...] brillux.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
after the &#34;$dbh-&gt;connect&#34; i insertet &#34;  $SIG{CHLD} = &#39;DEFAULT&#39;;&#34;

.... ooops the system call works fine.

i found the solution in Bug #16548

PS: can you please edit the Bug and change our dbuser/dbpwd to xxx/xxx ?

Mit freundlichem Gruß

Thorsten Hintemann

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">________________________________________________________________________________
Brillux GmbH &#38; Co. KG 
Thorsten Hintemann
EDV Systemadministration
Weseler Straße 401
48163 Münster
<div class="message-stanza open">________________________________________________________________________________
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.brillux.de">http://www.brillux.de</a></span>
mailto:thorsten.hintemann@brillux.de
Tel. +49 &#40;0&#41;251 7188-471
Fax +49 &#40;0&#41;251 7188-59913
<div class="message-stanza open">________________________________________________________________________________
Brillux GmbH &#38; Co. KG, Sitz Münster, AG Münster HR A 3194
P.h.G. Brillux GmbH, Sitz Münster, AG Münster HR B 4272
GF Peter König, Franz Wilhelm König, Dr. Julius Schröder, Michael Thompson
</div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;28&nbsp;08:50:27&nbsp;2010</span>
    <span class="description">thorsten.hintemann [...] brillux.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> AW: [rt.cpan.org #53915] DBD-Oracle with Oracle 11.2.0 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 28 Jan 2010 14:51:40 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-DBD-Oracle [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Hintemann, Thorsten&#34; &lt;thorsten.hintemann [...] brillux.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes please delete this ticket i make a new ticket!


Mit freundlichem Gruß

Thorsten Hintemann

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">________________________________________________________________________________
Brillux GmbH &#38; Co. KG 
Thorsten Hintemann
EDV Systemadministration
Weseler Straße 401
48163 Münster
<div class="message-stanza open">________________________________________________________________________________
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.brillux.de">http://www.brillux.de</a></span>
mailto:thorsten.hintemann@brillux.de
Tel. +49 &#40;0&#41;251 7188-471
Fax +49 &#40;0&#41;251 7188-59913
<div class="message-stanza open">________________________________________________________________________________
Brillux GmbH &#38; Co. KG, Sitz Münster, AG Münster HR A 3194
P.h.G. Brillux GmbH, Sitz Münster, AG Münster HR B 4272
GF Peter König, Franz Wilhelm König, Dr. Julius Schröder, Michael Thompson
</div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;28&nbsp;08:55:28&nbsp;2010</span>
    <span class="description">champoux [...] pythian.com -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;28&nbsp;08:55:55&nbsp;2010</span>
    <span class="description">champoux [...] pythian.com -  Status changed from &#39;deleted&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;28&nbsp;08:56:00&nbsp;2010</span>
    <span class="description">champoux [...] pythian.com -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;28&nbsp;08:56:02&nbsp;2010</span>
    <span class="description">champoux [...] pythian.com -  Status changed from &#39;deleted&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;28&nbsp;08:56:44&nbsp;2010</span>
    <span class="description">champoux [...] pythian.com -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;28&nbsp;08:56:47&nbsp;2010</span>
    <span class="description">champoux [...] pythian.com -  Status changed from &#39;deleted&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;28&nbsp;09:02:37&nbsp;2010</span>
    <span class="description">champoux [...] pythian.com -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;28&nbsp;09:02:45&nbsp;2010</span>
    <span class="description">champoux [...] pythian.com -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
