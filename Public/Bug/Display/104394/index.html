<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #104394 for UUID: Unable to build on OS X Yosemite</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #104394 for UUID: Unable to build on OS X Yosemite</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/UUID/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/UUID/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/UUID/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/UUID/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/UUID">UUID CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">104394</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/UUID/Active/">UUID</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">JRM [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dwheeler [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-34796-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.24    </td>
  </tr>
  <tr id="CF-34797-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.24_03    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;12&nbsp;18:32:11&nbsp;2015</span>
    <span class="description">dwheeler [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Unable to build on OS X Yosemite</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">With Perl 5.20.2:

~/.cpan/build/UUID-0.24-q6KN6b&gt; perl Makefile.PL      
#
# ===&gt; Checking for -luuid
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -fstack-protector -L/usr/local/lib assertlibuGTNA525.c -o assertlibTHRf03Ix -luuid
#
# ===&gt; Checking for uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -fstack-protector -L/usr/local/lib assertlibZIDEw3MN.c -o assertlibKlIpXbPG
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -fstack-protector -L/usr/local/lib assertlibSyXj7UWK.c -o assertlib9kMQU8l8 -luuid
# ===&gt; Found!
#
# ===&gt; Checking for uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -fstack-protector -L/usr/local/lib assertlibYMoMQ5eA.c -o assertlibauNKOKSy
assertlibYMoMQ5eA.c:1:10: fatal error: &#39;uuid.h&#39; file not found
#include &lt;uuid.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -fstack-protector -L/usr/local/lib assertlibIQ2iaKa5.c -o assertlibK98k3lXs -luuid
assertlibIQ2iaKa5.c:1:10: fatal error: &#39;uuid.h&#39; file not found
#include &lt;uuid.h&gt;
         ^
1 error generated.
#
# ===&gt; Checking for rpc.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -fstack-protector -L/usr/local/lib assertlibo9zGRwoa.c -o assertlibHfHAVOUZ
assertlibo9zGRwoa.c:1:10: fatal error: &#39;rpc.h&#39; file not found
#include &lt;rpc.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -fstack-protector -L/usr/local/lib assertlib0wI6l67_.c -o assertlibieupBYSn -luuid
assertlib0wI6l67_.c:1:10: fatal error: &#39;rpc.h&#39; file not found
#include &lt;rpc.h&gt;
         ^
1 error generated.
#
# ===&gt; Checking for RPC interface in uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -fstack-protector -L/usr/local/lib assertlibwn1EgmBD.c -o assertlib4XgWWJwJ
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -fstack-protector -L/usr/local/lib assertliba9xv1yfU.c -o assertlibUbXBu9Oj -luuid
assertliba9xv1yfU.c:5:13: error: unknown type name &#39;int32_t&#39;; did you mean &#39;__int32_t&#39;?
            int32_t r,s;
            ^~~~~~~
            __int32_t
/usr/include/i386/_types.h:44:15: note: &#39;__int32_t&#39; declared here
typedef int                     __int32_t;
                                ^
assertliba9xv1yfU.c:6:13: warning: implicit declaration of function &#39;uuid_create&#39; is
      invalid in C99 [-Wimplicit-function-declaration]
            uuid_create&#40;&#38;u1,&#38;s&#41;;
            ^
assertliba9xv1yfU.c:7:13: warning: implicit declaration of function &#39;uuid_create_nil&#39; is
      invalid in C99 [-Wimplicit-function-declaration]
            uuid_create_nil&#40;&#38;u2,&#38;s&#41;;
            ^
assertliba9xv1yfU.c:8:13: warning: implicit declaration of function &#39;uuid_from_string&#39; is
      invalid in C99 [-Wimplicit-function-declaration]
            uuid_from_string&#40;str,&#38;u1,&#38;s&#41;;
            ^
assertliba9xv1yfU.c:9:13: warning: implicit declaration of function &#39;uuid_to_string&#39; is
      invalid in C99 [-Wimplicit-function-declaration]
            uuid_to_string&#40;&#38;u1,&#38;str,&#38;s&#41;;
            ^
assertliba9xv1yfU.c:10:38: error: too many arguments to function call, expected 2, have 3
            r = uuid_compare&#40;&#38;u1,&#38;u2,&#38;s&#41;;
                ~~~~~~~~~~~~         ^~
/usr/include/uuid/uuid.h:55:1: note: &#39;uuid_compare&#39; declared here
int uuid_compare&#40;const uuid_t uu1, const uuid_t uu2&#41;;
^
assertliba9xv1yfU.c:11:17: warning: implicit declaration of function &#39;uuid_equal&#39; is
      invalid in C99 [-Wimplicit-function-declaration]
            r = uuid_equal&#40;&#38;u1,&#38;u2,&#38;s&#41;;
                ^
assertliba9xv1yfU.c:12:17: warning: implicit declaration of function &#39;uuid_is_nil&#39; is
      invalid in C99 [-Wimplicit-function-declaration]
            r = uuid_is_nil&#40;&#38;u1,&#38;s&#41;;
                ^
6 warnings and 2 errors generated.
# ===&gt; Err&#40;47&#41;: &#34;Can&#39;t link/include C library &#39;uuid&#39;, aborting.
&#34;
# ===&gt; Checking for e2fs interface in uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -fstack-protector -L/usr/local/lib assertlib1fKhrmc6.c -o assertlibSdbVPbjW
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -fstack-protector -L/usr/local/lib assertlibTERTFF0z.c -o assertlibrd0FI5nC -luuid
# ===&gt; Err&#40;21&#41;: &#34;wrong result: &#39;uuid&#39;
&#34;
# ===&gt; Checking for Win interface in uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -fstack-protector -L/usr/local/lib assertlib6x6n4R0o.c -o assertlibgs9P98CV
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -fstack-protector -L/usr/local/lib assertlib7vQhycA1.c -o assertlibtuzDDkLr
assertlib7vQhycA1.c:2:10: fatal error: &#39;rpcdce.h&#39; file not found
#include &lt;rpcdce.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -fstack-protector -L/usr/local/lib assertlibhB0YP4en.c -o assertlibHHqUZlDg -lrpcrt4
assertlibhB0YP4en.c:2:10: fatal error: &#39;rpcdce.h&#39; file not found
#include &lt;rpcdce.h&gt;
         ^
1 error generated.
# ===&gt; Err&#40;61&#41;: &#34;Can&#39;t link/include C library &#39;rpcdce.h&#39;, &#39;rpcrt4&#39;, aborting.
&#34;
No interface found. Can&#39;t continue.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;12&nbsp;18:42:05&nbsp;2015</span>
    <span class="description">dwheeler [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">FWIW, here&#39;s the OS X uuid.h file:

  <span class="clickylink"><a target="new" rel="nofollow" href="http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/uuid/uuid.h">http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/uuid/uuid.h</a></span>

The only diff between that version and the one on my system is:

@@ -36,11 +36,7 @@
 #define _UUID_UUID_H
 
 #include &lt;sys/_types.h&gt;
-
-#ifndef _UUID_T
-#define _UUID_T
-typedef __darwin_uuid_t        uuid_t;
-#endif /* _UUID_T */
+#include &lt;sys/_types/_uuid_t.h&gt;
 
 #ifndef _UUID_STRING_T
 #define _UUID_STRING_T
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;12&nbsp;18:43:24&nbsp;2015</span>
    <span class="description">dwheeler [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-05-12 18:42:05, DWHEELER wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; -#ifndef _UUID_T
&gt; -#define _UUID_T
&gt; -typedef __darwin_uuid_t      uuid_t;
&gt; -#endif /* _UUID_T */
&gt; +#include &lt;sys/_types/_uuid_t.h&gt;
</div>

And the complete contents of sys/_types/_uuid_t.h:

#ifndef _UUID_T
#define _UUID_T
typedef __darwin_uuid_t uuid_t;
#endif /* _UUID_T */
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;12&nbsp;19:19:19&nbsp;2015</span>
    <span class="description">dwheeler [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I was able to get it to build and for all tests to pass by forcing to only look for e2fs and to ignore the error message in try_e2fs&#40;&#41;. That error is &#34;wrong result: &#39;uuid&#39;&#34;. Not sure where it comes from.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;12&nbsp;19:28:12&nbsp;2015</span>
    <span class="description">dwheeler [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-05-12 19:19:19, DWHEELER wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I was able to get it to build and for all tests to pass by forcing to
&gt; only look for e2fs and to ignore the error message in try_e2fs&#40;&#41;. That
&gt; error is &#34;wrong result: &#39;uuid&#39;&#34;. Not sure where it comes from.
</div>
To be clear, it works with this patch, though I suspect it&#39;s not a good idea to ignore the &#34;wrong result&#34; error:

--- Makefile.PL.orig    2015-05-12 16:27:12.000000000 -0700
+++ Makefile.PL 2015-05-12 16:27:14.000000000 -0700
@@ -105,7 +105,7 @@
             return 0;
         /,
     &#41;};
-    if &#40;$@&#41; { my $L = length $@; print &#34;# ===&gt; Err&#40;$L&#41;: \&#34;$@\&#34;\n&#34;; return 0 }
+    if &#40;$@ &#38;&#38; $@ !~ /wrong result/&#41; { my $L = length $@; print &#34;# ===&gt; Err&#40;$L&#41;: \&#34;$@\&#34;\n&#34;; return 0 }
     push @$defs, &#39;-DPERL__UUID__E2FS_INT&#39;;
     push @$libs, &#39;-luuid&#39;;
     print &#34;# ===&gt; Found!\n&#34;;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;16&nbsp;07:53:48&nbsp;2015</span>
    <span class="description">JRM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue May 12 19:28:12 2015, DWHEELER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2015-05-12 19:19:19, DWHEELER wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; I was able to get it to build and for all tests to pass by forcing to
&gt; &gt; only look for e2fs and to ignore the error message in try_e2fs&#40;&#41;.
&gt; &gt; That
&gt; &gt; error is &#34;wrong result: &#39;uuid&#39;&#34;. Not sure where it comes from.
</div>&gt; 
&gt; To be clear, it works with this patch, though I suspect it&#39;s not a
&gt; good idea to ignore the &#34;wrong result&#34; error:
&gt; 
&gt; --- Makefile.PL.orig    2015-05-12 16:27:12.000000000 -0700
&gt; +++ Makefile.PL 2015-05-12 16:27:14.000000000 -0700
&gt; @@ -105,7 +105,7 @@
&gt;              return 0;
&gt;          /,
&gt;      &#41;};
&gt; -    if &#40;$@&#41; { my $L = length $@; print &#34;# ===&gt; Err&#40;$L&#41;: \&#34;$@\&#34;\n&#34;;
&gt; return 0 }
&gt; +    if &#40;$@ &#38;&#38; $@ !~ /wrong result/&#41; { my $L = length $@; print &#34;#
&gt; ===&gt; Err&#40;$L&#41;: \&#34;$@\&#34;\n&#34;; return 0 }
&gt;      push @$defs, &#39;-DPERL__UUID__E2FS_INT&#39;;
&gt;      push @$libs, &#39;-luuid&#39;;
&gt;      print &#34;# ===&gt; Found!\n&#34;;
</div>
My first &#40;wrong&#41; thought was that your system prototypes a couple of the parse/unparse functions a little differently. For instance:

  void uuid_unparse&#40;const uuid_t uu, uuid_string_t out&#41;;

Versus:

  void uuid_unparse&#40;uuid_t uu, char *out&#41;;

It&#39;s possible there&#39;s a buffer overflow there if your system expects more than a 37 char destination. It&#39;s not clear what uuid_string_t ultimately typedefs to.

But, that doesn&#39;t make sense since test.pl passes...

The &#34;wrong result&#34; is really coming from Devel::CheckLib in the block around line 330. Apparently the second system&#40;&#41; call is failing, or at least not returning 0. That&#39;s where it tries to actually run the try_e2fs&#40;&#41; test code.

You might try something like this patch against CheckLib.pm:

--- CheckLib.pm~        2015-01-03 21:08:55.000000000 -0500
+++ /usr/lib/perl5/site_perl/5.20.1/Devel/CheckLib.pm   2015-08-16 06:55:11.457961878 -0400
@@ -327,7 +327,11 @@
         push @missing, $lib if $rv != 0 || ! -x $exefile;
         my $absexefile = File::Spec-&gt;rel2abs&#40;$exefile&#41;;
         $absexefile = &#39;&#34;&#39;.$absexefile.&#39;&#34;&#39; if $absexefile =~ m/\s/;
-        push @wrongresult, $lib if $rv == 0 &#38;&#38; -x $exefile &#38;&#38; system&#40;$absexefile&#41; != 0;
+        if &#40; $rv == 0 &#38;&#38; -x $exefile &#41; {
+            my $runexe = system&#40;$absexefile&#41;;
+            warn &#34;# system&#40;&#41; returned $runexe\n&#34; if $args{debug};
+            push @wrongresult, $lib if $runexe != 0;
+        }
         unlink $ofile if -e $ofile;
         _cleanup_exe&#40;$exefile&#41;;
     }

For bonus points you could add a die&#40;&#41; too, just so you can run the leftover test program manually. I&#39;d say it would dump core, but I wouldn&#39;t bet more than a half bucket of rusty bent nails on that. =&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;16&nbsp;07:53:50&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;16&nbsp;08:47:50&nbsp;2015</span>
    <span class="description">JRM [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;17&nbsp;19:30:53&nbsp;2015</span>
    <span class="description">dwheeler [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Applied that patch, but the results look the same:

# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlib97MmZvAr.c -o assertlibfzxTmOkG -luuid
#
# ===&gt; Checking for -luuid
# system&#40;&#41; returned 0
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlib49kv6hJ_.c -o assertlibjuEhS_xh
#
# ===&gt; Checking for uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibKQGQTZOq.c -o assertlib0YDQu60a -luuid
# system&#40;&#41; returned 0
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibsHYrpL6T.c -o assertlibYrAgpWWL
# ===&gt; Found!
#
# ===&gt; Checking for uuid.h
assertlibsHYrpL6T.c:1:10: fatal error: &#39;uuid.h&#39; file not found
#include &lt;uuid.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibFyJgAXZP.c -o assertlibECYnoIX3 -luuid
assertlibFyJgAXZP.c:1:10: fatal error: &#39;uuid.h&#39; file not found
#include &lt;uuid.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlib6GjHxggS.c -o assertlibAv0bew4a
#
# ===&gt; Checking for rpc.h
assertlib6GjHxggS.c:1:10: fatal error: &#39;rpc.h&#39; file not found
#include &lt;rpc.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibayp117po.c -o assertlib9y94WYjQ -luuid
assertlibayp117po.c:1:10: fatal error: &#39;rpc.h&#39; file not found
#include &lt;rpc.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibsRCkKPpB.c -o assertlibgg8Q1gfp
#
# ===&gt; Checking for RPC interface in uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibHZjJWtEV.c -o assertlibnWH2I1Kr -luuid
assertlibHZjJWtEV.c:5:13: error: unknown type name &#39;int32_t&#39;; did you mean &#39;__int32_t&#39;?
            int32_t r,s;
            ^~~~~~~
            __int32_t
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk/usr/include/i386/_types.h:44:15: note: &#39;__int32_t&#39; declared here
typedef int                     __int32_t;
                                ^
assertlibHZjJWtEV.c:6:13: warning: implicit declaration of function &#39;uuid_create&#39; is invalid in C99 [-Wimplicit-function-declaration]
            uuid_create&#40;&#38;u1,&#38;s&#41;;
            ^
assertlibHZjJWtEV.c:7:13: warning: implicit declaration of function &#39;uuid_create_nil&#39; is invalid in C99 [-Wimplicit-function-declaration]
            uuid_create_nil&#40;&#38;u2,&#38;s&#41;;
            ^
assertlibHZjJWtEV.c:8:13: warning: implicit declaration of function &#39;uuid_from_string&#39; is invalid in C99 [-Wimplicit-function-declaration]
            uuid_from_string&#40;str,&#38;u1,&#38;s&#41;;
            ^
assertlibHZjJWtEV.c:9:13: warning: implicit declaration of function &#39;uuid_to_string&#39; is invalid in C99 [-Wimplicit-function-declaration]
            uuid_to_string&#40;&#38;u1,&#38;str,&#38;s&#41;;
            ^
assertlibHZjJWtEV.c:10:38: error: too many arguments to function call, expected 2, have 3
            r = uuid_compare&#40;&#38;u1,&#38;u2,&#38;s&#41;;
                ~~~~~~~~~~~~         ^~
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk/usr/include/uuid/uuid.h:55:1: note: &#39;uuid_compare&#39; declared here
int uuid_compare&#40;const uuid_t uu1, const uuid_t uu2&#41;;
^
assertlibHZjJWtEV.c:11:17: warning: implicit declaration of function &#39;uuid_equal&#39; is invalid in C99 [-Wimplicit-function-declaration]
            r = uuid_equal&#40;&#38;u1,&#38;u2,&#38;s&#41;;
                ^
assertlibHZjJWtEV.c:12:17: warning: implicit declaration of function &#39;uuid_is_nil&#39; is invalid in C99 [-Wimplicit-function-declaration]
            r = uuid_is_nil&#40;&#38;u1,&#38;s&#41;;
                ^
6 warnings and 2 errors generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibbyL0iv2B.c -o assertlibsxa85XIj
# ===&gt; Err&#40;47&#41;: &#34;Can&#39;t link/include C library &#39;uuid&#39;, aborting.
&#34;
# ===&gt; Checking for e2fs interface in uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibV24iT6Nv.c -o assertlib3TZWNJwB -luuid
# system&#40;&#41; returned 11
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibSMbaxQCf.c -o assertlib4ssuqGax
# ===&gt; Err&#40;21&#41;: &#34;wrong result: &#39;uuid&#39;
&#34;
# ===&gt; Checking for Win interface in uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibEgS56uX4.c -o assertlibVWkATWjQ
assertlibEgS56uX4.c:2:10: fatal error: &#39;rpcdce.h&#39; file not found
#include &lt;rpcdce.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibx5F0pVzg.c -o assertlibkG_zwA6I -lrpcrt4
assertlibx5F0pVzg.c:2:10: fatal error: &#39;rpcdce.h&#39; file not found
#include &lt;rpcdce.h&gt;
         ^
1 error generated.
No interface found. Can&#39;t continue.
# ===&gt; Err&#40;61&#41;: &#34;Can&#39;t link/include C library &#39;rpcdce.h&#39;, &#39;rpcrt4&#39;, aborting.
&#34;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;17&nbsp;20:37:27&nbsp;2015</span>
    <span class="description">dwheeler [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hrm, just upgraded to the El Capitan beta, and that wiped out uuid.h. I re-installed the command-line client and now it&#39;s back, but still not finding it. :-&#40;

# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibjcutfNyH.c -o assertlib8isnsesN -luuid
#
# ===&gt; Checking for -luuid
# system&#40;&#41; returned 0
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibheMd6cNX.c -o assertlibZ5iSORry
#
# ===&gt; Checking for uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibXuOOu3YK.c -o assertlibaLheH8FL -luuid
# system&#40;&#41; returned 0
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibkQHuN59O.c -o assertlibUla4moj4
# ===&gt; Found!
#
# ===&gt; Checking for uuid.h
assertlibkQHuN59O.c:1:10: fatal error: &#39;uuid.h&#39; file not found
#include &lt;uuid.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibXJCA3Efi.c -o assertlibr1RzacDe -luuid
assertlibXJCA3Efi.c:1:10: fatal error: &#39;uuid.h&#39; file not found
#include &lt;uuid.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlib21JOoQdp.c -o assertlibiNVF1PGR
#
# ===&gt; Checking for rpc.h
assertlib21JOoQdp.c:1:10: fatal error: &#39;rpc.h&#39; file not found
#include &lt;rpc.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibOZxckKzS.c -o assertlibhJYftcN5 -luuid
assertlibOZxckKzS.c:1:10: fatal error: &#39;rpc.h&#39; file not found
#include &lt;rpc.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibAw25agwZ.c -o assertlibtpOrJfeT
#
# ===&gt; Checking for RPC interface in uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlib8iWRxRqd.c -o assertlibJyBqfeNc -luuid
assertlib8iWRxRqd.c:5:13: error: unknown type name &#39;int32_t&#39;; did you mean &#39;__int32_t&#39;?
            int32_t r,s;
            ^~~~~~~
            __int32_t
/usr/include/i386/_types.h:44:15: note: &#39;__int32_t&#39; declared here
typedef int                     __int32_t;
                                ^
assertlib8iWRxRqd.c:6:13: warning: implicit declaration of function &#39;uuid_create&#39; is invalid in C99 [-Wimplicit-function-declaration]
            uuid_create&#40;&#38;u1,&#38;s&#41;;
            ^
assertlib8iWRxRqd.c:7:13: warning: implicit declaration of function &#39;uuid_create_nil&#39; is invalid in C99 [-Wimplicit-function-declaration]
            uuid_create_nil&#40;&#38;u2,&#38;s&#41;;
            ^
assertlib8iWRxRqd.c:8:13: warning: implicit declaration of function &#39;uuid_from_string&#39; is invalid in C99 [-Wimplicit-function-declaration]
            uuid_from_string&#40;str,&#38;u1,&#38;s&#41;;
            ^
assertlib8iWRxRqd.c:9:13: warning: implicit declaration of function &#39;uuid_to_string&#39; is invalid in C99 [-Wimplicit-function-declaration]
            uuid_to_string&#40;&#38;u1,&#38;str,&#38;s&#41;;
            ^
assertlib8iWRxRqd.c:10:38: error: too many arguments to function call, expected 2, have 3
            r = uuid_compare&#40;&#38;u1,&#38;u2,&#38;s&#41;;
                ~~~~~~~~~~~~         ^~
/usr/include/uuid/uuid.h:55:1: note: &#39;uuid_compare&#39; declared here
int uuid_compare&#40;const uuid_t uu1, const uuid_t uu2&#41;;
^
assertlib8iWRxRqd.c:11:17: warning: implicit declaration of function &#39;uuid_equal&#39; is invalid in C99 [-Wimplicit-function-declaration]
            r = uuid_equal&#40;&#38;u1,&#38;u2,&#38;s&#41;;
                ^
assertlib8iWRxRqd.c:12:17: warning: implicit declaration of function &#39;uuid_is_nil&#39; is invalid in C99 [-Wimplicit-function-declaration]
            r = uuid_is_nil&#40;&#38;u1,&#38;s&#41;;
                ^
6 warnings and 2 errors generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibG061zxio.c -o assertlibYbbeAzbd
# ===&gt; Err&#40;47&#41;: &#34;Can&#39;t link/include C library &#39;uuid&#39;, aborting.
&#34;
# ===&gt; Checking for e2fs interface in uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibAKfc5mkI.c -o assertlibv1Yba_Tx -luuid
# system&#40;&#41; returned 11
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibQlz1cecI.c -o assertlib03UZ78EP
# ===&gt; Err&#40;21&#41;: &#34;wrong result: &#39;uuid&#39;
&#34;
# ===&gt; Checking for Win interface in uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlib3YJi8sa0.c -o assertlibe3epzU7r
assertlib3YJi8sa0.c:2:10: fatal error: &#39;rpcdce.h&#39; file not found
#include &lt;rpcdce.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibABel8xld.c -o assertliblbtWSvCL -lrpcrt4
assertlibABel8xld.c:2:10: fatal error: &#39;rpcdce.h&#39; file not found
#include &lt;rpcdce.h&gt;
         ^
1 error generated.
No interface found. Can&#39;t continue.
# ===&gt; Err&#40;61&#41;: &#34;Can&#39;t link/include C library &#39;rpcdce.h&#39;, &#39;rpcrt4&#39;, aborting.
&#34;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;17&nbsp;21:09:12&nbsp;2015</span>
    <span class="description">JRM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Aug 17 20:37:27 2015, DWHEELER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; # ===&gt; Checking for e2fs interface in uuid/uuid.h
&gt; # system&#40;&#41; returned 11
&gt; # ===&gt; Err&#40;21&#41;: &#34;wrong result: &#39;uuid&#39;
&gt; &#34;
</div>
Looks like a SIGSEGV. At least that&#39;s what signal 11 is here...

Best guess is the additional uuid_string_t type on OS/X, so maybe this will solve the problem against Makefile.PL:

--- Makefile.PL~        2014-12-28 08:33:02.920933847 -0500
+++ Makefile.PL 2015-08-17 20:37:28.341680792 -0400
@@ -89,7 +89,7 @@
         debug    =&gt; 1,
         function =&gt; qq/
             int i;
-            char s[37];
+            uuid_string_t s;
             uuid_t u,uu;
             uuid_generate&#40;u&#41;;
             uuid_generate_random&#40;u&#41;;

If not, well, I&#39;d just be grasping at straws.

You could also try deleting the uuid_*&#40;&#41; calls one at a time in the try_e2fs&#40;&#41; code, working from the bottom up until system&#40;&#41; returns 0.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;17&nbsp;21:11:18&nbsp;2015</span>
    <span class="description">JRM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Arrrgh.. RT hides the quoted text, so be sure to expand that on my last message to see what I was looking at.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;18&nbsp;12:30:45&nbsp;2015</span>
    <span class="description">dwheeler [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space"># /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibh9_3wxb6.c -o assertlib69iK2L9s -luuid
#
# ===&gt; Checking for -luuid
# system&#40;&#41; returned 0
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibOVUhCTnT.c -o assertlibR542oXvg
#
# ===&gt; Checking for uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibRLRyzbIz.c -o assertlib8cqduAPR -luuid
# system&#40;&#41; returned 0
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibvbc3di7f.c -o assertlibxEhZQ29e
# ===&gt; Found!
#
# ===&gt; Checking for uuid.h
assertlibvbc3di7f.c:1:10: fatal error: &#39;uuid.h&#39; file not found
#include &lt;uuid.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibEePk8Rqm.c -o assertlib9k6gra_G -luuid
assertlibEePk8Rqm.c:1:10: fatal error: &#39;uuid.h&#39; file not found
#include &lt;uuid.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibHgIJB1rD.c -o assertlibRW664jKd
#
# ===&gt; Checking for rpc.h
assertlibHgIJB1rD.c:1:10: fatal error: &#39;rpc.h&#39; file not found
#include &lt;rpc.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibhvn83ah8.c -o assertlibM1snNYjw -luuid
assertlibhvn83ah8.c:1:10: fatal error: &#39;rpc.h&#39; file not found
#include &lt;rpc.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlib3t47xZqu.c -o assertlibv74IEtGA
#
# ===&gt; Checking for RPC interface in uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibhAHsPjjW.c -o assertlibCk9OAqH1 -luuid
assertlibhAHsPjjW.c:6:13: error: unknown type name &#39;int32_t&#39;; did you mean &#39;__int32_t&#39;?
            int32_t r,s;
            ^~~~~~~
            __int32_t
/usr/include/i386/_types.h:44:15: note: &#39;__int32_t&#39; declared here
typedef int                     __int32_t;
                                ^
assertlibhAHsPjjW.c:6:23: error: redefinition of &#39;s&#39; with a different type: &#39;__int32_t&#39; &#40;aka &#39;int&#39;&#41; vs &#39;uuid_string_t&#39; &#40;aka &#39;char [37]&#39;&#41;
            int32_t r,s;
                      ^
assertlibhAHsPjjW.c:4:27: note: previous definition is here
            uuid_string_t s;
                          ^
assertlibhAHsPjjW.c:7:13: warning: implicit declaration of function &#39;uuid_create&#39; is invalid in C99 [-Wimplicit-function-declaration]
            uuid_create&#40;&#38;u1,&#38;s&#41;;
            ^
assertlibhAHsPjjW.c:8:13: warning: implicit declaration of function &#39;uuid_create_nil&#39; is invalid in C99 [-Wimplicit-function-declaration]
            uuid_create_nil&#40;&#38;u2,&#38;s&#41;;
            ^
assertlibhAHsPjjW.c:9:13: warning: implicit declaration of function &#39;uuid_from_string&#39; is invalid in C99 [-Wimplicit-function-declaration]
            uuid_from_string&#40;str,&#38;u1,&#38;s&#41;;
            ^
assertlibhAHsPjjW.c:10:13: warning: implicit declaration of function &#39;uuid_to_string&#39; is invalid in C99 [-Wimplicit-function-declaration]
            uuid_to_string&#40;&#38;u1,&#38;str,&#38;s&#41;;
            ^
assertlibhAHsPjjW.c:11:38: error: too many arguments to function call, expected 2, have 3
            r = uuid_compare&#40;&#38;u1,&#38;u2,&#38;s&#41;;
                ~~~~~~~~~~~~         ^~
/usr/include/uuid/uuid.h:55:1: note: &#39;uuid_compare&#39; declared here
int uuid_compare&#40;const uuid_t uu1, const uuid_t uu2&#41;;
^
assertlibhAHsPjjW.c:12:17: warning: implicit declaration of function &#39;uuid_equal&#39; is invalid in C99 [-Wimplicit-function-declaration]
            r = uuid_equal&#40;&#38;u1,&#38;u2,&#38;s&#41;;
                ^
assertlibhAHsPjjW.c:13:17: warning: implicit declaration of function &#39;uuid_is_nil&#39; is invalid in C99 [-Wimplicit-function-declaration]
            r = uuid_is_nil&#40;&#38;u1,&#38;s&#41;;
                ^
6 warnings and 3 errors generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibxJHxoO8e.c -o assertlib0WaaUX4l
# ===&gt; Err&#40;47&#41;: &#34;Can&#39;t link/include C library &#39;uuid&#39;, aborting.
&#34;
# ===&gt; Checking for e2fs interface in uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibAgBk9Jl9.c -o assertlibsObYprHY -luuid
# system&#40;&#41; returned 11
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibTbtolaYl.c -o assertlibooPF_muX
# ===&gt; Err&#40;21&#41;: &#34;wrong result: &#39;uuid&#39;
&#34;
# ===&gt; Checking for Win interface in uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibv1oqUzjQ.c -o assertlibAeWtNe_O
assertlibv1oqUzjQ.c:2:10: fatal error: &#39;rpcdce.h&#39; file not found
#include &lt;rpcdce.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibLW2JYi85.c -o assertlibUxWJAXKY -lrpcrt4
assertlibLW2JYi85.c:2:10: fatal error: &#39;rpcdce.h&#39; file not found
#include &lt;rpcdce.h&gt;
         ^
1 error generated.
No interface found. Can&#39;t continue.
# ===&gt; Err&#40;61&#41;: &#34;Can&#39;t link/include C library &#39;rpcdce.h&#39;, &#39;rpcrt4&#39;, aborting.
&#34;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;18&nbsp;19:38:18&nbsp;2015</span>
    <span class="description">JRM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">With that segfault still showing up this looks like an OSX problem, but it&#39;s really strange that test.pl passes with your earlier patch. Perhaps some strange interaction between Perl&#39;s system&#40;&#41; call with scalar value and the shell?

If you&#39;ll indulge me one last time though, maybe we can at least narrow down which sandbox to play in. Copy the following code block into testprog.c, then run:

  cc -luuid -o testprog testprog.c &#38;&#38; ./testprog

It should either segfault or print a cheery message. =&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">---- begin code ----
#include &lt;stdio.h&gt;
#include &lt;uuid/uuid.h&gt;
int main&#40;void&#41; {
    int i;
    char s[37];
    uuid_t u,uu;
    uuid_generate&#40;u&#41;;
    uuid_generate_random&#40;u&#41;;
    uuid_generate_time&#40;u&#41;;
    uuid_unparse&#40;u,s&#41;;
    uuid_unparse_lower&#40;u,s&#41;;
    uuid_unparse_upper&#40;u,s&#41;;
    uuid_parse&#40;s,u&#41;;
    uuid_clear&#40;u&#41;;
    uuid_copy&#40;uu,u&#41;;
    i = uuid_compare&#40;u,uu&#41;;
    i = uuid_is_null&#40;u&#41;;
    printf&#40;&#34;Success!\n&#34;&#41;;
    return 0;
}
---- end code ----

And by the way, thanks for the help. If it&#39;s not obvious, I don&#39;t have an OSX machine available so this is a little more than frustrating from my vantage point too.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;18&nbsp;20:03:21&nbsp;2015</span>
    <span class="description">dwheeler [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #104394] Unable to build on OS X Yosemite</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 18 Aug 2015 17:03:02 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-UUID [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;David E. Wheeler&#34; &lt;dwheeler [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Aug 18, 2015, at 4:38 PM, Rick Myers via RT &lt;bug-UUID@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  cc -luuid -o testprog testprog.c &#38;&#38; ./testprog
&gt; 
&gt; It should either segfault or print a cheery message. =&#41;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">    &gt; cc -luuid -o testprog testprog.c &#38;&#38; ./testprog
</div>    zsh: segmentation fault  ./testprog

By applying comments and removing comments, I reduced the error to this line:

    i = uuid_compare&#40;u,uu&#41;;

With that line commented-out, I get the cheery message.

I can also get it to run successfully with that line uncommented, but all of the uuid_unparse&#40;&#41; lines commented:

   /* uuid_unparse&#40;u,s&#41;; */
   /* uuid_unparse_lower&#40;u,s&#41;; */
   /* uuid_unparse_upper&#40;u,s&#41;; */

So it seems like it doesnt like to compare UUIDs that have been unparsed.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; And by the way, thanks for the help. If it&#39;s not obvious, I don&#39;t have an OSX machine available so this is a little more than frustrating from my vantage point too.
</div>
Hey, I get it. Thanks for poking at this, even if this async process is slow! Hope the above helps.

Best,

David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;18&nbsp;20:06:27&nbsp;2015</span>
    <span class="description">dwheeler [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #104394] Unable to build on OS X Yosemite</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 18 Aug 2015 17:06:01 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-UUID [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;David E. Wheeler&#34; &lt;dwheeler [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hrm. And it seems if I have only this line commented out:

    uuid_parse&#40;s,u&#41;;

I get a bus error instead of a sefault. Cute.

Thanks,

David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;20&nbsp;18:43:52&nbsp;2015</span>
    <span class="description">dwheeler [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve filed a bug report with Apple:

rdar://22370147
<span class="clickylink"><a target="new" rel="nofollow" href="http://openradar.appspot.com/radar?id=6069753579831296">http://openradar.appspot.com/radar?id=6069753579831296</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;10&nbsp;13:09:12&nbsp;2015</span>
    <span class="description">dwheeler [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-08-20 18:43:52, DWHEELER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve filed a bug report with Apple:
&gt; 
&gt; rdar://22370147
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://openradar.appspot.com/radar?id=6069753579831296">http://openradar.appspot.com/radar?id=6069753579831296</a></span>
</div>
Apple got back to me. They pointed out that if you omit the `-luuid` option, it works. This is because UUID is part of libc on OS X. I was able to confirm that fix with the following patch:

--- Makefile.PL.org     2015-10-10 09:56:40.000000000 -0700
+++ Makefile.PL 2015-10-10 09:57:29.000000000 -0700
@@ -84,7 +84,7 @@
     my $hdr = shift;
     print &#34;# ===&gt; Checking for e2fs interface in $hdr\n&#34;;
     eval { assert_lib&#40;
-        lib      =&gt; &#39;uuid&#39;,
+        # lib      =&gt; &#39;uuid&#39;,
         header   =&gt; $hdr,
         debug    =&gt; 1,
         function =&gt; qq/
@@ -107,7 +107,7 @@
     &#41;};
     if &#40;$@&#41; { my $L = length $@; print &#34;# ===&gt; Err&#40;$L&#41;: \&#34;$@\&#34;\n&#34;; return 0 }
     push @$defs, &#39;-DPERL__UUID__E2FS_INT&#39;;
-    push @$libs, &#39;-luuid&#39;;
+    # push @$libs, &#39;-luuid&#39;;
     print &#34;# ===&gt; Found!\n&#34;;
     print &#34;#\n&#34;;
     return 1;

However, the tests die:

$ make test
PERL_DL_NONLAZY=1 &#34;/Users/david/perl5/perlbrew/perls/perl-5.22.0/bin/perl&#34; &#34;-Iblib/lib&#34; &#34;-Iblib/arch&#34; test.pl
1..34
# Running under perl version 5.022000 for darwin
# Current time local: Sat Oct 10 10:08:54 2015
# Current time GMT:   Sat Oct 10 17:08:54 2015
# Using Test.pm version 1.26
# Header: uuid/uuid.h
# Interface: e2fs
# Buffer size: 5
# Struct size: 0
ok 1
ok 2
ok 3
make: *** [test_dynamic] Abort trap: 6

:-&#40;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;03&nbsp;17:49:43&nbsp;2016</span>
    <span class="description">wfaulk [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [rt.cpan.org #104394]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 3 Mar 2016 17:49:13 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-UUID [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> William Faulk &lt;wfaulk [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The problem is that get_struct_size&#40;&#41; in Makefile.PL is returning 0.
That sets the value for the define for PERL__UUID__STRUCT_SZ, which is
used in UUID.xs to set the value returned by UUID_BUF_SZ&#40;&#41;, which is
used to size the string buffers in the various unparse functions.

I can&#39;t figure out why get_struct_size&#40;&#41; is failing, but I changed
UUID.xs to use uuid_string_t and it compiles and the tests work now.
Here&#39;s the entire patch that seems to make the UUID distribution work
under MacOSX 10.11.3:

diff -u UUID-0.24/Makefile.PL UUID-0.24.macos/Makefile.PL
--- UUID-0.24/Makefile.PL       2014-12-28 08:33:02.000000000 -0500
+++ UUID-0.24.macos/Makefile.PL 2016-03-03 17:39:15.000000000 -0500
@@ -14,7 +14,7 @@
 # no sense wasting our time...
 print &#34;# ===&gt; Checking for -luuid\n&#34;;
 check_lib_or_exit&#40;
-    lib   =&gt; &#39;uuid&#39;,
+    #lib   =&gt; &#39;uuid&#39;,
     debug =&gt; 1,
 &#41;;
 print &#34;#\n&#34;;
@@ -24,7 +24,7 @@
 for my $try &#40;qw{ uuid/uuid.h uuid.h rpc.h }&#41; {
     print &#34;# ===&gt; Checking for $try\n&#34;;
     eval { assert_lib&#40;
-        lib      =&gt; &#39;uuid&#39;,
+        #lib      =&gt; &#39;uuid&#39;,
         header   =&gt; $try,
         debug    =&gt; 1,
     &#41;};
@@ -84,7 +84,7 @@
     my $hdr = shift;
     print &#34;# ===&gt; Checking for e2fs interface in $hdr\n&#34;;
     eval { assert_lib&#40;
-        lib      =&gt; &#39;uuid&#39;,
+        #lib      =&gt; &#39;uuid&#39;,
         header   =&gt; $hdr,
         debug    =&gt; 1,
         function =&gt; qq/
@@ -107,7 +107,7 @@
     &#41;};
     if &#40;$@&#41; { my $L = length $@; print &#34;# ===&gt; Err&#40;$L&#41;: \&#34;$@\&#34;\n&#34;; return 0 }
     push @$defs, &#39;-DPERL__UUID__E2FS_INT&#39;;
-    push @$libs, &#39;-luuid&#39;;
+    #push @$libs, &#39;-luuid&#39;;
     print &#34;# ===&gt; Found!\n&#34;;
     print &#34;#\n&#34;;
     return 1;
diff -u UUID-0.24/UUID.xs UUID-0.24.macos/UUID.xs
--- UUID-0.24/UUID.xs   2015-01-19 01:01:14.000000000 -0500
+++ UUID-0.24.macos/UUID.xs     2016-03-03 17:45:44.000000000 -0500
@@ -96,9 +96,9 @@

 void do_unparse&#40;SV *in, SV * out&#41; {
 #ifdef PERL__UUID__E2FS_INT
-    char str[UUID_BUF_SZ&#40;&#41;];
+    uuid_string_t str;
     uuid_unparse&#40;SV2UUID&#40;in&#41;, str&#41;;
-    sv_setpvn&#40;out, str, UUID_BUF_SZ&#40;&#41;-1&#41;;
+    sv_setpvn&#40;out, str, sizeof&#40;uuid_string_t&#41;-1&#41;;
 #elif PERL__UUID__RPC_INT
     char *str;
     int32_t s;
@@ -119,9 +119,9 @@

 void do_unparse_lower&#40;SV *in, SV * out&#41; {
 #ifdef PERL__UUID__E2FS_INT
-    char str[UUID_BUF_SZ&#40;&#41;];
+    uuid_string_t str;
     uuid_unparse_lower&#40;SV2UUID&#40;in&#41;, str&#41;;
-    sv_setpvn&#40;out, str, UUID_BUF_SZ&#40;&#41;-1&#41;;
+    sv_setpvn&#40;out, str, sizeof&#40;uuid_string_t&#41;-1&#41;;
 #elif PERL__UUID__RPC_INT
     char *p, *str;
     int32_t s;
@@ -145,9 +145,9 @@

 void do_unparse_upper&#40;SV *in, SV * out&#41; {
 #ifdef PERL__UUID__E2FS_INT
-    char str[UUID_BUF_SZ&#40;&#41;];
+    uuid_string_t str;
     uuid_unparse_upper&#40;SV2UUID&#40;in&#41;, str&#41;;
-    sv_setpvn&#40;out, str, UUID_BUF_SZ&#40;&#41;-1&#41;;
+    sv_setpvn&#40;out, str, sizeof&#40;uuid_string_t&#41;-1&#41;;
 #elif PERL__UUID__RPC_INT
     char *p, *str;
     int32_t s;
@@ -271,10 +271,10 @@
 SV* do_uuid&#40;&#41; {
     UUID_T uuid;
 #ifdef PERL__UUID__E2FS_INT
-    char str[UUID_BUF_SZ&#40;&#41;];
+    uuid_string_t str;
     uuid_generate&#40;uuid&#41;;
     uuid_unparse&#40;uuid, str&#41;;
-    return newSVpvn&#40;str, UUID_BUF_SZ&#40;&#41;-1&#41;;
+    return newSVpvn&#40;str, sizeof&#40;uuid_string_t&#41;-1&#41;;
 #elif PERL__UUID__RPC_INT
     SV *sv;
     char *str;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;03&nbsp;18:02:15&nbsp;2016</span>
    <span class="description">dwheeler [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I can confirm that this patch fixes it for me, too. Though I couldn&#39;t get it to apply, so made the changes manually and generated a new patch, attached.

Not sure how this would translate for a general solution, though.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> uuid-osx.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -Naur UUID-0.24/Makefile.PL UUID-0.24.osx/Makefile.PL
--- UUID-0.24/Makefile.PL	2014-12-28 05:33:02.000000000 -0800
+++ UUID-0.24.osx/Makefile.PL	2016-03-03 14:58:43.000000000 -0800
@@ -14,7 +14,7 @@
 # no sense wasting our time...
 print &#34;# ===&gt; Checking for -luuid\n&#34;;
 check_lib_or_exit&#40;
-    lib   =&gt; &#39;uuid&#39;,
+    # lib   =&gt; &#39;uuid&#39;,
     debug =&gt; 1,
 &#41;;
 print &#34;#\n&#34;;
@@ -24,7 +24,7 @@
 for my $try &#40;qw{ uuid/uuid.h uuid.h rpc.h }&#41; {
     print &#34;# ===&gt; Checking for $try\n&#34;;
     eval { assert_lib&#40;
-        lib      =&gt; &#39;uuid&#39;,
+        # lib      =&gt; &#39;uuid&#39;,
         header   =&gt; $try,
         debug    =&gt; 1,
     &#41;};
@@ -84,7 +84,7 @@
     my $hdr = shift;
     print &#34;# ===&gt; Checking for e2fs interface in $hdr\n&#34;;
     eval { assert_lib&#40;
-        lib      =&gt; &#39;uuid&#39;,
+        # lib      =&gt; &#39;uuid&#39;,
         header   =&gt; $hdr,
         debug    =&gt; 1,
         function =&gt; qq/
@@ -107,7 +107,7 @@
     &#41;};
     if &#40;$@&#41; { my $L = length $@; print &#34;# ===&gt; Err&#40;$L&#41;: \&#34;$@\&#34;\n&#34;; return 0 }
     push @$defs, &#39;-DPERL__UUID__E2FS_INT&#39;;
-    push @$libs, &#39;-luuid&#39;;
+    # push @$libs, &#39;-luuid&#39;;
     print &#34;# ===&gt; Found!\n&#34;;
     print &#34;#\n&#34;;
     return 1;
diff -Naur UUID-0.24/UUID.xs UUID-0.24.osx/UUID.xs
--- UUID-0.24/UUID.xs	2015-01-18 22:01:14.000000000 -0800
+++ UUID-0.24.osx/UUID.xs	2016-03-03 14:56:22.000000000 -0800
@@ -96,9 +96,9 @@
 
 void do_unparse&#40;SV *in, SV * out&#41; {
 #ifdef PERL__UUID__E2FS_INT
-    char str[UUID_BUF_SZ&#40;&#41;];
+    uuid_string_t str;
     uuid_unparse&#40;SV2UUID&#40;in&#41;, str&#41;;
-    sv_setpvn&#40;out, str, UUID_BUF_SZ&#40;&#41;-1&#41;;
+    sv_setpvn&#40;out, str, sizeof&#40;uuid_string_t&#41;-1&#41;;
 #elif PERL__UUID__RPC_INT
     char *str;
     int32_t s;
@@ -119,9 +119,9 @@
 
 void do_unparse_lower&#40;SV *in, SV * out&#41; {
 #ifdef PERL__UUID__E2FS_INT
-    char str[UUID_BUF_SZ&#40;&#41;];
+    uuid_string_t str;
     uuid_unparse_lower&#40;SV2UUID&#40;in&#41;, str&#41;;
-    sv_setpvn&#40;out, str, UUID_BUF_SZ&#40;&#41;-1&#41;;
+    sv_setpvn&#40;out, str, sizeof&#40;uuid_string_t&#41;-1&#41;;
 #elif PERL__UUID__RPC_INT
     char *p, *str;
     int32_t s;
@@ -145,9 +145,9 @@
 
 void do_unparse_upper&#40;SV *in, SV * out&#41; {
 #ifdef PERL__UUID__E2FS_INT
-    char str[UUID_BUF_SZ&#40;&#41;];
+    uuid_string_t str;
     uuid_unparse_upper&#40;SV2UUID&#40;in&#41;, str&#41;;
-    sv_setpvn&#40;out, str, UUID_BUF_SZ&#40;&#41;-1&#41;;
+    sv_setpvn&#40;out, str, sizeof&#40;uuid_string_t&#41;-1&#41;;
 #elif PERL__UUID__RPC_INT
     char *p, *str;
     int32_t s;
@@ -271,10 +271,10 @@
 SV* do_uuid&#40;&#41; {
     UUID_T uuid;
 #ifdef PERL__UUID__E2FS_INT
-    char str[UUID_BUF_SZ&#40;&#41;];
+    uuid_string_t str;
     uuid_generate&#40;uuid&#41;;
     uuid_unparse&#40;uuid, str&#41;;
-    return newSVpvn&#40;str, UUID_BUF_SZ&#40;&#41;-1&#41;;
+    return newSVpvn&#40;str, sizeof&#40;uuid_string_t&#41;-1&#41;;
 #elif PERL__UUID__RPC_INT
     SV *sv;
     char *str;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;04&nbsp;10:24:34&nbsp;2016</span>
    <span class="description">wfaulk [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #104394]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 4 Mar 2016 10:24:04 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-UUID [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> William Faulk &lt;wfaulk [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry about the patch.  I copied-and-pasted when I should have attached.

I think a general solution might be to use uuid_string_t, typedef-ing
it to the current thing if it doesn&#39;t already exist.  MacOS #defines
_UUID_STRING_T.

Of course, that assumes that uuid_string_t is always going to be
implemented as a string by OSes, since it&#39;s being treated as such.
The MacOS man page for uuid_unparse explicitly says &#34;uuid_string_t
&#40;37-byte string including tailing &#39;\0&#39;&#41;&#34;, though.

I&#39;m not sure that the current sizing calculation really makes sense,
to be honest:

/* 2 hex digits per byte + 4 separators + 1 trailing null */
#define UUID_BUF_SZ&#40;&#41; &#40;2 * PERL__UUID__STRUCT_SZ + 4 + 1&#41;

PERL__UUID__STRUCT_SZ is sizeof&#40;uuid_t&#41;.  Why are we basing the size
of the string representation on the size of an opaque binary
representation?  We&#39;re assuming that uuid_t is only ever going to
contain the raw 128-bit value, but is that a valid assumption? In
addition, is it ever going to be anything other than the space to hold
a 36-character string?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;05&nbsp;07:07:00&nbsp;2016</span>
    <span class="description">JRM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Mar 03 18:02:15 2016, DWHEELER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Not sure how this would translate for a general solution, though.
</div>
Actually, it translates very well.

The attached patch was done on FreeBSD, but it had a very similar problem -- the uuid code is within libc. I had to link explicitly with -lc instead of -luuid, so on the basis of the latest XS changes I&#39;m assuming OSX needs the same thing.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> makefile.diff</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- Makefile.PL~	2014-12-28 08:33:02.000000000 -0500
+++ Makefile.PL	2016-03-05 06:05:31.000000000 -0500
@@ -12,11 +12,19 @@
 
 # if the compiler can&#39;t find it,
 # no sense wasting our time...
-print &#34;# ===&gt; Checking for -luuid\n&#34;;
-check_lib_or_exit&#40;
-    lib   =&gt; &#39;uuid&#39;,
-    debug =&gt; 1,
-&#41;;
+my $link_lib;
+for my $try &#40;qw{ rpcrt4 uuid c }&#41; {
+    print &#34;# ===&gt; Checking for -l$try\n&#34;;
+    if &#40; check_lib&#40; lib =&gt; $try, debug =&gt; 1 &#41; &#41; {
+        $link_lib = $try;
+        last;
+    }
+}
+unless &#40; $link_lib &#41; {
+    print &#34;# ===&gt; Not found! Can&#39;t continue\n&#34;;
+    exit 0;
+}
+print &#34;# ===&gt; Linking with -l$link_lib\n&#34;;
 print &#34;#\n&#34;;
 
 
@@ -24,7 +32,7 @@
 for my $try &#40;qw{ uuid/uuid.h uuid.h rpc.h }&#41; {
     print &#34;# ===&gt; Checking for $try\n&#34;;
     eval { assert_lib&#40;
-        lib      =&gt; &#39;uuid&#39;,
+        lib      =&gt; $link_lib,
         header   =&gt; $try,
         debug    =&gt; 1,
     &#41;};
@@ -55,7 +63,7 @@
     my $hdr = shift;
     print &#34;# ===&gt; Checking for RPC interface in $hdr\n&#34;;
     eval { assert_lib&#40;
-        lib      =&gt; &#39;uuid&#39;,
+        lib      =&gt; $link_lib,
         header   =&gt; $hdr,
         debug    =&gt; 1,
         function =&gt; qq/
@@ -74,7 +82,7 @@
     &#41;};
     if &#40;$@&#41; { my $L = length $@; print &#34;# ===&gt; Err&#40;$L&#41;: \&#34;$@\&#34;\n&#34;; return 0 }
     push @$defs, &#39;-DPERL__UUID__RPC_INT&#39;;
-    push @$libs, &#39;-luuid&#39;;
+    push @$libs, &#34;-l$link_lib&#34;,
     print &#34;# ===&gt; Found!\n&#34;;
     print &#34;#\n&#34;;
     return 1;
@@ -84,7 +92,7 @@
     my $hdr = shift;
     print &#34;# ===&gt; Checking for e2fs interface in $hdr\n&#34;;
     eval { assert_lib&#40;
-        lib      =&gt; &#39;uuid&#39;,
+        lib      =&gt; $link_lib,
         header   =&gt; $hdr,
         debug    =&gt; 1,
         function =&gt; qq/
@@ -107,7 +115,7 @@
     &#41;};
     if &#40;$@&#41; { my $L = length $@; print &#34;# ===&gt; Err&#40;$L&#41;: \&#34;$@\&#34;\n&#34;; return 0 }
     push @$defs, &#39;-DPERL__UUID__E2FS_INT&#39;;
-    push @$libs, &#39;-luuid&#39;;
+    push @$libs, &#34;-l$link_lib&#34;,
     print &#34;# ===&gt; Found!\n&#34;;
     print &#34;#\n&#34;;
     return 1;
@@ -117,7 +125,7 @@
     my $hdr = shift;
     print &#34;# ===&gt; Checking for Win interface in $hdr\n&#34;;
     eval { assert_lib&#40;
-        lib      =&gt; &#39;rpcrt4&#39;,
+        lib      =&gt; $link_lib,
         header   =&gt; [ $hdr, &#39;rpcdce.h&#39; ],
         debug    =&gt; 1,
         function =&gt; qq/
@@ -139,7 +147,7 @@
     &#41;};
     if &#40;$@&#41; { my $L = length $@; print &#34;# ===&gt; Err&#40;$L&#41;: \&#34;$@\&#34;\n&#34;; return 0 }
     push @$defs, &#39;-DPERL__UUID__WIN_INT&#39;;
-    push @$libs, &#39;-lrpcrt4&#39;;
+    push @$libs, &#34;-l$link_lib&#34;;
     print &#34;# ===&gt; Found!\n&#34;;
     print &#34;#\n&#34;;
     return 1;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;05&nbsp;15:06:18&nbsp;2016</span>
    <span class="description">JRM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Mar 04 10:24:34 2016, wfaulk@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sorry about the patch.  I copied-and-pasted when I should have attached.
&gt; 
&gt; I think a general solution might be to use uuid_string_t, typedef-ing
&gt; it to the current thing if it doesn&#39;t already exist.  MacOS #defines
&gt; _UUID_STRING_T.
&gt; 
&gt; Of course, that assumes that uuid_string_t is always going to be
&gt; implemented as a string by OSes, since it&#39;s being treated as such.
&gt; The MacOS man page for uuid_unparse explicitly says &#34;uuid_string_t
&gt; &#40;37-byte string including tailing &#39;\0&#39;&#41;&#34;, though.
&gt;
</div>
Currently, Apple is the only vendor defining uuid_string_t. Everywhere
else the prototypes are for either char* or char**. And my fear is that
eventually others will start jumping on the uuid_string_t bandwagon also,
and naturally all have their own way of doing it. So, worst case, I think
we&#39;d see the two existing unix interfaces turning into 4 or 8 as we deal
with the variations.

I think I like just leaving it the way it is since that uuid_string_t is
ultimately just a char[37] anyway.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I&#39;m not sure that the current sizing calculation really makes sense,
&gt; to be honest:
&gt; 
&gt; /* 2 hex digits per byte + 4 separators + 1 trailing null */
&gt; #define UUID_BUF_SZ&#40;&#41; &#40;2 * PERL__UUID__STRUCT_SZ + 4 + 1&#41;
&gt; 
&gt; PERL__UUID__STRUCT_SZ is sizeof&#40;uuid_t&#41;.  Why are we basing the size
&gt; of the string representation on the size of an opaque binary
&gt; representation?  We&#39;re assuming that uuid_t is only ever going to
&gt; contain the raw 128-bit value, but is that a valid assumption? In
&gt; addition, is it ever going to be anything other than the space to hold
&gt; a 36-character string?
&gt;
</div>
Honestly, I think the only reason that UUID_BUF_SZ is defined at all
is because it bothered me having all the hardcoded 37&#39;s in the code.
And since sizeof&#40;uuid_t&#41; is the only really universal constant, that&#39;s
how it came to be calculated like that. It could easily be moved to
Makefile.PL and passed as a variable instead, or just simply defined
as 37.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;11&nbsp;16:24:54&nbsp;2016</span>
    <span class="description">JRM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This has been released to CPAN as version 0.24_02, along with a few other minor changes. So far there&#39;s been one successful install on OS X &#40;0.24_01&#41; so I&#39;ll wait to close this until we see more.

Thanks to both of you though for pointing me in the right direction. And sorry for the long delay. I totally missed the update back in Oct.&#40;?&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;11&nbsp;16:24:56&nbsp;2016</span>
    <span class="description">JRM [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;11&nbsp;16:24:57&nbsp;2016</span>
    <span class="description">JRM [...] cpan.org -  Fixed in 0.24_02 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;11&nbsp;22:41:24&nbsp;2016</span>
    <span class="description">dwheeler [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #104394] Unable to build on OS X Yosemite</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 11 Mar 2016 19:41:05 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-UUID [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;David E. Wheeler&#34; &lt;dwheeler [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mar 11, 2016, at 1:24 PM, Rick Myers via RT &lt;bug-UUID@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This has been released to CPAN as version 0.24_02, along with a few other minor changes. So far there&#39;s been one successful install on OS X &#40;0.24_01&#41; so I&#39;ll wait to close this until we see more.
&gt; 
&gt; Thanks to both of you though for pointing me in the right direction. And sorry for the long delay. I totally missed the update back in Oct.&#40;?&#41;
</div>
Sadly did not work for me:

cpan[2]&gt; install J/JR/JRM/UUID-0.24_02.tar.gz
Fetching with LWP:
<span class="clickylink"><a target="new" rel="nofollow" href="http://cpan.metacpan.org/authors/id/J/JR/JRM/UUID-0.24_02.tar.gz">http://cpan.metacpan.org/authors/id/J/JR/JRM/UUID-0.24_02.tar.gz</a></span>
CPAN: Digest::SHA loaded ok &#40;v5.95&#41;
Warning &#40;usually harmless&#41;: &#39;YAML&#39; not installed, cannot parse &#39;/Users/david/.cpan/FTPstats.yml&#39;
Fetching with LWP:
<span class="clickylink"><a target="new" rel="nofollow" href="http://cpan.metacpan.org/authors/id/J/JR/JRM/CHECKSUMS">http://cpan.metacpan.org/authors/id/J/JR/JRM/CHECKSUMS</a></span>
Checksum for /Users/david/.cpan/sources/authors/id/J/JR/JRM/UUID-0.24_02.tar.gz ok
Scanning cache /Users/david/.cpan/build for sizes
....................--------------------------------------------------------DONE
CPAN: Archive::Tar loaded ok &#40;v2.04&#41;
x UUID-0.24_02/
x UUID-0.24_02/Makefile.PL
x UUID-0.24_02/META.json
x UUID-0.24_02/Changes
x UUID-0.24_02/UUID.pm
x UUID-0.24_02/README
x UUID-0.24_02/MANIFEST
x UUID-0.24_02/t/
x UUID-0.24_02/t/test.t
x UUID-0.24_02/META.yml
x UUID-0.24_02/UUID.xs
x UUID-0.24_02/License
CPAN: File::Temp loaded ok &#40;v0.2304&#41;
&#39;YAML&#39; not installed, will not store persistent state
CPAN: CPAN::Meta::Requirements loaded ok &#40;v2.132&#41;
CPAN: Parse::CPAN::Meta loaded ok &#40;v1.4414&#41;
CPAN: CPAN::Meta loaded ok &#40;v2.150001&#41;
CPAN: Module::CoreList loaded ok &#40;v5.20150520&#41;
Configuring J/JR/JRM/UUID-0.24_02.tar.gz with Makefile.PL
CPAN::Reporter not installed.  No reports will be sent.
#
# ===&gt; Checking for -lrpcrt4
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibdXl8DpD0.c -o assertlibpoeFc0q1 -lrpcrt4
ld: library not found for -lrpcrt4
clang: error: linker command failed with exit code 1 &#40;use -v to see invocation&#41;
# ===&gt; Checking for -luuid
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlib_7in6xSn.c -o assertlibP7YUX35n -luuid
# system&#40;&#41; returned 0
# ===&gt; Linking with -luuid
#
# ===&gt; Checking for uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibVdoaqa62.c -o assertlibNifNdno2
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlib8C9FFw86.c -o assertlibiYLva3AP -luuid
# system&#40;&#41; returned 0
# ===&gt; Found!
#
# ===&gt; Checking for uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlib5jktib68.c -o assertlibVoPixtB8
assertlib5jktib68.c:1:10: fatal error: &#39;uuid.h&#39; file not found
#include &lt;uuid.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibEItpQtAI.c -o assertlibGzz0GT9h -luuid
assertlibEItpQtAI.c:1:10: fatal error: &#39;uuid.h&#39; file not found
#include &lt;uuid.h&gt;
         ^
1 error generated.
#
# ===&gt; Checking for rpc.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibRL9CD8gZ.c -o assertlib2cwy4kzU
assertlibRL9CD8gZ.c:1:10: fatal error: &#39;rpc.h&#39; file not found
#include &lt;rpc.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibp2nRt0nd.c -o assertlib7UHgT1qg -luuid
assertlibp2nRt0nd.c:1:10: fatal error: &#39;rpc.h&#39; file not found
#include &lt;rpc.h&gt;
         ^
1 error generated.
#
# ===&gt; Checking for RPC interface in uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibbsOQbeVF.c -o assertlibkIWeKRm2
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibCkFfOy9L.c -o assertlibaHtLnqA0 -luuid
assertlibCkFfOy9L.c:5:13: error: unknown type name &#39;int32_t&#39;; did you mean &#39;__int32_t&#39;?
            int32_t r,s;
            ^~~~~~~
            __int32_t
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/usr/include/i386/_types.h:44:15: note: 
      &#39;__int32_t&#39; declared here
typedef int                     __int32_t;
                                ^
assertlibCkFfOy9L.c:7:13: warning: implicit declaration of function &#39;uuid_create&#39; is
      invalid in C99 [-Wimplicit-function-declaration]
            uuid_create&#40;&#38;u1,&#38;s&#41;;
            ^
assertlibCkFfOy9L.c:8:13: warning: implicit declaration of function &#39;uuid_create_nil&#39; is
      invalid in C99 [-Wimplicit-function-declaration]
            uuid_create_nil&#40;&#38;u2,&#38;s&#41;;
            ^
assertlibCkFfOy9L.c:9:13: warning: implicit declaration of function &#39;uuid_from_string&#39; is
      invalid in C99 [-Wimplicit-function-declaration]
            uuid_from_string&#40;str,&#38;u1,&#38;s&#41;;
            ^
assertlibCkFfOy9L.c:10:13: warning: implicit declaration of function &#39;uuid_to_string&#39; is
      invalid in C99 [-Wimplicit-function-declaration]
            uuid_to_string&#40;&#38;u1,&#38;str,&#38;s&#41;;
            ^
assertlibCkFfOy9L.c:11:38: error: too many arguments to function call, expected 2, have 3
            r = uuid_compare&#40;&#38;u1,&#38;u2,&#38;s&#41;;
                ~~~~~~~~~~~~         ^~
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/usr/include/uuid/uuid.h:55:1: note: 
      &#39;uuid_compare&#39; declared here
int uuid_compare&#40;const uuid_t uu1, const uuid_t uu2&#41;;
^
assertlibCkFfOy9L.c:12:17: warning: implicit declaration of function &#39;uuid_equal&#39; is
      invalid in C99 [-Wimplicit-function-declaration]
            r = uuid_equal&#40;&#38;u1,&#38;u2,&#38;s&#41;;
                ^
assertlibCkFfOy9L.c:13:17: warning: implicit declaration of function &#39;uuid_is_nil&#39; is
      invalid in C99 [-Wimplicit-function-declaration]
            r = uuid_is_nil&#40;&#38;u1,&#38;s&#41;;
                ^
6 warnings and 2 errors generated.
# ===&gt; Err&#40;47&#41;: &#34;Can&#39;t link/include C library &#39;uuid&#39;, aborting.
&#34;
# ===&gt; Checking for e2fs interface in uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibRgCF1FsV.c -o assertlibwtzgqOFq
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlib_4zFaMyj.c -o assertlibIs62Pzvo -luuid
# system&#40;&#41; returned 11
# ===&gt; Err&#40;21&#41;: &#34;wrong result: &#39;uuid&#39;
&#34;
# ===&gt; Checking for Win interface in uuid/uuid.h
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibQE2Tmtzd.c -o assertlibKLRHpSmc
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibRXfMdyvN.c -o assertlibeO3Dp0wn
assertlibRXfMdyvN.c:2:10: fatal error: &#39;rpcdce.h&#39; file not found
#include &lt;rpcdce.h&gt;
         ^
1 error generated.
# /usr/bin/cc -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -fstack-protector-strong -L/usr/local/lib assertlibYQj25180.c -o assertlibqTtsNJxW -luuid
assertlibYQj25180.c:2:10: fatal error: &#39;rpcdce.h&#39; file not found
#include &lt;rpcdce.h&gt;
         ^
1 error generated.
# ===&gt; Err&#40;59&#41;: &#34;Can&#39;t link/include C library &#39;rpcdce.h&#39;, &#39;uuid&#39;, aborting.
&#34;
No interface found. Can&#39;t continue.
Warning: No success on command[/Users/david/perl5/perlbrew/perls/perl-5.22.0/bin/perl Makefile.PL]
  JRM/UUID-0.24_02.tar.gz
  /Users/david/perl5/perlbrew/perls/perl-5.22.0/bin/perl Makefile.PL -- NOT OK
Failed during this command:
 JRM/UUID-0.24_02.tar.gz                      : writemakefile NO &#39;/Users/david/perl5/perlbrew/perls/perl-5.22.0/bin/perl Makefile.PL&#39; returned status 512

cpan[3]&gt; 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;13&nbsp;18:49:31&nbsp;2016</span>
    <span class="description">JRM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes, it&#39;s pretty bothersome that it links and runs as long as there aren&#39;t any uuid function calls. I&#39;ve released 0.24_03 now which delays the link flag decision until later when it tries to run something more substantial.

Since the build is possibly a lot more verbose though, I&#39;ve also turned off all the debug parameters. To turn them back on...

  perl Makefile.PL DEBUG=1

Thanks!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;13&nbsp;18:49:37&nbsp;2016</span>
    <span class="description">JRM [...] cpan.org -  Fixed in 0.24_03 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;13&nbsp;18:49:38&nbsp;2016</span>
    <span class="description">JRM [...] cpan.org -  Fixed in 0.24_02 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;13&nbsp;23:17:48&nbsp;2016</span>
    <span class="description">dwheeler [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #104394] Unable to build on OS X Yosemite</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 13 Mar 2016 20:17:40 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-UUID [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;David E. Wheeler&#34; &lt;dwheeler [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">There we go!

Generating a Unix-style Makefile
Writing Makefile for UUID
Writing MYMETA.yml and MYMETA.json
  JRM/UUID-0.24_03.tar.gz
  /Users/david/perl5/perlbrew/perls/perl-5.22.0/bin/perl Makefile.PL -- OK
Running make for J/JR/JRM/UUID-0.24_03.tar.gz
cp UUID.pm blib/lib/UUID.pm
Running Mkbootstrap for UUID &#40;&#41;
chmod 644 &#34;UUID.bs&#34;
&#34;/Users/david/perl5/perlbrew/perls/perl-5.22.0/bin/perl&#34; &#34;/Users/david/perl5/perlbrew/perls/perl-5.22.0/lib/5.22.0/ExtUtils/xsubpp&#34;  -typemap &#34;/Users/david/perl5/perlbrew/perls/perl-5.22.0/lib/5.22.0/ExtUtils/typemap&#34;  UUID.xs &gt; UUID.xsc &#38;&#38; mv UUID.xsc UUID.c
cc -c   -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -O3   -DVERSION=\&#34;0.24_03\&#34; -DXS_VERSION=\&#34;0.24_03\&#34;  &#34;-I/Users/david/perl5/perlbrew/perls/perl-5.22.0/lib/5.22.0/darwin-2level/CORE&#34;  -DPERL__UUID__E2FS_INT -DPERL__UUID__STRUCT_SZ=16 -DPERL__UUID__UUID_UUID_H UUID.c
rm -f blib/arch/auto/UUID/UUID.bundle
env MACOSX_DEPLOYMENT_TARGET=10.3 cc  -bundle -undefined dynamic_lookup -L/usr/local/lib -fstack-protector-strong UUID.o  -o blib/arch/auto/UUID/UUID.bundle    \
           -lc          \
          
ld: warning: object file &#40;UUID.o&#41; was built for newer OSX version &#40;10.11&#41; than being linked &#40;10.4&#41;
chmod 755 blib/arch/auto/UUID/UUID.bundle
&#34;/Users/david/perl5/perlbrew/perls/perl-5.22.0/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- UUID.bs blib/arch/auto/UUID/UUID.bs 644
Manifying 1 pod document
  JRM/UUID-0.24_03.tar.gz
  /usr/bin/make -- OK
Running make test
Running Mkbootstrap for UUID &#40;&#41;
chmod 644 &#34;UUID.bs&#34;
PERL_DL_NONLAZY=1 &#34;/Users/david/perl5/perlbrew/perls/perl-5.22.0/bin/perl&#34; &#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
t/test.t .. ok     
All tests successful.
Files=1, Tests=34,  0 wallclock secs &#40; 0.02 usr  0.01 sys +  0.02 cusr  0.00 csys =  0.05 CPU&#41;
Result: PASS
  JRM/UUID-0.24_03.tar.gz
  /usr/bin/make test -- OK
Running make install
Prepending /Users/david/.cpan/build/UUID-0.24_03-Gjoa3J/blib/arch /Users/david/.cpan/build/UUID-0.24_03-Gjoa3J/blib/lib to PERL5LIB for &#39;install&#39;
Manifying 1 pod document
Files found in blib/arch: installing files in blib/lib into architecture dependent library tree
Installing /Users/david/perl5/perlbrew/perls/perl-5.22.0/lib/site_perl/5.22.0/darwin-2level/auto/UUID/UUID.bundle
Installing /Users/david/perl5/perlbrew/perls/perl-5.22.0/lib/site_perl/5.22.0/darwin-2level/UUID.pm
Installing /Users/david/perl5/perlbrew/perls/perl-5.22.0/man/man3/UUID.3
Appending installation info to /Users/david/perl5/perlbrew/perls/perl-5.22.0/lib/5.22.0/darwin-2level/perllocal.pod
  JRM/UUID-0.24_03.tar.gz
  make install UNINST=1  OK


Thanks,

David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;14&nbsp;10:23:35&nbsp;2016</span>
    <span class="description">JRM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The uploaded file

    UUID-0.25.tar.gz

has entered CPAN as

  file: $CPAN/authors/id/J/JR/JRM/UUID-0.25.tar.gz
  size: 14383 bytes
   md5: d9f615fda1b61668f5e5ba1f4f87d21f
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;14&nbsp;10:23:37&nbsp;2016</span>
    <span class="description">JRM [...] cpan.org -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
