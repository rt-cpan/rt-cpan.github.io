<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #71927 for DBIx-Class: DBIx::Class::Schema::txn_do&#40;&#41;: Invalid wizard object</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #71927 for DBIx-Class: DBIx::Class::Schema::txn_do&#40;&#41;: Invalid wizard object</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBIx-Class/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBIx-Class/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBIx-Class/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBIx-Class/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBIx-Class">DBIx-Class CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">71927</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBIx-Class/Active/">DBIx-Class</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
w.phillip.moore@gmail.com
(no email address)

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-10410-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.08195    </td>
  </tr>
  <tr id="CF-10411-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;25&nbsp;14:59:02&nbsp;2011</span>
    <span class="description">w.phillip.moore [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> DBIx::Class::Schema::txn_do&#40;&#41;: Invalid wizard object</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">NOTE: I get the exact same errors for 5.10.1, 5.12.4, and 5.14.2, on both 32 and 64 bit 
builds on RHEL 5, Solaris 10 and AIX 6.  

Building the latest DBIx-Class distro, against the latest CPAN dependencies, doesn&#39;t pass the 
test suite.  3 of the tests fail with error similar to this one:

DBIx::Class::Schema::txn_do&#40;&#41;: Invalid wizard object at /var/tmp/perl5-DBIx-Class-0.08195-
build001-build/x86-64.rhel.5/5\
.14/source/DBIx-Class-0.08195/blib/lib/DBIx/Class/ResultSet.pm line 2288. at t/52leaks.t 
line 152
# Tests were run but no plan was declared and done_testing&#40;&#41; was not seen.
t/52leaks.t ......................................
Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
All 3 subtests passed

Additional debugging details can be found in the attachments, and since I can reproduce this 
at will, I am happy to provide additional information.

Also, I can reproduce this with either Variable::Magic 0.46 or 0.45.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> debug_attempt.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[efsops@shou18lesx4vm85 DBIx-Class-0.08195]$ perl -Mblib t/52leaks.t
ok 1 - use DBICTest;
ok 2 - we are connected
ok 3 - row from db
DBIx::Class::Schema::txn_do&#40;&#41;: Invalid wizard object at /var/tmp/perl5-DBIx-Class-0.08195-build001-build/x86-64.rhel.5/5.14/source/DBIx-Class-0.08195/blib/lib/DBIx/Class/ResultSet.pm line 2288. at t/52leaks.t line 152
# Tests were run but no plan was declared and done_testing&#40;&#41; was not seen.
[efsops@shou18lesx4vm85 DBIx-Class-0.08195]$ perl -Mblib -d t/52leaks.t

Loading DB routines from perl5db.pl version 1.33
Editor support available.

Enter h or `h h&#39; for help, or `man perldebug&#39; for more help.

main::&#40;t/52leaks.t:4&#41;:  } if &#40;$ENV{DBICTEST_IN_PERSISTENT_ENV}&#41;;
  DB&lt;1&gt; c
ok 1 - use DBICTest;
1 at /efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/lib/perl5/perl5db.pl line 7799.
# Tests were run but no plan was declared and done_testing&#40;&#41; was not seen.
Debugged program terminated.  Use q to quit or R to restart,
  use o inhibit_exit to avoid stopping after program termination,
  h q, h R or h o to get additional info.
  DB&lt;1&gt; q


[efsops@shou18lesx4vm85 DBIx-Class-0.08195]$ perl -MCarp::Always -Mblib
t/52leaks.t
ok 1 - use DBICTest;
ok 2 - we are connected
ok 3 - row from db
DBIx::Class::Schema::txn_do&#40;&#41;: Invalid wizard object at
/var/tmp/perl5-DBIx-Class-0.08195-build001-build/x86-64.rhel.5/5.14/source/DBIx-Class-0.08195/blib/lib/DBIx/Class/ResultSet.pm
line 2288
        DBIx::Class::ResultSet::pager&#40;&#39;DBICTest::BaseResultSet=HASH&#40;0xbc42f08&#41;&#39;&#41;
called at t/52leaks.t line 147
        main::__ANON__&#40;&#41; called at
/var/tmp/perl5-DBIx-Class-0.08195-build001-build/x86-64.rhel.5/5.14/source/DBIx-Class-0.08195/blib/lib/DBIx/Class/Storage.pm
line 211
        DBIx::Class::Storage::__ANON__&#40;&#41; called at
/efs/dist/perl5/Try-Tiny/0.11/.exec/x86-64.rhel.5/5.14/lib/perl5/Try/Tiny.pm
line 71
        eval {...} called at
/efs/dist/perl5/Try-Tiny/0.11/.exec/x86-64.rhel.5/5.14/lib/perl5/Try/Tiny.pm
line 67
        Try::Tiny::try&#40;&#39;CODE&#40;0xbbf9fe8&#41;&#39;, &#39;Try::Tiny::Catch=REF&#40;0xbc36d30&#41;&#39;,
&#39;Try::Tiny::Finally=REF&#40;0xb675d88&#41;&#39;&#41; called at
/var/tmp/perl5-DBIx-Class-0.08195-build001-build/x86-64.rhel.5/5.14/source/DBIx-Class-0.08195/blib/lib/DBIx/Class/Storage.pm
line 258
        DBIx::Class::Storage::txn_do&#40;undef, undef&#41; called at
/var/tmp/perl5-DBIx-Class-0.08195-build001-build/x86-64.rhel.5/5.14/source/DBIx-Class-0.08195/blib/lib/DBIx/Class/Storage/DBI.pm
line 806
        DBIx::Class::Storage::DBI::txn_do&#40;&#39;DBIx::Class::Storage::DBI::SQLite=HASH&#40;0xa8e83f0&#41;&#39;,
&#39;CODE&#40;0xa8dec80&#41;&#39;&#41; called at
/var/tmp/perl5-DBIx-Class-0.08195-build001-build/x86-64.rhel.5/5.14/source/DBIx-Class-0.08195/blib/lib/DBIx/Class/Schema.pm
line 662
        DBIx::Class::Schema::txn_do&#40;&#39;DBICTest::Schema=HASH&#40;0xa8e84f8&#41;&#39;,
&#39;CODE&#40;0xa8dec80&#41;&#39;&#41; called at t/52leaks.t line 152 at t/52leaks.t line 152
# Tests were run but no plan was declared and done_testing&#40;&#41; was not seen.

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> perl-V.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Summary of my perl5 &#40;revision 5 version 14 subversion 2&#41; configuration:
   
  Platform:
    osname=linux, osvers=2.6.18-194.32.1.el5, archname=x86_64-linux-thread-multi
    uname=&#39;linux shou18lesx4vm85 2.6.18-194.32.1.el5 #1 smp mon dec 20 10:52:42 est 2010 x86_64 x86_64 x86_64 gnulinux &#39;
    config_args=&#39;-de -Dcc=gcc -Duseshrplib -Dusethreads -Dusesitecustomize -Dnoextensions=BerkeleyDB,GDBM_File -Dlocincpth=/usr/include -Dloclibpth=/usr/lib -Dprefix=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5 -Darchlib=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/lib/perl5 -Darchlibexp=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/lib/perl5 -Dsitelib=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/lib/perl5 -Dsitelibexp=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/lib/perl5 -Dsitearch=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/lib/perl5 -Dsitearchexp=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/lib/perl5 -Dbin=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/bin -Dbinexp=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/bin -Dman1dir=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/man/man1 -Dman1direxp=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/man/man1 -Dman3dir=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/man/man3 -Dman3direxp=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/man/man3 -Dperlpath=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/bin/perl -Dprivlib=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/lib/perl5 -Dprivlibexp=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/lib/perl5 -Dscriptdir=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/bin -Dscriptdirexp=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/bin -Dinstallprefix=/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5&#39;
    hint=recommended, useposix=true, d_sigaction=define
    useithreads=define, usemultiplicity=define
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=define, use64bitall=define, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;gcc&#39;, ccflags =&#39; -D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -fstack-protector -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64&#39;,
    optimize=&#39;-O2&#39;,
    cppflags=&#39; -D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -fstack-protector&#39;
    ccversion=&#39;&#39;, gccversion=&#39;4.4.5&#39;, gccosandvers=&#39;&#39;
    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
    ivtype=&#39;long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;, lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;gcc&#39;, ldflags =&#39;  -fstack-protector -L/usr/lib&#39;
    libpth= /usr/lib /lib/../lib64 /usr/lib/../lib64 /lib  /lib64 /usr/lib64 
    libs=-lnsl -ldl -lm -lcrypt -lutil -lpthread -lc
    perllibs=-lnsl -ldl -lm -lcrypt -lutil -lpthread -lc
    libc=/lib/libc-2.5.so, so=so, useshrplib=true, libperl=libperl.so
    gnulibc_version=&#39;2.5&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags=&#39;-Wl,-E -Wl,-rpath,/efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/lib/perl5/CORE&#39;
    cccdlflags=&#39;-fPIC&#39;, lddlflags=&#39; -shared -O2 -L/usr/lib -fstack-protector&#39;


Characteristics of this binary &#40;from libperl&#41;: 
  Compile-time options: MULTIPLICITY PERL_DONT_CREATE_GVSV
                        PERL_IMPLICIT_CONTEXT PERL_MALLOC_WRAP
                        PERL_PRESERVE_IVUV USE_64_BIT_ALL USE_64_BIT_INT
                        USE_ITHREADS USE_LARGE_FILES USE_PERLIO USE_PERL_ATOF
                        USE_REENTRANT_API USE_SITECUSTOMIZE
  Built under linux
  Compiled at Oct  5 2011 10:29:33
  %ENV:
    PERL=&#34;/efs/dist/perl5/core/5.14/.exec/x86-64.rhel.5/bin/perl&#34;
    PERL5LIB=&#34;/var/tmp/perl5-DBIx-Class-0.08195-build001-build/x86-64.rhel.5/5.14/lib:/efs/dist/perl5/Class-Accessor-Grouped/0.10003/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Class-C3-Componentised/1.001000/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Class-Inspector/1.25/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Config-Any/0.23/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Context-Preserve/0.01/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/DBD-SQLite/1.33/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/DBI/1.616/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Data-Compare/1.22/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Data-Dumper-Concise/2.020/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Data-Page/2.02/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Hash-Merge/0.12/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/MRO-Compat/0.11/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Module-Find/0.10/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Package-Stash/0.33/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Path-Class/0.24/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/SQL-Abstract/1.72/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Scope-Guard/0.20/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Sub-Name/0.05/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Test-Exception/0.31/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Test-Warn/0.23/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Try-Tiny/0.11/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Variable-Magic/0.46/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/namespace-clean/0.21/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Class-Accessor-Chained/0.01/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Class-C3/0.23/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Clone/0.31/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Dist-CheckConflicts/0.02/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/File-Find-Rule/0.33/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Getopt-Long-Descriptive/0.090/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Package-DeprecationManager/0.11/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Sub-Uplevel/0.22/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Tree-DAG_Node/1.06/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Algorithm-C3/0.08/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Class-Accessor/0.34/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/List-MoreUtils/0.33/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Number-Compare/0.03/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Params-Util/1.04/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Params-Validate/1.00/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Sub-Exporter/0.982/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Sub-Install/0.925/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Text-Glob/0.09/.exec/x86-64.rhel.5/5.14/lib/perl5:/efs/dist/perl5/Data-OptList/0.107/.exec/x86-64.rhel.5/5.14/lib/perl5&#34;
  @INC:
    /var/tmp/perl5-DBIx-Class-0.08195-build001-build/x86-64.rhel.5/5.14/lib
    /efs/dist/perl5/Class-Accessor-Grouped/0.10003/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Class-C3-Componentised/1.001000/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Class-Inspector/1.25/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Config-Any/0.23/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Context-Preserve/0.01/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/DBD-SQLite/1.33/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/DBI/1.616/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Data-Compare/1.22/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Data-Dumper-Concise/2.020/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Data-Page/2.02/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Hash-Merge/0.12/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/MRO-Compat/0.11/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Module-Find/0.10/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Package-Stash/0.33/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Path-Class/0.24/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/SQL-Abstract/1.72/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Scope-Guard/0.20/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Sub-Name/0.05/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Test-Exception/0.31/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Test-Warn/0.23/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Try-Tiny/0.11/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Variable-Magic/0.46/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/namespace-clean/0.21/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Class-Accessor-Chained/0.01/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Class-C3/0.23/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Clone/0.31/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Dist-CheckConflicts/0.02/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/File-Find-Rule/0.33/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Getopt-Long-Descriptive/0.090/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Package-DeprecationManager/0.11/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Sub-Uplevel/0.22/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Tree-DAG_Node/1.06/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Algorithm-C3/0.08/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Class-Accessor/0.34/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/List-MoreUtils/0.33/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Number-Compare/0.03/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Params-Util/1.04/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Params-Validate/1.00/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Sub-Exporter/0.982/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Sub-Install/0.925/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Text-Glob/0.09/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/Data-OptList/0.107/.exec/x86-64.rhel.5/5.14/lib/perl5
    /efs/dist/perl5/core/5.14.2-build002/.exec/x86-64.rhel.5/lib/perl5
    .
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> make_test.txt</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;26&nbsp;13:18:10&nbsp;2011</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #71927] DBIx::Class::Schema::txn_do&#40;&#41;: Invalid wizard object</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 26 Oct 2011 13:18:01 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Phillip Moore via RT &lt;bug-DBIx-Class [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Peter Rabbitson &lt;ribasushi [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, Oct 25, 2011 at 02:59:05PM -0400, Phillip Moore via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Tue Oct 25 14:59:02 2011: Request 71927 was acted upon.
&gt; Transaction: Ticket created by WPMOORE
&gt;        Queue: DBIx-Class
&gt;      Subject: DBIx::Class::Schema::txn_do&#40;&#41;: Invalid wizard object
&gt;    Broken in: 0.08195
&gt;     Severity: Important
&gt;        Owner: Nobody
&gt;   Requestors: w.phillip.moore@gmail.com
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=71927">https://rt.cpan.org/Ticket/Display.html?id=71927</a></span> &gt;
&gt; 
&gt; 
&gt; NOTE: I get the exact same errors for 5.10.1, 5.12.4, and 5.14.2, on both 32 and 64 bit 
&gt; builds on RHEL 5, Solaris 10 and AIX 6.  
&gt; 
&gt; Building the latest DBIx-Class distro, against the latest CPAN dependencies, doesn&#39;t pass the 
&gt; test suite.  3 of the tests fail with error similar to this one:
&gt; 
&gt; DBIx::Class::Schema::txn_do&#40;&#41;: Invalid wizard object at /var/tmp/perl5-DBIx-Class-0.08195-
&gt; build001-build/x86-64.rhel.5/5\
&gt; .14/source/DBIx-Class-0.08195/blib/lib/DBIx/Class/ResultSet.pm line 2288. at t/52leaks.t 
&gt; line 152
&gt; # Tests were run but no plan was declared and done_testing&#40;&#41; was not seen.
&gt; t/52leaks.t ......................................
&gt; Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
&gt; All 3 subtests passed
&gt; 
&gt; Additional debugging details can be found in the attachments, and since I can reproduce this 
&gt; at will, I am happy to provide additional information.
&gt; 
&gt; Also, I can reproduce this with either Variable::Magic 0.46 or 0.45.
&gt; 
</div>
Again... how the hell do you do this? :&#41; The code in question is also
already removed in master, however I would be very interested in tracking
this down. Is it possible to get a shell on your machine for this?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;26&nbsp;13:18:13&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;26&nbsp;13:30:20&nbsp;2011</span>
    <span class="description">w.phillip.moore [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Right now, I am working on recreating this in a clean, reproducible build outside of my 
client&#39;s environment, which happens to be a large, paranoid bank.   I can&#39;t give anyone access 
to that, obviously, so....

If I reproduce this outside of that environment, then I&#39;ll be able to get this failing on my home 
systems which I *can* give you access to.    Unfortunately, when I did a clean rebuild of 
everything using perl5.14.2 and cpanp against the SAME minicpan repo used for the failing 
builds...   it works.  

I&#39;m blocking on this right now, so this is my highest priority issue, and I hope to have an 
update on this one by later today &#40;of not, it won&#39;t be until next week -- I&#39;m taking a 5 day 
vacation to hang out with my visiting parents&#41;.

I spent most of today working on the other bug I reported &#40;ticket #71928&#41;, so you can see the 
level of detail I&#39;m going to &#40;try to&#41; provide for this one.   I suspect this is an issue with one of 
the many CPAN dependencies in the tree, and by investigating the differences between the 
working and failing builds, I should at least be able to figure out where to start looking.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;26&nbsp;13:34:50&nbsp;2011</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #71927] DBIx::Class::Schema::txn_do&#40;&#41;: Invalid wizard object</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 26 Oct 2011 13:34:41 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Phillip Moore via RT &lt;bug-DBIx-Class [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Peter Rabbitson &lt;ribasushi [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Oct 26, 2011 at 01:30:22PM -0400, Phillip Moore via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: DBIx-Class
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=71927">https://rt.cpan.org/Ticket/Display.html?id=71927</a></span> &gt;
&gt; 
&gt; Right now, I am working on recreating this in a clean, reproducible build outside of my 
&gt; client&#39;s environment, which happens to be a large, paranoid bank.   I can&#39;t give anyone access 
&gt; to that, obviously, so....
&gt; 
&gt; If I reproduce this outside of that environment, then I&#39;ll be able to get this failing on my home 
&gt; systems which I *can* give you access to.    Unfortunately, when I did a clean rebuild of 
&gt; everything using perl5.14.2 and cpanp against the SAME minicpan repo used for the failing 
&gt; builds...   it works.  
&gt; 
&gt; I&#39;m blocking on this right now, so this is my highest priority issue, and I hope to have an 
&gt; update on this one by later today &#40;of not, it won&#39;t be until next week -- I&#39;m taking a 5 day 
&gt; vacation to hang out with my visiting parents&#41;.
&gt; 
&gt; I spent most of today working on the other bug I reported &#40;ticket #71928&#41;, so you can see the 
&gt; level of detail I&#39;m going to &#40;try to&#41; provide for this one.   I suspect this is an issue with one of 
&gt; the many CPAN dependencies in the tree, and by investigating the differences between the 
&gt; working and failing builds, I should at least be able to figure out where to start looking.
</div>
Thank you very much. Words can not express how much I appreciate you looking
into this at this level of detail. Efforts like yours is what makes our
toolchain the kick-ass thing it currently is.

Cheers!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;08&nbsp;13:37:24&nbsp;2011</span>
    <span class="description">w.phillip.moore [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This turns out to be a self-inflicted problem, although I don&#39;t have a definitive root cause.

The tool I use to install CPAN dependencies was installing only &#34;required&#34; dependencies, and 
not the &#34;recommends&#34;, and although this resulted in everything passing it&#39;s test suite 
individually, for some reason one of those dependencies being missing results in this test 
suite failure.

I enhanced my build system to include all the optional/recommends dependencies by default, 
rebuilt the dependency tree, and now DBIx-Class passes it&#39;s test suite &#40;but for one minor 
issue I&#39;ll report seperately&#41;.

Unfortunately, I do not have the time to bisect these builds until i can figure out which of the 
30+ extra modules is the one that is needed to avoid this error.   I suggesting changing this 
ticket to resolved &#40;as I&#39;ve done&#41;, unless someone thinks this is worth tracking.

I kinda doubt anyone else will see this, since cpan, cpanp and cpanm all install dependencies 
that solve this problem.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;24&nbsp;06:53:36&nbsp;2011</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Nov 08 13:37:24 2011, WPMOORE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This turns out to be a self-inflicted problem, although I don&#39;t have a
&gt; definitive root cause.
&gt; 
</div>
This kinda looks like your Variable::Magic had access to a stale .so
from a previous V::M version. In any case DBIC 0.08196 does not depend
on V::M at all anymore, so the whole issue is moot.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;24&nbsp;06:53:37&nbsp;2011</span>
    <span class="description">ribasushi [...] leporine.io -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
