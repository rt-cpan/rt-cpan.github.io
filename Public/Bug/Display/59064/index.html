<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #59064 for CSS-Inliner: Does not respect the weight of CSS rules</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #59064 for CSS-Inliner: Does not respect the weight of CSS rules</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/CSS-Inliner/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/CSS-Inliner/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/CSS-Inliner/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/CSS-Inliner/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/CSS-Inliner">CSS-Inliner CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">59064</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/CSS-Inliner/Active/">CSS-Inliner</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
wonko [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-229630-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2544    </td>
  </tr>
  <tr id="CF-229631-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
2544    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;02&nbsp;16:29:19&nbsp;2010</span>
    <span class="description">wonko [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Does not respect the weight of CSS rules</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">CSS::Inliner doesn&#39;t support the CSS idea of &#34;weights&#34; for the different
selectors It just inlines them in whatever order CSS::Tiny gives them
back. This not only has problems because CSS rules are order dependent
&#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=59042&#41;">https://rt.cpan.org/Ticket/Display.html?id=59042&#41;</a></span> but it also causes
problems because certain rules should have more precedence than others.

Attached is a version of Inliner.pm that does support CSS selector
weights. It&#39;s not a patch because it also includes other patches that
I&#39;ve submitted &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=59042">https://rt.cpan.org/Ticket/Display.html?id=59042</a></span>,
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=58957">https://rt.cpan.org/Ticket/Display.html?id=58957</a></span> and
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=58923&#41;">https://rt.cpan.org/Ticket/Display.html?id=58923&#41;</a></span>.

I&#39;m also attaching tests for this weighting &#40;css_rule_weights.t&#41; and a
version of t/advanced.t that has tests for the actual inlining of this.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> css_rule_weights.t</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">use Test::More;
use Test::LongString;
plan&#40;tests =&gt; 16&#41;;

use_ok&#40;&#39;CSS::Inliner&#39;&#41;;

my %rules = &#40;
    &#34;li&#34;                    =&gt; 1,
    &#34;ul li&#34;                 =&gt; 2,
    &#34;ul ol li&#34;              =&gt; 3,
    &#34;li.red&#34;                =&gt; 11,
    &#34;ul ol li.red&#34;          =&gt; 13,
    &#34;td.foo p.bar em&#34;       =&gt; 23,
    &#34;td.foo&#34;                =&gt; 11,
    &#34;td.foo p&#34;              =&gt; 12,
    &#34;td.foo p.bar em.blah&#34;  =&gt; 33,
    &#34;td p em&#34;               =&gt; 3,
    &#34;td #blah&#34;              =&gt; 102,
    &#34;#blah td&#34;              =&gt; 102,
    &#34;#blah td.foo&#34;          =&gt; 112,
    &#34;#blah td.foo span&#34;     =&gt; 113,
    &#34;#blah td.foo span.bar&#34; =&gt; 123,
&#41;;

foreach my $rule &#40;keys %rules&#41; {
    my $weight = CSS::Inliner-&gt;_get_css_weight&#40;$rule&#41;;
    is&#40;$weight, $rules{$rule}, &#34;correct weight for \&#34;$rule\&#34;&#34;&#41;;
}
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Inliner.pm.with_weight</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> advanced.t</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">use Test::More;
use Test::LongString;
use CSS::Inliner;
#plan&#40;tests =&gt; 9&#41;;
plan&#40;&#39;no_plan&#39;&#41;;

# moderately complicated rules with elements and classes
my $html = &lt;&lt;&#39;END&#39;;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Moderate Document&lt;/title&gt;
    &lt;style type=&#34;text/javascript&#34;&gt;
    h1 { font-size: 20px }
    h1.alert { color: red }
    h1.cool { color: blue }
    .intro { color: #555555; font-size: 10px; }
    div p { color: #123123; font-size: 8px }
    p:hover { color: yellow }
    p.poor { font-weight: lighter }
    p.rich { font-weight: bold }
    &lt;/style&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1 class=&#34;alert&#34;&gt;Lorem ipsum dolor sit amet&lt;/h1&gt;
    &lt;h1 class=&#34;cool&#34;&gt;Consectetur adipiscing elit&lt;/h1&gt;
    &lt;p class=&#34;intro&#34;&gt;Aliquam ornare luctus egestas.&lt;/p&gt;
    &lt;p&gt;Nulla vulputate tellus vitae justo luctus scelerisque accumsan nunc porta.&lt;/p&gt;
    &lt;div&gt;
      &lt;p&gt;Phasellus pharetra viverra sollicitudin. &lt;strong&gt;Vivamus ac enim ante.&lt;/strong&gt;&lt;/p&gt;
      &lt;p&gt;Nunc augue massa, &lt;em&gt;dictum id eleifend non&lt;/em&gt; posuere nec purus.&lt;/p&gt;
    &lt;/div&gt;
    &lt;p class=&#34;poor rich&#34;&gt;Luctus scelerisque accumsan nunc porta&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
END

my $inliner = CSS::Inliner-&gt;new&#40;&#41;;
$inliner-&gt;read&#40;{html =&gt; $html}&#41;;
my $inlined = $inliner-&gt;inlinify&#40;&#41;;

contains_string&#40;$inlined, q&#40;&lt;h1 class=&#34;alert&#34; style=&#34;color:red;font-size:20px;&#34;&gt;Lorem ipsum&#41;, &#39;h1.alert rule inlined&#39;&#41;;
contains_string&#40;$inlined, q&#40;&lt;h1 class=&#34;cool&#34; style=&#34;color:blue;font-size:20px;&#34;&gt;Consectetur&#41;, &#39;h1.cool rule inlined&#39;&#41;;
contains_string&#40;$inlined, q&#40;&lt;p class=&#34;intro&#34; style=&#34;color:#555555;font-size:10px;&#34;&gt;Aliquam&#41;, &#39;.intro rule inlined&#39;&#41;;
contains_string&#40;$inlined, q&#40;&lt;p style=&#34;color:#123123;font-size:8px;&#34;&gt;Phasellus&#41;, &#39;div p rule inlined&#39;&#41;;
contains_string&#40;$inlined, q&#40;&lt;p style=&#34;color:#123123;font-size:8px;&#34;&gt;Nunc augue&#41;, &#39;div p rule inlined again&#39;&#41;;
contains_string&#40;$inlined, q&#40;&lt;p&gt;Nulla&#41;, &#39;no rule for just &#34;p&#34;&#39;&#41;;
contains_string&#40;$inlined, q&#40;&lt;p class=&#34;poor rich&#34; style=&#34;font-weight:bold;&#34;&gt;Luctus&#41;, &#39;rich before the poor&#39;&#41;;
lacks_string&#40;$inlined, q&#40;&lt;style&#41;, &#39;no style blocks left&#39;&#41;;
lacks_string&#40;$inlined, q&#40;yellow&#41;, &#39;:hover pseudo-attribute was ignored&#39;&#41;;

# a more complicated example with ids, class, attribute selectors
# in a cascading layout
$html = &lt;&lt;&#39;END&#39;;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Complicated Document&lt;/title&gt;
    &lt;style type=&#34;text/javascript&#34;&gt;
    h1 { font-size: 20px }
    #title { font-size: 25px }
    h1.cool { color: blue }
    h1.alert { color: red }
    h1.cool.alert { font-size: 30px; font-weight: normal }
    .intro { color: #555555; font-size: 10px; }
    div p { color: #123123; font-size: 8px }
    p { font-weight: normal; font-size: 9px }
    p:hover { color: yellow }
    p.poor { font-weight: lighter; color: black }
    p.rich { font-weight: bold; color: black }
    div[align=right] p { color: gray }
    &lt;/style&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1 class=&#34;alert cool&#34; id=&#34;title&#34;&gt;Lorem ipsum dolor sit amet&lt;/h1&gt;
    &lt;h1 class=&#34;cool&#34;&gt;Consectetur adipiscing elit&lt;/h1&gt;
    &lt;p class=&#34;intro&#34;&gt;Aliquam ornare luctus egestas.&lt;/p&gt;
    &lt;p&gt;Nulla vulputate tellus vitae justo luctus scelerisque accumsan nunc porta.&lt;/p&gt;
    &lt;div align=&#34;left&#34;&gt;
      &lt;p&gt;Phasellus pharetra viverra sollicitudin. &lt;strong&gt;Vivamus ac enim ante.&lt;/strong&gt;&lt;/p&gt;
      &lt;p&gt;Nunc augue massa, &lt;em&gt;dictum id eleifend non&lt;/em&gt; posuere nec purus.&lt;/p&gt;
    &lt;/div&gt;
    &lt;div align=&#34;right&#34;&gt;
      &lt;p&gt;Vivamus ac enim ante.&lt;/p&gt;
      &lt;p class=&#34;rich&#34;&gt;Dictum id eleifend non.&lt;/p&gt;
    &lt;/div&gt;
    &lt;p class=&#34;poor rich&#34;&gt;Luctus scelerisque accumsan nunc porta&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
END

$inliner = CSS::Inliner-&gt;new&#40;&#41;;
$inliner-&gt;read&#40;{html =&gt; $html}&#41;;
$inlined = $inliner-&gt;inlinify&#40;&#41;;

contains_string&#40;$inlined, q&#40;&lt;h1 class=&#34;alert cool&#34; id=&#34;title&#34; style=&#34;color:red;font-size:25px;font-weight:normal;&#34;&gt;Lorem ipsum&#41;, &#39;cascading rules for h1.alert.cool inlined&#39;&#41;;
contains_string&#40;$inlined, q&#40;&lt;h1 class=&#34;cool&#34; style=&#34;color:blue;font-size:20px;&#34;&gt;Consectetur&#41;, &#39;h1.cool rule inlined&#39;&#41;;
contains_string&#40;$inlined, q&#40;&lt;p class=&#34;intro&#34; style=&#34;color:#555555;font-size:10px;font-weight:normal;&#34;&gt;Aliquam&#41;, &#39;.intro rule inlined&#39;&#41;;
contains_string&#40;$inlined, q&#40;&lt;p style=&#34;color:#123123;font-size:8px;font-weight:normal;&#34;&gt;Phasellus&#41;, &#39;div p rule inlined&#39;&#41;;
contains_string&#40;$inlined, q&#40;&lt;p style=&#34;color:#123123;font-size:8px;font-weight:normal;&#34;&gt;Nunc augue&#41;, &#39;div p rule inlined again&#39;&#41;;
contains_string&#40;$inlined, q&#40;&lt;p style=&#34;font-size:9px;font-weight:normal;&#34;&gt;Nulla&#41;, &#39;just the &#34;p&#34; rule&#39;&#41;;
contains_string&#40;$inlined, q&#40;&lt;p style=&#34;color:gray;font-size:8px;font-weight:normal;&#34;&gt;Vivamus&#41;, &#39;&#34;div[align=right] p&#34; + &#34;div p&#34; + &#34;p&#34;&#39;&#41;;
contains_string&#40;$inlined, q&#40;&lt;p class=&#34;rich&#34; style=&#34;color:gray;font-size:8px;font-weight:bold;&#34;&gt;Dictum&#41;, &#39;&#34;div[align=right] p&#34; + &#34;div p&#34; + &#34;p&#34; + &#34;p.rich&#34;&#39;&#41;;
contains_string&#40;$inlined, q&#40;&lt;p class=&#34;poor rich&#34; style=&#34;color:black;font-size:9px;font-weight:bold;&#34;&gt;Luctus&#41;, &#39;rich before the poor&#39;&#41;;
lacks_string&#40;$inlined, q&#40;&lt;style&#41;, &#39;no style blocks left&#39;&#41;;
lacks_string&#40;$inlined, q&#40;yellow&#41;, &#39;:hover pseudo-attribute was ignored&#39;&#41;;
lacks_string&#40;$inlined, q&#40;30px&#41;, &#39;h1.cool.alert font-size ignored&#39;&#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;16&nbsp;23:02:40&nbsp;2010</span>
    <span class="description">KAMELKEV [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Michael,

  Oh wow, I did not know about this entire concept of weighting within
CSS at *all*.

  Give me a little bit to read the attached W3C summary that you
included within this file and to see if this is the best approach.
Supporting this feature should make the library substantially more
robust in edge cases, so I definitely want to research it.

  I think my current plan is to release the other changes for this
particular version, and then merge this in. Additionally you will be
happy to know that I&#39;m looking at a few options for a public source
control system - either git or svn, I haven&#39;t figured which really is
best for the project just yet.

  I&#39;ll send you an email when I have that all figured out.

  In the meantime I am merging the other resources you&#39;ve contributed
into the project, and I am adding a requested option whereby you can
automatically strip classes/ids after inlining is complete &#40;as they
become superfluous&#41;.

thanks again for your help!

  -Kevin






On Fri Jul 02 16:29:19 2010, WONKO wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; CSS::Inliner doesn&#39;t support the CSS idea of &#34;weights&#34; for the different
&gt; selectors It just inlines them in whatever order CSS::Tiny gives them
&gt; back. This not only has problems because CSS rules are order dependent
&gt; &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=59042&#41;">https://rt.cpan.org/Ticket/Display.html?id=59042&#41;</a></span> but it also causes
&gt; problems because certain rules should have more precedence than others.
&gt; 
&gt; Attached is a version of Inliner.pm that does support CSS selector
&gt; weights. It&#39;s not a patch because it also includes other patches that
&gt; I&#39;ve submitted &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=59042">https://rt.cpan.org/Ticket/Display.html?id=59042</a></span>,
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=58957">https://rt.cpan.org/Ticket/Display.html?id=58957</a></span> and
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=58923&#41;">https://rt.cpan.org/Ticket/Display.html?id=58923&#41;</a></span>.
&gt; 
&gt; I&#39;m also attaching tests for this weighting &#40;css_rule_weights.t&#41; and a
&gt; version of t/advanced.t that has tests for the actual inlining of this.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;16&nbsp;23:02:40&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;28&nbsp;01:07:13&nbsp;2010</span>
    <span class="description">KAMELKEV [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
And released. This version is substantially more versatile.

There are still a bunch of little quirks here and there, but I&#39;m getting
them out of there. Let me know if you see anything noteworthy.

-Kevin


On Mon Aug 16 23:02:40 2010, KAMELKEV wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Michael,
&gt; 
&gt;   Oh wow, I did not know about this entire concept of weighting within
&gt; CSS at *all*.
&gt; 
&gt;   Give me a little bit to read the attached W3C summary that you
&gt; included within this file and to see if this is the best approach.
&gt; Supporting this feature should make the library substantially more
&gt; robust in edge cases, so I definitely want to research it.
&gt; 
&gt;   I think my current plan is to release the other changes for this
&gt; particular version, and then merge this in. Additionally you will be
&gt; happy to know that I&#39;m looking at a few options for a public source
&gt; control system - either git or svn, I haven&#39;t figured which really is
&gt; best for the project just yet.
&gt; 
&gt;   I&#39;ll send you an email when I have that all figured out.
&gt; 
&gt;   In the meantime I am merging the other resources you&#39;ve contributed
&gt; into the project, and I am adding a requested option whereby you can
&gt; automatically strip classes/ids after inlining is complete &#40;as they
&gt; become superfluous&#41;.
&gt; 
&gt; thanks again for your help!
&gt; 
&gt;   -Kevin
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; On Fri Jul 02 16:29:19 2010, WONKO wrote:
<div class="message-stanza open">&gt; &gt; CSS::Inliner doesn&#39;t support the CSS idea of &#34;weights&#34; for the different
&gt; &gt; selectors It just inlines them in whatever order CSS::Tiny gives them
&gt; &gt; back. This not only has problems because CSS rules are order dependent
&gt; &gt; &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=59042&#41;">https://rt.cpan.org/Ticket/Display.html?id=59042&#41;</a></span> but it also causes
&gt; &gt; problems because certain rules should have more precedence than others.
&gt; &gt; 
&gt; &gt; Attached is a version of Inliner.pm that does support CSS selector
&gt; &gt; weights. It&#39;s not a patch because it also includes other patches that
&gt; &gt; I&#39;ve submitted &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=59042">https://rt.cpan.org/Ticket/Display.html?id=59042</a></span>,
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=58957">https://rt.cpan.org/Ticket/Display.html?id=58957</a></span> and
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=58923&#41;">https://rt.cpan.org/Ticket/Display.html?id=58923&#41;</a></span>.
&gt; &gt; 
&gt; &gt; I&#39;m also attaching tests for this weighting &#40;css_rule_weights.t&#41; and a
&gt; &gt; version of t/advanced.t that has tests for the actual inlining of this.
</div>&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;28&nbsp;01:07:13&nbsp;2010</span>
    <span class="description">KAMELKEV [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
