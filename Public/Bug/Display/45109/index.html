<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #45109 for POE: Deep recursion on subroutine &#34;POE::Kernel::_loop_signal_handler_chld&#34;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #45109 for POE: Deep recursion on subroutine &#34;POE::Kernel::_loop_signal_handler_chld&#34;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/POE/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/POE/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/POE/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/POE/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/POE">POE CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">45109</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/POE/Active/">POE</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dolmen [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-26342-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.004    </td>
  </tr>
  <tr id="CF-26343-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;17&nbsp;11:01:08&nbsp;2009</span>
    <span class="description">dolmen [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Deep recursion on subroutine &#34;POE::Kernel::_loop_signal_handler_chld&#34;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Testing POE 1.004 on HP-UX B.11.11, PARISC:


t/90_regression/rt39872-sigchld-stop.t ....... # Wait 3
24086: Deep recursion on subroutine
&#34;POE::Kernel::_loop_signal_handler_chld&#34; at
/home/nagios/agent/.cpan/build/POE-1.004-vS4Y6T/blib/lib/POE/Loop/PerlSignals.pm
line 59.

Pid 24086 received a SIGSEGV for stack growth failure.
Possible causes: insufficient memory or swap space,
or stack size exceeded maxssiz.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;20&nbsp;04:23:25&nbsp;2009</span>
    <span class="description">dolmen [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here is the test output:


$ perl -I blib/lib t/90_regression/rt39872-sigchld-stop.t
1..3
8368: _start at t/90_regression/rt39872-sigchld-stop.t line 59.
8368: Parent at t/90_regression/rt39872-sigchld-stop.t line 49.
8369: child at t/90_regression/rt39872-sigchld-stop.t line 106.
8370: child at t/90_regression/rt39872-sigchld-stop.t line 106.
# Wait 3
8368: parent at t/90_regression/rt39872-sigchld-stop.t line 96.
8369: USR1 at t/90_regression/rt39872-sigchld-stop.t line 115.
&lt;rc&gt; decremented extref ``USR1&#39;&#39; &#40;now 0&#41; for session 2 &#40;worker&#41; at
blib/lib/POE/Resource/Extrefs.pm line 100
&lt;rc&gt; decrementing refcount for session 2 &#40;worker&#41; at
blib/lib/POE/Resource/Sessions.pm line 331
&lt;rc&gt; decrementing refcount for session 2 &#40;&#41; at
blib/lib/POE/Resource/Sessions.pm line 331
&lt;rc&gt; +----- GC test for session 2 &#40;&#41;
&#40;POE::Session=ARRAY&#40;0x80000001006d15e8&#41;&#41; -----
&lt;rc&gt; | total refcnt  : 0
&lt;rc&gt; | event count   : 0
&lt;rc&gt; | post count    : 0
&lt;rc&gt; | child sessions: 0
&lt;rc&gt; | handles in use: 0
&lt;rc&gt; | aliases in use: 0
&lt;rc&gt; | extra refs    : 0
&lt;rc&gt; | pid count     : 0
&lt;rc&gt; +---------------------------------------------------
&lt;rc&gt; | session 2 &#40;&#41; is garbage; stopping it...
&lt;rc&gt; +---------------------------------------------------
&lt;rc&gt; | called at blib/lib/POE/Resource/Sessions.pm line 408
       
POE::Kernel::_data_ses_collect_garbage&#40;&#39;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#39;,&#39;POE::Session=ARRAY&#40;0x80000001006d15e8&#41;&#39;&#41;
called at blib/lib/POE/Resource/Signals.pm line 430
       
POE::Kernel::_data_sig_free_terminated_sessions&#40;&#39;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#39;&#41;
called at blib/lib/POE/Kernel.pm line 988
       
POE::Kernel::_dispatch_event&#40;&#39;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#39;,&#39;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#39;,&#39;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#39;,&#39;_signal&#39;,16,&#39;ARRAY&#40;0x80000001006d21c8&#41;&#39;,&#39;blib/lib/POE/Loop/PerlSignals.pm&#39;,35,&#39;undef&#39;,...&#41;
called at blib/lib/POE/Resource/Events.pm line 265
       
POE::Kernel::_data_ev_dispatch_due&#40;&#39;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#39;&#41;
called at blib/lib/POE/Loop/Select.pm line 327
       
POE::Kernel::loop_do_timeslice&#40;&#39;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#39;&#41;
called at blib/lib/POE/Loop/Select.pm line 335
        POE::Kernel::loop_run&#40;&#39;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#39;&#41;
called at blib/lib/POE/Kernel.pm line 1291
        POE::Kernel::run&#40;&#39;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#39;&#41; called
at t/90_regression/rt39872-sigchld-stop.t line 50
8369: _stop at t/90_regression/rt39872-sigchld-stop.t line 125.
&lt;rc&gt; decrementing refcount for session HP_P1-49ec3074000020b0
&#40;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#41; at
blib/lib/POE/Resource/Sessions.pm line 331
&lt;rc&gt; ,----- Kernel Activity -----
&lt;rc&gt; | Events : 0
&lt;rc&gt; | Files  : 0
&lt;rc&gt; | Extra  : 0
&lt;rc&gt; | Procs  :
&lt;rc&gt; `---------------------------
&lt;rc&gt; ... at blib/lib/POE/Kernel.pm line 622
&lt;rc&gt; incrementing refcount for session HP_P1-49ec3074000020b0
&#40;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#41; at
blib/lib/POE/Resource/Sessions.pm line 358
&lt;rc&gt; incrementing refcount for session HP_P1-49ec3074000020b0
&#40;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#41; at
blib/lib/POE/Resource/Sessions.pm line 358
&lt;rc&gt; decrementing refcount for session HP_P1-49ec3074000020b0
&#40;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#41; at
blib/lib/POE/Resource/Sessions.pm line 331
&lt;rc&gt; decrementing refcount for session HP_P1-49ec3074000020b0
&#40;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#41; at
blib/lib/POE/Resource/Sessions.pm line 331
&lt;rc&gt; incrementing refcount for session HP_P1-49ec3074000020b0
&#40;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#41; at
blib/lib/POE/Resource/Sessions.pm line 358
&lt;rc&gt; incrementing refcount for session HP_P1-49ec3074000020b0
&#40;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#41; at
blib/lib/POE/Resource/Sessions.pm line 358
&lt;rc&gt; decrementing refcount for session HP_P1-49ec3074000020b0
&#40;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#41; at
blib/lib/POE/Resource/Sessions.pm line 331
&lt;rc&gt; decrementing refcount for session HP_P1-49ec3074000020b0
&#40;POE::Kernel=ARRAY&#40;0x800000010025b4e8&#41;&#41; at
blib/lib/POE/Resource/Sessions.pm line 331
8369: Exit at t/90_regression/rt39872-sigchld-stop.t line 52.
# No tests run!

Pid 8368 received a SIGSEGV for stack growth failure.
Possible causes: insufficient memory or swap space,
or stack size exceeded maxssiz.
Memory fault&#40;coredump&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;20&nbsp;04:23:26&nbsp;2009</span>
    <span class="description">dolmen [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;20&nbsp;05:18:56&nbsp;2009</span>
    <span class="description">dolmen [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Attaching tusc &#40;Trace Unix System Calls, the HPUX &#39;truss&#39;&#41; output for an
other run.

$ tusc perl -I blib/lib t/90_regression/rt39872-sigchld-stop.t &gt; rt45109.txt
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;20&nbsp;05:58:28&nbsp;2009</span>
    <span class="description">dolmen [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Deep recursion on subroutine &#34;POE::Kernel::_loop_signal_handler_chld&#34;
 with USE_SIGCHLD</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Disabling USE_SIGCHLD in the test makes it pass.
It looks like my perl &#40;5.8.0 on hpux PARISC&#41; is too old.

Could you help me to diagnose if this bug is critical?
Will I encounters some problems with my application which uses
POE::Wheel::Run and monitors SIGCHLD without USE_SIGCHLD?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;30&nbsp;16:06:34&nbsp;2009</span>
    <span class="description">RCAPUTO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Apr 20 05:58:28 2009, DOLMEN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Disabling USE_SIGCHLD in the test makes it pass.
&gt; It looks like my perl &#40;5.8.0 on hpux PARISC&#41; is too old.
&gt; 
&gt; Could you help me to diagnose if this bug is critical?
&gt; Will I encounters some problems with my application which uses
&gt; POE::Wheel::Run and monitors SIGCHLD without USE_SIGCHLD?
</div>
I&#39;ve attached a SIGCHLD handler test case that doesn&#39;t use POE.  It
tries to mimic POE&#39;s SIGCHLD handler, and it tries to detect deep
recursion before Perl crashes.

Please try the test case and add the output to this ticket.  Thank you
for your help.

The deep recursion is happening in POE&#39;s SIGCHLD handler at the point
where $SIG{CHLD} is reset.  My best guess is that resetting $SIG{CHLD}
immediately triggers another SIGCHLD, causing the SIGCHLD handler to be
called from within itself.  Deep recursion results.

It may be that HP-UX behaves slightly different in this regard.  In this
case, Perl should be smoothing over the differences so that its basic
signal handling behaves the same.

Perl 5.8.0 is rather buggy, as Perl versions go.  It seems likely that a
newer version of Perl fixes this issue.

I would try the test case with Perl 5.8.0 to see whether the test case
reproduces the problem.

I would then try it with 5.8.8 to see whether the problem has been fixed
in Perl.

If 5.8.8 also recurses deeply, I would ask the perl5porters list to try
the test case and respond whether it&#39;s a Perl issue or a known behavior.
 If they decide the behavior should stand, then I would consider
restructuring POE&#39;s signal handler to work around it.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!perl

use warnings;
use strict;

my $pid = fork&#40;&#41;;
die &#34;fork failed: $!&#34; unless defined $pid;

# Child sleeps briefly, then exits.
unless &#40;$pid&#41; {
	print &#34;$$ child sleeping...\n&#34;;
	sleep 3;
	print &#34;$$ child exiting.\n&#34;;
	exit;
}

# Parent keeps busy until the child exits.
$SIG{CHLD} = \&#38;handle_sigchld;

my $recursion_level = 0;
my $got_child = 0;

while &#40;not $got_child&#41; {
	print &#34;$$ parent waiting for child.\n&#34;;
	sleep 1;
}

# And to be clean about it, reap the child when we&#39;re done.
my $reaped = wait&#40;&#41;;
print &#34;$$ parent spawned $pid, reaped $reaped\n&#34;;
exit;

# Testing a potential HP-UX issue related to rt.cpan.org ticket 45109.
# The error message implies that a SIGCHLD handler is being called
# immediately upon setting $SIG{CHLD}, if there is a child to be
# reaped.  In POE&#39;s case, this could retrigger the SIGCHLD handler
# recursively.  The following SIGCHLD handler tries to re-create and
# analyze the conditions.

sub handle_sigchld {
	$got_child++;
	$recursion_level++;

	print &#34;$$ parent SIGCHLD handler recursion level $recursion_level\n&#34;;
	if &#40;$recursion_level &gt; 9&#41; {
		print &#34;$$ platform issue on $^O: deep recursion in SIGCHLD handler\n&#34;;
		return;
	}

	$SIG{CHLD} = \&#38;handle_sigchld;
	$recursion_level--;
}
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;02&nbsp;09:38:08&nbsp;2009</span>
    <span class="description">dolmen [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here is the test case output on HP-UX B.11.11 IA64 with Perl 5.8.8:

--------8&lt;------8&lt;------8&lt;------8&lt;------8&lt;------

This is perl, v5.8.8 built for IA64.ARCHREV_0-thread-multi-LP64
&#40;with 26 registered patches, see perl -V for more detail&#41;

Copyright 1987-2006, Larry Wall

Binary build 817 [257965] provided by ActiveState <span class="clickylink"><a target="new" rel="nofollow" href="http://www.ActiveState.com">http://www.ActiveState.com</a></span>
Built Mar 20 2006 20:52:50


--------8&lt;------8&lt;------8&lt;------8&lt;------8&lt;------
2297 child sleeping...
2296 parent waiting for child.
2296 parent waiting for child.
2296 parent waiting for child.
2297 child exiting.
2296 parent SIGCHLD handler recursion level 1
2296 parent SIGCHLD handler recursion level 1
2296 parent SIGCHLD handler recursion level 1
2296 parent SIGCHLD handler recursion level 1
2296 parent SIGCHLD handler recursion level 1
2296 parent SIGCHLD handler recursion level 1
2296 parent SIGCHLD handler recursion level 1
2296 parent SIGCHLD handler recursion level 1
2296 parent spawned 2297, reaped 2297
--------8&lt;------8&lt;------8&lt;------8&lt;------8&lt;------

It looks like there is in fact a kind of recursion: when it is changed
the handler is recalled 8 times after it exits.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;02&nbsp;09:49:03&nbsp;2009</span>
    <span class="description">dolmen [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The test t/90_regression/rt39872-sigchld-stop.t is now passing with POE
1.006.

The CHANGES of POES 1.006 says something has been discovered and fixed
on SunOS related to the same test case. What has changed: POE or the
test case?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;02&nbsp;12:57:59&nbsp;2009</span>
    <span class="description">RCAPUTO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jun 02 09:49:03 2009, DOLMEN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The test t/90_regression/rt39872-sigchld-stop.t is now passing with POE
&gt; 1.006.
&gt; 
&gt; The CHANGES of POES 1.006 says something has been discovered and fixed
&gt; on SunOS related to the same test case. What has changed: POE or the
&gt; test case?
</div>
A different test case was changed &#40;t/90_regression/rt39872-sigchld.t&#41;. 
The change should not have affected this test.

Perhaps there is a race condition that doesn&#39;t always fail the same way?

Thank you for including the new test case output.  I&#39;ll look at it after
work this week.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;25&nbsp;23:51:06&nbsp;2009</span>
    <span class="description">RCAPUTO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello.  Sorry for the delay.

Signal handling has changed significantly in POE 1.007 &#40;already on
CPAN&#41;.  Could you see whether this has fixed things for you?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;03&nbsp;23:26:12&nbsp;2009</span>
    <span class="description">RCAPUTO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve deferred resetting $SIG{CHLD} and $SIG{CLD} until after the
waitpid&#40;&#41; loop, which is the recommended way to do things on SysV-ish
systems &#40;like I assume HP-UX is&#41;.

The fix is in revision 2667, which will go out with the 1.267 release
sometime this weekend.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;03&nbsp;23:26:15&nbsp;2009</span>
    <span class="description">RCAPUTO [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;17&nbsp;11:24:23&nbsp;2009</span>
    <span class="description">dolmen [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">All tests pass for POE-1.268 on HP-UX.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;17&nbsp;11:24:24&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;17&nbsp;12:07:14&nbsp;2009</span>
    <span class="description">RCAPUTO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you for confirming the fix.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;17&nbsp;12:07:24&nbsp;2009</span>
    <span class="description">RCAPUTO [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
