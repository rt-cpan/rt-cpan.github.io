<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #60857 for Test-Smoke: Ignores CC and CFLAGS</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #60857 for Test-Smoke: Ignores CC and CFLAGS</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Test-Smoke/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Test-Smoke/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Test-Smoke/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Test-Smoke/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Test-Smoke">Test-Smoke CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">60857</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Test-Smoke/Active/">Test-Smoke</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
njh [...] bandsman.co.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-31598-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.43    </td>
  </tr>
  <tr id="CF-31599-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;29&nbsp;12:03:34&nbsp;2010</span>
    <span class="description">njh [...] bandsman.co.uk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Ignores CC and CFLAGS</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">You can&#39;t use Test::Smoke to test whether Perl builds with a different
compiler, because Test::Smoke ignores the values of CC and CFLAGS in
your environment.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;29&nbsp;14:03:48&nbsp;2010</span>
    <span class="description">abeltje [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Aug 29 12:03:34 2010, njh@bandsman.co.uk wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You can&#39;t use Test::Smoke to test whether Perl builds with a different
&gt; compiler, because Test::Smoke ignores the values of CC and CFLAGS in
&gt; your environment.
</div>
Two options here:
1&#41; use the -Dcc= and -Dccflags= options for configure
Put these options on a single line in the first section of the build 
configurations file &#40;perlcurrent.cfg&#41;; or &#40;preferred&#41; create a new 
configuration with its own build configurations file that has these 
options in a single section.

2&#41; Create a new configuration, edit the .sh file and add the environment 
variables as needed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;29&nbsp;14:03:49&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;29&nbsp;14:03:49&nbsp;2010</span>
    <span class="description">abeltje [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;29&nbsp;16:21:25&nbsp;2010</span>
    <span class="description">njh [...] bandsman.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> njh [...] bandsman.co.uk</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Aug 29 14:03:48 2010, ABELTJE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun Aug 29 12:03:34 2010, njh@bandsman.co.uk wrote:
<div class="message-stanza open">&gt; &gt; You can&#39;t use Test::Smoke to test whether Perl builds with a different
&gt; &gt; compiler, because Test::Smoke ignores the values of CC and CFLAGS in
&gt; &gt; your environment.
</div>&gt; 
&gt; Two options here:
&gt; 1&#41; use the -Dcc= and -Dccflags= options for configure
&gt; Put these options on a single line in the first section of the build 
&gt; configurations file &#40;perlcurrent.cfg&#41;; or &#40;preferred&#41; create a new 
&gt; configuration with its own build configurations file that has these 
&gt; options in a single section.
&gt; 
&gt; 2&#41; Create a new configuration, edit the .sh file and add the environment 
&gt; variables as needed.
</div>

I tried option 1 - thanks for the suggestion.  However when I tried to
test I got this:

&#34;Skipping this smoke, patchlevel
&#40;7d6ecb1f6c7eabec011b66526161fcf678919c99&#41; did not change.&#34;

Which is not that helpful since I am trying with a different compiler,
so the test done with a different compiler is of no relevance.  Do you
think that the test result should include more than just the Perl
version? Would it not help me to at least include the compiler version
with the results?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;29&nbsp;16:21:26&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;29&nbsp;17:29:18&nbsp;2010</span>
    <span class="description">abeltje [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Aug 29 16:21:25 2010, njh@bandsman.co.uk wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun Aug 29 14:03:48 2010, ABELTJE wrote:
<div class="message-stanza open">&gt; &gt; On Sun Aug 29 12:03:34 2010, njh@bandsman.co.uk wrote:
<div class="message-stanza open">&gt; &gt; &gt; You can&#39;t use Test::Smoke to test whether Perl builds with a 
</div></div></div>different
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; compiler, because Test::Smoke ignores the values of CC and CFLAGS 
</div></div>in
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; your environment.
</div>&gt; &gt; 
&gt; &gt; Two options here:
&gt; &gt; 1&#41; use the -Dcc= and -Dccflags= options for configure
&gt; &gt; Put these options on a single line in the first section of the 
</div></div>build 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; configurations file &#40;perlcurrent.cfg&#41;; or &#40;preferred&#41; create a new 
&gt; &gt; configuration with its own build configurations file that has these 
&gt; &gt; options in a single section.
&gt; &gt; 
&gt; &gt; 2&#41; Create a new configuration, edit the .sh file and add the 
</div></div>environment 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; variables as needed.
</div>&gt; 
&gt; 
&gt; I tried option 1 - thanks for the suggestion.  However when I tried to
&gt; test I got this:
&gt; 
&gt; &#34;Skipping this smoke, patchlevel
&gt; &#40;7d6ecb1f6c7eabec011b66526161fcf678919c99&#41; did not change.&#34;
&gt; 
&gt; Which is not that helpful since I am trying with a different compiler,
&gt; so the test done with a different compiler is of no relevance.  Do you
&gt; think that the test result should include more than just the Perl
&gt; version? Would it not help me to at least include the compiler version
&gt; with the results?
</div>
If you run the smokes one after the other, you can set the second 
configuration to not do smartsmoke &#40;just edit the _config file&#41;.

PS: These are not really bugs, please just send me e-mail with 
questions.

Good luck,
-- Abe.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;29&nbsp;17:29:19&nbsp;2010</span>
    <span class="description">abeltje [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;07&nbsp;04:46:03&nbsp;2010</span>
    <span class="description">njh [...] bandsman.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #60857] Ignores CC and CFLAGS</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 07 Sep 2010 09:45:47 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-Smoke [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Nigel Horne &lt;njh [...] bandsman.co.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 29/08/10 22:29, Abe Timmerman via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt;&gt; You can&#39;t use Test::Smoke to test whether Perl builds with a
&gt;&gt;&gt;&gt;          
</div></div>&gt; different
&gt;    
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; compiler, because Test::Smoke ignores the values of CC and CFLAGS
&gt;&gt;&gt;&gt;          
</div></div>&gt; in
&gt;    
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; your environment.
&gt;&gt;&gt;&gt;          
</div>&gt;&gt;&gt; Two options here:
&gt;&gt;&gt; 1&#41; use the -Dcc= and -Dccflags= options for configure
&gt;&gt;&gt; Put these options on a single line in the first section of the
&gt;&gt;&gt;        
</div>&gt; build
&gt;    
<div class="message-stanza open">&gt;&gt;&gt; configurations file &#40;perlcurrent.cfg&#41;; or &#40;preferred&#41; create a new
&gt;&gt;&gt; configuration with its own build configurations file that has these
&gt;&gt;&gt; options in a single section.
&gt;&gt;&gt;        
</div></div>I tried this, but it still doesn&#39;t work.

As a test I created a new cfg file which has only one section:

-Duseithreads
-Dccflags=&#34;-Wall -O2 -pipe&#34;

But the logfile says:

   CCCMD =  cc -DPERL_CORE -c -DDEBUGGING -fno-strict-aliasing -pipe 
-I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  
-std=c89 -O2  -Wall -ansi -pedantic -W -Wextra 
-Wdeclaration-after-statement -Wendif-labels -Wc++-compat 
-DPERL_GCC_PEDANTIC

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; PS: These are not really bugs, please just send me e-mail with
&gt; questions.
&gt;    
</div>Unfortunately you forgot to mention what your email is, so I&#39;ve had to 
continue to use &#34;reply&#34;.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Good luck,
&gt; -- Abe.
&gt;    
</div>

-- 
Nigel Horne. Arranger, Adjudicator, Band Trainer, Composer, Tutor, Typesetter.
NJH Music, ICQ#20252325, twitter: @nigelhorne
njh@bandsman.co.uk <span class="clickylink"><a target="new" rel="nofollow" href="http://www.bandsman.co.uk">http://www.bandsman.co.uk</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;07&nbsp;04:46:03&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;07&nbsp;05:07:34&nbsp;2010</span>
    <span class="description">abe.timmerman [...] xs4all.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> njh [...] bandsman.co.uk</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #60857] Ignores CC and CFLAGS</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 07 Sep 2010 11:07:13 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-Smoke [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Abe Timmerman &lt;abe.timmerman [...] xs4all.nl&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 7-09-10 10:46, njh@bandsman.co.uk via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Test-Smoke
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=60857">https://rt.cpan.org/Ticket/Display.html?id=60857</a></span> &gt;
&gt; 
&gt; On 29/08/10 22:29, Abe Timmerman via RT wrote:
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt;&gt;&gt; You can&#39;t use Test::Smoke to test whether Perl builds with a
&gt;&gt;&gt;&gt;&gt;          
</div></div>&gt;&gt; different
&gt;&gt;    
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt; compiler, because Test::Smoke ignores the values of CC and CFLAGS
&gt;&gt;&gt;&gt;&gt;          
</div></div>&gt;&gt; in
&gt;&gt;    
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt; your environment.
&gt;&gt;&gt;&gt;&gt;          
</div>&gt;&gt;&gt;&gt; Two options here:
&gt;&gt;&gt;&gt; 1&#41; use the -Dcc= and -Dccflags= options for configure
&gt;&gt;&gt;&gt; Put these options on a single line in the first section of the
&gt;&gt;&gt;&gt;        
</div>&gt;&gt; build
&gt;&gt;    
<div class="message-stanza open">&gt;&gt;&gt;&gt; configurations file &#40;perlcurrent.cfg&#41;; or &#40;preferred&#41; create a new
&gt;&gt;&gt;&gt; configuration with its own build configurations file that has these
&gt;&gt;&gt;&gt; options in a single section.
&gt;&gt;&gt;&gt;        
</div></div>&gt; I tried this, but it still doesn&#39;t work.
&gt; 
&gt; As a test I created a new cfg file which has only one section:
&gt; 
&gt; -Duseithreads
&gt; -Dccflags=&#34;-Wall -O2 -pipe&#34;
</div>
Ah, it has to be in it&#39;s own section:

# Begin of .cfg
# Single line with all compiler flags
-Dccflags=&#39;-Wall -O2 -pipe&#39;
=

-Dusethreads
=
# Debug section

Build configurations are composed by combining all lines from all sections, in
the above example:

-Dccflags=&#39;-Wall -O2 -pipe&#39;
-Dccflags=&#39;-Wall -O2 -pipe&#39; -Dusethreads

checkout the chkbcfg.pl &lt;your.cfg&gt; it&#39;ll tell you what configs will be smoked.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; PS: These are not really bugs, please just send me e-mail with
&gt;&gt; questions.
&gt;&gt;    
</div>&gt; Unfortunately you forgot to mention what your email is, so I&#39;ve had to 
&gt; continue to use &#34;reply&#34;.
</div>
As for all CPAN authors: &lt;cpanid&gt;@cpan.org =&gt; abeltje@cpan.org
Also to be found in the Test::Smoke docs.

Thank you for your interest in Test::Smoke +
Good luck,

Abe.
-- 
 _  | &#34;Are you pondering what I&#39;m pondering?&#34;
&#40; &#41; | Well, I think so, Brain, but if Jimmy cracks corn, and no one cares,
 X  | why does he keep doing it? &#40;23 Nov 96 - A Little Off the Top&#41;
/ \ |
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;08&nbsp;04:26:46&nbsp;2010</span>
    <span class="description">njh [...] bandsman.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> njh [...] bandsman.co.uk</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed by using -Accflags instead of -Dccflags.

There seems to be no means to close this bug!!!  However it is now resolved.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;08&nbsp;05:22:22&nbsp;2010</span>
    <span class="description">abeltje [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
