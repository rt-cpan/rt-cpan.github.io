<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #107143 for Math-Round: round_even does not appear to work as advertised.  </title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #107143 for Math-Round: round_even does not appear to work as advertised.  </h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Math-Round/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Math-Round/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Math-Round/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Math-Round/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Math-Round">Math-Round CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">107143</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Math-Round/Active/">Math-Round</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jellisii [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-20916-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.06    </td>
  </tr>
  <tr id="CF-20917-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;17&nbsp;09:06:35&nbsp;2015</span>
    <span class="description">jellisii [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">round_even doesn&#39;t behave as expected.  example code:  
use strict;
use warnings;
use Math::Round qw&#40;round_even&#41;;
use v5.16;

# numbers are actual numbers that I use to do math on video geometry
# I&#39;m having to upscale some video to match other geometry.
# MP4 requires height and width be divisible by 2.
my $h1 = 480;
my $h2 = 368;
my $w = 640;

my $ratio = $h1/$h2;

my $upscaled_w = $w * $ratio;
say &#34;Raw upscale is $upscaled_w&#34;;
my $rounded = round_even&#40;$upscaled_w&#41;;
say &#34;Rounded upscale is $rounded&#34;;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;17&nbsp;09:11:14&nbsp;2015</span>
    <span class="description">jellisii [...] gmail.com -  Subject changed from &#40;no value&#41; to &#39;round_even does not appear to work as advertised.  &#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;17&nbsp;09:24:55&nbsp;2015</span>
    <span class="description">jellisii [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Sep 17 09:06:35 2015, jellisii wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; round_even doesn&#39;t behave as expected.  example code:  
&gt; use strict;
&gt; use warnings;
&gt; use Math::Round qw&#40;round_even&#41;;
&gt; use v5.16;
&gt; 
&gt; # numbers are actual numbers that I use to do math on video geometry
&gt; # I&#39;m having to upscale some video to match other geometry.
&gt; # MP4 requires height and width be divisible by 2.
&gt; my $h1 = 480;
&gt; my $h2 = 368;
&gt; my $w = 640;
&gt; 
&gt; my $ratio = $h1/$h2;
&gt; 
&gt; my $upscaled_w = $w * $ratio;
&gt; say &#34;Raw upscale is $upscaled_w&#34;;
&gt; my $rounded = round_even&#40;$upscaled_w&#41;;
&gt; say &#34;Rounded upscale is $rounded&#34;;
</div>
Above code, on my system, returns the following:
Raw upscale is 834.782608695652
Rounded upscale is 835.

I expect it to return 836, not 835.  

If the intention of the function is to only exclusively round .5 values to an even value, then this may be working as intended and I apologize for wasting your time. 

eellis@tc01:~/convert_e360$ perl -v

This is perl 5, version 18, subversion 2 &#40;v5.18.2&#41; built for x86_64-linux-gnu-thread-multi
&#40;with 41 registered patches, see perl -V for more detail&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;17&nbsp;09:35:50&nbsp;2015</span>
    <span class="description">jellisii [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Sep 17 09:24:55 2015, jellisii wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Thu Sep 17 09:06:35 2015, jellisii wrote:
<div class="message-stanza open">&gt; &gt; round_even doesn&#39;t behave as expected.  example code:
&gt; &gt; use strict;
&gt; &gt; use warnings;
&gt; &gt; use Math::Round qw&#40;round_even&#41;;
&gt; &gt; use v5.16;
&gt; &gt;
&gt; &gt; # numbers are actual numbers that I use to do math on video geometry
&gt; &gt; # I&#39;m having to upscale some video to match other geometry.
&gt; &gt; # MP4 requires height and width be divisible by 2.
&gt; &gt; my $h1 = 480;
&gt; &gt; my $h2 = 368;
&gt; &gt; my $w = 640;
&gt; &gt;
&gt; &gt; my $ratio = $h1/$h2;
&gt; &gt;
&gt; &gt; my $upscaled_w = $w * $ratio;
&gt; &gt; say &#34;Raw upscale is $upscaled_w&#34;;
&gt; &gt; my $rounded = round_even&#40;$upscaled_w&#41;;
&gt; &gt; say &#34;Rounded upscale is $rounded&#34;;
</div>&gt; 
&gt; Above code, on my system, returns the following:
&gt; Raw upscale is 834.782608695652
&gt; Rounded upscale is 835.
&gt; 
&gt; I expect it to return 836, not 835.
&gt; 
&gt; If the intention of the function is to only exclusively round .5
&gt; values to an even value, then this may be working as intended and I
&gt; apologize for wasting your time.
&gt; 
&gt; eellis@tc01:~/convert_e360$ perl -v
&gt; 
&gt; This is perl 5, version 18, subversion 2 &#40;v5.18.2&#41; built for x86_64-
&gt; linux-gnu-thread-multi
&gt; &#40;with 41 registered patches, see perl -V for more detail&#41;
</div>
I misspoke previously when I said &#34;I expect it to return 836, not 835&#34;.  That should be &#34;I expect it to return 834 or 836, not 835.&#34;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;17&nbsp;11:13:07&nbsp;2015</span>
    <span class="description">wgrommel [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #107143] round_even does not appear to work as advertised.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 17 Sep 2015 10:12:56 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-Round [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Geoffrey Rommel &lt;wgrommel [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The intent of round_even is indeed to round to the even number only when
the value ends with .5. Perhaps nearest&#40;2, $upscaled_w&#41; would yield the
desired result.


On Thu, Sep 17, 2015 at 8:35 AM, Eric Ellis via RT &lt;
bug-Math-Round@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Math-Round
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=107143">https://rt.cpan.org/Ticket/Display.html?id=107143</a></span> &gt;
&gt;
&gt; On Thu Sep 17 09:24:55 2015, jellisii wrote:
<div class="message-stanza open">&gt; &gt; On Thu Sep 17 09:06:35 2015, jellisii wrote:
<div class="message-stanza open">&gt; &gt; &gt; round_even doesn&#39;t behave as expected.  example code:
&gt; &gt; &gt; use strict;
&gt; &gt; &gt; use warnings;
&gt; &gt; &gt; use Math::Round qw&#40;round_even&#41;;
&gt; &gt; &gt; use v5.16;
&gt; &gt; &gt;
&gt; &gt; &gt; # numbers are actual numbers that I use to do math on video geometry
&gt; &gt; &gt; # I&#39;m having to upscale some video to match other geometry.
&gt; &gt; &gt; # MP4 requires height and width be divisible by 2.
&gt; &gt; &gt; my $h1 = 480;
&gt; &gt; &gt; my $h2 = 368;
&gt; &gt; &gt; my $w = 640;
&gt; &gt; &gt;
&gt; &gt; &gt; my $ratio = $h1/$h2;
&gt; &gt; &gt;
&gt; &gt; &gt; my $upscaled_w = $w * $ratio;
&gt; &gt; &gt; say &#34;Raw upscale is $upscaled_w&#34;;
&gt; &gt; &gt; my $rounded = round_even&#40;$upscaled_w&#41;;
&gt; &gt; &gt; say &#34;Rounded upscale is $rounded&#34;;
</div>&gt; &gt;
&gt; &gt; Above code, on my system, returns the following:
&gt; &gt; Raw upscale is 834.782608695652
&gt; &gt; Rounded upscale is 835.
&gt; &gt;
&gt; &gt; I expect it to return 836, not 835.
&gt; &gt;
&gt; &gt; If the intention of the function is to only exclusively round .5
&gt; &gt; values to an even value, then this may be working as intended and I
&gt; &gt; apologize for wasting your time.
&gt; &gt;
&gt; &gt; eellis@tc01:~/convert_e360$ perl -v
&gt; &gt;
&gt; &gt; This is perl 5, version 18, subversion 2 &#40;v5.18.2&#41; built for x86_64-
&gt; &gt; linux-gnu-thread-multi
&gt; &gt; &#40;with 41 registered patches, see perl -V for more detail&#41;
</div>&gt;
&gt; I misspoke previously when I said &#34;I expect it to return 836, not 835&#34;.
&gt; That should be &#34;I expect it to return 834 or 836, not 835.&#34;
&gt;
&gt;
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;17&nbsp;11:13:08&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
