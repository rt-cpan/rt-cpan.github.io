<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #120587 for DBD-Informix: Informix panic if username and password are specified in connection string</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #120587 for DBD-Informix: Informix panic if username and password are specified in connection string</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-Informix/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-Informix/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-Informix/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-Informix/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-Informix">DBD-Informix CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">120587</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-Informix/Active/">DBD-Informix</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">j.leffler [...] acm.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jross [...] openvistas.net

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10124-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10125-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;11&nbsp;15:49:11&nbsp;2017</span>
    <span class="description">jross [...] openvistas.net -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Informix panic if username and password are specified in connection string</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 11 Mar 2017 13:41:59 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-Informix [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeff Ross &lt;jross [...] openvistas.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello!

[informix@849341-CRN1 ~]$ /opt/tms/bin/InformixTechSupport -V
Perl Version 5.024000
DBI Version 1.636
DBD::Informix Version 2015.1101
IBM Informix CSDK Version 4.10, IBM Informix-ESQL Version 4.10.FC5DE

This is on CentOS Linux release 7.3.1611 &#40;Core&#41;.

If I specify the username and password in the connection string the 
informix engine crashes every time.  Leaving username and password empty 
works fine.

Example:

#!/usr/bin/perl

use warnings;
use strict;
use DBI;


my $hostname = &#39;web@cargonet_dbi4&#39;;
my $dbh = DBI-&gt;connect
           &#40;
              &#34;DBI:Informix:&#34;.$hostname,
              &#39;nobody&#39;,
              &#39;mailonly66&#39;,
              { PrintError =&gt; 0, RaiseError =&gt; 1, AutoCommit =&gt; 0 }
           &#41;;

# ----------------
# open transaction
# ----------------
$dbh-&gt;do&#40;&#34;begin&#34;&#41;;

# --------------------------------------
# prepare and execute &#39;select&#39; statement
# --------------------------------------
my $sth1 =$dbh-&gt;prepare&#40;&#34;select max&#40;id&#41; as id from load;&#34;&#41;;
$sth1-&gt;execute&#40;&#41;;

# ---------------------
# fetch thru result set
# ---------------------
while &#40;my $row = $sth1-&gt;fetchrow_hashref&#40;&#41;&#41;
{

    # --------
    # show row
    # --------
    print sprintf&#40;&#34;%-2s \n&#34;, $row-&gt;{id}&#41;;

}

# ---------------------------------------
# commit transaction and close connection
# ---------------------------------------
$dbh-&gt;do&#40;&#34;commit&#34;&#41;;
$dbh-&gt;disconnect&#40;&#41;;

exit 0;

the online.log on the informix server shows this:15:08:06 Maximum server 
connections 1
15:08:06  Checkpoint Statistics - Avg. Txn Block Time 0.000, # Txns 
blocked 0, Plog used 41, Llog used 23

15:18:09  stack trace for pid 34640 written to 
/opt/IBM/informix/tmp/af.4c45b81
15:18:09  Assert Failed: No Exception Handler
15:18:09  IBM Informix Dynamic Server Version 11.10.FC2
15:18:09   Who: Session&#40;30, nobody@849341-CRN1.cargotel.com, 8486, 
0x1ae5ec15b8&#41;
         Thread&#40;220, sqlexec, 1ae5e81058, 3&#41;
         File: mtex.c Line: 475
15:18:09   Results: Exception Caught. Type: MT_EX_OS, Context: mem
15:18:09   Action: Please notify IBM Informix Technical Support.
15:18:09   See Also: /opt/IBM/informix/tmp/af.4c45b81
15:18:15  mtex.c, line 475, thread 220, proc id 34640, No Exception Handler.
tail: cannot open &#39;+4&#39; for reading: No such file or directory
grep: write error: Broken pipe
postdrop: warning: uid=504: File too large
send-mail: fatal: informix&#40;504&#41;: message file too big
15:18:15  Fatal error in ADM VP at mt.c:13388
15:18:15  Unexpected virtual processor termination, pid = 34640, exit = 
0x100

tail: cannot open &#39;+4&#39; for reading: No such file or directory
grep: write error: Broken pipe
15:18:15  PANIC: Attempting to bring system down

The panic trace file can be downloaded from

<span class="clickylink"><a target="new" rel="nofollow" href="http://cargotel-informix-panic.s3.amazonaws.com/af.4c45b81">http://cargotel-informix-panic.s3.amazonaws.com/af.4c45b81</a></span>

Using the same script but changing the connection string to:

my $dbh = DBI-&gt;connect
           &#40;
              &#34;DBI:Informix:&#34;.$hostname,
              &#39;&#39;,
              &#39;&#39;,
              { PrintError =&gt; 0, RaiseError =&gt; 1, AutoCommit =&gt; 0 }
           &#41;;

works fine.

[rossj@849341-CRN1 ~]$ perl test_connection.pl
5911073

We do not have this problem on CentOS 5 or CentOS 6.

Thanks!

Jeff Ross
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;11&nbsp;20:27:47&nbsp;2017</span>
    <span class="description">j.leffler [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> jonathan.leffler [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Mar 11 12:49:11 2017, jross@openvistas.net wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello!
&gt; 
&gt; [informix@849341-CRN1 ~]$ /opt/tms/bin/InformixTechSupport -V
&gt; Perl Version 5.024000
&gt; DBI Version 1.636
&gt; DBD::Informix Version 2015.1101
&gt; IBM Informix CSDK Version 4.10, IBM Informix-ESQL Version 4.10.FC5DE
&gt; 
&gt; This is on CentOS Linux release 7.3.1611 &#40;Core&#41;.
&gt; 
&gt; If I specify the username and password in the connection string the 
&gt; informix engine crashes every time.  Leaving username and password empty 
&gt; works fine.
&gt; 
&gt; Example:
&gt; 
&gt; #!/usr/bin/perl
&gt; 
&gt; use warnings;
&gt; use strict;
&gt; use DBI;
&gt; 
&gt; 
&gt; my $hostname = &#39;web@cargonet_dbi4&#39;;
&gt; my $dbh = DBI-&gt;connect
&gt;            &#40;
&gt;               &#34;DBI:Informix:&#34;.$hostname,
&gt;               &#39;nobody&#39;,
&gt;               &#39;mailonly66&#39;,
&gt;               { PrintError =&gt; 0, RaiseError =&gt; 1, AutoCommit =&gt; 0 }
&gt;            &#41;;
&gt; 
&gt; # ----------------
&gt; # open transaction
&gt; # ----------------
&gt; $dbh-&gt;do&#40;&#34;begin&#34;&#41;;
&gt; 
&gt; # --------------------------------------
&gt; # prepare and execute &#39;select&#39; statement
&gt; # --------------------------------------
&gt; my $sth1 =$dbh-&gt;prepare&#40;&#34;select max&#40;id&#41; as id from load;&#34;&#41;;
&gt; $sth1-&gt;execute&#40;&#41;;
&gt; 
&gt; # ---------------------
&gt; # fetch thru result set
&gt; # ---------------------
&gt; while &#40;my $row = $sth1-&gt;fetchrow_hashref&#40;&#41;&#41;
&gt; {
&gt; 
&gt;     # --------
&gt;     # show row
&gt;     # --------
&gt;     print sprintf&#40;&#34;%-2s \n&#34;, $row-&gt;{id}&#41;;
&gt; 
&gt; }
&gt; 
&gt; # ---------------------------------------
&gt; # commit transaction and close connection
&gt; # ---------------------------------------
&gt; $dbh-&gt;do&#40;&#34;commit&#34;&#41;;
&gt; $dbh-&gt;disconnect&#40;&#41;;
&gt; 
&gt; exit 0;
&gt; 
&gt; the online.log on the informix server shows this:15:08:06 Maximum server 
&gt; connections 1
&gt; 15:08:06  Checkpoint Statistics - Avg. Txn Block Time 0.000, # Txns 
&gt; blocked 0, Plog used 41, Llog used 23
&gt; 
&gt; 15:18:09  stack trace for pid 34640 written to 
&gt; /opt/IBM/informix/tmp/af.4c45b81
&gt; 15:18:09  Assert Failed: No Exception Handler
&gt; 15:18:09  IBM Informix Dynamic Server Version 11.10.FC2
&gt; 15:18:09   Who: Session&#40;30, nobody@849341-CRN1.cargotel.com, 8486, 
&gt; 0x1ae5ec15b8&#41;
&gt;          Thread&#40;220, sqlexec, 1ae5e81058, 3&#41;
&gt;          File: mtex.c Line: 475
&gt; 15:18:09   Results: Exception Caught. Type: MT_EX_OS, Context: mem
&gt; 15:18:09   Action: Please notify IBM Informix Technical Support.
&gt; 15:18:09   See Also: /opt/IBM/informix/tmp/af.4c45b81
&gt; 15:18:15  mtex.c, line 475, thread 220, proc id 34640, No Exception Handler.
&gt; tail: cannot open &#39;+4&#39; for reading: No such file or directory
&gt; grep: write error: Broken pipe
&gt; postdrop: warning: uid=504: File too large
&gt; send-mail: fatal: informix&#40;504&#41;: message file too big
&gt; 15:18:15  Fatal error in ADM VP at mt.c:13388
&gt; 15:18:15  Unexpected virtual processor termination, pid = 34640, exit = 
&gt; 0x100
&gt; 
&gt; tail: cannot open &#39;+4&#39; for reading: No such file or directory
&gt; grep: write error: Broken pipe
&gt; 15:18:15  PANIC: Attempting to bring system down
&gt; 
&gt; The panic trace file can be downloaded from
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://cargotel-informix-panic.s3.amazonaws.com/af.4c45b81">http://cargotel-informix-panic.s3.amazonaws.com/af.4c45b81</a></span>
&gt; 
&gt; Using the same script but changing the connection string to:
&gt; 
&gt; my $dbh = DBI-&gt;connect
&gt;            &#40;
&gt;               &#34;DBI:Informix:&#34;.$hostname,
&gt;               &#39;&#39;,
&gt;               &#39;&#39;,
&gt;               { PrintError =&gt; 0, RaiseError =&gt; 1, AutoCommit =&gt; 0 }
&gt;            &#41;;
&gt; 
&gt; works fine.
&gt; 
&gt; [rossj@849341-CRN1 ~]$ perl test_connection.pl
&gt; 5911073
&gt; 
&gt; We do not have this problem on CentOS 5 or CentOS 6.
</div>


Hi Jeff,

I&#39;m sorry you&#39;re running into this problem.  I&#39;ll be closing your second bug report as it should have been added as a comment to this one.  Thanks for the extra information.  Because DBD::Informix does not attempt to pass either username or password unless both are specified, it is no surprise that setting one or the other but not both works.

According to the extract from the Informix log file, you&#39;re using Informix 11.10 in the database server. That is very old &#40;released 2007&#41; and is an officially unsupported version of Informix.  The oldest version that&#39;s supported by IBM is 11.50 — it might even be 11.70 now; the current version is 12.10.  You are using CSDK 4.10, which the the version associated with Informix 12.10.

Clearly, you should not be able to crash the server.  However, the server should not be crashing; nothing that can be done from a client program should crash the server.  In the ordinary course of events, I&#39;d encourage you to brush off your support for Informix and contact IBM/Informix Tech Support to get a server fix.  However, given that the software is no longer supported by IBM, you&#39;ll have to go for the other recommended alternative — upgrade to a newer, supported version of Informix, such as 12.10.

Given that there is going to be resistance to upgrading, you&#39;re going to want to know what can be done by DBD::Informix.  Ultimately, DBD::Informix can&#39;t prevent the server crashing.  The obvious workaround is to use trusted connections without a username and password — not ideal, but known to work.

It would be possible to hack DBD::Informix so that it ignores the username and password and connects as if neither had been supplied.  This would at least get any existing scripts that supply user credentials running again.
Hmmm; that&#39;s amusing — that last change in esqlc_v6.ec was made in 2007.

You could apply this patch to that file:

--- old.esqlc_v6.ec     2017-03-11 16:54:39.000000000 -0800
+++ esqlc_v6.ec 2017-03-11 16:55:02.000000000 -0800
@@ -81,6 +81,9 @@
        EXEC SQL END DECLARE SECTION;
        Boolean         conn_ok = False;
 
+    user = 0;
+    pass = 0;
+
        if &#40;user != &#40;char *&#41;0 &#38;&#38; pass != &#40;char *&#41;0&#41;
        {
                /* User name and password provided */


It might leave some compilation warnings, but otherwise does the job.  Golly, this is old code; it still has tabs in the source.  I gave up on that about ten years ago.

If you need to use a username and password but the server crashes, we&#39;re into more difficult territory.  What changed in Centos 7 compared with  Centos 5 &#38; 6?  Have you tried connecting to the Informix database with username and password using any other programs?  Does the esqlbasic program work?  &#40;It doesn&#39;t test connections with username and password, so it is only a minimally indicative test.&#41;. Suppose you run DB-Access; can you connect with a username and password?  If you use the connect option, it allows you to specify the server name to connect to, and then you can specify the username and password too.   Does that crash the server?

Assuming DB-Access doesn&#39;t crash the server, and that it is version 11.10 &#40;dbaccess -V&#41;, then we&#39;re going to need to see whether the new CSDK is at fault somehow.  For that, you need a custom program:

/* RT 120587 - IDS 11.10 crashing on Centos 7 &#40;OK on Centos 5 &#38; 6&#41; */
#include &lt;stdio.h&gt;

int main&#40;int argc, char **argv&#41;
{
    EXEC SQL BEGIN DECLARE SECTION;
    char *dbname = &#34;stores&#34;;
    char *user = &#34;informix&#34;;
    char *pass = &#34;informix&#34;;
    EXEC SQL END DECLARE SECTION;

    if &#40;argc &gt; 4&#41;
    {
        fprintf&#40;stderr, &#34;Usage: %s [database@server [username [password]]]\n&#34;, argv[0]&#41;;
        return 1;
    }
    if &#40;argc &gt; 1&#41;
        dbname = argv[1];
    if &#40;argc &gt; 2&#41;
        user = argv[2];
    if &#40;argc &gt; 3&#41;
        pass = argv[3];

    if &#40;argc != 4&#41;
        fprintf&#40;stderr, &#34;Connecting with default password &#39;%s&#39; - this had better fail!\n&#34;, pass&#41;;

    EXEC SQL CONNECT TO :dbname USER :user USING :pass;
    if &#40;sqlca.sqlcode != 0&#41;
    {
        fprintf&#40;stderr, &#34;Failed to connect to &#39;%s&#39; with username &#39;%s&#39; and given password\n&#34;,
                dbname, user&#41;;
        return 1;
    }
    else
    {
        printf&#40;&#34;Successfully connected to &#39;%s&#39; with username &#39;%s&#39; and given password\n&#34;,
                dbname, user&#41;;
    }
    return 0;
}


I called it &#39;server-crash.ec&#39; and compiled it into &#39;server-crash&#39;.  It didn&#39;t crash my server, whether I gave a valid password or not.  You&#39;re expected to run &#39;server-crash stores@centos_7 youruser chosenpassword&#39;, but be cautious about who you have around when typing the password as an argument, and clean up shell histories, etc.  If the server crashes with that code and not with DB-Access, then we can provisionally point the finger at the CSDK &#40;ESQL/C&#41; code — it isn&#39;t backwards compatible with IDS 11.10, it would seem.  That&#39;s unusual; it normally works with very old server versions, but it could be an issue by accident.

We might then need to review whether your using shared memory, sockets or some other connection method.  Can you connect safely using a different type of connection.  If you&#39;ve not already configured multiple mechanisms, you will have to restart Informix to add them &#40;but since it is crashing, that probably isn&#39;t a major problem&#41;.  If you need assistance with this testing, please contact me again.

At this point, you&#39;ve probably drowned in all the information.  I&#39;m sorry, but I&#39;m trying to cover a lot of bases all at once in the faint hope that I&#39;ll cover all that&#39;s necessary to resolve the problem.  I doubt if I&#39;ll have succeeded, but you&#39;ve seen some ideas, etc.

If you need more assistance, you may copy my Gmail account.  You should also include information from your sqlhosts file &#40;and the relevant service entries in /etc/services if you&#39;re using that&#41;.  In fact, you should provide most of the information that is request in the notes on how to report bugs.  You might use the BugReport script — the most basic &#39;perl BugReport&#39; would show most of the information I need.

Hope this has helped somewhat — at least in pointing how to go further to resolving the problem.


-- 
Jonathan Leffler &lt;jonathan.leffler@gmail.com&gt;
Guardian of DBD::Informix 2015.1101 -- see <span class="clickylink"><a target="new" rel="nofollow" href="http://dbi.perl.org/">http://dbi.perl.org/</a></span>
  &#34;I don&#39;t suffer from insanity - I enjoy every minute of it!&#34;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;11&nbsp;20:27:48&nbsp;2017</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;11&nbsp;20:28:54&nbsp;2017</span>
    <span class="description">j.leffler [...] acm.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
