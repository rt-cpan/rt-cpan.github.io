<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #117676 for dan: ${^ENCODING} is no longer supported</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #117676 for dan: ${^ENCODING} is no longer supported</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/dan/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/dan/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/dan/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/dan/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/dan">dan CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">117676</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/dan/Active/">dan</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
SREZIC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-219914-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.551.2    </td>
  </tr>
  <tr id="CF-219915-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;08&nbsp;19:31:56&nbsp;2016</span>
    <span class="description">SREZIC [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> ${^ENCODING} is no longer supported</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Tests fail with bleadperl &#40;e.g. perl 5.25.4&#41;:

PERL_DL_NONLAZY=1 &#34;/bbbike/perl-5.25.4/bin/perl5.25.4&#34; &#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches; test_harness&#40;0, &#39;inc&#39;, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
${^ENCODING} is no longer supported at /tmpfs/.cpan-build-cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.
t/00_compile.t .. ok
${^ENCODING} is no longer supported at /tmpfs/.cpan-build-cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.
${^ENCODING} is no longer supported at /tmpfs/.cpan-build-cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.
${^ENCODING} is no longer supported at /tmpfs/.cpan-build-cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.

#   Failed test at t/01_literal.t line 10.
#          got: &#39;foo&#39;
#     expected: &#39;bar&#39;

#   Failed test at t/01_literal.t line 13.
#          got: &#39;foo&#39;
#     expected: &#39;&#39;

#   Failed test at t/01_literal.t line 15.
#          got: &#39;foo&#39;
#     expected: &#39;&#39;

#   Failed test at t/01_literal.t line 24.
#          got: &#39;foo&#39;
#     expected: &#39;&#39;

#   Failed test at t/01_literal.t line 30.
#          got: &#39;ls&#39;
#     expected: &#39;else&#39;

#   Failed test at t/01_literal.t line 31.
#          got: &#39;ls&#39;
#     expected: &#39;&#39;
# Looks like you failed 6 tests of 9.
t/01_literal.t .. 
Dubious, test returned 6 &#40;wstat 1536, 0x600&#41;
Failed 6/9 subtests 
${^ENCODING} is no longer supported at /tmpfs/.cpan-build-cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.
${^ENCODING} is no longer supported at /tmpfs/.cpan-build-cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.

#   Failed test at t/02_utf8.t line 15.
#          got: &#39;foo&#39;
#     expected: &#39;&#39;

#   Failed test at t/02_utf8.t line 20.
#          got: &#39;foo&#39;
#     expected: &#39;&#39;
# Looks like you failed 2 tests of 6.
t/02_utf8.t ..... 
Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
Failed 2/6 subtests 
${^ENCODING} is no longer supported at /tmpfs/.cpan-build-cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.

#   Failed test at t/03_cat.t line 12.
#          got: &#39;Jcode&#39;
#     expected: &#39;Encode&#39;
# Looks like you failed 1 test of 3.
t/03_cat.t ...... 
Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/3 subtests 
${^ENCODING} is no longer supported at /tmpfs/.cpan-build-cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.
${^ENCODING} is no longer supported at /tmpfs/.cpan-build-cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.
${^ENCODING} is no longer supported at /tmpfs/.cpan-build-cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.

#   Failed test at t/04_regexp.t line 12.

#   Failed test at t/04_regexp.t line 24.

#   Failed test at t/04_regexp.t line 27.
#          got: undef
#     expected: &#39;foo&#39;

#   Failed test at t/04_regexp.t line 28.
#          got: undef
#     expected: &#39;foo&#39;

#   Failed test at t/04_regexp.t line 34.
#          got: &#39;soozy&#39;
#     expected: anything else

#   Failed test at t/04_regexp.t line 35.
#          got: &#39;soozy&#39;
#     expected: &#39;boofy&#39;
# Looks like you failed 6 tests of 6.
t/04_regexp.t ... 
Dubious, test returned 6 &#40;wstat 1536, 0x600&#41;
Failed 6/6 subtests 
${^ENCODING} is no longer supported at /tmpfs/.cpan-build-cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.

#   Failed test at t/05_list.t line 8.
#          got: &#39;3&#39;
#     expected: &#39;0&#39;
# Looks like you failed 1 test of 2.
t/05_list.t ..... 
Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/2 subtests 
t/06_dan_the.t .. ok
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;08&nbsp;19:33:48&nbsp;2016</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2016-09-08 19:31:56, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Tests fail with bleadperl &#40;e.g. perl 5.25.4&#41;:
&gt; 
&gt; PERL_DL_NONLAZY=1 &#34;/bbbike/perl-5.25.4/bin/perl5.25.4&#34; &#34;-
&gt; MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef
&gt; *Test::Harness::Switches; test_harness&#40;0, &#39;inc&#39;, &#39;blib/lib&#39;,
&gt; &#39;blib/arch&#39;&#41;&#34; t/*.t
&gt; ${^ENCODING} is no longer supported at /tmpfs/.cpan-build-
&gt; cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.
&gt; t/00_compile.t .. ok
&gt; ${^ENCODING} is no longer supported at /tmpfs/.cpan-build-
&gt; cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.
&gt; ${^ENCODING} is no longer supported at /tmpfs/.cpan-build-
&gt; cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.
&gt; ${^ENCODING} is no longer supported at /tmpfs/.cpan-build-
&gt; cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.
&gt; 
&gt; #   Failed test at t/01_literal.t line 10.
&gt; #          got: &#39;foo&#39;
&gt; #     expected: &#39;bar&#39;
&gt; 
&gt; #   Failed test at t/01_literal.t line 13.
&gt; #          got: &#39;foo&#39;
&gt; #     expected: &#39;&#39;
&gt; 
&gt; #   Failed test at t/01_literal.t line 15.
&gt; #          got: &#39;foo&#39;
&gt; #     expected: &#39;&#39;
&gt; 
&gt; #   Failed test at t/01_literal.t line 24.
&gt; #          got: &#39;foo&#39;
&gt; #     expected: &#39;&#39;
&gt; 
&gt; #   Failed test at t/01_literal.t line 30.
&gt; #          got: &#39;ls&#39;
&gt; #     expected: &#39;else&#39;
&gt; 
&gt; #   Failed test at t/01_literal.t line 31.
&gt; #          got: &#39;ls&#39;
&gt; #     expected: &#39;&#39;
&gt; # Looks like you failed 6 tests of 9.
&gt;  t/01_literal.t ..
&gt; Dubious, test returned 6 &#40;wstat 1536, 0x600&#41;
&gt;  Failed 6/9 subtests
&gt; ${^ENCODING} is no longer supported at /tmpfs/.cpan-build-
&gt; cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.
&gt; ${^ENCODING} is no longer supported at /tmpfs/.cpan-build-
&gt; cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.
&gt; 
&gt; #   Failed test at t/02_utf8.t line 15.
&gt; #          got: &#39;foo&#39;
&gt; #     expected: &#39;&#39;
&gt; 
&gt; #   Failed test at t/02_utf8.t line 20.
&gt; #          got: &#39;foo&#39;
&gt; #     expected: &#39;&#39;
&gt; # Looks like you failed 2 tests of 6.
&gt;  t/02_utf8.t .....
&gt; Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
&gt;  Failed 2/6 subtests
&gt; ${^ENCODING} is no longer supported at /tmpfs/.cpan-build-
&gt; cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.
&gt; 
&gt; #   Failed test at t/03_cat.t line 12.
&gt; #          got: &#39;Jcode&#39;
&gt; #     expected: &#39;Encode&#39;
&gt; # Looks like you failed 1 test of 3.
&gt;  t/03_cat.t ......
&gt; Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
&gt;  Failed 1/3 subtests
&gt; ${^ENCODING} is no longer supported at /tmpfs/.cpan-build-
&gt; cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.
&gt; ${^ENCODING} is no longer supported at /tmpfs/.cpan-build-
&gt; cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.
&gt; ${^ENCODING} is no longer supported at /tmpfs/.cpan-build-
&gt; cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.
&gt; 
&gt; #   Failed test at t/04_regexp.t line 12.
&gt; 
&gt; #   Failed test at t/04_regexp.t line 24.
&gt; 
&gt; #   Failed test at t/04_regexp.t line 27.
&gt; #          got: undef
&gt; #     expected: &#39;foo&#39;
&gt; 
&gt; #   Failed test at t/04_regexp.t line 28.
&gt; #          got: undef
&gt; #     expected: &#39;foo&#39;
&gt; 
&gt; #   Failed test at t/04_regexp.t line 34.
&gt; #          got: &#39;soozy&#39;
&gt; #     expected: anything else
&gt; 
&gt; #   Failed test at t/04_regexp.t line 35.
&gt; #          got: &#39;soozy&#39;
&gt; #     expected: &#39;boofy&#39;
&gt; # Looks like you failed 6 tests of 6.
&gt;  t/04_regexp.t ...
&gt; Dubious, test returned 6 &#40;wstat 1536, 0x600&#41;
&gt;  Failed 6/6 subtests
&gt; ${^ENCODING} is no longer supported at /tmpfs/.cpan-build-
&gt; cpansand/2016090821/dan-0.551.2-0/blib/lib/dan.pm line 55.
&gt; 
&gt; #   Failed test at t/05_list.t line 8.
&gt; #          got: &#39;3&#39;
&gt; #     expected: &#39;0&#39;
&gt; # Looks like you failed 1 test of 2.
&gt;  t/05_list.t .....
&gt; Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
&gt;  Failed 1/2 subtests
&gt; t/06_dan_the.t .. ok
</div>
With 5.25.2 it still passes, 5.25.3 is the first perl version which is causing failures.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;13&nbsp;15:36:02&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Sep 08 19:31:56 2016, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Tests fail with bleadperl &#40;e.g. perl 5.25.4&#41;:
</div>
I don’t really understand what the module is trying to do.  It looks to me like a joke module that is hooking the upgrading of strings to rewrite their contents completely. That’s precisely the mechanism that got deprecated and removed from perl, because it was not applied consistently throughout the perl core &#40;making the behaviour of ‘use encoding’ and the ${^ENCODING} variable drift randomly over time&#41; and because it resulted in a broken string model, in which chr&#40;0xb9&#41; ne chr&#40;0xb9&#41; could be true, depending on the *internal* encoding of the operands.

I think this module was deliberately depending on such a broken model for fun, so it’s unfixable.

Then again, I may have misread the code.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;13&nbsp;15:36:02&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
