<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #92828 for Dist-Zilla-Plugin-CopyFilesFromBuild: dzil dies when files are added multiple times</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #92828 for Dist-Zilla-Plugin-CopyFilesFromBuild: dzil dies when files are added multiple times</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Dist-Zilla-Plugin-CopyFilesFromBuild/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Dist-Zilla-Plugin-CopyFilesFromBuild/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Dist-Zilla-Plugin-CopyFilesFromBuild/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Dist-Zilla-Plugin-CopyFilesFromBuild/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Dist-Zilla-Plugin-CopyFilesFromBuild">Dist-Zilla-Plugin-CopyFilesFromBuild CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">92828</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Dist-Zilla-Plugin-CopyFilesFromBuild/Active/">Dist-Zilla-Plugin-CopyFilesFromBuild</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
NGLENN [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-236006-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-236007-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;07&nbsp;18:59:56&nbsp;2014</span>
    <span class="description">NGLENN [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> dzil dies when files are added multiple times</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I happily used this module to copy a README, LICENSE, and cpanfile into my project root. However, the next time I ran dzil build, dzil died because it grabbed the files from the project root and then tried to add them again through this plugin. Here are the messages I got:

[DZ] attempt to add cpanfile multiple times; added by: GatherDir &#40;Dist::Zilla::Plugin::GatherDir line 100&#41;; CPANFile &#40;Dist::Zilla::Plugin::CPANFile line 65&#41;
[DZ] attempt to add LICENSE multiple times; added by: GatherDir &#40;Dist::Zilla::Plugin::GatherDir line 100&#41;; License &#40;Dist::Zilla::Plugin::License line 22&#41;
[DZ] attempt to add Makefile.PL multiple times; added by: GatherDir &#40;Dist::Zilla::Plugin::GatherDir line 100&#41;; MakeMaker &#40;Dist::Zilla::Plugin::MakeMaker line 25
2&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;07&nbsp;19:08:44&nbsp;2014</span>
    <span class="description">RTHOMPSON [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Feb 07 18:59:56 2014, NGLENN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I happily used this module to copy a README, LICENSE, and cpanfile
&gt; into my project root. However, the next time I ran dzil build, dzil
&gt; died because it grabbed the files from the project root and then tried
&gt; to add them again through this plugin. Here are the messages I got:
&gt; 
&gt; [DZ] attempt to add cpanfile multiple times; added by: GatherDir
&gt; &#40;Dist::Zilla::Plugin::GatherDir line 100&#41;; CPANFile
&gt; &#40;Dist::Zilla::Plugin::CPANFile line 65&#41;
&gt; [DZ] attempt to add LICENSE multiple times; added by: GatherDir
&gt; &#40;Dist::Zilla::Plugin::GatherDir line 100&#41;; License
&gt; &#40;Dist::Zilla::Plugin::License line 22&#41;
&gt; [DZ] attempt to add Makefile.PL multiple times; added by: GatherDir
&gt; &#40;Dist::Zilla::Plugin::GatherDir line 100&#41;; MakeMaker
&gt; &#40;Dist::Zilla::Plugin::MakeMaker line 25
&gt; 2&#41;
</div>

Maybe dzil was modified to disallow adding the same file twice? The only solution I can think of is to add these files to the &#34;exclude_filename&#34; option of GatherDir.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;07&nbsp;19:08:45&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;07&nbsp;19:33:49&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2014-02-07 16:08:44, RTHOMPSON wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Maybe dzil was modified to disallow adding the same file twice? The
&gt; only solution I can think of is to add these files to the
&gt; &#34;exclude_filename&#34; option of GatherDir.
</div>

You&#39;re right on both counts - you can&#39;t add a file twice, by any mechanism, and you&#39;re both gathering the existing file in the repo &#40;by [GatherDir] or [Git::GatherDir]&#41; as well as [ReadmeAnyFromPod] attempting to create a new one.  The answer indeed is to tell GatherDir to skip this file.

e.g. see what I&#39;m doing here:

<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/ETHER/Dist-Zilla-PluginBundle-Author-ETHER-0.049/lib/Dist/Zilla/PluginBundle/Author/ETHER.pm#L332">https://metacpan.org/source/ETHER/Dist-Zilla-PluginBundle-Author-ETHER-0.049/lib/Dist/Zilla/PluginBundle/Author/ETHER.pm#L332</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;07&nbsp;19:36:59&nbsp;2014</span>
    <span class="description">RTHOMPSON [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Feb 07 19:33:49 2014, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2014-02-07 16:08:44, RTHOMPSON wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; Maybe dzil was modified to disallow adding the same file twice? The
&gt; &gt; only solution I can think of is to add these files to the
&gt; &gt; &#34;exclude_filename&#34; option of GatherDir.
</div>&gt; 
&gt; 
&gt; You&#39;re right on both counts - you can&#39;t add a file twice, by any
&gt; mechanism, and you&#39;re both gathering the existing file in the repo &#40;by
&gt; [GatherDir] or [Git::GatherDir]&#41; as well as [ReadmeAnyFromPod]
&gt; attempting to create a new one.  The answer indeed is to tell
&gt; GatherDir to skip this file.
&gt; 
&gt; e.g. see what I&#39;m doing here:
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/ETHER/Dist-Zilla-PluginBundle-Author-">https://metacpan.org/source/ETHER/Dist-Zilla-PluginBundle-Author-</a></span>
&gt; ETHER-0.049/lib/Dist/Zilla/PluginBundle/Author/ETHER.pm#L332
</div>

Semi-unrelated question: what&#39;s the difference between CopyFileFromBuild and CopyFilesFromRelease? I guess the latter only triggers when you actually make a release instead of on every build?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;07&nbsp;19:42:48&nbsp;2014</span>
    <span class="description">garfieldnate [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> NGLENN [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #92828] dzil dies when files are added multiple times</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 7 Feb 2014 16:42:35 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Dist-Zilla-Plugin-CopyFilesFromBuild [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Nathan Glenn &lt;garfieldnate [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks Karen. That does fix the problem but it violates DRY. Now if I
change the settings for one plugin I also have to change them for the other.
I&#39;m not sure what the diff is between this and that other plugin...

I think a simple &#34;clobber&#34; or &#34;write_over&#34; or &#34;replace&#34; = 1 option would be
very helpful for this plugin.


On Fri, Feb 7, 2014 at 4:36 PM, Ryan C. Thompson via RT &lt;
bug-Dist-Zilla-Plugin-CopyFilesFromBuild@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=92828">https://rt.cpan.org/Ticket/Display.html?id=92828</a></span> &gt;
&gt;
&gt; On Fri Feb 07 19:33:49 2014, ETHER wrote:
<div class="message-stanza open">&gt; &gt; On 2014-02-07 16:08:44, RTHOMPSON wrote:
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; Maybe dzil was modified to disallow adding the same file twice? The
&gt; &gt; &gt; only solution I can think of is to add these files to the
&gt; &gt; &gt; &#34;exclude_filename&#34; option of GatherDir.
</div>&gt; &gt;
&gt; &gt;
&gt; &gt; You&#39;re right on both counts - you can&#39;t add a file twice, by any
&gt; &gt; mechanism, and you&#39;re both gathering the existing file in the repo &#40;by
&gt; &gt; [GatherDir] or [Git::GatherDir]&#41; as well as [ReadmeAnyFromPod]
&gt; &gt; attempting to create a new one.  The answer indeed is to tell
&gt; &gt; GatherDir to skip this file.
&gt; &gt;
&gt; &gt; e.g. see what I&#39;m doing here:
&gt; &gt;
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/ETHER/Dist-Zilla-PluginBundle-Author-">https://metacpan.org/source/ETHER/Dist-Zilla-PluginBundle-Author-</a></span>
&gt; &gt; ETHER-0.049/lib/Dist/Zilla/PluginBundle/Author/ETHER.pm#L332
</div>&gt;
&gt;
&gt; Semi-unrelated question: what&#39;s the difference between CopyFileFromBuild
&gt; and CopyFilesFromRelease? I guess the latter only triggers when you
&gt; actually make a release instead of on every build?
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;07&nbsp;19:48:06&nbsp;2014</span>
    <span class="description">RTHOMPSON [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Feb 07 19:42:48 2014, garfieldnate@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks Karen. That does fix the problem but it violates DRY. Now if I
&gt; change the settings for one plugin I also have to change them for the other.
&gt; I&#39;m not sure what the diff is between this and that other plugin...
&gt; 
&gt; I think a simple &#34;clobber&#34; or &#34;write_over&#34; or &#34;replace&#34; = 1 option would be
&gt; very helpful for this plugin.
&gt; 
&gt; 
&gt; On Fri, Feb 7, 2014 at 4:36 PM, Ryan C. Thompson via RT &lt;
&gt; bug-Dist-Zilla-Plugin-CopyFilesFromBuild@rt.cpan.org&gt; wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=92828">https://rt.cpan.org/Ticket/Display.html?id=92828</a></span> &gt;
&gt; &gt;
&gt; &gt; On Fri Feb 07 19:33:49 2014, ETHER wrote:
<div class="message-stanza open">&gt; &gt; &gt; On 2014-02-07 16:08:44, RTHOMPSON wrote:
&gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; Maybe dzil was modified to disallow adding the same file twice? The
&gt; &gt; &gt; &gt; only solution I can think of is to add these files to the
&gt; &gt; &gt; &gt; &#34;exclude_filename&#34; option of GatherDir.
</div>&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; You&#39;re right on both counts - you can&#39;t add a file twice, by any
&gt; &gt; &gt; mechanism, and you&#39;re both gathering the existing file in the repo &#40;by
&gt; &gt; &gt; [GatherDir] or [Git::GatherDir]&#41; as well as [ReadmeAnyFromPod]
&gt; &gt; &gt; attempting to create a new one.  The answer indeed is to tell
&gt; &gt; &gt; GatherDir to skip this file.
&gt; &gt; &gt;
&gt; &gt; &gt; e.g. see what I&#39;m doing here:
&gt; &gt; &gt;
&gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/ETHER/Dist-Zilla-PluginBundle-Author-">https://metacpan.org/source/ETHER/Dist-Zilla-PluginBundle-Author-</a></span>
&gt; &gt; &gt; ETHER-0.049/lib/Dist/Zilla/PluginBundle/Author/ETHER.pm#L332
</div>&gt; &gt;
&gt; &gt;
&gt; &gt; Semi-unrelated question: what&#39;s the difference between CopyFileFromBuild
&gt; &gt; and CopyFilesFromRelease? I guess the latter only triggers when you
&gt; &gt; actually make a release instead of on every build?
&gt; &gt;
</div></div>
The problem is that the CopyFilesFromBuild plugin is not directly involved with the problem, so there is nothing that it can do directly to fix it. This is why you have to violate DRY and manually tell the GatherDir plugin to exclude the files. The only other solution I can think of is rather messy: The CopyFilesFromBuild plugin would have to arrange for itself to run before the GatherDir plugin, and it would have to modify the GatherDir plugin&#39;s options to add the appropriate file exclusions. And then the solution only works for the GatherDir plugin and not any alternative plugin that one might use that would accidentally add the files.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;07&nbsp;20:09:33&nbsp;2014</span>
    <span class="description">garfieldnate [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> NGLENN [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #92828] dzil dies when files are added multiple times</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 7 Feb 2014 17:09:22 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Dist-Zilla-Plugin-CopyFilesFromBuild [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Nathan Glenn &lt;garfieldnate [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Darn. There&#39;s probably not a phase between &#34;gather existing files&#34; and
&#34;generate some more files&#34;, because the role for this would have to be run
in between those two, deleting files from the first before they could be
added in the second.


On Fri, Feb 7, 2014 at 4:48 PM, Ryan C. Thompson via RT &lt;
bug-Dist-Zilla-Plugin-CopyFilesFromBuild@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=92828">https://rt.cpan.org/Ticket/Display.html?id=92828</a></span> &gt;
&gt;
&gt; On Fri Feb 07 19:42:48 2014, garfieldnate@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; Thanks Karen. That does fix the problem but it violates DRY. Now if I
&gt; &gt; change the settings for one plugin I also have to change them for the
</div>&gt; other.
<div class="message-stanza open">&gt; &gt; I&#39;m not sure what the diff is between this and that other plugin...
&gt; &gt;
&gt; &gt; I think a simple &#34;clobber&#34; or &#34;write_over&#34; or &#34;replace&#34; = 1 option would
</div>&gt; be
<div class="message-stanza open">&gt; &gt; very helpful for this plugin.
&gt; &gt;
&gt; &gt;
&gt; &gt; On Fri, Feb 7, 2014 at 4:36 PM, Ryan C. Thompson via RT &lt;
&gt; &gt; bug-Dist-Zilla-Plugin-CopyFilesFromBuild@rt.cpan.org&gt; wrote:
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=92828">https://rt.cpan.org/Ticket/Display.html?id=92828</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; On Fri Feb 07 19:33:49 2014, ETHER wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; On 2014-02-07 16:08:44, RTHOMPSON wrote:
&gt; &gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; Maybe dzil was modified to disallow adding the same file twice? The
&gt; &gt; &gt; &gt; &gt; only solution I can think of is to add these files to the
&gt; &gt; &gt; &gt; &gt; &#34;exclude_filename&#34; option of GatherDir.
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; You&#39;re right on both counts - you can&#39;t add a file twice, by any
&gt; &gt; &gt; &gt; mechanism, and you&#39;re both gathering the existing file in the repo
</div></div></div>&gt; &#40;by
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; [GatherDir] or [Git::GatherDir]&#41; as well as [ReadmeAnyFromPod]
&gt; &gt; &gt; &gt; attempting to create a new one.  The answer indeed is to tell
&gt; &gt; &gt; &gt; GatherDir to skip this file.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; e.g. see what I&#39;m doing here:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/ETHER/Dist-Zilla-PluginBundle-Author-">https://metacpan.org/source/ETHER/Dist-Zilla-PluginBundle-Author-</a></span>
&gt; &gt; &gt; &gt; ETHER-0.049/lib/Dist/Zilla/PluginBundle/Author/ETHER.pm#L332
</div>&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Semi-unrelated question: what&#39;s the difference between
</div>&gt; CopyFileFromBuild
<div class="message-stanza open">&gt; &gt; &gt; and CopyFilesFromRelease? I guess the latter only triggers when you
&gt; &gt; &gt; actually make a release instead of on every build?
&gt; &gt; &gt;
</div>&gt;
&gt; The problem is that the CopyFilesFromBuild plugin is not directly involved
&gt; with the problem, so there is nothing that it can do directly to fix it.
&gt; This is why you have to violate DRY and manually tell the GatherDir plugin
&gt; to exclude the files. The only other solution I can think of is rather
&gt; messy: The CopyFilesFromBuild plugin would have to arrange for itself to
&gt; run before the GatherDir plugin, and it would have to modify the GatherDir
&gt; plugin&#39;s options to add the appropriate file exclusions. And then the
&gt; solution only works for the GatherDir plugin and not any alternative plugin
&gt; that one might use that would accidentally add the files.
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
