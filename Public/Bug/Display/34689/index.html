<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #34689 for perl-ldap: suggestion for the position of CR character in Net::LDAP::LDIF entry</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #34689 for perl-ldap: suggestion for the position of CR character in Net::LDAP::LDIF entry</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=perl-ldap">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=perl-ldap">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=perl-ldap">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=perl-ldap">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/perl-ldap">perl-ldap CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">34689</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=perl-ldap">perl-ldap</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
Uwe.Werler [...] o3si.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-25226-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-25227-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=34689">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-443939" href="/Public/Bug/Display.html?id=34689#txn-443939">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;04&nbsp;18:35:27&nbsp;2008</span>
    <span class="description">Uwe.Werler [...] o3si.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> suggestion for the position of CR character in Net::LDAP::LDIF entry</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 05 Apr 2008 00:35:05 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-perl-ldap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Uwe Werler &lt;Uwe.Werler [...] o3si.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/443939/217753/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/217753">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 683b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

after some testing and playing around with Net::LDAP::LDIF and the
back_perl &#34;database&#34; from OpenLDAP I found that some entries will not be
accepted by the latter if I use an entry &#40;or a list of them&#41; produced by
the LDIF module. The cause of this is the &#34;CR&#34; at the beginning of each
entry/DN and the missing empty line at the end. 

I know that this doesn&#39;t break RFC2849 and so is not the problem of
Net::LDAP::LDIF. But for compatibility reasons I suggest to print the
&#34;\n&#34; character not before but after each entry. This produces the same
output as by ldapsearch and will be accepted by the perl backend from
OpenLDAP.

Thanks in advance for Your advices.

Regards Uwe
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-444074" href="/Public/Bug/Display.html?id=34689#txn-444074">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;05&nbsp;04:19:59&nbsp;2008</span>
    <span class="description">Uwe.Werler [...] o3si.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [rt.cpan.org #34689] suggestion for the position of CR character in Net::LDAP::LDIF entry</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 5 Apr 2008 10:19:05 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-perl-ldap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Uwe Werler &lt;uwe.werler [...] o3si.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/444074/217792/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/217792">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello again,

after re-reading of RFC2849 I found that Net::LDAP::LDIF isn&#39;t
conform to the RFC2849 spec:

ldif-file                = ldif-content / ldif-changes

ldif-content             = version-spec 1*&#40;1*SEP ldif-attrval-record&#41;

ldif-changes             = version-spec 1*&#40;1*SEP ldif-change-record&#41;

ldif-attrval-record      = dn-spec SEP 1*attrval-spec

ldif-change-record       = dn-spec SEP *control changerecord

This states that a LDIF file must start with 0 or 1 version-specs, then
a dn-spec. And, all records must end with LF or CR/LF.

Regards Uwe

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; -------------------------------------------------------------------------
&gt; Hello,
&gt; 
&gt; after some testing and playing around with Net::LDAP::LDIF and the
&gt; back_perl &#34;database&#34; from OpenLDAP I found that some entries will not
&gt; be accepted by the latter if I use an entry &#40;or a list of them&#41;
&gt; produced by the LDIF module. The cause of this is the &#34;CR&#34; at the
&gt; beginning of each entry/DN and the missing empty line at the end. 
&gt; 
&gt; I know that this doesn&#39;t break RFC2849 and so is not the problem of
&gt; Net::LDAP::LDIF. But for compatibility reasons I suggest to print the
&gt; &#34;\n&#34; character not before but after each entry. This produces the same
&gt; output as by ldapsearch and will be accepted by the perl backend from
&gt; OpenLDAP.
&gt; 
&gt; Thanks in advance for Your advices.
&gt; 
&gt; Regards Uwe
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-444129" href="/Public/Bug/Display.html?id=34689#txn-444129">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;05&nbsp;09:31:47&nbsp;2008</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34689] suggestion for the position of CR character in Net::LDAP::LDIF entry</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 5 Apr 2008 08:27:11 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-perl-ldap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/444129/217827/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/217827">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Apr 5, 2008, at 3:20 AM, Uwe Werler via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; after re-reading of RFC2849 I found that Net::LDAP::LDIF isn&#39;t
&gt; conform to the RFC2849 spec:
</div>
I disagree.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ldif-file                = ldif-content / ldif-changes
&gt;
&gt; ldif-content             = version-spec 1*&#40;1*SEP ldif-attrval-record&#41;
</div>
That shows the SEP &#40;LF or CRLF&#41; before the record, not after it

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ldif-changes             = version-spec 1*&#40;1*SEP ldif-change-record&#41;
&gt;
&gt; ldif-attrval-record      = dn-spec SEP 1*attrval-spec
</div>
attrval-spec is

attrval-spec             = AttributeDescription value-spec SEP

value-spec               = &#34;:&#34; &#40;    FILL 0*1&#40;SAFE-STRING&#41; /
                                 &#34;:&#34; FILL &#40;BASE64-STRING&#41; /
                                 &#34;&lt;&#34; FILL url&#41;
                            ; See notes 7 and 8, below

value-spec does not mention SEP at all, so that SEP in attrval-spec  
is the end of the attribute line. So not having a blank line after  
each record, but breo each record, is perfectly correct as per RFC.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ldif-change-record       = dn-spec SEP *control changerecord
&gt;
&gt; This states that a LDIF file must start with 0 or 1 version-specs,  
&gt; then
&gt; a dn-spec. And, all records must end with LF or CR/LF.
</div>
All records from Net::LDAP::LDIF do end with LF, but what you are  
asking for is an extra LF, but ldif-content clearly shows, by the  
1*SEP, that the space between records is defined as being before  
records, not after them.

Graham.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-444130" href="/Public/Bug/Display.html?id=34689#txn-444130">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;05&nbsp;09:32:11&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-444207" href="/Public/Bug/Display.html?id=34689#txn-444207">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;05&nbsp;11:36:43&nbsp;2008</span>
    <span class="description">Uwe.Werler [...] o3si.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34689] suggestion for the position of CR character in Net::LDAP::LDIF entry</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 05 Apr 2008 17:35:30 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-perl-ldap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Uwe Werler &lt;Uwe.Werler [...] o3si.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/444207/217883/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/217883">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hallo Graham,

thanks for Your reply. 

But after rereading the RFC again I have now to disagree with You. The
RFC says that an LDIF file MUST begin with a version number of 1:

Notes on LDIF Syntax

      1&#41;  For the LDIF format described in this document, the version
          number MUST be &#34;1&#34;. If the version number is absent,
          implementations MAY choose to interpret the contents as an
          older LDIF file format, supported by the University of
          Michigan ldap-3.3 implementation [8].

That means that the first line of the file MUST contain the version
spec. Applications MAY accept the file if this line/spec is missing.

The line itself is followed by a SEP and by a ldif-attrval-record:

ldif-content             = version-spec 1*&#40;1*SEP ldif-attrval-record&#41;

The ldif-attrval-record itself consists if a dn-spec followed by a SEP
and attrval-spec.

ldif-attrval-record      = dn-spec SEP 1*attrval-spec

The attributes itself are described in AttributeDescription followed by
the value specification and ENDING with a SEP:

attrval-spec             = AttributeDescription value-spec SEP

That means that the file SHOULD be as followed:

version-spec FILL version-number&#40;CR LF / LF&#41;
dn-spec FILL distinguishedName&#40;CR LF / LF&#41;
AttributeDescription FILL value-spec&#40;CR LF / LF&#41;

As example:

version: 1&#40;CR LF / LF&#41;
dn: distinguishedName&#40;CR LF / LF&#41;
attribute: value&#40;CR LF / LF&#41;
attribute: value&#40;CR LF / LF&#41;

dn: distinguishedName&#40;CR LF / LF&#41;
attribute: value&#40;CR LF / LF&#41;
attribute: value&#40;CR LF / LF&#41;

dn: distinguishedName&#40;CR LF / LF&#41;
attribute: value&#40;CR LF / LF&#41;
attribute: value&#40;CR LF / LF&#41;

and so on. The same applies naturally for the change records.

That means if You leave the first line with the version number blank the
first line MUST contain an entry starting with a DN. And after each
entry MUST be &#40;CR LF / LF&#41; eg. empty line.

Thank You for Your attention.

Regards Uwe


Am Samstag, den 05.04.2008, 09:32 -0400 schrieb Graham Barr via RT:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34689">http://rt.cpan.org/Ticket/Display.html?id=34689</a></span> &gt;
&gt; 
&gt; On Apr 5, 2008, at 3:20 AM, Uwe Werler via RT wrote:
<div class="message-stanza open">&gt; &gt; after re-reading of RFC2849 I found that Net::LDAP::LDIF isn&#39;t
&gt; &gt; conform to the RFC2849 spec:
</div>&gt; 
&gt; I disagree.
&gt; 
<div class="message-stanza open">&gt; &gt; ldif-file                = ldif-content / ldif-changes
&gt; &gt;
&gt; &gt; ldif-content             = version-spec 1*&#40;1*SEP ldif-attrval-record&#41;
</div>&gt; 
&gt; That shows the SEP &#40;LF or CRLF&#41; before the record, not after it
&gt; 
<div class="message-stanza open">&gt; &gt; ldif-changes             = version-spec 1*&#40;1*SEP ldif-change-record&#41;
&gt; &gt;
&gt; &gt; ldif-attrval-record      = dn-spec SEP 1*attrval-spec
</div>&gt; 
&gt; attrval-spec is
&gt; 
&gt; attrval-spec             = AttributeDescription value-spec SEP
&gt; 
&gt; value-spec               = &#34;:&#34; &#40;    FILL 0*1&#40;SAFE-STRING&#41; /
&gt;                                  &#34;:&#34; FILL &#40;BASE64-STRING&#41; /
&gt;                                  &#34;&lt;&#34; FILL url&#41;
&gt;                             ; See notes 7 and 8, below
&gt; 
&gt; value-spec does not mention SEP at all, so that SEP in attrval-spec  
&gt; is the end of the attribute line. So not having a blank line after  
&gt; each record, but breo each record, is perfectly correct as per RFC.
&gt; 
<div class="message-stanza open">&gt; &gt; ldif-change-record       = dn-spec SEP *control changerecord
&gt; &gt;
&gt; &gt; This states that a LDIF file must start with 0 or 1 version-specs,  
&gt; &gt; then
&gt; &gt; a dn-spec. And, all records must end with LF or CR/LF.
</div>&gt; 
&gt; All records from Net::LDAP::LDIF do end with LF, but what you are  
&gt; asking for is an extra LF, but ldif-content clearly shows, by the  
&gt; 1*SEP, that the space between records is defined as being before  
&gt; records, not after them.
&gt; 
&gt; Graham.
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-444279" href="/Public/Bug/Display.html?id=34689#txn-444279">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;05&nbsp;15:52:07&nbsp;2008</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34689] suggestion for the position of CR character in Net::LDAP::LDIF entry</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 5 Apr 2008 14:29:30 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-perl-ldap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/444279/217932/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/217932">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Apr 5, 2008, at 10:36 AM, Uwe Werler via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; But after rereading the RFC again I have now to disagree with You. The
&gt; RFC says that an LDIF file MUST begin with a version number of 1:
</div>
No it does not.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Notes on LDIF Syntax
&gt;
&gt;       1&#41;  For the LDIF format described in this document, the version
&gt;           number MUST be &#34;1&#34;. If the version number is absent,
&gt;           implementations MAY choose to interpret the contents as an
&gt;           older LDIF file format, supported by the University of
&gt;           Michigan ldap-3.3 implementation [8].
</div>
It says there that it must for LDIF described by that document.

LDIF existed before that document. The existance of the version line  
is how to tell the difference.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; That means that the first line of the file MUST contain the version
&gt; spec. Applications MAY accept the file if this line/spec is missing.
</div>
And if you tell NetLLKDAP::LDIF that you want to write version 1 then  
it will write the version line

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The line itself is followed by a SEP and by a ldif-attrval-record:
</div>
The line followed by 1 OR MORE SEP

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; ldif-content             = version-spec 1*&#40;1*SEP ldif-attrval-record&#41;
&gt;
&gt; The ldif-attrval-record itself consists if a dn-spec followed by a SEP
&gt; and attrval-spec.
</div>
correct

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ldif-attrval-record      = dn-spec SEP 1*attrval-spec
&gt;
&gt; The attributes itself are described in AttributeDescription  
&gt; followed by
&gt; the value specification and ENDING with a SEP:
</div>
correct

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; attrval-spec             = AttributeDescription value-spec SEP
&gt;
&gt; That means that the file SHOULD be as followed:
&gt;
&gt; version-spec FILL version-number&#40;CR LF / LF&#41;
</div>
There can be more &#40;CR CR/LF&#41; in here

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; dn-spec FILL distinguishedName&#40;CR LF / LF&#41;
&gt; AttributeDescription FILL value-spec&#40;CR LF / LF&#41;
&gt;
&gt; As example:
&gt;
&gt; version: 1&#40;CR LF / LF&#41;
&gt; dn: distinguishedName&#40;CR LF / LF&#41;
&gt; attribute: value&#40;CR LF / LF&#41;
&gt; attribute: value&#40;CR LF / LF&#41;
&gt;
&gt; dn: distinguishedName&#40;CR LF / LF&#41;
&gt; attribute: value&#40;CR LF / LF&#41;
&gt; attribute: value&#40;CR LF / LF&#41;
&gt;
&gt; dn: distinguishedName&#40;CR LF / LF&#41;
&gt; attribute: value&#40;CR LF / LF&#41;
&gt; attribute: value&#40;CR LF / LF&#41;
</div>
With the extra line after the version line, which is legal, that is  
exactly what Net::LDAP::LDIF will output if you tell it you want  
version 1

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; and so on. The same applies naturally for the change records.
&gt;
&gt; That means if You leave the first line with the version number  
&gt; blank the
&gt; first line MUST contain an entry starting with a DN. And after each
&gt; entry MUST be &#40;CR LF / LF&#41; eg. empty line.
</div>
No. Nowhere in the spec does it say that there MUST be an empty line  
following each entry. The spec states that each entry is preceeded by  
1 or more SEP

Graham.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-444318" href="/Public/Bug/Display.html?id=34689#txn-444318">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;05&nbsp;18:12:20&nbsp;2008</span>
    <span class="description">Uwe.Werler [...] o3si.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34689] suggestion for the position of CR character in Net::LDAP::LDIF entry</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 06 Apr 2008 00:10:45 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-perl-ldap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Uwe Werler &lt;Uwe.Werler [...] o3si.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/444318/217957/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/217957">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear Graham,

I&#39;m now confused in the interpretation of the RFC. Howard from the
OpenLDAP team yetserday answered me:

&#34;&gt; The database backend &#34;back_perl&#34; expects LDIF entries beginning with
&#34;dn:&#34; and
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ending with an empty line. RFC2849 only describes that an entry is
</div>everything
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; except an empty line and a line not beginning &#40;after a CR/LF&#41; with a
</div>single
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; white space character.
</div>
Wrong. The grammar in RFC2849 quite explicitly states:

ldif-file                = ldif-content / ldif-changes

ldif-content             = version-spec 1*&#40;1*SEP ldif-attrval-record&#41;

ldif-changes             = version-spec 1*&#40;1*SEP ldif-change-record&#41;

ldif-attrval-record      = dn-spec SEP 1*attrval-spec

ldif-change-record       = dn-spec SEP *control changerecord

That means an LDIF file must start with 0 or 1 version-specs, then a
dn-spec. 
And, all records must end with LF or CR/LF.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; After some testing with back_perl I noticed that the LDIF entries
</div>produced by
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; the perl module Net::LDAP::LDIF were not acceptet because they are
</div>beginning
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; with an empty line and ending only with a simple CR charakter.
&gt;
&gt; This behavior breaks RFC2849. After changing LDIF.pm from that module
</div>to produce
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; the CR after the entry back_perl accepts this entries too.
&gt;
&gt; IMHO this is a misbehavior so I&#39;m very glad if You&#39;ll take a look at
</div>this
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; issue.
</div>
Apparently it Net::LDAP::LDIF is broken. Since that is not a piece of
OpenLDAP 
Software I don&#39;t see what we can do about it. This ITS will be closed.
Contact 
the author of Net::LDAP::LDIF to pursue this further.
--&#34;

Who is wrong and who is in right now?

To avoid in running problems already solved by newer software releases I
installed the actual release of OpenLDAP &#40;2.4.8&#41; and 
the Net::LDAP::LDIF module &#40;0.35&#41; and I run into the same problematic. 

I for myself want to understand what&#39;s going wrong and how to make my
software better and to learn.

Because of the differences between the interpretation of the RFC it&#39;s
very important for me to hear Your opinion again regarding this issue.

I&#39;m very glad if You take a look at this.

Thanks in advance for Your advice!

Regards Uwe

Am Samstag, den 05.04.2008, 15:52 -0400 schrieb Graham Barr via RT:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34689">http://rt.cpan.org/Ticket/Display.html?id=34689</a></span> &gt;
&gt; 
&gt; On Apr 5, 2008, at 10:36 AM, Uwe Werler via RT wrote:
<div class="message-stanza open">&gt; &gt; But after rereading the RFC again I have now to disagree with You. The
&gt; &gt; RFC says that an LDIF file MUST begin with a version number of 1:
</div>&gt; 
&gt; No it does not.
&gt; 
<div class="message-stanza open">&gt; &gt; Notes on LDIF Syntax
&gt; &gt;
&gt; &gt;       1&#41;  For the LDIF format described in this document, the version
&gt; &gt;           number MUST be &#34;1&#34;. If the version number is absent,
&gt; &gt;           implementations MAY choose to interpret the contents as an
&gt; &gt;           older LDIF file format, supported by the University of
&gt; &gt;           Michigan ldap-3.3 implementation [8].
</div>&gt; 
&gt; It says there that it must for LDIF described by that document.
&gt; 
&gt; LDIF existed before that document. The existance of the version line  
&gt; is how to tell the difference.
&gt; 
<div class="message-stanza open">&gt; &gt; That means that the first line of the file MUST contain the version
&gt; &gt; spec. Applications MAY accept the file if this line/spec is missing.
</div>&gt; 
&gt; And if you tell NetLLKDAP::LDIF that you want to write version 1 then  
&gt; it will write the version line
&gt; 
<div class="message-stanza open">&gt; &gt; The line itself is followed by a SEP and by a ldif-attrval-record:
</div>&gt; 
&gt; The line followed by 1 OR MORE SEP
&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt; ldif-content             = version-spec 1*&#40;1*SEP ldif-attrval-record&#41;
&gt; &gt;
&gt; &gt; The ldif-attrval-record itself consists if a dn-spec followed by a SEP
&gt; &gt; and attrval-spec.
</div>&gt; 
&gt; correct
&gt; 
<div class="message-stanza open">&gt; &gt; ldif-attrval-record      = dn-spec SEP 1*attrval-spec
&gt; &gt;
&gt; &gt; The attributes itself are described in AttributeDescription  
&gt; &gt; followed by
&gt; &gt; the value specification and ENDING with a SEP:
</div>&gt; 
&gt; correct
&gt; 
<div class="message-stanza open">&gt; &gt; attrval-spec             = AttributeDescription value-spec SEP
&gt; &gt;
&gt; &gt; That means that the file SHOULD be as followed:
&gt; &gt;
&gt; &gt; version-spec FILL version-number&#40;CR LF / LF&#41;
</div>&gt; 
&gt; There can be more &#40;CR CR/LF&#41; in here
&gt; 
<div class="message-stanza open">&gt; &gt; dn-spec FILL distinguishedName&#40;CR LF / LF&#41;
&gt; &gt; AttributeDescription FILL value-spec&#40;CR LF / LF&#41;
&gt; &gt;
&gt; &gt; As example:
&gt; &gt;
&gt; &gt; version: 1&#40;CR LF / LF&#41;
&gt; &gt; dn: distinguishedName&#40;CR LF / LF&#41;
&gt; &gt; attribute: value&#40;CR LF / LF&#41;
&gt; &gt; attribute: value&#40;CR LF / LF&#41;
&gt; &gt;
&gt; &gt; dn: distinguishedName&#40;CR LF / LF&#41;
&gt; &gt; attribute: value&#40;CR LF / LF&#41;
&gt; &gt; attribute: value&#40;CR LF / LF&#41;
&gt; &gt;
&gt; &gt; dn: distinguishedName&#40;CR LF / LF&#41;
&gt; &gt; attribute: value&#40;CR LF / LF&#41;
&gt; &gt; attribute: value&#40;CR LF / LF&#41;
</div>&gt; 
&gt; With the extra line after the version line, which is legal, that is  
&gt; exactly what Net::LDAP::LDIF will output if you tell it you want  
&gt; version 1
&gt; 
<div class="message-stanza open">&gt; &gt; and so on. The same applies naturally for the change records.
&gt; &gt;
&gt; &gt; That means if You leave the first line with the version number  
&gt; &gt; blank the
&gt; &gt; first line MUST contain an entry starting with a DN. And after each
&gt; &gt; entry MUST be &#40;CR LF / LF&#41; eg. empty line.
</div>&gt; 
&gt; No. Nowhere in the spec does it say that there MUST be an empty line  
&gt; following each entry. The spec states that each entry is preceeded by  
&gt; 1 or more SEP
&gt; 
&gt; Graham.
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-444324" href="/Public/Bug/Display.html?id=34689#txn-444324">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;05&nbsp;18:24:07&nbsp;2008</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34689] suggestion for the position of CR character in Net::LDAP::LDIF entry</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 5 Apr 2008 17:22:41 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-perl-ldap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/444324/217962/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/217962">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Apr 5, 2008, at 5:12 PM, Uwe Werler via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m now confused in the interpretation of the RFC. Howard from the
&gt; OpenLDAP team yetserday answered me:
&gt;
&gt; &#34;&gt; The database backend &#34;back_perl&#34; expects LDIF entries beginning  
&gt; with
&gt; &#34;dn:&#34; and
<div class="message-stanza open">&gt;&gt; ending with an empty line. RFC2849 only describes that an entry is
</div>&gt; everything
<div class="message-stanza open">&gt;&gt; except an empty line and a line not beginning &#40;after a CR/LF&#41; with a
</div>&gt; single
<div class="message-stanza open">&gt;&gt; white space character.
</div>&gt;
&gt; Wrong. The grammar in RFC2849 quite explicitly states:
&gt;
&gt; ldif-file                = ldif-content / ldif-changes
&gt;
&gt; ldif-content             = version-spec 1*&#40;1*SEP ldif-attrval-record&#41;
&gt;
&gt; ldif-changes             = version-spec 1*&#40;1*SEP ldif-change-record&#41;
&gt;
&gt; ldif-attrval-record      = dn-spec SEP 1*attrval-spec
&gt;
&gt; ldif-change-record       = dn-spec SEP *control changerecord
&gt;
&gt; That means an LDIF file must start with 0 or 1 version-specs, then a
&gt; dn-spec.
&gt; And, all records must end with LF or CR/LF.
</div>
He missed here that there can be any number of blank lines between  
the version-spec and the dn-spec

But the issue seems to be you are expecting a blank line after the  
final entry, eg

dn: foobar &lt;SEP &gt;
attr: value &lt;SEP &gt;
attr: value &lt;SEP &gt;
attr: value &lt;SEP &gt;
&lt;SEP&gt;

There is nothing the the RFC that states that empty line needs to be  
there

attrval-spec             = AttributeDescription value-spec SEP

And value-spec does not mentoin SEP at all. The SEP in attrval-spec  
is the SEP at the end of the line

Just taking ldif-content as an example

  ldif-content             = version-spec 1*&#40;1*SEP ldif-attrval-record&#41;

it states you have a version spec, followed by 1 or more of what is  
inside the &#40;&#41;

Inside the &#40;&#41; you have 1 or more SEP followed by ldif-attrval-record  
and the last thing in ldif-attrval-record is attrval-spec

So nowhere does it say there must be a blank line *after* the entry

If I am misunderstanding your problem then please re-explain

Graham.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-444529" href="/Public/Bug/Display.html?id=34689#txn-444529">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;06&nbsp;12:37:12&nbsp;2008</span>
    <span class="description">Uwe.Werler [...] o3si.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34689] suggestion for the position of CR character in Net::LDAP::LDIF entry</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 06 Apr 2008 18:35:53 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-perl-ldap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Uwe Werler &lt;Uwe.Werler [...] o3si.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/444529/218064/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/218064">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear Graham,

after some testing again I found the following behaviour in back_perl
which I told Howard Chu from the OpenLDAP team:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Dear Howard,
&gt; 
&gt; after some testing again I determined that back_perl doesn&#39;t accept
&gt; ldif_entries which are starting with an empty line. Then slapd tells me
&gt; &#34;str2entry: entry -1 has no dn&#34;. 
&gt; 
&gt; Is this behavior correct? If so it will be good to explain in the man
&gt; page or the example that an entry should start with a dn line and
&gt; shouldn&#39;t contain any empty lines nor the version information at the
&gt; first line.
&gt; 
&gt; I think that my mistake was to use sample code I&#39;ve found like this:
&gt; 
&gt; sub search
&gt; {
&gt;     
&gt;     my $this = shift;
&gt;     my&#40;$base, $scope, $deref, $sizeLim, $timeLim, $filterStr, $attrOnly, @attrs &#41; = @_;
&gt;     if &#40;! defined&#40;$this-&gt;{&#39;LDAP&#39;}&#41;&#41; {
&gt;         $ldap = Net::LDAP-&gt;new&#40; &#39;localhost&#39; &#41; ;
&gt;         $this-&gt;{&#39;LDAP&#39;} = $ldap;
&gt;     }
&gt;     $mesg=$this-&gt;{&#39;LDAP&#39;}-&gt;search&#40;base=&gt;$base,
&gt;                                 scope=&gt;$scope,
&gt;                                 deref=&gt;$deref,
&gt;                                 sizelimit =&gt;$sizeLim,
&gt;                                 timelimit =&gt;$timeLim, 
&gt;                                 filter =&gt;$filterStr, 
&gt;                                 attrs=&gt; @attrs &#41;;
&gt;     
&gt;     my @list = &#40;&#41;;
&gt;     
&gt;     
&gt;     foreach $entry &#40;$mesg-&gt;all_entries&#41; {
&gt;       my $data;
&gt;       $LDIF = new IO::Scalar \$data;
&gt;       $dump=Net::LDAP::LDIF-&gt;new&#40;$LDIF,&#34;w&#34;&#41;;
&gt;       $dump-&gt;write&#40;$entry&#41;;
&gt;       $LDIF-&gt;close;
&gt;       push @list,$data;
&gt;     }
&gt;     return &#40; 0 , @list&#41;;
&gt;     
&gt; }
&gt; 
&gt; Because the entries returned by Net::LDAP::LDIF are starting with a
&gt; leading SEP it won&#39;t work as is in back_perl.
&gt; 
&gt; Thank You very much for Your attention.
&gt; 
&gt; Regards Uwe
</div>
The problem with an empty line after the entries was my mistake because
I used &#34;^$&#34; as field separator in reading the output file in my test code ;-&#41;

Your implementation of the RFC is quite correct. Sorry that this took
some time before I understood the RFC.

Because I used the sample code above I didn&#39;t notice that back_perl
expects the entries only and not a ldif file.

Thank You very much for Your help and advices!

Regards Uwe
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-444919" href="/Public/Bug/Display.html?id=34689#txn-444919">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;07&nbsp;07:48:55&nbsp;2008</span>
    <span class="description">Uwe.Werler [...] o3si.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34689] suggestion for the position of CR character in Net::LDAP::LDIF entry</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 07 Apr 2008 13:45:40 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-perl-ldap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Uwe Werler &lt;Uwe.Werler [...] o3si.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/444919/218324/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/218324">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 608b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Graham,

there is indeed a misbehavior in Net::LDAP::LDIF when the version line
is not chosen to be printed &#40;which is the default&#41; because then the
entries are starting with a SEP that should not occur.

ldif-content             = version-spec 1*&#40;1*SEP ldif-attrval-record&#41;

This rule states that at least one SEP MUST be AFTER the version-spec.
If You only want to print an entry without the version-spec then this
rule applies:

ldif-attrval-record      = dn-spec SEP 1*attrval-spec

That means that a ldif file &#40;entry&#41; MUST start with the dn-spec without
any leading SEP &#40;blank line&#41;.

Regards Uwe
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-444995" href="/Public/Bug/Display.html?id=34689#txn-444995">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;07&nbsp;11:13:03&nbsp;2008</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34689] suggestion for the position of CR character in Net::LDAP::LDIF entry</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 7 Apr 2008 10:12:32 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-perl-ldap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/444995/218376/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/218376">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 907b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Apr 7, 2008, at 6:48 AM, Uwe Werler via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;        Queue: perl-ldap
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34689">http://rt.cpan.org/Ticket/Display.html?id=34689</a></span> &gt;
&gt;
&gt; Hello Graham,
&gt;
&gt; there is indeed a misbehavior in Net::LDAP::LDIF when the version line
&gt; is not chosen to be printed &#40;which is the default&#41; because then the
&gt; entries are starting with a SEP that should not occur.
&gt;
&gt; ldif-content             = version-spec 1*&#40;1*SEP ldif-attrval-record&#41;
&gt;
&gt; This rule states that at least one SEP MUST be AFTER the version-spec.
&gt; If You only want to print an entry without the version-spec then this
&gt; rule applies:
&gt;
&gt; ldif-attrval-record      = dn-spec SEP 1*attrval-spec
&gt;
&gt; That means that a ldif file &#40;entry&#41; MUST start with the dn-spec  
&gt; without
&gt; any leading SEP &#40;blank line&#41;.
</div>
No. that RFC describes version 1 which must have the line. If the  
version 1 is not there is is not covered by that RFC.

Graham.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-445005" href="/Public/Bug/Display.html?id=34689#txn-445005">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;07&nbsp;12:37:11&nbsp;2008</span>
    <span class="description">Uwe.Werler [...] o3si.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34689] suggestion for the position of CR character in Net::LDAP::LDIF entry</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 07 Apr 2008 18:36:46 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-perl-ldap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Uwe Werler &lt;Uwe.Werler [...] o3si.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/445005/218382/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/218382">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Graham,

but what is when You leave out the version-spec and You only want to
print entries? Than You haven&#39;t a valid ldif? And a file starting with a
blank line couldn&#39;t be standard.

Regards Uwe

Am Montag, den 07.04.2008, 11:13 -0400 schrieb Graham Barr via RT:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34689">http://rt.cpan.org/Ticket/Display.html?id=34689</a></span> &gt;
&gt; 
&gt; On Apr 7, 2008, at 6:48 AM, Uwe Werler via RT wrote:
<div class="message-stanza open">&gt; &gt;
&gt; &gt;        Queue: perl-ldap
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34689">http://rt.cpan.org/Ticket/Display.html?id=34689</a></span> &gt;
&gt; &gt;
&gt; &gt; Hello Graham,
&gt; &gt;
&gt; &gt; there is indeed a misbehavior in Net::LDAP::LDIF when the version line
&gt; &gt; is not chosen to be printed &#40;which is the default&#41; because then the
&gt; &gt; entries are starting with a SEP that should not occur.
&gt; &gt;
&gt; &gt; ldif-content             = version-spec 1*&#40;1*SEP ldif-attrval-record&#41;
&gt; &gt;
&gt; &gt; This rule states that at least one SEP MUST be AFTER the version-spec.
&gt; &gt; If You only want to print an entry without the version-spec then this
&gt; &gt; rule applies:
&gt; &gt;
&gt; &gt; ldif-attrval-record      = dn-spec SEP 1*attrval-spec
&gt; &gt;
&gt; &gt; That means that a ldif file &#40;entry&#41; MUST start with the dn-spec  
&gt; &gt; without
&gt; &gt; any leading SEP &#40;blank line&#41;.
</div>&gt; 
&gt; No. that RFC describes version 1 which must have the line. If the  
&gt; version 1 is not there is is not covered by that RFC.
&gt; 
&gt; Graham.
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-445025" href="/Public/Bug/Display.html?id=34689#txn-445025">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;07&nbsp;13:08:26&nbsp;2008</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34689] suggestion for the position of CR character in Net::LDAP::LDIF entry</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 7 Apr 2008 11:42:44 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-perl-ldap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/445025/218396/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/218396">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Apr 7, 2008, at 11:37 AM, Uwe Werler via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;        Queue: perl-ldap
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34689">http://rt.cpan.org/Ticket/Display.html?id=34689</a></span> &gt;
&gt;
&gt; Hello Graham,
&gt;
&gt; but what is when You leave out the version-spec and You only want to
&gt; print entries? Than You haven&#39;t a valid ldif? And a file starting  
&gt; with a
&gt; blank line couldn&#39;t be standard.
</div>
No it is not standard to that RFC, that RFC describes version 1, and  
without the version line it is not version 1.

Not having the version line is there for compatibility for old  
software that was written before that RFC.

Graham.



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Regards Uwe
&gt;
&gt; Am Montag, den 07.04.2008, 11:13 -0400 schrieb Graham Barr via RT:
<div class="message-stanza open">&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34689">http://rt.cpan.org/Ticket/Display.html?id=34689</a></span> &gt;
&gt;&gt;
&gt;&gt; On Apr 7, 2008, at 6:48 AM, Uwe Werler via RT wrote:
<div class="message-stanza open">&gt;&gt;&gt;
&gt;&gt;&gt;        Queue: perl-ldap
&gt;&gt;&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34689">http://rt.cpan.org/Ticket/Display.html?id=34689</a></span> &gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Hello Graham,
&gt;&gt;&gt;
&gt;&gt;&gt; there is indeed a misbehavior in Net::LDAP::LDIF when the version  
&gt;&gt;&gt; line
&gt;&gt;&gt; is not chosen to be printed &#40;which is the default&#41; because then the
&gt;&gt;&gt; entries are starting with a SEP that should not occur.
&gt;&gt;&gt;
&gt;&gt;&gt; ldif-content             = version-spec 1*&#40;1*SEP ldif-attrval- 
&gt;&gt;&gt; record&#41;
&gt;&gt;&gt;
&gt;&gt;&gt; This rule states that at least one SEP MUST be AFTER the version- 
&gt;&gt;&gt; spec.
&gt;&gt;&gt; If You only want to print an entry without the version-spec then  
&gt;&gt;&gt; this
&gt;&gt;&gt; rule applies:
&gt;&gt;&gt;
&gt;&gt;&gt; ldif-attrval-record      = dn-spec SEP 1*attrval-spec
&gt;&gt;&gt;
&gt;&gt;&gt; That means that a ldif file &#40;entry&#41; MUST start with the dn-spec
&gt;&gt;&gt; without
&gt;&gt;&gt; any leading SEP &#40;blank line&#41;.
</div>&gt;&gt;
&gt;&gt; No. that RFC describes version 1 which must have the line. If the
&gt;&gt; version 1 is not there is is not covered by that RFC.
&gt;&gt;
&gt;&gt; Graham.
&gt;&gt;
&gt;&gt;
</div>&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-445050" href="/Public/Bug/Display.html?id=34689#txn-445050">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;07&nbsp;13:54:35&nbsp;2008</span>
    <span class="description">Uwe.Werler [...] o3si.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34689] suggestion for the position of CR character in Net::LDAP::LDIF entry</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 07 Apr 2008 19:54:15 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-perl-ldap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Uwe Werler &lt;Uwe.Werler [...] o3si.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/445050/218412/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/218412">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Graham,

thank You very much for Your help and advices. I solved my problem with
simple deleting the leading SEP from the LDIF output. 

Yes, You are right! 

I think the problem is how the output without the version-spec is
interpreted by an entry parser. The back_perl from OpenLDAP doesn&#39;t
accept correct ldif stated by RFC because it&#39;s not producing correct
output when the version-spec is returned too. It only accepts &#34;ldif
like&#34; entries without a leading SEP.

Sadly Howard from the OpenLDAP people ignores my suggestion to explain
this clearly in the man page or at least example code shipped within the
sources.

The output from Net::LDAP::LDIF is correct because of RFC&#39;s rule:
&#34;version-spec 1*&#40;1*SEP ldif-attrval-record&#41;&#34; which evidently describes
the leading SEP.

I thank You again for the time consuming discussion!

Regards Uwe

PS: At least I learnt how to interpret the RFC ;-&#41;

Am Montag, den 07.04.2008, 13:08 -0400 schrieb Graham Barr via RT:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34689">http://rt.cpan.org/Ticket/Display.html?id=34689</a></span> &gt;
&gt; 
&gt; 
&gt; On Apr 7, 2008, at 11:37 AM, Uwe Werler via RT wrote:
<div class="message-stanza open">&gt; &gt;
&gt; &gt;        Queue: perl-ldap
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34689">http://rt.cpan.org/Ticket/Display.html?id=34689</a></span> &gt;
&gt; &gt;
&gt; &gt; Hello Graham,
&gt; &gt;
&gt; &gt; but what is when You leave out the version-spec and You only want to
&gt; &gt; print entries? Than You haven&#39;t a valid ldif? And a file starting  
&gt; &gt; with a
&gt; &gt; blank line couldn&#39;t be standard.
</div>&gt; 
&gt; No it is not standard to that RFC, that RFC describes version 1, and  
&gt; without the version line it is not version 1.
&gt; 
&gt; Not having the version line is there for compatibility for old  
&gt; software that was written before that RFC.
&gt; 
&gt; Graham.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-746656" href="/Public/Bug/Display.html?id=34689#txn-746656">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;11&nbsp;21:38:33&nbsp;2010</span>
    <span class="description">GBARR [...] CPAN.ORG -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.726407</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
