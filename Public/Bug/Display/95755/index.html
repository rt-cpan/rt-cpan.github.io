<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #95755 for Git-FastExport: Bug in git-stitch-repo?</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #95755 for Git-FastExport: Bug in git-stitch-repo?</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Git-FastExport">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Git-FastExport">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Git-FastExport">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Git-FastExport">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Git-FastExport">Git-FastExport CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">95755</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Git-FastExport">Git-FastExport</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
newsScott [...] gmx.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-222690-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-222691-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=95755">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1364500" href="/Public/Bug/Display.html?id=95755#txn-1364500">#</a>      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;18&nbsp;09:46:17&nbsp;2014</span>
    <span class="description">newsScott [...] gmx.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Bug in git-stitch-repo?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 18 May 2014 15:46:05 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Git-FastExport [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Henning Moll &lt;newsScott [...] gmx.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1364500/724438/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/724438">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">After doing a
$ git-stitch-repo ../A:A ../B:B | git fast-import
I would expect
only a A directory in the root after git checkout master-A and
only a B directory in the root after git checkout master-B
But there is also a A directory after checkout master-B. &#40;Sometimes it&#39;s 
vice versa&#41;. Hereâ€™s how to reproduce
mkdir A; cd A; git init; echo &#34;a&#34; &gt; x; git add x; git commit -m &#39;x 
added&#39;; cd ..
mkdir B; cd B; git init; echo &#34;b&#34; &gt; x; git add x; git commit -m &#39;x 
added&#39;; cd ..
mkdir R; cd R; git init; git-stitch-repo ../A:A ../B:B | git 
fast-import; cd ..
cd R; git checkout master-A; ls -1 | grep B; cd ..
cd R; git checkout master-B; ls -1 | grep A; cd ..
None of the grep commands should report anything, but one doesâ€¦
Note that there is also content below the &#39;false&#39; directory...

git: 1.7.9.5
perl: v5.14.2
git-stitch-repo version 0.104
mkdir A; cd A; git init; echo &#34;a&#34; &gt; x; git add x; git commit -m &#39;x 
added&#39;; cd ..
mkdir B; cd B; git init; echo &#34;b&#34; &gt; x; git add x; git commit -m &#39;x 
added&#39;; cd ..
mkdir R; cd R; git init; git-stitch-repo ../A:A ../B:B | git 
fast-import; cd ..
cd R; git checkout master-A; ls -1 | grep B; cd ..
cd R; git checkout master-B; ls -1 | grep A; cd ..
Best regards
Henning
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1364729" href="/Public/Bug/Display.html?id=95755#txn-1364729">#</a>      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;18&nbsp;18:30:24&nbsp;2014</span>
    <span class="description">book [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1364729/724555/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/724555">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun May 18 09:46:17 2014, newsScott@gmx.de wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; After doing a
&gt; $ git-stitch-repo ../A:A ../B:B | git fast-import
&gt; I would expect
&gt; only a A directory in the root after git checkout master-A and
&gt; only a B directory in the root after git checkout master-B
</div>
That would be what you&#39;d get if you added B as a remote in A,
and then merged the two head commits. Before the merge, you&#39;d
have two disconnected histories, with one directory each.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; But there is also a A directory after checkout master-B.
</div>
Actually, this is exactly what should happen.

The whole point of git-stich-repo is to merge the history of both
repositories as if they had lived in neighbouring directories all
the time. Every time there&#39;s a commit in A, only the files in the A
directory are changed. And it is the same for B.

There as to be a first commit, though, which will contain files
from the repository in which the first commit happened &#40;the available
commits are sorted by date&#41;. So the first commit in the new history
will contains commits from the first repository, because the other
repository &#34;doesn&#39;t exist&#34; yet.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#40;Sometimes it&#39;s vice versa&#41;.
</div>
Given that the granularity of git is one second, in your example,
both repositories have their first commit happen at the same time
&#40;or one second apart&#41;. This probably explains why you sometimes see
the reverse.

Maybe the example in the documentation can make it clearer:
<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/Git::FastExport::Stitch#Example">https://metacpan.org/pod/Git::FastExport::Stitch#Example</a></span>

In all the four resulting repositories, commit A1 only contains the A
directory, while B1 will contain whatever A1 added to A/, in addition
to the content that B1 added in B/.

Best regards,

-- BooK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1364730" href="/Public/Bug/Display.html?id=95755#txn-1364730">#</a>      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;18&nbsp;18:30:24&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1364759" href="/Public/Bug/Display.html?id=95755#txn-1364759">#</a>      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;18&nbsp;22:34:25&nbsp;2014</span>
    <span class="description">newsScott [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #95755] Bug in git-stitch-repo?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 19 May 2014 04:34:14 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Git-FastExport [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Henning Moll &lt;newsScott [...] gmx.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1364759/724563/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/724563">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Am 19.05.2014 00:30, schrieb Philippe Bruhat &#40;BooK&#41; via RT:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Maybe the example in the documentation can make it clearer: 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/Git::FastExport::Stitch#Example">https://metacpan.org/pod/Git::FastExport::Stitch#Example</a></span> In all the 
&gt; four resulting repositories, commit A1 only contains the A directory, 
&gt; while B1 will contain whatever A1 added to A/, in addition to the 
&gt; content that B1 added in B/.
</div>Thank you very much. Now i am a bit more clear what git-stitch-repo is 
doing. ;-&#41;
But there&#39;s still something that puzzles me:

In your example, it is obvious that both original masters &#40;A6, B8&#41; are 
on &#34;the same line&#34; in the final result. Or in other words: A6 is the 
&#34;common&#34; master in the new repository.

With my tests i unfortunately observe a different behaviour &#40;And as the 
history of the participating repositories is huge, i can&#39;t give a small 
example&#41;. So here is what i observe. Given

A1 - A2 - A3 - A4 - master

B1 - B2 - B3 - B4- master

masters point to A4 resp. B4. There are additional branches, but none of 
them is merged back into master.
The stitched repository looks like this:

            / - - -  A3 - A4
           /
A1 - B1 - A2 - B2 - B3 - B4

What could be the reason, that it is not

A1 - B1 - A2 - B2 - A3 - B3 - A4 - B4

You mentioned the requirement of a &#34;linearhistory&#34;. What do you mean by 
that?

Best regards
Henning
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1364797" href="/Public/Bug/Display.html?id=95755#txn-1364797">#</a>      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;19&nbsp;04:31:02&nbsp;2014</span>
    <span class="description">book [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1364797/724585/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/724585">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun May 18 22:34:25 2014, newsScott@gmx.de wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Thank you very much. Now i am a bit more clear what git-stitch-repo is 
&gt; doing. ;-&#41;
&gt; But there&#39;s still something that puzzles me:
&gt; 
&gt; With my tests i unfortunately observe a different behaviour &#40;And as the 
&gt; history of the participating repositories is huge, i can&#39;t give a small 
&gt; example&#41;. So here is what i observe. Given
&gt; 
&gt; A1 - A2 - A3 - A4 - master
&gt; 
&gt; B1 - B2 - B3 - B4- master
&gt; 
&gt; masters point to A4 resp. B4. There are additional branches, but none of 
&gt; them is merged back into master.
&gt; The stitched repository looks like this:
&gt; 
&gt;             / - - -  A3 - A4
&gt;            /
&gt; A1 - B1 - A2 - B2 - B3 - B4
&gt; 
&gt; What could be the reason, that it is not
&gt; 
&gt; A1 - B1 - A2 - B2 - A3 - B3 - A4 - B4
&gt; 
&gt; You mentioned the requirement of a &#34;linearhistory&#34;. What do you mean by 
&gt; that?
&gt; 
</div>
Alas, I&#39;m afraid you&#39;ve encountered the issue discussed in another bug:
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=70695">https://rt.cpan.org/Ticket/Display.html?id=70695</a></span>

which is a real issue.

Basically, git-stitch-repo processes commits one at a time, and must decide
where to attach them in the new history that it is building. Because it&#39;s
processing the output of git-fast-export, it has very little data to work with.

If repo A branches off &#40;say between master and branch-A&#41;, git-stitch repo could
mistakenly attach the next commit on the B master onto branch-A, because at this
point they are both perfectly valid locations to attach this commit &#40;based on the
constraints listed in <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/Git::FastExport::Stitch#Constraints-of-the-stitching-algorithm">https://metacpan.org/pod/Git::FastExport::Stitch#Constraints-of-the-stitching-algorithm</a></span> &#41;. Unfortunately, at this point, master-A and master-B have effectively branched,
and the constraints prevent them to ever be joined again.

There are ways to be smarter with the attachement algorithm, at a heavy startup cost
&#40;proportional to the total number of commits&#41;.I&#39;m still experimenting with it, and
haven&#39;t a proper fix yet.

This kind of issue doesn&#39;t show up with linear repositories &#40;i.e. without branches&#41;.
When I wrote git-stich-repo, the use case was for merging conversions of cvs or svn
repositories, which are mostly linear. Now that git is widely used and understood,
branches are much more likely to happen, and this issues shows up more.

-- BooK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1364819" href="/Public/Bug/Display.html?id=95755#txn-1364819">#</a>      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;19&nbsp;06:14:36&nbsp;2014</span>
    <span class="description">newsScott [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #95755] Bug in git-stitch-repo?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 19 May 2014 12:14:26 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Git-FastExport [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Henning Moll &lt;newsScott [...] gmx.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1364819/724599/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/724599">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 68b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you very much for your detailed answer!

Best regards
Henning
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.282228</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
