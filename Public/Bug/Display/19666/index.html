<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #19666 for Net-FTP-Recursive: Problem when ls -al returns the modified date as YYYY-mm-dd</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #19666 for Net-FTP-Recursive: Problem when ls -al returns the modified date as YYYY-mm-dd</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-FTP-Recursive/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-FTP-Recursive/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-FTP-Recursive/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-FTP-Recursive/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-FTP-Recursive">Net-FTP-Recursive CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">19666</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-FTP-Recursive/Active/">Net-FTP-Recursive</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">texasjdl [...] yahoo.com
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
lars [...] abusiness.dk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-22608-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.00    </td>
  </tr>
  <tr id="CF-22609-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;02&nbsp;20:22:29&nbsp;2006</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Problem when ls -al returns the modified date as YYYY-mm-dd</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello
This is my first time debugging anything so please bare with me if I&#39;m 
off road.

I&#39;ve successfully installed Net::FTP:Recursive on a FreeBSD server in 
the past and used a single rput script to make some backups. Today I 
installed it on a Debian Linux but couldn&#39;t get my FTP script to work. 
Seemed like rput wasn&#39;t handled at all. This is what the rput sample 
script logs:
Net::FTP&gt;&gt;&gt; Net::FTP&#40;2.75&#41;
Net::FTP&gt;&gt;&gt;   Exporter&#40;5.58&#41;
Net::FTP&gt;&gt;&gt;   Net::Cmd&#40;2.26&#41;
Net::FTP&gt;&gt;&gt;   IO::Socket::INET&#40;1.27&#41;
Net::FTP&gt;&gt;&gt;     IO::Socket&#40;1.28&#41;
Net::FTP&gt;&gt;&gt;       IO::Handle&#40;1.24&#41;
Net::FTP=GLOB&#40;0x816674c&#41;&lt;&lt;&lt; 220 Microsoft FTP Service
Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&gt;&gt;&gt; user administrator
Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&lt;&lt;&lt; 331 Password required for 
administrator.
Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&gt;&gt;&gt; PASS ....
Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&lt;&lt;&lt; 230 User administrator logged 
in.
Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&gt;&gt;&gt; TYPE I
Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&lt;&lt;&lt; 200 Type set to I.
Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&gt;&gt;&gt; CWD /Backups/MYSQL/SQL
Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&lt;&lt;&lt; 250 CWD command successful.

Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&gt;&gt;&gt; PWD
Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&lt;&lt;&lt; 257 &#34;/Backups/MYSQL/SQL&#34; is 
current directory.
Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&gt;&gt;&gt; QUIT
Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&lt;&lt;&lt; 221

Se the blank line in the debug log &#40;?&#41; that should have been the put 
or rput command.

So I started looking in the Recursive.pm file making som debug print 
tests to se how far it got. I ended up in the sub parse_files&#40;&#41;. Here 
you split up the dir command ls -la:
      $line =~ /^
                 &#40;\S+&#41;\s+ #permissions %p
                 &#40;\d+&#41;\s+ #link count %lc
                 &#40;\S+&#41;\s+ #user owner %u
                 &#40;\S+&#41;\s+ #group owner %g
                 &#40;\d+&#41;\s+ #size %s
                 &#40;\w+\s+\w+\s+\S+&#41;\s+ #last modification date %d
                 &#40;.+?&#41;\s* #filename %f
                 &#40;?:-&gt;\s*&#40;.+&#41;&#41;? #optional link part %l
                $
               /x;

This match dir lines fine on a FreeBSD, but not on my Debian Linux. 

Below an ls -la command from FreeBSD:
bash-2.05# ls -la
total 56786
drwxr-xr-x   2 root  wheel     1024 16 Nov  2005 .
drwxr-xr-x  10 root  wheel     1024 17 Maj 12:40 ..
-rw-r--r--   1 root  wheel  3236690 16 Nov  2005 ftpd.log
-rw-r--r--   1 root  wheel  4254271 16 Nov  2005 ftpd.log.0
-rw-r--r--   1 root  wheel       13  3 Jun 01:48 test.txt

Below an ls -la command from Debian Linux:

mysql5:/downloads/Net-FTP-Recursive-2.00# ls -la
totalt 200
drwxr-xr-x  5 root root  4096 2006-06-03 01:42 .
drwxr-xr-x  8 root root  4096 2006-06-03 01:20 ..
drwxr-xr-x  5 root root  4096 2006-06-03 01:08 blib
-rw-rw-r--  1  500  500  3106 2005-04-13 06:06 Changes

As you can see this dateformat is different by containing hyphens and 
not whitespaces. So I modified the part where it strips the 
modification date:
&#40;\w+\s+\w+\s+\S+|\d+-\d+-\d+\s+\S+&#41;\s+ #last modification date %d

You could write that in other ways how ever this works in my case.

I hope this was helpfull.

Best regards
Lars Skjoldby
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.abusiness.dk">http://www.abusiness.dk</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;12&nbsp;11:28:50&nbsp;2006</span>
    <span class="description">texasjdl [...] yahoo.com -  Given to JDLEE</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;12&nbsp;11:29:50&nbsp;2006</span>
    <span class="description">texasjdl [...] yahoo.com -  Status changed from &#39;new&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;12&nbsp;11:33:56&nbsp;2006</span>
    <span class="description">texasjdl [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The ParseSub option to all of the methods is the way you can easily get
around this limitation.  Unfortunately, since FTP only uses text to
return results to the client, this is a pervasive problem with no good
solution.  So the solution I&#39;ve provided is to provide your own parsing
routine so that the module can use that routine instead of the default.
 In that parsing routine, you can provide your own regex for splitting
up the string returned by your particular FTP server.

The easiest way to create a parsing routine is to use the parse_files&#40;&#41;
routine in the module as a template.  Unfortunately, since perl does not
allow named capture &#40;well, without a module anyway&#41;, it is not possible
just to provide a regex to the module for use in parsing &#40;that would
assume that the difference pieces are always in the same order&#41;.

Please email with any more questions/issues.

On Fri Jun 02 20:22:29 2006, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello
&gt; This is my first time debugging anything so please bare with me if I&#39;m 
&gt; off road.
&gt; 
&gt; I&#39;ve successfully installed Net::FTP:Recursive on a FreeBSD server in 
&gt; the past and used a single rput script to make some backups. Today I 
&gt; installed it on a Debian Linux but couldn&#39;t get my FTP script to work. 
&gt; Seemed like rput wasn&#39;t handled at all. This is what the rput sample 
&gt; script logs:
&gt; Net::FTP&gt;&gt;&gt; Net::FTP&#40;2.75&#41;
&gt; Net::FTP&gt;&gt;&gt;   Exporter&#40;5.58&#41;
&gt; Net::FTP&gt;&gt;&gt;   Net::Cmd&#40;2.26&#41;
&gt; Net::FTP&gt;&gt;&gt;   IO::Socket::INET&#40;1.27&#41;
&gt; Net::FTP&gt;&gt;&gt;     IO::Socket&#40;1.28&#41;
&gt; Net::FTP&gt;&gt;&gt;       IO::Handle&#40;1.24&#41;
&gt; Net::FTP=GLOB&#40;0x816674c&#41;&lt;&lt;&lt; 220 Microsoft FTP Service
&gt; Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&gt;&gt;&gt; user administrator
&gt; Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&lt;&lt;&lt; 331 Password required for 
&gt; administrator.
&gt; Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&gt;&gt;&gt; PASS ....
&gt; Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&lt;&lt;&lt; 230 User administrator logged 
&gt; in.
&gt; Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&gt;&gt;&gt; TYPE I
&gt; Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&lt;&lt;&lt; 200 Type set to I.
&gt; Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&gt;&gt;&gt; CWD /Backups/MYSQL/SQL
&gt; Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&lt;&lt;&lt; 250 CWD command successful.
&gt; 
&gt; Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&gt;&gt;&gt; PWD
&gt; Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&lt;&lt;&lt; 257 &#34;/Backups/MYSQL/SQL&#34; is 
&gt; current directory.
&gt; Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&gt;&gt;&gt; QUIT
&gt; Net::FTP::Recursive=GLOB&#40;0x816674c&#41;&lt;&lt;&lt; 221
&gt; 
&gt; Se the blank line in the debug log &#40;?&#41; that should have been the put 
&gt; or rput command.
&gt; 
&gt; So I started looking in the Recursive.pm file making som debug print 
&gt; tests to se how far it got. I ended up in the sub parse_files&#40;&#41;. Here 
&gt; you split up the dir command ls -la:
&gt;       $line =~ /^
&gt;                  &#40;\S+&#41;\s+ #permissions %p
&gt;                  &#40;\d+&#41;\s+ #link count %lc
&gt;                  &#40;\S+&#41;\s+ #user owner %u
&gt;                  &#40;\S+&#41;\s+ #group owner %g
&gt;                  &#40;\d+&#41;\s+ #size %s
&gt;                  &#40;\w+\s+\w+\s+\S+&#41;\s+ #last modification date %d
&gt;                  &#40;.+?&#41;\s* #filename %f
&gt;                  &#40;?:-&gt;\s*&#40;.+&#41;&#41;? #optional link part %l
&gt;                 $
&gt;                /x;
&gt; 
&gt; This match dir lines fine on a FreeBSD, but not on my Debian Linux. 
&gt; 
&gt; Below an ls -la command from FreeBSD:
&gt; bash-2.05# ls -la
&gt; total 56786
&gt; drwxr-xr-x   2 root  wheel     1024 16 Nov  2005 .
&gt; drwxr-xr-x  10 root  wheel     1024 17 Maj 12:40 ..
&gt; -rw-r--r--   1 root  wheel  3236690 16 Nov  2005 ftpd.log
&gt; -rw-r--r--   1 root  wheel  4254271 16 Nov  2005 ftpd.log.0
&gt; -rw-r--r--   1 root  wheel       13  3 Jun 01:48 test.txt
&gt; 
&gt; Below an ls -la command from Debian Linux:
&gt; 
&gt; mysql5:/downloads/Net-FTP-Recursive-2.00# ls -la
&gt; totalt 200
&gt; drwxr-xr-x  5 root root  4096 2006-06-03 01:42 .
&gt; drwxr-xr-x  8 root root  4096 2006-06-03 01:20 ..
&gt; drwxr-xr-x  5 root root  4096 2006-06-03 01:08 blib
&gt; -rw-rw-r--  1  500  500  3106 2005-04-13 06:06 Changes
&gt; 
&gt; As you can see this dateformat is different by containing hyphens and 
&gt; not whitespaces. So I modified the part where it strips the 
&gt; modification date:
&gt; &#40;\w+\s+\w+\s+\S+|\d+-\d+-\d+\s+\S+&#41;\s+ #last modification date %d
&gt; 
&gt; You could write that in other ways how ever this works in my case.
&gt; 
&gt; I hope this was helpfull.
&gt; 
&gt; Best regards
&gt; Lars Skjoldby
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.abusiness.dk">http://www.abusiness.dk</a></span>
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;12&nbsp;11:33:57&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;12&nbsp;11:34:38&nbsp;2006</span>
    <span class="description">texasjdl [...] yahoo.com -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
