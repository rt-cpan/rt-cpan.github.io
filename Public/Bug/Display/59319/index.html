<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #59319 for DBIx-Class-Tree-NestedSet: I can&#39;t add a root node!</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #59319 for DBIx-Class-Tree-NestedSet: I can&#39;t add a root node!</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=DBIx-Class-Tree-NestedSet">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=DBIx-Class-Tree-NestedSet">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=DBIx-Class-Tree-NestedSet">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=DBIx-Class-Tree-NestedSet">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBIx-Class-Tree-NestedSet">DBIx-Class-Tree-NestedSet CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">59319</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=DBIx-Class-Tree-NestedSet">DBIx-Class-Tree-NestedSet</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
leonardo [...] ruoso.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-233212-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-233213-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=59319">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-803259" href="/Public/Bug/Display.html?id=59319#txn-803259">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;13&nbsp;10:45:46&nbsp;2010</span>
    <span class="description">leonardo [...] ruoso.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> I can&#39;t add a root node!</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/803259/416416/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/416416">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 558b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">DBIx::Class::Row::update_or_insert&#40;&#41;: DBI Exception: DBD::Pg::st execute
failed: ERRO:  sintaxe de entrada Ã© invÃ¡lida para integer: &#34;id&#34; [for
Statement &#34;UPDATE site_categoria SET site_categoria_id = ? WHERE &#40; id =
? &#41;&#34; with ParamValues: 1=&#39;id&#39;, 2=&#39;3&#39;] at
/usr/share/perl5/HTML/FormFu/Model/DBIC.pm line 414

Using Debian Gnu/Linux;
Linux yuri 2.6.32-5-686 #1 SMP Sun Jul 11 02:12:03 UTC 2010 i686 GNU/Linux

DBIx::Class::Tree::NestedSet is up to date &#40;0.07&#41;.

This is perl, v5.10.1 &#40;*&#41; built for i486-linux-gnu-thread-multi

Using Catalyst::HTML::FormFu!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-803269" href="/Public/Bug/Display.html?id=59319#txn-803269">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;13&nbsp;11:38:00&nbsp;2010</span>
    <span class="description">leonardo [...] ruoso.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> leonardo [...] ruoso.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/803269/416422/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/416422">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 12.2k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-814694" href="/Public/Bug/Display.html?id=59319#txn-814694">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;08&nbsp;07:20:14&nbsp;2010</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/814694/422102/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/422102">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jul 13 10:45:46 2010, leonardo.ruoso wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; DBIx::Class::Row::update_or_insert&#40;&#41;: DBI Exception: DBD::Pg::st execute
&gt; failed: ERRO:  sintaxe de entrada Ã© invÃ¡lida para integer: &#34;id&#34; [for
&gt; Statement &#34;UPDATE site_categoria SET site_categoria_id = ? WHERE &#40; id =
&gt; ? &#41;&#34; with ParamValues: 1=&#39;id&#39;, 2=&#39;3&#39;] at
&gt; /usr/share/perl5/HTML/FormFu/Model/DBIC.pm line 414
&gt; 
&gt; Using Debian Gnu/Linux;
&gt; Linux yuri 2.6.32-5-686 #1 SMP Sun Jul 11 02:12:03 UTC 2010 i686 GNU/Linux
&gt; 
&gt; DBIx::Class::Tree::NestedSet is up to date &#40;0.07&#41;.
&gt; 
&gt; This is perl, v5.10.1 &#40;*&#41; built for i486-linux-gnu-thread-multi
&gt; 
&gt; Using Catalyst::HTML::FormFu!
</div>
DBIx::Class::Tree::NestedSet is not part of the DBIC core. Is there a
specific reason you filed the bug here? If not - please refile under
::Tree::NestedSet as most of the DBIC hackers do not have the necessary
insight to iagnose and fix your problem.

<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~icydee/DBIx-Class-Tree-NestedSet-0.07/lib/DBIx/Class/Tree/NestedSet.pm">http://search.cpan.org/~icydee/DBIx-Class-Tree-NestedSet-0.07/lib/DBIx/Class/Tree/NestedSet.pm</a></span>

Stalling pending possible not-our-bug rejection
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-814697" href="/Public/Bug/Display.html?id=59319#txn-814697">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;08&nbsp;07:20:15&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-814698" href="/Public/Bug/Display.html?id=59319#txn-814698">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;08&nbsp;07:20:15&nbsp;2010</span>
    <span class="description">ribasushi [...] leporine.io -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-814704" href="/Public/Bug/Display.html?id=59319#txn-814704">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;08&nbsp;07:28:44&nbsp;2010</span>
    <span class="description">leonardo [...] ruoso.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #59319] I can&#39;t add a root node!</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 8 Aug 2010 08:28:33 -0300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Leonardo Ruoso &lt;leonardo [...] ruoso.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/814704/422109/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/422109">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry, just followed the links....

Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· Â·
Leonardo Ruoso &#40;CE1921JP&#41;
<span class="clickylink"><a target="new" rel="nofollow" href="http://lattes.cnpq.br/2719086566536387">http://lattes.cnpq.br/2719086566536387</a></span> - <span class="clickylink"><a target="new" rel="nofollow" href="http://br.linkedin.com/in/lruoso">http://br.linkedin.com/in/lruoso</a></span>
leonardo@oktiva.com.br - &#40;85&#41; 8787-0312 -
sip:87870312@ekiga.net&lt;sip%3A87870312@ekiga.net&gt;
Marketing, ComunicaÃ§Ã£o Social e Tecnologia

<span class="clickylink"><a target="new" rel="nofollow" href="http://norvig.com/21-days.html">http://norvig.com/21-days.html</a></span>


2010/8/8 Peter Rabbitson via RT &lt;bug-DBIx-Class@rt.cpan.org&gt;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=59319">https://rt.cpan.org/Ticket/Display.html?id=59319</a></span> &gt;
&gt;
&gt; On Tue Jul 13 10:45:46 2010, leonardo.ruoso wrote:
<div class="message-stanza open">&gt; &gt; DBIx::Class::Row::update_or_insert&#40;&#41;: DBI Exception: DBD::Pg::st execute
&gt; &gt; failed: ERRO:  sintaxe de entrada Ã© invÃ¡lida para integer: &#34;id&#34; [for
&gt; &gt; Statement &#34;UPDATE site_categoria SET site_categoria_id = ? WHERE &#40; id =
&gt; &gt; ? &#41;&#34; with ParamValues: 1=&#39;id&#39;, 2=&#39;3&#39;] at
&gt; &gt; /usr/share/perl5/HTML/FormFu/Model/DBIC.pm line 414
&gt; &gt;
&gt; &gt; Using Debian Gnu/Linux;
&gt; &gt; Linux yuri 2.6.32-5-686 #1 SMP Sun Jul 11 02:12:03 UTC 2010 i686
</div>&gt; GNU/Linux
<div class="message-stanza open">&gt; &gt;
&gt; &gt; DBIx::Class::Tree::NestedSet is up to date &#40;0.07&#41;.
&gt; &gt;
&gt; &gt; This is perl, v5.10.1 &#40;*&#41; built for i486-linux-gnu-thread-multi
&gt; &gt;
&gt; &gt; Using Catalyst::HTML::FormFu!
</div>&gt;
&gt; DBIx::Class::Tree::NestedSet is not part of the DBIC core. Is there a
&gt; specific reason you filed the bug here? If not - please refile under
&gt; ::Tree::NestedSet as most of the DBIC hackers do not have the necessary
&gt; insight to iagnose and fix your problem.
&gt;
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~icydee/DBIx-Class-Tree-NestedSet-0.07/lib/DBIx/Class/Tree/NestedSet.pm">http://search.cpan.org/~icydee/DBIx-Class-Tree-NestedSet-0.07/lib/DBIx/Class/Tree/NestedSet.pm</a></span>&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/%7Eicydee/DBIx-Class-Tree-NestedSet-0.07/lib/DBIx/Class/Tree/NestedSet.pm">http://search.cpan.org/%7Eicydee/DBIx-Class-Tree-NestedSet-0.07/lib/DBIx/Class/Tree/NestedSet.pm</a></span>&gt;
&gt;
&gt; Stalling pending possible not-our-bug rejection
&gt;
&gt;
&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/814704/422110/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/422110">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.5k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-814706" href="/Public/Bug/Display.html?id=59319#txn-814706">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;08&nbsp;07:28:45&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-814752" href="/Public/Bug/Display.html?id=59319#txn-814752">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;08&nbsp;11:34:00&nbsp;2010</span>
    <span class="description">ribasushi [...] leporine.io -  Queue changed from DBIx-Class to DBIx-Class-Tree-NestedSet</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-859963" href="/Public/Bug/Display.html?id=59319#txn-859963">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;25&nbsp;15:06:30&nbsp;2010</span>
    <span class="description">moritz [...] faui2k3.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> moritz [...] faui2k3.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/859963/445100/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/445100">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">FWIW I also get the same error.

The bug is in this piece of code:


        if &#40;!defined $row-&gt;$root&#41; {
            my @primary_columns = $row-&gt;result_source-&gt;primary_columns;
            if &#40;scalar @primary_columns &gt; 1&#41; {
                croak&#40;&#39;Only single column primary keys are supported for
default root selection in nested set tree classes&#39;&#41;;
            }

            $row-&gt;update&#40;{
                $root =&gt; $primary_columns[0],
            }&#41;;

            $row-&gt;discard_changes;

If the primary column is &#39;id&#39;, then it tries to update $root =&gt; &#39;id&#39;,
which is a string and not an int.

This is a possible fix:
--- a/lib/DBIx/Class/Tree/NestedSet.pm
+++ b/lib/DBIx/Class/Tree/NestedSet.pm
@@ -119,7 +119,7 @@ sub insert {
             }
 
             $row-&gt;update&#40;{
-                $root =&gt; $primary_columns[0],
+                $root =&gt; \&#34;$primary_columns[0]&#34;,
             }&#41;;
 
             $row-&gt;discard_changes;

I didn&#39;t add a test because I don&#39;t quite understand the tests - it
seems to me that the insert tests are skipped by default anyway?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980185" href="/Public/Bug/Display.html?id=59319#txn-980185">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;22&nbsp;04:37:19&nbsp;2011</span>
    <span class="description">icydee [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/980185/510303/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/510303">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 42b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fix will be in release 0.09

Thank you
Ian
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980187" href="/Public/Bug/Display.html?id=59319#txn-980187">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;22&nbsp;04:37:21&nbsp;2011</span>
    <span class="description">icydee [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.446748</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
