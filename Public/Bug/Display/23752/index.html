<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #23752 for XML-RSS: needs binmode when comparing size of string with its output</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #23752 for XML-RSS: needs binmode when comparing size of string with its output</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/XML-RSS/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/XML-RSS/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/XML-RSS/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/XML-RSS/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/XML-RSS">XML-RSS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">23752</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/XML-RSS/Active/">XML-RSS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ishigaki [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-37498-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-37499-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/270503/118965/patch">
Sun Dec 03 07:04:27 2006 (336b) by ishigaki [...] cpan.org
</a>
</font></li>
</ul>


XML-RSS-23752.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/274758/122586/XML-RSS-23752.patch">
Fri Dec 08 14:15:22 2006 (1.6k) by SHLOMIF [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;03&nbsp;07:04:27&nbsp;2006</span>
    <span class="description">ishigaki [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> needs binmode when comparing size of string with its output</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">t\1.0-generate.t and t\2.0-generate.t fail on Win32 due to the lack of 
&#39;binmode&#39; while saving files. Attached patch would fix these.

---------------
C:\perl\perl5.8.4\.cpan\build\XML-RSS-1.20&gt;nmake test

Microsoft &#40;R&#41; Program Maintenance Utility   Version 6.00.8168.0
Copyright &#40;C&#41; Microsoft Corp 1988-1998. All rights reserved.

        C:\perl\perl5.8.4\bin\perl.exe &#34;-MTest::Manifest&#34; &#34;-
e&#34; &#34;run_t_manifest&#40;0, &#39;blib\lib&#39;, &#39;blib\arch&#39;,  &#41;&#34;
Level is
Test::Manifest::test_harness found [t\load.t t\pod.t t\version.t 
t\encoding.t t\0.9-generate.t t\0.9-parse.t t\0.91-parse.t t\1.0-
generate.t t\1.0-parse.t t\1.0-parse-exotic.t t\2.0-generate.t t\2.0-
permalink.t t\2.0-parse.t t\2.0-wo-title.t t\1.0-to-2.0.t 
t\auto_add_modules.t t\enclosures.t t\enclosures2.t t\encode-output.t 
t\items-are-0.t t\rss2-gt-encoding.t t\charset1.t]
t\load................ok
t\pod.................ok
t\version.............ok
t\encoding............ok
t\0.9-generate........ok
t\0.9-parse...........ok
t\0.91-parse..........ok
t\1.0-generate........ok 1/22
t\1.0-generate........NOK 13/22#   Failed test &#39;./t/1.0-generated.xml 
has &#39;1448&#39; characters.&#39;
#   in t\1.0-generate.t at line 100.
#          got: 1448
#     expected: 1402
# Looks like you failed 1 test of 22.
t\1.0-generate........dubious
        Test returned status 1 &#40;wstat 256, 0x100&#41;
DIED. FAILED test 13
        Failed 1/22 tests, 95.45% okay
t\1.0-parse...........ok
t\1.0-parse-exotic....ok
t\2.0-generate........NOK 14/26
#   Failed test &#39;t/2.0-generated.xml has &#39;1561&#39; characters.&#39;
#   in t\2.0-generate.t at line 103.
#          got: &#39;1561&#39;
#     expected: &#39;1513&#39;
# Looks like you failed 1 test of 26.
t\2.0-generate........dubious
        Test returned status 1 &#40;wstat 256, 0x100&#41;
DIED. FAILED test 14
        Failed 1/26 tests, 96.15% okay
t\2.0-permalink.......ok
t\2.0-parse...........ok
t\2.0-wo-title........ok
t\1.0-to-2.0..........ok
t\auto_add_modules....ok
t\enclosures..........ok
t\enclosures2.........ok
t\encode-output.......ok
t\items-are-0.........ok
t\rss2-gt-encoding....ok
t\charset1............ok
Failed Test      Stat Wstat Total Fail  List of Failed
------------------------------------------------------------------------
-------
t\1.0-generate.t    1   256    22    1  13
t\2.0-generate.t    1   256    26    1  14
Failed 2/22 test scripts. 2/222 subtests failed.
Files=22, Tests=222, 58 wallclock secs &#40; 0.00 cusr +  0.00 csys =  0.00 
CPU&#41;
Failed 2/22 test programs. 2/222 subtests failed.
# Looks like your test died before it could output anything.
NMAKE : fatal error U1077: &#39;C:\perl\perl5.8.4\bin\perl.exe&#39; : ﾘﾀｰﾝ ｺｰﾄﾞ 
&#39;0xff&#39;
Stop.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/270503/118965/patch">Download patch</a><br />
<span class="downloadcontenttype">application/octet-stream 336b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;08&nbsp;14:15:20&nbsp;2006</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Improved Patch</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> SHLOMIF [...] cpan.org</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Dec 03 07:04:27 2006, ISHIGAKI wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; t\1.0-generate.t and t\2.0-generate.t fail on Win32 due to the lack 
</div>of 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#39;binmode&#39; while saving files. Attached patch would fix these.
&gt; 
</div>
Hi!

I don&#39;t like this because RSS is text and should be outputted as such. 
Attached is a better patch that resolves it in a better way. Instead 
of comparing the size of the file &#40;in bytes&#41; to the length of the 
string &#40;in characters&#41;, slurp the file and &#34;eq&#34; its contents to the 
string.

Here is my commit message for potential reuse:

&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
Made the -generate.t tests more robust - instead of checking for
the file size, compare the contents of the file to the as_string&#40;&#41; 
return
value. That way LF/CRLF conversions and other such incompatibilities 
in
calculating file size vs. string length can be mitigated.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</div></div>Ask, please apply it.

Regards,

       Shlomi Fish


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ---------------
&gt; C:\perl\perl5.8.4\.cpan\build\XML-RSS-1.20&gt;nmake test
&gt; 
&gt; Microsoft &#40;R&#41; Program Maintenance Utility   Version 6.00.8168.0
&gt; Copyright &#40;C&#41; Microsoft Corp 1988-1998. All rights reserved.
&gt; 
&gt;         C:\perl\perl5.8.4\bin\perl.exe &#34;-MTest::Manifest&#34; &#34;-
&gt; e&#34; &#34;run_t_manifest&#40;0, &#39;blib\lib&#39;, &#39;blib\arch&#39;,  &#41;&#34;
&gt; Level is
&gt; Test::Manifest::test_harness found [t\load.t t\pod.t t\version.t 
&gt; t\encoding.t t\0.9-generate.t t\0.9-parse.t t\0.91-parse.t t\1.0-
&gt; generate.t t\1.0-parse.t t\1.0-parse-exotic.t t\2.0-generate.t 
</div>t\2.0-
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; permalink.t t\2.0-parse.t t\2.0-wo-title.t t\1.0-to-2.0.t 
&gt; t\auto_add_modules.t t\enclosures.t t\enclosures2.t 
</div>t\encode-output.t 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; t\items-are-0.t t\rss2-gt-encoding.t t\charset1.t]
&gt; t\load................ok
&gt; t\pod.................ok
&gt; t\version.............ok
&gt; t\encoding............ok
&gt; t\0.9-generate........ok
&gt; t\0.9-parse...........ok
&gt; t\0.91-parse..........ok
&gt; t\1.0-generate........ok 1/22
&gt; t\1.0-generate........NOK 13/22#   Failed 
</div>test &#39;./t/1.0-generated.xml 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; has &#39;1448&#39; characters.&#39;
&gt; #   in t\1.0-generate.t at line 100.
&gt; #          got: 1448
&gt; #     expected: 1402
&gt; # Looks like you failed 1 test of 22.
&gt; t\1.0-generate........dubious
&gt;         Test returned status 1 &#40;wstat 256, 0x100&#41;
&gt; DIED. FAILED test 13
&gt;         Failed 1/22 tests, 95.45% okay
&gt; t\1.0-parse...........ok
&gt; t\1.0-parse-exotic....ok
&gt; t\2.0-generate........NOK 14/26
&gt; #   Failed test &#39;t/2.0-generated.xml has &#39;1561&#39; characters.&#39;
&gt; #   in t\2.0-generate.t at line 103.
&gt; #          got: &#39;1561&#39;
&gt; #     expected: &#39;1513&#39;
&gt; # Looks like you failed 1 test of 26.
&gt; t\2.0-generate........dubious
&gt;         Test returned status 1 &#40;wstat 256, 0x100&#41;
&gt; DIED. FAILED test 14
&gt;         Failed 1/26 tests, 96.15% okay
&gt; t\2.0-permalink.......ok
&gt; t\2.0-parse...........ok
&gt; t\2.0-wo-title........ok
&gt; t\1.0-to-2.0..........ok
&gt; t\auto_add_modules....ok
&gt; t\enclosures..........ok
&gt; t\enclosures2.........ok
&gt; t\encode-output.......ok
&gt; t\items-are-0.........ok
&gt; t\rss2-gt-encoding....ok
&gt; t\charset1............ok
&gt; Failed Test      Stat Wstat Total Fail  List of Failed
&gt; ------------------------------------------------------------------------
&gt; -------
&gt; t\1.0-generate.t    1   256    22    1  13
&gt; t\2.0-generate.t    1   256    26    1  14
&gt; Failed 2/22 test scripts. 2/222 subtests failed.
&gt; Files=22, Tests=222, 58 wallclock secs &#40; 0.00 cusr +  0.00 csys =  
</div>0.00 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; CPU&#41;
&gt; Failed 2/22 test programs. 2/222 subtests failed.
&gt; # Looks like your test died before it could output anything.
&gt; NMAKE : fatal error U1077: &#39;C:\perl\perl5.8.4\bin\perl.exe&#39; : ﾘﾀｰﾝ ｺｰ
</div>ﾄﾞ 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#39;0xff&#39;
&gt; Stop.
</div></div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">=== t/1.0-generate.t
==================================================================
--- t/1.0-generate.t	&#40;revision 483&#41;
+++ t/1.0-generate.t	&#40;revision 484&#41;
@@ -90,15 +90,23 @@
        RSS_MOD_PREFIX,
        &#34;Namespace URI is &#34;.RSS_MOD_URI&#41;;
 
-my $len = length&#40;$rss-&gt;as_string&#40;&#41;&#41;;
+my $as_string = $rss-&gt;as_string&#40;&#41;;
+my $len = length&#40;$as_string&#41;;
 ok&#40;$len,&#34;RSS feed has &#39;$len&#39; characters&#34;&#41;;
 
 ok&#40;$rss-&gt;save&#40;RSS_SAVEAS&#41;,
    &#34;Wrote to disk: &#34;.RSS_SAVEAS&#41;;
 
-my $size = &#40;stat&#40;RSS_SAVEAS&#41;&#41;[7];
-cmp_ok&#40;$size,&#34;==&#34;,$len,RSS_SAVEAS.&#34; has &#39;$size&#39; characters.&#34;&#41;;
+my $file_contents;
+{
+    local $/;
+    open I, &#34;&lt;&#34;, RSS_SAVEAS&#40;&#41;;
+    $file_contents = &lt;I&gt;;
+    close&#40;I&#41;;
+}
 
+cmp_ok&#40;$file_contents,&#34;eq&#34;,$as_string,RSS_SAVEAS.&#34; contains the as_string&#40;&#41; result&#34;&#41;;
+
 eval { $rss-&gt;parsefile&#40;RSS_SAVEAS&#41;};
 is&#40;$@,&#39;&#39;,&#34;Parsed &#34;.RSS_SAVEAS&#41;;
 
=== t/2.0-generate.t
==================================================================
--- t/2.0-generate.t	&#40;revision 483&#41;
+++ t/2.0-generate.t	&#40;revision 484&#41;
@@ -94,14 +94,23 @@
 
 is&#40; $rss-&gt;{modules}-&gt;{$uri}, RSS_MOD_PREFIX, &#34;Namespace URI is &#34; . RSS_MOD_URI&#41;;
 
-my $len = length&#40;$rss-&gt;as_string&#40;&#41;&#41;;
+my $as_string = $rss-&gt;as_string&#40;&#41;;
+my $len = length&#40;$as_string&#41;;
 ok&#40; $len, &#34;RSS feed has &#39;$len&#39; characters&#34; &#41;;
 
 ok&#40; $rss-&gt;save&#40;RSS_SAVEAS&#41;, &#34;Wrote to disk: &#34; . RSS_SAVEAS &#41;;
 
-my $size = -s &#40;RSS_SAVEAS&#41;;
-is&#40; $size, $len, RSS_SAVEAS . &#34; has &#39;$size&#39; characters.&#34;&#41;;
+my $file_contents;
+{
+    local $/;
+    open I, &#34;&lt;&#34;, RSS_SAVEAS&#40;&#41;;
+    $file_contents = &lt;I&gt;;
+    close&#40;I&#41;;
+}
+ 
+is&#40;$file_contents,$as_string,RSS_SAVEAS.&#34; contains the as_string&#40;&#41; result&#34;&#41;;
 
+
 eval { $rss-&gt;parsefile&#40; RSS_SAVEAS &#41; };
 is&#40; $@, &#39;&#39;, &#34;Parsed &#34; . RSS_SAVEAS &#41;;
 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;08&nbsp;14:15:35&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;17&nbsp;07:24:57&nbsp;2006</span>
    <span class="description">ABH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Applied, thanks &#40;r8404&#41;.  The change will be in v1.22.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;17&nbsp;07:25:07&nbsp;2006</span>
    <span class="description">ABH [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
