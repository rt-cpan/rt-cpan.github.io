<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #21981 for CGI-Session: Bug with utf8</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #21981 for CGI-Session: Bug with utf8</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/CGI-Session/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/CGI-Session/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/CGI-Session/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/CGI-Session/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/CGI-Session">CGI-Session CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">21981</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/CGI-Session/Active/">CGI-Session</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">RSAVAGE [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
erwan [...] mas.nom.fr

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-5872-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-5873-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;09&nbsp;19:12:23&nbsp;2006</span>
    <span class="description">erwan [...] mas.nom.fr -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Bug with utf8</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 10 Oct 2006 01:11:48 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI-Session [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Erwan MAS &lt;erwan [...] mas.nom.fr&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello ,

The program in attachement does not work .
But when i remove the line &#34;use encoding &#39;utf8&#39;;&#34; the program work .

Perhaps I had missed some thing.

-- 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">     ____________________________________________________________
    / Erwan MAS                                                 /\
   | mailto:erwan@mas.nom.fr                                   |_/
___|________________________________________________________   |
\___________________________________________________________\__/
</div></div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;09&nbsp;19:17:20&nbsp;2006</span>
    <span class="description">erwan [...] mas.nom.fr -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21981] AutoReply: Bug with utf8</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 10 Oct 2006 01:16:16 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI-Session [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Erwan MAS &lt;erwan [...] mas.nom.fr&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I paste de programm in the mail .
---------------------------------------------------------------

#!/usr/bin/perl
#----------------------------------------------------------------------------------------------
use encoding &#39;utf8&#39;;
#----------------------------------------------------------------------------------------------
use CGI::Session;
#----------------------------------------------------------------------------------------------
sub create_ses {
    my $session = new CGI::Session&#40;&#34;driver:File&#34;, undef, {Directory=&gt;&#39;/tmp&#39;}&#41;;
    $session-&gt;param&#40;-name=&gt;&#39;user&#39;, -value=&gt;&#34;coucou&#34;&#41;;
    $session-&gt;param&#40;-name=&gt;&#39;passwd&#39;, -value=&gt;&#34;cpan&#34;&#41;;
    $session-&gt;expire&#40;&#39;+30m&#39;&#41;;
    my $sid=$session-&gt;id&#40;&#41;;
    $session-&gt;close&#40;&#41; ;
    return $sid ;
}
#----------------------------------------------------------------------------------------------
sub reopen_ses {
    my $sid=shift ;
    my $session = new CGI::Session&#40;&#34;driver:File&#34;, $sid , {Directory=&gt;&#39;/tmp&#39;}&#41;;
    #
    if &#40; $session &#41; {
        return &#39;OK&#39; ;
        $session-&gt;close&#40;&#41; ;
    } else {
        printf STDERR &#34;can not create a new session &#39;%s&#39;&#34;,CGI::Session-&gt;errstr&#40;&#41; ;
    }
    return undef ;
}
#----------------------------------------------------------------------------------------------
my $t=&#38;create_ses&#40;&#41; ;
if &#40; $t &#41; {
    my $tt=&#38;reopen_ses&#40;$t&#41; ;
    if &#40; $tt &#41; {
        print STDERR &#34;test is ok\n&#34; ;
    }
}
#----------------------------------------------------------------------------------------------

---------------------------------------------------------------
-- 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">     ____________________________________________________________
    / Erwan MAS                                                 /\
   | mailto:erwan@mas.nom.fr                                   |_/
___|________________________________________________________   |
\___________________________________________________________\__/
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;22&nbsp;16:14:58&nbsp;2006</span>
    <span class="description">mark [...] summersault.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21981] Bug with utf8</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 20 Oct 2006 19:03:08 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI-Session [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Stosberg &lt;mark [...] summersault.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Erwan MAS via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Hello ,
&gt; 
&gt; The program in attachement does not work .
&gt; But when i remove the line &#34;use encoding &#39;utf8&#39;;&#34; the program work .
&gt; 
&gt; Perhaps I had missed some thing.
</div>
Erwan,

I&#39;m interested to see if we can resolve this, because I want to make
sure that CGI::Session works with UTF. However, it&#39;s not something I
need in my own work, it looks like you do. Would you be willing to help?

First, see if you can keep reducing your test script further to see if
you can isolate the problem, ideally as a &#34;Test::More&#34; style test script
we could add to the test suite.

If you do isolate the problem, perhaps you could take the next step and
see if could also fix the bug in the source code.

If you get stuck at any point, ask for help in the CGI::Session users
mailing list.

In any case, I&#39;ll thank you for the bug report. Someone will look into
it further eventually if you don&#39;t.

    Mark

-- 
<span class="clickylink"><a target="new" rel="nofollow" href="http://mark.stosberg.com/">http://mark.stosberg.com/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;22&nbsp;16:14:59&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;15&nbsp;22:21:33&nbsp;2008</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
I&#39;m giving this ticket to Ron Savage who has started to look into this. 

   Mark

On Sun Oct 22 16:14:58 2006, mark@summersault.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Erwan MAS via RT wrote:
<div class="message-stanza open">&gt; &gt;
&gt; &gt; Hello ,
&gt; &gt; 
&gt; &gt; The program in attachement does not work .
&gt; &gt; But when i remove the line &#34;use encoding &#39;utf8&#39;;&#34; the program work .
&gt; &gt; 
&gt; &gt; Perhaps I had missed some thing.
</div>&gt; 
&gt; Erwan,
&gt; 
&gt; I&#39;m interested to see if we can resolve this, because I want to make
&gt; sure that CGI::Session works with UTF. However, it&#39;s not something I
&gt; need in my own work, it looks like you do. Would you be willing to help?
&gt; 
&gt; First, see if you can keep reducing your test script further to see if
&gt; you can isolate the problem, ideally as a &#34;Test::More&#34; style test script
&gt; we could add to the test suite.
&gt; 
&gt; If you do isolate the problem, perhaps you could take the next step and
&gt; see if could also fix the bug in the source code.
&gt; 
&gt; If you get stuck at any point, ask for help in the CGI::Session users
&gt; mailing list.
&gt; 
&gt; In any case, I&#39;ll thank you for the bug report. Someone will look into
&gt; it further eventually if you don&#39;t.
&gt; 
&gt;     Mark
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;15&nbsp;22:21:36&nbsp;2008</span>
    <span class="description">MARKSTOS [...] cpan.org -  Given to RSAVAGE</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;15&nbsp;22:52:53&nbsp;2008</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I see there&#39;s a fix for this in SVN and some passing tests. Would it be
too much hassle to make this warning the test emits go away? Some users
could take it to indicate a problem.

I looked at distributing Test::Warn for this purpose, but it requires a
 string of dependencies itself. 

Can&#39;t locate package Encode::Encoding for @Encode::utf8::ISA at &#40;eval
19&#41; line 1.
Can&#39;t locate package Encode::Encoding for @Encode::utf8::ISA at &#40;eval
19&#41; line 1.
        &#40;in cleanup&#41; Can&#39;t locate object method &#34;renewed&#34; via package
&#34;Encode::utf8&#34; &#40;perhaps you forgot to load &#34;Encode::utf8&#34;?&#41; at &#40;eval 19&#41;
line 1.
        &#40;in cleanup&#41; Can&#39;t locate object method &#34;renewed&#34; via package
&#34;Encode::utf8&#34; &#40;perhaps you forgot to load &#34;Encode::utf8&#34;?&#41; at &#40;eval 19&#41;
line 1.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;16&nbsp;01:30:18&nbsp;2008</span>
    <span class="description">ron [...] savage.net.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21981] Bug with utf8</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 16 Mar 2008 16:33:07 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI-Session [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ron Savage &lt;ron [...] savage.net.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Mark

On Sat, 2008-03-15 at 22:52 -0400, MARKSTOS via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Queue: CGI-Session
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21981">http://rt.cpan.org/Ticket/Display.html?id=21981</a></span> &gt;
&gt; 
&gt; I see there&#39;s a fix for this in SVN and some passing tests. Would it be
&gt; too much hassle to make this warning the test emits go away? Some users
&gt; could take it to indicate a problem.
&gt; 
&gt; I looked at distributing Test::Warn for this purpose, but it requires a
&gt;  string of dependencies itself. 
&gt; 
&gt; Can&#39;t locate package Encode::Encoding for @Encode::utf8::ISA at &#40;eval
&gt; 19&#41; line 1.
&gt; Can&#39;t locate package Encode::Encoding for @Encode::utf8::ISA at &#40;eval
&gt; 19&#41; line 1.
&gt;         &#40;in cleanup&#41; Can&#39;t locate object method &#34;renewed&#34; via package
&gt; &#34;Encode::utf8&#34; &#40;perhaps you forgot to load &#34;Encode::utf8&#34;?&#41; at &#40;eval 19&#41;
&gt; line 1.
&gt;         &#40;in cleanup&#41; Can&#39;t locate object method &#34;renewed&#34; via package
&gt; &#34;Encode::utf8&#34; &#40;perhaps you forgot to load &#34;Encode::utf8&#34;?&#41; at &#40;eval 19&#41;
&gt; line 1.
</div>
My first thought was to patch the text associated with the test to add:

Warnings expected. Consult docs re &#39;utf8&#39;

I&#39;ll do that now in SVN.

Also, let me copy here for the record the rationale I posted to the
mailing list for these warnings:

&lt;==8&gt;&lt;==&gt;
The new test program I&#39;ve written passes all tests, but still emits a
deliberate warning message. Here&#39;s my thinking:

o Tests and installation should not fail in all those cases people are
not using utf8

o References to utf8 are on RT, the docs &#40;with my patch&#41;, and this email
list&#39;s archive, to help people diagnose problems

o My new test program passes all tests so automated testing and
installation can continue, assuming all other problems are fixed, of
course

o The new test emits a warning so anyone watching the tests&#39; progress
will see a reference to utf8 being problematic

o Clearly I do not have a solution to this problem, but I have no
intention of diving into the innards of utf8-related code, so I see the
new test as simply giving people more warning about utf8 problems than
they&#39;ve had up to now
&lt;==8&gt;&lt;==&gt;

Sure, users can be confused, but to me that&#39;s better than having their
programs behave mysteriously over a known problem.

-- 
Ron Savage
ron@savage.net.au
<span class="clickylink"><a target="new" rel="nofollow" href="http://savage.net.au/index.html">http://savage.net.au/index.html</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;05&nbsp;13:51:22&nbsp;2008</span>
    <span class="description">BEROV [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi, I had also this problem, but when using Storable as serializer and 
MySQL for storage.
I changed the serializer to yaml and the problem was solved.
I know this is just a workaround...

If this is of any help:
My dsn:
DBI:mysql:database=blabala;host=localhost;mysql_enable_utf8=1

note the &#39;mysql_enable_utf8=1&#39;

and I use also DBIx::Simple::UTF8Columns which automatically encodes the
data sent to the database.

But Storable files/data are binary and are not supposed to be utf8 upgraded.

Since YAML dumps are just text there is no problem.


On Sun Mar 16 01:30:18 2008, ron@savage.net.au wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Mark
&gt; 
&gt; On Sat, 2008-03-15 at 22:52 -0400, MARKSTOS via RT wrote:
<div class="message-stanza open">&gt; &gt; Queue: CGI-Session
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21981">http://rt.cpan.org/Ticket/Display.html?id=21981</a></span> &gt;
&gt; &gt; 
&gt; &gt; I see there&#39;s a fix for this in SVN and some passing tests. Would it be
&gt; &gt; too much hassle to make this warning the test emits go away? Some users
&gt; &gt; could take it to indicate a problem.
&gt; &gt; 
&gt; &gt; I looked at distributing Test::Warn for this purpose, but it requires a
&gt; &gt;  string of dependencies itself. 
&gt; &gt; 
&gt; &gt; Can&#39;t locate package Encode::Encoding for @Encode::utf8::ISA at &#40;eval
&gt; &gt; 19&#41; line 1.
&gt; &gt; Can&#39;t locate package Encode::Encoding for @Encode::utf8::ISA at &#40;eval
&gt; &gt; 19&#41; line 1.
&gt; &gt;         &#40;in cleanup&#41; Can&#39;t locate object method &#34;renewed&#34; via package
&gt; &gt; &#34;Encode::utf8&#34; &#40;perhaps you forgot to load &#34;Encode::utf8&#34;?&#41; at &#40;eval 19&#41;
&gt; &gt; line 1.
&gt; &gt;         &#40;in cleanup&#41; Can&#39;t locate object method &#34;renewed&#34; via package
&gt; &gt; &#34;Encode::utf8&#34; &#40;perhaps you forgot to load &#34;Encode::utf8&#34;?&#41; at &#40;eval 19&#41;
&gt; &gt; line 1.
</div>&gt; 
&gt; My first thought was to patch the text associated with the test to add:
&gt; 
&gt; Warnings expected. Consult docs re &#39;utf8&#39;
&gt; 
&gt; I&#39;ll do that now in SVN.
&gt; 
&gt; Also, let me copy here for the record the rationale I posted to the
&gt; mailing list for these warnings:
&gt; 
&gt; &lt;==8&gt;&lt;==&gt;
&gt; The new test program I&#39;ve written passes all tests, but still emits a
&gt; deliberate warning message. Here&#39;s my thinking:
&gt; 
&gt; o Tests and installation should not fail in all those cases people are
&gt; not using utf8
&gt; 
&gt; o References to utf8 are on RT, the docs &#40;with my patch&#41;, and this email
&gt; list&#39;s archive, to help people diagnose problems
&gt; 
&gt; o My new test program passes all tests so automated testing and
&gt; installation can continue, assuming all other problems are fixed, of
&gt; course
&gt; 
&gt; o The new test emits a warning so anyone watching the tests&#39; progress
&gt; will see a reference to utf8 being problematic
&gt; 
&gt; o Clearly I do not have a solution to this problem, but I have no
&gt; intention of diving into the innards of utf8-related code, so I see the
&gt; new test as simply giving people more warning about utf8 problems than
&gt; they&#39;ve had up to now
&gt; &lt;==8&gt;&lt;==&gt;
&gt; 
&gt; Sure, users can be confused, but to me that&#39;s better than having their
&gt; programs behave mysteriously over a known problem.
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;31&nbsp;23:40:41&nbsp;2008</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
BEROV,

I&#39;m not sure I understand: Are suggesting there&#39;s still a further change
that we should be making in CGI::Session?

    Mark

On Sat Apr 05 13:51:22 2008, BEROV wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi, I had also this problem, but when using Storable as serializer and 
&gt; MySQL for storage.
&gt; I changed the serializer to yaml and the problem was solved.
&gt; I know this is just a workaround...
&gt; 
&gt; If this is of any help:
&gt; My dsn:
&gt; DBI:mysql:database=blabala;host=localhost;mysql_enable_utf8=1
&gt; 
&gt; note the &#39;mysql_enable_utf8=1&#39;
&gt; 
&gt; and I use also DBIx::Simple::UTF8Columns which automatically encodes the
&gt; data sent to the database.
&gt; 
&gt; But Storable files/data are binary and are not supposed to be utf8
</div>upgraded.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Since YAML dumps are just text there is no problem.
&gt; 
&gt; 
&gt; On Sun Mar 16 01:30:18 2008, ron@savage.net.au wrote:
<div class="message-stanza open">&gt; &gt; Hi Mark
&gt; &gt; 
&gt; &gt; On Sat, 2008-03-15 at 22:52 -0400, MARKSTOS via RT wrote:
<div class="message-stanza open">&gt; &gt; &gt; Queue: CGI-Session
&gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21981">http://rt.cpan.org/Ticket/Display.html?id=21981</a></span> &gt;
&gt; &gt; &gt; 
&gt; &gt; &gt; I see there&#39;s a fix for this in SVN and some passing tests. Would
</div></div></div>it be
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; too much hassle to make this warning the test emits go away? Some
</div></div>users
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; could take it to indicate a problem.
&gt; &gt; &gt; 
&gt; &gt; &gt; I looked at distributing Test::Warn for this purpose, but it
</div></div>requires a
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt;  string of dependencies itself. 
&gt; &gt; &gt; 
&gt; &gt; &gt; Can&#39;t locate package Encode::Encoding for @Encode::utf8::ISA at &#40;eval
&gt; &gt; &gt; 19&#41; line 1.
&gt; &gt; &gt; Can&#39;t locate package Encode::Encoding for @Encode::utf8::ISA at &#40;eval
&gt; &gt; &gt; 19&#41; line 1.
&gt; &gt; &gt;         &#40;in cleanup&#41; Can&#39;t locate object method &#34;renewed&#34; via package
&gt; &gt; &gt; &#34;Encode::utf8&#34; &#40;perhaps you forgot to load &#34;Encode::utf8&#34;?&#41; at
</div></div>&#40;eval 19&#41;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; line 1.
&gt; &gt; &gt;         &#40;in cleanup&#41; Can&#39;t locate object method &#34;renewed&#34; via package
&gt; &gt; &gt; &#34;Encode::utf8&#34; &#40;perhaps you forgot to load &#34;Encode::utf8&#34;?&#41; at
</div></div>&#40;eval 19&#41;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; line 1.
</div>&gt; &gt; 
&gt; &gt; My first thought was to patch the text associated with the test to add:
&gt; &gt; 
&gt; &gt; Warnings expected. Consult docs re &#39;utf8&#39;
&gt; &gt; 
&gt; &gt; I&#39;ll do that now in SVN.
&gt; &gt; 
&gt; &gt; Also, let me copy here for the record the rationale I posted to the
&gt; &gt; mailing list for these warnings:
&gt; &gt; 
&gt; &gt; &lt;==8&gt;&lt;==&gt;
&gt; &gt; The new test program I&#39;ve written passes all tests, but still emits a
&gt; &gt; deliberate warning message. Here&#39;s my thinking:
&gt; &gt; 
&gt; &gt; o Tests and installation should not fail in all those cases people are
&gt; &gt; not using utf8
&gt; &gt; 
&gt; &gt; o References to utf8 are on RT, the docs &#40;with my patch&#41;, and this email
&gt; &gt; list&#39;s archive, to help people diagnose problems
&gt; &gt; 
&gt; &gt; o My new test program passes all tests so automated testing and
&gt; &gt; installation can continue, assuming all other problems are fixed, of
&gt; &gt; course
&gt; &gt; 
&gt; &gt; o The new test emits a warning so anyone watching the tests&#39; progress
&gt; &gt; will see a reference to utf8 being problematic
&gt; &gt; 
&gt; &gt; o Clearly I do not have a solution to this problem, but I have no
&gt; &gt; intention of diving into the innards of utf8-related code, so I see the
&gt; &gt; new test as simply giving people more warning about utf8 problems than
&gt; &gt; they&#39;ve had up to now
&gt; &gt; &lt;==8&gt;&lt;==&gt;
&gt; &gt; 
&gt; &gt; Sure, users can be confused, but to me that&#39;s better than having their
&gt; &gt; programs behave mysteriously over a known problem.
&gt; &gt; 
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;31&nbsp;23:40:43&nbsp;2008</span>
    <span class="description">MARKSTOS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;27&nbsp;21:20:05&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Because there is have been no response from the requestor in the last 5 months, I&#39;m 
considering this resolved. 
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;27&nbsp;21:20:06&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;27&nbsp;21:20:10&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
