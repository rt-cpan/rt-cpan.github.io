<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #82349 for Glib: t/9.t hangs on FreeBSD 9 with non-threaded perl</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #82349 for Glib: t/9.t hangs on FreeBSD 9 with non-threaded perl</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Glib">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Glib">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Glib">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Glib">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Glib">Glib CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">82349</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Glib">Glib</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
SREZIC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-14786-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
1.262</li>
<li>
1.280</li>
<li>
1.290</li>
<li>
1.291</li>
<li>
1.300</li>
<li>
1.301</li>
<li>
1.302</li>
</ul>
    </td>
  </tr>
  <tr id="CF-14787-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




0001-Fix-hang-of-t-9.t-on-FreeBSD-perl-s-not-built-with-p.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1427741/758516/0001-Fix-hang-of-t-9.t-on-FreeBSD-perl-s-not-built-with-p.patch">
Sat Nov 01 13:18:41 2014 (1.3k) by kaffeetisch [...] gmx.de
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=82349">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1160796" href="/Public/Bug/Display.html?id=82349#txn-1160796">#</a>      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;31&nbsp;08:55:34&nbsp;2012</span>
    <span class="description">SREZIC [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> t/9.t hangs on FreeBSD 9 with non-threaded perl</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1160796/610329/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/610329">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 418b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The test suite works fine with threaded perls on the same system. Also
there does not seem to be problems with older version of FreeBSD &#40;8.0&#41;.
A pass/fail overview may be seen here:

<span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=Glib%201.280;os=freebsd;reports=1">http://matrix.cpantesters.org/?dist=Glib%201.280;os=freebsd;reports=1</a></span>

The issue was also mentioned in the gtk-perl mailing list, see here:
<span class="clickylink"><a target="new" rel="nofollow" href="https://mail.gnome.org/archives/gtk-perl-list/2011-November/msg00038.html">https://mail.gnome.org/archives/gtk-perl-list/2011-November/msg00038.html</a></span>

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1160802" href="/Public/Bug/Display.html?id=82349#txn-1160802">#</a>      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;31&nbsp;09:12:19&nbsp;2012</span>
    <span class="description">schmorp [...] schmorp.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #82349] t/9.t hangs on FreeBSD 9 with non-threaded perl</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 31 Dec 2012 15:12:07 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Slaven_Rezic via RT &lt;bug-Glib [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marc Lehmann &lt;schmorp [...] schmorp.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1160802/610334/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/610334">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, Dec 31, 2012 at 08:55:35AM -0500, Slaven_Rezic via RT &lt;bug-Glib@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The test suite works fine with threaded perls on the same system. Also
</div>
Just a thought then: does FreeBSD support using threads &#40;or threaded
libraries&#41; when the main program hasn&#39;t been linked with e.g. -pthread?

You can test this by linking perl itself with -pthread &#40;without linking
against -lpthread or enabling the windows process emulation code
&#40;ithreads&#41;&#41;.

If it then works, it&#39;s a limitation in freebsd threading &#40;or rather, lack
of the extension found in GNU/Linux and many other systems which don&#39;t
need this&#41;, and since gtk/glib might use threads internally at any time,
there is little in the way of avoiding it, short of recompiling glib and
gtk without thread support as well.

The best solution would be to compile the non-ithreaded perl as a threaded
application as the problem will otherwise come up with any extension that
wants to use pthreads.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; there does not seem to be problems with older version of FreeBSD &#40;8.0&#41;.
</div>
I know that older versions &#40;freebsd 8&#41; do not support this, but happen to
work some of the time &#40;and corrupting memory at some other times&#41;, so that
might just be luck.

-- 
                The choice of a       Deliantra, the free code+content MORPG
      -----==-     _GNU_              <span class="clickylink"><a target="new" rel="nofollow" href="http://www.deliantra.net">http://www.deliantra.net</a></span>
      ----==-- _       generation
      ---==---&#40;_&#41;__  __ ____  __      Marc Lehmann
      --==---/ / _ \/ // /\ \/ /      schmorp@schmorp.de
      -=====/_/_//_/\_,_/ /_/\_\
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1160805" href="/Public/Bug/Display.html?id=82349#txn-1160805">#</a>      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;31&nbsp;09:12:20&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1161422" href="/Public/Bug/Display.html?id=82349#txn-1161422">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;02&nbsp;18:22:48&nbsp;2013</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1161422/610652/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/610652">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2012-12-31 09:12:19, schmorp@schmorp.de wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon, Dec 31, 2012 at 08:55:35AM -0500, Slaven_Rezic via RT &lt;bug-
&gt; Glib@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; The test suite works fine with threaded perls on the same system.
</div>&gt; Also
&gt; 
&gt; Just a thought then: does FreeBSD support using threads &#40;or threaded
&gt; libraries&#41; when the main program hasn&#39;t been linked with e.g.
&gt; -pthread?
&gt; 
&gt; You can test this by linking perl itself with -pthread &#40;without
&gt; linking
&gt; against -lpthread or enabling the windows process emulation code
&gt; &#40;ithreads&#41;&#41;.
</div>
Starting with FreeBSD 9.1, perl is compiled with -pthread by default.
The output of perl -V:ldflags in FreeBSD 9.0 was:

    ldflags=&#39; -Wl,-E  -fstack-protector -L/usr/local/lib&#39;;

In 9.1 it&#39;s:

    ldflags=&#39;-pthread -Wl,-E  -fstack-protector -L/usr/local/lib&#39;;

And in fact, Glib&#39;s t/9.t runs fine with the perl in FreeBSD 9.1.

Not sure what to do with this knowledge. -pthread may be turned off in
FreeBSD&#39;s perl port &#40;it&#39;s a configurable option&#41;, and the default
freebsd hint file in the perl source distribution also does not use
-pthread for non-threaded builds.

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1183566" href="/Public/Bug/Display.html?id=82349#txn-1183566">#</a>      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;20&nbsp;17:09:31&nbsp;2013</span>
    <span class="description">SREZIC [...] cpan.org -  Broken in 1.290 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1214898" href="/Public/Bug/Display.html?id=82349#txn-1214898">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;21&nbsp;09:57:31&nbsp;2013</span>
    <span class="description">SREZIC [...] cpan.org -  Broken in 1.291 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1214899" href="/Public/Bug/Display.html?id=82349#txn-1214899">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;21&nbsp;09:57:31&nbsp;2013</span>
    <span class="description">SREZIC [...] cpan.org -  Broken in 1.300 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1242908" href="/Public/Bug/Display.html?id=82349#txn-1242908">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;30&nbsp;10:04:20&nbsp;2013</span>
    <span class="description">MLEHMANN [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1273931" href="/Public/Bug/Display.html?id=82349#txn-1273931">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;12&nbsp;17:53:34&nbsp;2013</span>
    <span class="description">SREZIC [...] cpan.org -  Broken in 1.301 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1273932" href="/Public/Bug/Display.html?id=82349#txn-1273932">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;12&nbsp;17:53:34&nbsp;2013</span>
    <span class="description">SREZIC [...] cpan.org -  Broken in 1.302 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1273933" href="/Public/Bug/Display.html?id=82349#txn-1273933">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;12&nbsp;17:53:43&nbsp;2013</span>
    <span class="description">SREZIC [...] cpan.org -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1427741" href="/Public/Bug/Display.html?id=82349#txn-1427741">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;01&nbsp;13:18:41&nbsp;2014</span>
    <span class="description">kaffeetisch [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1427741/758515/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/758515">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 150b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Can you try &#34;freebsd-child-watch-fix&#34; branch then?

<span class="clickylink"><a target="new" rel="nofollow" href="https://git.gnome.org/browse/perl-Glib/log/?h=freebsd-child-watch-fix">https://git.gnome.org/browse/perl-Glib/log/?h=freebsd-child-watch-fix</a></span>

The patch is also attached.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0001-Fix-hang-of-t-9.t-on-FreeBSD-perl-s-not-built-with-p.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1427741/758516/0001-Fix-hang-of-t-9.t-on-FreeBSD-perl-s-not-built-with-p.patch">Download 0001-Fix-hang-of-t-9.t-on-FreeBSD-perl-s-not-built-with-p.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 9e3d2adb9541f98063b9d10c93232282910e9af6 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Torsten=20Sch=C3=B6nfeld?= &lt;kaffeetisch@gmx.de&gt;
Date: Sat, 1 Nov 2014 17:34:58 +0100
Subject: [PATCH] Fix hang of t/9.t on FreeBSD perl&#39;s not built with &#34;-pthread&#34;

Glib&#39;s child watches will not work when perl was not linked against
libpthread/libthr.

<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=82349">https://rt.cpan.org/Ticket/Display.html?id=82349</a></span>
---
 t/9.t | 16 +++++++++-------
 1 file changed, 9 insertions&#40;+&#41;, 7 deletions&#40;-&#41;

diff --git a/t/9.t b/t/9.t
index d067434..21c3f60 100644
--- a/t/9.t
+++ b/t/9.t
@@ -210,16 +210,18 @@ if &#40;Glib-&gt;CHECK_VERSION &#40;2, 14, 0&#41;&#41; {
 
 
 {
+  my $skip_reason = undef;
   if &#40;! $have_fork&#41; {
-    print &#34;ok 26 # skip, no fork: $fork_excuse\n&#34;;
-    print &#34;ok 27 # skip\n&#34;;
-    print &#34;ok 28 # skip\n&#34;;
-    print &#34;ok 29 # skip\n&#34;;
-    print &#34;ok 30 # skip\n&#34;;
-    goto SKIP_CHILD_TESTS;
+    $skip_reason = &#34;no fork: $fork_excuse&#34;;
   }
   if &#40;! Glib-&gt;CHECK_VERSION &#40;2, 4, 0&#41;&#41; {
-    print &#34;ok 26 # skip: need glib &gt;= 2.4\n&#34;;
+    $skip_reason = &#39;need glib &gt;= 2.4&#39;;
+  }
+  if &#40;$^O eq &#39;freebsd&#39; &#38;&#38; $Config{ldflags} !~ m/-pthread\b/&#41; {
+    $skip_reason = &#39;need a perl built with &#34;-pthread&#34; on freebsd&#39;;
+  }
+  if &#40;defined $skip_reason&#41; {
+    print &#34;ok 26 # skip: $skip_reason\n&#34;;
     print &#34;ok 27 # skip\n&#34;;
     print &#34;ok 28 # skip\n&#34;;
     print &#34;ok 29 # skip\n&#34;;
-- 
1.9.1

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1437460" href="/Public/Bug/Display.html?id=82349#txn-1437460">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;29&nbsp;12:06:07&nbsp;2014</span>
    <span class="description">kaffeetisch [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1437460/764171/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/764171">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 115b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">OK, I&#39;m now rather confident that this is the correct fix, so I pushed a variant of it that also applies to NetBSD.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1437463" href="/Public/Bug/Display.html?id=82349#txn-1437463">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;29&nbsp;12:06:08&nbsp;2014</span>
    <span class="description">kaffeetisch [...] gmx.de -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1437467" href="/Public/Bug/Display.html?id=82349#txn-1437467">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;29&nbsp;12:32:54&nbsp;2014</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1437467/764177/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/764177">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 258b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2014-11-01 13:18:41, TSCH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Can you try &#34;freebsd-child-watch-fix&#34; branch then?
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://git.gnome.org/browse/perl-Glib/log/?h=freebsd-child-watch-fix">https://git.gnome.org/browse/perl-Glib/log/?h=freebsd-child-watch-fix</a></span>
&gt; 
</div>
Looks good &#40;tried on a FreeBSD 9.2 system with perl 5.18.2 without threads or pthreads&#41;.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.746069</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
