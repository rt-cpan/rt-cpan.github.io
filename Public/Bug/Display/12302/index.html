<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #12302 for CPANPLUS: Report Fixes and Additions</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #12302 for CPANPLUS: Report Fixes and Additions</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=CPANPLUS">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=CPANPLUS">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=CPANPLUS">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=CPANPLUS">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/CPANPLUS">CPANPLUS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">12302</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">deleted</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=CPANPLUS">CPANPLUS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
barbie [...] missbarbell.co.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-8270-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.053    </td>
  </tr>
  <tr id="CF-8271-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




cpanplus-reports.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/129409/33748/cpanplus-reports.patch">
Fri Apr 15 09:34:09 2005 (11k) by cpan [...] babyl.dyndns.org
</a>
</font></li>
</ul>


devel-reports.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/129412/34523/devel-reports.patch">
Wed May 04 14:06:26 2005 (12.9k) by cpan [...] babyl.dyndns.org
</a>
</font></li>
</ul>


dist-mm.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/129415/39079/dist-mm.patch">
Thu Aug 18 13:11:22 2005 (1k) by cpan [...] babyl.dyndns.org
</a>
</font></li>
</ul>


patch.error<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/129410/34503/patch.error">
Wed May 04 09:43:56 2005 (16.4k) by andrew_wilcox [...] gwi.net
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=12302">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-129409" href="/Public/Bug/Display.html?id=12302#txn-129409">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;15&nbsp;09:34:09&nbsp;2005</span>
    <span class="description">BARBIE [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Report Fixes and Additions</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/129409/33747/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/33747">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 736b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">A bunch of report fixes:

* perl Makefile.PL/Build.PL failures now captured and reported
* passing tests in Dist::MM.pm now captured and reported in verbose 
  mode [1]
* added UNSUPPORTED_OS check, when a distribution bails themselves [2]
* PERL_VERSION_TOO_LOW now spots Module::Build format string
* NO_TESTS_DEFINED now spots basic string error
* _verify_missing_prereqs fixed to suppress Win32 File::Spec warnings

[1] I&#39;m planning to add this to Dist::Build.pm, but the technique for 
    capturing passing tests isn&#39;t available currently for the Module::Build 
    version.
[2] Spotted for File::FDpasser. Also added simple string detection to 
    enable CPAN authors to bail and have a NA report created rather than a
    FAIL.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/129409/33748/cpanplus-reports.patch">Download cpanplus-reports.patch</a><br />
<span class="downloadcontenttype">text/x-diff 11k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- C:\wip\diffs\CPANPLUS\CPANPLUS-0.053/lib/CPANPLUS/Dist/Build.pm	Fri Feb 11 08:52:32 2005
+++ C:\wip\diffs\CPANPLUS\CPANPLUS-0.053-barbie/lib/CPANPLUS/Dist/Build.pm	Fri Apr 15 14:18:28 2005
@@ -305,7 +305,19 @@
         
         $self-&gt;status-&gt;prereqs&#40; $mangled_prereqs &#41;;
     }
-    
+ 
+	### send out test report? ###
+	if&#40;$fail&#41; {
+           $cb-&gt;_send_report&#40; 
+            module  =&gt; $self,
+            failed  =&gt; $fail,
+            buffer  =&gt; CPANPLUS::Error-&gt;stack_as_string,
+            verbose =&gt; $verbose,
+            force   =&gt; $force,
+        &#41; or error&#40;loc&#40;&#34;Failed to send test report for &#39;%1&#39;&#34;,
+                    $self-&gt;module &#41; &#41;;
+	}
+
     unless&#40; $cb-&gt;_chdir&#40; dir =&gt; $orig &#41; &#41; {
         error&#40; loc&#40; &#34;Could not chdir back to start dir &#39;%1&#39;&#34;, $orig &#41; &#41;;
     }

--- C:\wip\diffs\CPANPLUS\CPANPLUS-0.053/lib/CPANPLUS/Dist/MM.pm	Fri Feb 11 08:52:32 2005
+++ C:\wip\diffs\CPANPLUS\CPANPLUS-0.053-barbie/lib/CPANPLUS/Dist/MM.pm	Fri Apr 15 11:18:53 2005
@@ -309,7 +309,19 @@
             $fail++; last RUN;
         }
     }
-   
+
+    ### send out test report? ###
+	if&#40;$fail&#41; {
+           $cb-&gt;_send_report&#40; 
+            module  =&gt; $self,
+            failed  =&gt; $fail,
+            buffer  =&gt; CPANPLUS::Error-&gt;stack_as_string,
+            verbose =&gt; $verbose,
+            force   =&gt; $force,
+        &#41; or error&#40;loc&#40;&#34;Failed to send test report for &#39;%1&#39;&#34;,
+                    $self-&gt;module &#41; &#41;;
+	}
+
     unless&#40; $cb-&gt;_chdir&#40; dir =&gt; $orig &#41; &#41; {
         error&#40; loc&#40; &#34;Could not chdir back to start dir &#39;%1&#39;&#34;, $orig &#41; &#41;;
     }   
@@ -542,10 +554,21 @@
 
             ### XXX need to add makeflags here too? 
             ### yes, but they should really be split out -- see bug #4143
-            unless&#40;run&#40; command =&gt; [$make, &#39;test&#39;, $makeflags],
+            if&#40;run&#40; command =&gt; [$make, &#39;test&#39;, $makeflags],
                         buffer  =&gt; \$captured,
                         verbose =&gt; $run_verbose,
             &#41; &#41; {
+                ### tests might pass because it doesn&#39;t have any tests defined
+                ### log this occasion non-verbosely, so our test reporter can
+                ### pick up on this
+                if &#40; NO_TESTS_DEFINED-&gt;&#40; $captured &#41; &#41; {
+	                msg&#40; NO_TESTS_DEFINED-&gt;&#40; $captured &#41;, 0 &#41;
+				} else {
+	                msg&#40; loc&#40; &#34;MAKE TEST passed: %2&#34;, $captured &#41; &#41;;
+				}
+            
+                $dist-&gt;status-&gt;test&#40;1&#41;;
+			} else {
                 error&#40; loc&#40; &#34;MAKE TEST failed: %1 %2&#34;, $!, $captured &#41; &#41;;
             
                 ### send out error report here? or do so at a higher level?
@@ -555,15 +578,6 @@
                 unless&#40; $force &#41; {
                     $fail++; last RUN;     
                 }
-            
-            } else {
-                ### tests might pass because it doesn&#39;t have any tests defined
-                ### log this occasion non-verbosely, so our test reporter can
-                ### pick up on this
-                msg&#40; NO_TESTS_DEFINED-&gt;&#40; $captured &#41;, 0 &#41;
-                    if NO_TESTS_DEFINED-&gt;&#40; $captured &#41;;
-            
-                $dist-&gt;status-&gt;test&#40;1&#41;;
             }
         }
     } #&lt;/RUN&gt;

--- C:\wip\diffs\CPANPLUS\CPANPLUS-0.053/lib/CPANPLUS/Internals/Constants/Report.pm	Fri Feb 11 08:52:32 2005
+++ C:\wip\diffs\CPANPLUS\CPANPLUS-0.053-barbie/lib/CPANPLUS/Internals/Constants/Report.pm	Fri Apr 15 11:54:59 2005
@@ -20,7 +20,7 @@
                     TEST_FAIL_STAGE REPORT_MISSING_TESTS CPAN_TESTERS_EMAIL
                     REPORT_MISSING_PREREQS MISSING_PREREQS_LIST 
                     REPORT_MESSAGE_FOOTER MISSING_EXTLIBS_LIST
-                    PERL_VERSION_TOO_LOW REPORT_LOADED_PREREQS
+                    PERL_VERSION_TOO_LOW REPORT_LOADED_PREREQS UNSUPPORTED_OS
                 ];
 }
 
@@ -100,20 +100,39 @@
                                 return $specific ? 0 : 1;
                             };
 
+use constant UNSUPPORTED_OS
+                            =&gt; sub {
+                                my $buffer = shift or return;
+                                if&#40; $buffer =~
+                                        /No support for OS|OS unsupported/im &#41; {
+									return 1;
+								}
+								return 0;
+                          };                                            
+
 use constant PERL_VERSION_TOO_LOW
                             =&gt; sub {
                                 my $buffer = shift or return;
-                                    return $buffer =~
-                                        /Perl .*? required--this is only .*?/m
-                            };                                            
+								# ExtUtils::MakeMaker format
+                                if&#40; $buffer =~
+                                        /Perl .*? required--this is only .*?/m &#41; {
+									return 1;
+								}
+								# Module::Build format
+                                if&#40; $buffer =~
+                                        /ERROR: perl: Version .*? is installed, but we need version &gt;= .*?/m &#41; {
+  									return 1;
+								}
+								return 0;
+                          };                                            
 
 use constant NO_TESTS_DEFINED
                             =&gt; sub {
                                 my $buffer = shift or return;
                                 if&#40; $buffer =~
-                                  /&#40;&#39;?No tests defined&#40;?: for .* extension&#41;?.\s*$&#41;/m
-                                  and &#40; $buffer !~ /\*\.t/m and
-                                        $buffer !~ /test\.pl/m&#41;
+                                  /&#40;No tests defined&#40; for [\w:]+ extension&#41;?\.&#41;/
+                                  and $buffer !~ /\*\.t/m and
+                                      $buffer !~ /test\.pl/m
                                 &#41; { 
                                     return $1 
                                 }

--- C:\wip\diffs\CPANPLUS\CPANPLUS-0.053/lib/CPANPLUS/Internals/Report.pm	Fri Feb 11 08:52:32 2005
+++ C:\wip\diffs\CPANPLUS\CPANPLUS-0.053-barbie/lib/CPANPLUS/Internals/Report.pm	Fri Apr 15 14:16:03 2005
@@ -283,7 +283,6 @@
     my $cp_conf = $conf-&gt;get_conf&#40;&#39;cpantest&#39;&#41; || &#39;&#39;;
     my $int_ver = $CPANPLUS::Internals::VERSION;
 
-
     ### determine the grade now ###
 
     my $grade;
@@ -295,6 +294,13 @@
 
         $grade = GRADE_NA;
 
+    } elsif &#40; UNSUPPORTED_OS-&gt;&#40; $buffer &#41; &#41; {
+        msg&#40;loc&#40;&#34;&#39;%1&#39; is a platform specific module, and the test results on&#34;.
+                &#34; your platform are not relevant --sending N/A grade.&#34;,
+                $name&#41;, $verbose&#41;;
+
+        $grade = GRADE_NA;
+
     ### you dont have a high enough perl version?    
     } elsif &#40; PERL_VERSION_TOO_LOW-&gt;&#40; $buffer &#41; &#41; {
         msg&#40;loc&#40;&#34;&#39;%1&#39; requires a higher version of perl than your current &#34;.
@@ -475,6 +481,7 @@
 	
     my %missing = map {$_ =&gt; 1} @$missing;
     my $conf = $self-&gt;configure_object;
+	my $extract = $mod-&gt;status-&gt;extract;
 
     ### Read pre-requisites from Makefile.PL or Build.PL &#40;if there is one&#41;,
     ### of the form:
@@ -484,10 +491,11 @@
     ###                    },
     ###  Build.PL uses &#39;requires&#39; instead of &#39;PREREQ_PM&#39;.
 
+	my @search;
+	push @search, &#40;$extract ? MAKEFILE_PL-&gt;&#40; $extract &#41; : MAKEFILE_PL-&gt;&#40;&#41;&#41;;
+	push @search, &#40;$extract ? BUILD_PL-&gt;&#40; $extract &#41; : BUILD_PL-&gt;&#40;&#41;&#41;;
 
-    for my $file &#40;  MAKEFILE_PL-&gt;&#40; $mod-&gt;status-&gt;extract &#41;,
-                    BUILD_PL-&gt;&#40; $mod-&gt;status-&gt;extract &#41;,
-    &#41; {
+    for my $file &#40; @search &#41; {
         if&#40;-e $file and -r $file&#41; {
             my $slurp = $self-&gt;_get_file_contents&#40;file =&gt; $file&#41;;
             my &#40;$prereq&#41; = 

--- C:\wip\diffs\CPANPLUS\CPANPLUS-0.053/t/40_CPANPLUS-Internals-Report.t	Fri Feb 11 08:52:36 2005
+++ C:\wip\diffs\CPANPLUS\CPANPLUS-0.053-barbie/t/40_CPANPLUS-Internals-Report.t	Fri Apr 15 14:21:38 2005
@@ -27,7 +27,7 @@
 my $query_tests = 7;
 my $total_tests = $send_tests + $query_tests;
 
-use Test::More                  tests =&gt; 86;
+use Test::More                  tests =&gt; 100;
 use Module::Load::Conditional   qw[can_load];
 
 use FileHandle;
@@ -77,8 +77,8 @@
                 ],
         check   =&gt; 0,
     },
-    perl_version_too_low =&gt; {
-        buffer  =&gt; perl_version_too_low_buffer&#40;&#41;,
+    perl_version_too_low_mm =&gt; {
+        buffer  =&gt; perl_version_too_low_buffer_mm&#40;&#41;,
         failed  =&gt; 1,
         match   =&gt; [&#39;/This distribution has been tested/&#39;,
                     &#39;/<span class="clickylink"><a target="new" rel="nofollow" href="http://testers.cpan.org//&#39;">http://testers.cpan.org//&#39;</a></span>,
@@ -86,6 +86,15 @@
                 ],
         check   =&gt; 0,
     },    
+    perl_version_too_low_build =&gt; {
+        buffer  =&gt; perl_version_too_low_buffer_build&#40;&#41;,
+        failed  =&gt; 1,
+        match   =&gt; [&#39;/This distribution has been tested/&#39;,
+                    &#39;/<span class="clickylink"><a target="new" rel="nofollow" href="http://testers.cpan.org//&#39;">http://testers.cpan.org//&#39;</a></span>,
+                    &#39;/NA/&#39;,
+                ],
+        check   =&gt; 0,
+    },    
 };
 
 
@@ -102,16 +111,30 @@
         ok&#40;!RELEVANT_TEST_RESULT-&gt;&#40;$cp&#41;,&#34;Test is irrelevant&#34;&#41;;
     }
 
-    {   ok&#40;PERL_VERSION_TOO_LOW-&gt;&#40; perl_version_too_low_buffer&#40;&#41; &#41;,
+    {   my $support = &#34;it works!&#34;;
+        my @support = &#40;	&#34;No support for OS&#34;,
+						&#34;OS unsupported&#34;,
+						&#34;os unsupported&#34;,
+		&#41;;
+        ok&#40;!UNSUPPORTED_OS-&gt;&#40;$support&#41;, &#34;OS supported&#34;&#41;;
+        ok&#40; UNSUPPORTED_OS-&gt;&#40;$_&#41;,   &#34;OS not supported&#34;&#41;	for&#40;@support&#41;;
+    }
+
+    {   ok&#40;PERL_VERSION_TOO_LOW-&gt;&#40; perl_version_too_low_buffer_mm&#40;&#41; &#41;,
                                         &#34;Perl version too low&#34; &#41;;
+        ok&#40;PERL_VERSION_TOO_LOW-&gt;&#40; perl_version_too_low_buffer_build&#40;&#41; &#41;,
+                                        &#34;Perl version too low&#34; &#41;;
         ok&#40;!PERL_VERSION_TOO_LOW-&gt;&#40;&#39;foo&#39;&#41;,
                                         &#34;   Perl version adequate&#34; &#41;;
     }
 
     {   my $tests = &#34;test.pl&#34;;
-        my $none  = &#34;No tests defined for Foo extension.&#34;;
+        my @none  = &#40;	&#34;No tests defined for Foo extension.&#34;,
+						&#34;&#39;No tests defined for Foo::Bar extension.&#39;&#34;,
+						&#34;&#39;No tests defined.&#39;&#34;,
+		&#41;;
         ok&#40;!NO_TESTS_DEFINED-&gt;&#40;$tests&#41;, &#34;Tests defined&#34;&#41;;
-        ok&#40; NO_TESTS_DEFINED-&gt;&#40;$none&#41;,  &#34;No tests defined&#34;&#41;;
+        ok&#40; NO_TESTS_DEFINED-&gt;&#40;$_&#41;,  &#34;No tests defined&#34;&#41;	for&#40;@none&#41;;
     }
 
     {   my $fail = &#39;MAKE TEST&#39;; my $unknown = &#39;foo&#39;;
@@ -316,7 +339,7 @@
     ];
 }
 
-sub perl_version_too_low_buffer {
+sub perl_version_too_low_buffer_mm {
     return q[
 Running [/usr/bin/perl5.8.1 Makefile.PL ]...
 Perl v5.8.3 required--this is only v5.8.1, stopped at Makefile.PL line 1.
@@ -324,6 +347,15 @@
 [ERROR] Could not run &#39;/usr/bin/perl5.8.1 Makefile.PL&#39;: Perl v5.8.3 required--this is only v5.8.1, stopped at Makefile.PL line 1.
 BEGIN failed--compilation aborted at Makefile.PL line 1.
  -- cannot continue
+    ];
+}    
+
+sub perl_version_too_low_buffer_build {
+    return q[
+ERROR: perl: Version 5.006001 is installed, but we need version &gt;= 5.008001
+ERROR: version: Prerequisite version isn&#39;t installed
+ERRORS/WARNINGS FOUND IN PREREQUISITES.  You may wish to install the versions
+ of the modules indicated above before proceeding with this installation.
     ];
 }    
 

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-129410" href="/Public/Bug/Display.html?id=12302#txn-129410">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;04&nbsp;09:43:56&nbsp;2005</span>
    <span class="description">kane [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/129410/34502/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/34502">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 828b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">[BARBIE - Fri Apr 15 09:34:09 2005]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; A bunch of report fixes:
</div>All your improvments look quite worth while, so I&#39;ve tried to apply this patch, and although it 
applied mostly cleanly, i ran into 2 issues:
* would you mind providing a patch with no tabs, but instead 4 spaces?
* would you mind doing the diff for the patch from the repository root, rather than the 
filesystem root? make it easier to apply the patch.

The bad news is that after the patch was applied, 2 test files failed &#40;the error log is attached&#41;.

Maybe it&#39;s because you patched against a slightly older version, or may it&#39;s the portabillity 
monster biting you, i&#39;ve not quite researched.

Perhaps you can try to repatch, ideally against our snapshots, which you can get from:

    <span class="clickylink"><a target="new" rel="nofollow" href="http://p4.elixus.org/snap/cpanplus-devel.tar.gz">http://p4.elixus.org/snap/cpanplus-devel.tar.gz</a></span>

Thanks for the effort!
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/129410/34503/patch.error">Download patch.error</a><br />
<span class="downloadcontenttype">application/octet-stream 16.4k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-129411" href="/Public/Bug/Display.html?id=12302#txn-129411">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;04&nbsp;09:43:57&nbsp;2005</span>
    <span class="description">kane [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-129412" href="/Public/Bug/Display.html?id=12302#txn-129412">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;04&nbsp;14:06:26&nbsp;2005</span>
    <span class="description">BARBIE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> barbie [...] missbarbell.co.uk</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/129412/34522/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/34522">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 868b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; * would you mind providing a patch with no tabs, but instead 4 spaces?
&gt; * would you mind doing the diff for the patch from the repository
&gt; root, rather than the
&gt; filesystem root? make it easier to apply the patch.
</div>
Will do.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The bad news is that after the patch was applied, 2 test files failed
&gt; &#40;the error log is attached&#41;.
</div>
With some testing on my end &#40;Win32&#41; it appears that a bogus callback for
&#39;munge_test_report&#39; was simply writing the grade and removing the real
text within 40.t. The tests were failing in the vanilla devel download too. 

20.t appears to be a problem with the introduction of reporting failures
into the MM.pm, as a result of conflicts with more recent changes. I&#39;ve
taken out the MM.pm prepare&#40;&#41; fail catch &#40;first item in list above&#41;, and
will submit that as a separate patch, once I&#39;ve figured out why it fails.

New patch attached.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/129412/34523/devel-reports.patch">Download devel-reports.patch</a><br />
<span class="downloadcontenttype">text/x-diff 12.9k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-129413" href="/Public/Bug/Display.html?id=12302#txn-129413">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;11&nbsp;10:28:38&nbsp;2005</span>
    <span class="description">kane [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-129414" href="/Public/Bug/Display.html?id=12302#txn-129414">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;11&nbsp;10:28:38&nbsp;2005</span>
    <span class="description">kane [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/129414/34773/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/34773">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">[BARBIE - Wed May  4 14:06:26 2005]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; * would you mind providing a patch with no tabs, but instead 4 spaces?
&gt; &gt; * would you mind doing the diff for the patch from the repository
&gt; &gt; root, rather than the
&gt; &gt; filesystem root? make it easier to apply the patch.
</div>&gt; 
&gt; Will do.
</div>Excellent, this patch applied easily :&#41;


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; The bad news is that after the patch was applied, 2 test files failed
&gt; &gt; &#40;the error log is attached&#41;.
</div>&gt; 
&gt; With some testing on my end &#40;Win32&#41; it appears that a bogus callback for
&gt; &#39;munge_test_report&#39; was simply writing the grade and removing the real
&gt; text within 40.t. The tests were failing in the vanilla devel download too. 
</div>hmm, i&#39;m not sure i know what this means... and my win32 test box has died a spectacular 
death a while ago, and i&#39;m lacking the tuits and motivation to revive it -- is this something 
we have to seriously worry about?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 20.t appears to be a problem with the introduction of reporting failures
&gt; into the MM.pm, as a result of conflicts with more recent changes. I&#39;ve
&gt; taken out the MM.pm prepare&#40;&#41; fail catch &#40;first item in list above&#41;, and
&gt; will submit that as a separate patch, once I&#39;ve figured out why it fails.
</div>That&#39;d be lovely :&#41;


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; New patch attached.
</div>Thanks, applied as 12045
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-129415" href="/Public/Bug/Display.html?id=12302#txn-129415">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;18&nbsp;13:11:22&nbsp;2005</span>
    <span class="description">BARBIE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> barbie [...] missbarbell.co.uk</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/129415/39078/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/39078">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 500b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">After sometime trying to figure out what causing the failures, I gave up
and have now downloaded the latest development build
&#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://egb.elixus.org/snap/cpanplus-devel.tar.gz&#41;">http://egb.elixus.org/snap/cpanplus-devel.tar.gz&#41;</a></span> and tested against
that. Interestingly it worked first time!

Patched attached with change. There are no additional tests, as i don&#39;t
have the time right now, and the basic functionality is being tested
elsewhere. If you want tests that will specifically fire this set of
conditions, then I will try and do them when I can.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/129415/39079/dist-mm.patch">Download dist-mm.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- devel/lib/CPANPLUS/Dist/MM.pm	Wed Jul 27 21:02:12 2005
+++ devel-barbie/lib/CPANPLUS/Dist/MM.pm	Thu Aug 18 13:11:05 2005
@@ -318,6 +318,18 @@
         }
     }
    
+    ### send out test report? ###
+    if&#40;$fail&#41; {
+           $cb-&gt;_send_report&#40; 
+            module  =&gt; $self,
+            failed  =&gt; $fail,
+            buffer  =&gt; CPANPLUS::Error-&gt;stack_as_string,
+            verbose =&gt; $verbose,
+            force   =&gt; $force,
+        &#41; or error&#40;loc&#40;&#34;Failed to send test report for &#39;%1&#39;&#34;,
+                    $self-&gt;module &#41; &#41;;
+    }
+
 	unless&#40; $cb-&gt;_chdir&#40; dir =&gt; $orig &#41; &#41; {
         error&#40; loc&#40; &#34;Could not chdir back to start dir &#39;%1&#39;&#34;, $orig &#41; &#41;;
     }   

--- devel/Makefile.PL	Mon Jul 18 09:51:58 2005
+++ devel-barbie/Makefile.PL	Thu Aug 18 13:45:54 2005
@@ -357,7 +357,7 @@
             print loc&#40;&#34;
 ### PLEASE NOTE ###################################################
 
-You have chosen to use &#39;%1&#39; where possible. Therefor we 
+You have chosen to use &#39;%1&#39; where possible. Therefore we 
 will have to add a dependency on &#39;%2&#39;. 
 Please ensure it is installed.
 

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-129416" href="/Public/Bug/Display.html?id=12302#txn-129416">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;18&nbsp;13:11:23&nbsp;2005</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-162757" href="/Public/Bug/Display.html?id=12302#txn-162757">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;06&nbsp;08:52:57&nbsp;2006</span>
    <span class="description">kane [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-378911" href="/Public/Bug/Display.html?id=12302#txn-378911">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;04&nbsp;11:05:29&nbsp;2007</span>
    <span class="description">kane [...] cpan.org -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.337748</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
