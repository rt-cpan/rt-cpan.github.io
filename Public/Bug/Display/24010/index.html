<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #24010 for XML-RSS: XML::RSS  Wrong encoding for utf-8 text with accents</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #24010 for XML-RSS: XML::RSS  Wrong encoding for utf-8 text with accents</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=XML-RSS">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=XML-RSS">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=XML-RSS">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=XML-RSS">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/XML-RSS">XML-RSS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">24010</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=XML-RSS">XML-RSS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
franck.perrot [...] epfl.ch

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-37498-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-37499-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




rss.xml.RSS_XML.version1.10<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/277459/124117/rss.xml.RSS_XML.version1.10">
Wed Dec 20 08:32:26 2006 (219b) by franck.perrot [...] epfl.ch
</a>
</font></li>
</ul>


rss.xml.RSS_XML.version1.22<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/277459/124118/rss.xml.RSS_XML.version1.22">
Wed Dec 20 08:32:26 2006 (251b) by franck.perrot [...] epfl.ch
</a>
</font></li>
</ul>


test_XML_RSS.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/277459/124116/test_XML_RSS.pl">
Wed Dec 20 08:32:26 2006 (547b) by franck.perrot [...] epfl.ch
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=24010">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-277381" href="/Public/Bug/Display.html?id=24010#txn-277381">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;20&nbsp;05:40:05&nbsp;2006</span>
    <span class="description">franck.perrot [...] epfl.ch -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> XML::RSS  Wrong encoding for utf-8 text with accents</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 20 Dec 2006 11:39:25 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-RSS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> franck perrot &lt;franck.perrot [...] epfl.ch&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/277381/124082/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/124082">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

I use:
- Linux Red hat AS 4 2.6.9-42.0.3.ELsmp #1 SMP Mon Sep 25 17:28:02 EDT 
2006 i686 i686 i386 GNU/Linux
- XML::RSS 1.22
- Perl v5.8.5 built for i386-linux-thread-multi

Problem: if I use XML::RSS with utf-8 text &#40;with accents&#41;, then the 
resulting RSS file is not encoded correctly.

&#40;The same program work perfectly with XML::RSS 1.10.&#41;

For example:
...
$rss = new XML::RSS::Podcast &#40;
        version =&gt; &#39;2.0&#39;,
        encoding =&gt; &#39;UTF-8&#39;,
     &#41;;
$rss-&gt;channel&#40;
description =&gt; &#34;dernières entrées de la videothéque&#34;,   &lt;-- UTF-8
...
&#41;;

give a RSS file with: &#34;derni&#38;#xC3;&#38;#xA8;res entr&#38;#xC3;&#38;#xA9;es de la 
videoth&#38;#xC3;&#38;#xA9;que&#34;

Displayed by a web browser and by itunes:
derniÃ¨res entrÃ©es de la videothÃ©que


I tried the &#34;workaround&#34; &#40;??&#41;: 
<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Public/Bug/Display.html?id=12376">http://rt.cpan.org/Public/Bug/Display.html?id=12376</a></span>

$description = &#34;dernières entrées de la videothéque&#34;;   &lt;-- UTF-8
$description =~ s/\&#38;/\&#38;\#038\;/g;

$rss-&gt;channel&#40;
description =&gt; $description,
...
&#41;;

but this did&#39;nt work at all :&#40;


So, I think that since you use HTML::Entities the result for utf-8 with 
accent is wrong.

Thanks for any help about this problem. I use XML:RSS since a while but 
when I did an upgrade I got this wrong behavior.

Kind regards,

franck Perrot
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-277446" href="/Public/Bug/Display.html?id=24010#txn-277446">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;20&nbsp;07:27:10&nbsp;2006</span>
    <span class="description">ask [...] perl.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #24010] XML::RSS Wrong encoding for utf-8 text with accents </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 20 Dec 2006 13:26:36 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-RSS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ask Bjørn Hansen &lt;ask [...] perl.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/277446/124106/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/124106">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 138b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Thanks for the bug report.

Can you make a .t file that demonstrates the problem?  That&#39;ll make  
it easier to track down.


  - ask
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-277447" href="/Public/Bug/Display.html?id=24010#txn-277447">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;20&nbsp;07:27:11&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-277459" href="/Public/Bug/Display.html?id=24010#txn-277459">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;20&nbsp;08:32:24&nbsp;2006</span>
    <span class="description">franck.perrot [...] epfl.ch -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #24010] XML::RSS Wrong encoding for utf-8 text with accents</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 20 Dec 2006 14:31:49 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-RSS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> franck perrot &lt;franck.perrot [...] epfl.ch&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/277459/124115/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/124115">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 406b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">ask@perl.org via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=24010">http://rt.cpan.org/Ticket/Display.html?id=24010</a></span> &gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Can you make a .t file that demonstrates the problem?  That&#39;ll make  
&gt; it easier to track down.
</div>
Hi,

ok, see joined files.
- Run test_XML_RSS.pl
- Try with XML::RSS version 1.22 then with version 1.10
- Look at a file called  /tmp/rss.xml

I join the 2 resulting files for both versions.

Thx,

Kind regards,
franck
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/277459/124116/test_XML_RSS.pl">Download test_XML_RSS.pl</a><br />
<span class="downloadcontenttype">text/x-perl 547b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl
# Author: franck Perrot - franck.perrot@epfl.ch - EPFL
# Date: 20/04/2005 - 23/06/2006
# EPFLTV version 2 

$|++;   # disables buffering on STDOUT which is a good thing for CGI scripts
use strict;     # restrict unsafe constructs
use warnings;		# must be commented for production!
#use diagnostics;	# Rend les messages de -w plus explicites

push &#40;@INC, &#39;pwd&#39;&#41;;

use XML::RSS;

my &#40;$rss&#41;;

$rss = new XML::RSS &#40;
  	version =&gt; &#39;2.0&#39;,
	encoding =&gt; &#39;UTF-8&#39;,
    &#41;;

$rss-&gt;channel&#40;
   	title =&gt; &#34;Ã©Ã Ã¨&#34;
&#41;;
$rss-&gt;save&#40;&#34;/tmp/rss.xml&#34;&#41;;
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/277459/124117/rss.xml.RSS_XML.version1.10">Download rss.xml.RSS_XML.version1.10</a><br />
<span class="downloadcontenttype">text/xml 219b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;

&lt;rss version=&#34;2.0&#34; xmlns:blogChannel=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule">http://backend.userland.com/blogChannelModule</a></span>&#34;&gt;

&lt;channel&gt;
&lt;title&gt;Ã©Ã Ã¨&lt;/title&gt;
&lt;link&gt;&lt;/link&gt;
&lt;description&gt;&lt;/description&gt;

&lt;/channel&gt;
&lt;/rss&gt;</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/277459/124118/rss.xml.RSS_XML.version1.22">Download rss.xml.RSS_XML.version1.22</a><br />
<span class="downloadcontenttype">text/xml 251b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;

&lt;rss version=&#34;2.0&#34;
 xmlns:blogChannel=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule">http://backend.userland.com/blogChannelModule</a></span>&#34;
&gt;

&lt;channel&gt;
&lt;title&gt;&#38;#xC3;&#38;#xA9;&#38;#xC3;&#38;#xA0;&#38;#xC3;&#38;#xA8;&lt;/title&gt;
&lt;link&gt;&lt;/link&gt;
&lt;description&gt;&lt;/description&gt;

&lt;/channel&gt;
&lt;/rss&gt;</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-280935" href="/Public/Bug/Display.html?id=24010#txn-280935">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;04&nbsp;03:33:17&nbsp;2007</span>
    <span class="description">franck.perrot [...] epfl.ch -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #24010] XML::RSS Wrong encoding for utf-8 text with accents</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 04 Jan 2007 09:32:50 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-RSS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> franck perrot &lt;franck.perrot [...] epfl.ch&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/280935/125876/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/125876">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi and happy new year!

any news about this bug?

Thx,
Kind regards,
franck P.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ask@perl.org via RT wrote:
<div class="message-stanza open">&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=24010">http://rt.cpan.org/Ticket/Display.html?id=24010</a></span> &gt;
</div>&gt; 
<div class="message-stanza open">&gt;&gt; Can you make a .t file that demonstrates the problem?  That&#39;ll make  
&gt;&gt; it easier to track down.
</div>&gt; 
&gt; Hi,
&gt; 
&gt; ok, see joined files.
&gt; - Run test_XML_RSS.pl
&gt; - Try with XML::RSS version 1.22 then with version 1.10
&gt; - Look at a file called  /tmp/rss.xml
&gt; 
&gt; I join the 2 resulting files for both versions.
&gt; 
&gt; Thx,
&gt; 
&gt; Kind regards,
&gt; franck
&gt; 
&gt; 
&gt; ------------------------------------------------------------------------
&gt; 
&gt; &lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&gt; 
&gt; &lt;rss version=&#34;2.0&#34; xmlns:blogChannel=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule">http://backend.userland.com/blogChannelModule</a></span>&#34;&gt;
&gt; 
&gt; &lt;channel&gt;
&gt; &lt;title&gt;éàè&lt;/title&gt;
&gt; &lt;link&gt;&lt;/link&gt;
&gt; &lt;description&gt;&lt;/description&gt;
&gt; 
&gt; &lt;/channel&gt;
&gt; &lt;/rss&gt;
&gt; 
&gt; 
&gt; ------------------------------------------------------------------------
&gt; 
&gt; &lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&gt; 
&gt; &lt;rss version=&#34;2.0&#34;
&gt;  xmlns:blogChannel=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule">http://backend.userland.com/blogChannelModule</a></span>&#34;
&gt; 
&gt; &lt;channel&gt;
&gt; &lt;title&gt;&#38;#xC3;&#38;#xA9;&#38;#xC3;&#38;#xA0;&#38;#xC3;&#38;#xA8;&lt;/title&gt;
&gt; &lt;link&gt;&lt;/link&gt;
&gt; &lt;description&gt;&lt;/description&gt;
&gt; 
&gt; &lt;/channel&gt;
&gt; &lt;/rss&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-292306" href="/Public/Bug/Display.html?id=24010#txn-292306">#</a>      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;20&nbsp;16:04:04&nbsp;2007</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/292306/131892/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/131892">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Jan 04 03:33:17 2007, franck.perrot@epfl.ch wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi and happy new year!
&gt; 
</div>
Hi!

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; any news about this bug?
&gt; 
</div>
Well, I looked into it. After adding &#34;use utf8;&#34; to your code to make 
the string be in UTF-8 encoding, I saved the RSS and viewed it in 
Firefox 2.0.0.1. Despite the fact the accented characters were encoded 
the RSS was displayed fine with accents and everything. So they are 
implicitly decoded.

Isn&#39;t that good enough for you?

Regards,

      Shlomi Fish

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thx,
&gt; Kind regards,
&gt; franck P.
&gt; 
<div class="message-stanza open">&gt; &gt; ask@perl.org via RT wrote:
<div class="message-stanza open">&gt; &gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=24010">http://rt.cpan.org/Ticket/Display.html?id=24010</a></span> &gt;
</div>&gt; &gt;
<div class="message-stanza open">&gt; &gt;&gt; Can you make a .t file that demonstrates the problem?  That&#39;ll 
</div></div></div>make
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; it easier to track down.
</div>&gt; &gt;
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; ok, see joined files.
&gt; &gt; - Run test_XML_RSS.pl
&gt; &gt; - Try with XML::RSS version 1.22 then with version 1.10
&gt; &gt; - Look at a file called  /tmp/rss.xml
&gt; &gt;
&gt; &gt; I join the 2 resulting files for both versions.
&gt; &gt;
&gt; &gt; Thx,
&gt; &gt;
&gt; &gt; Kind regards,
&gt; &gt; franck
&gt; &gt;
&gt; &gt;
&gt; &gt;
</div>&gt; ------------------------------------------------------------------------
<div class="message-stanza open">&gt; &gt;
&gt; &gt; &lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&gt; &gt;
&gt; &gt; &lt;rss version=&#34;2.0&#34;
</div>&gt; xmlns:blogChannel=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule">http://backend.userland.com/blogChannelModule</a></span>&#34;&gt;
<div class="message-stanza open">&gt; &gt;
&gt; &gt; &lt;channel&gt;
&gt; &gt; &lt;title&gt;éàè&lt;/title&gt;
&gt; &gt; &lt;link&gt;&lt;/link&gt;
&gt; &gt; &lt;description&gt;&lt;/description&gt;
&gt; &gt;
&gt; &gt; &lt;/channel&gt;
&gt; &gt; &lt;/rss&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
</div>&gt; ------------------------------------------------------------------------
<div class="message-stanza open">&gt; &gt;
&gt; &gt; &lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&gt; &gt;
&gt; &gt; &lt;rss version=&#34;2.0&#34;
&gt; &gt;  xmlns:blogChannel=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://backend.userland.com/blogChannelModule">http://backend.userland.com/blogChannelModule</a></span>&#34;
&gt; &gt;
&gt; &gt; &lt;channel&gt;
&gt; &gt; &lt;title&gt;&#38;#xC3;&#38;#xA9;&#38;#xC3;&#38;#xA0;&#38;#xC3;&#38;#xA8;&lt;/title&gt;
&gt; &gt; &lt;link&gt;&lt;/link&gt;
&gt; &gt; &lt;description&gt;&lt;/description&gt;
&gt; &gt;
&gt; &gt; &lt;/channel&gt;
&gt; &gt; &lt;/rss&gt;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-293033" href="/Public/Bug/Display.html?id=24010#txn-293033">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;23&nbsp;04:20:25&nbsp;2007</span>
    <span class="description">franck.perrot [...] epfl.ch -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #24010] XML::RSS  Wrong encoding for utf-8 text with accents</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 23 Feb 2007 10:19:56 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-RSS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> franck perrot &lt;franck.perrot [...] epfl.ch&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/293033/132337/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/132337">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Well, I looked into it. After adding &#34;use utf8;&#34; to your code to make 
&gt; the string be in UTF-8 encoding, I saved the RSS and viewed it in 
&gt; Firefox 2.0.0.1. Despite the fact the accented characters were encoded 
&gt; the RSS was displayed fine with accents and everything. So they are 
&gt; implicitly decoded.
&gt; 
&gt; Isn&#39;t that good enough for you?
</div>
Hi,
you where right by adding &#34;use utf8&#34; but the result is still NOT correct 
if you can NOT use it. Look at this example:

-----------------------------------------------------------------
#!/usr/bin/perl
use strict;     # restrict unsafe constructs
use Encode;             # to UTF-8 encode an ISO 8859-1 string
use XML::RSS;

my &#40;$rss, $description, $str&#41;;

$str = &#34;éàè&#34;;      # &lt;- ISO-8859-1 string &#40;in fact from my MYSQL DB&#41;
$description = encode_utf8&#40;$str&#41;;   # real UTF-8 string, I have checked

$rss = new XML::RSS &#40;
        version =&gt; &#39;2.0&#39;,
     &#41;;

$rss-&gt;channel&#40;
        title =&gt; $description
&#41;;
$rss-&gt;save&#40;&#34;/tmp/rss.xml&#34;&#41;;
------------------------------------------------------------------

With this example, you dont use an UTF-8 string inside the source code, 
so I think &#34;use utf8&#34; is not helpfull. Then the resulting rss.xml file 
is not displayed with Firefox correctly.

Best regards and thanks for your help,

franck Perrot
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-293035" href="/Public/Bug/Display.html?id=24010#txn-293035">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;23&nbsp;05:22:09&nbsp;2007</span>
    <span class="description">franck.perrot [...] epfl.ch -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #24010] XML::RSS  Wrong encoding for utf-8 text with accents</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 23 Feb 2007 11:21:39 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-RSS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> franck perrot &lt;franck.perrot [...] epfl.ch&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/293035/132339/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/132339">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 304b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I found the problem! In fact, it seem that your module ALREADY encode to 
utf-8. So, my program encoded 2 times in utf-8...

I think, you shoul add a note to the module telling that we dont need to 
encode string in utf-8 because the module already do it.

Sorry for this confusion.

Thx!,
franck Perrot
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-293480" href="/Public/Bug/Display.html?id=24010#txn-293480">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;24&nbsp;18:10:48&nbsp;2007</span>
    <span class="description">ABH [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-922207" href="/Public/Bug/Display.html?id=24010#txn-922207">#</a>      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;13&nbsp;12:01:26&nbsp;2011</span>
    <span class="description">franck.perrot [...] epfl.ch -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #24010] XML::RSS  Wrong encoding for utf-8 text with accents</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 13 Apr 2011 18:01:07 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-RSS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> franck perrot &lt;franck.perrot [...] epfl.ch&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/922207/478500/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/478500">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

Do you remember me ?
Sorry to come again to you but I still have the same problem with UTF8 
encoding.

I thing XML::RSS encode twice my UTF8 string and so the RSS file is 
wrong. Then ç is displayed Ã§
Maybe because &#40;your doc&#41; : XML::RSS will make sure to encode any 
entities in generated RSS. This is now on by default.
And before, old version, it was not.

So, could it be possible to NOT encode by default ? Or to avoid that ?

You can test with the code below.

Thanks for any help,
Kind regards,
Franck


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
<div class="message-stanza open">&gt;&gt; Well, I looked into it. After adding &#34;use utf8;&#34; to your code to make
&gt;&gt; the string be in UTF-8 encoding, I saved the RSS and viewed it in
&gt;&gt; Firefox 2.0.0.1. Despite the fact the accented characters were encoded
&gt;&gt; the RSS was displayed fine with accents and everything. So they are
&gt;&gt; implicitly decoded.
&gt;&gt;
&gt;&gt; Isn&#39;t that good enough for you?
</div>&gt;
&gt; Hi,
&gt; you where right by adding &#34;use utf8&#34; but the result is still NOT correct
&gt; if you can NOT use it. Look at this example:
&gt;
&gt; -----------------------------------------------------------------
&gt; #!/usr/bin/perl
&gt; use strict; # restrict unsafe constructs
&gt; use Encode; # to UTF-8 encode an ISO 8859-1 string
&gt; use XML::RSS;
&gt;
&gt; my &#40;$rss, $description, $str&#41;;
&gt;
&gt; $str = &#34;éàè&#34;; # &lt;- ISO-8859-1 string &#40;in fact from my MYSQL DB&#41;
&gt; $description = encode_utf8&#40;$str&#41;; # real UTF-8 string, I have checked
&gt;
&gt; $rss = new XML::RSS &#40;
&gt; version =&gt; &#39;2.0&#39;,
&gt; &#41;;
&gt;
&gt; $rss-&gt;channel&#40;
&gt; title =&gt; $description
&gt; &#41;;
&gt; $rss-&gt;save&#40;&#34;/tmp/rss.xml&#34;&#41;;
&gt; ------------------------------------------------------------------
&gt;
&gt; With this example, you dont use an UTF-8 string inside the source code,
&gt; so I think &#34;use utf8&#34; is not helpfull. Then the resulting rss.xml file
&gt; is not displayed with Firefox correctly.
&gt;
&gt; Best regards and thanks for your help,
&gt;
&gt; franck Perrot
&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-922209" href="/Public/Bug/Display.html?id=24010#txn-922209">#</a>      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;13&nbsp;12:01:27&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-922537" href="/Public/Bug/Display.html?id=24010#txn-922537">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;14&nbsp;05:22:33&nbsp;2011</span>
    <span class="description">franck.perrot [...] epfl.ch -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #24010] XML::RSS  Wrong encoding for utf-8 text with accents</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 14 Apr 2011 11:22:24 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-RSS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> franck perrot &lt;franck.perrot [...] epfl.ch&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/922537/478634/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/478634">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 698b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Below is a simple test program.

If you look at the result file rss.xml in a Browser:
- All is fine using XML-RSS-1.10 &#40;uncomment the &#34;use lib&#34; line
- Wrong encoding result with the lastest XML-RSS module &#40;ç = Ã§ ...&#41;

Thanks for any help,
Franck




#! /usr/local/bin/perl

use strict;     # restrict unsafe constructs
use warnings;           # must be commented for production!
use Encode;

#use lib &#34;/Test/XML-RSS-1.10&#34;;
use XML::RSS;

my &#40;$rss, $description, $str&#41;;

$str = &#34;Mon titre çéàè&#34;;
$description = encode_utf8&#40;$str&#41;;

$rss = new XML::RSS &#40;
        version =&gt; &#39;1.0&#39;,
        encoding =&gt; &#39;UTF-8&#39;,
     &#41;;

$rss-&gt;channel&#40;
        title =&gt; $description
&#41;;
$rss-&gt;save&#40;&#34;/var/www/html/EPFLTV/Test/rss.xml&#34;&#41;;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-922571" href="/Public/Bug/Display.html?id=24010#txn-922571">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;14&nbsp;09:02:08&nbsp;2011</span>
    <span class="description">franck.perrot [...] epfl.ch -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #24010] XML::RSS  Wrong encoding for utf-8 text with accents</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 14 Apr 2011 15:01:55 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-RSS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> franck perrot &lt;franck.perrot [...] epfl.ch&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/922571/478652/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/478652">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
So, if I change the save subroutine like following, AND add 
&#34;encode_output =&gt; 0,&#34; all is perfect:

sub save {
     my &#40;$self, $file&#41; = @_;

     local &#40;*OUT&#41;;

     #open&#40;OUT, $self-&gt;_get_save_output_mode&#40;&#41;, &#34;$file&#34;&#41;
     open&#40;OUT, &#34;&gt;$file&#34;&#41;
       or croak &#34;Cannot open file $file for write: $!&#34;;
     print OUT $self-&gt;as_string;
     close OUT;
}



$rss = new XML::RSS &#40;
        version =&gt; &#39;2.0&#39;,
        encode_output =&gt; 0,
        encoding =&gt; &#39;UTF-8&#39;,
     &#41;;


Maybe this is because my string are already in UTF-8 and the save 
subroutine convert them again ?

So, as a simple workaround, maybe you could you add an option like 
no_encode telling the save subroutine to not try to convert.



This is my test program I used:

#! /usr/local/bin/perl

use strict;
use warnings;           
use Encode;

use XML::RSS;

my &#40;$rss, $description, $str&#41;;

$str = &#34;Mon titre çéàè&#34;;
$description = encode_utf8&#40;$str&#41;;

$rss = new XML::RSS &#40;
        version =&gt; &#39;2.0&#39;,
        encode_output =&gt; 0,
        encoding =&gt; &#39;UTF-8&#39;,
     &#41;;

$rss-&gt;channel&#40;
        title =&gt; $description
&#41;;
$rss-&gt;save&#40;&#34;/var/www/html/EPFLTV/Test/rss.xml&#34;&#41;;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-924116" href="/Public/Bug/Display.html?id=24010#txn-924116">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;17&nbsp;03:52:09&nbsp;2011</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/924116/479484/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/479484">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Franck,

a few comments on your code.

On Thu Apr 14 09:02:08 2011, franck.perrot@epfl.ch wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; So, if I change the save subroutine like following, AND add 
&gt; &#34;encode_output =&gt; 0,&#34; all is perfect:
&gt; 
&gt; sub save {
&gt;      my &#40;$self, $file&#41; = @_;
&gt; 
&gt;      local &#40;*OUT&#41;;
&gt; 
&gt;      #open&#40;OUT, $self-&gt;_get_save_output_mode&#40;&#41;, &#34;$file&#34;&#41;
&gt;      open&#40;OUT, &#34;&gt;$file&#34;&#41;
&gt;        or croak &#34;Cannot open file $file for write: $!&#34;;
</div>
This is a two-argument open and is bad karma:

<span class="clickylink"><a target="new" rel="nofollow" href="https://www.socialtext.net/perl5/two_argument_open">https://www.socialtext.net/perl5/two_argument_open</a></span> 


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;      print OUT $self-&gt;as_string;
&gt;      close OUT;
&gt; }
&gt; 
</div>
Furthermore, you can over-ride this method in an inherited class, or
simply do something with -&gt;as_string&#40;&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 
&gt; $rss = new XML::RSS &#40;
&gt;       version =&gt; &#39;2.0&#39;,
&gt;       encode_output =&gt; 0,
&gt;       encoding =&gt; &#39;UTF-8&#39;,
&gt;      &#41;;
&gt; 
</div>
That should be:

[code]
my $rss = XML::RSS-&gt;new&#40;
        version =&gt; &#39;2.0&#39;,
        encode_output =&gt; 0,
        encoding =&gt; &#39;UTF-8&#39;,
      &#41;;
[/code]

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Maybe this is because my string are already in UTF-8 and the save 
&gt; subroutine convert them again ?
&gt; 
&gt; So, as a simple workaround, maybe you could you add an option like 
&gt; no_encode telling the save subroutine to not try to convert.
&gt; 
&gt; 
&gt; 
&gt; This is my test program I used:
&gt; 
&gt; #! /usr/local/bin/perl
&gt; 
&gt; use strict;
&gt; use warnings;         
&gt; use Encode;
&gt; 
&gt; use XML::RSS;
&gt; 
&gt; my &#40;$rss, $description, $str&#41;;
&gt; 
&gt; $str = &#34;Mon titre çéàè&#34;;
&gt; $description = encode_utf8&#40;$str&#41;;
&gt; 
&gt; $rss = new XML::RSS &#40;
&gt;       version =&gt; &#39;2.0&#39;,
&gt;       encode_output =&gt; 0,
&gt;       encoding =&gt; &#39;UTF-8&#39;,
&gt;      &#41;;
&gt; 
&gt; $rss-&gt;channel&#40;
&gt;       title =&gt; $description
&gt; &#41;;
&gt; $rss-&gt;save&#40;&#34;/var/www/html/EPFLTV/Test/rss.xml&#34;&#41;;
</div>
Please create a .t file.

And also don&#39;t pre-declare all variables at the start, but instead do a
&#34;my $rss = XML::RSS-&gt;new&#40;...&#41;&#34;.

<span class="clickylink"><a target="new" rel="nofollow" href="http://perl-begin.org/tutorials/bad-elements/">http://perl-begin.org/tutorials/bad-elements/</a></span>

Regards,

-- Shlomi Fish
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-925108" href="/Public/Bug/Display.html?id=24010#txn-925108">#</a>      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;19&nbsp;05:12:23&nbsp;2011</span>
    <span class="description">franck.perrot [...] epfl.ch -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #24010] XML::RSS  Wrong encoding for utf-8 text with accents</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 19 Apr 2011 11:12:12 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-RSS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> franck perrot &lt;franck.perrot [...] epfl.ch&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/925108/480006/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/480006">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 878b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Shlomi,

thanks a lot for your advice.

I can do the job myself, dont use the RSS save subroutine, etc, but the 
UTF8 problem, I think, is still there.

If you look at the xml file produced by XML::RSS &#40;through Firefox for 
example, or a validator&#41;, then the result is wrong if the text is in 
UTF8 with chars like accents or even &#38;,&gt;,&gt;,&#34;, ...


Anyway,
Thanks again and have a nice day,
Franck



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;&gt; This is my test program I used:
&gt;&gt;
&gt;&gt; #! /usr/local/bin/perl
&gt;&gt;
&gt;&gt; use strict;
&gt;&gt; use warnings;                
&gt;&gt; use Encode;
&gt;&gt;
&gt;&gt; use XML::RSS;
&gt;&gt;
&gt;&gt; my &#40;$rss, $description, $str&#41;;
&gt;&gt;
&gt;&gt; $str = &#34;Mon titre çéàè&#34;;
&gt;&gt; $description = encode_utf8&#40;$str&#41;;
&gt;&gt;
&gt;&gt; $rss = new XML::RSS &#40;
&gt;&gt;      version =&gt;  &#39;2.0&#39;,
&gt;&gt;      encode_output =&gt;  0,
&gt;&gt;      encoding =&gt;  &#39;UTF-8&#39;,
&gt;&gt;       &#41;;
&gt;&gt;
&gt;&gt; $rss-&gt;channel&#40;
&gt;&gt;              title =&gt;  $description
&gt;&gt; &#41;;
&gt;&gt; $rss-&gt;save&#40;&#34;/var/www/html/EPFLTV/Test/rss.xml&#34;&#41;;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-925183" href="/Public/Bug/Display.html?id=24010#txn-925183">#</a>      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;19&nbsp;09:55:42&nbsp;2011</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/925183/480050/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/480050">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 858b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Franck,

On Tue Apr 19 05:12:23 2011, franck.perrot@epfl.ch wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello Shlomi,
&gt; 
&gt; thanks a lot for your advice.
&gt; 
&gt; I can do the job myself, dont use the RSS save subroutine, etc, but the 
&gt; UTF8 problem, I think, is still there.
&gt; 
&gt; If you look at the xml file produced by XML::RSS &#40;through Firefox for 
&gt; example, or a validator&#41;, then the result is wrong if the text is in 
&gt; UTF8 with chars like accents or even &#38;,&gt;,&gt;,&#34;, ...
&gt; 
</div>
For the third time or so, please write a self-contained .t test file
that demonstrates the problem, because your instructions are hard to
follow. You&#39;re being very uncooperative, and if you want to get this bug
fix, you&#39;ll need to learn to cooperate. Please acknowledge that you are
going to work on a .t file, so we can make some progress from here, or
else I&#39;ll have to close this bug.

Regards,

-- Shlomi Fish
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-925211" href="/Public/Bug/Display.html?id=24010#txn-925211">#</a>      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;19&nbsp;10:42:56&nbsp;2011</span>
    <span class="description">franck.perrot [...] epfl.ch -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #24010] XML::RSS  Wrong encoding for utf-8 text with accents</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 19 Apr 2011 16:42:46 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-RSS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> franck perrot &lt;franck.perrot [...] epfl.ch&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/925211/480074/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/480074">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 231b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; For the third time or so, please write a self-contained .t test file
&gt; that demonstrates the problem, because your instructions are hard to
&gt; follow.
</div>
sorry, but I realy dont know how to write such file.

Regards,
Franck
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-925225" href="/Public/Bug/Display.html?id=24010#txn-925225">#</a>      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;19&nbsp;11:18:12&nbsp;2011</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/925225/480084/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/480084">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 559b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Franck,

On Tue Apr 19 10:42:56 2011, franck.perrot@epfl.ch wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,
&gt; 
<div class="message-stanza open">&gt; &gt; For the third time or so, please write a self-contained .t test file
&gt; &gt; that demonstrates the problem, because your instructions are hard to
&gt; &gt; follow.
</div>&gt; 
&gt; sorry, but I realy dont know how to write such file.
&gt; 
</div>
Thanks for being frank. In any case, please learn how to do so - it&#39;s
not hard, and won&#39;t take a lot of time. See:

* <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/perldoc?Test::Tutorial">http://search.cpan.org/perldoc?Test::Tutorial</a></span>

* <span class="clickylink"><a target="new" rel="nofollow" href="http://www.shlomifish.org/lecture/Perl/Newbies/lecture5/testing/">http://www.shlomifish.org/lecture/Perl/Newbies/lecture5/testing/</a></span>

Regards,

-- Shlomi Fish
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-942685" href="/Public/Bug/Display.html?id=24010#txn-942685">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;06&nbsp;05:26:47&nbsp;2011</span>
    <span class="description">franck.perrot [...] epfl.ch -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #24010] XML::RSS  Wrong encoding for utf-8 text with accents</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 06 Jun 2011 11:26:37 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-RSS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> franck perrot &lt;franck.perrot [...] epfl.ch&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/942685/490121/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/490121">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 361b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

so, after more and more deep investigation, I found the problem. It was 
a Perl problem. Some string, UTF8 encoded, did&#39;nt know there were UTF8 
encoded... Look&#39;s stupid but it&#39;s a fact. Then RSS.pm encoded the string 
again and the display was wrong.

Am I clear ?

You can close the bug report, it was not a bug.
Thanks,

Best regards,
franck Perrot
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-942757" href="/Public/Bug/Display.html?id=24010#txn-942757">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;06&nbsp;11:03:42&nbsp;2011</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/942757/490158/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/490158">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 496b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 06 05:26:47 2011, franck.perrot@epfl.ch wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,
&gt; 
&gt; so, after more and more deep investigation, I found the problem. It was 
&gt; a Perl problem. Some string, UTF8 encoded, did&#39;nt know there were UTF8 
&gt; encoded... Look&#39;s stupid but it&#39;s a fact. Then RSS.pm encoded the string 
&gt; again and the display was wrong.
&gt; 
&gt; Am I clear ?
&gt; 
&gt; You can close the bug report, it was not a bug.
</div>
Closing, thanks!

Regards,

-- Shlomi Fish

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks,
&gt; 
&gt; Best regards,
&gt; franck Perrot
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-942760" href="/Public/Bug/Display.html?id=24010#txn-942760">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;06&nbsp;11:03:44&nbsp;2011</span>
    <span class="description">SHLOMIF [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.944878</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
