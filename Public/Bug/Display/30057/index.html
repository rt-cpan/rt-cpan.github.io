<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #30057 for CGI: Depends on RT#35376: CGI.pm popup_menu multiple selects</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #30057 for CGI: Depends on RT#35376: CGI.pm popup_menu multiple selects</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/CGI/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/CGI/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/CGI/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/CGI/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/leejo/CGI.pm/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/CGI">CGI CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">30057</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/CGI/Active/">CGI</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">MARKSTOS [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
tom.luyten [...] verz.kbc.be

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
randomcoder1 [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-230860-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-230861-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;17&nbsp;09:08:47&nbsp;2007</span>
    <span class="description">tom.luyten [...] verz.kbc.be -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> CGI.pm popup_menu multiple selects</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">When you create a popup_menu with CGI.pm &#40;ex: print my_popup_menu&#40;-
name=&gt;&#39;selection_serverlist&#39;,-default=&gt;&#39;&#39; ,-multiple=&gt;&#39;true&#39;,-
values=&gt;\@ep, -labels=&gt;\%serverlist&#41;;&#41; and you use multiple=&gt;&#39;true&#39; 
you can select multiple items in the list and post them.

The problem in CGI.pm is that when you rebuild you page your selection 
is lost.
The CGI.pm module doesn&#39;t work with the hash that&#39;s being returned.
It only uses the first item in the has.

As a quick-fix I changed the following:

foreach &#40;@values&#41; {
    if &#40;/&lt;optgroup/&#41; {
        foreach &#40;split&#40;/\n/&#41;&#41; {
            my $selectit = $XHTML ? &#39;selected=&#34;selected&#34;&#39; : &#39;selected&#39;;
            s/&#40;value=&#34;$selected&#34;&#41;/$selectit $1/ if defined $selected;
            $result .= &#34;$_\n&#34;;
        }
    }
    else {
        my $temp_value = $_;
        for &#40; $self-&gt;param&#40;$name&#41;&#41; {
                if &#40;$temp_value eq $_&#41;  {
                        $selected = $_;
                }
        }
        my $attribs = $self-&gt;_set_attributes&#40;$_, $attributes&#41;;
        my&#40;$selectit&#41; = defined&#40;$selected&#41; ? $self-&gt;_selected
&#40;$selected eq $_&#41; : &#39;&#39;;
        my&#40;$label&#41; = $_;
        $label = $labels-&gt;{$_} if defined&#40;$labels&#41; &#38;&#38; defined&#40;$labels-&gt;
{$_}&#41;;
        my&#40;$value&#41; = $self-&gt;escapeHTML&#40;$_&#41;;
        $label=$self-&gt;escapeHTML&#40;$label,1&#41;;
        $result .= &#34;&lt;option${attribs} ${selectit}
value=\&#34;$value\&#34;&gt;$label&lt;/option&gt;\n&#34;;
    }
}

The first 6 lines of the else are mine. They fix my problem with the 
multiple select.

Kind regards,
Tom
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:24:10&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 17 09:08:47 2007, Wivern wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; When you create a popup_menu with CGI.pm &#40;ex: print my_popup_menu&#40;-
&gt; name=&gt;&#39;selection_serverlist&#39;,-default=&gt;&#39;&#39; ,-multiple=&gt;&#39;true&#39;,-
&gt; values=&gt;\@ep, -labels=&gt;\%serverlist&#41;;&#41; and you use multiple=&gt;&#39;true&#39; 
&gt; you can select multiple items in the list and post them.
&gt; 
&gt; The problem in CGI.pm is that when you rebuild you page your selection 
&gt; is lost.
&gt; The CGI.pm module doesn&#39;t work with the hash that&#39;s being returned.
&gt; It only uses the first item in the has.
&gt; 
&gt; As a quick-fix I changed the following:
&gt; 
&gt; foreach &#40;@values&#41; {
&gt;     if &#40;/&lt;optgroup/&#41; {
&gt;         foreach &#40;split&#40;/\n/&#41;&#41; {
&gt;             my $selectit = $XHTML ? &#39;selected=&#34;selected&#34;&#39; : &#39;selected&#39;;
&gt;             s/&#40;value=&#34;$selected&#34;&#41;/$selectit $1/ if defined $selected;
&gt;             $result .= &#34;$_\n&#34;;
&gt;         }
&gt;     }
&gt;     else {
&gt;       my $temp_value = $_;
&gt;       for &#40; $self-&gt;param&#40;$name&#41;&#41; {
&gt;               if &#40;$temp_value eq $_&#41;  {
&gt;                       $selected = $_;
&gt;               }
&gt;       }
&gt;         my $attribs = $self-&gt;_set_attributes&#40;$_, $attributes&#41;;
&gt;       my&#40;$selectit&#41; = defined&#40;$selected&#41; ? $self-&gt;_selected
&gt; &#40;$selected eq $_&#41; : &#39;&#39;;
&gt;       my&#40;$label&#41; = $_;
&gt;       $label = $labels-&gt;{$_} if defined&#40;$labels&#41; &#38;&#38; defined&#40;$labels-&gt;
&gt; {$_}&#41;;
&gt;       my&#40;$value&#41; = $self-&gt;escapeHTML&#40;$_&#41;;
&gt;       $label=$self-&gt;escapeHTML&#40;$label,1&#41;;
&gt;         $result .= &#34;&lt;option${attribs} ${selectit}
&gt; value=\&#34;$value\&#34;&gt;$label&lt;/option&gt;\n&#34;;
&gt;     }
&gt; }
&gt; 
&gt; The first 6 lines of the else are mine. They fix my problem with the 
&gt; multiple select.
</div>
Thanks for the report. 

If the issue still persists, could you prepare a Test::More style test
case which illustrates it?

I would also recommend considering using a templating system to generate
the forms, and using HTML::FIllInForm to handle selecting values in the
form.

   Mark 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:24:11&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:24:32&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Subject changed from &#39;CGI.pm popup_menu multiple selects&#39; to &#39;Needs Test: CGI.pm popup_menu multiple selects&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:16&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.46 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:16&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.47 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:17&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.48 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:17&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.49 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:17&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.52 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:17&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.53 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:17&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.54 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:17&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.55 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:17&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.56 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:17&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.59 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:18&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.61 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:18&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.62 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:18&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.65 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:18&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.66 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:19&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.67 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:19&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.68 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:20&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.69 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:20&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.70 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:20&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.71 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:20&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.72 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:20&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.74 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:20&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.751 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:20&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.752 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:20&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.753 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:20&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.76 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:20&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.77 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:20&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.78 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:20&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.79 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:20&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.80 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:20&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.81 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:21&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.84 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:21&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.85 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:21&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.86 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:21&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.87 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:21&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.88 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:21&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.89 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:21&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.90 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:21&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.91 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:21&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.92 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:21&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.93 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:21&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.94 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:21&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.95 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:21&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.96 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:22&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.97 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:22&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.98 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:22&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 2.99 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:22&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.00 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:22&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.01 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:22&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.03 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:22&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.03_01 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:22&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.04 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:23&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.05 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:23&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.06 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:23&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.07 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:23&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.08 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:23&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.09 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:23&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.10 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:24&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.11 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:24&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.12 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:24&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.13 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:24&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.14 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:24&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.15 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:24&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.16 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:24&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.17 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:24&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.19 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:24&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.20 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:24&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.21 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:24&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.22 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:24&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.23 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:24&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.25 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:24&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.27 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;21:25:24&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Broken in 3.28 deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;16&nbsp;09:45:43&nbsp;2009</span>
    <span class="description">randomcoder1 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I&#39;ve just fixed this bug.
I have the code from github cloned
I replaced only one line in CGI.pm and that will be my patch.
Can I write here the patch.
Also , as I understand , Somni on #perl on FreeNode argued
that this isn&#39;t actually a bug-report but it is a feature because it 
wasn&#39;t mentioned in the initial specs for a popup_menu 
to support multiple selection.
Do I just send the patch or also write a test for it ?

Thank you,
Stefan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;16&nbsp;16:43:51&nbsp;2009</span>
    <span class="description">randomcoder1 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ok, patches rolled in.
RFC please :&#41;
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">1698c1698
&lt;     if &#40;$DTD_PUBLIC_IDENTIFIER =~ /[^X]HTML &#40;2\.0|3\.2|4\.01?&#41;/i&#41; {
---
&gt;     if &#40;$DTD_PUBLIC_IDENTIFIER =~ /[^X]HTML &#40;2\.0|3\.2&#41;/i&#41; {
2538a2539
&gt;           $selectit = &#39; selected=&#34;selected&#34; &#39; if $_ ~~ @{$self-&gt;{param}-&gt;{$name}} // &#39;&#39;;
4962,4963c4963
&lt; If start_html&#40;&#41;&#39;s -dtd parameter specifies an HTML 2.0, 
&lt; 3.2, 4.0 or 4.01 DTD, 
---
&gt; If start_html&#40;&#41;&#39;s -dtd parameter specifies an HTML 2.0 or 3.2 DTD, 
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">1c1
&lt; #!perl
---
&gt; #!/usr/bin/perl
3c3,5
&lt; use lib &#39;t/lib&#39;;
---
&gt; use lib &#39;./lib&#39;;
&gt; use lib &#39;./t/lib&#39;;
&gt; use CGI qw/:debug/;
5c7,8
&lt; use CGI;
---
&gt; use feature &#39;say&#39;;
&gt; use Data::Dumper;
7c10,12
&lt; my $q  = CGI-&gt;new;
---
&gt; push @ARGV,&#34;selection=bbb;selection=ccc&#34;;
&gt; 
&gt; my $q  = CGI-&gt;new&#40;&#41;;
10c15
&lt; &#39;&lt;select name=&#34;foo&#34; &gt;
---
&gt;     &#39;&lt;select name=&#34;foo&#34; &gt;
14c19,46
&lt; , &#39;popup_menu&#40;&#41;: basic test, including 0 as a default value&#39;&#41;; 
---
&gt;     , &#39;popup_menu&#40;&#41;: basic test, including 0 as a default value&#39;&#41;; 
&gt; 
&gt; 
&gt; # test for popup_menu multiple selection that would have to last after submit button is
&gt; # pressed
&gt; my $q = CGI-&gt;new&#40;&#41;;
&gt; 
&gt; my $menu = $q-&gt;popup_menu&#40;
&gt;     -name=&gt;&#39;selection&#39;,
&gt;     -default=&gt;&#39;&#39; ,
&gt;     -multiple=&gt;&#39;true&#39;,
&gt;     -values=&gt;[&#39;aaa&#39;,&#39;bbb&#39;,&#39;ccc&#39;],
&gt;     -labels=&gt;{
&gt; 	&#39;aaa&#39;=&gt;&#39;aaa&#39;,
&gt; 	&#39;bbb&#39;=&gt;&#39;bbb&#39;,
&gt; 	&#39;ccc&#39;=&gt;&#39;ccc&#39;,
&gt;     }
&gt; &#41;;
&gt; is&#40;$menu,
&gt; &#39;&lt;select name=&#34;selection&#34;  multiple=&#34;true&#34;&gt;
&gt; &lt;option value=&#34;aaa&#34;&gt;aaa&lt;/option&gt;
&gt; &lt;option  selected=&#34;selected&#34; value=&#34;bbb&#34;&gt;bbb&lt;/option&gt;
&gt; &lt;option  selected=&#34;selected&#34; value=&#34;ccc&#34;&gt;ccc&lt;/option&gt;
&gt; &lt;/select&gt;&#39;,
&gt; &#39;popup_menu&#40;&#41;: test related to having multiple items selected and after select they should still be selected&#39;
&gt; &#41;;
&gt; 
&gt; 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;16&nbsp;17:28:17&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;16&nbsp;17:29:48&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Aug 16 16:43:51 2009, WSDOOKADR wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Ok, patches rolled in.
&gt; RFC please :&#41;
</div>
Thanks for the patch!

Here&#39;s the line you added:

 $selectit = &#39; selected=&#34;selected&#34; &#39; if $_ ~~ @{$self-&gt;{param}-&gt;{$name}}
// &#39;&#39;;

For CGI.pm we would like compatibility with Perl 5.6. Could you rewrite
it, avoiding &#34;~~&#34; and &#34;//&#34; ?

You are also welcome to send me a pull request on github. 

Thanks!

     Mark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;16&nbsp;18:46:53&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Subject changed from &#39;Needs Test: CGI.pm popup_menu multiple selects&#39; to &#39;Needs patch refinement: CGI.pm popup_menu multiple selects&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;16&nbsp;22:39:46&nbsp;2009</span>
    <span class="description">randomcoder1 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">ok
- replaced the ~~ with grep.
- added some description of popup_menu to the POD.
- added check for &#34;-multiple&#34; in order to not break other tests in
  &#40; if I don&#39;t check for &#34;-multiple&#34; some tests form.t:106 and 
no_tabindex.t:108&#41;
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">2505a2506,2511
&gt; #    {
&gt; #	sub deb { 
&gt; #	    open my $debug_fh,&#34;&gt;/tmp/debug_cgi.txt&#34;;
&gt; #	    print $debug_fh $_[0] 
&gt; #	};
&gt; #    };
2524a2531,2532
&gt; #    use Data::Dumper;
&gt; #    deb Dumper \@_;
2538a2547,2556
&gt;           # Mark Stosberg suggestions -&gt; using something that would be compatible for perl 5.6
&gt; 	  # for counting occurences inside an array &#40; instead of ~~ which was used before &#41;
&gt; 	  # grep is a possibility
&gt; 	  if&#40; &#40;grep /^-multiple$/, @_&#41; &gt; 0 &#38;&#38; defined $self-&gt;{param}-&gt;{$name} &#38;&#38; @{$self-&gt;{param}-&gt;{$name}} &gt; 1&#41; {
&gt; 	      #this code will be run only if we have multiple selections
&gt; 	      my $val = $_; # current 
&gt; 	      # we count in occ_val occurences of the current value attribute which is selected
&gt; 	      my $occ_val = &#40;&#41; = grep /^$val$/,@{ $self-&gt;{param}-&gt;{$name} }; 
&gt; 	      $selectit = &#39; selected=&#34;selected&#34; &#39; if $occ_val &gt; 0;
&gt; 	  }
4962,4963c4980
&lt; If start_html&#40;&#41;&#39;s -dtd parameter specifies an HTML 2.0, 
&lt; 3.2, 4.0 or 4.01 DTD, 
---
&gt; If start_html&#40;&#41;&#39;s -dtd parameter specifies an HTML 2.0 or 3.2 DTD, 
6278a6296,6313
&gt;       -or-	&#40;
&gt; 		 multiple selection allows to have multiple items selected,
&gt; 		 they will continue to be selected after you submit the form
&gt; 		&#41;
&gt; 
&gt;    print popup_menu&#40;
&gt;      -name=&gt;&#39;selection&#39;,
&gt;      -default=&gt;&#39;&#39; ,
&gt;      -multiple=&gt;&#39;true&#39;,
&gt;      -values=&gt;[&#39;aaa&#39;,&#39;bbb&#39;,&#39;ccc&#39;],
&gt;      -override=&gt;1,
&gt;      -labels=&gt;{
&gt;          &#39;aaa&#39;=&gt;&#39;aaa&#39;,
&gt;          &#39;bbb&#39;=&gt;&#39;bbb&#39;,
&gt;          &#39;ccc&#39;=&gt;&#39;ccc&#39;,
&gt;     }
&gt;    &#41;
&gt; 
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">1c1
&lt; #!perl
---
&gt; #!/usr/bin/perl
3c3,5
&lt; use lib &#39;t/lib&#39;;
---
&gt; use lib &#39;./lib&#39;;
&gt; use lib &#39;./t/lib&#39;;
&gt; use CGI qw/:debug/;
5c7,8
&lt; use CGI;
---
&gt; use feature &#39;say&#39;;
&gt; use Data::Dumper;
7c10,12
&lt; my $q  = CGI-&gt;new;
---
&gt; push @ARGV,&#34;selection=bbb;selection=ccc&#34;;
&gt; 
&gt; my $q  = CGI-&gt;new&#40;&#41;;
10c15
&lt; &#39;&lt;select name=&#34;foo&#34; &gt;
---
&gt;     &#39;&lt;select name=&#34;foo&#34; &gt;
14c19,47
&lt; , &#39;popup_menu&#40;&#41;: basic test, including 0 as a default value&#39;&#41;; 
---
&gt;     , &#39;popup_menu&#40;&#41;: basic test, including 0 as a default value&#39;&#41;; 
&gt; 
&gt; 
&gt; # test for popup_menu multiple selection that would have to last after submit button is
&gt; # pressed
&gt; $q = CGI-&gt;new&#40;&#41;;
&gt; 
&gt; my $menu = $q-&gt;popup_menu&#40;
&gt;     -name=&gt;&#39;selection&#39;,
&gt;     -default=&gt;&#39;&#39; ,
&gt;     -multiple=&gt;&#39;true&#39;,
&gt;     -values=&gt;[&#39;aaa&#39;,&#39;bbb&#39;,&#39;ccc&#39;],
&gt;     -override=&gt;1,
&gt;     -labels=&gt;{
&gt; 	&#39;aaa&#39;=&gt;&#39;aaa&#39;,
&gt; 	&#39;bbb&#39;=&gt;&#39;bbb&#39;,
&gt; 	&#39;ccc&#39;=&gt;&#39;ccc&#39;,
&gt;     }
&gt; &#41;;
&gt; is&#40;$menu,
&gt; &#39;&lt;select name=&#34;selection&#34;  multiple=&#34;true&#34;&gt;
&gt; &lt;option value=&#34;aaa&#34;&gt;aaa&lt;/option&gt;
&gt; &lt;option  selected=&#34;selected&#34; value=&#34;bbb&#34;&gt;bbb&lt;/option&gt;
&gt; &lt;option  selected=&#34;selected&#34; value=&#34;ccc&#34;&gt;ccc&lt;/option&gt;
&gt; &lt;/select&gt;&#39;,
&gt; &#39;popup_menu&#40;&#41;: test related to having multiple items selected and after select they should still be selected&#39;
&gt; &#41;;
&gt; 
&gt; 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;16&nbsp;23:26:31&nbsp;2009</span>
    <span class="description">randomcoder1 [...] gmail.com -  Cc WSDOOKADR added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;17&nbsp;07:58:31&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks!

I&#39;m about to leave for work now, but another helper watching the bug
tracker should feel feel to peer-review this and apply it in their
github branch if approved.  Otherwise I should get to in the next 24 hours.

   Mark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;17&nbsp;20:48:52&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks.

However, when I applied this patch and the new test, one of the tests
failed:

not ok 2 - popup_menu&#40;&#41;: test related to having multiple items selected
and after select they should still be selected
#     Failed test &#40;t/popup_menu.t at line 37&#41;
#          got: &#39;&lt;select name=&#34;selection&#34;  multiple=&#34;true&#34;&gt;
&lt;option value=&#34;aaa&#34;&gt;aaa&lt;/option&gt;
&lt;option value=&#34;bbb&#34;&gt;bbb&lt;/option&gt;
&lt;option value=&#34;ccc&#34;&gt;ccc&lt;/option&gt;
&lt;/select&gt;&#39;
#     expected: &#39;&lt;select name=&#34;selection&#34;  multiple=&#34;true&#34;&gt;
&lt;option value=&#34;aaa&#34;&gt;aaa&lt;/option&gt;
&lt;option  selected=&#34;selected&#34; value=&#34;bbb&#34;&gt;bbb&lt;/option&gt;
&lt;option  selected=&#34;selected&#34; value=&#34;ccc&#34;&gt;ccc&lt;/option&gt;
&lt;/select&gt;&#39;
1..2

###

If you submit a refined patch, there are a couple ways it could be
cleaned up:

- In the test it said &#34;use feature &#39;say&#39;&#34;, but it didn&#39;t seem to do
anything. 

- In CGI.pm, there was commented out code related to &#34;sub deb&#34; and the
call to Dumper can be removed, as can the comment about Perl 5.6
compatibility. 

Also, I didn&#39;t understand this idiom:

my $occ_val = &#40;&#41; = grep /^$val$/,@{ $self-&gt;{param}-&gt;{$name} };

What is the intent of assigning an empty list to a value, and then
assigning the result to a variable?

    Mark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;17&nbsp;20:59:42&nbsp;2009</span>
    <span class="description">randomcoder1 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Aug 17 20:48:52 2009, MARKSTOS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Also, I didn&#39;t understand this idiom:
&gt; 
&gt; my $occ_val = &#40;&#41; = grep /^$val$/,@{ $self-&gt;{param}-&gt;{$name} };
&gt; 
&gt; What is the intent of assigning an empty list to a value, and then
&gt; assigning the result to a variable?
&gt; 
</div>
Sorry , here I intended
my $occ_val = grep /^$val$/,@{ $self-&gt;{param}-&gt;{$name} };
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;17&nbsp;21:23:54&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Another tip:  Use &#34;diff -u&#34; to generate the patches. This will include
the file name and some more context in the file, making it easier to
review the patch. You can also concatenate two of these diff files
together to make one attachment which been reviewed and re-applied in
one action. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;20&nbsp;10:43:57&nbsp;2009</span>
    <span class="description">randomcoder1 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Aug 17 21:23:54 2009, MARKSTOS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Another tip:  Use &#34;diff -u&#34; to generate the patches. This will include
&gt; the file name and some more context in the file, making it easier to
&gt; review the patch. You can also concatenate two of these diff files
&gt; together to make one attachment which been reviewed and re-applied in
&gt; one action. 
</div>
Hi Mark,

I&#39;ve used  git diff &gt; popup_menu.patch
I&#39;m sending it now.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff --git a/lib/CGI.pm b/lib/CGI.pm
index 65fff24..855bb9e 100644
--- a/lib/CGI.pm
+++ b/lib/CGI.pm
@@ -2542,6 +2542,15 @@ sub popup_menu {
         else {
           my $attribs   = $self-&gt;_set_attributes&#40;$_, $attributes&#41;;
 	  my&#40;$selectit&#41; = $self-&gt;_selected&#40;$selected{$_}&#41;;
+
+	  if&#40; &#40;grep /^-multiple$/, @_&#41; &gt; 0 &#38;&#38; defined $self-&gt;{param}-&gt;{$name} &#38;&#38; @{$self-&gt;{param}-&gt;{$name}} &gt; 1&#41; {
+	      #this code will be run only if we have multiple selections
+	      my $val = $_; # current 
+	      # we count in occ_val occurences of the current value attribute which is selected
+	      my $occ_val = grep /^$val$/,@{ $self-&gt;{param}-&gt;{$name} }; 
+	      $selectit = &#39; selected=&#34;selected&#34; &#39; if $occ_val &gt; 0;
+	  }
+
 	  my&#40;$label&#41;    = $_;
 	  $label        = $labels-&gt;{$_} if defined&#40;$labels&#41; &#38;&#38; defined&#40;$labels-&gt;{$_}&#41;;
 	  my&#40;$value&#41;    = $self-&gt;escapeHTML&#40;$_&#41;;
@@ -6284,6 +6293,24 @@ recognized.  See textfield&#40;&#41; for details.
 			    -default=&gt;[&#39;meenie&#39;,&#39;minie&#39;],
           -labels=&gt;\%labels,
           -attributes=&gt;\%attributes&#41;;
+        -or-	&#40;
+ 	 multiple selection allows to have multiple items selected,
+ 	 they will continue to be selected after you submit the form
+ 	&#41;
+  
+     print popup_menu&#40;
+       -name=&gt;&#39;selection&#39;,
+       -default=&gt;&#39;&#39; ,
+       -multiple=&gt;&#39;true&#39;,
+       -values=&gt;[&#39;aaa&#39;,&#39;bbb&#39;,&#39;ccc&#39;],
+       -override=&gt;1,
+       -labels=&gt;{
+           &#39;aaa&#39;=&gt;&#39;aaa&#39;,
+           &#39;bbb&#39;=&gt;&#39;bbb&#39;,
+           &#39;ccc&#39;=&gt;&#39;ccc&#39;,
+      }
+     &#41;
+
 
 popup_menu&#40;&#41; creates a menu.
 
diff --git a/t/popup_menu.t b/t/popup_menu.t
index 90c52a9..4c7a360 100644
--- a/t/popup_menu.t
+++ b/t/popup_menu.t
@@ -6,9 +6,34 @@ use CGI;
 my $q  = CGI-&gt;new;
 
 is &#40; $q-&gt;popup_menu&#40;-name=&gt;&#34;foo&#34;, - values=&gt;[0,1], -default=&gt;0&#41;,
-&#39;&lt;select name=&#34;foo&#34; &gt;
+    &#39;&lt;select name=&#34;foo&#34; &gt;
 &lt;option selected=&#34;selected&#34; value=&#34;0&#34;&gt;0&lt;/option&gt;
 &lt;option value=&#34;1&#34;&gt;1&lt;/option&gt;
 &lt;/select&gt;&#39;
-, &#39;popup_menu&#40;&#41;: basic test, including 0 as a default value&#39;&#41;; 
+    , &#39;popup_menu&#40;&#41;: basic test, including 0 as a default value&#39;&#41;; 
+
+
+push @ARGV,&#34;selection=bbb;selection=ccc&#34;;
+$q = CGI-&gt;new&#40;&#41;;
+
+my $menu = $q-&gt;popup_menu&#40;
+    -name=&gt;&#39;selection&#39;,
+    -default=&gt;&#39;&#39; ,
+    -multiple=&gt;&#39;true&#39;,
+    -values=&gt;[&#39;aaa&#39;,&#39;bbb&#39;,&#39;ccc&#39;],
+    -override=&gt;1,
+    -labels=&gt;{
+	&#39;aaa&#39;=&gt;&#39;aaa&#39;,
+	&#39;bbb&#39;=&gt;&#39;bbb&#39;,
+	&#39;ccc&#39;=&gt;&#39;ccc&#39;,
+    }
+&#41;;
+is&#40;$menu,
+    &#39;&lt;select name=&#34;selection&#34;  multiple=&#34;true&#34;&gt;
+&lt;option value=&#34;aaa&#34;&gt;aaa&lt;/option&gt;
+&lt;option  selected=&#34;selected&#34; value=&#34;bbb&#34;&gt;bbb&lt;/option&gt;
+&lt;option  selected=&#34;selected&#34; value=&#34;ccc&#34;&gt;ccc&lt;/option&gt;
+&lt;/select&gt;&#39;,
+    &#39;popup_menu&#40;&#41;: test related to having multiple items selected and after select they should still be selected&#39;
+&#41;;
 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;20&nbsp;22:07:09&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Aug 20 10:43:57 2009, WSDOOKADR wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Aug 17 21:23:54 2009, MARKSTOS wrote:
<div class="message-stanza open">&gt; &gt; Another tip:  Use &#34;diff -u&#34; to generate the patches. This will include
&gt; &gt; the file name and some more context in the file, making it easier to
&gt; &gt; review the patch. You can also concatenate two of these diff files
&gt; &gt; together to make one attachment which been reviewed and re-applied in
&gt; &gt; one action. 
</div>&gt; 
&gt; Hi Mark,
&gt; 
&gt; I&#39;ve used  git diff &gt; popup_menu.patch
</div>
Thanks.  One more suggestion for improvement:

Instead of using the direct access to the param hash, it is preferable
to respect the encapsulation and call the param&#40;&#41; method instead.

So calls like this: $self-&gt;{param}-&gt;{$name}
should be:  $self-&gt;param&#40;$name&#41;;

This patch format was easier to deal with, but the test still fails for
me in the same way...nothing becomes selected. This is on Perl 5.8.8. 

Let me ask this: Why have you not solved this just as it is in
scrolling_list&#40;&#41;? The code should be almost identical and I suspect that
approach would get the test to pass for me. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;20&nbsp;23:30:31&nbsp;2009</span>
    <span class="description">randomcoder1 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Aug 20 22:07:09 2009, MARKSTOS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Thu Aug 20 10:43:57 2009, WSDOOKADR wrote:
<div class="message-stanza open">&gt; &gt; On Mon Aug 17 21:23:54 2009, MARKSTOS wrote:
<div class="message-stanza open">&gt; &gt; &gt; Another tip:  Use &#34;diff -u&#34; to generate the patches. This will 
</div></div></div>include
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; the file name and some more context in the file, making it easier 
</div></div>to
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; review the patch. You can also concatenate two of these diff files
&gt; &gt; &gt; together to make one attachment which been reviewed and re-
</div></div>applied in
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; one action. 
</div>&gt; &gt; 
&gt; &gt; Hi Mark,
&gt; &gt; 
&gt; &gt; I&#39;ve used  git diff &gt; popup_menu.patch
</div>&gt; 
&gt; Thanks.  One more suggestion for improvement:
&gt; 
&gt; Instead of using the direct access to the param hash, it is preferable
&gt; to respect the encapsulation and call the param&#40;&#41; method instead.
&gt; 
&gt; So calls like this: $self-&gt;{param}-&gt;{$name}
&gt; should be:  $self-&gt;param&#40;$name&#41;;
&gt; 
&gt; This patch format was easier to deal with, but the test still fails 
</div>for
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; me in the same way...nothing becomes selected. This is on Perl 5.8.8. 
&gt; 
&gt; Let me ask this: Why have you not solved this just as it is in
&gt; scrolling_list&#40;&#41;? The code should be almost identical and I suspect 
</div>that
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; approach would get the test to pass for me. 
&gt; 
</div>
I have tested all modifications on Perl 5.10.0
Please confirm that the bug is solved there and I will try to see if I 
get a 5.8.8 set up to test there as well.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;21&nbsp;21:41:58&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have tested all modifications on Perl 5.10.0
&gt; Please confirm that the bug is solved there and I will try to see if I 
&gt; get a 5.8.8 set up to test there as well.
</div>
I think the patch needs to be rewritten to be consistent with
scrolling_list&#40;&#41;. It ought to include &#34;MULTIPLE&#34; in the call to
&#34;rearrange&#40;&#41;&#34; and it makes sense that it should also make use of the
&#34;previous_or_default&#40;&#41;&#34; method.

When a new patch is ready, I&#39;ll test it again on Perl 5.8.8. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;21&nbsp;21:52:07&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Dependency on ticket #35376 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;21&nbsp;21:55:23&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Needs patch refinement: CGI.pm popup_menu multiple selects &#40;use
 scrolling list instead&#41;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On further consideration, I think there&#39;s been some confusion about
popup_menu&#40;&#41; and multiple selects &#40;I became confused myself&#41;. I explain
this here:

<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=35376#txn-651534">https://rt.cpan.org/Ticket/Display.html?id=35376#txn-651534</a></span>

I believe the correct &#34;fix&#34; here is to use scrolling_list&#40;&#41; instead,
which works basically exactly like popup_menu&#40;&#41;, except it&#39;s designed
for multi-selects. 

My proposal to Lincoln is to remove the multi-select feature to
popup_menu&#40;&#41; that was added somewhat recently. If he accepts my
proposal, the change requested in this ticket will not go forward, so
work on this ticket is stalled for now. 

    Mark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;21&nbsp;21:55:26&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;21&nbsp;21:56:59&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Subject changed from &#39;Needs patch refinement: CGI.pm popup_menu multiple selects&#39; to &#39;Depends on RT#35376: CGI.pm popup_menu multiple selects&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;21&nbsp;22:01:05&nbsp;2009</span>
    <span class="description">randomcoder1 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">

On Fri Aug 21 21:55:23 2009, MARKSTOS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On further consideration, I think there&#39;s been some confusion about
&gt; popup_menu&#40;&#41; and multiple selects &#40;I became confused myself&#41;. I 
</div>explain
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; this here:
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=35376#txn-651534">https://rt.cpan.org/Ticket/Display.html?id=35376#txn-651534</a></span>
&gt; 
&gt; I believe the correct &#34;fix&#34; here is to use scrolling_list&#40;&#41; instead,
&gt; which works basically exactly like popup_menu&#40;&#41;, except it&#39;s designed
&gt; for multi-selects. 
&gt; 
&gt; My proposal to Lincoln is to remove the multi-select feature to
&gt; popup_menu&#40;&#41; that was added somewhat recently. If he accepts my
&gt; proposal, the change requested in this ticket will not go forward, so
&gt; work on this ticket is stalled for now. 
&gt; 
&gt;     Mark
</div>
Ok
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;21&nbsp;22:01:06&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;23&nbsp;22:04:43&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;23&nbsp;14:29:38&nbsp;2014</span>
    <span class="description">The RT System itself -  Queue changed from CGI.pm to CGI</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;01&nbsp;11:10:43&nbsp;2014</span>
    <span class="description">LEEJO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This issue has been copied to: <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/leejo/CGI.pm/issues/50">https://github.com/leejo/CGI.pm/issues/50</a></span> please take all future correspondence there.
This ticket will remain open but please do not reply here.
This ticket will be closed when the github issue is dealt with. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;01&nbsp;11:10:44&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;11&nbsp;14:05:51&nbsp;2014</span>
    <span class="description">LEEJO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have updated the popup_menu method to IGNORE the -multiple argument if passed. Use scrolling_list instead. I am not accepting any feature requests / updates to HTML functions in CGI.pm unless they are of critical nature.

Will go out in v4.03

Thanks,
Lee.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;11&nbsp;14:05:53&nbsp;2014</span>
    <span class="description">LEEJO [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
