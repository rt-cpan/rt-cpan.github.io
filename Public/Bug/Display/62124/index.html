<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #62124 for DBD-Oracle: null CLOB is returned as &#34;LobLocator&#34; and not as undef</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #62124 for DBD-Oracle: null CLOB is returned as &#34;LobLocator&#34; and not as undef</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=DBD-Oracle">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=DBD-Oracle">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=DBD-Oracle">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=DBD-Oracle">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/pythian/DBD-Oracle/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-Oracle">DBD-Oracle CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">62124</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=DBD-Oracle">DBD-Oracle</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
tomas.zemres [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10192-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
1.23</li>
<li>
1.25</li>
<li>
1.26</li>
</ul>
    </td>
  </tr>
  <tr id="CF-10193-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




test-lob.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/842856/436392/test-lob.pl">
Thu Oct 14 08:26:33 2010 (1.2k) by tomas.zemres [...] gmail.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=62124">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-842856" href="/Public/Bug/Display.html?id=62124#txn-842856">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;14&nbsp;08:26:33&nbsp;2010</span>
    <span class="description">tomas.zemres [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> null CLOB is returned as &#34;LobLocator&#34; and not as undef</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/842856/436391/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/436391">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 8.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">If I select NULL and empty CLOB from SELECT, DBD::Oracle retuns &#34;undef&#34; 
and empty LobLocator &#40;or string&#41; - it is correct.

But if I use output parameter, it returns LobLocator also for &#34;NULL&#34;:

my $lob1;                                                                                                                                                                               
my $sth = $dbh-&gt;prepare&#40;&#39;BEGIN :lob1 := NULL; END;&#39;, {ora_auto_lob =&gt; 
0}&#41;;                                                                                                
$sth-&gt;bind_param_inout&#40;&#34;:lob1&#34;, \$lob1, 0, { ora_type =&gt; ORA_CLOB }&#41;;

 $lob1 contains LobLocator &#40;or string&#41; and not undef;

Same bug is with {ora_auto_lob =&gt; 0} and also with {ora_auto_lob =&gt; 1}.

-------------------------
Testing script &#40;attached&#41;
-------------------------
#!/usr/bin/env perl                                                                                                                                                                     
                                                                                                                                                                                        
use DBD::Oracle &#39;:ora_types&#39;;                                                                                                                                                           
use DBI;                                                                                                                                                                                
use Data::Dumper;                                                                                                                                                                       
                                                                                                                                                                                        
print &#34;DBD::Oracle version: $DBD::Oracle::VERSION\n\n&#34;;                                                                                                                                 
                                                                                                                                                                                        
my &#40;$user, $passwd&#41; = split &#39;/&#39;, $ENV{ORACLE_USERID};                                                                                                                                   
my $dbh = DBI-&gt;connect&#40;$ENV{ORACLE_DSN}, $user, $passwd,                                                                                                                                
                    { AutoCommit =&gt; 0, RaiseError =&gt; 1, PrintError =&gt; 1 
}&#41;;                                                                                                             
                                                                                                                                                                                        
$dbh-&gt;do&#40;&#39;CREATE TABLE t1 &#40;a CLOB, b CLOB&#41;&#39;&#41;;                                                                                                                                           
$dbh-&gt;do&#40;&#39;INSERT INTO t1  VALUES &#40;NULL, EMPTY_CLOB&#40;&#41;&#41;&#39;&#41;;                                                                                                                                
$dbh-&gt;commit;                                                                                                                                                                           
                                                                                                                                                                                        
# Selecting NULL CLOB in cursor work ok                                                                                                                                                 
                                                                                                                                                                                        
my $sth = $dbh-&gt;prepare&#40;&#39;SELECT a, b FROM t1&#39;, {ora_auto_lob =&gt; 0}&#41;;                                                                                                                    
$sth-&gt;execute&#40;&#41;;                                                                                                                                                                        
my &#40;$a, $b&#41; = $sth-&gt;fetchrow_array&#40;&#41;;                                                                                                                                                   
print &#34;NULL CLOB in cursor: &#34;.Dumper&#40;$a&#41;;                                                                                                                                               
print &#34;EMPTY CLOB in cursor: &#34;.Dumper&#40;$b&#41;, &#34;\n&#34;;                                                                                                                                        
                                                                                                                                                                                        
# but getting NULL CLOB in bind parameter does not work                                                                                                                                 
                                                                                                                                                                                        
print &#34;With bind inout CLOB:\n&#34;;                                                                                                                                                        
                                                                                                                                                                                        
my $lob1;                                                                                                                                                                               
my $sth = $dbh-&gt;prepare&#40;&#39;BEGIN SELECT a INTO :lob1 FROM t1; END;&#39;, 
{ora_auto_lob =&gt; 0}&#41;;                                                                                                
$sth-&gt;bind_param_inout&#40;&#34;:lob1&#34;, \$lob1, 0, { ora_type =&gt; ORA_CLOB }&#41;;                                                                                                                   
$sth-&gt;execute&#40;&#41;;                                                                                                                                                                        
print &#34;NULL CLOB: &#34;.Dumper&#40;$lob1&#41;;                                                                                                                                                      
                                                                                                                                                                                        
my $lob2;                                                                                                                                                                               
my $sth = $dbh-&gt;prepare&#40;&#39;BEGIN SELECT b INTO :lob2 FROM t1; END;&#39;, 
{ora_auto_lob =&gt; 0}&#41;;                                                                                                
$sth-&gt;bind_param_inout&#40;&#34;:lob2&#34;, \$lob2, 0, { ora_type =&gt; ORA_CLOB }&#41;;                                                                                                                   
$sth-&gt;execute&#40;&#41;;                                                                                                                                                                        
print &#34;EMPTY CLOB: &#34;.Dumper&#40;$lob2&#41;, &#34;\n&#34;;                                                                                                                                               
                                                                                                                                                                                        
$dbh-&gt;do&#40;&#39;DROP TABLE t1&#39;&#41;; 
-------------------------------------------------------
-------------------------------------------------------
--- Script OUTPUT: ---
-------------------------------------------------------


DBD::Oracle version: 1.26

NULL CLOB in cursor: $VAR1 = undef;
EMPTY CLOB in cursor: $VAR1 = bless&#40; do{\&#40;my $o = 164233148&#41;}, 
&#39;OCILobLocatorPtr&#39; &#41;;

With bind inout CLOB:
NULL CLOB: $VAR1 = bless&#40; do{\&#40;my $o = 164232940&#41;}, &#39;OCILobLocatorPtr&#39; 
&#41;;
EMPTY CLOB: $VAR1 = bless&#40; do{\&#40;my $o = 164232748&#41;}, &#39;OCILobLocatorPtr&#39; 
&#41;;
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> test-lob.pl</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/842856/436392/test-lob.pl">Download test-lob.pl</a><br />
<span class="downloadcontenttype">text/x-perl 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/env perl

use DBD::Oracle &#39;:ora_types&#39;;
use DBI;
use Data::Dumper;

print &#34;DBD::Oracle version: $DBD::Oracle::VERSION\n\n&#34;;

my &#40;$user, $passwd&#41; = split &#39;/&#39;, $ENV{ORACLE_USERID};
my $dbh = DBI-&gt;connect&#40;$ENV{ORACLE_DSN}, $user, $passwd,
                    { AutoCommit =&gt; 0, RaiseError =&gt; 1, PrintError =&gt; 1 }&#41;;

$dbh-&gt;do&#40;&#39;CREATE TABLE t1 &#40;a CLOB, b CLOB&#41;&#39;&#41;;
$dbh-&gt;do&#40;&#39;INSERT INTO t1  VALUES &#40;NULL, EMPTY_CLOB&#40;&#41;&#41;&#39;&#41;;
$dbh-&gt;commit;

# Selecting NULL CLOB in cursor work ok

my $sth = $dbh-&gt;prepare&#40;&#39;SELECT a, b FROM t1&#39;, {ora_auto_lob =&gt; 0}&#41;;
$sth-&gt;execute&#40;&#41;;
my &#40;$a, $b&#41; = $sth-&gt;fetchrow_array&#40;&#41;;
print &#34;NULL CLOB in cursor: &#34;.Dumper&#40;$a&#41;;
print &#34;EMPTY CLOB in cursor: &#34;.Dumper&#40;$b&#41;, &#34;\n&#34;;

# but getting NULL CLOB in bind parameter does not work

print &#34;With bind inout CLOB:\n&#34;;

my $lob1;
my $sth = $dbh-&gt;prepare&#40;&#39;BEGIN SELECT a INTO :lob1 FROM t1; END;&#39;, {ora_auto_lob =&gt; 0}&#41;;
$sth-&gt;bind_param_inout&#40;&#34;:lob1&#34;, \$lob1, 0, { ora_type =&gt; ORA_CLOB }&#41;;
$sth-&gt;execute&#40;&#41;;
print &#34;NULL CLOB: &#34;.Dumper&#40;$lob1&#41;;

my $lob2;
my $sth = $dbh-&gt;prepare&#40;&#39;BEGIN SELECT b INTO :lob2 FROM t1; END;&#39;, {ora_auto_lob =&gt; 0}&#41;;
$sth-&gt;bind_param_inout&#40;&#34;:lob2&#34;, \$lob2, 0, { ora_type =&gt; ORA_CLOB }&#41;;
$sth-&gt;execute&#40;&#41;;
print &#34;EMPTY CLOB: &#34;.Dumper&#40;$lob2&#41;, &#34;\n&#34;;

$dbh-&gt;do&#40;&#39;DROP TABLE t1&#39;&#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-870392" href="/Public/Bug/Display.html?id=62124#txn-870392">#</a>      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;17&nbsp;15:08:32&nbsp;2010</span>
    <span class="description">champoux [...] pythian.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/870392/450763/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/450763">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">spent a good three hours on this for you so here is why I rejected it

In short the code is working as it should.  When working with in_out
params and lobs you have to give a hint to DBD::Oracle of what to expect
in this case a clob which you do correctly with your code below


my $sth = $dbh-&gt;prepare&#40;&#34;BEGIN SELECT a INTO :lob1 FROM t1; END;&#34;,
{ora_auto_lob =&gt; 0}&#41;;
$dbh-&gt;{dbd_verbose}=0;
$sth-&gt;bind_param_inout&#40;&#34;:lob1&#34;, \$lob1, 0,{ ora_type =&gt; ORA_CLOB }&#41;;


in the back end I have to init a OCILobLocator for it and that is being
returned.  

However and here is the funny thing about Oracle lobs a 

OCILobLocator can have two states

1&#41; initialized
2&#41; uninitialized

when you did your insert in you added 1 row with an uninitialized and
initialized lobs, and yes, you guessed it, EMPTY_CLOB&#40;&#41; will initialize
a lob as null or empty.  

so if you change your Dumps to the following

print &#34;NULL CLOB: &#34;.$dbh-&gt;ora_lob_is_init&#40;$lob1&#41;. &#34;\n&#34;;


print &#34;EMPTY CLOB: &#34;.$dbh-&gt;ora_lob_is_init&#40;$lob2&#41;. &#34;\n&#34;;

you will get 

NULL CLOB: 0
EMPTY CLOB: 1

which is correct.  

You have to remember that when you select a lob  DBD::Oracle does a
bunch of back end black-magic that takes the OCILobLocator 
&#40;actually just a pointer to it but the same thing&#41; and reads it returns
your values.

Using the BEGIN statement will drop you out of this auto mode and return
in this case the OCILobLocator. 

Sorry no way around this as once you add a BEGIN you are in PLSQL which
DBD::Oracle &#40;or oci for that matter&#41; has no control over.

Hope this helps you out.

Cheers
John Scoles

 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-870395" href="/Public/Bug/Display.html?id=62124#txn-870395">#</a>      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;17&nbsp;15:08:32&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-870396" href="/Public/Bug/Display.html?id=62124#txn-870396">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;17&nbsp;15:08:33&nbsp;2010</span>
    <span class="description">champoux [...] pythian.com -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.259924</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
