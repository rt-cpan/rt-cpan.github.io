<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #46582 for IO-Compress: Inflation Error when uncompressing a bzip2 file of XML data</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #46582 for IO-Compress: Inflation Error when uncompressing a bzip2 file of XML data</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=IO-Compress">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=IO-Compress">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=IO-Compress">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=IO-Compress">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/IO-Compress">IO-Compress CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">46582</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=IO-Compress">IO-Compress</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
nattiya [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-226778-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-226779-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=46582">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-612945" href="/Public/Bug/Display.html?id=46582#txn-612945">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;01&nbsp;09:19:56&nbsp;2009</span>
    <span class="description">nattiya [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Inflation Error when uncompressing a bzip2 file of XML data</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 1 Jun 2009 15:19:28 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-IO-Compress [...] rt.cpan.org, pmqs [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Nattiya Kanhabua &lt;nattiya [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/612945/311065/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/311065">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

I am trying to read contents from a bzip2 file of XML data by using
IO::Uncompress::Bunzip2 &#40;IO-Compress-2.019.tar.gz&#41;.  The system is
running v5.10.0 built for x86_64-linux-gnu-thread-multi. My program
codes are as follows:
-------------------------------------------------------------------------------------------------------------------------------------------------------
#!/usr/bin/perl

  use strict;
  use warnings;
  use IO::Uncompress::Bunzip2 qw&#40; $Bunzip2Error &#41;;

  my $file = shift&#40;@ARGV&#41; or die &#34;must specify a MediaWiki dump of the
current pages&#34;;

  my $buf;
  my $read;

  my $gz = new IO::Uncompress::Bunzip2 $file
        or die &#34;Cannot open $file: $Bunzip2Error\n&#34; ;

  print $read, &#34; &#34;, $buf, &#34;\n&#34;
        while &#40;$read= read&#40;$gz, $buf, 32768&#41;&#41; &gt; 0 ;

  die &#34;Error reading from $file: $Bunzip2Error\n&#34;
        if $read &lt; 0 ;

  $gz-&gt;close&#40;&#41; ;
-------------------------------------------------------------------------------------------------------------------------------------------------------

However, running the program failed and I got error messages like follows:
-------------------------------------------------------------------------------------------------------------------------------------------------------
  &lt;page&gt;
    &lt;title&gt;General Conference on Weights and Measures&lt;/title&gt;
    &lt;id&gt;7339&lt;/id&gt;
    &lt;revision&gt;
      &lt;id&gt;779001&lt;/id&gt;
      &lt;timestamp&gt;2003-02-16T16:18:30Z&lt;/timestamp&gt;
    &lt;/revision&gt;
Error reading from test.xml.bz2: Inflation Error: Data Error
$ 1;2c
-------------------------------------------------------------------------------------------------------------------------------------------------------

Please not that the XML data file is successfully parsed and read
using XML::Parser. So, I am not sure what I am missing in my code to
uncompress and read XML data. What does &#34;Inflation Error&#34; mean? Does
this &#34;1;2c&#34; have special meaning in Perl? Thank you for your kindly
help.

Nattiya
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-613028" href="/Public/Bug/Display.html?id=46582#txn-613028">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;01&nbsp;11:47:30&nbsp;2009</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/613028/311115/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/311115">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 265b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">A data error usually means the bzip2 file is corrupt. Can you test the 
integrity of the file with the commandline bzip2 command that should be 
available on your Linux box.

    bzip2 -t your-bzip2-file

If that shows the file is ok, can you get back to me?

Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-613029" href="/Public/Bug/Display.html?id=46582#txn-613029">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;01&nbsp;11:47:31&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-613131" href="/Public/Bug/Display.html?id=46582#txn-613131">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;01&nbsp;14:08:36&nbsp;2009</span>
    <span class="description">nattiya [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [rt.cpan.org #46582] Inflation Error when uncompressing a bzip2 file  of XML data</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 1 Jun 2009 20:08:16 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-IO-Compress [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Nattiya Kanhabua &lt;nattiya [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/613131/311183/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/311183">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Paul,

Thanks for your reply. Sorry if this email is a bit long because I
want to give you my findings.

I have tested &#39;bzip2 -t test.xml.bz2&#39; and I got nothing returned &#40;no
successful or error message&#41;. I guessed this corrupt check was OK
since I compressed it using &#39;bzip2&#39; command by myself. Moreover, when
I uncompressed the XML file and parse/read by XML::Parser module, it
was possible to manipulate the file until EOF. So, I am not sure if it
is the data problem.

I think read&#40;&#41; sub in IO::Uncompress::Bunzip2 actually works since it
can print out uncompressed XML contents as I showed in my first email.
However, the read&#40;&#41; as in &#39;while &#40;read&#40;&#41; &gt; 0&#41;;&#39; stops after some
iterations &#40;always at the same position, e.g. line#40 000, in the
bzip2 XML file before EOF&#41; and I got the message like  &#39;Error reading
from test.xml.bz2: Inflation Error: Data Error&#39;.

To make sure that it was not because of data contents, I created
another XML file starting from the line, e.g. line#40 000, where the
program stopped &#40;deleted previously successfully read&#40;&#41; &#41; and
compressed &#40;bzip2&#41; it. The read&#40;&#41; sub in IO::Uncompress::Bunzip2
worked like the first case where it stopped at some point in the file
before EOF, and an interesting is that it processed exactly the same
size of an XML input. So, I think error in data contents can be
forgotten.

I am very new to perl but I tried to debug and I found where in your
code it is actually stopped. The program exited from Base.pm at line
862 when $status returned from uncompr&#40;&#41; were as follows:
-------------------------------------------------------------------------
STATUS_ERROR = 1
self-&gt;{Uncomp}{Error} = Inflation Error: Data Error
self-&gt;{Uncomp}{ErrorNo} = Data Error
-------------------------------------------------------------------------
$status returned from uncompr&#40;&#41; is in Adapter/Bzip2.pm at the line 4:
$status = $inf-&gt;bzinflate&#40;$from, $to&#41;;.

I am wondering if the size of a compressed file causes a problem to
bzinflate&#40;$from, $to&#41;? I tested with the size of 2MB only &#40;25MB of
uncompressed size&#41;, but my real data input will be about 150GB...
Thank you very much for your kindly help.

Nattiya



On Mon, Jun 1, 2009 at 5:47 PM, Paul Marquess via RT
&lt;bug-IO-Compress@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=46582">https://rt.cpan.org/Ticket/Display.html?id=46582</a></span> &gt;
&gt;
&gt; A data error usually means the bzip2 file is corrupt. Can you test the
&gt; integrity of the file with the commandline bzip2 command that should be
&gt; available on your Linux box.
&gt;
&gt; Â  Â bzip2 -t your-bzip2-file
&gt;
&gt; If that shows the file is ok, can you get back to me?
&gt;
&gt; Paul
&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-613157" href="/Public/Bug/Display.html?id=46582#txn-613157">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;01&nbsp;15:46:51&nbsp;2009</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/613157/311195/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/311195">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 76b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">could you email me an example bzip file? Use the pmqs@cpan.org address

Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-613196" href="/Public/Bug/Display.html?id=46582#txn-613196">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;01&nbsp;18:21:24&nbsp;2009</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/613196/311213/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/311213">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 153b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the file - I can confirm that the file is fine, but my module
does think there is an error with it. Will investigate &#38; get back to you.

Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-613198" href="/Public/Bug/Display.html?id=46582#txn-613198">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;01&nbsp;18:49:33&nbsp;2009</span>
    <span class="description">nattiya [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [rt.cpan.org #46582] Inflation Error when uncompressing a bzip2 file  of XML data</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 2 Jun 2009 00:49:14 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-IO-Compress [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Nattiya Kanhabua &lt;nattiya [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/613198/311215/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/311215">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 368b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for your time and kindly response.

Nattiya

On Tue, Jun 2, 2009 at 12:21 AM, Paul Marquess via RT
&lt;bug-IO-Compress@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=46582">https://rt.cpan.org/Ticket/Display.html?id=46582</a></span> &gt;
&gt;
&gt; Thanks for the file - I can confirm that the file is fine, but my module
&gt; does think there is an error with it. Will investigate &#38; get back to you.
&gt;
&gt; Paul
&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-613542" href="/Public/Bug/Display.html?id=46582#txn-613542">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;02&nbsp;09:06:23&nbsp;2009</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/613542/311414/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/311414">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 539b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Nattiya,

I have a fix available for the problem you reported. I&#39;ll post an 
update onto CPAN in the next few days. If you want to tryout the fix, 
here is what you need to change.

Run Perl -V to see where your perl library files are installed - they 
are probably under /usr/lib/perl5. Now find the file

 IO/Uncompress/Base.pm


goto line 857 and change this line 

  $self-&gt;pushBack&#40;$temp_buf&#41; if $beforeC_len != length $temp_buf;

to this

  $self-&gt;pushBack&#40;$temp_buf&#41; ;

If you have any further problems, please get back to me.

Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-613665" href="/Public/Bug/Display.html?id=46582#txn-613665">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;02&nbsp;13:48:56&nbsp;2009</span>
    <span class="description">nattiya [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [rt.cpan.org #46582] Inflation Error when uncompressing a bzip2 file  of XML data</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 2 Jun 2009 19:48:34 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-IO-Compress [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Nattiya Kanhabua &lt;nattiya [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/613665/311496/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/311496">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 242b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Paul,

It is working well so far. Now I am testing with the real data of
160GB compressed where it will take a while to finish. I might get
back to you if I notify some other bugs. Thank you very much for your
kindly help.

Bests,
Nattiya
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-613773" href="/Public/Bug/Display.html?id=46582#txn-613773">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;02&nbsp;18:17:21&nbsp;2009</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/613773/311562/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/311562">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 110b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Nattiya,

good to hear it is working now. PLease get back to me if you encounter
any problems.

cheers
Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-614087" href="/Public/Bug/Display.html?id=46582#txn-614087">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;03&nbsp;13:49:43&nbsp;2009</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/614087/311757/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/311757">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 92b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Nattiya,

just uploaded a new version of IO-Compress to CPAN with the fix included.

Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-614123" href="/Public/Bug/Display.html?id=46582#txn-614123">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;03&nbsp;16:26:39&nbsp;2009</span>
    <span class="description">nattiya [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46582] Inflation Error when uncompressing a bzip2  file of XML data</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 3 Jun 2009 22:26:20 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-IO-Compress [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Nattiya Kanhabua &lt;nattiya [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/614123/311772/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/311772">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Paul,

Thank you for the updated version. I have questions related to
functionality, not bug. If you could not answer here because it is out
of your scope, then I understand :&#41;

It is about scalability/efficiency because of my huge amount of data.
Basically, I want to use 2-3 computers working in parallel to
uncompress the same file and hopefully this will faster the process.
So, I need to use seek&#40;&#41; into a file at a specified position --
without uncompress along the way. The current seek&#40;&#41; in your module
sequentially reads data and uncompresses it even the part before the
specified position. This might be useful in some cases, but for my
case, it just waste CPU time uncompressing unwanted data &#40;data before
a seeking position&#41;.

I do not want to disturb you or harm your code, but I might need to
change something to optimize it to my task, In order to better
understanding your code, I would like to ask you as follows:

1. What is sub smartSeek&#40;&#41; in Base.pm? Is it for this purpose I
mention above -- seek&#40;&#41; to the position and ignore uncompressing?
2. What is the maximum value of BlockSize &#40;let say I have more than
10GB of memory&#41;? I would like to set it as much as possible to faster
uncompress process.

As you are an expert on Compression/Uncompression, I hope that you can
help me answering so I can work on my own. Thank you for your kindly
response/time.

Bests,
Nattiya
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-614249" href="/Public/Bug/Display.html?id=46582#txn-614249">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;04&nbsp;03:32:53&nbsp;2009</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/614249/311838/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/311838">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jun 03 16:26:39 2009, nattiya@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Paul,
&gt; 
&gt; Thank you for the updated version. I have questions related to
&gt; functionality, not bug. If you could not answer here because it is out
&gt; of your scope, then I understand :&#41;
</div>
No problem.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It is about scalability/efficiency because of my huge amount of data.
&gt; Basically, I want to use 2-3 computers working in parallel to
&gt; uncompress the same file and hopefully this will faster the process.
&gt; So, I need to use seek&#40;&#41; into a file at a specified position --
&gt; without uncompress along the way. The current seek&#40;&#41; in your module
&gt; sequentially reads data and uncompresses it even the part before the
&gt; specified position. This might be useful in some cases, but for my
&gt; case, it just waste CPU time uncompressing unwanted data &#40;data before
&gt; a seeking position&#41;.
</div>
For a lot of compressed data formats the only way to seek to a specific 
offset is to uncompress the file sequentially until the uncompressed 
offset is reached. ... but see at the end for a possible solution.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I do not want to disturb you or harm your code, but I might need to
&gt; change something to optimize it to my task, In order to better
&gt; understanding your code, I would like to ask you as follows:
&gt; 
&gt; 1. What is sub smartSeek&#40;&#41; in Base.pm? Is it for this purpose I
&gt; mention above -- seek&#40;&#41; to the position and ignore uncompressing?
</div>
Don&#39;t bother with that - it can only ever work by uncompressing the 
file to carry out the seek operation.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 2. What is the maximum value of BlockSize &#40;let say I have more than
&gt; 10GB of memory&#41;? I would like to set it as much as possible to faster
&gt; uncompress process.
</div>
Here is a quote from the bzip man page &#40;www.bzip.org&#41;

     Compression and decompression speed are virtually 
     unaffected by block size.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As you are an expert on Compression/Uncompression, I hope that you can
&gt; help me answering so I can work on my own. Thank you for your kindly
&gt; response/time.
</div>
You are using bzip2, which uses a block file structure. This means that 
you can chop the file into parts - the standard bzip2 command line 
program comes with a utility called  bzip2recover - this will split the 
bzip2 file into chunks at the block boundaries.

The big problem with doing this is if the thing you want to find in the 
compressed file spans a block boundary. Or in your case if you are 
attempting to parse an XML document. 

Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-614309" href="/Public/Bug/Display.html?id=46582#txn-614309">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;04&nbsp;08:06:34&nbsp;2009</span>
    <span class="description">nattiya [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46582] Inflation Error when uncompressing a bzip2  file of XML data</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 4 Jun 2009 14:06:15 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-IO-Compress [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Nattiya Kanhabua &lt;nattiya [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/614309/311876/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/311876">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 378b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Paul,

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You are using bzip2, which uses a block file structure. This means that
&gt; you can chop the file into parts - the standard bzip2 command line
&gt; program comes with a utility called Â bzip2recover - this will split the
&gt; bzip2 file into chunks at the block boundaries.
</div>
I am appreciated your very good suggestion and I will try to work out on it :&#41;

Thank you!
Nattiya
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-714598" href="/Public/Bug/Display.html?id=46582#txn-714598">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;03&nbsp;10:17:12&nbsp;2010</span>
    <span class="description">pmqs [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.578093</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
