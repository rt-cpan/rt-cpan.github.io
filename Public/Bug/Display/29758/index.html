<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #29758 for ExtUtils-PkgConfig: Provide diagnostics when packages can&#39;t be found</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #29758 for ExtUtils-PkgConfig: Provide diagnostics when packages can&#39;t be found</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=ExtUtils-PkgConfig">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=ExtUtils-PkgConfig">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=ExtUtils-PkgConfig">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=ExtUtils-PkgConfig">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/ExtUtils-PkgConfig">ExtUtils-PkgConfig CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">29758</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=ExtUtils-PkgConfig">ExtUtils-PkgConfig</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ANDK [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-12518-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-12519-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




diagnostics-ii.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/368774/167330/diagnostics-ii.patch">
Sun Oct 07 13:51:16 2007 (619b) by kaffeetisch [...] gmx.de
</a>
</font></li>
</ul>


diagnostics.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/368574/167230/diagnostics.patch">
Sat Oct 06 18:06:59 2007 (1002b) by kaffeetisch [...] gmx.de
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=29758">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-367663" href="/Public/Bug/Display.html?id=29758#txn-367663">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;04&nbsp;00:13:32&nbsp;2007</span>
    <span class="description">ANDK [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> shared bug between PkgConfig and Gtk2</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/367663/166763/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/166763">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 492b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Gtk2 uses ExtUtils::PkgConfig which in turn uses

    system &#34;pkg-config --exists --silence-errors \&#34;$pkg\&#34;&#34; &#41;

With this call any errors that might occur are hidden from the user,
Makefile.PL just dies and the user has to go digging.

In my case some libraries like xinerama and xmu which I had never heard
of before had to be installed. That&#39;s some cheap information that should
be presented to the user instead of leaving him without options to step
through Makefile.PL with the debugger.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-368574" href="/Public/Bug/Display.html?id=29758#txn-368574">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;06&nbsp;18:06:59&nbsp;2007</span>
    <span class="description">kaffeetisch [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> scott [...] asofyet.org</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/368574/167227/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/167227">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 381b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Oct 04 00:13:32 2007, ANDK wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Gtk2 uses ExtUtils::PkgConfig which in turn uses
&gt; 
&gt;     system &#34;pkg-config --exists --silence-errors \&#34;$pkg\&#34;&#34; &#41;
&gt; 
&gt; With this call any errors that might occur are hidden from the user,
&gt; Makefile.PL just dies and the user has to go digging.
</div>
You&#39;re right.  Here&#39;s a patch that provides some diagnostics.

muppet, what do you think?
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/368574/167230/diagnostics.patch">Download diagnostics.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1002b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Index: lib/ExtUtils/PkgConfig.pm
===================================================================
RCS file: /cvsroot/gtk2-perl/gtk2-perl-xs/ExtUtils-PkgConfig/lib/ExtUtils/PkgConfig.pm,v
retrieving revision 1.17
diff -u -d -p -r1.17 PkgConfig.pm
--- lib/ExtUtils/PkgConfig.pm	24 Sep 2006 20:33:51 -0000	1.17
+++ lib/ExtUtils/PkgConfig.pm	6 Oct 2007 22:02:45 -0000
@@ -90,11 +90,17 @@ sub find {
 	{
 		if&#40; @pkgs &gt; 1 &#41;
 		{
+			warn &#34;*** pkg-config encountered these errors when trying \&#34;$pkgs[-1]\&#34;:\n&#34;;
+			system &#34;pkg-config --print-errors \&#34;$pkgs[-1]\&#34;&#34;;
+
 			croak &#39;*** can not find package for any of &#40;&#39;.join&#40;&#39;, &#39;,@pkgs&#41;.&#34;&#41;\n&#34;
 			    . &#34;*** check that one of them is properly installed and available in PKG_CONFIG_PATH\n&#34;;
 		}
 		else
 		{
+			warn &#34;*** pkg-config encountered these errors:\n&#34;;
+			system &#34;pkg-config --print-errors \&#34;$pkgs[0]\&#34;&#34;;
+
 			croak &#34;*** can not find package $pkgs[0]\n&#34;
 			    . &#34;*** check that it is properly installed and available in PKG_CONFIG_PATH\n&#34;;
 		}
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-368575" href="/Public/Bug/Display.html?id=29758#txn-368575">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;06&nbsp;18:07:04&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-368579" href="/Public/Bug/Display.html?id=29758#txn-368579">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;06&nbsp;18:08:23&nbsp;2007</span>
    <span class="description">kaffeetisch [...] gmx.de -  Subject changed from &#39;shared bug between PkgConfig and Gtk2&#39; to &#39;Provide diagnostics when packages can&#39;t be found&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-368580" href="/Public/Bug/Display.html?id=29758#txn-368580">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;06&nbsp;18:08:51&nbsp;2007</span>
    <span class="description">kaffeetisch [...] gmx.de -  Queue changed from Gtk2 to ExtUtils-PkgConfig</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-368620" href="/Public/Bug/Display.html?id=29758#txn-368620">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;07&nbsp;01:01:38&nbsp;2007</span>
    <span class="description">scott [...] asofyet.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #29758] shared bug between PkgConfig and Gtk2 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 7 Oct 2007 01:01:28 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Gtk2 [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> muppet &lt;scott [...] asofyet.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/368620/167255/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/167255">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Oct 6, 2007, at 6:07 PM, Torsten SchÃ¶nfeld via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=29758">http://rt.cpan.org/Ticket/Display.html?id=29758</a></span> &gt;
&gt;
&gt; On Thu Oct 04 00:13:32 2007, ANDK wrote:
&gt;
<div class="message-stanza open">&gt;&gt; Gtk2 uses ExtUtils::PkgConfig which in turn uses
&gt;&gt;
&gt;&gt;     system &#34;pkg-config --exists --silence-errors \&#34;$pkg\&#34;&#34; &#41;
&gt;&gt;
&gt;&gt; With this call any errors that might occur are hidden from the user,
&gt;&gt; Makefile.PL just dies and the user has to go digging.
</div>&gt;
&gt; You&#39;re right.  Here&#39;s a patch that provides some diagnostics.
&gt;
&gt; muppet, what do you think?
</div>
Hrm.

With the patch, if there&#39;s more than one package &#40;@pkgs &gt; 1&#41;, you&#39;ll  
only show the error messages for the last one.

The --exists flag seems to imply --silence-errors by default.  The  
point of using --exists is to find out whether the thing exists or  
not, which it returns through the program&#39;s exit status.   
ExtUtils::PkgConfig::find&#40;&#41; allows you to search for any of a list of  
modules, intended for something like determining whether you have  
foo-1.0 or foo-2.0 installed.  Unfortunately, pkg-config takes any  
error in searching for the package to mean that it doesn&#39;t exist, and  
won&#39;t print anything.

For example, the not-too uncommon case that you have foo installed,  
but not its dependency bar:

$ echo &#34;Requires: bar&#34; &gt; foo.pc
$ PKG_CONFIG_PATH=. pkg-config --exists foo || echo no
no
$ PKG_CONFIG_PATH=. pkg-config --exists --print-errors foo
Package bar was not found in the pkg-config search path.
Perhaps you should add the directory containing `bar.pc&#39;
to the PKG_CONFIG_PATH environment variable
Package &#39;bar&#39;, required by &#39;./foo.pc&#39;, not found

Here, the quiet mode is too quiet, and the verbose mode is too verbose.

In most cases, we&#39;ll be looking for one package, and if we&#39;re looking  
for more than one package, they&#39;ll be in order of preference.  If we  
can&#39;t find any of them, things are bad.  But there&#39;s also the case  
that the one we preferred, the first, is installed, but had a parse  
error as shown above; the patch will not help diagnose that.


I see two options:

1.  Use $errs = `pkg-config --exists --print-errors --errors-to- 
stdout $pkg` to trap the error messages, mangle them, and print  
them.  I don&#39;t like this option, because if the language is  
different, the messages may be translated, and then we&#39;re screwed.

2.  Use --print-errors instead of --silence-errors on the --exists  
calls, to dump the errors immediately.  This will have potential to  
generate lots of unwanted spew, but, well, what can you do?


I say go for 2.


In either case, the logic in find&#40;&#41;&#39;s &#34;i couldn&#39;t find anything at  
all&#34; section should just loop over all of the failed packages instead  
of trying to special-case the only-one case for grammar.


--
One, two, free, four, five, six, sebben, eight, nine, ten, elebben,  
twull, fourteen, sickteen, sebbenteen, eightteen, elebbenteen,  
fiffeen, elebbenteen!
   -- Zella, aged three, counting to twenty.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-368774" href="/Public/Bug/Display.html?id=29758#txn-368774">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;07&nbsp;13:51:16&nbsp;2007</span>
    <span class="description">kaffeetisch [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/368774/167327/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/167327">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Oct 07 01:01:38 2007, scott@asofyet.org wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I see two options:
&gt; 
&gt; 1.  Use $errs = `pkg-config --exists --print-errors --errors-to- 
&gt; stdout $pkg` to trap the error messages, mangle them, and print  
&gt; them.  I don&#39;t like this option, because if the language is  
&gt; different, the messages may be translated, and then we&#39;re screwed.
&gt; 
&gt; 2.  Use --print-errors instead of --silence-errors on the --exists  
&gt; calls, to dump the errors immediately.  This will have potential to  
&gt; generate lots of unwanted spew, but, well, what can you do?
&gt; 
&gt; 
&gt; I say go for 2.
</div>
Sounds good.  Patch attached.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In either case, the logic in find&#40;&#41;&#39;s &#34;i couldn&#39;t find anything at  
&gt; all&#34; section should just loop over all of the failed packages instead  
&gt; of trying to special-case the only-one case for grammar.
</div>
Well, the difference between the two cases is not only gramatical.  If
there is more than one alternative listed, the error messages correctly
says that none could be found and that the user should install _one_ of
them.  When you just loop over the packages, the user will effectively
be told to install all of them.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/368774/167330/diagnostics-ii.patch">Download diagnostics-ii.patch</a><br />
<span class="downloadcontenttype">text/x-diff 619b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Index: PkgConfig.pm
===================================================================
RCS file: /cvsroot/gtk2-perl/gtk2-perl-xs/ExtUtils-PkgConfig/lib/ExtUtils/PkgConfig.pm,v
retrieving revision 1.17
diff -u -d -p -r1.17 PkgConfig.pm
--- PkgConfig.pm	24 Sep 2006 20:33:51 -0000	1.17
+++ PkgConfig.pm	7 Oct 2007 17:46:15 -0000
@@ -80,7 +80,7 @@ sub find {
 
 	# try as many pkg parameters are there are arguments left on stack
 	while&#40; $pkg and 
-	       system &#34;pkg-config --exists --silence-errors \&#34;$pkg\&#34;&#34; &#41;
+	       system &#34;pkg-config --exists --print-errors \&#34;$pkg\&#34;&#34; &#41;
 	{
 		push @pkgs, $pkg;
 		$pkg = shift;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-372699" href="/Public/Bug/Display.html?id=29758#txn-372699">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;18&nbsp;12:13:38&nbsp;2007</span>
    <span class="description">kaffeetisch [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> bug-Gtk2 [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #29758] shared bug between PkgConfig and Gtk2</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 18 Oct 2007 18:13:09 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> muppet &lt;scott [...] asofyet.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Torsten Schoenfeld &lt;kaffeetisch [...] gmx.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/372699/169594/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/169594">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 446b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun, 2007-10-07 at 01:01 -0400, muppet wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I say go for 2.
&gt; 
&gt; 
&gt; In either case, the logic in find&#40;&#41;&#39;s &#34;i couldn&#39;t find anything at  
&gt; all&#34; section should just loop over all of the failed packages instead  
&gt; of trying to special-case the only-one case for grammar.
</div>
It just occurred to me that you probably haven&#39;t seen my reply, since I
forgot to put you in CC:
&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=29758">http://rt.cpan.org/Ticket/Display.html?id=29758</a></span>&gt;

-- 
Bye,
-Torsten
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-372907" href="/Public/Bug/Display.html?id=29758#txn-372907">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;18&nbsp;21:39:27&nbsp;2007</span>
    <span class="description">scott [...] asofyet.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> bug-Gtk2 [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #29758] shared bug between PkgConfig and Gtk2</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 18 Oct 2007 21:39:40 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Torsten Schoenfeld &lt;kaffeetisch [...] gmx.de&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> muppet &lt;scott [...] asofyet.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/372907/169720/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/169720">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 437b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Oct 18, 2007, at 12:13 PM, Torsten Schoenfeld wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It just occurred to me that you probably haven&#39;t seen my reply,  
&gt; since I
&gt; forgot to put you in CC:
&gt; &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=29758">http://rt.cpan.org/Ticket/Display.html?id=29758</a></span>&gt;
</div>
I hadn&#39;t, thanks.


Patch looks good to me.


--
The stereo, playing the Beastie Boys&#39; &#34;Rhymin&#39; and Stealin&#39;&#34;:  &#34;I&#39;ll  
steal your girlie like I stole your bike!&#34;

Elysse:  &#34;You mean, take off the chain and ride away?&#34;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-373261" href="/Public/Bug/Display.html?id=29758#txn-373261">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;19&nbsp;13:30:21&nbsp;2007</span>
    <span class="description">kaffeetisch [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/373261/169849/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/169849">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 259b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Oct 18 21:39:27 2007, scott@asofyet.org wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Patch looks good to me.
</div>
Committed.  I can&#39;t roll a release just yet since I lack the proper CPAN
namespace permissions, but I asked Marc and Ross to either do it
themselves or to make me co-maintainer.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-373587" href="/Public/Bug/Display.html?id=29758#txn-373587">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;20&nbsp;08:54:33&nbsp;2007</span>
    <span class="description">kaffeetisch [...] gmx.de -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 1.946291</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
