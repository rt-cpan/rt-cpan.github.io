<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #102637 for Finance-Quote: currency missing in yahoo_json</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #102637 for Finance-Quote: currency missing in yahoo_json</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Finance-Quote">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Finance-Quote">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Finance-Quote">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Finance-Quote">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Finance-Quote">Finance-Quote CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">102637</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">10 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Finance-Quote">Finance-Quote</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">eco [...] ecocode.net
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
hemanshusubs [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-13576-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-13577-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=102637">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1471235" href="/Public/Bug/Display.html?id=102637#txn-1471235">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;08&nbsp;06:56:03&nbsp;2015</span>
    <span class="description">hemanshusubs [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> currency missing in yahoo_json</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 8 Mar 2015 16:25:44 +0530</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-finance-quote [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Hemanshu Kumar &lt;hemanshusubs [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1471235/783299/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/783299">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 993b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi

I am using Finance::Quote version 1.37 with GnuCash 2.6.5 on a Mac OS X 10.10.2 machine.

I am trying to obtain stock quotes using yahoo_json. However, I always get the currency as “*missing*” and the quote is unusable by GnuCash. As an example, here is the output from  $gnc-fq-dump yahoo_json ITC.NS

Finance::Quote fields Gnucash uses:
    symbol: ITC.NS               &lt;=== required
      date: 03/05/2015           &lt;=== required
  currency: ** missing **        &lt;=== required
      last: 346.250000           &lt;=\       
       nav:                      &lt;=== one of these
     price:                      &lt;=/        
  timezone:                      &lt;=== optional

** This stock quote cannot be used by gnu cash!!

This is not limited to Indian stock quotes. I tried getting the quote for AMZN and AAPL, and get similar results. Please resolve this asap!

Thanks for your help!

regards
Hemanshu Kumar
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1471235/783300/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/783300">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.9k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1471376" href="/Public/Bug/Display.html?id=102637#txn-1471376">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;08&nbsp;22:13:48&nbsp;2015</span>
    <span class="description">blm [...] woodheap.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1471376/783398/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/783398">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 381b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Is it possible for you to use something other than yahoo_json?  There is no currency field produced by yahoo_json

You can see here what it gives us:

<span class="clickylink"><a target="new" rel="nofollow" href="http://finance.yahoo.com/webservice/v1/symbols/ITC.NS/quote?format=json">http://finance.yahoo.com/webservice/v1/symbols/ITC.NS/quote?format=json</a></span>


name: &#34;ITC LTD-DEP SETT&#34;,
price: &#34;346.250000&#34;,
symbol: &#34;ITC.NS&#34;,
ts: &#34;1425549599&#34;,
type: &#34;equity&#34;,
utctime: &#34;2015-03-05T09:59:59+0000&#34;,
volume: &#34;13666265&#34;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1471377" href="/Public/Bug/Display.html?id=102637#txn-1471377">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;08&nbsp;22:13:49&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1471451" href="/Public/Bug/Display.html?id=102637#txn-1471451">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;09&nbsp;06:36:02&nbsp;2015</span>
    <span class="description">eco [...] ecocode.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1471451/783430/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/783430">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 964b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">yahoo_json has the added value that it works for probably all symbols available through yahoo website by using a supported api. In example, it will return quotes for .NS and .BO markets, which other yahoo_sources don&#39;t &#40;I&#39;ve also written another yahoo module &#34;yahoo_yql&#34; which queries the YQL for quotes, but that also doesn&#39;t support .NS nor .BO&#41;. Backside of yahoo_json is that it only returns very limited info, not including the currency.

For the moment yahoo_json doesn&#39;t return a currency and leaves that to the user. As GnuCash seems to need one, we can think of returning currencies in a hardcoded way. For example, when there is no suffix as in YHOO, MSFT, AAPL etc we can return &#39;USD&#39;. For suffixes .BR and .PA we can return &#39;EUR&#39; and we can also add some others... But there might be exceptions for which the returned currency will then be wrong. Although I don&#39;t know exceptions..

I&#39;ll leave this open for the moment to read comments/ideas.

-- 
Erik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1471767" href="/Public/Bug/Display.html?id=102637#txn-1471767">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;10&nbsp;00:00:13&nbsp;2015</span>
    <span class="description">hemanshusubs [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102637] currency missing in yahoo_json</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 10 Mar 2015 09:23:03 +0530</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-finance-quote [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Hemanshu Kumar &lt;hemanshusubs [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1471767/783624/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/783624">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ben,

Until about two years ago, yahoo and yahoo_asa used to work fine for India. Then Yahoo stopped supporting the service for Indian stock exchanges, and things have been in a limbo ever since.

There are one or two user-created alternatives; see for instance <span class="clickylink"><a target="new" rel="nofollow" href="http://maruhgar.blogspot.in/2013/11/updating-indian-stock-exchange-data-in.html">http://maruhgar.blogspot.in/2013/11/updating-indian-stock-exchange-data-in.html</a></span>

However, there are at least a couple issues with this:

&#40;a&#41; I’ve had some problems retrieving quotes using those modules — they seem to fail randomly, and pick up the wrong security in some instances &#40;see my comment at the end of that blog post page&#41;
&#40;b&#41; they disappear when I update GnuCash and/or Finance::Quote — not nice for a simple end-user like me with zero perl skills.



From: Ben Marsh via RT &lt;bug-finance-quote@rt.cpan.org&gt;
Reply: bug-finance-quote@rt.cpan.org &lt;bug-finance-quote@rt.cpan.org&gt;&gt;
Date: 9 March 2015 at 7:43:58 am
To: hemanshusubs@gmail.com &lt;hemanshusubs@gmail.com&gt;&gt;
Subject:  [rt.cpan.org #102637] currency missing in yahoo_json  

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102637">https://rt.cpan.org/Ticket/Display.html?id=102637</a></span> &gt;  

Is it possible for you to use something other than yahoo_json? There is no currency field produced by yahoo_json  

You can see here what it gives us:  

<span class="clickylink"><a target="new" rel="nofollow" href="http://finance.yahoo.com/webservice/v1/symbols/ITC.NS/quote?format=json">http://finance.yahoo.com/webservice/v1/symbols/ITC.NS/quote?format=json</a></span>  


name: &#34;ITC LTD-DEP SETT&#34;,  
price: &#34;346.250000&#34;,  
symbol: &#34;ITC.NS&#34;,  
ts: &#34;1425549599&#34;,  
type: &#34;equity&#34;,  
utctime: &#34;2015-03-05T09:59:59+0000&#34;,  
volume: &#34;13666265&#34;  
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1471767/783625/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/783625">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.8k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1471849" href="/Public/Bug/Display.html?id=102637#txn-1471849">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;10&nbsp;05:11:55&nbsp;2015</span>
    <span class="description">blm [...] woodheap.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1471849/783670/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/783670">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Mar 09 06:36:02 2015, ecocode wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; yahoo_json has the added value that it works for probably all symbols
&gt; available through yahoo website by using a supported api. In example,
&gt; it will return quotes for .NS and .BO markets, which other
&gt; yahoo_sources don&#39;t &#40;I&#39;ve also written another yahoo module
&gt; &#34;yahoo_yql&#34; which queries the YQL for quotes, but that also doesn&#39;t
&gt; support .NS nor .BO&#41;. Backside of yahoo_json is that it only returns
&gt; very limited info, not including the currency.
&gt; 
&gt; For the moment yahoo_json doesn&#39;t return a currency and leaves that to
&gt; the user. As GnuCash seems to need one, we can think of returning
&gt; currencies in a hardcoded way. For example, when there is no suffix as
&gt; in YHOO, MSFT, AAPL etc we can return &#39;USD&#39;. For suffixes .BR and .PA
&gt; we can return &#39;EUR&#39; and we can also add some others... But there might
&gt; be exceptions for which the returned currency will then be wrong.
&gt; Although I don&#39;t know exceptions..
&gt; 
&gt; I&#39;ll leave this open for the moment to read comments/ideas.
</div>
Thats a possiblity.  You know more than I.  .NS is National Stock Exchange of India? I was going to say that since the data comes from Yahoo USA domain, the prices would be in USD. I would probably be wrong.

We could hard code currencies for the suffices we know and add more as we figure out what currencies they should be.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1471857" href="/Public/Bug/Display.html?id=102637#txn-1471857">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;10&nbsp;05:17:09&nbsp;2015</span>
    <span class="description">hemanshusubs [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102637] currency missing in yahoo_json</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 10 Mar 2015 14:46:51 +0530</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-finance-quote [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Hemanshu Kumar &lt;hemanshusubs [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1471857/783674/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/783674">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">India has two principal stock exchanges: National Stock Exchange of India and the Bombay Stock Exchange. On Yahoo, the symbols for securities traded on these exchanges have the extensions .NS and .BO, respectively.

And no, the numbers reported by yahoo_json for such securities are in Indian rupees &#40;INR&#41; not USD.

From: Ben Marsh via RT &lt;bug-finance-quote@rt.cpan.org&gt;
Reply: bug-finance-quote@rt.cpan.org &lt;bug-finance-quote@rt.cpan.org&gt;&gt;
Date: 10 March 2015 at 2:42:05 pm
To: hemanshusubs@gmail.com &lt;hemanshusubs@gmail.com&gt;&gt;
Subject:  [rt.cpan.org #102637] currency missing in yahoo_json  

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102637">https://rt.cpan.org/Ticket/Display.html?id=102637</a></span> &gt;  

On Mon Mar 09 06:36:02 2015, ecocode wrote:  
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; yahoo_json has the added value that it works for probably all symbols  
&gt; available through yahoo website by using a supported api. In example,  
&gt; it will return quotes for .NS and .BO markets, which other  
&gt; yahoo_sources don&#39;t &#40;I&#39;ve also written another yahoo module  
&gt; &#34;yahoo_yql&#34; which queries the YQL for quotes, but that also doesn&#39;t  
&gt; support .NS nor .BO&#41;. Backside of yahoo_json is that it only returns  
&gt; very limited info, not including the currency.  
&gt;  
&gt; For the moment yahoo_json doesn&#39;t return a currency and leaves that to  
&gt; the user. As GnuCash seems to need one, we can think of returning  
&gt; currencies in a hardcoded way. For example, when there is no suffix as  
&gt; in YHOO, MSFT, AAPL etc we can return &#39;USD&#39;. For suffixes .BR and .PA  
&gt; we can return &#39;EUR&#39; and we can also add some others... But there might  
&gt; be exceptions for which the returned currency will then be wrong.  
&gt; Although I don&#39;t know exceptions..  
&gt;  
&gt; I&#39;ll leave this open for the moment to read comments/ideas.  
</div>
Thats a possiblity. You know more than I. .NS is National Stock Exchange of India? I was going to say that since the data comes from Yahoo USA domain, the prices would be in USD. I would probably be wrong.  

We could hard code currencies for the suffices we know and add more as we figure out what currencies they should be.  
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1471857/783675/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/783675">with headers</a>
<br />
<span class="downloadcontenttype">text/html 3.2k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1528024" href="/Public/Bug/Display.html?id=102637#txn-1528024">#</a>      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;22&nbsp;04:42:36&nbsp;2015</span>
    <span class="description">eco [...] ecocode.net -  Correspondence added</span>
    <span class="time-taken">10 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1528024/815181/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/815181">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 46b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">support will be added in version 1.38
-- 
Erik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1528027" href="/Public/Bug/Display.html?id=102637#txn-1528027">#</a>      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;22&nbsp;04:42:38&nbsp;2015</span>
    <span class="description">eco [...] ecocode.net -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1528029" href="/Public/Bug/Display.html?id=102637#txn-1528029">#</a>      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;22&nbsp;04:42:38&nbsp;2015</span>
    <span class="description">eco [...] ecocode.net -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.55197</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
