<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #2944 for GDGraph: show_values problem   in stacked bars</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #2944 for GDGraph: show_values problem   in stacked bars</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=GDGraph">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=GDGraph">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=GDGraph">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=GDGraph">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/GDGraph">GDGraph CPAN distribution</a>.</p>


<h3>Maintainer&#40;s&#41;&#39; notes</h3>

<p>There are plenty of good ideas of what people can do published here on the queue. Turning a patch from the tracker into a pull request is not one of them. In order to get maintainers' attention way more quickier, PR should have at least a sample included. We know it's hard to test images generating software, but it doesn't mean we can not test numbers produced by intermediate algorithms used to generate these images, so either a test or a sample.</p>



<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">2944</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=GDGraph">GDGraph</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">bwarfield [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
rgarcia [...] hexaflux.com

<br />
xiashao [...] vip.sina.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-14346-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
1.43</li>
<li>
1.4305</li>
<li>
1.4306</li>
<li>
1.4307</li>
</ul>
    </td>
  </tr>
  <tr id="CF-14347-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.4308    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




bars.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/92155/13808/bars.diff">
Mon Nov 24 08:28:18 2003 (936b) by 
</a>
</font></li>
</ul>


bars_values.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/170167/55461/bars_values.diff">
Fri Mar 03 06:54:51 2006 (978b) by Guest
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=2944">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-83609" href="/Public/Bug/Display.html?id=2944#txn-83609">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;14&nbsp;03:11:55&nbsp;2003</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> show_values problem   in stacked bars</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/83609/10194/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/10194">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I want to create a chart with horizontal stacked bars, where the value
for each bar is printed inside of the bar itself. I&#39;m not sure this
can even be done.
Working with the samples provided with GDGraph &#40;1.35&#41;, I can create
the horizontal stacked bar graph just fine, but the values end up
getting printed in an odd manner. For the code below, the values that
are printed for each bar don&#39;t end up 4 pixels outside of the bar
&#40;which I expect since I haven&#39;t gotten to trying to move them inside
of the bar yet&#41;, and the values seem to be randomly chosen from either
of the series.

Any suggestions for:
1&#41; getting the values to appear correctly for stacked horizontal bar
graphs
2&#41; getting the values to appear inside of the bar itself, rather than
to the right &#40;if I use the option values_space set to a negative
number, the values seem to appear to the left of the bar&#41;.

Thanks!
Derek

# This code demonstrates the problem I am having with labels inside
the bars
# of a stacked bar chart

use strict;
use GD::Graph::hbars;

my @data = &#40; 
[&#34;1st&#34;,&#34;2nd&#34;,&#34;3rd&#34;,&#34;4th&#34;,&#34;5th&#34;,&#34;6th&#34;,&#34;7th&#34;, &#34;8th&#34;, &#34;9th&#34;],
[ 1, 2, 5, 6, 3, 1.5, 1, 3, 4],
[ 1, 1.5, 3, 2, 3, 1.5, 3, 4, 4 ]
&#41;;
my $graph = GD::Graph::hbars-&gt;new&#40;400, 300&#41;;
$graph-&gt;set_legend&#40;&#39;Pass&#39;, &#39;Fail&#39;&#41;;
$graph-&gt;set&#40; 
x_label =&gt; &#39;X Label&#39;,
y_label =&gt; &#39;Y label&#39;,
title =&gt; &#39;Some simple graph&#39;,
y_max_value =&gt; 10,
y_tick_number =&gt; 10,
y_label_skip =&gt; 2,
bar_spacing =&gt; 8,
cumulate =&gt; &#39;true&#39;,

dclrs =&gt; [ qw&#40; green lred &#41; ],
show_values =&gt; 1,
values_space =&gt; 4,
&#41;
or warn $graph-&gt;error;
my $format = $graph-&gt;export_format;
$graph-&gt;plot&#40;\@data&#41;-&gt;$format&#40;&#41;;

save_chart&#40;$graph,&#39;bugs_graph&#39;&#41;;

sub save_chart
{
my $chart = shift or die &#34;Need a chart!&#34;;
my $name = shift or die &#34;Need a name!&#34;;
local&#40;*OUT&#41;;

my $ext = $chart-&gt;export_format;

open&#40;OUT, &#34;&gt;$name.$ext&#34;&#41; or 
die &#34;Cannot open $name.$ext for write: $!&#34;;
binmode OUT;
print OUT $chart-&gt;gd-&gt;$ext&#40;&#41;;
close OUT;
}
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Create even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-92155" href="/Public/Bug/Display.html?id=2944#txn-92155">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;24&nbsp;08:28:17&nbsp;2003</span>
    <span class="description">Guest - Ticket #4469:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Bad alignment of values in cumulative histograms</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/92155/13807/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/13807">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 172b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">It appears that the values displayed on top of bars on cumulative histograms
are not properly lined up with the bars. The attached patch &#40;by Romeo Juncu&#41; fixes the problem.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/92155/13808/bars.diff">Download bars.diff</a><br />
<span class="downloadcontenttype">text/x-diff 936b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- bars.pm.orig	2003-11-24 15:08:30.000000000 -0600
+++ bars.pm	2003-11-24 15:13:09.000000000 -0600
@@ -312,12 +312,18 @@
     return $self unless $self-&gt;{show_values};
     
     my $text_angle = $self-&gt;{values_vertical} ? PI/2 : 0;
-
+    my @numPoints = $self-&gt;{_data}-&gt;num_points&#40;&#41;;
     for &#40;my $dsn = 1; $dsn &lt;= $self-&gt;{_data}-&gt;num_sets; $dsn++&#41;
     {
-        my @values = $self-&gt;{_data}-&gt;y_values&#40;$dsn&#41; or
+        my @values = &#40;&#41;;
+        if &#40;!$self-&gt;get&#40;&#34;cumulate&#34;&#41;&#41; {
+          @values = $self-&gt;{_data}-&gt;y_values&#40;$dsn&#41; or
             return $self-&gt;_set_error&#40;&#34;Impossible illegal data set: $dsn&#34;,
                 $self-&gt;{_data}-&gt;error&#41;;
+        } else {
+          my $nPoints = $numPoints[$dsn] || 0;
+          @values = map {$self-&gt;{_data}-&gt;get_y_cumulative&#40;$dsn, $_&#41;} &#40;0..$nPoints - 1&#41; ;
+        }
         my @display = $self-&gt;{show_values}-&gt;y_values&#40;$dsn&#41; or next;
 
         for &#40;my $i = 0; $i &lt; @values; $i++&#41;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-92156" href="/Public/Bug/Display.html?id=2944#txn-92156">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;09&nbsp;12:07:32&nbsp;2004</span>
    <span class="description">Guest - Ticket #4469:  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> CC</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/92156/25702/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/25702">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 410b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello

the patch actually fixe the problem for cumulative barchart graph.
But I still have the problem for mixed graph where I have both 
cumulative and linespoints graphs.
Any idea?
Cheers
[guest - Mon Nov 24 08:28:17 2003]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It appears that the values displayed on top of bars on cumulative
&gt; histograms
&gt; are not properly lined up with the bars. The attached patch &#40;by Romeo
&gt; Juncu&#41; fixes the problem.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-164122" href="/Public/Bug/Display.html?id=2944#txn-164122">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;11&nbsp;19:00:50&nbsp;2006</span>
    <span class="description">bwarfield [...] cpan.org - Ticket #4469:  Merged into ticket #2944</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-164123" href="/Public/Bug/Display.html?id=2944#txn-164123">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;11&nbsp;19:00:51&nbsp;2006</span>
    <span class="description">bwarfield [...] cpan.org -  Merged into ticket #2944</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-164124" href="/Public/Bug/Display.html?id=2944#txn-164124">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;11&nbsp;19:01:31&nbsp;2006</span>
    <span class="description">bwarfield [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-164132" href="/Public/Bug/Display.html?id=2944#txn-164132">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;11&nbsp;19:04:29&nbsp;2006</span>
    <span class="description">bwarfield [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-164133" href="/Public/Bug/Display.html?id=2944#txn-164133">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;11&nbsp;19:06:05&nbsp;2006</span>
    <span class="description">bwarfield [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/164133/52126/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/52126">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 202b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I applied the patch, so this is fixed in 1.4305.  I haven&#39;t tested the mixed-graph case mentioned 
in the anonymous comment above yet, though, so I&#39;m leaving the status as stalled rather than 
resolved.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-164136" href="/Public/Bug/Display.html?id=2944#txn-164136">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;11&nbsp;19:06:06&nbsp;2006</span>
    <span class="description">bwarfield [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other AddReminder even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-164944" href="/Public/Bug/Display.html?id=2944#txn-164944">#</a>      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;14&nbsp;17:07:50&nbsp;2006</span>
    <span class="description">bwarfield [...] cpan.org -  Reminder &#39;Check on the stalled linespoints label issue&#39; added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other ResolveReminder odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-167952" href="/Public/Bug/Display.html?id=2944#txn-167952">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;23&nbsp;12:20:40&nbsp;2006</span>
    <span class="description">bwarfield [...] cpan.org -  Reminder &#39;Check on the stalled linespoints label issue&#39; completed</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-170167" href="/Public/Bug/Display.html?id=2944#txn-170167">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;03&nbsp;06:54:51&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> cyrille.mars [...] free.fr</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/170167/55458/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/55458">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 374b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Feb 11 19:06:05 2006, BWARFIELD wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I applied the patch, so this is fixed in 1.4305.  I haven&#39;t tested the
&gt; mixed-graph case mentioned
&gt; in the anonymous comment above yet, though, so I&#39;m leaving the status
&gt; as stalled rather than
&gt; resolved.
</div>
Hello, 

I made a patch to bars.pm to display the value inside the bar in
cummulative mode.

best regards,

Cyrille
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/170167/55461/bars_values.diff">Download bars_values.diff</a><br />
<span class="downloadcontenttype">text/x-diff 978b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- bars.pm.orig	2006-03-03 12:42:20.000000000 +0100
+++ bars.pm	2006-03-03 12:40:53.000000000 +0100
@@ -331,7 +331,12 @@
                 $self-&gt;{_data}-&gt;error&#41;;
         } else {
           my $nPoints = $numPoints[$dsn] || 0;
-          @values = map {$self-&gt;{_data}-&gt;get_y_cumulative&#40;$dsn, $_&#41;} &#40;0..$nPoints - 1&#41; ;
+            @values = map {my $p = $_;
+                           my $val = $self-&gt;{_data}-&gt;[$dsn][$p];
+                           $val /= 2;
+                           map&#40;{$val+= $self-&gt;{_data}-&gt;[$_][$p]} &#40;1..$dsn-1&#41;&#41; if $dsn &gt; 1;
+                           $val;
+                           } &#40;0..$nPoints - 1&#41; ;
         }
         my @display = $self-&gt;{show_values}-&gt;y_values&#40;$dsn&#41; or next;
 
@@ -377,6 +382,7 @@
 	    }
 
             $self-&gt;{gdta_values}-&gt;set_text&#40;$value&#41;;
+            $self-&gt;{gdta_values}-&gt;set_align&#40;&#39;top&#39;, &#39;center&#39;&#41; if &#40;$self-&gt;get&#40;&#34;cumulate&#34;&#41;&#41;;
             $self-&gt;{gdta_values}-&gt;draw&#40;$xp, $yp, $text_angle&#41;;
         }
     }
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-170168" href="/Public/Bug/Display.html?id=2944#txn-170168">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;03&nbsp;06:54:56&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-176193" href="/Public/Bug/Display.html?id=2944#txn-176193">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;12&nbsp;21:50:42&nbsp;2006</span>
    <span class="description">bwarfield [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> cyrille.mars [...] free.fr</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/176193/60239/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/60239">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 588b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The patch to put the values inside rather than at the top of the bars is interesting, but not a 
change I&#39;d feel comfortable making on a default basis, and not *really* part of this particular 
bug in any case.  I do think it&#39;s a behavior worth having available, so feel free, Cyrille, to 
resubmit it as a feature request &#40;if you don&#39;t, I probably will myself just so I don&#39;t forget it&#41;, but 
it&#39;ll probably have to wait a little bit.

Meanwhile, the original bug is now well and truly squashed &#40;or will be, next time I upload to 
CPAN&#41;, so I&#39;m marking this resolved, for real this time.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-176197" href="/Public/Bug/Display.html?id=2944#txn-176197">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;12&nbsp;21:50:44&nbsp;2006</span>
    <span class="description">bwarfield [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-176205" href="/Public/Bug/Display.html?id=2944#txn-176205">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;12&nbsp;21:53:19&nbsp;2006</span>
    <span class="description">bwarfield [...] cpan.org -  Broken in 1.43 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-176206" href="/Public/Bug/Display.html?id=2944#txn-176206">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;12&nbsp;21:53:20&nbsp;2006</span>
    <span class="description">bwarfield [...] cpan.org -  Broken in 1.4305 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-176207" href="/Public/Bug/Display.html?id=2944#txn-176207">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;12&nbsp;21:53:20&nbsp;2006</span>
    <span class="description">bwarfield [...] cpan.org -  Broken in 1.4306 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-176208" href="/Public/Bug/Display.html?id=2944#txn-176208">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;12&nbsp;21:53:20&nbsp;2006</span>
    <span class="description">bwarfield [...] cpan.org -  Broken in 1.4307 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-197030" href="/Public/Bug/Display.html?id=2944#txn-197030">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;May&nbsp;18&nbsp;15:04:13&nbsp;2006</span>
    <span class="description">bwarfield [...] cpan.org -  Fixed in 1.4308 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.749317</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
