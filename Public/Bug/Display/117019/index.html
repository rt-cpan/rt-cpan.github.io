<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #117019 for File-Path: File::Path::remove_tree option hash is auto populated and cannot be reused for a second call without warnings</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #117019 for File-Path: File::Path::remove_tree option hash is auto populated and cannot be reused for a second call without warnings</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=File-Path">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=File-Path">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=File-Path">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=File-Path">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/File-Path">File-Path CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">117019</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=File-Path">File-Path</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">jkeenan [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
me [...] eboxr.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-43556-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-43557-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




117019-opts.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1659525/890778/117019-opts.pl">
Wed Aug 17 17:10:23 2016 (1.2k) by jkeenan [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=117019">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1659484" href="/Public/Bug/Display.html?id=117019#txn-1659484">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;17&nbsp;13:32:04&nbsp;2016</span>
    <span class="description">me [...] eboxr.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> File::Path::remove_tree option hash is auto populated and cannot
 be reused for a second call without warnings</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1659484/890753/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/890753">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">File::Path::remove_tree &#40;and maybe more&#41; is using the options hashref passed internally and populate it with noise...
You cannot set an hashref for options and reuse it for another call as it s going to be polluted and you will noticed some warning

Wonder if it s an expected behavior or if the hashref should be localized...
Note that when using version 2.09 this could be used without warnings... whereas after the update to 2.12 now this is adding a warning &#40;which is a good thing&#41; for unknown options 

mkdir -p /tmp/a/b/c; perl -w -MFile::Path -E &#39;use warnings; my $x= &#34;&#34;; my $opts = { error =&gt; \$x }; File::Path::remove_tree&#40;&#34;/tmp/a/b/c&#34;, $opts &#41;; File::Path::remove_tree&#40;&#34;/tmp/a/b&#34;, $opts &#41;; say $File::Path::VERSION; use Test::More; note explain $opts&#39;
Unrecognized option&#40;s&#41; passed to remove_tree&#40;&#41;: cwd depth device inode perm prefix at -e line 1.
2.1201
# {
#   &#39;cwd&#39; =&gt; &#39;/usr/local/cpanel&#39;,
#   &#39;depth&#39; =&gt; 0,
#   &#39;device&#39; =&gt; 64769,
#   &#39;error&#39; =&gt; \[],
#   &#39;inode&#39; =&gt; 68670914,
#   &#39;perm&#39; =&gt; undef,
#   &#39;prefix&#39; =&gt; &#39;&#39;
# }
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1659525" href="/Public/Bug/Display.html?id=117019#txn-1659525">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;17&nbsp;17:10:23&nbsp;2016</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1659525/890777/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/890777">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Aug 17 13:32:04 2016, atoomic wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; File::Path::remove_tree &#40;and maybe more&#41; is using the options hashref
&gt; passed internally and populate it with noise...
&gt; You cannot set an hashref for options and reuse it for another call as
&gt; it s going to be polluted and you will noticed some warning
&gt; 
</div>
Agreed.  It appears that the %options is being used -- correctly -- as a way to store modifications to the function call, and incorrectly as a way to store metadata or data about the results of the same function call.

Bad design -- but with File::Path that&#39;s nothing new.  Your friendly neighborhood File::Path maintainers have shaken their heads many times over such problems.  And, unfortunately, when we&#39;ve tried to rectify such problems, we&#39;re very prone to complaints from users who, for example, don&#39;t want to see new warnings.

There are workarounds if you are really, really bothered by this problem.  See attachment.  In a second invocation of &#39;remove_tree&#39;, you can either have the &#39;error&#39; element in the options hash point to a *different* scalar variable, or you can purge the options hash of all elements except those which you want and which are documented to work.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Wonder if it s an expected behavior or if the hashref should be
&gt; localized...
&gt;  Note that when using version 2.09 this could be used without
&gt; warnings... whereas after the update to 2.12 now this is adding a
&gt; warning &#40;which is a good thing&#41; for unknown options
&gt; 
&gt; mkdir -p /tmp/a/b/c; perl -w -MFile::Path -E &#39;use warnings; my $x= &#34;&#34;;
&gt; my $opts = { error =&gt; \$x }; File::Path::remove_tree&#40;&#34;/tmp/a/b/c&#34;,
&gt; $opts &#41;; File::Path::remove_tree&#40;&#34;/tmp/a/b&#34;, $opts &#41;; say
&gt; $File::Path::VERSION; use Test::More; note explain $opts&#39;
&gt; Unrecognized option&#40;s&#41; passed to remove_tree&#40;&#41;: cwd depth device inode
&gt; perm prefix at -e line 1.
&gt; 2.1201
&gt; # {
&gt; #   &#39;cwd&#39; =&gt; &#39;/usr/local/cpanel&#39;,
&gt; #   &#39;depth&#39; =&gt; 0,
&gt; #   &#39;device&#39; =&gt; 64769,
&gt; #   &#39;error&#39; =&gt; \[],
&gt; #   &#39;inode&#39; =&gt; 68670914,
&gt; #   &#39;perm&#39; =&gt; undef,
&gt; #   &#39;prefix&#39; =&gt; &#39;&#39;
&gt; # }
</div>
I suspect that simply documenting the problem will be vastly easier than trying to &#34;fix&#34; it and keep CPAN working.

Thank you very much.
Jim Keenan
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 117019-opts.pl</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1659525/890778/117019-opts.pl">Download 117019-opts.pl</a><br />
<span class="downloadcontenttype">text/x-perl 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"># perl
use strict;
use warnings;
use 5.10.1;
use Carp;
use File::Path;
use Test::More qw&#40; no_plan &#41;;
use File::Temp qw&#40; tempdir &#41;;

my &#40;$opts, $tdir, $tdir2, $tdir3, $tdir4&#41;;
my &#40;$x, $y, $z&#41; = &#40;&#34;&#34;&#41; x 3;

$opts = { verbose =&gt; 1, error =&gt; \$x };
$tdir = tempdir&#40; CLEANUP =&gt; 1 &#41;;
ok&#40; -d $tdir, &#34;tempdir $tdir created&#34;&#41;;
File::Path::remove_tree&#40;$tdir, $opts &#41;;
ok&#40;! &#40;-d $tdir&#41;, &#34;tempdir $tdir removed, as expected&#34;&#41;;

note explain $opts;

$y = &#34;&#34;;
$opts = { verbose =&gt; 1, error =&gt; \$y };

$tdir2 = tempdir&#40; CLEANUP =&gt; 1 &#41;;
ok&#40; -d $tdir2, &#34;tempdir $tdir2 created&#34;&#41;;
File::Path::remove_tree&#40;$tdir2, $opts &#41;;
ok&#40;! &#40;-d $tdir2&#41;, &#34;tempdir $tdir2 removed, as expected&#34;&#41;;

note explain $opts;

$z = &#34;&#34;;
$opts = { verbose =&gt; 1, error =&gt; \$z };

$tdir3 = tempdir&#40; CLEANUP =&gt; 1 &#41;;
ok&#40; -d $tdir3, &#34;tempdir $tdir3 created&#34;&#41;;
File::Path::remove_tree&#40;$tdir3, $opts &#41;;
ok&#40;! &#40;-d $tdir3&#41;, &#34;tempdir $tdir3 removed, as expected&#34;&#41;;

$tdir4 = tempdir&#40; CLEANUP =&gt; 1 &#41;;
ok&#40; -d $tdir4, &#34;tempdir $tdir4 created&#34;&#41;;
my @opts_for_removal = grep { ! m/^&#40;error|verbose&#41;$/ } keys %{$opts};
delete @{$opts}{ @opts_for_removal };
File::Path::remove_tree&#40;$tdir4, $opts &#41;;
ok&#40;! &#40;-d $tdir4&#41;, &#34;tempdir $tdir4 removed, as expected&#34;&#41;;

note explain $opts;

say &#34;Finished&#34;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1659526" href="/Public/Bug/Display.html?id=117019#txn-1659526">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;17&nbsp;17:10:24&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1659731" href="/Public/Bug/Display.html?id=117019#txn-1659731">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;18&nbsp;11:51:09&nbsp;2016</span>
    <span class="description">me [...] eboxr.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1659731/890891/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/890891">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Indeed I&#39;m good with a documentation only change, so at least people will not &#40;or will be aware to not&#41; reuse the same hashref.
I&#39;ve just converted my $opts = { ... }; to a simple sub opts { return {...} }; so I&#39;m now using a new hashref each time...

But I&#39;m curious how many modules on CPAN are using it this way &#40;outside of unit test&#41; 
and this might raise unexpected warnings in production when updating File::Path on several products/systems...

On Wed Aug 17 17:10:23 2016, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Aug 17 13:32:04 2016, atoomic wrote:
<div class="message-stanza open">&gt; &gt; File::Path::remove_tree &#40;and maybe more&#41; is using the options hashref
&gt; &gt; passed internally and populate it with noise...
&gt; &gt; You cannot set an hashref for options and reuse it for another call
&gt; &gt; as
&gt; &gt; it s going to be polluted and you will noticed some warning
&gt; &gt;
</div>&gt; 
&gt; Agreed.  It appears that the %options is being used -- correctly -- as
&gt; a way to store modifications to the function call, and incorrectly as
&gt; a way to store metadata or data about the results of the same function
&gt; call.
&gt; 
&gt; Bad design -- but with File::Path that&#39;s nothing new.  Your friendly
&gt; neighborhood File::Path maintainers have shaken their heads many times
&gt; over such problems.  And, unfortunately, when we&#39;ve tried to rectify
&gt; such problems, we&#39;re very prone to complaints from users who, for
&gt; example, don&#39;t want to see new warnings.
&gt; 
&gt; There are workarounds if you are really, really bothered by this
&gt; problem.  See attachment.  In a second invocation of &#39;remove_tree&#39;,
&gt; you can either have the &#39;error&#39; element in the options hash point to a
&gt; *different* scalar variable, or you can purge the options hash of all
&gt; elements except those which you want and which are documented to work.
&gt; 
<div class="message-stanza open">&gt; &gt; Wonder if it s an expected behavior or if the hashref should be
&gt; &gt; localized...
&gt; &gt;  Note that when using version 2.09 this could be used without
&gt; &gt; warnings... whereas after the update to 2.12 now this is adding a
&gt; &gt; warning &#40;which is a good thing&#41; for unknown options
&gt; &gt;
&gt; &gt; mkdir -p /tmp/a/b/c; perl -w -MFile::Path -E &#39;use warnings; my $x=
&gt; &gt; &#34;&#34;;
&gt; &gt; my $opts = { error =&gt; \$x }; File::Path::remove_tree&#40;&#34;/tmp/a/b/c&#34;,
&gt; &gt; $opts &#41;; File::Path::remove_tree&#40;&#34;/tmp/a/b&#34;, $opts &#41;; say
&gt; &gt; $File::Path::VERSION; use Test::More; note explain $opts&#39;
&gt; &gt; Unrecognized option&#40;s&#41; passed to remove_tree&#40;&#41;: cwd depth device
&gt; &gt; inode
&gt; &gt; perm prefix at -e line 1.
&gt; &gt; 2.1201
&gt; &gt; # {
&gt; &gt; #   &#39;cwd&#39; =&gt; &#39;/usr/local/cpanel&#39;,
&gt; &gt; #   &#39;depth&#39; =&gt; 0,
&gt; &gt; #   &#39;device&#39; =&gt; 64769,
&gt; &gt; #   &#39;error&#39; =&gt; \[],
&gt; &gt; #   &#39;inode&#39; =&gt; 68670914,
&gt; &gt; #   &#39;perm&#39; =&gt; undef,
&gt; &gt; #   &#39;prefix&#39; =&gt; &#39;&#39;
&gt; &gt; # }
</div>&gt; 
&gt; I suspect that simply documenting the problem will be vastly easier
&gt; than trying to &#34;fix&#34; it and keep CPAN working.
&gt; 
&gt; Thank you very much.
&gt; Jim Keenan
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1709681" href="/Public/Bug/Display.html?id=117019#txn-1709681">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;08&nbsp;17:42:41&nbsp;2017</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1709681/918561/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/918561">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Aug 18 11:51:09 2016, atoomic wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Indeed I&#39;m good with a documentation only change, so at least people
&gt; will not &#40;or will be aware to not&#41; reuse the same hashref.
&gt; I&#39;ve just converted my $opts = { ... }; to a simple sub opts { return
&gt; {...} }; so I&#39;m now using a new hashref each time...
&gt; 
&gt; But I&#39;m curious how many modules on CPAN are using it this way
&gt; &#40;outside of unit test&#41;
&gt; and this might raise unexpected warnings in production when updating
&gt; File::Path on several products/systems...
&gt; 
&gt; On Wed Aug 17 17:10:23 2016, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; On Wed Aug 17 13:32:04 2016, atoomic wrote:
<div class="message-stanza open">&gt; &gt; &gt; File::Path::remove_tree &#40;and maybe more&#41; is using the options
&gt; &gt; &gt; hashref
&gt; &gt; &gt; passed internally and populate it with noise...
&gt; &gt; &gt; You cannot set an hashref for options and reuse it for another call
&gt; &gt; &gt; as
&gt; &gt; &gt; it s going to be polluted and you will noticed some warning
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt; Agreed.  It appears that the %options is being used -- correctly --
&gt; &gt; as
&gt; &gt; a way to store modifications to the function call, and incorrectly as
&gt; &gt; a way to store metadata or data about the results of the same
&gt; &gt; function
&gt; &gt; call.
&gt; &gt;
&gt; &gt; Bad design -- but with File::Path that&#39;s nothing new.  Your friendly
&gt; &gt; neighborhood File::Path maintainers have shaken their heads many
&gt; &gt; times
&gt; &gt; over such problems.  And, unfortunately, when we&#39;ve tried to rectify
&gt; &gt; such problems, we&#39;re very prone to complaints from users who, for
&gt; &gt; example, don&#39;t want to see new warnings.
&gt; &gt;
&gt; &gt; There are workarounds if you are really, really bothered by this
&gt; &gt; problem.  See attachment.  In a second invocation of &#39;remove_tree&#39;,
&gt; &gt; you can either have the &#39;error&#39; element in the options hash point to
&gt; &gt; a
&gt; &gt; *different* scalar variable, or you can purge the options hash of all
&gt; &gt; elements except those which you want and which are documented to
&gt; &gt; work.
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; Wonder if it s an expected behavior or if the hashref should be
&gt; &gt; &gt; localized...
&gt; &gt; &gt;  Note that when using version 2.09 this could be used without
&gt; &gt; &gt; warnings... whereas after the update to 2.12 now this is adding a
&gt; &gt; &gt; warning &#40;which is a good thing&#41; for unknown options
&gt; &gt; &gt;
&gt; &gt; &gt; mkdir -p /tmp/a/b/c; perl -w -MFile::Path -E &#39;use warnings; my $x=
&gt; &gt; &gt; &#34;&#34;;
&gt; &gt; &gt; my $opts = { error =&gt; \$x }; File::Path::remove_tree&#40;&#34;/tmp/a/b/c&#34;,
&gt; &gt; &gt; $opts &#41;; File::Path::remove_tree&#40;&#34;/tmp/a/b&#34;, $opts &#41;; say
&gt; &gt; &gt; $File::Path::VERSION; use Test::More; note explain $opts&#39;
&gt; &gt; &gt; Unrecognized option&#40;s&#41; passed to remove_tree&#40;&#41;: cwd depth device
&gt; &gt; &gt; inode
&gt; &gt; &gt; perm prefix at -e line 1.
&gt; &gt; &gt; 2.1201
&gt; &gt; &gt; # {
&gt; &gt; &gt; #   &#39;cwd&#39; =&gt; &#39;/usr/local/cpanel&#39;,
&gt; &gt; &gt; #   &#39;depth&#39; =&gt; 0,
&gt; &gt; &gt; #   &#39;device&#39; =&gt; 64769,
&gt; &gt; &gt; #   &#39;error&#39; =&gt; \[],
&gt; &gt; &gt; #   &#39;inode&#39; =&gt; 68670914,
&gt; &gt; &gt; #   &#39;perm&#39; =&gt; undef,
&gt; &gt; &gt; #   &#39;prefix&#39; =&gt; &#39;&#39;
&gt; &gt; &gt; # }
</div>&gt; &gt;
&gt; &gt; I suspect that simply documenting the problem will be vastly easier
&gt; &gt; than trying to &#34;fix&#34; it and keep CPAN working.
&gt; &gt;
&gt; &gt; Thank you very much.
&gt; &gt; Jim Keenan
</div></div>
Would you be able to try out the version of lib/File/Path.pm found here:

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/jkeenan/File-Path/blob/fc457bb14afb8203258ede6fe1e40516a09db4b5/lib/File/Path.pm">https://github.com/jkeenan/File-Path/blob/fc457bb14afb8203258ede6fe1e40516a09db4b5/lib/File/Path.pm</a></span>

This modifies remove_tree&#40;&#41; -- but not make_path&#40;&#41;! -- to internally separate the hashref holding options passed to the subroutine from the hashref holding those options &#40;once verified&#41; and internally generated parameters.

No documentation updates yet.

Thank you very much.
Jim Keenan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1709917" href="/Public/Bug/Display.html?id=117019#txn-1709917">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;10&nbsp;09:28:59&nbsp;2017</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1709917/918700/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/918700">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Mar 08 17:42:41 2017, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Thu Aug 18 11:51:09 2016, atoomic wrote:
<div class="message-stanza open">&gt; &gt; Indeed I&#39;m good with a documentation only change, so at least people
&gt; &gt; will not &#40;or will be aware to not&#41; reuse the same hashref.
&gt; &gt; I&#39;ve just converted my $opts = { ... }; to a simple sub opts { return
&gt; &gt; {...} }; so I&#39;m now using a new hashref each time...
&gt; &gt;
&gt; &gt; But I&#39;m curious how many modules on CPAN are using it this way
&gt; &gt; &#40;outside of unit test&#41;
&gt; &gt; and this might raise unexpected warnings in production when updating
&gt; &gt; File::Path on several products/systems...
&gt; &gt;
&gt; &gt; On Wed Aug 17 17:10:23 2016, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; &gt; On Wed Aug 17 13:32:04 2016, atoomic wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; File::Path::remove_tree &#40;and maybe more&#41; is using the options
&gt; &gt; &gt; &gt; hashref
&gt; &gt; &gt; &gt; passed internally and populate it with noise...
&gt; &gt; &gt; &gt; You cannot set an hashref for options and reuse it for another
&gt; &gt; &gt; &gt; call
&gt; &gt; &gt; &gt; as
&gt; &gt; &gt; &gt; it s going to be polluted and you will noticed some warning
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt; Agreed.  It appears that the %options is being used -- correctly --
&gt; &gt; &gt; as
&gt; &gt; &gt; a way to store modifications to the function call, and incorrectly
&gt; &gt; &gt; as
&gt; &gt; &gt; a way to store metadata or data about the results of the same
&gt; &gt; &gt; function
&gt; &gt; &gt; call.
&gt; &gt; &gt;
&gt; &gt; &gt; Bad design -- but with File::Path that&#39;s nothing new.  Your
&gt; &gt; &gt; friendly
&gt; &gt; &gt; neighborhood File::Path maintainers have shaken their heads many
&gt; &gt; &gt; times
&gt; &gt; &gt; over such problems.  And, unfortunately, when we&#39;ve tried to
&gt; &gt; &gt; rectify
&gt; &gt; &gt; such problems, we&#39;re very prone to complaints from users who, for
&gt; &gt; &gt; example, don&#39;t want to see new warnings.
&gt; &gt; &gt;
&gt; &gt; &gt; There are workarounds if you are really, really bothered by this
&gt; &gt; &gt; problem.  See attachment.  In a second invocation of &#39;remove_tree&#39;,
&gt; &gt; &gt; you can either have the &#39;error&#39; element in the options hash point
&gt; &gt; &gt; to
&gt; &gt; &gt; a
&gt; &gt; &gt; *different* scalar variable, or you can purge the options hash of
&gt; &gt; &gt; all
&gt; &gt; &gt; elements except those which you want and which are documented to
&gt; &gt; &gt; work.
&gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; Wonder if it s an expected behavior or if the hashref should be
&gt; &gt; &gt; &gt; localized...
&gt; &gt; &gt; &gt;  Note that when using version 2.09 this could be used without
&gt; &gt; &gt; &gt; warnings... whereas after the update to 2.12 now this is adding a
&gt; &gt; &gt; &gt; warning &#40;which is a good thing&#41; for unknown options
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; mkdir -p /tmp/a/b/c; perl -w -MFile::Path -E &#39;use warnings; my
&gt; &gt; &gt; &gt; $x=
&gt; &gt; &gt; &gt; &#34;&#34;;
&gt; &gt; &gt; &gt; my $opts = { error =&gt; \$x };
&gt; &gt; &gt; &gt; File::Path::remove_tree&#40;&#34;/tmp/a/b/c&#34;,
&gt; &gt; &gt; &gt; $opts &#41;; File::Path::remove_tree&#40;&#34;/tmp/a/b&#34;, $opts &#41;; say
&gt; &gt; &gt; &gt; $File::Path::VERSION; use Test::More; note explain $opts&#39;
&gt; &gt; &gt; &gt; Unrecognized option&#40;s&#41; passed to remove_tree&#40;&#41;: cwd depth device
&gt; &gt; &gt; &gt; inode
&gt; &gt; &gt; &gt; perm prefix at -e line 1.
&gt; &gt; &gt; &gt; 2.1201
&gt; &gt; &gt; &gt; # {
&gt; &gt; &gt; &gt; #   &#39;cwd&#39; =&gt; &#39;/usr/local/cpanel&#39;,
&gt; &gt; &gt; &gt; #   &#39;depth&#39; =&gt; 0,
&gt; &gt; &gt; &gt; #   &#39;device&#39; =&gt; 64769,
&gt; &gt; &gt; &gt; #   &#39;error&#39; =&gt; \[],
&gt; &gt; &gt; &gt; #   &#39;inode&#39; =&gt; 68670914,
&gt; &gt; &gt; &gt; #   &#39;perm&#39; =&gt; undef,
&gt; &gt; &gt; &gt; #   &#39;prefix&#39; =&gt; &#39;&#39;
&gt; &gt; &gt; &gt; # }
</div>&gt; &gt; &gt;
&gt; &gt; &gt; I suspect that simply documenting the problem will be vastly easier
&gt; &gt; &gt; than trying to &#34;fix&#34; it and keep CPAN working.
&gt; &gt; &gt;
&gt; &gt; &gt; Thank you very much.
&gt; &gt; &gt; Jim Keenan
</div></div>&gt; 
&gt; Would you be able to try out the version of lib/File/Path.pm found
&gt; here:
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/jkeenan/File-">https://github.com/jkeenan/File-</a></span>
&gt; Path/blob/fc457bb14afb8203258ede6fe1e40516a09db4b5/lib/File/Path.pm
&gt; 
&gt; This modifies remove_tree&#40;&#41; -- but not make_path&#40;&#41;! -- to internally
&gt; separate the hashref holding options passed to the subroutine from the
&gt; hashref holding those options &#40;once verified&#41; and internally generated
&gt; parameters.
&gt; 
</div>
In branch, I have now modified mkpath&#40;&#41; to make the same internal distinction between key-value pairs passed in via an options hash and those internally generated.  However, it turns out that we were not at risk for kind of warning you got with remove_tree&#40;&#41; because all of the valid keys for an options hash for make_path&#40;&#41; are assigned internally.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; No documentation updates yet.
&gt; 
</div>
I didn&#39;t see the need to change any documentation.

These changes are all now reflected in::

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/rpcme/File-Path/pull/41">https://github.com/rpcme/File-Path/pull/41</a></span>

Thank you very much.
Jim Keenan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1730615" href="/Public/Bug/Display.html?id=117019#txn-1730615">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;31&nbsp;20:50:52&nbsp;2017</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1730615/930531/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/930531">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Mar 10 09:28:59 2017, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Mar 08 17:42:41 2017, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; On Thu Aug 18 11:51:09 2016, atoomic wrote:
<div class="message-stanza open">&gt; &gt; &gt; Indeed I&#39;m good with a documentation only change, so at least
&gt; &gt; &gt; people
&gt; &gt; &gt; will not &#40;or will be aware to not&#41; reuse the same hashref.
&gt; &gt; &gt; I&#39;ve just converted my $opts = { ... }; to a simple sub opts {
&gt; &gt; &gt; return
&gt; &gt; &gt; {...} }; so I&#39;m now using a new hashref each time...
&gt; &gt; &gt;
&gt; &gt; &gt; But I&#39;m curious how many modules on CPAN are using it this way
&gt; &gt; &gt; &#40;outside of unit test&#41;
&gt; &gt; &gt; and this might raise unexpected warnings in production when
&gt; &gt; &gt; updating
&gt; &gt; &gt; File::Path on several products/systems...
&gt; &gt; &gt;
&gt; &gt; &gt; On Wed Aug 17 17:10:23 2016, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; On Wed Aug 17 13:32:04 2016, atoomic wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; File::Path::remove_tree &#40;and maybe more&#41; is using the options
&gt; &gt; &gt; &gt; &gt; hashref
&gt; &gt; &gt; &gt; &gt; passed internally and populate it with noise...
&gt; &gt; &gt; &gt; &gt; You cannot set an hashref for options and reuse it for another
&gt; &gt; &gt; &gt; &gt; call
&gt; &gt; &gt; &gt; &gt; as
&gt; &gt; &gt; &gt; &gt; it s going to be polluted and you will noticed some warning
&gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Agreed.  It appears that the %options is being used -- correctly
&gt; &gt; &gt; &gt; --
&gt; &gt; &gt; &gt; as
&gt; &gt; &gt; &gt; a way to store modifications to the function call, and
&gt; &gt; &gt; &gt; incorrectly
&gt; &gt; &gt; &gt; as
&gt; &gt; &gt; &gt; a way to store metadata or data about the results of the same
&gt; &gt; &gt; &gt; function
&gt; &gt; &gt; &gt; call.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Bad design -- but with File::Path that&#39;s nothing new.  Your
&gt; &gt; &gt; &gt; friendly
&gt; &gt; &gt; &gt; neighborhood File::Path maintainers have shaken their heads many
&gt; &gt; &gt; &gt; times
&gt; &gt; &gt; &gt; over such problems.  And, unfortunately, when we&#39;ve tried to
&gt; &gt; &gt; &gt; rectify
&gt; &gt; &gt; &gt; such problems, we&#39;re very prone to complaints from users who, for
&gt; &gt; &gt; &gt; example, don&#39;t want to see new warnings.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; There are workarounds if you are really, really bothered by this
&gt; &gt; &gt; &gt; problem.  See attachment.  In a second invocation of
&gt; &gt; &gt; &gt; &#39;remove_tree&#39;,
&gt; &gt; &gt; &gt; you can either have the &#39;error&#39; element in the options hash point
&gt; &gt; &gt; &gt; to
&gt; &gt; &gt; &gt; a
&gt; &gt; &gt; &gt; *different* scalar variable, or you can purge the options hash of
&gt; &gt; &gt; &gt; all
&gt; &gt; &gt; &gt; elements except those which you want and which are documented to
&gt; &gt; &gt; &gt; work.
&gt; &gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; Wonder if it s an expected behavior or if the hashref should be
&gt; &gt; &gt; &gt; &gt; localized...
&gt; &gt; &gt; &gt; &gt;  Note that when using version 2.09 this could be used without
&gt; &gt; &gt; &gt; &gt; warnings... whereas after the update to 2.12 now this is adding
&gt; &gt; &gt; &gt; &gt; a
&gt; &gt; &gt; &gt; &gt; warning &#40;which is a good thing&#41; for unknown options
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; mkdir -p /tmp/a/b/c; perl -w -MFile::Path -E &#39;use warnings; my
&gt; &gt; &gt; &gt; &gt; $x=
&gt; &gt; &gt; &gt; &gt; &#34;&#34;;
&gt; &gt; &gt; &gt; &gt; my $opts = { error =&gt; \$x };
&gt; &gt; &gt; &gt; &gt; File::Path::remove_tree&#40;&#34;/tmp/a/b/c&#34;,
&gt; &gt; &gt; &gt; &gt; $opts &#41;; File::Path::remove_tree&#40;&#34;/tmp/a/b&#34;, $opts &#41;; say
&gt; &gt; &gt; &gt; &gt; $File::Path::VERSION; use Test::More; note explain $opts&#39;
&gt; &gt; &gt; &gt; &gt; Unrecognized option&#40;s&#41; passed to remove_tree&#40;&#41;: cwd depth
&gt; &gt; &gt; &gt; &gt; device
&gt; &gt; &gt; &gt; &gt; inode
&gt; &gt; &gt; &gt; &gt; perm prefix at -e line 1.
&gt; &gt; &gt; &gt; &gt; 2.1201
&gt; &gt; &gt; &gt; &gt; # {
&gt; &gt; &gt; &gt; &gt; #   &#39;cwd&#39; =&gt; &#39;/usr/local/cpanel&#39;,
&gt; &gt; &gt; &gt; &gt; #   &#39;depth&#39; =&gt; 0,
&gt; &gt; &gt; &gt; &gt; #   &#39;device&#39; =&gt; 64769,
&gt; &gt; &gt; &gt; &gt; #   &#39;error&#39; =&gt; \[],
&gt; &gt; &gt; &gt; &gt; #   &#39;inode&#39; =&gt; 68670914,
&gt; &gt; &gt; &gt; &gt; #   &#39;perm&#39; =&gt; undef,
&gt; &gt; &gt; &gt; &gt; #   &#39;prefix&#39; =&gt; &#39;&#39;
&gt; &gt; &gt; &gt; &gt; # }
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I suspect that simply documenting the problem will be vastly
&gt; &gt; &gt; &gt; easier
&gt; &gt; &gt; &gt; than trying to &#34;fix&#34; it and keep CPAN working.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Thank you very much.
&gt; &gt; &gt; &gt; Jim Keenan
</div></div>&gt; &gt;
&gt; &gt; Would you be able to try out the version of lib/File/Path.pm found
&gt; &gt; here:
&gt; &gt;
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/jkeenan/File-">https://github.com/jkeenan/File-</a></span>
&gt; &gt; Path/blob/fc457bb14afb8203258ede6fe1e40516a09db4b5/lib/File/Path.pm
&gt; &gt;
&gt; &gt; This modifies remove_tree&#40;&#41; -- but not make_path&#40;&#41;! -- to internally
&gt; &gt; separate the hashref holding options passed to the subroutine from
&gt; &gt; the
&gt; &gt; hashref holding those options &#40;once verified&#41; and internally
&gt; &gt; generated
&gt; &gt; parameters.
&gt; &gt;
</div>&gt; 
&gt; In branch, I have now modified mkpath&#40;&#41; to make the same internal
&gt; distinction between key-value pairs passed in via an options hash and
&gt; those internally generated.  However, it turns out that we were not at
&gt; risk for kind of warning you got with remove_tree&#40;&#41; because all of the
&gt; valid keys for an options hash for make_path&#40;&#41; are assigned
&gt; internally.
&gt; 
<div class="message-stanza open">&gt; &gt; No documentation updates yet.
&gt; &gt;
</div>&gt; 
&gt; I didn&#39;t see the need to change any documentation.
&gt; 
&gt; These changes are all now reflected in::
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/rpcme/File-Path/pull/41">https://github.com/rpcme/File-Path/pull/41</a></span>
&gt; 
&gt; Thank you very much.
&gt; Jim Keenan
</div>
The content of p.r. 41 was merged into master in March.  File-Path version 2.13 was released to CPAN today &#40;May 31 2017&#41;.  Marking this ticket Resolved.

Thank you very much.
Jim Keenan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1730618" href="/Public/Bug/Display.html?id=117019#txn-1730618">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;31&nbsp;20:50:58&nbsp;2017</span>
    <span class="description">jkeenan [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1730620" href="/Public/Bug/Display.html?id=117019#txn-1730620">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;May&nbsp;31&nbsp;20:51:08&nbsp;2017</span>
    <span class="description">jkeenan [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.466091</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
