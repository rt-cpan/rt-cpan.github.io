<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #105648 for DBIx-Class: DBIx::Class problem &#40;probably&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #105648 for DBIx-Class: DBIx::Class problem &#40;probably&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBIx-Class/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBIx-Class/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBIx-Class/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBIx-Class/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBIx-Class">DBIx-Class CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">105648</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBIx-Class/Active/">DBIx-Class</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
spadacciniweb [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10410-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10411-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;03&nbsp;12:42:22&nbsp;2015</span>
    <span class="description">spadacciniweb [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> DBIx::Class problem &#40;probably&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 03 Jul 2015 16:42:00 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mariano Spadaccini &lt;spadacciniweb [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have written a sotware and I want move this software on a more power
machine... but there are some problems and I do not understand if they are
related to DBIx::Class.

I have created many packeges &#40;as Agent.pm&#41; from the command:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; cd lib ; dbicdump -o debug=1 -o components=&#39;[qw&#40;Helper::Row::ToJSON
</div>InflateColumn::Serializer InflateColumn::DateTime
Helper::ResultSet::SetOperations&#41;]&#39; MySchema::Master
&#39;dbi:mysql:dbname=mydb&#39; root ; cd ..

The documentation created for the package Agent.pm is:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; perldoc Agent
</div>Agent&#40;3&#41;              User Contributed Perl Documentation
Agent&#40;3&#41;



NAME
       MySchema::Master::Result::Agent

COMPONENTS LOADED
       ·   DBIx::Class::Helper::Row::ToJSON

       ·   DBIx::Class::InflateColumn::Serializer

       ·   DBIx::Class::InflateColumn::DateTime

       ·   DBIx::Class::Helper::ResultSet::SetOperations

TABLE: &#34;agent&#34;
ACCESSORS
   id
         data_type: &#39;integer&#39;
         extra: {unsigned =&gt; 1}
         is_auto_increment: 1
         is_nullable: 0

   profilo
         data_type: &#39;enum&#39;
         default_value: &#39;Manutentore&#39;
         extra: {list =&gt;
[&#34;Manutentore&#34;,&#34;Amministrativo&#34;,&#34;Admin&#34;,&#34;AdminExt&#34;,&#34;Superadmin&#34;,&#34;Ente&#34;,&#34;AmExt&#34;,&#34;Ispettore&#34;]}
         is_nullable: 1

   id_appalto
         data_type: &#39;integer&#39;
         extra: {unsigned =&gt; 1}
         is_nullable: 1

   user
         data_type: &#39;varchar&#39;
         is_nullable: 1
         size: 15

   pass
         data_type: &#39;varchar&#39;
         is_nullable: 0
         size: 255

   disabled
         data_type: &#39;tinyint&#39;
         default_value: 0
         is_nullable: 1

   note
         data_type: &#39;text&#39;
         is_nullable: 1

   creation
         data_type: &#39;timestamp&#39;
         datetime_undef_if_invalid: 1
         default_value: &#39;0000-00-00 00:00:00&#39;
         is_nullable: 0

   last_login
         data_type: &#39;datetime&#39;
         datetime_undef_if_invalid: 1
         is_nullable: 1

   ts
         data_type: &#39;timestamp&#39;
         datetime_undef_if_invalid: 1
         default_value: current_timestamp
         is_nullable: 0
PRIMARY KEY
       ·   &#34;id&#34;

UNIQUE CONSTRAINTS
   &#34;idx_user&#34;
       ·   &#34;user&#34;

RELATIONS
   controlloes
       Type: has_many

       Related object: MySchema::Master::Result::Controllo

   ispeziones
       Type: has_many

       Related object: MySchema::Master::Result::Ispezione



perl v5.18.2                      2015-05-26
 Agent&#40;3&#41;


At the begin, in main package, I write the code:
...
sub master &#40;&#41; {
    $Master ||= MySchema::Master-&gt;connect;
    return $Master;
}
...

So, master-&gt;resultset&#40;&#39;Agent&#39;&#41; is the Agent from MySQL table remapped as
resultset Agent. I can used the DBIx::Class::ResultSet methods as
search_rs, ... without problems.
So I can write:

my &#40;$hashed_passwd&#41; = &#39;a_complicated_salted_password&#39;;
my $agent = master-&gt;resultset&#40;&#39;Agent&#39;&#41;-&gt;search&#40;{
    user =&gt; params-&gt;{login},
    pass =&gt; $hashed_passwd,
}&#41;-&gt;single;

if &#40;$agent&#41; {
    return Dumper&#40;$agent&#41;;
} else {
    return &#39;hard error&#39;;
}

and I see the object $agent.
I can also write:

if &#40;$agent&#41; {
    return Dumper&#40;$agent-&gt;get_columns&#41;;
} else {
    return &#39;hard error&#39;;
}

&#40;with &#39;s&#39; because I have loaded DBIx::Class::Row&#41;  and the output is:
$VAR1 = &#39;pass&#39;;
$VAR2 = &#39;a_complicated_salted_password&#39;;
$VAR3 = &#39;creation&#39;;
$VAR4 = &#39;0000-00-00 00:00:00&#39;;
$VAR5 = &#39;note&#39;;
$VAR6 = undef;
$VAR7 = &#39;id&#39;;
$VAR8 = &#39;28&#39;;
$VAR9 = &#39;id_appalto&#39;;
$VAR10 = undef;
$VAR11 = &#39;user&#39;;
$VAR12 = &#39;superadmin&#39;;
$VAR13 = &#39;profilo&#39;;
$VAR14 = &#39;Superadmin&#39;;
$VAR15 = &#39;last_login&#39;;
$VAR16 = &#39;2015-06-24 11:31:39&#39;;
$VAR17 = &#39;ts&#39;;
$VAR18 = &#39;2015-06-25 18:17:03&#39;;
$VAR19 = &#39;disabled&#39;;
$VAR20 = &#39;0&#39;;


Good. It look likes there is no problem.
But if I write this:

if &#40;$agent&#41; {
    return Dumper&#40;$agent-&gt;profilo&#41;;
} else {
    return &#39;hard error&#39;;
}

I get this error:
Can&#39;t call method &#34;columns&#34; on an undefined value at
/usr/local/share/perl/5.18.2/DBIx/Class/ResultSet.pm line 3527, &lt;DATA&gt; line
16.

On old machine, this code return the profile &#39;Superadmin&#39;.
I have replicated this software with many perl distributions &#40;perlbrew&#41;
perl-5.16.3
perl-5.18.4
perl-5.20.2
perl-5.22.0
and I have always the same error.

The software runs correctly on two machines:
- Ubuntu 14.04, perl v5.18.2, DBIx-Class from CPAN
- Ubuntu 12.04, perl v5.14.2, DBIx-Class-0.08250 &#40;build from source&#41;

Have you any idea?
Thanks for any tips
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;03&nbsp;13:01:59&nbsp;2015</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #105648] DBIx::Class problem &#40;probably&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 03 Jul 2015 19:01:44 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Peter Rabbitson &lt;ribasushi [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 07/03/2015 06:42 PM, Mariano Spadaccini via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; I have written a sotware and I want move this software on a more power
&gt; machine... but there are some problems and I do not understand if they are
&gt; related to DBIx::Class.
</div>

Most likely the problem is either DBIC itself or a DBIC-ecosystem 
member. In any case - this is as good place as any to try to figure this 
out.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; I have created many packeges &#40;as Agent.pm&#41; from the command:
&gt;
<div class="message-stanza open">&gt;&gt; cd lib ; dbicdump -o debug=1 -o components=&#39;[qw&#40;Helper::Row::ToJSON
</div>&gt; InflateColumn::Serializer InflateColumn::DateTime
&gt; Helper::ResultSet::SetOperations&#41;]&#39; MySchema::Master
&gt; &#39;dbi:mysql:dbname=mydb&#39; root ; cd ..
</div>

Are you running this on *all* machines, or you&#39;ve created Agent.pm once, 
and are using it from there on out? What is the version of 
DBIx::Class::Schema::Loader &#40;separate module&#41; on the machines in question?


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;
&gt; if &#40;$agent&#41; {
&gt;      return Dumper&#40;$agent-&gt;profilo&#41;;
&gt; } else {
&gt;      return &#39;hard error&#39;;
&gt; }
&gt;
&gt; I get this error:
&gt; Can&#39;t call method &#34;columns&#34; on an undefined value at
&gt; /usr/local/share/perl/5.18.2/DBIx/Class/ResultSet.pm line 3527, &lt;DATA&gt; line
&gt; 16.
</div>

It is not clear which version of DBIx::Class gave you the above error.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The software runs correctly on two machines:
&gt; - Ubuntu 14.04, perl v5.18.2, DBIx-Class from CPAN
&gt; - Ubuntu 12.04, perl v5.14.2, DBIx-Class-0.08250 &#40;build from source&#41;
&gt;
</div>

It is even more confusing what fails when given the above. Please make 
sure to list for every works/doesn&#39;t work case the following: 
DBIx::Class version, DBIx::Class::Schema::Loader version and full error 
&#40;stacktrace&#41; as seen when you set the environment variable DBIC_TRACE=1

Cheers
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;03&nbsp;13:02:00&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;05&nbsp;22:54:06&nbsp;2015</span>
    <span class="description">spadacciniweb [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #105648] DBIx::Class problem &#40;probably&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 06 Jul 2015 02:53:32 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mariano Spadaccini &lt;spadacciniweb [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you for the tips.
Today I have run the software in perlbrew environment with the following
distributions:
- perl-5.18.4, DBIx::Class v0.082820, DBIx::Class::Schema::Loader v0.07043
- perl-5.20.2, DBIx::Class v0.082820, DBIx::Class::Schema::Loader v0.07043
- perl-5.22.0, DBIx::Class v0.082820, DBIx::Class::Schema::Loader v0.07043

Every time I had an error as reported last time:
Can&#39;t call method &#34;schema&#34; on an undefined value at
/home/cc/perl5/perlbrew/perls/perl-5.18.4/lib/site_perl/5.18.4/DBIx/Class/ResultSet.pm
line 1884.
&#40;for perl version 5.18.4, same for other versions&#41;

Other details &#40;as print variables, dump object&#41; in previous email.

I remember you that the software run right in other environments:
- perl v5.18.2 - DBIx::Class v0.08250 - DBIx::Class::Schema::Loader v0.07039
- perl v5.18.2 - DBIx::Class v0.082801 - no DBIx::Class::Schema::Loader
&#40;put the same .pm created with previous machine&#41;
- perl v5.14.2 - DBIx::Class v0.08250 - no DBIx::Class::Schema::Loader
&#40;put the same .pm created with previous machine&#41;

In attachment, dbitrace with perl-5.18.4. It looks like there is not an
error... but there is &#40;&#34;Can&#39;t call method &#34;schema&#34; on an undefined
value...&#34;&#41;.

Hope I have reported enough elements.
</div></div>

<div class="messagebody">
</div>
</div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;06&nbsp;01:48:41&nbsp;2015</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #105648] DBIx::Class problem &#40;probably&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 06 Jul 2015 07:48:22 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Peter Rabbitson &lt;ribasushi [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 07/06/2015 04:54 AM, Mariano Spadaccini via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Other details &#40;as print variables, dump object&#41; in previous email.
&gt;
&gt; I remember you that the software run right in other environments:
&gt; - perl v5.18.2 - DBIx::Class v0.08250 - DBIx::Class::Schema::Loader v0.07039
&gt; - perl v5.18.2 - DBIx::Class v0.082801 - no DBIx::Class::Schema::Loader
&gt; &#40;put the same .pm created with previous machine&#41;
&gt; - perl v5.14.2 - DBIx::Class v0.08250 - no DBIx::Class::Schema::Loader
&gt; &#40;put the same .pm created with previous machine&#41;
</div>
Aha, this is why I got confused. In the beginning you said:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The software runs correctly on two machines:
&gt; - Ubuntu 14.04, perl v5.18.2, DBIx-Class from CPAN
</div>
Which implied 0.082820 worked &#40;this is what&#39;s been on CPAN since March&#41;.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; In attachment, dbitrace with perl-5.18.4. It looks like there is not an
&gt; error... but there is &#40;&#34;Can&#39;t call method &#34;schema&#34; on an undefined
&gt; value...&#34;&#41;.
</div>
I asked for DBIC_TRACE=1, not DBI_TRACE=1 &#40;note the C&#41;. In any case this 
would not have worked either.  Instead please install Devel::Confess, 
and load it *before* anything else, and get me the resulting stacktrace. 
Like so&#34;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; perl -MDevel::Confess -MDBIx::Class::Schema -e 
&gt; &#39;DBIx::Class::Schema-&gt;connect-&gt;storage-&gt;ensure_connected&#39;
</div>

Please only test with one perl version - it has nothing to do with that, 
it&#39;s strictly a DBIC-internals problem, I jut can&#39;t figure out how you 
triggered the failure condition.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hope I have reported enough elements.
&gt;
</div>
Need a bit more ;&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;06&nbsp;06:09:44&nbsp;2015</span>
    <span class="description">spadacciniweb [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #105648] DBIx::Class problem &#40;probably&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 06 Jul 2015 10:09:16 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mariano Spadaccini &lt;spadacciniweb [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;
&gt; I asked for DBIC_TRACE=1, not DBI_TRACE=1 &#40;note the C&#41;.
</div>

ok... however I see only SQL in both cases... nothing to report


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In any case this
&gt; would not have worked either.  Instead please install Devel::Confess,
&gt; and load it *before* anything else, and get me the resulting stacktrace.
&gt;
</div>
ok,  In attach the runtime error stacktrace.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Need a bit more ;&#41;
&gt;
&gt;
</div>Probably now are enough :-&#41;
Thank you
</div></div>

<div class="messagebody">
</div>
</div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;06&nbsp;06:31:45&nbsp;2015</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #105648] DBIx::Class problem &#40;probably&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 06 Jul 2015 12:31:22 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Peter Rabbitson &lt;ribasushi [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 07/06/2015 12:09 PM, Mariano Spadaccini via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;         Queue: DBIx-Class
&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=105648">https://rt.cpan.org/Ticket/Display.html?id=105648</a></span> &gt;
&gt;
<div class="message-stanza open">&gt;&gt;
&gt;&gt; I asked for DBIC_TRACE=1, not DBI_TRACE=1 &#40;note the C&#41;.
</div>&gt;
&gt; ok... however I see only SQL in both cases... nothing to report
</div>
Hence why I said &#34;... In any case this would not have worked either...&#34;


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Probably now are enough :-&#41;
</div>
There is nothing  between DBIC 0.082801 and 0.082820 that would explain 
your ReultSource instance getting lost &#40;or perhaps never set&#41; within the 
ResultSet instance.

Can you please show &#34;lib/ChumConsulting/Web.pm&#34;? Ideally seeing the 
whole file would be best, but at least the code flow around line 142...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;06&nbsp;07:05:29&nbsp;2015</span>
    <span class="description">spadacciniweb [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #105648] DBIx::Class problem &#40;probably&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 06 Jul 2015 11:04:58 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mariano Spadaccini &lt;spadacciniweb [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">-- before 130 --
 if &#40;params-&gt;{login}&#41; {
        my &#40;$hashed_passwd&#41; = master-&gt;storage-&gt;dbh-&gt;selectrow_array&#40;&#34;SELECT
PASSWORD&#40;?&#41;&#34;, {}, params-&gt;{passwd}.salt&#40;&#41;&#41;;
        my $agent = master-&gt;resultset&#40;&#39;Agent&#39;&#41;-&gt;search&#40;{
            user   =&gt; params-&gt;{login},
            pass  =&gt; $hashed_passwd,
        }&#41;-&gt;single;

        if &#40;!$agent&#41; {
            ChumConsulting::Common::logger-&gt;info&#40;&#39;agent %s failed to login
from %s&#39;, params-&gt;{login}, request-&gt;env-&gt;{&#39;HTTP_X_REAL_IP&#39;} ||
request-&gt;address&#41;;
            flash error =&gt; &#39;Access denied: bad username or password.&#39;;
-- 139.5 --
        } else {
            session &#39;agent&#39; =&gt; $agent;
            $agent-&gt;update&#40;{ last_login =&gt; \ &#34; NOW&#40;&#41;&#34; }&#41;;
            ChumConsulting::Web::chumconsulting_log&#40;&#39;info&#39; =&gt; &#39;agent %s
logged in from %s&#39;, $agent-&gt;user, request-&gt;env-&gt;{&#39;HTTP_X_REAL_IP&#39;} ||
request-&gt;address&#41;;
            flash success =&gt; sprintf &#39;Ciao &lt;strong&gt;%s&lt;/strong&gt;.&#39;,
                $agent-&gt;user;
...

If I put # at line 142 and re-run the software, I have the stacktrace in
attachment.
</div></div>

<div class="messagebody">
</div>
</div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;06&nbsp;07:21:56&nbsp;2015</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #105648] DBIx::Class problem &#40;probably&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 06 Jul 2015 13:21:29 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Peter Rabbitson &lt;ribasushi [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 07/06/2015 01:05 PM, Mariano Spadaccini via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;         Queue: DBIx-Class
&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=105648">https://rt.cpan.org/Ticket/Display.html?id=105648</a></span> &gt;
&gt;
&gt; -- before 130 --
&gt;   if &#40;params-&gt;{login}&#41; {
&gt;          my &#40;$hashed_passwd&#41; = master-&gt;storage-&gt;dbh-&gt;selectrow_array&#40;&#34;SELECT
&gt; PASSWORD&#40;?&#41;&#34;, {}, params-&gt;{passwd}.salt&#40;&#41;&#41;;
&gt;          my $agent = master-&gt;resultset&#40;&#39;Agent&#39;&#41;-&gt;search&#40;{
&gt;              user   =&gt; params-&gt;{login},
&gt;              pass  =&gt; $hashed_passwd,
&gt;          }&#41;-&gt;single;
&gt;
&gt;          if &#40;!$agent&#41; {
&gt;              ChumConsulting::Common::logger-&gt;info&#40;&#39;agent %s failed to login
&gt; from %s&#39;, params-&gt;{login}, request-&gt;env-&gt;{&#39;HTTP_X_REAL_IP&#39;} ||
&gt; request-&gt;address&#41;;
&gt;              flash error =&gt; &#39;Access denied: bad username or password.&#39;;
&gt; -- 139.5 --
&gt;          } else {
&gt;              session &#39;agent&#39; =&gt; $agent;
&gt;              $agent-&gt;update&#40;{ last_login =&gt; \ &#34; NOW&#40;&#41;&#34; }&#41;;
&gt;              ChumConsulting::Web::chumconsulting_log&#40;&#39;info&#39; =&gt; &#39;agent %s
&gt; logged in from %s&#39;, $agent-&gt;user, request-&gt;env-&gt;{&#39;HTTP_X_REAL_IP&#39;} ||
&gt; request-&gt;address&#41;;
&gt;              flash success =&gt; sprintf &#39;Ciao &lt;strong&gt;%s&lt;/strong&gt;.&#39;,
&gt;                  $agent-&gt;user;
&gt; ...
&gt;
&gt; If I put # at line 142 and re-run the software, I have the stacktrace in
&gt; attachment.
&gt;
</div>
It is rather difficult to debug things this way. For example given the 
above it is near-impossible to tell what is &#34;line 142&#34;.

The only thing I can deduce from all the information you&#39;ve given me so 
far, is that you are somehow freezing/thawing the ResultSet object 
losing its ResultSource. There were no changes in DBIC regarding this 
behavior for ~3 years, so you need to look at the rest of your stack. In 
particular see which versions of the Dancer session plugins you have and 
try to figure out what exactly is causing your problem.

A decent module to help with that is 
<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/Module::Versions::Report#SYNOPSIS">https://metacpan.org/pod/Module::Versions::Report#SYNOPSIS</a></span>

You need to arrive at a definitive &#34;When I change this module to this 
version, while *everything else stays the same* - things break&#34;, whereas 
now you are at &#34;if I use DBIx::Class 0.082801 and a hundred modules, 
things behave differently to when I use DBIx::Class 0.082820 and an 
unknown set of the other hundred modules&#34;.

Cheers!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;06&nbsp;10:18:14&nbsp;2015</span>
    <span class="description">spadacciniweb [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #105648] DBIx::Class problem &#40;probably&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 06 Jul 2015 14:17:50 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mariano Spadaccini &lt;spadacciniweb [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;
&gt; It is rather difficult to debug things this way [..]
&gt;
</div>
Yes, I understand


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; The only thing I can deduce from all the information you&#39;ve given me so
&gt; far, is that you are somehow freezing/thawing the ResultSet object
&gt; losing its ResultSource.
</div>

I can not show the code due company policy. But, if you want, I can allow
 you ssh access to machine in controlled environment.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There were no changes in DBIC regarding this
&gt; behavior for ~3 years, so you need to look at the rest of your stack. In
&gt; particular see which versions of the Dancer session plugins you have and
&gt; try to figure out what exactly is causing your problem.
&gt;
</div>
ok


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; A decent module to help with that is
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/Module::Versions::Report#SYNOPSIS">https://metacpan.org/pod/Module::Versions::Report#SYNOPSIS</a></span>
&gt;
&gt;
</div>Perfect, very important module.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You need to arrive at a definitive &#34;When I change this module to this
&gt; version, while *everything else stays the same* - things break&#34;, whereas
&gt; now you are at &#34;if I use DBIx::Class 0.082801 and a hundred modules,
&gt; things behave differently to when I use DBIx::Class 0.082820 and an
&gt; unknown set of the other hundred modules&#34;.
&gt;
</div>
Yes... very clear.

Thank you for you tips
I will add news as soon as possible
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;14&nbsp;03:48:03&nbsp;2015</span>
    <span class="description">spadacciniweb [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #105648] DBIx::Class problem &#40;probably&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 14 Jul 2015 07:47:41 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mariano Spadaccini &lt;spadacciniweb [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I resolved the problem through this steps:
- into cpan set  &#39;o conf urllist&#39; with &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://backpan.perl.org/&#39;">http://backpan.perl.org/&#39;</a></span>
- &#39;cpanm -f Storable@2.39&#39;

So, the downgrade of Storable.pm module fix the problem.

Thank you.


Il giorno lun 6 lug 2015 alle ore 16:17 Mariano Spadaccini &lt;
spadacciniweb@gmail.com&gt; ha scritto:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
<div class="message-stanza open">&gt;&gt; It is rather difficult to debug things this way [..]
&gt;&gt;
</div>&gt;
&gt; Yes, I understand
&gt;
&gt;
<div class="message-stanza open">&gt;&gt;
&gt;&gt; The only thing I can deduce from all the information you&#39;ve given me so
&gt;&gt; far, is that you are somehow freezing/thawing the ResultSet object
&gt;&gt; losing its ResultSource.
</div>&gt;
&gt;
&gt; I can not show the code due company policy. But, if you want, I can allow
&gt;  you ssh access to machine in controlled environment.
&gt;
&gt;
<div class="message-stanza open">&gt;&gt; There were no changes in DBIC regarding this
&gt;&gt; behavior for ~3 years, so you need to look at the rest of your stack. In
&gt;&gt; particular see which versions of the Dancer session plugins you have and
&gt;&gt; try to figure out what exactly is causing your problem.
&gt;&gt;
</div>&gt;
&gt; ok
&gt;
&gt;
<div class="message-stanza open">&gt;&gt;
&gt;&gt; A decent module to help with that is
&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/Module::Versions::Report#SYNOPSIS">https://metacpan.org/pod/Module::Versions::Report#SYNOPSIS</a></span>
&gt;&gt;
&gt;&gt;
</div>&gt; Perfect, very important module.
&gt;
&gt;
<div class="message-stanza open">&gt;&gt; You need to arrive at a definitive &#34;When I change this module to this
&gt;&gt; version, while *everything else stays the same* - things break&#34;, whereas
&gt;&gt; now you are at &#34;if I use DBIx::Class 0.082801 and a hundred modules,
&gt;&gt; things behave differently to when I use DBIx::Class 0.082820 and an
&gt;&gt; unknown set of the other hundred modules&#34;.
&gt;&gt;
</div>&gt;
&gt; Yes... very clear.
&gt;
&gt; Thank you for you tips
&gt; I will add news as soon as possible
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;27&nbsp;21:01:51&nbsp;2015</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jul 14 09:48:03 2015, spadacciniweb@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I resolved the problem through this steps:
&gt; - into cpan set  &#39;o conf urllist&#39; with &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://backpan.perl.org/&#39;">http://backpan.perl.org/&#39;</a></span>
&gt; - &#39;cpanm -f Storable@2.39&#39;
&gt; 
&gt; So, the downgrade of Storable.pm module fix the problem.
&gt; 
</div>
So one reason for this would be that Storable *by design* will not read serializations created by a more recent version of Storable &#40;the reverse is not true - the newest Storable is supposed to be able to read any binary image produced by any version of Storable&#41;.

So if you were using two installs, one with newer storable, one with older, and they were *sharing* a database of serialization binaries - this would be the explanation for your problem. The only thing I need to fix is make the exception clearer.

However if this is *not* the case: could you determine which version of Storable works and which doesn&#39;t? Preferably bisecting to &#34;it starts breaking from this version onward&#34; ? The reason I am asking you to do this, is that we may be looking at a much deeper perl-level bug, which would be great to address.

Thanks in advance!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;04&nbsp;12:46:07&nbsp;2015</span>
    <span class="description">spadacciniweb [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #105648] DBIx::Class problem &#40;probably&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 04 Aug 2015 16:45:48 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mariano Spadaccini &lt;spadacciniweb [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry for the delay.

The first is not my case.
Tomorrow I will try.

Il giorno mar 28 lug 2015 alle ore 03:01 Peter Rabbitson via RT &lt;
bug-DBIx-Class@rt.cpan.org&gt; ha scritto:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=105648">https://rt.cpan.org/Ticket/Display.html?id=105648</a></span> &gt;
&gt;
&gt; On Tue Jul 14 09:48:03 2015, spadacciniweb@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; I resolved the problem through this steps:
&gt; &gt; - into cpan set  &#39;o conf urllist&#39; with &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://backpan.perl.org/&#39;">http://backpan.perl.org/&#39;</a></span>
&gt; &gt; - &#39;cpanm -f Storable@2.39&#39;
&gt; &gt;
&gt; &gt; So, the downgrade of Storable.pm module fix the problem.
&gt; &gt;
</div>&gt;
&gt; So one reason for this would be that Storable *by design* will not read
&gt; serializations created by a more recent version of Storable &#40;the reverse is
&gt; not true - the newest Storable is supposed to be able to read any binary
&gt; image produced by any version of Storable&#41;.
&gt;
&gt; So if you were using two installs, one with newer storable, one with
&gt; older, and they were *sharing* a database of serialization binaries - this
&gt; would be the explanation for your problem. The only thing I need to fix is
&gt; make the exception clearer.
&gt;
&gt; However if this is *not* the case: could you determine which version of
&gt; Storable works and which doesn&#39;t? Preferably bisecting to &#34;it starts
&gt; breaking from this version onward&#34; ? The reason I am asking you to do this,
&gt; is that we may be looking at a much deeper perl-level bug, which would be
&gt; great to address.
&gt;
&gt; Thanks in advance!
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;05&nbsp;11:56:47&nbsp;2015</span>
    <span class="description">spadacciniweb [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #105648] DBIx::Class problem &#40;probably&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 05 Aug 2015 15:56:21 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mariano Spadaccini &lt;spadacciniweb [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Today I replicated the problem with the last version of the modules.

The problem is still present &#40;&#34;Can&#39;t call method &#34;columns&#34; on an undefined
value at ...&#34;&#41;.
After many tests, the problem seems about DBIx::Class &#40;v0.082820&#41; ecosystem.

If I downgrade DBIx::Class::Helpers through the command
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; cpanm -f DBIx::Class::Helpers@2.023007
</div>the software works right.

If I try the command
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; cpanm -f DBIx::Class::Helpers@2.023008
</div>! Finding DBIx::Class::Helpers &#40;== 2.023008&#41; on cpanmetadb failed.
Found DBIx::Class::Helpers 2.031000 which doesn&#39;t satisfy == 2.023008.

So,
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; cpanm -f DBIx::Class::Helpers@2.031000
</div>and the software is broken again.

PS:
This is the list of repositories.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
cpan[3]&gt; o conf urllist
    urllist
0 [<span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpan.org/">http://www.cpan.org/</a></span>]
1 [<span class="clickylink"><a target="new" rel="nofollow" href="http://backpan.perl.org/">http://backpan.perl.org/</a></span>]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


Il giorno mar 4 ago 2015 alle ore 18:45 Mariano Spadaccini &lt;
spadacciniweb@gmail.com&gt; ha scritto:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sorry for the delay.
&gt;
&gt; The first is not my case.
&gt; Tomorrow I will try.
&gt;
&gt; Il giorno mar 28 lug 2015 alle ore 03:01 Peter Rabbitson via RT &lt;
&gt; bug-DBIx-Class@rt.cpan.org&gt; ha scritto:
&gt;
<div class="message-stanza open">&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=105648">https://rt.cpan.org/Ticket/Display.html?id=105648</a></span> &gt;
&gt;&gt;
&gt;&gt; On Tue Jul 14 09:48:03 2015, spadacciniweb@gmail.com wrote:
<div class="message-stanza open">&gt;&gt; &gt; I resolved the problem through this steps:
&gt;&gt; &gt; - into cpan set  &#39;o conf urllist&#39; with &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://backpan.perl.org/&#39;">http://backpan.perl.org/&#39;</a></span>
&gt;&gt; &gt; - &#39;cpanm -f Storable@2.39&#39;
&gt;&gt; &gt;
&gt;&gt; &gt; So, the downgrade of Storable.pm module fix the problem.
&gt;&gt; &gt;
</div>&gt;&gt;
&gt;&gt; So one reason for this would be that Storable *by design* will not read
&gt;&gt; serializations created by a more recent version of Storable &#40;the reverse is
&gt;&gt; not true - the newest Storable is supposed to be able to read any binary
&gt;&gt; image produced by any version of Storable&#41;.
&gt;&gt;
&gt;&gt; So if you were using two installs, one with newer storable, one with
&gt;&gt; older, and they were *sharing* a database of serialization binaries - this
&gt;&gt; would be the explanation for your problem. The only thing I need to fix is
&gt;&gt; make the exception clearer.
&gt;&gt;
&gt;&gt; However if this is *not* the case: could you determine which version of
&gt;&gt; Storable works and which doesn&#39;t? Preferably bisecting to &#34;it starts
&gt;&gt; breaking from this version onward&#34; ? The reason I am asking you to do this,
&gt;&gt; is that we may be looking at a much deeper perl-level bug, which would be
&gt;&gt; great to address.
&gt;&gt;
&gt;&gt; Thanks in advance!
&gt;&gt;
</div>&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;05&nbsp;12:07:35&nbsp;2015</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #105648] DBIx::Class problem &#40;probably&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 05 Aug 2015 18:07:01 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Peter Rabbitson &lt;ribasushi [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 08/05/2015 05:56 PM, Mariano Spadaccini via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;         Queue: DBIx-Class
&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=105648">https://rt.cpan.org/Ticket/Display.html?id=105648</a></span> &gt;
&gt;
&gt; Today I replicated the problem with the last version of the modules.
&gt;
&gt; The problem is still present &#40;&#34;Can&#39;t call method &#34;columns&#34; on an undefined
&gt; value at ...&#34;&#41;.
&gt; After many tests, the problem seems about DBIx::Class &#40;v0.082820&#41; ecosystem.
&gt;
&gt; If I downgrade DBIx::Class::Helpers through the command
<div class="message-stanza open">&gt;&gt; cpanm -f DBIx::Class::Helpers@2.023007
</div>&gt; the software works right.
&gt;
&gt; If I try the command
<div class="message-stanza open">&gt;&gt; cpanm -f DBIx::Class::Helpers@2.023008
</div>&gt; ! Finding DBIx::Class::Helpers &#40;== 2.023008&#41; on cpanmetadb failed.
&gt; Found DBIx::Class::Helpers 2.031000 which doesn&#39;t satisfy == 2.023008.
</div>
This is happening because the author never released a 2.023008. The 
version after 2.023007 is 2.024000. You can obtain the complete list of 
versions by clicking the dropdown on metacpan: 
<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/DBIx::Class::Helpers">https://metacpan.org/pod/DBIx::Class::Helpers</a></span> &#40;the little down-pointing 
triangle left of the dist name by the orange &#34;like&#34; count&#41;.

Please try to narrow down the problematic version further before we proceed.

Thank you!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;05&nbsp;12:42:29&nbsp;2015</span>
    <span class="description">spadacciniweb [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #105648] DBIx::Class problem &#40;probably&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 05 Aug 2015 16:42:07 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mariano Spadaccini &lt;spadacciniweb [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I apologize... I would have known.

I have not problems with DBIx::Class::Helpers  up to v2.025001.

From 2.025002 I got the follow problem:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Can&#39;t call method &#34;schema&#34; on an undefined value at
</div>/home/dev/perl5/perlbrew/perls/perl-5.22.0/lib/site_perl/5.22.0/DBIx/Class/ResultSet.pm
line 1884.

Thank you

Il giorno mer 5 ago 2015 alle ore 18:07 Peter Rabbitson via RT &lt;
bug-DBIx-Class@rt.cpan.org&gt; ha scritto:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=105648">https://rt.cpan.org/Ticket/Display.html?id=105648</a></span> &gt;
&gt;
&gt; On 08/05/2015 05:56 PM, Mariano Spadaccini via RT wrote:
<div class="message-stanza open">&gt; &gt;         Queue: DBIx-Class
&gt; &gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=105648">https://rt.cpan.org/Ticket/Display.html?id=105648</a></span> &gt;
&gt; &gt;
&gt; &gt; Today I replicated the problem with the last version of the modules.
&gt; &gt;
&gt; &gt; The problem is still present &#40;&#34;Can&#39;t call method &#34;columns&#34; on an
</div>&gt; undefined
<div class="message-stanza open">&gt; &gt; value at ...&#34;&#41;.
&gt; &gt; After many tests, the problem seems about DBIx::Class &#40;v0.082820&#41;
</div>&gt; ecosystem.
<div class="message-stanza open">&gt; &gt;
&gt; &gt; If I downgrade DBIx::Class::Helpers through the command
<div class="message-stanza open">&gt; &gt;&gt; cpanm -f DBIx::Class::Helpers@2.023007
</div>&gt; &gt; the software works right.
&gt; &gt;
&gt; &gt; If I try the command
<div class="message-stanza open">&gt; &gt;&gt; cpanm -f DBIx::Class::Helpers@2.023008
</div>&gt; &gt; ! Finding DBIx::Class::Helpers &#40;== 2.023008&#41; on cpanmetadb failed.
&gt; &gt; Found DBIx::Class::Helpers 2.031000 which doesn&#39;t satisfy == 2.023008.
</div>&gt;
&gt; This is happening because the author never released a 2.023008. The
&gt; version after 2.023007 is 2.024000. You can obtain the complete list of
&gt; versions by clicking the dropdown on metacpan:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/DBIx::Class::Helpers">https://metacpan.org/pod/DBIx::Class::Helpers</a></span> &#40;the little down-pointing
&gt; triangle left of the dist name by the orange &#34;like&#34; count&#41;.
&gt;
&gt; Please try to narrow down the problematic version further before we
&gt; proceed.
&gt;
&gt; Thank you!
&gt;
&gt;
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;09&nbsp;07:59:37&nbsp;2016</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Aug 05 18:42:29 2015, spadacciniweb@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; I have not problems with DBIx::Class::Helpers  up to v2.025001.
&gt; 
&gt; From 2.025002 I got the follow problem:
<div class="message-stanza open">&gt; &gt; Can&#39;t call method &#34;schema&#34; on an undefined value at
</div>&gt; /home/dev/perl5/perlbrew/perls/perl-
&gt; 5.22.0/lib/site_perl/5.22.0/DBIx/Class/ResultSet.pm
&gt; line 1884.
</div>
Hi!

This issue got dropped on the floor somehow it seems. Is this still a problem? Or did a more recent DBIx::Class::Helpers fix everything?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;30&nbsp;14:34:28&nbsp;2016</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">No response - closing.

You are very much encouraged to reopen this if the problem is not fully resolved.

Cheers!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;30&nbsp;14:34:30&nbsp;2016</span>
    <span class="description">ribasushi [...] leporine.io -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
