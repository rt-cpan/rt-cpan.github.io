<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #71747 for ExtUtils-MakeMaker: EU:MM_Unix and userelocatableinc</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #71747 for ExtUtils-MakeMaker: EU:MM_Unix and userelocatableinc</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/ExtUtils-MakeMaker/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/ExtUtils-MakeMaker/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/ExtUtils-MakeMaker/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/ExtUtils-MakeMaker/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/ExtUtils-MakeMaker">ExtUtils-MakeMaker CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">71747</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/ExtUtils-MakeMaker/Active/">ExtUtils-MakeMaker</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
BRICKER [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
William.Ricker [...] fmr.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-12494-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
6.57_05    </td>
  </tr>
  <tr id="CF-12495-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




build.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/991521/516278/build.txt">
Mon Oct 24 18:09:31 2011 (1.6k) by William.Ricker [...] fmr.com
</a>
</font></li>
</ul>


conf.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/991521/516279/conf.txt">
Mon Oct 24 18:09:31 2011 (2.3k) by William.Ricker [...] fmr.com
</a>
</font></li>
</ul>


ExUtilFAIL.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/988811/514734/ExUtilFAIL.txt">
Mon Oct 17 15:04:50 2011 (864b) by BRICKER [...] cpan.org
</a>
</font></li>
</ul>


perl.cfg<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/988835/514750/perl.cfg">
Mon Oct 17 18:20:58 2011 (3.2k) by BRICKER [...] cpan.org
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/988811/514735/perl.cfg">
Mon Oct 17 15:04:50 2011 (2.2k) by BRICKER [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;17&nbsp;15:04:50&nbsp;2011</span>
    <span class="description">BRICKER [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> William.Ricker [...] fmr.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> EU:MM_Unix and userelocatableinc</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am attempting to build  Perl 5.14.2 with userelocatableinc . 
Trying to build more modules in a temporary DESTDIR fails.

Warning: PERL_LIB &#40;../lib/5.14.2&#41; seems not to be a perl library directory
        &#40;strict.pm not found&#41; at
/export/home/a273121/test/perl5/elsewhere/perl/lib/5.14.2/ExtUtils/MM_Unix.pm
line 1735.
and then tells me Perl arch aix-64int doesn&#39;t match Config arch
aix-64int &#40;so it&#39;s loaded Config ok&#41; but makefile created can&#39;t find
file or target ../lib/5.14.2/aix-64int/Config.pm


I am using userelocatableinc since local IT filesystem convention does
not permit applications team supported code in nonvarying FS name like
/opt as is norm elsewere.  


My intent is to
use -Dusesitecustomize &#39;s special pl file in final location to patch
paths but am using classical ENV After 
   make install DESTDIR=$HOME/test/perl5
for building additional modules &#40;list a bit long to build with perl&#41; 
I expect setting  PATH &#38; PERLLIB at shell export env to give me a
temporarily working perl for running cpanp to build DBI, Ack, etc before
bundling for distribution. MM_Unix diagnostics and path analysis defeat
cpan shell, cpanp shell, and manual wget/tar/perl Makefile.PL .

Attached find output from Makefile.PL &#40;in HTTP-Tiny Dist&#41; with Perl -V
also attached.  Similar results occur with CPAN shell invoked from Perl
build-extras and cpan or cpanp shell from shell.

Maybe I just need better docs on how to *use* a perl built
-Duserelocatableinc -- i will try sitecustomize.pl -- but not being able
to use build-extra-modules -Duserelocatableinc with Perl is an issue
somewhere. 

I&#39;m only rating this Normal as it&#39;s only critical to the few of us
trying -Duserelocatableinc &#40;for which I was one of the original
requestors back in 5.8.8 timeframe, for this very use-case&#41;.

The cc: email is $DayJob where this build lives.

Thanks 
Bill Ricker
aka N1VUX aka William.Ricker@fmr.com
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> ExUtilFAIL.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">cd HTTP-Tiny-0.013

PERL514 $ perl Makefile.PL
Checking if your kit is complete...
Looks good
Warning: PERL_LIB &#40;../lib/5.14.2&#41; seems not to be a perl library directory
        &#40;strict.pm not found&#41; at /export/home/a273121/test/perl5/elsewhere/perl/lib/5.14.2/ExtUtils/MM_Unix.pm line 1735.
Have /export/home/a273121/test/perl5/elsewhere/perl/lib/5.14.2/aix-64int
Want ../lib/5.14.2/aix-64int
Your perl and your Config.pm seem to have different ideas about the
architecture they are running on.
Perl thinks: [aix-64int]
Config says: [aix-64int]
This may or may not cause problems. Please check your installation of perl
if you have problems building this extension.
Writing Makefile for HTTP::Tiny
Writing MYMETA.yml
PERL514 $
PERL514 $ make
make: Cannot find a rule to create target ../lib/5.14.2/aix-64int/Config.pm from dependencies.
Stop.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> perl.cfg</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/988811/514735/perl.cfg">Download perl.cfg</a><br />
<span class="downloadcontenttype">application/octet-stream 2.2k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;17&nbsp;18:20:57&nbsp;2011</span>
    <span class="description">BRICKER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> William.Ricker [...] fmr.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ignore first perl.cfg uploaded, that was from wrong path and sees vendor
5.8.8 :-&#40;

&#40;For some reason Reply to Requestors is the Update type; this is
actually a requestor update to report&#41;
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> perl.cfg</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/988835/514750/perl.cfg">Download perl.cfg</a><br />
<span class="downloadcontenttype">application/octet-stream 3.2k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;17&nbsp;18:21:07&nbsp;2011</span>
    <span class="description">BRICKER [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;19&nbsp;17:56:37&nbsp;2011</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #71747] EU:MM_Unix and userelocatableinc</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 19 Oct 2011 14:56:26 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2011.10.17 12:04 PM, William D &#40;Bill&#41; Ricker via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I am attempting to build  Perl 5.14.2 with userelocatableinc . 
&gt; Trying to build more modules in a temporary DESTDIR fails.
&gt; 
&gt; Warning: PERL_LIB &#40;../lib/5.14.2&#41; seems not to be a perl library directory
&gt;         &#40;strict.pm not found&#41; at
&gt; /export/home/a273121/test/perl5/elsewhere/perl/lib/5.14.2/ExtUtils/MM_Unix.pm
&gt; line 1735.
&gt; and then tells me Perl arch aix-64int doesn&#39;t match Config arch
&gt; aix-64int &#40;so it&#39;s loaded Config ok&#41; but makefile created can&#39;t find
&gt; file or target ../lib/5.14.2/aix-64int/Config.pm
</div>
Short version:  Unset PERLLIB.  &#40;And don&#39;t download CPAN modules into your
perl directory.&#41;  You should not need PERLLIB set to point at the Perl library
paths.  It&#39;s redundant, perl should take care of that for you.  That&#39;s the
point of userelocatbleinc.

This one took some puzzling, I don&#39;t run userelocatableinc and had to try it
out for myself.  If I&#39;m correct you have PERLLIB set to replicate the location
of Perl libraries?  And you unpacked HTTP-Tiny into
/export/home/a273121/test/perl5/elsewhere/perl/HTTP-Tiny?  Those two things
will confuse MakeMaker as to which Config.pm perl has loaded.

We had issues with the architecture check in the past.  The purpose is both to
check that you&#39;ve loaded the Config.pm for your perl binary and not some
other... or to check that the loaded Config.pm matches the architecture of
your perl binary.  It&#39;s not entirely clear which is correct.  It currently
does the former and reports the latter. :-/

I believe it&#39;s getting confused because it doesn&#39;t realize that
/export/home/a273121/test/perl5/elsewhere/perl/lib/5.14.2/aix-64int and
../lib/5.14.2/aix-64int are the same directory.  That could be made smarter,
but having a redundant PERLLIB will bang into something else down the line.

Please let me know how it works out.


-- 
60. &#34;The Giant Space Ants&#34; are not at the top of my chain of command.
    -- The 213 Things Skippy Is No Longer Allowed To Do In The U.S. Army
           <span class="clickylink"><a target="new" rel="nofollow" href="http://skippyslist.com/list/">http://skippyslist.com/list/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;19&nbsp;17:59:24&nbsp;2011</span>
    <span class="description">mschwern [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;19&nbsp;23:03:10&nbsp;2011</span>
    <span class="description">bill.n1vux [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> BRICKER [...] cpan.org, William.Ricker [...] fmr.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #71747] EU:MM_Unix and userelocatableinc</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 19 Oct 2011 23:02:42 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Bill Ricker &lt;bill.n1vux [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear Schwern,

I&#39;m moderately sure I tried original userelocatableinc without  PERLLIB and
it wouldn&#39;t even find feature.pm to process -E &#39;say&#39;, let alone build
modules.

I did not download the cpan module to perl dir. HTTP-Tiny was un-tarred in
$HOME.
&#40;Not via CPANP since 5.14.2 bundles cpanp that prefers Tiny but a Tiny that
doesn&#39;t do http_proxy.  My $DayJob firewall is finicky, robotic  FTP usually
won&#39;t go.&#41;

I had same or similar MM-Unix error message when Perl 5.14.2 Build had
Configure specified to do extra modules .

I get the feeling userelocatableinc isn&#39;t much used, not much discussion
on-line.
&#40;If $DayJob&#39;s core IT let me package a divisional perl for deploy to
/opt/$div/perl5$nn/ and include that in our deploy recipe, life would be so
much easier. Coming with the cloud, but that won&#39;t help my AIX legacy
platforms where DBI code lives.&#41;

I&#39;ll give it another try. Maybe the problem is deeper than MM-Unix. I agree,
I don&#39;t expect to need PERLLIB with userelocatableinc.


-- 
Bill Ricker  BRICKER@cpan aka n1vux  William.Ricker@fmr.com
@n1vux bill.n1vux@gmail.com
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;19&nbsp;23:03:12&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;20&nbsp;19:46:06&nbsp;2011</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #71747] EU:MM_Unix and userelocatableinc</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 20 Oct 2011 16:45:42 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2011.10.19 8:03 PM, Bill Ricker via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m moderately sure I tried original userelocatableinc without  PERLLIB and
&gt; it wouldn&#39;t even find feature.pm to process -E &#39;say&#39;, let alone build
&gt; modules.
&gt; 
&gt; I did not download the cpan module to perl dir. HTTP-Tiny was un-tarred in
&gt; $HOME.
&gt; &#40;Not via CPANP since 5.14.2 bundles cpanp that prefers Tiny but a Tiny that
&gt; doesn&#39;t do http_proxy.  My $DayJob firewall is finicky, robotic  FTP usually
&gt; won&#39;t go.&#41;
</div>
Hmmm.  In that case it&#39;s truly odd that you had ../foo paths in @INC.  What
directory were you in when you ran perl -V to generate perl.cfg?

I built my Perl 5.14.2 using the exact same configure arguments you reported,
and building HTTP-Tiny from inside the perl install directory with PERLLIB set
redundantly was the only way I could trigger the same problem.

Maybe you can show me the complete chain of commands to reproduce the problem?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;24&nbsp;18:09:31&nbsp;2011</span>
    <span class="description">William.Ricker [...] fmr.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;BRICKER [...] cpan.org&#34; &lt;BRICKER [...] cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #71747] EU:MM_Unix and userelocatableinc</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 24 Oct 2011 18:08:59 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-ExtUtils-MakeMaker [...] rt.cpan.org&#34; &lt;bug-ExtUtils-MakeMaker [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Ricker, William&#34; &lt;William.Ricker [...] FMR.COM&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear Schwern,

I&#39;m getting the feeling Userelocatableinc as implemented is useless or insecure, and thus no one uses it nor tests other parts of foodchain with it. &#40;I wonder if it worked right in 5.10.0?  I didn&#39;t try it then.&#41;

I built clean and still run into dead ends when CPANPLUSing modules using EU:MM. 

-Duserelocatableinc causes build to compile literal ../ into paths in &#39;perl&#39; executable  and stores them in Config.pm too.  Supposedly this will get patched at runtime from path to the perl. The built perl can do 
   perl -e &#39;print 1&#39; 
   perl -v
But fails on 
   perl -V
   perl -E &#39;say q&#40;hellow world!&#41;&#39;
which it can only do if one of
    -I $DESTDIR/bin 
   $ENV{PERLLIB} 
   cd $DESTDIR/bin 
is in effect at runtime, to enable it to open feature.pm or Config.pm .

Thus the compiled-in @INC of ../lib:$etc are interpreted as relative to $PWD not relative to $DESTDIR/bin &#40;as would be secure and sane&#41;. 

In Configure processing, it looks like it intends to save THREE dots to mean UP FROM PERL BIN not two, but two is what is found. And it isn&#39;t interpreted as from-perl.

&#40;Sadly sitecustomize.pl isn&#39;t usable either, unclear if that&#39;s related or not.&#41;

On to EU:MM ...

Interestingly, the CPAN-shell invoked by -Dextras=&#34;JSON::XS&#34;  works during make of Perl.

But after make install DISTDIR=$elsewhere , EU:MM get confused by compiled in compiled @INC having &#34;../lib&#34;. 
Naturally, with the problem above, one needs one of three workarounds above to get CPAN or CPANPLUS to even run.  

CPANPLUS of course does a chdir at some point so starting it from $DESTDIR/bin is ineffective.
[ERROR] Could not read /export/home/a273121/.cpanplus/5.14.2/build/Digest-SHA-5.62/META.yml: &#39;Can&#39;t locate CPAN/Meta/YAML.pm in @INC &#40;@INC contains: ../lib/site_perl/5.14.2/aix-64int ../lib/site_perl/5.14.2 ../lib/5.14.2/aix-64int ../lib/5.14.2 .&#41; at ../lib/5.14.2/Parse/CPAN/Meta.pm line 110.

This affects EU:MM as, of the three workarounds, it&#39;s the one that might work for EU:MM&#39;s Strict.pm and Config.pm checks, but it can&#39;t even get called. &#40;A manual build might work if I unzipped each CPAN tar in bin/.. but that&#39;s just unclean, or perhaps in a Build dir containing symbolic links Build/{bin,lib,man} -&gt; $DESTDIR/{bin,lib,man} ?? &#41;

With either the -I workaround &#40;passed in PERL5OPT&#41; or PERLLIB equivalent, EU::MM warns of mismatched Config thusly - 

Warning: PERL_LIB &#40;../lib/5.14.2&#41; seems not to be a perl library directory
        &#40;strict.pm not found&#41; at /export/home/a273121/test/perl5/elsewhere/perl/lib/5.14.2/ExtUtils/MM_Unix.pm line 1735.
Checking if your kit is complete...
Looks good
Have /export/home/a273121/test/perl5/elsewhere/perl/lib/5.14.2/aix-64int
Want ../lib/5.14.2/aix-64int
Your perl and your Config.pm seem to have different ideas about the
architecture they are running on.
Perl thinks: [aix-64int]
Config says: [aix-64int]
This may or may not cause problems. Please check your installation of perl
if you have problems building this extension.
Writing Makefile for Storable

and generates a  Makefile that fails 

[ERROR] MAKE failed: No such file or directory make: Cannot find a rule to create target ../lib/5.14.2/aix-64int/Config.pm from dependencies.

If the consensus is that userelocatableinc is useless, then there&#39;s nothing for EU:MM to fix, and I&#39;ll log bug on core&#39;s userelocatableinc, reopening my old 5.8 bug to which userelocatableinc was the &#39;fixed in the next release&#39; answer. 

If userelocatableinc is considered useful, if one of my workarounds is valid, EU:MM needs to let folks compile modules after &#34;make install DESTDIR=$wherever&#34;. 
&#40;In theory I could list all CPAN I need on &#39;Configure -Dextras=&#39; but that&#39;s monster long , and doesn&#39;t allow for updating later, which I want to be able to do.&#41;


Tangential : I ran into another issue I should report; it&#39;s on building perl on AIX. 
Is there an RT queue for README.AIX and sibling docs?  Or do I just go to bleadperl RT or p5p  ?
=ignorable
   [ README.AIX says any IBM C compiler will work if patched &#40;provided choice is compatible with threading desired&#41;. This was true for me through make tests. However building cpan modules with XS failed for IBM AIX &#39;cc&#39;. ParseXS generates C99 syntax that is rejected by IBM &#39;cc&#39; without specific permissive flags, and Configure did not give &#39;cc&#39; the right flags to accept them. Adding Configure -Dcc=xlc works.  Perl 5.14.2 sources, AIX6.1, IBM cc/xlc v11 patched.  
I do not know at what compiler version, Configure, or ParseXS version this changed.] 
=cut

Way off topic: Somewhere I still have photos from the night brian d foy passed the shirt he&#39;d bought off your back around the Boston.PM meeting. Next time you&#39;re passing near Boston, how about meeting up with Boston.PM for a talk or social ?

cheers
Bill

BRICKER@CPAN  n1vux

Aka @$DayJob

William Ricker 
Director, Architecture
Fidelity Investments / FPCMS Systems, Arch &#38; Data
617-563-0648 / 780-2223
William.Ricker@FMR.com 
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.linkedin.com/in/n1vux">http://www.linkedin.com/in/n1vux</a></span>
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;24&nbsp;21:05:31&nbsp;2011</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #71747] EU:MM_Unix and userelocatableinc</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 24 Oct 2011 18:05:14 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2011.10.24 3:09 PM, William.Ricker@fmr.com via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m getting the feeling Userelocatableinc as implemented is useless or insecure,
&gt; and thus no one uses it nor tests other parts of foodchain with it. &#40;I wonder
&gt; if it worked right in 5.10.0?  I didn&#39;t try it then.&#41;
</div>
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/rt3//Public/Bug/Display.html?id=85432">https://rt.perl.org/rt3//Public/Bug/Display.html?id=85432</a></span>
Well look at that, I reported this years ago. :&#41;

It seems it works on Linux and BSD, but not OS X or AIX or Solaris if using it
from $PATH.  I was executing from a full path before, I see your bug now once
I&#39;ve set $PATH.  While it&#39;s about OS X it could apply to AIX as well.  Might
want to report this to p5p to make sure they fix it for AIX.  It looks like
Nick fixed everything but.  Try 5.15.4 and see if it&#39;s fixed.

You could also try convincing p5p that this is important enough to put into
5.14.x.  While that&#39;s going on, you could try patching 5.14 with his fixes.
It looks like they start at 7969fa3ad87a5c1e868e959d5ff214a5a1b2fdab.
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/mirrors/perl/commits/7969fa3ad87a5c1e868e959d5ff214a5a1b2fdab">https://github.com/mirrors/perl/commits/7969fa3ad87a5c1e868e959d5ff214a5a1b2fdab</a></span>


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If the consensus is that userelocatableinc is useless, then there&#39;s nothing for
&gt; EU:MM to fix, and I&#39;ll log bug on core&#39;s userelocatableinc, reopening my old
&gt; 5.8 bug to which userelocatableinc was the &#39;fixed in the next release&#39; answer.
</div>
I suspect $&#40;PERLARCHLIB&#41; and friends will be broken as well.  Hmm.  MakeMaker
can certainly detect the problem and fix the broken %Config values.  I&#39;m not
sure how much effort should be put into this given that Perl is broken in a
number of ways on your platform with -Duserelocatableinc.  I guess it could be
made compatible with your PERL5LIB work around.  I don&#39;t suppose Fidelity
would be interested in sponsoring a fix?

PS  You could use the old, hacky way to relocate Perl.  Essentially you give
it a PREFIX of something long and easily identifiable like
xxxxxxXXXXxxXXxxxTHISISTHEPREFIXxxxxxxxxXXXXXXXXxxxxxxxxx, install using
DESTDIR and then run a s/// over the binaries &#40;making sure to pad with null
characters&#41;, Config.pm and Config_heavy.pl.  ActivePerl used to do this.  They
have a program for it you can probably get out of older versions of the
ActivePerl sources.

PPS  Another fix would be to write a wrapper which runs Perl with an absolute
path and put that in your PATH as perl.  Something as simple as:

    #!/bin/sh

    /path/to/your/perl &#34;$@&#34;

You&#39;d have to write this equivalent in C to make it work in #!


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Tangential : I ran into another issue I should report; it&#39;s on building perl on AIX. 
&gt; Is there an RT queue for README.AIX and sibling docs?  Or do I just go to bleadperl
&gt; RT or p5p?
</div>
I would report it via perlbug or Perl 5&#39;s RT.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Way off topic: Somewhere I still have photos from the night brian d foy passed
&gt; the shirt he&#39;d bought off your back around the Boston.PM meeting. Next time
</div>you&#39;re
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; passing near Boston, how about meeting up with Boston.PM for a talk or social ?
</div>
Cool, will do!


-- 
I have a date with some giant cartoon robots and booze.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;24&nbsp;22:12:48&nbsp;2011</span>
    <span class="description">bill.n1vux [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> BRICKER [...] cpan.org, William.Ricker [...] fmr.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #71747] EU:MM_Unix and userelocatableinc</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 24 Oct 2011 22:12:18 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Bill Ricker &lt;bill.n1vux [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/rt3//Public/Bug/Display.html?id=85432">https://rt.perl.org/rt3//Public/Bug/Display.html?id=85432</a></span>
&gt; Well look at that, I reported this years ago. :&#41;
</div>
Hah, wonderful.

You realize you&#39;ve just rewarded me for reporting the wrong bug to the
wrong team, right ?
:-&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It seems it works on Linux and BSD, but not OS X or AIX or Solaris if using it
&gt; from $PATH.  I was executing from a full path before, I see your bug now once
&gt; I&#39;ve set $PATH.  While it&#39;s about OS X it could apply to AIX as well.  Might
&gt; want to report this to p5p to make sure they fix it for AIX.  It looks like
&gt; Nick fixed everything but.  Try 5.15.4 and see if it&#39;s fixed.
</div>
Aha. Everyone forgets AIX. Days like this, I wish I could, but it&#39;s so
very well behaved other times.

And a workaround that might even work, call with fullpath.
&#40;which alas won&#39;t work with #! /usr/bin/env perl &#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You could also try convincing p5p that this is important enough to put into
&gt; 5.14.x.
</div>
heh. maybe.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  While that&#39;s going on, you could try patching 5.14 with his fixes.
&gt; It looks like they start at 7969fa3ad87a5c1e868e959d5ff214a5a1b2fdab.
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/mirrors/perl/commits/7969fa3ad87a5c1e868e959d5ff214a5a1b2fdab">https://github.com/mirrors/perl/commits/7969fa3ad87a5c1e868e959d5ff214a5a1b2fdab</a></span>
</div>
If I can make it work for AIX that would be amusing.
I will have to look closely, I was wondering how this could work !

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; If the consensus is that userelocatableinc is useless, then there&#39;s nothing for
&gt; &gt; EU:MM to fix, and I&#39;ll log bug on core&#39;s userelocatableinc, reopening my old
&gt; &gt; 5.8 bug to which userelocatableinc was the &#39;fixed in the next release&#39; answer.
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I suspect $&#40;PERLARCHLIB&#41; and friends will be broken as well.  Hmm.  MakeMaker
&gt; can certainly detect the problem and fix the broken %Config values.  I&#39;m not
&gt; sure how much effort should be put into this given that Perl is broken in a
&gt; number of ways on your platform with -Duserelocatableinc.  I guess it could be
&gt; made compatible with your PERL5LIB work around.
</div>
Yeah, doesn&#39;t make a lot of sense to &#39;fix&#39; it to work with borked perl
if there&#39;s expectation we can make Perl right &#39;soon&#39;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I don&#39;t suppose Fidelity
&gt; would be interested in sponsoring a fix?
</div>
Alas this is for a backwater backoffice, not a big profit center with
big consulting budget. Not sure if I can swing a budget on this. But
worth a thought, might be worth doing if I can&#39;t do it the right way.

&#40;Since the whole point of building a current Perl is to load DBI
drivers, giving up on CPAN/CPANPLUS is not an option. But Crude hacks
to make it relocatable are ok.&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; PS  You could use the old, hacky way to relocate Perl.  Essentially you give
&gt; it a PREFIX of something long and easily identifiable like
&gt; xxxxxxXXXXxxXXxxxTHISISTHEPREFIXxxxxxxxxXXXXXXXXxxxxxxxxx, install using
&gt; DESTDIR and then run a s/// over the binaries &#40;making sure to pad with null
&gt; characters&#41;, Config.pm and Config_heavy.pl.  ActivePerl used to do this.  They
&gt; have a program for it you can probably get out of older versions of the
&gt; ActivePerl sources.
</div>
I made my own version of that years ago, that&#39;s how I&#39;d solved the
problem caused by filesystem naming convention headbutting Perl
previously. I fixed #! &#39;s and maybe a few other hidden spots as well.
It blew up when I tried it with 5.12.3 and 5.14.1 when I tried. Not
sure what changed, or why it failed. Maybe it was using \0 where not
needed &#40;-t $_&#41;, or maybe perl has some count/data strings inside now
for thread-safety ? Do you anecdotally know if s/// has worked on
recent perls?
I may well try tweaking my fix-it script again to see if that
technique is resurectable.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; PPS  Another fix would be to write a wrapper which runs Perl with an absolute
&gt; path and put that in your PATH as perl.  Something as simple as:
&gt;
&gt;    #!/bin/sh
&gt;
&gt;    /path/to/your/perl &#34;$@&#34;
&gt;
&gt; You&#39;d have to write this equivalent in C to make it work in #!
</div>
hmm  that&#39;s sneaky, would even work with #! /usr/bin/env perl ... , i like it

could even be in same ./bin if my perl binary is renamed perl514 ...

I suspect my rusty old-school C skills can handle enough exec\w? to
handle a #! worthy wrapper. Could even read an ENV var like $PERLHOME
to get the path.

But since I do NOT want hard paths in #!,  since every copy has
different mountpoint according to an internal &#39;standard&#39; over which I
have no control, I can use

#! /usr/bin/env  perl
...
=&gt;
#! /bin/sh
$PERLHOME/bin/perl514 &#34;$*&#34; #REWRITE with hard path or export the variable

the #! is satisfied because env is binary .
Good old double indirect.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Tangential : I ran into another issue I should report; it&#39;s on building perl on AIX.
&gt; &gt; Is there an RT queue for README.AIX and sibling docs?  Or do I just go to bleadperl
&gt; &gt; RT or p5p?
</div>&gt;
&gt; I would report it via perlbug or Perl 5&#39;s RT.
</div>
roger wilco

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Way off topic: Somewhere I still have photos from the night brian d foy passed
&gt; &gt; the shirt he&#39;d bought off your back around the Boston.PM meeting. Next time
</div>&gt; you&#39;re
<div class="message-stanza open">&gt; &gt; passing near Boston, how about meeting up with Boston.PM for a talk or social ?
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Cool, will do!
</div>
great

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have a date with some giant cartoon robots and booze.
</div>
I have a date with some swank booze on Friday but no robots.

Although there are a couple of robot labs around here ... a old friend
said he was switching from doing rocket science &#40;satellite instrument
fab&#41; to building his robot minions like a proper mad scientist,  when
he job hopped recently. :-&#41;

Thanks !

--
Bill
@n1vux bill.n1vux@gmail.com
aka william.ricker@fmr.com
BRICKER@cpan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;24&nbsp;23:45:58&nbsp;2011</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #71747] EU:MM_Unix and userelocatableinc</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 24 Oct 2011 20:45:42 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2011.10.24 7:12 PM, Bill Ricker via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;  While that&#39;s going on, you could try patching 5.14 with his fixes.
&gt;&gt; It looks like they start at 7969fa3ad87a5c1e868e959d5ff214a5a1b2fdab.
&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/mirrors/perl/commits/7969fa3ad87a5c1e868e959d5ff214a5a1b2fdab">https://github.com/mirrors/perl/commits/7969fa3ad87a5c1e868e959d5ff214a5a1b2fdab</a></span>
</div>&gt; 
&gt; If I can make it work for AIX that would be amusing.
&gt; I will have to look closely, I was wondering how this could work !
</div>
There&#39;s some AIX folks on p5p.  If you alert them to the problem they can
probably work it out.  They just need to know the thing to call to get the
full path of a running executable.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;  I don&#39;t suppose Fidelity
&gt;&gt; would be interested in sponsoring a fix?
</div>&gt; 
&gt; Alas this is for a backwater backoffice, not a big profit center with
&gt; big consulting budget. Not sure if I can swing a budget on this. But
&gt; worth a thought, might be worth doing if I can&#39;t do it the right way.
</div>
As much as the money would be nice, it would probably be better giving the
money to Nick Clark &#40;or his TPF fund&#41; to fix it properly and either put it
into the next 5.14 or give you a 5.14 patch.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Do you anecdotally know if s/// has worked on recent perls?
</div>
No idea.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks !
</div>
You&#39;re welcome.

I&#39;m going to close this up.  Feel free to reopen if you want to go the
MakeMaker work around route.  Module::Build would probably need fixing, too.

It just occurred to me, most of the problems would go away if you hacked
Config.pm and Config_heavy.pl to make the relative paths absolute.


-- 
94. Crucifixes do not ward off officers, and I should not test that.
    -- The 213 Things Skippy Is No Longer Allowed To Do In The U.S. Army
           <span class="clickylink"><a target="new" rel="nofollow" href="http://skippyslist.com/list/">http://skippyslist.com/list/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;24&nbsp;23:46:27&nbsp;2011</span>
    <span class="description">mschwern [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
