<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #78456 for DBIx-Class: prefetch not working</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #78456 for DBIx-Class: prefetch not working</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=DBIx-Class">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=DBIx-Class">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=DBIx-Class">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=DBIx-Class">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBIx-Class">DBIx-Class CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">78456</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=DBIx-Class">DBIx-Class</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
sb10 [...] sanger.ac.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-10410-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.08198    </td>
  </tr>
  <tr id="CF-10411-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.08200    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




dbix_class_bug_report.tar.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1100851/578804/dbix_class_bug_report.tar.gz">
Thu Jul 19 08:08:11 2012 (4.4k) by sb10 [...] sanger.ac.uk
</a>
</font></li>
</ul>


dbix_class_bug_report_sqlite.tar.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1100866/578821/dbix_class_bug_report_sqlite.tar.gz">
Thu Jul 19 08:56:18 2012 (4.4k) by sb10 [...] sanger.ac.uk
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=78456">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1100851" href="/Public/Bug/Display.html?id=78456#txn-1100851">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;19&nbsp;08:08:11&nbsp;2012</span>
    <span class="description">sb10 [...] sanger.ac.uk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> prefetch not working</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1100851/578803/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/578803">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 872b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">See attached file for complete demonstration with all needed files.

Basically, I do this:

my @des = $schema-&gt;resultset&#40;&#39;Dataelementstate&#39;&#41;-&gt;search&#40;{ ... }, { join
=&gt; &#39;dataelement&#39;, prefetch =&gt; &#39;dataelement&#39; }&#41;;
my $estate = $des[0];
my $element = $estate-&gt;dataelement;

In 0.08192 and 0.08196 &#40;the only 2 older versions I&#39;ve used&#41; this works
as expected, and $element is a defined instance.

In 0.08198 $element is undef.

My test script output &#40;in the attached file&#41; shows that the SQL
generated is the same for 0.08198 and 0.08192, but 0.08198 does not fill
in the $estate-&gt;{related_resultsets}-&gt;{dataelement}-&gt;{all_cache} array,
and $estate-&gt;{_inflated_column}-&gt;{dataelement} is undef.

Removing the prefetch from the search lets $estate-&gt;dataelement return
the object normally in 0.08198. But with the prefetch, 0.08198 prevents
you getting the dataelement instance.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> dbix_class_bug_report.tar.gz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1100851/578804/dbix_class_bug_report.tar.gz">Download dbix_class_bug_report.tar.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 4.4k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1100856" href="/Public/Bug/Display.html?id=78456#txn-1100856">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;19&nbsp;08:14:43&nbsp;2012</span>
    <span class="description">abraxxa [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1100856/578811/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/578811">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 139b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">If you prefetch a relationship you don&#39;t have to also join it.
Maybe the new version is stricter.
Please remove the join and test it again.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1100859" href="/Public/Bug/Display.html?id=78456#txn-1100859">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;19&nbsp;08:14:45&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1100860" href="/Public/Bug/Display.html?id=78456#txn-1100860">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;19&nbsp;08:19:12&nbsp;2012</span>
    <span class="description">sb10 [...] sanger.ac.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1100860/578814/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/578814">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 234b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Jul 19 08:14:43 2012, ABRAXXA wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If you prefetch a relationship you don&#39;t have to also join it.
&gt; Maybe the new version is stricter.
&gt; Please remove the join and test it again.
</div>
Removing the join does not alter anything.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1100862" href="/Public/Bug/Display.html?id=78456#txn-1100862">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;19&nbsp;08:29:34&nbsp;2012</span>
    <span class="description">abraxxa [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1100862/578816/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/578816">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 366b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have no MySQL for testing here, can you change your tests to use SQLite?
Are you sure the data in your db is what you expect it? You insert into
Datasource and assume it gets the id 1 which you use for the following
related inserts.
Either use $ds-&gt;id instead of the hardcoded 1 or $ds-&gt;create_related.
Also check what the query returns if you execute it manually.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1100866" href="/Public/Bug/Display.html?id=78456#txn-1100866">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;19&nbsp;08:56:18&nbsp;2012</span>
    <span class="description">sb10 [...] sanger.ac.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1100866/578820/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/578820">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Jul 19 08:29:34 2012, ABRAXXA wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have no MySQL for testing here, can you change your tests to use SQLite?
</div>
Attached. Anyone else can change line 13 of modules/VRPipeTest.pm to
choose database connection details.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Are you sure the data in your db is what you expect it?
</div>
The test setup drops tables and recreates everything every time it is run.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You insert into
&gt; Datasource and assume it gets the id 1 which you use for the following
&gt; related inserts.
</div>
This doesn&#39;t really matter, since I have a test that checks I got a
Dataelementstate from my search&#40;&#41; query. So everything before that must
have been fine.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Either use $ds-&gt;id instead of the hardcoded 1
</div>
I&#39;ve done this in any case for the avoidance of doubt. I&#39;ve also added a
4th test that does:

my $direct = $schema-&gt;resultset&#40;&#39;Dataelement&#39;&#41;-&gt;find&#40;{ id =&gt;
$estate-&gt;{_column_data}-&gt;{dataelement} }&#41;;

I show that in 0.08198, $estate-&gt;dataelement returns undef while $direct
exists. That is, $estate has the correct information about what
dataelement it is supposed to return, and that dataelement can be
retrieved directly with a find &#40;so it is in the database&#41;, but there is
some bug that prevents the dataelement&#40;&#41; method working.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> dbix_class_bug_report_sqlite.tar.gz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1100866/578821/dbix_class_bug_report_sqlite.tar.gz">Download dbix_class_bug_report_sqlite.tar.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 4.4k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1100868" href="/Public/Bug/Display.html?id=78456#txn-1100868">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;19&nbsp;09:02:40&nbsp;2012</span>
    <span class="description">abraxxa [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1100868/578823/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/578823">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 478b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks, that was quick!
You ask dbic for completed_steps &gt; 1 but in the sqlite db its 0.
I have no idea why a row is returned by the query:

SELECT me.pipelinesetup, me.dataelement, me.id, me.completed_steps,
dataelement.withdrawn, dataelement.id, dataelement.result,
dataelement.datasource 
  FROM dataelementstate me 
  JOIN dataelement dataelement 
    ON dataelement.id = me.dataelement 
WHERE me.completed_steps &lt; &#39;1&#39; AND dataelement.withdrawn = &#39;0&#39; AND
pipelinesetup = &#39;1&#39;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1100871" href="/Public/Bug/Display.html?id=78456#txn-1100871">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;19&nbsp;09:03:55&nbsp;2012</span>
    <span class="description">abraxxa [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1100871/578826/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/578826">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 69b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">For get it, you ask for &lt; 1, not &gt; 1. I&#39;ll continue looking into it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1102262" href="/Public/Bug/Display.html?id=78456#txn-1102262">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;24&nbsp;02:04:29&nbsp;2012</span>
    <span class="description">thaljef [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1102262/579545/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/579545">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 446b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">FYI: I&#39;m seeing the same problem with SQLite. Starting with DBIx-Class
0.08198, some searches with the &#34;prefetch&#34; attribute do not populate the
related objects, even though it does produce the right query.  By just
taking random shots in the dark, I&#39;ve noticed that it seems to work when
the prefetch value is a HashRef, but not when it is a scalar or ArrayRef.

Hope that helps some.  I&#39;ll send an isolated test case as soon as I am able.

-Jeff
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1102718" href="/Public/Bug/Display.html?id=78456#txn-1102718">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;25&nbsp;16:44:02&nbsp;2012</span>
    <span class="description">cpan [...] desert-island.me.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1102718/579779/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/579779">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 607b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">All,

Please try the dev release 0.08198_01 and let us know if it fixes your 
issues.

Jess

On Tue Jul 24 02:04:29 2012, THALJEF wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; FYI: I&#39;m seeing the same problem with SQLite. Starting with DBIx-Class
&gt; 0.08198, some searches with the &#34;prefetch&#34; attribute do not populate 
</div>the
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; related objects, even though it does produce the right query.  By just
&gt; taking random shots in the dark, I&#39;ve noticed that it seems to work 
</div>when
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; the prefetch value is a HashRef, but not when it is a scalar or 
</div>ArrayRef.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Hope that helps some.  I&#39;ll send an isolated test case as soon as I 
</div>am able.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; -Jeff
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1103190" href="/Public/Bug/Display.html?id=78456#txn-1103190">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;27&nbsp;04:13:59&nbsp;2012</span>
    <span class="description">sb10 [...] sanger.ac.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1103190/580031/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/580031">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 244b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jul 25 16:44:02 2012, JROBINSON wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; All,
&gt; 
&gt; Please try the dev release 0.08198_01 and let us know if it fixes your 
&gt; issues.
</div>
Thanks, I can confirm that the rollback in 0.08198_01 fixes the issue
&#40;or at least, my tests now pass&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1108512" href="/Public/Bug/Display.html?id=78456#txn-1108512">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;13&nbsp;12:36:21&nbsp;2012</span>
    <span class="description">thaljef [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1108512/582815/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/582815">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 240b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jul 25 13:44:02 2012, JROBINSON wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Please try the dev release 0.08198_01 and let us know if it fixes your 
&gt; issues.
</div>
I can confirm that 0.8198_01 seems to fix the problem &#40;for me, at
least&#41;.  Thanks for helping us out.

-Jeff
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1111453" href="/Public/Bug/Display.html?id=78456#txn-1111453">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;21&nbsp;11:46:11&nbsp;2012</span>
    <span class="description">http://rabidgravy.com/ -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jns [...] gellyfish.co.uk</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1111453/584458/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/584458">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 848b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,
I was just beginning to suspect that the regression in our tests was a 
bug elsewhere too :&#41;

This fixed problem with prefetching for us too.

On Wed Jul 25 16:44:02 2012, JROBINSON wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; All,
&gt; 
&gt; Please try the dev release 0.08198_01 and let us know if it fixes your 
&gt; issues.
&gt; 
&gt; Jess
&gt; 
&gt; On Tue Jul 24 02:04:29 2012, THALJEF wrote:
<div class="message-stanza open">&gt; &gt; FYI: I&#39;m seeing the same problem with SQLite. Starting with DBIx-
</div></div>Class
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; 0.08198, some searches with the &#34;prefetch&#34; attribute do not populate 
</div>&gt; the
<div class="message-stanza open">&gt; &gt; related objects, even though it does produce the right query.  By 
</div></div>just
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; taking random shots in the dark, I&#39;ve noticed that it seems to work 
</div>&gt; when
<div class="message-stanza open">&gt; &gt; the prefetch value is a HashRef, but not when it is a scalar or 
</div>&gt; ArrayRef.
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; Hope that helps some.  I&#39;ll send an isolated test case as soon as I 
</div>&gt; am able.
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; -Jeff
</div>&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1114594" href="/Public/Bug/Display.html?id=78456#txn-1114594">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;30&nbsp;13:12:45&nbsp;2012</span>
    <span class="description">ribasushi [...] leporine.io -  Fixed in 0.08200 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1114595" href="/Public/Bug/Display.html?id=78456#txn-1114595">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;30&nbsp;13:12:45&nbsp;2012</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1114595/586376/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/586376">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 39b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed in 0.08200, sorry for the delays.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1114598" href="/Public/Bug/Display.html?id=78456#txn-1114598">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;30&nbsp;13:12:48&nbsp;2012</span>
    <span class="description">ribasushi [...] leporine.io -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.70818</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
