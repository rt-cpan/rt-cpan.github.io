<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #95796 for MetaCPAN-Client: $AUTHOR-&gt;releases&#40;&#41; ignores UA passed to MetaCPAN::Client-&gt;new&#40;&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #95796 for MetaCPAN-Client: $AUTHOR-&gt;releases&#40;&#41; ignores UA passed to MetaCPAN::Client-&gt;new&#40;&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/MetaCPAN-Client/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/MetaCPAN-Client/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/MetaCPAN-Client/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/MetaCPAN-Client/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/metacpan/metacpan-client/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/MetaCPAN-Client">MetaCPAN-Client CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">95796</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/MetaCPAN-Client/Active/">MetaCPAN-Client</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
KENTNL [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-254328-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.003000    </td>
  </tr>
  <tr id="CF-254329-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.007000    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;20&nbsp;07:38:28&nbsp;2014</span>
    <span class="description">KENTNL [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> $AUTHOR-&gt;releases&#40;&#41; ignores UA passed to MetaCPAN::Client-&gt;new&#40;&#41;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza"><p>
	<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/XSAWYERX/MetaCPAN-Client-1.003000/lib/MetaCPAN/Client/Author.pm#L32">https://metacpan.org/source/XSAWYERX/MetaCPAN-Client-1.003000/lib/MetaCPAN/Client/Author.pm#L32</a></span></p>

<p>
	&nbsp;</p>

<p>
	This means:<br>

	<br>

	my $client = MetaCPAN::Client-&gt;new( ua =&gt; $cachingua );<br>

	my $author = $client-&gt;author(&quot;KENTNL&quot;);<br>

	$author-&gt;releases();<br>

	<br>

	Completely ignores the caching, so you get a cached response for -&gt;author(), but not a cached response from -&gt;releases()<br>

	<br>

	As evidenced by testing both with, and without a cache, for me, both take a full 9 seconds.<br>

	<br>

	However, then your still having it not cache due to using Search::ElasticSearch, which has its own UA.<br>

	<br>

	After a bit of source diving I discoved you can do:<br>

	<br>

	&nbsp;&nbsp;&nbsp; my $es = Search::Elasticsearch-&gt;new(<br>

	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nodes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; $self-&gt;domain,<br>

	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cxn_pool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; &#39;Static::NoPing&#39;,<br>

	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; send_get_body_as =&gt; &#39;POST&#39;,<br>

	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; handle&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; $self-&gt;ua,<br>

	&nbsp;&nbsp;&nbsp; );<br>

	&nbsp;</p>

<p>
	And upon doing this, it becomes much more obvious that it&#39;s processing requests through the caching UA.</p>

Though it doesn&#39;t seem to give much performance benefit to cache for some reason. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;20&nbsp;07:42:04&nbsp;2014</span>
    <span class="description">KENTNL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Though it doesn&#39;t seem to give much performance benefit to cache for<br>

&gt; some reason.<br>
</div><br>

Scratch that, for some reason unknown to me, after I filed the bug report, my the initial POST request started to respond to caching ( due to my ES hack ), cutting the slow 5 seconds request down to 0.5 s :)<br>


</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;20&nbsp;07:47:06&nbsp;2014</span>
    <span class="description">XSAWYERX [...] cpan.org -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;10&nbsp;03:52:38&nbsp;2014</span>
    <span class="description">KENTNL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza"><p>
	On 2014-05-20 23:42:04, KENTNL wrote:<br>

	&gt; &gt; Though it doesn&#39;t seem to give much performance benefit to cache for<br>

	&gt; &gt; some reason.<br>

	&gt;<br>

	&gt; Scratch that, for some reason unknown to me, after I filed the bug<br>

	&gt; report, my<br>

	&gt; the initial POST request started to respond to caching ( due to my ES<br>

	&gt; hack ),<br>

	&gt; cutting the slow 5 seconds request down to 0.5 s :)<br>

	<br>

	I didn&#39;t mean to say &quot;This entire ticket is invalid&quot;.</p>

<p>
	But instead, I meant to say &quot;After making certain changes I was under the impression the changes weren&#39;t&nbsp; sufficient to make caching work, however, I was wrong, my changes *WERE* sufficient to make caching happen&quot;.</p>

<p>
	I&#39;m very much certain that the custom value of UA is still not passed to the infrastructure where it needs to be, and ES doesn&#39;t get passed that UA<br>

	&nbsp;</p>

<p>
	I&#39;ll take another shot at demonstrating it though.</p>


</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;10&nbsp;03:52:39&nbsp;2014</span>
    <span class="description">KENTNL [...] cpan.org -  Status changed from &#39;deleted&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;10&nbsp;04:49:19&nbsp;2014</span>
    <span class="description">KENTNL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza"><p>
	Here&#39;s the smallest test I have ATM that demonstrates the value of UA is useless for at least one query:</p>

<p>
	&nbsp;</p>

<p>
	<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/kentfredric/metacpan-client/blob/master/t/ua_trap.t">https://github.com/kentfredric/metacpan-client/blob/master/t/ua_trap.t</a></span></p>

<p>
	&nbsp;</p>

<p>
	It fails because somewhere in the stack, it gets an HTTP::Tiny object and uses that to do calls instead of the chosen UA object. I&#39;d expand on the test so the static data it uses was actually useful, but its pointless because the code is such presently it can never get that far.</p>


</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> ua_trap.t</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">use strict;
use warnings;

use Test::More;

# ABSTRACT: Make sure passed value of UA gets used for things.

{

    package TrapUA;
    use Data::Dump qw&#40;pp&#41;;
    use JSON;

    sub new {
        my &#40; $class, @args &#41; = @_;
        return bless { args =&gt; [@args] }, $class;
    }
    my $GET = {
        &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://api.metacpan.org/v0/author/KENTNL&#39;">http://api.metacpan.org/v0/author/KENTNL&#39;</a></span> =&gt; {
            visits  =&gt; 0,
            payload =&gt; {
                success =&gt; 1,
                content =&gt; JSON-&gt;new-&gt;encode&#40;
                    {
                        name    =&gt; &#39;Kent Fredric&#39;,
                        dir     =&gt; &#39;id/K/KE/KENTNL&#39;,
                        pauseid =&gt; &#39;KENTNL&#39;,
                    }
                &#41;,
            },
        }
    };

    sub get {
        my &#40; $self, $uri, @rest &#41; = @_;
        if &#40; not exists $GET-&gt;{$uri} &#41; {
            die &#34;No cached value for $uri&#34;;
        }
        $GET-&gt;{$uri}-&gt;{visits}++;
        return $GET-&gt;{$uri}-&gt;{payload};
    }
}

{
    require HTTP::Tiny;
    use Data::Dump qw&#40;pp&#41;;
    no warnings &#34;redefine&#34;;
    *HTTP::Tiny::request = sub {
        my &#40; $self, @args &#41; = @_;
        die &#34;Illegal use of HTTP::Tiny&#34; . pp&#40; \@args &#41;;
    };
}
use MetaCPAN::Client;

my $client = MetaCPAN::Client-&gt;new&#40; ua =&gt; TrapUA-&gt;new&#40;&#41; &#41;;

my $a        = $client-&gt;author&#40;&#39;KENTNL&#39;&#41;;
my $releases = $a-&gt;releases;

done_testing;

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;25&nbsp;23:30:04&nbsp;2014</span>
    <span class="description">olaf [...] wundersolutions.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jun 10 04:49:19 2014, KENTNL wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Here&#39;s the smallest test I have ATM that demonstrates the value of UA
&gt; is
&gt; useless for at least one query:
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/kentfredric/metacpan-client/blob/master/t/ua_trap.t">https://github.com/kentfredric/metacpan-client/blob/master/t/ua_trap.t</a></span>
&gt; 
&gt; It fails because somewhere in the stack, it gets an HTTP::Tiny object
&gt; and uses
&gt; that to do calls instead of the chosen UA object. I&#39;d expand on the
&gt; test so the
&gt; static data it uses was actually useful, but its pointless because the
&gt; code is
&gt; such presently it can never get that far.
</div>
I ran up against this just now too.  <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/MICKEY/MetaCPAN-Client-1.006000/lib/MetaCPAN/Client/Author.pm#L28">https://metacpan.org/source/MICKEY/MetaCPAN-Client-1.006000/lib/MetaCPAN/Client/Author.pm#L28</a></span> creates a new MetaCPAN::Client object instantiated without the UserAgent which was passed to the original object.  This is an easy fix, assuming there is not some specific reason for ignoring the UserAgent.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;13&nbsp;15:47:20&nbsp;2014</span>
    <span class="description">olaf [...] wundersolutions.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Jul 25 23:30:04 2014, OALDERS wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I ran up against this just now too.
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/MICKEY/MetaCPAN-Client-">https://metacpan.org/source/MICKEY/MetaCPAN-Client-</a></span>
&gt; 1.006000/lib/MetaCPAN/Client/Author.pm#L28 creates a new
&gt; MetaCPAN::Client object instantiated without the UserAgent which was
&gt; passed to the original object.  This is an easy fix, assuming there is
&gt; not some specific reason for ignoring the UserAgent.
</div>
After looking into this more, I think this is possible, but maybe not ideal.  For example, GET requests for authors use the supplied UA, but Elasticsearch then creates its own UA, so we have no control over scrolled searches.  We&#39;d need to specify a custom &#39;cx&#39; class for Elasticsearch.pm  That class would need to subclass Search::Elasticsearch::Cxn::HTTPTiny and &#40;probably&#41; override the _build_handle&#40;&#41; method, which is not hard but probably not a good idea either.

I&#39;m going to ask Clinton Gormley for some feedback on this.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;13&nbsp;16:03:26&nbsp;2014</span>
    <span class="description">olaf [...] wundersolutions.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">kentnl just pointed out to me that I didn&#39;t read his initial comments with the appropriate attention to detail.  What he has proposed is, I think, a good idea less messing around than what I was suggesting.

We could do this in only the cases where the user has supplied her own UserAgent, so the caveat emptor would apply only to those people who are already meddling with things.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;14&nbsp;22:40:12&nbsp;2014</span>
    <span class="description">KENTNL [...] cpan.org -  Fixed in 1.007000 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;14&nbsp;22:40:12&nbsp;2014</span>
    <span class="description">KENTNL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza">This should be fixed now in 1.007
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;14&nbsp;22:40:43&nbsp;2014</span>
    <span class="description">KENTNL [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
