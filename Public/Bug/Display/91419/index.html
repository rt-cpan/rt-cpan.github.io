<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #91419 for IO-Compress-Lzf: Test failures in 105oneshot-lzf.t</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #91419 for IO-Compress-Lzf: Test failures in 105oneshot-lzf.t</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/IO-Compress-Lzf/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/IO-Compress-Lzf/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/IO-Compress-Lzf/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/IO-Compress-Lzf/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/IO-Compress-Lzf">IO-Compress-Lzf CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">91419</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/IO-Compress-Lzf/Active/">IO-Compress-Lzf</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dmacks [...] netspace.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-41346-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
2.074</li>
<li>
2.080</li>
</ul>
    </td>
  </tr>
  <tr id="CF-41347-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;14&nbsp;16:38:53&nbsp;2013</span>
    <span class="description">dmacks [...] netspace.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Test failures in 105oneshot-lzf.t</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 14 Dec 2013 16:38:40 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-IO-Compress-Lzf [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Daniel Macks&#34; &lt;dmacks [...] netspace.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Building IO-Compress-LZF-2.063 on OS X 10.8 against apple&#39;s perl-5.12.14 with a bunch of CPAN modules installed via fink &#40;including Compress-LZF-3.70 and IO-Compress-2.063&#41;...

#     Failed test &#40;t/compress/oneshot.pl at line 307&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 321&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 336&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 351&#41;

#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 369&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 387&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 406&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 422&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 442&#41;
#          got: &#39;abcde&#39;

#     expected: &#39;&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 462&#41;
#          got: &#39;abcde&#39;
#     expected: &#39;&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 479&#41;
#          got: &#39;abcde&#39;
#     expected: &#39;&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 502&#41;
#          got: &#39;abcde&#39;
#     expected: &#39;&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 307&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 321&#41;

#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 336&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 351&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 369&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 387&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 406&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 422&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 442&#41;
#          got: &#39;abcde&#39;
#     expected: &#39;&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 462&#41;
#          got: &#39;abcde&#39;
#     expected: &#39;&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 479&#41;
#          got: &#39;abcde&#39;
#     expected: &#39;&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 502&#41;
#          got: &#39;abcde&#39;
#     expected: &#39;&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 553&#41;
#     Structures begin differing at:
#          $got-&gt;[1] = &#39;&#39;
#     $expected-&gt;[1] = &#39;data1&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1037&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1049&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;
# SCALAR&#40;0x7f8d6ab31618&#41;

#     Failed test &#40;t/compress/oneshot.pl at line 1069&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1093&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1113&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1139&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1154&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1175&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1202&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1218&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1240&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1037&#41;
#          got: &#39;incumbent data&#39;
#     expected: &#39;incumbent dataabcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1049&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;
# SCALAR&#40;0x7f8d6ab39a78&#41;

#     Failed test &#40;t/compress/oneshot.pl at line 1069&#41;
#          got: &#39;incumbent data&#39;
#     expected: &#39;incumbent dataabcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1093&#41;
#          got: &#39;incumbent data&#39;
#     expected: &#39;incumbent dataabcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1113&#41;
#          got: &#39;incumbent data&#39;
#     expected: &#39;incumbent dataabcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1139&#41;
#          got: &#39;incumbent data&#39;
#     expected: &#39;incumbent dataabcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1154&#41;
#          got: &#39;incumbent data&#39;
#     expected: &#39;incumbent dataabcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1175&#41;
#          got: &#39;incumbent data&#39;
#     expected: &#39;incumbent dataabcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1202&#41;
#          got: &#39;incumbent data&#39;
#     expected: &#39;incumbent dataabcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1218&#41;
#          got: &#39;incumbent data&#39;
#     expected: &#39;incumbent dataabcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1240&#41;
#          got: &#39;incumbent data&#39;
#     expected: &#39;incumbent dataabcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1258&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1267&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1296&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1296&#41;
#          got: &#39;&#39;
#     expected: &#39;abcde&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1348&#41;
#          got: &#39;&#39;
#     expected: &#39;data1data2&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1359&#41;
#          got: &#39;&#39;
#     expected: &#39;data1data2&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1372&#41;
#          got: &#39;&#39;
#     expected: &#39;data1data2&#39;

#     Failed test &#40;t/compress/oneshot.pl at line 1383&#41;
#     Structures begin differing at:
#          $got-&gt;[1] = &#39;&#39;
#     $expected-&gt;[1] = &#39;data1&#39;
# Looks like you failed 55 tests of 990.
t/105oneshot-lzf.t ...
Dubious, test returned 55 &#40;wstat 14080, 0x3700&#41;
Failed 55/990 subtests
        &#40;less 16 skipped subtests: 919 okay&#41;

dan

--
Daniel Macks
dmacks@netspace.org
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;15&nbsp;15:39:05&nbsp;2013</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hey Dan,

thanks for the bug report. This one is very strange - I can&#39;t reproduce it at all on my Linux distribution.

I&#39;ve enclosed a short script - if you get a chance could you run it please and post the output?

You will need to download and try to manually build IO-Compress-Lzf first before running the script. So assuming you already have Compress-LZF-3.70 and IO-Compress-2.063 installed, something like this should do the trick.

  $ tar cvf IO-Compress-Lzf-2.063.tar.gz
  $ cd IO-Compress-Lzf-2.063
  $ perl Makefile.PL
  $ make test

I imagine the &#34;make test&#34; will still fail &#40;if not please report back&#41;. Now run the enclosed script in the IO-Compress-Lzf-2.063 directory.

This is what I get when I run it

  $ perl try.pl
  zlib 1.2.8
  rawzlib 2.063
  lzf 3.7
  compressed ok
  oneshot uncompress ok
  anyoneshot uncompress ok
  This is IO::Uncompress::UnLzf=GLOB&#40;0x9298cd8&#41;


cheers
Paul
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> try.pl</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl

use warnings;
use strict;

use blib;

use Compress::LZF ;
use IO::Compress::Lzf qw&#40;lzf&#41;;
use IO::Uncompress::AnyUncompress qw&#40;anyuncompress&#41;;
use IO::Uncompress::UnLzf qw&#40;unlzf&#41;;
use Compress::Raw::Zlib;

my $zlib = Compress::Raw::Zlib::ZLIB_VERSION;
print &#34;zlib $zlib\n&#34;;
print &#34;rawzlib $Compress::Raw::Zlib::VERSION\n&#34; ;
print &#34;lzf $Compress::LZF::VERSION\n&#34;;

my $longContent = &lt;&lt;EOM ;
Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Ut tempus odio id
 dolor. Camelus perlus.  Larrius in lumen numen.  Dolor en quiquum filia
 est.  Quintus cenum parat.
EOM

my $comp ;
my $uncomp ;

lzf \$longContent =&gt; \$comp
    or die &#34;cannot compress: $IO::Compress::Lzf::LzfError\n&#34;;

length&#40;$comp&#41; or die &#34;lzf to empty string\n&#34; ;

print &#34;compressed ok\n&#34;;

unlzf \$comp =&gt; \$uncomp
    or warn &#34;cannot uncompress: $IO::Uncompress::UnLzf::UnLzfError\n&#34;;

print $uncomp eq $longContent ? &#34;oneshot uncompress ok\n&#34; 
                              : &#34;oneshot uncompress not ok&#34;;

$uncomp = &#39;&#39;;                              
anyuncompress \$comp =&gt; \$uncomp
    or warn &#34;cannot uncompress: $IO::Uncompress::AnyUncompress::AnyUncompressError\n&#34;;

print $uncomp eq $longContent ? &#34;anyoneshot uncompress ok\n&#34; 
                              : &#34;anyoneshot uncompress not ok&#34;;
$uncomp = &#39;&#39;;                              
my $un = new IO::Uncompress::AnyUncompress \$comp
    or die &#34;cannot uncompress: $IO::Uncompress::AnyUncompress::AnyUncompressError\n&#34;;

print &#34;This is $un\n&#34; ;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;15&nbsp;15:39:06&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;19&nbsp;01:38:48&nbsp;2013</span>
    <span class="description">dmacks [...] netspace.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #91419] Test failures in 105oneshot-lzf.t</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 19 Dec 2013 01:38:37 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-IO-Compress-Lzf [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Daniel Macks&#34; &lt;dmacks [...] netspace.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun, 15 Dec 2013 15:39:06 -0500, Paul Marquess via RT
&lt;bug-IO-Compress-Lzf@rt.cpan.org&gt; wrote:
&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=91419">https://rt.cpan.org/Ticket/Display.html?id=91419</a></span> &gt;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; thanks for the bug report. This one is very strange - I can&#39;t
&gt; reproduce it at all on my Linux distribution.
&gt;
&gt;   $ tar cvf IO-Compress-Lzf-2.063.tar.gz
&gt;   $ cd IO-Compress-Lzf-2.063
&gt;   $ perl Makefile.PL
&gt;   $ make test
&gt;
&gt; I imagine the &#34;make test&#34; will still fail &#40;if not please report
&gt; back&#41;. Now run the enclosed script in the IO-Compress-Lzf-2.063
&gt; directory.
&gt;
&gt; This is what I get when I run it
&gt;
&gt;   $ perl try.pl
&gt;   zlib 1.2.8
&gt;   rawzlib 2.063
&gt;   lzf 3.7
&gt;   compressed ok
&gt;   oneshot uncompress ok
&gt;   anyoneshot uncompress ok
&gt;   This is IO::Uncompress::UnLzf=GLOB&#40;0x9298cd8&#41;
</div>
zlib 1.2.5
rawzlib 2.063
lzf 3.7
compressed ok
oneshot uncompress ok
anyoneshot uncompress ok
This is IO::Uncompress::UnLzf=GLOB&#40;0x7f88ea814be0&#41;

So we have different versions of zlib according to Compress::Raw::Zlib.
I&#39;m using Compress-Raw-Zlib-2.063, which passed its &#39;make test&#39;. I&#39;m
building that module with

        BUILD_ZLIB=0
        ZLIB_INCLUDE=/usr/include
        ZLIB_LIB=/usr/lib

so my zlib is as supplied by OS X &#40;which is indeed 1.2.5 according to
its zlib.h and also the string embedded in libz.dylib&#41;. Fink&#39;s C::R::Z
is built that way assuming the vendor best knows how to tweak and build
something for a less common platform, and a general preference for
existing shared libraries to embedded source copies. OS X 10.9 is also
still on 1.2.5, though I don&#39;t have a sandbox system to test anything
on it.

dan

  --
Daniel Macks
dmacks@netspace.org
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;20&nbsp;18:30:39&nbsp;2013</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hey Dan,

thanks for running that. I was expecting the uncompress steps to fail for you and so point to an issue with zlib, but it din&#39;t.

Luckily though I&#39;ve managed to reproduce the issue on a RHEL 6 setup, so that means I have something to work with. The issue looks like it has nothing to do with zlib - it looks like it purely LZF.

To confirm, could you try running the script again after changing this line

my $longContent = &lt;&lt;EOM ; Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Ut tempus odio id dolor. Camelus perlus. Larrius in lumen numen. Dolor en quiquum filia est. Quintus cenum parat. 
EOM

to this

my $longContent =&#39;abcde&#39;;

I&#39;m expecting to see the two uncompress line fail.

Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;20&nbsp;18:34:15&nbsp;2013</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hey Dan,

that&#39;s not the output I expected to see. The small script you ran was intended to fail in the anyoneshot line.

Could you run the 105oneshot-lzf.t test file in verbose mode and post the output please?

$ make test TEST_VERBOSE=1 TEST_FILES=t/105oneshot-lzf.t 

Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;20&nbsp;23:45:29&nbsp;2013</span>
    <span class="description">dmacks [...] netspace.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #91419] Test failures in 105oneshot-lzf.t</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 20 Dec 2013 23:45:15 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-IO-Compress-Lzf [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Daniel Macks&#34; &lt;dmacks [...] netspace.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, 20 Dec 2013 18:30:39 -0500, Paul Marquess via RT 
&lt;bug-IO-Compress-Lzf@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; To confirm, could you try running the script again after changing this line
&gt;
&gt; my $longContent = &lt;&lt;EOM ; Lorem ipsum dolor sit amet, consectetuer 
&gt; adipiscing elit. Ut tempus odio id dolor. Camelus perlus. Larrius in 
&gt; lumen numen. Dolor en quiquum filia est. Quintus cenum parat. EOM
&gt;
&gt; to this
&gt;
&gt; my $longContent =&#39;abcde&#39;;
&gt;
&gt; I&#39;m expecting to see the two uncompress line fail. 
</div>
No such luck...failed to fail:

zlib 1.2.5
rawzlib 2.063
lzf 3.7
compressed ok
oneshot uncompress ok
anyoneshot uncompress ok
This is IO::Uncompress::UnLzf=GLOB&#40;0x7f982a814be0&#41;

dan

  --
Daniel Macks
dmacks@netspace.org
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;20&nbsp;23:49:34&nbsp;2013</span>
    <span class="description">dmacks [...] netspace.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #91419] Test failures in 105oneshot-lzf.t</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 20 Dec 2013 23:49:19 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-IO-Compress-Lzf [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Daniel Macks&#34; &lt;dmacks [...] netspace.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, 20 Dec 2013 18:34:15 -0500, Paul Marquess via RT 
&lt;bug-IO-Compress-Lzf@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Hey Dan,
&gt;
&gt; that&#39;s not the output I expected to see. The small script you ran was 
&gt; intended to fail in the anyoneshot line. 
&gt;
&gt; Could you run the 105oneshot-lzf.t test file in verbose mode and post 
&gt; the output please?
&gt;
&gt; $ make test TEST_VERBOSE=1 TEST_FILES=t/105oneshot-lzf.t
</div>
See attached. 

dan

--
Daniel Macks
dmacks@netspace.org
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;24&nbsp;16:52:26&nbsp;2017</span>
    <span class="description">SREZIC [...] cpan.org -  Broken in 2.074 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;04&nbsp;02:18:32&nbsp;2018</span>
    <span class="description">SREZIC [...] cpan.org -  Broken in 2.080 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
