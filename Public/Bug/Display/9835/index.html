<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #9835 for Mail-IMAPClient: Search method fails due to use of fcntl, which is not implemented on Win32.</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #9835 for Mail-IMAPClient: Search method fails due to use of fcntl, which is not implemented on Win32.</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Mail-IMAPClient/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Mail-IMAPClient/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Mail-IMAPClient/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Mail-IMAPClient/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Mail-IMAPClient">Mail-IMAPClient CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">9835</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Mail-IMAPClient/Active/">Mail-IMAPClient</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dlim [...] sdf.lonestar.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-19960-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.2.9    </td>
  </tr>
  <tr id="CF-19961-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;17&nbsp;16:18:12&nbsp;2005</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Search method fails due to use of fcntl, which is not implemented
 on Win32.</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">OS: Win 2000 Pro 5.00.2195 sp4
Perl Version: ActivePerl 5.8.4 build 810

use Mail::IMAPClient;

print &#34;Mail::IMAPClient version: $Mail::IMAPClient::VERSION\n&#34;;
my $host = &#39;xxxxx&#39;;
my $user = &#39;yyyyy&#39;;
my $pass = &#39;zzzzz&#39;;
my $imap = Mail::IMAPClient-&gt;new&#40;
                                 Server =&gt; $host,
                                 User =&gt; $user,
                                 Password =&gt; $pass,
                                 Debug =&gt; 1
                                 &#41;
    or die &#34;Cannot connect to $host as $user: $@\n&#34;;

$imap-&gt;select&#40;&#39;INBOX&#39;&#41; or die &#34;Could not select: $@\n&#34;;

my @msgs = $imap-&gt;Search&#40;&#39;SUBJECT&#39;,$imap-&gt;Quote&#40;&#34;Load Information&#34;&#41;&#41;;

$imap-&gt;disconnect or warn &#34;Could not disconnect: $@\n&#34;;
print &#34;Disconnected!\n&#34;;

Debug output:
Using Mail::IMAPClient version 2.2.9 and perl version 5.8.4 &#40;5.008004&#41;
Mail::IMAPClient not using Fast_IO; not available on this platform at IMAP-test.pl line 7
Read: * OK GroupWise IMAP4rev1 Server Ready

Connect: Received this from readline: 0/OUTPUT/* OK GroupWise IMAP4rev1 Server Ready

Sending literal string in two parts: 1 Login &#34;yyyyy&#34; {8}

        then: zzzzz

Sending: 1 Login &#34;XXXXXXXX&#34; {8}

Sent 20 bytes
Read: + Ready

Sending: zzzzz

Sent 10 bytes
Read: 1 OK LOGIN completed

Sending: 2 SELECT INBOX

Sent 16 bytes
Read: * 2002 EXISTS

Read: * 0 RECENT
* OK [UNSEEN 1523]
* OK [UIDVALIDITY 1105978690]
* OK [UIDNEXT 2003]
* FLAGS &#40;\Answered \Flagged \Deleted \Draft \Seen&#41;
* OK [PERMANENTFLAGS &#40;\Answered \Flagged \Deleted \Draft \Seen \*&#41;]
2 OK [READ-WRITE] SELECT completed

Autoloading: Search SUBJECT &#34;Load Information&#34;
Sending: 3 Search SUBJECT &#34;Load Information&#34;

Sent 37 bytes
Read: * SEARCH 718 751 805 1230 1247 1249 1266 1277 1288 1289 1290 1292 1293 1294 1295 1430 1437 1438 1439 1457 1460 1573 1602 1633 1673 1674 1675 1691 1705 1738 1764 1814 1847 1901 1948 1949 1966 1974 1984 2002
3 OK SEARCH completed

Error in search: Your vendor has not defined Fcntl macro F_GETFL, used at c:/Perl/site/lib/Mail/IMAPClient.pm line 69.

Sending: 4 LOGOUT

Sent 10 bytes
Read: * BYE IMAP4rev1 Server Disconnect
4 OK LOGOUT completed
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;17&nbsp;16:22:25&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[guest - Mon Jan 17 16:18:12 2005]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; OS: Win 2000 Pro 5.00.2195 sp4
&gt; Perl Version: ActivePerl 5.8.4 build 810
&gt; 
&gt; use Mail::IMAPClient;
&gt; 
&gt; print &#34;Mail::IMAPClient version: $Mail::IMAPClient::VERSION\n&#34;;
&gt; my $host = &#39;xxxxx&#39;;
&gt; my $user = &#39;yyyyy&#39;;
&gt; my $pass = &#39;zzzzz&#39;;
&gt; my $imap = Mail::IMAPClient-&gt;new&#40;
&gt;                                  Server =&gt; $host,
&gt;                                  User =&gt; $user,
&gt;                                  Password =&gt; $pass,
&gt;                                  Debug =&gt; 1
&gt;                                  &#41;
&gt;     or die &#34;Cannot connect to $host as $user: $@\n&#34;;
&gt; 
&gt; $imap-&gt;select&#40;&#39;INBOX&#39;&#41; or die &#34;Could not select: $@\n&#34;;
&gt; 
&gt; my @msgs = $imap-&gt;Search&#40;&#39;SUBJECT&#39;,$imap-&gt;Quote&#40;&#34;Load Information&#34;&#41;&#41;;
&gt; 
&gt; $imap-&gt;disconnect or warn &#34;Could not disconnect: $@\n&#34;;
&gt; print &#34;Disconnected!\n&#34;;
&gt; 
&gt; Debug output:
&gt; Using Mail::IMAPClient version 2.2.9 and perl version 5.8.4 &#40;5.008004&#41;
&gt; Mail::IMAPClient not using Fast_IO; not available on this platform at
&gt;    IMAP-test.pl line 7
&gt; Read: * OK GroupWise IMAP4rev1 Server Ready
&gt; 
&gt; Connect: Received this from readline: 0/OUTPUT/* OK GroupWise
&gt;    IMAP4rev1 Server Ready
&gt; 
&gt; Sending literal string in two parts: 1 Login &#34;yyyyy&#34; {8}
&gt; 
&gt;         then: zzzzz
&gt; 
&gt; Sending: 1 Login &#34;XXXXXXXX&#34; {8}
&gt; 
&gt; Sent 20 bytes
&gt; Read: + Ready
&gt; 
&gt; Sending: zzzzz
&gt; 
&gt; Sent 10 bytes
&gt; Read: 1 OK LOGIN completed
&gt; 
&gt; Sending: 2 SELECT INBOX
&gt; 
&gt; Sent 16 bytes
&gt; Read: * 2002 EXISTS
&gt; 
&gt; Read: * 0 RECENT
&gt; * OK [UNSEEN 1523]
&gt; * OK [UIDVALIDITY 1105978690]
&gt; * OK [UIDNEXT 2003]
&gt; * FLAGS &#40;\Answered \Flagged \Deleted \Draft \Seen&#41;
&gt; * OK [PERMANENTFLAGS &#40;\Answered \Flagged \Deleted \Draft \Seen \*&#41;]
&gt; 2 OK [READ-WRITE] SELECT completed
&gt; 
&gt; Autoloading: Search SUBJECT &#34;Load Information&#34;
&gt; Sending: 3 Search SUBJECT &#34;Load Information&#34;
&gt; 
&gt; Sent 37 bytes
&gt; Read: * SEARCH 718 751 805 1230 1247 1249 1266 1277 1288 1289 1290
&gt;    1292 1293 1294 1295 1430 1437 1438 1439 1457 1460 1573 1602 1633
&gt;    1673 1674 1675 1691 1705 1738 1764 1814 1847 1901 1948 1949 1966
&gt;    1974 1984 2002
&gt; 3 OK SEARCH completed
&gt; 
&gt; Error in search: Your vendor has not defined Fcntl macro F_GETFL, used
&gt;    at c:/Perl/site/lib/Mail/IMAPClient.pm line 69.
&gt; 
&gt; Sending: 4 LOGOUT
&gt; 
&gt; Sent 10 bytes
&gt; Read: * BYE IMAP4rev1 Server Disconnect
&gt; 4 OK LOGOUT completed
</div>

sorry,
missing two lines from test code:

if &#40;$@&#41; {
    warn &#34;Error in search: $@\n&#34;;
}

immediately following the line
my @msgs = $imap-&gt;Search...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;23&nbsp;16:07:41&nbsp;2007</span>
    <span class="description">MARKOV [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Search did work &#40;although you should use &#39;search&#39;&#41;.  The $@ content was
the result of the eval{} which avoids the crash on Windows... however,
it should have been cleaned.  Will be done in 2.99_02
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;23&nbsp;16:07:44&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;23&nbsp;16:07:48&nbsp;2007</span>
    <span class="description">MARKOV [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
