<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #11139 for CPANPLUS: Calls to tar/gzip lock up on Windows</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #11139 for CPANPLUS: Calls to tar/gzip lock up on Windows</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/CPANPLUS/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/CPANPLUS/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/CPANPLUS/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/CPANPLUS/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/CPANPLUS">CPANPLUS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">11139</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/CPANPLUS/Active/">CPANPLUS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
rrwo [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-8270-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.051    </td>
  </tr>
  <tr id="CF-8271-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;20&nbsp;18:26:44&nbsp;2005</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Calls to tar/gzip lock up on Windows</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Testing Locale-Maketext-TieHash-nbsp-0.02 on Windows causes CPANPLUS to lock up, waiting for results from tar or gzip:

CPAN Terminal&gt; t Locale-Maketext-TieHash-nbsp-0.02

[MSG] Checking if source files are up to date
[MSG] Retrieving C:\Documents and Settings\Rob.MAGNETO-XP\Application Data\.cpan
plus\sourcefiles.2.13.stored
Testing Locale::Maketext::TieHash::nbsp
[MSG] Trying to get &#39;ftp://cpan.etla.org/pub/CPAN/authors/id/S/ST/STEFFENW/CHECK
SUMS&#39;
[MSG] Checksum matches for &#39;Locale-Maketext-TieHash-nbsp-0.02.tar.gz&#39;
Could not open file &#39;C:\Documents and Settings\Rob.MAGNETO-XP\Application Data\.
cpanplus\5.8.6\build\Locale-Maketext-TieHash-nbsp-0.02\manifest&#39;: Permission den
ied at C:/Perl/site/lib/CPANPLUS/Internals/Extract.pm line 158
Could not extract &#39;Locale-Maketext-TieHash-nbsp-0.02/manifest&#39; at C:/Perl/site/l
ib/CPANPLUS/Internals/Extract.pm line 158
Unable to extract &#39;C:\Documents and Settings\Rob.MAGNETO-XP\Application Data\.cp
anplus\authors\id\S\ST\STEFFENW\Locale-Maketext-TieHash-nbsp-0.02.tar.gz&#39;: Could
 not extract &#39;Locale-Maketext-TieHash-nbsp-0.02/manifest&#39; at C:/Perl/site/lib/CP
ANPLUS/Module.pm line 469
C:\Perl\bin\tar.EXE: Cannot open -: No such file or directory
C:\Perl\bin\tar.EXE: Error is not recoverable: exiting now

gzip.EXE: stdout: Invalid argument

Ctrl-Break is the only way to end it.

Manually, Makefile.PL and nmake test work fine for this module. So what is CPANPLUS doing differently?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;22&nbsp;06:28:30&nbsp;2005</span>
    <span class="description">kane [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[guest - Thu Jan 20 18:26:44 2005]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Testing Locale-Maketext-TieHash-nbsp-0.02 on Windows causes CPANPLUS
&gt; to lock up, waiting for results from tar or gzip:
</div>If that&#39;s correct, all tests you do should lock up waiting for results from tar or gzip...


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; CPAN Terminal&gt; t Locale-Maketext-TieHash-nbsp-0.02
&gt; 
&gt; [MSG] Checking if source files are up to date
&gt; [MSG] Retrieving C:\Documents and Settings\Rob.MAGNETO-XP\Application
&gt; Data\.cpan
&gt; plus\sourcefiles.2.13.stored
&gt; Testing Locale::Maketext::TieHash::nbsp
&gt; [MSG] Trying to get
&gt; &#39;ftp://cpan.etla.org/pub/CPAN/authors/id/S/ST/STEFFENW/CHECK
&gt; SUMS&#39;
&gt; [MSG] Checksum matches for &#39;Locale-Maketext-TieHash-nbsp-0.02.tar.gz&#39;
&gt; Could not open file &#39;C:\Documents and Settings\Rob.MAGNETO-
&gt; XP\Application Data\.
&gt; cpanplus\5.8.6\build\Locale-Maketext-TieHash-nbsp-0.02\manifest&#39;:
&gt; Permission den
&gt; ied at C:/Perl/site/lib/CPANPLUS/Internals/Extract.pm line 158
&gt; Could not extract &#39;Locale-Maketext-TieHash-nbsp-0.02/manifest&#39; at
&gt; C:/Perl/site/l
&gt; ib/CPANPLUS/Internals/Extract.pm line 158
&gt; Unable to extract &#39;C:\Documents and Settings\Rob.MAGNETO-
&gt; XP\Application Data\.cp
&gt; anplus\authors\id\S\ST\STEFFENW\Locale-Maketext-TieHash-nbsp-
&gt; 0.02.tar.gz&#39;: Could
&gt;  not extract &#39;Locale-Maketext-TieHash-nbsp-0.02/manifest&#39; at
&gt; C:/Perl/site/lib/CP
&gt; ANPLUS/Module.pm line 469
</div>
ehm, permission denied? are you sure your permissions &#40;or the ones in the archive you are 
trying to extract&#41; are set correctly? 

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; C:\Perl\bin\tar.EXE: Cannot open -: No such file or directory
&gt; C:\Perl\bin\tar.EXE: Error is not recoverable: exiting now
&gt; 
&gt; gzip.EXE: stdout: Invalid argument
</div>apparently windows can not deal with piped commands, in this case:
    gzip -d .... | tar -xvf -

can you verify that this is indeed the case?


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Manually, Makefile.PL and nmake test work fine for this module. So
&gt; what is CPANPLUS doing differently?
</div>This has nothing to do with makefile.pl/nmake, but iwth extracting the modules...

using Archive::Tar is your safest bet here, and of course making sure the permissions on 
your extract dir + archives are set properly
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;22&nbsp;09:19:21&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: Calls to tar/gzip lock up on Windows</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rrwo [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
I seem to be having the same problem with the following:

  Math-SymbolicX-NoSimplification-0.01

But most other modules work fine. 

On 22/01/2005 11:29  via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Data\.cp
</div></div>anplus\authors\id\S\ST\STEFFENW\Locale-Maketext-TieHash-nbsp-
0.02.tar.gz&#39;: Could not extract
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; &#39;Locale-Maketext-TieHash-nbsp-0.02/manifest&#39; at C:/Perl/site/lib/CP
&gt;&gt;  ANPLUS/Module.pm line 469
</div>&gt;
&gt;
&gt;
&gt; ehm, permission denied? are you sure your permissions &#40;or the ones in
&gt; the archive you are trying to extract&#41; are set correctly?
</div>

There is no permissions problem in the .cpanplus directories. I can
manually go there and extract archives, run make etc. with no problems.

I can also go to the build directory, where the files appear to be
properly extracted, run the tests, etc. Also no problems.

And I&#39;ve configured CPANPLUS to prefer Perl modules over binaries, so I
don&#39;t know why it&#39;s calling gzip and tar.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; apparently windows can not deal with piped commands, in this case:
</div>gzip -d .... | tar -xvf -
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; can you verify that this is indeed the case?
</div>

No, it doesn&#39;t work because that&#39;s the wrong set of options for gzip.
This works, however:

  gzip -dc Math-SymbolicX-NoSimplification-0.01.tar.gz |tar -xvf -

Without the &#39;c&#39; option, it operates directly on file and sends nothing
to tar.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This has nothing to do with makefile.pl/nmake, but iwth extracting
&gt; the modules...
&gt;
&gt; using Archive::Tar is your safest bet here, and of course making sure
&gt; the permissions on your extract dir + archives are set properly
</div>

I have Archive::Tar installed &#40;I&#39;ve even just upgraded to the latest
version, but it does not help&#41;. And the permissions are fine. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;22&nbsp;09:23:37&nbsp;2005</span>
    <span class="description">kane [...] dwim.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jos I. Boumans&#34; &lt;kane [...] dwim.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [cpan #11139] Re: Calls to tar/gzip lock up on Windows </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 22 Jan 2005 15:19:25 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPANPLUS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">RT-Send-Cc:</td>
    <td class="message-header-value"> </td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Jan 22, 2005, at 3:19 PM, Guest via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; This message about CPANPLUS was sent to you by guest &lt;&gt; via rt.cpan.org
&gt;
&gt; Full context and any attached attachments can be found at:
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=11139">https://rt.cpan.org/Ticket/Display.html?id=11139</a></span> &gt;
&gt;
&gt;
&gt; I seem to be having the same problem with the following:
&gt;
&gt;   Math-SymbolicX-NoSimplification-0.01
&gt;
&gt; But most other modules work fine.
&gt;
&gt; On 22/01/2005 11:29  via RT wrote:
&gt;
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; Data\.cp
</div></div>&gt; anplus\authors\id\S\ST\STEFFENW\Locale-Maketext-TieHash-nbsp-
&gt; 0.02.tar.gz&#39;: Could not extract
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &#39;Locale-Maketext-TieHash-nbsp-0.02/manifest&#39; at C:/Perl/site/lib/CP
&gt;&gt;&gt;  ANPLUS/Module.pm line 469
</div>&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; ehm, permission denied? are you sure your permissions &#40;or the ones in
&gt;&gt; the archive you are trying to extract&#41; are set correctly?
</div>&gt;
&gt;
&gt; There is no permissions problem in the .cpanplus directories. I can
&gt; manually go there and extract archives, run make etc. with no problems.
</div>ok, then why is there a permission denied coming from the extraction 
process? there is /something/ lacking permissions /somehwere/

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I can also go to the build directory, where the files appear to be
&gt; properly extracted, run the tests, etc. Also no problems.
&gt;
&gt; And I&#39;ve configured CPANPLUS to prefer Perl modules over binaries, so I
&gt; don&#39;t know why it&#39;s calling gzip and tar.
</div>If the perl module fails it will attempt the alternative.. in this case 
tar + gzip.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; apparently windows can not deal with piped commands, in this case:
</div>&gt; gzip -d .... | tar -xvf -
<div class="message-stanza open">&gt;&gt;
&gt;&gt; can you verify that this is indeed the case?
</div>&gt;
&gt;
&gt; No, it doesn&#39;t work because that&#39;s the wrong set of options for gzip.
&gt; This works, however:
&gt;
&gt;   gzip -dc Math-SymbolicX-NoSimplification-0.01.tar.gz |tar -xvf -
&gt;
&gt; Without the &#39;c&#39; option, it operates directly on file and sends nothing
&gt; to tar.
</div>Right, that wasn&#39;t the question.. as you can see this was some pseudo 
code.. the question was if your win32 can handle piped commands or 
not...

For the heck of it, blow away the directories of the modules you had 
trouble with, refresh the sourcefiles and try again.. does the problem 
persist?

--

Jos Boumans

        &#34;If superman is so smart, why does he wear underpants over his 
        trousers?&#34;

        CPANPLUS        <span class="clickylink"><a target="new" rel="nofollow" href="http://cpanplus.sf.net">http://cpanplus.sf.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;22&nbsp;10:02:46&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rrwo [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[kane@dwim.org - Sat Jan 22 09:23:37 2005]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; There is no permissions problem in the .cpanplus directories. I can
&gt; &gt; manually go there and extract archives, run make etc. with no
&gt; &gt; problems.
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ok, then why is there a permission denied coming from the extraction 
&gt; process? there is /something/ lacking permissions /somehwere/
</div>
Not necessarily. It&#39;s common for programs to just call it a permissions
problem when they can&#39;t access a file. It&#39;s particularly common when
there&#39;s a directory that&#39;s been created where a utility wants to create
one with the same name or write a file with that name.

Suppose the archive is extracted, but somehow it thinks something went
wrong and tried to re-extract it. But it can&#39;t, because the directory is
already there, so it says there&#39;s a permissions problem.

I think the problem may be with Archive::Extract or Archive::Tar.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Right, that wasn&#39;t the question.. as you can see this was some pseudo 
&gt; code.. the question was if your win32 can handle piped commands or 
&gt; not...
</div>
Yes, it can.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; For the heck of it, blow away the directories of the modules you had 
&gt; trouble with, refresh the sourcefiles and try again.. does the problem 
&gt; persist?
</div>
Yes. I removed the &#39;id&#39; directory and got the following:

C:\TEMP&gt;cpanp t Locale-Maketext-TieHash-nbsp-0.02
[MSG] Checking if source files are up to date
[MSG] Retrieving C:\Documents and Settings\Rob.MAGNETO-XP\Application
Data\.cpanplus\sourcefiles.2.13.stored
Testing Locale::Maketext::TieHash::nbsp
[MSG] Trying to get
&#39;ftp://cpan.etla.org/pub/CPAN/authors/id/S/ST/STEFFENW/Local
e-Maketext-TieHash-nbsp-0.02.tar.gz&#39;
[MSG] Trying to get
&#39;ftp://cpan.etla.org/pub/CPAN/authors/id/S/ST/STEFFENW/CHECK
SUMS&#39;
[MSG] Checksum matches for &#39;Locale-Maketext-TieHash-nbsp-0.02.tar.gz&#39;
Could not open file &#39;C:\Documents and
Settings\Rob.MAGNETO-XP\Application
Data\.cpanplus\5.8.6\build\Locale-Maketext-TieHash-nbsp-0.02\manifest&#39;:
Permission denied at C:/Perl/site/lib/CPANPLUS/Internals/Extract.pm line 158
Could not extract &#39;Locale-Maketext-TieHash-nbsp-0.02/manifest&#39; at
C:/Perl/site/lib/CPANPLUS/Internals/Extract.pm line 158
Unable to extract &#39;C:\Documents and Settings\Rob.MAGNETO-XP\Application
Data\.cpanplus\authors\id\S\ST\STEFFENW\Locale-Maketext-TieHash-nbsp-0.02.tar.gz&#39;:
Could not extract &#39;Locale-Maketext-TieHash-nbsp-0.02/manifest&#39; at
C:/Perl/site/lib/CPANPLUS/Module.pm line 469

gzip.EXE: stdout: Invalid argument
C:\Perl\bin\tar.EXE: Cannot open -: No such file or directory
C:\Perl\bin\tar.EXE: Error is not recoverable: exiting now
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;22&nbsp;10:09:36&nbsp;2005</span>
    <span class="description">kane [...] dwim.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jos I. Boumans&#34; &lt;kane [...] dwim.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [cpan #11139] Calls to tar/gzip lock up on Windows </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 22 Jan 2005 16:05:22 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPANPLUS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">RT-Send-Cc:</td>
    <td class="message-header-value"> </td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Jan 22, 2005, at 4:02 PM, Guest via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; I think the problem may be with Archive::Extract or Archive::Tar.
</div>possibly..

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Right, that wasn&#39;t the question.. as you can see this was some pseudo
&gt;&gt; code.. the question was if your win32 can handle piped commands or
&gt;&gt; not...
</div>&gt;
&gt; Yes, it can.
</div>That&#39;s good to hear, then i wonder though why the piped opens are 
causing
the program to hang...

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; For the heck of it, blow away the directories of the modules you had
&gt;&gt; trouble with, refresh the sourcefiles and try again.. does the problem
&gt;&gt; persist?
</div>&gt;
&gt; Yes. I removed the &#39;id&#39; directory and got the following:
</div>ehm, the /extraction/ location should be removed &#40;as that is where we 
got the errors, not from the original tarball directory&#41;. So, with a 
default setup, that&#39;d be the &#39;build&#39; directory...

--

Jos Boumans

        How do I prove I am not crazy to people who are?

        CPANPLUS        <span class="clickylink"><a target="new" rel="nofollow" href="http://cpanplus.sf.net">http://cpanplus.sf.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;22&nbsp;10:49:22&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rrwo [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[kane@dwim.org - Sat Jan 22 10:09:36 2005]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; That&#39;s good to hear, then i wonder though why the piped opens are 
&gt; causing the program to hang...
</div>
I think Windows has a problem with Perl alarm timeouts for blocking file
reads. This problem came up when I was doing some testing on Time::Out. 

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; For the heck of it, blow away the directories of the modules you had
&gt; &gt;&gt; trouble with, refresh the sourcefiles and try again.. does the problem
&gt; &gt;&gt; persist?
</div>&gt; &gt;
&gt; &gt; Yes. I removed the &#39;id&#39; directory and got the following:
</div>&gt; ehm, the /extraction/ location should be removed &#40;as that is where we 
&gt; got the errors, not from the original tarball directory&#41;. So, with a 
&gt; default setup, that&#39;d be the &#39;build&#39; directory...
</div>
Ok, that fixed it.

So what&#39;s happenng in that directory that is causing this problem?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;22&nbsp;10:54:28&nbsp;2005</span>
    <span class="description">kane [...] dwim.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jos I. Boumans&#34; &lt;kane [...] dwim.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [cpan #11139] Calls to tar/gzip lock up on Windows </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 22 Jan 2005 16:50:18 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPANPLUS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">RT-Send-Cc:</td>
    <td class="message-header-value"> </td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Jan 22, 2005, at 4:49 PM, Guest via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [kane@dwim.org - Sat Jan 22 10:09:36 2005]:
&gt;
<div class="message-stanza open">&gt;&gt; That&#39;s good to hear, then i wonder though why the piped opens are
&gt;&gt; causing the program to hang...
</div>&gt;
&gt; I think Windows has a problem with Perl alarm timeouts for blocking 
&gt; file
&gt; reads. This problem came up when I was doing some testing on Time::Out.
</div>Hmm... we&#39;re not using any alarm directly, but the underlying code 
&#40;ipc::run&#41; might be, not sure...

Any suggestions are of course welcome...


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; For the heck of it, blow away the directories of the modules you had
&gt;&gt;&gt;&gt; trouble with, refresh the sourcefiles and try again.. does the 
&gt;&gt;&gt;&gt; problem
&gt;&gt;&gt;&gt; persist?
</div>&gt;&gt;&gt;
&gt;&gt;&gt; Yes. I removed the &#39;id&#39; directory and got the following:
</div>&gt;&gt; ehm, the /extraction/ location should be removed &#40;as that is where we
&gt;&gt; got the errors, not from the original tarball directory&#41;. So, with a
&gt;&gt; default setup, that&#39;d be the &#39;build&#39; directory...
</div>&gt;
&gt; Ok, that fixed it.
&gt;
&gt; So what&#39;s happenng in that directory that is causing this problem?
</div>Then it is a permissions problem after all -- the permissions of the 
files in the tarball are apparently set to +r only &#40;at least the ones 
with errors&#41;, causing archive::tar to generate an error, and 
archive::extract to use option #2 to extract files, namely /bin/gzip 
and /bin/tar.. and they hang.

Now not having this error occur is a bit tricky, but is possibly 
avoidable -- i&#39;ll look into it. But how to make gzip and tar not hang 
i&#39;m not sure about... any help there would be much appreciated.

--
        Jos Boumans
        
        &#34;Never ask a man what computer he uses. If it&#39;s a Mac, he&#39;ll
        tell you. If it&#39;s not, why embarrass him?&#34; - Tom Clancy

        CPANPLUS        <span class="clickylink"><a target="new" rel="nofollow" href="http://cpanplus.sf.net">http://cpanplus.sf.net</a></span>
                
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;23&nbsp;11:14:09&nbsp;2005</span>
    <span class="description">kane [...] cpan.org -  Status changed from &#39;new&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;17&nbsp;08:01:25&nbsp;2005</span>
    <span class="description">kane [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[kane@dwim.org - Sat Jan 22 10:54:28 2005]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt;&gt; Yes. I removed the &#39;id&#39; directory and got the following:
</div>&gt; &gt;&gt; ehm, the /extraction/ location should be removed &#40;as that is where we
&gt; &gt;&gt; got the errors, not from the original tarball directory&#41;. So, with a
&gt; &gt;&gt; default setup, that&#39;d be the &#39;build&#39; directory...
</div>&gt; &gt;
&gt; &gt; Ok, that fixed it.
&gt; &gt;
&gt; &gt; So what&#39;s happenng in that directory that is causing this problem?
</div>&gt; Then it is a permissions problem after all -- the permissions of the 
&gt; files in the tarball are apparently set to +r only &#40;at least the ones 
&gt; with errors&#41;, causing archive::tar to generate an error, and 
&gt; archive::extract to use option #2 to extract files, namely /bin/gzip 
&gt; and /bin/tar.. and they hang.
</div>
As a sort of &#39;safety net&#39; CPANPLUS now does a chmod -R +w on the extract dir, in case we 
find naughty files that are only +r so a re-extract will work without causing errors.
This change is available from CPANPLUS 0.053 and up.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Now not having this error occur is a bit tricky, but is possibly 
&gt; avoidable -- i&#39;ll look into it. But how to make gzip and tar not hang 
&gt; i&#39;m not sure about... any help there would be much appreciated.
</div>
This issue i don&#39;t know how to resolve, but is most likely caused either by the IPC::* module 
loaed by IPC::Cmd &#40;probably IPC::Run since you are usually on win32&#41; and/or the OS.
Investigating there might be worth while, but is no longer a CPANPLUS issue, so i&#39;ll close this 
bug.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;17&nbsp;08:01:26&nbsp;2005</span>
    <span class="description">kane [...] cpan.org -  Status changed from &#39;stalled&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;17&nbsp;08:01:26&nbsp;2005</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
