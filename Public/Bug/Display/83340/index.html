<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #83340 for DBIx-Class: Test that DBIC Modules Load</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #83340 for DBIx-Class: Test that DBIC Modules Load</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=DBIx-Class">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=DBIx-Class">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=DBIx-Class">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=DBIx-Class">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBIx-Class">DBIx-Class CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">83340</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=DBIx-Class">DBIx-Class</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dperrett [...] cambridge.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10410-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10411-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




DBIx-Class-Requires-Carp-Clan.zip<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1181378/623209/DBIx-Class-Requires-Carp-Clan.zip">
Fri Feb 15 06:55:08 2013 (2.1k) by dperrett [...] cambridge.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=83340">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1181378" href="/Public/Bug/Display.html?id=83340#txn-1181378">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;15&nbsp;06:55:08&nbsp;2013</span>
    <span class="description">dperrett [...] cambridge.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Test that DBIC Modules Load</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 15 Feb 2013 11:54:54 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Daniel Perrett &lt;dperrett [...] cambridge.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1181378/623207/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/623207">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">BACKGROUND

I installed DBIx::Class 0.08123 on Strawberry perl 5.12.3 using ppm &#40;OS: 
XP Pro&#41;. The install was successful, but, while trying to run a minimal 
app &#40;attached&#41;, DBIx::Class failed with this message:

Can&#39;t locate Carp/Clan.pm in @INC &#40;@INC contains: AudioDB/lib 
C:/strawberry/perl/site/lib C:/strawberry/perl/vendor/lib 
C:/strawberry/perl/lib .&#41; at 
C:/strawberry/perl/site/lib/DBIx/Class/Exception.pm line 6.
BEGIN failed--compilation aborted at 
C:/strawberry/perl/site/lib/DBIx/Class/Exception.pm line 6.
Compilation failed in require at 
C:/strawberry/perl/site/lib/DBIx/Class/Schema.pm line 6.
BEGIN failed--compilation aborted at 
C:/strawberry/perl/site/lib/DBIx/Class/Schema.pm line 6.
Compilation failed in require at &#40;eval 2&#41; line 2.
        ...propagated at C:/strawberry/perl/lib/base.pm line 94.
BEGIN failed--compilation aborted at AudioDB/lib/AudioDB/Schema.pm line 4.
Compilation failed in require at adb-test.pl line 5.
BEGIN failed--compilation aborted at adb-test.pl line 5.

DBIx/Class/Exception.pm does indeed call Carp::Clan on line 6.

I&#39;m sure I can fix it by installing Carp::Clan, but I presume it ought to 
have gone in the DBIx::Class dependencies, as it&#39;s not a core module. 
DBIx::Class has now switched to a home-grown solution. I&#39;m now upgrading 
using CPAN instead of ppm and have filed a bug with Strawberry separately 
to get a better DBIx::Class version. 

ACTION REQUESTED

However, oddly, I also couldn&#39;t find any tests that guaranteed all the 
classes could be loaded ok, but the test suite is pretty big, so possibly 
I missed them. Nevertheless, clearly 0.8123 passed on a lot of machines, 
and where it failed, didn&#39;t necessarily say anything about Carp::Clan.

Should such a test be included, if it is not already?

Daniel
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1181378/623208/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/623208">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.5k</span>
</div>
<div class="messagebody">
</div>
</div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1181378/623209/DBIx-Class-Requires-Carp-Clan.zip">Download DBIx-Class-Requires-Carp-Clan.zip</a><br />
<span class="downloadcontenttype">application/zip 2.1k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1181386" href="/Public/Bug/Display.html?id=83340#txn-1181386">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;15&nbsp;07:14:51&nbsp;2013</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #83340] Test that DBIC Modules Load</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 15 Feb 2013 23:14:19 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Daniel Perrett via RT &lt;bug-DBIx-Class [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Peter Rabbitson &lt;ribasushi [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1181386/623217/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/623217">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, Feb 15, 2013 at 06:55:12AM -0500, Daniel Perrett via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Fri Feb 15 06:55:08 2013: Request 83340 was acted upon.
&gt; Transaction: Ticket created by dperrett@cambridge.org
&gt;        Queue: DBIx-Class
&gt;      Subject: Test that DBIC Modules Load
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: dperrett@cambridge.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=83340">https://rt.cpan.org/Ticket/Display.html?id=83340</a></span> &gt;
&gt; 
&gt; 
&gt; BACKGROUND
&gt; 
&gt; I installed DBIx::Class 0.08123 on Strawberry perl 5.12.3 using ppm &#40;OS: 
&gt; XP Pro&#41;. The install was successful, but, while trying to run a minimal 
&gt; app &#40;attached&#41;, DBIx::Class failed with this message:
&gt; 
&gt; Can&#39;t locate Carp/Clan.pm in @INC &#40;@INC contains: AudioDB/lib 
&gt; ...
&gt;
&gt; 
&gt; However, oddly, I also couldn&#39;t find any tests that guaranteed all the 
&gt; classes could be loaded ok, but the test suite is pretty big, so possibly 
&gt; I missed them. Nevertheless, clearly 0.8123 passed on a lot of machines, 
&gt; and where it failed, didn&#39;t necessarily say anything about Carp::Clan.
&gt; 
&gt; Should such a test be included, if it is not already?
&gt; 
</div>
Not really. DBIx::Class 0.08123 clearly indicates it requires Carp::Clan 
[1]. Having tests that verify that the necessary modules were indeed 
loaded is rather superfluous, because the impact of a broken toolchain 
is immediately apparent &#40;as you saw&#41;. All in all whoever built the ppm 
screwed up royally, and it was not immediately apparent to you because 
ppm installs do not execute any tests. This is why it is always 
preferred to use the CPAN toolchain &#40;cpan/cpanm/cpanp&#41; as opposed to ppm.

I will wait for you to confirm the above fully answers your question 
before closing this ticket.

Cheers

[1] <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/FREW/DBIx-Class-0.08123/META.yml#L34">https://metacpan.org/source/FREW/DBIx-Class-0.08123/META.yml#L34</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1181389" href="/Public/Bug/Display.html?id=83340#txn-1181389">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;15&nbsp;07:14:54&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1181404" href="/Public/Bug/Display.html?id=83340#txn-1181404">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;15&nbsp;07:28:56&nbsp;2013</span>
    <span class="description">dperrett [...] cambridge.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #83340] Test that DBIC Modules Load</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 15 Feb 2013 12:28:32 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Daniel Perrett &lt;dperrett [...] cambridge.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1181404/623224/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/623224">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the advice that best practice is to use cpan in the first 
instance instead of ppm: I&#39;ll do that in future.

&#34;Having tests that verify that the necessary modules were indeed loaded is 
rather superfluous&#34;
I agree loading the dependencies is redundant. I meant something like 
use_ok&#40;&#39;DBIx::Class::Exception&#39;&#41;, as distinct from duck-testing &#40;if you 
know what I mean&#41; the functionality of the module.

Daniel



From:   &#34;Peter Rabbitson via RT&#34; &lt;bug-DBIx-Class@rt.cpan.org&gt;
To:     dperrett@cambridge.org
Date:   15/02/2013 12:15
Subject:        Re: [rt.cpan.org #83340] Test that DBIC Modules Load



&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=83340">https://rt.cpan.org/Ticket/Display.html?id=83340</a></span> &gt;

On Fri, Feb 15, 2013 at 06:55:12AM -0500, Daniel Perrett via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Fri Feb 15 06:55:08 2013: Request 83340 was acted upon.
&gt; Transaction: Ticket created by dperrett@cambridge.org
&gt;        Queue: DBIx-Class
&gt;      Subject: Test that DBIC Modules Load
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: dperrett@cambridge.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=83340">https://rt.cpan.org/Ticket/Display.html?id=83340</a></span> &gt;
&gt; 
&gt; 
&gt; BACKGROUND
&gt; 
&gt; I installed DBIx::Class 0.08123 on Strawberry perl 5.12.3 using ppm &#40;OS: 
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; XP Pro&#41;. The install was successful, but, while trying to run a minimal 
&gt; app &#40;attached&#41;, DBIx::Class failed with this message:
&gt; 
&gt; Can&#39;t locate Carp/Clan.pm in @INC &#40;@INC contains: AudioDB/lib 
&gt; ...
&gt;
&gt; 
&gt; However, oddly, I also couldn&#39;t find any tests that guaranteed all the 
&gt; classes could be loaded ok, but the test suite is pretty big, so 
</div>possibly 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I missed them. Nevertheless, clearly 0.8123 passed on a lot of machines, 
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; and where it failed, didn&#39;t necessarily say anything about Carp::Clan.
&gt; 
&gt; Should such a test be included, if it is not already?
&gt; 
</div>
Not really. DBIx::Class 0.08123 clearly indicates it requires Carp::Clan 
[1]. Having tests that verify that the necessary modules were indeed 
loaded is rather superfluous, because the impact of a broken toolchain 
is immediately apparent &#40;as you saw&#41;. All in all whoever built the ppm 
screwed up royally, and it was not immediately apparent to you because 
ppm installs do not execute any tests. This is why it is always 
preferred to use the CPAN toolchain &#40;cpan/cpanm/cpanp&#41; as opposed to ppm.

I will wait for you to confirm the above fully answers your question 
before closing this ticket.

Cheers

[1] <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/FREW/DBIx-Class-0.08123/META.yml#L34">https://metacpan.org/source/FREW/DBIx-Class-0.08123/META.yml#L34</a></span>
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1181404/623225/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/623225">with headers</a>
<br />
<span class="downloadcontenttype">text/html 3.8k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1181410" href="/Public/Bug/Display.html?id=83340#txn-1181410">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;15&nbsp;08:01:49&nbsp;2013</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #83340] Test that DBIC Modules Load</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 16 Feb 2013 00:01:37 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Daniel Perrett via RT &lt;bug-DBIx-Class [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Peter Rabbitson &lt;ribasushi [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1181410/623230/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/623230">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, Feb 15, 2013 at 07:29:02AM -0500, Daniel Perrett via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: DBIx-Class
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=83340">https://rt.cpan.org/Ticket/Display.html?id=83340</a></span> &gt;
&gt; 
&gt; Thanks for the advice that best practice is to use cpan in the first 
&gt; instance instead of ppm: I&#39;ll do that in future.
&gt; 
&gt; &#34;Having tests that verify that the necessary modules were indeed loaded is 
&gt; rather superfluous&#34;
&gt; I agree loading the dependencies is redundant. I meant something like 
&gt; use_ok&#40;&#39;DBIx::Class::Exception&#39;&#41;, as distinct from duck-testing &#40;if you 
&gt; know what I mean&#41; the functionality of the module.
</div>
Given that many critical parts of the distribution &#40;e.g. DBIx::Class::Schema&#41;
use&#40;&#41; DBIx::Class::Exception - a use_ok is just as redundant - 95% of your
tests will fail anyway. One could argue that tests are cheap, and a use_ok
wouldn&#39;t hurt, however as a counter-argument I shall present this:

<span class="clickylink"><a target="new" rel="nofollow" href="http://code.activestate.com/ppm/DBIx-Class/">http://code.activestate.com/ppm/DBIx-Class/</a></span>

The unavailability of latest DBIC on many of the platforms is because
our test suite does not complete in under 5 minutes. Not because DBIC is
horrifically slow, but because we have a lot of tests ;&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1181420" href="/Public/Bug/Display.html?id=83340#txn-1181420">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;15&nbsp;08:07:23&nbsp;2013</span>
    <span class="description">dperrett [...] cambridge.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #83340] Test that DBIC Modules Load</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 15 Feb 2013 13:06:59 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Daniel Perrett &lt;dperrett [...] cambridge.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1181420/623237/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/623237">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ah, ok - no problem, then. I was just really checking if use_ok&#40;&#41;s were 
missed off unintentionally!

Daniel



From:   &#34;Peter Rabbitson via RT&#34; &lt;bug-DBIx-Class@rt.cpan.org&gt;
To:     dperrett@cambridge.org
Date:   15/02/2013 13:02
Subject:        Re: [rt.cpan.org #83340] Test that DBIC Modules Load



&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=83340">https://rt.cpan.org/Ticket/Display.html?id=83340</a></span> &gt;

On Fri, Feb 15, 2013 at 07:29:02AM -0500, Daniel Perrett via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: DBIx-Class
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=83340">https://rt.cpan.org/Ticket/Display.html?id=83340</a></span> &gt;
&gt; 
&gt; Thanks for the advice that best practice is to use cpan in the first 
&gt; instance instead of ppm: I&#39;ll do that in future.
&gt; 
&gt; &#34;Having tests that verify that the necessary modules were indeed loaded 
</div>is 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; rather superfluous&#34;
&gt; I agree loading the dependencies is redundant. I meant something like 
&gt; use_ok&#40;&#39;DBIx::Class::Exception&#39;&#41;, as distinct from duck-testing &#40;if you 
&gt; know what I mean&#41; the functionality of the module.
</div>
Given that many critical parts of the distribution &#40;e.g. 
DBIx::Class::Schema&#41;
use&#40;&#41; DBIx::Class::Exception - a use_ok is just as redundant - 95% of your
tests will fail anyway. One could argue that tests are cheap, and a use_ok
wouldn&#39;t hurt, however as a counter-argument I shall present this:

<span class="clickylink"><a target="new" rel="nofollow" href="http://code.activestate.com/ppm/DBIx-Class/">http://code.activestate.com/ppm/DBIx-Class/</a></span>

The unavailability of latest DBIC on many of the platforms is because
our test suite does not complete in under 5 minutes. Not because DBIC is
horrifically slow, but because we have a lot of tests ;&#41;
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1181420/623238/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/623238">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.6k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1181600" href="/Public/Bug/Display.html?id=83340#txn-1181600">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;15&nbsp;12:25:36&nbsp;2013</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1181600/623338/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/623338">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 57b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Rejecting ticket - side effect of a faulty &#40;ancient&#41; ppm.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1181603" href="/Public/Bug/Display.html?id=83340#txn-1181603">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;15&nbsp;12:25:39&nbsp;2013</span>
    <span class="description">ribasushi [...] leporine.io -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.485816</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
