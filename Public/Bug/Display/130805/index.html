<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #130805 for PDF-API2: Problem with particular PDF</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #130805 for PDF-API2: Problem with particular PDF</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/PDF-API2/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/PDF-API2/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/PDF-API2/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/PDF-API2/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/PDF-API2">PDF-API2 CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">130805</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/PDF-API2/Active/">PDF-API2</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
apache2 [...] netcasters.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-24958-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-24959-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;23&nbsp;10:04:11&nbsp;2019</span>
    <span class="description">apache2 [...] netcasters.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Problem with particular PDF</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 23 Oct 2019 09:25:01 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-pdf-api2 [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> apache2 &lt;apache2 [...] netcasters.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I have a particular pdf &#40;actually there are a few of them&#41;, that when
written to via PDF::API2, Adobe cannot render the file.  This is
via Internet Explorer, Edge and Firefox.  Chrome renders the file fine.

I did a simple offline test:

- Call ghostscript to make a copy of the file.  SUCCESS
- Add &#34;Hello World&#34; text to file.  SUCCESS
- Save file  SUCCCESS
- Call ghostscript to make a copy of the file.  ERROR

So, in this case ghostscript has an issue with the file.  Maybe
the issue is with ghostscript and Adobe.

Seems like you need to see the pdf and possible my test code, but
I&#39;d rather not make it public since it is a client file.  What
can we do to resolve?

Let me know if you need any further information.

Thank you very much

Ted
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;24&nbsp;11:11:10&nbsp;2019</span>
    <span class="description">PMPERRY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Well, yes, we ARE going to need an example PDF that shows this problem. If I understand your explanation, you have a working PDF, modify it with GS, and then Adobe doesn&#39;t like it? Was this PDF originally produced with PDF::API2? Which &#34;Adobe&#34; are you talking about -- Reader, Acrobat, or something else? First of all, PDF::API2 produces PDF 1.4, which while old, should work OK with GS or Adobe. If GS takes a working PDF &#40;that Reader doesn&#39;t ask to SAVE after displaying&#41;, and breaks it, that sounds like a problem with GS. Without seeing an example, though, it&#39;s hard to say for sure whether there was something odd about the original PDF.

If the PDF was produced with PDF::API2, please supply the Perl code for PDF::API2, rather than just the PDF output. Cut down the code to the minimum that shows the problem, while removing proprietary information. Just for giggles, you might try it with PDF::Builder too, and see if the same problem shows up. Note that if Adobe Reader asks to save a PDF when exiting, that means it had to fix up a defective PDF when it loaded it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;24&nbsp;11:11:10&nbsp;2019</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;26&nbsp;09:21:16&nbsp;2019</span>
    <span class="description">PMPERRY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#40;received via email from OP&#41;

Hi,

Sorry to contact you directly instead of through this page

<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Public/Bug/Display.html?id=130805">https://rt.cpan.org/Public/Bug/Display.html?id=130805</a></span>

But, I couldn&#39;t figure out how to post a reply there.

==================================================
To add a comment to this thread, just email bug-PDF-API2 [at] rt.cpan.org with subject line [rt.cpan.org #130805]. Note 1 space between org and #, and the [ ] around the whole subject. Nothing else. If you don&#39;t follow this format carefully, you will end up creating a new bug report! HTML formatting within the body does not work.
==================================================

-------------------------------------------------------------

Comments inserted below ....

Well, yes, we ARE going to need an example PDF that shows this problem. If I understand your explanation, you have a working PDF, modify it with GS, and then Adobe doesn&#39;t like it?

- Have an existing .pdf &#40;v1.4&#41;.  Added &#34;Hello World&#34; to the
  pdf via PDF::API2, then saved.  Then tried to make a copy in
  GS, GS fails to make a copy.

=================================================================

use PDF::API2 &#40;&#41;;

$input_file = &#39;66.pdf&#39;;
$output_file = &#39;67.pdf&#39;;

system &#34;/usr/bin/gs&#34;, &#34;-sDEVICE=pdfwrite&#34;, &#34;-o&#34;, &#34;${output_file}GS&#34;, &#34;$input_file&#34;;

print &#34;------------------------------------------------------\n&#34;;

my $pdf = PDF::API2-&gt;new&#40;&#41;;
my $template_pdf = PDF::API2-&gt;open&#40;$input_file&#41;;
$pdf-&gt;import_page&#40;$template_pdf, 1&#41;;

$page = $pdf-&gt;openpage&#40;1&#41;;

$font = $pdf-&gt;corefont&#40;&#39;Helvetica-Bold&#39;&#41;;

$text = $page-&gt;text&#40;&#41;;
$text-&gt;font&#40;$font, 20&#41;;
$text-&gt;translate&#40;200, 700&#41;;
$text-&gt;text&#40;&#39;Hello World!&#39;&#41;;

$pdf-&gt;saveas&#40;$output_file&#41;;

system &#34;/usr/bin/gs&#34;, &#34;-sDEVICE=pdfwrite&#34;, &#34;-o&#34;, &#34;${output_file}GS&#34;, &#34;$output_file&#34;;


====================================================================

GPL Ghostscript 9.25 &#40;2018-09-13&#41;
Copyright &#40;C&#41; 2018 Artifex Software, Inc.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Processing pages 1 through 1.
Page 1
   **** Error reading a content stream. The page may be incomplete.
               Output may be incorrect.
   **** Error: Form stream has unbalanced q/Q operators &#40;too many q&#39;s&#41;
               Output may be incorrect.
   **** Error reading a content stream. The page may be incomplete.
               Output may be incorrect.
Loading NimbusSans-Bold font from /usr/share/ghostscript/Resource/Font/NimbusSans-Bold... 5460108 4049994 3001452 1570283 3 done.
   **** Error: File did not complete the page properly and may be damaged.
               Output may be incorrect.

========================================================================



Was this PDF originally produced with PDF::API2?

- Don&#39;t know, it was provided by a client and is a few years old


Which &#34;Adobe&#34; are you talking about -- Reader, Acrobat, or something else?

- File can&#39;t be read via Explorer/Firefox either, so it&#39;s the
  browser plugin &#40;Acrobat Reader DC?&#41;.  Ok in Chrome.



First of all, PDF::API2 produces PDF 1.4, which while old, should work OK with GS or Adobe. If GS takes a working PDF &#40;that Reader doesn&#39;t ask to SAVE after displaying&#41;, and breaks it, that sounds like a problem with GS. Without seeing an example, though, it&#39;s hard to say for sure whether there was something odd about the original PDF.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;26&nbsp;10:08:15&nbsp;2019</span>
    <span class="description">PMPERRY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">==================================================
You can also reply if you have a CPAN account registered, but usually only developers who are uploading a package to CPAN will bother with applying for an account.
==================================================

OK, so the only involvement with PDF::API2 was to add a line to the PDF? Can I assume that you tried the GS run ON THE ORIGINAL PDF &#40;without the PDF::API2 change&#41; and it did NOT get error&#40;s&#41;? What exactly are you using GS for in this chain? Are you changing the format, just printing it, or what? Maybe you can do what you want without involving GS. It&#39;s certainly not needed just to make a simple copy of a PDF. Does the ORIGINAL PDF load correctly into a PDF reader &#40;such as Adobe Reader&#41; without error messages or asking to save it after viewing it?

Check the logic of your GS code usage. In the first GS run, are you just showing that input 66.pdf and writing 67.pdfGS does &#40;or does not&#41; run correctly? Then you use PDF::API2 to output 67.pdf as a modified 66.pdf. Finally, in the second GS run input 67.pdf &#40;just created&#41; and output 67.pdfGS to show that the PDF::API2 output is &#40;or is not&#41; correct? Are the GS error messages from only the second run?

In the PDF::API2 code, I see that you open the PDF, import_page, and then openpage. If you&#39;re trying to extract one page out of the original PDF, you might try the example code for import_page:

    $pdf = PDF::API2-&gt;new&#40;&#41;;
    $old = PDF::API2-&gt;open&#40;&#39;our/old.pdf&#39;&#41;;

    # Add page 2 from the old PDF as page 1 of the new PDF
    $page = $pdf-&gt;import_page&#40;$old, 2&#41;;

    $pdf-&gt;saveas&#40;&#39;our/new.pdf&#39;&#41;;

and see if that makes any difference.

Finally, the complaint from GS is about unbalanced q/Q &#40;save and restore graphics state&#41;. If nothing else works, try installing PDF::Builder and doing the same steps &#40;instead of with PDF::API2&#41;. I rewrote some of the code in that area, and it might make a difference. At least it would show that there IS a bug in PDF::API2, and narrow down the area.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;29&nbsp;21:37:44&nbsp;2019</span>
    <span class="description">PMPERRY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I received your email &#40;see below&#41;, but the mail system reported that it could not deliver my reply to you &#40;so here it is&#41;:

Hi,

I tried using PDF::Builder and I got the same error.  &#40;Really cool though, that all I had to change in my code to get it to work was to replace API2 with Builder.&#41;

I&#39;m using GS strictly for testing.  I&#39;m really opening up the file in a browser, Chrome is good, all others fail to open up the pdf.

Just to try and clarify my test.

- Have pdf
- Make a copy of orig pdf using GS - SUCCESS
- Add &#34;Hello World&#34; text to orig pdf using PDF::API2/Builder - SUCCESS
- Save to new pdf using PDF::API2/Builder - SUCCESS
- Make a copy of new pdf using GS - FAIL

Thanks
Ted 

My response:

Just to clarify, your original PDF &#40;step 1&#41; loads correctly in most/all browsers or readers -- no error messages, and no asking to save the PDF when you exit the browser or reader? If not, that means the original PDF is faulty, and it would not be surprising if PDF::API2/Builder trying to modify it, would break.

When you say &#34;make a copy... using GS&#34;, are you changing the format of the PDF file, or performing some other operation on it? I&#39;m trying to understand why you&#39;re using GS if you&#39;re simply making a copy of the PDF -- why can&#39;t you just do a command-line copy/cp old.pdf new.pdf? If that&#39;s all you&#39;re doing, let&#39;s try eliminating the GS steps and see if the problem goes away. If it does go away &#40;no GS involved&#41;, that means that GS is corrupting the PDF &#40;although PDF::API2&#39;s changes may be an accessory to the crime&#41;.

Keep in mind that PDF::API2 is a PDF version 1.4 system, and often breaks when reading PDF 1.5 and up. Find out what version your PDF file is &#40;it&#39;s the first line of the file&#41;. If it&#39;s greater than 1.4, that might be a problem for both API2 and Builder. A few features they can handle, but some will break things.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;31&nbsp;22:34:14&nbsp;2019</span>
    <span class="description">PMPERRY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m making some progress. I still don&#39;t know why you&#39;re making a copy with GS, so I took it out. It still produces a corrupt PDF &#40;starts to render then quits with an error&#41;. The following code DOES produce a good  PDF:

 use strict;
 use warnings;
 use PDF::Builder &#40;&#41;;

 my $input_file = &#39;357.pdf&#39;;
 my $output_file = &#39;357Text.pdf&#39;;

 print &#34;------------------------------------------------------\n&#34;;

 my $pdf = PDF::Builder-&gt;open&#40;$input_file&#41;;

 my $page = $pdf-&gt;openpage&#40;1&#41;;
 my @size = $page-&gt;mediabox&#40;&#41;;

 my $font = $pdf-&gt;corefont&#40;&#39;Helvetica-Bold-Oblique&#39;&#41;;

 my $text = $page-&gt;text&#40;&#41;;
 $text-&gt;font&#40;$font, 40&#41;;
 $text-&gt;translate&#40;$size[2]/2, $size[3]/2&#41;;
 $text-&gt;text_center&#40;&#39;Hello World!&#39;&#41;;

 $pdf-&gt;saveas&#40;$output_file&#41;;

Note that it simply opens the template file, selects page 1 &#40;the only page&#41;, adds some text, and writes &#40;saveas&#41; to a different name. It should work the same with the current PDF::API2 &#40;change text_center to text and correct the location X value&#41;.

When I use something closer to your original code, where you import one page into a new empty PDF, that produces a corrupt PDF all by itself &#40;even without adding the text&#41;. Something in import_page&#40;&#41; is not working right. I&#39;ll have to keep looking at it. For some reason having to do with resource names, import_page&#40;&#41; creates a Form and outputs the page with formimage&#40;&#41;. That passes the t-tests, but seems to create a corrupt PDF in the process.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;02&nbsp;13:16:27&nbsp;2019</span>
    <span class="description">PMPERRY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">BTW, you can ignore the bit about &#34;change text_center to text&#34;. I forgot that PDF::API2 does in fact include a text_center&#40;&#41; call. Otherwise, just changing Builder to API2 should work on a PDF::API2 system.

I haven&#39;t gotten anywhere yet on why import_page&#40;&#41; seems to mess up the page.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
