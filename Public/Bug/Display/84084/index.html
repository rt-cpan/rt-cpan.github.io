<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #84084 for Net-SSLeay: Net::SSLeay again - need guidance</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #84084 for Net-SSLeay: Net::SSLeay again - need guidance</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-SSLeay/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-SSLeay/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-SSLeay/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-SSLeay/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-SSLeay">Net-SSLeay CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">84084</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-SSLeay/Active/">Net-SSLeay</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
h.m.brand [...] xs4all.nl

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-44414-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-44415-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;20&nbsp;04:33:23&nbsp;2013</span>
    <span class="description">h.m.brand [...] xs4all.nl -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Net::SSLeay again - need guidance</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 20 Mar 2013 09:32:57 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;mikem [...] open.com.au via RT&#34; &lt;bug-Net-SSLeay [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;H.Merijn Brand&#34; &lt;h.m.brand [...] xs4all.nl&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve successfully built and distributed perl-5.16.3 with Net::SSLeay on
HP-UX 11.31, 11.23, 11.11, and 11.00 in both 32 and 64bit builds.  That
much for the the good news. Yeah!

I cannot get the tests to pass on HP-UX 10.20 though. I know that OS is
officially dead and gone, but when I look at the downloads from my site
I must conclude the system is still used.

 GNU gcc: <span class="clickylink"><a target="new" rel="nofollow" href="http://mirrors.develooper.com/hpux/dl-gcc.html">http://mirrors.develooper.com/hpux/dl-gcc.html</a></span>
 perl:    <span class="clickylink"><a target="new" rel="nofollow" href="http://mirrors.develooper.com/hpux/dl-perl.html">http://mirrors.develooper.com/hpux/dl-perl.html</a></span>

&#40;I might expand those with OS-version per month to get better insight&#41;

Anyway, back to the problem. Note that this is and old and slow system,
with not a lot of resources &#40;a simple make takes over 5 minutes&#41;:

 HP-UX 10.20/32 U  9000/800/D390 PA8000/240 pa-2.0  512 Mb

When I link Net::SSLeay with the .a libraries, where the .a objects
are compiled -fPIC:

 gcc -c  -I/usr/local/ssl/include -mpa-risc-1-1 -DPERL_DONT_CREATE_GVSV
 -D_HPUX_SOURCE -fno-strict-aliasing -pipe -D_LARGEFILE_SOURCE
 -D_FILE_OFFSET_BITS=64 -O2 -g   -DVERSION=\&#34;1.52\&#34;
 -DXS_VERSION=\&#34;1.52\&#34; -fPIC &#34;-I/opt/perl/lib/5.16.3/PA-RISC2.0/CORE&#34;
 SSLeay.c Running Mkbootstrap for Net::SSLeay &#40;&#41; chmod 644 SSLeay.bs rm
 -f blib/arch/auto/Net/SSLeay/SSLeay.sl
 LD_RUN_PATH=&#34;/usr/local/ssl/lib:/lib&#34; /usr/bin/ld  -b
 -L/usr/local/ssl/lib -L/usr/local/lib -L/pro/local/lib SSLeay.o  -o
 blib/arch/auto/Net/SSLeay/SSLeay.sl       \ -L/usr/local/ssl
 -L/usr/local/ssl/lib -l:libssl.a -l:libcrypto.a -lz

t/external/08_external.t ............... ok
t/external/15_altnames.t ............... ok
t/handle/external/10_destroy.t ......... ok
t/handle/external/50_external.t ........ ok
t/handle/local/05_use.t ................ ok
t/local/01_pod.t ....................... ok
t/local/02_pod_coverage.t .............. ok
t/local/03_use.t ....................... ok
t/local/04_basic.t ..................... 1/6 # Version info:
# Testing Net::SSLeay 1.52, Perl 5.016003, /opt/perl/bin/perl
# OpenSSL version:  &#39;OpenSSL 0.9.8r 8 Feb 2011&#39;
# OpenSSL platform: &#39;platform: hpux-parisc-cc&#39;
t/local/04_basic.t ..................... ok
t/local/05_passwd_cb.t ................. ok
t/local/06_tcpecho.t ................... ok
t/local/07_sslecho.t ................... 1/78
#   Failed test &#39;set_cert_and_key&#39;
#   at t/local/07_sslecho.t line 62.
t/local/07_sslecho.t ................... 51/78 # Looks like you failed
1 test of 78. t/local/07_sslecho.t ................... Dubious, test
returned 1 &#40;wstat 256, 0x100&#41; Failed 1/78 subtests
t/local/08_pipe.t ...................... 1/11 Use of uninitialized
value in numeric eq &#40;==&#41; at t/local/08_pipe.t line 82.

Hang &#40;I had it hang for 24 hours&#41;

When I build with the shared libraries, I get

gcc -c  -I/usr/local/ssl/include -mpa-risc-1-1 -DPERL_DONT_CREATE_GVSV
-D_HPUX_SOURCE -fno-strict-aliasing -pipe -D_LARGEFILE_SOURCE
-D_FILE_OFFSET_BITS=64 -O2 -g   -DVERSION=\&#34;1.52\&#34;
-DXS_VERSION=\&#34;1.52\&#34; -fPIC &#34;-I/opt/perl/lib/5.16.3/PA-RISC2.0/CORE&#34;
SSLeay.c Running Mkbootstrap for Net::SSLeay &#40;&#41; chmod 644 SSLeay.bs rm
-f blib/arch/auto/Net/SSLeay/SSLeay.sl
LD_RUN_PATH=&#34;/usr/local/ssl/lib:/lib&#34; /usr/bin/ld  -b
-L/usr/local/ssl/lib -L/usr/local/lib -L/pro/local/lib SSLeay.o  -o
blib/arch/auto/Net/SSLeay/SSLeay.sl       \ -L/usr/local/ssl
-L/usr/local/ssl/lib -lssl -lcrypto -lz

t/external/08_external.t ............... ok
t/external/15_altnames.t ............... ok
t/handle/external/10_destroy.t ......... ok
t/handle/external/50_external.t ........ ok
t/handle/local/05_use.t ................ ok
t/local/01_pod.t ....................... ok
t/local/02_pod_coverage.t .............. ok
t/local/03_use.t ....................... ok
t/local/04_basic.t ..................... 1/6 # Version info:
# Testing Net::SSLeay 1.52, Perl 5.016003, /opt/perl/bin/perl
# OpenSSL version:  &#39;OpenSSL 0.9.8r 8 Feb 2011&#39;
# OpenSSL platform: &#39;platform: hpux-parisc-cc&#39;
t/local/04_basic.t ..................... ok
t/local/05_passwd_cb.t ................. ok
t/local/06_tcpecho.t ................... ok
t/local/07_sslecho.t ................... 1/78
#   Failed test &#39;set_cert_and_key&#39;
#   at t/local/07_sslecho.t line 62.
t/local/07_sslecho.t ................... 51/78 # Looks like you failed 1 test of 78.
t/local/07_sslecho.t ................... Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/78 subtests
t/local/08_pipe.t ...................... ok
t/local/15_bio.t ....................... ok
t/local/20_autoload.t .................. ok
t/local/21_constants.t ................. ok
t/local/30_error.t ..................... ok
t/local/31_rsa_generate_key.t .......... ok
t/local/32_x509_get_cert_info.t ........ ok
t/local/33_x509_create_cert.t .......... ok
t/local/34_x509_crl.t .................. ok
t/local/35_ephemeral.t ................. ok
t/local/36_verify.t .................... ok
t/local/37_asn1_time.t ................. ok
t/local/38_priv-key.t .................. ok
t/local/39_pkcs12.t .................... ok
t/local/40_npn_support.t ............... skipped: openssl 1.0.1 required
t/local/50_digest.t .................... ok
t/local/61_threads-cb-crash.t .......... skipped: your perl is not compiled with ithreads or is pre-5.8
t/local/62_threads-ctx_new-deadlock.t .. skipped: your perl is not compiled with ithreads or is pre-5.8
t/local/kwalitee.t ..................... skipped: Test::Kwalitee not installed; skipping

Test Summary Report
-------------------
t/local/07_sslecho.t                 &#40;Wstat: 256 Tests: 78 Failed: 1&#41;
  Failed test:  3
  Non-zero exit status: 1
Files=31, Tests=2597, 812 wallclock secs &#40; 5.82 usr  0.34 sys + 353.57 cusr  2.24 csys = 361.97 CPU&#41;
Result: FAIL
Failed 1/31 test programs. 1/2597 subtests failed.

&#40;that make test took 16 minutes&#41;

When I use the second version, Crypt::SSLeay-0.64 passes, but
IO::Socket::SSL-1.84 fails beyond the point I am comfortable to ship:

t/01loadmodule.t ........... ok
t/02settings.t ............. ok
t/acceptSSL-timeout.t ...... Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 10/15 subtests
t/auto_verify_hostname.t ... Failed 16/30 subtests
t/cert_no_file.t ........... Failed 4/9 subtests
t/compatibility.t .......... 1/9 Can&#39;t locate object method &#34;issuer_name&#34; via package &#34;IO::Socket::INET&#34; at t/compatibility.t line 53.
t/compatibility.t .......... Failed 6/9 subtests
t/connectSSL-timeout.t ..... Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 10/16 subtests
t/core.t ................... Failed 47/52 subtests
t/dhe.t .................... Failed 3/3 subtests
t/io-socket-inet6.t ........ skipped: no IO::Socket::INET6 available
t/io-socket-ip.t ........... skipped: no IO::Socket::IP 0.11 available
t/memleak_bad_handshake.t .. skipped: no usable ps
t/nonblock.t ............... Failed 8/27 subtests
t/npn.t .................... skipped: NPN not available in Net::SSLeay
t/readline.t ............... ok
t/sessions.t ............... ok
t/signal-readline.t ........ 1/9 readline&#40;&#41; on unopened filehandle 1 at t/signal-readline.t line 50.
Use of uninitialized value $line in string ne at t/signal-readline.t line 51.
Can&#39;t use an undefined value as a symbol reference at t/signal-readline.t line 61.
t/signal-readline.t ........ Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
Failed 7/9 subtests
t/sni.t .................... skipped: because no client side SNI support - openssl/Net::SSleay too old
t/start-stopssl.t .......... 1/16 not ok #client::start_SSL: SSL connect attempt failed with unknown error
not ok #server::start_SSL: SSL connect accept failed because of handshake problems
t/start-stopssl.t .......... Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
Failed 14/16 subtests
t/startssl-failed.t ........ ok
t/startssl.t ............... Failed 5/9 subtests
t/sysread_write.t .......... Failed 8/9 subtests
t/verify_hostname.t ........ 1/43 Can&#39;t call method &#34;peer_certificate&#34; without a package or object reference at t/verify_hostname.t line 58.
t/verify_hostname.t ........ Failed 42/43 subtests

Test Summary Report
-------------------
t/acceptSSL-timeout.t    &#40;Wstat: 256 Tests: 8 Failed: 3&#41;
  Failed tests:  4, 7-8
  Non-zero exit status: 1
  Parse errors: Bad plan.  You planned 15 tests but ran 8.
t/auto_verify_hostname.t &#40;Wstat: 0 Tests: 22 Failed: 8&#41;
  Failed tests:  3, 5-6, 8, 12, 16, 18, 22
  Parse errors: Bad plan.  You planned 30 tests but ran 22.
t/cert_no_file.t         &#40;Wstat: 0 Tests: 7 Failed: 2&#41;
  Failed tests:  2, 4
  Parse errors: Bad plan.  You planned 9 tests but ran 7.
t/compatibility.t        &#40;Wstat: 0 Tests: 6 Failed: 3&#41;
  Failed tests:  2-4
  Parse errors: Bad plan.  You planned 9 tests but ran 6.
t/connectSSL-timeout.t   &#40;Wstat: 256 Tests: 8 Failed: 2&#41;
  Failed tests:  7-8
  Non-zero exit status: 1
  Parse errors: Bad plan.  You planned 16 tests but ran 8.
t/core.t                 &#40;Wstat: 0 Tests: 7 Failed: 2&#41;
  Failed tests:  6-7
  Parse errors: Bad plan.  You planned 52 tests but ran 7.
t/dhe.t                  &#40;Wstat: 0 Tests: 1 Failed: 1&#41;
  Failed test:  1
  Parse errors: Bad plan.  You planned 3 tests but ran 1.
t/nonblock.t             &#40;Wstat: 0 Tests: 27 Failed: 8&#41;
  Failed tests:  5-6, 10, 13, 21-22, 24, 26
t/signal-readline.t      &#40;Wstat: 65280 Tests: 4 Failed: 2&#41;
  Failed tests:  2-3
  Non-zero exit status: 255
  Parse errors: Bad plan.  You planned 9 tests but ran 4.
t/start-stopssl.t        &#40;Wstat: 65280 Tests: 2 Failed: 0&#41;
  Non-zero exit status: 255
  Parse errors: Bad plan.  You planned 16 tests but ran 2.
t/startssl.t             &#40;Wstat: 0 Tests: 9 Failed: 5&#41;
  Failed tests:  5-9
t/sysread_write.t        &#40;Wstat: 0 Tests: 3 Failed: 2&#41;
  Failed tests:  2-3
  Parse errors: Bad plan.  You planned 9 tests but ran 3.
t/verify_hostname.t      &#40;Wstat: 0 Tests: 2 Failed: 1&#41;
  Failed test:  2
  Parse errors: Bad plan.  You planned 43 tests but ran 2.
Files=23, Tests=174, 67 wallclock secs &#40; 1.48 usr  0.22 sys + 33.48 cusr  2.17 csys = 37.35 CPU&#41;
Result: FAIL
Failed 13/23 test programs. 39/174 subtests failed.


-- 
H.Merijn Brand  <span class="clickylink"><a target="new" rel="nofollow" href="http://tux.nl">http://tux.nl</a></span>   Perl Monger  <span class="clickylink"><a target="new" rel="nofollow" href="http://amsterdam.pm.org/">http://amsterdam.pm.org/</a></span>
using perl5.00307 .. 5.17   porting perl5 on HP-UX, AIX, and openSUSE
<span class="clickylink"><a target="new" rel="nofollow" href="http://mirrors.develooper.com/hpux/">http://mirrors.develooper.com/hpux/</a></span>        <span class="clickylink"><a target="new" rel="nofollow" href="http://www.test-smoke.org/">http://www.test-smoke.org/</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://qa.perl.org">http://qa.perl.org</a></span>   <span class="clickylink"><a target="new" rel="nofollow" href="http://www.goldmark.org/jeff/stupid-disclaimers/">http://www.goldmark.org/jeff/stupid-disclaimers/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;20&nbsp;05:40:50&nbsp;2013</span>
    <span class="description">mikem [...] open.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #84084] Net::SSLeay again - need guidance</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 20 Mar 2013 19:40:03 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SSLeay [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mike McCauley &lt;mikem [...] open.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

Hmmm, hard to say.

in 07_ssl_echo.t, it looks like set_cert_and_key is failing but its not clear 
why.
 Perhaps File::Spec-&gt;catfile&#40;&#39;t&#39;, &#39;data&#39;, &#39;key.pem&#39;&#41;; does not load the file 
correctly? 
You may need to put some debugging prints in 07_ssl_echo.t to find out more?

08_pipe.t appears to rely on various pipe and fork behaviours. Are they 
working in the standard Unix way on that platform?

Cheers.


On Wednesday, March 20, 2013 04:33:24 AM h.m.brand@xs4all.nl via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Wed Mar 20 04:33:23 2013: Request 84084 was acted upon.
&gt; Transaction: Ticket created by h.m.brand@xs4all.nl
&gt;        Queue: Net-SSLeay
&gt;      Subject: Net::SSLeay again - need guidance
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: h.m.brand@xs4all.nl
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=84084">https://rt.cpan.org/Ticket/Display.html?id=84084</a></span> &gt;
&gt; 
&gt; 
&gt; I&#39;ve successfully built and distributed perl-5.16.3 with Net::SSLeay on
&gt; HP-UX 11.31, 11.23, 11.11, and 11.00 in both 32 and 64bit builds.  That
&gt; much for the the good news. Yeah!
&gt; 
&gt; I cannot get the tests to pass on HP-UX 10.20 though. I know that OS is
&gt; officially dead and gone, but when I look at the downloads from my site
&gt; I must conclude the system is still used.
&gt; 
&gt;  GNU gcc: <span class="clickylink"><a target="new" rel="nofollow" href="http://mirrors.develooper.com/hpux/dl-gcc.html">http://mirrors.develooper.com/hpux/dl-gcc.html</a></span>
&gt;  perl:    <span class="clickylink"><a target="new" rel="nofollow" href="http://mirrors.develooper.com/hpux/dl-perl.html">http://mirrors.develooper.com/hpux/dl-perl.html</a></span>
&gt; 
&gt; &#40;I might expand those with OS-version per month to get better insight&#41;
&gt; 
&gt; Anyway, back to the problem. Note that this is and old and slow system,
&gt; with not a lot of resources &#40;a simple make takes over 5 minutes&#41;:
&gt; 
&gt;  HP-UX 10.20/32 U  9000/800/D390 PA8000/240 pa-2.0  512 Mb
&gt; 
&gt; When I link Net::SSLeay with the .a libraries, where the .a objects
&gt; are compiled -fPIC:
&gt; 
&gt;  gcc -c  -I/usr/local/ssl/include -mpa-risc-1-1 -DPERL_DONT_CREATE_GVSV
&gt;  -D_HPUX_SOURCE -fno-strict-aliasing -pipe -D_LARGEFILE_SOURCE
&gt;  -D_FILE_OFFSET_BITS=64 -O2 -g   -DVERSION=\&#34;1.52\&#34;
&gt;  -DXS_VERSION=\&#34;1.52\&#34; -fPIC &#34;-I/opt/perl/lib/5.16.3/PA-RISC2.0/CORE&#34;
&gt;  SSLeay.c Running Mkbootstrap for Net::SSLeay &#40;&#41; chmod 644 SSLeay.bs rm
&gt;  -f blib/arch/auto/Net/SSLeay/SSLeay.sl
&gt;  LD_RUN_PATH=&#34;/usr/local/ssl/lib:/lib&#34; /usr/bin/ld  -b
&gt;  -L/usr/local/ssl/lib -L/usr/local/lib -L/pro/local/lib SSLeay.o  -o
&gt;  blib/arch/auto/Net/SSLeay/SSLeay.sl       \ -L/usr/local/ssl
&gt;  -L/usr/local/ssl/lib -l:libssl.a -l:libcrypto.a -lz
&gt; 
&gt; t/external/08_external.t ............... ok
&gt; t/external/15_altnames.t ............... ok
&gt; t/handle/external/10_destroy.t ......... ok
&gt; t/handle/external/50_external.t ........ ok
&gt; t/handle/local/05_use.t ................ ok
&gt; t/local/01_pod.t ....................... ok
&gt; t/local/02_pod_coverage.t .............. ok
&gt; t/local/03_use.t ....................... ok
&gt; t/local/04_basic.t ..................... 1/6 # Version info:
&gt; # Testing Net::SSLeay 1.52, Perl 5.016003, /opt/perl/bin/perl
&gt; # OpenSSL version:  &#39;OpenSSL 0.9.8r 8 Feb 2011&#39;
&gt; # OpenSSL platform: &#39;platform: hpux-parisc-cc&#39;
&gt; t/local/04_basic.t ..................... ok
&gt; t/local/05_passwd_cb.t ................. ok
&gt; t/local/06_tcpecho.t ................... ok
&gt; t/local/07_sslecho.t ................... 1/78
&gt; #   Failed test &#39;set_cert_and_key&#39;
&gt; #   at t/local/07_sslecho.t line 62.
&gt; t/local/07_sslecho.t ................... 51/78 # Looks like you failed
&gt; 1 test of 78. t/local/07_sslecho.t ................... Dubious, test
&gt; returned 1 &#40;wstat 256, 0x100&#41; Failed 1/78 subtests
&gt; t/local/08_pipe.t ...................... 1/11 Use of uninitialized
&gt; value in numeric eq &#40;==&#41; at t/local/08_pipe.t line 82.
&gt; 
&gt; Hang &#40;I had it hang for 24 hours&#41;
&gt; 
&gt; When I build with the shared libraries, I get
&gt; 
&gt; gcc -c  -I/usr/local/ssl/include -mpa-risc-1-1 -DPERL_DONT_CREATE_GVSV
&gt; -D_HPUX_SOURCE -fno-strict-aliasing -pipe -D_LARGEFILE_SOURCE
&gt; -D_FILE_OFFSET_BITS=64 -O2 -g   -DVERSION=\&#34;1.52\&#34;
&gt; -DXS_VERSION=\&#34;1.52\&#34; -fPIC &#34;-I/opt/perl/lib/5.16.3/PA-RISC2.0/CORE&#34;
&gt; SSLeay.c Running Mkbootstrap for Net::SSLeay &#40;&#41; chmod 644 SSLeay.bs rm
&gt; -f blib/arch/auto/Net/SSLeay/SSLeay.sl
&gt; LD_RUN_PATH=&#34;/usr/local/ssl/lib:/lib&#34; /usr/bin/ld  -b
&gt; -L/usr/local/ssl/lib -L/usr/local/lib -L/pro/local/lib SSLeay.o  -o
&gt; blib/arch/auto/Net/SSLeay/SSLeay.sl       \ -L/usr/local/ssl
&gt; -L/usr/local/ssl/lib -lssl -lcrypto -lz
&gt; 
&gt; t/external/08_external.t ............... ok
&gt; t/external/15_altnames.t ............... ok
&gt; t/handle/external/10_destroy.t ......... ok
&gt; t/handle/external/50_external.t ........ ok
&gt; t/handle/local/05_use.t ................ ok
&gt; t/local/01_pod.t ....................... ok
&gt; t/local/02_pod_coverage.t .............. ok
&gt; t/local/03_use.t ....................... ok
&gt; t/local/04_basic.t ..................... 1/6 # Version info:
&gt; # Testing Net::SSLeay 1.52, Perl 5.016003, /opt/perl/bin/perl
&gt; # OpenSSL version:  &#39;OpenSSL 0.9.8r 8 Feb 2011&#39;
&gt; # OpenSSL platform: &#39;platform: hpux-parisc-cc&#39;
&gt; t/local/04_basic.t ..................... ok
&gt; t/local/05_passwd_cb.t ................. ok
&gt; t/local/06_tcpecho.t ................... ok
&gt; t/local/07_sslecho.t ................... 1/78
&gt; #   Failed test &#39;set_cert_and_key&#39;
&gt; #   at t/local/07_sslecho.t line 62.
&gt; t/local/07_sslecho.t ................... 51/78 # Looks like you failed 1
&gt; test of 78. t/local/07_sslecho.t ................... Dubious, test returned
&gt; 1 &#40;wstat 256, 0x100&#41; Failed 1/78 subtests
&gt; t/local/08_pipe.t ...................... ok
&gt; t/local/15_bio.t ....................... ok
&gt; t/local/20_autoload.t .................. ok
&gt; t/local/21_constants.t ................. ok
&gt; t/local/30_error.t ..................... ok
&gt; t/local/31_rsa_generate_key.t .......... ok
&gt; t/local/32_x509_get_cert_info.t ........ ok
&gt; t/local/33_x509_create_cert.t .......... ok
&gt; t/local/34_x509_crl.t .................. ok
&gt; t/local/35_ephemeral.t ................. ok
&gt; t/local/36_verify.t .................... ok
&gt; t/local/37_asn1_time.t ................. ok
&gt; t/local/38_priv-key.t .................. ok
&gt; t/local/39_pkcs12.t .................... ok
&gt; t/local/40_npn_support.t ............... skipped: openssl 1.0.1 required
&gt; t/local/50_digest.t .................... ok
&gt; t/local/61_threads-cb-crash.t .......... skipped: your perl is not compiled
&gt; with ithreads or is pre-5.8 t/local/62_threads-ctx_new-deadlock.t ..
&gt; skipped: your perl is not compiled with ithreads or is pre-5.8
&gt; t/local/kwalitee.t ..................... skipped: Test::Kwalitee not
&gt; installed; skipping
&gt; 
&gt; Test Summary Report
&gt; -------------------
&gt; t/local/07_sslecho.t                 &#40;Wstat: 256 Tests: 78 Failed: 1&#41;
&gt;   Failed test:  3
&gt;   Non-zero exit status: 1
&gt; Files=31, Tests=2597, 812 wallclock secs &#40; 5.82 usr  0.34 sys + 353.57 cusr 
&gt; 2.24 csys = 361.97 CPU&#41; Result: FAIL
&gt; Failed 1/31 test programs. 1/2597 subtests failed.
&gt; 
&gt; &#40;that make test took 16 minutes&#41;
&gt; 
&gt; When I use the second version, Crypt::SSLeay-0.64 passes, but
&gt; IO::Socket::SSL-1.84 fails beyond the point I am comfortable to ship:
&gt; 
&gt; t/01loadmodule.t ........... ok
&gt; t/02settings.t ............. ok
&gt; t/acceptSSL-timeout.t ...... Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
&gt; Failed 10/15 subtests
&gt; t/auto_verify_hostname.t ... Failed 16/30 subtests
&gt; t/cert_no_file.t ........... Failed 4/9 subtests
&gt; t/compatibility.t .......... 1/9 Can&#39;t locate object method &#34;issuer_name&#34;
&gt; via package &#34;IO::Socket::INET&#34; at t/compatibility.t line 53.
&gt; t/compatibility.t .......... Failed 6/9 subtests
&gt; t/connectSSL-timeout.t ..... Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
&gt; Failed 10/16 subtests
&gt; t/core.t ................... Failed 47/52 subtests
&gt; t/dhe.t .................... Failed 3/3 subtests
&gt; t/io-socket-inet6.t ........ skipped: no IO::Socket::INET6 available
&gt; t/io-socket-ip.t ........... skipped: no IO::Socket::IP 0.11 available
&gt; t/memleak_bad_handshake.t .. skipped: no usable ps
&gt; t/nonblock.t ............... Failed 8/27 subtests
&gt; t/npn.t .................... skipped: NPN not available in Net::SSLeay
&gt; t/readline.t ............... ok
&gt; t/sessions.t ............... ok
&gt; t/signal-readline.t ........ 1/9 readline&#40;&#41; on unopened filehandle 1 at
&gt; t/signal-readline.t line 50. Use of uninitialized value $line in string ne
&gt; at t/signal-readline.t line 51. Can&#39;t use an undefined value as a symbol
&gt; reference at t/signal-readline.t line 61. t/signal-readline.t ........
&gt; Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41; Failed 7/9 subtests
&gt; t/sni.t .................... skipped: because no client side SNI support -
&gt; openssl/Net::SSleay too old t/start-stopssl.t .......... 1/16 not ok
&gt; #client::start_SSL: SSL connect attempt failed with unknown error not ok
&gt; #server::start_SSL: SSL connect accept failed because of handshake problems
&gt; t/start-stopssl.t .......... Dubious, test returned 255 &#40;wstat 65280,
&gt; 0xff00&#41; Failed 14/16 subtests
&gt; t/startssl-failed.t ........ ok
&gt; t/startssl.t ............... Failed 5/9 subtests
&gt; t/sysread_write.t .......... Failed 8/9 subtests
&gt; t/verify_hostname.t ........ 1/43 Can&#39;t call method &#34;peer_certificate&#34;
&gt; without a package or object reference at t/verify_hostname.t line 58.
&gt; t/verify_hostname.t ........ Failed 42/43 subtests
&gt; 
&gt; Test Summary Report
&gt; -------------------
&gt; t/acceptSSL-timeout.t    &#40;Wstat: 256 Tests: 8 Failed: 3&#41;
&gt;   Failed tests:  4, 7-8
&gt;   Non-zero exit status: 1
&gt;   Parse errors: Bad plan.  You planned 15 tests but ran 8.
&gt; t/auto_verify_hostname.t &#40;Wstat: 0 Tests: 22 Failed: 8&#41;
&gt;   Failed tests:  3, 5-6, 8, 12, 16, 18, 22
&gt;   Parse errors: Bad plan.  You planned 30 tests but ran 22.
&gt; t/cert_no_file.t         &#40;Wstat: 0 Tests: 7 Failed: 2&#41;
&gt;   Failed tests:  2, 4
&gt;   Parse errors: Bad plan.  You planned 9 tests but ran 7.
&gt; t/compatibility.t        &#40;Wstat: 0 Tests: 6 Failed: 3&#41;
&gt;   Failed tests:  2-4
&gt;   Parse errors: Bad plan.  You planned 9 tests but ran 6.
&gt; t/connectSSL-timeout.t   &#40;Wstat: 256 Tests: 8 Failed: 2&#41;
&gt;   Failed tests:  7-8
&gt;   Non-zero exit status: 1
&gt;   Parse errors: Bad plan.  You planned 16 tests but ran 8.
&gt; t/core.t                 &#40;Wstat: 0 Tests: 7 Failed: 2&#41;
&gt;   Failed tests:  6-7
&gt;   Parse errors: Bad plan.  You planned 52 tests but ran 7.
&gt; t/dhe.t                  &#40;Wstat: 0 Tests: 1 Failed: 1&#41;
&gt;   Failed test:  1
&gt;   Parse errors: Bad plan.  You planned 3 tests but ran 1.
&gt; t/nonblock.t             &#40;Wstat: 0 Tests: 27 Failed: 8&#41;
&gt;   Failed tests:  5-6, 10, 13, 21-22, 24, 26
&gt; t/signal-readline.t      &#40;Wstat: 65280 Tests: 4 Failed: 2&#41;
&gt;   Failed tests:  2-3
&gt;   Non-zero exit status: 255
&gt;   Parse errors: Bad plan.  You planned 9 tests but ran 4.
&gt; t/start-stopssl.t        &#40;Wstat: 65280 Tests: 2 Failed: 0&#41;
&gt;   Non-zero exit status: 255
&gt;   Parse errors: Bad plan.  You planned 16 tests but ran 2.
&gt; t/startssl.t             &#40;Wstat: 0 Tests: 9 Failed: 5&#41;
&gt;   Failed tests:  5-9
&gt; t/sysread_write.t        &#40;Wstat: 0 Tests: 3 Failed: 2&#41;
&gt;   Failed tests:  2-3
&gt;   Parse errors: Bad plan.  You planned 9 tests but ran 3.
&gt; t/verify_hostname.t      &#40;Wstat: 0 Tests: 2 Failed: 1&#41;
&gt;   Failed test:  2
&gt;   Parse errors: Bad plan.  You planned 43 tests but ran 2.
&gt; Files=23, Tests=174, 67 wallclock secs &#40; 1.48 usr  0.22 sys + 33.48 cusr 
&gt; 2.17 csys = 37.35 CPU&#41; Result: FAIL
&gt; Failed 13/23 test programs. 39/174 subtests failed.
</div>-- 
Mike McCauley                               mikem@open.com.au
Open System Consultants Pty. Ltd
9 Bulbul Place Currumbin Waters QLD 4223 Australia   <span class="clickylink"><a target="new" rel="nofollow" href="http://www.open.com.au">http://www.open.com.au</a></span>
Phone +61 7 5598-7474                       Fax   +61 7 5598-7070

Radiator: the most portable, flexible and configurable RADIUS server 
anywhere. SQL, proxy, DBM, files, LDAP, NIS+, password, NT, Emerald, 
Platypus, Freeside, TACACS+, PAM, external, Active Directory, EAP, TLS, 
TTLS, PEAP, TNC, WiMAX, RSA, Vasco, Yubikey, MOTP, HOTP, TOTP,
DIAMETER etc. Full source on Unix, Windows, MacOSX, Solaris, VMS, NetWare etc.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;20&nbsp;05:40:53&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;22&nbsp;03:13:49&nbsp;2013</span>
    <span class="description">h.m.brand [...] xs4all.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #84084] Net::SSLeay again - need guidance</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 22 Mar 2013 08:13:32 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SSLeay [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;H.Merijn Brand&#34; &lt;h.m.brand [...] xs4all.nl&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, 20 Mar 2013 05:40:53 -0400, &#34;mikem@open.com.au via RT&#34;
&lt;bug-Net-SSLeay@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hmmm, hard to say.
&gt; 
&gt; in 07_ssl_echo.t, it looks like set_cert_and_key is failing but its not clear 
&gt; why.
&gt;  Perhaps File::Spec-&gt;catfile&#40;&#39;t&#39;, &#39;data&#39;, &#39;key.pem&#39;&#41;; does not load the file 
&gt; correctly? 
&gt; You may need to put some debugging prints in 07_ssl_echo.t to find out more?
&gt; 
&gt; 08_pipe.t appears to rely on various pipe and fork behaviours. Are they 
&gt; working in the standard Unix way on that platform?
</div>
In 07_ssl_echo, changing the test to

    ok&#40;Net::SSLeay::set_cert_and_key&#40;$ctx, $cert_pem, $key_pem&#41;, &#39;set_cert_and_key&#39;&#41;;
=&gt;
    my @err = Net::SSLeay::set_cert_and_key&#40;$ctx, $cert_pem, $key_pem&#41;;
    is&#40;$err[1], &#39;&#39;, &#39;set_cert_and_key&#39;&#41;;

results in:

not ok 3 - set_cert_and_key
#   Failed test &#39;set_cert_and_key&#39;
#   at t/local/07_sslecho.t line 64.
#          got: &#39;private key `t/data/key.pem&#39; &#40;&#41; 6381: 1 - error:2506A067:DSO support routines:DL_LOAD:could not load the shared library
# private key `t/data/key.pem&#39; &#40;&#41; 6381: 2 - error:25070067:DSO support routines:DSO_load:could not load the shared library
# &#39;
#     expected: &#39;&#39;

maybe changing the tests where return can include the error like this
would be an improvement to the test suite?

Now I need to find out *what* library cannot be loaded.

Could this be the reason for IO::Socket::SSL&#39;s failing?

as 08_pipe only fails with the linked-in libraries, I&#39;ll ignore that
for now.

-- 
H.Merijn Brand  <span class="clickylink"><a target="new" rel="nofollow" href="http://tux.nl">http://tux.nl</a></span>   Perl Monger  <span class="clickylink"><a target="new" rel="nofollow" href="http://amsterdam.pm.org/">http://amsterdam.pm.org/</a></span>
using perl5.00307 .. 5.17   porting perl5 on HP-UX, AIX, and openSUSE
<span class="clickylink"><a target="new" rel="nofollow" href="http://mirrors.develooper.com/hpux/">http://mirrors.develooper.com/hpux/</a></span>        <span class="clickylink"><a target="new" rel="nofollow" href="http://www.test-smoke.org/">http://www.test-smoke.org/</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://qa.perl.org">http://qa.perl.org</a></span>   <span class="clickylink"><a target="new" rel="nofollow" href="http://www.goldmark.org/jeff/stupid-disclaimers/">http://www.goldmark.org/jeff/stupid-disclaimers/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;22&nbsp;03:16:39&nbsp;2013</span>
    <span class="description">mikem [...] open.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #84084] Net::SSLeay again - need guidance</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 22 Mar 2013 17:16:23 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SSLeay [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mike McCauley &lt;mikem [...] open.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

On Friday, March 22, 2013 03:13:51 AM you wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Net-SSLeay
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=84084">https://rt.cpan.org/Ticket/Display.html?id=84084</a></span> &gt;
&gt; 
&gt; On Wed, 20 Mar 2013 05:40:53 -0400, &#34;mikem@open.com.au via RT&#34;
&gt; 
&gt; &lt;bug-Net-SSLeay@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; Hmmm, hard to say.
&gt; &gt; 
&gt; &gt; in 07_ssl_echo.t, it looks like set_cert_and_key is failing but its not
&gt; &gt; clear why.
&gt; &gt; 
&gt; &gt;  Perhaps File::Spec-&gt;catfile&#40;&#39;t&#39;, &#39;data&#39;, &#39;key.pem&#39;&#41;; does not load the
&gt; &gt;  file
&gt; &gt; 
&gt; &gt; correctly?
&gt; &gt; You may need to put some debugging prints in 07_ssl_echo.t to find out
&gt; &gt; more?
&gt; &gt; 
&gt; &gt; 08_pipe.t appears to rely on various pipe and fork behaviours. Are they
&gt; &gt; working in the standard Unix way on that platform?
</div>&gt; 
&gt; In 07_ssl_echo, changing the test to
&gt; 
&gt;     ok&#40;Net::SSLeay::set_cert_and_key&#40;$ctx, $cert_pem, $key_pem&#41;,
&gt; &#39;set_cert_and_key&#39;&#41;; =&gt;
&gt;     my @err = Net::SSLeay::set_cert_and_key&#40;$ctx, $cert_pem, $key_pem&#41;;
&gt;     is&#40;$err[1], &#39;&#39;, &#39;set_cert_and_key&#39;&#41;;
&gt; 
&gt; results in:
&gt; 
&gt; not ok 3 - set_cert_and_key
&gt; #   Failed test &#39;set_cert_and_key&#39;
&gt; #   at t/local/07_sslecho.t line 64.
&gt; #          got: &#39;private key `t/data/key.pem&#39; &#40;&#41; 6381: 1 -
&gt; error:2506A067:DSO support routines:DL_LOAD:could not load the shared
&gt; library # private key `t/data/key.pem&#39; &#40;&#41; 6381: 2 - error:25070067:DSO
&gt; support routines:DSO_load:could not load the shared library # &#39;
&gt; #     expected: &#39;&#39;
&gt; 
&gt; maybe changing the tests where return can include the error like this
&gt; would be an improvement to the test suite?
</div>
Agree. I will look to that now.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Now I need to find out *what* library cannot be loaded.
&gt; 
&gt; Could this be the reason for IO::Socket::SSL&#39;s failing?
</div>
Good chance.

Cheers.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; as 08_pipe only fails with the linked-in libraries, I&#39;ll ignore that
&gt; for now.
</div>-- 
Mike McCauley                               mikem@open.com.au
Open System Consultants Pty. Ltd
9 Bulbul Place Currumbin Waters QLD 4223 Australia   <span class="clickylink"><a target="new" rel="nofollow" href="http://www.open.com.au">http://www.open.com.au</a></span>
Phone +61 7 5598-7474                       Fax   +61 7 5598-7070

Radiator: the most portable, flexible and configurable RADIUS server 
anywhere. SQL, proxy, DBM, files, LDAP, NIS+, password, NT, Emerald, 
Platypus, Freeside, TACACS+, PAM, external, Active Directory, EAP, TLS, 
TTLS, PEAP, TNC, WiMAX, RSA, Vasco, Yubikey, MOTP, HOTP, TOTP,
DIAMETER etc. Full source on Unix, Windows, MacOSX, Solaris, VMS, NetWare etc.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;22&nbsp;18:14:50&nbsp;2013</span>
    <span class="description">mikem [...] open.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #84084] Net::SSLeay again - need guidance</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 23 Mar 2013 08:14:35 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SSLeay [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mike McCauley &lt;mikem [...] open.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the report.

New version uploaded to CPAN addresses the printing of errors from 
set_cert_and_key.

Cheers.


On Friday, March 22, 2013 03:13:51 AM you wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Net-SSLeay
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=84084">https://rt.cpan.org/Ticket/Display.html?id=84084</a></span> &gt;
&gt; 
&gt; On Wed, 20 Mar 2013 05:40:53 -0400, &#34;mikem@open.com.au via RT&#34;
&gt; 
&gt; &lt;bug-Net-SSLeay@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; Hmmm, hard to say.
&gt; &gt; 
&gt; &gt; in 07_ssl_echo.t, it looks like set_cert_and_key is failing but its not
&gt; &gt; clear why.
&gt; &gt; 
&gt; &gt;  Perhaps File::Spec-&gt;catfile&#40;&#39;t&#39;, &#39;data&#39;, &#39;key.pem&#39;&#41;; does not load the
&gt; &gt;  file
&gt; &gt; 
&gt; &gt; correctly?
&gt; &gt; You may need to put some debugging prints in 07_ssl_echo.t to find out
&gt; &gt; more?
&gt; &gt; 
&gt; &gt; 08_pipe.t appears to rely on various pipe and fork behaviours. Are they
&gt; &gt; working in the standard Unix way on that platform?
</div>&gt; 
&gt; In 07_ssl_echo, changing the test to
&gt; 
&gt;     ok&#40;Net::SSLeay::set_cert_and_key&#40;$ctx, $cert_pem, $key_pem&#41;,
&gt; &#39;set_cert_and_key&#39;&#41;; =&gt;
&gt;     my @err = Net::SSLeay::set_cert_and_key&#40;$ctx, $cert_pem, $key_pem&#41;;
&gt;     is&#40;$err[1], &#39;&#39;, &#39;set_cert_and_key&#39;&#41;;
&gt; 
&gt; results in:
&gt; 
&gt; not ok 3 - set_cert_and_key
&gt; #   Failed test &#39;set_cert_and_key&#39;
&gt; #   at t/local/07_sslecho.t line 64.
&gt; #          got: &#39;private key `t/data/key.pem&#39; &#40;&#41; 6381: 1 -
&gt; error:2506A067:DSO support routines:DL_LOAD:could not load the shared
&gt; library # private key `t/data/key.pem&#39; &#40;&#41; 6381: 2 - error:25070067:DSO
&gt; support routines:DSO_load:could not load the shared library # &#39;
&gt; #     expected: &#39;&#39;
&gt; 
&gt; maybe changing the tests where return can include the error like this
&gt; would be an improvement to the test suite?
&gt; 
&gt; Now I need to find out *what* library cannot be loaded.
&gt; 
&gt; Could this be the reason for IO::Socket::SSL&#39;s failing?
&gt; 
&gt; as 08_pipe only fails with the linked-in libraries, I&#39;ll ignore that
&gt; for now.
</div>-- 
Mike McCauley                               mikem@open.com.au
Open System Consultants Pty. Ltd
9 Bulbul Place Currumbin Waters QLD 4223 Australia   <span class="clickylink"><a target="new" rel="nofollow" href="http://www.open.com.au">http://www.open.com.au</a></span>
Phone +61 7 5598-7474                       Fax   +61 7 5598-7070

Radiator: the most portable, flexible and configurable RADIUS server 
anywhere. SQL, proxy, DBM, files, LDAP, NIS+, password, NT, Emerald, 
Platypus, Freeside, TACACS+, PAM, external, Active Directory, EAP, TLS, 
TTLS, PEAP, TNC, WiMAX, RSA, Vasco, Yubikey, MOTP, HOTP, TOTP,
DIAMETER etc. Full source on Unix, Windows, MacOSX, Solaris, VMS, NetWare etc.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;23&nbsp;17:30:58&nbsp;2013</span>
    <span class="description">dsteinbrunner [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> dsteinbrunner [...] pobox.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Mar 22 18:14:50 2013, mikem@open.com.au wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks for the report.
&gt; 
&gt; New version uploaded to CPAN addresses the printing of errors from 
&gt; set_cert_and_key.
</div>
Should this ticket be closed now?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;24&nbsp;01:37:53&nbsp;2013</span>
    <span class="description">MIKEM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes. Closed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;24&nbsp;01:37:54&nbsp;2013</span>
    <span class="description">MIKEM [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
