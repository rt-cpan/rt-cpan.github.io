<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #19360 for Acme-Spork: INVALID - NOT A BUG IT IS A BEGINNERS QUESTION</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #19360 for Acme-Spork: INVALID - NOT A BUG IT IS A BEGINNERS QUESTION</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Acme-Spork/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Acme-Spork/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Acme-Spork/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Acme-Spork/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Acme-Spork">Acme-Spork CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">19360</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">deleted</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Acme-Spork/Active/">Acme-Spork</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
EWIJAYA [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-522-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
v0.0.3    </td>
  </tr>
  <tr id="CF-523-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
v0.0.3    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;19&nbsp;10:38:55&nbsp;2006</span>
    <span class="description">EWIJAYA [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Daniel,

I was trying to run your invaluable module
for Perl system call like this:


use Acme::Spork;
my $req_id =  spork&#40; sub { system&#40;&#34;perl compute_price.pl -email $uemail
-type
$ct  -unit $nu&#34;&#41;; } &#41;
or die qq {Could not fork for spork: $!}; 


Somehow my code &#40;compute_price.pl&#41; _fail_ to recognize the parameter
under the option &#34;-email&#34;. If I remove the system call out of spork
it doesn&#39;t give the problem. Please look at the two related script
attached here.

There are couple of discussion thread on this matter.
You can find it here:

<span class="clickylink"><a target="new" rel="nofollow" href="http://groups.google.com.sg/group/perl.beginners/browse_thread/thread/bb1cb73e167325cd/a44252eb724e3083">http://groups.google.com.sg/group/perl.beginners/browse_thread/thread/bb1cb73e167325cd/a44252eb724e3083</a></span>

and

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.perlmonks.com/?node_id=550460">http://www.perlmonks.com/?node_id=550460</a></span>


But I still can&#39;t figure out how to resolve the problem. Could it
be a bug in Acme::Spork ?

I desperately need this module to get going.
Hope to hear from you again.

I&#39;m using:
This is perl, v5.8.5 built for i386-linux-thread-multi
Linux host.name.edu 2.6.9-22.0.2.ELsmp #1 SMP Thu Jan 5 17:13:01 EST
2006 i686 i686 i386 GNU/Linux


--
Regards,
Edward WIJAYA
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> price_dispatch.cgi</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> compute_price.pl</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl -w
#===============================================================================
#
#
#===============================================================================
use strict;
use Data::Dumper;
use CGI::Carp qw&#40; fatalsToBrowser &#41;;
use Getopt::Long;
use Mail::Sendmail;
use MIME::Lite;
use File::Slurp::SmallFile qw&#40;slurp&#41;;

#print Dumper \@ARGV ;

my $cone_type = &#39;sugar&#39;;
my $no_unit   =  1;
my $help = 0;
my $tg_email;


if &#40; @ARGV == 0 &#41; {
    &#38;usage&#40;&#41;;
    exit&#40;1&#41;;
}
        
my $res = GetOptions &#40; &#34;type=s&#34;=&gt;\$cone_type,
                       &#34;unit=i&#34;=&gt;\$no_unit,
                       &#34;email=s&#34;=&gt;\$tg_email,
                       &#34;help&#34;=&gt;\$help,&#41;;

if &#40;$res&#41; {

    die &#34;Unit too large\n&#34; if &#40;$no_unit &gt; 20&#41;;

    my %unitprice   = &#40; &#39;sugar&#39; =&gt; 100, &#39;waffle&#39; =&gt; 200 &#41;;
    my $total_price = $unitprice{$cone_type} * $no_unit;

    # Some long process
    foreach  &#40; 0..10_000_000  &#41; {
    
    }               

    print &#34;TOTAL: $total_price - $tg_email &#34;,;

    # After finish Open log file 
    
    
}


#--------------------------------------------------
# Sub routines 
#-------------------------------------------------- 
sub send_email_attach {

    
    # using MIME::Lite
    my &#40; $target_add, $my_add, $mssg, $subject, $file_name &#41; = @_;

    my $msg = MIME::Lite-&gt;new&#40;
        From    =&gt; $my_add,
        To      =&gt; $target_add,
        Subject =&gt; $subject,
        Type    =&gt; &#39;multipart/plain&#39;,
    &#41;;

    $msg-&gt;attach&#40;
        Type =&gt; &#39;TEXT&#39;,
        Data =&gt; $mssg
    &#41;;

    $msg-&gt;attach&#40;
        Type =&gt; &#39;quoted-printable&#39;,
        Path =&gt; $file_name,
        Filename =&gt; $file_name,
    &#41;;


    $msg-&gt;send&#40;&#41;;

    return;
}


sub send_email_noattach {

    my &#40; $target_add, $my_add, $mssg, $subject &#41; = @_;
    my %mail = &#40;
        To      =&gt; $target_add,
        From    =&gt; $my_add,
        Message =&gt; $mssg,
        Subject =&gt; $subject
        
    &#41;;
    sendmail&#40;%mail&#41; or die $Mail::Sendmail::error;
    return;
}




sub usage {
    print &lt;&lt;HELP;
    
    Usage: perl $0 [-options]
    
    -h         Print this help
    -type      Cone type
    -unit      No of Unit
HELP
     exit;
}
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;19&nbsp;11:27:43&nbsp;2006</span>
    <span class="description">dmuey [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri May 19 10:38:55 2006, EWIJAYA wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Daniel,
</div>
Hello,
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I was trying to run your invaluable module
&gt; for Perl system call like this:
</div>...

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; But I still can&#39;t figure out how to resolve the problem. Could it
&gt; be a bug in Acme::Spork ?
</div>
No it is not a bug, please do not post support requests as a bug report.

Also when doing a bug report do not send a seperate email.

Please refere to the beginnners at Perl and read very carefully the documentation:

1st step: make the code readable

use Acme::Spork;
my $req_id =  spork&#40; 
    sub { 
        system&#40;&#34;perl compute_price.pl -email $uemail -type $ct  -unit $nu&#34;&#41;; 
    } 
&#41; or die qq {Could not fork for spork: $!};

Problem: variables are not &#34;used&#34;

The documentation says &#34;The first argument is a code ref&#34;, check

It continues: &#34;any other args are passed to the call to the code ref.&#34;

So  you need to pass them to the funtion and get them in your funtions:

use Acme::Spork;
my $req_id =  spork&#40; 
    sub { 
        my &#40;$uemail, $ct, $nu&#41; = @_;
        system&#40;&#34;perl compute_price.pl -email $uemail -type $ct  -unit $nu&#34;&#41;; 
    } , $uemail, $ct, $nu

&#41; or die qq {Could not fork for spork: $!};

These variables are not available for interpolation because they are out of scope when they 
are forked &#40;Its code that is violently ripped from its parent so there isn&#39;t anythign they can 
really share, whic is the point of a spork&#40;&#41;&#41;

Hence the need for them to be passed ar arguments to the funtion and the function to get it 
from its argument list.

HTH and be sure to post questions luiek this to beginners@perl.org and definately DO NOT 
EVER post this sort of thing as a bug report.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;19&nbsp;11:27:45&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;19&nbsp;11:33:06&nbsp;2006</span>
    <span class="description">dmuey [...] cpan.org -  Subject changed from &#40;no value&#41; to &#39;INVALID - NOT A BUG IT IS A BEGINNERS QUESTION&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;May&nbsp;19&nbsp;11:33:07&nbsp;2006</span>
    <span class="description">dmuey [...] cpan.org -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
