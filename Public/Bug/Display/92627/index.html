<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #92627 for MCE: non zero error code when using mce_loop </title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #92627 for MCE: non zero error code when using mce_loop </h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=MCE">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=MCE">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=MCE">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=MCE">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/marioroy/mce-perl/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/MCE">MCE CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">92627</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=MCE">MCE</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">MARIOROY [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
TAKADONET [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-246582-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.507    </td>
  </tr>
  <tr id="CF-246583-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.508    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=92627">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1320460" href="/Public/Bug/Display.html?id=92627#txn-1320460">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;31&nbsp;15:22:14&nbsp;2014</span>
    <span class="description">TAKADONET [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> non zero error code when using mce_loop</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1320460/700281/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/700281">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 292b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Getting error code 2304 &#40;status code 9&#41; &#40; 2304 &gt;&gt; 8 == 9&#41; when a script.pl has a mce_loop.

example:

script1.pl
use MCE::Loop;

my $b = mce_loop { 1 } 1..10;
print $b;
---------

script2.pl

print system&#40;&#34;script1.pl&#34;&#41;;
--------


Script2.pl will return error code 2304 instead of 0.

Cheers!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1320511" href="/Public/Bug/Display.html?id=92627#txn-1320511">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;31&nbsp;17:48:57&nbsp;2014</span>
    <span class="description">marioeroy [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #92627] non zero error code when using mce_loop</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 31 Jan 2014 17:48:48 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-MCE [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mario Roy &lt;marioeroy [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1320511/700318/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/700318">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Paul,

Thank you for the report.

MCE::Loop does not work like MCE::Map or MCE::Grep where the latter two
makes unnecessary to call MCE-&gt;gather directly.

MCE::Loop falls in between having to create MCE using the core API or using
MCE::Map for example.

One must call MCE-&gt;gather inside the block when ever constructing an
assignment variable to the left of mce_loop, mce_flow, or mce_step.
However, it should not fail if MCE-&gt;gather isn&#39;t called though, meaning
that $b should have a value of 0.  Will look into this.

- mario


On Fri, Jan 31, 2014 at 3:22 PM, Philip Mabon via RT &lt;bug-MCE@rt.cpan.org&gt;wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Fri Jan 31 15:22:14 2014: Request 92627 was acted upon.
&gt; Transaction: Ticket created by TAKADONET
&gt;        Queue: MCE
&gt;      Subject: non zero error code when using mce_loop
&gt;    Broken in: 1.507
&gt;     Severity: Important
&gt;        Owner: MARIOROY
&gt;   Requestors: TAKADONET@cpan.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=92627">https://rt.cpan.org/Ticket/Display.html?id=92627</a></span> &gt;
&gt;
&gt;
&gt; Getting error code 2304 &#40;status code 9&#41; &#40; 2304 &gt;&gt; 8 == 9&#41; when a script.plhas a mce_loop.
&gt;
&gt; example:
&gt;
&gt; script1.pl
&gt; use MCE::Loop;
&gt;
&gt; my $b = mce_loop { 1 } 1..10;
&gt; print $b;
&gt; ---------
&gt;
&gt; script2.pl
&gt;
&gt; print system&#40;&#34;script1.pl&#34;&#41;;
&gt; --------
&gt;
&gt;
&gt; Script2.pl will return error code 2304 instead of 0.
&gt;
&gt; Cheers!
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1320511/700319/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/700319">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.1k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1320512" href="/Public/Bug/Display.html?id=92627#txn-1320512">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;31&nbsp;17:48:57&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1320587" href="/Public/Bug/Display.html?id=92627#txn-1320587">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;01&nbsp;02:54:41&nbsp;2014</span>
    <span class="description">marioeroy [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #92627] non zero error code when using mce_loop</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 1 Feb 2014 02:54:33 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-MCE [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mario Roy &lt;marioeroy [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1320587/700360/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/700360">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 224b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Philip,

This has been fixed in SVN revision 479. In the meantime, add
MCE::Loop::finish&#40;&#41; to the bottom of script1.pl.

use MCE::Loop;

my $b = mce_loop { 1 } 1..10;
print $b, &#34;\n&#34;;

MCE::Loop::finish&#40;&#41;;

Regards,
Mario
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1320587/700361/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/700361">with headers</a>
<br />
<span class="downloadcontenttype">text/html 768b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1320590" href="/Public/Bug/Display.html?id=92627#txn-1320590">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;01&nbsp;02:55:55&nbsp;2014</span>
    <span class="description">MARIOROY [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1320600" href="/Public/Bug/Display.html?id=92627#txn-1320600">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;01&nbsp;04:30:51&nbsp;2014</span>
    <span class="description">marioeroy [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #92627] non zero error code when using mce_loop</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 1 Feb 2014 04:30:36 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-MCE [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mario Roy &lt;marioeroy [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1320600/700368/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/700368">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 204b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Philip,

MCE 1.508 has been released which contains the fix for this bug.

<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/release/MARIOROY/MCE-1.508/lib/MCE.pod">https://metacpan.org/pod/release/MARIOROY/MCE-1.508/lib/MCE.pod</a></span>

Thank you once again for reporting this bug.

Regards,
Mario
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1320600/700369/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/700369">with headers</a>
<br />
<span class="downloadcontenttype">text/html 626b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1320747" href="/Public/Bug/Display.html?id=92627#txn-1320747">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;01&nbsp;11:45:52&nbsp;2014</span>
    <span class="description">MARIOROY [...] cpan.org -  Fixed in 1.508 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1320839" href="/Public/Bug/Display.html?id=92627#txn-1320839">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;01&nbsp;15:20:06&nbsp;2014</span>
    <span class="description">TAKADONET [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1320839/700531/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/700531">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hey Mario,

I realize after that the example given was not 100% correct but it still shows the issue at hand. Thanks again for the quick fix!

On Fri Jan 31 17:48:57 2014, marioeroy@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Paul,
&gt; 
&gt; Thank you for the report.
&gt; 
&gt; MCE::Loop does not work like MCE::Map or MCE::Grep where the latter
&gt; two
&gt; makes unnecessary to call MCE-&gt;gather directly.
&gt; 
&gt; MCE::Loop falls in between having to create MCE using the core API or
&gt; using
&gt; MCE::Map for example.
&gt; 
&gt; One must call MCE-&gt;gather inside the block when ever constructing an
&gt; assignment variable to the left of mce_loop, mce_flow, or mce_step.
&gt; However, it should not fail if MCE-&gt;gather isn&#39;t called though,
&gt; meaning
&gt; that $b should have a value of 0.  Will look into this.
&gt; 
&gt; - mario
&gt; 
&gt; 
&gt; On Fri, Jan 31, 2014 at 3:22 PM, Philip Mabon via RT &lt;bug-
&gt; MCE@rt.cpan.org&gt;wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; Fri Jan 31 15:22:14 2014: Request 92627 was acted upon.
&gt; &gt; Transaction: Ticket created by TAKADONET
&gt; &gt;        Queue: MCE
&gt; &gt;      Subject: non zero error code when using mce_loop
&gt; &gt;    Broken in: 1.507
&gt; &gt;     Severity: Important
&gt; &gt;        Owner: MARIOROY
&gt; &gt;   Requestors: TAKADONET@cpan.org
&gt; &gt;       Status: new
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=92627">https://rt.cpan.org/Ticket/Display.html?id=92627</a></span> &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; Getting error code 2304 &#40;status code 9&#41; &#40; 2304 &gt;&gt; 8 == 9&#41; when a
&gt; &gt; script.plhas a mce_loop.
&gt; &gt;
&gt; &gt; example:
&gt; &gt;
&gt; &gt; script1.pl
&gt; &gt; use MCE::Loop;
&gt; &gt;
&gt; &gt; my $b = mce_loop { 1 } 1..10;
&gt; &gt; print $b;
&gt; &gt; ---------
&gt; &gt;
&gt; &gt; script2.pl
&gt; &gt;
&gt; &gt; print system&#40;&#34;script1.pl&#34;&#41;;
&gt; &gt; --------
&gt; &gt;
&gt; &gt;
&gt; &gt; Script2.pl will return error code 2304 instead of 0.
&gt; &gt;
&gt; &gt; Cheers!
&gt; &gt;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1321535" href="/Public/Bug/Display.html?id=92627#txn-1321535">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;03&nbsp;10:07:25&nbsp;2014</span>
    <span class="description">marioeroy [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #92627] non zero error code when using mce_loop</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 3 Feb 2014 10:07:13 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-MCE [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mario Roy &lt;marioeroy [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1321535/700903/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/700903">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 500b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Philip,

Oh no, your example is fine. I miss-calculated on my part when reading your
message. Things have finally settled down with all the models. Just chiming
in to let you know that MCE 1.509 has been released. It addresses an
unreported bug. The models are very solid now under various use cases.
MCE::Examples &#40;in 1.509&#41; includes a Monte Carlo simulation. Lots of updates
throughout the document, actually.

Thank you again for the bug submissions. I had no idea about the last bug.

- mario
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1321535/700904/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/700904">with headers</a>
<br />
<span class="downloadcontenttype">text/html 745b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.601246</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
