<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #7977 for GD: make test fails on RH 7.2 with Perl 5.8.0 with gd-2.0.28 and GD Perl 2.16</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #7977 for GD: make test fails on RH 7.2 with Perl 5.8.0 with gd-2.0.28 and GD Perl 2.16</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/GD/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/GD/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/GD/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/GD/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/GD">GD CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">7977</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/GD/Active/">GD</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
kmcgrail [...] pccc.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-14260-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
2.15</li>
<li>
2.16</li>
</ul>
    </td>
  </tr>
  <tr id="CF-14261-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;12&nbsp;18:53:50&nbsp;2004</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> make test fails on RH 7.2 with Perl 5.8.0 with gd-2.0.28 and GD
 Perl 2.16</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On RedHat 7.2, the make test for the perl GD failed for me &#40;See [FAILS]&#41;.

Turns out I had an old libgd in /usr/lib and the Makefile for all GD Perl&#39;s prior to 2.0.15 would use /usr/local/lib first.  In 2.15, the LD_RUN_PATH changed in the Makefile to put /usr/lib first which caused linking issues.

I thought I would report this because this sounded similar to some other bugs I&#39;ve seen reported with RedHat and it might help someone else.


[FAILS]
NOTICE: This module requires libgd 2.0.12 or higher.
        it will NOT work with earlier versions.
        See www.cpan.org for versions of GD that are compatible
        with earlier versions of libgd.

        If you are using Math::Trig 1.01 or lower, it has a bug that
        causes a &#34;prerequisite not found&#34; warning to be issued.  You may
        safely ignore this warning.

        Type perl Makefile.PL -h for command-line option summary

Configuring for libgd version 2.0.28.
Included Features:          GD_XPM GD_JPEG GD_FREETYPE GD_PNG GD_GIF
GD library used from:       /usr/local

If you experience compile problems, please check the @INC, @LIBPATH and @LIBS
arrays defined in Makefile.PL and manually adjust, if necessary.

Warning: prerequisite Math::Trig 0 not found.
Writing Makefile for GD
[root@intel1 GD-2.16]# make
cc -c  -I/usr/local/include -fno-strict-aliasing -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm -O2   -DVERSION=\&#34;2.16\&#34; -DXS_VERSION=\&#34;2.16\&#34; -fpic &#34;-I/usr/local/lib/perl5/5.8.0/i686-linux/CORE&#34;  -DHAVE_JPEG -DHAVE_FT -DHAVE_XPM -DHAVE_GIF GD.c
make testRunning Mkbootstrap for GD &#40;&#41;
chmod 644 GD.bs
rm -f blib/arch/auto/GD/GD.so
LD_RUN_PATH=&#34;/usr/X11R6/lib:/usr/lib:/usr/local/lib:/lib&#34; cc  -shared -L/usr/local/lib GD.o  -o blib/arch/auto/GD/GD.so   -L/usr/local/lib -L/usr/X11R6/lib -L/usr/local/lib -lXpm -lX11 -ljpeg -lfreetype -lpng -lz -lm -lgd  
chmod 755 blib/arch/auto/GD/GD.so
cp GD.bs blib/arch/auto/GD/GD.bs
chmod 644 blib/arch/auto/GD/GD.bs
Manifying blib/man3/GD::Polyline.3
Manifying blib/man3/GD.3
[root@intel1 GD-2.16]# make test
PERL_DL_NONLAZY=1 /usr/local/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34; &#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
t/GD..........Can&#39;t load &#39;./blib/arch/auto/GD/GD.so&#39; for module GD: u@u@ ¾ ¾u@u@ u@ u@¨u@¨u@°u@°u@¸u@¸u@Àu@Àu@Èu@Èu@Ðu@Ðu@Øu@Øu@àu@àu@èu@èu@ðu@ðu@øu@øu@: shared object not open at /usr/local/lib/perl5/5.8.0/i686-linux/DynaLoader.pm line 229.
 at t/GD.t line 13
Compilation failed in require at t/GD.t line 13.
BEGIN failed--compilation aborted at t/GD.t line 13.
t/GD..........dubious                                                        
        Test returned status 255 &#40;wstat 65280, 0xff00&#41;
DIED. FAILED tests 1-10
        Failed 10/10 tests, 0.00% okay
t/Polyline....Can&#39;t load &#39;/usr/src/GD-2.16/blib/arch/auto/GD/GD.so&#39; for module GD: u@u@øºøºu@u@ u@ u@¨u@¨u@°u@°u@¸u@¸u@Àu@Àu@Èu@Èu@&#40;S&#40;SØu@Øu@àu@àu@èu@èu@ðu@ðu@øu@øu@: shared object not open at /usr/local/lib/perl5/5.8.0/i686-linux/DynaLoader.pm line 229.
 at /usr/src/GD-2.16/blib/lib/GD/Polyline.pm line 49
Compilation failed in require at /usr/src/GD-2.16/blib/lib/GD/Polyline.pm line 49.
BEGIN failed--compilation aborted at /usr/src/GD-2.16/blib/lib/GD/Polyline.pm line 49.
Compilation failed in require at t/Polyline.t line 10.
BEGIN failed--compilation aborted at t/Polyline.t line 10.
t/Polyline....dubious                                                        
        Test returned status 255 &#40;wstat 65280, 0xff00&#41;
DIED. FAILED test 1
        Failed 1/1 tests, 0.00% okay
Failed Test  Stat Wstat Total Fail  Failed  List of Failed
-------------------------------------------------------------------------------
t/GD.t        255 65280    10   10 100.00%  1-10
t/Polyline.t  255 65280     1    1 100.00%  1
Failed 2/2 test scripts, 0.00% okay. 11/11 subtests failed, 0.00% okay.
make: *** [test_dynamic] Error 2

If I modify LD_RUN_PATH in the Makefile to /usr/local/lib:/usr/lib:/lib:/usr/X11R6/lib
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;12&nbsp;10:09:57&nbsp;2004</span>
    <span class="description">LDS [...] cpan.org -  Status changed from &#39;new&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
