<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #13369 for File-Remove: File::Remove test 1_directories.t fails under OS X 10.4.1 &#40;perl 5.8.6&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #13369 for File-Remove: File::Remove test 1_directories.t fails under OS X 10.4.1 &#40;perl 5.8.6&#41;</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=File-Remove">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=File-Remove">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=File-Remove">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=File-Remove">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/File-Remove">File-Remove CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">13369</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">10 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=File-Remove">File-Remove</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">RSOD [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dha [...] panix.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-13064-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.29    </td>
  </tr>
  <tr id="CF-13065-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




dirfail<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/134756/36447/dirfail">
Wed Jun 22 12:13:32 2005 (13.9k) by 
</a>
</font></li>
</ul>


file-remove-patch.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/134758/37382/file-remove-patch.txt">
Tue Jul 12 19:13:34 2005 (1.9k) by 
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=13369">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-134756" href="/Public/Bug/Display.html?id=13369#txn-134756">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;22&nbsp;12:13:32&nbsp;2005</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> File::Remove test 1_directories.t fails under OS X 10.4.1 &#40;perl
 5.8.6&#41;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/134756/36447/dirfail">Download dirfail</a><br />
<span class="downloadcontenttype">application/octet-stream 13.9k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-134757" href="/Public/Bug/Display.html?id=13369#txn-134757">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;24&nbsp;07:50:16&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/134757/36538/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/36538">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 5.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">[guest - Wed Jun 22 12:13:32 2005]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
</div>
Yeah, I&#39;ve got the same problem.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">cpan&gt; install File::Remove
</div>Running install for module File::Remove
Running make for R/RS/RSOD/File-Remove-0.29.tar.gz
  Is already unwrapped into directory /Users/graham/.cpan/build/File-Remove-0.29
  Has already been processed within this session
Running make test
PERL_DL_NONLAZY=1 /usr/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34; &#34;test_harness&#40;0, &#39;blib/
lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
t/0_use............ok                                                        
t/1_directories....ok 178/0#     Failed test &#40;t/1_directories.t at line 116&#41; 
t/1_directories....ok 180/0#     Failed test &#40;t/1_directories.t at line 120&#41; 
t/1_directories....ok 182/0#     Failed test &#40;t/1_directories.t at line 116&#41; 
t/1_directories....ok 184/0#     Failed test &#40;t/1_directories.t at line 120&#41; 
t/1_directories....ok 186/0#     Failed test &#40;t/1_directories.t at line 116&#41; 
t/1_directories....ok 188/0#     Failed test &#40;t/1_directories.t at line 120&#41; 
t/1_directories....ok 190/0#     Failed test &#40;t/1_directories.t at line 116&#41; 
t/1_directories....ok 192/0#     Failed test &#40;t/1_directories.t at line 120&#41; 
t/1_directories....ok 194/0#     Failed test &#40;t/1_directories.t at line 116&#41; 
t/1_directories....ok 196/0#     Failed test &#40;t/1_directories.t at line 120&#41; 
t/1_directories....ok 198/0#     Failed test &#40;t/1_directories.t at line 116&#41; 
t/1_directories....NOK 199#     Failed test &#40;t/1_directories.t at line 120&#41;  
t/1_directories....ok 202/0#     Failed test &#40;t/1_directories.t at line 116&#41; 
t/1_directories....ok 204/0#     Failed test &#40;t/1_directories.t at line 120&#41; 
t/1_directories....ok 206/0#     Failed test &#40;t/1_directories.t at line 116&#41; 
t/1_directories....ok 208/0#     Failed test &#40;t/1_directories.t at line 120&#41; 
#     Failed test &#40;t/1_directories.t at line 125&#41;
t/1_directories....NOK 209#     Failed test &#40;t/1_directories.t at line 125&#41;  
t/1_directories....ok 211/0#     Failed test &#40;t/1_directories.t at line 125&#41; 
t/1_directories....NOK 213#     Failed test &#40;t/1_directories.t at line 125&#41;  
t/1_directories....ok 215/0#     Failed test &#40;t/1_directories.t at line 125&#41; 
t/1_directories....ok 217/0#     Failed test &#40;t/1_directories.t at line 125&#41; 
t/1_directories....NOK 219#     Failed test &#40;t/1_directories.t at line 125&#41;  
t/1_directories....ok 220/0#     Failed test &#40;t/1_directories.t at line 125&#41; 
t/1_directories....ok 257/0#     Failed test &#40;t/1_directories.t at line 147&#41; 
#     Failed test &#40;t/1_directories.t at line 149&#41;
t/1_directories....ok 261/0#     Failed test &#40;t/1_directories.t at line 147&#41; 
t/1_directories....NOK 262#     Failed test &#40;t/1_directories.t at line 149&#41;  
t/1_directories....ok 264/0#     Failed test &#40;t/1_directories.t at line 147&#41; 
t/1_directories....NOK 265#     Failed test &#40;t/1_directories.t at line 149&#41;  
t/1_directories....ok 267/0#     Failed test &#40;t/1_directories.t at line 147&#41; 
t/1_directories....NOK 268#     Failed test &#40;t/1_directories.t at line 149&#41;  
t/1_directories....ok 270/0#     Failed test &#40;t/1_directories.t at line 147&#41; 
#     Failed test &#40;t/1_directories.t at line 149&#41;
t/1_directories....ok 273/0#     Failed test &#40;t/1_directories.t at line 147&#41; 
t/1_directories....NOK 274#     Failed test &#40;t/1_directories.t at line 149&#41;  
t/1_directories....ok 276/0#     Failed test &#40;t/1_directories.t at line 147&#41; 
#     Failed test &#40;t/1_directories.t at line 149&#41;
t/1_directories....ok 279/0#     Failed test &#40;t/1_directories.t at line 147&#41; 
t/1_directories....NOK 280#     Failed test &#40;t/1_directories.t at line 149&#41;  
#     Failed test &#40;t/1_directories.t at line 154&#41;
t/1_directories....NOK 282#     Failed test &#40;t/1_directories.t at line 154&#41;  
t/1_directories....ok 283/0#     Failed test &#40;t/1_directories.t at line 154&#41; 
#     Failed test &#40;t/1_directories.t at line 154&#41;
#     Failed test &#40;t/1_directories.t at line 154&#41;
#     Failed test &#40;t/1_directories.t at line 154&#41;
#     Failed test &#40;t/1_directories.t at line 154&#41;
#     Failed test &#40;t/1_directories.t at line 154&#41;
t/1_directories....ok 298/0# Looks like you failed 48 tests of 369.          
t/1_directories....dubious                                                   
        Test returned status 48 &#40;wstat 12288, 0x3000&#41;
DIED. FAILED tests 179, 181, 183, 185, 187, 189, 191, 193, 195, 197, 199, 201, 203, 205, 
207, 209-210, 213, 216, 219, 222, 225, 228, 231, 259-260, 262-263, 265-266, 268-269, 
271-272, 274-275, 277-278, 280-282, 285, 288, 291, 294, 297, 300, 303
        Failed 48/369 tests, 86.99% okay
Failed Test       Stat Wstat Total Fail  Failed  List of Failed
------------------------------------------------------------------------------
-
t/1_directories.t   48 12288   369   48  13.01%  179 181 183 185 187 189 191
                                                 193 195 197 199 201 203 205
                                                 207 209-210 213 216 219 222
                                                 225 228 231 259-260 262-263
                                                 265-266 268-269 271-272 274-
                                                 275 277-278 280-282 285 288
                                                 291 294 297 300 303
Failed 1/2 test scripts, 50.00% okay. 48/370 subtests failed, 87.03% okay.
make: *** [test_dynamic] Error 2
  /usr/bin/make test -- NOT OK
Running make install
  make test had returned bad status, won&#39;t install without force
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-134758" href="/Public/Bug/Display.html?id=13369#txn-134758">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;12&nbsp;19:13:34&nbsp;2005</span>
    <span class="description">cnandor [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/134758/37381/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/37381">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Try this on for size.  I found two problems.  First, I think I made the call to delete&#40;&#41; more 
robust, by not converting the path to HFS, and just telling delete&#40;&#41; these are aliases.

Previously it worked mostly by accident.  You were sending in a broken path, to delete&#40;&#41;: 
Mac::Glue automatically handles Unix paths, though since this was passed as a string to the 
Finder, it understands the HFS path you used.  What really surprises me though is that it was 
a broken HFS path, since if it starts with Foo:, then Foo is supposed to be the volume name.  
But it worked  ... however, the new code is more proper.

&#40;There&#39;s no need for rel2abs since Mac::Glue&#39;s call to create the alias handles that on the fly.&#41;

And if you tried to send in multiple paths, it would likely have not worked: I think you were 
only deleting one thing at a time, as delete&#40;&#41; would require an arrayref, not an array, as its 
argument.

I also cached the $glue object for a performance enhancement.

The more important problem is that directory permissions prevented root from telling the 
Finder to trash these things.  In Panther it was more permissive in that regard, and would ask 
permission to delete the file with a dialog box, but now in Tiger it won&#39;t work at all.  So I 
added a bunch of chmod calls to the test.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/134758/37382/file-remove-patch.txt">Download file-remove-patch.txt</a><br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/File/Remove.pm	2004-12-04 16:34:48.000000000 -0800
+++ /Users/pudge/Remove.pm	2005-07-12 15:57:19.000000000 -0700
@@ -106,6 +106,8 @@
 
 $VERSION = &#39;0.29&#39;;
 
+our $glue;
+
 sub expand &#40;@&#41;
 {
     my @args;
@@ -176,13 +178,14 @@
 	$unlink = \&#38;Win32::FileOp::Recycle;
 	$rmdir = \&#38;Win32::FileOp::Recycle;
     } elsif &#40;$^O eq &#39;darwin&#39;&#41; {
-	our $f;
-	eval &#39;use Mac::Glue &#40;&#41;;&#39;;
-	die &#34;Can&#39;t load Mac::Glue::Finder to support the Trash Can: \$@ = $@&#34; if length $@;
+	unless &#40;$glue&#41; {
+	    eval &#39;use Mac::Glue &#40;&#41;;&#39;;
+	    die &#34;Can&#39;t load Mac::Glue::Finder to support the Trash Can: \$@ = $@&#34; if length $@;
+	    $glue = Mac::Glue-&gt;new&#40;&#39;Finder&#39;&#41;;
+	}
 	my $code = sub {
-	    my $f = Mac::Glue-&gt;new&#40;&#34;Finder&#34;&#41;;
-	    my @files = map { s{^:}{}; $_ } map { s{/}{:}g; $_ } map { File::Spec-&gt;rel2abs&#40;$_&#41; } @_;
-	    $f-&gt;delete&#40;@files&#41;;
+	    my @files = map { Mac::Glue::param_type&#40;Mac::Glue::typeAlias&#40;&#41; =&gt; $_&#41; } @_;
+	    $glue-&gt;delete&#40;\@files&#41;;
 	};
 	$unlink = $code;
 	$rmdir = $code;
--- t/1_directories.t	2004-12-04 16:34:18.000000000 -0800
+++ /Users/pudge/1_directories.t	2005-07-12 15:57:22.000000000 -0700
@@ -29,6 +29,7 @@
       &#34;!-e: $path&#34;;
     ok mkdir&#40;$path&#41;,
       &#34;mkdir: $path&#34;;
+chmod 0777, $path;
     ok -e $path,
       &#34;-e: $path&#34;;
 }
@@ -47,6 +48,7 @@
       &#34;!-e: $path&#34;;
     ok mkdir&#40;$path&#41;,
       &#34;mkdir: $path&#34;;
+chmod 0777, $path;
     ok -e $path,
       &#34;-e: $path&#34;;
 }
@@ -65,6 +67,7 @@
       &#34;!-e: $path&#34;;
     ok mkdir&#40;$path&#41;,
       &#34;mkdir: $path&#34;;
+chmod 0777, $path;
     ok -e $path,
       &#34;-e: $path&#34;;
 }
@@ -106,6 +109,7 @@
 	  &#34;!-e: $path&#34;;
 	ok mkdir&#40;$path&#41;,
 	  &#34;mkdir: $path&#34;;
+chmod 0777, $path;
 	ok -e $path,
 	  &#34;-e: $path&#34;;
     }
@@ -137,6 +141,7 @@
 	  &#34;!-e: $path&#34;;
 	ok mkdir&#40;$path&#41;,
 	  &#34;mkdir: $path&#34;;
+chmod 0777, $path;
 	ok -e $path,
 	  &#34;-e: $path&#34;;
     }
@@ -166,6 +171,7 @@
 	  &#34;!-e: $path&#34;;
 	ok mkdir&#40;$path&#41;,
 	  &#34;mkdir: $path&#34;;
+chmod 0777, $path;
 	ok -e $path,
 	  &#34;-e: $path&#34;;
     }
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-134759" href="/Public/Bug/Display.html?id=13369#txn-134759">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;13&nbsp;22:16:33&nbsp;2005</span>
    <span class="description">RSOD [...] cpan.org -  Given to RSOD</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-134760" href="/Public/Bug/Display.html?id=13369#txn-134760">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;13&nbsp;22:16:33&nbsp;2005</span>
    <span class="description">RSOD [...] cpan.org -  Status changed from &#39;new&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-134761" href="/Public/Bug/Display.html?id=13369#txn-134761">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;13&nbsp;22:16:33&nbsp;2005</span>
    <span class="description">RSOD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">10 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> CNANDOR</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/134761/37451/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/37451">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 202b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Patch applied with especial gratitude for the explanation.  I never did
figure out the permissions issue with the Trash can - that resolves it!
 Thank you so very much.  DHA, can you try 0.30 &#40;on CPAN&#41;?
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.34667</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
