<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #43692 for Math-BigInt: For some values of x, blog&#40;x&#41; returns blog&#40;2*x&#41; when the accuracy is &gt;= 71</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #43692 for Math-BigInt: For some values of x, blog&#40;x&#41; returns blog&#40;2*x&#41; when the accuracy is &gt;= 71</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Math-BigInt">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Math-BigInt">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Math-BigInt">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Math-BigInt">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Math-BigInt">Math-BigInt CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">43692</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Math-BigInt">Math-BigInt</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
emazep [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-20500-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.89    </td>
  </tr>
  <tr id="CF-20501-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




accuracy_biglog.t<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/570823/287927/accuracy_biglog.t">
Fri Feb 27 04:15:39 2009 (939b) by emazep [...] gmail.com
</a>
</font></li>
</ul>


bigfloat-log-fix.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1277921/677040/bigfloat-log-fix.patch">
Tue Oct 22 14:37:49 2013 (409b) by DANAJ [...] cpan.org
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/1277910/677030/bigfloat-log-fix.patch">
Tue Oct 22 14:20:41 2013 (388b) by DANAJ [...] cpan.org
</a>
</font></li>
</ul>


perl-V.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/570823/287924/perl-V.txt">
Fri Feb 27 04:15:39 2009 (2.6k) by emazep [...] gmail.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=43692">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-570823" href="/Public/Bug/Display.html?id=43692#txn-570823">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;27&nbsp;04:15:39&nbsp;2009</span>
    <span class="description">emazep [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> For some values of x, blog&#40;x&#41; returns blog&#40;2*x&#41; when the accuracy
 is &gt;= 71</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/570823/287921/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/287921">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 686b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Consider the following code snippet:

---

use Math::BigFloat;
my $x = Math::BigFloat-&gt;new&#40;15&#41;;

$x-&gt;accuracy&#40;70&#41;;
print $x-&gt;copy-&gt;blog, &#34;\n&#34;; # 2.7...

$x-&gt;accuracy&#40;71&#41;;
print $x-&gt;blog, &#34;\n&#34;;       # 3.4...

---

the first print produces 2.7... &#40;which is correct&#41; while, once increased
the accuracy from 70 to 71, the second print produces 3.4..., which is
wrong &#40; it actually is log&#40;2*$x&#41; - or log&#40;$x&#41;+log&#40;2&#41; &#41;.

It happens only for some values of $x &#40;e.g. 11..19, but also for very
big numbers&#41;.

Attached is a new test file &#40;accuracy_biglog.t - which tries to adhere
to the Math::BigInt test standards&#41; containing a failing test. 

Thanks for your invaluable work,
Emanuele Zeppieri
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> perl-V.txt</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/570823/287924/perl-V.txt">Download perl-V.txt</a><br />
<span class="downloadcontenttype">text/plain 2.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Summary of my perl5 &#40;revision 5 version 10 subversion 0 patch 34065&#41; configuration:
  Platform:
    osname=cygwin, osvers=1.5.25&#40;0.15642&#41;, archname=cygwin-thread-multi-64int
    uname=&#39;cygwin_nt-5.1 reini 1.5.25&#40;0.15642&#41; 2008-06-12 19:34 i686 cygwin &#39;
    config_args=&#39;-de -Dmksymlinks -Dusethreads -Dmad=y -Dusedevel&#39;
    hint=recommended, useposix=true, d_sigaction=define
    useithreads=define, usemultiplicity=define
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=define, use64bitall=undef, uselongdouble=undef
    usemymalloc=y, bincompat5005=undef
  Compiler:
    cc=&#39;gcc&#39;, ccflags =&#39;-DPERL_USE_SAFE_PUTENV -U__STRICT_ANSI__ -fno-strict-aliasing -pipe -I/usr/local/include&#39;,
    optimize=&#39;-O3&#39;,
    cppflags=&#39;-DPERL_USE_SAFE_PUTENV -U__STRICT_ANSI__ -fno-strict-aliasing -pipe -I/usr/local/include&#39;
    ccversion=&#39;&#39;, gccversion=&#39;3.4.4 &#40;cygming special, gdc 0.12, using dmd 0.125&#41;&#39;, gccosandvers=&#39;&#39;
    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=12
    ivtype=&#39;long long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;, lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;g++&#39;, ldflags =&#39; -Wl,--enable-auto-import -Wl,--export-all-symbols -Wl,--stack,8388608 -Wl,--enable-auto-image-base -L/usr/local/lib&#39;
    libpth=/usr/local/lib /usr/lib /lib
    libs=-lgdbm -ldb -ldl -lcrypt -lgdbm_compat
    perllibs=-ldl -lcrypt
    libc=/usr/lib/libc.a, so=dll, useshrplib=true, libperl=libperl.a
    gnulibc_version=&#39;&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=dll, d_dlsymun=undef, ccdlflags=&#39; &#39;
    cccdlflags=&#39; &#39;, lddlflags=&#39; --shared  -Wl,--enable-auto-import -Wl,--export-all-symbols -Wl,--stack,8388608 -Wl,--enable-auto-image-base -L/usr/local/lib&#39;


Characteristics of this binary &#40;from libperl&#41;: 
  Compile-time options: MULTIPLICITY MYMALLOC PERL_DONT_CREATE_GVSV
                        PERL_IMPLICIT_CONTEXT PERL_MAD PERL_MALLOC_WRAP
                        PERL_USE_SAFE_PUTENV USE_64_BIT_INT USE_ITHREADS
                        USE_LARGE_FILES USE_PERLIO USE_REENTRANT_API
  Locally applied patches:
	MAINT34065
	CYG11 no-bs
	CYG12 no archlib in otherlibdirs
	CYG14 Dynaloader
	CYG15 static-Win32CORE
	Bug#55162 File::Spec::case_tolerant performance
  Built under cygwin
  Compiled at Jun 30 2008 16:05:15
  %ENV:
    CYGWIN=&#34;&#34;
  @INC:
    /usr/lib/perl5/5.10/i686-cygwin
    /usr/lib/perl5/5.10
    /usr/lib/perl5/site_perl/5.10/i686-cygwin
    /usr/lib/perl5/site_perl/5.10
    /usr/lib/perl5/vendor_perl/5.10/i686-cygwin
    /usr/lib/perl5/vendor_perl/5.10
    /usr/lib/perl5/vendor_perl/5.10
    /usr/lib/perl5/site_perl/5.8
    /usr/lib/perl5/vendor_perl/5.8
    .
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> accuracy_biglog.t</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/570823/287927/accuracy_biglog.t">Download accuracy_biglog.t</a><br />
<span class="downloadcontenttype">text/x-perl 939b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl -w

# Emanuele Zeppieri
#
# Failing test for a bug in 1.89 which causes blog&#40;x&#41; to return blog&#40;x&#41;+blog&#40;2&#41;
# for some values of x, when the accuracy is &gt;= 71.

use Test::More;
use strict;

BEGIN
  {
  $| = 1;
  # to locate the testing files
  my $location = $0; $location =~ s/bigroot.t//i;
  if &#40;$ENV{PERL_CORE}&#41;
    {
    # testing with the core distribution
    @INC = qw&#40;../lib&#41;;
    }
  unshift @INC, &#39;../lib&#39;;
  if &#40;-d &#39;t&#39;&#41;
    {
    chdir &#39;t&#39;;
    require File::Spec;
    unshift @INC, File::Spec-&gt;catdir&#40;File::Spec-&gt;updir, $location&#41;;
    }
  else
    {
    unshift @INC, $location;
    }
  print &#34;# INC = @INC\n&#34;;

  plan tests =&gt; 1;
  }

use Math::BigFloat;

my $cl = &#34;Math::BigFloat&#34;;

#############################################################################
# test blog&#40;x,a&#41; with the failing values x=15 and a=71

like &#40;$cl-&gt;new&#40;15&#41;-&gt;blog&#40;undef,71&#41;, qr/^2\.7080502011022100659960045701487133/&#41;;

# all done
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-570826" href="/Public/Bug/Display.html?id=43692#txn-570826">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;27&nbsp;04:18:09&nbsp;2009</span>
    <span class="description">emazep [...] gmail.com -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-570827" href="/Public/Bug/Display.html?id=43692#txn-570827">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;27&nbsp;04:21:32&nbsp;2009</span>
    <span class="description">emazep [...] gmail.com -  Status changed from &#39;open&#39; to &#39;new&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1097230" href="/Public/Bug/Display.html?id=43692#txn-1097230">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;09&nbsp;13:33:29&nbsp;2012</span>
    <span class="description">BBYRD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1097230/576852/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/576852">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 247b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is still a problem on the latest version.  Even this fails:

use Math::BigFloat;
my $x = Math::BigFloat-&gt;new&#40;15&#41;;
print $x-&gt;copy-&gt;blog&#40;undef, 70&#41;, &#34;\n&#34;; # 2.7...

$x = Math::BigFloat-&gt;new&#40;15&#41;;
print $x-&gt;copy-&gt;blog&#40;undef, 71&#41;, &#34;\n&#34;; # 3.4... 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1097233" href="/Public/Bug/Display.html?id=43692#txn-1097233">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;09&nbsp;13:33:31&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1277910" href="/Public/Bug/Display.html?id=43692#txn-1277910">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;22&nbsp;14:20:41&nbsp;2013</span>
    <span class="description">DANAJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1277910/677029/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/677029">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 404b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Attached is a patch that fixes this.  It would be nice to have someone else review this.  It passes the current test suite as well as fixing the issues shown in RT 43692 and RT 77105 as well as some Riemann Zeta code I have that is brutalized by this RT.

With high accuracy, we were adding in $l_2 to the result even if $twos was 0.  The fix is to undefine $l2 when $twos is zero, so it is not added in.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> bigfloat-log-fix.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1277910/677030/bigfloat-log-fix.patch">Download bigfloat-log-fix.patch</a><br />
<span class="downloadcontenttype">text/x-diff 388b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/Math/BigFloat.pm.orig	2013-10-22 10:55:47.640415285 -0700
+++ lib/Math/BigFloat.pm	2013-10-22 11:16:38.744412163 -0700
@@ -1498,6 +1498,10 @@
       }
     $l_2-&gt;bmul&#40;$twos&#41;;		# * -2 =&gt; subtract, * 2 =&gt; add
     }
+  else
+    {
+      undef $l_2;
+    }
   
   $self-&gt;_log&#40;$x,$scale&#41;;			# need to do the &#34;normal&#34; way
   $x-&gt;badd&#40;$l_10&#41; if defined $l_10; 		# correct it by ln&#40;10&#41;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1277921" href="/Public/Bug/Display.html?id=43692#txn-1277921">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;22&nbsp;14:37:49&nbsp;2013</span>
    <span class="description">DANAJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1277921/677039/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/677039">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 163b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here is an alternate patch which does the same thing, but in this case it removes $l_2 immediately after using it to compute the high-accuracy $l_10.  Your choice.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> bigfloat-log-fix.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1277921/677040/bigfloat-log-fix.patch">Download bigfloat-log-fix.patch</a><br />
<span class="downloadcontenttype">text/x-diff 409b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/Math/BigFloat.pm.orig	2013-10-22 10:55:47.640415285 -0700
+++ lib/Math/BigFloat.pm	2013-10-22 11:36:05.948409256 -0700
@@ -1443,6 +1443,7 @@
       $l_10-&gt;badd&#40;$l_2&#41;;
       $l_10-&gt;badd&#40;$l_2&#41;;
       $l_10-&gt;badd&#40;$l_2&#41;;
+      undef $l_2;                       # done with l_2
       $LOG_10 = $l_10-&gt;copy&#40;&#41;;		# cache the result for later
 					# the copy&#40;&#41; is for mul below
       $LOG_10_A = $scale;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1350990" href="/Public/Bug/Display.html?id=43692#txn-1350990">#</a>      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;15&nbsp;12:01:10&nbsp;2014</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1350990/716936/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/716936">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 78b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Patch submitted upstream as

<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/Ticket/Display.html?id=121666">https://rt.perl.org/Ticket/Display.html?id=121666</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1368560" href="/Public/Bug/Display.html?id=43692#txn-1368560">#</a>      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;26&nbsp;15:36:17&nbsp;2014</span>
    <span class="description">DANAJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1368560/726559/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/726559">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 290b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Apr 15 12:01:10 2014, pjacklam wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Patch submitted upstream as
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/Ticket/Display.html?id=121666">https://rt.perl.org/Ticket/Display.html?id=121666</a></span>
</div>
Thanks!  I noticed it is marked important in this RT &#40;since it breaks a number of math operations with no workaround possible&#41;, but severity low for Perl&#39;s RT.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1371843" href="/Public/Bug/Display.html?id=43692#txn-1371843">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;04&nbsp;03:22:27&nbsp;2014</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1371843/728407/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/728407">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 76b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Resolved, according to <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/Public/Bug/Display.html?id=121666">https://rt.perl.org/Public/Bug/Display.html?id=121666</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1371846" href="/Public/Bug/Display.html?id=43692#txn-1371846">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;04&nbsp;03:22:29&nbsp;2014</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1371875" href="/Public/Bug/Display.html?id=43692#txn-1371875">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;04&nbsp;04:17:57&nbsp;2014</span>
    <span class="description">emazep [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43692] Resolved: For some values of x, blog&#40;x&#41; returns blog&#40;2*x&#41; when the accuracy is &gt;= 71</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 04 Jun 2014 10:17:45 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Emanuele Zeppieri &lt;emazep [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1371875/728430/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/728430">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 305b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you all, especially to DANAJ.
-Emanuele

On 2014-06-04 09:22, Peter John Acklam via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=43692">https://rt.cpan.org/Ticket/Display.html?id=43692</a></span> &gt;
&gt; 
&gt; According to our records, your request has been resolved. If you have any
&gt; further questions or concerns, please respond to this message.
</div></div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.672228</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
