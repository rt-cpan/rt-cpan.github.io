<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #76267 for Net-SSLeay: Build fails with Perl &lt; 5.8.8</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #76267 for Net-SSLeay: Build fails with Perl &lt; 5.8.8</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-SSLeay/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-SSLeay/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-SSLeay/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-SSLeay/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-SSLeay">Net-SSLeay CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">76267</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">10 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-SSLeay/Active/">Net-SSLeay</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">MIKEM [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
paul [...] city-fan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-44414-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
1.46</li>
<li>
1.47</li>
</ul>
    </td>
  </tr>
  <tr id="CF-44415-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;03&nbsp;06:44:44&nbsp;2012</span>
    <span class="description">paul [...] city-fan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Build fails with Perl &lt; 5.8.8</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">gcc -c  -I/usr/include -D_REENTRANT -D_GNU_SOURCE -DTHREADS_HAVE_PIDS
-DDEBUGGING -fno-strict-aliasing -pipe -I/usr/local/include
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm -O2 -g
-pipe -m32 -march=i386 -mtune=pentium4   -DVERSION=\&#34;1.46\&#34;
-DXS_VERSION=\&#34;1.46\&#34; -fPIC
&#34;-I/usr/lib/perl5/5.8.5/i386-linux-thread-multi/CORE&#34;   SSLeay.c
SSLeay.xs: In function `pem_password_cb_invoke&#39;:
SSLeay.xs:912: error: `n_a&#39; undeclared &#40;first use in this function&#41;
SSLeay.xs:912: error: &#40;Each undeclared identifier is reported only once
SSLeay.xs:912: error: for each function it appears in.&#41;
make: *** [SSLeay.o] Error 1

This is because, prior to Perl 5.8.8, the POPpx macro required an STRLEN
variable n_a in scope. See:
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.perl5.porters/2006/03/msg110764.html">http://www.nntp.perl.org/group/perl.perl5.porters/2006/03/msg110764.html</a></span>
and the follow-up message from Nicholas Clark. Attached POPpx patch
fixes this.

Whilst trying to figure out this issue, I tried running ppport.h and it
suggested a further change &#40;see attached newRV_noinc patch&#41;, though I
think that would only affect unfortunate souls trying to build with
Perls older than 5.4.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Net-SSLeay-1.46-newRV_noinc.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- SSLeay.xs
+++ SSLeay.xs
@@ -131,6 +131,7 @@
 #include &#34;EXTERN.h&#34;
 #include &#34;perl.h&#34;
 #include &#34;XSUB.h&#34;
+#define NEED_newRV_noinc
 #define NEED_sv_2pv_flags
 #include &#34;ppport.h&#34;
 #ifdef __cplusplus
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Net-SSLeay-1.46-POPpx.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">POPpx requires a variable STRLEN n_a in scope prior to Perl 5.8.8

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.perl5.porters/2006/03/msg110764.html">http://www.nntp.perl.org/group/perl.perl5.porters/2006/03/msg110764.html</a></span>

--- SSLeay.xs
+++ SSLeay.xs
@@ -886,6 +886,7 @@
     char *str;
     int count = -1, str_len = 0;
     simple_cb_data_t* cb = &#40;simple_cb_data_t*&#41;data;
+    STRLEN n_a;
 
     PR1&#40;&#34;STARTED: pem_password_cb_invoke\n&#34;&#41;;
     if &#40;cb-&gt;func &#38;&#38; SvOK&#40;cb-&gt;func&#41;&#41; {
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;03&nbsp;20:50:18&nbsp;2012</span>
    <span class="description">mikem [...] open.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #76267] Build fails with Perl &lt; 5.8.8</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 04 Apr 2012 10:50:27 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SSLeay [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mike McCauley &lt;mikem [...] open.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi 
Thanks for that.

These patches exposed another problem with snprintf not being avaialble on 
MSVC and also not in early perls, so changes have been made to use the 
ppport.h my_snprintf&#40;&#41; instead.

Your patches are in commit 336
Expect a new release very soon.


On Tuesday, April 03, 2012 06:44:45 AM you wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Tue Apr 03 06:44:44 2012: Request 76267 was acted upon.
&gt; Transaction: Ticket created by paul@city-fan.org
&gt;        Queue: Net-SSLeay
&gt;      Subject: Build fails with Perl &lt; 5.8.8
&gt;    Broken in: 1.46
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: paul@city-fan.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=76267">https://rt.cpan.org/Ticket/Display.html?id=76267</a></span> &gt;
&gt; 
&gt; 
&gt; gcc -c  -I/usr/include -D_REENTRANT -D_GNU_SOURCE -DTHREADS_HAVE_PIDS
&gt; -DDEBUGGING -fno-strict-aliasing -pipe -I/usr/local/include
&gt; -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm -O2 -g
&gt; -pipe -m32 -march=i386 -mtune=pentium4   -DVERSION=\&#34;1.46\&#34;
&gt; -DXS_VERSION=\&#34;1.46\&#34; -fPIC
&gt; &#34;-I/usr/lib/perl5/5.8.5/i386-linux-thread-multi/CORE&#34;   SSLeay.c
&gt; SSLeay.xs: In function `pem_password_cb_invoke&#39;:
&gt; SSLeay.xs:912: error: `n_a&#39; undeclared &#40;first use in this function&#41;
&gt; SSLeay.xs:912: error: &#40;Each undeclared identifier is reported only once
&gt; SSLeay.xs:912: error: for each function it appears in.&#41;
&gt; make: *** [SSLeay.o] Error 1
&gt; 
&gt; This is because, prior to Perl 5.8.8, the POPpx macro required an STRLEN
&gt; variable n_a in scope. See:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.perl5.porters/2006/03/msg110764.html">http://www.nntp.perl.org/group/perl.perl5.porters/2006/03/msg110764.html</a></span>
&gt; and the follow-up message from Nicholas Clark. Attached POPpx patch
&gt; fixes this.
&gt; 
&gt; Whilst trying to figure out this issue, I tried running ppport.h and it
&gt; suggested a further change &#40;see attached newRV_noinc patch&#41;, though I
&gt; think that would only affect unfortunate souls trying to build with
&gt; Perls older than 5.4.
</div>-- 
Mike McCauley                               mikem@open.com.au
Open System Consultants Pty. Ltd
9 Bulbul Place Currumbin Waters QLD 4223 Australia   <span class="clickylink"><a target="new" rel="nofollow" href="http://www.open.com.au">http://www.open.com.au</a></span>
Phone +61 7 5598-7474                       Fax   +61 7 5598-7070

Radiator: the most portable, flexible and configurable RADIUS server 
anywhere. SQL, proxy, DBM, files, LDAP, NIS+, password, NT, Emerald, 
Platypus, Freeside, TACACS+, PAM, external, Active Directory, EAP, TLS, 
TTLS, PEAP, TNC, WiMAX, RSA, Vasco, Yubikey, MOTP, HOTP, TOTP,
DIAMETER etc. Full source on Unix, Windows, MacOSX, Solaris, VMS, NetWare etc.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;03&nbsp;20:50:19&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;17&nbsp;12:15:01&nbsp;2012</span>
    <span class="description">deven [...] ties.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The same problem exists in next_proto_select_cb_invoke&#40;&#41;.  I am 
attaching a patch to Net::SSLeay 1.47 which fixes this additional use of 
the POPpx macro.

Deven

On Tue Apr 03 06:44:44 2012, paul@city-fan.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; gcc -c  -I/usr/include -D_REENTRANT -D_GNU_SOURCE -DTHREADS_HAVE_PIDS
&gt; -DDEBUGGING -fno-strict-aliasing -pipe -I/usr/local/include
&gt; -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm -O2 -g
&gt; -pipe -m32 -march=i386 -mtune=pentium4   -DVERSION=\&#34;1.46\&#34;
&gt; -DXS_VERSION=\&#34;1.46\&#34; -fPIC
&gt; &#34;-I/usr/lib/perl5/5.8.5/i386-linux-thread-multi/CORE&#34;   SSLeay.c
&gt; SSLeay.xs: In function `pem_password_cb_invoke&#39;:
&gt; SSLeay.xs:912: error: `n_a&#39; undeclared &#40;first use in this function&#41;
&gt; SSLeay.xs:912: error: &#40;Each undeclared identifier is reported only 
</div>once
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; SSLeay.xs:912: error: for each function it appears in.&#41;
&gt; make: *** [SSLeay.o] Error 1
&gt; 
&gt; This is because, prior to Perl 5.8.8, the POPpx macro required an 
</div>STRLEN
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; variable n_a in scope. See:
&gt; 
</div><span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.perl5.porters/2006/03/msg110764.html">http://www.nntp.perl.org/group/perl.perl5.porters/2006/03/msg110764.html</a></span>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; and the follow-up message from Nicholas Clark. Attached POPpx patch
&gt; fixes this.
&gt; 
&gt; Whilst trying to figure out this issue, I tried running ppport.h and 
</div>it
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; suggested a further change &#40;see attached newRV_noinc patch&#41;, though I
&gt; think that would only affect unfortunate souls trying to build with
&gt; Perls older than 5.4.
</div></div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Net-SSLeay-1.47-POPpx.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- SSLeay.xs.orig	2012-04-17 12:00:37.000000000 -0400
+++ SSLeay.xs	2012-04-17 11:55:26.000000000 -0400
@@ -766,6 +766,7 @@
     unsigned char next_proto_len;
     int next_proto_status;
     SSL_CTX *ctx = SSL_get_SSL_CTX&#40;ssl&#41;;
+    STRLEN n_a;
 
     PR1&#40;&#34;STARTED: next_proto_select_cb_invoke\n&#34;&#41;;
     cb_func = cb_data_advanced_get&#40;ctx, &#34;next_proto_select_cb!!func&#34;&#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;17&nbsp;15:02:09&nbsp;2012</span>
    <span class="description">deven [...] ties.org -  Broken in 1.47 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;17&nbsp;16:35:11&nbsp;2012</span>
    <span class="description">mikem [...] open.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #76267] Build fails with Perl &lt; 5.8.8</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 18 Apr 2012 06:34:45 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SSLeay [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mike McCauley &lt;mikem [...] open.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

Thanks.
This fix is already in SVN and will appear in the next release of net-ssleay.

Cheers.

On Tuesday, April 17, 2012 12:15:03 PM you wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Net-SSLeay
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=76267">https://rt.cpan.org/Ticket/Display.html?id=76267</a></span> &gt;
&gt; 
&gt; The same problem exists in next_proto_select_cb_invoke&#40;&#41;.  I am
&gt; attaching a patch to Net::SSLeay 1.47 which fixes this additional use of
&gt; the POPpx macro.
&gt; 
&gt; Deven
&gt; 
&gt; On Tue Apr 03 06:44:44 2012, paul@city-fan.org wrote:
<div class="message-stanza open">&gt; &gt; gcc -c  -I/usr/include -D_REENTRANT -D_GNU_SOURCE -DTHREADS_HAVE_PIDS
&gt; &gt; -DDEBUGGING -fno-strict-aliasing -pipe -I/usr/local/include
&gt; &gt; -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm -O2 -g
&gt; &gt; -pipe -m32 -march=i386 -mtune=pentium4   -DVERSION=\&#34;1.46\&#34;
&gt; &gt; -DXS_VERSION=\&#34;1.46\&#34; -fPIC
&gt; &gt; &#34;-I/usr/lib/perl5/5.8.5/i386-linux-thread-multi/CORE&#34;   SSLeay.c
&gt; &gt; SSLeay.xs: In function `pem_password_cb_invoke&#39;:
&gt; &gt; SSLeay.xs:912: error: `n_a&#39; undeclared &#40;first use in this function&#41;
&gt; &gt; SSLeay.xs:912: error: &#40;Each undeclared identifier is reported only
</div>&gt; 
&gt; once
&gt; 
<div class="message-stanza open">&gt; &gt; SSLeay.xs:912: error: for each function it appears in.&#41;
&gt; &gt; make: *** [SSLeay.o] Error 1
&gt; &gt; 
&gt; &gt; This is because, prior to Perl 5.8.8, the POPpx macro required an
</div>&gt; 
&gt; STRLEN
&gt; 
<div class="message-stanza open">&gt; &gt; variable n_a in scope. See:
</div>&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.perl5.porters/2006/03/msg110764.html">http://www.nntp.perl.org/group/perl.perl5.porters/2006/03/msg110764.html</a></span>
&gt; 
<div class="message-stanza open">&gt; &gt; and the follow-up message from Nicholas Clark. Attached POPpx patch
&gt; &gt; fixes this.
&gt; &gt; 
&gt; &gt; Whilst trying to figure out this issue, I tried running ppport.h and
</div>&gt; 
&gt; it
&gt; 
<div class="message-stanza open">&gt; &gt; suggested a further change &#40;see attached newRV_noinc patch&#41;, though I
&gt; &gt; think that would only affect unfortunate souls trying to build with
&gt; &gt; Perls older than 5.4.
</div></div>-- 
Mike McCauley                               mikem@open.com.au
Open System Consultants Pty. Ltd
9 Bulbul Place Currumbin Waters QLD 4223 Australia   <span class="clickylink"><a target="new" rel="nofollow" href="http://www.open.com.au">http://www.open.com.au</a></span>
Phone +61 7 5598-7474                       Fax   +61 7 5598-7070

Radiator: the most portable, flexible and configurable RADIUS server 
anywhere. SQL, proxy, DBM, files, LDAP, NIS+, password, NT, Emerald, 
Platypus, Freeside, TACACS+, PAM, external, Active Directory, EAP, TLS, 
TTLS, PEAP, TNC, WiMAX, RSA, Vasco, Yubikey, MOTP, HOTP, TOTP,
DIAMETER etc. Full source on Unix, Windows, MacOSX, Solaris, VMS, NetWare etc.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;10&nbsp;09:42:53&nbsp;2012</span>
    <span class="description">MIKEM [...] cpan.org -  TimeWorked changed from &#40;no value&#41; to &#39;10&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;10&nbsp;09:42:53&nbsp;2012</span>
    <span class="description">MIKEM [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;May&nbsp;10&nbsp;09:42:53&nbsp;2012</span>
    <span class="description">MIKEM [...] cpan.org -  Given to MIKEM</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
