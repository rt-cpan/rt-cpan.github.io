<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #48086 for CGI-Application-Plugin-HTCompiled: set up html_tmpl_class</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #48086 for CGI-Application-Plugin-HTCompiled: set up html_tmpl_class</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/CGI-Application-Plugin-HTCompiled/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/CGI-Application-Plugin-HTCompiled/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/CGI-Application-Plugin-HTCompiled/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/CGI-Application-Plugin-HTCompiled/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/CGI-Application-Plugin-HTCompiled">CGI-Application-Plugin-HTCompiled CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">48086</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/CGI-Application-Plugin-HTCompiled/Active/">CGI-Application-Plugin-HTCompiled</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">MARKSTOS [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
asb_ehb [...] yahoo.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-5494-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.01    </td>
  </tr>
  <tr id="CF-5495-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;22&nbsp;11:35:39&nbsp;2009</span>
    <span class="description">asb_ehb [...] yahoo.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> set up html_tmpl_class</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This package should set up html_tmpl_class&#40;&#41;. Atm, using HTCompiled and
calling $self-&gt;html_tmpl_class&#40;&#41; returns HTML::Template, which is not
correct.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;22&nbsp;12:36:39&nbsp;2009</span>
    <span class="description">mark [...] summersault.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48086] set up html_tmpl_class</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 22 Jul 2009 12:36:09 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI-Application-Plugin-HTCompiled [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Stosberg &lt;mark [...] summersault.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This package should set up html_tmpl_class&#40;&#41;. Atm, using HTCompiled and
&gt; calling $self-&gt;html_tmpl_class&#40;&#41; returns HTML::Template, which is not
&gt; correct.
</div>
Because of the introduction of html_tmpl_class&#40;&#41;, I think this plugin is
now obsolete, except for this one line of logic that it contains:

  my %tmpl_params = &#40;c=&gt;$self&#41;;

Are you interested in being a co-maintainer of the module and making a
new release which avoids the old the technique of replacing load_tmpl&#40;&#41;,
and instead simply sets html_tmpl_class&#40;&#41; through the &#34;init&#34; callback,
and sets &#34; c=&gt; $self&#34; through the load_tmpl&#40;&#41; callback?

I am not currently using the plugin myself, and don&#39;t have plans to use
it soon.

    Mark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;22&nbsp;12:36:40&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;06&nbsp;13:20:00&nbsp;2009</span>
    <span class="description">asb_ehb [...] yahoo.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mi. 22. Jul. 2009, 12:36:39, mark@summersault.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; This package should set up html_tmpl_class&#40;&#41;. Atm, using HTCompiled and
&gt; &gt; calling $self-&gt;html_tmpl_class&#40;&#41; returns HTML::Template, which is not
&gt; &gt; correct.
</div>&gt; 
&gt; Because of the introduction of html_tmpl_class&#40;&#41;, I think this plugin is
&gt; now obsolete, except for this one line of logic that it contains:
&gt; 
&gt;   my %tmpl_params = &#40;c=&gt;$self&#41;;
&gt; 
&gt; Are you interested in being a co-maintainer of the module and making a
&gt; new release which avoids the old the technique of replacing load_tmpl&#40;&#41;,
&gt; and instead simply sets html_tmpl_class&#40;&#41; through the &#34;init&#34; callback,
&gt; and sets &#34; c=&gt; $self&#34; through the load_tmpl&#40;&#41; callback?
&gt; 
&gt; I am not currently using the plugin myself, and don&#39;t have plans to use
&gt; it soon.
&gt; 
&gt;     Mark
</div>

As already sent via CA mailing list, here is some new code. See
attachement. Please feel free to copy &#38; paste it as a new release, or to
change anything you want.

HTH, Alex
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">package CGI::Application::Plugin::HTCompiled;

use CGI::Application 4.31;

use 5.006;
use strict;
use warnings;

=head1 NAME

CGI::Application::Plugin::HTCompiled - Integrate with HTML::Template::Compiled

=cut

$CGI::Application::Plugin::HTCompiled::VERSION = &#39;1.02&#39;;

use vars qw&#40; $VERSION &#41;;


=head1 SYNOPSIS

    # In your CGI::Application-derived base class. . . 
    use base &#34;CGI::Application&#34;;
	
	use CGI::Application::Plugin::HTCompiled;

    # Later, in a run mode far, far away. . . 
    sub view
    {
        my $self = shift;
        my $username = $self-&gt;query-&gt;param&#40;&#34;user&#34;&#41;;
        my $user     = My::Users-&gt;retrieve&#40;$username&#41;;

        my $tmpl_view = $self-&gt;load_tmpl&#40; &#34;view_user.tmpl&#34; &#41;;

        $tmpl_view-&gt;param&#40; user =&gt; $user &#41;;

        return $tmpl_view-&gt;output&#40;&#41;;
    }




=head1 DESCRIPTION

Allows you to use L&lt;HTML::Template::Compiled&gt; as a seamless replacement 
for HTML::Template, as far as is possible with that module. 




=head1 DEFAULT PARAMETERS

By default, the HTCompiled plugin will automatically add a parameter &#39;c&#39; to the template that
will return to your CGI::Application object $self.  This allows you to access any
methods in your CGI::Application module that you could normally call on $self
from within your template.  This allows for some powerful actions in your templates.
For example, your templates will be able to access query parameters, or if you use
the CGI::Application::Plugin::Session module, you can access session parameters.

 &lt;a href=&#34;&lt;tmpl_var c.query.self_url&gt;&#34;&gt;Reload this page&lt;/a&gt;

With this extra flexibility comes some responsibilty as well.  It could lead down a
dangerous path if you start making alterations to your object from within the template.
For example you could call c.header_add to add new outgoing headers, but that is something
that should be left in your code, not in your template.  Try to limit yourself to
pulling in information into your templates &#40;like the session example above does&#41;.




=head1 FUNCTIONS

=head2 import&#40;&#41;

Will be called when your Module uses L&lt;HTML::Template::Compiled&gt;. Registers
callbacks at the inti and the load_tmpl stages.

=cut

sub import {
    my $caller = scalar&#40; caller &#41;;
	$caller-&gt;add_callback&#40; &#39;init&#39; =&gt; \&#38;_add_init &#41;;
    $caller-&gt;add_callback&#40; &#39;load_tmpl&#39; =&gt; \&#38;_pass_in_self &#41;;
    goto &#38;Exporter::import;
} # /import




=head2 _pass_in_self&#40;&#41;

Adds the parameter c each template that will be processed. See DEFAULT PARAMETERS
for more information.

=cut

sub _pass_in_self {
	my &#40; $self, $one, $tmpl_params, $template_file &#41; = @_;
	
	warn&#40;&#34;Template param &#39;c&#39; will be overwritten.&#34;&#41; if exists $tmpl_params-&gt;{c};
	$tmpl_params-&gt;{c} = $self;
} # /_pass_in_self




=head2 _add_init&#40;&#41;

Set html_tmpl_class to L&lt;HTML::Template::Compiled&gt; at the init stage. That way,
each time a template is loaded using load_tmpl, an instance of
HTML::Template::Compiled will be created instead of the defualt HTML::Template.
See the l&lt;CGI::Appliaction&gt; manpage for more information.

=cut

sub _add_init {
	my $self = shift;
	$self-&gt;html_tmpl_class&#40;&#39;HTML::Template::Compiled&#39;&#41;;
} # /_add_init




=head2 Extending load_tmpl&#40;&#41;

There are times when the basic C&lt;load_tmpl&#40;&#41;&gt; functionality just isn&#39;t 
enough.   The easiest way to do this is by replacing or
extending the functionality of L&lt;CGI::Application&gt;&#39;s C&lt;load_tmpl&#40;&#41;&gt; method.
This is still possible using the plugin.  

The following code snippet illustrates one possible way of achieving this:

  sub load_tmpl
  {
      my &#40;$self, $tmpl_file, @extra_params&#41; = @_;

      push @extra_params, &#34;cache&#34;,             &#34;1&#34;;
      return $self-&gt;SUPER::load_tmpl&#40;$tmpl_file, @extra_params&#41;;
  }

=head1 AUTHOR

Mark Stosberg C&lt;&lt; &lt;mark@summersault.com&gt; &gt;&gt;
...but largely modeled on HTDot plugin by Jason A. Crome. 

=head1 BUGS

Please report any bugs or feature requests to
C&lt;bug-cgi-application-plugin-htcompiled@rt.cpan.org&gt;, or through the web interface at
L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/NoAuth/ReportBug.html?Queue=CGI-Application-Plugin-HTCompiled">http://rt.cpan.org/NoAuth/ReportBug.html?Queue=CGI-Application-Plugin-HTCompiled</a></span>&gt;.
I will be notified, and then you&#39;ll automatically be notified of progress on
your bug as I make changes.

=head1 ACKNOWLEDGEMENTS

The usual crowd in #cgiapp on irc.perl.org 

=head1 SEE ALSO

L&lt;CGI::Application&gt;, L&lt;HTML::Template&gt;, L&lt;HTML::Template::Compiled&gt;,

=head1 COPYRIGHT &#38; LICENSE

Copyright 2005 Mark Stosberg, all rights reserved.

This program is free software; you can redistribute it and/or modify it
under the same terms as Perl itself.

=cut

1; # End of CGI::Application::Plugin::HTCompiled
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;10&nbsp;11:47:45&nbsp;2009</span>
    <span class="description">mark [...] summersault.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48086] set up html_tmpl_class</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 10 Aug 2009 11:47:28 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI-Application-Plugin-HTCompiled [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Stosberg &lt;mark [...] summersault.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As already sent via CA mailing list, here is some new code. See
&gt; attachement. Please feel free to copy &#38; paste it as a new release, or to
&gt; change anything you want.
</div>
Looks reasonable to me.

Do have a CPAN account yet, Alex?

I could mark you as a co-maintainer, and you could upload the release yourself.

OTOH, I don&#39;t expect the module to change much more over time, and I could
upload it myself as well.

If you are interested in contributing more to CPAN, this could be a good place
to start.

    Mark


-- 
 . . . . . . . . . . . . . . . . . . . . . . . . . . . 
   Mark Stosberg            Principal Developer  
   mark@summersault.com     Summersault, LLC     
   765-939-9301 ext 202     database driven websites
 . . . . . <span class="clickylink"><a target="new" rel="nofollow" href="http://www.summersault.com/">http://www.summersault.com/</a></span> . . . . . . . .
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;10&nbsp;20:08:08&nbsp;2009</span>
    <span class="description">mark [...] summersault.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48086] set up html_tmpl_class</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 10 Aug 2009 20:07:48 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI-Application-Plugin-HTCompiled [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Stosberg &lt;mark [...] summersault.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Alex,

I made your changes to the distribution, but the included tests are failing for at least two reasons:

1. The old multiple inheritence syntax seems to no longer work with it, as
shown in the original documentation.  Personally, I consider it a &#39;feature&#39;
that the MI hack is no longer required, but the question of backcompat still
needs to be considered and addressed, even if the outcome is continue break
backwards compatibility.

2. The tests for &#34;c.foo&#34; are failing. I haven&#39;t looked into way. I have published the integration work I have so far here:

<span class="clickylink"><a target="new" rel="nofollow" href="http://mark.stosberg.com/darcs_hive/CGI-Application-Plugin-HTCompiled/">http://mark.stosberg.com/darcs_hive/CGI-Application-Plugin-HTCompiled/</a></span>

It&#39;s a darcs repo, but you can also just browse and download files.

Darcs is very user-friendly if you want to try it, and binaries are easily available.

 darcs get <span class="clickylink"><a target="new" rel="nofollow" href="http://mark.stosberg.com/darcs_hive/CGI-Application-Plugin-HTCompiled/">http://mark.stosberg.com/darcs_hive/CGI-Application-Plugin-HTCompiled/</a></span>
 cd CGI-Application-Application-Plugin-HTCompiled
 # hack...
 darcs record
 darcs send

You are also welcome to take over this module and upload it under your own
PAUSE ID. I no longer use it myself and trust you would do a fine job
maintaining it.

    Mark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;26&nbsp;10:04:03&nbsp;2009</span>
    <span class="description">asb_ehb [...] yahoo.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi!

I thought on the problem with the backwards compatibility and I don&#39;t
see a way to preserve it &#40;maybe there is a way, but I&#39;m simply not
capable to do it&#41;.
So I suggest to push the module to the next version, setting up a big
text about the backwards compatibility problem. Code for this is attached.

Regarding the module maintenance: If the module will never change again,
then there would b no need to change its maintainer :&#41;

But I doubt that. I will try to read all this &#34;getting a cpan author&#34;
stuff, but it could take a while. Meanwhile, you could do the update :&#41;

Best regards, Alex

On Mo. 10. Aug. 2009, 20:08:08, mark@summersault.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Alex,
&gt; 
&gt; I made your changes to the distribution, but the included tests are
&gt; failing for at least two reasons:
&gt; 
&gt; 1. The old multiple inheritence syntax seems to no longer work with
&gt; it, as
&gt; shown in the original documentation.  Personally, I consider it a
&gt; &#39;feature&#39;
&gt; that the MI hack is no longer required, but the question of backcompat
&gt; still
&gt; needs to be considered and addressed, even if the outcome is continue
&gt; break
&gt; backwards compatibility.
&gt; 
&gt; 2. The tests for &#34;c.foo&#34; are failing. I haven&#39;t looked into way. I
&gt; have published the integration work I have so far here:
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://mark.stosberg.com/darcs_hive/CGI-Application-Plugin-HTCompiled/">http://mark.stosberg.com/darcs_hive/CGI-Application-Plugin-HTCompiled/</a></span>
&gt; 
&gt; It&#39;s a darcs repo, but you can also just browse and download files.
&gt; 
&gt; Darcs is very user-friendly if you want to try it, and binaries are
&gt; easily available.
&gt; 
&gt;  darcs get <span class="clickylink"><a target="new" rel="nofollow" href="http://mark.stosberg.com/darcs_hive/CGI-Application-Plugin-">http://mark.stosberg.com/darcs_hive/CGI-Application-Plugin-</a></span>
&gt; HTCompiled/
&gt;  cd CGI-Application-Application-Plugin-HTCompiled
&gt;  # hack...
&gt;  darcs record
&gt;  darcs send
&gt; 
&gt; You are also welcome to take over this module and upload it under your
&gt; own
&gt; PAUSE ID. I no longer use it myself and trust you would do a fine job
&gt; maintaining it.
&gt; 
&gt;     Mark
</div></div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">package CGI::Application::Plugin::HTCompiled;

use CGI::Application 4.31;

use 5.006;
use strict;
use warnings;

=head1 NAME

CGI::Application::Plugin::HTCompiled - Integrate with HTML::Template::Compiled

=cut

$CGI::Application::Plugin::HTCompiled::VERSION = &#39;2.0&#39;;

use vars qw&#40; $VERSION &#41;;


=head1 SYNOPSIS

    # In your CGI::Application-derived base class. . . 
    use base &#34;CGI::Application&#34;;
	
	use CGI::Application::Plugin::HTCompiled;

    # Later, in a run mode far, far away. . . 
    sub view
    {
        my $self = shift;
        my $username = $self-&gt;query-&gt;param&#40;&#34;user&#34;&#41;;
        my $user     = My::Users-&gt;retrieve&#40;$username&#41;;

        my $tmpl_view = $self-&gt;load_tmpl&#40; &#34;view_user.tmpl&#34; &#41;;

        $tmpl_view-&gt;param&#40; user =&gt; $user &#41;;

        return $tmpl_view-&gt;output&#40;&#41;;
    }




=head1 DESCRIPTION

Allows you to use L&lt;HTML::Template::Compiled&gt; as a seamless replacement 
for HTML::Template, as far as is possible with that module. 




=head1 DEFAULT PARAMETERS

By default, the HTCompiled plugin will automatically add a parameter &#39;c&#39; to the template that
will return to your CGI::Application object $self.  This allows you to access any
methods in your CGI::Application module that you could normally call on $self
from within your template.  This allows for some powerful actions in your templates.
For example, your templates will be able to access query parameters, or if you use
the CGI::Application::Plugin::Session module, you can access session parameters.

 &lt;a href=&#34;&lt;tmpl_var c.query.self_url&gt;&#34;&gt;Reload this page&lt;/a&gt;

With this extra flexibility comes some responsibilty as well.  It could lead down a
dangerous path if you start making alterations to your object from within the template.
For example you could call c.header_add to add new outgoing headers, but that is something
that should be left in your code, not in your template.  Try to limit yourself to
pulling in information into your templates &#40;like the session example above does&#41;.




=head1 FUNCTIONS

=head2 import&#40;&#41;

Will be called when your Module uses L&lt;HTML::Template::Compiled&gt;. Registers
callbacks at the inti and the load_tmpl stages.

=cut

sub import {
    my $caller = scalar&#40; caller &#41;;
	$caller-&gt;add_callback&#40; &#39;init&#39; =&gt; \&#38;_add_init &#41;;
    $caller-&gt;add_callback&#40; &#39;load_tmpl&#39; =&gt; \&#38;_pass_in_self &#41;;
    goto &#38;Exporter::import;
} # /import




=head2 _pass_in_self&#40;&#41;

Adds the parameter c each template that will be processed. See DEFAULT PARAMETERS
for more information.

=cut

sub _pass_in_self {
	my &#40; $self, $one, $tmpl_params, $template_file &#41; = @_;
	
	warn&#40;&#34;Template param &#39;c&#39; will be overwritten.&#34;&#41; if exists $tmpl_params-&gt;{c};
	$tmpl_params-&gt;{c} = $self;
} # /_pass_in_self




=head2 _add_init&#40;&#41;

Set html_tmpl_class to L&lt;HTML::Template::Compiled&gt; at the init stage. That way,
each time a template is loaded using load_tmpl, an instance of
HTML::Template::Compiled will be created instead of the defualt HTML::Template.
See the l&lt;CGI::Appliaction&gt; manpage for more information.

=cut

sub _add_init {
	my $self = shift;
	$self-&gt;html_tmpl_class&#40;&#39;HTML::Template::Compiled&#39;&#41;;
} # /_add_init




=head2 Extending load_tmpl&#40;&#41;

There are times when the basic C&lt;load_tmpl&#40;&#41;&gt; functionality just isn&#39;t 
enough.   The easiest way to do this is by replacing or
extending the functionality of L&lt;CGI::Application&gt;&#39;s C&lt;load_tmpl&#40;&#41;&gt; method.
This is still possible using the plugin.  

The following code snippet illustrates one possible way of achieving this:

  sub load_tmpl
  {
      my &#40;$self, $tmpl_file, @extra_params&#41; = @_;

      push @extra_params, &#34;cache&#34;,             &#34;1&#34;;
      return $self-&gt;SUPER::load_tmpl&#40;$tmpl_file, @extra_params&#41;;
  }


=head1 BACKWARDS COMPATIBILITY

As of version 2.0, CGI::Application::Plugin::HTCompiled breaks backwards compatibility.
No interface has been changed, you can still use the load_tmpl&#40;&#41; method as you did before.

The difference is, that you don&#39;t use the plugin via multiple inheritance anymore,
but simply use it.

Old usage:

# In your CGI::Application-derived base class. . . 
use base &#40;&#34;CGI::Application::Plugin::HTCompiled&#34;, &#34;CGI::Application&#34;&#41;;

New usage:

# In your CGI::Application-derived base class. . . 
use base &#34;CGI::Application&#34;;

use CGI::Application::Plugin::HTCompiled;


Multiple inheritance was the onyl way before CGI::Application v. 4.13 to use
HTML::Template::Compiled with the standard load_tmpl&#40;&#41; method.
Now, there is no need to use language specific features &#40;such as multiple
inheritance&#41; to implement plugin behavior, because we now have a proper way to
do such plugins. This is the reason why we break backwards compatibility.
If you depend on the old interface, use an older version of this module, such as 1.01.

There is no difference in using this module in version 1.01 or 2.0. No
interface has been changed. It&#39;s only the way to actually &#34;use&#34; the plugin,
that changed.


=head1 AUTHOR

Mark Stosberg C&lt;&lt; &lt;mark@summersault.com&gt; &gt;&gt;
...but largely modeled on HTDot plugin by Jason A. Crome. 

=head1 BUGS

Please report any bugs or feature requests to
C&lt;bug-cgi-application-plugin-htcompiled@rt.cpan.org&gt;, or through the web interface at
L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/NoAuth/ReportBug.html?Queue=CGI-Application-Plugin-HTCompiled">http://rt.cpan.org/NoAuth/ReportBug.html?Queue=CGI-Application-Plugin-HTCompiled</a></span>&gt;.
I will be notified, and then you&#39;ll automatically be notified of progress on
your bug as I make changes.

=head1 ACKNOWLEDGEMENTS

The usual crowd in #cgiapp on irc.perl.org 

=head1 SEE ALSO

L&lt;CGI::Application&gt;, L&lt;HTML::Template&gt;, L&lt;HTML::Template::Compiled&gt;,

=head1 COPYRIGHT &#38; LICENSE

Copyright 2005 Mark Stosberg, all rights reserved.

This program is free software; you can redistribute it and/or modify it
under the same terms as Perl itself.

=cut

1; # End of CGI::Application::Plugin::HTCompiled
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;26&nbsp;10:24:12&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;26&nbsp;10:26:04&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks Alexander, I&#39;ll see what I can do. 

Becoming a CPAN author is a great step for professional development. It
pushes you to think about quality, documentation and testing in new ways
due to the public nature of the work. 

There&#39;s are plenty of maintainers who would like help as way to get you
feet wet. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;11&nbsp;14:49:58&nbsp;2009</span>
    <span class="description">asb_ehb [...] yahoo.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mi. 26. Aug. 2009, 10:26:04, MARKSTOS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks Alexander, I&#39;ll see what I can do. 
&gt; 
&gt; Becoming a CPAN author is a great step for professional development. It
&gt; pushes you to think about quality, documentation and testing in new ways
&gt; due to the public nature of the work. 
&gt; 
&gt; There&#39;s are plenty of maintainers who would like help as way to get you
&gt; feet wet. 
</div>
Hi!

I set up my pause account PLUS I found a way to achieve backward
compatibility. How do I get the module maintainership? Do I register the
namespace or do you set up permissions for it?

Regards, Alex
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;12&nbsp;16:36:10&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space"> 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I set up my pause account PLUS I found a way to achieve backward
&gt; compatibility. How do I get the module maintainership? Do I register 
</div>the
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; namespace or do you set up permissions for it?
</div>
Alex,

I&#39;ve now made you an official co-maintainer, meaning that you can upload 
the next release, and that will be considered legitimate. I believe it 
should also mean that you get bug reports as they come in. I did this 
assuming that your PAUSE ID IS &#34;ASB&#34;. Let me know if it&#39;s something 
else. 

You should also be able to manage the bug queue, such as marking bugs as 
&#34;resolved&#34;. Give these changes 24 hours to propagate, and I think you 
are good to go. 

Good luck!

    Mark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;13&nbsp;17:49:54&nbsp;2009</span>
    <span class="description">ASB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Alex,
&gt; 
&gt; I&#39;ve now made you an official co-maintainer, meaning that you can 
</div>upload 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; the next release, and that will be considered legitimate. I believe 
</div>it 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; should also mean that you get bug reports as they come in. I did this 
&gt; assuming that your PAUSE ID IS &#34;ASB&#34;. Let me know if it&#39;s something 
&gt; else. 
&gt; 
&gt; You should also be able to manage the bug queue, such as marking bugs 
</div>as 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#34;resolved&#34;. Give these changes 24 hours to propagate, and I think you 
&gt; are good to go. 
&gt; 
&gt; Good luck!
&gt; 
&gt;     Mark
</div>
It&#39;s done now, although the release is marked as an ** UNAUTHORIZED 
RELEASE **.

I&#39;ll clean up the POD a bit for the next release - provided it works.

Best regards &#38; many thanks for your help and encouragement,
Alex
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;13&nbsp;17:49:56&nbsp;2009</span>
    <span class="description">ASB [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;14&nbsp;11:33:56&nbsp;2009</span>
    <span class="description">mark [...] summersault.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48086] set up html_tmpl_class</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 14 Oct 2009 11:33:39 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI-Application-Plugin-HTCompiled [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Stosberg &lt;mark [...] summersault.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It&#39;s done now, although the release is marked as an ** UNAUTHORIZED 
&gt; RELEASE **.
</div>
I see that&#39;s because of the permissions on &#34;TestApp2&#34;, which is a
namespace owned by JERLBAUM, but I am marked as a co-maintainer for.
I can&#39;t give you permissions for that name space. 

You could rename the test module to something unique, or see if there is
something else that can be done that would prevent it from being
indexed.

I&#39;m sorry for the hassle.

    Mark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;14&nbsp;11:33:56&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;09&nbsp;18:11:13&nbsp;2009</span>
    <span class="description">ASB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">It&#39;s done. tmpl_class is set up and backwards compatibility achieved.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;09&nbsp;18:11:17&nbsp;2009</span>
    <span class="description">ASB [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
