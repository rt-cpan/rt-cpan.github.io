<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #50503 for DBD-SQLite: Segfault with fts3</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #50503 for DBD-SQLite: Segfault with fts3</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-SQLite/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-SQLite/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-SQLite/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-SQLite/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-SQLite">DBD-SQLite CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">50503</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-SQLite/Active/">DBD-SQLite</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
logrado [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-10248-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
1.25</li>
<li>
1.26_04</li>
</ul>
    </td>
  </tr>
  <tr id="CF-10249-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.14    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;14&nbsp;17:51:06&nbsp;2009</span>
    <span class="description">logrado [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Segfault with fts3</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The attached script fails on 1.25 and 1.26_04.  It does one of three things:

- segfaults
- gives a double free error
- hangs without any cpu activity

Which of the above three it does depends on the exact script &#40;adding or
removing a print line can change its behavior&#41;, but it always fails.

Here are a couple sample error messages:
*** glibc detected *** double free or corruption &#40;!prev&#41;:
0x000000000083c480 ***
Abort &#40;core dumped&#41;

Segmentation fault &#40;core dumped&#41;

The database doesn&#39;t appear to be corrupted after the failure -- running
an integrity check with the sqlite3 command line binary says the db is okay.

The equivalent code without the fts3 module works fine.

I did a quick test with the DBD::SQLite packaged with the latest Ubuntu
&#40;1.14&#41;, and that version seems to work.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> fts3.pl</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl
#
#use lib &#39;/tmp/DBD-SQLite-1.26_04/blib/lib&#39;;
#use lib &#39;/tmp/DBD-SQLite-1.26_04/blib/arch&#39;;
use lib &#39;/home/ewing/tmp/DBD-SQLite-1.25/blib/lib&#39;;
use lib &#39;/home/ewing/tmp/DBD-SQLite-1.25/blib/arch&#39;;
use DBI;
use Data::Dumper;

my $DB = &#34;/tmp/test1.db&#34;;

sub insert_data {
    my&#40;$dbh, $inc_num, $date, $text&#41; = @_;
    # &#34;OR REPLACE&#34; isn&#39;t standard SQL, but it sure is useful
    my $sth = $dbh-&gt;prepare&#40;&#39;INSERT OR REPLACE INTO incident_fts &#40;incident_id, all_text&#41; VALUES &#40;?, ?&#41;&#39;&#41;;
    $sth-&gt;execute&#40;$inc_num, $text&#41; || die &#34;execute failed\n&#34;;
    $dbh-&gt;commit;
}

unlink $DB;
my $dbh = DBI-&gt;connect&#40;&#34;dbi:SQLite:$DB&#34;&#41;;
$dbh-&gt;{AutoCommit} = 0;
$dbh-&gt;{RaiseError} = 1;
$dbh-&gt;do&#40;&lt;&lt;EOF&#41;;
CREATE VIRTUAL TABLE incident_fts
USING fts3 &#40;incident_id VARCHAR, all_text VARCHAR, TOKENIZE simple&#41;
EOF
$dbh-&gt;commit;

insert_data&#40;$dbh, &#39;595&#39;, time&#40;&#41;, &#34;sample text foo bar baz&#34;&#41;;
insert_data&#40;$dbh, &#39;595&#39;, time&#40;&#41;, &#34;sample text foo bar baz&#34;&#41;;
insert_data&#40;$dbh, &#39;595&#39;, time&#40;&#41;, &#34;sample text foo bar baz&#34;&#41;;
insert_data&#40;$dbh, &#39;595&#39;, time&#40;&#41;, &#34;sample text foo bar baz&#34;&#41;;
$dbh-&gt;commit;

my $sth = $dbh-&gt;prepare&#40;&#34;SELECT * FROM incident_fts WHERE all_text MATCH &#39;bar&#39;&#34;&#41;;
$sth-&gt;execute&#40;&#41;;

while &#40;my $row =  $sth-&gt;fetchrow_hashref&#40;&#34;NAME_lc&#34;&#41;&#41; {
    print Dumper $row;
}

$dbh-&gt;commit;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;16&nbsp;19:07:39&nbsp;2009</span>
    <span class="description">DUNCAND [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is the first of a few copies of email messages that responded to the FTS3 issue on 
sqlite-users@sqlite.org or privately by a list member.  Mostly verbatim but trimmed for RT.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-------- Original Message --------
Subject: Re: [sqlite] test DBD::SQLite 1.26_05 - foreign keys!
Date: Thu, 15 Oct 2009 22:35:35 -0500
From: P Kishor &lt;punk.kish@gmail.com&gt;
Reply-To: punkish@eidesis.org,        General Discussion of SQLite Database &lt;sqlite-
users@sqlite.org&gt;
To: General Discussion of SQLite Database &lt;sqlite-users@sqlite.org&gt;
References: &lt;4AD6C3A7.5080702@darrenduncan.net&gt;

On Thu, Oct 15, 2009 at 1:39 AM, Darren Duncan &lt;darren@darrenduncan.net&gt; wrote:
<div class="message-stanza open">&gt; I am pleased to announce that DBD::SQLite &#40;Self Contained RDBMS in a Perl DBI
&gt; Driver&#41; version 1.26_05 has been released on CPAN &#40;by Adam Kennedy&#41;.
&gt;
&gt; P.S.  DBD::SQLite has at least 1 known bug, also in version 1.25, with regard to
&gt; full-text search &#40;FTS3&#41;; there is an included new failing test, which currently
&gt; is set to skip so the CPAN testers don&#39;t issue fails,
</div>
I tried to create a db with FTS3 and got the following

perl&#40;12546&#41; malloc: *** error for object 0x1eb160: Non-aligned pointer
being freed &#40;2&#41;
*** set a breakpoint in malloc_error_break to debug
perl&#40;12546&#41; malloc: *** error for object 0x870200: double free
*** set a breakpoint in malloc_error_break to debug
perl&#40;12546&#41; malloc: *** error for object 0x1ea668: Non-aligned pointer
being freed
*** set a breakpoint in malloc_error_break to debug
Segmentation fault

Is the above the FTS3 related error?

-- 
Puneet Kishor <span class="clickylink"><a target="new" rel="nofollow" href="http://www.punkish.org">http://www.punkish.org</a></span>
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;16&nbsp;19:07:40&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;16&nbsp;19:11:28&nbsp;2009</span>
    <span class="description">DUNCAND [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> DBD::SQLite with FTS3 finally works. here is how...</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is the second of a few copies of email messages that responded to the FTS3 issue on 
sqlite-users@sqlite.org or privately by a list member. Mostly verbatim but trimmed for RT.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-------- Original Message --------
Subject: [sqlite] DBD::SQLite with FTS3 finally works. here is how...
Date: Fri, 16 Oct 2009 00:23:56 -0500
From: P Kishor &lt;punk.kish@gmail.com&gt;
Reply-To: punkish@eidesis.org,        General Discussion of SQLite Database &lt;sqlite-
users@sqlite.org&gt;
To: General Discussion of SQLite Database &lt;sqlite-users@sqlite.org&gt;

I started with DBD::SQLite 1.26_05 and went back as much as
DBD::SQLite 1.21. Kept on getting segfaults. Any further back, and I
got DBD::SQLite 1.14 which bundled FTS2, so that wasn&#39;t good as well.

Finally, the amazing Audrey Tang to rescue. I downloaded the classic
DBD::SQLite::Amalgamation 3.6.12
&#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~audreyt/DBD-SQLite-Amalgamation-3.6.1.2/&#41;">http://search.cpan.org/~audreyt/DBD-SQLite-Amalgamation-3.6.1.2/&#41;</a></span>,
replaced the .c and .h files in it with those from the latest tarball
of original source 3.6.19, built it, and it works just fine, thank you
very much.

Of course, now my problem is that I have to somehow convince my shared
web host provider to also do the above rigmaroo or wait until the
default version from CPAN starts working again.

FTS3, in my personal view, is far more useful and important than
getting Foreign Keys support. That is because the latter can be
emulated in the app code, but the former can&#39;t. Will be grateful when
FTS3 is working again flawlessly in the publicly available CPAN
version.

-- 
Puneet Kishor <span class="clickylink"><a target="new" rel="nofollow" href="http://www.punkish.org">http://www.punkish.org</a></span>
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;16&nbsp;19:18:10&nbsp;2009</span>
    <span class="description">DUNCAND [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Dan Kennedy&#39;s patch for Segfault with fts3</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is the third of a few copies of email messages that responded to the FTS3 issue on 
sqlite-users@sqlite.org or privately by a list member. Mostly verbatim but trimmed for RT.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-------- Original Message --------
Subject: Re: [sqlite] test DBD::SQLite 1.26_05 - foreign keys!
Date: Sat, 17 Oct 2009 00:55:23 +0700
From: Dan Kennedy &lt;dan@sqlite.org&gt;
To: Darren Duncan &lt;darren@darrenduncan.net&gt;
References: &lt;4AD6C3A7.5080702@darrenduncan.net&gt; 
&lt;cdf6db500910152035k2dd074c5j3bcd6d88275649c8@mail.gmail.com&gt; 
&lt;4AD7F883.2070002@darrenduncan.net&gt;

On Oct 16, 2009, at 11:37 AM, Darren Duncan wrote:
<div class="message-stanza open">&gt; Looks similar.  This is the official bug report that we already  
&gt; have, which was
&gt; reported on Oct 14, and on which the failing/skipping test is based:
&gt;
&gt;   <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Public/Bug/Display.html?id=50503">http://rt.cpan.org/Public/Bug/Display.html?id=50503</a></span>
</div>
Hi Darren,

Can you attach this patch to the ticket for me please. With
some disclaimer that no testing was done apart from running
the fts3.pl script.

I can&#39;t figure out how to create a CPAN login...

Much obliged,
Dan.
</div></div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- 2/DBD-SQLite-1.26_04/dbdimp.c	2009-10-06 13:16:49.000000000 +0700
+++ DBD-SQLite-1.26_04/dbdimp.c	2009-10-17 00:43:18.000000000 +0700
@@ -154,12 +154,12 @@
         sqlite_db_rollback&#40;dbh, imp_dbh&#41;;
     }
 
-    while &#40; &#40;pStmt = sqlite3_next_stmt&#40;imp_dbh-&gt;db, 0&#41;&#41;!=0 &#41; {
-        sqlite3_finalize&#40;pStmt&#41;;
-    }
-
     if &#40;sqlite3_close&#40;imp_dbh-&gt;db&#41; == SQLITE_BUSY&#41; {
         /* active statements! */
+        while &#40; &#40;pStmt = sqlite3_next_stmt&#40;imp_dbh-&gt;db, 0&#41;&#41;!=0 &#41; {
+            sqlite3_finalize&#40;pStmt&#41;;
+        }
+        sqlite3_close&#40;imp_dbh-&gt;db&#41;;
         warn&#40;&#34;closing dbh with active statement handles&#34;&#41;;
     }
     imp_dbh-&gt;db = NULL;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;16&nbsp;19:54:07&nbsp;2009</span>
    <span class="description">DUNCAND [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I just tested Dan Kennedy&#39;s patch against blead &#40;same as 1.26_05 except for 50503 not 
skipping and with Dan&#39;s patch applied&#41;.  While it was successful in making t/rt_50503_fts3.t 
pass, it also caused several other DBD::SQLite tests to fail.  The results of the test suite with 
the patch applied are below.  So the patch was not committed into blead at this time.

----------

darren-duncans-power-mac-g4-3:DBD_SQLite darrenduncan$ make test
PERL_DL_NONLAZY=1 /Volumes/Spare/Perl/perl_5_10_1/bin/perl &#34;-
MExtUtils::Command::MM&#34; &#34;-e&#34; &#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
t/01_compile.t ........................... 1/4 # $DBI::VERSION=1.609
t/01_compile.t ........................... ok   
t/02_logon.t ............................. 1/19 # sqlite_version=3.6.19
t/02_logon.t ............................. ok     
t/03_create_table.t ...................... ok   
t/04_insert.t ............................ ok     
t/05_select.t ............................ ok     
t/06_tran.t .............................. ok   
t/07_error.t ............................. ok   
t/08_busy.t .............................. ok     
t/09_create_function.t ................... 1/55 
#   Failed test &#39;no warnings&#39;
#   at inc/Test/NoWarnings.pm line 45.
# There were 2 warning&#40;s&#41;
#       Previous test 27 &#39;SELECT noop&#40;1.0625&#41;&#39;
#       closing dbh with active statement handles at t/09_create_function.t line 122.
#  at t/09_create_function.t line 122
# 
# ----------
#       Previous test 54 &#39;SELECT noop&#40;1.0625&#41;&#39;
#       closing dbh with active statement handles at t/09_create_function.t line 122.
#  at t/09_create_function.t line 122
# 
# Looks like you failed 1 test of 55.
t/09_create_function.t ................... Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/55 subtests 
t/10_create_aggregate.t .................. ok     
t/12_unicode.t ........................... ok     
t/13_create_collation.t .................. ok     
t/14_progress_handler.t .................. ok     
t/15_ak_dbd.t ............................ ok     
t/16_column_info.t ....................... ok     
t/17_createdrop.t ........................ ok   
t/18_insertfetch.t ....................... ok     
t/19_bindparam.t ......................... ok     
t/20_blobs.t ............................. ok     
t/21_blobtext.t .......................... ok     
t/22_listfields.t ........................ ok     
t/23_nulls.t ............................. ok   
t/24_numrows.t ........................... ok     
t/25_chopblanks.t ........................ ok     
t/26_commit.t ............................ ok     
t/27_metadata.t .......................... ok     
t/28_schemachange.t ...................... ok   
t/29_cppcomments.t ....................... ok   
t/30_auto_rollback.t ..................... ok   
t/31_bind_weird_number_param.t ........... ok   
t/32_inactive_error.t .................... 1/4 closing dbh with active statement handles at 
t/32_inactive_error.t line 16.
t/32_inactive_error.t .................... ok   
t/33_non_latin_path.t .................... ok     
t/34_online_backup.t ..................... ok     
t/35_table_info.t ........................ ok     
t/36_hooks.t ............................. ok     
t/37_regexp.t ............................ ok     
t/rt_15186_prepcached.t .................. ok     
t/rt_21406_auto_finish.t ................. ok     
t/rt_25371_asymmetric_unicode.t .......... ok     
t/rt_25460_numeric_aggregate.t ........... ok     
t/rt_25924_user_defined_func_unicode.t ... ok     
t/rt_27553_prepared_cache_and_analyze.t .. ok   
t/rt_29058_group_by.t .................... ok   
t/rt_29629_sqlite_where_length.t ......... ok     
t/rt_31324_full_names.t .................. ok   
t/rt_32889_prepare_cached_reexecute.t .... 1/32 
#   Failed test &#39;Got a warning&#39;
#   at t/rt_32889_prepare_cached_reexecute.t line 110.
#          got: &#39;2&#39;
#     expected: &#39;1&#39;

#   Failed test &#39;No warnings&#39;
#   at t/rt_32889_prepare_cached_reexecute.t line 126.
#          got: &#39;3&#39;
#     expected: &#39;1&#39;

#   Failed test &#39;No warnings&#39;
#   at t/rt_32889_prepare_cached_reexecute.t line 138.
#          got: &#39;4&#39;
#     expected: &#39;1&#39;

#   Failed test &#39;No warnings&#39;
#   at t/rt_32889_prepare_cached_reexecute.t line 156.
#          got: &#39;5&#39;
#     expected: &#39;1&#39;

#   Failed test &#39;No warnings&#39;
#   at t/rt_32889_prepare_cached_reexecute.t line 177.
#          got: &#39;6&#39;
#     expected: &#39;1&#39;
# Looks like you failed 5 tests of 32.
t/rt_32889_prepare_cached_reexecute.t .... Dubious, test returned 5 &#40;wstat 1280, 0x500&#41;
Failed 5/32 subtests 
t/rt_36836_duplicate_key.t ............... ok   
t/rt_36838_unique_and_bus_error.t ........ ok   
t/rt_40594_nullable.t .................... ok   
t/rt_48393_debug_panic_with_commit.t ..... skipped: set 
$ENV{TEST_DBD_SQLITE_WITH_DEBUGGER} to enable this test
t/rt_50503_fts3.t ........................ ok   

Test Summary Report
-------------------
t/09_create_function.t                 &#40;Wstat: 256 Tests: 55 Failed: 1&#41;
  Failed test:  55
  Non-zero exit status: 1
t/rt_32889_prepare_cached_reexecute.t  &#40;Wstat: 1280 Tests: 32 Failed: 5&#41;
  Failed tests:  18, 20, 23, 27, 31
  Non-zero exit status: 5
Files=51, Tests=825, 23 wallclock secs &#40; 1.01 usr  0.61 sys + 10.79 cusr  2.21 csys = 14.62 
CPU&#41;
Result: FAIL
Failed 2/51 test programs. 6/825 subtests failed.
make: *** [test_dynamic] Error 255
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;17&nbsp;19:15:21&nbsp;2009</span>
    <span class="description">DUNCAND [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Update:  Dan Kennedy said by private email that:

  Roger put a ticket here that identifies the issue:

    <span class="clickylink"><a target="new" rel="nofollow" href="http://www.sqlite.org/src/info/1751725cd6">http://www.sqlite.org/src/info/1751725cd6</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;27&nbsp;02:10:00&nbsp;2009</span>
    <span class="description">DUNCAND [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">As of a few days ago, updates to DBD::SQLite in version control have made the test based on 
this ticket pass, without breaking any other tests.  The issue appears to be solved, but it is 
important to have further testing by any stakeholders.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;28&nbsp;19:11:21&nbsp;2009</span>
    <span class="description">logrado [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I grabbed the latest version from subversion, and now I am unable to
reproduce the bug.  So from my point of view, this is fixed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;29&nbsp;02:58:05&nbsp;2009</span>
    <span class="description">ishigaki [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Marked as resolved with 1.26_06

On Wed Oct 28 19:11:21 2009, sendai wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I grabbed the latest version from subversion, and now I am unable to
&gt; reproduce the bug.  So from my point of view, this is fixed.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;29&nbsp;02:58:07&nbsp;2009</span>
    <span class="description">ishigaki [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
