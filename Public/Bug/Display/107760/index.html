<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #107760 for Genealogy-Gedcom-Date: Re-writing Genealogy::Gedcom::Date</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #107760 for Genealogy-Gedcom-Date: Re-writing Genealogy::Gedcom::Date</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Genealogy-Gedcom-Date/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Genealogy-Gedcom-Date/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Genealogy-Gedcom-Date/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Genealogy-Gedcom-Date/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Genealogy-Gedcom-Date">Genealogy-Gedcom-Date CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">107760</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">deleted</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Genealogy-Gedcom-Date/Active/">Genealogy-Gedcom-Date</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ron [...] savage.net.au

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-240546-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-240547-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;13&nbsp;22:41:41&nbsp;2015</span>
    <span class="description">ron [...] savage.net.au -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re-writing Genealogy::Gedcom::Date</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 14 Oct 2015 13:49:30 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Genealogy-Gedcom-Date [...] rt.cpan.org, NHORNE [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ron Savage &lt;ron [...] savage.net.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi All

I&#39;ve re-written Genealogy::Gedcom::Date, and V 2.00 will be released 
next week. I&#39;m about to start updating the docs.

There are massive internal changes, and hence the V 2.00.

Gone are these methods: parse_approximate_date&#40;&#41;, parse_date_escape&#40;&#41;, 
parse_datetime&#40;&#41;, parse_date_period&#40;&#41;, parse_date_range&#40;&#41;, 
parse_date_value&#40;&#41;, parse_interpreted_date&#40;&#41;, debug&#40;&#41;, method_index&#40;&#41;, 
months_in_gregorian&#40;&#41; and style&#40;&#41;.

All calls are now thru parse&#40;&#41;. And calendar&#40;&#41; replaces and extends style&#40;&#41;.

So, why do this? Because I have finally used Marpa [1] to specify the 
BNF of dates as per the Gedcom V 5 spec.

However, the latter only includes a tiny number of calendars: french, 
gregorian, hebrew and julian. I&#39;ve decided to accept suggestions re 
other languages.

So, if you&#39;re interested in support for others, send me a list of the 
abbreviated month names in your language. Include the day month year 
order, and how dates BC are written.

E.g.: This is part of the new Marpa-style BNF [2]. Put very simply, 
&#39;::=&#39; declares a rule and &#39;~&#39; declares a lexeme.

french_date     ::= year_bc
                | year
                | french_r_month year
                | day french_r_month year

year_bc         ::= year bc

year            ::= number

bc              ~ &#39;bc&#39;
                | &#39;b.c.&#39;

day             ~ digit
                | digit digit

digit           ~ [0-9]

french_r_month  ~ &#39;vend&#39; | &#39;brum&#39; | &#39;frim&#39; | &#39;nivo&#39; | &#39;pluv&#39;
                | &#39;vent&#39; | &#39;germ&#39; | &#39;flor&#39; | &#39;prai&#39; | &#39;mess&#39;
                | &#39;ther&#39; | &#39;fruc&#39; | &#39;comp&#39;

number          ~ digit+

:discard        ~ whitespace
whitespace      ~ [\s]+

The special lexeme :discard hopefully explains why the definition of bc 
does not need &#39;B C&#39; and &#39;B. C.&#39;. And, no, discarding whitespace does 
/not/ affect recognition of tokens which have nothing but whitespace 
between them.

You don&#39;t have to provide BNF, just enough for me to construct the BNF.

As for existing code, I plan to release new versions of Gedcom::Date V 
0.90 and Genealogy::Gedcom::Date V 1.17 next week. But, no bugs will be 
fixed, ever, in those modules. The update will only say those modules 
are deprecated, and will be removed from CPAN some time around 
2017-01-01 &#40;sic&#41;. So you have 1+ year&#39;s notice. Of course the code will 
still be available via backpan [3].

If you don&#39;t want to upgrade, them let me know. I&#39;ll preserve 
Gedcom::Date on CPAN only if it&#39;s of monumental significance, but be 
warned, Genealogy::Gedcom::Date V 2.00 will be released, and eventually 
V 1.17 will be deleted.

[1] <span class="clickylink"><a target="new" rel="nofollow" href="http://savage.net.au/Marpa.html">http://savage.net.au/Marpa.html</a></span>. No, I did not write Marpa.

[2] Another warning! Marpa&#39;s BNF only bears a slight resemblance to the 
original BNF.

See <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/distribution/Marpa-R2/pod/Scanless/DSL.pod">https://metacpan.org/pod/distribution/Marpa-R2/pod/Scanless/DSL.pod</a></span> 
for an introduction to the vast array of new features.

See also <span class="clickylink"><a target="new" rel="nofollow" href="http://savage.net.au/Marpa/html/Marpa.R2.DSL.Structure.html">http://savage.net.au/Marpa/html/Marpa.R2.DSL.Structure.html</a></span>.

[3] <span class="clickylink"><a target="new" rel="nofollow" href="http://gitpan.integra.net/">http://gitpan.integra.net/</a></span>

-- 
Ron Savage - savage.net.au
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;13&nbsp;22:44:57&nbsp;2015</span>
    <span class="description">RSAVAGE [...] cpan.org -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
