<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #47315 for Locale-Maketext: [1.14 target - item #1] Lexicon object support</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #47315 for Locale-Maketext: [1.14 target - item #1] Lexicon object support</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Locale-Maketext/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Locale-Maketext/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Locale-Maketext/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Locale-Maketext/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="http://rt.perl.org/perlbug/">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Locale-Maketext">Locale-Maketext CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">47315</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Locale-Maketext/Active/">Locale-Maketext</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dmuey [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19280-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19281-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;24&nbsp;16:06:11&nbsp;2009</span>
    <span class="description">dmuey [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [1.14 target - item #1] Lexicon object support</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here is a patch that adds:
  - Lexicon object support
  - version bump to 1.13_83
  - change log entry
  - POD
  - test file &#40;in MANIFEST&#41;

All existing tests still pass, and new tests all pass.

As you can see it is very unobtrusive and should work fine with existing 
uses of Maketext.

Added overhead to non-object Lexicons &#40;i.e. all existing %lexicons&#41; is one 
call to ref&#40;&#41; to set a boolean and 2 or 3 if&#40;&#41;/unless&#40;&#41;s on said boolean.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> lex_obj.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -ruN /Users/dmuey/Downloads/Locale-Maketext-1.13_82/ChangeLog Locale-Maketext-1.13_83/ChangeLog
--- /Users/dmuey/Downloads/Locale-Maketext-1.13_82/ChangeLog	2009-06-23 21:29:36.000000000 -0500
+++ Locale-Maketext-1.13_83/ChangeLog	2009-06-24 14:10:26.000000000 -0500
@@ -1,5 +1,10 @@
 Revision history for Perl suite Locale::Maketext
 
+2009-06-24  Adriano Ferreira
+    * Development release 1.13_83
+    
+    added &#34;Object Lexicon&#34; support &#40;thanks Dan Muey&#41;
+
 2009-06-23  Adriano Ferreira
     * Development release 1.13_82
 
diff -ruN /Users/dmuey/Downloads/Locale-Maketext-1.13_82/MANIFEST Locale-Maketext-1.13_83/MANIFEST
--- /Users/dmuey/Downloads/Locale-Maketext-1.13_82/MANIFEST	2009-06-23 19:16:50.000000000 -0500
+++ Locale-Maketext-1.13_83/MANIFEST	2009-06-24 14:14:15.000000000 -0500
@@ -20,5 +20,6 @@
 t/60_super.t
 t/70_fail_auto.t
 t/90_utf8.t
+t/91_object_lexicons.t
 t/pod.t
 META.yml                                 Module meta-data &#40;added by MakeMaker&#41;
diff -ruN /Users/dmuey/Downloads/Locale-Maketext-1.13_82/lib/Locale/Maketext.pm Locale-Maketext-1.13_83/lib/Locale/Maketext.pm
--- /Users/dmuey/Downloads/Locale-Maketext-1.13_82/lib/Locale/Maketext.pm	2009-06-23 21:23:47.000000000 -0500
+++ Locale-Maketext-1.13_83/lib/Locale/Maketext.pm	2009-06-24 14:59:38.000000000 -0500
@@ -10,7 +10,7 @@
 BEGIN { unless&#40;defined &#38;DEBUG&#41; { *DEBUG = sub &#40;&#41; {0} } }
 # define the constant &#39;DEBUG&#39; at compile-time
 
-$VERSION = &#39;1.13_82&#39;;
+$VERSION = &#39;1.13_83&#39;;
 $VERSION = eval $VERSION;
 @ISA = &#40;&#41;;
 
@@ -190,11 +190,20 @@
         @{  $isa_scan{ref&#40;$handle&#41; || $handle} || $handle-&gt;_lex_refs  }
     &#41; {
         DEBUG and warn &#34;* Looking up \&#34;$phrase\&#34; in $h_r\n&#34;;
-        if&#40;exists $h_r-&gt;{$phrase}&#41; {
+           
+        my $h_r_is_obj = ref $h_r ne &#39;HASH&#39; ? 1 : 0; # tied&#40;&#41; hashes still ref&#40;&#41; to &#39;HASH&#39;&#41;
+        if &#40; $h_r_is_obj ? $h_r-&gt;phrase_exists&#40;$phrase&#41; : exists $h_r-&gt;{$phrase} &#41; {
             DEBUG and warn &#34;  Found \&#34;$phrase\&#34; in $h_r\n&#34;;
-            unless&#40;ref&#40;$value = $h_r-&gt;{$phrase}&#41;&#41; {
+            unless &#40; ref&#40; $value = $h_r_is_obj ? $h_r-&gt;get_phrase&#40;$phrase&#41; : $h_r-&gt;{$phrase} &#41; &#41; {
                 # Nonref means it&#39;s not yet compiled.  Compile and replace.
-                $value = $h_r-&gt;{$phrase} = $handle-&gt;_compile&#40;$value&#41;;
+
+                $value = $handle-&gt;_compile&#40;$value&#41;;
+                if &#40;$h_r_is_obj&#41; {
+                    $h_r-&gt;set_phrase&#40;$phrase, $value&#41;;
+                }
+                else {
+                    $h_r-&gt;{$phrase} = $value;
+                }
             }
             last;
         }
@@ -202,7 +211,14 @@
             # it&#39;s an auto lex, and this is an autoable key!
             DEBUG and warn &#34;  Automaking \&#34;$phrase\&#34; into $h_r\n&#34;;
 
-            $value = $h_r-&gt;{$phrase} = $handle-&gt;_compile&#40;$phrase&#41;;
+            $value = $handle-&gt;_compile&#40;$phrase&#41;;
+            if &#40;$h_r_is_obj&#41; {
+                $h_r-&gt;set_phrase&#40;$phrase, $value&#41;;
+            }
+            else {
+                $h_r-&gt;{$phrase} = $value;
+            }
+            
             last;
         }
         DEBUG&gt;1 and warn &#34;  Not found in $h_r, nor automakable\n&#34;;
diff -ruN /Users/dmuey/Downloads/Locale-Maketext-1.13_82/lib/Locale/Maketext.pod Locale-Maketext-1.13_83/lib/Locale/Maketext.pod
--- /Users/dmuey/Downloads/Locale-Maketext-1.13_82/lib/Locale/Maketext.pod	2009-06-20 14:49:46.000000000 -0500
+++ Locale-Maketext-1.13_83/lib/Locale/Maketext.pod	2009-06-24 14:57:41.000000000 -0500
@@ -856,6 +856,74 @@
 to nest bracket groups, but you are welcome to email me with
 convincing &#40;real-life&#41; arguments to the contrary.
 
+=head1 WORKING WITH COMPLEX LEXICON REQUIREMENTS
+
+Lets say you want more complex behavior than a normal hash can offer. You have a few options:
+
+=over 4
+
+=item * Inheritance
+
+You could use inheritance to implement, say, a sort of lexicon stack. 
+
+The problem is you can&#39;t have anything take precedence over the working locale&#39;s lexicon since it&#39;d mean a package would have to ISA itself in the middle of the list...
+
+=item * tied hashes 
+
+You could make your lexicon as complex as you like via a tied hash. 
+
+For example to implement a nice lexicon stack that allows adding/removing override and fallback hashes &#40;which can be normal hashes or tied hashes themselves&#41; as needed you could use the method described here: L&lt;Locale::Maketext::Utils/&#34;Tie::Hash::ReadonlyStack compat Lexicon&#34;&gt; 
+
+The rare problem with a tie&#40;&#41; is there are environments when a tie&#40;&#41; is undesirable for one reason or another.
+
+=item * %Lexicon object
+
+You can now make your %Lexicon an object that has or inherits 4 metheds that allow you the flexibility of a tie&#40;&#41; but in a non-tie object.
+
+By way of example:
+
+In package MyProj:
+
+    @MyProj::ISA = &#40;&#39;Locale::Maketext&#39;&#41;;
+
+    %MyProj::Lexicon &#40;
+        ... complex structure goes here ...
+    &#41;;
+    bless \%MyProj::Lexicon;
+  
+    sub phrase_exists {
+        my &#40;$self, $phrase&#41; = @_;    
+        ... existence done on complex structure goes here ...
+    }
+    
+    sub get_phrase {
+        my &#40;$self, $phrase&#41; = @_;   
+        ... getting value from complex structure goes here ...
+    }
+    
+    sub set_phrase {
+         my &#40;$self, $phrase, $compiled&#41; = @_;
+         ... setting value from complex structure goes here ...
+    }
+    
+    sub get_entry_count {
+        my &#40;$self&#41; = @_;
+        ... getting entry count from complex structure goes here ...
+    }
+
+in package MyProj::fr &#40;it&#39;s own object %Lexicon&#41;
+
+    @MyProj::fr::ISA = &#40;&#39;MyProj&#39;&#41;;
+    
+    %MyProj::fr:Lexicon &#40;
+        ... complex structure for french goes here ...
+    &#41;;
+    bless \%MyProj::fr::Lexicon;
+    
+    # object metheds are inherited from ISA
+
+=back
+
 =head1 AUTO LEXICONS
 
 If maketext goes to look in an individual %Lexicon for an entry
diff -ruN /Users/dmuey/Downloads/Locale-Maketext-1.13_82/t/91_object_lexicons.t Locale-Maketext-1.13_83/t/91_object_lexicons.t
--- /Users/dmuey/Downloads/Locale-Maketext-1.13_82/t/91_object_lexicons.t	1969-12-31 18:00:00.000000000 -0600
+++ Locale-Maketext-1.13_83/t/91_object_lexicons.t	2009-06-24 14:57:20.000000000 -0500
@@ -0,0 +1,105 @@
+use Test::More tests =&gt; 18;
+
+BEGIN { 
+    use_ok&#40;&#39;Locale::Maketext&#39;&#41;;
+};
+
+{
+    package TestApp::Localize;
+    our @ISA = &#40;&#39;Locale::Maketext&#39;&#41;;
+    our %Lexicon = &#40;
+        &#39;lex&#39; =&gt; {
+            &#39;in parent&#39; =&gt; &#39;in parent&#39;, 
+            &#39;both&#39; =&gt; &#39;in parent&#39;,
+        },
+    &#41;;
+    
+    bless \%Lexicon;
+
+    sub phrase_exists {
+        my &#40;$self, $phrase&#41; = @_;    
+        Test::More::diag&#40;&#34;in phrase_exists&#40;&#41;&#34;&#41;;
+        exists $self-&gt;{&#39;lex&#39;}{$phrase};
+    }
+
+    sub get_phrase {
+        my &#40;$self, $phrase&#41; = @_;   
+        Test::More::diag&#40;&#34;in get_phrase&#40;&#41;&#34;&#41;;
+        $self-&gt;{&#39;lex&#39;}{$phrase}
+    }
+
+    sub set_phrase {
+        my &#40;$self, $phrase, $value&#41; = @_;
+        Test::More::diag&#40;&#34;in set_phrase&#40;&#41;&#34;&#41;;
+        $self-&gt;{&#39;lex&#39;}{$phrase} = $value;
+    }
+
+    sub get_entry_count {
+        my &#40;$self&#41; = @_;
+        return scalar&#40;keys %{$self-&gt;{&#39;lex&#39;}}&#41;;
+    }
+}
+
+{
+    package TestApp::Localize::en;
+    our @ISA = &#40;&#39;TestApp::Localize&#39;&#41;;
+    
+    no warnings &#39;once&#39;;
+    *TestApp::Localize::en::Lexicon = *TestApp::Localize::Lexicon;   
+}
+
+{
+  package TestApp::Localize::i_obj;
+  our @ISA = &#40;&#39;TestApp::Localize&#39;&#41;;
+  our %Lexicon = &#40;
+      &#39;lex&#39; =&gt; {
+          &#39;both&#39; =&gt; &#39;in obj&#39;,
+          &#39;in child o&#39; =&gt; &#39;in child o&#39;, 
+      },
+  &#41;;
+  bless \%Lexicon;
+}
+{
+  package TestApp::Localize::i_hash;
+  our @ISA = &#40;&#39;TestApp::Localize&#39;&#41;;
+  our %Lexicon = &#40;
+      &#39;both&#39; =&gt; &#39;in child&#39;,
+      &#39;in child&#39; =&gt; &#39;in child&#39;, 
+  &#41;;
+}
+
+
+my $i_hash = TestApp::Localize-&gt;get_handle&#40;&#39;i_hash&#39;&#41;;
+my $i_obj = TestApp::Localize-&gt;get_handle&#40;&#39;i_obj&#39;&#41;;
+my $en = TestApp::Localize-&gt;get_handle&#40;&#39;en&#39;&#41;;
+my $base = TestApp::Localize-&gt;get_handle&#40;&#41;;
+
+ok&#40;$TestApp::Localize::Lexicon{&#39;lex&#39;}-&gt;{&#39;both&#39;} eq &#39;in parent&#39;, &#39;lex obj pre-compile string&#39;&#41;;
+ok&#40;!ref $TestApp::Localize::Lexicon{&#39;lex&#39;}-&gt;{&#39;both&#39;}, &#39;lex obj pre-compile ref&#39;&#41;;
+ok&#40;$base-&gt;maketext&#40;&#39;both&#39;&#41; eq &#39;in parent&#39;, &#39;base multi&#39;&#41;;
+ok&#40;${$TestApp::Localize::Lexicon{&#39;lex&#39;}-&gt;{&#39;both&#39;}} eq &#39;in parent&#39;, &#39;lex obj pre-compile string&#39;&#41;;
+ok&#40;ref $TestApp::Localize::Lexicon{&#39;lex&#39;}-&gt;{&#39;both&#39;} eq &#39;SCALAR&#39;, &#39;lex obj pre-compile ref&#39;&#41;;
+
+ok&#40;$base-&gt;maketext&#40;&#39;in parent&#39;&#41; eq &#39;in parent&#39;, &#39;base only&#39;&#41;;
+
+ok&#40;$en-&gt;maketext&#40;&#39;both&#39;&#41; eq &#39;in parent&#39;, &#39;base alias multi&#39;&#41;;
+ok&#40;$en-&gt;maketext&#40;&#39;in parent&#39;&#41; eq &#39;in parent&#39;, &#39;base alias only&#39;&#41;;
+
+ok&#40;$i_hash-&gt;maketext&#40;&#39;in child&#39;&#41; eq &#39;in child&#39;, &#39;child only&#39;&#41;;
+ok&#40;$i_hash-&gt;maketext&#40;&#39;both&#39;&#41; eq &#39;in child&#39;, &#39;child multi&#39;&#41;;
+ok&#40;$i_hash-&gt;maketext&#40;&#39;in parent&#39;&#41; eq &#39;in parent&#39;, &#39;fall back to parent&#39;&#41;;
+
+ok&#40;$i_obj-&gt;maketext&#40;&#39;in child o&#39;&#41; eq &#39;in child o&#39;, &#39;child only&#39;&#41;;
+ok&#40;$i_obj-&gt;maketext&#40;&#39;both&#39;&#41; eq &#39;in obj&#39;, &#39;child multi&#39;&#41;;
+ok&#40;$i_obj-&gt;maketext&#40;&#39;in parent&#39;&#41; eq &#39;in parent&#39;, &#39;fall back to parent&#39;&#41;;
+
+for my $class qw&#40;TestApp::Localize::i_hash TestApp::Localize::en TestApp::Localize&#41; {
+    # normal hash, ISA w/ parent that is object, is object
+
+    ok&#40; 
+        &#34;concat &#34; .  &#40;ref \%{ $class . &#39;::Lexicon&#39; } ne &#39;HASH&#39; ? *{ $class . &#39;::Lexicon&#39; }{&#39;HASH&#39;}-&gt;get_entry_count&#40;&#41; : scalar&#40; keys %{ $class . &#39;::Lexicon&#39; } &#41; &#41; . &#34; concat&#34;
+        eq 
+        &#39;concat 2 concat&#39;,
+        &#34;object get_entry_count&#40;&#41; in debug message matches normal hash &#40;$class&#41;&#34;
+    &#41;;
+}
\ No newline at end of file
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;27&nbsp;13:14:46&nbsp;2009</span>
    <span class="description">dmuey [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">normal hash or tied hash + rt 46738 == everything an obj lex would cover but w/ out the 
overhead
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;27&nbsp;13:14:47&nbsp;2009</span>
    <span class="description">dmuey [...] cpan.org -  Status changed from &#39;new&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
