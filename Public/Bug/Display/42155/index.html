<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #42155 for ExtUtils-CBuilder: Support VMS in Unix compatibilty mode.</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #42155 for ExtUtils-CBuilder: Support VMS in Unix compatibilty mode.</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=ExtUtils-CBuilder">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=ExtUtils-CBuilder">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=ExtUtils-CBuilder">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=ExtUtils-CBuilder">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please email the <a href="mailto:perlbug@perl.org">preferred bug tracker</a> to report your issue.</div>
</p>
<p>
<div>Please visit the <a href="http://rt.perl.org/rt3/">preferred bug tracker</a> to report your issue.</div>
</p>
</div>


<div class="error">
  <div class="titlebox error " id="">
  <div class="titlebox-title">
    <span class="left">Queue is disabled</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--error----UXVldWUgaXMgZGlzYWJsZWQ_---0">


This queue is disabled and you may not create new tickets in it.  Disabled queues are usually because the distribution was merged with another or changed names.  Sometimes they are the end result of a bad autocreate from PAUSE data before anyone noticed.
    <hr class="clear" />
  </div>
</div>




</div>


<h3>Maintainer&#40;s&#41;&#39; notes</h3>

<p>ExtUtils::CBuilder is now maintained by the Perl 5 core.  Please report bugs via the 'perlbug' tool included with Perl and do not add new tickets here.</p>



<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">42155</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">new</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=ExtUtils-CBuilder">ExtUtils-CBuilder</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
wb8tyw [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-12462-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.24    </td>
  </tr>
  <tr id="CF-12463-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




cbuilder.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/550296/277137/cbuilder.patch">
Sun Jan 04 18:57:09 2009 (3.2k) by malmberg [...] Encompasserve.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=42155">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-550296" href="/Public/Bug/Display.html?id=42155#txn-550296">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;04&nbsp;18:57:09&nbsp;2009</span>
    <span class="description">malmberg [...] Encompasserve.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Support VMS in Unix compatibilty mode.</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/550296/277134/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/277134">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 108b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fix VMS.pm to support the Unix compatible mode.

01-basic.t and 02-link.t were leaving behind listing files.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> cbuilder.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/550296/277137/cbuilder.patch">Download cbuilder.patch</a><br />
<span class="downloadcontenttype">text/x-diff 3.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- /rsync_root/perl/lib/ExtUtils/CBuilder/Platform/VMS.pm	Sun Sep  7 05:58:41 2008
+++ lib/ExtUtils/CBuilder/Platform/VMS.pm	Sat Dec 20 00:01:49 2008
@@ -35,6 +35,43 @@
           . &#39;&#41;&#39;&#41;;
 }
 
+sub compile {
+    my &#40;$self, %args&#41; = @_;
+
+    die &#34;Missing &#39;source&#39; argument to compile&#40;&#41;&#34;
+        unless defined $args{source};
+
+    my $source = $args{source};
+
+    # Force the filename to VMS format.
+    $source = VMS::Filespec::vmsify&#40;$source&#41; if $source =~ m#/#;
+
+    # rmsexpand makes sure that the filespec fits the DCL token limitations.
+    if &#40;length&#40;$source&#41; &gt; 200&#41; {
+        $source = VMS::Filespec::rmsexpand&#40;$source&#41;;
+    }
+
+    $args{source} = $source;
+
+    return $self-&gt;SUPER::compile&#40;%args&#41;;
+}
+
+sub object_file {
+    my &#40;$self, $filename&#41; = @_;
+
+    # Force the filename to VMS format.
+    $filename = VMS::Filespec::vmsify&#40;$filename&#41; if $filename =~ m#/#;
+
+    # rmsexpand makes sure that the filespec fits the DCL token limitations.
+    if &#40;length&#40;$filename&#41; &gt; 200&#41; {
+        $filename = VMS::Filespec::rmsexpand&#40;$filename&#41;;
+    }
+
+    # File name, minus the suffix
+    &#40;my $file_base = $filename&#41; =~ s/\.[^.]+$//;
+    return &#34;$file_base$self-&gt;{config}{obj_ext}&#34;;
+}
+
 sub arg_include_dirs {
   my &#40;$self, @dirs&#41; = @_;
 
@@ -47,6 +84,20 @@
   return &#40;&#39;/include=&#40;&#39; . join&#40;&#39;,&#39;, @dirs&#41; . &#39;&#41;&#39;&#41;;
 }
 
+sub perl_src {
+    my $self = shift;
+
+    my $source = $self-&gt;SUPER::perl_src;
+
+    $source = VMS::Filespec::vmspath&#40;$source&#41; if $source =~ m#/#;
+
+    # rmsexpand makes sure that the filespec fits the DCL token limitations.
+    if &#40;length&#40;$source&#41; &gt; 200&#41; {
+        $source = VMS::Filespec::rmsexpand&#40;$source&#41;;
+    }
+    return $source;
+}
+
 sub _do_link {
   my &#40;$self, $type, %args&#41; = @_;
   
@@ -76,6 +127,8 @@
     for my $lib &#40;@optlibs&#41; {print $opt_fh &#34;$lib\n&#34; if length $lib }
     close $opt_fh;
 
+    $self-&gt;add_to_cleanup&#40;$optfile&#41;;
+
     $objects-&gt;[-1] .= &#39;,&#39;;
     push @$objects, $optfile . &#39;/OPTIONS,&#39;;
 
@@ -289,6 +342,22 @@
   $ldlib = $crtlstr ? &#34;$lib $crtlstr&#34; : $lib;
   warn &#34;Result:\n\tEXTRALIBS: $lib\n\tLDLOADLIBS: $ldlib\n&#34; if $verbose;
   wantarray ? &#40;$lib, &#39;&#39;, $ldlib, &#39;&#39;, &#40;$give_libs ? \@flibs : &#40;&#41;&#41;&#41; : $lib;
+}
+
+sub perl_inc {
+    my $self = shift;
+
+    my $inc_dir = $self-&gt;SUPER::perl_inc;
+
+    # Force the filename to VMS format.
+    $inc_dir = VMS::Filespec::vmsify&#40;$inc_dir&#41; if $inc_dir =~ m#/#;
+
+    # rmsexpand makes sure that the filespec fits the DCL token limitations.
+    if &#40;length&#40;$inc_dir&#41; &gt; 200&#41; {
+        $inc_dir = VMS::Filespec::rmsexpand&#40;$inc_dir&#41;;
+    }
+
+    return $inc_dir;
 }
 
 1;
--- /rsync_root/perl/lib/ExtUtils/Cbuilder/t/01-basic.t	Tue Apr 22 04:43:21 2008
+++ lib/ExtUtils/CBuilder/t/01-basic.t	Sat Dec 20 00:11:24 2008
@@ -52,6 +52,13 @@
   1 while unlink;
 }
 
+# Clean up the VMS listing files
+if &#40;$^O eq &#39;VMS&#39;&#41; {
+    my $listfile = &#39;COMPILET.LIS&#39;;
+    1 while unlink $listfile;
+}
+
+
 my @words = $b-&gt;split_like_shell&#40;&#39; foo bar&#39;&#41;;
 
 skip&#40;
--- /rsync_root/perl/lib/ExtUtils/Cbuilder/t/02-link.t	Tue Jun 13 14:29:14 2006
+++ lib/ExtUtils/CBuilder/t/02-link.t	Sat Dec 20 00:21:25 2008
@@ -68,6 +68,12 @@
   1 while unlink;
 }
 
+# Clean up the VMS listing files
+if &#40;$^O eq &#39;VMS&#39;&#41; {
+    my $listfile = &#39;COMPILET.LIS&#39;;
+    1 while unlink $listfile;
+}
+
 sub my_system {
   my $cmd = shift;
   if &#40;$^O eq &#39;VMS&#39;&#41; {
</div></div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.260723</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
