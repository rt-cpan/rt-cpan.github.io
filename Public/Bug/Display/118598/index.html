<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #118598 for Net-DNS: Serious Makefile.PL issues</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #118598 for Net-DNS: Serious Makefile.PL issues</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-DNS/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-DNS">Net-DNS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">118598</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-DNS/Active/">Net-DNS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ether [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
DBOOK [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-22454-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-22455-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;02&nbsp;20:50:51&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Serious Makefile.PL issues</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I ran into <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=108908">https://rt.cpan.org/Ticket/Display.html?id=108908</a></span> while upgrading a suite of machines running in the cloud.  Thankfully the installation broke and halted before the systems were rotated into service and brought our systems down, but this highlights that there are still serious issues outstanding with the Makefile.PL.

While investigating and writing a local patch, I also discovered:

- strict, warnings are not active in Makefile.PL, allowing other issues to slip through unnoticed;
- modules are used as barewords without quoting;
- versions are used as numbers rather than strings, leading to a loss of trailing zeros &#40;which can sometimes be significant&#41;;
- WriteMakefile&#40;&#41; is called more than once, meaning all local overrides &#40;such as the ones you already have in place, to MY::postamble, and the one I had to add, to MY::install&#41; would not take effect

Is there a git repository against which I can write and submit patches?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;02&nbsp;20:52:49&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Also, you seem to be making a hodge-podge attempt to add optional prereqs &#40;this seems to be the purpose of calling WriteMakefile&#40;&#41; twice, although there are no comments providing enlightenment&#41;, but this is done completely wrong. There is actually a proper way to declare optional prereqs to ExtUtils::MakeMaker which I can also fix.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;03&nbsp;06:45:47&nbsp;2016</span>
    <span class="description">NLNETLABS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Nov 02 20:50:51 2016, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Is there a git repository against which I can write and submit
&gt; patches?
</div>
We work on a subversion repository:

<span class="clickylink"><a target="new" rel="nofollow" href="https://www.net-dns.org/svn/net-dns/trunk/">https://www.net-dns.org/svn/net-dns/trunk/</a></span>

For my own convenience I do have a git version of this repository.  I can push it to my own github account if you want to, but don&#39;t expect it to stay there or keep in sync.

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/wtoorop/Net-DNS">https://github.com/wtoorop/Net-DNS</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;03&nbsp;06:45:50&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;05&nbsp;17:02:26&nbsp;2016</span>
    <span class="description">rwfranks [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rwfranks [...] acm.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Nov 02 20:50:51 2016, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I ran into <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=108908">https://rt.cpan.org/Ticket/Display.html?id=108908</a></span> while
&gt; upgrading a suite of machines running in the cloud.  Thankfully the
&gt; installation broke and halted before the systems were rotated into
&gt; service and brought our systems down, but this highlights that there
&gt; are still serious issues outstanding with the Makefile.PL.
&gt; 
&gt; While investigating and writing a local patch, I also discovered:
&gt; 
&gt; - strict, warnings are not active in Makefile.PL, allowing other
&gt; issues to slip through unnoticed;
&gt; - modules are used as barewords without quoting;
</div>
I have no quarrel with making this strict.

Warnings presupposes perl 5.6 which is a tighter constraint than the declared MIN_PERL_VERSION =&gt; 5.004_04.

An occasional perl -W Makefile.PL is also considerably more effective, unconditionally turning on all warnings throughout &#40;including ExtUtils::MakeMaker and its dependencies&#41;.



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; - versions are used as numbers rather than strings, leading to a loss
&gt; of trailing zeros &#40;which can sometimes be significant&#41;;
</div>
The documentation for Exporter clearly states that a number is required, and I quote:

  Module Version Checking
    The Exporter module will convert an attempt to import a number from a
    module into a call to &#34;$module_name-&gt;VERSION&#40;$value&#41;&#34;. This can be used to
    validate that the version of the module being used is greater than or
    equal to the required version.

    For historical reasons, Exporter supplies a &#34;require_version&#34; method that
    simply delegates to &#34;VERSION&#34;. Originally, before &#34;UNIVERSAL::VERSION&#34;
    existed, Exporter would call &#34;require_version&#34;.

    Since the &#34;UNIVERSAL::VERSION&#34; method treats the $VERSION number as a
    simple numeric value it will regard version 1.10 as lower than 1.9. For
    this reason it is strongly recommended that you use numbers with at least
    two decimal places, e.g., 1.09.



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; - WriteMakefile&#40;&#41; is called more than once, meaning all local
&gt; overrides &#40;such as the ones you already have in place, to
&gt; MY::postamble, and the one I had to add, to MY::install&#41; would not
&gt; take effect
</div>The horrible reason for that has now gone away and it was removed in 1.06_02 


If we are going to build on the RT#108908 discussion, perhaps we need to recognise three different &#40;and in some ways incompatible&#41; groups of users.

1&#41; Hands-on users who can be expected to read and act upon warnings and error messages.

2&#41; Automated testers who can reasonably demand that Makefile.PL will always yield a workable Makefile.  This group never does &#34;make install&#34;. A hard stop at &#34;perl Makefile.PL&#34; time is unacceptable.

3&#41; Minimally supervised scripted installers who demand an informative message and hard stop if the upgrade package will be hidden by the existing version.  Human intervention would then be required to complete the process.

It was clear from the discussion that modifying the installation environment or automated deletion of conflicting packages would be viewed by some as hostile acts.

The simplest improvement would seem to be a modified Makefile with a dummy &#34;install&#34; target which spits out an appropriate message and aborts the process.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;07&nbsp;18:33:26&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2016-11-05 14:02:26, rwfranks@acm.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Nov 02 20:50:51 2016, ETHER wrote:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; - versions are used as numbers rather than strings, leading to a loss
&gt; &gt; of trailing zeros &#40;which can sometimes be significant&#41;;
</div>&gt; 
&gt; The documentation for Exporter clearly states that a number is
&gt; required, and I quote:
&gt; 
&gt; Module Version Checking
&gt;   The Exporter module will convert an attempt to import a number from
&gt; a
&gt;   module into a call to &#34;$module_name-&gt;VERSION&#40;$value&#41;&#34;. This can be
&gt; used to
&gt;   validate that the version of the module being used is greater than
&gt; or
&gt;   equal to the required version.
&gt; 
&gt; For historical reasons, Exporter supplies a &#34;require_version&#34; method
&gt; that
&gt; simply delegates to &#34;VERSION&#34;. Originally, before &#34;UNIVERSAL::VERSION&#34;
&gt; existed, Exporter would call &#34;require_version&#34;.
&gt; 
&gt; Since the &#34;UNIVERSAL::VERSION&#34; method treats the $VERSION number as a
&gt; simple numeric value it will regard version 1.10 as lower than 1.9.
&gt; For
&gt; this reason it is strongly recommended that you use numbers with at
&gt; least
&gt; two decimal places, e.g., 1.09.
</div>
You&#39;re misinterpreting the documentation. It&#39;s saying that the value must be
able to be evaluated numerically, not that it is a literal number without
quotes.  ExtUtils::MakeMaker preserves the stringy nature of versions that are
passed to it, so for example &#34;Foo&#34; =&gt; &#34;1.90&#34; will show up in META.json as
&#34;Foo&#34;:&#34;1.90&#34;, but &#34;Foo&#34; =&gt; 1.90 &#40;note, this is a literal number&#41; will lose its
trailing zero, showing up in META.json as &#34;Foo&#34;:&#34;1.9&#34;. The numbers are
numerically identical, but the difference can occasionally confuse humans or
static inspection tools.

Further information about versions can be found in CPAN::Meta::Spec --
<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/CPAN::Meta::Spec#VERSION-NUMBERS">https://metacpan.org/pod/CPAN::Meta::Spec#VERSION-NUMBERS</a></span>.


Thanks for the github repo -- I&#39;ll use it as the basis for a few patches that
I&#39;ll send this week!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;08&nbsp;14:50:32&nbsp;2016</span>
    <span class="description">rwfranks [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rwfranks [...] acm.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Nov 07 18:33:26 2016, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2016-11-05 14:02:26, rwfranks@acm.org wrote:
<div class="message-stanza open">&gt; &gt; On Wed Nov 02 20:50:51 2016, ETHER wrote:
</div>&gt; 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; - versions are used as numbers rather than strings, leading to a
&gt; &gt; &gt; loss
&gt; &gt; &gt; of trailing zeros &#40;which can sometimes be significant&#41;;
</div>&gt; &gt;
&gt; &gt; The documentation for Exporter clearly states that a number is
&gt; &gt; required, and I quote:
&gt; &gt;
&gt; &gt; Module Version Checking
&gt; &gt;   The Exporter module will convert an attempt to import a number from
&gt; &gt; a
&gt; &gt;   module into a call to &#34;$module_name-&gt;VERSION&#40;$value&#41;&#34;. This can be
&gt; &gt; used to
&gt; &gt;   validate that the version of the module being used is greater than
&gt; &gt; or
&gt; &gt;   equal to the required version.
&gt; &gt;
&gt; &gt; For historical reasons, Exporter supplies a &#34;require_version&#34; method
&gt; &gt; that
&gt; &gt; simply delegates to &#34;VERSION&#34;. Originally, before
&gt; &gt; &#34;UNIVERSAL::VERSION&#34;
&gt; &gt; existed, Exporter would call &#34;require_version&#34;.
&gt; &gt;
&gt; &gt; Since the &#34;UNIVERSAL::VERSION&#34; method treats the $VERSION number as a
&gt; &gt; simple numeric value it will regard version 1.10 as lower than 1.9.
&gt; &gt; For
&gt; &gt; this reason it is strongly recommended that you use numbers with at
&gt; &gt; least
&gt; &gt; two decimal places, e.g., 1.09.
</div>&gt; 
&gt; You&#39;re misinterpreting the documentation. It&#39;s saying that the value
&gt; must be
&gt; able to be evaluated numerically, not that it is a literal number
&gt; without
&gt; quotes.
</div>
I am not misinterpreting the documentation, which says what happens if I import a number.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ExtUtils::MakeMaker preserves the stringy nature of versions
&gt; that are
&gt; passed to it, so for example &#34;Foo&#34; =&gt; &#34;1.90&#34; will show up in META.json
&gt; as
&gt; &#34;Foo&#34;:&#34;1.90&#34;, but &#34;Foo&#34; =&gt; 1.90 &#40;note, this is a literal number&#41; will
&gt; lose its
&gt; trailing zero, showing up in META.json as &#34;Foo&#34;:&#34;1.9&#34;. The numbers are
&gt; numerically identical, but the difference can occasionally confuse
&gt; humans or
&gt; static inspection tools.
</div>
We are supplying a number which ends up unmolested in $required_version on one side of the numerical comparison.
ExtUtils::MakeMaker provides the other side in $pr_version which it obtains from parsing the module source.

This is different from Exporter&#39;s import method which &#40;indirectly&#41; uses the $VERSION variable as is.

This comes unstuck with $VERSION = &#34;1.06_04&#34;, which is overcome by doing $VERSION = eval $VERSION in DNS.pm;

Both Net::DNS and Net::DNS::SEC are internally very picky about versions of dependencies to steer round bugs and lack of required features.

By using numbers throughout, we are ensuring that there is little risk of a discrepancy between the versions that MakeMaker lets through and the version comparison done by the UNIVERSAL::VERSION method which underpins Exporter&#39;s import&#40;&#41;.

All of this has been proven to work on all perls from 5.004_04 to 5.25.6 so it will not be changed without a compelling reason and after a great deal of thought.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Further information about versions can be found in CPAN::Meta::Spec --
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/CPAN::Meta::Spec#VERSION-NUMBERS">https://metacpan.org/pod/CPAN::Meta::Spec#VERSION-NUMBERS</a></span>.
&gt; 
&gt; 
&gt; Thanks for the github repo -- I&#39;ll use it as the basis for a few
&gt; patches that
&gt; I&#39;ll send this week!
</div>

There is a batch of patches already in the pipe.

The Makefile now blows out at &#34;make install&#34; time when it detects an incompatible old version in the perl library.  Please let us know if this meets your need, or requires further work.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;08&nbsp;15:16:22&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2016-11-08 11:50:32, rwfranks@acm.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Nov 07 18:33:26 2016, ETHER wrote:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; By using numbers throughout, we are ensuring that there is little risk
&gt; of a discrepancy between the versions that MakeMaker lets through and
&gt; the version comparison done by the UNIVERSAL::VERSION method which
&gt; underpins Exporter&#39;s import&#40;&#41;.
&gt; 
&gt; All of this has been proven to work on all perls from 5.004_04 to
&gt; 5.25.6 so it will not be changed without a compelling reason and after
&gt; a great deal of thought.
</div>
All I&#39;m saying is that versions used in PREREQ_PM &#40;etc&#41; in Makefile.PL should be declared with quotes, rather than as bare numbers, and the same for $VERSION assignments in modules.

That is, this:

    # Makefile.PL
    ... PREREQ_PM =&gt; { &#39;Some::Module&#39; =&gt; &#39;1.90&#39; },

    # Foo.pm:
    our $VERSION = &#39;1.90&#39;;

is better than this:

    # Makefile.PL
    ... PREREQ_PM =&gt; { &#39;Some::Module&#39; =&gt; 1.90 },

    # Foo.pm:
    our $VERSION = 1.90;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;08&nbsp;15:23:43&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2016-11-08 11:50:32, rwfranks@acm.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There is a batch of patches already in the pipe.
&gt; 
&gt; The Makefile now blows out at &#34;make install&#34; time when it detects an
&gt; incompatible old version in the perl library.  Please let us know if
&gt; this meets your need, or requires further work.
</div>
It&#39;s definitely better than what&#39;s in the current release.

However, even better still would be to either delete the old installed files
in $&#40;DESTINSTALLSITEARCH&#41;, or to switch to installing the new files into
$&#40;DESTINSTALLSITEARCH&#41; &#40;which will overwrite the old ones&#41;.  The latter might
be preferrable as it removes the chance that other files &#40;not belonging to
this distribution&#41; might be inadvertently removed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;09&nbsp;09:24:10&nbsp;2016</span>
    <span class="description">rwfranks [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rwfranks [...] acm.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Nov 08 15:23:43 2016, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2016-11-08 11:50:32, rwfranks@acm.org wrote:
<div class="message-stanza open">&gt; &gt;
&gt; &gt; The Makefile now blows out at &#34;make install&#34; time when it detects an
&gt; &gt; incompatible old version in the perl library.  Please let us know if
&gt; &gt; this meets your need, or requires further work.
</div>&gt; 
&gt; It&#39;s definitely better than what&#39;s in the current release.
&gt;
</div>
OK, that is where we go in 1.07, subject as always to no ill effects.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; However, even better still would be to either delete the old installed
&gt; files in $&#40;DESTINSTALLSITEARCH&#41;
</div>
Luis Muñoz characterised unilateral modification of the execution environment as a hostile act. &#40;RT#108908&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ... or to switch to installing the new files into
&gt; $&#40;DESTINSTALLSITEARCH&#41; &#40;which will overwrite the old ones&#41;.  The
&gt; latter might
&gt; be preferrable as it removes the chance that other files &#40;not
&gt; belonging to
&gt; this distribution&#41; might be inadvertently removed.
</div>
That may seem an attractive way to get past 1.01, but subsequent upgrades are then hampered by the newer version now in the &#34;wrong&#34; place and not so readily detectable.

If that obstacle can be overcome, the state of the perl library will forever be different from that produced by a clean install.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;09&nbsp;14:39:04&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2016-11-09 06:24:10, rwfranks@acm.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue Nov 08 15:23:43 2016, ETHER wrote:
<div class="message-stanza open">&gt; &gt; ... or to switch to installing the new files into
&gt; &gt; $&#40;DESTINSTALLSITEARCH&#41; &#40;which will overwrite the old ones&#41;.  The
&gt; &gt; latter might
&gt; &gt; be preferrable as it removes the chance that other files &#40;not
&gt; &gt; belonging to
&gt; &gt; this distribution&#41; might be inadvertently removed.
</div>&gt; 
&gt; That may seem an attractive way to get past 1.01, but subsequent
&gt; upgrades are then hampered by the newer version now in the &#34;wrong&#34;
&gt; place and not so readily detectable.
&gt; 
&gt; If that obstacle can be overcome, the state of the perl library will
&gt; forever be different from that produced by a clean install.
</div>
I don&#39;t understand what you mean.  I&#39;m not saying to install into
$&#40;DESTINSTALLSITEARCH&#41; if an old version is detected -- but use that install
location regardless of if it&#39;s an upgrade or a fresh clean install.  That
directory is in $PERL5LIB and is discoverable.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;10&nbsp;14:34:57&nbsp;2016</span>
    <span class="description">rwfranks [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rwfranks [...] acm.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Nov 09 14:39:04 2016, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2016-11-09 06:24:10, rwfranks@acm.org wrote:
<div class="message-stanza open">&gt; &gt; On Tue Nov 08 15:23:43 2016, ETHER wrote:
<div class="message-stanza open">&gt; &gt; &gt; ... or to switch to installing the new files into
&gt; &gt; &gt; $&#40;DESTINSTALLSITEARCH&#41; &#40;which will overwrite the old ones&#41;.  The
&gt; &gt; &gt; latter might
&gt; &gt; &gt; be preferrable as it removes the chance that other files &#40;not
&gt; &gt; &gt; belonging to
&gt; &gt; &gt; this distribution&#41; might be inadvertently removed.
</div>&gt; &gt; 
&gt; &gt; That may seem an attractive way to get past 1.01, but subsequent
&gt; &gt; upgrades are then hampered by the newer version now in the &#34;wrong&#34;
&gt; &gt; place and not so readily detectable.
&gt; &gt; 
&gt; &gt; If that obstacle can be overcome, the state of the perl library will
&gt; &gt; forever be different from that produced by a clean install.
</div>&gt; 
&gt; I don&#39;t understand what you mean.  I&#39;m not saying to install into
&gt; $&#40;DESTINSTALLSITEARCH&#41; if an old version is detected -- but use that install
&gt; location regardless of if it&#39;s an upgrade or a fresh clean install.  That
&gt; directory is in $PERL5LIB and is discoverable.
</div>
You are seeing only part of the overall picture.

Historically, Net::DNS::SEC was clumsily installed by injecting DNSSEC RRs and other stuff into an existing Net::DNS installation leaving a nasty mess which is certain to upset some upgrade tool somewhere. The secondary goal is to encourage that wreckage to disappear.

Your proposal would probably do a good job on the components which will be overwritten, but leave non-matching bits of Net::DNS::SEC trapped in the works.

The generated Makefile now has its install bits chopped off when an old version is detected.  Makefile is still good for build and test which will allow smokerboxes to carry on business as usual.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;26&nbsp;13:49:01&nbsp;2016</span>
    <span class="description">LEONT [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Nov 05 17:02:26 2016, rwfranks@acm.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have no quarrel with making this strict.
&gt; 
&gt; Warnings presupposes perl 5.6 which is a tighter constraint than the
&gt; declared MIN_PERL_VERSION =&gt; 5.004_04.
&gt; 
&gt; An occasional perl -W Makefile.PL is also considerably more effective,
&gt; unconditionally turning on all warnings throughout &#40;including
&gt; ExtUtils::MakeMaker and its dependencies&#41;.
</div>
The toolchain has dropped &lt;5.6 support 9 years ago. A number of your dependencies don&#39;t support such systems either. Pretending your module still installs on such a system is not in any way realistic.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; - versions are used as numbers rather than strings, leading to a loss
&gt; &gt; of trailing zeros &#40;which can sometimes be significant&#41;;
</div>&gt; 
&gt; The documentation for Exporter clearly states that a number is
&gt; required, and I quote:
</div>
Exporter is not the place where versions are documented. There are many versions that are problematic, 0.000001 being the most trivial one &#40;it stringifies to &#34;0e-6&#34; which isn&#39;t a valid version&#41;. Writing them as strings is a better default because you don&#39;t have to worry about all those edge cases, though none of the versions you&#39;re dealing with here is problematic in this sense.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If we are going to build on the RT#108908 discussion, perhaps we need
&gt; to recognise three different &#40;and in some ways incompatible&#41; groups of
&gt; users.
&gt; 
&gt; 1&#41; Hands-on users who can be expected to read and act upon warnings
&gt; and error messages.
&gt; 
&gt; 2&#41; Automated testers who can reasonably demand that Makefile.PL will
&gt; always yield a workable Makefile.  This group never does &#34;make
&gt; install&#34;. A hard stop at &#34;perl Makefile.PL&#34; time is unacceptable.
</div>
I don&#39;t think you can make the assumption that they will never run make install &#40;in particular not when Net::DNS is used as a dependency for something else&#41;. It seems to depend on the smoker.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 3&#41; Minimally supervised scripted installers who demand an informative
&gt; message and hard stop if the upgrade package will be hidden by the
&gt; existing version.  Human intervention would then be required to
&gt; complete the process.
</div>
I think you&#39;re skipping a step there; What they need is not end up with a broken system, adding a hard stop merely one way way of achieving that. I very much believe that this working out of the box is much preferable, if only because this group of users may well be the largest of the three.

Leon
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;26&nbsp;19:45:45&nbsp;2016</span>
    <span class="description">rwfranks [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rwfranks [...] acm.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Dec 26 13:49:01 2016, LEONT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat Nov 05 17:02:26 2016, rwfranks@acm.org wrote:
<div class="message-stanza open">&gt; &gt; I have no quarrel with making this strict.
&gt; &gt;
&gt; &gt; Warnings presupposes perl 5.6 which is a tighter constraint than the
&gt; &gt; declared MIN_PERL_VERSION =&gt; 5.004_04.
&gt; &gt;
&gt; &gt; An occasional perl -W Makefile.PL is also considerably more
&gt; &gt; effective,
&gt; &gt; unconditionally turning on all warnings throughout &#40;including
&gt; &gt; ExtUtils::MakeMaker and its dependencies&#41;.
</div>&gt; 
&gt; The toolchain has dropped &lt;5.6 support 9 years ago. A number of your
&gt; dependencies don&#39;t support such systems either. Pretending your module
&gt; still installs on such a system is not in any way realistic.
&gt; 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; - versions are used as numbers rather than strings, leading to a
&gt; &gt; &gt; loss
&gt; &gt; &gt; of trailing zeros &#40;which can sometimes be significant&#41;;
</div>&gt; &gt;
&gt; &gt; The documentation for Exporter clearly states that a number is
&gt; &gt; required, and I quote:
</div>&gt; 
&gt; Exporter is not the place where versions are documented. There are
&gt; many versions that are problematic, 0.000001 being the most trivial
&gt; one &#40;it stringifies to &#34;0e-6&#34; which isn&#39;t a valid version&#41;. Writing
&gt; them as strings is a better default because you don&#39;t have to worry
&gt; about all those edge cases, though none of the versions you&#39;re dealing
&gt; with here is problematic in this sense.
</div>
In which case this is not an issue.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
<div class="message-stanza open">&gt; &gt; If we are going to build on the RT#108908 discussion, perhaps we need
&gt; &gt; to recognise three different &#40;and in some ways incompatible&#41; groups
&gt; &gt; of
&gt; &gt; users.
&gt; &gt;
&gt; &gt; 1&#41; Hands-on users who can be expected to read and act upon warnings
&gt; &gt; and error messages.
&gt; &gt;
&gt; &gt; 2&#41; Automated testers who can reasonably demand that Makefile.PL will
&gt; &gt; always yield a workable Makefile.  This group never does &#34;make
&gt; &gt; install&#34;. A hard stop at &#34;perl Makefile.PL&#34; time is unacceptable.
</div>&gt; 
&gt; I don&#39;t think you can make the assumption that they will never run
&gt; make install &#40;in particular not when Net::DNS is used as a dependency
&gt; for something else&#41;. It seems to depend on the smoker.
&gt; 
<div class="message-stanza open">&gt; &gt; 3&#41; Minimally supervised scripted installers who demand an informative
&gt; &gt; message and hard stop if the upgrade package will be hidden by the
&gt; &gt; existing version.  Human intervention would then be required to
&gt; &gt; complete the process.
</div>&gt; 
&gt; I think you&#39;re skipping a step there; What they need is not end up
&gt; with a broken system, adding a hard stop merely one way way of
&gt; achieving that. I very much believe that this working out of the box
&gt; is much preferable, if only because this group of users may well be
&gt; the largest of the three.
</div>
The more convincing arguments came from those in favour of a hard stop.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;29&nbsp;13:12:12&nbsp;2016</span>
    <span class="description">DBOOK [...] cpan.org -  Cc DBOOK added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;30&nbsp;04:36:04&nbsp;2016</span>
    <span class="description">NLNETLABS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Addressed in 1.07
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;30&nbsp;04:36:04&nbsp;2016</span>
    <span class="description">NLNETLABS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;30&nbsp;15:23:32&nbsp;2016</span>
    <span class="description">DBOOK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Dec 26 19:45:45 2016, rwfranks@acm.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Dec 26 13:49:01 2016, LEONT wrote:
<div class="message-stanza open">&gt; &gt; On Sat Nov 05 17:02:26 2016, rwfranks@acm.org wrote:
<div class="message-stanza open">&gt; &gt; &gt; I have no quarrel with making this strict.
&gt; &gt; &gt;
&gt; &gt; &gt; Warnings presupposes perl 5.6 which is a tighter constraint than the
&gt; &gt; &gt; declared MIN_PERL_VERSION =&gt; 5.004_04.
&gt; &gt; &gt;
&gt; &gt; &gt; An occasional perl -W Makefile.PL is also considerably more
&gt; &gt; &gt; effective,
&gt; &gt; &gt; unconditionally turning on all warnings throughout &#40;including
&gt; &gt; &gt; ExtUtils::MakeMaker and its dependencies&#41;.
</div>&gt; &gt; 
&gt; &gt; The toolchain has dropped &lt;5.6 support 9 years ago. A number of your
&gt; &gt; dependencies don&#39;t support such systems either. Pretending your module
&gt; &gt; still installs on such a system is not in any way realistic.
</div></div>
Please address this. Warnings are standard.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; - versions are used as numbers rather than strings, leading to a
&gt; &gt; &gt; &gt; loss
&gt; &gt; &gt; &gt; of trailing zeros &#40;which can sometimes be significant&#41;;
</div>&gt; &gt; &gt;
&gt; &gt; &gt; The documentation for Exporter clearly states that a number is
&gt; &gt; &gt; required, and I quote:
</div>&gt; &gt; 
&gt; &gt; Exporter is not the place where versions are documented. There are
&gt; &gt; many versions that are problematic, 0.000001 being the most trivial
&gt; &gt; one &#40;it stringifies to &#34;0e-6&#34; which isn&#39;t a valid version&#41;. Writing
&gt; &gt; them as strings is a better default because you don&#39;t have to worry
&gt; &gt; about all those edge cases, though none of the versions you&#39;re dealing
&gt; &gt; with here is problematic in this sense.
</div>&gt; 
&gt; In which case this is not an issue.
&gt; 
</div>
It is an issue, and it will bite you, whether because of your dependency versions or your own version. Moreover, it sets a bad example to specify numeric version literals.

Along the same lines, the line you added to check for an older version of Net::DNS is not quite correct. The proper way to check for a certain version of a module is with the -&gt;VERSION&#40;&#41; method and a stringy version number. Here is how I would do it.

use constant NOINSTALL =&gt; eval { require Net::DNS; 1 } &#38;&#38; !eval { Net::DNS-&gt;VERSION&#40;&#39;1.00&#39;&#41;; 1 };

Please understand that we are not idly making up problems here, these issues are all based on our extensive experience with problems that occur throughout the history of the toolchain and hundreds of strange corner cases.

Would you like to reopen this issue for the remaining unsolved issues, or would you like me to open another new issue?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;30&nbsp;15:40:35&nbsp;2016</span>
    <span class="description">DBOOK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Dec 30 15:23:32 2016, DBOOK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Along the same lines, the line you added to check for an older version
&gt; of Net::DNS is not quite correct. The proper way to check for a
&gt; certain version of a module is with the -&gt;VERSION&#40;&#41; method and a
&gt; stringy version number. Here is how I would do it.
&gt; 
&gt; use constant NOINSTALL =&gt; eval { require Net::DNS; 1 } &#38;&#38; !eval {
&gt; Net::DNS-&gt;VERSION&#40;&#39;1.00&#39;&#41;; 1 };
</div>
By the way, the documentation for this method is here: <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/UNIVERSAL#VERSION-REQUIRE">https://metacpan.org/pod/UNIVERSAL#VERSION-REQUIRE</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;30&nbsp;18:23:59&nbsp;2016</span>
    <span class="description">DBOOK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The closest thing to documentation that versions should be specified as strings would be these two sections.

<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/ExtUtils::MakeMaker#VERSION_FROM">https://metacpan.org/pod/ExtUtils::MakeMaker#VERSION_FROM</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/CPAN::Meta::Spec#Version-Formats">https://metacpan.org/pod/CPAN::Meta::Spec#Version-Formats</a></span>

In particular from the latter:

Version numbers must be treated as strings, not numbers. For example, 1.200 must not be serialized as 1.2. Version comparison should be delegated to the Perl version module, version 0.80 or newer.

&#40;The -&gt;VERSION&#40;&#41; method does use version.pm for comparison.&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;31&nbsp;07:58:36&nbsp;2016</span>
    <span class="description">rwfranks [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rwfranks [...] acm.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Dec 30 18:23:59 2016, DBOOK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The closest thing to documentation that versions should be specified
&gt; as strings would be these two sections.
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/ExtUtils::MakeMaker#VERSION_FROM">https://metacpan.org/pod/ExtUtils::MakeMaker#VERSION_FROM</a></span>
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/CPAN::Meta::Spec#Version-Formats">https://metacpan.org/pod/CPAN::Meta::Spec#Version-Formats</a></span>
&gt; 
&gt; In particular from the latter:
&gt; 
&gt; Version numbers must be treated as strings, not numbers. For example,
&gt; 1.200 must not be serialized as 1.2. Version comparison should be
&gt; delegated to the Perl version module, version 0.80 or newer.
&gt; 
&gt; &#40;The -&gt;VERSION&#40;&#41; method does use version.pm for comparison.&#41;
</div>
This is a deliberate design choice intended to satisfy the &#40;various&#41; needs of all the versions of ExtUtils::MakeMaker that this Makefile.PL is every likely to encounter.

Pontificating based on what 5.24.0 and MakeMaker 7.10_01 does or does not do, provides no insight into the general portability issues.

Neither can you assume that every user is using recent versions of perl, tools or OS.  Industrial users, in particular, are reluctant to change anything that still works unless there is good &#40;i.e. economic&#41; reason to do so. Some industrial kit runs truly antique versions of software.

Before you pursue this argument further, I suggest you inspect the versions of perl bundled with old but still supported versions of Debian, RHEL and CentOS.  Not everything in the garden is as neat and tidy as you might suppose.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;31&nbsp;15:32:16&nbsp;2016</span>
    <span class="description">DBOOK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Dec 31 07:58:36 2016, rwfranks@acm.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri Dec 30 18:23:59 2016, DBOOK wrote:
<div class="message-stanza open">&gt; &gt; The closest thing to documentation that versions should be specified
&gt; &gt; as strings would be these two sections.
&gt; &gt;
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/ExtUtils::MakeMaker#VERSION_FROM">https://metacpan.org/pod/ExtUtils::MakeMaker#VERSION_FROM</a></span>
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/CPAN::Meta::Spec#Version-Formats">https://metacpan.org/pod/CPAN::Meta::Spec#Version-Formats</a></span>
&gt; &gt;
&gt; &gt; In particular from the latter:
&gt; &gt;
&gt; &gt; Version numbers must be treated as strings, not numbers. For example,
&gt; &gt; 1.200 must not be serialized as 1.2. Version comparison should be
&gt; &gt; delegated to the Perl version module, version 0.80 or newer.
&gt; &gt;
&gt; &gt; &#40;The -&gt;VERSION&#40;&#41; method does use version.pm for comparison.&#41;
</div>&gt; 
&gt; This is a deliberate design choice intended to satisfy the &#40;various&#41;
&gt; needs of all the versions of ExtUtils::MakeMaker that this Makefile.PL
&gt; is every likely to encounter.
&gt; 
&gt; Pontificating based on what 5.24.0 and MakeMaker 7.10_01 does or does
&gt; not do, provides no insight into the general portability issues.
&gt; 
&gt; Neither can you assume that every user is using recent versions of
&gt; perl, tools or OS.  Industrial users, in particular, are reluctant to
&gt; change anything that still works unless there is good &#40;i.e. economic&#41;
&gt; reason to do so. Some industrial kit runs truly antique versions of
&gt; software.
&gt; 
&gt; Before you pursue this argument further, I suggest you inspect the
&gt; versions of perl bundled with old but still supported versions of
&gt; Debian, RHEL and CentOS.  Not everything in the garden is as neat and
&gt; tidy as you might suppose.
</div>
Support of these ancient versions is EXACTLY why versions should be specified as we have discussed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;01&nbsp;06:49:23&nbsp;2017</span>
    <span class="description">rwfranks [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rwfranks [...] acm.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Dec 31 15:32:16 2016, DBOOK wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt;
&gt; &gt; Before you pursue this argument further, I suggest you inspect the
&gt; &gt; versions of perl bundled with old but still supported versions of
&gt; &gt; Debian, RHEL and CentOS.  Not everything in the garden is as neat and
&gt; &gt; tidy as you might suppose.
</div>&gt; 
&gt; Support of these ancient versions is EXACTLY why versions should be
&gt; specified as we have discussed.
</div>
Karen Etheridge covered all of these points earlier in this thread; you have contributed absolutely nothing that has not already been discussed, and certainly no evidence indicating a real problem.

Current design has been tested on every version from 4.004_04 to 24.0
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;01&nbsp;09:41:39&nbsp;2017</span>
    <span class="description">rwfranks [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rwfranks [...] acm.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jan 01 06:49:23 2017, rwfranks@acm.org wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Current design has been tested on every version from 4.004_04 to 24.0
</div>
correction: 5.004_04
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;01&nbsp;14:07:25&nbsp;2017</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2017-01-01 03:49:23, rwfranks@acm.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat Dec 31 15:32:16 2016, DBOOK wrote:
&gt; 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt; Before you pursue this argument further, I suggest you inspect the
&gt; &gt; &gt; versions of perl bundled with old but still supported versions of
&gt; &gt; &gt; Debian, RHEL and CentOS.  Not everything in the garden is as neat
&gt; &gt; &gt; and
&gt; &gt; &gt; tidy as you might suppose.
</div>&gt; &gt;
&gt; &gt; Support of these ancient versions is EXACTLY why versions should be
&gt; &gt; specified as we have discussed.
</div>&gt; 
&gt; Karen Etheridge covered all of these points earlier in this thread;
</div>
The points are being repeated now because you are still refusing to act on them.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;01&nbsp;15:29:19&nbsp;2017</span>
    <span class="description">rwfranks [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rwfranks [...] acm.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jan 01 14:07:25 2017, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; The points are being repeated now because you are still refusing to
&gt; act on them.
</div>
The version numbers are entirely under my control, and are a private communication between Makefile.PL and the local ExtUtils::MakeMaker of whatever vintage.

These numbers never come into direct contact with any other component in the tool chain.

The only assumption that I am relying upon, is that ExtUtils::MakeMaker will continue to keep its side of the bargain.

If you consider my design is incorrect, then the onus is on you, as detractors, to support your argument by providing a repeatable scenario which demonstrates a failure.

Unless and until somebody produces some hard evidence to the contrary, I shall restate my belief that the design is correct or, at the very least, adequate.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
