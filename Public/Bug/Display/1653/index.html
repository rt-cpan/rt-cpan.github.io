<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #1653 for Devel-Size: All SVPV subtype may contain an RV instead of a PV</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #1653 for Devel-Size: All SVPV subtype may contain an RV instead of a PV</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Devel-Size">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Devel-Size">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Devel-Size">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Devel-Size">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Devel-Size">Devel-Size CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">1653</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">30 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Devel-Size">Devel-Size</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">TELS [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jand [...] ActiveState.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-11198-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
0.52</li>
<li>
0.54</li>
<li>
0.55</li>
<li>
0.56</li>
<li>
0.57</li>
<li>
0.58</li>
<li>
0.59</li>
<li>
0.60</li>
<li>
0.61</li>
<li>
0.62</li>
<li>
0.63</li>
<li>
0.64</li>
<li>
0.66</li>
</ul>
    </td>
  </tr>
  <tr id="CF-11199-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=1653">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-73974" href="/Public/Bug/Display.html?id=1653#txn-73974">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;11&nbsp;02:28:25&nbsp;2002</span>
    <span class="description">JDB [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> All SVPV subtype may contain an RV instead of a PV</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/73974/6500/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/6500">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 164b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The module only checks SvTYPE&#40;&#41;, but actually needs to check SvROK&#40;&#41; too, to determine if the SV contains an RV or a PV.  SvLEN&#40;&#41; is irrelevant when SvROK&#40;&#41; is set.
</div></div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-73975" href="/Public/Bug/Display.html?id=1653#txn-73975">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;11&nbsp;13:57:05&nbsp;2002</span>
    <span class="description">dan [...] sidhe.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 11 Oct 2002 13:45:31 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Devel-Size [...] rt.cpan.org, &#34;&#39;AdminCc of cpan Ticket #1653&#39;&#34;: ;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dan Sugalski &lt;dan [...] sidhe.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [cpan #1653] All SVPV subtype may contain an RV instead of a
 PV</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/73975/6504/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/6504">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 792b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">At 2:28 AM -0400 10/11/02, via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;This message about Devel-Size was sent to you by JDB via rt.cpan.org
&gt;
&gt;Full context and any attached attachments can be found at:
&gt;&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=1653">https://rt.cpan.org/Ticket/Display.html?id=1653</a></span> &gt;
&gt;
&gt;The module only checks SvTYPE&#40;&#41;, but actually needs to check SvROK&#40;&#41; 
&gt;too, to determine if the SV contains an RV or a PV.  SvLEN&#40;&#41; is 
&gt;irrelevant when SvROK&#40;&#41; is set.
</div>
It should check for a valid pointer to char data first, yes. I&#39;ll go 
add that check in.
-- 
                                         Dan

--------------------------------------&#34;it&#39;s like this&#34;-------------------
Dan Sugalski                          even samurai
dan@sidhe.org                         have teddy bears and even
                                       teddy bears get drunk
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-295278" href="/Public/Bug/Display.html?id=1653#txn-295278">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;03&nbsp;10:24:26&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-295331" href="/Public/Bug/Display.html?id=1653#txn-295331">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;03&nbsp;10:31:45&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">10 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/295331/133587/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/133587">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 170b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I guess this bug was resolved a long time ago. If you still have this
problem, then please re-open this bug by replying to this message.

Thank you for your report,

Tels
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-295332" href="/Public/Bug/Display.html?id=1653#txn-295332">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;03&nbsp;10:31:46&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-295335" href="/Public/Bug/Display.html?id=1653#txn-295335">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;03&nbsp;10:31:47&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-295399" href="/Public/Bug/Display.html?id=1653#txn-295399">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;03&nbsp;12:50:19&nbsp;2007</span>
    <span class="description">jand [...] ActiveState.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #1653] All SVPV subtype may contain an RV instead of a PV </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 3 Mar 2007 09:49:49 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Devel-Size [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jan Dubois&#34; &lt;jand [...] activestate.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/295399/133626/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/133626">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 937b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, 03 Mar 2007, via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I guess this bug was resolved a long time ago. If you still have this
&gt; problem, then please re-open this bug by replying to this message.
</div>
Nope, the error has never been fixed.  For example this block:

  case SVt_PV:
    total_size += sizeof&#40;XPV&#41;;
    total_size += SvLEN&#40;thing&#41;;
    break;

really should read like this:

  case SVt_PV:
    total_size += sizeof&#40;XPV&#41;;
    total_size += SvROK&#40;thing&#41; ? 0 : SvLEN&#40;thing&#41;;
    break;

The same change would apply to all other references to SvLEN.

It does not matter that much because the core &#40;in newSVrv&#40;&#41;&#41;
sets SvCUR and SvLEN to 0 when it assigns a reference to
any SvTYPE &gt; SVt_RV, but XS code isn&#39;t really required to
do so.

Relying on SvLEN being zero when SvROK is true is similar to
relying on the fact that Perl always puts a &#39;\0&#39; character
after SvPV at index SvCUR.  It is almost always true, but
technically not required.

Cheers,
-Jan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-295400" href="/Public/Bug/Display.html?id=1653#txn-295400">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;03&nbsp;12:50:21&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-297600" href="/Public/Bug/Display.html?id=1653#txn-297600">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;13&nbsp;13:49:02&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/297600/134712/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/134712">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 880b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Mar 03 12:50:19 2007, jand@ActiveState.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat, 03 Mar 2007, via RT wrote:
<div class="message-stanza open">&gt; &gt; I guess this bug was resolved a long time ago. If you still have this
&gt; &gt; problem, then please re-open this bug by replying to this message.
</div>&gt; 
&gt; Nope, the error has never been fixed.  For example this block:
&gt; 
&gt;   case SVt_PV:
&gt;     total_size += sizeof&#40;XPV&#41;;
&gt;     total_size += SvLEN&#40;thing&#41;;
&gt;     break;
&gt; 
&gt; really should read like this:
&gt; 
&gt;   case SVt_PV:
&gt;     total_size += sizeof&#40;XPV&#41;;
&gt;     total_size += SvROK&#40;thing&#41; ? 0 : SvLEN&#40;thing&#41;;
&gt;     break;
&gt; 
&gt; The same change would apply to all other references to SvLEN.
</div>
Ok, I will apply such a change to the next release. However, since I
have really no understanding of the Perl core or related things could you:

* maybe send in a patch for this?
* send in a testcase?
* check before I release it?

all the best,

tels
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-298315" href="/Public/Bug/Display.html?id=1653#txn-298315">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;13:10:15&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Severity Normal changed to Important</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-298316" href="/Public/Bug/Display.html?id=1653#txn-298316">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;13:10:16&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Broken in 0.54 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-298317" href="/Public/Bug/Display.html?id=1653#txn-298317">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;13:10:17&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Broken in 0.55 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-298318" href="/Public/Bug/Display.html?id=1653#txn-298318">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;13:10:18&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Broken in 0.56 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-298319" href="/Public/Bug/Display.html?id=1653#txn-298319">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;13:10:19&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Broken in 0.57 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-298320" href="/Public/Bug/Display.html?id=1653#txn-298320">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;13:10:19&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Broken in 0.58 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-298321" href="/Public/Bug/Display.html?id=1653#txn-298321">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;13:10:20&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Broken in 0.59 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-298322" href="/Public/Bug/Display.html?id=1653#txn-298322">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;13:10:20&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Broken in 0.60 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-298323" href="/Public/Bug/Display.html?id=1653#txn-298323">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;13:10:20&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Broken in 0.61 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-298324" href="/Public/Bug/Display.html?id=1653#txn-298324">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;13:10:21&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Broken in 0.62 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-298325" href="/Public/Bug/Display.html?id=1653#txn-298325">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;13:10:22&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Broken in 0.63 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-298326" href="/Public/Bug/Display.html?id=1653#txn-298326">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;13:10:31&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Broken in 0.64 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-298327" href="/Public/Bug/Display.html?id=1653#txn-298327">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;13:10:33&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Broken in 0.66 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-298359" href="/Public/Bug/Display.html?id=1653#txn-298359">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;14:08:54&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">10 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/298359/135115/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/135115">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 963b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Mar 13 13:49:02 2007, TELS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat Mar 03 12:50:19 2007, jand@ActiveState.com wrote:
<div class="message-stanza open">&gt; &gt; On Sat, 03 Mar 2007, via RT wrote:
<div class="message-stanza open">&gt; &gt; &gt; I guess this bug was resolved a long time ago. If you still have this
&gt; &gt; &gt; problem, then please re-open this bug by replying to this message.
</div>&gt; &gt; 
&gt; &gt; Nope, the error has never been fixed.  For example this block:
&gt; &gt; 
&gt; &gt;   case SVt_PV:
&gt; &gt;     total_size += sizeof&#40;XPV&#41;;
&gt; &gt;     total_size += SvLEN&#40;thing&#41;;
&gt; &gt;     break;
&gt; &gt; 
&gt; &gt; really should read like this:
&gt; &gt; 
&gt; &gt;   case SVt_PV:
&gt; &gt;     total_size += sizeof&#40;XPV&#41;;
&gt; &gt;     total_size += SvROK&#40;thing&#41; ? 0 : SvLEN&#40;thing&#41;;
&gt; &gt;     break;
&gt; &gt; 
&gt; &gt; The same change would apply to all other references to SvLEN.
</div>&gt; 
</div>
I applied a variant of the proposed change, and added a testcase
&#40;t/recuse.t&#41; that tests the fix in combination with another fix.

0.67 has been uploaded to CPAN, can you please test it and tell me if it
really solves the issue?

All the best,

Tels
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-339176" href="/Public/Bug/Display.html?id=1653#txn-339176">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;30&nbsp;09:50:27&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">10 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/339176/151976/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/151976">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 122b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Marking as resolved, if that doesn&#39;t fix your problem please re-open
this bug by replying to this email.

Thank you,

Tels
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-339179" href="/Public/Bug/Display.html?id=1653#txn-339179">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;30&nbsp;09:50:29&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.537998</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
