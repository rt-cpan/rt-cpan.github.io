<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #127971 for PAR: {Windows] PAR-Packer-1.047</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #127971 for PAR: {Windows] PAR-Packer-1.047</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/PAR/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/PAR/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/PAR/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/PAR/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/PAR">PAR CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">127971</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/PAR/Active/">PAR</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
welleozean [...] googlemail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-24530-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-24531-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;08&nbsp;10:14:59&nbsp;2018</span>
    <span class="description">welleozean [...] googlemail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> {Windows] PAR-Packer-1.047</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 8 Dec 2018 16:14:44 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-PAR [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Welle &lt;welleozean [...] googlemail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza">  

    
  
  
    <p>Hello,</p>

    <p>with Strawberry Perl 5.28 32bit on Windows 10. I pack it with pp
      and at run-time - on a different machine - I get the following:</p>

    <p>pp --% -u -x -l
      C:/berrybrew/5.28.0_32/perl/vendor/lib/MIME/types.db -o AC.exe -F
      Bleach="^(AC)" AC.pl<br>

    </p>

    <p>PS D:\6.00&gt; .\AC.exe
      <br>

      format error: bad signature: 0x2508438b at offset 6962287 in file
      D:\6.00\AC.exe
      <br>

       at -e line 614.
      <br>

      format error: bad signature: 0x8b0974c0 at offset 6962321 in file
      D:\6.00\AC.exe
      <br>

       at -e line 614.
      <br>

      format error: bad signature: 0x24848b4c at offset 6962382 in file
      D:\6.00\AC.exe
      <br>

       at -e line 614.
      <br>

      This is Win32
      <br>

      Can't load
'C:\Users\BD\AppData\Local\Temp\par-4244\cache-1544280014\31e69eb2.xs.dll'
      for module Tk::JPEG: load_<a>file:Das</a>
      angegebene Modul wurde nicht gefunden at
      C:/berrybrew/5.28.0_32/perl/lib/DynaLoader.pm line 193.
      <br>

        at C:/berrybrew/5.28.0_32/perl/vendor/lib/PAR/Heavy.pm line 123.
      <br>

      Compilation failed in require at if.pm line 15. <br>

    </p>

    <p>I am quite worried about 2 things: the "format error: bad
      signature" which I do not know what it refers to and about the
      inability to read at C:/berrybrew/5.28.0_32/perl/lib/DynaLoader.pm
      which was the directory in the original machine where pp has been
      used!<br>

    </p>

  


</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;09&nbsp;09:16:33&nbsp;2018</span>
    <span class="description">RSCHUPP [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2018-12-08 10:14:59, welleozean@googlemail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; pp --% -u -x -l C:/berrybrew/5.28.0_32/perl/vendor/lib/MIME/types.db
&gt; -o AC.exe -F Bleach=&#34;^&#40;AC&#41;&#34; AC.pl
</div>
Is &#34;--%&#34; a typo - there&#39;s no such option for pp?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; PS D:\6.00&gt; .\AC.exe
&gt; format error: bad signature: 0x2508438b at offset 6962287 in file
&gt; D:\6.00\AC.exe
&gt; at -e line 614.
</div>...
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Can&#39;t load
&gt; &#39;C:\Users\BD\AppData\Local\Temp\par-4244\cache-
&gt; 1544280014\31e69eb2.xs.dll&#39; for
&gt; module Tk::JPEG: load_file:Das angegebene Modul wurde nicht gefunden
&gt; at
&gt; C:/berrybrew/5.28.0_32/perl/lib/DynaLoader.pm line 193.
&gt; 
&gt; I am quite worried about 2 things: the &#34;format error: bad signature&#34;
</div>
These are from Archive::Zip. Which version of Archive::Zip are you using 
&#40;on the machine where you packed AC.exe&#41;? Does your program use Archive::Zip
explicitly?

&#34;Can&#39;t load...&#34; is most likely caused by your program using Tk::JPEG,
but you didn&#39;t pack the native JPEG library - PAR:Packer &#40;actually
Module::ScanDeps&#41; does NOT detect dependencies of &#40;XS&#41; Perl modules
on native libraries. If Tk::JPEG was built against the JPEG library
that came with your Strawberry this can be solved by adding

  --link libjpeg-9_.dll

to your pp command line.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; C:/berrybrew/5.28.0_32/perl/lib/DynaLoader.pm which was the directory
&gt; in the original machine where pp has been used!
</div>
Nothing to worry about, it&#39;s a feature. All Perl code that is packed by pp
is instrumented with #line directives that encode the original file name
&#40;and line numbers in case POD stripping was applied&#41; so that error
messages correctly reference stuff as seen by the developer on the
packing machine.

Cheers, Roderich
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;09&nbsp;09:16:35&nbsp;2018</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;12&nbsp;06:16:12&nbsp;2018</span>
    <span class="description">welleozean [...] googlemail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #127971] {Windows] PAR-Packer-1.047</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 12 Dec 2018 12:15:47 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-PAR [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> welle Ozean &lt;welleozean [...] googlemail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;--%&#34; is not a typo. Is the way to pass the command in Windows PowerShell.
Archive::Zip: was 1.60 at the moment of packaging. Upgraded now to 1.64
&#40;but using --force&#41;
Adding --link libjpeg-9_.dll doesn&#39;t solve the problem. Same error. Tried
also with full path. &#40;I guess it is okay that PAR searches for
31e69eb2.xs.dll &#40;changing its name&#41;. Tk::JPEG has been compiled with cpanm
Tk.

Please, note that the same script &#40;without adding --link&#41; works
out-of-the-box on my macOS.

Any help to solve my problem would be very much appreciated. Thanks.

On a side note: if I run the exe from the packaging machine, the script
works. I guess it finds missing parts in original position. This makes
debugging not very easy, as it requires to switch to another machine for
testing &#40;what is the best alternative to test the exe in the same machine?&#41;.

Am So., 9. Dez. 2018 um 15:16 Uhr schrieb Roderich Schupp via RT &lt;
bug-PAR@rt.cpan.org&gt;:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=127971">https://rt.cpan.org/Ticket/Display.html?id=127971</a></span> &gt;
&gt;
&gt; On 2018-12-08 10:14:59, welleozean@googlemail.com wrote:
<div class="message-stanza open">&gt; &gt; pp --% -u -x -l C:/berrybrew/5.28.0_32/perl/vendor/lib/MIME/types.db
&gt; &gt; -o AC.exe -F Bleach=&#34;^&#40;AC&#41;&#34; AC.pl
</div>&gt;
&gt; Is &#34;--%&#34; a typo - there&#39;s no such option for pp?
&gt;
<div class="message-stanza open">&gt; &gt; PS D:\6.00&gt; .\AC.exe
&gt; &gt; format error: bad signature: 0x2508438b at offset 6962287 in file
&gt; &gt; D:\6.00\AC.exe
&gt; &gt; at -e line 614.
</div>&gt; ...
<div class="message-stanza open">&gt; &gt; Can&#39;t load
&gt; &gt; &#39;C:\Users\BD\AppData\Local\Temp\par-4244\cache-
&gt; &gt; 1544280014\31e69eb2.xs.dll&#39; for
&gt; &gt; module Tk::JPEG: load_file:Das angegebene Modul wurde nicht gefunden
&gt; &gt; at
&gt; &gt; C:/berrybrew/5.28.0_32/perl/lib/DynaLoader.pm line 193.
&gt; &gt;
&gt; &gt; I am quite worried about 2 things: the &#34;format error: bad signature&#34;
</div>&gt;
&gt; These are from Archive::Zip. Which version of Archive::Zip are you using
&gt; &#40;on the machine where you packed AC.exe&#41;? Does your program use
&gt; Archive::Zip
&gt; explicitly?
&gt;
&gt; &#34;Can&#39;t load...&#34; is most likely caused by your program using Tk::JPEG,
&gt; but you didn&#39;t pack the native JPEG library - PAR:Packer &#40;actually
&gt; Module::ScanDeps&#41; does NOT detect dependencies of &#40;XS&#41; Perl modules
&gt; on native libraries. If Tk::JPEG was built against the JPEG library
&gt; that came with your Strawberry this can be solved by adding
&gt;
&gt;   --link libjpeg-9_.dll
&gt;
&gt; to your pp command line.
&gt;
<div class="message-stanza open">&gt; &gt; C:/berrybrew/5.28.0_32/perl/lib/DynaLoader.pm which was the directory
&gt; &gt; in the original machine where pp has been used!
</div>&gt;
&gt; Nothing to worry about, it&#39;s a feature. All Perl code that is packed by pp
&gt; is instrumented with #line directives that encode the original file name
&gt; &#40;and line numbers in case POD stripping was applied&#41; so that error
&gt; messages correctly reference stuff as seen by the developer on the
&gt; packing machine.
&gt;
&gt; Cheers, Roderich
&gt;
&gt;
&gt;
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;12&nbsp;07:03:49&nbsp;2018</span>
    <span class="description">welleozean [...] googlemail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #127971] {Windows] PAR-Packer-1.047</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 12 Dec 2018 13:02:58 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-PAR [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> welle Ozean &lt;welleozean [...] googlemail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Adding also --link zlib1_.dll it works.

However, the same problem occurs with all  other missing .dll
Unfortunately, the error message doesn&#39;t say the name of the dll missing
&#40;it has an arbitrary code&#41;, just the module referring to it, which makes it
difficult to find the respective dlls

Am So., 9. Dez. 2018 um 15:16 Uhr schrieb Roderich Schupp via RT &lt;
bug-PAR@rt.cpan.org&gt;:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sun Dec 09 09:16:33 2018: Request 127971 was acted upon.
&gt; Transaction: Correspondence added by RSCHUPP
&gt;        Queue: PAR
&gt;      Subject: {Windows] PAR-Packer-1.047
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: welleozean@googlemail.com
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=127971">https://rt.cpan.org/Ticket/Display.html?id=127971</a></span> &gt;
&gt;
&gt;
&gt; On 2018-12-08 10:14:59, welleozean@googlemail.com wrote:
<div class="message-stanza open">&gt; &gt; pp --% -u -x -l C:/berrybrew/5.28.0_32/perl/vendor/lib/MIME/types.db
&gt; &gt; -o AC.exe -F Bleach=&#34;^&#40;AC&#41;&#34; AC.pl
</div>&gt;
&gt; Is &#34;--%&#34; a typo - there&#39;s no such option for pp?
&gt;
<div class="message-stanza open">&gt; &gt; PS D:\6.00&gt; .\AC.exe
&gt; &gt; format error: bad signature: 0x2508438b at offset 6962287 in file
&gt; &gt; D:\6.00\AC.exe
&gt; &gt; at -e line 614.
</div>&gt; ...
<div class="message-stanza open">&gt; &gt; Can&#39;t load
&gt; &gt; &#39;C:\Users\BD\AppData\Local\Temp\par-4244\cache-
&gt; &gt; 1544280014\31e69eb2.xs.dll&#39; for
&gt; &gt; module Tk::JPEG: load_file:Das angegebene Modul wurde nicht gefunden
&gt; &gt; at
&gt; &gt; C:/berrybrew/5.28.0_32/perl/lib/DynaLoader.pm line 193.
&gt; &gt;
&gt; &gt; I am quite worried about 2 things: the &#34;format error: bad signature&#34;
</div>&gt;
&gt; These are from Archive::Zip. Which version of Archive::Zip are you using
&gt; &#40;on the machine where you packed AC.exe&#41;? Does your program use
&gt; Archive::Zip
&gt; explicitly?
&gt;
&gt; &#34;Can&#39;t load...&#34; is most likely caused by your program using Tk::JPEG,
&gt; but you didn&#39;t pack the native JPEG library - PAR:Packer &#40;actually
&gt; Module::ScanDeps&#41; does NOT detect dependencies of &#40;XS&#41; Perl modules
&gt; on native libraries. If Tk::JPEG was built against the JPEG library
&gt; that came with your Strawberry this can be solved by adding
&gt;
&gt;   --link libjpeg-9_.dll
&gt;
&gt; to your pp command line.
&gt;
<div class="message-stanza open">&gt; &gt; C:/berrybrew/5.28.0_32/perl/lib/DynaLoader.pm which was the directory
&gt; &gt; in the original machine where pp has been used!
</div>&gt;
&gt; Nothing to worry about, it&#39;s a feature. All Perl code that is packed by pp
&gt; is instrumented with #line directives that encode the original file name
&gt; &#40;and line numbers in case POD stripping was applied&#41; so that error
&gt; messages correctly reference stuff as seen by the developer on the
&gt; packing machine.
&gt;
&gt; Cheers, Roderich
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;12&nbsp;07:10:10&nbsp;2018</span>
    <span class="description">RSCHUPP [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2018-12-12 06:16:12, welleozean@googlemail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Adding --link libjpeg-9_.dll doesn&#39;t solve the problem. Same error. Tried
&gt; also with full path. &#40;I guess it is okay that PAR searches for
&gt; 31e69eb2.xs.dll &#40;changing its name&#41;. Tk::JPEG has been compiled with cpanm
&gt; Tk.
</div>
I assume that 31e69eb2.xs.dll is the PAR mangled name for .../auto/Tk/JPEG/JPEG.xs.dll
&#40;please verify, e.g. by comparing MD5 or SHA1 digests&#41;.
I suspect that this DLL hasn&#39;t been linked against the libjpeg*.dll that came
with Strawberry. Or it is linked against additional DLLs that were not packed either.
Try something like 

objdump -ax .../JPEG.xs.dll | grep &#34;DLL Name&#34;

to determine its dependent DLLs.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Please, note that the same script &#40;without adding --link&#41; works
&gt; out-of-the-box on my macOS.
</div>
Most likely because the shared libjpeg there is provided by the platform,
hence available on both machines.


Cheers, Roderich
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;12&nbsp;08:59:38&nbsp;2018</span>
    <span class="description">RSCHUPP [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2018-12-12 07:03:49, welleozean@googlemail.com wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; However, the same problem occurs with all  other missing .dll
&gt; Unfortunately, the error message doesn&#39;t say the name of the dll missing
&gt; &#40;it has an arbitrary code&#41;, just the module referring to it, which makes it
&gt; difficult to find the respective dlls
</div>
Blame that on the OS: the string &#34;Das angegebene Modul wurde nicht gefunden&#34;
is what Windows returns as explanation. But Windows &#40;7 at least&#41; also pops up
a message that names the missing DLL.

Cheers, Roderich
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;12&nbsp;09:04:19&nbsp;2018</span>
    <span class="description">welleozean [...] googlemail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #127971] {Windows] PAR-Packer-1.047</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 12 Dec 2018 15:03:51 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-PAR [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> welle Ozean &lt;welleozean [...] googlemail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Your suggestion of using   objdump -ax  was very precious. With a bit of
trying and testing I have been able to identify all needed dlls and include
them in the executable. All works fine. You made my day.

Best, Welle

Am Mi., 12. Dez. 2018 um 14:59 Uhr schrieb Roderich Schupp via RT &lt;
bug-PAR@rt.cpan.org&gt;:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Wed Dec 12 08:59:38 2018: Request 127971 was acted upon.
&gt; Transaction: Correspondence added by RSCHUPP
&gt;        Queue: PAR
&gt;      Subject: {Windows] PAR-Packer-1.047
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: welleozean@googlemail.com
&gt;       Status: open
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=127971">https://rt.cpan.org/Ticket/Display.html?id=127971</a></span> &gt;
&gt;
&gt;
&gt; On 2018-12-12 07:03:49, welleozean@googlemail.com wrote:
&gt;
<div class="message-stanza open">&gt; &gt; However, the same problem occurs with all  other missing .dll
&gt; &gt; Unfortunately, the error message doesn&#39;t say the name of the dll missing
&gt; &gt; &#40;it has an arbitrary code&#41;, just the module referring to it, which makes
</div>&gt; it
<div class="message-stanza open">&gt; &gt; difficult to find the respective dlls
</div>&gt;
&gt; Blame that on the OS: the string &#34;Das angegebene Modul wurde nicht
&gt; gefunden&#34;
&gt; is what Windows returns as explanation. But Windows &#40;7 at least&#41; also pops
&gt; up
&gt; a message that names the missing DLL.
&gt;
&gt; Cheers, Roderich
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;12&nbsp;10:31:43&nbsp;2018</span>
    <span class="description">lamprecht [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Am Mi 12. Dez 2018, 07:03:49, welleozean@googlemail.com schrieb:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Adding also --link zlib1_.dll it works.
&gt; 
&gt; However, the same problem occurs with all  other missing .dll
&gt; Unfortunately, the error message doesn&#39;t say the name of the dll missing
&gt; &#40;it has an arbitrary code&#41;, just the module referring to it, which makes it
&gt; difficult to find the respective dlls
</div>
My reply on the list did not show up, so I retry via rt.cpan.org:

you can use
<span class="clickylink"><a target="new" rel="nofollow" href="https://docs.microsoft.com/en-us/sysinternals/downloads/process-explorer">https://docs.microsoft.com/en-us/sysinternals/downloads/process-explorer</a></span>
to see which dlls are opened by your packed executable on the packing machine.
The DLLs referenced there should either be in your PAR-cache-directory or windows system libraries. 

Christoph
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;12&nbsp;17:52:44&nbsp;2018</span>
    <span class="description">SLAFFAN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">And just to add a few extra data points, I have a script that uses objdump to find dependent DLLs on windows.  It would need some edits to work on Linux, and a different approach to work on Macs, but it does the job for my use case.  

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/shawnlaffan/perl-pp-autolink">https://github.com/shawnlaffan/perl-pp-autolink</a></span>

The logic has been adapted from the pp_simple.pl script at <span class="clickylink"><a target="new" rel="nofollow" href="https://www.perlmonks.org/?node_id=1148802">https://www.perlmonks.org/?node_id=1148802</a></span> 
That script itself might work well enough for most use cases, I just did not need to check for all the extra WX stuff.  


There is also some similar logic in the build system that could perhaps be adapted to the more general packing case.  <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/rschupp/PAR-Packer/tree/master/myldr/find_files_to_embed">https://github.com/rschupp/PAR-Packer/tree/master/myldr/find_files_to_embed</a></span>


Shawn.


On Wed Dec 12 10:31:43 2018, LAMPRECHT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Am Mi 12. Dez 2018, 07:03:49, welleozean@googlemail.com schrieb:
<div class="message-stanza open">&gt; &gt; Adding also --link zlib1_.dll it works.
&gt; &gt;
&gt; &gt; However, the same problem occurs with all  other missing .dll
&gt; &gt; Unfortunately, the error message doesn&#39;t say the name of the dll
&gt; &gt; missing
&gt; &gt; &#40;it has an arbitrary code&#41;, just the module referring to it, which
&gt; &gt; makes it
&gt; &gt; difficult to find the respective dlls
</div>&gt; 
&gt; My reply on the list did not show up, so I retry via rt.cpan.org:
&gt; 
&gt; you can use
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://docs.microsoft.com/en-us/sysinternals/downloads/process-">https://docs.microsoft.com/en-us/sysinternals/downloads/process-</a></span>
&gt; explorer
&gt; to see which dlls are opened by your packed executable on the packing
&gt; machine.
&gt;  The DLLs referenced there should either be in your PAR-cache-
&gt; directory or windows system libraries.
&gt; 
&gt; Christoph
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;13&nbsp;12:26:14&nbsp;2018</span>
    <span class="description">RSCHUPP [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you Shawn and Christoph for your excellent suggestions.

Cheers, Roderich
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;13&nbsp;12:26:16&nbsp;2018</span>
    <span class="description">RSCHUPP [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
