<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #49607 for JE: Problems w/ string literal scanning</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #49607 for JE: Problems w/ string literal scanning</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/JE/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/JE/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/JE/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/JE/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/JE">JE CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">49607</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/JE/Active/">JE</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
kevin [...] cameron.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-42234-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.035    </td>
  </tr>
  <tr id="CF-42235-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;10&nbsp;18:23:35&nbsp;2009</span>
    <span class="description">kevin [...] cameron.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Problems w/ string literal scanning</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m using JE::Parser version &#34;0.035&#34;;

Problem #1:
I&#39;m trying to use the WWW::Scripter module with
WWW::Scripter::Plugin::JavaScript to automtically parse a website.  The
plugin uses JE.

The website gives me a very long string literal &#40;&gt;50000 chars&#41; to supply
data for a graph in the javascript section.  This causes
JE::Parser::str&#40;&#41; to fail with this internal perl bug:
Complex regular subexpression recursion limit &#40;32766&#41; exceeded

I traced the failure to this regex:
        /\G &#40;?: &#39;&#40;&#40;?&gt;&#40;?:[^&#39;\\] | \\.&#41;*&#41;&#41;&#39;
                  |
                &#34;&#40;&#40;?&gt;&#40;?:[^&#34;\\] | \\.&#41;*&#41;&#41;&#34;  &#41;/xcgs or return;

I know nothing about the internal structure of perl&#39;s regex handler but
I don&#39;t see why this regex should cause a deep recursion.  It seems to
me that a reasonable implementation whould only recurse to a level of
maybe 5-10.  Nonetheless, after trying many different versions of the
regex, I couldn&#39;t find an alternative that produced the same result but
didn&#39;t hit the recursion limit.

As a workaround, I&#39;ve created a version of the rexex that doesn&#39;t hit
the recusion limit but requires more perl code to parse strings:

        # Use a simpler pattern &#40;but more code&#41; to break strings up into
extents bounded by the quote or escape
        my $yarn=&#34;&#34;;
        my $qt = substr&#40;$_,pos&#40;$_&#41;,1&#41;;
        $qt =~ /[&#39;&#34;]/ or return; # not a string literal if first char
not a quote
        pos&#40;$_&#41;++;
        my $done = 0;
        while &#40;defined&#40;substr&#40;$_,pos&#40;$_&#41;,1&#41;&#41;&#41; {
            my &#40;$part&#41; = /\G&#40;[^\\$qt]*&#41;/xcgs;
            defined&#40;$part&#41; or $part = &#34;&#34;;
            $yarn .= $part;
            my $next = substr&#40;$_,pos&#40;$_&#41;++,1&#41;;

            if &#40;$next eq &#34;\\&#34;&#41; {
                #pass on any escaped char
                $next = substr&#40;$_,pos&#40;$_&#41;++,1&#41;;
                $yarn .= &#34;\\$next&#34;;
            } else {
                # handle end quote
                $done = 1;
                last;
            }
        }

Problem #2:
The latest ECMA language reference &#40;Edition 5&#41; allows line breaks in the
source only when escaped with &#39;\&#39;.  I&#39;ve confirmed that at least the
Firefox javascript parser follows this rule.  JE::Parser::str was
allowing linefeeds anywhere between quotes.  I fixed str&#40;&#41; to disallow
unescaped line feeds by default.

Problem #3:
Per the ECMA spec, the usage of &#34;\&#34; at the end of a line within a string
literal is intended as a continuation of the string.  For example, the
following assertion should be true:
&#34;AB&#34; === &#34;A\
B&#34;;

JE::Parser::str was retaining the line feed after &#34;\&#34; which would render
the above assertion false.  I&#39;ve changed the code to remove the escape
and line feed.  It now also removes escaped DOS-stype line breaks &#34;\\\r\n&#34;.

Problem #4:
There is one test file &#34;t/10.02-entering-execution-contexts.t&#34; which
assumes the illegal inclusion of unescaped line feeds mentioned in
Problem #2.  Rather than fix the test, I figured that there may be some
other environments in the world that need it.  Therefore, I added a
variable &#34;$JE::Parser::allow_unescaped_lf&#34; which can be set if desired.
 I&#39;m not sure this is the best solution.  Perhaps it should be set in
some kind of &#34;set_options&#34; call or maybe it shouldn&#39;t be allowed at all.
 &#34;t/10.02-entering-execution-contexts.t&#34; passes with this flag set.

I&#39;ve created a new test file &#34;t/parse00.1-long_strings.t&#34; to test the
above issues.

I&#39;ve included the modified files in hopes they can be integrated into
the next release.

Thanks for your attention to this.

Kevin Cameron
San Jose, CA
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Parser.pm</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 10.02-entering-execution-contexts.t</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!perl -T

# WARNING: This is a brilliant example of how not to write code. &#40;Though
# I must admit that the sextuple backslash was fun.&#41;


BEGIN { require &#39;./t/test.pl&#39; }

use Test::More tests =&gt; 30;
use Scalar::Util &#39;refaddr&#39;;
use strict;
use utf8;

# Test 1: See if the module loads
BEGIN { use_ok&#40;&#39;JE&#39;&#41; };
my $j = new JE;

# allow non-spec compliant line feeds in string literals below
$JE::Parser::allow_unescaped_lf = 1;

# Tests 2-3: Bind the ok and diag functions
isa_ok&#40; $j-&gt;new_function&#40; ok  =&gt; \&#38;ok   &#41;, &#39;JE::Object::Function&#39; &#41;;
isa_ok&#40; $j-&gt;new_function&#40; diag =&gt; \&#38;diag &#41;, &#39;JE::Object::Function&#39; &#41;;

# Test 4: Bind Perl&#39;s eval to JS so we can do naughty stuff.
isa_ok&#40; $j-&gt;new_function&#40; peval =&gt; sub { eval shift } &#41;,
	&#39;JE::Object::Function&#39; &#41;;


# Run JS tests

defined $j-&gt;eval&#40; &lt;&lt;&#39;--end--&#39; &#41; or die;

// ---------------------------------------------------
/* Tests 5-9: global code */

// These line breaks would cause a syntax error according to spec.
// JE supports line breaks in string literals. Don&#39;t tell anyone.
peval&#40;&#39;
	my @scope = @$JE::Code::scope; # Don\&#39;t do this at 
	                                           # home--I mean in pro-
	                                         # duction  code!  These
	                                      # internal details are sub-
	                                  # ject to change.
	ok @scope == 1, &#34;scope chain in global code contains one object&#34;;
	ok refaddr $scope[0] == refaddr $j,
		&#34;that object is the global object&#34;;
&#39;&#41;;

var thing;
ok&#40;this.hasOwnProperty&#40;&#39;thing&#39;&#41;, &#39;global object is the variable object&#39;&#41;
ok&#40;!delete thing, &#39;vars declared in global code are undeletable&#39;&#41;

peval&#40;&#39;ok refaddr shift @_ == refaddr $j,
	&#34;the \&#39;this\&#39; value is the global object&#34;&#39;, this&#41;


// ---------------------------------------------------
/* Tests 10-17: function code */

var obj = Object&#40;&#41;;
with&#40;obj&#41; {
	obj.f = function&#40;&#41;{
		peval&#40;&#39;
			my @scope = @$JE::Code::scope;
			my @fscope = @{$${$j-&gt;eval&#40;&#34;obj.f&#34;&#41;-&gt;get}{scope}};
			ok @scope  == 3, q/@scope == 3/;
			ok @fscope == 2, q/@fscope == 2/;
			ok refaddr $scope[0] == refaddr $fscope[0] &#38;&#38;
			   refaddr $scope[0] == refaddr $j,
				&#34;first object in function\&#39;s scope chain&#34; .
				&#34; is the global obj&#34;;
			ok refaddr $scope[1] == refaddr $fscope[1] &#38;&#38;
			   refaddr $scope[1] == refaddr $j-&gt;prop&#40;&#34;obj&#34;&#41;,
				&#34;\&#39;with\&#39; object in scope chain&#34;;
			ok ref $scope[2] eq \&#39;JE::Object::Function::Call\&#39;,
				&#34;\\\$scope has a call object&#34;;
		&#39;&#41;;

		var thing;
		ok&#40;peval&#40;&#39;exists $JE::Code::scope-&gt;[-1]{thing}
			&#39;&#41;, &#34;activation object is the variable object&#34;&#41;
		ok&#40;!delete thing,
			&#39;vars declared in function code are undeletable&#39;&#41;
		ok&#40;this === obj, &#39;&#34;this&#34; value in function code&#39;&#41;
	}
}
obj.f&#40;&#41;


// ---------------------------------------------------
/* Tests 18-22: &#39;global-eval code&#39; &#40;eval code called from global code&#41; */

eval&#40;&#34;

peval&#40;&#39;
	my @scope = @$JE::Code::scope;
	ok @scope == 1,
		\&#34;scope chain in global-eval code contains one object\&#34;;
	ok refaddr $scope[0] == refaddr $j,
		\&#34;object in global-eval scope chain is the global object\&#34;;
&#39;&#41;;

var thing2;
ok&#40;this.hasOwnProperty&#40;&#39;thing2&#39;&#41;,
	&#39;global object is the variable object in global-eval code&#39;&#41;
ok&#40;delete thing2, &#39;vars declared in global-eval code are deletable&#39;&#41;

peval&#40;&#39;ok refaddr shift&#40;@_&#41; == refaddr $j,
	\&#34;the \\&#39;this\\&#39; value in global-eval code is the global object\&#34;&#39;, this&#41;
&#34;&#41;

// ---------------------------------------------------
/* Tests 23-30: function-eval code */

var obj2 = Object&#40;&#41;;
with&#40;obj2&#41; {
	obj2.f = function&#40;&#41;{
		eval&#40;&#34;

		peval&#40;&#39;
			my @scope = @$JE::Code::scope;
			my @fscope =
				@{$${$j-&gt;eval&#40;\&#34;obj2.f\&#34;&#41;-&gt;get}{scope}};
			ok @scope  == 3, q/@scope == 3 &#40;function-eval&#41;/;
			ok @fscope == 2, q/@fscope == 2 &#40;function-eval&#41;/;
			ok refaddr $scope[0] == refaddr $fscope[0] &#38;&#38;
			   refaddr $scope[0] == refaddr $j,
			       \&#34;first object in function\\&#39;s scope \&#34; .
			       \&#34; chain is the global obj &#40;in eval code&#41;\&#34;;
			ok refaddr $scope[1] == refaddr $fscope[1] &#38;&#38;
			   refaddr $scope[1] == refaddr $j-&gt;prop&#40;\&#34;obj2\&#34;&#41;,
				\&#34;\\&#39;with\\&#39; object in function-eval \&#34; .
				\&#34;scope chain\&#34;;
			ok ref $scope[2] eq
				\\&#39;JE::Object::Function::Call\\&#39;,
				\&#34;\\\\\\$scope has a call object\&#34;;
		&#39;&#41;;

		var thing;
		ok&#40;peval&#40;&#39;exists $JE::Code::scope-&gt;[-1]{thing}
			&#39;&#41;, \&#34;activation object is the variable object \&#34; +
			    \&#34;in function-eval code\&#34;&#41;
		ok&#40;delete thing,
		    &#39;vars declared in function-eval code are deletable&#39;&#41;
		ok&#40;this === obj2, &#39;\&#34;this\&#34; value in function-eval code&#39;&#41;

		&#34;&#41; // end of eval
	}
}
obj2.f&#40;&#41;


--end--
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> parse00.1-long_strings.t</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!perl

use Test::More tests =&gt; 33;
use strict;
no warnings &#39;utf8&#39;;

# build long strings for tests
# has imbedded \n and different kinds of quotes
# parts from which to build long strings
my $part_plain            = &#34;x&#34; x 50;
my $part_quotes           = &#40;&#34;y&#34; x 8 . &#34;\\\&#34;&#34; . &#34;z&#34; x 8 . &#34;\\\&#39;&#34;&#41; x 3;
my $part_nl               = &#34;a&#34; x 49 . &#34;\n&#34;;
my $part_cont_nl          = &#34;b&#34; x 49 . &#34;\\\n&#34;;
my $part_dosnl            = &#34;a&#34; x 49 . &#34;\r\n&#34;;
my $part_cont_dosnl       = &#34;b&#34; x 49 . &#34;\\\r\n&#34;;
my $part_quote_nl         = $part_quotes . &#34;\n&#34;;
my $part_quote_cont_nl    = $part_quotes . &#34;\\\n&#34;;
my $part_quote_dosnl      = $part_quotes . &#34;\r\n&#34;;
my $part_quote_cont_dosnl = $part_quotes . &#34;\\\r\n&#34;;

# legal test strings
my $long_legal_nl        = &#40;$part_plain . $part_cont_nl . $part_quotes . $part_cont_dosnl . $part_plain . $part_quote_cont_nl . $part_quote_cont_dosnl&#41; x 100;
my $long_legal_nonl      = &#40;$part_plain . $part_quotes&#41; x 500;
my $long_legal_noqt_nonl = &#40;$part_plain&#41; x 10000;
my $short_legal_cont_nl  = &#40;$part_cont_nl . $part_quote_cont_nl . $part_cont_dosnl . $part_quote_cont_dosnl&#41; x 3;
my $short_legal_nonl     = &#40;$part_plain   . $part_quotes&#41;;

# illegal test strings &#40;line continuations w/o \&#41;
my $short_illegal   = &#40;$part_nl    . $part_quote_nl . $part_dosnl . $part_quote_dosnl&#41; x 3;
my $long_illegal    = &#40;$part_plain . $part_cont_nl . $part_quotes . $part_nl . $part_plain . $part_quote_nl&#41; x 200;

my $single = &#34;\&#39;&#34;;
my $double = &#34;\&#34;&#34;;
my %qname = &#40;$single, &#39;single&#39;, $double, &#39;double&#39;&#41;;

my $j;

# add arbitrary quotes
sub add_quote {
    my &#40;$qt, $str&#41; = @_;
    return $qt . $str . $qt;
}
# compute expected values
# only works for cases in this test
sub get_exp {
    my &#40;$qt, $in&#41; = @_;
    $in =~ s/\\\r?\n//gx; # concatenate legal line continuations
    $in =~ s/\\&#40;.&#41;/$1/gx;
    $in;
}
# test legal string literal
# try both single and double quoted versions
sub test_legal {
    my &#40;$str, $msg&#41; = @_;
    test_legal_1 &#40;$single, $str, $msg&#41;;
    test_legal_1 &#40;$double, $str, $msg&#41;;
}
sub test_legal_1 {
    my &#40;$qt, $str, $msg&#41; = @_;
    my $code;
    my $got = &#34;&#34;;

    my $qmsg = &#34;$qname{$qt}-quoted $msg&#34;;

    # test for legal syntax
    ok &#40;$code = $j-&gt;parse &#40;&#34;var a = &#34; . add_quote&#40;$qt, $str&#41; . &#34;;\n&#34;&#41;, &#34;Parse $qmsg&#34;&#41;;

    # test for correct value
    $code-&gt;execute       if $code;
    $got = $j-&gt;prop&#40;&#34;a&#34;&#41; if $code;
    my $exp = get_exp &#40;$qt, $str&#41;;
    if &#40;length &#40;$str&#41; &lt; 1000&#41; {
        is &#40;$got ,  $exp, &#34;Value of $qmsg&#34;&#41;;  # more descriptive error message
    } else {
        ok &#40;$got eq $exp, &#34;Value of $qmsg&#34;&#41;;  # shorter error message for gigantic strings
    }
}
# test illegal string litteral
sub test_illegal {
    my &#40;$str, $msg&#41; = @_;

    # test for catch of illegal syntax &#40;parse should fail&#41;
    ok &#40;!$j-&gt;parse &#40;&#34;var a = &#34; . add_quote&#40;$single, $str&#41; . &#34;;\n&#34;&#41;, &#34;single-quoted $msg&#34;&#41;;
    ok &#40;!$j-&gt;parse &#40;&#34;var a = &#34; . add_quote&#40;$double, $str&#41; . &#34;;\n&#34;&#41;, &#34;double-quoted $msg&#34;&#41;;
}


#--------------------------------------------------------------------#
# Test 1: See if the module loads

BEGIN { use_ok&#40;&#39;JE&#39;&#41; };
$j = new JE;

#--------------------------------------------------------------------#
# Tests 2-21: Parse legal strings

test_legal &#40;$long_legal_nl       , &#39;long string with escaped quotes and legal line continuations&#39;&#41;;
test_legal &#40;$long_legal_nonl     , &#39;long string with escaped quotes and no line continuations&#39;   &#41;;
test_legal &#40;$long_legal_noqt_nonl, &#39;long string with no escaped quotes or line continuations&#39;    &#41;;
test_legal &#40;$short_legal_cont_nl , &#39;short string with legal line continuations&#39;                  &#41;;
test_legal &#40;$short_legal_nonl    , &#39;short string with escaped quotes and no line continuations&#39;  &#41;;

#--------------------------------------------------------------------#
# Tests 22-25: Parse illegal strings &#40;must fail&#41;

test_illegal &#40;$long_illegal      , &#39;long string with illegal line continuations&#39; &#41;;
test_illegal &#40;$short_illegal     , &#39;short string with illegal line continuations&#39;&#41;;

#--------------------------------------------------------------------#
# Tests 26-33: Illegal line feeds can be allowed by setting a parser option

$JE::Parser::allow_unescaped_lf = 1;

test_legal &#40;$long_illegal      , &#39;long string with illegal line continuations  &#40;allow unescape line feeds&#41;&#39; &#41;;
test_legal &#40;$short_illegal     , &#39;short string with illegal line continuations &#40;allow unescape line feeds&#41;&#39;&#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;10&nbsp;21:39:54&nbsp;2009</span>
    <span class="description">kevin [...] cameron.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">BTW:

mojo:~/try/JE/build/JE%perl --version

This is perl, v5.10.0 built for x86_64-linux-thread-multi
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;10&nbsp;21:39:56&nbsp;2009</span>
    <span class="description">kevin [...] cameron.com -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;13&nbsp;15:26:19&nbsp;2009</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you for the files! &#40;This is the first time anyone else has done any serious hacking on 
JE.&#41; I have found a more efficient way of making this work. I address each of the issues below.

On Thu Sep 10 18:23:35 2009, kcameron wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m using JE::Parser version &#34;0.035&#34;;
&gt; 
&gt; Problem #1:
&gt; I&#39;m trying to use the WWW::Scripter module with
&gt; WWW::Scripter::Plugin::JavaScript to automtically parse a website.  The
&gt; plugin uses JE.
&gt; 
&gt; The website gives me a very long string literal &#40;&gt;50000 chars&#41; to supply
&gt; data for a graph in the javascript section.  This causes
&gt; JE::Parser::str&#40;&#41; to fail with this internal perl bug:
&gt; Complex regular subexpression recursion limit &#40;32766&#41; exceeded
&gt; 
&gt; I traced the failure to this regex:
&gt;         /\G &#40;?: &#39;&#40;&#40;?&gt;&#40;?:[^&#39;\\] | \\.&#41;*&#41;&#41;&#39;
&gt;                   |
&gt;                 &#34;&#40;&#40;?&gt;&#40;?:[^&#34;\\] | \\.&#41;*&#41;&#41;&#34;  &#41;/xcgs or return;
&gt; 
&gt; I know nothing about the internal structure of perl&#39;s regex handler but
&gt; I don&#39;t see why this regex should cause a deep recursion.
</div>
I haven’t delved into perl’s regexp engine myself, but in the engine that ECMAScript 
describes every iteration of a repetition &#40;*&#41; calls another function, so a series of ‘returns’ can 
allow backtracking. perl is probably similar.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It seems to
&gt; me that a reasonable implementation whould only recurse to a level of
&gt; maybe 5-10.  Nonetheless, after trying many different versions of the
&gt; regex, I couldn&#39;t find an alternative that produced the same result but
&gt; didn&#39;t hit the recursion limit.
</div>
I’ve found that if I remove the alternation &#40;|&#41; by using Jeffrey Friedl’s ‘unrolling’ technique 
&#40;see the Owl Book [Mastering Regular Expressions]&#41;, perl considers the pattern simpler, and 
it theoretically runs faster than before and faster than the method you propose. Here it is:

        /\G &#40;?: &#39;&#40;[^&#39;\\]*&#40;?:\\.[^&#39;\\]*&#41;*&#41;&#39;
                  |
                &#34;&#40;[^&#34;\\]*&#40;?:\\.[^&#34;\\]*&#41;*&#41;&#34;  &#41;/xcgs

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; As a workaround, I&#39;ve created a version of the rexex that doesn&#39;t hit
&gt; the recusion limit but requires more perl code to parse strings:
&gt; 
&gt;         [...code...]
&gt; 
&gt; Problem #2:
&gt; The latest ECMA language reference &#40;Edition 5&#41;
</div>
I didn’t know they were up to 5. I’d better get myself a copy!

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; allows line breaks in the
&gt; source only when escaped with &#39;\&#39;.  I&#39;ve confirmed that at least the
&gt; Firefox javascript parser
</div>
aka SpiderMonkey

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; follows this rule.  JE::Parser::str was
&gt; allowing linefeeds anywhere between quotes.  I fixed str&#40;&#41; to disallow
&gt; unescaped line feeds by default.
</div>
I did this since it was more work to disallow it and ECMA allows extensions to the syntax. I 
see no reason to disallow it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Problem #3:
&gt; Per the ECMA spec, the usage of &#34;\&#34; at the end of a line within a string
&gt; literal is intended as a continuation of the string.  For example, the
&gt; following assertion should be true:
&gt; &#34;AB&#34; === &#34;A\
&gt; B&#34;;
</div>
Ah, yes. That’s new in ECMAScript 5.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; JE::Parser::str was retaining the line feed after &#34;\&#34; which would render
&gt; the above assertion false.  I&#39;ve changed the code to remove the escape
&gt; and line feed.  It now also removes escaped DOS-stype line breaks &#34;\\\r\n&#34;.
</div>
[\x{2028}\x{2029}] and a plain \r are allowed as well.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Problem #4:
&gt; There is one test file &#34;t/10.02-entering-execution-contexts.t&#34; which
&gt; assumes the illegal inclusion of unescaped line feeds mentioned in
&gt; Problem #2.  Rather than fix the test, I figured that there may be some
&gt; other environments in the world that need it.  Therefore, I added a
&gt; variable &#34;$JE::Parser::allow_unescaped_lf&#34; which can be set if desired.
&gt;  I&#39;m not sure this is the best solution.  Perhaps it should be set in
&gt; some kind of &#34;set_options&#34; call or maybe it shouldn&#39;t be allowed at all.
&gt;  &#34;t/10.02-entering-execution-contexts.t&#34; passes with this flag set.
</div>
JE already allows arguments &#40;max_ops and html_mode&#41; to its constructor. There are 
accessors that correspond to this. It this case, however, I don’t think it is necessary. See 
above.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I&#39;ve created a new test file &#34;t/parse00.1-long_strings.t&#34; to test the
&gt; above issues.
&gt; 
&gt; I&#39;ve included the modified files in hopes they can be integrated into
&gt; the next release.
</div>
Thank you. I have incorporated your changes along with my suggested tweaks and released a 
new version:  cpan/authors/id/S/SP/SPROUT/JE-0.036.tar.gz
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;13&nbsp;15:26:22&nbsp;2009</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;13&nbsp;23:55:56&nbsp;2009</span>
    <span class="description">kevin [...] cameron.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #49607] Problems w/ string literal scanning</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 13 Sep 2009 20:55:31 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Father Chrysostomos via RT&#34; &lt;bug-JE [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Cameron &lt;kevin [...] cameron.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space"> Thanks for the quick update Father.  Of course, I don&#39;t agree with your
decision to let JE be more permissive than the published spec.  IMHO, it&#39;s
not a good way to promote cross-platform code compatibility.  Still, it&#39;s
your module so I won&#39;t say anything more.

 I&#39;m starting to look at the next two issues:
 Error: There is no default confirm function at
/home/kcameron/myperl/lib/perl5/site_perl/5.10.0/WWW/Scripter/Plugin/JavaScript/JE.pm
line 39
 TypeError: undefined has no properties, not even one named length at
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.pvwatch.com/scripts/calendarDateInput.js">http://www.pvwatch.com/scripts/calendarDateInput.js</a></span>, [1] line 361.

 I&#39;ll let you know if I figure something out.

 Regards,

 Kev

 On Sun 13/09/09 1:26 PM , &#34;Father Chrysostomos via RT&#34; bug-JE@rt.cpan.org
sent:
 <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=49607">https://rt.cpan.org/Ticket/Display.html?id=49607</a></span> [2] &gt;

 Thank you for the files! &#40;This is the first time anyone else has done any
serious hacking on 
 JE.&#41; I have found a more efficient way of making this work. I address
each of the issues below.

 On Thu Sep 10 18:23:35 2009, kcameron wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"> &gt; I&#39;m using JE::Parser version &#34;0.035&#34;;
 &gt; 
 &gt; Problem #1:
 &gt; I&#39;m trying to use the WWW::Scripter module with
 &gt; WWW::Scripter::Plugin::JavaScript to automtically parse a website. The
 &gt; plugin uses JE.
 &gt; 
 &gt; The website gives me a very long string literal &#40;&gt;50000 chars&#41; to
</div>supply
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"> &gt; data for a graph in the javascript section. This causes
 &gt; JE::Parser::str&#40;&#41; to fail with this internal perl bug:
 &gt; Complex regular subexpression recursion limit &#40;32766&#41; exceeded
 &gt; 
 &gt; I traced the failure to this regex:
 &gt; /G &#40;?: &#39;&#40;&#40;?&gt;&#40;?:[^&#39;\] | \.&#41;*&#41;&#41;&#39;
 &gt; |
 &gt; &#34;&#40;&#40;?&gt;&#40;?:[^&#34;\] | \.&#41;*&#41;&#41;&#34; &#41;/xcgs or return;
 &gt; 
 &gt; I know nothing about the internal structure of perl&#39;s regex handler but
 &gt; I don&#39;t see why this regex should cause a deep recursion.
</div>
 I haven’t delved into perl’s regexp engine myself, but in the engine
that ECMAScript 
 describes every iteration of a repetition &#40;*&#41; calls another function, so
a series of ‘returns’ can 
 allow backtracking. perl is probably similar.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"> &gt; It seems to
 &gt; me that a reasonable implementation whould only recurse to a level of
 &gt; maybe 5-10. Nonetheless, after trying many different versions of the
 &gt; regex, I couldn&#39;t find an alternative that produced the same result but
 &gt; didn&#39;t hit the recursion limit.
</div>
 I’ve found that if I remove the alternation &#40;|&#41; by using Jeffrey
Friedl’s ‘unrolling’ technique 
 &#40;see the Owl Book [Mastering Regular Expressions]&#41;, perl considers the
pattern simpler, and 
 it theoretically runs faster than before and faster than the method you
propose. Here it is:

 /G &#40;?: &#39;&#40;[^&#39;\]*&#40;?:\.[^&#39;\]*&#41;*&#41;&#39;
 |
 &#34;&#40;[^&#34;\]*&#40;?:\.[^&#34;\]*&#41;*&#41;&#34; &#41;/xcgs

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"> &gt; 
 &gt; As a workaround, I&#39;ve created a version of the rexex that doesn&#39;t hit
 &gt; the recusion limit but requires more perl code to parse strings:
 &gt; 
 &gt; [...code...]
 &gt; 
 &gt; Problem #2:
 &gt; The latest ECMA language reference &#40;Edition 5&#41;
</div>
 I didn’t know they were up to 5. I’d better get myself a copy!

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"> &gt; allows line breaks in the
 &gt; source only when escaped with &#39;&#39;. I&#39;ve confirmed that at least the
 &gt; Firefox javascript parser
</div>
 aka SpiderMonkey

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"> &gt; follows this rule. JE::Parser::str was
 &gt; allowing linefeeds anywhere between quotes. I fixed str&#40;&#41; to disallow
 &gt; unescaped line feeds by default.
</div>
 I did this since it was more work to disallow it and ECMA allows
extensions to the syntax. I 
 see no reason to disallow it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"> &gt; 
 &gt; Problem #3:
 &gt; Per the ECMA spec, the usage of &#34;&#34; at the end of a line within a string
 &gt; literal is intended as a continuation of the string. For example, the
 &gt; following assertion should be true:
 &gt; &#34;AB&#34; === &#34;A
 &gt; B&#34;;
</div>
 Ah, yes. That’s new in ECMAScript 5.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"> &gt; 
 &gt; JE::Parser::str was retaining the line feed after &#34;&#34; which would render
 &gt; the above assertion false. I&#39;ve changed the code to remove the escape
 &gt; and line feed. It now also removes escaped DOS-stype line breaks &#34;\rn&#34;.
</div>
 [x{2028}x{2029}] and a plain r are allowed as well.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"> &gt; 
 &gt; Problem #4:
 &gt; There is one test file &#34;t/10.02-entering-execution-contexts.t&#34; which
 &gt; assumes the illegal inclusion of unescaped line feeds mentioned in
 &gt; Problem #2. Rather than fix the test, I figured that there may be some
 &gt; other environments in the world that need it. Therefore, I added a
 &gt; variable &#34;$JE::Parser::allow_unescaped_lf&#34; which can be set if desired.
 &gt; I&#39;m not sure this is the best solution. Perhaps it should be set in
 &gt; some kind of &#34;set_options&#34; call or maybe it shouldn&#39;t be allowed at
</div>all.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"> &gt; &#34;t/10.02-entering-execution-contexts.t&#34; passes with this flag set.
</div>
 JE already allows arguments &#40;max_ops and html_mode&#41; to its constructor.
There are 
 accessors that correspond to this. It this case, however, I don’t think
it is necessary. See 
 above.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"> &gt; 
 &gt; I&#39;ve created a new test file &#34;t/parse00.1-long_strings.t&#34; to test the
 &gt; above issues.
 &gt; 
 &gt; I&#39;ve included the modified files in hopes they can be integrated into
 &gt; the next release.
</div>
 Thank you. I have incorporated your changes along with my suggested
tweaks and released a 
 new version: cpan/authors/id/S/SP/SPROUT/JE-0.036.tar.gz

 

Links:
------
[1] <span class="clickylink"><a target="new" rel="nofollow" href="http://www.pvwatch.com/scripts/calendarDateInput.js">http://www.pvwatch.com/scripts/calendarDateInput.js</a></span>,
[2]
<span class="clickylink"><a target="new" rel="nofollow" href="http://webmail.sonic.net/parse.php?redirect=https://rt.cpan.org/Ticket/Display.html%3Fid%3D49607">http://webmail.sonic.net/parse.php?redirect=https://rt.cpan.org/Ticket/Display.html%3Fid%3D49607</a></span>
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;13&nbsp;23:55:58&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;12&nbsp;11:43:27&nbsp;2009</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Sep 13 23:55:56 2009, kcameron wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  I&#39;ll let you know if I figure something out.
</div>
If you do find anything, please open a new ticket. I’m marking this one as resolved &#40;again&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;12&nbsp;11:43:28&nbsp;2009</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
