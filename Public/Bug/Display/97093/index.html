<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #97093 for Gtk3: libgtk3-perl: FTBFS with Perl 5.20: test failures</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #97093 for Gtk3: libgtk3-perl: FTBFS with Perl 5.20: test failures</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Gtk3/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Gtk3/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Gtk3/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Gtk3/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Gtk3">Gtk3 CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">97093</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Gtk3/Active/">Gtk3</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">XAOC [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
gregoa [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-240782-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-240783-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.017    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;09&nbsp;13:03:49&nbsp;2014</span>
    <span class="description">gregoa [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> gregoa [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> libgtk3-perl: FTBFS with Perl 5.20: test failures</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">We have the following bug reported to the Debian package  of Gtk3
&#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://bugs.debian.org/752986&#41;">https://bugs.debian.org/752986&#41;</a></span>:

It doesn&#39;t seem to be a bug in the packaging, so you may want to take
a look. Thanks!

Test output 1:

------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----

  #   Failed test at t/zz-GtkCellLayoutIface.t line 23.
  #          got: &#39;0&#39;
  #     expected: &#39;2&#39;
  
  #   Failed test &#39;undef isa &#39;Gtk3::CellRendererText&#39;&#39;
  #   at t/zz-GtkCellLayoutIface.t line 24.
  #     undef isn&#39;t defined
  
  #   Failed test &#39;undef isa &#39;Gtk3::CellRendererToggle&#39;&#39;
  #   at t/zz-GtkCellLayoutIface.t line 25.
  #     undef isn&#39;t defined
  # Looks like you failed 3 tests of 35.
  t/zz-GtkCellLayoutIface.t ...... 
  Dubious, test returned 3 &#40;wstat 768, 0x300&#41;
  Failed 3/35 subtests 
  [...]
  Test Summary Report
  -------------------
  t/zz-GtkCellLayoutIface.t    &#40;Wstat: 768 Tests: 35 Failed: 3&#41;
    Failed tests:  24-26
    Non-zero exit status: 3
  t/zz-GtkTreeModelIface.t     &#40;Wstat: 134 Tests: 168 Failed: 0&#41;
    Non-zero wait status: 134
    Parse errors: Bad plan.  You planned 171 tests but ran 168.
  Files=21, Tests=791,  7 wallclock secs &#40; 0.25 usr  0.02 sys +  4.02 cusr  0.36 csys =  4.65 CPU&#41;
  Result: FAIL

------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----


Test output 2:

------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----

t/00-init.t .................... ok
t/floating-refs.t .............. ok
t/overrides.t .................. ok
t/signals.t .................... ok
t/vfuncs.t ..................... ok
t/zz-GdkEvent.t ................ ok
t/zz-GtkActionGroup.t .......... ok
t/zz-GtkBuilder.t .............. ok
*** Error in `/usr/bin/perl&#39;: corrupted double-linked list: 0x0000000001fc0840 ***
t/zz-GtkCellLayoutIface.t ...... 
Failed 12/35 subtests 
t/zz-GtkCellRendererIface.t .... skipped: tree model ctors not properly supported
t/zz-GtkContainer.t ............ ok
t/zz-GtkDialog.t ............... ok
t/zz-GtkImage.t ................ ok
t/zz-GtkInfoBar.t .............. ok
t/zz-GtkRadioAction.t .......... ok
t/zz-GtkRadioButton.t .......... ok
t/zz-GtkRadioMenuItem.t ........ ok
t/zz-GtkRadioToolButton.t ...... ok
t/zz-GtkRecentChooserDialog.t .. ok
t/zz-GtkTextBuffer.t ........... ok
Use of uninitialized value in subtraction &#40;-&#41; at /tmp/buildd/libgtk3-perl-0.016/blib/lib/Gtk3.pm line 1164.
perl: malloc.c:3700: _int_malloc: Assertion `victim-&gt;fd_nextsize-&gt;bk_nextsize == victim&#39; failed.
t/zz-GtkTreeModelIface.t ....... 
Failed 3/171 subtests 
    &#40;less 8 skipped subtests: 160 okay&#41;

Test Summary Report
-------------------
t/zz-GtkCellLayoutIface.t    &#40;Wstat: 134 Tests: 23 Failed: 0&#41;
  Non-zero wait status: 134
  Parse errors: Bad plan.  You planned 35 tests but ran 23.
t/zz-GtkTreeModelIface.t     &#40;Wstat: 134 Tests: 168 Failed: 0&#41;
  Non-zero wait status: 134
  Parse errors: Bad plan.  You planned 171 tests but ran 168.
Files=21, Tests=779,  6 wallclock secs &#40; 0.12 usr  0.06 sys +  3.11 cusr  0.27 csys =  3.56 CPU&#41;
Result: FAIL

------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----

Thanks for considering,
  gregor herrmann,
  Debian Perl Group
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;09&nbsp;13:10:31&nbsp;2014</span>
    <span class="description">XAOC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I see via your Debian bug report that you&#39;re using Gtk3 0.16.

Gtk3 0.17 was released last week, and included some fixes for Perl 5.20.

Can you retry your build using 0.17 please, and update this ticket if the problems you were seeing are still present in 0.17?

Thanks,

Brian

On Wed Jul 09 13:03:49 2014, GREGOA wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; We have the following bug reported to the Debian package  of Gtk3
&gt; &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://bugs.debian.org/752986&#41;">https://bugs.debian.org/752986&#41;</a></span>:
&gt; 
&gt; It doesn&#39;t seem to be a bug in the packaging, so you may want to take
&gt; a look. Thanks!
&gt; 
&gt; Test output 1:
&gt; 
&gt; ------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----
&gt; 
&gt; #   Failed test at t/zz-GtkCellLayoutIface.t line 23.
&gt; #          got: &#39;0&#39;
&gt; #     expected: &#39;2&#39;
&gt; 
&gt; #   Failed test &#39;undef isa &#39;Gtk3::CellRendererText&#39;&#39;
&gt; #   at t/zz-GtkCellLayoutIface.t line 24.
&gt; #     undef isn&#39;t defined
&gt; 
&gt; #   Failed test &#39;undef isa &#39;Gtk3::CellRendererToggle&#39;&#39;
&gt; #   at t/zz-GtkCellLayoutIface.t line 25.
&gt; #     undef isn&#39;t defined
&gt; # Looks like you failed 3 tests of 35.
&gt;  t/zz-GtkCellLayoutIface.t ......
&gt; Dubious, test returned 3 &#40;wstat 768, 0x300&#41;
&gt;  Failed 3/35 subtests
&gt; [...]
&gt; Test Summary Report
&gt; -------------------
&gt; t/zz-GtkCellLayoutIface.t    &#40;Wstat: 768 Tests: 35 Failed: 3&#41;
&gt;   Failed tests:  24-26
&gt;   Non-zero exit status: 3
&gt; t/zz-GtkTreeModelIface.t     &#40;Wstat: 134 Tests: 168 Failed: 0&#41;
&gt;   Non-zero wait status: 134
&gt;   Parse errors: Bad plan.  You planned 171 tests but ran 168.
&gt; Files=21, Tests=791,  7 wallclock secs &#40; 0.25 usr  0.02 sys +  4.02
&gt; cusr  0.36 csys =  4.65 CPU&#41;
&gt; Result: FAIL
&gt; 
&gt; ------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----
&gt; 
&gt; 
&gt; Test output 2:
&gt; 
&gt; ------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----
&gt; 
&gt; t/00-init.t .................... ok
&gt; t/floating-refs.t .............. ok
&gt; t/overrides.t .................. ok
&gt; t/signals.t .................... ok
&gt; t/vfuncs.t ..................... ok
&gt; t/zz-GdkEvent.t ................ ok
&gt; t/zz-GtkActionGroup.t .......... ok
&gt; t/zz-GtkBuilder.t .............. ok
&gt; *** Error in `/usr/bin/perl&#39;: corrupted double-linked list:
&gt; 0x0000000001fc0840 ***
&gt;  t/zz-GtkCellLayoutIface.t ......
&gt;  Failed 12/35 subtests
&gt; t/zz-GtkCellRendererIface.t .... skipped: tree model ctors not
&gt; properly supported
&gt; t/zz-GtkContainer.t ............ ok
&gt; t/zz-GtkDialog.t ............... ok
&gt; t/zz-GtkImage.t ................ ok
&gt; t/zz-GtkInfoBar.t .............. ok
&gt; t/zz-GtkRadioAction.t .......... ok
&gt; t/zz-GtkRadioButton.t .......... ok
&gt; t/zz-GtkRadioMenuItem.t ........ ok
&gt; t/zz-GtkRadioToolButton.t ...... ok
&gt; t/zz-GtkRecentChooserDialog.t .. ok
&gt; t/zz-GtkTextBuffer.t ........... ok
&gt; Use of uninitialized value in subtraction &#40;-&#41; at /tmp/buildd/libgtk3-
&gt; perl-0.016/blib/lib/Gtk3.pm line 1164.
&gt; perl: malloc.c:3700: _int_malloc: Assertion `victim-&gt;fd_nextsize-
<div class="message-stanza open">&gt; &gt;bk_nextsize == victim&#39; failed.
</div>&gt;  t/zz-GtkTreeModelIface.t .......
&gt;  Failed 3/171 subtests
&gt;     &#40;less 8 skipped subtests: 160 okay&#41;
&gt; 
&gt; Test Summary Report
&gt; -------------------
&gt; t/zz-GtkCellLayoutIface.t    &#40;Wstat: 134 Tests: 23 Failed: 0&#41;
&gt;   Non-zero wait status: 134
&gt;   Parse errors: Bad plan.  You planned 35 tests but ran 23.
&gt; t/zz-GtkTreeModelIface.t     &#40;Wstat: 134 Tests: 168 Failed: 0&#41;
&gt;   Non-zero wait status: 134
&gt;   Parse errors: Bad plan.  You planned 171 tests but ran 168.
&gt; Files=21, Tests=779,  6 wallclock secs &#40; 0.12 usr  0.06 sys +  3.11
&gt; cusr  0.27 csys =  3.56 CPU&#41;
&gt; Result: FAIL
&gt; 
&gt; ------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----------8&lt;-----
&gt; 
&gt; Thanks for considering,
&gt;   gregor herrmann,
&gt;   Debian Perl Group
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;09&nbsp;13:10:32&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;09&nbsp;13:10:32&nbsp;2014</span>
    <span class="description">XAOC [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;09&nbsp;14:11:56&nbsp;2014</span>
    <span class="description">torsten.schoenfeld [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #97093] libgtk3-perl: FTBFS with Perl 5.20: test failures</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 09 Jul 2014 20:11:45 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Gtk3 [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Torsten Schönfeld &lt;torsten.schoenfeld [...] gmx.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes, Gtk3 0.017 and Glib::Object::Introspection 0.024 should fix these 
issues.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;10&nbsp;11:10:43&nbsp;2014</span>
    <span class="description">gregoa [...] cpan.org -  Requestor GREGOA added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;10&nbsp;11:22:03&nbsp;2014</span>
    <span class="description">gregoa [...] debian.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: Bug#752986: [rt.cpan.org #97093] Perl 5.20 issues with Gtk3 0.16</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 10 Jul 2014 17:21:32 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Brian Manning &lt;cpan [...] xaoc.org&gt;, 752986 [...] bugs.debian.org, bug-Gtk3 [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> gregor herrmann &lt;gregoa [...] debian.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, 09 Jul 2014 10:15:15 -0700, Brian Manning wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Gtk3 0.17 was released on July 2nd, and includes some fixes for Perl 5.20.
&gt; 
&gt; Can you please test with the 0.17 release and confirm the build issues
&gt; still exist?
</div>
Thanks for the pointer.

Unfortunately I&#39;m seeing the same test failures:

#v+
   debian/rules override_dh_auto_test
make[1]: Entering directory &#39;/tmp/buildd/libgtk3-perl-0.017&#39;
mkdir -p /tmp/buildd/libgtk3-perl-0.017/debian/build
GTK_MODULES= HOME=/tmp/buildd/libgtk3-perl-0.017/debian/build xvfb-run -a dh_auto_test
make[2]: Entering directory &#39;/tmp/buildd/libgtk3-perl-0.017&#39;
PERL_DL_NONLAZY=1 /usr/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
t/00-init.t .................... ok
t/floating-refs.t .............. ok
t/overrides.t .................. ok
t/signals.t .................... ok
t/vfuncs.t ..................... ok
t/zz-GdkEvent.t ................ ok
t/zz-GtkActionGroup.t .......... ok
t/zz-GtkBuilder.t .............. ok
*** Error in `/usr/bin/perl&#39;: corrupted double-linked list: 0x0000000001579840 ***
t/zz-GtkCellLayoutIface.t ...... 
Failed 12/35 subtests 
t/zz-GtkCellRendererIface.t .... skipped: tree model ctors not properly supported
t/zz-GtkContainer.t ............ ok
t/zz-GtkDialog.t ............... ok
t/zz-GtkImage.t ................ ok
t/zz-GtkInfoBar.t .............. ok
t/zz-GtkRadioAction.t .......... ok
t/zz-GtkRadioButton.t .......... ok
t/zz-GtkRadioMenuItem.t ........ ok
t/zz-GtkRadioToolButton.t ...... ok
t/zz-GtkRecentChooserDialog.t .. ok
t/zz-GtkTextBuffer.t ........... ok
Use of uninitialized value in subtraction &#40;-&#41; at /tmp/buildd/libgtk3-perl-0.017/blib/lib/Gtk3.pm line 1164.
perl: malloc.c:3700: _int_malloc: Assertion `victim-&gt;fd_nextsize-&gt;bk_nextsize == victim&#39; failed.
t/zz-GtkTreeModelIface.t ....... 
Failed 3/171 subtests 
    &#40;less 8 skipped subtests: 160 okay&#41;

Test Summary Report
-------------------
t/zz-GtkCellLayoutIface.t    &#40;Wstat: 134 Tests: 23 Failed: 0&#41;
  Non-zero wait status: 134
  Parse errors: Bad plan.  You planned 35 tests but ran 23.
t/zz-GtkTreeModelIface.t     &#40;Wstat: 134 Tests: 168 Failed: 0&#41;
  Non-zero wait status: 134
  Parse errors: Bad plan.  You planned 171 tests but ran 168.
Files=21, Tests=778,  6 wallclock secs &#40; 0.14 usr  0.03 sys +  3.23 cusr  0.27 csys =  3.67 CPU&#41;
Result: FAIL
Failed 2/21 test programs. 0/778 subtests failed.
Makefile:820: recipe for target &#39;test_dynamic&#39; failed
make[2]: *** [test_dynamic] Error 255
make[2]: Leaving directory &#39;/tmp/buildd/libgtk3-perl-0.017&#39;
dh_auto_test: make -j1 test returned exit code 2
debian/rules:9: recipe for target &#39;override_dh_auto_test&#39; failed
make[1]: *** [override_dh_auto_test] Error 2
#v-

&#40;With perl 5.18 from unstable all tests pass.&#41;


Not sure if the problem is in Gtk3 or somewhere in the Debian toolchain ...
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#40;Note: I updated RT ticket 97093 with the same request&#41;
</div>
&#40;Trying to update both at once.&#41;


Cheers,
gregor
 

-- 
 .&#39;&#39;`.  Homepage: <span class="clickylink"><a target="new" rel="nofollow" href="http://info.comodo.priv.at/">http://info.comodo.priv.at/</a></span> - OpenPGP key 0xBB3A68018649AA06
 : :&#39; : Debian GNU/Linux user, admin, and developer  -  <span class="clickylink"><a target="new" rel="nofollow" href="http://www.debian.org/">http://www.debian.org/</a></span>
 `. `&#39;  Member of VIBE!AT &#38; SPI, fellow of the Free Software Foundation Europe
   `-   NP: Red Hot Chili Peppers: One Big Mob
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;10&nbsp;11:29:00&nbsp;2014</span>
    <span class="description">kaffeetisch [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: Bug#752986: [rt.cpan.org #97093] Perl 5.20 issues with Gtk3 0.16</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 10 Jul 2014 17:28:48 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Gtk3 [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Torsten Schönfeld&#34; &lt;kaffeetisch [...] gmx.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Try with Glib::Object::Introspection 0.024.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;10&nbsp;12:23:18&nbsp;2014</span>
    <span class="description">gregoa [...] debian.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: Bug#752986: [rt.cpan.org #97093] Perl 5.20 issues with Gtk3 0.16</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 10 Jul 2014 18:22:54 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Torsten Schoenfeld via RT &lt;bug-Gtk3 [...] rt.cpan.org&gt;, 752986 [...] bugs.debian.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> gregor herrmann &lt;gregoa [...] debian.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, 10 Jul 2014 11:29:00 -0400, Torsten Schoenfeld via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=97093">https://rt.cpan.org/Ticket/Display.html?id=97093</a></span> &gt;
&gt; 
&gt; Try with Glib::Object::Introspection 0.024.
</div>
Not so easy since this fails with 5.20 as well:

   dh_auto_test
make[1]: Entering directory &#39;/tmp/buildd/libglib-object-introspection-perl-0.024&#39;
Running Mkbootstrap for Glib::Object::Introspection &#40;&#41;
chmod 644 Introspection.bs
LD_LIBRARY_PATH=:build PERL_DL_NONLAZY=1 /usr/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
Use of uninitialized value in subroutine entry at t/00-basic-types.t line 53.

#   Failed test at t/00-basic-types.t line 53.
#          got: &#39;&#39;
#     expected: &#39;åäö&#39;
# Looks like you failed 1 test of 36.
t/00-basic-types.t ............ 
Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/36 subtests 
t/arg-checks.t ................ ok
t/arrays.t .................... ok
t/boxed.t ..................... ok
t/cairo-integration.t ......... ok
t/callbacks.t ................. ok
t/closures.t .................. ok
t/constants.t ................. ok
t/enums.t ..................... ok
t/hashes.t .................... ok
t/interface-implementation.t .. ok
t/objects.t ................... ok
t/structs.t ................... ok
t/values.t .................... ok
t/vfunc-chaining.t ............ ok
t/vfunc-ref-counting.t ........ ok

Test Summary Report
-------------------
t/00-basic-types.t          &#40;Wstat: 256 Tests: 36 Failed: 1&#41;
  Failed test:  28
  Non-zero exit status: 1
Files=16, Tests=329,  1 wallclock secs &#40; 0.08 usr  0.04 sys +  0.74 cusr  0.09 csys =  0.95 CPU&#41;
Result: FAIL



Ok, after running tests with LC_ALL=C.UTF-8 this works.

* a little later *

Yay, Gtk3 build with perl 5.20 when using Glib::Object::Introspection 0.024.

Thanks, and feel free to close the RT ticket.


Cheers,
gregor

-- 
 .&#39;&#39;`.  Homepage: <span class="clickylink"><a target="new" rel="nofollow" href="http://info.comodo.priv.at/">http://info.comodo.priv.at/</a></span> - OpenPGP key 0xBB3A68018649AA06
 : :&#39; : Debian GNU/Linux user, admin, and developer  -  <span class="clickylink"><a target="new" rel="nofollow" href="http://www.debian.org/">http://www.debian.org/</a></span>
 `. `&#39;  Member of VIBE!AT &#38; SPI, fellow of the Free Software Foundation Europe
   `-   NP: Beatles
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;10&nbsp;12:29:46&nbsp;2014</span>
    <span class="description">XAOC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Updating releases to Gtk3 0.17 and Glib::Object::Introspection 0.24 fixed the issue.

Tests also required having a locale set in the environment via via the variable LC_ALL
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;10&nbsp;12:29:48&nbsp;2014</span>
    <span class="description">XAOC [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;10&nbsp;12:32:29&nbsp;2014</span>
    <span class="description">XAOC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Jul 10 12:29:46 2014, XAOC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Updating releases to Gtk3 0.17 and Glib::Object::Introspection 0.24
&gt; fixed the issue.
&gt; 
&gt; Tests also required having a locale set in the environment via via the
&gt; variable LC_ALL
</div>
Sorry, the versions were incorrect in my previous post, updating releases to Gtk3 0.017 and Glib::Object::Introspection 0.024 fixed issues in Perl 5.20.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;10&nbsp;12:33:12&nbsp;2014</span>
    <span class="description">XAOC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Marking fixed version 0.017
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;10&nbsp;12:33:13&nbsp;2014</span>
    <span class="description">XAOC [...] cpan.org -  Fixed in 0.017 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;10&nbsp;12:37:38&nbsp;2014</span>
    <span class="description">gregoa [...] debian.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #97093] libgtk3-perl: FTBFS with Perl 5.20: test failures</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 10 Jul 2014 18:37:15 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Brian Manning via RT &lt;bug-Gtk3 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> gregor herrmann &lt;gregoa [...] debian.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, 10 Jul 2014 12:32:29 -0400, Brian Manning via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Updating releases to Gtk3 0.17 and Glib::Object::Introspection 0.24
&gt; &gt; fixed the issue.
&gt; &gt; 
&gt; &gt; Tests also required having a locale set in the environment via via the
&gt; &gt; variable LC_ALL
</div>&gt; 
&gt; Sorry, the versions were incorrect in my previous post, updating releases to Gtk3 0.017 and Glib::Object::Introspection 0.024 fixed issues in Perl 5.20.
</div>
No problem, all sorted out on our end as well.

Thanks,
gregor

-- 
 .&#39;&#39;`.  Homepage: <span class="clickylink"><a target="new" rel="nofollow" href="http://info.comodo.priv.at/">http://info.comodo.priv.at/</a></span> - OpenPGP key 0xBB3A68018649AA06
 : :&#39; : Debian GNU/Linux user, admin, and developer  -  <span class="clickylink"><a target="new" rel="nofollow" href="http://www.debian.org/">http://www.debian.org/</a></span>
 `. `&#39;  Member of VIBE!AT &#38; SPI, fellow of the Free Software Foundation Europe
   `-   NP: Beatles
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
