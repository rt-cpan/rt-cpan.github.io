<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #39057 for Locale-Maketext-Lexicon: concat in loc&#40;&#41; works now and TT can now use [% FILTER loc %]</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #39057 for Locale-Maketext-Lexicon: concat in loc&#40;&#41; works now and TT can now use [% FILTER loc %]</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Locale-Maketext-Lexicon/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Locale-Maketext-Lexicon/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Locale-Maketext-Lexicon/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Locale-Maketext-Lexicon/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/clintongormley/locale-maketext-lexicon/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Locale-Maketext-Lexicon">Locale-Maketext-Lexicon CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">39057</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Locale-Maketext-Lexicon/Active/">Locale-Maketext-Lexicon</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
felix.ostmann [...] thewar.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-19292-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19293-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;06&nbsp;21:40:27&nbsp;2008</span>
    <span class="description">felix.ostmann [...] thewar.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> concat in loc&#40;&#41; works now and TT can now use [% FILTER loc %]</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">now it is possible to concat strings in loc&#40;&#41; and in TT you can use [%
FILTER loc %]
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> tests-for-new-patch-for-concat-and-tt-FILTER.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- Locale-Maketext-Lexicon-0.68/t/5-extract.t.orig	2008-09-07 02:13:04.000000000 +0200
+++ Locale-Maketext-Lexicon-0.68/t/5-extract.t	2008-09-07 03:23:01.000000000 +0200
@@ -1,7 +1,7 @@
 #! /usr/bin/perl -w
 use lib &#39;../lib&#39;;
 use strict;
-use Test::More tests =&gt; 43;
+use Test::More tests =&gt; 47;
 
 use_ok&#40;&#39;Locale::Maketext::Extract&#39;&#41;;
 my $Ext = Locale::Maketext::Extract-&gt;new;
@@ -61,6 +61,12 @@
 extract_ok&#40;q&#40;_&#40;&#34;&#34;,&#34;car&#34;&#41;&#41;                  =&gt; &#39;&#39;,            &#39;ignore empty string&#39;&#41;;
 extract_ok&#40;q&#40;_&#40;&#34;0&#34;&#41;&#41;                       =&gt; &#39;&#39;,            &#39;ignore zero&#39;&#41;;
 
+extract_ok&#40;&lt;&lt;&#39;__EXAMPLE__&#39;                 =&gt; &#39;foo bar baz&#39;,   &#39;use FILTER &#40;tt&#41;&#39;&#41;;
+[% FILTER l -%]
+foo bar baz
+[%- END %]
+__EXAMPLE__
+
 extract_ok&#40;&lt;&lt;&#39;__EXAMPLE__&#39;                 =&gt; &#39;foo bar baz&#39;,   &#39;trim the string &#40;tt&#41;&#39;&#41;;
 [% |loc -%]
 foo bar baz
@@ -173,6 +179,50 @@
 msgstr &#34;&#34;
 __EXPECTED__
 
+write_po_ok&#40;&lt;&lt;&#39;__EXAMPLE__&#39;                =&gt; &lt;&lt;&#39;__EXPECTED__&#39;, &#34;concat &#40;heredoc&#41;&#34;&#41;;
+_&#40;&#39;exam&#39;.&lt;&lt;&#34;&#34;, 10&#41;
+ple1 %1
+
+__EXAMPLE__
+#: :1
+#. &#40;10&#41;
+msgid &#34;example1 %1\n&#34;
+msgstr &#34;&#34;
+__EXPECTED__
+
+write_po_ok&#40;&lt;&lt;&#39;__EXAMPLE__&#39;                =&gt; &lt;&lt;&#39;__EXPECTED__&#39;, &#34;two _&#40;&#41; calls with concat over multiline &#40;heredoc&#41;&#34;&#41;;
+_&#40;&#39;example&#39; . 
+&lt;&lt;&#34;&#34;, 10&#41;
+1 %1
+
+_&#40;&lt;&lt;&#34;&#34;, 5&#41;
+example2 %1
+
+__EXAMPLE__
+#: :1
+#. &#40;10&#41;
+msgid &#34;example1 %1\n&#34;
+msgstr &#34;&#34;
+
+#: :5
+#. &#40;5&#41;
+msgid &#34;example2 %1\n&#34;
+msgstr &#34;&#34;
+__EXPECTED__
+
+write_po_ok&#40;&lt;&lt;&#39;__EXAMPLE__&#39;                =&gt; &lt;&lt;&#39;__EXPECTED__&#39;, &#34;i can concat the world!&#34;&#41;;
+_&#40;
+&#39;\$foo&#39;
+.&#34;\$bar&#34;
+.&lt;&lt;&#39;&#39;
+\$baz
+
+&#41;
+__EXAMPLE__
+#: :2
+msgid &#34;\\$foo$bar\\$baz\n&#34;
+msgstr &#34;&#34;
+__EXPECTED__
 
 sub extract_ok {
     my &#40;$text, $expected, $info, $verbatim&#41; = @_;
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> patch-for-concat-and-tt-FILTER.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- Locale-Maketext-Lexicon-0.68/lib/Locale/Maketext/Extract.pm.orig	2008-09-07 02:12:33.000000000 +0200
+++ Locale-Maketext-Lexicon-0.68/lib/Locale/Maketext/Extract.pm	2008-09-07 03:22:12.000000000 +0200
@@ -255,7 +255,7 @@
 
     # Template Toolkit
     $line = 1; pos&#40;$_&#41; = 0;
-    while &#40;m!\G&#40;.*?\[%-?\s*\|l&#40;?:oc&#41;?&#40;.*?&#41;\s*&#40;-?&#41;%\]&#40;.*?&#41;\[%&#40;-?&#41;\s*END\s*-?%\]&#41;!sg&#41; { 
+    while &#40;m!\G&#40;.*?\[%-?\s*&#40;?:\|\s*|FILTER\s+&#41;l&#40;?:oc&#41;?&#40;.*?&#41;\s*&#40;-?&#41;%\]&#40;.*?&#41;\[%&#40;-?&#41;\s*END\s*-?%\]&#41;!sg&#41; { 
         my &#40;$vars, $trim_start, $str, $trim_end&#41; = &#40;$2, $3, $4, $5&#41;;
         $line += &#40; &#40;&#41; = &#40;$1 =~ /\n/g&#41; &#41;; # cryptocontext!
         $vars =~ s/^\s*\&#40;//;
@@ -305,7 +305,7 @@
     }
 
     # Perl code:
-    my &#40;$state,$str,$vars,$quo,$heredoc&#41;=&#40;0&#41;;
+    my &#40;$state,$line_offset,$str,$str_part,$vars,$quo,$heredoc&#41;=&#40;0,0&#41;;
     pos&#40;$_&#41; = 0;
     my $orig = 1 + &#40;&#40;&#41; = &#40;&#40;my $__ = $_&#41; =~ /\n/g&#41;&#41;;
 
@@ -322,28 +322,45 @@
         $state == BEG  &#38;&#38; m/^&#40;[\S\&#40;]&#41;\s*/gc
                        &#38;&#38; do { $state = &#40; &#40;$1 eq &#39;&#40;&#39;&#41; ? PAR : NUL&#41;; redo };
 
+        # concat
+        $state == PAR  &#38;&#38; defined&#40;$str&#41; &#38;&#38; m/^&#40;\s*\.\s*&#41;/gc
+                       &#38;&#38; do { $line_offset += &#40;&#40;&#41; = &#40;&#40;my $__ = $1&#41; =~ /\n/g&#41;&#41;; redo };
+
+        # str_part
+        $state == PAR  &#38;&#38; defined&#40;$str_part&#41; &#38;&#38; do {
+            if &#40;&#40;$quo == QUO1&#41; || &#40;$quo == QUO5&#41; &#41;{
+                $str_part =~ s/\\&#40;[\\&#39;]&#41;/$1/g if &#40;$str_part&#41;; # normalize q strings
+            }
+            elsif &#40;$quo != QUO6&#41; {
+                $str_part =~ s/&#40;\\&#40;?:[0x]..|c?.&#41;&#41;/&#34;qq&#40;$1&#41;&#34;/eeg if &#40;$str_part&#41;; # normalize qq / qx strings
+            }
+            $str .= $str_part;
+            undef $str_part; undef $quo;
+            redo;
+        };
+
         # begin or end of string
         $state == PAR  &#38;&#38; m/^&#40;\&#39;&#41;/gc        &#38;&#38; do { $state = $quo = QUO1;   redo };
-        $state == QUO1 &#38;&#38; m/^&#40;[^&#39;\\]+&#41;/gc   &#38;&#38; do { $str  .= $1; redo };
-        $state == QUO1 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str  .= $1; redo };
+        $state == QUO1 &#38;&#38; m/^&#40;[^&#39;\\]+&#41;/gc   &#38;&#38; do { $str_part .= $1; redo };
+        $state == QUO1 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str_part .= $1; redo };
         $state == QUO1 &#38;&#38; m/^\&#39;/gc          &#38;&#38; do { $state = PAR;           redo };
 
         $state == PAR  &#38;&#38; m/^\&#34;/gc          &#38;&#38; do { $state = $quo = QUO2;   redo };
-        $state == QUO2 &#38;&#38; m/^&#40;[^&#34;\\]+&#41;/gc   &#38;&#38; do { $str  .= $1; redo };
-        $state == QUO2 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str  .= $1; redo };
+        $state == QUO2 &#38;&#38; m/^&#40;[^&#34;\\]+&#41;/gc   &#38;&#38; do { $str_part .= $1; redo };
+        $state == QUO2 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str_part .= $1; redo };
         $state == QUO2 &#38;&#38; m/^\&#34;/gc          &#38;&#38; do { $state = PAR;           redo };
 
         $state == PAR  &#38;&#38; m/^\`/gc          &#38;&#38; do { $state = $quo = QUO3;   redo };
-        $state == QUO3 &#38;&#38; m/^&#40;[^\`]*&#41;/gc    &#38;&#38; do { $str  .= $1;            redo };
+        $state == QUO3 &#38;&#38; m/^&#40;[^\`]*&#41;/gc    &#38;&#38; do { $str_part .= $1;            redo };
         $state == QUO3 &#38;&#38; m/^\`/gc          &#38;&#38; do { $state = PAR;           redo };
 
         $state == PAR  &#38;&#38; m/^qq\{/gc        &#38;&#38; do { $state = $quo = QUO4;   redo };
-        $state == QUO4 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str  .= $1;            redo };
+        $state == QUO4 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str_part .= $1;            redo };
         $state == QUO4 &#38;&#38; m/^\}/gc          &#38;&#38; do { $state = PAR;           redo };
         
         
         $state == PAR  &#38;&#38; m/^q\{/gc         &#38;&#38; do { $state = $quo = QUO5;   redo };
-        $state == QUO5 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str  .= $1;            redo };
+        $state == QUO5 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str_part .= $1;            redo };
         $state == QUO5 &#38;&#38; m/^\}/gc          &#38;&#38; do { $state = PAR;           redo };
 
         # find heredoc terminator, then get the heredoc and go back to current position
@@ -360,7 +377,7 @@
         $state == PAR  &#38;&#38; m/^&lt;&lt;&#40;\w*&#41;/gc     &#38;&#38; do { $state = HERE; $quo = QUO7; $heredoc = $1; redo };
 
         # jump ahaid and get the heredoc, then s/// also reset the pos and we are back at the current pos
-        $state == HERE &#38;&#38; m/^.*\r?\n/gc     &#38;&#38; s/\G&#40;.*?\r?\n&#41;$heredoc&#40;\r?\n&#41;//s &#38;&#38; do { $state = PAR; $str .= $1; redo };
+        $state == HERE &#38;&#38; m/^.*\r?\n/gc     &#38;&#38; s/\G&#40;.*?\r?\n&#41;$heredoc&#40;\r?\n&#41;//s &#38;&#38; do { $state = PAR; $str_part .= $1; $line_offset++; redo };
 
         # end &#40;&#41;
         #
@@ -368,15 +385,9 @@
         $state == PAR  &#38;&#38; m/^\s*[\&#41;]/gc     &#38;&#38; do {
             $state = NUL; 
             $vars =~ s/[\n\r]//g if &#40;$vars&#41;;
-            if &#40;&#40;$quo == QUO1&#41; || &#40;$quo == QUO5&#41; &#41;{
-                $str =~ s/\\&#40;[\\&#39;]&#41;/$1/g if &#40;$str&#41;; # normalize q strings
-            }
-            elsif &#40;$quo != QUO6&#41; {
-                $str =~ s/&#40;\\&#40;?:[0x]..|c?.&#41;&#41;/&#34;qq&#40;$1&#41;&#34;/eeg if &#40;$str&#41;; # normalize qq / qx strings
-            }
-            # heredoc loosing the terminating line, so decrement one more line for heredoc
-            push @{$entries-&gt;{$str}}, [ $file, $line - &#40;&#40;&#41; = $str =~ /\n/g&#41; - defined&#40;$heredoc&#41;, $vars] if &#40;$str&#41;;
+            push @{$entries-&gt;{$str}}, [ $file, $line - &#40;&#40;&#41; = $str =~ /\n/g&#41; - $line_offset, $vars] if &#40;$str&#41;;
             undef $str; undef $vars; undef $heredoc;
+            $line_offset = 0;
             redo;
         };
 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;07&nbsp;15:01:08&nbsp;2008</span>
    <span class="description">jesse [...] fsck.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #39057] concat in loc&#40;&#41; works now and TT can now use [% FILTER loc %]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 7 Sep 2008 15:00:59 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Felix Antonius Wilhelm Ostmann via RT &lt;bug-Locale-Maketext-Lexicon [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jesse &lt;jesse [...] fsck.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Is it worth adding something to the documentation to make it more
obvious to end users?

-j


On Sat, Sep 06, 2008 at 09:40:58PM -0400, Felix Antonius Wilhelm Ostmann via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sat Sep 06 21:40:27 2008: Request 39057 was acted upon.
&gt; Transaction: Ticket created by Sadrak
&gt;        Queue: Locale-Maketext-Lexicon
&gt;      Subject: concat in loc&#40;&#41; works now and TT can now use [% FILTER loc %]
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: Wishlist
&gt;        Owner: Nobody
&gt;   Requestors: felix.ostmann@thewar.de
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=39057">http://rt.cpan.org/Ticket/Display.html?id=39057</a></span> &gt;
&gt; 
&gt; 
&gt; now it is possible to concat strings in loc&#40;&#41; and in TT you can use [%
&gt; FILTER loc %]
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; --- Locale-Maketext-Lexicon-0.68/t/5-extract.t.orig   2008-09-07 02:13:04.000000000 +0200
&gt; +++ Locale-Maketext-Lexicon-0.68/t/5-extract.t        2008-09-07 03:23:01.000000000 +0200
&gt; @@ -1,7 +1,7 @@
&gt;  #! /usr/bin/perl -w
&gt;  use lib &#39;../lib&#39;;
&gt;  use strict;
&gt; -use Test::More tests =&gt; 43;
&gt; +use Test::More tests =&gt; 47;
&gt;  
&gt;  use_ok&#40;&#39;Locale::Maketext::Extract&#39;&#41;;
&gt;  my $Ext = Locale::Maketext::Extract-&gt;new;
&gt; @@ -61,6 +61,12 @@
&gt;  extract_ok&#40;q&#40;_&#40;&#34;&#34;,&#34;car&#34;&#41;&#41;                  =&gt; &#39;&#39;,            &#39;ignore empty string&#39;&#41;;
&gt;  extract_ok&#40;q&#40;_&#40;&#34;0&#34;&#41;&#41;                       =&gt; &#39;&#39;,            &#39;ignore zero&#39;&#41;;
&gt;  
&gt; +extract_ok&#40;&lt;&lt;&#39;__EXAMPLE__&#39;                 =&gt; &#39;foo bar baz&#39;,   &#39;use FILTER &#40;tt&#41;&#39;&#41;;
&gt; +[% FILTER l -%]
&gt; +foo bar baz
&gt; +[%- END %]
&gt; +__EXAMPLE__
&gt; +
&gt;  extract_ok&#40;&lt;&lt;&#39;__EXAMPLE__&#39;                 =&gt; &#39;foo bar baz&#39;,   &#39;trim the string &#40;tt&#41;&#39;&#41;;
&gt;  [% |loc -%]
&gt;  foo bar baz
&gt; @@ -173,6 +179,50 @@
&gt;  msgstr &#34;&#34;
&gt;  __EXPECTED__
&gt;  
&gt; +write_po_ok&#40;&lt;&lt;&#39;__EXAMPLE__&#39;                =&gt; &lt;&lt;&#39;__EXPECTED__&#39;, &#34;concat &#40;heredoc&#41;&#34;&#41;;
&gt; +_&#40;&#39;exam&#39;.&lt;&lt;&#34;&#34;, 10&#41;
&gt; +ple1 %1
&gt; +
&gt; +__EXAMPLE__
&gt; +#: :1
&gt; +#. &#40;10&#41;
&gt; +msgid &#34;example1 %1\n&#34;
&gt; +msgstr &#34;&#34;
&gt; +__EXPECTED__
&gt; +
&gt; +write_po_ok&#40;&lt;&lt;&#39;__EXAMPLE__&#39;                =&gt; &lt;&lt;&#39;__EXPECTED__&#39;, &#34;two _&#40;&#41; calls with concat over multiline &#40;heredoc&#41;&#34;&#41;;
&gt; +_&#40;&#39;example&#39; . 
&gt; +&lt;&lt;&#34;&#34;, 10&#41;
&gt; +1 %1
&gt; +
&gt; +_&#40;&lt;&lt;&#34;&#34;, 5&#41;
&gt; +example2 %1
&gt; +
&gt; +__EXAMPLE__
&gt; +#: :1
&gt; +#. &#40;10&#41;
&gt; +msgid &#34;example1 %1\n&#34;
&gt; +msgstr &#34;&#34;
&gt; +
&gt; +#: :5
&gt; +#. &#40;5&#41;
&gt; +msgid &#34;example2 %1\n&#34;
&gt; +msgstr &#34;&#34;
&gt; +__EXPECTED__
&gt; +
&gt; +write_po_ok&#40;&lt;&lt;&#39;__EXAMPLE__&#39;                =&gt; &lt;&lt;&#39;__EXPECTED__&#39;, &#34;i can concat the world!&#34;&#41;;
&gt; +_&#40;
&gt; +&#39;\$foo&#39;
&gt; +.&#34;\$bar&#34;
&gt; +.&lt;&lt;&#39;&#39;
&gt; +\$baz
&gt; +
&gt; +&#41;
&gt; +__EXAMPLE__
&gt; +#: :2
&gt; +msgid &#34;\\$foo$bar\\$baz\n&#34;
&gt; +msgstr &#34;&#34;
&gt; +__EXPECTED__
&gt;  
&gt;  sub extract_ok {
&gt;      my &#40;$text, $expected, $info, $verbatim&#41; = @_;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; --- Locale-Maketext-Lexicon-0.68/lib/Locale/Maketext/Extract.pm.orig  2008-09-07 02:12:33.000000000 +0200
&gt; +++ Locale-Maketext-Lexicon-0.68/lib/Locale/Maketext/Extract.pm       2008-09-07 03:22:12.000000000 +0200
&gt; @@ -255,7 +255,7 @@
&gt;  
&gt;      # Template Toolkit
&gt;      $line = 1; pos&#40;$_&#41; = 0;
&gt; -    while &#40;m!\G&#40;.*?\[%-?\s*\|l&#40;?:oc&#41;?&#40;.*?&#41;\s*&#40;-?&#41;%\]&#40;.*?&#41;\[%&#40;-?&#41;\s*END\s*-?%\]&#41;!sg&#41; { 
&gt; +    while &#40;m!\G&#40;.*?\[%-?\s*&#40;?:\|\s*|FILTER\s+&#41;l&#40;?:oc&#41;?&#40;.*?&#41;\s*&#40;-?&#41;%\]&#40;.*?&#41;\[%&#40;-?&#41;\s*END\s*-?%\]&#41;!sg&#41; { 
&gt;          my &#40;$vars, $trim_start, $str, $trim_end&#41; = &#40;$2, $3, $4, $5&#41;;
&gt;          $line += &#40; &#40;&#41; = &#40;$1 =~ /\n/g&#41; &#41;; # cryptocontext!
&gt;          $vars =~ s/^\s*\&#40;//;
&gt; @@ -305,7 +305,7 @@
&gt;      }
&gt;  
&gt;      # Perl code:
&gt; -    my &#40;$state,$str,$vars,$quo,$heredoc&#41;=&#40;0&#41;;
&gt; +    my &#40;$state,$line_offset,$str,$str_part,$vars,$quo,$heredoc&#41;=&#40;0,0&#41;;
&gt;      pos&#40;$_&#41; = 0;
&gt;      my $orig = 1 + &#40;&#40;&#41; = &#40;&#40;my $__ = $_&#41; =~ /\n/g&#41;&#41;;
&gt;  
&gt; @@ -322,28 +322,45 @@
&gt;          $state == BEG  &#38;&#38; m/^&#40;[\S\&#40;]&#41;\s*/gc
&gt;                         &#38;&#38; do { $state = &#40; &#40;$1 eq &#39;&#40;&#39;&#41; ? PAR : NUL&#41;; redo };
&gt;  
&gt; +        # concat
&gt; +        $state == PAR  &#38;&#38; defined&#40;$str&#41; &#38;&#38; m/^&#40;\s*\.\s*&#41;/gc
&gt; +                       &#38;&#38; do { $line_offset += &#40;&#40;&#41; = &#40;&#40;my $__ = $1&#41; =~ /\n/g&#41;&#41;; redo };
&gt; +
&gt; +        # str_part
&gt; +        $state == PAR  &#38;&#38; defined&#40;$str_part&#41; &#38;&#38; do {
&gt; +            if &#40;&#40;$quo == QUO1&#41; || &#40;$quo == QUO5&#41; &#41;{
&gt; +                $str_part =~ s/\\&#40;[\\&#39;]&#41;/$1/g if &#40;$str_part&#41;; # normalize q strings
&gt; +            }
&gt; +            elsif &#40;$quo != QUO6&#41; {
&gt; +                $str_part =~ s/&#40;\\&#40;?:[0x]..|c?.&#41;&#41;/&#34;qq&#40;$1&#41;&#34;/eeg if &#40;$str_part&#41;; # normalize qq / qx strings
&gt; +            }
&gt; +            $str .= $str_part;
&gt; +            undef $str_part; undef $quo;
&gt; +            redo;
&gt; +        };
&gt; +
&gt;          # begin or end of string
&gt;          $state == PAR  &#38;&#38; m/^&#40;\&#39;&#41;/gc        &#38;&#38; do { $state = $quo = QUO1;   redo };
&gt; -        $state == QUO1 &#38;&#38; m/^&#40;[^&#39;\\]+&#41;/gc   &#38;&#38; do { $str  .= $1; redo };
&gt; -        $state == QUO1 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str  .= $1; redo };
&gt; +        $state == QUO1 &#38;&#38; m/^&#40;[^&#39;\\]+&#41;/gc   &#38;&#38; do { $str_part .= $1; redo };
&gt; +        $state == QUO1 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str_part .= $1; redo };
&gt;          $state == QUO1 &#38;&#38; m/^\&#39;/gc          &#38;&#38; do { $state = PAR;           redo };
&gt;  
&gt;          $state == PAR  &#38;&#38; m/^\&#34;/gc          &#38;&#38; do { $state = $quo = QUO2;   redo };
&gt; -        $state == QUO2 &#38;&#38; m/^&#40;[^&#34;\\]+&#41;/gc   &#38;&#38; do { $str  .= $1; redo };
&gt; -        $state == QUO2 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str  .= $1; redo };
&gt; +        $state == QUO2 &#38;&#38; m/^&#40;[^&#34;\\]+&#41;/gc   &#38;&#38; do { $str_part .= $1; redo };
&gt; +        $state == QUO2 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str_part .= $1; redo };
&gt;          $state == QUO2 &#38;&#38; m/^\&#34;/gc          &#38;&#38; do { $state = PAR;           redo };
&gt;  
&gt;          $state == PAR  &#38;&#38; m/^\`/gc          &#38;&#38; do { $state = $quo = QUO3;   redo };
&gt; -        $state == QUO3 &#38;&#38; m/^&#40;[^\`]*&#41;/gc    &#38;&#38; do { $str  .= $1;            redo };
&gt; +        $state == QUO3 &#38;&#38; m/^&#40;[^\`]*&#41;/gc    &#38;&#38; do { $str_part .= $1;            redo };
&gt;          $state == QUO3 &#38;&#38; m/^\`/gc          &#38;&#38; do { $state = PAR;           redo };
&gt;  
&gt;          $state == PAR  &#38;&#38; m/^qq\{/gc        &#38;&#38; do { $state = $quo = QUO4;   redo };
&gt; -        $state == QUO4 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str  .= $1;            redo };
&gt; +        $state == QUO4 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str_part .= $1;            redo };
&gt;          $state == QUO4 &#38;&#38; m/^\}/gc          &#38;&#38; do { $state = PAR;           redo };
&gt;          
&gt;          
&gt;          $state == PAR  &#38;&#38; m/^q\{/gc         &#38;&#38; do { $state = $quo = QUO5;   redo };
&gt; -        $state == QUO5 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str  .= $1;            redo };
&gt; +        $state == QUO5 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str_part .= $1;            redo };
&gt;          $state == QUO5 &#38;&#38; m/^\}/gc          &#38;&#38; do { $state = PAR;           redo };
&gt;  
&gt;          # find heredoc terminator, then get the heredoc and go back to current position
&gt; @@ -360,7 +377,7 @@
&gt;          $state == PAR  &#38;&#38; m/^&lt;&lt;&#40;\w*&#41;/gc     &#38;&#38; do { $state = HERE; $quo = QUO7; $heredoc = $1; redo };
&gt;  
&gt;          # jump ahaid and get the heredoc, then s/// also reset the pos and we are back at the current pos
&gt; -        $state == HERE &#38;&#38; m/^.*\r?\n/gc     &#38;&#38; s/\G&#40;.*?\r?\n&#41;$heredoc&#40;\r?\n&#41;//s &#38;&#38; do { $state = PAR; $str .= $1; redo };
&gt; +        $state == HERE &#38;&#38; m/^.*\r?\n/gc     &#38;&#38; s/\G&#40;.*?\r?\n&#41;$heredoc&#40;\r?\n&#41;//s &#38;&#38; do { $state = PAR; $str_part .= $1; $line_offset++; redo };
&gt;  
&gt;          # end &#40;&#41;
&gt;          #
&gt; @@ -368,15 +385,9 @@
&gt;          $state == PAR  &#38;&#38; m/^\s*[\&#41;]/gc     &#38;&#38; do {
&gt;              $state = NUL; 
&gt;              $vars =~ s/[\n\r]//g if &#40;$vars&#41;;
&gt; -            if &#40;&#40;$quo == QUO1&#41; || &#40;$quo == QUO5&#41; &#41;{
&gt; -                $str =~ s/\\&#40;[\\&#39;]&#41;/$1/g if &#40;$str&#41;; # normalize q strings
&gt; -            }
&gt; -            elsif &#40;$quo != QUO6&#41; {
&gt; -                $str =~ s/&#40;\\&#40;?:[0x]..|c?.&#41;&#41;/&#34;qq&#40;$1&#41;&#34;/eeg if &#40;$str&#41;; # normalize qq / qx strings
&gt; -            }
&gt; -            # heredoc loosing the terminating line, so decrement one more line for heredoc
&gt; -            push @{$entries-&gt;{$str}}, [ $file, $line - &#40;&#40;&#41; = $str =~ /\n/g&#41; - defined&#40;$heredoc&#41;, $vars] if &#40;$str&#41;;
&gt; +            push @{$entries-&gt;{$str}}, [ $file, $line - &#40;&#40;&#41; = $str =~ /\n/g&#41; - $line_offset, $vars] if &#40;$str&#41;;
&gt;              undef $str; undef $vars; undef $heredoc;
&gt; +            $line_offset = 0;
&gt;              redo;
&gt;          };
&gt;  
</div>

-- 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;07&nbsp;15:01:09&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;07&nbsp;15:18:53&nbsp;2008</span>
    <span class="description">felix.ostmann [...] thewar.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #39057] concat in loc&#40;&#41; works now and TT can now use [% FILTER loc %]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 07 Sep 2008 21:18:05 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Locale-Maketext-Lexicon [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Felix Antonius Wilhelm Ostmann &lt;felix.ostmann [...] thewar.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">uh, it was so late :&#41;

at which point in the docu? i cant find a position where i can incluse 
such information about that feature :-/

Jesse via RT schrieb:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=39057">http://rt.cpan.org/Ticket/Display.html?id=39057</a></span> &gt;
&gt; 
&gt; Is it worth adding something to the documentation to make it more
&gt; obvious to end users?
&gt; 
&gt; -j
&gt; 
&gt; 
&gt; On Sat, Sep 06, 2008 at 09:40:58PM -0400, Felix Antonius Wilhelm Ostmann via RT wrote:
<div class="message-stanza open">&gt;&gt; Sat Sep 06 21:40:27 2008: Request 39057 was acted upon.
&gt;&gt; Transaction: Ticket created by Sadrak
&gt;&gt;        Queue: Locale-Maketext-Lexicon
&gt;&gt;      Subject: concat in loc&#40;&#41; works now and TT can now use [% FILTER loc %]
&gt;&gt;    Broken in: &#40;no value&#41;
&gt;&gt;     Severity: Wishlist
&gt;&gt;        Owner: Nobody
&gt;&gt;   Requestors: felix.ostmann@thewar.de
&gt;&gt;       Status: new
&gt;&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=39057">http://rt.cpan.org/Ticket/Display.html?id=39057</a></span> &gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; now it is possible to concat strings in loc&#40;&#41; and in TT you can use [%
&gt;&gt; FILTER loc %]
</div>&gt; 
<div class="message-stanza open">&gt;&gt; --- Locale-Maketext-Lexicon-0.68/t/5-extract.t.orig  2008-09-07 02:13:04.000000000 +0200
&gt;&gt; +++ Locale-Maketext-Lexicon-0.68/t/5-extract.t       2008-09-07 03:23:01.000000000 +0200
&gt;&gt; @@ -1,7 +1,7 @@
&gt;&gt;  #! /usr/bin/perl -w
&gt;&gt;  use lib &#39;../lib&#39;;
&gt;&gt;  use strict;
&gt;&gt; -use Test::More tests =&gt; 43;
&gt;&gt; +use Test::More tests =&gt; 47;
&gt;&gt;  
&gt;&gt;  use_ok&#40;&#39;Locale::Maketext::Extract&#39;&#41;;
&gt;&gt;  my $Ext = Locale::Maketext::Extract-&gt;new;
&gt;&gt; @@ -61,6 +61,12 @@
&gt;&gt;  extract_ok&#40;q&#40;_&#40;&#34;&#34;,&#34;car&#34;&#41;&#41;                  =&gt; &#39;&#39;,            &#39;ignore empty string&#39;&#41;;
&gt;&gt;  extract_ok&#40;q&#40;_&#40;&#34;0&#34;&#41;&#41;                       =&gt; &#39;&#39;,            &#39;ignore zero&#39;&#41;;
&gt;&gt;  
&gt;&gt; +extract_ok&#40;&lt;&lt;&#39;__EXAMPLE__&#39;                 =&gt; &#39;foo bar baz&#39;,   &#39;use FILTER &#40;tt&#41;&#39;&#41;;
&gt;&gt; +[% FILTER l -%]
&gt;&gt; +foo bar baz
&gt;&gt; +[%- END %]
&gt;&gt; +__EXAMPLE__
&gt;&gt; +
&gt;&gt;  extract_ok&#40;&lt;&lt;&#39;__EXAMPLE__&#39;                 =&gt; &#39;foo bar baz&#39;,   &#39;trim the string &#40;tt&#41;&#39;&#41;;
&gt;&gt;  [% |loc -%]
&gt;&gt;  foo bar baz
&gt;&gt; @@ -173,6 +179,50 @@
&gt;&gt;  msgstr &#34;&#34;
&gt;&gt;  __EXPECTED__
&gt;&gt;  
&gt;&gt; +write_po_ok&#40;&lt;&lt;&#39;__EXAMPLE__&#39;                =&gt; &lt;&lt;&#39;__EXPECTED__&#39;, &#34;concat &#40;heredoc&#41;&#34;&#41;;
&gt;&gt; +_&#40;&#39;exam&#39;.&lt;&lt;&#34;&#34;, 10&#41;
&gt;&gt; +ple1 %1
&gt;&gt; +
&gt;&gt; +__EXAMPLE__
&gt;&gt; +#: :1
&gt;&gt; +#. &#40;10&#41;
&gt;&gt; +msgid &#34;example1 %1\n&#34;
&gt;&gt; +msgstr &#34;&#34;
&gt;&gt; +__EXPECTED__
&gt;&gt; +
&gt;&gt; +write_po_ok&#40;&lt;&lt;&#39;__EXAMPLE__&#39;                =&gt; &lt;&lt;&#39;__EXPECTED__&#39;, &#34;two _&#40;&#41; calls with concat over multiline &#40;heredoc&#41;&#34;&#41;;
&gt;&gt; +_&#40;&#39;example&#39; . 
&gt;&gt; +&lt;&lt;&#34;&#34;, 10&#41;
&gt;&gt; +1 %1
&gt;&gt; +
&gt;&gt; +_&#40;&lt;&lt;&#34;&#34;, 5&#41;
&gt;&gt; +example2 %1
&gt;&gt; +
&gt;&gt; +__EXAMPLE__
&gt;&gt; +#: :1
&gt;&gt; +#. &#40;10&#41;
&gt;&gt; +msgid &#34;example1 %1\n&#34;
&gt;&gt; +msgstr &#34;&#34;
&gt;&gt; +
&gt;&gt; +#: :5
&gt;&gt; +#. &#40;5&#41;
&gt;&gt; +msgid &#34;example2 %1\n&#34;
&gt;&gt; +msgstr &#34;&#34;
&gt;&gt; +__EXPECTED__
&gt;&gt; +
&gt;&gt; +write_po_ok&#40;&lt;&lt;&#39;__EXAMPLE__&#39;                =&gt; &lt;&lt;&#39;__EXPECTED__&#39;, &#34;i can concat the world!&#34;&#41;;
&gt;&gt; +_&#40;
&gt;&gt; +&#39;\$foo&#39;
&gt;&gt; +.&#34;\$bar&#34;
&gt;&gt; +.&lt;&lt;&#39;&#39;
&gt;&gt; +\$baz
&gt;&gt; +
&gt;&gt; +&#41;
&gt;&gt; +__EXAMPLE__
&gt;&gt; +#: :2
&gt;&gt; +msgid &#34;\\$foo$bar\\$baz\n&#34;
&gt;&gt; +msgstr &#34;&#34;
&gt;&gt; +__EXPECTED__
&gt;&gt;  
&gt;&gt;  sub extract_ok {
&gt;&gt;      my &#40;$text, $expected, $info, $verbatim&#41; = @_;
</div>&gt; 
<div class="message-stanza open">&gt;&gt; --- Locale-Maketext-Lexicon-0.68/lib/Locale/Maketext/Extract.pm.orig 2008-09-07 02:12:33.000000000 +0200
&gt;&gt; +++ Locale-Maketext-Lexicon-0.68/lib/Locale/Maketext/Extract.pm      2008-09-07 03:22:12.000000000 +0200
&gt;&gt; @@ -255,7 +255,7 @@
&gt;&gt;  
&gt;&gt;      # Template Toolkit
&gt;&gt;      $line = 1; pos&#40;$_&#41; = 0;
&gt;&gt; -    while &#40;m!\G&#40;.*?\[%-?\s*\|l&#40;?:oc&#41;?&#40;.*?&#41;\s*&#40;-?&#41;%\]&#40;.*?&#41;\[%&#40;-?&#41;\s*END\s*-?%\]&#41;!sg&#41; { 
&gt;&gt; +    while &#40;m!\G&#40;.*?\[%-?\s*&#40;?:\|\s*|FILTER\s+&#41;l&#40;?:oc&#41;?&#40;.*?&#41;\s*&#40;-?&#41;%\]&#40;.*?&#41;\[%&#40;-?&#41;\s*END\s*-?%\]&#41;!sg&#41; { 
&gt;&gt;          my &#40;$vars, $trim_start, $str, $trim_end&#41; = &#40;$2, $3, $4, $5&#41;;
&gt;&gt;          $line += &#40; &#40;&#41; = &#40;$1 =~ /\n/g&#41; &#41;; # cryptocontext!
&gt;&gt;          $vars =~ s/^\s*\&#40;//;
&gt;&gt; @@ -305,7 +305,7 @@
&gt;&gt;      }
&gt;&gt;  
&gt;&gt;      # Perl code:
&gt;&gt; -    my &#40;$state,$str,$vars,$quo,$heredoc&#41;=&#40;0&#41;;
&gt;&gt; +    my &#40;$state,$line_offset,$str,$str_part,$vars,$quo,$heredoc&#41;=&#40;0,0&#41;;
&gt;&gt;      pos&#40;$_&#41; = 0;
&gt;&gt;      my $orig = 1 + &#40;&#40;&#41; = &#40;&#40;my $__ = $_&#41; =~ /\n/g&#41;&#41;;
&gt;&gt;  
&gt;&gt; @@ -322,28 +322,45 @@
&gt;&gt;          $state == BEG  &#38;&#38; m/^&#40;[\S\&#40;]&#41;\s*/gc
&gt;&gt;                         &#38;&#38; do { $state = &#40; &#40;$1 eq &#39;&#40;&#39;&#41; ? PAR : NUL&#41;; redo };
&gt;&gt;  
&gt;&gt; +        # concat
&gt;&gt; +        $state == PAR  &#38;&#38; defined&#40;$str&#41; &#38;&#38; m/^&#40;\s*\.\s*&#41;/gc
&gt;&gt; +                       &#38;&#38; do { $line_offset += &#40;&#40;&#41; = &#40;&#40;my $__ = $1&#41; =~ /\n/g&#41;&#41;; redo };
&gt;&gt; +
&gt;&gt; +        # str_part
&gt;&gt; +        $state == PAR  &#38;&#38; defined&#40;$str_part&#41; &#38;&#38; do {
&gt;&gt; +            if &#40;&#40;$quo == QUO1&#41; || &#40;$quo == QUO5&#41; &#41;{
&gt;&gt; +                $str_part =~ s/\\&#40;[\\&#39;]&#41;/$1/g if &#40;$str_part&#41;; # normalize q strings
&gt;&gt; +            }
&gt;&gt; +            elsif &#40;$quo != QUO6&#41; {
&gt;&gt; +                $str_part =~ s/&#40;\\&#40;?:[0x]..|c?.&#41;&#41;/&#34;qq&#40;$1&#41;&#34;/eeg if &#40;$str_part&#41;; # normalize qq / qx strings
&gt;&gt; +            }
&gt;&gt; +            $str .= $str_part;
&gt;&gt; +            undef $str_part; undef $quo;
&gt;&gt; +            redo;
&gt;&gt; +        };
&gt;&gt; +
&gt;&gt;          # begin or end of string
&gt;&gt;          $state == PAR  &#38;&#38; m/^&#40;\&#39;&#41;/gc        &#38;&#38; do { $state = $quo = QUO1;   redo };
&gt;&gt; -        $state == QUO1 &#38;&#38; m/^&#40;[^&#39;\\]+&#41;/gc   &#38;&#38; do { $str  .= $1; redo };
&gt;&gt; -        $state == QUO1 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str  .= $1; redo };
&gt;&gt; +        $state == QUO1 &#38;&#38; m/^&#40;[^&#39;\\]+&#41;/gc   &#38;&#38; do { $str_part .= $1; redo };
&gt;&gt; +        $state == QUO1 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str_part .= $1; redo };
&gt;&gt;          $state == QUO1 &#38;&#38; m/^\&#39;/gc          &#38;&#38; do { $state = PAR;           redo };
&gt;&gt;  
&gt;&gt;          $state == PAR  &#38;&#38; m/^\&#34;/gc          &#38;&#38; do { $state = $quo = QUO2;   redo };
&gt;&gt; -        $state == QUO2 &#38;&#38; m/^&#40;[^&#34;\\]+&#41;/gc   &#38;&#38; do { $str  .= $1; redo };
&gt;&gt; -        $state == QUO2 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str  .= $1; redo };
&gt;&gt; +        $state == QUO2 &#38;&#38; m/^&#40;[^&#34;\\]+&#41;/gc   &#38;&#38; do { $str_part .= $1; redo };
&gt;&gt; +        $state == QUO2 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str_part .= $1; redo };
&gt;&gt;          $state == QUO2 &#38;&#38; m/^\&#34;/gc          &#38;&#38; do { $state = PAR;           redo };
&gt;&gt;  
&gt;&gt;          $state == PAR  &#38;&#38; m/^\`/gc          &#38;&#38; do { $state = $quo = QUO3;   redo };
&gt;&gt; -        $state == QUO3 &#38;&#38; m/^&#40;[^\`]*&#41;/gc    &#38;&#38; do { $str  .= $1;            redo };
&gt;&gt; +        $state == QUO3 &#38;&#38; m/^&#40;[^\`]*&#41;/gc    &#38;&#38; do { $str_part .= $1;            redo };
&gt;&gt;          $state == QUO3 &#38;&#38; m/^\`/gc          &#38;&#38; do { $state = PAR;           redo };
&gt;&gt;  
&gt;&gt;          $state == PAR  &#38;&#38; m/^qq\{/gc        &#38;&#38; do { $state = $quo = QUO4;   redo };
&gt;&gt; -        $state == QUO4 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str  .= $1;            redo };
&gt;&gt; +        $state == QUO4 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str_part .= $1;            redo };
&gt;&gt;          $state == QUO4 &#38;&#38; m/^\}/gc          &#38;&#38; do { $state = PAR;           redo };
&gt;&gt;          
&gt;&gt;          
&gt;&gt;          $state == PAR  &#38;&#38; m/^q\{/gc         &#38;&#38; do { $state = $quo = QUO5;   redo };
&gt;&gt; -        $state == QUO5 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str  .= $1;            redo };
&gt;&gt; +        $state == QUO5 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str_part .= $1;            redo };
&gt;&gt;          $state == QUO5 &#38;&#38; m/^\}/gc          &#38;&#38; do { $state = PAR;           redo };
&gt;&gt;  
&gt;&gt;          # find heredoc terminator, then get the heredoc and go back to current position
&gt;&gt; @@ -360,7 +377,7 @@
&gt;&gt;          $state == PAR  &#38;&#38; m/^&lt;&lt;&#40;\w*&#41;/gc     &#38;&#38; do { $state = HERE; $quo = QUO7; $heredoc = $1; redo };
&gt;&gt;  
&gt;&gt;          # jump ahaid and get the heredoc, then s/// also reset the pos and we are back at the current pos
&gt;&gt; -        $state == HERE &#38;&#38; m/^.*\r?\n/gc     &#38;&#38; s/\G&#40;.*?\r?\n&#41;$heredoc&#40;\r?\n&#41;//s &#38;&#38; do { $state = PAR; $str .= $1; redo };
&gt;&gt; +        $state == HERE &#38;&#38; m/^.*\r?\n/gc     &#38;&#38; s/\G&#40;.*?\r?\n&#41;$heredoc&#40;\r?\n&#41;//s &#38;&#38; do { $state = PAR; $str_part .= $1; $line_offset++; redo };
&gt;&gt;  
&gt;&gt;          # end &#40;&#41;
&gt;&gt;          #
&gt;&gt; @@ -368,15 +385,9 @@
&gt;&gt;          $state == PAR  &#38;&#38; m/^\s*[\&#41;]/gc     &#38;&#38; do {
&gt;&gt;              $state = NUL; 
&gt;&gt;              $vars =~ s/[\n\r]//g if &#40;$vars&#41;;
&gt;&gt; -            if &#40;&#40;$quo == QUO1&#41; || &#40;$quo == QUO5&#41; &#41;{
&gt;&gt; -                $str =~ s/\\&#40;[\\&#39;]&#41;/$1/g if &#40;$str&#41;; # normalize q strings
&gt;&gt; -            }
&gt;&gt; -            elsif &#40;$quo != QUO6&#41; {
&gt;&gt; -                $str =~ s/&#40;\\&#40;?:[0x]..|c?.&#41;&#41;/&#34;qq&#40;$1&#41;&#34;/eeg if &#40;$str&#41;; # normalize qq / qx strings
&gt;&gt; -            }
&gt;&gt; -            # heredoc loosing the terminating line, so decrement one more line for heredoc
&gt;&gt; -            push @{$entries-&gt;{$str}}, [ $file, $line - &#40;&#40;&#41; = $str =~ /\n/g&#41; - defined&#40;$heredoc&#41;, $vars] if &#40;$str&#41;;
&gt;&gt; +            push @{$entries-&gt;{$str}}, [ $file, $line - &#40;&#40;&#41; = $str =~ /\n/g&#41; - $line_offset, $vars] if &#40;$str&#41;;
&gt;&gt;              undef $str; undef $vars; undef $heredoc;
&gt;&gt; +            $line_offset = 0;
&gt;&gt;              redo;
&gt;&gt;          };
&gt;&gt;  
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;07&nbsp;15:24:17&nbsp;2008</span>
    <span class="description">jesse [...] fsck.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #39057] concat in loc&#40;&#41; works now and TT can now use [% FILTER loc %]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 7 Sep 2008 15:24:12 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Locale-Maketext-Lexicon [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jesse Vincent &lt;jesse [...] fsck.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Sep 7, 2008, at 3:18 PM, Felix Antonius Wilhelm Ostmann via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;       Queue: Locale-Maketext-Lexicon
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=39057">http://rt.cpan.org/Ticket/Display.html?id=39057</a></span> &gt;
&gt;
&gt; uh, it was so late :&#41;
&gt;
&gt; at which point in the docu? i cant find a position where i can incluse
&gt; such information about that feature :-/
</div>

Hmm.

I think just adding more examples to Locale::Maketext::Extract&#39;s docs  
is the right thing.
It&#39;s totally ok for you to only add samples for TT  and force a mason  
guy to do the mason ones ;&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;07&nbsp;16:00:34&nbsp;2008</span>
    <span class="description">felix.ostmann [...] thewar.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #39057] concat in loc&#40;&#41; works now and TT can now use [% FILTER loc %]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 07 Sep 2008 22:00:02 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Locale-Maketext-Lexicon [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Felix Antonius Wilhelm Ostmann &lt;felix.ostmann [...] thewar.de&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here is another patch for Locale::Maketext::Extract with a liddle bit 
more pod ... i dont often write pod, dont know how markup right ... and 
hope RT handle the attachment :&#41;

Jesse via RT schrieb:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=39057">http://rt.cpan.org/Ticket/Display.html?id=39057</a></span> &gt;
&gt; 
&gt; 
&gt; On Sep 7, 2008, at 3:18 PM, Felix Antonius Wilhelm Ostmann via RT wrote:
&gt; 
<div class="message-stanza open">&gt;&gt;       Queue: Locale-Maketext-Lexicon
&gt;&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=39057">http://rt.cpan.org/Ticket/Display.html?id=39057</a></span> &gt;
&gt;&gt;
&gt;&gt; uh, it was so late :&#41;
&gt;&gt;
&gt;&gt; at which point in the docu? i cant find a position where i can incluse
&gt;&gt; such information about that feature :-/
</div>&gt; 
&gt; 
&gt; Hmm.
&gt; 
&gt; I think just adding more examples to Locale::Maketext::Extract&#39;s docs  
&gt; is the right thing.
&gt; It&#39;s totally ok for you to only add samples for TT  and force a mason  
&gt; guy to do the mason ones ;&#41;
&gt; 
&gt; 
</div></div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- Locale-Maketext-Lexicon-0.68/lib/Locale/Maketext/Extract.pm.orig	2008-09-07 02:12:33.000000000 +0200
+++ Locale-Maketext-Lexicon-0.68/lib/Locale/Maketext/Extract.pm	2008-09-07 21:57:56.000000000 +0200
@@ -37,6 +37,13 @@
 Valid localization function names are: C&lt;translate&gt;, C&lt;maketext&gt;,
 C&lt;gettext&gt;, C&lt;loc&gt;, C&lt;x&gt;, C&lt;_&gt; and C&lt;__&gt;.
 
+Concatination of all kind of strings are possible, so you can write this:
+
+_&#40;&#34;here my $voice&#34; . &#34;\n&#34; . &#39;dont fear my [_1]&#39; . &lt;&lt;&#39;__LOC__&#39;
+heredoc
+__LOC__
+, $count&#41;;
+
 =item HTML::Mason
 
 Strings inside C&lt;E&lt;lt&gt;&#38;|/lE&lt;gt&gt;I&lt;...&gt;E&lt;lt&gt;/&#38;E&lt;gt&gt;&gt; and
@@ -45,7 +52,7 @@
 =item Template Toolkit
 
 Strings inside C&lt;[%|l%]...[%END%]&gt; or C&lt;[%|loc%]...[%END%]&gt;
-are extracted.
+or C&lt;[%FILTER loc%]&gt; or C&lt;[%FILTER l%]&gt; are extracted.
 
 =item Text::Template
 
@@ -255,7 +262,7 @@
 
     # Template Toolkit
     $line = 1; pos&#40;$_&#41; = 0;
-    while &#40;m!\G&#40;.*?\[%-?\s*\|l&#40;?:oc&#41;?&#40;.*?&#41;\s*&#40;-?&#41;%\]&#40;.*?&#41;\[%&#40;-?&#41;\s*END\s*-?%\]&#41;!sg&#41; { 
+    while &#40;m!\G&#40;.*?\[%-?\s*&#40;?:\|\s*|FILTER\s+&#41;l&#40;?:oc&#41;?&#40;.*?&#41;\s*&#40;-?&#41;%\]&#40;.*?&#41;\[%&#40;-?&#41;\s*END\s*-?%\]&#41;!sg&#41; { 
         my &#40;$vars, $trim_start, $str, $trim_end&#41; = &#40;$2, $3, $4, $5&#41;;
         $line += &#40; &#40;&#41; = &#40;$1 =~ /\n/g&#41; &#41;; # cryptocontext!
         $vars =~ s/^\s*\&#40;//;
@@ -305,7 +312,7 @@
     }
 
     # Perl code:
-    my &#40;$state,$str,$vars,$quo,$heredoc&#41;=&#40;0&#41;;
+    my &#40;$state,$line_offset,$str,$str_part,$vars,$quo,$heredoc&#41;=&#40;0,0&#41;;
     pos&#40;$_&#41; = 0;
     my $orig = 1 + &#40;&#40;&#41; = &#40;&#40;my $__ = $_&#41; =~ /\n/g&#41;&#41;;
 
@@ -322,28 +329,45 @@
         $state == BEG  &#38;&#38; m/^&#40;[\S\&#40;]&#41;\s*/gc
                        &#38;&#38; do { $state = &#40; &#40;$1 eq &#39;&#40;&#39;&#41; ? PAR : NUL&#41;; redo };
 
+        # concat
+        $state == PAR  &#38;&#38; defined&#40;$str&#41; &#38;&#38; m/^&#40;\s*\.\s*&#41;/gc
+                       &#38;&#38; do { $line_offset += &#40;&#40;&#41; = &#40;&#40;my $__ = $1&#41; =~ /\n/g&#41;&#41;; redo };
+
+        # str_part
+        $state == PAR  &#38;&#38; defined&#40;$str_part&#41; &#38;&#38; do {
+            if &#40;&#40;$quo == QUO1&#41; || &#40;$quo == QUO5&#41; &#41;{
+                $str_part =~ s/\\&#40;[\\&#39;]&#41;/$1/g if &#40;$str_part&#41;; # normalize q strings
+            }
+            elsif &#40;$quo != QUO6&#41; {
+                $str_part =~ s/&#40;\\&#40;?:[0x]..|c?.&#41;&#41;/&#34;qq&#40;$1&#41;&#34;/eeg if &#40;$str_part&#41;; # normalize qq / qx strings
+            }
+            $str .= $str_part;
+            undef $str_part; undef $quo;
+            redo;
+        };
+
         # begin or end of string
         $state == PAR  &#38;&#38; m/^&#40;\&#39;&#41;/gc        &#38;&#38; do { $state = $quo = QUO1;   redo };
-        $state == QUO1 &#38;&#38; m/^&#40;[^&#39;\\]+&#41;/gc   &#38;&#38; do { $str  .= $1; redo };
-        $state == QUO1 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str  .= $1; redo };
+        $state == QUO1 &#38;&#38; m/^&#40;[^&#39;\\]+&#41;/gc   &#38;&#38; do { $str_part .= $1; redo };
+        $state == QUO1 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str_part .= $1; redo };
         $state == QUO1 &#38;&#38; m/^\&#39;/gc          &#38;&#38; do { $state = PAR;           redo };
 
         $state == PAR  &#38;&#38; m/^\&#34;/gc          &#38;&#38; do { $state = $quo = QUO2;   redo };
-        $state == QUO2 &#38;&#38; m/^&#40;[^&#34;\\]+&#41;/gc   &#38;&#38; do { $str  .= $1; redo };
-        $state == QUO2 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str  .= $1; redo };
+        $state == QUO2 &#38;&#38; m/^&#40;[^&#34;\\]+&#41;/gc   &#38;&#38; do { $str_part .= $1; redo };
+        $state == QUO2 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str_part .= $1; redo };
         $state == QUO2 &#38;&#38; m/^\&#34;/gc          &#38;&#38; do { $state = PAR;           redo };
 
         $state == PAR  &#38;&#38; m/^\`/gc          &#38;&#38; do { $state = $quo = QUO3;   redo };
-        $state == QUO3 &#38;&#38; m/^&#40;[^\`]*&#41;/gc    &#38;&#38; do { $str  .= $1;            redo };
+        $state == QUO3 &#38;&#38; m/^&#40;[^\`]*&#41;/gc    &#38;&#38; do { $str_part .= $1;            redo };
         $state == QUO3 &#38;&#38; m/^\`/gc          &#38;&#38; do { $state = PAR;           redo };
 
         $state == PAR  &#38;&#38; m/^qq\{/gc        &#38;&#38; do { $state = $quo = QUO4;   redo };
-        $state == QUO4 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str  .= $1;            redo };
+        $state == QUO4 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str_part .= $1;            redo };
         $state == QUO4 &#38;&#38; m/^\}/gc          &#38;&#38; do { $state = PAR;           redo };
         
         
         $state == PAR  &#38;&#38; m/^q\{/gc         &#38;&#38; do { $state = $quo = QUO5;   redo };
-        $state == QUO5 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str  .= $1;            redo };
+        $state == QUO5 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str_part .= $1;            redo };
         $state == QUO5 &#38;&#38; m/^\}/gc          &#38;&#38; do { $state = PAR;           redo };
 
         # find heredoc terminator, then get the heredoc and go back to current position
@@ -360,7 +384,7 @@
         $state == PAR  &#38;&#38; m/^&lt;&lt;&#40;\w*&#41;/gc     &#38;&#38; do { $state = HERE; $quo = QUO7; $heredoc = $1; redo };
 
         # jump ahaid and get the heredoc, then s/// also reset the pos and we are back at the current pos
-        $state == HERE &#38;&#38; m/^.*\r?\n/gc     &#38;&#38; s/\G&#40;.*?\r?\n&#41;$heredoc&#40;\r?\n&#41;//s &#38;&#38; do { $state = PAR; $str .= $1; redo };
+        $state == HERE &#38;&#38; m/^.*\r?\n/gc     &#38;&#38; s/\G&#40;.*?\r?\n&#41;$heredoc&#40;\r?\n&#41;//s &#38;&#38; do { $state = PAR; $str_part .= $1; $line_offset++; redo };
 
         # end &#40;&#41;
         #
@@ -368,15 +392,9 @@
         $state == PAR  &#38;&#38; m/^\s*[\&#41;]/gc     &#38;&#38; do {
             $state = NUL; 
             $vars =~ s/[\n\r]//g if &#40;$vars&#41;;
-            if &#40;&#40;$quo == QUO1&#41; || &#40;$quo == QUO5&#41; &#41;{
-                $str =~ s/\\&#40;[\\&#39;]&#41;/$1/g if &#40;$str&#41;; # normalize q strings
-            }
-            elsif &#40;$quo != QUO6&#41; {
-                $str =~ s/&#40;\\&#40;?:[0x]..|c?.&#41;&#41;/&#34;qq&#40;$1&#41;&#34;/eeg if &#40;$str&#41;; # normalize qq / qx strings
-            }
-            # heredoc loosing the terminating line, so decrement one more line for heredoc
-            push @{$entries-&gt;{$str}}, [ $file, $line - &#40;&#40;&#41; = $str =~ /\n/g&#41; - defined&#40;$heredoc&#41;, $vars] if &#40;$str&#41;;
+            push @{$entries-&gt;{$str}}, [ $file, $line - &#40;&#40;&#41; = $str =~ /\n/g&#41; - $line_offset, $vars] if &#40;$str&#41;;
             undef $str; undef $vars; undef $heredoc;
+            $line_offset = 0;
             redo;
         };
 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;12&nbsp;11:38:22&nbsp;2008</span>
    <span class="description">jesse [...] fsck.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #39057] concat in loc&#40;&#41; works now and TT can now use [% FILTER loc %]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 12 Sep 2008 11:34:00 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Locale-Maketext-Lexicon [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jesse Vincent &lt;jesse [...] fsck.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks, Applied. Can you give it a test and tell me if the version I  
committed to svn looks right?

On Sep 7, 2008, at 4:00 PM, Felix Antonius Wilhelm Ostmann via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;       Queue: Locale-Maketext-Lexicon
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=39057">http://rt.cpan.org/Ticket/Display.html?id=39057</a></span> &gt;
&gt;
&gt; Here is another patch for Locale::Maketext::Extract with a liddle bit
&gt; more pod ... i dont often write pod, dont know how markup right ...  
&gt; and
&gt; hope RT handle the attachment :&#41;
&gt;
&gt; Jesse via RT schrieb:
<div class="message-stanza open">&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=39057">http://rt.cpan.org/Ticket/Display.html?id=39057</a></span> &gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Sep 7, 2008, at 3:18 PM, Felix Antonius Wilhelm Ostmann via RT  
&gt;&gt; wrote:
&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt;      Queue: Locale-Maketext-Lexicon
&gt;&gt;&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=39057">http://rt.cpan.org/Ticket/Display.html?id=39057</a></span> &gt;
&gt;&gt;&gt;
&gt;&gt;&gt; uh, it was so late :&#41;
&gt;&gt;&gt;
&gt;&gt;&gt; at which point in the docu? i cant find a position where i can  
&gt;&gt;&gt; incluse
&gt;&gt;&gt; such information about that feature :-/
</div>&gt;&gt;
&gt;&gt;
&gt;&gt; Hmm.
&gt;&gt;
&gt;&gt; I think just adding more examples to Locale::Maketext::Extract&#39;s docs
&gt;&gt; is the right thing.
&gt;&gt; It&#39;s totally ok for you to only add samples for TT  and force a mason
&gt;&gt; guy to do the mason ones ;&#41;
&gt;&gt;
&gt;&gt;
</div>&gt;
&gt;
&gt; --- Locale-Maketext-Lexicon-0.68/lib/Locale/Maketext/Extract.pm.orig   
&gt; 2008-09-07 02:12:33.000000000 +0200
&gt; +++ Locale-Maketext-Lexicon-0.68/lib/Locale/Maketext/Extract.pm        
&gt; 2008-09-07 21:57:56.000000000 +0200
&gt; @@ -37,6 +37,13 @@
&gt; Valid localization function names are: C&lt;translate&gt;, C&lt;maketext&gt;,
&gt; C&lt;gettext&gt;, C&lt;loc&gt;, C&lt;x&gt;, C&lt;_&gt; and C&lt;__&gt;.
&gt;
&gt; +Concatination of all kind of strings are possible, so you can write  
&gt; this:
&gt; +
&gt; +_&#40;&#34;here my $voice&#34; . &#34;\n&#34; . &#39;dont fear my [_1]&#39; . &lt;&lt;&#39;__LOC__&#39;
&gt; +heredoc
&gt; +__LOC__
&gt; +, $count&#41;;
&gt; +
&gt; =item HTML::Mason
&gt;
&gt; Strings inside C&lt;E&lt;lt&gt;&#38;|/lE&lt;gt&gt;I&lt;...&gt;E&lt;lt&gt;/&#38;E&lt;gt&gt;&gt; and
&gt; @@ -45,7 +52,7 @@
&gt; =item Template Toolkit
&gt;
&gt; Strings inside C&lt;[%|l%]...[%END%]&gt; or C&lt;[%|loc%]...[%END%]&gt;
&gt; -are extracted.
&gt; +or C&lt;[%FILTER loc%]&gt; or C&lt;[%FILTER l%]&gt; are extracted.
&gt;
&gt; =item Text::Template
&gt;
&gt; @@ -255,7 +262,7 @@
&gt;
&gt;     # Template Toolkit
&gt;     $line = 1; pos&#40;$_&#41; = 0;
&gt; -    while &#40;m!\G&#40;.*?\[%-?\s*\|l&#40;?:oc&#41;?&#40;.*?&#41;\s*&#40;-?&#41;%\]&#40;.*?&#41;\[%&#40;-?&#41; 
&gt; \s*END\s*-?%\]&#41;!sg&#41; {
&gt; +    while &#40;m!\G&#40;.*?\[%-?\s*&#40;?:\|\s*|FILTER\s+&#41;l&#40;?:oc&#41;?&#40;.*?&#41;\s*&#40;-?&#41;% 
&gt; \]&#40;.*?&#41;\[%&#40;-?&#41;\s*END\s*-?%\]&#41;!sg&#41; {
&gt;         my &#40;$vars, $trim_start, $str, $trim_end&#41; = &#40;$2, $3, $4, $5&#41;;
&gt;         $line += &#40; &#40;&#41; = &#40;$1 =~ /\n/g&#41; &#41;; # cryptocontext!
&gt;         $vars =~ s/^\s*\&#40;//;
&gt; @@ -305,7 +312,7 @@
&gt;     }
&gt;
&gt;     # Perl code:
&gt; -    my &#40;$state,$str,$vars,$quo,$heredoc&#41;=&#40;0&#41;;
&gt; +    my &#40;$state,$line_offset,$str,$str_part,$vars,$quo, 
&gt; $heredoc&#41;=&#40;0,0&#41;;
&gt;     pos&#40;$_&#41; = 0;
&gt;     my $orig = 1 + &#40;&#40;&#41; = &#40;&#40;my $__ = $_&#41; =~ /\n/g&#41;&#41;;
&gt;
&gt; @@ -322,28 +329,45 @@
&gt;         $state == BEG  &#38;&#38; m/^&#40;[\S\&#40;]&#41;\s*/gc
&gt;                        &#38;&#38; do { $state = &#40; &#40;$1 eq &#39;&#40;&#39;&#41; ? PAR : NUL&#41;;  
&gt; redo };
&gt;
&gt; +        # concat
&gt; +        $state == PAR  &#38;&#38; defined&#40;$str&#41; &#38;&#38; m/^&#40;\s*\.\s*&#41;/gc
&gt; +                       &#38;&#38; do { $line_offset += &#40;&#40;&#41; = &#40;&#40;my $__ = $1&#41;  
&gt; =~ /\n/g&#41;&#41;; redo };
&gt; +
&gt; +        # str_part
&gt; +        $state == PAR  &#38;&#38; defined&#40;$str_part&#41; &#38;&#38; do {
&gt; +            if &#40;&#40;$quo == QUO1&#41; || &#40;$quo == QUO5&#41; &#41;{
&gt; +                $str_part =~ s/\\&#40;[\\&#39;]&#41;/$1/g if &#40;$str_part&#41;; #  
&gt; normalize q strings
&gt; +            }
&gt; +            elsif &#40;$quo != QUO6&#41; {
&gt; +                $str_part =~ s/&#40;\\&#40;?:[0x]..|c?.&#41;&#41;/&#34;qq&#40;$1&#41;&#34;/eeg if  
&gt; &#40;$str_part&#41;; # normalize qq / qx strings
&gt; +            }
&gt; +            $str .= $str_part;
&gt; +            undef $str_part; undef $quo;
&gt; +            redo;
&gt; +        };
&gt; +
&gt;         # begin or end of string
&gt;         $state == PAR  &#38;&#38; m/^&#40;\&#39;&#41;/gc        &#38;&#38; do { $state = $quo =  
&gt; QUO1;   redo };
&gt; -        $state == QUO1 &#38;&#38; m/^&#40;[^&#39;\\]+&#41;/gc   &#38;&#38; do { $str  .= $1;  
&gt; redo };
&gt; -        $state == QUO1 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str  .= $1;  
&gt; redo };
&gt; +        $state == QUO1 &#38;&#38; m/^&#40;[^&#39;\\]+&#41;/gc   &#38;&#38; do { $str_part .=  
&gt; $1; redo };
&gt; +        $state == QUO1 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str_part .=  
&gt; $1; redo };
&gt;         $state == QUO1 &#38;&#38; m/^\&#39;/gc          &#38;&#38; do { $state =  
&gt; PAR;           redo };
&gt;
&gt;         $state == PAR  &#38;&#38; m/^\&#34;/gc          &#38;&#38; do { $state = $quo =  
&gt; QUO2;   redo };
&gt; -        $state == QUO2 &#38;&#38; m/^&#40;[^&#34;\\]+&#41;/gc   &#38;&#38; do { $str  .= $1;  
&gt; redo };
&gt; -        $state == QUO2 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str  .= $1;  
&gt; redo };
&gt; +        $state == QUO2 &#38;&#38; m/^&#40;[^&#34;\\]+&#41;/gc   &#38;&#38; do { $str_part .=  
&gt; $1; redo };
&gt; +        $state == QUO2 &#38;&#38; m/^&#40;&#40;?:\\.&#41;+&#41;/gcs &#38;&#38; do { $str_part .=  
&gt; $1; redo };
&gt;         $state == QUO2 &#38;&#38; m/^\&#34;/gc          &#38;&#38; do { $state =  
&gt; PAR;           redo };
&gt;
&gt;         $state == PAR  &#38;&#38; m/^\`/gc          &#38;&#38; do { $state = $quo =  
&gt; QUO3;   redo };
&gt; -        $state == QUO3 &#38;&#38; m/^&#40;[^\`]*&#41;/gc    &#38;&#38; do { $str  .=  
&gt; $1;            redo };
&gt; +        $state == QUO3 &#38;&#38; m/^&#40;[^\`]*&#41;/gc    &#38;&#38; do { $str_part .=  
&gt; $1;            redo };
&gt;         $state == QUO3 &#38;&#38; m/^\`/gc          &#38;&#38; do { $state =  
&gt; PAR;           redo };
&gt;
&gt;         $state == PAR  &#38;&#38; m/^qq\{/gc        &#38;&#38; do { $state = $quo =  
&gt; QUO4;   redo };
&gt; -        $state == QUO4 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str  .=  
&gt; $1;            redo };
&gt; +        $state == QUO4 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str_part .=  
&gt; $1;            redo };
&gt;         $state == QUO4 &#38;&#38; m/^\}/gc          &#38;&#38; do { $state =  
&gt; PAR;           redo };
&gt;
&gt;
&gt;         $state == PAR  &#38;&#38; m/^q\{/gc         &#38;&#38; do { $state = $quo =  
&gt; QUO5;   redo };
&gt; -        $state == QUO5 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str  .=  
&gt; $1;            redo };
&gt; +        $state == QUO5 &#38;&#38; m/^&#40;[^\}]*&#41;/gc    &#38;&#38; do { $str_part .=  
&gt; $1;            redo };
&gt;         $state == QUO5 &#38;&#38; m/^\}/gc          &#38;&#38; do { $state =  
&gt; PAR;           redo };
&gt;
&gt;         # find heredoc terminator, then get the heredoc and go back  
&gt; to current position
&gt; @@ -360,7 +384,7 @@
&gt;         $state == PAR  &#38;&#38; m/^&lt;&lt;&#40;\w*&#41;/gc     &#38;&#38; do { $state = HERE;  
&gt; $quo = QUO7; $heredoc = $1; redo };
&gt;
&gt;         # jump ahaid and get the heredoc, then s/// also reset the  
&gt; pos and we are back at the current pos
&gt; -        $state == HERE &#38;&#38; m/^.*\r?\n/gc     &#38;&#38; s/\G&#40;.*?\r?\n&#41; 
&gt; $heredoc&#40;\r?\n&#41;//s &#38;&#38; do { $state = PAR; $str .= $1; redo };
&gt; +        $state == HERE &#38;&#38; m/^.*\r?\n/gc     &#38;&#38; s/\G&#40;.*?\r?\n&#41; 
&gt; $heredoc&#40;\r?\n&#41;//s &#38;&#38; do { $state = PAR; $str_part .= $1;  
&gt; $line_offset++; redo };
&gt;
&gt;         # end &#40;&#41;
&gt;         #
&gt; @@ -368,15 +392,9 @@
&gt;         $state == PAR  &#38;&#38; m/^\s*[\&#41;]/gc     &#38;&#38; do {
&gt;             $state = NUL;
&gt;             $vars =~ s/[\n\r]//g if &#40;$vars&#41;;
&gt; -            if &#40;&#40;$quo == QUO1&#41; || &#40;$quo == QUO5&#41; &#41;{
&gt; -                $str =~ s/\\&#40;[\\&#39;]&#41;/$1/g if &#40;$str&#41;; # normalize q  
&gt; strings
&gt; -            }
&gt; -            elsif &#40;$quo != QUO6&#41; {
&gt; -                $str =~ s/&#40;\\&#40;?:[0x]..|c?.&#41;&#41;/&#34;qq&#40;$1&#41;&#34;/eeg if  
&gt; &#40;$str&#41;; # normalize qq / qx strings
&gt; -            }
&gt; -            # heredoc loosing the terminating line, so decrement  
&gt; one more line for heredoc
&gt; -            push @{$entries-&gt;{$str}}, [ $file, $line - &#40;&#40;&#41; = $str  
&gt; =~ /\n/g&#41; - defined&#40;$heredoc&#41;, $vars] if &#40;$str&#41;;
&gt; +            push @{$entries-&gt;{$str}}, [ $file, $line - &#40;&#40;&#41; = $str  
&gt; =~ /\n/g&#41; - $line_offset, $vars] if &#40;$str&#41;;
&gt;             undef $str; undef $vars; undef $heredoc;
&gt; +            $line_offset = 0;
&gt;             redo;
&gt;         };
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;28&nbsp;15:24:32&nbsp;2008</span>
    <span class="description">develop [...] traveljury.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Sep 06 21:40:27 2008, Sadrak wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; now it is possible to concat strings in loc&#40;&#41; and in TT you can use [%
&gt; FILTER loc %]
</div>
Thanks for your patch. The TT parser has been completely rewritten and
now supports the forms you mention above.

clint
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;29&nbsp;04:55:47&nbsp;2008</span>
    <span class="description">develop [...] traveljury.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Oct 28 15:24:32 2008, DRTECH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat Sep 06 21:40:27 2008, Sadrak wrote:
<div class="message-stanza open">&gt; &gt; now it is possible to concat strings in loc&#40;&#41; and in TT you can use [%
&gt; &gt; FILTER loc %]
</div>&gt; 
&gt; Thanks for your patch. The TT parser has been completely rewritten and
&gt; now supports the forms you mention above.
&gt; 
&gt; clint
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;29&nbsp;04:55:49&nbsp;2008</span>
    <span class="description">develop [...] traveljury.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;22&nbsp;15:51:03&nbsp;2008</span>
    <span class="description">develop [...] traveljury.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 29 04:55:47 2008, DRTECH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue Oct 28 15:24:32 2008, DRTECH wrote:
<div class="message-stanza open">&gt; &gt; On Sat Sep 06 21:40:27 2008, Sadrak wrote:
<div class="message-stanza open">&gt; &gt; &gt; now it is possible to concat strings in loc&#40;&#41; and in TT you can use [%
&gt; &gt; &gt; FILTER loc %]
</div>&gt; &gt; 
&gt; &gt; Thanks for your patch. The TT parser has been completely rewritten and
&gt; &gt; now supports the forms you mention above.
&gt; &gt; 
</div></div>
I didn&#39;t realise that your Perl parser changes weren&#39;t in the current
version. They have been included in version 0.74 now

thanks

Clint
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;22&nbsp;15:51:07&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;22&nbsp;15:52:25&nbsp;2008</span>
    <span class="description">develop [...] traveljury.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Nov 22 15:51:03 2008, DRTECH wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Oct 29 04:55:47 2008, DRTECH wrote:
<div class="message-stanza open">&gt; &gt; On Tue Oct 28 15:24:32 2008, DRTECH wrote:
<div class="message-stanza open">&gt; &gt; &gt; On Sat Sep 06 21:40:27 2008, Sadrak wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; now it is possible to concat strings in loc&#40;&#41; and in TT you can
</div></div></div></div>use [%
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; FILTER loc %]
</div>&gt; &gt; &gt; 
&gt; &gt; &gt; Thanks for your patch. The TT parser has been completely rewritten and
&gt; &gt; &gt; now supports the forms you mention above.
&gt; &gt; &gt; 
</div>&gt; 
&gt; I didn&#39;t realise that your Perl parser changes weren&#39;t in the current
&gt; version. They have been included in version 0.74 now
&gt; 
&gt; thanks
&gt; 
&gt; Clint
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;22&nbsp;15:52:27&nbsp;2008</span>
    <span class="description">develop [...] traveljury.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
