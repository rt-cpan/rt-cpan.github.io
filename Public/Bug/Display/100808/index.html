<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #100808 for Class-Accessor-Lite: t/00-base.t fails on Windows with nmake due to hard-coded file name</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #100808 for Class-Accessor-Lite: t/00-base.t fails on Windows with nmake due to hard-coded file name</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Class-Accessor-Lite/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Class-Accessor-Lite/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Class-Accessor-Lite/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Class-Accessor-Lite/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Class-Accessor-Lite">Class-Accessor-Lite CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">100808</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Class-Accessor-Lite/Active/">Class-Accessor-Lite</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
nanis [...] runu.moc.invalid

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-224922-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-224923-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;09&nbsp;14:11:03&nbsp;2014</span>
    <span class="description">nanis [...] runu.moc.invalid -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> t/00-base.t fails on Windows with nmake due to hard-coded file name</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">See 

        &#34;C:\opt\perl-5.20.1\bin\perl.exe&#34; &#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches; test_harness&#40;0, &#39;inc&#39;, &#39;blib\lib&#39;, &#39;blib\arch&#39;&#41;&#34; t\00-base.t t\01-new.t t\02-use.t t\03-use-error.t
t\00-base.t ....... 1/14
#   Failed test at t\00-base.t line 26.
#                   &#39;&#39;K&#39; cannot access the value of &#39;ro&#39; on objects of class &#39;K&#39; at t\00-base.t line 24.
# &#39;
#     doesn&#39;t match &#39;&#40;?^:&#39;K&#39; cannot access the value of &#39;ro&#39; on objects of class &#39;K&#39; at t/00-base.t line &#41;&#39;

#   Failed test at t\00-base.t line 33.
#                   &#39;&#39;K&#39; cannot alter the value of &#39;wo&#39; on objects of class &#39;K&#39; at t\00-base.t line 30.
# &#39;
#     doesn&#39;t match &#39;&#40;?^:&#39;K&#39; cannot alter the value of &#39;wo&#39; on objects of class &#39;K&#39; at t/00-base.t line &#41;&#39;
# Looks like you failed 2 tests of 14.
t\00-base.t ....... Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> nanis-fix-hard-coded-paths-in-tests.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 537f0017b92196fc527a9b73cad48bc281b3f3ce Mon Sep 17 00:00:00 2001
From: &#34;A. Sinan Unur&#34; &lt;nanis@cpan.org&gt;
Date: Tue, 9 Dec 2014 14:00:48 -0500
Subject: [PATCH 1/2] Fix &#34;Cannot determine perl version info from
 lib/Class/Accessor/Lite.pm&#34;

Based on the LICENSE section in the POD, I deduced that this module
is meant to be compatible with perl 5.008006, and later.
---
 lib/Class/Accessor/Lite.pm | 1 +
 1 file changed, 1 insertion&#40;+&#41;

diff --git a/lib/Class/Accessor/Lite.pm b/lib/Class/Accessor/Lite.pm
index 145df42..7874317 100644
--- a/lib/Class/Accessor/Lite.pm
+++ b/lib/Class/Accessor/Lite.pm
@@ -1,5 +1,6 @@
 package Class::Accessor::Lite;
 
+use 5.008006;
 use strict;
 
 our $VERSION = &#39;0.06&#39;;
-- 
2.1.1


From f7cc43504cb4ce185ea7a7dcdc23b54f1661b23c Mon Sep 17 00:00:00 2001
From: &#34;A. Sinan Unur&#34; &lt;nanis@cpan.org&gt;
Date: Tue, 9 Dec 2014 14:02:55 -0500
Subject: [PATCH 2/2] Fix spurious test failure due to hard-coded file name.

On Windows with nmake, the script is invoked with Windows style
directory separators in the filename, and the test fails due
the hard-coded file name in regex pattern. Fix by matching against
\Q$0\E instead.
---
 t/00-base.t | 4 ++--
 1 file changed, 2 insertions&#40;+&#41;, 2 deletions&#40;-&#41;

diff --git a/t/00-base.t b/t/00-base.t
index 2336f0c..ada85dc 100644
--- a/t/00-base.t
+++ b/t/00-base.t
@@ -23,12 +23,12 @@ is&#40;$k-&gt;bar, 2&#41;;
 is&#40;$k-&gt;ro, 3&#41;;
 eval { $k-&gt;ro&#40;99&#41; };
 my $e = $@;
-like $e, qr{&#39;K&#39; cannot access the value of &#39;ro&#39; on objects of class &#39;K&#39; at t/00-base.t line };
+like $e, qr{&#39;K&#39; cannot access the value of &#39;ro&#39; on objects of class &#39;K&#39; at \Q$0\E line };
 $k-&gt;wo&#40;801&#41;;
 is $k-&gt;{wo}, &#39;801&#39;;
 is_deeply&#40;$k-&gt;wo&#40;2, 3&#41;, [ 2, 3 ]&#41;;
 eval { $k-&gt;wo&#40;&#41; };
 $e = $@;
 ok $e;
-like $e, qr{&#39;K&#39; cannot alter the value of &#39;wo&#39; on objects of class &#39;K&#39; at t/00-base.t line };
+like $e, qr{&#39;K&#39; cannot alter the value of &#39;wo&#39; on objects of class &#39;K&#39; at \Q$0\E line };
 
-- 
2.1.1

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;09&nbsp;14:39:48&nbsp;2014</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I don&#39;t think you can deduce a &#34;use 5.008006&#34; just from the perl version specified in the license. Also, it&#39;s good style to put a short comment next to a &#34;use 5.XY&#34; line why a newer perl is needed.

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;09&nbsp;14:39:48&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;09&nbsp;15:35:08&nbsp;2014</span>
    <span class="description">nanis [...] runu.moc.invalid -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Slaven:

On Tue Dec 09 14:39:48 2014, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I don&#39;t think you can deduce a &#34;use 5.008006&#34; just from the perl
&gt; version specified in the license. Also, it&#39;s good style to put a short
&gt; comment next to a &#34;use 5.XY&#34; line why a newer perl is needed.
</div>
Both points taken. I am not sure how you ended up getting this bug report, FYI, the more important patch is the one that fixes the subject line.

So, if you are maintaining this module, feel free to ignore the first patch, but please do consider the second one. There is no need to hard-code file names in tests. They cause failures when the platform specific directory separator does not match what the author is used to.

All the following modules depend on this one which means if someone tries to install any of them via a CPAN client on Windows using Microsoft tools, they&#39;ll unnecessarily run into problems.

<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/requires/distribution/Class-Accessor-Lite?sort=">https://metacpan.org/requires/distribution/Class-Accessor-Lite?sort=</a></span>[[2,1]]

Thank you,

-- Sinan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;13&nbsp;12:02:22&nbsp;2019</span>
    <span class="description">PLICEASE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve opened a PR to fix this here:

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/kazuho/p5-Class-Accessor-Lite/pull/14">https://github.com/kazuho/p5-Class-Accessor-Lite/pull/14</a></span>

If Kazuho is not available to make this fix, perhaps this module could be adopted by someone who does have the time to maintain it?  I am happy to help out myself if nobody else wants to do it.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
