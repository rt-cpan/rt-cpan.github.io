<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #62475 for rpm-build-perl: Bleadperl 22bc907 breaks testsuite</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #62475 for rpm-build-perl: Bleadperl 22bc907 breaks testsuite</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/rpm-build-perl/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/rpm-build-perl/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/rpm-build-perl/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/rpm-build-perl/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/rpm-build-perl">rpm-build-perl CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">62475</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/rpm-build-perl/Active/">rpm-build-perl</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ANDK [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-28030-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.72    </td>
  </tr>
  <tr id="CF-28031-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;27&nbsp;03:17:46&nbsp;2010</span>
    <span class="description">ANDK [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Bleadperl 22bc907 breaks testsuite</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">git bisect on bleadperl finds the commit that broke the test suite:

commit 22bc907ae9b9703f36931e4de30ca013ddb732f6
Author: Nicholas Clark &lt;nick@ccl4.org&gt;
Date:   Mon Oct 18 10:22:44 2010 +0200

    Convert File::Glob::import to use given/when.


The test suite then breaks like so:

t/02-perlreq.t .... 1/? 
#   Failed test &#39;File/Glob.pm dependencies&#39;
#   at t/02-perlreq.t line 32.
#          got: &#39;perl&#40;feature.pm&#41; perl&#40;Text/ParseWords.pm&#41;
perl&#40;warnings.pm&#41; perl&#40;XSLoader.pm&#41;&#39;
#     expected: &#39;perl&#40;Text/ParseWords.pm&#41; perl&#40;XSLoader.pm&#41;&#39;
# Looks like you failed 1 test of 10.
t/02-perlreq.t .... Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/10 subtests 


It seems that the test makes assumptions about how some other module
works and breaks when this other code is changed. Right?

Let me know if you need further information.

Ahh, this may be interesting: git describe says v5.13.5-497-g22bc907
about this perl

Cheers,
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;22&nbsp;04:28:59&nbsp;2011</span>
    <span class="description">mmaslano [...] redhat.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> mmaslano [...] redhat.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve fixed my rpm for 5.14.1, but it will need options for different
releases of perl. 
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> tests5.14.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -up rpm-build-perl-0.74/t/02-perlreq.t.old rpm-build-perl-0.74/t/02-perlreq.t
--- rpm-build-perl-0.74/t/02-perlreq.t.old	2010-04-20 08:43:06.000000000 +0200
+++ rpm-build-perl-0.74/t/02-perlreq.t	2011-06-22 10:21:45.353919965 +0200
@@ -33,10 +33,10 @@ sub Requires &#40;$$&#41; {
 	ok $? == 0, &#34;$f zero exit status&#34;;
 }
 
-# Valid for perl-5.8.0 - perl-5.8.9.
+# Valid for perl-5.14.1
 Requires &#34;AutoLoader.pm&#34;	=&gt; &#34;perl-base &gt;= 1:5.6.1&#34;;
 Requires &#34;Exporter.pm&#34;		=&gt; &#34;perl&#40;Exporter/Heavy.pm&#41; perl-base &gt;= 1:5.6.0&#34;;
 Requires &#34;IO/File.pm&#34;		=&gt; &#34;perl&#40;File/Spec.pm&#41; perl&#40;IO/Seekable.pm&#41; perl&#40;SelectSaver.pm&#41; perl&#40;Symbol.pm&#41; perl-base &gt;= 1:5.6.1&#34;;
-Requires &#34;File/Glob.pm&#34;		=&gt; &#34;perl&#40;Text/ParseWords.pm&#41; perl&#40;XSLoader.pm&#41;&#34;;
-Requires &#34;Socket.pm&#34;		=&gt; &#34;perl&#40;warnings/register.pm&#41; perl&#40;XSLoader.pm&#41;&#34;;
+Requires &#34;File/Glob.pm&#34;		=&gt; &#34;perl&#40;feature.pm&#41; perl&#40;Text/ParseWords.pm&#41; perl&#40;XSLoader.pm&#41;&#34;; 
+Requires &#34;Socket.pm&#34;		=&gt; &#34;perl&#40;Scalar/Util.pm&#41; perl&#40;warnings/register.pm&#41; perl&#40;XSLoader.pm&#41;&#34;;
 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;22&nbsp;04:29:01&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;10&nbsp;14:09:28&nbsp;2011</span>
    <span class="description">ntyni [...] iki.fi -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ntyni [...] iki.fi</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jun 22 04:28:59 2011, mmaslano@redhat.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve fixed my rpm for 5.14.1, but it will need options for different
&gt; releases of perl. 
</div>
Here&#39;s a patch that looks at $] and acts accordingly.
-- 
Niko Tyni
ntyni@debian.org
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0001-Adapt-to-5.13.x-dependency-changes.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 298df4863d9c598d3eccd14412f043b33887da04 Mon Sep 17 00:00:00 2001
From: Niko Tyni &lt;ntyni@debian.org&gt;
Date: Sun, 10 Jul 2011 21:05:13 +0300
Subject: [PATCH] Adapt to 5.13.x dependency changes

File::Glob added &#34;use feature &#39;switch&#39;&#34; for 5.13.6, and
Socket added &#39;require Scalar::Util&#39; for 5.13.9.
---
 t/02-perlreq.t |    8 +++++---
 1 files changed, 5 insertions&#40;+&#41;, 3 deletions&#40;-&#41;

diff --git a/t/02-perlreq.t b/t/02-perlreq.t
index d4d1be3..98ab0c5 100644
--- a/t/02-perlreq.t
+++ b/t/02-perlreq.t
@@ -33,10 +33,12 @@ sub Requires &#40;$$&#41; {
 	ok $? == 0, &#34;$f zero exit status&#34;;
 }
 
-# Valid for perl-5.8.0 - perl-5.8.9.
+# Valid for perl-5.8.0 - perl-5.14.1
 Requires &#34;AutoLoader.pm&#34;	=&gt; &#34;perl-base &gt;= 1:5.6.1&#34;;
 Requires &#34;Exporter.pm&#34;		=&gt; &#34;perl&#40;Exporter/Heavy.pm&#41; perl-base &gt;= 1:5.6.0&#34;;
 Requires &#34;IO/File.pm&#34;		=&gt; &#34;perl&#40;File/Spec.pm&#41; perl&#40;IO/Seekable.pm&#41; perl&#40;SelectSaver.pm&#41; perl&#40;Symbol.pm&#41; perl-base &gt;= 1:5.6.1&#34;;
-Requires &#34;File/Glob.pm&#34;		=&gt; &#34;perl&#40;Text/ParseWords.pm&#41; perl&#40;XSLoader.pm&#41;&#34;;
-Requires &#34;Socket.pm&#34;		=&gt; &#34;perl&#40;warnings/register.pm&#41; perl&#40;XSLoader.pm&#41;&#34;;
+Requires &#34;File/Glob.pm&#34;		=&gt; &#40;$] &gt; 5.013005 ? &#34;perl&#40;feature.pm&#41; &#34; : &#34;&#34;&#41; .
+				   &#34;perl&#40;Text/ParseWords.pm&#41; perl&#40;XSLoader.pm&#41;&#34;;
+Requires &#34;Socket.pm&#34;		=&gt; &#40;$] &gt; 5.013008 ? &#34;perl&#40;Scalar/Util.pm&#41; &#34; : &#34;&#34;&#41; .
+				   &#34;perl&#40;warnings/register.pm&#41; perl&#40;XSLoader.pm&#41;&#34;;
 
-- 
1.7.5.4

</div></div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
