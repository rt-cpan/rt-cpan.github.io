<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #53974 for HTTP-Server-Simple: HTTP::Server::Simple::CGI : Use user provided CGI class</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #53974 for HTTP-Server-Simple: HTTP::Server::Simple::CGI : Use user provided CGI class</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/HTTP-Server-Simple/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/HTTP-Server-Simple/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/HTTP-Server-Simple/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/HTTP-Server-Simple/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/HTTP-Server-Simple">HTTP-Server-Simple CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">53974</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/HTTP-Server-Simple/Active/">HTTP-Server-Simple</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
nanis [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-16414-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.41    </td>
  </tr>
  <tr id="CF-16415-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;25&nbsp;10:43:00&nbsp;2010</span>
    <span class="description">nanis [...] runu.moc.invalid -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> HTTP::Server::Simple::CGI : Use user provided CGI class</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I recently uploaded a module
&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/perldoc/HTTP::Server::Simple::CGI::Simple">http://search.cpan.org/perldoc/HTTP::Server::Simple::CGI::Simple</a></span>&gt; to
CPAN which uses CGI::Simple rather than CGI.pm to provide a $cgi object
to handle_request.

brian d foy commented that it might be better to add support to
HTTP::Server::Simple::CGI for the name of the CGI class to be specified
at run time. I agree with him and, in hindsight, I should have known
better than to upload such a stupidly named module to CPAN ;-&#41;

To do this without altering the interface to programs that do not care
about using a different CGI module, I added the following methods to
HTTP::Server::Simple::CGI:

set_cgi_class / get_cgi_class

set_cgi_init / get_cgi_init

In addition, I removed the hard coded use CGI; from the module and
modified post_setup_hook so that a CGI.pm object is initialized if no
initialization sub is provided and in handler, the $cgi object is
instantiated using the user supplied class name rather than the hard
coded CGI.pm. If there is no user supplied class name, CGI.pm is used.

This seems to work on my machines &#40;ArchLinux and Windows XP both with
latest versions of Perl&#41;.

I think it would be nice if this support could be added to
HTTP::Server::Simple::CGI. Alternatively, a module called
HTTP::Server::Simple::CGI::Any could be provided &#40;which I can package if
you want&#41;.

Thank you. HTTP::Server::Simple is a very hand module.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> CGI-use-user-supplied.pm</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
package HTTP::Server::Simple::CGI;

use base qw&#40;HTTP::Server::Simple HTTP::Server::Simple::CGI::Environment&#41;;
use strict;
use warnings;

use vars qw&#40;$VERSION $default_doc&#41;;
$VERSION = $HTTP::Server::Simple::VERSION;

=head1 NAME

HTTP::Server::Simple::CGI - CGI.pm-style version of HTTP::Server::Simple

=head1 DESCRIPTION

HTTP::Server::Simple was already simple, but some smart-ass pointed
out that there is no CGI in HTTP, and so this module was born to
isolate the CGI.pm-related parts of this handler.


=head2 accept_hook

The accept_hook in this sub-class clears the environment to the
start-up state.

=cut

sub accept_hook {
    my $self = shift;
    $self-&gt;setup_environment&#40;@_&#41;;
}

=head2 post_setup_hook

Initializes the global L&lt;CGI&gt; object, as well as other environment
settings.

=cut

sub post_setup_hook {
    my $self = shift;
    $self-&gt;setup_server_url;
    if &#40; my $init = $self-&gt;get_cgi_init &#41; {
        $init-&gt;&#40;&#41;;
    }
    else {
        require CGI;
        CGI::initialize_globals&#40;&#41;;
    }
}

=head2 set_cgi_class

Sets the class to use for creating the C&lt;$cgi&gt; object passed to
C&lt;handle_request&gt; and optionally provide initialization code.

e.g.

    $server-&gt;set_cgi_class&#40;CGI =&gt; sub {
        require CGI;
        CGI::initialize_globals&#40;&#41;;
    }&#41;;

or, if you want to use L&lt;CGI::Simple&gt;,

    $server-&gt;set_cgi_class&#40;&#39;CGI::Simple&#39; =&gt; sub {
        require CGI::Simple;
    }&#41;;

=cut

sub set_cgi_class {
    my $self = shift;
    my &#40;$class, $init&#41; = @_;
    $self-&gt;{cgi_class} = $class;
    $self-&gt;{cgi_init} = $init if defined $init;
    return;
}

=head2 set_cgi_init

=cut

sub set_cgi_init {
    my $self = shift;
    my &#40;$init&#41; = @_;
    $self-&gt;{cgi_init} = $init;
    return;
}

=head2 get_cgi_class

=cut

sub get_cgi_class {
    my $self = shift;
    return $self-&gt;{cgi_class};
}

=head2 get_cgi_init

=cut

sub get_cgi_init {
    my $self = shift;
    return $self-&gt;{cgi_init};
}

=head2 setup

This method sets up CGI environment variables based on various
meta-headers, like the protocol, remote host name, request path, etc.

See the docs in L&lt;HTTP::Server::Simple&gt; for more detail.

=cut

sub setup {
    my $self = shift;
    $self-&gt;setup_environment_from_metadata&#40;@_&#41;;
}

=head2 handle_request CGI

This routine is called whenever your server gets a request it can
handle.

It&#39;s called with a CGI object that&#39;s been pre-initialized.
You want to override this method in your subclass


=cut

$default_doc = &#40; join &#34;&#34;, &lt;DATA&gt; &#41;;

sub handle_request {
    my &#40; $self, $cgi &#41; = @_;

    print &#34;HTTP/1.0 200 OK\r\n&#34;;    # probably OK by now
    print &#34;Content-Type: text/html\r\nContent-Length: &#34;, length&#40;$default_doc&#41;,
        &#34;\r\n\r\n&#34;, $default_doc;
}

=head2 handler

Handler implemented as part of HTTP::Server::Simple API

=cut

sub handler {
    my $self = shift;
    my $cgi;
    if &#40; my $cgi_class = $self-&gt;get_cgi_class &#41; {
        $cgi = $cgi_class-&gt;new;
    }
    else {
        require CGI;
        $cgi = CGI-&gt;new;
    }
    eval { $self-&gt;handle_request&#40;$cgi&#41; };
    if &#40;$@&#41; {
        my $error = $@;
        warn $error;
    }
}

1;

__DATA__
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Hello!&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Congratulations!&lt;/h1&gt;

    &lt;p&gt;You now have a functional HTTP::Server::Simple::CGI running.
      &lt;/p&gt;

    &lt;p&gt;&lt;i&gt;&#40;If you&#39;re seeing this page, it means you haven&#39;t subclassed
      HTTP::Server::Simple::CGI, which you&#39;ll need to do to make it
      useful.&#41;&lt;/i&gt;
      &lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;02&nbsp;15:12:26&nbsp;2010</span>
    <span class="description">jesse [...] fsck.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53974] HTTP::Server::Simple::CGI : Use user provided CGI class</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 2 Feb 2010 12:11:51 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;A. Sinan Unur via RT&#34; &lt;bug-HTTP-Server-Simple [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jesse Vincent &lt;jesse [...] fsck.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
I rewrote your patch somewhat to better match my preferred style for
things and to cut down the API size a bit. Can you see if 0.41_01 now
headed to CPAN meets your needs?



On Mon 25.Jan&#39;10 at 10:43:01 -0500, A. Sinan Unur via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Mon Jan 25 10:43:00 2010: Request 53974 was acted upon.
&gt; Transaction: Ticket created by NANIS
&gt;        Queue: HTTP-Server-Simple
&gt;      Subject: HTTP::Server::Simple::CGI : Use user provided CGI class
&gt;    Broken in: 0.41
&gt;     Severity: Normal
&gt;        Owner: Nobody
&gt;   Requestors: nanis@cpan.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53974">https://rt.cpan.org/Ticket/Display.html?id=53974</a></span> &gt;
&gt; 
&gt; 
&gt; I recently uploaded a module
&gt; &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/perldoc/HTTP::Server::Simple::CGI::Simple">http://search.cpan.org/perldoc/HTTP::Server::Simple::CGI::Simple</a></span>&gt; to
&gt; CPAN which uses CGI::Simple rather than CGI.pm to provide a $cgi object
&gt; to handle_request.
&gt; 
&gt; brian d foy commented that it might be better to add support to
&gt; HTTP::Server::Simple::CGI for the name of the CGI class to be specified
&gt; at run time. I agree with him and, in hindsight, I should have known
&gt; better than to upload such a stupidly named module to CPAN ;-&#41;
&gt; 
&gt; To do this without altering the interface to programs that do not care
&gt; about using a different CGI module, I added the following methods to
&gt; HTTP::Server::Simple::CGI:
&gt; 
&gt; set_cgi_class / get_cgi_class
&gt; 
&gt; set_cgi_init / get_cgi_init
&gt; 
&gt; In addition, I removed the hard coded use CGI; from the module and
&gt; modified post_setup_hook so that a CGI.pm object is initialized if no
&gt; initialization sub is provided and in handler, the $cgi object is
&gt; instantiated using the user supplied class name rather than the hard
&gt; coded CGI.pm. If there is no user supplied class name, CGI.pm is used.
&gt; 
&gt; This seems to work on my machines &#40;ArchLinux and Windows XP both with
&gt; latest versions of Perl&#41;.
&gt; 
&gt; I think it would be nice if this support could be added to
&gt; HTTP::Server::Simple::CGI. Alternatively, a module called
&gt; HTTP::Server::Simple::CGI::Any could be provided &#40;which I can package if
&gt; you want&#41;.
&gt; 
&gt; Thank you. HTTP::Server::Simple is a very hand module.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;02&nbsp;15:12:28&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;02&nbsp;19:56:02&nbsp;2010</span>
    <span class="description">nanis [...] runu.moc.invalid -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Looks good just from examining the source. I am going to test it in my
current project some time tomorrow and let you know.

Thank you very much. I have benefited a lot from your work.

Sinan

On Tue Feb 02 15:12:26 2010, jesse@fsck.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I rewrote your patch somewhat to better match my preferred style for
&gt; things and to cut down the API size a bit. Can you see if 0.41_01 now
&gt; headed to CPAN meets your needs?
&gt; 
&gt; 
&gt; 
&gt; On Mon 25.Jan&#39;10 at 10:43:01 -0500, A. Sinan Unur via RT wrote:
<div class="message-stanza open">&gt; &gt; Mon Jan 25 10:43:00 2010: Request 53974 was acted upon.
&gt; &gt; Transaction: Ticket created by NANIS
&gt; &gt;        Queue: HTTP-Server-Simple
&gt; &gt;      Subject: HTTP::Server::Simple::CGI : Use user provided CGI class
&gt; &gt;    Broken in: 0.41
&gt; &gt;     Severity: Normal
&gt; &gt;        Owner: Nobody
&gt; &gt;   Requestors: nanis@cpan.org
&gt; &gt;       Status: new
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53974">https://rt.cpan.org/Ticket/Display.html?id=53974</a></span> &gt;
&gt; &gt; 
&gt; &gt; 
&gt; &gt; I recently uploaded a module
&gt; &gt; &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/perldoc/HTTP::Server::Simple::CGI::Simple">http://search.cpan.org/perldoc/HTTP::Server::Simple::CGI::Simple</a></span>&gt; to
&gt; &gt; CPAN which uses CGI::Simple rather than CGI.pm to provide a $cgi object
&gt; &gt; to handle_request.
&gt; &gt; 
&gt; &gt; brian d foy commented that it might be better to add support to
&gt; &gt; HTTP::Server::Simple::CGI for the name of the CGI class to be specified
&gt; &gt; at run time. I agree with him and, in hindsight, I should have known
&gt; &gt; better than to upload such a stupidly named module to CPAN ;-&#41;
&gt; &gt; 
&gt; &gt; To do this without altering the interface to programs that do not care
&gt; &gt; about using a different CGI module, I added the following methods to
&gt; &gt; HTTP::Server::Simple::CGI:
&gt; &gt; 
&gt; &gt; set_cgi_class / get_cgi_class
&gt; &gt; 
&gt; &gt; set_cgi_init / get_cgi_init
&gt; &gt; 
&gt; &gt; In addition, I removed the hard coded use CGI; from the module and
&gt; &gt; modified post_setup_hook so that a CGI.pm object is initialized if no
&gt; &gt; initialization sub is provided and in handler, the $cgi object is
&gt; &gt; instantiated using the user supplied class name rather than the hard
&gt; &gt; coded CGI.pm. If there is no user supplied class name, CGI.pm is used.
&gt; &gt; 
&gt; &gt; This seems to work on my machines &#40;ArchLinux and Windows XP both with
&gt; &gt; latest versions of Perl&#41;.
&gt; &gt; 
&gt; &gt; I think it would be nice if this support could be added to
&gt; &gt; HTTP::Server::Simple::CGI. Alternatively, a module called
&gt; &gt; HTTP::Server::Simple::CGI::Any could be provided &#40;which I can package if
&gt; &gt; you want&#41;.
&gt; &gt; 
&gt; &gt; Thank you. HTTP::Server::Simple is a very hand module.
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;03&nbsp;19:46:09&nbsp;2010</span>
    <span class="description">nanis [...] runu.moc.invalid -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I tested on Windows XP SP3 w/ ActiveState perl v.5.10.1.1006 using dmake
&#38; mingw installed from PPM. Everything worked.

My application also seems to be perfectly content.

I am marking this as &#39;resolved&#39; &#40;this is the first time I am doing this
so I hope it is OK&#41;.

Thank you very much.

Sinan

On Tue Feb 02 19:56:02 2010, NANIS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Looks good just from examining the source. I am going to test it in my
&gt; current project some time tomorrow and let you know.
&gt; 
&gt; Thank you very much. I have benefited a lot from your work.
&gt; 
&gt; Sinan
&gt; 
&gt; On Tue Feb 02 15:12:26 2010, jesse@fsck.com wrote:
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; I rewrote your patch somewhat to better match my preferred style for
&gt; &gt; things and to cut down the API size a bit. Can you see if 0.41_01 now
&gt; &gt; headed to CPAN meets your needs?
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; On Mon 25.Jan&#39;10 at 10:43:01 -0500, A. Sinan Unur via RT wrote:
<div class="message-stanza open">&gt; &gt; &gt; Mon Jan 25 10:43:00 2010: Request 53974 was acted upon.
&gt; &gt; &gt; Transaction: Ticket created by NANIS
&gt; &gt; &gt;        Queue: HTTP-Server-Simple
&gt; &gt; &gt;      Subject: HTTP::Server::Simple::CGI : Use user provided CGI class
&gt; &gt; &gt;    Broken in: 0.41
&gt; &gt; &gt;     Severity: Normal
&gt; &gt; &gt;        Owner: Nobody
&gt; &gt; &gt;   Requestors: nanis@cpan.org
&gt; &gt; &gt;       Status: new
&gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53974">https://rt.cpan.org/Ticket/Display.html?id=53974</a></span> &gt;
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; I recently uploaded a module
&gt; &gt; &gt; &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/perldoc/HTTP::Server::Simple::CGI::Simple">http://search.cpan.org/perldoc/HTTP::Server::Simple::CGI::Simple</a></span>&gt; to
&gt; &gt; &gt; CPAN which uses CGI::Simple rather than CGI.pm to provide a $cgi
</div></div></div>object
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; to handle_request.
&gt; &gt; &gt; 
&gt; &gt; &gt; brian d foy commented that it might be better to add support to
&gt; &gt; &gt; HTTP::Server::Simple::CGI for the name of the CGI class to be
</div></div>specified
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; at run time. I agree with him and, in hindsight, I should have known
&gt; &gt; &gt; better than to upload such a stupidly named module to CPAN ;-&#41;
&gt; &gt; &gt; 
&gt; &gt; &gt; To do this without altering the interface to programs that do not care
&gt; &gt; &gt; about using a different CGI module, I added the following methods to
&gt; &gt; &gt; HTTP::Server::Simple::CGI:
&gt; &gt; &gt; 
&gt; &gt; &gt; set_cgi_class / get_cgi_class
&gt; &gt; &gt; 
&gt; &gt; &gt; set_cgi_init / get_cgi_init
&gt; &gt; &gt; 
&gt; &gt; &gt; In addition, I removed the hard coded use CGI; from the module and
&gt; &gt; &gt; modified post_setup_hook so that a CGI.pm object is initialized if no
&gt; &gt; &gt; initialization sub is provided and in handler, the $cgi object is
&gt; &gt; &gt; instantiated using the user supplied class name rather than the hard
&gt; &gt; &gt; coded CGI.pm. If there is no user supplied class name, CGI.pm is used.
&gt; &gt; &gt; 
&gt; &gt; &gt; This seems to work on my machines &#40;ArchLinux and Windows XP both with
&gt; &gt; &gt; latest versions of Perl&#41;.
&gt; &gt; &gt; 
&gt; &gt; &gt; I think it would be nice if this support could be added to
&gt; &gt; &gt; HTTP::Server::Simple::CGI. Alternatively, a module called
&gt; &gt; &gt; HTTP::Server::Simple::CGI::Any could be provided &#40;which I can
</div></div>package if
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; you want&#41;.
&gt; &gt; &gt; 
&gt; &gt; &gt; Thank you. HTTP::Server::Simple is a very hand module.
</div>&gt; &gt; 
&gt; &gt; 
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;29&nbsp;03:14:46&nbsp;2011</span>
    <span class="description">cpan [...] chmrr.net -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
