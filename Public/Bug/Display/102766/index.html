<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #102766 for Unicode-Normalize: 1.18 - 20x slower than 1.17?</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #102766 for Unicode-Normalize: 1.18 - 20x slower than 1.17?</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Unicode-Normalize/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Unicode-Normalize/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Unicode-Normalize/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Unicode-Normalize/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Unicode-Normalize">Unicode-Normalize CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">102766</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Unicode-Normalize/Active/">Unicode-Normalize</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
philkime [...] kime.org.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
ether [...] cpan.org

<br />
SREZIC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-34522-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-34523-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.23    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;14&nbsp;13:38:52&nbsp;2015</span>
    <span class="description">philkime [...] kime.org.uk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 1.18 - 20x slower than 1.17?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 14 Mar 2015 18:38:39 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Unicode-Normalize [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kime Philip &lt;philkime [...] kime.org.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have a project heavily using Unicode::Normalize and after upgrading to 1.18 from 1.17, the program runs about 20x slower. I saw in the release notes about removing XSUB - does this mean 1.18 is all pure perl now? I looked at the referenced perldelta but it wasn’t clear if there was something else I need to do to use 1.18?


--
Dr Philip Kime
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;15&nbsp;03:25:01&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Cc SREZIC added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;15&nbsp;06:41:17&nbsp;2015</span>
    <span class="description">rsn10260 [...] nifty.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102766] 1.18 - 20x slower than 1.17?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 15 Mar 2015 19:40:36 +0900</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Unicode-Normalize [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sadahiro Tomoyuki &lt;rsn10260 [...] nifty.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

The latest Unicode::Normalize 1.18 provides pure perl only.
Older distributions of Unicode::Normalize, 0.06-1.17, have
both pure perl and XS.
The pure perl code of 1.18 is same as that of 1.17.
Then the change from 1.17 to 1.18 was just removal of XS.

Currently the C-level unicode support in perl seems
unstable or experimental so that perl5 porters try to fix
on EBCDIC systems.

1.17 is available from BackPAN.  If speed is important,
even though latest, using 1.18 is not recommended.

Regards,
SADAHIRO Tomoyuki

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sat Mar 14 13:38:52 2015: Request 102766 was acted upon.
&gt; Transaction: Ticket created by philkime@kime.org.uk
&gt;        Queue: Unicode-Normalize
&gt;      Subject: 1.18 - 20x slower than 1.17?
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: philkime@kime.org.uk
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102766">https://rt.cpan.org/Ticket/Display.html?id=102766</a></span> &gt;
&gt; 
&gt; 
&gt; I have a project heavily using Unicode::Normalize and after upgrading to 1.18 from 1.17, the program runs about 20x slower. I saw in the release notes about removing XSUB - does this mean 1.18 is all pure perl now? I looked at the referenced perldelta but it wasn’t clear if there was something else I need to do to use 1.18?
&gt; 
&gt; 
&gt; --
&gt; Dr Philip Kime
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;15&nbsp;06:41:17&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;15&nbsp;10:26:48&nbsp;2015</span>
    <span class="description">philkime [...] kime.org.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102766] 1.18 - 20x slower than 1.17?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 15 Mar 2015 15:26:05 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Unicode-Normalize [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kime Philip &lt;philkime [...] kime.org.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ok, thanks -do you plan to ad XS back in if this changes? It’s quite important for projects which need to do a lot of normalisation …

PK

--
Dr Philip Kime
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;16&nbsp;08:10:12&nbsp;2015</span>
    <span class="description">rsn10260 [...] nifty.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102766] 1.18 - 20x slower than 1.17?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 16 Mar 2015 21:09:38 +0900</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Unicode-Normalize [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sadahiro Tomoyuki &lt;rsn10260 [...] nifty.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

sadly it is uncertain.

perl5-porters has no objection against removal of XS
from Unicode::Normalize.
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.perl5.porters/2013/12/msg210313.html">http://www.nntp.perl.org/group/perl.perl5.porters/2013/12/msg210313.html</a></span>

Efficiency seems to be less important than portability.
There would be no guarantee that possible newer API is
compatible to older one.

Regards, SADAHIRO Tomoyuki

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Unicode-Normalize
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102766">https://rt.cpan.org/Ticket/Display.html?id=102766</a></span> &gt;
&gt; 
&gt; Ok, thanks -do you plan to ad XS back in if this changes? It’s quite important for projects which need to do a lot of normalisation …
&gt; 
&gt; PK
&gt; 
&gt; --
&gt; Dr Philip Kime
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;16&nbsp;16:13:33&nbsp;2015</span>
    <span class="description">philkime [...] kime.org.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102766] 1.18 - 20x slower than 1.17?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 16 Mar 2015 21:13:20 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Unicode-Normalize [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kime Philip &lt;philkime [...] kime.org.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">That is bad - Unicode::Collate and Unicode::Normalize are really important modules and performance is extremely important. I use them a lot to develop the LaTeX biblatex/biber systems which relies on these modules. You have done fantastic work with them. I hope the XS versions can return …

PK

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 16 Mar 2015, at 1:10 pm, Sadahiro Tomoyuki via RT &lt;bug-Unicode-Normalize@rt.cpan.org&gt; wrote:
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102766">https://rt.cpan.org/Ticket/Display.html?id=102766</a></span> &gt;
&gt; 
&gt; Hello,
&gt; 
&gt; sadly it is uncertain.
&gt; 
&gt; perl5-porters has no objection against removal of XS
&gt; from Unicode::Normalize.
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.perl5.porters/2013/12/msg210313.html">http://www.nntp.perl.org/group/perl.perl5.porters/2013/12/msg210313.html</a></span>
&gt; 
&gt; Efficiency seems to be less important than portability.
&gt; There would be no guarantee that possible newer API is
&gt; compatible to older one.
&gt; 
&gt; Regards, SADAHIRO Tomoyuki
&gt; 
<div class="message-stanza open">&gt;&gt;       Queue: Unicode-Normalize
&gt;&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102766">https://rt.cpan.org/Ticket/Display.html?id=102766</a></span> &gt;
&gt;&gt; 
&gt;&gt; Ok, thanks -do you plan to ad XS back in if this changes? It’s quite important for projects which need to do a lot of normalisation …
&gt;&gt; 
&gt;&gt; PK
&gt;&gt; 
&gt;&gt; --
&gt;&gt; Dr Philip Kime
&gt;&gt; 
</div>&gt; 
&gt; 
&gt; 
</div>
--
Dr Philip Kime
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;16&nbsp;16:56:55&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Maybe the issue should be raised again at p5p? If I understand it correctly, then here&#39;s a trade-off between EBCDIC compatibility and massive slowdown for all platforms, and this does not feel right.

Regards,
    Slaven

On 2015-03-16 08:10:12, rsn10260@nifty.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,
&gt; 
&gt; sadly it is uncertain.
&gt; 
&gt; perl5-porters has no objection against removal of XS
&gt; from Unicode::Normalize.
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.perl5.porters/2013/12/msg210313.html">http://www.nntp.perl.org/group/perl.perl5.porters/2013/12/msg210313.html</a></span>
&gt; 
&gt; Efficiency seems to be less important than portability.
&gt; There would be no guarantee that possible newer API is
&gt; compatible to older one.
&gt; 
&gt; Regards, SADAHIRO Tomoyuki
&gt; 
<div class="message-stanza open">&gt; &gt; Queue: Unicode-Normalize
&gt; &gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102766">https://rt.cpan.org/Ticket/Display.html?id=102766</a></span> &gt;
&gt; &gt;
&gt; &gt; Ok, thanks -do you plan to ad XS back in if this changes? It’s quite
&gt; &gt; important for projects which need to do a lot of normalisation …
&gt; &gt;
&gt; &gt; PK
&gt; &gt;
&gt; &gt; --
&gt; &gt; Dr Philip Kime
&gt; &gt;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;17&nbsp;08:11:36&nbsp;2015</span>
    <span class="description">rsn10260 [...] nifty.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102766] 1.18 - 20x slower than 1.17?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 17 Mar 2015 21:10:57 +0900</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Unicode-Normalize [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sadahiro Tomoyuki &lt;rsn10260 [...] nifty.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">hello,
other people may be able to do so;
I won&#39;t do so, as I did it in vain.
Users&#39; and other peoples&#39; opinion may make sense.

Regards, SADAHIRO Tomoyuki

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Unicode-Normalize
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102766">https://rt.cpan.org/Ticket/Display.html?id=102766</a></span> &gt;
&gt; 
&gt; Maybe the issue should be raised again at p5p? If I understand it correctly, then here&#39;s a trade-off between EBCDIC compatibility and massive slowdown for all platforms, and this does not feel right.
&gt; 
&gt; Regards,
&gt;     Slaven
&gt; 
&gt; On 2015-03-16 08:10:12, rsn10260@nifty.com wrote:
<div class="message-stanza open">&gt; &gt; Hello,
&gt; &gt; 
&gt; &gt; sadly it is uncertain.
&gt; &gt; 
&gt; &gt; perl5-porters has no objection against removal of XS
&gt; &gt; from Unicode::Normalize.
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.perl5.porters/2013/12/msg210313.html">http://www.nntp.perl.org/group/perl.perl5.porters/2013/12/msg210313.html</a></span>
&gt; &gt; 
&gt; &gt; Efficiency seems to be less important than portability.
&gt; &gt; There would be no guarantee that possible newer API is
&gt; &gt; compatible to older one.
&gt; &gt; 
&gt; &gt; Regards, SADAHIRO Tomoyuki
&gt; &gt; 
<div class="message-stanza open">&gt; &gt; &gt; Queue: Unicode-Normalize
&gt; &gt; &gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102766">https://rt.cpan.org/Ticket/Display.html?id=102766</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Ok, thanks -do you plan to ad XS back in if this changes? It’s quite
&gt; &gt; &gt; important for projects which need to do a lot of normalisation …
&gt; &gt; &gt;
&gt; &gt; &gt; PK
&gt; &gt; &gt;
&gt; &gt; &gt; --
&gt; &gt; &gt; Dr Philip Kime
&gt; &gt; &gt;
</div></div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;14&nbsp;13:45:56&nbsp;2015</span>
    <span class="description">ether [...] cpan.org -  Cc ETHER added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;14&nbsp;14:19:04&nbsp;2015</span>
    <span class="description">vpit [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">As far as I can tell, this simple patch &#40;against 1.17, the last release that bundles the XS implementation&#41; that replaces all the deprecated functions by their suggested counterparts makes the dist build and test fine on any perl from 5.6.1 to the latest 5.23.

I haven&#39;t tested on a EBCDIC platform, but I don&#39;t think it can possibly be worse than before.


Vincent
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> unichr_1.17.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- Unicode-Normalize-1.17/Normalize.xs	2013-10-04 23:38:11.000000000 -0300
+++ Unicode-Normalize-1.17/Normalize.xs	2015-07-14 15:06:25.000000000 -0300
@@ -21,14 +21,14 @@
 #include &#34;unfexc.h&#34;
 
 /* Perl 5.6.1 ? */
-#ifndef uvuni_to_utf8
-#define uvuni_to_utf8   uv_to_utf8
-#endif /* uvuni_to_utf8 */
+#ifndef uvchr_to_utf8
+#define uvchr_to_utf8   uv_to_utf8
+#endif /* uvchr_to_utf8 */
 
 /* Perl 5.6.1 ? */
-#ifndef utf8n_to_uvuni
-#define utf8n_to_uvuni   utf8_to_uv
-#endif /* utf8n_to_uvuni */
+#ifndef utf8n_to_uvchr
+#define utf8n_to_uvchr   utf8_to_uv
+#endif /* utf8n_to_uvchr */
 
 /* UTF8_ALLOW_BOM is used before Perl 5.8.0 */
 #ifndef UTF8_ALLOW_BOM
@@ -49,7 +49,7 @@
 
 #define AllowAnyUTF &#40;UTF8_ALLOW_SURROGATE|UTF8_ALLOW_BOM|UTF8_ALLOW_FE_FF|UTF8_ALLOW_FFFF&#41;
 
-/* check if the string buffer is enough before uvuni_to_utf8&#40;&#41;. */
+/* check if the string buffer is enough before uvchr_to_utf8&#40;&#41;. */
 /* dstart, d, and dlen should be defined outside before. */
 #define Renew_d_if_not_enough_to&#40;need&#41;	STRLEN curlen = d - dstart;	\
 		if &#40;dlen &lt; curlen + &#40;need&#41;&#41; {	\
@@ -58,7 +58,7 @@
 		    d = dstart + curlen;	\
 		}
 
-/* if utf8n_to_uvuni&#40;&#41; sets retlen to 0 &#40;if broken?&#41; */
+/* if utf8n_to_uvchr&#40;&#41; sets retlen to 0 &#40;if broken?&#41; */
 #define ErrRetlenIsZero &#34;panic &#40;Unicode::Normalize %s&#41;: zero-length character&#34;
 
 /* utf8_hop&#40;&#41; hops back before start. Maybe broken UTF-8 */
@@ -197,10 +197,10 @@
     if &#40;! Hangul_IsS&#40;uv&#41;&#41;
 	return d;
 
-    d = uvuni_to_utf8&#40;d, &#40;lindex + Hangul_LBase&#41;&#41;;
-    d = uvuni_to_utf8&#40;d, &#40;vindex + Hangul_VBase&#41;&#41;;
+    d = uvchr_to_utf8&#40;d, &#40;lindex + Hangul_LBase&#41;&#41;;
+    d = uvchr_to_utf8&#40;d, &#40;vindex + Hangul_VBase&#41;&#41;;
     if &#40;tindex&#41;
-	d = uvuni_to_utf8&#40;d, &#40;tindex + Hangul_TBase&#41;&#41;;
+	d = uvchr_to_utf8&#40;d, &#40;tindex + Hangul_TBase&#41;&#41;;
     return d;
 }
 
@@ -231,7 +231,7 @@
 
     while &#40;p &lt; e&#41; {
 	STRLEN retlen;
-	UV uv = utf8n_to_uvuni&#40;p, e - p, &#38;retlen, AllowAnyUTF&#41;;
+	UV uv = utf8n_to_uvchr&#40;p, e - p, &#38;retlen, AllowAnyUTF&#41;;
 	if &#40;!retlen&#41;
 	    croak&#40;ErrRetlenIsZero, &#34;decompose&#34;&#41;;
 	p += retlen;
@@ -251,7 +251,7 @@
 	    }
 	    else {
 		Renew_d_if_not_enough_to&#40;UTF8_MAXLEN&#41;
-		d = uvuni_to_utf8&#40;d, uv&#41;;
+		d = uvchr_to_utf8&#40;d, uv&#41;;
 	    }
 	}
     }
@@ -276,7 +276,7 @@
     while &#40;p &lt; e&#41; {
 	U8 curCC;
 	STRLEN retlen;
-	UV uv = utf8n_to_uvuni&#40;p, e - p, &#38;retlen, AllowAnyUTF&#41;;
+	UV uv = utf8n_to_uvchr&#40;p, e - p, &#38;retlen, AllowAnyUTF&#41;;
 	if &#40;!retlen&#41;
 	    croak&#40;ErrRetlenIsZero, &#34;reorder&#34;&#41;;
 	p += retlen;
@@ -316,14 +316,14 @@
 
 	    for &#40;i = 0; i &lt; cc_pos; i++&#41; {
 		Renew_d_if_not_enough_to&#40;UTF8_MAXLEN&#41;
-		d = uvuni_to_utf8&#40;d, seq_ptr[i].uv&#41;;
+		d = uvchr_to_utf8&#40;d, seq_ptr[i].uv&#41;;
 	    }
 	    cc_pos = 0;
 	}
 
 	if &#40;curCC == 0&#41; {
 	    Renew_d_if_not_enough_to&#40;UTF8_MAXLEN&#41;
-	    d = uvuni_to_utf8&#40;d, uv&#41;;
+	    d = uvchr_to_utf8&#40;d, uv&#41;;
 	}
     }
     if &#40;seq_ext&#41;
@@ -353,7 +353,7 @@
     while &#40;p &lt; e&#41; {
 	U8 curCC;
 	STRLEN retlen;
-	UV uv = utf8n_to_uvuni&#40;p, e - p, &#38;retlen, AllowAnyUTF&#41;;
+	UV uv = utf8n_to_uvchr&#40;p, e - p, &#38;retlen, AllowAnyUTF&#41;;
 	if &#40;!retlen&#41;
 	    croak&#40;ErrRetlenIsZero, &#34;compose&#34;&#41;;
 	p += retlen;
@@ -369,7 +369,7 @@
 	    }
 	    else {
 		Renew_d_if_not_enough_to&#40;UTF8_MAXLEN&#41;
-		d = uvuni_to_utf8&#40;d, uv&#41;;
+		d = uvchr_to_utf8&#40;d, uv&#41;;
 		continue;
 	    }
 	}
@@ -428,7 +428,7 @@
 	/* output */
 	{
 	    Renew_d_if_not_enough_to&#40;UTF8_MAXLEN&#41;
-	    d = uvuni_to_utf8&#40;d, uvS&#41;; /* starter &#40;composed or not&#41; */
+	    d = uvchr_to_utf8&#40;d, uvS&#41;; /* starter &#40;composed or not&#41; */
 	}
 
 	if &#40;cc_pos&#41; {
@@ -436,7 +436,7 @@
 
 	    for &#40;i = 0; i &lt; cc_pos; i++&#41; {
 		Renew_d_if_not_enough_to&#40;UTF8_MAXLEN&#41;
-		d = uvuni_to_utf8&#40;d, seq_ptr[i]&#41;;
+		d = uvchr_to_utf8&#40;d, seq_ptr[i]&#41;;
 	    }
 	    cc_pos = 0;
 	}
@@ -623,7 +623,7 @@
 
     preCC = 0;
     for &#40;p = s; p &lt; e; p += retlen&#41; {
-	UV uv = utf8n_to_uvuni&#40;p, e - p, &#38;retlen, AllowAnyUTF&#41;;
+	UV uv = utf8n_to_uvchr&#40;p, e - p, &#38;retlen, AllowAnyUTF&#41;;
 	if &#40;!retlen&#41;
 	    croak&#40;ErrRetlenIsZero, &#34;checkNFD or -NFKD&#34;&#41;;
 
@@ -660,7 +660,7 @@
 
     preCC = 0;
     for &#40;p = s; p &lt; e; p += retlen&#41; {
-	UV uv = utf8n_to_uvuni&#40;p, e - p, &#38;retlen, AllowAnyUTF&#41;;
+	UV uv = utf8n_to_uvchr&#40;p, e - p, &#38;retlen, AllowAnyUTF&#41;;
 	if &#40;!retlen&#41;
 	    croak&#40;ErrRetlenIsZero, &#34;checkNFC or -NFKC&#34;&#41;;
 
@@ -718,7 +718,7 @@
 	U8 *sCan;
 	UV uvLead;
 	STRLEN canlen = 0;
-	UV uv = utf8n_to_uvuni&#40;p, e - p, &#38;retlen, AllowAnyUTF&#41;;
+	UV uv = utf8n_to_uvchr&#40;p, e - p, &#38;retlen, AllowAnyUTF&#41;;
 	if &#40;!retlen&#41;
 	    croak&#40;ErrRetlenIsZero, &#34;checkFCD or -FCC&#34;&#41;;
 
@@ -727,7 +727,7 @@
 	if &#40;sCan&#41; {
 	    STRLEN canret;
 	    canlen = &#40;STRLEN&#41;strlen&#40;&#40;char *&#41; sCan&#41;;
-	    uvLead = utf8n_to_uvuni&#40;sCan, canlen, &#38;canret, AllowAnyUTF&#41;;
+	    uvLead = utf8n_to_uvchr&#40;sCan, canlen, &#38;canret, AllowAnyUTF&#41;;
 	    if &#40;!canret&#41;
 		croak&#40;ErrRetlenIsZero, &#34;checkFCD or -FCC&#34;&#41;;
 	}
@@ -758,7 +758,7 @@
 	    U8* pCan = utf8_hop&#40;eCan, -1&#41;;
 	    if &#40;pCan &lt; sCan&#41;
 		croak&#40;ErrHopBeforeStart&#41;;
-	    uvTrail = utf8n_to_uvuni&#40;pCan, eCan - pCan, &#38;canret, AllowAnyUTF&#41;;
+	    uvTrail = utf8n_to_uvchr&#40;pCan, eCan - pCan, &#38;canret, AllowAnyUTF&#41;;
 	    if &#40;!canret&#41;
 		croak&#40;ErrRetlenIsZero, &#34;checkFCD or -FCC&#34;&#41;;
 	    preCC = getCombinClass&#40;uvTrail&#41;;
@@ -897,7 +897,7 @@
 	p = utf8_hop&#40;p, -1&#41;;
 	if &#40;p &lt; s&#41;
 	    croak&#40;ErrHopBeforeStart&#41;;
-	uv = utf8n_to_uvuni&#40;p, e - p, NULL, AllowAnyUTF&#41;;
+	uv = utf8n_to_uvchr&#40;p, e - p, NULL, AllowAnyUTF&#41;;
 	if &#40;getCombinClass&#40;uv&#41; == 0&#41; /* Last Starter found */
 	    break;
     }
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;15&nbsp;09:08:51&nbsp;2015</span>
    <span class="description">SADAHIRO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you, but sorry, any patch that should break
on EBCDIC platforms cannot be applied, since
Unicode::Normalize is incorporated in perl.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As far as I can tell, this simple patch &#40;against 1.17, the last
&gt; release that bundles the XS implementation&#41; that replaces all the
&gt; deprecated functions by their suggested counterparts makes the dist
&gt; build and test fine on any perl from 5.6.1 to the latest 5.23.
&gt; 
&gt; I haven&#39;t tested on a EBCDIC platform, but I don&#39;t think it can
&gt; possibly be worse than before.
&gt; 
&gt; 
&gt; Vincent
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;16&nbsp;01:13:50&nbsp;2015</span>
    <span class="description">khw [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> rsn10260 [...] nifty.com, rjbs [...] manxome.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jul 15 07:08:51 2015, SADAHIRO wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thank you, but sorry, any patch that should break
&gt; on EBCDIC platforms cannot be applied, since
&gt; Unicode::Normalize is incorporated in perl.
&gt; 
<div class="message-stanza open">&gt; &gt; As far as I can tell, this simple patch &#40;against 1.17, the last
&gt; &gt; release that bundles the XS implementation&#41; that replaces all the
&gt; &gt; deprecated functions by their suggested counterparts makes the dist
&gt; &gt; build and test fine on any perl from 5.6.1 to the latest 5.23.
&gt; &gt; 
&gt; &gt; I haven&#39;t tested on a EBCDIC platform, but I don&#39;t think it can
&gt; &gt; possibly be worse than before.
&gt; &gt; 
&gt; &gt; 
&gt; &gt; Vincent
</div></div>
Unicode::Normalize has not been ported to EBCDIC platforms.  There is therefore no reason to reject a patch to it on the basis that it won&#39;t work on EBCDIC.  &#40;I haven&#39;t examined this patch at all.&#41;  

p5p wants the XS version of Unicode::Normalize back.  I was very disappointed that you took it away.  I most likely will be the one to port it to EBCDIC at some point, and when I do, I will make sure that the changed version I come up with does not cause it to break on any ASCII version that it currently runs on, and will issue a pull request so that you won&#39;t have to do anything but critique my work.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other Forward Transaction even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;16&nbsp;23:54:41&nbsp;2015</span>
    <span class="description">hatuka [...] nezumi.nu -  Forwarded Transaction #1517382 to nezumi@cpan.org</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;23&nbsp;11:21:23&nbsp;2015</span>
    <span class="description">PHILKIME [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Jul 16 01:13:50 2015, khw wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Jul 15 07:08:51 2015, SADAHIRO wrote:
<div class="message-stanza open">&gt; &gt; Thank you, but sorry, any patch that should break
&gt; &gt; on EBCDIC platforms cannot be applied, since
&gt; &gt; Unicode::Normalize is incorporated in perl.
</div></div>
SADAHIRO, as per the last comment, it looks like XS could be put back in?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;24&nbsp;08:18:46&nbsp;2015</span>
    <span class="description">SADAHIRO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">As far as I know, after perl 5.8.0,
there were two seasons when people worked
for porting perl on the EBCDIC platform.
The following are each one of mail I found:

*  23 Jul 2003
  <span class="clickylink"><a target="new" rel="nofollow" href="http://www.xray.mpe.mpg.de/mailing-lists/perl-mvs/">http://www.xray.mpe.mpg.de/mailing-lists/perl-mvs/</a></span>
  2003-07/msg00004.html
  [ AW: Perl 5.8.1 release candidate 2 now available
   for testing &#40;a first result for BS2000&#41; ]

* 17 Jun 2006
  <span class="clickylink"><a target="new" rel="nofollow" href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/">http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/</a></span>
  2006-06/msg00593.html
  &#40; IBM z/OS Unix source code fixes for Perl 5.8.7 &#41;

I have neither been reported yet
that Unicode::Normalizes would work on the platforms,
nor that it should not work there.
I am not sure till the end.

P.S. IBM seemed to announce perl had worked there:
   the User&#39;s Guide shows at least a part of Encode module
   would work; no comment about Unicode::Normalizes.

 * <span class="clickylink"><a target="new" rel="nofollow" href="http://www-03.ibm.com/systems/z/os/zos/features/unix/ported/perl/">http://www-03.ibm.com/systems/z/os/zos/features/unix/ported/perl/</a></span>

   What is Perl for z/OS?
   Perl for z/OS provides a port of the Perl &#40;version 5.8.7&#41; scripting
   language to the z/OS UNIX System Services platform.
   Perl &#40;Practical Extraction and Report Language&#41; is a very popular
   general-purpose programming language that is widely used on UNIX
   and other computing platforms.
   This port of Perl to the z/OS platform offers an enhancement
   over other versions of Perl in that it is preconfigured and
   precompiled and is designed to address ASCII/EBCDIC conversion
   and provide Unicode support.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;28&nbsp;21:22:54&nbsp;2015</span>
    <span class="description">khw [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> rjbs [...] manxome.org, rsn10260 [...] nifty.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Jul 24 06:18:46 2015, SADAHIRO wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As far as I know, after perl 5.8.0,
&gt; there were two seasons when people worked
&gt; for porting perl on the EBCDIC platform.
&gt; The following are each one of mail I found:
&gt; 
&gt; *  23 Jul 2003
&gt;   <span class="clickylink"><a target="new" rel="nofollow" href="http://www.xray.mpe.mpg.de/mailing-lists/perl-mvs/">http://www.xray.mpe.mpg.de/mailing-lists/perl-mvs/</a></span>
&gt;   2003-07/msg00004.html
&gt;   [ AW: Perl 5.8.1 release candidate 2 now available
&gt;    for testing &#40;a first result for BS2000&#41; ]
&gt; 
&gt; * 17 Jun 2006
&gt;   <span class="clickylink"><a target="new" rel="nofollow" href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/">http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/</a></span>
&gt;   2006-06/msg00593.html
&gt;   &#40; IBM z/OS Unix source code fixes for Perl 5.8.7 &#41;
&gt; 
&gt; I have neither been reported yet
&gt; that Unicode::Normalizes would work on the platforms,
&gt; nor that it should not work there.
&gt; I am not sure till the end.
&gt; 
&gt; P.S. IBM seemed to announce perl had worked there:
&gt;    the User&#39;s Guide shows at least a part of Encode module
&gt;    would work; no comment about Unicode::Normalizes.
&gt; 
&gt;  * <span class="clickylink"><a target="new" rel="nofollow" href="http://www-03.ibm.com/systems/z/os/zos/features/unix/ported/perl/">http://www-03.ibm.com/systems/z/os/zos/features/unix/ported/perl/</a></span>
&gt; 
&gt;    What is Perl for z/OS?
&gt;    Perl for z/OS provides a port of the Perl &#40;version 5.8.7&#41; scripting
&gt;    language to the z/OS UNIX System Services platform.
&gt;    Perl &#40;Practical Extraction and Report Language&#41; is a very popular
&gt;    general-purpose programming language that is widely used on UNIX
&gt;    and other computing platforms.
&gt;    This port of Perl to the z/OS platform offers an enhancement
&gt;    over other versions of Perl in that it is preconfigured and
&gt;    precompiled and is designed to address ASCII/EBCDIC conversion
&gt;    and provide Unicode support.
</div>
The EBCDIC port in 5.8, even if it worked well in Unicode, which I&#39;m sceptical of, was broken in the many intervening years and releases where there were no EBCDIC smokers.  The port I was referring to was the one for 5.22, which required many changes.  Unicode::Normalize was not included there.  Here is the perl5220delta.pod text:

=item z/OS running EBCDIC Code Page 1047

Core perl now works on this EBCDIC platform.  Earlier perls also worked, but,
even though support wasn&#39;t officially withdrawn, recent perls would not compile
and run well.  Perl 5.20 would work, but had many bugs which have now been
fixed.  Many CPAN modules that ship with Perl still fail tests, including
C&lt;Pod::Simple&gt;.  However the version of C&lt;Pod::Simple&gt; currently on CPAN should work;
it was fixed too late to include in Perl 5.22.  Work is under way to fix many
of the still-broken CPAN modules, which likely will be installed on CPAN when
completed, so that you may not have to wait until Perl 5.24 to get a working
version.


Let me put it another way, I have a commit bit to core perl.  If this patch looks ok to you, and you put the XS version back into U::N, I will personally and quickly apply it to blead &#40;after looking it over myself&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;30&nbsp;08:26:02&nbsp;2015</span>
    <span class="description">SADAHIRO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; SADAHIRO, as per the last comment, it looks like XS could be put back in?
</div>
As the XS lacks backward compatibility,
I shall no longer maintain it.
Whoever want to do so, however, can maintain it.

P.S.

I has not followed recent core changes.
I had wrote it for perl 5.6.1 and 5.8.0,
that have been out of date.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;01&nbsp;13:11:20&nbsp;2015</span>
    <span class="description">rjbs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">SADAHIRO, if it is acceptable to you, I will have P5P take charge of making a new release, ensuring backward compatibility, and keeping this module maintained.

Is that acceptable?

-- 
rjbs
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;01&nbsp;13:17:58&nbsp;2015</span>
    <span class="description">khw [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> rsn10260 [...] nifty.com, rjbs [...] manxome.org, philkime [...] kime.org.uk,
 SREZIC [...] cpan.org, perl [...] profvince.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Jul 30 06:26:02 2015, SADAHIRO wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; SADAHIRO, as per the last comment, it looks like XS could be put back in?
</div>&gt; 
&gt; As the XS lacks backward compatibility,
&gt; I shall no longer maintain it.
&gt; Whoever want to do so, however, can maintain it.
&gt; 
&gt; P.S.
&gt; 
&gt; I has not followed recent core changes.
&gt; I had wrote it for perl 5.6.1 and 5.8.0,
&gt; that have been out of date.
</div>
I will test Vincent&#39;s patch.  The XS needs to get back into core somehow
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;02&nbsp;08:16:11&nbsp;2015</span>
    <span class="description">SADAHIRO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; SADAHIRO, if it is acceptable to you, I will have P5P take charge of
&gt; making a new release, ensuring backward compatibility, and keeping
&gt; this module maintained.
&gt; 
&gt; Is that acceptable?
</div>
Yes, no problem.
P5P should be appropriate.
I need not to continue its maintainer.

P.S.
  The releases of 1.18 and 1.19 don&#39;t include
  any meaningful change for its XS.
  The following commits might be reverted:
* 2015-07-14 Steve Hay
  Upgrade Unicode-Normalize from version 1.18 to 1.19
* 2014-05-28 Steve Hay
  Upgrade Unicode::Normalize from version 1.17 to 1.18
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;26&nbsp;17:42:24&nbsp;2015</span>
    <span class="description">khw [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> SREZIC [...] cpan.org, rjbs [...] manxome.org, perl [...] profvince.com,
 rsn10260 [...] nifty.com, Stromeko [...] NexGo.DE</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Unicode::Normalize 1.23 has been released, which restores the XSUB interface.

unicode.org publishes a comprehensive normalization test suite.  There was essentially no speed difference when this was run on the .xs versus the pure perl versions.  This was not written to do benchmarks.  But I found it surprising that it didn&#39;t shown some differences in light of what you said about a 20x speed difference.  Apparently other overhead dwarfs that.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;26&nbsp;17:42:29&nbsp;2015</span>
    <span class="description">khw [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;26&nbsp;17:42:30&nbsp;2015</span>
    <span class="description">khw [...] cpan.org -  Fixed in 1.23 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;28&nbsp;04:38:26&nbsp;2015</span>
    <span class="description">Stromeko [...] NexGo.DE -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> SREZIC [...] cpan.org, rjbs [...] manxome.org, perl [...] profvince.com, rsn10260 [...] nifty.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102766] 1.18 - 20x slower than 1.17?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 28 Oct 2015 09:38:02 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Unicode-Normalize [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ASSI &lt;Stromeko [...] NexGo.DE&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Am 26.10.2015 um 22:42 schrieb Karl Williamson via RT:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102766">https://rt.cpan.org/Ticket/Display.html?id=102766</a></span> &gt;
&gt;
&gt; Unicode::Normalize 1.23 has been released, which restores the XSUB
&gt; interface.
</div>
Thank you very much.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; unicode.org publishes a comprehensive normalization test suite.
&gt; There was essentially no speed difference when this was run on the
&gt; .xs versus the pure perl versions.  This was not written to do
&gt; benchmarks.  But I found it surprising that it didn&#39;t shown some
&gt; differences in light of what you said about a 20x speed difference.
&gt; Apparently other overhead dwarfs that.
</div>
I have confirmation that Biber works with acceptable speed with version 
1.23 again on Cygwin.  I don&#39;t know what exactly Biber is doing to 
trigger this large performance difference PP vs. XS, it would maybe be 
useful to try and find out.


-- 
Achim.

&#40;on the road :-&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;28&nbsp;12:07:42&nbsp;2015</span>
    <span class="description">PHILKIME [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 28 04:38:26 2015, Stromeko@NexGo.DE wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have confirmation that Biber works with acceptable speed with version 
&gt; 1.23 again on Cygwin.  I don&#39;t know what exactly Biber is doing to 
&gt; trigger this large performance difference PP vs. XS, it would maybe be 
&gt; useful to try and find out.
</div>
Many thanks for 1.23

Biber just does a lot of normalisation on reading and writing files. As per standard practice, it converts to NFD on points of entry and NFC on points of exit and this happens in several areas of operation. I can imagine that the characteristics of particular test suites can make this invisible for small amounts of text. 
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
