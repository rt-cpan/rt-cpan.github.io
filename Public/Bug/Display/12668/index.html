<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #12668 for Convert-Binary-C: Some Config variables corrupted when using this module</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #12668 for Convert-Binary-C: Some Config variables corrupted when using this module</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Convert-Binary-C">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Convert-Binary-C">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Convert-Binary-C">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Convert-Binary-C">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Convert-Binary-C">Convert-Binary-C CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">12668</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Convert-Binary-C">Convert-Binary-C</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
rob.west [...] tekelec.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-7934-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.58    </td>
  </tr>
  <tr id="CF-7935-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Config.pm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/130759/34514/Config.pm">
Wed May 04 11:08:10 2005 (35k) by 
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/130758/34509/Config.pm">
Wed May 04 10:34:32 2005 (35k) by 
</a>
</font></li>
</ul>


Test.pm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/130757/34506/Test.pm">
Wed May 04 10:32:56 2005 (22k) by 
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=12668">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-130754" href="/Public/Bug/Display.html?id=12668#txn-130754">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;03&nbsp;18:00:16&nbsp;2005</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Some Config variables corrupted when using this module</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/130754/34468/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/34468">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Distribution name and version: Convert-Binary-C-0.58
Perl version: 5.8.0 built for i386-linux-thread-multi
Operating System vendor and version: Linux nc1lx2132b 2.4.20-8smp #1 SMP Thu Mar 13 17:45:54 EST 2003 i686 i686 i386 GNU/Linux


Symptom:
My &#39;make test&#39; failed on 132_native.t. Here&#39;s the relevant output:
t/132_native.........ok 7/59# Test 11 got: &#39;4&#39;
issymlink=&#39;/usr/bin/t&#39; &#40;t/132_native.t at line 56&#41;
#    Expected: &#39;4&#39;
#  t/132_native.t line 56 is:     ok&#40;$Config{lc $_}, $c-&gt;native&#40;$_&#41;&#41;;
# Test 17 got: &#39;4&#39;
lp=&#39;&#39;
lpr=&#39;&#39;
ls=&#39;ls&#39;
lseeksize&#39; &#40;t/132_native.t at line 56 fail #4&#41;
#    Expected: &#39;4&#39;
# Test 19 got: &#39;&#39; &#40;t/132_native.t at line 56 fail #5&#41;
#    Expected: &#39;8&#39;
t/132_native.........FAILED tests 11, 17, 19
        Failed 3/59 tests, 94.92% okay


I tried running t/132_native.t directly:
ok 10
# native&#40;IntSize&#41; = 4
#   found $Config{intsize}
not ok 11
# Test 11 got: &#39;4&#39;
issymlink=&#39;/usr/bin/t&#39; &#40;t/132_native.t at line 56&#41;
#    Expected: &#39;4&#39;
#  t/132_native.t line 56 is:     ok&#40;$Config{lc $_}, $c-&gt;native&#40;$_&#41;&#41;;
ok 12
# native&#40;CharSize&#41; = 1
#   found $Config{charsize}
ok 13
ok 14
# native&#40;ShortSize&#41; = 2
#   found $Config{shortsize}
ok 15
ok 16
# native&#40;LongSize&#41; = 4
#   found $Config{longsize}
not ok 17
# Test 17 got: &#39;4&#39;
lp=&#39;&#39;
lpr=&#39;&#39;
ls=&#39;ls&#39;
lseeksize&#39; &#40;t/132_native.t at line 56 fail #4&#41;
#    Expected: &#39;4&#39;
ok 18
# native&#40;LongLongSize&#41; = 8
#   found $Config{longlongsize}
not ok 19
# Test 19 got: &#39;&#39; &#40;t/132_native.t at line 56 fail #5&#41;
#    Expected: &#39;8&#39;
ok 20


To narrow it down, I wrote the following:
use Test;
use Config;
use Convert::Binary::C;
 
BEGIN { plan tests =&gt; 1 }
 
ok&#40;$Config{&#39;intsize&#39;}, &#39;4&#39;&#41;;


Here are the results:
# perl -Iblib/arch -Iblib/lib t/config.t
1..1
# Running under perl version 5.008 for linux
# Current time local: Tue May  3 17:57:43 2005
# Current time GMT:   Tue May  3 21:57:43 2005
# Using Test.pm version 1.23
not ok 1
# Test 1 got: &#39;4&#39;
issymlin&#39; &#40;t/config.t at line 7&#41;
#   Expected: &#39;4&#39;
#  t/config.t line 7 is: ok&#40;$Config{&#39;intsize&#39;}, &#39;4&#39;&#41;;


If I comment out the &#39;use Convert::Binary::C;&#39; line, I get the following:
# perl -Iblib/arch -Iblib/lib t/config.t
1..1
# Running under perl version 5.008 for linux
# Current time local: Tue May  3 17:58:55 2005
# Current time GMT:   Tue May  3 21:58:55 2005
# Using Test.pm version 1.23
ok 1


I&#39;d really like to use the module, but this strangeness scares me. I&#39;m hoping there&#39;s a fairly simple answer.

Thanks,
Rob West
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-130755" href="/Public/Bug/Display.html?id=12668#txn-130755">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;03&nbsp;18:09:36&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rob.west [...] tekelec.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/130755/34470/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/34470">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Darn it, I realized after I hit the create button that I pasted the
outputs with my slightly modified version of 132_native.t. 

To avoid any confusion, here&#39;s the relevant output of &#39;make test&#39; with
the original:

t/132_native.........ok 7/59# Test 11 got: &#39;4&#39;
issymlink=&#39;/usr/bin/t&#39; &#40;t/132_native.t at line 56&#41;
#    Expected: &#39;4&#39;
#  t/132_native.t line 56 is:     ok&#40;$Config{lc $_}, $c-&gt;native&#40;$_&#41;&#41;;
# Test 17 got: &#39;4&#39;
lp=&#39;&#39;
lpr=&#39;&#39;
ls=&#39;ls&#39;
lseeksize&#39; &#40;t/132_native.t at line 56 fail #4&#41;
t/132_native.........NOK 17#    Expected: &#39;4&#39;
t/132_native.........ok 18/59# Test 19 got: &#39;&#39; &#40;t/132_native.t at line
56 fail #5&#41;
#    Expected: &#39;8&#39;
t/132_native.........FAILED tests 11, 17, 19
        Failed 3/59 tests, 94.92% okay


And, here&#39;s the relevant output of running 132_native.t directly:
ok 8
# native&#40;PointerSize&#41; = 4
ok 9
ok 10
# native&#40;IntSize&#41; = 4
#   found $Config{intsize}
not ok 11
# Test 11 got: &#39;4&#39;
issymlink=&#39;/usr/bin/t&#39; &#40;t/132_native.t at line 56&#41;
#    Expected: &#39;4&#39;
#  t/132_native.t line 56 is:     ok&#40;$Config{lc $_}, $c-&gt;native&#40;$_&#41;&#41;;
ok 12
# native&#40;CharSize&#41; = 1
#   found $Config{charsize}
ok 13
ok 14
# native&#40;ShortSize&#41; = 2
#   found $Config{shortsize}
ok 15
ok 16
# native&#40;LongSize&#41; = 4
#   found $Config{longsize}
not ok 17
# Test 17 got: &#39;4&#39;
lp=&#39;&#39;
lpr=&#39;&#39;
ls=&#39;ls&#39;
lseeksize&#39; &#40;t/132_native.t at line 56 fail #4&#41;
#    Expected: &#39;4&#39;
ok 18
# native&#40;LongLongSize&#41; = 8
#   found $Config{longlongsize}
not ok 19
# Test 19 got: &#39;&#39; &#40;t/132_native.t at line 56 fail #5&#41;
#    Expected: &#39;8&#39;
ok 20
# native&#40;FloatSize&#41; = 4
ok 21
ok 22
# native&#40;DoubleSize&#41; = 8
#   found $Config{doublesize}
ok 23
ok 24
# native&#40;LongDoubleSize&#41; = 12
ok 25
ok 26
# native&#40;Alignment&#41; = 4
ok 27
ok 28
# native&#40;CompoundAlignment&#41; = 1
ok 29
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-130756" href="/Public/Bug/Display.html?id=12668#txn-130756">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;04&nbsp;03:45:29&nbsp;2005</span>
    <span class="description">mhx-perl [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 4 May 2005 09:38:24 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marcus Holland-Moritz &lt;mhx-perl [...] gmx.net&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Convert-Binary-C [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [cpan #12668] Some Config variables corrupted when using this module</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">RT-Send-Cc:</td>
    <td class="message-header-value"> </td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/130756/34483/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/34483">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

thanks for taking the time to document the failure.

However, I don&#39;t think this is a bug in either Convert::Binary::C
or in its test suite. I rather suspect that your Config module is
broken. I believe that I&#39;m not using the Config module in obscure
ways, and I&#39;ve tested Convert::Binary::C successfully with all
public Perl releases since 5.005_03.

The expected output of running t/132_native.t is something like:

  1..59
  # Running under perl version 5.009003 for linux
  # Current time local: Wed May  4 09:00:45 2005
  # Current time GMT:   Wed May  4 07:00:45 2005
  # Using Test.pm version 1.25
  ok 1
  ok 2
  ok 3
  ok 4
  ok 5
  ok 6
  ok 7
  ok 8
  # native&#40;PointerSize&#41; = 4
  ok 9
  ok 10
  # native&#40;IntSize&#41; = 4
  #   found $Config{intsize}
  ok 11
  ok 12
  # native&#40;CharSize&#41; = 1
  #   found $Config{charsize}
  ok 13
  ok 14
  # native&#40;ShortSize&#41; = 2
  #   found $Config{shortsize}
  ok 15
  ok 16
  # native&#40;LongSize&#41; = 4
  #   found $Config{longsize}
  ok 17
  ok 18
  # native&#40;LongLongSize&#41; = 8
  #   found $Config{longlongsize}
  ok 19
  ok 20
  # native&#40;FloatSize&#41; = 4
  ok 21
  ok 22
  # native&#40;DoubleSize&#41; = 8
  #   found $Config{doublesize}
  ok 23
  ok 24
  # native&#40;LongDoubleSize&#41; = 12
  ok 25
  ok 26
  # native&#40;Alignment&#41; = 4
  ok 27
  ok 28
  # native&#40;CompoundAlignment&#41; = 1
  ok 29
  ok 30
  ok 31
  ok 32
  ok 33
  ok 34
  ok 35
  ok 36
  ok 37
  ok 38
  ok 39
  ok 40
  ok 41
  ok 42
  ok 43
  ok 44
  ok 45
  ok 46
  ok 47
  ok 48
  ok 49
  ok 50
  ok 51
  ok 52
  ok 53
  ok 54
  ok 55
  ok 56
  ok 57
  ok 58
  ok 59

Note that this doesn&#39;t contain the spurious Config variables seen
in your output &#40;&#39;issymlink&#39;, &#39;lp&#39;, &#39;lpr&#39;, ls&#39;, &#39;lseeksize&#39;&#41;.
The interesting thing is that &#39;issymlink&#39; immediately follows
&#39;intsize&#39; and &#39;lp&#39; immediately follows &#39;longsize&#39; in Config.pm.

As I&#39;d really like to find the source of the problem, could you
please send the following to me:

  1&#41; the output of

       perl -V

  2&#41; the files that

       perl -MConfig -le &#39;print $INC{&#34;Config.pm&#34;}&#39;

     and

       perl -MTest -le &#39;print $INC{&#34;Test.pm&#34;}&#39;

     point to &#40;i.e. your Config and Test modules&#41;

Please attach the Config.pm / Test.pm so they won&#39;t be messed up
by email clients and/or the CPAN RT system.

Thanks,
Marcus
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-130757" href="/Public/Bug/Display.html?id=12668#txn-130757">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;04&nbsp;10:32:56&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rob.west [...] tekelec.com</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/130757/34505/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/34505">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Marcus,

Thanks very much for being so responsive. I thought it might be my
Config module also, which is why I wrote the config.t test I mentioned.
It passes when your module is not used and fails when it is used.
However, I suppose that doesn&#39;t necessarily prove it beyond a doubt. I
appreciate any help you can provide. I have attached my Config.pm and
Test.pm as you requested. 

Here is the output from the commands. I do notice that the output from
perl -V looks very suspect:

# perl -V
Summary of my perl5 &#40;revision 5.0 version 8 subversion 0&#41; configuration:
  Platform:
    osname=linux, osvers=2.4.20-2.48smp, archname=i386-linux-thread-multi
    uname=&#39;linux str&#39;
    config_args=&#39;-des -Doptimize=-O2 -march=i386 -mcpu=i686 -g
-Dmyhostname=localhost -Dperladmin=root@localhost -Dcc=gcc -Dcf_by=Red
Hat, Inc. -Dinstallprefix=/usr -Dprefix=/usr -Darchname=i386-linux
-Dvendorprefix=/usr -Dsiteprefix=/usr
-Dotherlibdirs=/usr/lib/perl5/5.8.0 -Duseshrplib -Dusethreads
-Duseithreads -Duselargefiles -Dd_dosuid -Dd_semctl_semun -Di_db
-Ui_ndbm -Di_gdbm -Di_shadow -Di_syslog -Dman3ext=3pm -Duseperlio
-Dinstallusrbinperl -Ubincompat5005 -Uversiononly -Dpager=/usr/bin/less
-isr&#39;
    hint=recommended, useposix=true, d_sigaction=define
    usethreads=define use5005threads=undef&#39;
 useithreads=define usemultiplicity=
    useperlio= d_sfio=undef uselargefiles=define usesocks=undef
    use64bitint=undef use64bitall=un uselongdouble=
    usemymalloc=, bincompat5005=undef
  Compiler:
    cc=&#39;gcc&#39;, ccflags =&#39;-D_REENTRANT -D_GNU_SOURCE -DTHREADS_HAVE_PIDS
-DDEBUGGING -fno-strict-aliasing -I/usr/local/include
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm&#39;,
    optimize=&#39;&#39;,
    cppflags=&#39;-D_REENTRANT -D_GNU_SOURCE -DTHREADS_HAVE_PIDS -DDEBUGGING
-fno-strict-aliasing -I/usr/local/include -I/usr/include/gdbm&#39;
    ccversion=&#39;&#39;, gccversion=&#39;3.2.2 20030213 &#40;Red Hat Linux 8.0
3.2.2-1&#41;&#39;, gccosandvers=&#39;&#39;
gccversion=&#39;3.2.2 200302&#39;
    intsize=e, longsize= , ptrsize=p, doublesize=8, byteorder=1234
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=12
    ivtype=&#39;long&#39;
k&#39;, ivsize=4&#39;
ivtype=&#39;long&#39;
known_ext, nvtype=&#39;double&#39;
o_nonbl&#39;, nvsize=, Off_t=&#39;&#39;, lseeksize=8
    alignbytes=4, prototype=define
  Linker and Libraries:
    ld=&#39;gcc&#39;
l&#39;, ldflags =&#39; -L/usr/local/lib&#39;
ldf&#39;
    libpth=/usr/local/lib /lib /usr/lib
    libs=-lnsl -lgdbm -ldb -ldl -lm -lpthread -lc -lcrypt -lutil
    perllibs=
    libc=/lib/libc-2.3.1.so, so=so, useshrplib=true, libperl=libper
    gnulibc_version=&#39;2.3.1&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so&#39;, d_dlsymun=undef, ccdlflags=&#39;-rdynamic
-Wl,-rpath,/usr/lib/perl5/5.8.0/i386-linux-thread-multi/CORE&#39;
    cccdlflags=&#39;-fPIC&#39;
ccdlflags=&#39;-rdynamic -Wl,-rpath,/usr/lib/perl5&#39;, lddlflags=&#39;s
Unicode/Normalize
XS/A&#39;
 
 
Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options: DEBUGGING MULTIPLICITY USE_ITHREADS
USE_LARGE_FILES PERL_IMPLICIT_CONTEXT
  Locally applied patches:
        MAINT18379
  Built under linux
  Compiled at Feb 18 2003 22:19:53
  @INC:
    /usr/lib/perl5/5.8.0/i386-linux-thread-multi
    /usr/lib/perl5/5.8.0
    /usr/lib/perl5/site_perl/5.8.0/i386-linux-thread-multi
    /usr/lib/perl5/site_perl/5.8.0
    /usr/lib/perl5/site_perl
    /usr/lib/perl5/vendor_perl/5.8.0/i386-linux-thread-multi
    /usr/lib/perl5/vendor_perl/5.8.0
    /usr/lib/perl5/vendor_perl
    /usr/lib/perl5/5.8.0/i386-linux-thread-multi
    /usr/lib/perl5/5.8.0
    .

# perl -MConfig -le &#39;print $INC{&#34;Config.pm&#34;}&#39;
/usr/lib/perl5/5.8.0/i386-linux-thread-multi/Config.pm

# perl -MTest -le &#39;print $INC{&#34;Test.pm&#34;}&#39;
/usr/lib/perl5/5.8.0/Test.pm

Thanks,
Rob
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/130757/34506/Test.pm">Download Test.pm</a><br />
<span class="downloadcontenttype">text/x-perl 22k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-130758" href="/Public/Bug/Display.html?id=12668#txn-130758">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;04&nbsp;10:34:31&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rob.west [...] tekelec.com</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/130758/34508/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/34508">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 34b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here&#39;s the Config.pm attachment...
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/130758/34509/Config.pm">Download Config.pm</a><br />
<span class="downloadcontenttype">text/x-perl 35k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-130759" href="/Public/Bug/Display.html?id=12668#txn-130759">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;04&nbsp;11:08:10&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rob.west [...] tekelec.com</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/130759/34513/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/34513">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 34b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here&#39;s the Config.pm attachment...
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/130759/34514/Config.pm">Download Config.pm</a><br />
<span class="downloadcontenttype">text/x-perl 35k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-130760" href="/Public/Bug/Display.html?id=12668#txn-130760">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;04&nbsp;15:27:38&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rob.west [...] tekelec.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/130760/34524/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/34524">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 422b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">OK, it is definitely something wrong with my environment, but I don&#39;t
know what. For kicks, I tried running &#39;make test&#39; as a regular user vs.
root, and it passed. Since I need to be root to do &#39;make install&#39;, I&#39;m
still a little worried, but I will progress. I&#39;d love to figure out what
the diff is that is causing this so I could fix or work around it, though.

Thanks again, Marcus, for the module and the support!

- Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-130761" href="/Public/Bug/Display.html?id=12668#txn-130761">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;04&nbsp;16:29:48&nbsp;2005</span>
    <span class="description">mhx-perl [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 4 May 2005 22:29:35 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marcus Holland-Moritz &lt;mhx-perl [...] gmx.net&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Convert-Binary-C [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [cpan #12668] Some Config variables corrupted when using this module</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">RT-Send-Cc:</td>
    <td class="message-header-value"> </td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/130761/34527/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/34527">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Rob,

good news first: This is definitely not a bug in Convert::Binary::C.

Your Config.pm and Test.pm both look sane. From the perl -V output I could
see that you&#39;re using a rather old RedHat 8.0 Linux. So I just downloaded
the installation CD, installed RedHat under VMware, up2date&#39;d to a similar
perl version as yours and was immediately able to reproduce the problem.

I still didn&#39;t know what the problem was, but I could reduce it to:

  [mhx@redhat mhx]$ perl -MConfig -le&#39;print &#34;$_=[$Config{$_}]&#34; for qw&#40;path_sep intsize&#41;&#39;
  path_sep=[:]
  intsize=[4&#39;
  issymlin]

So, this doesn&#39;t use any modules but Config. The trick is to get more
than one value from %Config. The first value always seems to be ok.

But I still didn&#39;t know the cause. So I asked the friendly guys on #p5p
and Nicholas Clark just mentioned &#34;UTF8&#34; and immediately it was clear.

  [mhx@redhat mhx]$ set | grep -i utf
  LANG=en_US.UTF-8
  SUPPORTED=en_US.UTF-8:en_US:en
  [mhx@redhat mhx]$ LANG=C perl -MConfig -le&#39;print &#34;$_=[$Config{$_}]&#34; for qw&#40;path_sep intsize&#41;&#39;
  path_sep=[:]
  intsize=[4]

So this is one of the many UTF8 bugs in your version of perl that have
been fixed in more recent versions.

You can try to

  export LANG=C
  make test

and you should see all tests pass.

I hope you&#39;ll still consider using Convert::Binary::C. Let me know if
you like it!

I&#39;m going to rm -rf /tmp/redhat now... ;-&#41;

Best wishes,
Marcus
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-130762" href="/Public/Bug/Display.html?id=12668#txn-130762">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;04&nbsp;16:35:42&nbsp;2005</span>
    <span class="description">MHX [...] cpan.org -  Status changed from &#39;new&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-130763" href="/Public/Bug/Display.html?id=12668#txn-130763">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;04&nbsp;16:49:18&nbsp;2005</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-130764" href="/Public/Bug/Display.html?id=12668#txn-130764">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;04&nbsp;16:49:18&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/130764/34528/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/34528">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 741b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Marcus,

You&#39;re awesome. I set LANG to en_US to match the value under my regular
user account, and lo, and behold, all tests pass!

By the way, I was actually using a old RH 9.0 dist &#40;it _is_ wierd that
the output said 8.0&#41;. I had wondered if that was the problem; so, this
morning, I did a full yum update to the latest RH9 Fedora Legacy
packages, but got the same problem. Since I&#39;m likely not the only one
that needs/haves to run RH9 for the time being, it would probably be a
good bet to mention the UTF-8 problem in the Config.pm perldoc &#40;and
maybe in your&#39;s also, to avoid future invalid bug reports ;&#41; &#41;. Do you
think I should I enter a documentation request for Config.pm &#40;not
entirely sure how best to do that&#41;? 

Thanks again!
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-130765" href="/Public/Bug/Display.html?id=12668#txn-130765">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;May&nbsp;04&nbsp;17:15:59&nbsp;2005</span>
    <span class="description">MHX [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.626014</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
