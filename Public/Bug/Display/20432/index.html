<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #20432 for Authen-Captcha: Broken locking lets images files build up</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #20432 for Authen-Captcha: Broken locking lets images files build up</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Authen-Captcha">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Authen-Captcha">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Authen-Captcha">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Authen-Captcha">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Authen-Captcha">Authen-Captcha CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">20432</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Authen-Captcha">Authen-Captcha</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
rossip [...] libero.it

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-3176-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.023    </td>
  </tr>
  <tr id="CF-3177-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.023_001    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Captcha.pm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/222576/91502/Captcha.pm">
Wed Jul 12 13:18:09 2006 (22.6k) by rossip [...] libero.it
</a>
</font></li>
</ul>


Captcha.pm.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/222576/91499/Captcha.pm.diff">
Wed Jul 12 13:18:09 2006 (2.3k) by rossip [...] libero.it
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=20432">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-222576" href="/Public/Bug/Display.html?id=20432#txn-222576">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;12&nbsp;13:18:08&nbsp;2006</span>
    <span class="description">rossip [...] libero.it -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Broken locking lets images files build up</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/222576/91496/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/91496">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Original mail to authors:

===================================================
We recently started using Authen::Captcha &#40;1.23&#41;. I noticed that within
a few days of starting to use it, tens of thousands of image files had
built up, which were not being expired, and were nowhere to be found in
the database of codes. This was on busy dual-processor boxes, but I
managed to reproduce it on my own workstation easily:

ab -c3 -n1000 <span class="clickylink"><a target="new" rel="nofollow" href="http://some/url/which/generates/captchas">http://some/url/which/generates/captchas</a></span>

By the time 500 or so requests had passed, I had fairly consistently
&#34;lost&#34; a few images from the database. The debug output showed that
older versions of the data were overwriting more recent versions.

The problem is that one has to obtain a lock, read in the data file, do
everything that you&#39;re going to do with it, and then write it back.
Instead, Authen::Captcha was reading in the data file, then closing it
and releasing the lock, then modifying the data &#40;in which time another
process could be locking and reading in the file, obtaining a stale copy
of the data&#41;, then re-locking and re-opening it, and so on.

Attached is a solution &#40;tested quite extensively and free of the
problem&#41;, as well as the original file, and a diff. You may want to go
about the locking differently - I chose to lock on an external file
rather than the database itself, both being paranoid about the caching
issues one can read about in Locking: The Trouble with fd &#40;man DB_File&#41;
&#40;which may not apply here - not sure&#41;, and also believing that it&#39;s
cleaner/simpler.

Note also that in the attached, Captcha.pm the locks _have_ to be
exclusive, not shared, or the same bug would be reintroduced.

Anyway, I&#39;m hoping that you still maintain this module - I see that
there have been no new releases for a long time. Please let me know.
===================================================
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Captcha.pm.diff</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/222576/91499/Captcha.pm.diff">Download Captcha.pm.diff</a><br />
<span class="downloadcontenttype">text/x-diff 2.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- Captcha.pm.orig	2006-07-05 17:29:37.000000000 +0200
+++ Captcha.pm	2006-07-06 10:52:26.000000000 +0200
@@ -218,8 +218,8 @@
 	
 	# pull in current database
 	warn &#34;Open File: $database_file\n&#34; if&#40;$self-&gt;debug&#40;&#41; &gt;= 2&#41;;
+	$self-&gt;_get_exclusive_lock&#40;&#41;;
 	open &#40;DATA, &#34;&lt;$database_file&#34;&#41;  or die &#34;Can&#39;t open File: $database_file\n&#34;;
-		flock DATA, 1;  # read lock
 		my @data=&lt;DATA&gt;;
 	close&#40;DATA&#41;;
 	warn &#34;Close File: $database_file\n&#34; if&#40;$self-&gt;debug&#40;&#41; &gt;= 2&#41;;
@@ -285,13 +285,44 @@
 
 	# update database
 	open&#40;DATA,&#34;&gt;$database_file&#34;&#41;  or die &#34;Can&#39;t open File: $database_file\n&#34;;
-		flock DATA, 2; # write lock 
 		print DATA $new_data;
 	close&#40;DATA&#41;;
+	$self-&gt;_release_lock&#40;&#41;;
 	
 	return $return_value;
 }
 
+
+sub _open_lock_file {
+	my $self = shift;
+	my $file_name = shift;
+	open&#40;LOCK, &#34;&gt;&gt;$file_name&#34;&#41; or die &#34;Error opening lockfile $file_name: $!\n&#34;;
+}
+
+sub _get_shared_lock {
+	my $self = shift;
+	my $lock_file_name = File::Spec-&gt;catfile&#40;$self-&gt;data_folder&#40;&#41;,&#34;codes.lock&#34;&#41;;
+	$self-&gt;_open_lock_file&#40;$lock_file_name&#41;;
+
+	# shared lock
+	flock&#40;LOCK, 1&#41; or die &#34;Error locking lockfile in shared mode: $!\n&#34;;
+}
+
+sub _get_exclusive_lock {
+	my $self = shift;
+	my $lock_file_name = File::Spec-&gt;catfile&#40;$self-&gt;data_folder&#40;&#41;,&#34;codes.lock&#34;&#41;;
+	$self-&gt;_open_lock_file&#40;$lock_file_name&#41;;
+
+	# exclusive lock
+	flock&#40;LOCK, 2&#41; or die &#34;Error locking lockfile exclusively: $!\n&#34;;
+}
+
+sub _release_lock {
+	my $self = shift;
+	flock&#40;LOCK, 8&#41; or die &#34;Error unlocking lockfile: $!\n&#34;;
+	close&#40;LOCK&#41;;
+}
+
 sub _touch_file
 {
 	ref&#40;my $self = shift&#41; or croak &#34;instance variable needed&#34;;
@@ -342,8 +373,9 @@
 	$self-&gt;_touch_file&#40;$database_file&#41;;
 
 	# clean expired codes and images
+	$self-&gt;_get_exclusive_lock&#40;&#41;;
+
 	open &#40;DATA, &#34;&lt;$database_file&#34;&#41;  or die &#34;Can&#39;t open File: $database_file\n&#34;;
-		flock DATA, 1;  # read lock
 		my @data=&lt;DATA&gt;;
 	close&#40;DATA&#41;;
 	
@@ -365,12 +397,12 @@
 	# save the code to database
 	warn &#34;open File: $database_file\n&#34; if&#40;$self-&gt;debug&#40;&#41; &gt;= 2&#41;;
 	open&#40;DATA,&#34;&gt;$database_file&#34;&#41;  or die &#34;Can&#39;t open File: $database_file\n&#34;;
-		flock DATA, 2; # write lock
 		warn &#34;--&gt;&gt;&#34; . $new_data . &#34;\n&#34; if&#40;$self-&gt;debug&#40;&#41; &gt;= 2&#41;;
 		warn &#34;--&gt;&gt;&#34; . $current_time . &#34;::&#34; . $md5.&#34;\n&#34; if&#40;$self-&gt;debug&#40;&#41; &gt;= 2&#41;;
 		print DATA $new_data;
 		print DATA $current_time.&#34;::&#34;.$md5.&#34;\n&#34;;
 	close&#40;DATA&#41;;
+	$self-&gt;_release_lock&#40;&#41;;
 	warn &#34;Close File: $database_file\n&#34; if&#40;$self-&gt;debug&#40;&#41; &gt;= 2&#41;;
 
 }
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Captcha.pm</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/222576/91502/Captcha.pm">Download Captcha.pm</a><br />
<span class="downloadcontenttype">text/x-perl 22.6k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1337381" href="/Public/Bug/Display.html?id=20432#txn-1337381">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;12&nbsp;11:27:06&nbsp;2014</span>
    <span class="description">lubo.rintel [...] gooddata.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1337381/709636/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/709636">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 162b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi!

Thanks for your contribution. We&#39;ve just uploaded 1.024 that includes your fix 
to CPAN and it will hit mirrors in a couple of hours.

Have a nice day!
Lubo
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1337382" href="/Public/Bug/Display.html?id=20432#txn-1337382">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;12&nbsp;11:27:06&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1337385" href="/Public/Bug/Display.html?id=20432#txn-1337385">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;12&nbsp;11:27:09&nbsp;2014</span>
    <span class="description">lubo.rintel [...] gooddata.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1337387" href="/Public/Bug/Display.html?id=20432#txn-1337387">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;12&nbsp;11:27:09&nbsp;2014</span>
    <span class="description">lubo.rintel [...] gooddata.com -  Fixed in 1.023_001 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.430859</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
