<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #103835 for Mail-Mbox-MessageParser: t/filehandle_compressed.t failing with perl 5.8.x</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #103835 for Mail-Mbox-MessageParser: t/filehandle_compressed.t failing with perl 5.8.x</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Mail-Mbox-MessageParser">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Mail-Mbox-MessageParser">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Mail-Mbox-MessageParser">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Mail-Mbox-MessageParser">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Mail-Mbox-MessageParser">Mail-Mbox-MessageParser CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">103835</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Mail-Mbox-MessageParser">Mail-Mbox-MessageParser</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">david [...] coppit.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
paul [...] city-fan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19994-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.5104    </td>
  </tr>
  <tr id="CF-19995-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=103835">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1488185" href="/Public/Bug/Display.html?id=103835#txn-1488185">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;20&nbsp;10:35:33&nbsp;2015</span>
    <span class="description">paul [...] city-fan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> t/filehandle_compressed.t failing with perl 5.8.x</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1488185/792543/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/792543">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 6.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m seeing this with 5.8.5 - 5.8.8:

$ make test TEST_FILES=t/filehandle_compressed.t
PERL_DL_NONLAZY=1 /usr/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34; &#34;test_harness&#40;0, &#39;inc&#39;, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/filehandle_compressed.t
t/filehandle_compressed....No such file or directory: /tmp/xXWt7eLYxy at t/Test/Utils.pm line 42
readline&#40;&#41; on closed filehandle F at /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.

#   Failed test &#39;Computing differences between t/mailboxes/mailarc-2.txt and /tmp/xXWt7eLYxy&#39;
#   at t/filehandle_compressed.t line 112.
t/filehandle_compressed....NOK 1unlink0: /tmp/Z5VWpqeioF is gone already at t/filehandle_compressed.t line 46
No such file or directory: /tmp/FdEmrbtrOt at t/Test/Utils.pm line 42
readline&#40;&#41; on closed filehandle F at /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.

#   Failed test &#39;Computing differences between t/mailboxes/mailarc-2.txt and /tmp/FdEmrbtrOt&#39;
#   at t/filehandle_compressed.t line 112.
t/filehandle_compressed....NOK 2unlink0: /tmp/ObGvTKiCWz is gone already at t/filehandle_compressed.t line 52
No such file or directory: /tmp/e5JM2QOMIq at t/Test/Utils.pm line 42
readline&#40;&#41; on closed filehandle F at /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.

#   Failed test &#39;Computing differences between t/mailboxes/mailarc-2.txt and /tmp/e5JM2QOMIq&#39;
#   at t/filehandle_compressed.t line 112.
t/filehandle_compressed....NOK 3unlink0: /tmp/BbeZRffh24 is gone already at t/filehandle_compressed.t line 53
t/filehandle_compressed....ok 4/20No such file or directory: /tmp/4z23KgqnZr at t/Test/Utils.pm line 42
readline&#40;&#41; on closed filehandle F at /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.

#   Failed test &#39;Computing differences between t/mailboxes/mailarc-2.txt and /tmp/4z23KgqnZr&#39;
t/filehandle_compressed....NOK 5#   at t/filehandle_compressed.t line 112.   
unlink0: /tmp/gVhm3Fr0FE is gone already at t/filehandle_compressed.t line 46
No such file or directory: /tmp/4J1zwEvuKq at t/Test/Utils.pm line 42
readline&#40;&#41; on closed filehandle F at /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.

#   Failed test &#39;Computing differences between t/mailboxes/mailarc-2.txt and /tmp/4J1zwEvuKq&#39;
#   at t/filehandle_compressed.t line 112.
t/filehandle_compressed....NOK 6unlink0: /tmp/Bb9T2q9y9W is gone already at t/filehandle_compressed.t line 52
No such file or directory: /tmp/jYJWa4sq98 at t/Test/Utils.pm line 42
readline&#40;&#41; on closed filehandle F at /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.

#   Failed test &#39;Computing differences between t/mailboxes/mailarc-2.txt and /tmp/jYJWa4sq98&#39;
#   at t/filehandle_compressed.t line 112.
t/filehandle_compressed....NOK 7unlink0: /tmp/apdKPqOfWD is gone already at t/filehandle_compressed.t line 53
No such file or directory: /tmp/npa0e63ynM at t/Test/Utils.pm line 42
readline&#40;&#41; on closed filehandle F at /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.

#   Failed test &#39;Computing differences between t/mailboxes/mailarc-2.txt and /tmp/npa0e63ynM&#39;
#   at t/filehandle_compressed.t line 112.
t/filehandle_compressed....NOK 13unlink0: /tmp/6HcRBDF9mw is gone already at t/filehandle_compressed.t line 46
No such file or directory: /tmp/qBLjO5S6A5 at t/Test/Utils.pm line 42
readline&#40;&#41; on closed filehandle F at /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.

#   Failed test &#39;Computing differences between t/mailboxes/mailarc-2.txt and /tmp/qBLjO5S6A5&#39;
#   at t/filehandle_compressed.t line 112.
t/filehandle_compressed....NOK 14unlink0: /tmp/EIDolN3eaI is gone already at t/filehandle_compressed.t line 52
No such file or directory: /tmp/iJTNWUq6f2 at t/Test/Utils.pm line 42
readline&#40;&#41; on closed filehandle F at /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.

#   Failed test &#39;Computing differences between t/mailboxes/mailarc-2.txt and /tmp/iJTNWUq6f2&#39;
#   at t/filehandle_compressed.t line 112.
t/filehandle_compressed....NOK 15unlink0: /tmp/r9HDxp5xBf is gone already at t/filehandle_compressed.t line 53
No such file or directory: /tmp/5jv4EZemaT at t/Test/Utils.pm line 42
readline&#40;&#41; on closed filehandle F at /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.

#   Failed test &#39;Computing differences between t/mailboxes/mailbox with space.txt and /tmp/5jv4EZemaT&#39;
#   at t/filehandle_compressed.t line 112.
t/filehandle_compressed....NOK 17unlink0: /tmp/rnPETUJmAg is gone already at t/filehandle_compressed.t line 46
No such file or directory: /tmp/fh8RW7zlEN at t/Test/Utils.pm line 42
readline&#40;&#41; on closed filehandle F at /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.

#   Failed test &#39;Computing differences between t/mailboxes/mailbox with space.txt and /tmp/fh8RW7zlEN&#39;
#   at t/filehandle_compressed.t line 112.
t/filehandle_compressed....NOK 18unlink0: /tmp/Dzr1MticPu is gone already at t/filehandle_compressed.t line 52
No such file or directory: /tmp/JUaD8EUJoS at t/Test/Utils.pm line 42
readline&#40;&#41; on closed filehandle F at /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.

#   Failed test &#39;Computing differences between t/mailboxes/mailbox with space.txt and /tmp/JUaD8EUJoS&#39;
#   at t/filehandle_compressed.t line 112.
t/filehandle_compressed....NOK 19unlink0: /tmp/Lj89uBAVo1 is gone already at t/filehandle_compressed.t line 53
# Looks like you failed 12 tests of 20.
t/filehandle_compressed....dubious                                           
        Test returned status 12 &#40;wstat 3072, 0xc00&#41;
DIED. FAILED tests 1-3, 5-7, 13-15, 17-19
        Failed 12/20 tests, 40.00% okay &#40;less 8 skipped tests: 0 okay, 0.00%&#41;
Failed Test               Stat Wstat Total Fail  Failed  List of Failed
-------------------------------------------------------------------------------
t/filehandle_compressed.t   12  3072    20   12  60.00%  1-3 5-7 13-15 17-19
8 subtests skipped.
Failed 1/1 test scripts, 0.00% okay. 12/20 subtests failed, 40.00% okay.
make: *** [test_dynamic] Error 12

What seems to be happening is that the output file &#40;and cache file&#41; is created successfully but is removed when the Mail::Mbox::MessageParser object is constructed. Seems to work OK with 5.10.x and later perls, and all of the other tests work OK everywhere. I&#39;m a bit stuck as to what&#39;s going on there.

Also, the version of t/filehandle_compressed.t from version 1.5102 still works OK with 1.5104 on all perls I&#39;ve tried.


On an unrelated matter, PAUSE seems to be indexing your private Module::Install packages, which is probably not what you wanted:
<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/dist/Mail-Mbox-MessageParser/">http://search.cpan.org/dist/Mail-Mbox-MessageParser/</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/release/Mail-Mbox-MessageParser">https://metacpan.org/release/Mail-Mbox-MessageParser</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1490447" href="/Public/Bug/Display.html?id=103835#txn-1490447">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;26&nbsp;18:53:38&nbsp;2015</span>
    <span class="description">david [...] coppit.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1490447/793736/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/793736">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 8.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Paul,

I&#39;m a bit stumped by this one.

In 1.5103 I switching to using proper temp files in order to fix CPAN test failures resulting from people who run the tests in parallel. The temp files get cleaned up automatically, which is a good thing. The output seems to indicate that the temp files were already gone by the time File::Temp tried to delete them:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; /tmp/Z5VWpqeioF is gone already at t/filehandle_compressed.t
</div>
Even before that, my test module failed to find the file:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; No such file or directory: /tmp/xXWt7eLYxy at t/Test/Utils.pm line 42
</div>
What&#39;s odd is that this code is used in other tests too, which didn&#39;t fail for you. In particular, filehandle_uncompressed is virtually identical.

It&#39;s like something deleted the file during the test. Is it possible that this test ran around midnight, when your system would have cleaned /tmp? IIRC most Unixes don&#39;t worry about leaving recent temp files in /tmp.

Another thought... The old version of Test::Util deleted the file. Is it possible that somehow new tests got mixed with an old version of t/Test/Util.pm? You could just grep for &#34;unlink&#34; in t/Test/Util.pm

I can&#39;t repro this with perlbrew and 5.8.8. Does it repro consistently for you? If so, can you send me the output of the following?

$ make test TEST_FILES=t/filehandle_compressed.t TEST_VERBOSE=1

Maybe that will give some clues.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; PAUSE seems to be indexing your private Module::Install packages
</div>
Sigh. Two steps forward and one step back. I&#39;ve updated my modules to exclude that dir from indexing. Thanks.

On Mon Apr 20 10:35:33 2015, paul@city-fan.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m seeing this with 5.8.5 - 5.8.8:
&gt; 
&gt; $ make test TEST_FILES=t/filehandle_compressed.t
&gt; PERL_DL_NONLAZY=1 /usr/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34;
&gt; &#34;test_harness&#40;0, &#39;inc&#39;, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34;
&gt; t/filehandle_compressed.t
&gt; t/filehandle_compressed....No such file or directory: /tmp/xXWt7eLYxy
&gt; at t/Test/Utils.pm line 42
&gt; readline&#40;&#41; on closed filehandle F at
&gt; /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.
&gt; 
&gt; #   Failed test &#39;Computing differences between t/mailboxes/mailarc-
&gt; 2.txt and /tmp/xXWt7eLYxy&#39;
&gt; #   at t/filehandle_compressed.t line 112.
&gt; t/filehandle_compressed....NOK 1unlink0: /tmp/Z5VWpqeioF is gone
&gt; already at t/filehandle_compressed.t line 46
&gt; No such file or directory: /tmp/FdEmrbtrOt at t/Test/Utils.pm line 42
&gt; readline&#40;&#41; on closed filehandle F at
&gt; /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.
&gt; 
&gt; #   Failed test &#39;Computing differences between t/mailboxes/mailarc-
&gt; 2.txt and /tmp/FdEmrbtrOt&#39;
&gt; #   at t/filehandle_compressed.t line 112.
&gt; t/filehandle_compressed....NOK 2unlink0: /tmp/ObGvTKiCWz is gone
&gt; already at t/filehandle_compressed.t line 52
&gt; No such file or directory: /tmp/e5JM2QOMIq at t/Test/Utils.pm line 42
&gt; readline&#40;&#41; on closed filehandle F at
&gt; /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.
&gt; 
&gt; #   Failed test &#39;Computing differences between t/mailboxes/mailarc-
&gt; 2.txt and /tmp/e5JM2QOMIq&#39;
&gt; #   at t/filehandle_compressed.t line 112.
&gt; t/filehandle_compressed....NOK 3unlink0: /tmp/BbeZRffh24 is gone
&gt; already at t/filehandle_compressed.t line 53
&gt; t/filehandle_compressed....ok 4/20No such file or directory:
&gt; /tmp/4z23KgqnZr at t/Test/Utils.pm line 42
&gt; readline&#40;&#41; on closed filehandle F at
&gt; /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.
&gt; 
&gt; #   Failed test &#39;Computing differences between t/mailboxes/mailarc-
&gt; 2.txt and /tmp/4z23KgqnZr&#39;
&gt;    t/filehandle_compressed....NOK 5#   at t/filehandle_compressed.t
&gt; line 112.
&gt; unlink0: /tmp/gVhm3Fr0FE is gone already at t/filehandle_compressed.t
&gt; line 46
&gt; No such file or directory: /tmp/4J1zwEvuKq at t/Test/Utils.pm line 42
&gt; readline&#40;&#41; on closed filehandle F at
&gt; /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.
&gt; 
&gt; #   Failed test &#39;Computing differences between t/mailboxes/mailarc-
&gt; 2.txt and /tmp/4J1zwEvuKq&#39;
&gt; #   at t/filehandle_compressed.t line 112.
&gt; t/filehandle_compressed....NOK 6unlink0: /tmp/Bb9T2q9y9W is gone
&gt; already at t/filehandle_compressed.t line 52
&gt; No such file or directory: /tmp/jYJWa4sq98 at t/Test/Utils.pm line 42
&gt; readline&#40;&#41; on closed filehandle F at
&gt; /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.
&gt; 
&gt; #   Failed test &#39;Computing differences between t/mailboxes/mailarc-
&gt; 2.txt and /tmp/jYJWa4sq98&#39;
&gt; #   at t/filehandle_compressed.t line 112.
&gt; t/filehandle_compressed....NOK 7unlink0: /tmp/apdKPqOfWD is gone
&gt; already at t/filehandle_compressed.t line 53
&gt; No such file or directory: /tmp/npa0e63ynM at t/Test/Utils.pm line 42
&gt; readline&#40;&#41; on closed filehandle F at
&gt; /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.
&gt; 
&gt; #   Failed test &#39;Computing differences between t/mailboxes/mailarc-
&gt; 2.txt and /tmp/npa0e63ynM&#39;
&gt; #   at t/filehandle_compressed.t line 112.
&gt; t/filehandle_compressed....NOK 13unlink0: /tmp/6HcRBDF9mw is gone
&gt; already at t/filehandle_compressed.t line 46
&gt; No such file or directory: /tmp/qBLjO5S6A5 at t/Test/Utils.pm line 42
&gt; readline&#40;&#41; on closed filehandle F at
&gt; /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.
&gt; 
&gt; #   Failed test &#39;Computing differences between t/mailboxes/mailarc-
&gt; 2.txt and /tmp/qBLjO5S6A5&#39;
&gt; #   at t/filehandle_compressed.t line 112.
&gt; t/filehandle_compressed....NOK 14unlink0: /tmp/EIDolN3eaI is gone
&gt; already at t/filehandle_compressed.t line 52
&gt; No such file or directory: /tmp/iJTNWUq6f2 at t/Test/Utils.pm line 42
&gt; readline&#40;&#41; on closed filehandle F at
&gt; /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.
&gt; 
&gt; #   Failed test &#39;Computing differences between t/mailboxes/mailarc-
&gt; 2.txt and /tmp/iJTNWUq6f2&#39;
&gt; #   at t/filehandle_compressed.t line 112.
&gt; t/filehandle_compressed....NOK 15unlink0: /tmp/r9HDxp5xBf is gone
&gt; already at t/filehandle_compressed.t line 53
&gt; No such file or directory: /tmp/5jv4EZemaT at t/Test/Utils.pm line 42
&gt; readline&#40;&#41; on closed filehandle F at
&gt; /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.
&gt; 
&gt; #   Failed test &#39;Computing differences between t/mailboxes/mailbox
&gt; with space.txt and /tmp/5jv4EZemaT&#39;
&gt; #   at t/filehandle_compressed.t line 112.
&gt; t/filehandle_compressed....NOK 17unlink0: /tmp/rnPETUJmAg is gone
&gt; already at t/filehandle_compressed.t line 46
&gt; No such file or directory: /tmp/fh8RW7zlEN at t/Test/Utils.pm line 42
&gt; readline&#40;&#41; on closed filehandle F at
&gt; /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.
&gt; 
&gt; #   Failed test &#39;Computing differences between t/mailboxes/mailbox
&gt; with space.txt and /tmp/fh8RW7zlEN&#39;
&gt; #   at t/filehandle_compressed.t line 112.
&gt; t/filehandle_compressed....NOK 18unlink0: /tmp/Dzr1MticPu is gone
&gt; already at t/filehandle_compressed.t line 52
&gt; No such file or directory: /tmp/JUaD8EUJoS at t/Test/Utils.pm line 42
&gt; readline&#40;&#41; on closed filehandle F at
&gt; /usr/lib/perl5/vendor_perl/5.8.8/Text/Diff.pm line 64.
&gt; 
&gt; #   Failed test &#39;Computing differences between t/mailboxes/mailbox
&gt; with space.txt and /tmp/JUaD8EUJoS&#39;
&gt; #   at t/filehandle_compressed.t line 112.
&gt; t/filehandle_compressed....NOK 19unlink0: /tmp/Lj89uBAVo1 is gone
&gt; already at t/filehandle_compressed.t line 53
&gt; # Looks like you failed 12 tests of 20.
&gt;                                            t/filehandle_compressed....dubious
&gt;         Test returned status 12 &#40;wstat 3072, 0xc00&#41;
&gt; DIED. FAILED tests 1-3, 5-7, 13-15, 17-19
&gt;         Failed 12/20 tests, 40.00% okay &#40;less 8 skipped tests: 0 okay,
&gt; 0.00%&#41;
&gt; Failed Test               Stat Wstat Total Fail  Failed  List of
&gt; Failed
&gt; -------------------------------------------------------------------------------
&gt; t/filehandle_compressed.t   12  3072    20   12  60.00%  1-3 5-7 13-15
&gt; 17-19
&gt; 8 subtests skipped.
&gt; Failed 1/1 test scripts, 0.00% okay. 12/20 subtests failed, 40.00%
&gt; okay.
&gt; make: *** [test_dynamic] Error 12
&gt; 
&gt; What seems to be happening is that the output file &#40;and cache file&#41; is
&gt; created successfully but is removed when the Mail::Mbox::MessageParser
&gt; object is constructed. Seems to work OK with 5.10.x and later perls,
&gt; and all of the other tests work OK everywhere. I&#39;m a bit stuck as to
&gt; what&#39;s going on there.
&gt; 
&gt; Also, the version of t/filehandle_compressed.t from version 1.5102
&gt; still works OK with 1.5104 on all perls I&#39;ve tried.
&gt; 
&gt; 
&gt; On an unrelated matter, PAUSE seems to be indexing your private
&gt; Module::Install packages, which is probably not what you wanted:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/dist/Mail-Mbox-MessageParser/">http://search.cpan.org/dist/Mail-Mbox-MessageParser/</a></span>
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/release/Mail-Mbox-MessageParser">https://metacpan.org/release/Mail-Mbox-MessageParser</a></span>
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1490448" href="/Public/Bug/Display.html?id=103835#txn-1490448">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;26&nbsp;18:53:38&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1490584" href="/Public/Bug/Display.html?id=103835#txn-1490584">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;27&nbsp;08:43:03&nbsp;2015</span>
    <span class="description">paul [...] city-fan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> paul [...] city-fan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1490584/793796/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/793796">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 55.3k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1490586" href="/Public/Bug/Display.html?id=103835#txn-1490586">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;27&nbsp;08:57:51&nbsp;2015</span>
    <span class="description">paul [...] city-fan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> paul [...] city-fan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1490586/793798/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/793798">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Another data point: I tried changing the test to use the non-object version of the File::Temp API and that worked OK:

$ diff -up t/filehandle_compressed_broken.t t/filehandle_compressed.t 
--- t/filehandle_compressed_broken.t    2015-04-20 04:46:47.000000000 +0100
+++ t/filehandle_compressed.t   2015-04-27 13:55:10.000000000 +0100
@@ -5,7 +5,7 @@
 
 use strict;
 
-use File::Temp;
+use File::Temp qw&#40;tempfile&#41;;
 use Test::More;
 use lib &#39;t&#39;;
 use Mail::Mbox::MessageParser;
@@ -72,15 +72,15 @@ sub TestImplementation
 
   my &#40;$folder_name&#41; = $filename =~ /\/&#40;[^\/\\]*&#41;\.txt.*$/;
 
-  my $output = File::Temp-&gt;new&#40;&#41;;
+  my &#40;$output_fh, $output_fn&#41; = tempfile&#40;&#41;;
 
-  binmode $output;
+  binmode $output_fh;
 
   my $filehandle = new FileHandle&#40;$filename&#41;;
 
-  my $cache_file = File::Temp-&gt;new&#40;&#41;;
+  my &#40;$cache_fh, $cache_fn&#41; = tempfile&#40;&#41;;
 
-  Mail::Mbox::MessageParser::SETUP_CACHE&#40;{&#39;file_name&#39; =&gt; $cache_file-&gt;filename}&#41;
+  Mail::Mbox::MessageParser::SETUP_CACHE&#40;{&#39;file_name&#39; =&gt; $cache_fn}&#41;
     if $enable_cache;
 
   my $folder_reader =
@@ -95,21 +95,21 @@ sub TestImplementation
   die $folder_reader unless ref $folder_reader;
 
   my $prologue = $folder_reader-&gt;prologue;
-  print $output $prologue;
+  print $output_fh $prologue;
 
   # This is the main loop. It&#39;s executed once for each email
   while&#40;!$folder_reader-&gt;end_of_file&#40;&#41;&#41;
   {
     my $email_text = $folder_reader-&gt;read_next_email&#40;&#41;;
 
-    print $output $$email_text;
+    print $output_fh $$email_text;
   }
 
-  $output-&gt;close&#40;&#41;;
+  $output_fh-&gt;close&#40;&#41;;
 
   $filename =~ s#\.&#40;tz|bz2|lz|xz|gz&#41;$##;
 
-  CheckDiffs&#40;[$filename,$output-&gt;filename]&#41;;
+  CheckDiffs&#40;[$filename,$output_fn]&#41;;
 }
 
 # ---------------------------------------------------------------------------
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1492777" href="/Public/Bug/Display.html?id=103835#txn-1492777">#</a>      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;02&nbsp;13:55:13&nbsp;2015</span>
    <span class="description">david [...] coppit.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1492777/794999/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/794999">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 576b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There&#39;s an &#34;unlink&#34; in CheckDiffs just after it prints &#34;Output looks good&#34;, which is after the point at which I&#39;m getting teh missing files.
</div>
That would explain it. The unlink is deleting the files, then the module tries to auto-delete them again when the tempfile object goes out of scope.

But I don&#39;t understand why your code is out of date? I just downloaded 1.5404 from CPAN manually, and looked at t/Test/Utils.pm and the unlink is not in there.

Can you double-check your test setup to make sure you&#39;re testing the latest version, and the right code for that version?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1493116" href="/Public/Bug/Display.html?id=103835#txn-1493116">#</a>      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;03&nbsp;05:08:23&nbsp;2015</span>
    <span class="description">paul [...] city-fan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> paul [...] city-fan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1493116/795199/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/795199">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 893b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat May 02 13:55:13 2015, DCOPPIT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; There&#39;s an &#34;unlink&#34; in CheckDiffs just after it prints &#34;Output looks
&gt; &gt; good&#34;, which is after the point at which I&#39;m getting teh missing
&gt; &gt; files.
</div>&gt; 
&gt; That would explain it. The unlink is deleting the files, then the
&gt; module tries to auto-delete them again when the tempfile object goes
&gt; out of scope.
&gt; 
&gt; But I don&#39;t understand why your code is out of date? I just downloaded
&gt; 1.5404 from CPAN manually, and looked at t/Test/Utils.pm and the
&gt; unlink is not in there.
&gt; 
&gt; Can you double-check your test setup to make sure you&#39;re testing the
&gt; latest version, and the right code for that version?
</div>
My apologies, I think that unlink must have been in the previous version of M:M:MP, which I was looking at whilst trying to figure out what was going on. I can still reproduce the problem, and there&#39;s no sign of &#34;unlink&#34; in Test/Utils.pm.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1494888" href="/Public/Bug/Display.html?id=103835#txn-1494888">#</a>      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;09&nbsp;11:04:31&nbsp;2015</span>
    <span class="description">david [...] coppit.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #103835] t/filehandle_compressed.t failing with perl 5.8.x</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 9 May 2015 11:04:15 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Mail-Mbox-MessageParser [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Coppit &lt;david [...] coppit.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1494888/796250/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/796250">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m waiting on cpan-testers to come back up to see if anyone else has seen
this.

Another idea... Can you rename t/Test/Utils.pm to t/Test/Foo.pm, and try
again? Tests should fail miserably because they can&#39;t find Test::Utils. But
if the issue still repros, then that indicates the tests are picking up an
older Test::Utils from somewhere else. Inserting this into t/endline.t,
after the &#34;use&#34; statements will reveal where:

die &#34;GOT LIBRARY FROM $INC{&#39;Test/Utils.pm&#39;}&#34;;

Run &#34;make test TEST_FILES=t/endline.t&#34; and it will print the location out
near the top.

On Sun, May 3, 2015 at 5:08 AM, paul@city-fan.org via RT &lt;
bug-Mail-Mbox-MessageParser@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Mail-Mbox-MessageParser
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=103835">https://rt.cpan.org/Ticket/Display.html?id=103835</a></span> &gt;
&gt;
&gt; On Sat May 02 13:55:13 2015, DCOPPIT wrote:
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; There&#39;s an &#34;unlink&#34; in CheckDiffs just after it prints &#34;Output looks
&gt; &gt; &gt; good&#34;, which is after the point at which I&#39;m getting teh missing
&gt; &gt; &gt; files.
</div>&gt; &gt;
&gt; &gt; That would explain it. The unlink is deleting the files, then the
&gt; &gt; module tries to auto-delete them again when the tempfile object goes
&gt; &gt; out of scope.
&gt; &gt;
&gt; &gt; But I don&#39;t understand why your code is out of date? I just downloaded
&gt; &gt; 1.5404 from CPAN manually, and looked at t/Test/Utils.pm and the
&gt; &gt; unlink is not in there.
&gt; &gt;
&gt; &gt; Can you double-check your test setup to make sure you&#39;re testing the
&gt; &gt; latest version, and the right code for that version?
</div>&gt;
&gt; My apologies, I think that unlink must have been in the previous version
&gt; of M:M:MP, which I was looking at whilst trying to figure out what was
&gt; going on. I can still reproduce the problem, and there&#39;s no sign of
&gt; &#34;unlink&#34; in Test/Utils.pm.
&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1494888/796251/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/796251">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.4k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1495125" href="/Public/Bug/Display.html?id=103835#txn-1495125">#</a>      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;11&nbsp;04:09:35&nbsp;2015</span>
    <span class="description">paul [...] city-fan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> paul [...] city-fan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1495125/796369/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/796369">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 540b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat May 09 11:04:31 2015, DCOPPIT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m waiting on cpan-testers to come back up to see if anyone else has seen
&gt; this.
&gt; 
&gt; Another idea... Can you rename t/Test/Utils.pm to t/Test/Foo.pm, and try
&gt; again? Tests should fail miserably because they can&#39;t find Test::Utils.
</div>
They all fail horribly. So there&#39;s no other Test/Utils.pm.
The files seem to be disappearing during the construction of the M:M:MP object rather than some part of the test itself. And it doesn&#39;t happen if I don&#39;t use the OO API of File::Temp. Very strange.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1793923" href="/Public/Bug/Display.html?id=103835#txn-1793923">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;01&nbsp;20:54:25&nbsp;2018</span>
    <span class="description">david [...] coppit.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #103835] t/filehandle_compressed.t failing with perl 5.8.x</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 1 Jul 2018 20:54:08 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Mail-Mbox-MessageParser [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Coppit &lt;david [...] coppit.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1793923/964810/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/964810">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m working through my old emails. Figured this one out.

- Avoid OO interface to File::Temp, which in some versions and on some operating
  systems, deletes the file when it is closed. Thanks to Paul Howarth
  &lt;paul@city-fan.org&gt; for the bug report.
  <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Public/Bug/Display.html?id=103835">https://rt.cpan.org/Public/Bug/Display.html?id=103835</a></span>

It will be fixed in 1.5106.

On Mon, May 11, 2015 at 4:09 AM, paul@city-fan.org via RT
&lt;bug-Mail-Mbox-MessageParser@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Mail-Mbox-MessageParser
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=103835">https://rt.cpan.org/Ticket/Display.html?id=103835</a></span> &gt;
&gt;
&gt; On Sat May 09 11:04:31 2015, DCOPPIT wrote:
<div class="message-stanza open">&gt;&gt; I&#39;m waiting on cpan-testers to come back up to see if anyone else has seen
&gt;&gt; this.
&gt;&gt;
&gt;&gt; Another idea... Can you rename t/Test/Utils.pm to t/Test/Foo.pm, and try
&gt;&gt; again? Tests should fail miserably because they can&#39;t find Test::Utils.
</div>&gt;
&gt; They all fail horribly. So there&#39;s no other Test/Utils.pm.
&gt; The files seem to be disappearing during the construction of the M:M:MP object rather than some part of the test itself. And it doesn&#39;t happen if I don&#39;t use the OO API of File::Temp. Very strange.
&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1793925" href="/Public/Bug/Display.html?id=103835#txn-1793925">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;01&nbsp;20:58:15&nbsp;2018</span>
    <span class="description">david [...] coppit.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1793931" href="/Public/Bug/Display.html?id=103835#txn-1793931">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;01&nbsp;21:46:37&nbsp;2018</span>
    <span class="description">david [...] coppit.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1793931/964816/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/964816">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 33b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Will be fixed in the next version
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1793933" href="/Public/Bug/Display.html?id=103835#txn-1793933">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;01&nbsp;21:46:38&nbsp;2018</span>
    <span class="description">david [...] coppit.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.62256</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
