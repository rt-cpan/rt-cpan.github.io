<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #28821 for DBD-ODBC: Cannot use dates in placeholders</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #28821 for DBD-ODBC: Cannot use dates in placeholders</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=DBD-ODBC">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=DBD-ODBC">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=DBD-ODBC">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=DBD-ODBC">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-ODBC">DBD-ODBC CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">28821</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">1 hour (60 min)

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=DBD-ODBC">DBD-ODBC</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dland [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-10188-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.13    </td>
  </tr>
  <tr id="CF-10189-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=28821">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-353141" href="/Public/Bug/Display.html?id=28821#txn-353141">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;13&nbsp;17:05:45&nbsp;2007</span>
    <span class="description">dland [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Cannot use dates in placeholders</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/353141/158972/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/158972">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">DBD::ODBC doesn&#39;t deal with dates in placeholders correctly. I have
searched the web and found a few inconclusive reports of such behaviour.
I have tried binding the datatype to the column but no joy.

I have tried to find 1.14 in ppm format, but no luck on AS&#39;s repo nor
uwinnipeg. There is a 1.14 available at trouchelle.com, but ppm doesn&#39;t
know what to do with it.

Just for reference the following program may be called with two dates on
the command line. Only the second date will be inserted into the table.
&#40;The db&#40;&#41; routine just something that returns a DBD::ODBC connection&#41;.

&#40;Note that the dates are formatted in the same way. In my case, this is
DD/MM/YYYY. The fact that the do&#40;&#41; works means that the underlying
database can parse the format correctly&#41;.

The error returned is:

DBD::ODBC::st execute failed: [Oracle][ODBC]Datetime field overflow.
&#40;SQL-22008&#41; [Oracle][ODBC]General error.
&#40;SQL-HY000&#41;&#40;DBD:st_execute/SQLExecute err=-1&#41; at date-insert.pl line 22.

The code:

use strict;
use warnings;

use DBI &#39;:sql_types&#39;;
use MyDV &#39;db&#39;;

my $db = db&#40;&#41;; # a valid DBI handle
END { $db-&gt;commit }

$db-&gt;do&#40;&lt;&lt;END_SQL&#41;;
create table dl &#40;
  d date
&#41;
END_SQL

my $put = $db-&gt;prepare&#40;&lt;&lt;END_SQL&#41; or die &#34;prepare put\n&#34;, $db-&gt;errstr;
insert into dl &#40;d&#41; values &#40;?&#41;
END_SQL

$put-&gt;bind_param&#40;1, undef, SQL_DATE&#41;;

my $r = $put-&gt;execute&#40;$ARGV[0]&#41;;

$db-&gt;do&#40;&#34;insert into dl &#40;d&#41; values &#40;&#39;$ARGV[1]&#39;&#41;&#34;&#41; or die $db-&gt;errstr;

__END__

Hopefully this is fixed in 1.14. If not, if you need any help in
tracking this down, just holler.

Regards,
David Landgren
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-353151" href="/Public/Bug/Display.html?id=28821#txn-353151">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;13&nbsp;18:01:39&nbsp;2007</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> martin.evans [...] easysoft.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/353151/158981/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/158981">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 350b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Would I be right in thinking you are using Oracle&#39;s ODBC driver on
Windows? What version have you got installed? I am currently looking
after DBD::ODBC and the code contains a number of comments about
Oracle&#39;s ODBC driver having problems with dates but I&#39;ll look in to it.
What have you got set in your environment? re NLS_LANG, NLS_DATE_FORMAT etc?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-353152" href="/Public/Bug/Display.html?id=28821#txn-353152">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;13&nbsp;18:01:41&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-353155" href="/Public/Bug/Display.html?id=28821#txn-353155">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;13&nbsp;18:04:34&nbsp;2007</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/353155/158984/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/158984">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 159b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Should have also said it would be quicker if you could supply the schema
for the table you are inserting into and an example run with a command
line parameter.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-353255" href="/Public/Bug/Display.html?id=28821#txn-353255">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;14&nbsp;06:14:39&nbsp;2007</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> martin.evans [...] easysoft.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/353255/159060/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/159060">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is the result of my investigation so far. I don&#39;t have Oracle on
Windows at the moment and I cannot successfully build DBD::ODBC 1.14 for
ActiveState so I&#39;ve experimented on Linux.

schema
======
create table fred &#40;a date&#41;;

perl code
=========

#!/usr/bin/perl -w
use strict;
use warnings;
use DBI;
use Data::Dumper;
my $h = DBI-&gt;connect&#40;&#39;dbi:ODBC:oracle&#39;, &#39;xxx&#39;, &#39;yyy&#39;&#41;;
eval {
        $h-&gt;do&#40;q/delete from fred/&#41;;
};
my $df = $h-&gt;selectall_arrayref&#40;q/select * from v$nls_parameters where
parameter = &#39;NLS_DATE_FORMAT&#39;/&#41;;
print Dumper&#40;$df&#41;;
my $s = $h-&gt;prepare&#40;q/insert into fred values&#40;?&#41;/&#41;;
$s-&gt;execute&#40;&#39;23-mar-1962&#39;&#41;;
my $r = $h-&gt;selectall_arrayref&#40;q/select * from fred/&#41;;
print Dumper&#40;$r&#41;;

When run using the Easysoft ODBC driver for Oracle the code runs fine
with the output:

$VAR1 = [
          [
            &#39;NLS_DATE_FORMAT&#39;,
            &#39;DD-MON-RR&#39;
          ]
        ];
$VAR1 = [
          [
            &#39;1962-03-23 00:00:00&#39;
          ]
        ];

When run with Oracle&#39;s ODBC driver &#40;v 10.2.0.1&#41; I get:

$VAR1 = [
          [
            &#39;NLS_DATE_FORMAT&#39;,
            &#39;DD-MON-RR&#39;
          ]
        ];
DBD::ODBC::st execute failed: [unixODBC][Oracle][ODBC]General error.
&#40;SQL-HY000&#41;
[unixODBC][Oracle][ODBC]Datetime field overflow. &#40;SQL-22008&#41;&#40;DBD:
st_execute/SQLExecute err=-1&#41; at ./oracle_date.pl line 15.
$VAR1 = [];

So I&#39;ve reproduced it but it looks like a problem with Oracle&#39;s ODBC Driver.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-356796" href="/Public/Bug/Display.html?id=28821#txn-356796">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;30&nbsp;07:24:33&nbsp;2007</span>
    <span class="description">dland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> dland [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/356796/160895/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/160895">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 436b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Aug 14 06:14:39 2007, MJEVANS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This is the result of my investigation so far. I don&#39;t have Oracle on
&gt; Windows at the moment and I cannot successfully build DBD::ODBC 1.14 for
&gt; ActiveState so I&#39;ve experimented on Linux.
</div>
Thanks very much for your efforts so far. I have been on holidays and
now am at YAPC Europe. I should be able to give you the information you
ask for when I get back to work next week.

Thanks,
David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-367712" href="/Public/Bug/Display.html?id=28821#txn-367712">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;04&nbsp;03:52:30&nbsp;2007</span>
    <span class="description">dland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> dland [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/367712/166794/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/166794">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 782b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Aug 14 06:14:39 2007, MJEVANS wrote:

[...]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; When run with Oracle&#39;s ODBC driver &#40;v 10.2.0.1&#41; I get:
&gt; 
&gt; $VAR1 = [
&gt;           [
&gt;             &#39;NLS_DATE_FORMAT&#39;,
&gt;             &#39;DD-MON-RR&#39;
&gt;           ]
&gt;         ];
&gt; DBD::ODBC::st execute failed: [unixODBC][Oracle][ODBC]General error.
&gt; &#40;SQL-HY000&#41;
&gt; [unixODBC][Oracle][ODBC]Datetime field overflow. &#40;SQL-22008&#41;&#40;DBD:
&gt; st_execute/SQLExecute err=-1&#41; at ./oracle_date.pl line 15.
&gt; $VAR1 = [];
&gt; 
&gt; So I&#39;ve reproduced it but it looks like a problem with Oracle&#39;s ODBC
</div>Driver.

Right. It&#39;s exactly this problem. I am Oracle&#39;s ODBC driver &#40;using the
10.02.00.02 version of &#34;Oracle in OraDb10g_home1&#34;&#41;. I have a couple of
other ODBC drivers for Oracle on the system, so I&#39;ll see if I have any
more luck with them.

Thanks,
David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-367714" href="/Public/Bug/Display.html?id=28821#txn-367714">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;04&nbsp;04:36:10&nbsp;2007</span>
    <span class="description">dland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/367714/166796/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/166796">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Aug 14 06:14:39 2007, MJEVANS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This is the result of my investigation so far. I don&#39;t have Oracle on
&gt; Windows at the moment and I cannot successfully build DBD::ODBC 1.14 for
&gt; ActiveState so I&#39;ve experimented on Linux.
</div>
This is very strange. I tried using the Microsoft ODBC driver for
Oracle, and had exactly the same problem:

DBD::ODBC::st execute failed: [Microsoft][ODBC driver for Oracle]Error
in parameter 1: Datetime field overflow &#40;SQL-22007&#41;&#40;DBD:
st_execute/SQLExecute err=-1&#41; at date.pl line 18.

This would occur even with dates like 02/06/2007, which may be construed
as valid dates both in MM/DD/YYYY and DD/MM/YYYY, even if they do not
mean the same thing.

I then tried nls_date_format=&#39;YYYY/MM/DD&#39; and to my utter surprise... IT
WORKS! better still, 2007/02/06 is indeed interpreted as the 6th of
February. I don&#39;t pretend to understand what is going on, but you may
wish to add a &#34;Notes on dates in Oracle&#34; section, and mention that if
people are running into this problem, setting the nls_date_format this
way may be a viable workaround.

This may also entail having to explicitly format date output in select
statements, e.g., select to_char&#40;my_date, &#39;DD/MM/YYYY&#39; ... but, it&#39;s a
small price to pay if you&#39;re doing several thousand inserts which would
otherwise trash the library cache.

Thanks,
David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-369122" href="/Public/Bug/Display.html?id=28821#txn-369122">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;08&nbsp;11:12:30&nbsp;2007</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> martin.evans [...] easysoft.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/369122/167511/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/167511">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 482b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">One last question.

Can you tell me the output of the following SQL on the Oracle you were
using before you make any changes to NLS settings:

select * from v$nls_parameters where parameter = &#39;NLS_DATE_FORMAT&#39;

select name,type,value,isdefault from v$parameter where name =
&#39;nls_date_format&#39;

I&#39;m thinking it only fails with date formats containing RR in them. If
you can let me know the output of above I will either find a solution or
document.

Thanks for your patience.

Martin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-369166" href="/Public/Bug/Display.html?id=28821#txn-369166">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;08&nbsp;12:51:45&nbsp;2007</span>
    <span class="description">dland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> dland [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/369166/167535/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/167535">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 728b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Oct 08 11:12:30 2007, MJEVANS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; One last question.
&gt; 
&gt; Can you tell me the output of the following SQL on the Oracle you were
&gt; using before you make any changes to NLS settings:
&gt; 
&gt; select * from v$nls_parameters where parameter = &#39;NLS_DATE_FORMAT&#39;
</div>
NLS_DATE_FORMAT DD/MM/RR


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; select name,type,value,isdefault from v$parameter where name =
&gt; &#39;nls_date_format&#39;
</div>
nls_date_format 2               TRUE

&#40;I had to run this latter command as SYSTEM&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m thinking it only fails with date formats containing RR in them. If
&gt; you can let me know the output of above I will either find a solution or
&gt; document.
</div>
Well there&#39;s certainly an RR in there...

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks for your patience.
</div>
No sir, thank-you for yours :&#41;
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Martin
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-369373" href="/Public/Bug/Display.html?id=28821#txn-369373">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;09&nbsp;05:09:58&nbsp;2007</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken">60 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/369373/167655/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/167655">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 307b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the latest information David. I have just committed some test
code and a FAQ entry to subversion which explains this issue and it will
be included in the next release.

I know we have not actually got date formats including RR to work but we
have found a solution so I will be closing this issue.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-369376" href="/Public/Bug/Display.html?id=28821#txn-369376">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;09&nbsp;05:10:37&nbsp;2007</span>
    <span class="description">bohica [...] ntlworld.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.493806</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
