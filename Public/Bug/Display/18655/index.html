<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #18655 for XML-Twig: XML-Twig-3.23 PATCH for build,compile,test on VMS</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #18655 for XML-Twig: XML-Twig-3.23 PATCH for build,compile,test on VMS</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=XML-Twig">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=XML-Twig">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=XML-Twig">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=XML-Twig">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/XML-Twig">XML-Twig CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">18655</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=XML-Twig">XML-Twig</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
cpan [...] pjedwards.co.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-37682-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
3.23    </td>
  </tr>
  <tr id="CF-37683-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
3.24    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




XML-Twig-3.23.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/185336/65782/XML-Twig-3.23.diff">
Tue Apr 11 10:55:31 2006 (13.7k) by Guest
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=18655">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-185336" href="/Public/Bug/Display.html?id=18655#txn-185336">#</a>      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;11&nbsp;10:55:31&nbsp;2006</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> XML-Twig-3.23 PATCH for build,compile,test on VMS</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/185336/65779/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/65779">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 705b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">XML-Twig-3.23
Perl 5.87 on VMS

Please find attached a diff to get this to build and pass all tests on VMS.

Summary of changes:

  &#34;echo&#34; not a VMS command.
  Twig.pm.slow not a valid VMS filename &#40;only one period allowed&#41;.
  Used File::Spec-&gt;catfile in a few places where / was being used.
  quote on VMS is &#34;
  Get perl path from Config.
  Use vmsish hushed on one-liner system call to supress VMS warnings.
  Added -Mblib to version check one-liner.
  No support for &#34;fork&#34; on VMS, one test case edited because of this.
  If VMS check for symbol &#34;xmlwf&#34; before trying to use it.
  pushing $Bin onto @INC in a BEGIN block did not work on VMS,
  so I opted for a &#34;use lib&#34;.

Thanks,
Peter &#40;Stig&#41; Edwards
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> XML-Twig-3.23.diff</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/185336/65782/XML-Twig-3.23.diff">Download XML-Twig-3.23.diff</a><br />
<span class="downloadcontenttype">text/x-diff 13.7k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-185391" href="/Public/Bug/Display.html?id=18655#txn-185391">#</a>      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;11&nbsp;12:13:26&nbsp;2006</span>
    <span class="description">mirod [...] xmltwig.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18655] XML-Twig-3.23 PATCH for build,compile,test on VMS</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 11 Apr 2006 18:12:56 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-Twig [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michel Rodriguez &lt;mirod [...] xmltwig.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/185391/65816/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/65816">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 372b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Guest via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Please find attached a diff to get this to build and pass all tests on VMS.
</div>
Hi,

I must be a little thick today, but applying the patch with &#39;patch -p1 &lt; 
XML-Twig-3.23.diff&#39; gives me a &#39;patch: **** malformed patch at line 5&#39; 
error message. Am I missing something?

Great job though, thanks a lot.

-- 
Michel Rodriguez
Perl &#38;amp; XML
xmltwig.com
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-185392" href="/Public/Bug/Display.html?id=18655#txn-185392">#</a>      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;11&nbsp;12:13:28&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-185412" href="/Public/Bug/Display.html?id=18655#txn-185412">#</a>      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;11&nbsp;12:42:20&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> cpan [...] pjedwards.co.uk</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/185412/65831/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/65831">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I must be a little thick today, but applying the patch with &#39;patch -p1
</div>&lt; XML-Twig-3.23.diff&#39; gives me a &#39;patch: **** malformed patch at line 5&#39;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; error message. Am I missing something?
</div>
Sorry it&#39;s a bit tricky creating patches on VMS &#40;filename non case
preservation, and limited tools&#41;.

I just tested the patch on a RH Linux box, using patch version 2.5.4

patch --dry-run --verbose -p0 &lt; XML-Twig-3.23.diff

I&#39;m in the directory above the folder XML-Twig-3.23, and I&#39;m using
&#34;-p0&#34;, not &#34;-p1&#34;.  I guess this is not how patches are normally created.

Anyway it seems to work:

Hmm...  Looks like a unified diff to me...
The text leading up to this was:
--------------------------
|--- XML-Twig-3.23/Makefile.PL 2006-04-08 19:21:43.1144524103 -0400
|+++ XML-Twig-3.23/Makefile.PL 2006-04-08 22:50:06.1144536606 -0400
--------------------------
Patching file XML-Twig-3.23/Makefile.PL using Plan A...
Hunk #1 succeeded at 19.
Hunk #2 succeeded at 34.

...etc...etc...

Hmm...  The next patch looks like a unified diff to me...
The text leading up to this was:
--------------------------
|--- XML-Twig-3.23/Twig.pm 2006-04-08 19:21:43.1144524103 -0400
|+++ XML-Twig-3.23/Twig.pm 2006-04-08 22:50:06.1144536606 -0400
--------------------------
Patching file XML-Twig-3.23/Twig.pm using Plan A...
Hunk #1 succeeded at 732.
Hunk #2 succeeded at 740.
Hunk #3 succeeded at 763.
done

If it still does not work I can create a new diff.

Thanks,
Peter &#40;Stig&#41; Edwards
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-188213" href="/Public/Bug/Display.html?id=18655#txn-188213">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;20&nbsp;06:54:45&nbsp;2006</span>
    <span class="description">MIROD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/188213/67521/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/67521">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 429b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I went through the patch and integrated the changes to the development
version.  

The one thing I did not do is to rename Twig.pm.slow. Is this really
necessary? &#40;the file is not used in installing the module, Twig.pm is
generated from it, and it is there for people who want to send patches
as they should be done on Twig.pm.slow instead of Twig.pm&#41;. What does
having this file in the distribution cause on VMS?
 
__
mirod
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-188268" href="/Public/Bug/Display.html?id=18655#txn-188268">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;20&nbsp;09:36:26&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> cpan [...] pjedwards.co.uk</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/188268/67571/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/67571">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The one thing I did not do is to rename Twig.pm.slow. Is this really
&gt; necessary? &#40;the file is not used in installing the module, Twig.pm is
&gt; generated from it, and it is there for people who want to send
&gt; patches as they should be done on Twig.pm.slow instead of Twig.pm&#41;.
&gt; What does having this file in the distribution cause on VMS?
&gt; mirod
</div>
Valid charcacters for VMS filenames are /[A-Z0-0$_-]/, they are of the
format name.extension;version &#40;max length for name and extension are 
39 characters&#41;.  perlport also mentions the 8.3 convention, for 
maximum portability, onerous a burden though this may appear.

I can&#39;t actually remember why I changed Twig.pm.slow, it&#39;s likely
it was just because I wanted to &#39;fix&#39; the manifest errors.  It&#39;s
also likely that I know if any file in a dist is an invalid
filename on VMS, I know that 99% of the time I&#39;m going to need
to change the filename to get things to build and test.

I just downloaded 3.24, and it&#39;s failing a couple of tests, &#40;nothing 
to do with Twig.pm.slow&#41;.

t/test_errors.......................
%DCL-W-IVVERB, unrecognized command verb - check validity and spelling
 \}\
-e syntax OK
cannot slurp &#39;t/error.log&#39;: no such file or directory
%RMS-E-FNF, file not found
dubious
        Test returned status 98962 &#40;wstat 512, 0x200&#41;
                &#40;VMS status is 98962&#41;
DIED. FAILED test 110
        Failed 1/110 tests, 99.09% okay

From line 290 of test_errors.t
290    { my $error=&#34;t/error.log&#34;;

I edited this to:

    { my $error=File::Spec-&gt;catfile&#40;&#39;t&#39;,&#39;error.log&#39;&#41;;
      use Config;
      my $secure_perl_path = $Config{perlpath};
      if &#40;$^O ne &#39;VMS&#39;&#41; {
          $secure_perl_path .= $Config{_exe} unless $secure_perl_path 
=~ m/$Config{_exe}$/i;
      }
      my $q= &#40; &#40;$^O eq &#34;MSWin32&#34;&#41; || &#40;$^O eq &#39;VMS&#39;&#41; &#41; ? &#39;&#34;&#39; : &#34;&#39;&#34;;
      my $cmd;
      if &#40;$^O eq &#39;VMS&#39;&#41; {
          $cmd = &#34;$secure_perl_path ${q}-CSDAL${q} ${q}-
MXML::Twig${q} -e $q close STDERR; open&#40; STDERR, qq{&gt;$error}&#41; or die qq
{cannot open $error &#40;for STDERR&#41;}; open&#40; FH, qq{$secure_perl_path -p -
e 1 t/test_new_features_3.22_xml |}&#41; or die qq&#40;$!&#41;; XML::Twig-&gt;nparse&#40; 
\\*FH&#41;; die qq{OK};$q&#34;;
      } else {
          $cmd = &#34;$^X -CSDAL -MXML::Twig -e&#39;close STDERR; open&#40; 
STDERR, qq{&gt;$error}&#41; or die qq{cannot open $error &#40;for STDERR&#41;}; open&#40; 
FH, qq{$^X -p -e1 t/test_new_features_3.22.xml |}&#41; or die $!; 
XML::Twig-&gt;nparse&#40; \\*FH&#41;; die qq{OK\n};&#39;&#34;;
      }
      system $cmd;
      matches&#40; slurp&#40; $error&#41;, &#34;^cannot parse the output of a 
pipe&#34;, &#39;parse a pipe with perlIO layer set to UTF8 &#40;RT #17500&#41;&#39;&#41;;

NOTE the filename change: test_new_features_3.22_xml due to only one 
period being allowed.  I&#39;ve only tested this on VMS.

After this change test 110 fails thus:

not ok 110
parse a pipe with perlIO layer set to UTF8 &#40;RT #17500&#41;: expected to 
match /^cannot parse the output of a pipe/, got &#39;OK at -e line 1.
&#39;

I&#39;ve not had a chance to read and fully understand 
<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Public/Bug/Display.html?id=17500">http://rt.cpan.org/Public/Bug/Display.html?id=17500</a></span> yet.

But thought I&#39;d let you know.

Thanks,
Peter &#40;Stig&#41; Edwards
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-188340" href="/Public/Bug/Display.html?id=18655#txn-188340">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;20&nbsp;13:48:00&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> cpan [...] pjedwards.co.uk</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/188340/67627/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/67627">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 953b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I can&#39;t actually remember why I changed Twig.pm.slow
</div>
Just remembered.  It&#39;s because of this line the Makefile.PL

 &#39;depend&#39;     =&gt; { &#39;Twig.pm&#39; =&gt; &#34;FORCE\n\t\$&#40;ECHO&#41; \&#34;building 
Twig.pm\&#34;\n\t\$&#40;PERL&#41; speedup Twig.pm.slow &gt; Twig.pm\n\t\$&#40;PERL&#41; 
check_optional_modules&#34;,

I also dicovered a bug in the previous PATCH I supplied to you.
On the line above echo should be:
  \$&#40;ECHO&#41;
and not
  echo
or
  $echo
sorry about that.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I just downloaded 3.24, and it&#39;s failing a couple of tests, &#40;nothing 
&gt; to do with Twig.pm.slow&#41;.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve not had a chance to read and fully understand 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Public/Bug/Display.html?id=17500">http://rt.cpan.org/Public/Bug/Display.html?id=17500</a></span> yet.
</div>
So I read the bug above and I think the problem is fixed in 5.87 ???
&#40;Or maybe it is not a problem on VMS&#41;
So I edited line 287 of test_errors.t from:
  { if&#40; $] &lt;= 5.008&#41;
to:
  { if&#40; &#40; $] &lt;= 5.008&#41; || &#40;$] &gt;= 5.008007&#41; &#41;

this skips the test &#40;for me&#41; and now all test cases pass.

Thanks,
Peter &#40;Stig&#41; Edwards
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-188658" href="/Public/Bug/Display.html?id=18655#txn-188658">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;21&nbsp;11:42:52&nbsp;2006</span>
    <span class="description">mirod [...] xmltwig.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18655] XML-Twig-3.23 PATCH for build,compile,test on VMS</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 21 Apr 2006 17:42:06 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-Twig [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michel Rodriguez &lt;mirod [...] xmltwig.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/188658/67849/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/67849">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Guest via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: XML-Twig
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=18655">http://rt.cpan.org/Ticket/Display.html?id=18655</a></span> &gt;
&gt; 
<div class="message-stanza open">&gt;&gt; I can&#39;t actually remember why I changed Twig.pm.slow
</div>&gt; 
&gt; Just remembered.  It&#39;s because of this line the Makefile.PL
&gt; 
&gt;  &#39;depend&#39;     =&gt; { &#39;Twig.pm&#39; =&gt; &#34;FORCE\n\t\$&#40;ECHO&#41; \&#34;building 
&gt; Twig.pm\&#34;\n\t\$&#40;PERL&#41; speedup Twig.pm.slow &gt; Twig.pm\n\t\$&#40;PERL&#41; 
&gt; check_optional_modules&#34;,
&gt; 
&gt; I also dicovered a bug in the previous PATCH I supplied to you.
&gt; On the line above echo should be:
&gt;   \$&#40;ECHO&#41;
&gt; and not
&gt;   echo
&gt; or
&gt;   $echo
&gt; sorry about that.
</div>
I removed the echo altogether

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So I read the bug above and I think the problem is fixed in 5.87 ???
&gt; &#40;Or maybe it is not a problem on VMS&#41;
&gt; So I edited line 287 of test_errors.t from:
&gt;   { if&#40; $] &lt;= 5.008&#41;
&gt; to:
&gt;   { if&#40; &#40; $] &lt;= 5.008&#41; || &#40;$] &gt;= 5.008007&#41; &#41;
&gt; 
&gt; this skips the test &#40;for me&#41; and now all test cases pass.
</div>
The bug is still there on my machine, so I replaced it with

if&#40; &#40; $] &lt;= 5.008&#41; || &#40;$^O eq &#39;VMS&#39;&#41; &#41;

The new version is at the usual place, let me know if you find anything 
else, thanks.

-- 
Michel Rodriguez
Perl &#38;amp; XML
xmltwig.com
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-195612" href="/Public/Bug/Display.html?id=18655#txn-195612">#</a>      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;15&nbsp;07:11:31&nbsp;2006</span>
    <span class="description">MIROD [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-195614" href="/Public/Bug/Display.html?id=18655#txn-195614">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;May&nbsp;15&nbsp;07:11:33&nbsp;2006</span>
    <span class="description">MIROD [...] cpan.org -  Fixed in 3.24 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.458863</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
