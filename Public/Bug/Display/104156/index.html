<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #104156 for XML-LibXML: exact version check generates a useless warning, breaking scripts</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #104156 for XML-LibXML: exact version check generates a useless warning, breaking scripts</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/XML-LibXML/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/XML-LibXML/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/XML-LibXML/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/XML-LibXML/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/XML-LibXML">XML-LibXML CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">104156</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/XML-LibXML/Active/">XML-LibXML</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
vincent [...] vinc17.net

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
CARNIL [...] cpan.org

<br />
gregoa [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-37350-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.0120    </td>
  </tr>
  <tr id="CF-37351-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;01&nbsp;20:40:33&nbsp;2015</span>
    <span class="description">vincent [...] vinc17.net -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> exact version check generates a useless warning, breaking scripts</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">LibXML.pm does an exact version check:

{
  my &#40;$runtime_version&#41; = LIBXML_RUNTIME_VERSION&#40;&#41; =~ /^&#40;\d+&#41;/;
  if &#40; $runtime_version &lt; LIBXML_VERSION &#41; {
    warn &#34;Warning: XML::LibXML compiled against libxml2 &#34;.LIBXML_VERSION.
      &#34;, but runtime libxml2 is older $runtime_version\n&#34;;
  }
}

This is a problem for Linux distributions, because the distributed version may have been compiled with a newer libxml2 version, and a warning is generated, which breaks scripts that check for errors.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;02&nbsp;01:36:14&nbsp;2015</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri May 01 20:40:33 2015, vincent@vinc17.net wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; LibXML.pm does an exact version check:
&gt; 
&gt; {
&gt;   my &#40;$runtime_version&#41; = LIBXML_RUNTIME_VERSION&#40;&#41; =~ /^&#40;\d+&#41;/;
&gt;   if &#40; $runtime_version &lt; LIBXML_VERSION &#41; {
&gt;     warn &#34;Warning: XML::LibXML compiled against libxml2
&gt; &#34;.LIBXML_VERSION.
&gt;       &#34;, but runtime libxml2 is older $runtime_version\n&#34;;
&gt;   }
&gt; }
&gt; 
&gt; This is a problem for Linux distributions, because the distributed
&gt; version may have been compiled with a newer libxml2 version, and a
&gt; warning is generated, which breaks scripts that check for errors.
</div>
First of all, why are you using a lower libxml2 version than the one the distributed version was compiled against? Shouldn&#39;t it be the one packaged for the Linux distribution?

Secondly, I believe you can trap and override this warning using $SIG{__WARN__}.

Finally though, I am open for a patch that disables this check if there&#39;s a package-scope variable set. E.g:

««««
BEGIN { $XML::LibXML::disable_runtime_library_version_check = 1 ; }
use XML::LibXML;
»»»»

Please let me know what you think.

Regards,

-- Shlomi Fish
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;02&nbsp;01:36:15&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;02&nbsp;04:23:43&nbsp;2015</span>
    <span class="description">vincent [...] vinc17.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> vincent [...] vinc17.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Sam 02 Mai 2015 01:36:14, SHLOMIF a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; First of all, why are you using a lower libxml2 version than the one
&gt; the distributed version was compiled against?
</div>
Yes, because of an important regression in the latest libxml2 version, which gives errors on valid XML documents that have external XML entities:

  <span class="clickylink"><a target="new" rel="nofollow" href="https://bugzilla.gnome.org/show_bug.cgi?id=737840">https://bugzilla.gnome.org/show_bug.cgi?id=737840</a></span>

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Shouldn&#39;t it be the one packaged for the Linux distribution?
</div>
It is packaged, but I can&#39;t use it due to this regression &#40;for which there seems to be no good workaround&#41;. And there is no versioned dependency &#40;which would have avoided the automatic upgrade of XML::LibXML&#41; because the new libxml2 library is entirely ABI-compatible with the old one.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Secondly, I believe you can trap and override this warning using
&gt; $SIG{__WARN__}.
</div>
This could be a workaround, but I would need to modify all my scripts.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Finally though, I am open for a patch that disables this check if
&gt; there&#39;s a package-scope variable set. E.g:
&gt; 
&gt; ««««
&gt; BEGIN { $XML::LibXML::disable_runtime_library_version_check = 1 ; }
&gt; use XML::LibXML;
&gt; »»»»
</div>
This would be better, but there would be the same problem: the need to modify all the scripts &#40;if the variable is not set by default&#41;, unless there is also a way to do that globally, e.g. via a config file or an environment variable.

Now I&#39;m wondering why there is such a check at all. Library versioning should take care of such version problems and give an error only when need be.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;02&nbsp;07:09:47&nbsp;2015</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Vincent,

On Sat May 02 04:23:43 2015, vincent@vinc17.net wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Le Sam 02 Mai 2015 01:36:14, SHLOMIF a écrit :
<div class="message-stanza open">&gt; &gt; First of all, why are you using a lower libxml2 version than the one
&gt; &gt; the distributed version was compiled against?
</div>&gt; 
&gt; Yes, because of an important regression in the latest libxml2 version,
&gt; which gives errors on valid XML documents that have external XML
&gt; entities:
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://bugzilla.gnome.org/show_bug.cgi?id=737840">https://bugzilla.gnome.org/show_bug.cgi?id=737840</a></span>
&gt; 
<div class="message-stanza open">&gt; &gt; Shouldn&#39;t it be the one packaged for the Linux distribution?
</div>&gt; 
&gt; It is packaged, but I can&#39;t use it due to this regression &#40;for which
&gt; there seems to be no good workaround&#41;. And there is no versioned
&gt; dependency &#40;which would have avoided the automatic upgrade of
&gt; XML::LibXML&#41; because the new libxml2 library is entirely ABI-
&gt; compatible with the old one.
&gt; 
<div class="message-stanza open">&gt; &gt; Secondly, I believe you can trap and override this warning using
&gt; &gt; $SIG{__WARN__}.
</div>&gt; 
&gt; This could be a workaround, but I would need to modify all my scripts.
&gt; 
<div class="message-stanza open">&gt; &gt; Finally though, I am open for a patch that disables this check if
&gt; &gt; there&#39;s a package-scope variable set. E.g:
&gt; &gt;
&gt; &gt; ««««
&gt; &gt; BEGIN { $XML::LibXML::disable_runtime_library_version_check = 1 ; }
&gt; &gt; use XML::LibXML;
&gt; &gt; »»»»
</div>&gt; 
&gt; This would be better, but there would be the same problem: the need to
&gt; modify all the scripts &#40;if the variable is not set by default&#41;, unless
&gt; there is also a way to do that globally, e.g. via a config file or an
&gt; environment variable.
&gt; 
&gt; Now I&#39;m wondering why there is such a check at all. Library versioning
&gt; should take care of such version problems and give an error only when
&gt; need be.
</div>
The problem is that XML::LibXML may make use of features in the more recent libxml2 , against which it was compiled, and so break with the older versions. What I suggest you to do is to build a new version of XML::LibXML against the older library and use that instead of the system XML::LibXML. You can consult the following documents for insights:

* <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/ExtUtils::MakeMaker">https://metacpan.org/pod/ExtUtils::MakeMaker</a></span>

* <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/local::lib">https://metacpan.org/pod/local::lib</a></span>

Otherwise, I feel that the warning is there for a reason , and that it should be kept there. If you wish, you may opt to remove it from the installed .pm file manually &#40;but I&#39;d really recommend installing a new XML::LibXML distribution&#41;.

Regards,

-- Shlomi Fish
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;02&nbsp;17:45:52&nbsp;2015</span>
    <span class="description">vincent [...] vinc17.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> vincent [...] vinc17.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Sam 02 Mai 2015 07:09:47, SHLOMIF a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The problem is that XML::LibXML may make use of features in the more
&gt; recent libxml2 , against which it was compiled, and so break with the
&gt; older versions.
</div>
No, if the new version of the libxml2 library has new features, it is not possible to run a program against an older version of the library, thanks to library versioning. See <span class="clickylink"><a target="new" rel="nofollow" href="http://www.gnu.org/software/libtool/manual/html_node/Versioning.html">http://www.gnu.org/software/libtool/manual/html_node/Versioning.html</a></span> or <span class="clickylink"><a target="new" rel="nofollow" href="https://autotools.io/libtool/version.html">https://autotools.io/libtool/version.html</a></span>

In the present case, libxml2 2.9.1 and libxml2 2.9.2 are compatible in both ways &#40;forward and backward&#41; because they have the same &#34;current&#34; and &#34;age&#34; values. Basically, 2.9.2 is here just a bug-fix release; it doesn&#39;t introduce any new feature. So, whether one links to 2.9.1 or to 2.9.2, the program will still work &#40;up to bugs&#41;.

So, the warning is completely useless because the check for new features &#40;incompatibilities&#41; is already done via library versioning.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;06&nbsp;06:59:55&nbsp;2015</span>
    <span class="description">CARNIL [...] cpan.org -  Cc CARNIL added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;06&nbsp;07:12:42&nbsp;2015</span>
    <span class="description">gregoa [...] cpan.org -  Cc GREGOA added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;07&nbsp;09:36:47&nbsp;2015</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi vincent,

I am not convinced that this is an actual issue with the module and like I said there are some workarounds and/or fixes you can follow. So I&#39;m going to close this issue as &#34;REJECTED&#34;. You should make sure to manage the versions of the various software components on your system in a better way.

Regards,

-- Shlomi Fish
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;07&nbsp;09:36:49&nbsp;2015</span>
    <span class="description">SHLOMIF [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;07&nbsp;10:10:18&nbsp;2015</span>
    <span class="description">vincent [...] vinc17.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> vincent [...] vinc17.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Jeu 07 Mai 2015 09:36:47, SHLOMIF a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You should make sure to manage the versions of the various software
&gt; components on your system in a better way.
</div>
The way Debian and other Linux distributions are doing is the right way and guaranteed to work &#40;if no bugs&#41;. There&#39;s no better way.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;08&nbsp;02:38:02&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-05-07 09:36:47, SHLOMIF wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi vincent,
&gt; 
&gt; I am not convinced that this is an actual issue with the module and
&gt; like I said there are some workarounds and/or fixes you can follow. So
&gt; I&#39;m going to close this issue as &#34;REJECTED&#34;. You should make sure to
&gt; manage the versions of the various software components on your system
&gt; in a better way.
</div>
I can follow Vincent&#39;s reasoning and think that a check like this would be better &#40;untested&#41;:

    my &#40;$runtime_version&#41; = LIBXML_RUNTIME_VERSION&#40;&#41; =~ /^&#40;\d+&#41;/;
    if &#40; int&#40;$runtime_version/100&#41; &lt; int&#40;LIBXML_VERSION&#40;&#41;/100&#41; &#41; {
        warn &#34;Warning: XML::LibXML compiled against libxml2 &#34;.LIBXML_VERSION. &#34;, but runtime libxml2 is older $runtime_version\n&#34;;
    }

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;08&nbsp;08:00:50&nbsp;2015</span>
    <span class="description">vincent [...] vinc17.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> vincent [...] vinc17.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Ven 08 Mai 2015 02:38:02, SREZIC a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I can follow Vincent&#39;s reasoning and think that a check like this
&gt; would be better &#40;untested&#41;:
&gt; 
&gt; my &#40;$runtime_version&#41; = LIBXML_RUNTIME_VERSION&#40;&#41; =~ /^&#40;\d+&#41;/;
&gt; if &#40; int&#40;$runtime_version/100&#41; &lt; int&#40;LIBXML_VERSION&#40;&#41;/100&#41; &#41; {
&gt;     warn &#34;Warning: XML::LibXML compiled against libxml2
&gt; &#34;.LIBXML_VERSION. &#34;, but runtime libxml2 is older $runtime_version\n&#34;;
&gt; }
</div>
This would be a bit better &#40;not tested&#41;, but won&#39;t solve the general problem in case one wants to use an even older library. The reason is that what is actually done is the use of symbol versioning, so that it is allowed to use an older library if the software doesn&#39;t use the new features. See: <span class="clickylink"><a target="new" rel="nofollow" href="http://stackoverflow.com/questions/4032373/linking-against-an-old-version-of-libc-to-provide-greater-application-coverage">http://stackoverflow.com/questions/4032373/linking-against-an-old-version-of-libc-to-provide-greater-application-coverage</a></span> &#40;this one is about libc, but it is the same with libxml2&#41;. For instance, concerning the XML/LibXML/LibXML.so installed on my machine:

$ objdump -p /usr/lib/x86_64-linux-gnu/perl5/5.20/auto/XML/LibXML/LibXML.so
[...]
Version References:
  required from libc.so.6:
    0x06969194 0x00 17 GLIBC_2.14
    0x0d696914 0x00 14 GLIBC_2.4
    0x09691974 0x00 07 GLIBC_2.3.4
    0x09691a75 0x00 03 GLIBC_2.2.5
  required from libxml2.so.2:
    0x0f4cabc8 0x00 21 LIBXML2_2.6.18
    0x08f4c7b6 0x00 20 LIBXML2_2.5.6
    0x0f4cabd7 0x00 19 LIBXML2_2.6.27
    0x0f4cabd0 0x00 18 LIBXML2_2.6.20
    0x0f4cabc4 0x00 16 LIBXML2_2.6.14
    0x08f4cab3 0x00 15 LIBXML2_2.6.3
    0x0f4cabc7 0x00 13 LIBXML2_2.6.17
    0x08f4c7b9 0x00 12 LIBXML2_2.5.9
    0x08f4c7b8 0x00 11 LIBXML2_2.5.8
    0x0f4cabc5 0x00 10 LIBXML2_2.6.15
    0x08f4c7b2 0x00 09 LIBXML2_2.5.2
    0x08f4cab6 0x00 08 LIBXML2_2.6.6
    0x08f4cab0 0x00 06 LIBXML2_2.6.0
    0x08f4c7b7 0x00 05 LIBXML2_2.5.7
    0x08f4c7b0 0x00 04 LIBXML2_2.5.0
    0x0f4c8be0 0x00 02 LIBXML2_2.4.30

So, it just needs a lixbml2 library version that provides the symbols up to 2.6.18 &#40;which is probably libxml2 2.6.18 here&#41;, even though XML::LibXML was built against a much more recent version of libxml2.

In Debian, there&#39;s a dependency on libxml2 &gt;= 2.7.4 because symbol versioning in libxml2 was introduced in this version:

libxml2 &#40;2.7.4.dfsg-1&#41; unstable; urgency=low
[...]
  * debian/libxml2.symbols: Change symbols file to use newly introduced
    symbol versioning
  * debian/rules: bump shlibs to current version.

 -- Mike Hommey &lt;glandium@debian.org&gt;  Thu, 10 Sep 2009 23:04:35 +0200
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
