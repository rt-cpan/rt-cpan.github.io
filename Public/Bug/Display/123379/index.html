<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #123379 for XML-LibXML: XML Test in Net-DAV-Server broken</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #123379 for XML-LibXML: XML Test in Net-DAV-Server broken</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/XML-LibXML/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/XML-LibXML/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/XML-LibXML/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/XML-LibXML/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/XML-LibXML">XML-LibXML CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">123379</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/XML-LibXML/Active/">XML-LibXML</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
alexander.bluhm [...] gmx.net

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-37350-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.0130    </td>
  </tr>
  <tr id="CF-37351-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;25&nbsp;10:42:20&nbsp;2017</span>
    <span class="description">alexander.bluhm [...] gmx.net -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> XML Test in Net-DAV-Server broken</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">When updating XML-LibXML I always run the tests of all modules
depending on it.  Changing vom XML-LibXML-2.0129 to 2.0130 makes
two tests of Net-DAV-Server-1.305 fail.  2.0131 has the same problem.

The problematic tests are t/server_propfind.t and t/server_propfind_lock.t.

I have looked into t/server_propfind.t.  Subtest 9 parses an XML
file with $parser-&gt;parse_string&#40; $content &#41;.  Parser is a XML::LibXML
object, error message is:

Unable to parse content:
:2: namespace error : Failed to parse QName &#39;D:D:&#39;
&lt;D:D:multistatus xmlns:D=&#34;DAV:&#34;&gt;&lt;D:response&gt;&lt;D:href&gt;/foo/&lt;/D:href&gt;&lt;D:propstat&gt;&lt;D
    ^

The content is generated with Net::DAV::Server-&gt;propfind&#40;&#41;.

    my $doc = XML::LibXML::Document-&gt;new&#40; &#39;1.0&#39;, &#39;utf-8&#39; &#41;;
    my $multistat = $doc-&gt;createElement&#40;&#39;D:multistatus&#39;&#41;;
    $multistat-&gt;setAttribute&#40; &#39;xmlns:D&#39;, &#39;DAV:&#39; &#41;;
    $doc-&gt;setDocumentElement&#40;$multistat&#41;;
    ...
    $response-&gt;content&#40; $doc-&gt;toString&#40;0&#41; &#41;;

With XML-LibXML-2.0129 the content is:
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;D:multistatus xmlns:D=&#34;DAV:&#34;&gt;&lt;D:response&gt;&lt;D:href&gt;/foo/&lt;/D:href&gt;&lt;D:propstat&gt;&lt;D:prop&gt;&lt;D:creationdate&gt;2017-10-25T13:21:33&lt;/D:creationdate&gt;&lt;D:getcontentlength/&gt;&lt;D:getcontenttype&gt;httpd/unix-directory&lt;/D:getcontenttype&gt;&lt;D:getlastmodified&gt;Wed, 25 Oct 2017 13:21:33 GMT&lt;/D:getlastmodified&gt;&lt;D:supportedlock&gt;&lt;D:lockentry&gt;&lt;D:lockscope&gt;&lt;D:exclusive/&gt;&lt;/D:lockscope&gt;&lt;D:locktype&gt;&lt;D:write/&gt;&lt;/D:locktype&gt;&lt;/D:lockentry&gt;&lt;/D:supportedlock&gt;&lt;D:resourcetype&gt;&lt;D:collection/&gt;&lt;/D:resourcetype&gt;&lt;/D:prop&gt;&lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;&lt;/D:propstat&gt;&lt;/D:response&gt;&lt;/D:multistatus&gt;

With XML-LibXML-2.0131 it changed to:
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;D:D:multistatus xmlns:D=&#34;DAV:&#34;&gt;&lt;D:response&gt;&lt;D:href&gt;/foo/&lt;/D:href&gt;&lt;D:propstat&gt;&lt;D:prop&gt;&lt;D:creationdate&gt;2017-10-25T13:45:11&lt;/D:creationdate&gt;&lt;D:getcontentlength/&gt;&lt;D:getcontenttype&gt;httpd/unix-directory&lt;/D:getcontenttype&gt;&lt;D:getlastmodified&gt;Wed, 25 Oct 2017 13:45:11 GMT&lt;/D:getlastmodified&gt;&lt;D:supportedlock&gt;&lt;D:lockentry&gt;&lt;D:lockscope&gt;&lt;D:exclusive/&gt;&lt;/D:lockscope&gt;&lt;D:locktype&gt;&lt;D:write/&gt;&lt;/D:locktype&gt;&lt;/D:lockentry&gt;&lt;/D:supportedlock&gt;&lt;D:resourcetype&gt;&lt;D:collection/&gt;&lt;/D:resourcetype&gt;&lt;/D:prop&gt;&lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;&lt;/D:propstat&gt;&lt;/D:response&gt;&lt;/D:D:multistatus&gt;

The D:D: namespace looks wrong.  I suspect the bug is on the
XML-LibXML side when creating the document as it worked with the
old version.

I use Perl 5.24.3
This is perl 5, version 24, subversion 3 &#40;v5.24.3&#41; built for amd64-openbsd
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;26&nbsp;08:26:17&nbsp;2017</span>
    <span class="description">shlomif [...] shlomifish.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #123379] XML Test in Net-DAV-Server broken</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 26 Oct 2017 15:00:20 +0300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-LibXML [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Shlomi Fish &lt;shlomif [...] shlomifish.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi!

Thanks for the report.

On Wed, 25 Oct 2017 10:42:22 -0400
&#34;Alexander Bluhm via RT&#34; &lt;bug-XML-LibXML@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Wed Oct 25 10:42:20 2017: Request 123379 was acted upon.
&gt; Transaction: Ticket created by bluhm
&gt;        Queue: XML-LibXML
&gt;      Subject: XML Test in Net-DAV-Server broken
&gt;    Broken in: 2.0130
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: alexander.bluhm@gmx.net
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=123379">https://rt.cpan.org/Ticket/Display.html?id=123379</a></span> &gt;
&gt; 
&gt; 
&gt; When updating XML-LibXML I always run the tests of all modules
&gt; depending on it.  Changing vom XML-LibXML-2.0129 to 2.0130 makes
&gt; two tests of Net-DAV-Server-1.305 fail.  2.0131 has the same problem.
&gt; 
&gt; The problematic tests are t/server_propfind.t and t/server_propfind_lock.t.
&gt; 
&gt; I have looked into t/server_propfind.t.  Subtest 9 parses an XML
&gt; file with $parser-&gt;parse_string&#40; $content &#41;.  Parser is a XML::LibXML
&gt; object, error message is:
&gt; 
&gt; Unable to parse content:
&gt; :2: namespace error : Failed to parse QName &#39;D:D:&#39;
&gt; &lt;D:D:multistatus
&gt; xmlns:D=&#34;DAV:&#34;&gt;&lt;D:response&gt;&lt;D:href&gt;/foo/&lt;/D:href&gt;&lt;D:propstat&gt;&lt;D ^
&gt; 
&gt; The content is generated with Net::DAV::Server-&gt;propfind&#40;&#41;.
&gt; 
&gt;     my $doc = XML::LibXML::Document-&gt;new&#40; &#39;1.0&#39;, &#39;utf-8&#39; &#41;;
&gt;     my $multistat = $doc-&gt;createElement&#40;&#39;D:multistatus&#39;&#41;;
&gt;     $multistat-&gt;setAttribute&#40; &#39;xmlns:D&#39;, &#39;DAV:&#39; &#41;;
&gt;     $doc-&gt;setDocumentElement&#40;$multistat&#41;;
&gt;     ...
&gt;     $response-&gt;content&#40; $doc-&gt;toString&#40;0&#41; &#41;;
&gt; 
</div>
I am tempted to believe this code should not have worked properly in the first
place, and that it was an accidental feature that it did. Can you provide a
<span class="clickylink"><a target="new" rel="nofollow" href="http://sscce.org/">http://sscce.org/</a></span> for it as a Test::More test script and attach it here?


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; With XML-LibXML-2.0129 the content is:
&gt; &lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&gt; &lt;D:multistatus
&gt; xmlns:D=&#34;DAV:&#34;&gt;&lt;D:response&gt;&lt;D:href&gt;/foo/&lt;/D:href&gt;&lt;D:propstat&gt;&lt;D:prop&gt;&lt;D:creationdate&gt;2017-10-25T13:21:33&lt;/D:creationdate&gt;&lt;D:getcontentlength/&gt;&lt;D:getcontenttype&gt;httpd/unix-directory&lt;/D:getcontenttype&gt;&lt;D:getlastmodified&gt;Wed,
&gt; 25 Oct 2017 13:21:33
&gt; GMT&lt;/D:getlastmodified&gt;&lt;D:supportedlock&gt;&lt;D:lockentry&gt;&lt;D:lockscope&gt;&lt;D:exclusive/&gt;&lt;/D:lockscope&gt;&lt;D:locktype&gt;&lt;D:write/&gt;&lt;/D:locktype&gt;&lt;/D:lockentry&gt;&lt;/D:supportedlock&gt;&lt;D:resourcetype&gt;&lt;D:collection/&gt;&lt;/D:resourcetype&gt;&lt;/D:prop&gt;&lt;D:status&gt;HTTP/1.1
&gt; 200 OK&lt;/D:status&gt;&lt;/D:propstat&gt;&lt;/D:response&gt;&lt;/D:multistatus&gt;
&gt; 
&gt; With XML-LibXML-2.0131 it changed to:
&gt; &lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&gt; &lt;D:D:multistatus
&gt; xmlns:D=&#34;DAV:&#34;&gt;&lt;D:response&gt;&lt;D:href&gt;/foo/&lt;/D:href&gt;&lt;D:propstat&gt;&lt;D:prop&gt;&lt;D:creationdate&gt;2017-10-25T13:45:11&lt;/D:creationdate&gt;&lt;D:getcontentlength/&gt;&lt;D:getcontenttype&gt;httpd/unix-directory&lt;/D:getcontenttype&gt;&lt;D:getlastmodified&gt;Wed,
&gt; 25 Oct 2017 13:45:11
&gt; GMT&lt;/D:getlastmodified&gt;&lt;D:supportedlock&gt;&lt;D:lockentry&gt;&lt;D:lockscope&gt;&lt;D:exclusive/&gt;&lt;/D:lockscope&gt;&lt;D:locktype&gt;&lt;D:write/&gt;&lt;/D:locktype&gt;&lt;/D:lockentry&gt;&lt;/D:supportedlock&gt;&lt;D:resourcetype&gt;&lt;D:collection/&gt;&lt;/D:resourcetype&gt;&lt;/D:prop&gt;&lt;D:status&gt;HTTP/1.1
&gt; 200 OK&lt;/D:status&gt;&lt;/D:propstat&gt;&lt;/D:response&gt;&lt;/D:D:multistatus&gt;
&gt; 
&gt; The D:D: namespace looks wrong.  I suspect the bug is on the
&gt; XML-LibXML side when creating the document as it worked with the
&gt; old version.
&gt; 
&gt; I use Perl 5.24.3
&gt; This is perl 5, version 24, subversion 3 &#40;v5.24.3&#41; built for amd64-openbsd
</div>


-- 
-----------------------------------------------------------------
Shlomi Fish       <span class="clickylink"><a target="new" rel="nofollow" href="http://www.shlomifish.org/">http://www.shlomifish.org/</a></span>
Apple Inc. is Evil - <span class="clickylink"><a target="new" rel="nofollow" href="http://www.shlomifish.org/open-source/anti/apple/">http://www.shlomifish.org/open-source/anti/apple/</a></span>

Some people grow older and wiser. Not I. I grow older and more foolish.

Please reply to list if it&#39;s a mailing list post - <span class="clickylink"><a target="new" rel="nofollow" href="http://shlom.in/reply">http://shlom.in/reply</a></span> .
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;26&nbsp;08:26:19&nbsp;2017</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;26&nbsp;15:31:20&nbsp;2017</span>
    <span class="description">alexander.bluhm [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> alexander.bluhm [...] gmx.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Oct 26 08:26:17 2017, shlomif@shlomifish.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I am tempted to believe this code should not have worked properly
&gt; in the first place, and that it was an accidental feature that
&gt; it did.
</div>
I have no strong opinion whether XML-LibXML or Net-DAV-Server is
wrong.  My goal is to update the Perl modules in the OpenBSD ports
tree, but I see tests failing when doing that.  I started with a
bug report here as the update to XML-LibXML-2.0130 made the test
fail.  I seems strange to me that XML::LibXML cannot parse its own
output.  If the API is misused by Net-DAV-Server, XML-LibXML should
report an error when creating the document.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Can you provide a <span class="clickylink"><a target="new" rel="nofollow" href="http://sscce.org/">http://sscce.org/</a></span> for it as a Test::More test
&gt; script and attach it here?
</div>
This script passes with XML-LibXML-2.0129 and fails with 2.0131:

use strict;
use warnings;
use XML::LibXML;
use Test::More tests =&gt; 8;

ok&#40;my $doc = XML::LibXML::Document-&gt;new&#40;&#41;, &#39;new document&#39;&#41;;
ok&#40;my $elm = $doc-&gt;createElement&#40;&#39;D:element&#39;&#41;, &#39;create element&#39;&#41;;
ok&#40;$elm-&gt;setAttribute&#40;&#39;xmlns:D&#39;, &#39;attribute&#39;&#41;, &#39;set attribute&#39;&#41;;
$doc-&gt;setDocumentElement&#40;$elm&#41;; # XXX does not return true if successful
ok&#40;my $str = $doc-&gt;toString&#40;0&#41;, &#39;to string&#39;&#41;;
ok&#40;my $par = XML::LibXML-&gt;new&#40;&#41;, &#39;new parser&#39;&#41;;
ok&#40; eval { $par-&gt;parse_string&#40;$str&#41; } , &#39;parse string&#39;&#41;;
is&#40;$@, &#34;&#34;, &#39;parse error&#39;&#41;;
like&#40;$str, qr{&lt;D:element xmlns:D=&#34;attribute&#34;/&gt;}, &#39;xml element&#39;&#41;;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;27&nbsp;04:05:41&nbsp;2017</span>
    <span class="description">shlomif [...] shlomifish.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #123379] XML Test in Net-DAV-Server broken</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 27 Oct 2017 10:39:29 +0300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-LibXML [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Shlomi Fish &lt;shlomif [...] shlomifish.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Alexander,

On Thu, 26 Oct 2017 15:31:21 -0400
&#34;Alexander Bluhm via RT&#34; &lt;bug-XML-LibXML@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: XML-LibXML
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=123379">https://rt.cpan.org/Ticket/Display.html?id=123379</a></span> &gt;
&gt; 
&gt; On Thu Oct 26 08:26:17 2017, shlomif@shlomifish.org wrote:
<div class="message-stanza open">&gt; &gt; I am tempted to believe this code should not have worked properly
&gt; &gt; in the first place, and that it was an accidental feature that
&gt; &gt; it did.  
</div>&gt; 
&gt; I have no strong opinion whether XML-LibXML or Net-DAV-Server is
&gt; wrong.  My goal is to update the Perl modules in the OpenBSD ports
&gt; tree, but I see tests failing when doing that.  I started with a
&gt; bug report here as the update to XML-LibXML-2.0130 made the test
&gt; fail.  I seems strange to me that XML::LibXML cannot parse its own
&gt; output.  If the API is misused by Net-DAV-Server, XML-LibXML should
&gt; report an error when creating the document.
</div>
You are right.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
<div class="message-stanza open">&gt; &gt; Can you provide a <span class="clickylink"><a target="new" rel="nofollow" href="http://sscce.org/">http://sscce.org/</a></span> for it as a Test::More test
&gt; &gt; script and attach it here?  
</div>&gt; 
&gt; This script passes with XML-LibXML-2.0129 and fails with 2.0131:
&gt; 
&gt; use strict;
&gt; use warnings;
&gt; use XML::LibXML;
&gt; use Test::More tests =&gt; 8;
&gt; 
&gt; ok&#40;my $doc = XML::LibXML::Document-&gt;new&#40;&#41;, &#39;new document&#39;&#41;;
&gt; ok&#40;my $elm = $doc-&gt;createElement&#40;&#39;D:element&#39;&#41;, &#39;create element&#39;&#41;;
&gt; ok&#40;$elm-&gt;setAttribute&#40;&#39;xmlns:D&#39;, &#39;attribute&#39;&#41;, &#39;set attribute&#39;&#41;;
&gt; $doc-&gt;setDocumentElement&#40;$elm&#41;; # XXX does not return true if successful
&gt; ok&#40;my $str = $doc-&gt;toString&#40;0&#41;, &#39;to string&#39;&#41;;
&gt; ok&#40;my $par = XML::LibXML-&gt;new&#40;&#41;, &#39;new parser&#39;&#41;;
&gt; ok&#40; eval { $par-&gt;parse_string&#40;$str&#41; } , &#39;parse string&#39;&#41;;
&gt; is&#40;$@, &#34;&#34;, &#39;parse error&#39;&#41;;
&gt; like&#40;$str, qr{&lt;D:element xmlns:D=&#34;attribute&#34;/&gt;}, &#39;xml element&#39;&#41;;
</div>
Many thanks! I shall investigate.

-- 
-----------------------------------------------------------------
Shlomi Fish       <span class="clickylink"><a target="new" rel="nofollow" href="http://www.shlomifish.org/">http://www.shlomifish.org/</a></span>
The Case for File Swapping - <span class="clickylink"><a target="new" rel="nofollow" href="http://shlom.in/file-swap">http://shlom.in/file-swap</a></span>

Rindolf is the Evil twin brother of Rudolph and Randolph, Santa’s goody-two-
shoes reindeer, who are among his arch-enemies. He is also one of the
cornerstones of the Evil Reindeer Evil World Domination Evil Conspiracy, which
aims to spread Evil in general and Reindeer Evil in particular around the world.

Please reply to list if it&#39;s a mailing list post - <span class="clickylink"><a target="new" rel="nofollow" href="http://shlom.in/reply">http://shlom.in/reply</a></span> .
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;28&nbsp;09:51:27&nbsp;2017</span>
    <span class="description">SREZIC [...] cpan.org -  Dependency by ticket #123423 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;28&nbsp;09:52:01&nbsp;2017</span>
    <span class="description">SREZIC [...] cpan.org -  Dependency by ticket #123424 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;28&nbsp;09:52:01&nbsp;2017</span>
    <span class="description">SREZIC [...] cpan.org -  Dependency by ticket #123431 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;28&nbsp;09:52:52&nbsp;2017</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> shlomif [...] shlomifish.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2017-10-27 04:05:41, shlomif@shlomifish.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Alexander,
&gt; 
&gt; On Thu, 26 Oct 2017 15:31:21 -0400
&gt; &#34;Alexander Bluhm via RT&#34; &lt;bug-XML-LibXML@rt.cpan.org&gt; wrote:
&gt; 
<div class="message-stanza open">&gt; &gt;        Queue: XML-LibXML
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=123379">https://rt.cpan.org/Ticket/Display.html?id=123379</a></span> &gt;
&gt; &gt; 
&gt; &gt; On Thu Oct 26 08:26:17 2017, shlomif@shlomifish.org wrote:
<div class="message-stanza open">&gt; &gt; &gt; I am tempted to believe this code should not have worked properly
&gt; &gt; &gt; in the first place, and that it was an accidental feature that
&gt; &gt; &gt; it did.  
</div>&gt; &gt; 
&gt; &gt; I have no strong opinion whether XML-LibXML or Net-DAV-Server is
&gt; &gt; wrong.  My goal is to update the Perl modules in the OpenBSD ports
&gt; &gt; tree, but I see tests failing when doing that.  I started with a
&gt; &gt; bug report here as the update to XML-LibXML-2.0130 made the test
&gt; &gt; fail.  I seems strange to me that XML::LibXML cannot parse its own
&gt; &gt; output.  If the API is misused by Net-DAV-Server, XML-LibXML should
&gt; &gt; report an error when creating the document.
</div>&gt; 
&gt; You are right.
&gt; 
<div class="message-stanza open">&gt; &gt; 
<div class="message-stanza open">&gt; &gt; &gt; Can you provide a <span class="clickylink"><a target="new" rel="nofollow" href="http://sscce.org/">http://sscce.org/</a></span> for it as a Test::More test
&gt; &gt; &gt; script and attach it here?  
</div>&gt; &gt; 
&gt; &gt; This script passes with XML-LibXML-2.0129 and fails with 2.0131:
&gt; &gt; 
&gt; &gt; use strict;
&gt; &gt; use warnings;
&gt; &gt; use XML::LibXML;
&gt; &gt; use Test::More tests =&gt; 8;
&gt; &gt; 
&gt; &gt; ok&#40;my $doc = XML::LibXML::Document-&gt;new&#40;&#41;, &#39;new document&#39;&#41;;
&gt; &gt; ok&#40;my $elm = $doc-&gt;createElement&#40;&#39;D:element&#39;&#41;, &#39;create element&#39;&#41;;
&gt; &gt; ok&#40;$elm-&gt;setAttribute&#40;&#39;xmlns:D&#39;, &#39;attribute&#39;&#41;, &#39;set attribute&#39;&#41;;
&gt; &gt; $doc-&gt;setDocumentElement&#40;$elm&#41;; # XXX does not return true if successful
&gt; &gt; ok&#40;my $str = $doc-&gt;toString&#40;0&#41;, &#39;to string&#39;&#41;;
&gt; &gt; ok&#40;my $par = XML::LibXML-&gt;new&#40;&#41;, &#39;new parser&#39;&#41;;
&gt; &gt; ok&#40; eval { $par-&gt;parse_string&#40;$str&#41; } , &#39;parse string&#39;&#41;;
&gt; &gt; is&#40;$@, &#34;&#34;, &#39;parse error&#39;&#41;;
&gt; &gt; like&#40;$str, qr{&lt;D:element xmlns:D=&#34;attribute&#34;/&gt;}, &#39;xml element&#39;&#41;;
</div>&gt; 
&gt; Many thanks! I shall investigate.
&gt; 
</div>
I found a number of other CPAN distributions broken by the recent XML::LibXML versions. See the RT links.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;28&nbsp;14:27:02&nbsp;2017</span>
    <span class="description">shlomif [...] shlomifish.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #123379] XML Test in Net-DAV-Server broken</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 28 Oct 2017 21:00:37 +0300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-LibXML [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Shlomi Fish &lt;shlomif [...] shlomifish.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, 27 Oct 2017 04:05:43 -0400
&#34;shlomif@shlomifish.org via RT&#34; &lt;bug-XML-LibXML@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: XML-LibXML
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=123379">https://rt.cpan.org/Ticket/Display.html?id=123379</a></span> &gt;
&gt; 
&gt; Hi Alexander,
&gt; 
&gt; On Thu, 26 Oct 2017 15:31:21 -0400
&gt; &#34;Alexander Bluhm via RT&#34; &lt;bug-XML-LibXML@rt.cpan.org&gt; wrote:
&gt; 
<div class="message-stanza open">&gt; &gt;        Queue: XML-LibXML
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=123379">https://rt.cpan.org/Ticket/Display.html?id=123379</a></span> &gt;
&gt; &gt; 
&gt; &gt; On Thu Oct 26 08:26:17 2017, shlomif@shlomifish.org wrote:  
<div class="message-stanza open">&gt; &gt; &gt; I am tempted to believe this code should not have worked properly
&gt; &gt; &gt; in the first place, and that it was an accidental feature that
&gt; &gt; &gt; it did.    
</div>&gt; &gt; 
&gt; &gt; I have no strong opinion whether XML-LibXML or Net-DAV-Server is
&gt; &gt; wrong.  My goal is to update the Perl modules in the OpenBSD ports
&gt; &gt; tree, but I see tests failing when doing that.  I started with a
&gt; &gt; bug report here as the update to XML-LibXML-2.0130 made the test
&gt; &gt; fail.  I seems strange to me that XML::LibXML cannot parse its own
&gt; &gt; output.  If the API is misused by Net-DAV-Server, XML-LibXML should
&gt; &gt; report an error when creating the document.  
</div>&gt; 
&gt; You are right.
&gt; 
<div class="message-stanza open">&gt; &gt;   
<div class="message-stanza open">&gt; &gt; &gt; Can you provide a <span class="clickylink"><a target="new" rel="nofollow" href="http://sscce.org/">http://sscce.org/</a></span> for it as a Test::More test
&gt; &gt; &gt; script and attach it here?    
</div>&gt; &gt; 
&gt; &gt; This script passes with XML-LibXML-2.0129 and fails with 2.0131:
&gt; &gt; 
&gt; &gt; use strict;
&gt; &gt; use warnings;
&gt; &gt; use XML::LibXML;
&gt; &gt; use Test::More tests =&gt; 8;
&gt; &gt; 
&gt; &gt; ok&#40;my $doc = XML::LibXML::Document-&gt;new&#40;&#41;, &#39;new document&#39;&#41;;
&gt; &gt; ok&#40;my $elm = $doc-&gt;createElement&#40;&#39;D:element&#39;&#41;, &#39;create element&#39;&#41;;
&gt; &gt; ok&#40;$elm-&gt;setAttribute&#40;&#39;xmlns:D&#39;, &#39;attribute&#39;&#41;, &#39;set attribute&#39;&#41;;
&gt; &gt; $doc-&gt;setDocumentElement&#40;$elm&#41;; # XXX does not return true if successful
&gt; &gt; ok&#40;my $str = $doc-&gt;toString&#40;0&#41;, &#39;to string&#39;&#41;;
&gt; &gt; ok&#40;my $par = XML::LibXML-&gt;new&#40;&#41;, &#39;new parser&#39;&#41;;
&gt; &gt; ok&#40; eval { $par-&gt;parse_string&#40;$str&#41; } , &#39;parse string&#39;&#41;;
&gt; &gt; is&#40;$@, &#34;&#34;, &#39;parse error&#39;&#41;;
&gt; &gt; like&#40;$str, qr{&lt;D:element xmlns:D=&#34;attribute&#34;/&gt;}, &#39;xml element&#39;&#41;;  
</div>&gt; 
&gt; Many thanks! I shall investigate.
&gt; 
</div>
Hi!

please try again with 2.0132 - I reverted a commit that broke your test while
adding your test file as a regression test for the future. Sorry for your
trouble.



-- 
-----------------------------------------------------------------
Shlomi Fish       <span class="clickylink"><a target="new" rel="nofollow" href="http://www.shlomifish.org/">http://www.shlomifish.org/</a></span>
Free &#40;Creative Commons&#41; Music Downloads, Reviews and more - <span class="clickylink"><a target="new" rel="nofollow" href="http://jamendo.com/">http://jamendo.com/</a></span>

I often wonder why I hang out with so many people who are so pedantic. And
then I remember — because they are so pedantic.
    — an Israeli Perl Monger

Please reply to list if it&#39;s a mailing list post - <span class="clickylink"><a target="new" rel="nofollow" href="http://shlom.in/reply">http://shlom.in/reply</a></span> .
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;28&nbsp;14:45:04&nbsp;2017</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> shlomif [...] shlomifish.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2017-10-28 14:27:02, shlomif@shlomifish.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri, 27 Oct 2017 04:05:43 -0400
&gt; &#34;shlomif@shlomifish.org via RT&#34; &lt;bug-XML-LibXML@rt.cpan.org&gt; wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; Queue: XML-LibXML
&gt; &gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=123379">https://rt.cpan.org/Ticket/Display.html?id=123379</a></span> &gt;
&gt; &gt;
&gt; &gt; Hi Alexander,
&gt; &gt;
&gt; &gt; On Thu, 26 Oct 2017 15:31:21 -0400
&gt; &gt; &#34;Alexander Bluhm via RT&#34; &lt;bug-XML-LibXML@rt.cpan.org&gt; wrote:
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; Queue: XML-LibXML
&gt; &gt; &gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=123379">https://rt.cpan.org/Ticket/Display.html?id=123379</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; On Thu Oct 26 08:26:17 2017, shlomif@shlomifish.org wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; I am tempted to believe this code should not have worked properly
&gt; &gt; &gt; &gt; in the first place, and that it was an accidental feature that
&gt; &gt; &gt; &gt;     it did.
</div>&gt; &gt; &gt;
&gt; &gt; &gt; I have no strong opinion whether XML-LibXML or Net-DAV-Server is
&gt; &gt; &gt; wrong.  My goal is to update the Perl modules in the OpenBSD ports
&gt; &gt; &gt; tree, but I see tests failing when doing that.  I started with a
&gt; &gt; &gt; bug report here as the update to XML-LibXML-2.0130 made the test
&gt; &gt; &gt; fail.  I seems strange to me that XML::LibXML cannot parse its own
&gt; &gt; &gt; output.  If the API is misused by Net-DAV-Server, XML-LibXML should
&gt; &gt; &gt;   report an error when creating the document.
</div>&gt; &gt;
&gt; &gt; You are right.
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; Can you provide a <span class="clickylink"><a target="new" rel="nofollow" href="http://sscce.org/">http://sscce.org/</a></span> for it as a Test::More test
&gt; &gt; &gt; &gt;     script and attach it here?
</div>&gt; &gt; &gt;
&gt; &gt; &gt; This script passes with XML-LibXML-2.0129 and fails with 2.0131:
&gt; &gt; &gt;
&gt; &gt; &gt; use strict;
&gt; &gt; &gt; use warnings;
&gt; &gt; &gt; use XML::LibXML;
&gt; &gt; &gt; use Test::More tests =&gt; 8;
&gt; &gt; &gt;
&gt; &gt; &gt; ok&#40;my $doc = XML::LibXML::Document-&gt;new&#40;&#41;, &#39;new document&#39;&#41;;
&gt; &gt; &gt; ok&#40;my $elm = $doc-&gt;createElement&#40;&#39;D:element&#39;&#41;, &#39;create element&#39;&#41;;
&gt; &gt; &gt; ok&#40;$elm-&gt;setAttribute&#40;&#39;xmlns:D&#39;, &#39;attribute&#39;&#41;, &#39;set attribute&#39;&#41;;
&gt; &gt; &gt; $doc-&gt;setDocumentElement&#40;$elm&#41;; # XXX does not return true if
&gt; &gt; &gt; successful
&gt; &gt; &gt; ok&#40;my $str = $doc-&gt;toString&#40;0&#41;, &#39;to string&#39;&#41;;
&gt; &gt; &gt; ok&#40;my $par = XML::LibXML-&gt;new&#40;&#41;, &#39;new parser&#39;&#41;;
&gt; &gt; &gt; ok&#40; eval { $par-&gt;parse_string&#40;$str&#41; } , &#39;parse string&#39;&#41;;
&gt; &gt; &gt; is&#40;$@, &#34;&#34;, &#39;parse error&#39;&#41;;
&gt; &gt; &gt;   like&#40;$str, qr{&lt;D:element xmlns:D=&#34;attribute&#34;/&gt;}, &#39;xml element&#39;&#41;;
</div>&gt; &gt;
&gt; &gt; Many thanks! I shall investigate.
&gt; &gt;
</div>&gt; 
&gt; Hi!
&gt; 
&gt; please try again with 2.0132 - I reverted a commit that broke your
&gt; test while
&gt; adding your test file as a regression test for the future. Sorry for
&gt; your
&gt; trouble.
</div>
2.0132 indeed looks better --- the four broken distributions I found so far work again:
- Net-DAV-Server-1.305
- Tree-Template-Declare-0.7
- Bio-Phylo-0.58
- PRANG-0.20
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;28&nbsp;15:58:28&nbsp;2017</span>
    <span class="description">shlomif [...] shlomifish.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #123379] XML Test in Net-DAV-Server broken</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 28 Oct 2017 22:06:25 +0300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-LibXML [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Shlomi Fish &lt;shlomif [...] shlomifish.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, 28 Oct 2017 14:45:06 -0400
&#34;Slaven_Rezic via RT&#34; &lt;bug-XML-LibXML@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: XML-LibXML
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=123379">https://rt.cpan.org/Ticket/Display.html?id=123379</a></span> &gt;
&gt; 
&gt; On 2017-10-28 14:27:02, shlomif@shlomifish.org wrote:
<div class="message-stanza open">&gt; &gt; On Fri, 27 Oct 2017 04:05:43 -0400
&gt; &gt; &#34;shlomif@shlomifish.org via RT&#34; &lt;bug-XML-LibXML@rt.cpan.org&gt; wrote:
&gt; &gt;   
<div class="message-stanza open">&gt; &gt; &gt; Queue: XML-LibXML
&gt; &gt; &gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=123379">https://rt.cpan.org/Ticket/Display.html?id=123379</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Hi Alexander,
&gt; &gt; &gt;
&gt; &gt; &gt; On Thu, 26 Oct 2017 15:31:21 -0400
&gt; &gt; &gt; &#34;Alexander Bluhm via RT&#34; &lt;bug-XML-LibXML@rt.cpan.org&gt; wrote:
&gt; &gt; &gt;  
<div class="message-stanza open">&gt; &gt; &gt; &gt; Queue: XML-LibXML
&gt; &gt; &gt; &gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=123379">https://rt.cpan.org/Ticket/Display.html?id=123379</a></span> &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; On Thu Oct 26 08:26:17 2017, shlomif@shlomifish.org wrote:  
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; I am tempted to believe this code should not have worked properly
&gt; &gt; &gt; &gt; &gt; in the first place, and that it was an accidental feature that
&gt; &gt; &gt; &gt; &gt;     it did.  
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I have no strong opinion whether XML-LibXML or Net-DAV-Server is
&gt; &gt; &gt; &gt; wrong.  My goal is to update the Perl modules in the OpenBSD ports
&gt; &gt; &gt; &gt; tree, but I see tests failing when doing that.  I started with a
&gt; &gt; &gt; &gt; bug report here as the update to XML-LibXML-2.0130 made the test
&gt; &gt; &gt; &gt; fail.  I seems strange to me that XML::LibXML cannot parse its own
&gt; &gt; &gt; &gt; output.  If the API is misused by Net-DAV-Server, XML-LibXML should
&gt; &gt; &gt; &gt;   report an error when creating the document.  
</div>&gt; &gt; &gt;
&gt; &gt; &gt; You are right.
&gt; &gt; &gt;  
<div class="message-stanza open">&gt; &gt; &gt; &gt;  
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; Can you provide a <span class="clickylink"><a target="new" rel="nofollow" href="http://sscce.org/">http://sscce.org/</a></span> for it as a Test::More test
&gt; &gt; &gt; &gt; &gt;     script and attach it here?  
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; This script passes with XML-LibXML-2.0129 and fails with 2.0131:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; use strict;
&gt; &gt; &gt; &gt; use warnings;
&gt; &gt; &gt; &gt; use XML::LibXML;
&gt; &gt; &gt; &gt; use Test::More tests =&gt; 8;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; ok&#40;my $doc = XML::LibXML::Document-&gt;new&#40;&#41;, &#39;new document&#39;&#41;;
&gt; &gt; &gt; &gt; ok&#40;my $elm = $doc-&gt;createElement&#40;&#39;D:element&#39;&#41;, &#39;create element&#39;&#41;;
&gt; &gt; &gt; &gt; ok&#40;$elm-&gt;setAttribute&#40;&#39;xmlns:D&#39;, &#39;attribute&#39;&#41;, &#39;set attribute&#39;&#41;;
&gt; &gt; &gt; &gt; $doc-&gt;setDocumentElement&#40;$elm&#41;; # XXX does not return true if
&gt; &gt; &gt; &gt; successful
&gt; &gt; &gt; &gt; ok&#40;my $str = $doc-&gt;toString&#40;0&#41;, &#39;to string&#39;&#41;;
&gt; &gt; &gt; &gt; ok&#40;my $par = XML::LibXML-&gt;new&#40;&#41;, &#39;new parser&#39;&#41;;
&gt; &gt; &gt; &gt; ok&#40; eval { $par-&gt;parse_string&#40;$str&#41; } , &#39;parse string&#39;&#41;;
&gt; &gt; &gt; &gt; is&#40;$@, &#34;&#34;, &#39;parse error&#39;&#41;;
&gt; &gt; &gt; &gt;   like&#40;$str, qr{&lt;D:element xmlns:D=&#34;attribute&#34;/&gt;}, &#39;xml element&#39;&#41;;  
</div>&gt; &gt; &gt;
&gt; &gt; &gt; Many thanks! I shall investigate.
&gt; &gt; &gt;  
</div>&gt; &gt; 
&gt; &gt; Hi!
&gt; &gt; 
&gt; &gt; please try again with 2.0132 - I reverted a commit that broke your
&gt; &gt; test while
&gt; &gt; adding your test file as a regression test for the future. Sorry for
&gt; &gt; your
&gt; &gt; trouble.  
</div>&gt; 
&gt; 2.0132 indeed looks better --- the four broken distributions I found so far
&gt; work again:
&gt; - Net-DAV-Server-1.305
&gt; - Tree-Template-Declare-0.7
&gt; - Bio-Phylo-0.58
&gt; - PRANG-0.20
</div>
Fabulous! Thanks for letting me know.

-- 
-----------------------------------------------------------------
Shlomi Fish       <span class="clickylink"><a target="new" rel="nofollow" href="http://www.shlomifish.org/">http://www.shlomifish.org/</a></span>
Freecell Solver - <span class="clickylink"><a target="new" rel="nofollow" href="http://fc-solve.shlomifish.org/">http://fc-solve.shlomifish.org/</a></span>

A skyscraper once jumped off Chuck Norris. It didn&#39;t survive.
&#40;By Andrew Brehm&#41; — <span class="clickylink"><a target="new" rel="nofollow" href="http://www.shlomifish.org/humour/bits/facts/Chuck-Norris/">http://www.shlomifish.org/humour/bits/facts/Chuck-Norris/</a></span>

Please reply to list if it&#39;s a mailing list post - <span class="clickylink"><a target="new" rel="nofollow" href="http://shlom.in/reply">http://shlom.in/reply</a></span> .
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;29&nbsp;17:33:24&nbsp;2017</span>
    <span class="description">alexander.bluhm [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> alexander.bluhm [...] gmx.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Oct 28 14:27:02 2017, shlomif@shlomifish.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; please try again with 2.0132
</div>
This version works fine for me, I have updated it into the OpenBSD
ports tree.

Thanks for the quick fix.

bluhm
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;30&nbsp;03:22:26&nbsp;2017</span>
    <span class="description">shlomif [...] shlomifish.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #123379] XML Test in Net-DAV-Server broken</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 30 Oct 2017 08:53:33 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-LibXML [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Shlomi Fish &lt;shlomif [...] shlomifish.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun, 29 Oct 2017 17:33:25 -0400
&#34;Alexander Bluhm via RT&#34; &lt;bug-XML-LibXML@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: XML-LibXML
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=123379">https://rt.cpan.org/Ticket/Display.html?id=123379</a></span> &gt;
&gt; 
&gt; On Sat Oct 28 14:27:02 2017, shlomif@shlomifish.org wrote:
<div class="message-stanza open">&gt; &gt; please try again with 2.0132  
</div>&gt; 
&gt; This version works fine for me, I have updated it into the OpenBSD
&gt; ports tree.
&gt; 
&gt; Thanks for the quick fix.
&gt; 
</div>
Thanks for the test script and  testing this version and for the report. And
you are welcome.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; bluhm
</div>


-- 
-----------------------------------------------------------------
Shlomi Fish       <span class="clickylink"><a target="new" rel="nofollow" href="http://www.shlomifish.org/">http://www.shlomifish.org/</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://ccmixter.org/files/destinazione_altrove/49997">http://ccmixter.org/files/destinazione_altrove/49997</a></span> - “Paint The Sky”

Live as if you were to die tomorrow. Learn as if you were to live forever.
    — <span class="clickylink"><a target="new" rel="nofollow" href="http://en.wikiquote.org/wiki/Mohandas_Gandhi">http://en.wikiquote.org/wiki/Mohandas_Gandhi</a></span> &#40;Disputed&#41;

Please reply to list if it&#39;s a mailing list post - <span class="clickylink"><a target="new" rel="nofollow" href="http://shlom.in/reply">http://shlom.in/reply</a></span> .
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
