<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #25832 for Mac-Glue: Mac::Glue eating up all the memory?</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #25832 for Mac-Glue: Mac::Glue eating up all the memory?</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Mac-Glue">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Mac-Glue">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Mac-Glue">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Mac-Glue">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Mac-Glue">Mac-Glue CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">25832</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Mac-Glue">Mac-Glue</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jelte [...] liebrand.co.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19756-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19757-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=25832">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-302918" href="/Public/Bug/Display.html?id=25832#txn-302918">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;26&nbsp;17:42:47&nbsp;2007</span>
    <span class="description">jelte [...] liebrand.co.uk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Mac::Glue eating up all the memory?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 26 Mar 2007 22:43:04 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Chris_Nandor via RT &lt;bug-Mac-Glue [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jelte Liebrand &lt;jelte [...] liebrand.co.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/302918/137441/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/137441">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">HI there,

Remember me?  We emailed a while ago about some script i was putting  
together using Mac::Glue, and more specifically Mac::EyeTV.

Basically everything has been working fine, but recently my script  
&#40;which runs nightly&#41; got itself in a mess. Basically this bit of code:

#!/usr/bin/perl -w

use strict;
use Mac::EyeTV;
use Mac::Glue;
use Mac::AppleEvents::Simple 1.18;

my $eyetv = Mac::EyeTV-&gt;new&#40;&#41;;
my @eyeTvChannelList = $eyetv-&gt;channels;

will just gobble up about 1 GB of memory before running completely  
out of memory. It does so on the last line &#40;getting the channels&#41;.  
Now this used to work fine, so perhaps EyeTV has got some internal  
bits wrong or something, but inside EyeTV everything is fine. Still  
the same number of channels and all is well. Btw, there are only  
about 88 channels or so &#40;most of which are disabled&#41;.

I reinstalled eyetv completely and then things worked again. But then  
a few weeks later, bam: same story...

I tried to debug through the glue code, but as the comment says:  
&#34;here be demons&#34;, no sh*t... that stuff is a little too hardcore for  
me to workout where the memory problems are occurring! :-&#41;

Would you have any idea where I should look to work out what is going  
on?

Any help would be appreciated, since I obviously dont want to re- 
install EyeTV every couple of weeks...

/Cheers,
Jelte
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-303038" href="/Public/Bug/Display.html?id=25832#txn-303038">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;26&nbsp;23:11:40&nbsp;2007</span>
    <span class="description">cnandor [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> undisclosed-recipients: ;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #25832] Mac::Glue eating up all the memory?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 26 Mar 2007 20:03:40 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Mac-Glue [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Chris Nandor &lt;cnandor [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/303038/137518/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/137518">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 651b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I wonder if maybe there&#39;s a recursive loop in Mac::EyeTV or something?  Is
this Mac::EyeTV 0.30?  I see no problem there.

Did you try the same code, but in AppleScript?  That might show if the
problem is in EyeTV.

You can see the actual Apple events using the aedebug script:

        <span class="clickylink"><a target="new" rel="nofollow" href="http://dev.macperl.org/files/scripts/aedebug">http://dev.macperl.org/files/scripts/aedebug</a></span>

  % aedebug perl testscript.plx

You can use that with AppleScript too:

  % aedebug osascript testscript.scpt

Compare the results etc.  Hope that helps as a starting point ...

-- 
Chris Nandor                      pudge@pobox.com    <span class="clickylink"><a target="new" rel="nofollow" href="http://pudge.net/">http://pudge.net/</a></span>
Open Source Technology Group       pudge@ostg.com     <span class="clickylink"><a target="new" rel="nofollow" href="http://ostg.com/">http://ostg.com/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-303039" href="/Public/Bug/Display.html?id=25832#txn-303039">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;26&nbsp;23:11:41&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-306942" href="/Public/Bug/Display.html?id=25832#txn-306942">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;06&nbsp;11:04:55&nbsp;2007</span>
    <span class="description">jelte [...] liebrand.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #25832] Mac::Glue eating up all the memory?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 6 Apr 2007 16:03:57 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Mac-Glue [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jelte Liebrand &lt;jelte [...] liebrand.co.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/306942/139501/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/139501">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hiya,

Ok, it&#39;s taken a bit, but I think I&#39;ve gotten a little bit further on  
this memory problem. First of all some things I found:

1- If I just run my script on itself, things work fine
2- If I run it a gazillion times, it still works fine
3- If I run it as a daily cron job, then it the first day it works  
fine, but the second day &#40;and subsequent days it seems&#41; it gets  
itself in to this memory hogging problem
4- Once it&#39;s in this odd state I can run my example script &#40;the one I  
mailed you before, where it merely gets an array of channels from  
EyeTV&#41; and that will show the problem: perl will start to hogg about  
1GB of memory
5- If I close EyeTV and then run that script, perl still hogs that  
memory without EyeTV even being started... ie it hasn&#39;t even gotten  
to the point of doing any real applescript towards EyeTV yet.
6- if I run applescript to do the same task, that works, but the perl  
script still fails.

So.... I&#39;m thinking that the Mac::Glue might be allocating some  
object or something, and that because the script is run from cron,  
that memory doesn&#39;t get released / reset. Thus the next day that you  
run the script, some values in that object are still set. Making it  
go all hay wire.

I know this is all a pretty high level problem description, but can  
you think of anything that would make things go all wrong if you were  
to run perl scipts that use Mac::Glue from a cron task?

/Cheers,
Jelte
Ps. Happy Easter!



On 27 Mar 2007, at 04:11, Chris_Nandor via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=25832">http://rt.cpan.org/Ticket/Display.html?id=25832</a></span> &gt;
&gt;
&gt; I wonder if maybe there&#39;s a recursive loop in Mac::EyeTV or  
&gt; something?  Is
&gt; this Mac::EyeTV 0.30?  I see no problem there.
&gt;
&gt; Did you try the same code, but in AppleScript?  That might show if the
&gt; problem is in EyeTV.
&gt;
&gt; You can see the actual Apple events using the aedebug script:
&gt;
&gt;       <span class="clickylink"><a target="new" rel="nofollow" href="http://dev.macperl.org/files/scripts/aedebug">http://dev.macperl.org/files/scripts/aedebug</a></span>
&gt;
&gt;   % aedebug perl testscript.plx
&gt;
&gt; You can use that with AppleScript too:
&gt;
&gt;   % aedebug osascript testscript.scpt
&gt;
&gt; Compare the results etc.  Hope that helps as a starting point ...
&gt;
&gt; -- 
&gt; Chris Nandor                      pudge@pobox.com    <span class="clickylink"><a target="new" rel="nofollow" href="http://pudge.net/">http://pudge.net/</a></span>
&gt; Open Source Technology Group       pudge@ostg.com     <span class="clickylink"><a target="new" rel="nofollow" href="http://ostg.com/">http://ostg.com/</a></span>
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-306979" href="/Public/Bug/Display.html?id=25832#txn-306979">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;06&nbsp;11:52:44&nbsp;2007</span>
    <span class="description">jelte [...] liebrand.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #25832] Mac::Glue eating up all the memory?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 6 Apr 2007 16:52:26 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Chris_Nandor via RT &lt;bug-Mac-Glue [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jelte Liebrand &lt;jelte [...] liebrand.co.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/306979/139532/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/139532">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">After a little more investigation, and venturing in to the perl  
debugger, I&#39;ve found the eternal loop it seems to get itself in. But  
it doesn&#39;t really tell me much.

In /Library/Perl/5.8.6/darwin-thread-multi-2level/Mac/Processes.pm  
line 207:
sub NEXTKEY {
        my&#40;$self,$psn&#41; = @_;
        
        Mac::Processes::GetNextProcess&#40;$psn&#41;;
}

Not quite sure it is actually in a loop, but the $psn is  2695102466,  
trying to execute the GetNextProcess seems to just hang / gobble up  
memory. Ctrl-c in the debugger stops it, but stepping on puts it in  
the same place again....

Could it be that the Mac::Glue is trying to find the process EyeTV  
and it fails somehow?  This is all still as a resuly of    my @bla =  
$eyeTV-&gt;channels;

/J

On 6 Apr 2007, at 16:03, Jelte Liebrand wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hiya,
&gt;
&gt; Ok, it&#39;s taken a bit, but I think I&#39;ve gotten a little bit further  
&gt; on this memory problem. First of all some things I found:
&gt;
&gt; 1- If I just run my script on itself, things work fine
&gt; 2- If I run it a gazillion times, it still works fine
&gt; 3- If I run it as a daily cron job, then it the first day it works  
&gt; fine, but the second day &#40;and subsequent days it seems&#41; it gets  
&gt; itself in to this memory hogging problem
&gt; 4- Once it&#39;s in this odd state I can run my example script &#40;the one  
&gt; I mailed you before, where it merely gets an array of channels from  
&gt; EyeTV&#41; and that will show the problem: perl will start to hogg  
&gt; about 1GB of memory
&gt; 5- If I close EyeTV and then run that script, perl still hogs that  
&gt; memory without EyeTV even being started... ie it hasn&#39;t even gotten  
&gt; to the point of doing any real applescript towards EyeTV yet.
&gt; 6- if I run applescript to do the same task, that works, but the  
&gt; perl script still fails.
&gt;
&gt; So.... I&#39;m thinking that the Mac::Glue might be allocating some  
&gt; object or something, and that because the script is run from cron,  
&gt; that memory doesn&#39;t get released / reset. Thus the next day that  
&gt; you run the script, some values in that object are still set.  
&gt; Making it go all hay wire.
&gt;
&gt; I know this is all a pretty high level problem description, but can  
&gt; you think of anything that would make things go all wrong if you  
&gt; were to run perl scipts that use Mac::Glue from a cron task?
&gt;
&gt; /Cheers,
&gt; Jelte
&gt; Ps. Happy Easter!
&gt;
&gt;
&gt;
&gt; On 27 Mar 2007, at 04:11, Chris_Nandor via RT wrote:
&gt;
<div class="message-stanza open">&gt;&gt;
&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=25832">http://rt.cpan.org/Ticket/Display.html?id=25832</a></span> &gt;
&gt;&gt;
&gt;&gt; I wonder if maybe there&#39;s a recursive loop in Mac::EyeTV or  
&gt;&gt; something?  Is
&gt;&gt; this Mac::EyeTV 0.30?  I see no problem there.
&gt;&gt;
&gt;&gt; Did you try the same code, but in AppleScript?  That might show if  
&gt;&gt; the
&gt;&gt; problem is in EyeTV.
&gt;&gt;
&gt;&gt; You can see the actual Apple events using the aedebug script:
&gt;&gt;
&gt;&gt;      <span class="clickylink"><a target="new" rel="nofollow" href="http://dev.macperl.org/files/scripts/aedebug">http://dev.macperl.org/files/scripts/aedebug</a></span>
&gt;&gt;
&gt;&gt;   % aedebug perl testscript.plx
&gt;&gt;
&gt;&gt; You can use that with AppleScript too:
&gt;&gt;
&gt;&gt;   % aedebug osascript testscript.scpt
&gt;&gt;
&gt;&gt; Compare the results etc.  Hope that helps as a starting point ...
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; Chris Nandor                      pudge@pobox.com    http:// 
&gt;&gt; pudge.net/
&gt;&gt; Open Source Technology Group       pudge@ostg.com     http:// 
&gt;&gt; ostg.com/
&gt;&gt;
</div>&gt;
</div></div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.294073</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
