<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #119307 for Inline-Java: perl Makefile.PL reports &#34;/usr/bin/dlltool: Can&#39;t open def file: jvm.def&#34;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #119307 for Inline-Java: perl Makefile.PL reports &#34;/usr/bin/dlltool: Can&#39;t open def file: jvm.def&#34;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Inline-Java/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Inline-Java/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Inline-Java/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Inline-Java/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Inline-Java">Inline-Java CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">119307</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Inline-Java/Active/">Inline-Java</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
MPERRY [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-16926-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.58    </td>
  </tr>
  <tr id="CF-16927-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;19&nbsp;13:37:08&nbsp;2016</span>
    <span class="description">MPERRY [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> perl Makefile.PL reports &#34;/usr/bin/dlltool: Can&#39;t open def file:
 jvm.def&#34;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m trying to build Inline::Java 0.58 on Cygwin with Perl 5.22.

When I run &#34;perl Makefile.PL&#34; part of the output says:

/usr/bin/dlltool: Can&#39;t open def file: jvm.def
Error attempting to create &#39;/cygdrive/c/PROGRA~2/Java/jdk1.8.0_112/lib/libjvm.dll.a&#39;


I&#39;m also worried about it saying that it&#39;s attempting to write a file to /cygdrive/c/PROGRA~2/Java/jdk1.8.0_112 as that&#39;s a protected directory and it won&#39;t have permission to write to there &#40;nor should it&#41;.


Here is the full output:
mperry@mperry-PC:~/Inline-Java-0.58$ echo $JAVA_HOME
/cygdrive/c/PROGRA~2/Java/jdk1.8.0_112
mperry@mperry-PC:~/Inline-Java-0.58$ perl Makefile.PL

Welcome to the Inline::Java installation procedure.

Using /cygdrive/c/PROGRA~2/Java/jdk1.8.0_112 as J2SDK directory.

Default J2SDK for Inline::Java will be &#39;/cygdrive/c/PROGRA~2/Java/jdk1.8.0_112&#39;.
See module documentation for information on how to use a different J2SDK
or change this default value.

Checking if your kit is complete...
Looks good

Inline::Java can use a JNI extension that allows the Java Virtual Machine
&#40;JVM&#41; to be dynamically linked with Perl instead of running as a separate
process. The use of this extension is optional, and building it still
allows Inline::Java to run the JVM in the default &#40;separate process&#41;
fashion.
Note: You need a C compiler to build the extension.
Do you wish to build the JNI extension? [y]

Building JNI extension.

1&#41; /cygdrive/c/PROGRA~2/Java/jdk1.8.0_112/jre/bin/server
2&#41; /cygdrive/c/PROGRA~2/Java/jdk1.8.0_112/jre/bin/client
Please select from the above list which &#39;jvm.dll&#39; to use: [2]

Creating &#39;/cygdrive/c/PROGRA~2/Java/jdk1.8.0_112/lib/libjvm.dll.a&#39; for cygwin.

/usr/bin/dlltool: Can&#39;t open def file: jvm.def
Error attempting to create &#39;/cygdrive/c/PROGRA~2/Java/jdk1.8.0_112/lib/libjvm.dll.a&#39;
Building with:
  /cygdrive/c/PROGRA~2/Java/jdk1.8.0_112/include/jni.h
  /cygdrive/c/PROGRA~2/Java/jdk1.8.0_112/include/win32/jni_md.h
  /cygdrive/c/PROGRA~2/Java/jdk1.8.0_112/lib/jvm.lib
  /cygdrive/c/PROGRA~2/Java/jdk1.8.0_112/jre/bin/client/jvm.dll

Note: In order for Inline::Java to use the JNI extension, you will need to
use the JNI configuration option or set the PERL_INLINE_JAVA_JNI environment
variable to a true value. You will also need to add the following directories
to your PATH environment variable:
  /cygdrive/c/PROGRA~2/Java/jdk1.8.0_112/jre/bin/client
  /cygdrive/c/PROGRA~2/Java/jdk1.8.0_112/jre/bin
See README.JNI for more information.

The PerlInterpreter extension allows Inline::Java to be loaded directly from
Java using an embedded Perl interpreter. It is still EXPERIMENTAL and
may not build or work properly on all platforms. See documentation for
more details.
Do you wish to build the PerlInterpreter extension? [n]

Warning &#40;mostly harmless&#41;: No library found for -ljvm
Generating a Unix-style Makefile
Writing Makefile for Inline::Java::JNI
Writing MYMETA.yml and MYMETA.json
Generating a Unix-style Makefile
Writing Makefile for Inline::Java
Writing MYMETA.yml and MYMETA.json

You can continue the installation with the following commands:
  % make
  % make test
  % make install
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;03&nbsp;17:28:47&nbsp;2018</span>
    <span class="description">ETJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I confess to near-total ignorance of the Cygwin platform.

Is this still a problem? If so, what happens on &#34;make test&#34;?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;03&nbsp;17:28:48&nbsp;2018</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;03&nbsp;23:32:38&nbsp;2018</span>
    <span class="description">MPERRY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Apr 03 14:28:47 2018, ETJ wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I confess to near-total ignorance of the Cygwin platform.
&gt; 
&gt; Is this still a problem? If so, what happens on &#34;make test&#34;?
</div>
Cygwin is a Linux-like environment that runs on Windows. I will do my best to answer any questions you have about it.

I retested with Perl 5.24 and Inline::Java 0.65. It still fails with the same errors. I&#39;ve attached a text file with the output of running &#34;perl Makefile.PL&#34; and &#34;make test&#34;.

I noticed two issues.

1. &#34;perl Makefile.PL&#34; outputs &#34;/usr/bin/dlltool: Can&#39;t open def file: jvm.def&#34;. I can&#39;t find a jvm.def file. Line 118 of Java/Makefile.PL references that file in a block that&#39;s only run on Cygwin.

It looks like it was removed in this commit: <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/ingydotnet/Inline-Java/commit/c2a4516ee917814de79643c4019d1b3456cb13ec">https://github.com/ingydotnet/Inline-Java/commit/c2a4516ee917814de79643c4019d1b3456cb13ec</a></span>

2. The same line in Java/Makefile.PL also is attempting to write to the JDK&#39;s directory. It fails because the directory is owned by the superuser.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> make-output.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">mperry@mperry-PC:~/Inline-Java-0.65$ perl Makefile.PL

Welcome to the Inline::Java installation procedure.

Using /cygdrive/c/PROGRA~1/Java/jdk-9.0.4 as J2SDK directory.

Default J2SDK for Inline::Java will be &#39;/cygdrive/c/PROGRA~1/Java/jdk-9.0.4&#39;.
See module documentation for information on how to use a different J2SDK
or change this default value.

Checking if your kit is complete...
Looks good

Building JNI extension.

Creating &#39;/cygdrive/c/PROGRA~1/Java/jdk-9.0.4/lib/libjvm.dll.a&#39; for cygwin.

/usr/bin/dlltool: Can&#39;t open def file: jvm.def
Error attempting to create &#39;/cygdrive/c/PROGRA~1/Java/jdk-9.0.4/lib/libjvm.dll.a&#39;
Building with:
  /cygdrive/c/PROGRA~1/Java/jdk-9.0.4/include/jni.h
  /cygdrive/c/PROGRA~1/Java/jdk-9.0.4/include/win32/jni_md.h
  /cygdrive/c/PROGRA~1/Java/jdk-9.0.4/lib/jvm.lib
  /cygdrive/c/PROGRA~1/Java/jdk-9.0.4/bin/server/jvm.dll

Note: In order for Inline::Java to use the JNI extension, you will need to
use the JNI configuration option or set the PERL_INLINE_JAVA_JNI environment
variable to a true value. You will also need to add the following directories
to your PATH environment variable:
  /cygdrive/c/PROGRA~1/Java/jdk-9.0.4/bin/server
See README.JNI for more information.

The PerlInterpreter extension allows Inline::Java to be loaded directly from
Java using an embedded Perl interpreter. It is still EXPERIMENTAL and
may not build or work properly on all platforms. See documentation for
more details.
Do you wish to build the PerlInterpreter extension? [n] n

Warning &#40;mostly harmless&#41;: No library found for -ljvm
Writing MYMETA.yml and MYMETA.json
Generating a Unix-style Makefile
Writing Makefile for Inline::Java
Writing MYMETA.yml and MYMETA.json
mperry@mperry-PC:~/Inline-Java-0.65$ make test
&#34;/cygdrive/c/PROGRA~1/Java/jdk-9.0.4/bin/javac.exe&#34; -deprecation -g -d Java/classes Java/sources/org/perl/inline/java/InlineJavaArray.java Java/sources/org/perl/inline/java/InlineJavaCallback.java Java/sources/org/perl/inline/java/InlineJavaCallbackQueue.java Java/sources/org/perl/inline/java/InlineJavaCastException.java Java/sources/org/perl/inline/java/InlineJavaClass.java Java/sources/org/perl/inline/java/InlineJavaException.java Java/sources/org/perl/inline/java/InlineJavaHandle.java Java/sources/org/perl/inline/java/InlineJavaInvocationTargetException.java Java/sources/org/perl/inline/java/InlineJavaPerlCaller.java Java/sources/org/perl/inline/java/InlineJavaPerlException.java Java/sources/org/perl/inline/java/InlineJavaPerlInterpreter.java Java/sources/org/perl/inline/java/InlineJavaPerlNatives.java Java/sources/org/perl/inline/java/InlineJavaPerlObject.java Java/sources/org/perl/inline/java/InlineJavaProtocol.java Java/sources/org/perl/inline/java/InlineJavaServer.java Java/sources/org/perl/inline/java/InlineJavaServerThread.java Java/sources/org/perl/inline/java/InlineJavaThrown.java Java/sources/org/perl/inline/java/InlineJavaUserClassLink.java Java/sources/org/perl/inline/java/InlineJavaUserClassLoader.java Java/sources/org/perl/inline/java/InlineJavaUtils.java
make[1]: Entering directory &#39;/home/mperry/Inline-Java-0.65/Java&#39;
cp JNI.pm ../blib/lib/Inline/Java/JNI.pm
cp sources/org/perl/inline/java/InlineJavaClass.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaClass.java
cp sources/org/perl/inline/java/InlineJavaProtocol.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaProtocol.java
cp sources/org/perl/inline/java/InlineJavaCastException.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaCastException.java
cp sources/org/perl/inline/java/InlineJavaCallbackQueue.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaCallbackQueue.java
cp sources/org/perl/inline/java/InlineJavaUtils.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaUtils.java
cp sources/org/perl/inline/java/InlineJavaThrown.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaThrown.java
cp sources/org/perl/inline/java/InlineJavaServerThread.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaServerThread.java
cp sources/org/perl/inline/java/InlineJavaCallback.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaCallback.java
cp sources/org/perl/inline/java/InlineJavaPerlObject.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaPerlObject.java
cp sources/org/perl/inline/java/InlineJavaServer.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaServer.java
cp sources/org/perl/inline/java/InlineJavaPerlNatives.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaPerlNatives.java
cp sources/org/perl/inline/java/InlineJavaException.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaException.java
cp sources/org/perl/inline/java/InlineJavaPerlInterpreter.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaPerlInterpreter.java
cp sources/org/perl/inline/java/InlineJavaUserClassLink.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaUserClassLink.java
cp sources/org/perl/inline/java/InlineJavaHandle.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaHandle.java
cp sources/org/perl/inline/java/InlineJavaArray.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaArray.java
cp sources/org/perl/inline/java/InlineJavaInvocationTargetException.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaInvocationTargetException.java
cp sources/org/perl/inline/java/InlineJavaPerlException.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaPerlException.java
cp sources/org/perl/inline/java/InlineJavaPerlCaller.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaPerlCaller.java
cp sources/org/perl/inline/java/InlineJavaUserClassLoader.java ../blib/lib/Inline/Java/sources/org/perl/inline/java/InlineJavaUserClassLoader.java
&#34;/cygdrive/c/PROGRA~1/Java/jdk-9.0.4/bin/jar.exe&#34; cf lib/Inline/Java/InlineJavaServer.jar -C Java/classes org -C Java/classes InlineJava.properties
&#34;/home/mperry/perl5/perlbrew/perls/perl-5.24.0/bin/perl.exe&#34; &#34;/home/mperry/perl5/perlbrew/perls/perl-5.24.0/lib/5.24.0/ExtUtils/xsubpp&#34;  -typemap &#39;/home/mperry/perl5/perlbrew/perls/perl-5.24.0/lib/5.24.0/ExtUtils/typemap&#39; -typemap &#39;/home/mperry/Inline-Java-0.65/Java/typemap&#39;  JNI.xs &gt; JNI.xsc
&#34;/cygdrive/c/PROGRA~1/Java/jdk-9.0.4/bin/jar.exe&#34; cf lib/Inline/Java/InlineJavaUser.jar -C Java/classes InlineJavaUserClassLink.class
Running Mkbootstrap for JNI &#40;&#41;
chmod 644 &#34;JNI.bs&#34;
mv JNI.xsc JNI.c
gcc -c  -I/cygdrive/c/PROGRA~1/Java/jdk-9.0.4/include -I/cygdrive/c/PROGRA~1/Java/jdk-9.0.4/include/win32 -DPERL_USE_SAFE_PUTENV -U__STRICT_ANSI__ -fwrapv -fno-strict-aliasing -pipe -fstack-protector-strong -D_FORTIFY_SOURCE=2 -DUSEIMPORTLIB -O3   -DVERSION=\&#34;0.53_90\&#34; -DXS_VERSION=\&#34;0.53_90\&#34;  &#34;-I/home/mperry/perl5/perlbrew/perls/perl-5.24.0/lib/5.24.0/cygwin-thread-multi/CORE&#34;   JNI.c
&#34;/home/mperry/perl5/perlbrew/perls/perl-5.24.0/bin/perl.exe&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- JNI.bs ../blib/arch/auto/Inline/Java/JNI/JNI.bs 644
cp lib/Inline/Java/InlineJavaUser.jar blib/lib/Inline/Java/InlineJavaUser.jar
cp lib/Inline/Java/Array.pm blib/lib/Inline/Java/Array.pm
cp lib/Inline/Java/Class.pm blib/lib/Inline/Java/Class.pm
cp lib/Inline/Java/Callback.pm blib/lib/Inline/Java/Callback.pm
cp lib/Inline/Java/Protocol.pm blib/lib/Inline/Java/Protocol.pm
cp lib/Inline/Java/default_j2sdk.pl blib/lib/Inline/Java/default_j2sdk.pl
cp lib/Inline/Java/Object.pm blib/lib/Inline/Java/Object.pm
cp lib/Inline/Java.pod blib/lib/Inline/Java.pod
cp lib/Inline/Java.pm blib/lib/Inline/Java.pm
cp lib/Inline/Java/Portable.pm blib/lib/Inline/Java/Portable.pm
cp lib/Inline/Java/Server.pm blib/lib/Inline/Java/Server.pm
cp lib/Inline/Java/InlineJavaServer.jar blib/lib/Inline/Java/InlineJavaServer.jar
cp lib/Inline/Java/Handle.pm blib/lib/Inline/Java/Handle.pm
cp lib/Inline/Java/Callback.pod blib/lib/Inline/Java/Callback.pod
rm -f ../blib/arch/auto/Inline/Java/JNI/JNI.dll
cp lib/Inline/Java/JVM.pm blib/lib/Inline/Java/JVM.pm
g++  --shared  -Wl,--enable-auto-import -Wl,--export-all-symbols -Wl,--enable-auto-image-base -L/usr/local/lib -fstack-protector-strong  JNI.o  -o ../blib/arch/auto/Inline/Java/JNI/JNI.dll  \
  /home/mperry/perl5/perlbrew/perls/perl-5.24.0/lib/5.24.0/cygwin-thread-multi/CORE/cygperl5_24_0.dll    \

JNI.o:JNI.c:&#40;.text+0xe1d&#41;: undefined reference to `__imp_JNI_GetCreatedJavaVMs&#39;
JNI.o:JNI.c:&#40;.text+0xe1d&#41;: relocation truncated to fit: R_X86_64_PC32 against undefined symbol `__imp_JNI_GetCreatedJavaVMs&#39;
JNI.o:JNI.c:&#40;.text+0x1022&#41;: undefined reference to `__imp_JNI_CreateJavaVM&#39;
JNI.o:JNI.c:&#40;.text+0x1022&#41;: relocation truncated to fit: R_X86_64_PC32 against undefined symbol `__imp_JNI_CreateJavaVM&#39;
collect2: error: ld returned 1 exit status
make[1]: *** [Makefile:477: ../blib/arch/auto/Inline/Java/JNI/JNI.dll] Error 1
make[1]: Leaving directory &#39;/home/mperry/Inline-Java-0.65/Java&#39;
make: *** [Makefile:511: subdirs] Error 2
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;05&nbsp;12:08:41&nbsp;2018</span>
    <span class="description">MPERRY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve figured out what was wrong. I&#39;ve attached a patch, and I&#39;ll send you a pull request on GitHub.

I&#39;ve restored the jvm.def file that was removed. Then I have Makefile.PL create the jvm.dll file in the current directory and link with it during compilation.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> rt119307.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -Naur Inline-Java-0.65-old/Java/jvm.def Inline-Java-0.65/Java/jvm.def
--- Inline-Java-0.65-old/Java/jvm.def	1969-12-31 16:00:00.000000000 -0800
+++ Inline-Java-0.65/Java/jvm.def	2018-04-04 17:10:53.509828900 -0700
@@ -0,0 +1,4 @@
+EXPORTS
+JNI_CreateJavaVM@12
+JNI_GetDefaultJavaVMInitArgs@4
+JNI_GetCreatedJavaVMs@12
diff -Naur Inline-Java-0.65-old/Java/Makefile.PL Inline-Java-0.65/Java/Makefile.PL
--- Inline-Java-0.65-old/Java/Makefile.PL	2018-02-09 22:05:13.000000000 -0800
+++ Inline-Java-0.65/Java/Makefile.PL	2018-04-04 17:15:46.212570500 -0700
@@ -113,10 +113,10 @@
 
 		# Cygwin: create gcc-compatible library wrapper for jvm.dll
 		if &#40;$^O eq &#39;cygwin&#39;&#41; {
-			my $dll = File::Spec-&gt;catfile&#40;$jdk_dir, &#39;lib&#39;, &#39;libjvm.dll.a&#39;&#41; ;
+			my $dll = File::Spec-&gt;catfile&#40;Cwd::cwd, &#39;libjvm.dll.a&#39;&#41; ;
 			print &#34;Creating &#39;$dll&#39; for cygwin.\n\n&#34; ;
 			system&#40;&#34;/usr/bin/dlltool --input-def jvm.def --kill-at --dllname jvm.dll --output-lib &#39;$dll&#39;&#34;&#41; 
-				and print &#34;Error attempting to create &#39;$jdk_dir/lib/libjvm.dll.a&#39;\n&#34; ;
+				and print &#34;Error attempting to create &#39;$dll&#39;\n&#34; ;
 		}
 
 		print &#34;Building with:\n&#34; ;
@@ -137,6 +137,9 @@
 				&#40;$files-&gt;{&#39;jni.h&#39;}-&gt;{selected}, $files-&gt;{&#39;jni_md.h&#39;}-&gt;{selected}&#41; ;
 			@main::L = map { Inline::Java::Portable::portable&#40;&#39;SUB_FIX_MAKE_QUOTES&#39;, &#34;-L$_&#34;&#41; }
 				&#40;$files-&gt;{$jvm_lib}-&gt;{selected}&#41; ;
+			if &#40;$^O eq &#39;cygwin&#39;&#41; {
+				push @main::L, Inline::Java::Portable::portable&#40;&#39;SUB_FIX_MAKE_QUOTES&#39;, &#39;-L&#39; . Cwd::cwd&#41;;
+			}
 
 			my $DIR = [] ;
 			if &#40;! defined&#40;$build_perl_interpreter&#41;&#41;{
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;05&nbsp;20:32:12&nbsp;2018</span>
    <span class="description">ETJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#40;For posterity - Matt figured a way to do without the .def file, which I preferred as more future-proof&#41;

Released as 0.66. Thanks!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;05&nbsp;20:32:12&nbsp;2018</span>
    <span class="description">ETJ [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
