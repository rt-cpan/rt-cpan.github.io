<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #76807 for Finance-InteractiveBrokers-SWIG: placeOrder broken</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #76807 for Finance-InteractiveBrokers-SWIG: placeOrder broken</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Finance-InteractiveBrokers-SWIG">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Finance-InteractiveBrokers-SWIG">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Finance-InteractiveBrokers-SWIG">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Finance-InteractiveBrokers-SWIG">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Finance-InteractiveBrokers-SWIG">Finance-InteractiveBrokers-SWIG CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">76807</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Finance-InteractiveBrokers-SWIG">Finance-InteractiveBrokers-SWIG</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">INFIDEL [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
rod.taylor [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-236860-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.05    </td>
  </tr>
  <tr id="CF-236861-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.06    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




api-demo.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1071507/563671/api-demo.pl">
Wed Apr 25 14:49:17 2012 (4.6k) by rod.taylor [...] gmail.com
</a>
</font></li>
</ul>


MyEventHandler.pm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1071507/563672/MyEventHandler.pm">
Wed Apr 25 14:49:17 2012 (7.9k) by rod.taylor [...] gmail.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=76807">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1071507" href="/Public/Bug/Display.html?id=76807#txn-1071507">#</a>      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;25&nbsp;14:49:17&nbsp;2012</span>
    <span class="description">rod.taylor [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> placeOrder broken</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1071507/563670/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/563670">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 565b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I made a modification to the examples/api-demo.pl script to place an
order. MyEventHander.pm is unchanged.

I always get this error:

ValueError invalid null reference in method &#39;IBAPIClient_placeOrder&#39;,
argument 2 of type &#39;OrderId&#39;


I also get this exact error when making a simple
$ibapi-&gt;cancelOrder&#40;$orderId&#41; call. Something about OrderId seems to be
messed up in the swig handling or I&#39;m doing something wrong.


nextValidId results implies it is a simple integer value which should be
incremented. Doing that results in the same error as hardcoding &#39;1&#39; does.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> api-demo.pl</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1071507/563671/api-demo.pl">Download api-demo.pl</a><br />
<span class="downloadcontenttype">text/x-perl 4.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl
#
#   Finance::InteractiveBrokers::SWIG - API demonstration program
#
#   &#40;c&#41; 2010-2011 Jason McManus
#
#   This demonstration program shows how to use the F::IB::SWIG
#   package to work with the IB API, and receive events.
#
#   Steps:
#   ------
#   0. Set up either the IB Gateway or the TradeWorkstation interface.
#      &#40;see the IB API documentation for details.  The API must use one
#      of these to connect to their service.
#   1. Subclass Finance::InteractiveBrokers::SWIG::EventHandler, create
#      actions for its events, and instantiate an object.
#   2. Call Finance::InteractiveBrokers::SWIG-&gt;new, and give it your
#      handler.
#   3. Call -&gt;eConnect&#40; $host, $port, $id &#41; giving it the host and
#      port of your IB Gateway or TWS server.
#   4. Set up an event loop calling -&gt;processMessages&#40;&#41; each time
#      through, so that your event handlers will be called.
#   5. When the event loop is through, call -&gt;eDisconnect&#40;&#41; to hang up
#      politely.
#

use Data::Dumper;
use strict;
use warnings;
use vars qw&#40; $VERSION &#41;;
BEGIN {
    $VERSION = &#39;0.05&#39;;
}

# Ours
use Finance::InteractiveBrokers::SWIG;
use lib &#39;.&#39;;
use MyEventHandler;
$|=1;

###
### Variables
###

use vars qw&#40; $TRUE $FALSE &#41;;
*TRUE  = \1;
*FALSE = \0;

my $ibhost      = &#39;localhost&#39;;  # Set to your IB gateway or TWS host
my $ibport      = 7496;         # Set to your IB gateway or TWS port
my $clientId    = 42;           # Some random number as a client ID

my $wantstoexit = 0;            # Flag to check for ^C; ignore this

###
### Main
###

#
# 1. Create our event handler object to react to incoming events
#    &#40;You can see MyEventHandler.pm in this same directory.&#41;
#
my $handler = MyEventHandler-&gt;new&#40;&#41;;

#
# 2. Create a F::IB::SWIG object so we can make requests
#
my $ibapi = Finance::InteractiveBrokers::SWIG-&gt;new&#40;
    handler =&gt; $handler,
&#41;;

#
# 3. Tell the API to connect to the IB Gateway or TWS host
#
print &#34;Connecting to $ibhost:$ibport with clientID = $clientId... &#34;;

if&#40; $ibapi-&gt;eConnect&#40; $ibhost, $ibport, $clientId &#41; &#41; {
    print &#34;Connected!\n&#34;;
} else {
    die &#34;\nConnection to $ibhost:$ibport failed.&#34;;
}

#
# Let&#39;s set up a signal handler to catch ^C &#40;SIGINT&#41; events
#
$SIG{INT} = sub { $wantstoexit = 1; };

#
# Let&#39;s request the current time on the server
#
print &#34;Sending request for current server time.\n&#34;;

$ibapi-&gt;reqCurrentTime&#40;&#41;;

#
# Let&#39;s also request a quote for MSFT
#

# Set up a contract object

my $contract = Finance::InteractiveBrokers::SWIG::IBAPI::Contract-&gt;new&#40;&#41;;
$contract-&gt;swig_symbol_set&#40; &#39;MSFT&#39; &#41;;
$contract-&gt;swig_secType_set&#40; &#39;STK&#39; &#41;;
$contract-&gt;swig_exchange_set&#40; &#39;SMART&#39; &#41;;
$contract-&gt;swig_currency_set&#40; &#39;USD&#39; &#41;;

# Send the request

my $reqId = get_next_id&#40;&#41;;
print &#34;Sending snapshot request &#40;reqId $reqId&#41; for MSFT.\n&#34;;

$ibapi-&gt;reqMktData&#40;
    $reqId,             # next id from the sequence generator
    $contract,          # above contract object
    &#39;&#39;,                 # don&#39;t set this if snapshot &#40;next value&#41; is true
    $TRUE,              # just get a snapshot and immediately cancel
&#41;;

#
# 4. MAIN EVENT LOOP; keep going in here until ^C is pressed
#
print &#34;\nLooping to wait for server responses &#40;^C to exit&#41;...\n&#34;;

    $ibapi-&gt;processMessages&#40;&#41;;
    $ibapi-&gt;processMessages&#40;&#41;;
    $ibapi-&gt;processMessages&#40;&#41;;
    $ibapi-&gt;processMessages&#40;&#41;;

my $orderId = get_next_order_id&#40;&#41;;

    my $order = Finance::InteractiveBrokers::SWIG::IBAPI::Order-&gt;new&#40;&#41;;
    $order-&gt;swig_orderId_set&#40;$orderId&#41;;
#    $order-&gt;swig_clientId_set&#40; $self-&gt;client_id &#41;;
    $order-&gt;swig_action_set&#40; &#39;BUY&#39; &#41;;
    $order-&gt;swig_totalQuantity_set&#40; 100 &#41;;
    $order-&gt;swig_orderType_set&#40;&#39;MKT&#39;&#41;;
    $order-&gt;swig_transmit_set&#40;1&#41;;

$ibapi-&gt;placeOrder&#40;$orderId, $contract, $order&#41;;

    $ibapi-&gt;processMessages&#40;&#41;;
    $ibapi-&gt;processMessages&#40;&#41;;
    $ibapi-&gt;processMessages&#40;&#41;;
    $ibapi-&gt;processMessages&#40;&#41;;

#
# 5. Someone wanted to exit, let&#39;s clean up nicely.
#
print &#34;^C detected; disconnecting...\n&#34;;
$ibapi-&gt;eDisconnect&#40;&#41;
    if&#40; $ibapi-&gt;isConnected&#40;&#41; &#41;;

#
# Bye!
#
print &#34;Bye!\n&#34;;
exit&#40; 0 &#41;;

###
### Utility subs
###

# Just a closure to continually generate a new req id
#
# In a full program, these should probably be kept in a hash, with
# the Id set to the key, and the value set to 1 &#40;or perhaps a reqtype,
# timestamp, or other meta information&#41;, and then deleted as the
# responses come in, or when a cancel request is sent, depending
# on if that&#39;s appropriate for the request or not.
#
# Remember, this is a low-level API.  Most of this will be done for you
# in the eventual POE component. :-&#41;
#
# See also: the IB API documentation for the reqIDs&#40;&#41; call
#
{
    my $id = 0;
    sub get_next_id
    {
        return ++$id;
    }
}

{
    my $id = 0;
    sub get_next_order_id
    {
        return ++$id;
    }
}

__END__

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> MyEventHandler.pm</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1071507/563672/MyEventHandler.pm">Download MyEventHandler.pm</a><br />
<span class="downloadcontenttype">text/x-perl 7.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">package MyEventHandler;
#
#   Finance::InteractiveBrokers::SWIG - Demonstration event handler subclass
#
#   Copyright &#40;c&#41; 2010-2011 Jason McManus
#
#   To use this module:
#
#     Insert your code into the event handler subroutine skeletons.  These
#     will be triggered upon receiving the responses from the IB server,
#     at the appropriate times, according to their API documentation.
#
#     Fill them to do whatever you need to do to react to the event, e.g.
#     store data into a database, set a flag, execute a trade, etc.
#
#   NOTE: You /should/ double-check to make sure that all of the events
#     subroutines exist for the version of the API you compiled against.
#
#     You can get a list of events by typing:
#       
#       perl -MFinance::InteractiveBrokers::SWIG::EventHandler -e&#39;print Finance::InteractiveBrokers::SWIG::EventHandler::override&#39;
#
#     at your shell prompt.
#
#     Since IB updates its API regularly, if you compile against a newer
#     version, it&#39;s possible that some events may not be caught below, at
#     which point you will receive an exception that looks like:
#
#       Finance::InteractiveBrokers::SWIG::EventHandler::EVENTNAME method
#          must be overridden
#        at line ....
#

use Carp qw&#40; croak confess &#41;;
use Data::Dumper;
use strict;
use warnings;
use vars qw&#40; $VERSION &#41;;
BEGIN {
    $VERSION = &#39;0.05&#39;;
}

# Ours
use base qw&#40; Finance::InteractiveBrokers::SWIG::EventHandler &#41;;

###
### Event handlers
###
### These will be called by Finance::InteractiveBrokers::SWIG when it
### receives the specified event from the server.  They will be called
### with their arguments in the same order as in the IB API documentation.
###
### Only a few methods are filled in for you, but this class will
### operate as a proper handler, and simply discard the events sent to
### the empty subs.  It is up to you to fill them in.
###
### Please see the InteractiveBrokers API documentation regarding EWrapper
### for a full description and list of arguments for each method.
###

#
# Connection and Server
#
sub winError
{
    my&#40; $self, $str, $lastError &#41; = @_;

    print &#34;Client Error $lastError: $str\n&#34;;

    return;
}

sub error
{
    my&#40; $self, $id, $errorCode, $errorString &#41; = @_;

    if&#40; $errorCode &gt;= 1100 &#41;
    {
        print &#34;Server Message: code $errorCode: $errorString\n&#34;;
    }
    else
    {
        print &#34;Server Error: ReqID $id; code $errorCode: $errorString\n&#34;;
    }

    return;
}

sub connectionClosed
{
    print &#34;Connection closed.\n&#34;;

    return;
}

sub currentTime
{
    my&#40; $self, $time &#41; = @_;

    printf &#34;Current time on IB server is: %s\n&#34;, scalar gmtime&#40; $time &#41;;

    return;
}

#
# Market Data
#

# Docs here:
# <span class="clickylink"><a target="new" rel="nofollow" href="http://www.interactivebrokers.com/php/apiUsersGuide/apiguide/c/tickprice.htm">http://www.interactivebrokers.com/php/apiUsersGuide/apiguide/c/tickprice.htm</a></span>
sub tickPrice
{
    my&#40; $self, $reqId, $tickType, $price, $canAutoExecute &#41; = @_;

    printf &#34;tickPrice for reqId %d: type %d, price %.04f, autoexecute? %s\n&#34;,
           $reqId,
           $tickType,
           $price,
           &#40; $canAutoExecute ? &#39;Yes&#39; : &#39;No&#39; &#41;;

    return;
}
sub tickSize
{
    my $self = shift;

    print &#34;tickSize event; contains the following data:\n&#34;;
    print Dumper \@_;

    return;
}
sub tickOptionComputation
{
    print &#34;tickOptionComputation\n&#34;, Dumper \@_;
}
sub tickGeneric
{
    print &#34;tickGeneric\n&#34;, Dumper \@_;
}

sub tickString
{
    my $self = shift;

    print &#34;tickString event; contains the following data:\n&#34;;
    print Dumper \@_;

    return;
}

sub tickEFP
{
    print &#34;tickEFP\n&#34;, Dumper \@_;
}

sub tickSnapshotEnd
{
    my&#40; $self, $reqId &#41; = @_;

    print &#34;tickSnapshotEnd for reqID $reqId\n&#34;; 

    return;
}

#
# Orders
#
sub orderStatus
{}
sub openOrder
{}
sub nextValidId
{}

#
# Account and Portfolio
#
sub updateAccountValue
{}
sub updatePortfolio
{}
sub updateAccountTime
{}

#
# News Bulletins
#
sub updateNewsBulletin
{}

#
# Contract Details
#
sub contractDetails
{}
sub contractDetailsEnd
{}
sub bondContractDetails
{}

#
# Executions
#
sub execDetails
{}
sub execDetailsEnd
{}

#
# Market Depth
#
sub updateMktDepth
{}
sub updateMktDepthL2
{}

#
# Financial Advisors
#
sub managedAccounts
{}
sub receiveFA
{}

# 
# Historical Data
#
sub historicalData
{
    print &#34;historicalData\n&#34;, Dumper \@_;
}

#
# Market Scanners
#
sub scannerParameters
{}
sub scannerData
{}
sub scannerDataEnd
{}

#
# Real Time Bars
#
sub realtimeBar
{}

#
# Fundamental Data
#
sub fundamentalData
{}

#
# This has something to do with RFQs
#
sub deltaNeutralValidation
{}

#
# These are in the C++ headers, but not documented in the IB API docs.
#
sub openOrderEnd
{}
sub accountDownloadEnd
{}

1;

__END__

=pod

=head1 NAME

MyEventHandler - Sample Finance::InteractiveBrokers::SWIG::EventHandler subclass

=head1 DESCRIPTION

You may this module as a starter when building your required subclass of
L&lt;Finance::InteractiveBrokers::SWIG::EventHandler&gt;.  It is well-commented,
and guides you through the process.

Please see the documentation for
L&lt;Finance::InteractiveBrokers::SWIG::EventHandler&gt; for details on why this
must be done to use this module distribution.

=head1 SEE ALSO

L&lt;Finance::InteractiveBrokers::SWIG&gt;

L&lt;Finance::InteractiveBrokers::SWIG::EventHandler&gt;

L&lt;Alien::InteractiveBrokers&gt;

L&lt;POE::Component::Client::InteractiveBrokers&gt;

L&lt;Finance::InteractiveBrokers::API&gt;

L&lt;Finance::InteractiveBrokers::Java&gt;

L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.swig.org/">http://www.swig.org/</a></span>&gt; - SWIG, the Simplified Wrapper and Interface Generator

The L&lt;POE&gt; documentation, L&lt;POE::Kernel&gt;, L&lt;POE::Session&gt;

L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://poe.perl.org/">http://poe.perl.org/</a></span>&gt; - All about the Perl Object Environment &#40;POE&#41;

L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.interactivebrokers.com/">http://www.interactivebrokers.com/</a></span>&gt; - The InteractiveBrokers website

L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.interactivebrokers.com/php/apiUsersGuide/apiguide.htm">http://www.interactivebrokers.com/php/apiUsersGuide/apiguide.htm</a></span>&gt; - The IB API documentation

The F&lt;examples/&gt; directory of this module&#39;s distribution

=head1 AUTHORS

Jason McManus, C&lt;&lt; &lt;infidel at cpan.org&gt; &gt;&gt;

=head1 BUGS

Please report any bugs or feature requests to
C&lt;bug-finance-interactivebrokers-swig at rt.cpan.org&gt;, or through
the web interface at L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/NoAuth/ReportBug.html?Queue=Finance-InteractiveBrokers-SWIG">http://rt.cpan.org/NoAuth/ReportBug.html?Queue=Finance-InteractiveBrokers-SWIG</a></span>&gt;.  The authors will be notified, and then you&#39;ll
automatically be notified of progress on your bug as changes are made.

If you are sending a bug report, please include:

=over 4

=item * Your OS type, version, Perl version, and other similar information.

=item * The version of Finance::InteractiveBrokers::SWIG you are using.

=item * The version of the InteractiveBrokers API you are using.

=item * If possible, a minimal test script which demonstrates your problem.

=back

This will be of great assistance in troubleshooting your issue.

=head1 SUPPORT

You can find documentation for this module with the perldoc command.

    perldoc Finance::InteractiveBrokers::SWIG

You can also look for information at:

=over 4

=item * RT: CPAN&#39;s request tracker

L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/NoAuth/Bugs.html?Dist=Finance-InteractiveBrokers-SWIG">http://rt.cpan.org/NoAuth/Bugs.html?Dist=Finance-InteractiveBrokers-SWIG</a></span>&gt;

=item * AnnoCPAN: Annotated CPAN documentation

L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://annocpan.org/dist/Finance-InteractiveBrokers-SWIG">http://annocpan.org/dist/Finance-InteractiveBrokers-SWIG</a></span>&gt;

=item * CPAN Ratings

L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://cpanratings.perl.org/d/Finance-InteractiveBrokers-SWIG">http://cpanratings.perl.org/d/Finance-InteractiveBrokers-SWIG</a></span>&gt;

=item * Search CPAN

L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/dist/Finance-InteractiveBrokers-SWIG/">http://search.cpan.org/dist/Finance-InteractiveBrokers-SWIG/</a></span>&gt;

=back

=head1 LICENSE AND COPYRIGHT

Copyright &#40;c&#41; 2010-2011 Jason McManus

This program is free software; you can redistribute it and/or modify it
under the terms of either: the GNU General Public License as published
by the Free Software Foundation; or the Artistic License.

See <span class="clickylink"><a target="new" rel="nofollow" href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></span> for more information.

The authors are not associated with InteractiveBrokers, and as such, take
no responsibility or provide no warranty for your use of this module or the
InteractiveBrokers service.  You do so at your own responsibility.  No
warranty for any purpose is either expressed or implied by your use of this
module suite.

The data from InteractiveBrokers are under an entirely separate license that
varies according to exchange rules, etc.  It is your responsibility to
follow the InteractiveBrokers and exchange license agreements with the data.

=cut

# END
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1071521" href="/Public/Bug/Display.html?id=76807#txn-1071521">#</a>      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;25&nbsp;15:07:56&nbsp;2012</span>
    <span class="description">rod.taylor [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rod.taylor [...] gmail.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1071521/563681/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/563681">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 651b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Apr 25 14:49:17 2012, rtaylor wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I always get this error:
&gt; 
&gt; ValueError invalid null reference in method &#39;IBAPIClient_placeOrder&#39;,
&gt; argument 2 of type &#39;OrderId&#39;
</div>
The OrderId issue seems to be solved by the below patch. I basically
duplicated the difference between OrderId and TickerId since TickerId
worked.


*** IBAPI-9.64.i.orig   2012-04-25 15:05:30.619714850 -0400
--- IBAPI-9.64.i        2012-04-25 15:05:33.723731109 -0400
***************
*** 89,94 ****
--- 89,95 ----
  
  /* typedef some other junk */
  typedef long TickerId;
+ typedef long OrderId;
  
  /* Include &#40;and build code for&#41; some of our types */
  %include &#34;Contract.h&#34;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1071588" href="/Public/Bug/Display.html?id=76807#txn-1071588">#</a>      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;25&nbsp;20:17:02&nbsp;2012</span>
    <span class="description">INFIDEL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1071588/563728/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/563728">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 879b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Apr 25 15:07:56 2012, rtaylor wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Apr 25 14:49:17 2012, rtaylor wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; I always get this error:
&gt; &gt; 
&gt; &gt; ValueError invalid null reference in method &#39;IBAPIClient_placeOrder&#39;,
&gt; &gt; argument 2 of type &#39;OrderId&#39;
</div>&gt; 
&gt; The OrderId issue seems to be solved by the below patch. I basically
&gt; duplicated the difference between OrderId and TickerId since TickerId
&gt; worked.
&gt; 
&gt; 
&gt; *** IBAPI-9.64.i.orig 2012-04-25 15:05:30.619714850 -0400
&gt; --- IBAPI-9.64.i      2012-04-25 15:05:33.723731109 -0400
&gt; ***************
&gt; *** 89,94 ****
&gt; --- 89,95 ----
&gt;   
&gt;   /* typedef some other junk */
&gt;   typedef long TickerId;
&gt; + typedef long OrderId;
&gt;   
&gt;   /* Include &#40;and build code for&#41; some of our types */
&gt;   %include &#34;Contract.h&#34;
</div>
Thanks for the bug report and patch!  I&#39;ve updated this in the repo, and
will release a new version after we get your other bug sorted.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1071590" href="/Public/Bug/Display.html?id=76807#txn-1071590">#</a>      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;25&nbsp;20:17:03&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1071591" href="/Public/Bug/Display.html?id=76807#txn-1071591">#</a>      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;25&nbsp;20:17:03&nbsp;2012</span>
    <span class="description">INFIDEL [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1071592" href="/Public/Bug/Display.html?id=76807#txn-1071592">#</a>      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;25&nbsp;20:17:03&nbsp;2012</span>
    <span class="description">INFIDEL [...] cpan.org -  Given to INFIDEL</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1071948" href="/Public/Bug/Display.html?id=76807#txn-1071948">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;26&nbsp;20:08:59&nbsp;2012</span>
    <span class="description">INFIDEL [...] cpan.org -  Fixed in 0.06 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1071949" href="/Public/Bug/Display.html?id=76807#txn-1071949">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;26&nbsp;20:08:59&nbsp;2012</span>
    <span class="description">INFIDEL [...] cpan.org -  Broken in 0.05 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1071950" href="/Public/Bug/Display.html?id=76807#txn-1071950">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;26&nbsp;20:09:10&nbsp;2012</span>
    <span class="description">INFIDEL [...] cpan.org -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.434697</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
