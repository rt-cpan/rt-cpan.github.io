<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #34924 for Test-Harness-FileFilter: Bottomless Recursion in Test::Harness::FileFilter</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #34924 for Test-Harness-FileFilter: Bottomless Recursion in Test::Harness::FileFilter</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Test-Harness-FileFilter">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Test-Harness-FileFilter">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Test-Harness-FileFilter">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Test-Harness-FileFilter">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Test-Harness-FileFilter">Test-Harness-FileFilter CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">34924</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Test-Harness-FileFilter">Test-Harness-FileFilter</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
imacat [...] mail.imacat.idv.tw

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-31434-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.01    </td>
  </tr>
  <tr id="CF-31435-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=34924">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-447482" href="/Public/Bug/Display.html?id=34924#txn-447482">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;12&nbsp;16:27:45&nbsp;2008</span>
    <span class="description">imacat [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Bottomless Recursion in Test::Harness::FileFilter</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/447482/219701/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/219701">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear Claes Jakobsson,

    Hi.  This is imacat from Taiwan.  I found that your
Test-Harness-FileFilter-0.01 gets into bottomless deep recursion, which
eats up all the memory and dies.  I tried to investigate further.  It
seems that your Test::Harness::FileFilter tried to replace  the
Test::Harness::_run_all_tests&#40;&#41; and call the original one afterwards. 
But Test::Harness::_run_all_tests&#40;&#41; was removed for Test::Harness
version &gt;= 2.56.  This results the preservation of
&#38;Test::Harness::_run_all_tests&#40;&#41; will point back to the replacement
itself, and become calling itself recursively.

    I do not know what to do with this situation.  Maybe you can take
some time to look into this issue.

    The terminal log is attached below.  Hope that this helps.  Please
tell me if you need any more information, or if I could be of any help.
 Thank you.

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
28884 imacat    25   0 1221m 1.2g 1824 R  100 59.8   0:33.15 perl

imacat@rinse tmp/Test-Harness-FileFilter-0.01 % perl -v

This is perl, v5.8.8 built for x86_64-linux-thread-multi-ld

Copyright 1987-2006, Larry Wall

Perl may be copied only under the terms of either the Artistic License
or the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using &#34;man perl&#34; or &#34;perldoc perl&#34;.  If you have access to the
Internet, point your browser at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.org/">http://www.perl.org/</a></span>, the Perl Home Page.

imacat@rinse tmp/Test-Harness-FileFilter-0.01 % perl Makefile.PL
Checking if your kit is complete...
Looks good
Writing Makefile for Test::Harness::FileFilter
imacat@rinse tmp/Test-Harness-FileFilter-0.01 % make
cp lib/Test/Harness/FileFilter.pm blib/lib/Test/Harness/FileFilter.pm
Manifying blib/man3/Test::Harness::FileFilter.3
imacat@rinse tmp/Test-Harness-FileFilter-0.01 % make test
t/00-load...........1/1 # Testing Test::Harness::FileFilter 0.01, Perl
5.008008, /usr/bin/perl
t/00-load...........ok
t/01-ignore.........1/2 # Testing HARNESS_IGNORE_FILES
Deep recursion on anonymous subroutine at
/home/imacat/tmp/Test-Harness-FileFilter-0.01/blib/lib/Test/Harness/FileFilter.pm
line 41.
make: *** [test_dynamic] Interrupt

imacat@rinse tmp/Test-Harness-FileFilter-0.01 % perl -Iblib/lib
-Iblib/arch t/01-ignore.t
1..2
ok 1 - use Test::Harness::FileFilter;
# Testing HARNESS_IGNORE_FILES
Deep recursion on anonymous subroutine at
blib/lib/Test/Harness/FileFilter.pm line 41.

imacat@rinse tmp/Test-Harness-FileFilter-0.01 %
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-459377" href="/Public/Bug/Display.html?id=34924#txn-459377">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;09&nbsp;08:22:26&nbsp;2008</span>
    <span class="description">claes [...] versed.se -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34924] Bottomless Recursion in Test::Harness::FileFilter </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 9 May 2008 14:22:01 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-Harness-FileFilter [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Claes Jakobsson &lt;claes [...] versed.se&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/459377/225942/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/225942">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

sorry for the late reply. I&#39;ve looked into this and can&#39;t find a  
suitable solution.

The best thing would probably be to make the Makefile.PL check what  
version of Test::Harness is installed and refuse to install if it&#39;s a  
too new version.

The reason I did this module was because I wanted &#34;make test&#34; to just  
run a bunch of files and wanted to use perls regexp istead of the ones  
I can supply via TEST_FILES to make test.

Are you using the module or was discovered when doing automated smoke  
testing?

Cheers,
Claes

On 12 apr 2008, at 22.27, Yi Ma Mao via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Sat Apr 12 16:27:45 2008: Request 34924 was acted upon.
&gt; Transaction: Ticket created by IMACAT
&gt;       Queue: Test-Harness-FileFilter
&gt;     Subject: Bottomless Recursion in Test::Harness::FileFilter
&gt;   Broken in: 0.01
&gt;    Severity: &#40;no value&#41;
&gt;       Owner: Nobody
&gt;  Requestors: imacat@mail.imacat.idv.tw
&gt;      Status: new
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34924">http://rt.cpan.org/Ticket/Display.html?id=34924</a></span> &gt;
&gt;
&gt;
&gt; Dear Claes Jakobsson,
&gt;
&gt;    Hi.  This is imacat from Taiwan.  I found that your
&gt; Test-Harness-FileFilter-0.01 gets into bottomless deep recursion,  
&gt; which
&gt; eats up all the memory and dies.  I tried to investigate further.  It
&gt; seems that your Test::Harness::FileFilter tried to replace  the
&gt; Test::Harness::_run_all_tests&#40;&#41; and call the original one afterwards.
&gt; But Test::Harness::_run_all_tests&#40;&#41; was removed for Test::Harness
&gt; version &gt;= 2.56.  This results the preservation of
&gt; &#38;Test::Harness::_run_all_tests&#40;&#41; will point back to the replacement
&gt; itself, and become calling itself recursively.
&gt;
&gt;    I do not know what to do with this situation.  Maybe you can take
&gt; some time to look into this issue.
&gt;
&gt;    The terminal log is attached below.  Hope that this helps.  Please
&gt; tell me if you need any more information, or if I could be of any  
&gt; help.
&gt; Thank you.
&gt;
&gt;  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
&gt; 28884 imacat    25   0 1221m 1.2g 1824 R  100 59.8   0:33.15 perl
&gt;
&gt; imacat@rinse tmp/Test-Harness-FileFilter-0.01 % perl -v
&gt;
&gt; This is perl, v5.8.8 built for x86_64-linux-thread-multi-ld
&gt;
&gt; Copyright 1987-2006, Larry Wall
&gt;
&gt; Perl may be copied only under the terms of either the Artistic License
&gt; or the
&gt; GNU General Public License, which may be found in the Perl 5 source  
&gt; kit.
&gt;
&gt; Complete documentation for Perl, including FAQ lists, should be  
&gt; found on
&gt; this system using &#34;man perl&#34; or &#34;perldoc perl&#34;.  If you have access  
&gt; to the
&gt; Internet, point your browser at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.org/">http://www.perl.org/</a></span>, the Perl Home  
&gt; Page.
&gt;
&gt; imacat@rinse tmp/Test-Harness-FileFilter-0.01 % perl Makefile.PL
&gt; Checking if your kit is complete...
&gt; Looks good
&gt; Writing Makefile for Test::Harness::FileFilter
&gt; imacat@rinse tmp/Test-Harness-FileFilter-0.01 % make
&gt; cp lib/Test/Harness/FileFilter.pm blib/lib/Test/Harness/FileFilter.pm
&gt; Manifying blib/man3/Test::Harness::FileFilter.3
&gt; imacat@rinse tmp/Test-Harness-FileFilter-0.01 % make test
&gt; t/00-load...........1/1 # Testing Test::Harness::FileFilter 0.01, Perl
&gt; 5.008008, /usr/bin/perl
&gt; t/00-load...........ok
&gt; t/01-ignore.........1/2 # Testing HARNESS_IGNORE_FILES
&gt; Deep recursion on anonymous subroutine at
&gt; /home/imacat/tmp/Test-Harness-FileFilter-0.01/blib/lib/Test/Harness/ 
&gt; FileFilter.pm
&gt; line 41.
&gt; make: *** [test_dynamic] Interrupt
&gt;
&gt; imacat@rinse tmp/Test-Harness-FileFilter-0.01 % perl -Iblib/lib
&gt; -Iblib/arch t/01-ignore.t
&gt; 1..2
&gt; ok 1 - use Test::Harness::FileFilter;
&gt; # Testing HARNESS_IGNORE_FILES
&gt; Deep recursion on anonymous subroutine at
&gt; blib/lib/Test/Harness/FileFilter.pm line 41.
&gt;
&gt; imacat@rinse tmp/Test-Harness-FileFilter-0.01 %
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-459378" href="/Public/Bug/Display.html?id=34924#txn-459378">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;09&nbsp;08:22:28&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-459961" href="/Public/Bug/Display.html?id=34924#txn-459961">#</a>      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;11&nbsp;13:38:38&nbsp;2008</span>
    <span class="description">imacat [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/459961/226236/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/226236">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear Claes,

    Hi.  This is imacat from Taiwan.  Regarding to your question,

On 2008-05-09 08:22:26 Fri, claes@versed.se wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The best thing would probably be to make the Makefile.PL check what  
&gt; version of Test::Harness is installed and refuse to install if it&#39;s a  
&gt; too new version.
</div>
    I suppose the following code may work

eval { require Test::Harness; };
exit 0 unless Test::Harness-&gt;can&#40;&#34;_run_all_tests&#34;&#41;;

    The above can both be used in your Makefile.PL, and in your
FileFilter.pm before &#34;my $orig_func = \&#38;Test::Harness::_run_all_tests;&#34;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The reason I did this module was because I wanted &#34;make test&#34; to just  
&gt; run a bunch of files and wanted to use perls regexp istead of the ones  
&gt; I can supply via TEST_FILES to make test.
</div>
    I see.  In this case, I would suggest you file a wishlist request to
Test::Harness, instead of writing your own.  You can use the rt.cpan.org
request tracking system:

<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Public/Bug/Report.html?Queue=Test-Harness">http://rt.cpan.org/Public/Bug/Report.html?Queue=Test-Harness</a></span>

    This shall insure future compatibility.

    If you choose to do so, I would suggest you remove all your current
Test-Harness-FileFilter-* files, to avoid causing bottomless-recursion
problems with future CPAN smoke testers, and prevent someone
accidentally tries your Test-Harness-FileFilter.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Are you using the module or was discovered when doing automated smoke  
&gt; testing?
</div>
    In fact, no.  I&#39;m not using this module.  I discovered this when
running automated smoke tests.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1201413" href="/Public/Bug/Display.html?id=34924#txn-1201413">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;12&nbsp;18:44:12&nbsp;2013</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1201413/634308/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/634308">with headers</a>
<br />
<span class="downloadcontenttype">text/html 345b</span>
</div>
<div class="messagebody">
<div class="message-stanza">Hi,<br>

<br>

I ran into this module during automated testing for all Test-* modules for Test::Builder 1.5.&nbsp; It consumed all the memory on my laptop, quite a surprise.<br>

<br>

I see it&#39;s quite old, could it either be patched or removed?&nbsp; It&#39;s a bit of a land mine to automated testing.<br>

<br>

Thanks<br>

Schwern
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1376365" href="/Public/Bug/Display.html?id=34924#txn-1376365">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;17&nbsp;07:12:27&nbsp;2014</span>
    <span class="description">CHORNY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1376365/730812/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/730812">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 93b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Note: on 5.18.2 tests did not finish in 30 minutes.

-- 
Alexandr Ciornii, <span class="clickylink"><a target="new" rel="nofollow" href="http://chorny.net">http://chorny.net</a></span>
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.411042</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
