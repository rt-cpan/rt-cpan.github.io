<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #87485 for Bio-LITE-Taxonomy-NCBI-Gi2taxid: </title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #87485 for Bio-LITE-Taxonomy-NCBI-Gi2taxid: </h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Bio-LITE-Taxonomy-NCBI-Gi2taxid/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Bio-LITE-Taxonomy-NCBI-Gi2taxid/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Bio-LITE-Taxonomy-NCBI-Gi2taxid/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Bio-LITE-Taxonomy-NCBI-Gi2taxid/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Bio-LITE-Taxonomy-NCBI-Gi2taxid">Bio-LITE-Taxonomy-NCBI-Gi2taxid CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">87485</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Bio-LITE-Taxonomy-NCBI-Gi2taxid/Active/">Bio-LITE-Taxonomy-NCBI-Gi2taxid</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
carlos.borroto [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-235552-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.06    </td>
  </tr>
  <tr id="CF-235553-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Bio-LITE-Taxonomy-NCBI-Gi2taxid-0.07.tar.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1254422/663890/Bio-LITE-Taxonomy-NCBI-Gi2taxid-0.07.tar.gz">
Tue Aug 27 11:01:06 2013 (5.8k) by MOTIF [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;31&nbsp;10:18:17&nbsp;2013</span>
    <span class="description">https://www.google.com/accounts/o8/id?id=AItOawkaiBTa6wo1zS2PwQSxUYeDKEQ9nakwy5E -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

When querying for a GI not present in the taxonomy map file I get this error:
$ ./gi2taxid.pl 525338721
substr outside of string at /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm line 160.
Use of uninitialized value in unpack at /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm line 160.
Use of uninitialized value in left bitshift &#40;&lt;&lt;&#41; at /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm line 161.
Use of uninitialized value in bitwise or &#40;|&#41; at /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm line 161.
Use of uninitialized value in left bitshift &#40;&lt;&lt;&#41; at /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm line 161.
cborroto@rckblast02:~$ vim /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm

I would expect to get &#39;undef&#39; or an empty string.

Thanks,
Carlos
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;27&nbsp;10:15:14&nbsp;2013</span>
    <span class="description">MOTIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is not accurate.
If the GI is not present, you always get a taxid of 0.
If you use a GI that is greater than the last GI in the map file you get the warning &#40;not error&#41; you are reporting &#40;only in save_mem is off&#41;. Even with the warning, you get the taxid value of 0, so no damage here.

If you expect wrong GIs and you don&#39;t like the extra warnings you can disable them by locally clobbering the warning handler. Something like this should work:

my $taxid;
{
  local $SIG{__WARN__} = sub {};
  $taxid = $dict-&gt;get_taxid&#40;5253387210000&#41;;
}

Hope this helps,

M;

On Wed Jul 31 10:18:17 2013, <span class="clickylink"><a target="new" rel="nofollow" href="https://www.google.com/accounts/o8/id?id=AItOawkaiBTa6wo1zS2PwQSxUYeDKEQ9nakwy5E">https://www.google.com/accounts/o8/id?id=AItOawkaiBTa6wo1zS2PwQSxUYeDKEQ9nakwy5E</a></span> wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; When querying for a GI not present in the taxonomy map file I get this
&gt; error:
&gt; $ ./gi2taxid.pl 525338721
&gt; substr outside of string at
&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm line
&gt; 160.
&gt; Use of uninitialized value in unpack at
&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm line
&gt; 160.
&gt; Use of uninitialized value in left bitshift &#40;&lt;&lt;&#41; at
&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm line
&gt; 161.
&gt; Use of uninitialized value in bitwise or &#40;|&#41; at
&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm line
&gt; 161.
&gt; Use of uninitialized value in left bitshift &#40;&lt;&lt;&#41; at
&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm line
&gt; 161.
&gt; cborroto@rckblast02:~$ vim
&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm
&gt; 
&gt; I would expect to get &#39;undef&#39; or an empty string.
&gt; 
&gt; Thanks,
&gt; Carlos
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;27&nbsp;10:15:14&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;27&nbsp;10:17:26&nbsp;2013</span>
    <span class="description">MOTIF [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;27&nbsp;10:33:44&nbsp;2013</span>
    <span class="description">carlos.borroto [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #87485]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 27 Aug 2013 10:33:08 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Bio-LITE-Taxonomy-NCBI-Gi2taxid [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Carlos Borroto &lt;carlos.borroto [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I didn&#39;t notice it was just a warning. It is also good to know that it
will only happen on GIs greater than the last entry in the map file.

I&#39;m however surprised you feel this is not a valid bug in need of a
fix. I think a fix should be fairly simple to implement. I don&#39;t like
they idea of masking warnings, I think you agree it is not a safe
thing to do. These particularly warnings are creating a lot of
unnecessary noise in the output of my tool. If you feel ok with just
returning 0 for missing GIs in the right range why not treat this case
the same way?

By the way, this happens in my case after updating genbank but failing
to update the map file. While I&#39;m taking the necessary precautions to
avoid this corner case, again I feel is a valid case that should be
taken care of properly.

Thanks for you code, it&#39;s helping me a lot,
Carlos

On Tue, Aug 27, 2013 at 10:15 AM, Miguel Pignatelli via RT
&lt;bug-Bio-LITE-Taxonomy-NCBI-Gi2taxid@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=87485">https://rt.cpan.org/Ticket/Display.html?id=87485</a></span> &gt;
&gt;
&gt; This is not accurate.
&gt; If the GI is not present, you always get a taxid of 0.
&gt; If you use a GI that is greater than the last GI in the map file you get the warning &#40;not error&#41; you are reporting &#40;only in save_mem is off&#41;. Even with the warning, you get the taxid value of 0, so no damage here.
&gt;
&gt; If you expect wrong GIs and you don&#39;t like the extra warnings you can disable them by locally clobbering the warning handler. Something like this should work:
&gt;
&gt; my $taxid;
&gt; {
&gt;   local $SIG{__WARN__} = sub {};
&gt;   $taxid = $dict-&gt;get_taxid&#40;5253387210000&#41;;
&gt; }
&gt;
&gt; Hope this helps,
&gt;
&gt; M;
&gt;
&gt; On Wed Jul 31 10:18:17 2013, <span class="clickylink"><a target="new" rel="nofollow" href="https://www.google.com/accounts/o8/id?id=AItOawkaiBTa6wo1zS2PwQSxUYeDKEQ9nakwy5E">https://www.google.com/accounts/o8/id?id=AItOawkaiBTa6wo1zS2PwQSxUYeDKEQ9nakwy5E</a></span> wrote:
<div class="message-stanza open">&gt;&gt; Hi,
&gt;&gt;
&gt;&gt; When querying for a GI not present in the taxonomy map file I get this
&gt;&gt; error:
&gt;&gt; $ ./gi2taxid.pl 525338721
&gt;&gt; substr outside of string at
&gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm line
&gt;&gt; 160.
&gt;&gt; Use of uninitialized value in unpack at
&gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm line
&gt;&gt; 160.
&gt;&gt; Use of uninitialized value in left bitshift &#40;&lt;&lt;&#41; at
&gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm line
&gt;&gt; 161.
&gt;&gt; Use of uninitialized value in bitwise or &#40;|&#41; at
&gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm line
&gt;&gt; 161.
&gt;&gt; Use of uninitialized value in left bitshift &#40;&lt;&lt;&#41; at
&gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm line
&gt;&gt; 161.
&gt;&gt; cborroto@rckblast02:~$ vim
&gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm
&gt;&gt;
&gt;&gt; I would expect to get &#39;undef&#39; or an empty string.
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt; Carlos
</div>&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;27&nbsp;11:01:06&nbsp;2013</span>
    <span class="description">MOTIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have just uploaded a new version containing a fix to this problem &#40;it will probably take some time until it is available on cpan&#41;. I am also attaching the tarball for you to try if you don&#39;t want to wait.
Please, let me know if this solves your issue or have any other problem with this module.

Cheers,

M;


On Tue Aug 27 10:33:44 2013, carlos.borroto@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I didn&#39;t notice it was just a warning. It is also good to know that it
&gt; will only happen on GIs greater than the last entry in the map file.
&gt; 
&gt; I&#39;m however surprised you feel this is not a valid bug in need of a
&gt; fix. I think a fix should be fairly simple to implement. I don&#39;t like
&gt; they idea of masking warnings, I think you agree it is not a safe
&gt; thing to do. These particularly warnings are creating a lot of
&gt; unnecessary noise in the output of my tool. If you feel ok with just
&gt; returning 0 for missing GIs in the right range why not treat this case
&gt; the same way?
&gt; 
&gt; By the way, this happens in my case after updating genbank but failing
&gt; to update the map file. While I&#39;m taking the necessary precautions to
&gt; avoid this corner case, again I feel is a valid case that should be
&gt; taken care of properly.
&gt; 
&gt; Thanks for you code, it&#39;s helping me a lot,
&gt; Carlos
&gt; 
&gt; On Tue, Aug 27, 2013 at 10:15 AM, Miguel Pignatelli via RT
&gt; &lt;bug-Bio-LITE-Taxonomy-NCBI-Gi2taxid@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=87485">https://rt.cpan.org/Ticket/Display.html?id=87485</a></span> &gt;
&gt; &gt;
&gt; &gt; This is not accurate.
&gt; &gt; If the GI is not present, you always get a taxid of 0.
&gt; &gt; If you use a GI that is greater than the last GI in the map file you
&gt; &gt; get the warning &#40;not error&#41; you are reporting &#40;only in save_mem is
&gt; &gt; off&#41;. Even with the warning, you get the taxid value of 0, so no
&gt; &gt; damage here.
&gt; &gt;
&gt; &gt; If you expect wrong GIs and you don&#39;t like the extra warnings you can
&gt; &gt; disable them by locally clobbering the warning handler. Something
&gt; &gt; like this should work:
&gt; &gt;
&gt; &gt; my $taxid;
&gt; &gt; {
&gt; &gt;   local $SIG{__WARN__} = sub {};
&gt; &gt;   $taxid = $dict-&gt;get_taxid&#40;5253387210000&#41;;
&gt; &gt; }
&gt; &gt;
&gt; &gt; Hope this helps,
&gt; &gt;
&gt; &gt; M;
&gt; &gt;
&gt; &gt; On Wed Jul 31 10:18:17 2013,
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://www.google.com/accounts/o8/id?id=AItOawkaiBTa6wo1zS2PwQSxUYeDKEQ9nakwy5E">https://www.google.com/accounts/o8/id?id=AItOawkaiBTa6wo1zS2PwQSxUYeDKEQ9nakwy5E</a></span>
&gt; &gt; wrote:
<div class="message-stanza open">&gt; &gt;&gt; Hi,
&gt; &gt;&gt;
&gt; &gt;&gt; When querying for a GI not present in the taxonomy map file I get
&gt; &gt;&gt; this
&gt; &gt;&gt; error:
&gt; &gt;&gt; $ ./gi2taxid.pl 525338721
&gt; &gt;&gt; substr outside of string at
&gt; &gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm
&gt; &gt;&gt; line
&gt; &gt;&gt; 160.
&gt; &gt;&gt; Use of uninitialized value in unpack at
&gt; &gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm
&gt; &gt;&gt; line
&gt; &gt;&gt; 160.
&gt; &gt;&gt; Use of uninitialized value in left bitshift &#40;&lt;&lt;&#41; at
&gt; &gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm
&gt; &gt;&gt; line
&gt; &gt;&gt; 161.
&gt; &gt;&gt; Use of uninitialized value in bitwise or &#40;|&#41; at
&gt; &gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm
&gt; &gt;&gt; line
&gt; &gt;&gt; 161.
&gt; &gt;&gt; Use of uninitialized value in left bitshift &#40;&lt;&lt;&#41; at
&gt; &gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm
&gt; &gt;&gt; line
&gt; &gt;&gt; 161.
&gt; &gt;&gt; cborroto@rckblast02:~$ vim
&gt; &gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm
&gt; &gt;&gt;
&gt; &gt;&gt; I would expect to get &#39;undef&#39; or an empty string.
&gt; &gt;&gt;
&gt; &gt;&gt; Thanks,
&gt; &gt;&gt; Carlos
</div>&gt; &gt;
&gt; &gt;
</div></div></div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Bio-LITE-Taxonomy-NCBI-Gi2taxid-0.07.tar.gz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1254422/663890/Bio-LITE-Taxonomy-NCBI-Gi2taxid-0.07.tar.gz">Download Bio-LITE-Taxonomy-NCBI-Gi2taxid-0.07.tar.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 5.8k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;27&nbsp;11:01:07&nbsp;2013</span>
    <span class="description">MOTIF [...] cpan.org -  Status changed from &#39;rejected&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;27&nbsp;14:09:40&nbsp;2013</span>
    <span class="description">carlos.borroto [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #87485]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 27 Aug 2013 14:09:07 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Bio-LITE-Taxonomy-NCBI-Gi2taxid [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Carlos Borroto &lt;carlos.borroto [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I can confirm this indeed fix this corner case mishandling. Thanks!

On Tue, Aug 27, 2013 at 11:01 AM, Miguel Pignatelli via RT
&lt;bug-Bio-LITE-Taxonomy-NCBI-Gi2taxid@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=87485">https://rt.cpan.org/Ticket/Display.html?id=87485</a></span> &gt;
&gt;
&gt; I have just uploaded a new version containing a fix to this problem &#40;it will probably take some time until it is available on cpan&#41;. I am also attaching the tarball for you to try if you don&#39;t want to wait.
&gt; Please, let me know if this solves your issue or have any other problem with this module.
&gt;
&gt; Cheers,
&gt;
&gt; M;
&gt;
&gt;
&gt; On Tue Aug 27 10:33:44 2013, carlos.borroto@gmail.com wrote:
<div class="message-stanza open">&gt;&gt; I didn&#39;t notice it was just a warning. It is also good to know that it
&gt;&gt; will only happen on GIs greater than the last entry in the map file.
&gt;&gt;
&gt;&gt; I&#39;m however surprised you feel this is not a valid bug in need of a
&gt;&gt; fix. I think a fix should be fairly simple to implement. I don&#39;t like
&gt;&gt; they idea of masking warnings, I think you agree it is not a safe
&gt;&gt; thing to do. These particularly warnings are creating a lot of
&gt;&gt; unnecessary noise in the output of my tool. If you feel ok with just
&gt;&gt; returning 0 for missing GIs in the right range why not treat this case
&gt;&gt; the same way?
&gt;&gt;
&gt;&gt; By the way, this happens in my case after updating genbank but failing
&gt;&gt; to update the map file. While I&#39;m taking the necessary precautions to
&gt;&gt; avoid this corner case, again I feel is a valid case that should be
&gt;&gt; taken care of properly.
&gt;&gt;
&gt;&gt; Thanks for you code, it&#39;s helping me a lot,
&gt;&gt; Carlos
&gt;&gt;
&gt;&gt; On Tue, Aug 27, 2013 at 10:15 AM, Miguel Pignatelli via RT
&gt;&gt; &lt;bug-Bio-LITE-Taxonomy-NCBI-Gi2taxid@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt;&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=87485">https://rt.cpan.org/Ticket/Display.html?id=87485</a></span> &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; This is not accurate.
&gt;&gt; &gt; If the GI is not present, you always get a taxid of 0.
&gt;&gt; &gt; If you use a GI that is greater than the last GI in the map file you
&gt;&gt; &gt; get the warning &#40;not error&#41; you are reporting &#40;only in save_mem is
&gt;&gt; &gt; off&#41;. Even with the warning, you get the taxid value of 0, so no
&gt;&gt; &gt; damage here.
&gt;&gt; &gt;
&gt;&gt; &gt; If you expect wrong GIs and you don&#39;t like the extra warnings you can
&gt;&gt; &gt; disable them by locally clobbering the warning handler. Something
&gt;&gt; &gt; like this should work:
&gt;&gt; &gt;
&gt;&gt; &gt; my $taxid;
&gt;&gt; &gt; {
&gt;&gt; &gt;   local $SIG{__WARN__} = sub {};
&gt;&gt; &gt;   $taxid = $dict-&gt;get_taxid&#40;5253387210000&#41;;
&gt;&gt; &gt; }
&gt;&gt; &gt;
&gt;&gt; &gt; Hope this helps,
&gt;&gt; &gt;
&gt;&gt; &gt; M;
&gt;&gt; &gt;
&gt;&gt; &gt; On Wed Jul 31 10:18:17 2013,
&gt;&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://www.google.com/accounts/o8/id?id=AItOawkaiBTa6wo1zS2PwQSxUYeDKEQ9nakwy5E">https://www.google.com/accounts/o8/id?id=AItOawkaiBTa6wo1zS2PwQSxUYeDKEQ9nakwy5E</a></span>
&gt;&gt; &gt; wrote:
<div class="message-stanza open">&gt;&gt; &gt;&gt; Hi,
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; When querying for a GI not present in the taxonomy map file I get
&gt;&gt; &gt;&gt; this
&gt;&gt; &gt;&gt; error:
&gt;&gt; &gt;&gt; $ ./gi2taxid.pl 525338721
&gt;&gt; &gt;&gt; substr outside of string at
&gt;&gt; &gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm
&gt;&gt; &gt;&gt; line
&gt;&gt; &gt;&gt; 160.
&gt;&gt; &gt;&gt; Use of uninitialized value in unpack at
&gt;&gt; &gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm
&gt;&gt; &gt;&gt; line
&gt;&gt; &gt;&gt; 160.
&gt;&gt; &gt;&gt; Use of uninitialized value in left bitshift &#40;&lt;&lt;&#41; at
&gt;&gt; &gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm
&gt;&gt; &gt;&gt; line
&gt;&gt; &gt;&gt; 161.
&gt;&gt; &gt;&gt; Use of uninitialized value in bitwise or &#40;|&#41; at
&gt;&gt; &gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm
&gt;&gt; &gt;&gt; line
&gt;&gt; &gt;&gt; 161.
&gt;&gt; &gt;&gt; Use of uninitialized value in left bitshift &#40;&lt;&lt;&#41; at
&gt;&gt; &gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm
&gt;&gt; &gt;&gt; line
&gt;&gt; &gt;&gt; 161.
&gt;&gt; &gt;&gt; cborroto@rckblast02:~$ vim
&gt;&gt; &gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Bio/LITE/Taxonomy/NCBI/Gi2taxid.pm
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; I would expect to get &#39;undef&#39; or an empty string.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Thanks,
&gt;&gt; &gt;&gt; Carlos
</div>&gt;&gt; &gt;
&gt;&gt; &gt;
</div></div>&gt;
&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
