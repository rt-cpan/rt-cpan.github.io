<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #75322 for jmx4perl: Not correctly escaping / when executing bean methods</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #75322 for jmx4perl: Not correctly escaping / when executing bean methods</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/jmx4perl/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/jmx4perl/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/jmx4perl/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/jmx4perl/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/jmx4perl">jmx4perl CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">75322</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/jmx4perl/Active/">jmx4perl</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
bigbeerjr [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-227286-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.04    </td>
  </tr>
  <tr id="CF-227287-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;26&nbsp;12:58:18&nbsp;2012</span>
    <span class="description">bigbeerjr [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Not correctly escaping / when executing bean methods</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello, 

I recently upgraded to 1.04 &#40;from an unknown past version&#41; and some of 
the scripts that I had written started failing with:

Invalid number of operation arguments. Operation &lt;method name&gt; on &lt;bean&gt; 
requires X parameters, not X as given.

I did a packet capture and noticed that when preforming the GET to the 
jolokia instance, / is used to separate the arguments. In 2 cases I have 
/&#39;s in my arguments. 

In one case I have a string with some /, if I substitute the / with 
&#38;#47; everything works ok.

In another case I have some xml defined as a string, substituting the / 
gets the the correct number of params called, but the xml fails to be 
correctly parsed by the bean, leading me to thing there is more escaping 
that is not being done correctly.

I am using something like:

$p1 = &#34;07/17/1980&#34;
$jmx = new JMX::Jmx4Perl&#40;url =&gt; $url, product =&gt; &#34;jboss&#34;&#41;;
$value = $jmx-&gt;execute&#40;$mbean,$operation,$p1&#41;;
print $value;



Thanks!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other SystemError even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;26&nbsp;12:58:18&nbsp;2012</span>
    <span class="description">The RT System itself -  System error</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sending the previous mail has failed.  Please contact your admin, they can find more details in the logs.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other SystemError odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;26&nbsp;12:58:18&nbsp;2012</span>
    <span class="description">The RT System itself -  System error</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sending the previous mail has failed.  Please contact your admin, they can find more details in the logs.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;29&nbsp;14:05:56&nbsp;2012</span>
    <span class="description">roland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza"><div>
<div>First of all, if you want to avoid any escaping issue, I highly</div>
<div>recommend to use POST instead of GET for the requests. &nbsp;</div>
<div>&nbsp;</div>
<div>Next, the escaping scheme changed from pre-1.0 to 1.0 so that instead</div>
<div>of my own clumsy escaping scheme (&quot;/&quot; &mdash;&gt; &quot;/&mdash;/&quot;) it uses now usual</div>
<div>escaping with \ (&quot;/&quot; -&gt; &quot;\/&quot;) ehm, I mean &quot;!&quot; as escape parameter. See</div>
<div><span class="clickylink"><a target="new" rel="nofollow" href="http://www.jolokia.org/reference/html/protocol.html#get-request">http://www.jolokia.org/reference/html/protocol.html#get-request</a></span> for</div>
<div>the details. &nbsp;Using HTML entity encoding doesn't work, since most</div>
<div>Servlet containers unescape the slashes already before the agent is</div>
<div>called (for security reasons mostly).</div>
<div>&nbsp;</div>
<div>See the sidebar in the reference manual under the URL above. &nbsp;If you</div>
<div>use a Jolokia agent &lt; 1.0 and jmx4perl &gt;= 1.0 you can use the</div>
<div>commandline option '--legacy-escaping' on all tools. &nbsp;If you have an</div>
<div>Jolokia agent &gt;= 1.0.0 and jmx4perl &lt; 1.0 you should upgrade jmx4perl</div>
<div>(but this you already did). &nbsp;For you code example in the bug ticket</div>
<div>you can add the option (&quot;legacy-escape&quot; =&gt; 1) to the constructor of</div>
<div>JMX::Jmx4Perl (and BTW can ommit &quot;product&quot; =&gt; &quot;jboss&quot; if you dont' use</div>
<div>any alias feature from jmx4perl), but only if you are talking with a</div>
<div>pre 1.0 Jolokia agent.</div>
<div>&nbsp;</div>
<div>Sorry for the inconvenience, but I wanted to remove the old escaping</div>
<div>scheme before going 1.0. From now, I will be much more careful with</div>
<div>respect to backwards comatibility.</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
</div>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;29&nbsp;14:05:57&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;29&nbsp;14:23:50&nbsp;2012</span>
    <span class="description">bigbeerjr [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> bigbeerjr [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Feb 29 14:05:56 2012, ROLAND wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; First of all, if you want to avoid any escaping issue, I
&gt; highlyrecommend to use
&gt; POST instead of GET for the requests. Next, the escaping scheme
&gt; changed from
&gt; pre-1.0 to 1.0 so that insteadof my own clumsy escaping scheme &#40;&#34;/&#34; —&gt;
&gt; &#34;/—/&#34;&#41;
&gt; it uses now usualescaping with \ &#40;&#34;/&#34; -&gt; &#34;\/&#34;&#41; ehm, I mean &#34;!&#34; as
&gt; escape
&gt; parameter. See<span class="clickylink"><a target="new" rel="nofollow" href="http://www.jolokia.org/reference/html/protocol.html#get-">http://www.jolokia.org/reference/html/protocol.html#get-</a></span>
&gt; request
&gt; forthe details. Using HTML entity encoding doesn&#39;t work, since
&gt; mostServlet
&gt; containers unescape the slashes already before the agent iscalled &#40;for
&gt; security
&gt; reasons mostly&#41;. See the sidebar in the reference manual under the URL
&gt; above.
&gt; If youuse a Jolokia agent &lt; 1.0 and jmx4perl &gt;= 1.0 you can use
&gt; thecommandline
&gt; option &#39;--legacy-escaping&#39; on all tools. If you have anJolokia agent
<div class="message-stanza open">&gt; &gt;= 1.0.0
</div>&gt; and jmx4perl &lt; 1.0 you should upgrade jmx4perl&#40;but this you already
&gt; did&#41;. For
&gt; you code example in the bug ticketyou can add the option &#40;&#34;legacy-
&gt; escape&#34; =&gt; 1&#41;
&gt; to the constructor ofJMX::Jmx4Perl &#40;and BTW can ommit &#34;product&#34; =&gt;
&gt; &#34;jboss&#34; if
&gt; you dont&#39; useany alias feature from jmx4perl&#41;, but only if you are
&gt; talking with
&gt; apre 1.0 Jolokia agent. Sorry for the inconvenience, but I wanted to
&gt; remove the
&gt; old escapingscheme before going 1.0. From now, I will be much more
&gt; careful withrespect
&gt; to backwards comatibility.
</div>

This is correct. I have jolokia agent 0.91 deployed. Using either the 
legacy-escape option or switching to post fixes the issue.

THANK YOU, please close this bug.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;29&nbsp;14:32:33&nbsp;2012</span>
    <span class="description">roland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza">solved.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;29&nbsp;14:32:34&nbsp;2012</span>
    <span class="description">roland [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
