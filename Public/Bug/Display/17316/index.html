<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #17316 for Sys-Syslog: openlog&#40;&#41; croak&#40;&#41;s if daemon is down instead of returning error to caller</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #17316 for Sys-Syslog: openlog&#40;&#41; croak&#40;&#41;s if daemon is down instead of returning error to caller</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Sys-Syslog">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Sys-Syslog">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Sys-Syslog">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Sys-Syslog">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Sys-Syslog">Sys-Syslog CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">17316</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Sys-Syslog">Sys-Syslog</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">SAPER [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ric [...] opus1.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-30616-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.13    </td>
  </tr>
  <tr id="CF-30617-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.15    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=17316">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-159479" href="/Public/Bug/Display.html?id=17316#txn-159479">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;27&nbsp;11:30:24&nbsp;2006</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> openlog&#40;&#41; croak&#40;&#41;s if daemon is down instead of returning error
 to caller</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/159479/49479/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/49479">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 522b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">openlog&#40;&#34;watcher&#34;,&#34;pid,ndelay&#34;,&#34;mail&#34;&#41;
croak&#40;&#41;s if no syslog daemon is available.  It would be much more 
useful if openlog&#40;&#41; returned undef to the caller, so the application 
could use alternative error reporting.  As it is, the error that was 
going to be logged is lost, and the application is aborted with
 unix dgram connect: Connection refused at daemon_watch.prl line 668
 no connection to syslog available at daemon_watch.prl line 668

This is with perl, v5.8.6 built for i486-linux under Slackware Linux 
10.1.
--
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-159509" href="/Public/Bug/Display.html?id=17316#txn-159509">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;27&nbsp;12:06:48&nbsp;2006</span>
    <span class="description">ric [...] opus1.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #17316] AutoReply: openlog&#40;&#41; croak&#40;&#41;s if daemon is down instead of returning error to caller</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 27 Jan 2006 10:05:52 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ric Anderson &lt;ric [...] Opus1.COM&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/159509/49494/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/49494">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Possible fix for problem noted below - 
--- Syslog.pm   2006-01-10 17:42:01.000000000 -0700
+++ ./blib/lib/Sys/Syslog.pm    2006-01-27 10:03:11.000000000 -0700
@@ -42,6 +42,7 @@
 my $current_proto = undef;
 my $failed = undef;
 my $fail_time = undef;
+my $lo_ndelay = undef;
 our &#40;$connected, @fallbackMethods, $syslog_send, $host&#41;;
 
 use Socket &#39;:all&#39;;
@@ -534,7 +535,7 @@
 sub openlog {
     our &#40;$ident, $logopt, $facility&#41; = @_;  # package vars
     our $lo_pid = $logopt =~ /\bpid\b/;
-    our $lo_ndelay = $logopt =~ /\bndelay\b/;
+    $lo_ndelay = $logopt =~ /\bndelay\b/;
     our $lo_nowait = $logopt =~ /\bnowait\b/;
     return 1 unless $lo_ndelay;
     &#38;connect;
@@ -798,6 +799,7 @@
        $current_proto = $proto;
         my&#40;$old&#41; = select&#40;SYSLOG&#41;; $| = 1; select&#40;$old&#41;;
     } else {
+        return&#40;undef&#41; if&#40;$lo_ndelay&#41;;
        @fallbackMethods = &#40;&#41;;
        croak join &#34;\n\t- &#34;, &#34;no connection to syslog available&#34;, @errs
     }
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; -----Original Message-----
&gt; From: Bugs in Sys-Syslog via RT [mailto:bug-Sys-Syslog@rt.cpan.org] 
&gt; Sent: Friday, January 27, 2006 9:30 AM
&gt; To: ric@Opus1.COM
&gt; Subject: [rt.cpan.org #17316] AutoReply: openlog&#40;&#41; croak&#40;&#41;s 
&gt; if daemon is down instead of returning error to caller
&gt; 
&gt; 
&gt; 
&gt; Greetings,
&gt; 
&gt; This message has been automatically generated in response to the
&gt; creation of a trouble ticket regarding:
&gt;       &#34;openlog&#40;&#41; croak&#40;&#41;s if daemon is down instead of 
&gt; returning error to caller&#34;, 
&gt; a summary of which appears below.
&gt; 
&gt; There is no need to reply to this message right now.  Your 
&gt; ticket has been
&gt; assigned an ID of [rt.cpan.org #17316].
&gt; 
&gt; Please include the string:
&gt; 
&gt;          [rt.cpan.org #17316]
&gt; 
&gt; in the subject line of all future correspondence about this 
&gt; issue. To do so, 
&gt; you may reply to this message.
&gt; 
&gt;                         Thank you,
&gt;                         bug-Sys-Syslog@rt.cpan.org
&gt; 
&gt; --------------------------------------------------------------
&gt; -----------
&gt; openlog&#40;&#34;watcher&#34;,&#34;pid,ndelay&#34;,&#34;mail&#34;&#41;
&gt; croak&#40;&#41;s if no syslog daemon is available.  It would be much more 
&gt; useful if openlog&#40;&#41; returned undef to the caller, so the application 
&gt; could use alternative error reporting.  As it is, the error that was 
&gt; going to be logged is lost, and the application is aborted with
&gt;  unix dgram connect: Connection refused at daemon_watch.prl line 668
&gt;  no connection to syslog available at daemon_watch.prl line 668
&gt; 
&gt; This is with perl, v5.8.6 built for i486-linux under Slackware Linux 
&gt; 10.1.
&gt; --
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-160252" href="/Public/Bug/Display.html?id=17316#txn-160252">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;29&nbsp;17:41:52&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17316] openlog&#40;&#41; croak&#40;&#41;s if daemon is down instead of returning error to caller </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 29 Jan 2006 23:41:03 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sébastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/160252/49903/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/49903">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1002b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; openlog&#40;&#34;watcher&#34;,&#34;pid,ndelay&#34;,&#34;mail&#34;&#41;
&gt; croak&#40;&#41;s if no syslog daemon is available.  It would be much more
&gt; useful if openlog&#40;&#41; returned undef to the caller, so the application
&gt; could use alternative error reporting.  As it is, the error that was
&gt; going to be logged is lost, and the application is aborted with
&gt;  unix dgram connect: Connection refused at daemon_watch.prl line 668
&gt;  no connection to syslog available at daemon_watch.prl line 668
</div>
I&#39;m not very fond of this request: the module works exactly as
documented, and since a long time, even before it was documented
to do so. Looking at the source of old versions, back to the one
included in 5.003, openlog&#40;&#41; would croak&#40;&#41; if it couldn&#39;t connect
to a syslog service, so accessing your request would mean changing
a decade-old behaviour.

By the way, why not using the classical Perl way to handle exceptions:

    eval { openlog&#40;...&#41; };
    doe something_else&#40;&#41; if $@;

--
Sébastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-160253" href="/Public/Bug/Display.html?id=17316#txn-160253">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;29&nbsp;17:41:52&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-161545" href="/Public/Bug/Display.html?id=17316#txn-161545">#</a>      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;01&nbsp;19:50:27&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17316] openlog&#40;&#41; croak&#40;&#41;s if daemon is down instead of returning error to caller </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 2 Feb 2006 01:49:26 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sébastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/161545/50704/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/50704">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 173b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

Didn&#39;t heard anything back from you.


Sébastien Aperghis-Tramoni
  -- - --- -- - -- - --- -- - --- -- - --[ <span class="clickylink"><a target="new" rel="nofollow" href="http://maddingue.org">http://maddingue.org</a></span> ]
Close the world, txEn eht nepO
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-161583" href="/Public/Bug/Display.html?id=17316#txn-161583">#</a>      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;01&nbsp;22:04:42&nbsp;2006</span>
    <span class="description">ric [...] opus1.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #17316] openlog&#40;&#41; croak&#40;&#41;s if daemon is down instead of returning error to caller</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 01 Feb 2006 20:02:59 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ric Anderson &lt;ric [...] Opus1.COM&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/161583/50726/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/50726">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 741b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Not much to say - my perspective is that openlog&#40;&#41; should
return the failure status to the app directly, rather than
requiring what I view as a kludge based on eval&#40;&#41;.

Since you disagree, I guess you close the ticket as a
&#34;documented feature&#34;.
Ric

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; -----Original Message-----
&gt; From: Sébastien Aperghis-Tramoni via RT 
&gt; [mailto:bug-Sys-Syslog@rt.cpan.org] 
&gt; Sent: Wednesday, February 01, 2006 5:50 PM
&gt; To: ric@Opus1.COM
&gt; Subject: Re: [rt.cpan.org #17316] openlog&#40;&#41; croak&#40;&#41;s if 
&gt; daemon is down instead of returning error to caller
&gt; 
&gt; 
&gt; Hello,
&gt; 
&gt; Didn&#39;t heard anything back from you.
&gt; 
&gt; 
&gt; Sébastien Aperghis-Tramoni
&gt;   -- - --- -- - -- - --- -- - --- -- - --[ <span class="clickylink"><a target="new" rel="nofollow" href="http://maddingue.org">http://maddingue.org</a></span> ]
&gt; Close the world, txEn eht nepO
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-161677" href="/Public/Bug/Display.html?id=17316#txn-161677">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;02&nbsp;03:50:59&nbsp;2006</span>
    <span class="description">maddingue [...] free.fr -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #17316] openlog&#40;&#41; croak&#40;&#41;s if daemon is down instead of returning error to caller</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 02 Feb 2006 09:45:07 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sébastien Aperghis-Tramoni &lt;maddingue [...] free.fr&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/161677/50779/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/50779">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 497b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">ric@opus1.com wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Not much to say - my perspective is that openlog&#40;&#41; should
&gt; return the failure status to the app directly, rather than
&gt; requiring what I view as a kludge based on eval&#40;&#41;.
&gt;
&gt; Since you disagree, I guess you close the ticket as a
&gt; &#34;documented feature&#34;.
</div>
I can ask on P5P as Sys::Syslog is a core module that was
CPANized very recently, but I think they&#39;ll also confirm
that old behaviour must be preserved.

--
Sébastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-193645" href="/Public/Bug/Display.html?id=17316#txn-193645">#</a>      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;08&nbsp;10:26:44&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-202076" href="/Public/Bug/Display.html?id=17316#txn-202076">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;31&nbsp;18:09:52&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> eravin [...] panix.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/202076/75816/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/75816">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Feb 02 03:50:59 2006, maddingue@free.fr wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ric@opus1.com wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; Not much to say - my perspective is that openlog&#40;&#41; should
&gt; &gt; return the failure status to the app directly, rather than
&gt; &gt; requiring what I view as a kludge based on eval&#40;&#41;.
&gt; &gt;
&gt; &gt; Since you disagree, I guess you close the ticket as a
&gt; &gt; &#34;documented feature&#34;.
</div>&gt; 
&gt; I can ask on P5P as Sys::Syslog is a core module that was
&gt; CPANized very recently, but I think they&#39;ll also confirm
&gt; that old behaviour must be preserved.
</div>
I believe this &#34;old behaviour&#34; was an accident, and that no one is 
relying on it.  It was not documented until I reported the problem
in August 2005.  Anyone who approaches Syslog.pm expecting it to behave
more or less like the Unix syslog&#40;3&#41; is very surprised when this 
happens.

The workaround is rather ugly - this is what I&#39;ve had to put into
all of my Perl daemons that use syslog:

# Syslog.pm::syslog&#40;&#41; has a fatal exit if syslogd is not running
# The workaround is below.
no warnings;  # because we&#39;re redefining syslog&#40;&#41;
sub syslog
{ eval {
                local $SIG{&#34;__DIE__&#34;}= sub { }; Sys::Syslog::syslog&#40;@_&#41;;
        }
}
use warnings;

Since Sys::Syslog claims to be an interface to syslog&#40;3&#41; &#40;even though 
it&#39;s not&#41;, I think it&#39;s a safe move to change it to behave more like
syslog&#40;3&#41; and less like something that will crash an otherwise reliable
Perl daemon.  If that cannot be permitted, then at the very least, 
please add a &#34;nofatal&#34; flag that the caller can set to suppress fatal 
exits on outside errors.  &#40;I think the fatals on syntax or caller errors
don&#39;t need to be suppressed, since those are presumably bugs in the Perl 
script, not outside conditions like syslogd going down.&#41;

I appreciate the recent code changes to Syslog.pm that added retry
capability - that was missing in older versions.  Of course, most users
won&#39;t be able to use that retry capability unless they go the extra mile
as shown above to suppress the fatal error first...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-202127" href="/Public/Bug/Display.html?id=17316#txn-202127">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;31&nbsp;20:15:30&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> eravin [...] panix.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/202127/75861/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/75861">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed May 31 18:09:52 2006, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Thu Feb 02 03:50:59 2006, maddingue@free.fr wrote:
</div>...
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &gt; I can ask on P5P as Sys::Syslog is a core module that was
&gt; &gt; CPANized very recently, but I think they&#39;ll also confirm
&gt; &gt; that old behaviour must be preserved.
</div>
I&#39;ve thought a little bit more about this.  The problems with the &#34;old 
behavior&#34; are bigger than previously thought.  Here&#39;s how the &#34;old 
behavior&#34; worked:

Sys::Syslog pre-CPAN-ized version
1a&#41; if syslogd isn&#39;t running when openlog&#40;&#41; is called, program gets 
fatal exception.
2a&#41; if syslogd stops after openlog&#40;&#41; is called, all subsequent syslog&#40;&#41; 
calls are silently discarded.
3a&#41; if syslogd is restarted after openlog&#40;&#41; is called, all subsequent 
syslog&#40;&#41; calls are silently discarded.

And the current CPAN version, Sys::Syslog 0.14, behaves this way:
1b&#41; if sylogd isn&#39;t running when openlog&#40;&#41; is called, program gets fatal 
exception. &#40;same behavior&#41;
2b&#41; if syslogd stops after openlog&#40;&#41; is called, a subsequent syslog&#40;&#41; 
call will provoke a reconnection attempt and get a fatal exception &#40;new 
behavior&#41;
3b&#41; if syslogd is restarted after openlog&#40;&#41; is called, a subsequent
syslog&#40;&#41; will provoke a reconnection attempt and the syslog messages
will be logged normally. &#40;new behavior&#41;

So the &#34;old behavior&#34; for &#40;2a&#41; above has now been changed to &#40;2b&#41; - a 
new case has been added where a user will get a surprise fatal 
exception.  And the &#34;old behavior&#34; for &#40;3a&#41; has been changed to &#40;3b&#41; - 
syslog messages that used to be discarded are now being logged properly.

So unless we get rid of the fatal error when the socket can&#39;t be 
connected, the recent changes actually introduce additional cases where 
a working Perl script will crash.

  -- Ed
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-203500" href="/Public/Bug/Display.html?id=17316#txn-203500">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;03&nbsp;20:18:37&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17316] openlog&#40;&#41; croak&#40;&#41;s if daemon is down instead of returning error to caller </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 4 Jun 2006 02:18:06 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sébastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/203500/76922/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/76922">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I believe this &#34;old behaviour&#34; was an accident, and that no one is
&gt; relying on it.  It was not documented until I reported the problem
&gt; in August 2005.  Anyone who approaches Syslog.pm expecting it to behave
&gt; more or less like the Unix syslog&#40;3&#41; is very surprised when this
&gt; happens.
&gt;
&gt; The workaround is rather ugly - this is what I&#39;ve had to put into
&gt; all of my Perl daemons that use syslog: [...]
</div>
Except there&#39;s no need to define a __DIE__ handler. Nesting a call 
inside an eval-block is enough to catch any die, and you can examine, 
or not, the message in $@.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Since Sys::Syslog claims to be an interface to syslog&#40;3&#41; &#40;even though
&gt; it&#39;s not&#41;, I think it&#39;s a safe move to change it to behave more like
&gt; syslog&#40;3&#41; and less like something that will crash an otherwise reliable
&gt; Perl daemon.  If that cannot be permitted, then at the very least,
&gt; please add a &#34;nofatal&#34; flag that the caller can set to suppress fatal
&gt; exits on outside errors.  &#40;I think the fatals on syntax or caller 
&gt; errors
&gt; don&#39;t need to be suppressed, since those are presumably bugs in the 
&gt; Perl
&gt; script, not outside conditions like syslogd going down.&#41;
</div>
Sorry if I look overly conservative, but I don&#39;t know how Sys::Syslog 
is used in the wild, that&#39;s why I prefer not to change the existing 
behaviour. On the other hand, adding new features like a &#34;nofatal&#34; 
option is perfectly acceptable. I note that one in my TODO list.


Sébastien Aperghis-Tramoni
  -- - --- -- - -- - --- -- - --- -- - --[ <span class="clickylink"><a target="new" rel="nofollow" href="http://maddingue.org">http://maddingue.org</a></span> ]
Close the world, txEn eht nepO
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-203515" href="/Public/Bug/Display.html?id=17316#txn-203515">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;03&nbsp;21:21:26&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17316] openlog&#40;&#41; croak&#40;&#41;s if daemon is down instead of returning error to caller </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 4 Jun 2006 03:20:41 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sébastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/203515/76930/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/76930">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 709b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [snip]
&gt; So the &#34;old behavior&#34; for &#40;2a&#41; above has now been changed to &#40;2b&#41; - a
&gt; new case has been added where a user will get a surprise fatal
&gt; exception.  And the &#34;old behavior&#34; for &#40;3a&#41; has been changed to &#40;3b&#41; -
&gt; syslog messages that used to be discarded are now being logged 
&gt; properly.
&gt;
&gt; So unless we get rid of the fatal error when the socket can&#39;t be
&gt; connected, the recent changes actually introduce additional cases where
&gt; a working Perl script will crash.
</div>
Ok, I think you have a point, so I&#39;ll add a &#34;nofatal&#34; option.

Thank you for your detailed analysis :-&#41;


Sébastien Aperghis-Tramoni
  -- - --- -- - -- - --- -- - --- -- - --[ <span class="clickylink"><a target="new" rel="nofollow" href="http://maddingue.org">http://maddingue.org</a></span> ]
Close the world, txEn eht nepO
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-204711" href="/Public/Bug/Display.html?id=17316#txn-204711">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;06&nbsp;18:15:56&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> eravin [...] panix.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/204711/77682/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/77682">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jun 03 20:18:37 2006, SAPER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sorry if I look overly conservative, but I don&#39;t know how Sys::Syslog 
&gt; is used in the wild, that&#39;s why I prefer not to change the existing 
&gt; behaviour. On the other hand, adding new features like a &#34;nofatal&#34; 
&gt; option is perfectly acceptable. I note that one in my TODO list.
</div>
I understand your reluctance to change an existing behavior, but as a 
user of Sys::Syslog &#40;not just for myself - also on the open source
project Mon &#40;mon.sf.net&#41;, which doesn&#39;t expect to get killed by calling 
openlog&#40;&#41; or syslog&#40;&#41; &#41;, I can&#39;t imagine that any programmer wants
a fatal trap.  Look at the sample code in the Sys::Syslog documentation, 
or at the various tutorials on the Web on how to use it.  Everyone 
treats Sys::Syslog as a Perl implemntation of the Unix syslog&#40;3&#41;, which
doesn&#39;t even have return values, much less surprise fatal traps.

Since this wasn&#39;t &#34;documented behavior&#34; until I filed perl bug 36848 
last year, no one could have been coding their programs to use this 
behavior.

I suggest that you make &#34;nonfatal&#34; the default setting, since it will 
fix far, far more programs than it will break.

Thanks for re-visiting this problem...

   -- Ed
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-205819" href="/Public/Bug/Display.html?id=17316#txn-205819">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;08&nbsp;18:32:23&nbsp;2006</span>
    <span class="description">maddingue [...] free.fr -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17316] openlog&#40;&#41; croak&#40;&#41;s if daemon is down instead of returning error to caller </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 9 Jun 2006 00:31:55 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Ed &lt;eravin [...] panix.com&gt;, Ric Anderson &lt;ric [...] opus.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sébastien Aperghis-Tramoni &lt;maddingue [...] free.fr&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/205819/78471/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/78471">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 636b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sorry if I look overly conservative, but I don&#39;t know how Sys::Syslog
&gt; is used in the wild, that&#39;s why I prefer not to change the existing
&gt; behaviour. On the other hand, adding new features like a &#34;nofatal&#34;
&gt; option is perfectly acceptable. I note that one in my TODO list.
</div>
Here is a beta version of Sys::Syslog 0.15:
     <span class="clickylink"><a target="new" rel="nofollow" href="http://maddingue.org/work/Sys-Syslog-0.15b1.tar.gz">http://maddingue.org/work/Sys-Syslog-0.15b1.tar.gz</a></span>

It includes the &#34;nofatal&#34; option, but disabled by default.
Can you test it and tell me whether it better fits your expectations?

Sébastien Aperghis-Tramoni
  -- - --- -- - -- - --- -- - --- -- - --[ <span class="clickylink"><a target="new" rel="nofollow" href="http://maddingue.org">http://maddingue.org</a></span> ]
Close the world, txEn eht nepO
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-205868" href="/Public/Bug/Display.html?id=17316#txn-205868">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;08&nbsp;20:47:22&nbsp;2006</span>
    <span class="description">eravin [...] panix.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Ric Anderson &lt;ric [...] opus.com&gt;, bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17316] openlog&#40;&#41; croak&#40;&#41;s if daemon is down instead of returning error to caller</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 8 Jun 2006 20:46:16 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> S?bastien Aperghis-Tramoni &lt;maddingue [...] free.fr&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ed Ravin &lt;eravin [...] panix.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/205868/78503/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/78503">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 666b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, Jun 09, 2006 at 12:31:55AM +0200, S?bastien Aperghis-Tramoni wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
<div class="message-stanza open">&gt; &gt;Sorry if I look overly conservative, but I don&#39;t know how Sys::Syslog
&gt; &gt;is used in the wild, that&#39;s why I prefer not to change the existing
&gt; &gt;behaviour. On the other hand, adding new features like a &#34;nofatal&#34;
&gt; &gt;option is perfectly acceptable. I note that one in my TODO list.
</div>&gt; 
&gt; Here is a beta version of Sys::Syslog 0.15:
&gt;     <span class="clickylink"><a target="new" rel="nofollow" href="http://maddingue.org/work/Sys-Syslog-0.15b1.tar.gz">http://maddingue.org/work/Sys-Syslog-0.15b1.tar.gz</a></span>
&gt; 
&gt; It includes the &#34;nofatal&#34; option, but disabled by default.
&gt; Can you test it and tell me whether it better fits your expectations?
</div>
Yes, turning on &#34;nofatal&#34; works as expected.

Thanks,

        -- Ed
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-205988" href="/Public/Bug/Display.html?id=17316#txn-205988">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;09&nbsp;03:54:53&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17316] openlog&#40;&#41; croak&#40;&#41;s if daemon is down instead of returning error to caller</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 09 Jun 2006 09:53:53 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sébastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/205988/78608/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/78608">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 437b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Here is a beta version of Sys::Syslog 0.15:
&gt; &gt;     <span class="clickylink"><a target="new" rel="nofollow" href="http://maddingue.org/work/Sys-Syslog-0.15b1.tar.gz">http://maddingue.org/work/Sys-Syslog-0.15b1.tar.gz</a></span>
&gt; &gt;
&gt; &gt; It includes the &#34;nofatal&#34; option, but disabled by default.
&gt; &gt; Can you test it and tell me whether it better fits your expectations?
</div>&gt;
&gt; Yes, turning on &#34;nofatal&#34; works as expected.
</div>
Nice. Now I need to write a few more tests, then release it on the CPAN.

--
Sébastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-206924" href="/Public/Bug/Display.html?id=17316#txn-206924">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;11&nbsp;12:21:46&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [rt.cpan.org #17316] Fwd: CPAN Upload: S/SA/SAPER/Sys-Syslog-0.15.tar.gz</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 11 Jun 2006 18:21:22 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sys-Syslog [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sébastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/206924/79324/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/79324">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 617b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is now fixed in version 0.15. Thanks for your report.

Begin forwarded message:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; From: PAUSE &lt;upload@pause.perl.org&gt;
&gt; Date: Sun June 11, 2006  01:57:14 Europe/Paris
&gt; To: &#34;Sebastien Aperghis-Tramoni&#34; &lt;maddingue@free.fr&gt;
&gt; Subject: CPAN Upload: S/SA/SAPER/Sys-Syslog-0.15.tar.gz
&gt;
&gt; The uploaded file
&gt;
&gt;     Sys-Syslog-0.15.tar.gz
&gt;
&gt; has entered CPAN as
&gt;
&gt;   file: $CPAN/authors/id/S/SA/SAPER/Sys-Syslog-0.15.tar.gz
&gt;   size: 50616 bytes
&gt;    md5: 1afe2987bf02630b0e4cfa087cea6504
</div>
Sébastien Aperghis-Tramoni
  -- - --- -- - -- - --- -- - --- -- - --[ <span class="clickylink"><a target="new" rel="nofollow" href="http://maddingue.org">http://maddingue.org</a></span> ]
Close the world, txEn eht nepO
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-206926" href="/Public/Bug/Display.html?id=17316#txn-206926">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;11&nbsp;12:27:46&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-206928" href="/Public/Bug/Display.html?id=17316#txn-206928">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;11&nbsp;12:27:47&nbsp;2006</span>
    <span class="description">SAPER [...] cpan.org -  Fixed in 0.15 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.731686</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
