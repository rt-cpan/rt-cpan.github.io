<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #107624 for Text-Similarity: Inquiry: Is the count of overlaps omitted / set to 1 on purpose?</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #107624 for Text-Similarity: Inquiry: Is the count of overlaps omitted / set to 1 on purpose?</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Text-Similarity">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Text-Similarity">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Text-Similarity">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Text-Similarity">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Text-Similarity">Text-Similarity CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">107624</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Text-Similarity">Text-Similarity</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ASB [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Unimportant    </td>
  </tr>
  <tr id="CF-32360-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.11    </td>
  </tr>
  <tr id="CF-32361-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=107624">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1542970" href="/Public/Bug/Display.html?id=107624#txn-1542970">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;08&nbsp;05:17:29&nbsp;2015</span>
    <span class="description">ASB [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Inquiry: Is the count of overlaps omitted / set to 1 on purpose?</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1542970/823815/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/823815">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 868b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The method getOverlaps&#40;&#41; in Text::OverlapFinder does returns a hashref of overlaps.

Each overlap is counted exactly once. The count cannot be greater than 1, because when counting, the method containsReplace is used. The overlap is replaced my MARKERs and cannot be found again.

Is this in purpose?
Because, in the method getSimilarityStrings&#40;&#41; in Text::Similarity::Overlaps, the hashref value is used as operand in a multiplcation: $score += scalar @words * $overlaps-&gt;{$key};

I was getting suspicious when I saw that in getOverlaps&#40;&#41; in Text::OverlapFinder, the overlaps seems to be counted using the ++ operator: <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/TPEDERSE/Text-Similarity-0.11/lib/Text/OverlapFinder.pm#L166">https://metacpan.org/source/TPEDERSE/Text-Similarity-0.11/lib/Text/OverlapFinder.pm#L166</a></span>

If we only would want to get a 1, we could as well use a simple assignment operator, e.g.:
$overlapsHash{$temp} = 1; # remember that we found the overlap $temp
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1542988" href="/Public/Bug/Display.html?id=107624#txn-1542988">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;08&nbsp;06:39:10&nbsp;2015</span>
    <span class="description">duluthted [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #107624] Inquiry: Is the count of overlaps omitted / set to 1 on purpose?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 8 Oct 2015 05:38:58 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Text-Similarity [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ted Pedersen &lt;duluthted [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1542988/823833/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/823833">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes, counting each overlap once is by design. In a case like

my dog is a happy dog  &#40;A

your dog runs fast &#40;B

the first occurrence of dog in line A matches with the occurrence of dog in
B. The second occurrence in &#40;A does not match the occurrence in B, since
matches/overlaps only match one time.

However, in a case like this

my dog is a happy dog &#40;A

your dog and his dog are friends &#40;B

then we have two matches for dog - the first occurrence in A matches the
first occurrence in B, and then the second occurrence in A matches the
second occurrence in B.

So, I think that is why we still need to count. We could have multiple
overlaps of the same word, even if we only count each overlap once....

On Thu, Oct 8, 2015 at 4:17 AM, Alexander Becker via RT &lt;
bug-Text-Similarity@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thu Oct 08 05:17:29 2015: Request 107624 was acted upon.
&gt; Transaction: Ticket created by ASB
&gt;        Queue: Text-Similarity
&gt;      Subject: Inquiry: Is the count of overlaps omitted / set to 1 on
&gt; purpose?
&gt;    Broken in: 0.11
&gt;     Severity: Unimportant
&gt;        Owner: Nobody
&gt;   Requestors: ASB@cpan.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=107624">https://rt.cpan.org/Ticket/Display.html?id=107624</a></span> &gt;
&gt;
&gt;
&gt; The method getOverlaps&#40;&#41; in Text::OverlapFinder does returns a hashref of
&gt; overlaps.
&gt;
&gt; Each overlap is counted exactly once. The count cannot be greater than 1,
&gt; because when counting, the method containsReplace is used. The overlap is
&gt; replaced my MARKERs and cannot be found again.
&gt;
&gt; Is this in purpose?
&gt; Because, in the method getSimilarityStrings&#40;&#41; in
&gt; Text::Similarity::Overlaps, the hashref value is used as operand in a
&gt; multiplcation: $score += scalar @words * $overlaps-&gt;{$key};
&gt;
&gt; I was getting suspicious when I saw that in getOverlaps&#40;&#41; in
&gt; Text::OverlapFinder, the overlaps seems to be counted using the ++
&gt; operator:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/TPEDERSE/Text-Similarity-0.11/lib/Text/OverlapFinder.pm#L166">https://metacpan.org/source/TPEDERSE/Text-Similarity-0.11/lib/Text/OverlapFinder.pm#L166</a></span>
&gt;
&gt; If we only would want to get a 1, we could as well use a simple assignment
&gt; operator, e.g.:
&gt; $overlapsHash{$temp} = 1; # remember that we found the overlap $temp
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1542988/823834/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/823834">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.8k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1542989" href="/Public/Bug/Display.html?id=107624#txn-1542989">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;08&nbsp;06:39:11&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1543000" href="/Public/Bug/Display.html?id=107624#txn-1543000">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;08&nbsp;07:24:29&nbsp;2015</span>
    <span class="description">ASB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1543000/823840/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/823840">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 997b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I understand, thank you for the example!

Am Do 08. Okt 2015, 05:17:29, ASB schrieb:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The method getOverlaps&#40;&#41; in Text::OverlapFinder does returns a hashref
&gt; of overlaps.
&gt; 
&gt; Each overlap is counted exactly once. The count cannot be greater than
&gt; 1, because when counting, the method containsReplace is used. The
&gt; overlap is replaced my MARKERs and cannot be found again.
&gt; 
&gt; Is this in purpose?
&gt; Because, in the method getSimilarityStrings&#40;&#41; in
&gt; Text::Similarity::Overlaps, the hashref value is used as operand in a
&gt; multiplcation: $score += scalar @words * $overlaps-&gt;{$key};
&gt; 
&gt; I was getting suspicious when I saw that in getOverlaps&#40;&#41; in
&gt; Text::OverlapFinder, the overlaps seems to be counted using the ++
&gt; operator: <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/TPEDERSE/Text-Similarity-">https://metacpan.org/source/TPEDERSE/Text-Similarity-</a></span>
&gt; 0.11/lib/Text/OverlapFinder.pm#L166
&gt; 
&gt; If we only would want to get a 1, we could as well use a simple
&gt; assignment operator, e.g.:
&gt; $overlapsHash{$temp} = 1; # remember that we found the overlap $temp
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1543002" href="/Public/Bug/Display.html?id=107624#txn-1543002">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;08&nbsp;07:24:34&nbsp;2015</span>
    <span class="description">ASB [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.342844</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
