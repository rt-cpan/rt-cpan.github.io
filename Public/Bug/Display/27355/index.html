<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #27355 for JavaScript-SpiderMonkey: patch for detecting lib, plus a JS_THREADSAFE problem</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #27355 for JavaScript-SpiderMonkey: patch for detecting lib, plus a JS_THREADSAFE problem</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=JavaScript-SpiderMonkey">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=JavaScript-SpiderMonkey">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=JavaScript-SpiderMonkey">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=JavaScript-SpiderMonkey">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/JavaScript-SpiderMonkey">JavaScript-SpiderMonkey CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">27355</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=JavaScript-SpiderMonkey">JavaScript-SpiderMonkey</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
slanning [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-17580-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-17581-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Makefile.PL.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/323596/148168/Makefile.PL.diff">
Thu May 31 11:40:49 2007 (1.6k) by slanning [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=27355">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-323596" href="/Public/Bug/Display.html?id=27355#txn-323596">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;31&nbsp;11:40:48&nbsp;2007</span>
    <span class="description">slanning [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> patch for detecting lib, plus a JS_THREADSAFE problem</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/323596/148165/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/148165">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">1&#41; the patch Makefile.PL.diff allows my libmozjs to be detected &#40;Ubuntu&#41;.
It does make a bit more changes that strictly necessary, so you might
decide to do it differently &#40;I tried to make it more general, but...&#41;.
This let it compile from the `cpan` shell instead of dropping into
`look` and all that.

2&#41; But, the tests don&#39;t all pass. In particular, the tests using
$js-&gt;array_by_path &#40;00array.t, 06form2.t, 10elobj.t&#41; fail mysteriously.
I isolated the reason! My libmozjs was compiled with JS_THREADSAFE,
while JavaScript::SpiderMonkey doesn&#39;t take this into account. I don&#39;t
blame it; the moz/spidermonkey devs are assholes for making an API
dependent on a compile option.

Here&#39;s the thing: I can&#39;t really give you a patch to fix it,
because I can&#39;t think of a &#34;good&#34; way to fix it. But here&#39;s a path
showing how to fix it. Inside `object_by_path&#39; in SpiderMonkey.pm,
there&#39;s a call to JS_GetClass; that is the fatal call. If you look
in for example, js/docs/jsref.xml in the spidermonkey distribution,
it says

JSClass * JS_GetClass&#40;JSObject *obj&#41;;
Alternative syntax when JS_THREADSAFE is defined in a multithreaded
environment:
JSClass * JS_GetClass&#40;JSContext *cx, JSObject *obj&#41;
.....
     If your application runs in a multithreaded environment, define
&lt;C&gt;JS_THREADSAFE&lt;/C&gt;, and pass
a thread context as the first argument to &lt;C&gt;JS_GetClass&lt;/C&gt;.&lt;P/&gt;

so you have to have this patch to SpiderMonkey.pm:

-my $class = JavaScript::SpiderMonkey::JS_GetClass&#40;$newobj&#41;;
+my $class = JavaScript::SpiderMonkey::JS_GetClass&#40;$self-&gt;{context},
$newobj&#41;;

and in SpiderMonkey.xs:

 JSClass *
-JS_GetClass&#40;obj&#41;
+JS_GetClass&#40;cx, obj&#41;
+    JSContext  *cx
     JSObject  * obj
 ######################################################################
     PREINIT:
     JSClass *rc;
     CODE:
     {
-        rc = JS_GetClass&#40;obj&#41;;
+        rc = JS_GetClass&#40;cx, obj&#41;;

And in fact, after making those changes, all the tests pass.
But it assumes I know that my libmozjs has been compiled
with JS_THREADSAFE! If I knew that, I could add an #if/#else/#endif
to the .xs, an if/else to the .pm, and something to Makefile.PL,
and it would be fine. But I don&#39;t see how to find this value
&#40;I tried looking in `pkg-config firefox-js`, for example, and while it
gives the -DXP_UNIX flag, it for some reason leaves out
-DJS_THREADSAFE....&#41;,
other than maybe having Makefile.PL do a manual call to test which
function signature works in the particular library being used.

Another option might be to have a separate call, like
JS_GetClass_threadsafe, to do the &#34;new&#34; version with the context
as the first argument, then do an eval on JS_GetClass and
JS_GetClass_threadsafe from `object_by_path&#39; and take whatever succeeds.
It still leaves it up to people using the API directly to have to
handle whether their library is threadsafe or not. Very ugly situation
that people who put out libraries should not put onto people....
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Makefile.PL.diff</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/323596/148168/Makefile.PL.diff">Download Makefile.PL.diff</a><br />
<span class="downloadcontenttype">text/x-diff 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- JavaScript-SpiderMonkey-0.17-sFbu8e/Makefile.PL	2006-07-28 11:30:08.000000000 +0200
+++ JavaScript-SpiderMonkey-0.17-RZp6mZ/Makefile.PL	2007-05-26 14:29:55.000000000 +0200
@@ -14,10 +14,10 @@
 use ExtUtils::MakeMaker;
 use Getopt::Long;
 
-# Get the right lib and include dirs for different platforms
+# Get the right lib and include dirs for different platforms,
+# determine library name and system-related defines
 
-my $JS_LIB_DIR;
-my @JS_INCL_DIRS;
+my &#40;$JS_LIB_DIR, @JS_INCL_DIRS, $JS_LIB_NAME, $JS_DEFINE&#41;;
 
 my @c_header_files = qw&#40;
   jsapi.h
@@ -25,6 +25,7 @@
 &#41;;
 
 my @possible_libraries = qw&#40;
+  libmozjs.so
   libjs.a
   js32.dll
 &#41;;
@@ -33,6 +34,7 @@
   &#34;../js/src/*&#34;      =&gt; &#34;../js/src&#34;,
   &#34;/usr/lib&#34;         =&gt; &#34;/usr/include&#34;,
   &#34;/usr/local/lib&#34;   =&gt; &#34;/usr/local/include&#34;,
+  &#34;/usr/lib/firefox&#34; =&gt; &#34;/usr/include/firefox&#34;,
 &#41;;
 
 foreach my $install_path&#40;keys %possible_install_paths&#41; {
@@ -55,6 +57,17 @@
       if &#40;scalar&#40;@JS_INCL_DIRS&#41; == scalar&#40;@c_header_files&#41;&#41; {
         $JS_LIB_DIR = $libfile;
         $JS_LIB_DIR =~ s/$possible_lib$//;
+
+        $JS_LIB_NAME = $possible_lib;
+        $JS_LIB_NAME =~ s/\..*$//;
+        $JS_LIB_NAME =~ s/^lib//;
+
+        if &#40;$^O ne &#39;MSWin32&#39;&#41; {
+            $JS_DEFINE  = &#39;-DXP_UNIX -DJS_THREADSAFE&#39;;
+        } else {
+            $JS_DEFINE  = &#39;-DXP_WIN&#39;;
+        };
+
         last;
       } else {
         @JS_INCL_DIRS = &#40;&#41;;
@@ -89,19 +102,6 @@
   }
 }
 
-## Determine library name and system-related defines
-
-my $JS_LIB_NAME;
-my $JS_DEFINE;
-
-if &#40;$^O ne &#39;MSWin32&#39;&#41; {
-  $JS_LIB_NAME = &#39;js&#39;;
-  $JS_DEFINE  = &#39;-DXP_UNIX&#39;;
-} else {
-  $JS_LIB_NAME = &#39;js32&#39;;
-  $JS_DEFINE  = &#39;-DXP_WIN&#39;;
-};
-
 my $E4X = 0;
 GetOptions&#40;
   &#34;E4X&#34; =&gt; \$E4X,
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-323635" href="/Public/Bug/Display.html?id=27355#txn-323635">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;31&nbsp;15:57:29&nbsp;2007</span>
    <span class="description">m [...] perlmeister.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> tbusch [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #27355] patch for detecting lib, plus a JS_THREADSAFE problem</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 31 May 2007 12:54:18 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> via RT &lt;bug-JavaScript-SpiderMonkey [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mike Schilli &lt;m [...] perlmeister.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/323635/148201/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/148201">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 234b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, 31 May 2007, via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=27355">http://rt.cpan.org/Ticket/Display.html?id=27355</a></span> &gt;
</div>
Thanks, Thomas Busch has taken over JavaScript::SpiderMonkey,
cc:ing him: tbusch@cpan.org

-- Mike

Mike Schilli
m@perlmeister.com
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-323636" href="/Public/Bug/Display.html?id=27355#txn-323636">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;31&nbsp;15:57:30&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-325547" href="/Public/Bug/Display.html?id=27355#txn-325547">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;08&nbsp;15:12:55&nbsp;2007</span>
    <span class="description">thomas [...] careerjet.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> thomas [...] careerjet.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/325547/149298/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/149298">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 324b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I just uploaded version 0.18 to CPAN with a patch
that should solve both your Ubuntu build problem and 
your JS_THREADSAFE problem. 

You need to build with

perl Makefile.pl -JS_THREADSAFE

Please let me know if this works. If not could you send
me the necessary corrections. Unfortunately I cannot
test this.

Thomas.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-325605" href="/Public/Bug/Display.html?id=27355#txn-325605">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;09&nbsp;04:53:28&nbsp;2007</span>
    <span class="description">slanning [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> SLANNING [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/325605/149333/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/149333">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 40b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks, it installed and all tests pass.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.4603</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
