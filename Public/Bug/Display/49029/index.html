<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #49029 for Exception-SEH: Perl dumps core in reaction to certain syntax errors</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #49029 for Exception-SEH: Perl dumps core in reaction to certain syntax errors</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Exception-SEH">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Exception-SEH">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Exception-SEH">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Exception-SEH">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Exception-SEH">Exception-SEH CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">49029</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Exception-SEH">Exception-SEH</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
FERRENCY [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-227638-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.01005    </td>
  </tr>
  <tr id="CF-227639-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




patch.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/656462/336467/patch.txt">
Sun Aug 30 09:19:59 2009 (1.5k) by RANDIR [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=49029">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-653756" href="/Public/Bug/Display.html?id=49029#txn-653756">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;26&nbsp;12:57:37&nbsp;2009</span>
    <span class="description">FERRENCY [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/653756/335123/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/335123">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">In some cases when there is a syntax error inside a try {} block, Perl
dumps core.

This is perl, v5.8.8 built for i386-freebsd

Here is a minimal failing test case:

use Exception::SEH;
use strict;

try {
    if &#40;1&#41; {
    } else {
        do_something&#40;test =&gt; 1}&#41;;
    }
}



When I run this, I get:
% perl test-seh2.pl
syntax error at test-seh2.pl line 7, near &#34;1}&#34;
Execution of test-seh2.pl aborted due to compilation errors.
perl in realloc&#40;&#41;: error: modified &#40;page-&#41; pointer
Abort &#40;core dumped&#41;

I found this bug deeply buried in some code we&#39;re working on.  In that
case, which had slightly more complex logic within the try, perl did not
report on the syntax error before it dumped core.  This made tracking
down the problem very difficult.  I still don&#39;t know why it would act
differently in that case.


The problem above does not occur unless the syntax error is within an }
else { block as it was there.  I believe the problem may be related to
the fact that the } else { block looks a bit like a } catch { block &#40;but
with a different name&#41;.  

Thank you for any help you can provide on this problem,
Alan Ferrency
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-653759" href="/Public/Bug/Display.html?id=49029#txn-653759">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;26&nbsp;12:58:03&nbsp;2009</span>
    <span class="description">FERRENCY [...] cpan.org -  Subject changed from &#40;no value&#41; to &#39;Perl dumps core in reaction to certain syntax errors&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-653897" href="/Public/Bug/Display.html?id=49029#txn-653897">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;26&nbsp;16:12:05&nbsp;2009</span>
    <span class="description">FERRENCY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/653897/335200/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/335200">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 178b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">It turns out the failing test case I provided does not fail on Perl
5.8.9.  I&#39;m not sure whether this is a bug in Perl that was fixed, or a
bug in Exception::SEH. 

Thanks,
Alan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-653899" href="/Public/Bug/Display.html?id=49029#txn-653899">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;26&nbsp;16:12:06&nbsp;2009</span>
    <span class="description">FERRENCY [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-654336" href="/Public/Bug/Display.html?id=49029#txn-654336">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;27&nbsp;10:10:26&nbsp;2009</span>
    <span class="description">RANDIR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/654336/335433/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/335433">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 742b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">warmechs% perl -v
This is perl, v5.8.8 built for i386-freebsd

warmechs% perl -e &#39;use Devel::Declare; print $Devel::Declare::VERSION&#39;
0.005006%                                                              
                                       

warmechs% perl crash.pl
syntax error at crash.pl line 9, near &#34;1}&#34;
Execution of crash.pl aborted due to compilation errors.

======

To investigate what&#39;s happening, i need:
perl -V &#40;or just is your build threaded/unthreaded&#41; and versions of
Devel::Declare, B::Hooks::OP::PPAddr, B::Hooks::OP::Check you have
installed. 

If you have different versions of them on your 5.8.8/5.8.9 installations
- try install latest Devel::Declare with dependencies on 5.8.8, this&#39;ll
probably solve your problem.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-654338" href="/Public/Bug/Display.html?id=49029#txn-654338">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;27&nbsp;10:20:16&nbsp;2009</span>
    <span class="description">FERRENCY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #49029] Perl dumps core in reaction to certain syntax errors </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 27 Aug 2009 10:19:48 -0400 &#40;EDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Sergey Aleynikov via RT &lt;bug-Exception-SEH [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> FERRENCY [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/654338/335435/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/335435">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Here you go.  Perl isn&#39;t threaded, but I&#39;ve included perl -V below as
well.  I&#39;ll look into reproducing this on 5.8.9 as well, since it may
be related to a different CPAN module version.

The machine that crashes does have the latest Devel::Declare, I had to
install the entire dependency tree from scratch.

Thank you for your help!  This does look like the best Exception
handling module available, but I&#39;ll need to quell some paranoia before
getting it heavily into production.

Alan Ferrency


perl -e &#39;use Devel::Declare; print $Devel::Declare::VERSION&#39;
0.005011

perl -e &#39;use B::Hooks::OP::PPAddr; print $B::Hooks::OP::PPAddr::VERSION&#39;
0.03

perl -e &#39;use B::Hooks::OP::Check; print $B::Hooks::OP::Check::VERSION&#39;
0.18


Summary of my perl5 &#40;revision 5 version 8 subversion 8&#41; configuration:
   Platform:
     osname=freebsd, osvers=6.2-prerelease, archname=i386-freebsd
     uname=&#39;freebsd mayon.pair.com 6.2-prerelease freebsd 6.2-prerelease #2: wed sep 13 23:00:26 utc 2006 &lt;snip&gt;:usrobjusrsrcsysgeneric i386 &#39;
     config_args=&#39;-de&#39;
     hint=previous, useposix=true, d_sigaction=define
     usethreads=undef use5005threads=undef useithreads=undef usemultiplicity=undef
     useperlio=define d_sfio=undef uselargefiles=define usesocks=undef
     use64bitint=undef use64bitall=undef uselongdouble=undef
     usemymalloc=n, bincompat5005=undef
   Compiler:
     cc=&#39;cc&#39;, ccflags =&#39;-DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include&#39;,
     optimize=&#39;-O&#39;,
     cppflags=&#39;-DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include&#39;
     ccversion=&#39;&#39;, gccversion=&#39;3.4.6 [FreeBSD] 20060305&#39;, gccosandvers=&#39;&#39;
     intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=1234
     d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=12
     ivtype=&#39;long&#39;, ivsize=4, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;, lseeksize=8
     alignbytes=4, prototype=define
   Linker and Libraries:
     ld=&#39;cc&#39;, ldflags =&#39;-Wl,-E  -L/usr/local/lib&#39;
     libpth=/usr/lib /usr/local/lib
     libs=-lm -lcrypt -lutil -lc
     perllibs=-lm -lcrypt -lutil -lc
     libc=, so=so, useshrplib=false, libperl=libperl.a
     gnulibc_version=&#39;&#39;
   Dynamic Linking:
     dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags=&#39; &#39;
     cccdlflags=&#39;-DPIC -fPIC&#39;, lddlflags=&#39;-shared  -L/usr/local/lib&#39;


Characteristics of this binary &#40;from libperl&#41;:
   Compile-time options: PERL_MALLOC_WRAP USE_LARGE_FILES USE_PERLIO
   Built under freebsd
   Compiled at Sep 19 2006 14:25:44
   @INC:
     /usr/local/lib/perl5/5.8.8/i386-freebsd
     /usr/local/lib/perl5/5.8.8
     /usr/local/lib/perl5/site_perl/5.8.8/i386-freebsd
     /usr/local/lib/perl5/site_perl/5.8.8
     /usr/local/lib/perl5/site_perl
     .




On Thu, 27 Aug 2009, Sergey Aleynikov via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=49029">https://rt.cpan.org/Ticket/Display.html?id=49029</a></span> &gt;
&gt;
&gt; warmechs% perl -v
&gt; This is perl, v5.8.8 built for i386-freebsd
&gt;
&gt; warmechs% perl -e &#39;use Devel::Declare; print $Devel::Declare::VERSION&#39;
&gt; 0.005006%
&gt;
&gt;
&gt; warmechs% perl crash.pl
&gt; syntax error at crash.pl line 9, near &#34;1}&#34;
&gt; Execution of crash.pl aborted due to compilation errors.
&gt;
&gt; ======
&gt;
&gt; To investigate what&#39;s happening, i need:
&gt; perl -V &#40;or just is your build threaded/unthreaded&#41; and versions of
&gt; Devel::Declare, B::Hooks::OP::PPAddr, B::Hooks::OP::Check you have
&gt; installed.
&gt;
&gt; If you have different versions of them on your 5.8.8/5.8.9 installations
&gt; - try install latest Devel::Declare with dependencies on 5.8.8, this&#39;ll
&gt; probably solve your problem.
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-654649" href="/Public/Bug/Display.html?id=49029#txn-654649">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;27&nbsp;22:25:46&nbsp;2009</span>
    <span class="description">RANDIR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/654649/335622/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/335622">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 457b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve got some result, but it&#39;s strange. Full -V output was really required.

I always compile my perls with -Dusemymalloc=y, but default for freebsd
is &#39;no&#39;, and thus use a system malloc. I&#39;ve built perl with
config_args=&#39;-de&#39; &#40;exactly as your&#41;, the only difference between working
perl was malloc setting, and got a coredump.

I&#39;ll try to produce a shorter crash with pure Devel::Declare and ask
Florian Ragwitz, what can be source and can it be corrected.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-654830" href="/Public/Bug/Display.html?id=49029#txn-654830">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;28&nbsp;10:26:37&nbsp;2009</span>
    <span class="description">FERRENCY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #49029] Perl dumps core in reaction to certain syntax errors </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 28 Aug 2009 10:26:14 -0400 &#40;EDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Sergey Aleynikov via RT &lt;bug-Exception-SEH [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> FERRENCY [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/654830/335749/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/335749">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Okay, that&#39;s interesting and good to know.

I&#39;m not sure of any reason to use one malloc&#40;&#41; or the other, and it
seems likely we didn&#39;t have any good reason for using those defaults.

I tried to reproduce the problem on our Perl 5.8.9 box with the same
module versions, but I couldn&#39;t reproduce the problem.  Now that you
mention &#34;usemymalloc&#34; I see that we have it set to &#34;yes&#34; on our 5.8.9.
So that&#39;s consistent, at least.

Thanks for looking into this.  I suppose I&#39;d reduce the priority from
&#34;important&#34; to &#34;unimportant&#34; now that we at least have a clear
definition of when the problem might occur.

Thanks,
Alan Ferrency




On Thu, 27 Aug 2009, Sergey Aleynikov via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=49029">https://rt.cpan.org/Ticket/Display.html?id=49029</a></span> &gt;
&gt;
&gt; I&#39;ve got some result, but it&#39;s strange. Full -V output was really required.
&gt;
&gt; I always compile my perls with -Dusemymalloc=y, but default for freebsd
&gt; is &#39;no&#39;, and thus use a system malloc. I&#39;ve built perl with
&gt; config_args=&#39;-de&#39; &#40;exactly as your&#41;, the only difference between working
&gt; perl was malloc setting, and got a coredump.
&gt;
&gt; I&#39;ll try to produce a shorter crash with pure Devel::Declare and ask
&gt; Florian Ragwitz, what can be source and can it be corrected.
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-656460" href="/Public/Bug/Display.html?id=49029#txn-656460">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;30&nbsp;09:15:52&nbsp;2009</span>
    <span class="description">RANDIR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/656460/336461/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/336461">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Further investigation: this is only 5.8.8 &#40;and, probably, below&#41; bug.
5.8.9, 5.9.5, 5.10.0 with both usemymalloc possibilities are free.

Here is patch to test with your complex 5.8.8 case &#40;it works for short
code above, but you&#39;ve told that you didn&#39;t get anything meaningful for
your default case&#41;:

--- Exception-SEH-0.01005/lib/Exception/SEH/Parser.pm   Sat Jun 20
11:14:43 2009
+++ Exception-SEH-0.01006/lib/Exception/SEH/Parser.pm   Sun Aug 30
17:00:37 2009
@@ -13,7 +13,7 @@
 sub CATCH&#40;&#41;            { 1 }
 sub FINALLY&#40;&#41;  { 2 }

-our $VERSION = &#39;0.01002&#39;;
+our $VERSION = &#39;0.01003&#39;;

 sub new{
        my &#40;$class, $offset&#41; = @_;
@@ -80,6 +80,8 @@
                        $length &lt; 0
                                ||
                        $self-&gt;{&#39;offset&#39;} + $length &gt; length&#40;$linestr&#41;
+                               ||
+                       $self-&gt;{&#39;offset&#39;} &lt; 0
                &#41;{
                        require Carp;
                        Carp::croak &#34;Unbalanced text supplied as catch
argument&#34;;
@@ -100,7 +102,11 @@
        print STDERR &#34;inject called at $self-&gt;{offset} for
&#39;$inject&#39;\r\n&#34; if DEBUG;

        my $linestr = Devel::Declare::get_linestr;
-       if &#40;$self-&gt;{&#39;offset&#39;} &gt; length&#40;$linestr&#41;&#41;{
+       if &#40;
+               $self-&gt;{&#39;offset&#39;} &gt; length&#40;$linestr&#41;
+                               ||
+               $self-&gt;{&#39;offset&#39;} &lt; 0
+       &#41;{
                require Carp;
                Carp::croak &#34;Parser tried to inject data outside program
source, stopping&#34;;
        }
@@ -154,8 +160,18 @@
                }

                my $before = Devel::Declare::get_linestr&#40;&#41;;
+               if &#40;
+                       $parser-&gt;{&#39;offset&#39;} &gt; length&#40;$before&#41;
+                               ||
+                       $parser-&gt;{&#39;offset&#39;} &lt; 0
+               &#41;{
+                       my &#40;undef, $file, $line&#41; = caller&#40;1&#41;;
+                       print STDERR &#34;Got some syntax error &#40;misplaced
&#39;}&#39; ?&#41; at $file:$line\n&#34;;
+                       exit -1;
+               }
                $parser-&gt;skip_spaces;
                my $after = Devel::Declare::get_linestr&#40;&#41;;
+
                if &#40;$parser-&gt;get_symbols&#40;5&#41; ne &#39;catch&#39; &#38;&#38;
$parser-&gt;get_symbols&#40;7&#41; ne &#39;finally&#39;&#41;{
                        if &#40;$Exception::SEH::parser_state != INITIAL&#41;{
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-656462" href="/Public/Bug/Display.html?id=49029#txn-656462">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;30&nbsp;09:19:59&nbsp;2009</span>
    <span class="description">RANDIR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/656462/336464/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/336464">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 59b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Formatting is broken in message, so i attach patch as file.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/656462/336467/patch.txt">Download patch.txt</a><br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- Exception-SEH-0.01005/lib/Exception/SEH/Parser.pm	Sat Jun 20 11:14:43 2009
+++ Exception-SEH-0.01006/lib/Exception/SEH/Parser.pm	Sun Aug 30 17:00:37 2009
@@ -13,7 +13,7 @@
 sub CATCH&#40;&#41;		{ 1 }
 sub FINALLY&#40;&#41;	{ 2 }
 
-our $VERSION = &#39;0.01002&#39;;
+our $VERSION = &#39;0.01003&#39;;
 
 sub new{
 	my &#40;$class, $offset&#41; = @_;
@@ -80,6 +80,8 @@
 			$length &lt; 0
 				||
 			$self-&gt;{&#39;offset&#39;} + $length &gt; length&#40;$linestr&#41;
+				||
+			$self-&gt;{&#39;offset&#39;} &lt; 0
 		&#41;{
 			require Carp;
 			Carp::croak &#34;Unbalanced text supplied as catch argument&#34;;
@@ -100,7 +102,11 @@
 	print STDERR &#34;inject called at $self-&gt;{offset} for &#39;$inject&#39;\r\n&#34; if DEBUG;
 
 	my $linestr = Devel::Declare::get_linestr;
-	if &#40;$self-&gt;{&#39;offset&#39;} &gt; length&#40;$linestr&#41;&#41;{
+	if &#40;
+		$self-&gt;{&#39;offset&#39;} &gt; length&#40;$linestr&#41;
+				||
+		$self-&gt;{&#39;offset&#39;} &lt; 0
+	&#41;{
 		require Carp;
 		Carp::croak &#34;Parser tried to inject data outside program source, stopping&#34;;
 	}
@@ -154,8 +160,18 @@
 		}
 
 		my $before = Devel::Declare::get_linestr&#40;&#41;;
+		if &#40;
+			$parser-&gt;{&#39;offset&#39;} &gt; length&#40;$before&#41;
+				||
+			$parser-&gt;{&#39;offset&#39;} &lt; 0
+		&#41;{
+			my &#40;undef, $file, $line&#41; = caller&#40;1&#41;;
+			print STDERR &#34;Got some syntax error &#40;misplaced &#39;}&#39; ?&#41; at $file:$line\n&#34;;
+			exit -1;
+		}
 		$parser-&gt;skip_spaces;
 		my $after = Devel::Declare::get_linestr&#40;&#41;;
+
 		if &#40;$parser-&gt;get_symbols&#40;5&#41; ne &#39;catch&#39; &#38;&#38; $parser-&gt;get_symbols&#40;7&#41; ne &#39;finally&#39;&#41;{
 			if &#40;$Exception::SEH::parser_state != INITIAL&#41;{
 				print STDERR &#34;End-of-try called in inapropriate parser state.\r\n Here we can&#39;t die normally - you won&#39;t get normal parse error.\r\n&#34;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-658393" href="/Public/Bug/Display.html?id=49029#txn-658393">#</a>      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;02&nbsp;11:53:02&nbsp;2009</span>
    <span class="description">alan [...] ferrency.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> FERRENCY [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #49029] Perl dumps core in reaction to certain syntax errors </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 2 Sep 2009 11:52:39 -0400 &#40;EDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Sergey Aleynikov via RT &lt;bug-Exception-SEH [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> alan [...] ferrency.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/658393/337559/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/337559">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 299b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

I&#39;m sorry I didn&#39;t get to testing this yet, I hope to before the end
of the week.  Thanks for the patch!

Alan


On Sun, 30 Aug 2009, Sergey Aleynikov via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=49029">https://rt.cpan.org/Ticket/Display.html?id=49029</a></span> &gt;
&gt;
&gt; Formatting is broken in message, so i attach patch as file.
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-659422" href="/Public/Bug/Display.html?id=49029#txn-659422">#</a>      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;04&nbsp;12:21:46&nbsp;2009</span>
    <span class="description">FERRENCY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #49029] Perl dumps core in reaction to certain syntax errors </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 4 Sep 2009 12:21:20 -0400 &#40;EDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Sergey Aleynikov via RT &lt;bug-Exception-SEH [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ferrency [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/659422/338164/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/338164">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 622b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Formatting is broken in message, so i attach patch as file.
</div>
Hello,

I applied the patch to Exception::SEH on the server we had a problem
on previously.

My minimal failing test case now works, when the patch is applied.

However, my &#34;real&#34; code &#40;with the same syntax error injected&#41; still
causes a seg fault with no error information printed out. It seems
that my minimal failing case found a different seg fault than the real
code.

I will try to construct a new minimal failing case.  In the mean time,
I have a core and &#34;bt&#34;, but I don&#39;t expect it to be particularly
useful without debugging symbols.

Thanks,
Alan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-659441" href="/Public/Bug/Display.html?id=49029#txn-659441">#</a>      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;04&nbsp;13:01:05&nbsp;2009</span>
    <span class="description">FERRENCY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #49029] Perl dumps core in reaction to certain syntax errors </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 4 Sep 2009 13:00:40 -0400 &#40;EDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Sergey Aleynikov via RT &lt;bug-Exception-SEH [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> FERRENCY [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/659441/338177/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/338177">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello.

I have constructed another minimal failing test case, and
unfortunately it&#39;s even more contrived and convoluted than the
previous one.

Like the previous one, it fails on our 5.8.9 machine, by producing a
core dump.  Unlike the previous one, it doesn&#39;t print a syntax error
message prior to dumping core.  It also fails with the patch you
suggested I try.

The second minimum failing test case:

------

use Exception::SEH;
use strict;

sub {
     my $thing = something&#40;&#41;;

     return do_something&#40;@_&#41;;

     try {
         if &#40;1&#41; {
         } else {
             [ } ];
         }
     }
}

------

Some points:
- It doesn&#39;t fail if you just &#34;my $thing&#34; without assigning it a non-trivial value
- It doesn&#39;t fail if you return a function call that doesn&#39;t use @_
- It doesn&#39;t fail if you return @_ without a function call
- It still requires the unmatched curly nested in the else block

It seems likely related to your return munging, considering it
requires the &#34;return&#34; in order to fail.

The backtrace:
#0  0x0808bb87 in Perl_pad_free &#40;&#41;
#1  0x0807f4f1 in Perl_op_clear &#40;&#41;
#2  0x0807f2fd in Perl_op_free &#40;&#41;
#3  0x0807f2c0 in Perl_op_free &#40;&#41;
#4  0x0807f2c0 in Perl_op_free &#40;&#41;
#5  0x0808609f in Perl_newATTRSUB &#40;&#41;
#6  0x08086ef5 in Perl_newANONATTRSUB &#40;&#41;
#7  0x0807e446 in Perl_yyparse &#40;&#41;
#8  0x0805ffcf in S_parse_body &#40;&#41;
#9  0x0805f3e0 in perl_parse &#40;&#41;
#10 0x0805d685 in main &#40;&#41;

Thanks!  I hope this helps.

Alan Ferrency
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-659638" href="/Public/Bug/Display.html?id=49029#txn-659638">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;05&nbsp;07:51:20&nbsp;2009</span>
    <span class="description">RANDIR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/659638/338315/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/338315">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 182b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve reproduced coredump on 5.8.8 with debug symbols &#40;again,
usemymalloc=y is ok&#41;. It seems unrelated to return hook - passing
&#39;-noret&#39; still produces core. I&#39;ll think more about it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-690609" href="/Public/Bug/Display.html?id=49029#txn-690609">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;14&nbsp;05:54:13&nbsp;2009</span>
    <span class="description">RANDIR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/690609/355505/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/355505">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 368b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">In case you&#39;re still interested. I&#39;ve just uploaded v0.02 to CPAN, that
has a completly rewritten parser. This has 2 effects:
1. many-switches code should work faster
2. no coredumps should happen during parsing, as parser produces much
simplier code
3. but parser errors are now followed by some perl message

If you find any regressions - report them, i&#39;ll fix asap.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-690611" href="/Public/Bug/Display.html?id=49029#txn-690611">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;14&nbsp;05:54:14&nbsp;2009</span>
    <span class="description">RANDIR [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-692480" href="/Public/Bug/Display.html?id=49029#txn-692480">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;18&nbsp;05:52:25&nbsp;2009</span>
    <span class="description">RANDIR [...] cpan.org -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.758013</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
