<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #28754 for Test-WWW-Mechanize-Catalyst: Base incorrect after redirected request</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #28754 for Test-WWW-Mechanize-Catalyst: Base incorrect after redirected request</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Test-WWW-Mechanize-Catalyst">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Test-WWW-Mechanize-Catalyst">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Test-WWW-Mechanize-Catalyst">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Test-WWW-Mechanize-Catalyst">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Test-WWW-Mechanize-Catalyst">Test-WWW-Mechanize-Catalyst CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">28754</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Test-WWW-Mechanize-Catalyst">Test-WWW-Mechanize-Catalyst</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
danieltwc [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-31696-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.39    </td>
  </tr>
  <tr id="CF-31697-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




test-redirect-external.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/363745/164816/test-redirect-external.patch">
Wed Sep 19 23:34:45 2007 (2.1k) by danieltwc [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=28754">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-352135" href="/Public/Bug/Display.html?id=28754#txn-352135">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;09&nbsp;04:15:15&nbsp;2007</span>
    <span class="description">danieltwc [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Base incorrect after redirected request</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/352135/158391/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/158391">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">One of my tests runs through a number of local actions of the form:

/search?query=test&#38;source=web

The source parameter controls where a request is redirected.  The
destination can be a remote host, e.g.:

<span class="clickylink"><a target="new" rel="nofollow" href="http://search.ufl.edu/web?query=test">http://search.ufl.edu/web?query=test</a></span>

If I attempt to run another test against a local action after such a
redirection, such as:

$mech-&gt;get_ok&#40;&#34;/search?query=test&#38;source=news&#34;&#41;;

the request base appears to still be the base from the redirection.  In
this case the URL ends up being:

<span class="clickylink"><a target="new" rel="nofollow" href="http://search.ufl.edu/search?query=test&#38;source=news">http://search.ufl.edu/search?query=test&#38;source=news</a></span>

instead of:

<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/search?query=test&#38;source=news">http://localhost/search?query=test&#38;source=news</a></span>

For now I&#39;ve specified localhost explicitly but the documentation
implies this is optional.

Relevant versions include:

$ perl -MTest::WWW::Mechanize::Catalyst\ 999
Test::WWW::Mechanize::Catalyst version 999 required--this is only
version 0.39.
$ perl -MTest::WWW::Mechanize\ 999
Test::WWW::Mechanize version 999 required--this is only version 1.14.
$ perl -MWWW::Mechanize\ 999
WWW::Mechanize version 999 required--this is only version 1.30.
$ perl -MLWP\ 999
LWP version 999 required--this is only version 5.805.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-362810" href="/Public/Bug/Display.html?id=28754#txn-362810">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;17&nbsp;15:56:29&nbsp;2007</span>
    <span class="description">leon [...] astray.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/362810/164229/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/164229">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 69b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Is there any chance that you could provide a test case?

Cheers, Leon
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-362811" href="/Public/Bug/Display.html?id=28754#txn-362811">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;17&nbsp;15:56:33&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-362813" href="/Public/Bug/Display.html?id=28754#txn-362813">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;17&nbsp;15:56:38&nbsp;2007</span>
    <span class="description">leon [...] astray.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-362815" href="/Public/Bug/Display.html?id=28754#txn-362815">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;17&nbsp;15:57:22&nbsp;2007</span>
    <span class="description">leon [...] astray.com -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-363745" href="/Public/Bug/Display.html?id=28754#txn-363745">#</a>      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;19&nbsp;23:34:45&nbsp;2007</span>
    <span class="description">danieltwc [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/363745/164813/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/164813">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 914b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here&#39;s a patch to redirect.t that illustrates what I was seeing with
0.39.  It adds an action to Catty.pm that redirects to an external site
and tests the redirection and subsequent local actions.

As of 0.40, the default behavior with respect to external requests is
the same as 0.38, so the original problem should probably be considered
fixed.

For completeness I&#39;ve included a note about what happens when
allow_external is on, i.e. what is correct when the test does:

$m-&gt;allow_external&#40;1&#41;;
$m-&gt;get_ok&#40;&#39;external&#39;&#41;;
$m-&gt;get_ok&#40;&#39;hello&#39;&#41;;

With allow_external on, Test::WWW::Mechanize::Catalyst requests
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.ufl.edu/hello">http://www.ufl.edu/hello</a></span> instead of <span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/hello">http://localhost/hello</a></span>.

While digging further I also noticed a possible issue with the
Content-Base header after redirection.  The patch includes a test that
should fail &#40;#37&#41; because the content base is set to
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.ufl.edu/hello">http://www.ufl.edu/hello</a></span> instead of <span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/hello">http://localhost/hello</a></span>.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/363745/164816/test-redirect-external.patch">Download test-redirect-external.patch</a><br />
<span class="downloadcontenttype">text/x-diff 2.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -ur Test-WWW-Mechanize-Catalyst-0.41.orig/t/lib/Catty.pm Test-WWW-Mechanize-Catalyst-0.41/t/lib/Catty.pm
--- Test-WWW-Mechanize-Catalyst-0.41.orig/t/lib/Catty.pm	2007-09-19 22:50:24.000000000 -0400
+++ Test-WWW-Mechanize-Catalyst-0.41/t/lib/Catty.pm	2007-09-19 23:08:24.000000000 -0400
@@ -53,6 +53,13 @@
     return;
 }
 
+# redirect to an external location
+sub external : Global {
+    my &#40; $self, $context &#41; = @_;
+    $context-&gt;response-&gt;redirect&#40;&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.ufl.edu/&#39;&#41;">http://www.ufl.edu/&#39;&#41;</a></span>;
+    return;
+}
+
 sub check_auth_basic : Global {
     my &#40; $self, $context &#41; = @_;
 
diff -ur Test-WWW-Mechanize-Catalyst-0.41.orig/t/redirect.t Test-WWW-Mechanize-Catalyst-0.41/t/redirect.t
--- Test-WWW-Mechanize-Catalyst-0.41.orig/t/redirect.t	2007-09-19 22:50:24.000000000 -0400
+++ Test-WWW-Mechanize-Catalyst-0.41/t/redirect.t	2007-09-19 23:32:25.000000000 -0400
@@ -2,7 +2,7 @@
 use strict;
 use warnings;
 use lib &#39;lib&#39;;
-use Test::More tests =&gt; 27;
+use Test::More tests =&gt; 39;
 use lib &#39;t/lib&#39;;
 use Test::WWW::Mechanize::Catalyst &#39;Catty&#39;;
 
@@ -15,6 +15,7 @@
 
     is&#40; $m-&gt;base, &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/hello">http://localhost/hello</a></span>&#34;, &#34;check got to hello 1/4&#34; &#41;;
     is&#40; $m-&gt;ct, &#34;text/html&#34;, &#34;check got to hello 2/4&#34; &#41;;
+    is&#40; $m-&gt;response-&gt;header&#40;&#39;Content-Base&#39;&#41;, &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/hello">http://localhost/hello</a></span>&#34; &#41;;
     $m-&gt;title_is&#40; &#34;Hello&#34;,, &#34;check got to hello 3/4&#34; &#41;;
     $m-&gt;content_contains&#40; &#34;Hi there&#34;,, &#34;check got to hello 4/4&#34; &#41;;
 
@@ -30,3 +31,18 @@
 ok&#40; $prev, &#34;have a previous previous&#34; &#41;;
 is&#40; $prev-&gt;code, 302, &#34;was a redirect&#34; &#41;;
 like&#40; $prev-&gt;header&#40;&#39;Location&#39;&#41;, &#39;/hi$/&#39;, &#34;to the right place&#34; &#41;;
+
+# redirect externally
+# XXX: $m-&gt;get_ok&#40; &#34;hello&#34; &#41; fails when external requests are allowed
+#$m-&gt;allow_external&#40;1&#41;;
+$m-&gt;get_ok&#40; &#34;$root/external&#34;, &#34;external redirection&#34; &#41;;
+$prev = $m-&gt;response-&gt;previous;
+ok&#40; $prev, &#34;have a previous response&#34; &#41;;
+is&#40; $prev-&gt;code, 302, &#34;was a redirect&#34; &#41;;
+like&#40; $prev-&gt;header&#40;&#39;Location&#39;&#41;, &#39;/www\.ufl\.edu/&#39;, &#34;to the right place&#34; &#41;;
+
+$m-&gt;get_ok&#40; &#34;hello&#34;, &#34;check got to hello 1/4&#34; &#41;;
+is&#40; $m-&gt;ct, &#34;text/html&#34;, &#34;check got to hello 2/4&#34; &#41;;
+is&#40; $m-&gt;response-&gt;header&#40;&#39;Content-Base&#39;&#41;, &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/hello">http://localhost/hello</a></span>&#34; &#41;;
+$m-&gt;title_is&#40; &#34;Hello&#34;,, &#34;check got to hello 3/4&#34; &#41;;
+$m-&gt;content_contains&#40; &#34;Hi there&#34;, &#34;check got to hello 4/4&#34; &#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-567450" href="/Public/Bug/Display.html?id=28754#txn-567450">#</a>      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;17&nbsp;17:56:04&nbsp;2009</span>
    <span class="description">ash_rtcpan [...] firemirror.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/567450/286418/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/286418">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 267b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is a problem with how WWW::Mechanize operates, and by the time 
Test::WWW::Mechanize::Catalyst gets hold of the request object, it has already been &#39;mangled&#39; 
to have the external host set.

Nothing I can do. I&#39;ve added a doc patch at least mentioning this fact.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-567451" href="/Public/Bug/Display.html?id=28754#txn-567451">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;17&nbsp;17:56:05&nbsp;2009</span>
    <span class="description">ash_rtcpan [...] firemirror.com -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.366794</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
