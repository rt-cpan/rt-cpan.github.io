<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #116136 for CPAN: code rudely added to shell rc file</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #116136 for CPAN: code rudely added to shell rc file</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=CPAN">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=CPAN">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=CPAN">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=CPAN">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/CPAN">CPAN CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">116136</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=CPAN">CPAN</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
zefram [...] fysh.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
ribasushi [...] leporine.io

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-8164-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-8165-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=116136">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1648508" href="/Public/Bug/Display.html?id=116136#txn-1648508">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;14&nbsp;02:06:17&nbsp;2016</span>
    <span class="description">zefram [...] fysh.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> code rudely added to shell rc file</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 14 Jul 2016 07:06:05 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1648508/884383/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/884383">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have discovered in my ~/.zshrc file two identical stanzas of which I
was not previously aware, both reading

    PATH=&#34;/home/zefram/perl5/bin${PATH+:}${PATH}&#34;; export PATH;
    PERL5LIB=&#34;/home/zefram/perl5/lib/perl5${PERL5LIB+:}${PERL5LIB}&#34;; export PERL5LIB;
    PERL_LOCAL_LIB_ROOT=&#34;/home/zefram/perl5${PERL_LOCAL_LIB_ROOT+:}${PERL_LOCAL_LIB_ROOT}&#34;; export PERL_LOCAL_LIB_ROOT;
    PERL_MB_OPT=&#34;--install_base \&#34;/home/zefram/perl5\&#34;&#34;; export PERL_MB_OPT;
    PERL_MM_OPT=&#34;INSTALL_BASE=/home/zefram/perl5&#34;; export PERL_MM_OPT;

Some research suggests that this kind of code is generated by some version
of local::lib, and that in some circumstances an auto-configuring CPAN.pm
will get this from local::lib and *by default* append it to a shell
rc file.  This would then affect me by virtue of automated cpan runs,
which necessarily get all-default behaviour.  &#40;I didn&#39;t intend to run
CPAN.pm without a CPAN::Config in place, but I think this happened by
accident somewhere.&#41;  The practical upshot of this edit to my rc file
is that all cpan installations from subsequently-opened shells fail,
because they&#39;re all installing to this bogus ~/perl5 directory, which is
not only the wrong place but necessarily fails when it&#39;s shared between
all the binary-incompatible perls that I have installed.

Editing the user&#39;s shell rc file is a very rude and hideously broken
default behaviour.  Keep your grubby mitts off such files, unless
positively invited by the user.

-zefram
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1648713" href="/Public/Bug/Display.html?id=116136#txn-1648713">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;14&nbsp;12:41:22&nbsp;2016</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1648713/884530/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/884530">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 574b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi, Zefram.

The code in question is here: <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/ANDK/CPAN-2.14/lib/CPAN/FirstTime.pm#L1362">https://metacpan.org/source/ANDK/CPAN-2.14/lib/CPAN/FirstTime.pm#L1362</a></span>

If you look, you can see that it takes some steps to ensure that it prompts the user and does not automatically munge the shell without user approval.  If you can demonstrate that it happens anyway without prompting under whatever cpan configuration environment you have, then it&#39;s certainly a bug.

Otherwise, my hypothesis is that you might have been bouncing on the &#39;return&#39; key and didn&#39;t see the note about shell munging specifically. :-&#41;

Regards,
David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1648714" href="/Public/Bug/Display.html?id=116136#txn-1648714">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;14&nbsp;12:41:22&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1648726" href="/Public/Bug/Display.html?id=116136#txn-1648726">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;14&nbsp;12:53:18&nbsp;2016</span>
    <span class="description">zefram [...] fysh.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #116136] code rudely added to shell rc file</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 14 Jul 2016 17:53:06 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> David Golden via RT &lt;bug-CPAN [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1648726/884536/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/884536">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 627b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">David Golden via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;If you look, you can see that it takes some steps to ensure that it
&gt;prompts the user and does not automatically munge the shell without
&gt;user approval.
</div>
That&#39;s not the same as user invitation.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;Otherwise, my hypothesis is that you might have been bouncing on the
&gt;&#39;return&#39; key and didn&#39;t see the note about shell munging specifically. :-&#41;
</div>
As I said, I run cpan unmanned.  I have an infinite stream of newlines
fed into stdin to accept all defaults.  My complaint is that your
default is rude.  You shouldn&#39;t be editing a user&#39;s rc files without
some *positive* invitation from the user.

-zefram
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1648730" href="/Public/Bug/Display.html?id=116136#txn-1648730">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;14&nbsp;13:30:48&nbsp;2016</span>
    <span class="description">zefram [...] fysh.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #116136] code rudely added to shell rc file</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 14 Jul 2016 18:30:31 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> David Golden via RT &lt;bug-CPAN [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1648730/884542/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/884542">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;As I said, I run cpan unmanned.  I have an infinite stream of newlines
&gt;fed into stdin to accept all defaults.
</div>
I&#39;ve looked into this some more, and I can reproduce a form of the rc file
editing &#40;not identical to what I saw before, but close&#41; by running cpan&#40;1&#41;
for my system perl as non-root.  It happens with either the newline
input or with PERL_MM_USE_DEFAULT=1 in the environment.  Either of these
conditions is requesting defaults; I normally use the low-tech former
because some modules aren&#39;t sophisticated enough to act on the latter.

&#40;The editing is also happening to the wrong file, which threw me a
bit earlier in the investigation.  The code that selects the victim
file intends to select .zshenv for zsh users, but it&#39;s getting .zshrc.
This is because of a precedence problem with the map expressions building
up the table of rc file names.&#41;

I reiterate: editing the user&#39;s shell rc files is not an acceptable
default behaviour.  It is not an acceptable outcome from an unmanned run.
Any `helpful&#39; behaviour that&#39;s this intrusive needs to be invoked on
an opt-in basis; it is not sufficient that the user didn&#39;t opt out.
I didn&#39;t opt out of being punched in the face either; it&#39;s impossible
to guess what else such rude code might decide to do on an opt-out basis.

-zefram
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1648732" href="/Public/Bug/Display.html?id=116136#txn-1648732">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;14&nbsp;14:02:42&nbsp;2016</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1648732/884544/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/884544">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 836b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Jul 14 19:30:48 2016, zefram@fysh.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I reiterate: editing the user&#39;s shell rc files is not an acceptable
&gt; default behaviour.  It is not an acceptable outcome from an unmanned run.
</div>
I agree with Zefram. A set PERL_MM_USE_DEFAULT=1 only gives a mandate to &#34;accept defaults relating to stuff placed into PERL5LIB&#34;. Changing stuff around $HOME/ is neither expected nor welcome outcome of an installation executed under such environment.

Tangentially: cpanm sets this by default
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/miyagawa/cpanminus/blob/1.7042/lib/App/cpanminus/script.pm#L1249-L1250">https://github.com/miyagawa/cpanminus/blob/1.7042/lib/App/cpanminus/script.pm#L1249-L1250</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/miyagawa/cpanminus/blob/1.7042/lib/App/cpanminus/script.pm#L1276">https://github.com/miyagawa/cpanminus/blob/1.7042/lib/App/cpanminus/script.pm#L1276</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/miyagawa/cpanminus/blob/1.7042/lib/App/cpanminus/script.pm#L1295">https://github.com/miyagawa/cpanminus/blob/1.7042/lib/App/cpanminus/script.pm#L1295</a></span>
 

I urge the authors to change the default of this and similar options to &#34;no&#34;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1648737" href="/Public/Bug/Display.html?id=116136#txn-1648737">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;14&nbsp;14:03:16&nbsp;2016</span>
    <span class="description">ribasushi [...] leporine.io -  Cc RIBASUSHI added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1648802" href="/Public/Bug/Display.html?id=116136#txn-1648802">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;14&nbsp;15:45:35&nbsp;2016</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1648802/884578/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/884578">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 601b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">If I understand correctly, what Zefram and Riba suggest boils down to this pseudo patch:

-            &#34;\nWould you like me to append that to $rc now?&#34;, &#34;yes&#34;
+            &#34;\nWould you like me to append that to $rc now?&#34;, &#34;no&#34;

Is this right, David? Or would other parts of the system need also adjustment? And are there any arguments to not do it? I mean I tend to agree with them.

It&#39;s certainly quite indicative for what users think about it. That this comes up 6 years since the code is out, tells me, they don&#39;t give a shit. Will they miss the assistance? Most probably not.

What do you think?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1653108" href="/Public/Bug/Display.html?id=116136#txn-1653108">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;27&nbsp;07:31:29&nbsp;2016</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1653108/887136/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/887136">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">My opinion is that the purpose of defaults is to guide users -- particularly new users -- into useful outcomes.

Changing the default increases the odds that new users will not wind up with a working CPAN client, which leads to unhappy new users and a poor impression of Perl.

In the years since this was introduced, this has been the only complaint -- and from a highly experienced user who should know better than to blindly accept defaults without knowing *exactly* what they do.  Piping newlines is tantamount to saying &#34;I don&#39;t care what you do&#34;, so I don&#39;t find post hoc caring to be a convincing argument against the defaults.

From the title alone to references like &#34;punched in the face&#34;, this bug report seems to be one driven by shock and anger, rather than a rational consideration of what makes for the best first-time user experience for Perl itself, which is what the first-time code and defaults are designed to do.

As far as I&#39;m concerned, this can be closed &#34;works as designed&#34;.

An experienced user who wants to automate CPAN client configuration without the &#34;new user&#34; defaults is more than sufficiently skilled to construct or install a cpan MyConfig file tailor-made to their requirements.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1653112" href="/Public/Bug/Display.html?id=116136#txn-1653112">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;27&nbsp;07:32:10&nbsp;2016</span>
    <span class="description">dagolden [...] cpan.org -  Cc DAGOLDEN added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1653126" href="/Public/Bug/Display.html?id=116136#txn-1653126">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;27&nbsp;08:18:45&nbsp;2016</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1653126/887147/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/887147">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jul 27 13:31:29 2016, DAGOLDEN wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In the years since this was introduced, this has been the only
&gt; complaint -- and from a highly experienced user who should know better
&gt; than to blindly accept defaults without knowing *exactly* what they
&gt; do.  Piping newlines is tantamount to saying &#34;I don&#39;t care what you
&gt; do&#34;, so I don&#39;t find post hoc caring to be a convincing argument
&gt; against the defaults.
</div>

But this is not what is being discussed &#40;yes, this was the start of the conversation but it since moved on&#41;. David, I think you have also fallen victim to emotion.

See it from this point of view instead:

- A user who doesn&#39;t give a shit about perl wants to install some new app
- They read its docs, see they need a perl not available on their machine
- They get some feedback from the &#34;community&#34;, and settle on perlbrew
- Then they fire up the `cpanm App...` command as suggested by the luminaries
- They do that, without ever having a .cpan dir
- It turns out CPAN.pm itself is somewhere deep in the deptree &#40;oh yes there are cases of this&#41;
- cpanm sets PERL_MM_USE_DEFAULT=1 and installs CPAN
- user finds unknown crap in their rc-file, that is indistinguishable from some sort of exploit

Now what is their opinion of perl...?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1653170" href="/Public/Bug/Display.html?id=116136#txn-1653170">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;27&nbsp;08:50:19&nbsp;2016</span>
    <span class="description">zefram [...] fysh.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> ribasushi [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #116136] code rudely added to shell rc file</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 27 Jul 2016 13:50:04 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> David Golden via RT &lt;bug-CPAN [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1653170/887180/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/887180">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">David Golden via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;Piping newlines is tantamount to saying &#34;I don&#39;t care what you do&#34;,
</div>
No, as I explained that &#40;or the equivalent PERL_MM_USE_DEFAULT=1&#41;
cannot be interpreted as a total lack of concern.  If that were the
interpretation, it would also be acceptable for the default behaviour
to be to delete all the user&#39;s files.  It&#39;s not acceptable: defaults
need to be reasonable and germane.  Accepting defaults en masse means
&#34;I am not considering this bit of software in detail&#34;.  The very essence
of automation is that the user doesn&#39;t need to hold the software&#39;s hand.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;this bug report seems to be one driven by shock and anger,
</div>
There is anger, yes.  Anger that CPAN installation code has abused
its very privileged position, in which it is frequently executed on
other people&#39;s machines with little or no oversight, to damage users&#39;
environments.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;As far as I&#39;m concerned, this can be closed &#34;works as designed&#34;.
</div>
If that&#39;s considered a good design, then I don&#39;t want to ever run any
code from this source ever again.  What other horrors might be lurking
in the guise of a default?

-zefram
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1653173" href="/Public/Bug/Display.html?id=116136#txn-1653173">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;27&nbsp;08:53:41&nbsp;2016</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1653173/887183/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/887183">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jul 27 08:18:45 2016, RIBASUSHI wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; PERL_MM_USE_DEFAULT=1
</div>
That&#39;s trivially fixed by localizing that &#40;around the same point that has comments about &#34;must prompt even under autoconfig&#34;&#41; rather than changing the default.   Or doing the various contortions we&#39;ve done before to avoid CPAN clients invoking CPAN clients -- e.g. bail out if PERL5_CPANM_IS_RUNNING or PERL5_CPANPLUS_IS_RUNNING.

I don&#39;t think ignoring obvious solutions when the result doesn&#39;t achieve your ulterior goal is an effective argument strategy.  It doesn&#39;t fool your audience and wastes our time.  If you want to argue for an ulterior goal, you ought to address up-front why you think obvious solutions are insufficient to address the technical problems at hand.

The default itself works as designed based on the design goals we discussed at the time.  Bugs, of course, should be fixed.

But if at the end of the day, this isn&#39;t really a technical argument and is just &#34;my way&#34; vs &#34;your way&#34;, then stop pretending it isn&#39;t that and Andreas can decide whatever he wants.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1653176" href="/Public/Bug/Display.html?id=116136#txn-1653176">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;27&nbsp;09:02:19&nbsp;2016</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #116136] code rudely added to shell rc file</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 27 Jul 2016 15:01:59 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Peter Rabbitson &lt;ribasushi [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1653176/887186/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/887186">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 07/27/2016 02:53 PM, David Golden via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=116136">https://rt.cpan.org/Ticket/Display.html?id=116136</a></span> &gt;
&gt;
&gt; On Wed Jul 27 08:18:45 2016, RIBASUSHI wrote:
<div class="message-stanza open">&gt;&gt; PERL_MM_USE_DEFAULT=1
</div>&gt; That&#39;s trivially fixed by localizing that &#40;around the same point that has comments about &#34;must prompt even under autoconfig&#34;&#41; rather than changing the default.   Or doing the various contortions we&#39;ve done before to avoid CPAN clients invoking CPAN clients -- e.g. bail out if PERL5_CPANM_IS_RUNNING or PERL5_CPANPLUS_IS_RUNNING.
</div>
This might very well be a way forward - I do not know the codebase 
sufficiently to make this call.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I don&#39;t think ignoring obvious solutions when the result doesn&#39;t achieve your ulterior goal is an effective argument strategy.  It doesn&#39;t fool your audience and wastes our time.  If you want to argue for an ulterior goal, you ought to address up-front why you think obvious solutions are insufficient to address the technical problems at hand.
</div>I have no ulterior goal here. I saw a report when it scrolled on #p5p, 
and chimed in as the ticket was getting warnocked.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; But if at the end of the day, this isn&#39;t really a technical argument and is just &#34;my way&#34; vs &#34;your way&#34;, then stop pretending it isn&#39;t that and Andreas can decide whatever he wants.
</div>I... do not understand where this pushback is coming from &#40;and what is 
it meant to address&#41;, so I will just bow out of this discussion.
Good luck.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1653179" href="/Public/Bug/Display.html?id=116136#txn-1653179">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;27&nbsp;09:04:53&nbsp;2016</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1653179/887189/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/887189">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Zefram, you&#39;re repeating yourself and being offensive and I expect better of you.  I don&#39;t see much point arguing utility functions in general, but certainly not when you&#39;re being like that.

On Wed Jul 27 08:50:19 2016, zefram@fysh.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; David Golden via RT wrote:
<div class="message-stanza open">&gt; &gt;Piping newlines is tantamount to saying &#34;I don&#39;t care what you do&#34;,
</div>&gt; 
&gt; No, as I explained that &#40;or the equivalent PERL_MM_USE_DEFAULT=1&#41;
&gt; cannot be interpreted as a total lack of concern.  If that were the
&gt; interpretation, it would also be acceptable for the default behaviour
&gt; to be to delete all the user&#39;s files.  It&#39;s not acceptable: defaults
&gt; need to be reasonable and germane.  Accepting defaults en masse means
&gt; &#34;I am not considering this bit of software in detail&#34;.  The very essence
&gt; of automation is that the user doesn&#39;t need to hold the software&#39;s hand.
&gt; 
<div class="message-stanza open">&gt; &gt;this bug report seems to be one driven by shock and anger,
</div>&gt; 
&gt; There is anger, yes.  Anger that CPAN installation code has abused
&gt; its very privileged position, in which it is frequently executed on
&gt; other people&#39;s machines with little or no oversight, to damage users&#39;
&gt; environments.
&gt; 
<div class="message-stanza open">&gt; &gt;As far as I&#39;m concerned, this can be closed &#34;works as designed&#34;.
</div>&gt; 
&gt; If that&#39;s considered a good design, then I don&#39;t want to ever run any
&gt; code from this source ever again.  What other horrors might be lurking
&gt; in the guise of a default?
&gt; 
&gt; -zefram
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people DelWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1653183" href="/Public/Bug/Display.html?id=116136#txn-1653183">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;27&nbsp;09:05:06&nbsp;2016</span>
    <span class="description">dagolden [...] cpan.org -  Cc DAGOLDEN deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1653185" href="/Public/Bug/Display.html?id=116136#txn-1653185">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;27&nbsp;09:08:53&nbsp;2016</span>
    <span class="description">zefram [...] fysh.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> ribasushi [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #116136] code rudely added to shell rc file</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 27 Jul 2016 14:08:34 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> David Golden via RT &lt;bug-CPAN [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1653185/887194/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/887194">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">David Golden via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;That&#39;s trivially fixed by localizing that
</div>
I think you&#39;re aiming for the effect of dishonouring PERL_MM_USE_DEFAULT
for that question, requiring some stdin input, and you&#39;re intending
that that would qualify as enforcing real human input.  Under the most
charitable interpretation, if it does force human input, that makes
automated installations impossible, thus defeating a major goal of CPAN.
Unattended installations should be possible.  But in practice reading from
stdin doesn&#39;t enforce human input; all it would do is put the CPAN distro
into the class of distros that annoyingly don&#39;t honour PERL_MM_USE_DEFAULT
which is the motivation for piping newlines.  In that case the default
is as default as it was before and still just as rude.

If you really want to enforce that an installation going through the path
involving this question cannot be done without specific human attention to
this issue, then the way to do it is to terminate the installation process
with a message instead of asking the question.  Require a Makefile.PL
parameter, specific to this issue, to be supplied in order to get past
this point.  &#40;The parameter might answer the edit-your-rcfiles question,
or might merely cause it to be asked interactively.&#41;  I don&#39;t think this
would be a great default, but it would be better than editing rcfiles
by default.

-zefram
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1653189" href="/Public/Bug/Display.html?id=116136#txn-1653189">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;27&nbsp;09:19:14&nbsp;2016</span>
    <span class="description">zefram [...] fysh.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> ribasushi [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #116136] code rudely added to shell rc file</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 27 Jul 2016 14:18:53 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> David Golden via RT &lt;bug-CPAN [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1653189/887197/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/887197">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 327b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">David Golden via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;Zefram, you&#39;re repeating yourself
</div>
I repeated what you seemed to have not grasped the first time.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;and being offensive
</div>
I&#39;m finding it difficult to convey my view of the behaviour in question
without running that risk.  It is very offensive code behaviour, and
does arouse strong emotion.

-zefram
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1665598" href="/Public/Bug/Display.html?id=116136#txn-1665598">#</a>      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;06&nbsp;05:54:01&nbsp;2016</span>
    <span class="description">KENTNL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1665598/893948/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/893948">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza"><p>
	Just something to add here for a case I just spent half an hour diagnosing.</p>

<p>
	&nbsp;</p>

<p>
	A user came to me where arbitrary code like `perl -Mstrict -e1` died with permissions denied issues for the &quot;portage&quot; user ( the user who runs package management tasks )</p>

<p>
	After a bit of digging, we eventually discovered that UID=portage was trying to read /home/$USER/perl because it was profoundly in @INC</p>

<p>
	And of course, &quot;path in @INC without permissions&quot; -&gt; &quot;Perl dies&quot;</p>

<p>
	I&#39;m not sure how it blead*[1], but the auto-injected ENV vars that were injected into the users bash profile without their knowledge, then bled into a context that affected their whole system, and discovered PERL5LIB=/home/USER/... was somehow set as ROOT and OTHERUSERS, breaking every perl call under OTHERUSERS</p>

<p>
	Granted most of this problem is in understanding how ENV blead through different users.</p>

<p>
	But it is also greatly exacerbated by code injecting its own magic into ~/.bashrc without peoples explicit decision.</p>

<p>
	But the point is security is never magic bullets, all layers.</p>

<p>
	And here, 2 layers collided causing something that was fortunately only an annoyance, but could have been much worse.</p>

<p>
	Violating one layer of security in seemingly naive and helpful ways to make things &quot;Faster&quot; hence lends itself to deeper problems.</p>

<p>
	( Because nobody would make the above mistakes on purpose, any argument that results in &quot;well, just don&#39;t do that&quot; would of course miss the point :) )</p>

<p>
	&nbsp;</p>

<p>
	1: As soon as we&#39;d discovered the bashrc bleading was to blame, they nuked it and fell off IRC, none of us had a clue *why* it was bleading, only that it was</p>


</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.631266</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
