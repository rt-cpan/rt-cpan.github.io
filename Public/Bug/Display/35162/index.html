<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #35162 for Math-BigInt-FastCalc: Re: MBI segfault</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #35162 for Math-BigInt-FastCalc: Re: MBI segfault</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Math-BigInt-FastCalc/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Math-BigInt-FastCalc/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Math-BigInt-FastCalc/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Math-BigInt-FastCalc/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Math-BigInt-FastCalc">Math-BigInt-FastCalc CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">35162</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">5 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Math-BigInt-FastCalc/Active/">Math-BigInt-FastCalc</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">TELS [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ambrus [...] math.bme.hu

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-20510-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.19    </td>
  </tr>
  <tr id="CF-20511-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;17&nbsp;14:35:40&nbsp;2008</span>
    <span class="description">ambrus [...] math.bme.hu -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Richard &lt;vzshzn [...] gmail.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: MBI segfault</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 17 Apr 2008 20:35:17 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt-FastCalc [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Zsbán Ambrus&#34; &lt;ambrus [...] math.bme.hu&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

The following command causes a segmentation fault on my perl 5.10.0 on
i686 linux:

perl -wE &#39;use Math::BigRat &#34;lib&#34;, &#34;FastCalc&#34;; use Math::BigFloat
&#34;lib&#34;, &#34;FastCalc&#34;; say
Math::BigFloat-&gt;as_number&#40;Math::BigRat-&gt;new&#40;&#34;10/7&#34;&#41;&#41;;&#39;

This code is clearly wrong: the as_number method is called with
parameters I shouldn&#39;t give to it.  However, I believe it still
shoudn&#39;t result in a segfault, but either die or give some result.
This is especially true because FastCalc is now the default engine for
MBI.

At least two other people have confirmed that this command segfaults
on their machine too.

I couldn&#39;t reproduce the bug with perl 5.8.8.


Zshzn has kindly volunteered to look in this segfault with a debugger.
 He says the following.

On Wed, Apr 16, 2008 at 10:52 PM, Richard &lt;vzshzn@gmail.com&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Here&#39;s what I&#39;ve found out about your
&gt; segfault:
&gt;
&gt; It happens in _copy of FastCalc.xs, which is called from BigFloat.pm&#39;s
&gt; as_number at about line 3642.
&gt;
&gt; as_number tries to _copy $x-&gt;{_m}, which is undef. I assume the undefness of
&gt; the situation causes the problem :p
&gt;
&gt; I would get more accurate info but by recompiling FastCalc the problem went
&gt; away. Maybe it has already been fixed, at least on one end.
</div>

Here are some details about my installation.

[am]king ~/a/tmp$ perl -wE &#39;use Math::BigRat &#34;lib&#34;, &#34;FastCalc&#34;; use
Math::BigFloat &#34;lib&#34;, &#34;FastCalc&#34;; say
Math::BigFloat-&gt;as_number&#40;Math::BigRat-&gt;new&#40;&#34;10/7&#34;&#41;&#41;;&#39;
Segmentation fault
139[am]king ~/a/tmp$ perl -V
Summary of my perl5 &#40;revision 5 version 10 subversion 0&#41; configuration:
  Platform:
    osname=linux, osvers=2.6.20.6, archname=i686-linux
    uname=&#39;linux king 2.6.20.6 #3 smp tue may 29 09:42:52 cest 2007
i686 gnulinux &#39;
    config_args=&#39;&#39;
    hint=recommended, useposix=true, d_sigaction=define
    useithreads=undef, usemultiplicity=undef
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=undef, use64bitall=undef, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;gcc&#39;, ccflags =&#39;-fno-strict-aliasing -pipe
-I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64&#39;,
    optimize=&#39;-O2&#39;,
    cppflags=&#39;-fno-strict-aliasing -pipe -I/usr/local/include&#39;
    ccversion=&#39;&#39;, gccversion=&#39;4.1.1&#39;, gccosandvers=&#39;&#39;
    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=1234
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=12
    ivtype=&#39;long&#39;, ivsize=4, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;,
lseeksize=8
    alignbytes=4, prototype=define
  Linker and Libraries:
    ld=&#39;gcc&#39;, ldflags =&#39; -L/usr/local/lib&#39;
    libpth=/usr/local/lib /lib /usr/lib /usr/lib64
    libs=-lnsl -ldl -lm -lcrypt -lutil -lc
    perllibs=-lnsl -ldl -lm -lcrypt -lutil -lc
    libc=/lib/libc-2.3.6.so, so=so, useshrplib=false, libperl=libperl.a
    gnulibc_version=&#39;2.3.6&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags=&#39;-Wl,-E&#39;
    cccdlflags=&#39;-fPIC&#39;, lddlflags=&#39;-shared -O2 -L/usr/local/lib&#39;


Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options: PERL_DONT_CREATE_GVSV PERL_MALLOC_WRAP
                        USE_LARGE_FILES USE_PERLIO
  Built under linux
  Compiled at Dec 18 2007 19:48:06
  @INC:
    /usr/local/lib/perl5/5.10.0/i686-linux
    /usr/local/lib/perl5/5.10.0
    /usr/local/lib/perl5/site_perl/5.10.0/i686-linux
    /usr/local/lib/perl5/site_perl/5.10.0
    /usr/local/lib/perl5/site_perl/5.8.8
    /usr/local/lib/perl5/site_perl
    .
[am]king ~/a/tmp$ perl -wE &#39;use Math::BigInt; say
$Math::BigInt::VERSION;&#39; # this is the version that comes with perl
5.10.0
1.88
[am]king ~/a/tmp$ perl -wE &#39;use Math::BigRat; say
$Math::BigRat::VERSION;&#39; # this one is updated though
0.22
[am]king ~/a/tmp$ perl -wE &#39;use Math::BigInt::FastCalc; say
$Math::BigInt::FastCalc::VERSION;&#39;
0.19


Incidentally, thanks for the new as_float method in Math::BigRat, it&#39;s
just what I&#39;d have needed for a program I wrote two months ago.

Ambrus
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;17&nbsp;15:28:01&nbsp;2008</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #35162] Re: MBI segfault</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 17 Apr 2008 21:27:03 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt-FastCalc [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tels &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

On Thursday 17 April 2008 20:35:42 ambrus@math.bme.hu via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thu Apr 17 14:35:40 2008: Request 35162 was acted upon.
&gt; Transaction: Ticket created by ambrus@math.bme.hu
&gt;        Queue: Math-BigInt-FastCalc
&gt;      Subject: Re: MBI segfault
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: ambrus@math.bme.hu
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=35162">http://rt.cpan.org/Ticket/Display.html?id=35162</a></span> &gt;
&gt;
&gt;
&gt; Hi,
&gt;
&gt; The following command causes a segmentation fault on my perl 5.10.0
&gt; on i686 linux:
&gt;
&gt; perl -wE &#39;use Math::BigRat &#34;lib&#34;, &#34;FastCalc&#34;; use Math::BigFloat
&gt; &#34;lib&#34;, &#34;FastCalc&#34;; say
&gt; Math::BigFloat-&gt;as_number&#40;Math::BigRat-&gt;new&#40;&#34;10/7&#34;&#41;&#41;;&#39;
</div>[snip]

It seems you use the BigInt from v5.10.0 and updated to the new 
FastCalc, so I will need a bit of time to track things down and check 
what actually happens. But it shouldn&#39;t segfault :&#41;

Thanx for the report!

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Incidentally, thanks for the new as_float method in Math::BigRat,
&gt; it&#39;s just what I&#39;d have needed for a program I wrote two months ago.
</div>
Oh wow, coincidence, I just needed it for something and thought it might 
be useful. :&#41; There are not many users of BigRat &#40;or even BigFloat and 
BigInts&#41; and I get basically zero feedback so I always add stuff when I 
think of it :&#41;

All the best,

Tels

-- 
 Signed on Thu Apr 17 21:24:41 2008 with key 0x93B84C15.
 Get one of my photo posters: <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/posters">http://bloodgate.com/posters</a></span>
 PGP key on <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/tels.asc">http://bloodgate.com/tels.asc</a></span> or per email.

 &#34;I can confirm this experimentally. Inspired by this development, I
 implanted electrodes into a bowl of tomato soup. No amount of deep
 electrical stimulation could bring the soup into anything we could
 recognize as consciousness, nor was its ability to communicate
 improved.
 Possibly the failure of the deep electrical stimulation to
 elicit the desired response has something to do with the vegetative
 state of the tomatoes that were used to make the soup. With this in
 mind, I am going to be conducting further experiments using a crab
 bisque.&#34;

  -- Ohreally_factor &#40;593551&#41; on 2007-08-05 on /. &#40;#20119773&#41;
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/450559/221402/">Download &#40;untitled&#41;</a><br />
<span class="downloadcontenttype">application/pgp-signature 481b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;17&nbsp;15:28:07&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;18&nbsp;02:18:24&nbsp;2008</span>
    <span class="description">ambrus [...] math.bme.hu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #35162] MBI segfault</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 18 Apr 2008 08:18:09 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt-FastCalc [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Zsbán Ambrus&#34; &lt;ambrus [...] math.bme.hu&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, Apr 17, 2008 at 9:28 PM, nospam-abuse@bloodgate.com via RT
&lt;bug-Math-BigInt-FastCalc@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  It seems you use the BigInt from v5.10.0 and updated to the new
&gt;  FastCalc, so I will need a bit of time to track things down and check
&gt;  what actually happens. But it shouldn&#39;t segfault :&#41;
</div>
That&#39;s what the cpan shell wants to do because the BigInt that comes
with perl 5.10.0 has the same version number &#40;1.88&#41; as the new one on
cpan.

Ambrus
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;18&nbsp;12:33:15&nbsp;2008</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #35162] MBI segfault</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 18 Apr 2008 18:27:05 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt-FastCalc [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tels &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Friday 18 April 2008 08:18:26 ambrus@math.bme.hu via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Math-BigInt-FastCalc
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=35162">http://rt.cpan.org/Ticket/Display.html?id=35162</a></span> &gt;
&gt;
&gt; On Thu, Apr 17, 2008 at 9:28 PM, nospam-abuse@bloodgate.com via RT
&gt;
&gt; &lt;bug-Math-BigInt-FastCalc@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt;  It seems you use the BigInt from v5.10.0 and updated to the new
&gt; &gt;  FastCalc, so I will need a bit of time to track things down and
&gt; &gt; check what actually happens. But it shouldn&#39;t segfault :&#41;
</div>&gt;
&gt; That&#39;s what the cpan shell wants to do because the BigInt that comes
&gt; with perl 5.10.0 has the same version number &#40;1.88&#41; as the new one on
&gt; cpan.
</div>
It shouldn&#39;t really matter as both versions should be indeed identical 
in code.

All the best,

Tels

-- 
 Signed on Fri Apr 18 18:26:36 2008 with key 0x93B84C15.
 Get one of my photo posters: <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/posters">http://bloodgate.com/posters</a></span>
 PGP key on <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/tels.asc">http://bloodgate.com/tels.asc</a></span> or per email.

 &#34;My name is Felicity Shagwell. Shagwell by name, shag very well by
 reputation.&#34;
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/451066/221641/">Download &#40;untitled&#41;</a><br />
<span class="downloadcontenttype">application/pgp-signature 481b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;20&nbsp;06:06:30&nbsp;2008</span>
    <span class="description">TELS [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;20&nbsp;06:06:55&nbsp;2008</span>
    <span class="description">TELS [...] cpan.org -  TimeWorked changed from &#40;no value&#41; to &#39;5&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;20&nbsp;06:06:56&nbsp;2008</span>
    <span class="description">TELS [...] cpan.org -  Severity Critical added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;20&nbsp;06:06:56&nbsp;2008</span>
    <span class="description">TELS [...] cpan.org -  Broken in 0.19 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;20&nbsp;06:15:09&nbsp;2008</span>
    <span class="description">TELS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">After looking into this issue, I noted that simple Math::BigFloat cannot
handle being passed a Math::BigRat object.

Of course I can have a look and find out why Math::BigInt::FastCalc
segfaults, but I don&#39;t think I can do much sensible things in its
codebase - after all, calling it with the wrong parameters won&#39;t ever
get  a correct result :&#41;

And since adding all the checks for wrong parameters &#40;just to catch
wrong calling styles in code above&#41; would slow everything down, I fixed
Math::BigFloat instead by doing the right thing when getting a
non-Math::BigFloat object &#40;which a BigRat is&#41;:

# perl -Ilib -wle &#39;use Math::BigRat &#34;lib&#34;, &#34;FastCalc&#34;; use
Math::BigFloat &#34;lib&#34;, &#34;FastCalc&#34;; print
Math::BigFloat-&gt;as_number&#40;Math::BigRat-&gt;new&#40;&#34;120/7&#34;&#41;&#41;;&#39;
17

The fix will be in Math::BigInt v1.89. To force people to upgrade, I
will also add a requirement for v1.89 in Math::BigInt::FastCalc v0.20
when I release it.

If this doesn&#39;t solve your issue, or you have any comments, please reply
to this bug report to re-open it. Thank you for your report!

Tels
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;03&nbsp;16:52:26&nbsp;2010</span>
    <span class="description">rafl [...] debian.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
