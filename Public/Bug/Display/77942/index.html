<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #77942 for Test-AutoLoader: Tests fails wtih perl 5.16.0 becuse the autosplitted al files does not exist anymore</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #77942 for Test-AutoLoader: Tests fails wtih perl 5.16.0 becuse the autosplitted al files does not exist anymore</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Test-AutoLoader/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Test-AutoLoader/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Test-AutoLoader/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Test-AutoLoader/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Test-AutoLoader">Test-AutoLoader CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">77942</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">new</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Test-AutoLoader/Active/">Test-AutoLoader</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ppisar [...] redhat.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
gregoa [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-31316-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.03    </td>
  </tr>
  <tr id="CF-31317-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;21&nbsp;04:22:28&nbsp;2012</span>
    <span class="description">ppisar [...] redhat.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Tests fails wtih perl 5.16.0 becuse the autosplitted al files
 does not exist anymore</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Tests that expects pass fails with perl 5.16.0:

#   Failed test &#39;subtest &#39;Autoload of POSIX &#40;all files&#41;&#39; of
&#39;Standard-distribution module, all files&#39; compare ok&#39;
#   at t/00basic.t line 68.
#          got: &#39;0&#39;
#     expected: &#39;1&#39;
#   Failed test &#39;subtest &#39;Autoload of POSIX &#40;listed subroutines&#41;&#39; of
&#39;Standard-distribution module, one file&#39; compare ok&#39;
#   at t/00basic.t line 68.
#          got: &#39;0&#39;
#     expected: &#39;1&#39;
# Looks like you failed 2 tests of 64.

This is because the autoload_ok&#40;&#41; checks for autosplited files, e.g.
auto/POSIX/strcpy.al, which are not generated by perl 5.16.0.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;21&nbsp;04:35:09&nbsp;2012</span>
    <span class="description">ppisar [...] redhat.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ppisar [...] redhat.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This is because the autoload_ok&#40;&#41; checks for autosplited files, e.g.
&gt; auto/POSIX/strcpy.al, which are not generated by perl 5.16.0.
</div>
perldelta &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/dist/perl-5.16.0/pod/perldelta.pod">http://search.cpan.org/dist/perl-5.16.0/pod/perldelta.pod</a></span>&gt; says:

POSIX no longer uses AutoLoader. Any code which was relying on this
implementation detail was buggy, and may fail because of this change.

Not using AutoLoader is the reason why the al files are missing.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;21&nbsp;05:10:27&nbsp;2012</span>
    <span class="description">ppisar [...] redhat.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ppisar [...] redhat.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This is because the autoload_ok&#40;&#41; checks for autosplited files, e.g.
&gt; auto/POSIX/strcpy.al, which are not generated by perl 5.16.0.
</div>
Attached patch skips the two test on perl 5.16 and newer.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Test-AutoLoader-0.03-Skip-POSIX-tests-with-perl-5.16.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 7f347d684936c6108e658ba6c12e43b7e62562f3 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Petr=20P=C3=ADsa=C5=99?= &lt;ppisar@redhat.com&gt;
Date: Thu, 21 Jun 2012 10:49:01 +0200
Subject: [PATCH] Skip POSIX tests with perl 5.16

---
 t/00basic.t |   11 +++++++++--
 1 files changed, 9 insertions&#40;+&#41;, 2 deletions&#40;-&#41;

diff --git a/t/00basic.t b/t/00basic.t
index 94f1a4f..462d8e0 100644
--- a/t/00basic.t
+++ b/t/00basic.t
@@ -35,6 +35,7 @@ require EmptyModule;
 my @unreadable = &#40;File::Spec-&gt;catdir&#40;qw&#40;tlib auto TestBusted1&#41;&#41;,
                   File::Spec-&gt;catfile&#40;qw&#40;tlib auto TestBusted2 no_ready.al&#41;&#41;&#41;;
 my $CAN_CHMOD =  chmod 0000, @unreadable;
+my $POSIX_USES_AUTOLOAD = $^V lt v5.16.0;
 my $file_errors;
 $file_errors .=&lt;&lt;DIAG if $CAN_CHMOD;
     couldn&#39;t load no_ready.al: Permission denied
@@ -46,8 +47,6 @@ DIAG
 
 
 my @tests = &#40;
-  [ [&#39;POSIX&#39;],{ok=&gt;1,name=&gt;&#34;Autoload of POSIX &#40;all files&#41;&#34;},&#34;Standard-distribution module, all files&#34;],
-  [ [qw&#40;POSIX strcpy&#41;],{ok=&gt;1,name=&gt;&#34;Autoload of POSIX &#40;listed subroutines&#41;&#34;},&#34;Standard-distribution module, one file&#34;],
   [ [qw&#40;POSIX no_such_function&#41;], {ok=&gt;0,diag=&gt;&#34;    couldn&#39;t load no_such_function.al: No such file or directory&#34;}, &#34;Standard-distribution, bad subroutine name&#34;],
   [ [qw&#40;strict&#41;], {ok=&gt;0,diag=&gt;&#34;Unable to find valid autoload directory for strict&#34;}, &#34;Non-existent auto directory&#34;],
   [ [qw&#40;EmptyModule&#41;], {ok=&gt;0,diag=&gt;&#34;No autoloaded files found&#34;}, &#34;No files in auto directory&#34;],
@@ -59,6 +58,14 @@ my @tests = &#40;
 
 &#41;;
 
+if &#40;$POSIX_USES_AUTOLOAD&#41; {
+    push @tests,
+      [ [&#39;POSIX&#39;],{ok=&gt;1,name=&gt;&#34;Autoload of POSIX &#40;all files&#41;&#34;},&#34;Standard-distribution module, all files&#34;],
+      [ [qw&#40;POSIX strcpy&#41;],{ok=&gt;1,name=&gt;&#34;Autoload of POSIX &#40;listed subroutines&#41;&#34;},&#34;Standard-distribution module, one file&#34;];
+} else {
+  SKIP:{skip &#34;POSIX module does not use AutoLoader&#34;,12}
+}
+
 if &#40;$CAN_CHMOD&#41; {
     push @tests, 
       [ [qw&#40;TestBusted1&#41;], {ok=&gt;0,diag=&gt;&#34;Unable to find valid autoload directory for TestBusted1&#34;}, &#34;Unreadable auto directory&#34;],
-- 
1.7.7.6

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;16&nbsp;11:11:23&nbsp;2013</span>
    <span class="description">gregoa [...] cpan.org -  Cc GREGOA added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
