<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #122933 for Graphics-TIFF: t/1.t test crashes with ImageMagick 7.0.6.9</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #122933 for Graphics-TIFF: t/1.t test crashes with ImageMagick 7.0.6.9</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Graphics-TIFF">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Graphics-TIFF">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Graphics-TIFF">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Graphics-TIFF">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Graphics-TIFF">Graphics-TIFF CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">122933</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Graphics-TIFF">Graphics-TIFF</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">jffry [...] posteo.net
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ppisar [...] redhat.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-268474-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
6    </td>
  </tr>
  <tr id="CF-268475-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




signature.asc<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1755175/944393/signature.asc">
Thu Nov 02 09:55:57 2017 (228b) by ppisar [...] redhat.com
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/1752960/943118/signature.asc">
Thu Oct 19 15:47:41 2017 (833b) by jffry [...] posteo.net
</a>
</font></li>
</ul>


test-workaround.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1919001/1027605/test-workaround.patch">
Wed Nov 11 10:24:14 2020 (879b) by TVIGNAUD [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=122933">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1746876" href="/Public/Bug/Display.html?id=122933#txn-1746876">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;31&nbsp;09:27:30&nbsp;2017</span>
    <span class="description">ppisar [...] redhat.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> t/1.t test crashes with ImageMagick 7.0.6.9</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1746876/939621/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/939621">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">After upgrading ImageMagick from 6.9.9.3 to 7.0.6.9 I experience this crash in t/1.t test:

$ perl -Iblib/{lib,arch} t/1.t 
1..43
ok 1 - use Graphics::TIFF;
ok 2 - version string
ok 3 - version
ok 4 - IsCODECConfigured
ok 5 - FileName
ok 6 - An object of class &#39;Graphics::TIFF&#39; isa &#39;Graphics::TIFF&#39;
ok 7 - Graphics::TIFF-&gt;can&#40;...&#41;
ok 8 - ReadDirectory
perl: MagickCore/exception.c:1034: ThrowMagickExceptionList: Assertion `exception-&gt;signature == MagickCoreSignature&#39; failed.
Aborted &#40;core dumped&#41;

It crashes in ReadEXIFDirectory&#40;&#41; method call:

SKIP: {
    skip &#39;Image::Magick not installed&#39;, 36 if $@;

    my $image = Image::Magick-&gt;new;
    $image-&gt;Read&#40;&#39;rose:&#39;&#41;;
    $image-&gt;Set&#40; density =&gt; &#39;72x72&#39; &#41;;
    $image-&gt;Write&#40;&#39;test.tif&#39;&#41;;

    my $tif = Graphics::TIFF-&gt;Open&#40; &#39;test.tif&#39;, &#39;r&#39; &#41;;
    is&#40; $tif-&gt;FileName, &#39;test.tif&#39;, &#39;FileName&#39; &#41;;
    isa_ok $tif, &#39;Graphics::TIFF&#39;;
    can_ok $tif, qw&#40;Close ReadDirectory GetField&#41;;

    is&#40; $tif-&gt;ReadDirectory, 0, &#39;ReadDirectory&#39; &#41;;

→   is&#40; $tif-&gt;ReadEXIFDirectory&#40;0&#41;, 0, &#39;ReadEXIFDirectory&#39; &#41;;
    [...]
}

The assert comes from ImageMagick&#39;s Perl binding, but the ReadEXIFDirectory&#40;&#41; method is a binding to LibTFF&#39;s TIFFReadEXIFDirectory&#40;&#41; function. I have libtiff-4.0.8.

I&#39;m not sure where the problem is.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1752960" href="/Public/Bug/Display.html?id=122933#txn-1752960">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;19&nbsp;15:47:41&nbsp;2017</span>
    <span class="description">jffry [...] posteo.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #122933] t/1.t test crashes with ImageMagick 7.0.6.9</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 19 Oct 2017 21:47:06 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Graphics-TIFF [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeff &lt;jffry [...] posteo.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #122933] t/1.t test crashes with ImageMagick 7.0.6.9</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Graphics-TIFF [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeff &lt;jffry [...] posteo.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1752960/943117/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/943117">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 962b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry for the delay.

On 31/08/17 15:27, Petr Pisar via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; After upgrading ImageMagick from 6.9.9.3 to 7.0.6.9 I experience this crash in t/1.t test:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ok 8 - ReadDirectory
&gt; perl: MagickCore/exception.c:1034: ThrowMagickExceptionList: Assertion `exception-&gt;signature == MagickCoreSignature&#39; failed.
&gt; Aborted &#40;core dumped&#41;
&gt; 
&gt; It crashes in ReadEXIFDirectory&#40;&#41; method call:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; →   is&#40; $tif-&gt;ReadEXIFDirectory&#40;0&#41;, 0, &#39;ReadEXIFDirectory&#39; &#41;;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The assert comes from ImageMagick&#39;s Perl binding, but the ReadEXIFDirectory&#40;&#41; method is a binding to LibTFF&#39;s TIFFReadEXIFDirectory&#40;&#41; function. I have libtiff-4.0.8.
&gt; 
&gt; I&#39;m not sure where the problem is.
</div>
IM v7 hasn&#39;t made it to my development machines yet.

I&#39;ll look at this when it does. Alternatively - if you could provide me
with the smallest possible test.tif that reproduces the problem - e.g.
density 1x1, then I can build it into the tests as uu or base64 encoded
and then try to fix the bug.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1752960/943118/signature.asc">Download signature.asc</a><br />
<span class="downloadcontenttype">application/pgp-signature 833b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1752961" href="/Public/Bug/Display.html?id=122933#txn-1752961">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;19&nbsp;15:47:41&nbsp;2017</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1755175" href="/Public/Bug/Display.html?id=122933#txn-1755175">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;02&nbsp;09:55:57&nbsp;2017</span>
    <span class="description">ppisar [...] redhat.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #122933] t/1.t test crashes with ImageMagick 7.0.6.9</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 2 Nov 2017 14:56:31 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Jeffrey Ratcliffe via RT &lt;bug-Graphics-TIFF [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Petr Pisar &lt;ppisar [...] redhat.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1755175/944392/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/944392">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 576b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, Oct 19, 2017 at 03:47:41PM -0400, Jeffrey Ratcliffe via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; IM v7 hasn&#39;t made it to my development machines yet.
&gt; 
&gt; I&#39;ll look at this when it does. Alternatively - if you could provide me
&gt; with the smallest possible test.tif that reproduces the problem - e.g.
&gt; density 1x1, then I can build it into the tests as uu or base64 encoded
&gt; and then try to fix the bug.
&gt; 
</div>No hurry. The IM v7 upgrade was reverted to v6 in Fedora 28 because of many
regressions in depending packages. Thus I have not available it now and
I cannot provide you the image.

-- Petr
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1755175/944393/signature.asc">Download signature.asc</a><br />
<span class="downloadcontenttype">application/pgp-signature 228b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1918998" href="/Public/Bug/Display.html?id=122933#txn-1918998">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;11&nbsp;10:17:36&nbsp;2020</span>
    <span class="description">TVIGNAUD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1918998/1027600/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1027600">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 414b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Jeu 02 Nov 2017 09:55:57, ppisar a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; No hurry. The IM v7 upgrade was reverted to v6 in Fedora 28 because of many
&gt; regressions in depending packages. Thus I have not available it now and
</div>
That&#39;s still an issue in other distributions, eg: in Mageia Linux.
It fails with:
+perl5.32.0: MagickCore/exception.c:1118: ThrowMagickExceptionList: Assertion `exception-&gt;signature == MagickCoreSignature&#39; failed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1919001" href="/Public/Bug/Display.html?id=122933#txn-1919001">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;11&nbsp;10:24:14&nbsp;2020</span>
    <span class="description">TVIGNAUD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1919001/1027604/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1027604">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 327b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Mer 11 Nov 2020 10:17:36, TVIGNAUD a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; That&#39;s still an issue in other distributions, eg: in Mageia Linux.
&gt; It fails with:
&gt; +perl5.32.0: MagickCore/exception.c:1118: ThrowMagickExceptionList:
&gt; Assertion `exception-&gt;signature == MagickCoreSignature&#39; failed.
</div>
Commenting those 2 tests makes the testsuite to &#34;pass&#34;
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> test-workaround.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1919001/1027605/test-workaround.patch">Download test-workaround.patch</a><br />
<span class="downloadcontenttype">text/x-diff 879b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -up ./t/1.t.tv ./t/1.t
--- ./t/1.t.tv	2020-10-27 14:25:36.000000000 +0100
+++ ./t/1.t	2020-11-11 16:22:34.597748735 +0100
@@ -1,7 +1,7 @@
 use warnings;
 use strict;
 use Graphics::TIFF &#39;:all&#39;;
-use Test::More tests =&gt; 49;
+use Test::More tests =&gt; 47;
 use Test::Deep;
 BEGIN { use_ok&#40;&#39;Graphics::TIFF&#39;&#41; }
 
@@ -36,7 +36,7 @@ SKIP: {
 
     is&#40; $tif-&gt;ReadDirectory, 0, &#39;ReadDirectory&#39; &#41;;
 
-    is&#40; $tif-&gt;ReadEXIFDirectory&#40;0&#41;, 0, &#39;ReadEXIFDirectory&#39; &#41;;
+    #is&#40; $tif-&gt;ReadEXIFDirectory&#40;0&#41;, 0, &#39;ReadEXIFDirectory&#39; &#41;;
 
     is&#40; $tif-&gt;NumberOfDirectories, 1, &#39;NumberOfDirectories&#39; &#41;;
 
@@ -108,7 +108,7 @@ SKIP: {
 
     is&#40; length&#40; $tif-&gt;ReadRawStrip&#40; 1, 20 &#41; &#41;, 20, &#39;ReadRawStrip&#39; &#41;;
 
-    is&#40; $tif-&gt;ReadTile&#40; 0, 0, 0, 0 &#41;, undef, &#39;ReadTile&#39; &#41;;
+    #is&#40; $tif-&gt;ReadTile&#40; 0, 0, 0, 0 &#41;, undef, &#39;ReadTile&#39; &#41;;
 
     my $filename = &#39;out.txt&#39;;
     open my $fh, &#39;&gt;&#39;, $filename;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1919011" href="/Public/Bug/Display.html?id=122933#txn-1919011">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;11&nbsp;10:32:23&nbsp;2020</span>
    <span class="description">TVIGNAUD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1919011/1027613/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1027613">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 870b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Mer 11 Nov 2020 10:24:14, TVIGNAUD a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Le Mer 11 Nov 2020 10:17:36, TVIGNAUD a écrit :
<div class="message-stanza open">&gt; &gt; That&#39;s still an issue in other distributions, eg: in Mageia Linux.
&gt; &gt; It fails with:
&gt; &gt; +perl5.32.0: MagickCore/exception.c:1118: ThrowMagickExceptionList:
&gt; &gt; Assertion `exception-&gt;signature == MagickCoreSignature&#39; failed.
</div>&gt; 
&gt; Commenting those 2 tests makes the testsuite to &#34;pass&#34;
</div>
It happens on several CPAN testers.
See <span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=Graphics-TIFF+7">http://matrix.cpantesters.org/?dist=Graphics-TIFF+7</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/feab8c94-18e3-11eb-88b6-7b6c1f24ea8f">http://www.cpantesters.org/cpan/report/feab8c94-18e3-11eb-88b6-7b6c1f24ea8f</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/563d974c-1897-11eb-879d-f0621f24ea8f">http://www.cpantesters.org/cpan/report/563d974c-1897-11eb-879d-f0621f24ea8f</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/5e6638f2-1897-11eb-879d-f0621f24ea8f">http://www.cpantesters.org/cpan/report/5e6638f2-1897-11eb-879d-f0621f24ea8f</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/4b58a8bc-1897-11eb-879d-f0621f24ea8f">http://www.cpantesters.org/cpan/report/4b58a8bc-1897-11eb-879d-f0621f24ea8f</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/405d1588-1897-11eb-879d-f0621f24ea8f">http://www.cpantesters.org/cpan/report/405d1588-1897-11eb-879d-f0621f24ea8f</a></span>
&#40;…&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1919331" href="/Public/Bug/Display.html?id=122933#txn-1919331">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;14&nbsp;05:14:09&nbsp;2020</span>
    <span class="description">jffry [...] posteo.net -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1919333" href="/Public/Bug/Display.html?id=122933#txn-1919333">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;14&nbsp;05:17:43&nbsp;2020</span>
    <span class="description">jffry [...] posteo.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1919333/1027799/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1027799">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 172b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">What happens if you create the image as per the test with ImageMagick, then deinstall ImageMagick, comment out the part of the test that creates the file, and run the test?
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.379076</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
