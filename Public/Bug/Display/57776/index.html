<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #57776 for Pod-Markdown: links in generated markdown</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #57776 for Pod-Markdown: links in generated markdown</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Pod-Markdown">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Pod-Markdown">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Pod-Markdown">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Pod-Markdown">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Pod-Markdown">Pod-Markdown CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">57776</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Pod-Markdown">Pod-Markdown</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
JHTHORSEN [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
ether [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-229566-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-229567-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




links.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/781095/404535/links.patch">
Sun May 23 04:20:53 2010 (1.2k) by JHTHORSEN [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=57776">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-781095" href="/Public/Bug/Display.html?id=57776#txn-781095">#</a>      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;23&nbsp;04:20:53&nbsp;2010</span>
    <span class="description">JHTHORSEN [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> links in generated markdown</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/781095/404534/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/404534">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 413b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is partially a wish and partially a bug.

1&#41; Pod::Markdown does not parse internal links: L&lt;/foo&gt;
2&#41; Pod::Markdown does not parse links with text: L&lt;text|foo&gt;
3&#41; It has some weird formatting for external links

I think the attached patch can fix both of the issues.

Note: The reason why i use &lt;a name=&#34;...&#34;&gt; instead of &lt;h1 id=&#34;...&#34;&gt; is 
that it seems like github is stripping of the &#34;id&#34; part of the markup.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> links.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/781095/404535/links.patch">Download links.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- Markdown.pm	2010-03-27 15:40:50.000000000 +0100
+++ Markdown.jhthorsen	2010-05-23 10:14:49.000000000 +0200
@@ -90,7 +90,7 @@
         my $level = $1;
 
         # the headers never are indented
-        $parser-&gt;_save&#40;sprintf &#39;%s %s&#39;, &#39;#&#39; x $level, $paragraph&#41;;
+        $parser-&gt;_save&#40;sprintf &#39;&lt;h%i&gt;&lt;a name=&#34;pod_%s&#34;&gt;%s&lt;/a&gt;&lt;/h%i&gt;&#39;, $level, $paragraph, $paragraph, $level&#41;;
         if &#40;$level == 1&#41; {
             if &#40;$paragraph =~ m{NAME}xmsi&#41; {
                 $data-&gt;{searching} = &#39;title&#39;;
@@ -178,12 +178,18 @@
 
 sub _resolv_link {
     my &#40;$cmd, $arg, $pod_seq&#41; = @_;
-    if &#40;$arg =~ m{^http|ftp}xms&#41; {
+    my $text = $arg =~ s&#34;^&#40;.+?&#41;\|&#34;&#34; ? $1 : &#39;&#39;;
 
-        # direct link to a URL
-        return sprintf &#39;&lt;%s&gt;&#39;, $arg;
-    } elsif &#40;$arg =~ m{^&#40;\w+&#40;::\w+&#41;*&#41;$}&#41; {
-        return &#34;[$1]&#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/perldoc?$1&#41;">http://search.cpan.org/perldoc?$1&#41;</a></span>&#34;;
+    if &#40;$arg =~ m{^http|ftp}xms&#41; { # direct link to a URL
+        $text ||= $arg;
+        return sprintf &#39;[%s]&#40;%s&#41;&#39;, $text, $arg;
+    } elsif &#40;$arg =~ m{^/&#40;.*&#41;$}&#41; {
+        $text ||= $1;
+        $text = $1;
+        return &#34;[$text]&#40;\#pod_$1&#41;&#34;;
+    } elsif &#40;$arg =~ m{^&#40;\w+&#40;?:::\w+&#41;*&#41;$}&#41; {
+        $text ||= $1;
+        return &#34;[$text]&#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/perldoc?$1&#41;">http://search.cpan.org/perldoc?$1&#41;</a></span>&#34;;
     } else {
         return sprintf &#39;%s&lt;%s&gt;&#39;, $cmd, $arg;
     }
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-781254" href="/Public/Bug/Display.html?id=57776#txn-781254">#</a>      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;23&nbsp;14:39:57&nbsp;2010</span>
    <span class="description">marcel [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/781254/404622/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/404622">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 452b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Thanks for using this module; I agree its link handling is not very good.

But your patch would make this module produce HTML &#40;&lt;h1&gt;, &lt;a&gt;&#41; - it is intended to convert 
Pod to Markdown.

I&#39;ve set the status of this ticket to &#39;rejected&#39;; if you find a better way of doing this please send 
me another patch. But I don&#39;t think fragments are allowed in markdown - according to 
<span class="clickylink"><a target="new" rel="nofollow" href="http://daringfireball.net/projects/markdown/syntax">http://daringfireball.net/projects/markdown/syntax</a></span>.

Best regards,

Marcel
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-781256" href="/Public/Bug/Display.html?id=57776#txn-781256">#</a>      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;23&nbsp;14:39:58&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-781257" href="/Public/Bug/Display.html?id=57776#txn-781257">#</a>      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;23&nbsp;14:39:59&nbsp;2010</span>
    <span class="description">marcel [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-781274" href="/Public/Bug/Display.html?id=57776#txn-781274">#</a>      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;23&nbsp;15:36:46&nbsp;2010</span>
    <span class="description">JHTHORSEN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #57776] links in generated markdown</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 23 May 2010 21:36:10 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Pod-Markdown [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jan Henning Thorsen &lt;jhthorsen [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/781274/404629/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/404629">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 796b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">But that&#39;s the beauty of Markdown: It allows you to combine html and
markdown. Will you reconsider?

At least take the L&lt;text|link&gt; bit of the patch..?

On Sun, May 23, 2010 at 8:39 PM, Marcel Gruenauer == hanekomu via RT
&lt;bug-Pod-Markdown@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57776">https://rt.cpan.org/Ticket/Display.html?id=57776</a></span> &gt;
&gt;
&gt; Hi,
&gt;
&gt; Thanks for using this module; I agree its link handling is not very good.
&gt;
&gt; But your patch would make this module produce HTML &#40;&lt;h1&gt;, &lt;a&gt;&#41; - it is intended to convert
&gt; Pod to Markdown.
&gt;
&gt; I&#39;ve set the status of this ticket to &#39;rejected&#39;; if you find a better way of doing this please send
&gt; me another patch. But I don&#39;t think fragments are allowed in markdown - according to
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://daringfireball.net/projects/markdown/syntax">http://daringfireball.net/projects/markdown/syntax</a></span>.
&gt;
&gt; Best regards,
&gt;
&gt; Marcel
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-781280" href="/Public/Bug/Display.html?id=57776#txn-781280">#</a>      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;23&nbsp;15:36:50&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1133801" href="/Public/Bug/Display.html?id=57776#txn-1133801">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;27&nbsp;19:19:43&nbsp;2012</span>
    <span class="description">fschlich [...] zedat.fu-berlin.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> fschlich [...] zedat.fu-berlin.de</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1133801/596622/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/596622">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun May 23 14:39:57 2010, MARCEL wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; Thanks for using this module; I agree its link handling is not very
&gt; good.
&gt; 
&gt; But your patch would make this module produce HTML &#40;&lt;h1&gt;, &lt;a&gt;&#41; - it is
&gt; intended to convert
&gt; Pod to Markdown.
</div>
I agree that producing &lt;h1&gt; tags is probably inappropriate, as Markdown 
has its own ways to mark up headers. But Markdown does not have a way to 
define internal anchors to link to, and adding an HTML tag like &lt;a 
name=&#34;pod_mysection&#34;&gt; before the markdown section header may just be the 
right thing to do.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve set the status of this ticket to &#39;rejected&#39;; if you find a better
&gt; way of doing this please send
&gt; me another patch. But I don&#39;t think fragments are allowed in markdown
&gt; - according to
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://daringfireball.net/projects/markdown/syntax">http://daringfireball.net/projects/markdown/syntax</a></span>.
</div>
This is not correct. At least currently &#40;October 2012&#41; this document 
says:

&#34;The idea for Markdown is to make it easy to read, write, and edit 
prose. HTML is a publishing format; Markdown is a writing format. Thus, 
Markdown’s formatting syntax only addresses issues that can be conveyed 
in plain text.

For any markup that is not covered by Markdown’s syntax, you simply use 
HTML itself. There’s no need to preface it or delimit it to indicate 
that you’re switching from Markdown to HTML; you just use the tags.&#34;

So I think it&#39;s perfectly ok to use HTML to define internal link 
targets.

Florian
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1133804" href="/Public/Bug/Display.html?id=57776#txn-1133804">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;27&nbsp;19:31:15&nbsp;2012</span>
    <span class="description">fschlich [...] zedat.fu-berlin.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> fschlich [...] zedat.fu-berlin.de</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1133804/596625/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/596625">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 548b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Oct 27 19:19:43 2012, fschlich wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So I think it&#39;s perfectly ok to use HTML to define internal link 
&gt; targets.
</div>
note, too, that Markdown flavors such as github or pandoc 
&#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://johnmacfarlane.net/pandoc/demo/example9/pandocs-">http://johnmacfarlane.net/pandoc/demo/example9/pandocs-</a></span>
markdown.html#header-identifiers-in-html-latex-and-context&#41; 
automatically produce lowercase anchors for all headers in a document 
when converting to HTML, so it may be sufficient to merely lowercase the 
target URL in case of an internal link:

  $text = $1;
  $url = lc&#40;$1&#41;;
  return &#34;[$text]&#40;\#$url&#41;&#34;;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1134209" href="/Public/Bug/Display.html?id=57776#txn-1134209">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;29&nbsp;10:15:51&nbsp;2012</span>
    <span class="description">RWSTAUNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> section links in generated markdown</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1134209/596860/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/596860">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I believe the link parsing is now correct and the remaining issue is how
to embed links to page fragments.

I&#39;m not crazy about the idea of muddying up the markdown with html tags
but I&#39;d be willing to make it an option in the constructor for those who
wanted it.

As for section anchors this is actually a problem that varies depending
on the site which will be parsing and displaying the markdown &#40;or the
sites to which external links will be pointing&#41;. 

For example, github&#39;s header id attributes do not quite match the rules
specified in the panoc link you provided... it appears to replace all
non-word characters with a single dash and trim it &#40;whereas pandoc has a
few more rules to make it more complicated&#41;.  I&#39;m guessing other sites
have their own rules.

This extends beyond internal links... If the pod &#40;being converted&#41;
contains links to specific sections in other modules the
section/hash/anchor needs to be mangled according to the rules of the
site it&#39;s pointing to.  For example:

<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/perldoc?Moose#The_MooseX::_namespace">http://search.cpan.org/perldoc?Moose#The_MooseX::_namespace</a></span>

versus

<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/module/Moose#The-MooseX::-namespace">https://metacpan.org/module/Moose#The-MooseX::-namespace</a></span>

* sco uses underscores
* metacpan uses dashes
* github replaces all-non-word chars
* pandoc allows some punctuation

So in order to get it right it seems to me that Pod::Markdown needs to
be told what website will be it&#39;s destination, both for internal links
and for external ones &#40;and then needs custom code for each site&#41;.

Currently the sites for man and perl module links are not customizable
but I had hoped one day they would be.  Regardless, section links to sco
are currently broken because Pod::Markdown does not yet know the rules
for mangling the section for sco.

So the only solution I see that would be &#34;correct&#34; would be custom rules
based on the destination sites &#40;which would have to be specified in the
constructor&#41;.

Anyone have any better ideas?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1291428" href="/Public/Bug/Display.html?id=57776#txn-1291428">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;22&nbsp;13:36:32&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1291428/684289/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/684289">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 696b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2012-10-29 07:15:51, RWSTAUNER wrote:


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So in order to get it right it seems to me that Pod::Markdown needs to
&gt; be told what website will be it&#39;s destination, both for internal links
&gt; and for external ones &#40;and then needs custom code for each site&#41;.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So the only solution I see that would be &#34;correct&#34; would be custom rules
&gt; based on the destination sites &#40;which would have to be specified in the
&gt; constructor&#41;.
</div>
This logic should live in one of the higher-level modules, I would think, not this one. It&#39;s been discussed before that there should be variant implementations &#40;subclasses?&#41; that generate links to s.c.o, metacpan etc.

e.g. see <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/theory/pod-simple/pull/36">https://github.com/theory/pod-simple/pull/36</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1291432" href="/Public/Bug/Display.html?id=57776#txn-1291432">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;22&nbsp;13:37:10&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Cc ETHER added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1291698" href="/Public/Bug/Display.html?id=57776#txn-1291698">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;22&nbsp;20:52:42&nbsp;2013</span>
    <span class="description">RWSTAUNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1291698/684428/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/684428">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1014b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Nov 22 11:36:32 2013, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2012-10-29 07:15:51, RWSTAUNER wrote:
&gt; 
&gt; 
<div class="message-stanza open">&gt; &gt; So in order to get it right it seems to me that Pod::Markdown needs
&gt; &gt; to
&gt; &gt; be told what website will be it&#39;s destination, both for internal
&gt; &gt; links
&gt; &gt; and for external ones &#40;and then needs custom code for each site&#41;.
</div>&gt; 
<div class="message-stanza open">&gt; &gt; So the only solution I see that would be &#34;correct&#34; would be custom
&gt; &gt; rules
&gt; &gt; based on the destination sites &#40;which would have to be specified in
&gt; &gt; the
&gt; &gt; constructor&#41;.
</div>&gt; 
&gt; This logic should live in one of the higher-level modules, I would
&gt; think, not this one. It&#39;s been discussed before that there should be
&gt; variant implementations &#40;subclasses?&#41; that generate links to s.c.o,
&gt; metacpan etc.
&gt; 
&gt; e.g. see <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/theory/pod-simple/pull/36">https://github.com/theory/pod-simple/pull/36</a></span>
</div>

Yeah, it got a bit hairy &#40;1.4/1.5&#41;... there&#39;s probably a better place for it.
I&#39;m open to suggestions.

I&#39;m almost done converting this dist to use Pod::Simple instead of Pod::Parser, so you can expect a 2.000 release soon.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.608655</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
