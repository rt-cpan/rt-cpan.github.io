<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #37269 for stockmonkey: Laguerre Moving Average</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #37269 for stockmonkey: Laguerre Moving Average</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/stockmonkey/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/stockmonkey/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/stockmonkey/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/stockmonkey/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/stockmonkey">stockmonkey CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">37269</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/stockmonkey/Active/">stockmonkey</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
johnb [...] listbrokers.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-222306-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-222307-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




laguerre.filter.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/480960/237553/laguerre.filter.pl">
Tue Jul 01 02:25:18 2008 (2.7k) by johnb [...] listbrokers.com
</a>
</font></li>
</ul>


Time Warp Without Space Travel.pdf<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/481302/237750/Time%20Warp%20Without%20Space%20Travel.pdf">
Tue Jul 01 14:10:27 2008 (381k) by johnb [...] listbrokers.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;01&nbsp;02:25:18&nbsp;2008</span>
    <span class="description">johnb [...] listbrokers.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Laguerre Moving Average</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Did some more work on finding a better moving average and came upon the
laguerre polynomial filter.  Looks like the best so far.  Very smooth
and responsive.  You can find more info at:
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.mesasoftware.com/technicalpapers.htm">http://www.mesasoftware.com/technicalpapers.htm</a></span> - look for the Time Warp
paper.

Hacked out some POS code based on the paper, don&#39;t laugh, maybe you can
make a module out of it.  Email me if it&#39;s too confusing.

Thanks,

John Baker
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> laguerre.filter.pl</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl

use List::Util qw&#40;max min&#41;;

sub Median {    # median may or may not be an element of the array
	            # got this from Math::NumberCruncher

	my $arrayref = shift;
	return undef unless defined $arrayref &#38;&#38; @$arrayref &gt; 0;
	my @array = sort { $a &lt;=&gt; $b } @$arrayref;
	if &#40; @array % 2 &#41; {
		$median = $array[ @array / 2 ];
	}
	else {
		$median = &#40; $array[ @array / 2 - 1 ] + $array[ @array / 2 ] &#41; / 2;
	}
	return $median;
}

sub FIR {

	my $price1 = $_[0];
	my $price2 = $_[1];
	my $price3 = $_[2];
	my $price4 = $_[3];

	return &#40; &#40; $price1 + 2 * $price2 + 2 * $price3 + $price4 &#41; / 6 &#41;;

}

sub dollar_round {
	my $n = shift;
	my $minus = $n &lt; 0 ? &#39;-&#39; : &#39;&#39;;
	$n = abs&#40;$n&#41;;
	$n = int&#40; &#40; $n + .005 &#41; * 100 &#41; / 100;
	$n .= &#39;.00&#39; unless $n =~ /\./;
	$n .= &#39;0&#39; if substr&#40; $n, &#40; length&#40;$n&#41; - 2 &#41;, 1 &#41; == &#39;.&#39;;
	chop $n if $n =~ /\.\d\d0$/;
	return &#34;$minus$n&#34;;
}

my $L0;
my $L1;
my $L2;
my $L3;
my $gamma  = .8;    #Starting Gamma, will change
my $length = 20;    #Set Days for gamma adjustment
my $counter;

# used last 50 odd days of IWM for testdata

@testdata = qw &#40;
  70.92	71.67	71.68	70.37	70.55	71.23	71.90	72.38	71.74	71.40
  72.63	72.55	72.27	72.86	71.56	71.71	71.50	73.07	73.49	73.40
  73.55	73.95	73.97	73.70	72.65	73.17	72.21	73.32	73.66	74.41
  74.67	73.99	73.84	74.30	76.20	73.92	73.68	73.14	71.87	72.02
  73.32	73.78	73.72	73.13	73.74	72.57	71.89	70.70	71.50	69.66
  69.73	69.05&#41;;

$L0 = $L1 = $L2 = $L3 = $testdata[0];

foreach $datum &#40;@testdata&#41; {

	# gcf array holds the variances between the latest price and the last
	# filter value

	push @gcf, abs&#40; $datum - $firfilter[ $counter - 1 ] &#41; if $counter &gt; 0;

	shift @gcf
	  if $counter &gt;= $length;    # we only want to see the last $length values

	$L0A = $L0;
	$L1A = $L1;
	$L2A = $L2;
	$L3A = $L3;

	$L0 = $gamma * $datum + &#40; 1 - $gamma &#41; * $L0A;
	$L1 = -&#40; 1 - $gamma &#41; * $L0 + $L0A + &#40; 1 - $gamma &#41; * $L1A;
	$L2 = -&#40; 1 - $gamma &#41; * $L1 + $L1A + &#40; 1 - $gamma &#41; * $L2A;
	$L3 = -&#40; 1 - $gamma &#41; * $L2 + $L2A + &#40; 1 - $gamma &#41; * $L3A;

	push @firfilter, FIR&#40; $L0, $L1, $L2, $L3 &#41;;
	$counter++;

	if &#40; $counter &gt;= $length &#41; {    # we have enough values

		my $highesthigh = max&#40;@gcf&#41;;    # the greatest variance
		my $lowestlow   = min&#40;@gcf&#41;;    # the least variance

		my @lastfive = @gcf;            # splice off the last five of this below
		my @gammafinder;

		# calculates the gamma as per the paper; the author recommended
		# the last five bars

		for &#40; splice&#40; @lastfive, $#lastfive - 4 &#41; &#41; {
			if &#40; $highesthigh - $lowestlow != 0 &#41; {
				push @gammafinder,
				  &#40; $_ - $lowestlow &#41; / &#40; $highesthigh - $lowestlow &#41;;
			}
		}

		# voila, adjustable gamma
		$gamma = Median&#40; \@gammafinder &#41;;
		print dollar_round&#40;$gamma&#41;, &#34;\t&#34;,
		  dollar_round&#40; $firfilter[ $counter - 1 ] &#41;, &#34;\n&#34;;

	}

}
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;01&nbsp;06:21:21&nbsp;2008</span>
    <span class="description">jettero [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #37269] Laguerre Moving Average</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 1 Jul 2008 06:20:52 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> John Baker via RT &lt;bug-stockmonkey [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Paul Miller &lt;jettero [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, Jul 01, 2008 at 02:25:23AM -0400, John Baker via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.mesasoftware.com/technicalpapers.htm">http://www.mesasoftware.com/technicalpapers.htm</a></span> - look for the Time Warp
&gt; paper.
</div>
This is really interesting.  I&#39;ll check it out.

-- 
If riding in an airplane is flying, then riding in a boat is swimming.
85 jumps, 36.0 minutes of freefall, 69.1 freefall miles.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;01&nbsp;06:21:23&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;01&nbsp;13:54:23&nbsp;2008</span>
    <span class="description">jettero [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jul 01 02:25:18 2008, johnab wrote: 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hacked out some POS code based on the paper, don&#39;t laugh, maybe you can
&gt; make a module out of it.  Email me if it&#39;s too confusing.
</div>
It actually seems pretty readable to me.  Perhaps there&#39;s some things I
could speed up.  The real problem is that I can&#39;t find any original
sources on this.  The site you linked to has all it&#39;s docs in .exe format.

Seriously.  Documents in .exe format.  Or perhaps they&#39;re not documents.
 I wouldn&#39;t know, not using win32.

-- 
If riding in an airplane is flying, then riding in a boat is swimming.
85 jumps, 36.0 minutes of freefall, 69.1 freefall miles.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;01&nbsp;14:10:25&nbsp;2008</span>
    <span class="description">johnb [...] listbrokers.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #37269] Laguerre Moving Average</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 01 Jul 2008 13:07:49 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-stockmonkey [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Baker &lt;JohnB [...] listbrokers.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yeah, it&#39;s a doc.  I used OpenOffice on it.  Reworked as a pdf.  Attached.

You are too kind on your code comments.

Paul Miller via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=37269">http://rt.cpan.org/Ticket/Display.html?id=37269</a></span> &gt;
&gt;
&gt; On Tue Jul 01 02:25:18 2008, johnab wrote: 
&gt;   
<div class="message-stanza open">&gt;&gt; Hacked out some POS code based on the paper, don&#39;t laugh, maybe you can
&gt;&gt; make a module out of it.  Email me if it&#39;s too confusing.
&gt;&gt;     
</div>&gt;
&gt; It actually seems pretty readable to me.  Perhaps there&#39;s some things I
&gt; could speed up.  The real problem is that I can&#39;t find any original
&gt; sources on this.  The site you linked to has all it&#39;s docs in .exe format.
&gt;
&gt; Seriously.  Documents in .exe format.  Or perhaps they&#39;re not documents.
&gt;  I wouldn&#39;t know, not using win32.
&gt;
&gt;   
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/481302/237750/Time%20Warp%20Without%20Space%20Travel.pdf">Download Time Warp Without Space Travel.pdf</a><br />
<span class="downloadcontenttype">application/pdf 381k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;01&nbsp;15:06:47&nbsp;2008</span>
    <span class="description">jettero [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #37269] Laguerre Moving Average</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 1 Jul 2008 15:04:50 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> John Baker via RT &lt;bug-stockmonkey [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Paul Miller &lt;jettero [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">

On Tue, Jul 01, 2008 at 02:10:33PM -0400, John Baker via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Yeah, it&#39;s a doc.  I used OpenOffice on it.  Reworked as a pdf.  Attached.
</div>
Oh, my mistake.  I should have tried that.  Still, .exe?

Were you using a Laguerre Filter? or the Adaptive Laguerre
Filter?

He Ehlers discusses both in that unlikely named paper.

I may implement both as they both seem pretty useful for data
smoothing even outside technical analysis.

-Paul


-- 
If riding in an airplane is flying, then riding in a boat is swimming.
85 jumps, 36.0 minutes of freefall, 69.1 freefall miles.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;01&nbsp;16:07:09&nbsp;2008</span>
    <span class="description">johnb [...] listbrokers.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #37269] Laguerre Moving Average</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 01 Jul 2008 15:05:26 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-stockmonkey [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Baker &lt;JohnB [...] listbrokers.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Agreed, the exe was kinda screwy.

My program uses the adaptive filtering method, but it&#39;s easy to do 
either one:

The adaptive filtering works like this:

First I store the latest 20 &#40;number stored in $length&#41; differences 
between what the FIR Filter returns and the next day&#39;s price in @gcf.  I 
only chose 20 because it&#39;s what I use in my ATR calculations. &#40;And I 
think it&#39;s in his paper&#41;

The maximum difference - or variance - is $highesthigh, smallest is 
$lowestlow

Once I have 20 values, I splice off the last five and normalize with 
this line: &#40; $_ - $lowestlow &#41; / &#40; $highesthigh - $lowestlow &#41;. 

Say 10 days ago the FIR filter returned 42.00 and nine days ago the 
actual value was 43.25 and furthermore this 1.25 difference turned out 
to be the greatest difference from the last 20.

Let&#39;s say also that the lowest difference from the last 20 days was .25

Now let&#39;s say you&#39;re on day 20 and the last 5 differences are .50 , .25 
, .40 , .75, .60.  Now we can figure out the gamma as the median of 
these 5 values:

Day 16 - Take &#40;.50 - .25&#41; / &#40;1.25 - .25&#41;  =  .25
Day 17 - Take &#40;.25 - .25&#41; / &#40;1.25 - .25&#41;  =   0
Day 18 - Take &#40;.40 - .25&#41; / &#40;1.25 - .25&#41;  =  .15
Day 19 - Take &#40;.75 - .25&#41; / &#40;1.25 - .25&#41;  =  .50
Day 20 - Take &#40;.60 - .25&#41; / &#40;1.25 - .25&#41;  =  .35

Median value = gamma = .25

That&#39;s how it works.  As the variances get closer to the largest 
difference &#40;meaning big price moves&#41;, the gamma value gets closer to 1.  
If the variances are low, the filter doesn&#39;t move much since the gamma 
is low.

By the way, the value of 5 for choosing the median came from his paper.

So, the if clause [starts with if &#40; $counter &gt;= $length &#41;] does the 
adaptive filtering.  It only starts to adapt after $length number of 
records.  If you drop the clause, you could just go static with the 
gamma value of your choosing.

- John


Paul Miller via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=37269">http://rt.cpan.org/Ticket/Display.html?id=37269</a></span> &gt;
&gt;
&gt;
&gt;
&gt; On Tue, Jul 01, 2008 at 02:10:33PM -0400, John Baker via RT wrote:
&gt;   
<div class="message-stanza open">&gt;&gt; Yeah, it&#39;s a doc.  I used OpenOffice on it.  Reworked as a pdf.  Attached.
&gt;&gt;     
</div>&gt;
&gt; Oh, my mistake.  I should have tried that.  Still, .exe?
&gt;
&gt; Were you using a Laguerre Filter? or the Adaptive Laguerre
&gt; Filter?
&gt;
&gt; He Ehlers discusses both in that unlikely named paper.
&gt;
&gt; I may implement both as they both seem pretty useful for data
&gt; smoothing even outside technical analysis.
&gt;
&gt; -Paul
&gt;
&gt;
&gt;   
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;25&nbsp;11:32:15&nbsp;2008</span>
    <span class="description">jettero [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jul 01 02:25:18 2008, johnab wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Did some more work on finding a better moving average and came upon the
&gt; laguerre polynomial filter.  Looks like the best so far.  Very smooth
&gt; and responsive.  You can find more info at:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.mesasoftware.com/technicalpapers.htm">http://www.mesasoftware.com/technicalpapers.htm</a></span> - look for the Time Warp
&gt; paper.
</div>
I forgot to close this ticket, but did in fact post the LF to CPAN a
week or so ago.

-- 
If riding in an airplane is flying, then riding in a boat is swimming.
94 jumps, 38.8 minutes of freefall, 75.7 freefall miles.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;25&nbsp;11:33:00&nbsp;2008</span>
    <span class="description">jettero [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Then somehow failed to close the ticket when I meant to close the ticket.

-- 
If riding in an airplane is flying, then riding in a boat is swimming.
94 jumps, 38.8 minutes of freefall, 75.7 freefall miles.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;25&nbsp;11:33:04&nbsp;2008</span>
    <span class="description">jettero [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;25&nbsp;11:54:51&nbsp;2008</span>
    <span class="description">johnb [...] listbrokers.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #37269] Laguerre Moving Average</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 25 Jul 2008 10:54:02 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-stockmonkey [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Baker &lt;JohnB [...] listbrokers.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I saw it earlier but forgot to say thanks for your work - and thanks for 
my credit.  I made CPAN!

If I run across anything else interesting, I&#39;ll pass it along.

John

Paul Miller via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=37269">http://rt.cpan.org/Ticket/Display.html?id=37269</a></span> &gt;
&gt;
&gt; On Tue Jul 01 02:25:18 2008, johnab wrote:
&gt;   
<div class="message-stanza open">&gt;&gt; Did some more work on finding a better moving average and came upon the
&gt;&gt; laguerre polynomial filter.  Looks like the best so far.  Very smooth
&gt;&gt; and responsive.  You can find more info at:
&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.mesasoftware.com/technicalpapers.htm">http://www.mesasoftware.com/technicalpapers.htm</a></span> - look for the Time Warp
&gt;&gt; paper.
&gt;&gt;     
</div>&gt;
&gt; I forgot to close this ticket, but did in fact post the LF to CPAN a
&gt; week or so ago.
&gt;
&gt;   
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;25&nbsp;11:54:54&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;25&nbsp;12:39:10&nbsp;2008</span>
    <span class="description">jettero [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Glad you like the credit.

FYI, replying re-opens the ticket... so I&#39;m just re-closing it.

-Paul

-- 
If riding in an airplane is flying, then riding in a boat is swimming.
94 jumps, 38.8 minutes of freefall, 75.7 freefall miles.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;25&nbsp;12:39:12&nbsp;2008</span>
    <span class="description">jettero [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
