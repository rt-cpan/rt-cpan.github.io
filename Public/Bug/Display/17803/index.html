<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #17803 for Puppet-Log: &#34;make test&#34; fails spectacularly under cygwin.</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #17803 for Puppet-Log: &#34;make test&#34; fails spectacularly under cygwin.</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Puppet-Log/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Puppet-Log/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Puppet-Log/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Puppet-Log/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Puppet-Log">Puppet-Log CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">17803</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">30 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Puppet-Log/Active/">Puppet-Log</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
northwind_1980 [...] yahoo.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-27346-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.011    </td>
  </tr>
  <tr id="CF-27347-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;22&nbsp;10:30:52&nbsp;2006</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> &#34;make test&#34; fails spectacularly under cygwin.</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Two errors were encountered during the install, the first was a
relativly simple fix &#40;involved putting dashes in front of various Tk
options&#41;; the second is described below.

Attached are the &#34;cleaned&#34; files with the offending line in Log.pm
commented out.  I know this is not a great fix, as it removes
functionality, but at least the module is now usable &#40;if a little
gimped&#41;.  The exact error I was getting during &#34;make test&#34; was:

=== Begin Error Text ===
t/log........ok 2/10Tk::Error: Can&#39;t set -help to `undef&#39; for
Tk::Multi::Text=HASH&#40;0x1041fb24&#41;: Can&#39;t set -help to `undef&#39; for
Tk::Frame=HASH&#40;0x10516370&#41;: Can&#39;t set -help to `undef&#39; for
Tk::ROText=HASH&#40;0x103322c0&#41;: Bad option `-help&#39; at
/usr/lib/perl5/vendor_perl/5.8/cygwin/Tk/Configure.pm line 46.
 at /usr/lib/perl5/vendor_perl/5.8/cygwin/Tk/Derived.pm line 294


 Tk callback for .
 Tk callback for .frame
 Tk callback for .manager
 Tk callback for .manager.text.frame
 Tk callback for .manager.text.frame.ysbslice
 Tk callback for .manager.text.frame.ysbslice.corner
 Tk callback for .manager.text
 Tk callback for .manager.text.frame.rotext
 Tk::Derived::configure at
/usr/lib/perl5/vendor_perl/5.8/cygwin/Tk/Derived.pm line 306
 Tk::Derived::configure at
/usr/lib/perl5/vendor_perl/5.8/cygwin/Tk/Derived.pm line 306
 Tk::Derived::configure at
/usr/lib/perl5/vendor_perl/5.8/cygwin/Tk/Derived.pm line 306
 Tk::Widget::new at /usr/lib/perl5/vendor_perl/5.8/cygwin/Tk/Widget.pm
line 205
 Tk::Widget::__ANON__ at
/usr/lib/perl5/vendor_perl/5.8/cygwin/Tk/Widget.pm line 256
 Tk::Multi::Manager::newSlave at
/usr/lib/perl5/site_perl/5.8/Tk/Multi/Manager.pm line 149
 Puppet::Log::display at
/home/username/.cpan/build/Puppet-Log-1.011/blib/lib/Puppet/Log.pm line 125
Can&#39;t set -help to `undef&#39; for Tk::Multi::Text=HASH&#40;0x1041fb24&#41;: Can&#39;t
set -help to `undef&#39; for Tk::Frame=HASH&#40;0x10516370&#41;: Can&#39;t set -help to
`undef&#39; for Tk::ROText=HASH&#40;0x103322c0&#41;: Bad option `-help&#39; at
/usr/lib/perl5/vendor_perl/5.8/cygwin/Tk/Configure.pm line 46.
 at /usr/lib/perl5/vendor_perl/5.8/cygwin/Tk/Derived.pm line 294
==== End Error Text ====

Perl version is:
This is perl, v.5.8.7 built for cygwin-thread-multi-64int

Operating System is:
CYGWIN_NT-5.1
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Log.pm</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">############################################################
#
# $Header: /mnt/barrayar/d06/home/domi/Tools/perlDev/Puppet_Log/RCS/Log.pm,v 1.11 1999/08/10 13:19:35 domi Exp $
#
# $Source: /mnt/barrayar/d06/home/domi/Tools/perlDev/Puppet_Log/RCS/Log.pm,v $
# $Revision: 1.11 $
# $Locker:  $
# 
############################################################

# Copyright &#40;c&#41; 1998 Dominique Dumont. All rights reserved.
# This program is free software; you can redistribute it and/or
# modify it under the same terms as Perl itself.

package Puppet::Log;
use Puppet::LogBody;

use Carp;

use strict;
use vars qw&#40;@ISA $VERSION&#41;;

@ISA = qw&#40;Puppet::LogBody&#41;;

$VERSION = sprintf &#34;%d.%03d&#34;, q$Revision: 1.11 $ =~ /&#40;\d+&#41;\.&#40;\d+&#41;/;

# see loadspecs for other names

sub new
{
  my $type = shift;

  my $title;
  if&#40;scalar&#40;@_&#41; % 2&#41;
  {
    carp &#34;Unnamed &#39;title&#39; parameter is deprecated with Puppet::Log\n&#34;;
    $title = shift;
  }

  my %args = @_;
  $title = delete $args{title} unless&#40;defined $title&#41;;

  if&#40;defined $args{whenNoDisplay}&#41;
  {
    carp &#34;whenNoDisplay parameter is deprecated with Puppet::Log-&gt;new\n&#34;;
    $args{how} = delete $args{whenNoDisplay};
  }

  my $help = delete $args{help};
  # parameter &#39;title&#39; is a short name for the Tk window
  # parameter &#39;name&#39; is a long name for the casual print

  my $self = new Puppet::LogBody&#40;%args&#41;;
  $self-&gt;{help} = $help;
  $self-&gt;{title} = $title;

  bless $self,$type;
}

sub log
{
  my $self = shift;
  my $text = shift;
  my %args = @_;

  if&#40;defined $args{whenNoDisplay}&#41;
  {
    carp &#34;whenNoDisplay parameter is deprecated with Puppet::Log-&gt;log\n&#34;;
    $args{how} = delete $args{whenNoDisplay};
  }

  $text = $self-&gt;SUPER::log&#40;$text,%args&#41;;

  if&#40;defined $self-&gt;{textObj}&#41;
  {
    $self-&gt;{textObj}-&gt;insertText&#40;$text&#41;;
  }
}

sub clear
{
  my $self = shift;
  $self-&gt;SUPER::clear&#40;&#41;;
  if&#40;defined $self-&gt;{textObj}&#41; { $self-&gt;{textObj}-&gt;clear&#40;&#41;; }
}

sub display
{
  my $self =shift;
  # ref is either a toplevel or a multi manager, optionnal if display was
  # already called once.
  my $ref = shift;
  my $hidden = shift || 0;  #optionnal

  # load only when display is called
  require Tk::Multi::Manager;
  require Tk::Multi::Text;
  require Tk::Multi::Toplevel;

  # don&#39;t create 2 displays
  if&#40;defined $self-&gt;{textObj}&#41;
  {
    my $mytop = $self-&gt;{textObj}-&gt;toplevel;
    $mytop-&gt;deiconify&#40;&#41; if&#40;$mytop-&gt;state&#40;&#41; =~ m/^iconic$/i&#41;;
    $mytop-&gt;raise&#40;&#41;;
    return $self-&gt;{manager};
  }

  croak&#40;&#34;No ref &#40;should be either a Toplevel or a MultiManager&#41; given for Puppet::Log\n&#34;&#41; unless&#40;defined $ref&#41;;

  if&#40;&#40;ref&#40;$ref&#41; eq &#34;Tk::Toplevel&#34;&#41; || &#40;ref&#40;$ref&#41; eq &#34;MainWindow&#34;&#41;&#41;
  {
    $self-&gt;{manager} = $ref-&gt;MultiTop&#40;title =&gt; &#39;Log &#39;.$self-&gt;{title}&#41;;
    $self-&gt;{manager}-&gt;OnDestroy&#40;sub { $ref-&gt;destroy; }&#41;;
  }
  elsif&#40;&#40;ref&#40;$ref&#41; eq &#39;Tk::Multi::Manager&#39;&#41; || &#40;ref&#40;$ref&#41; eq &#39;Tk::Multi::Toplevel&#39;&#41;&#41;
  {
    $self-&gt;{manager} = $ref;
  }
  else
  {
    croak&#40;&#34;Unexpected tk object &#40; &#34; . ref&#40;$ref&#41; . &#34; &#41; given to Puppet::Log\n&#34;&#41;;
  }

  $self-&gt;{textObj} = $self-&gt;{manager}-&gt;newSlave&#40; type =&gt; &#39;MultiText&#39;,
                                                 title =&gt; $self-&gt;{title},
                                                 hidden =&gt; $hidden,
#                                                 help =&gt; $self-&gt;{help},
                                               &#41;;
  $self-&gt;{textObj}-&gt;OnDestroy&#40;sub { $self-&gt;close; }&#41;;

  map &#40;$self-&gt;{textObj}-&gt;insertText&#40;$_&#41;, $self-&gt;getAll&#40;&#41;&#41;;

  return $self-&gt;{manager};
}

sub show
{
  my $self = shift;

  if&#40;defined $self-&gt;{manager}&#41;
  {
    $self-&gt;{manager}-&gt;show&#40;$self-&gt;{title}&#41;;
  }
}

sub close
{
  my $self = shift;

  delete $self-&gt;{textObj};  # delete the reference in the hash
  delete $self-&gt;{manager};
}

1;

__END__

=head1 NAME

Puppet::Log - Log facility with an optional Tk display

=head1 SYNOPSIS

 use Puppet::Log ;

 my $log = new Puppet::Log&#40;&#39;title&#39; =&gt;&#39;log test&#39;&#41; ;
 $log -&gt; log&#40;&#34;Some text&#34;&#41; ;

 # $wmgr can be a toplevel Tk main window or a Tk::Multi::Manager
 $log -&gt;display&#40;$wmgr, 1&#41; ; 

=head1 DESCRIPTION

This class implements a log facility with an optional Tk display. 

I.e once the class is created, you can log messages in it, but the Tk
display does no need to be created at the same time. You may invoke
later only when you need it.

When the Tk display is not invoked, the log can be either printed on
STDOUT or warned on STDERR &#40;or stay hidden&#41;. But in any case, the log
message will be stored in the class so that all log messages can be
retrieved later by the user or by the Tk display when invoked.

Once the Tk display is invoked, it will be updated by new logs.

=head1 Constructor

=head2 new&#40;[title =&gt; &#39;name&#39;], [&#39;how&#39; =&gt; &#39;print&#39; | &#39;warn&#39; ]&#41;

Creates the log object.

The constructor parameters are :

=over 4

=item *

title: Title of the Tk log display &#40;optional&#41;

=item *

name: Name of the log used when printing on STDOUT or STDERR &#40;optional&#41;

=item *

how: Specifies what to do when a log is sent to the object &#40;either
print on STDOUT, warn on STDERR&#41;. By default the logs will not be
printed or warned. &#40;optional&#41;

=item *

help The argument may be a string or a sub reference.  When the help
menu is invoked, either the help string will be displayed in a
Tk::Dialog box or the sub will be run. In this case it is the user&#39;s
responsability to provide a readable help from the sub.  &#40;See
L&lt;Tk::Multi::Manager/&#34;help&#34;&gt; for further details&#41;

=back

=head1 Methods

=head2 log&#40;text,...&#41;

Will log the passed text

Optional parameters are:

=over 4

=item *

how: will supersede the &#39;how&#39; parameter passed to the constructor. If
&#39;how&#39; is set to undef, the log will not be printed or warned.

=back

=head2 clear&#40;&#41;

Clear all stored logs.

=head2 getAll&#40;&#41;

Return an array made of all stored logs.

=head2 display&#40;toplevel_ref | multi_manager_reference, [hidden] &#41;

Will create the log display. The log display is in fact a Tk::Multi::Text
window which can managed by a Tk::Multi::Manager object.

=over 4

=item toplevel_ref

The parent window object.

=item multi_manager_reference

The Tk::Multi::Manager reference

=item  hidden

When hidden is 1, the log will not displayed on start-up. &#40;default is
to show the log window&#41;

=back

If you don&#39;t provide a multi_manager reference, Puppet::Log will
consider that you want the Log to appear in its own TopLevel window.

In this case Puppet::Log will create a new Toplevel window and create
a Tk::Multi::Manager in it. In this case, it will feature a
File-&gt;close menu entry to destroy the Log window.

Once the Log window is destroyed, the display method can then be
called later to recreate it.

In any case display&#40;&#41; returns the manager reference. You may reuse this
reference to add another Log display in the Toplevel window that Log
just created. So that both log windows are displayed in the same Tk
window.  &#40;See the F&lt;t/top_log.t&gt; example to see what I mean&#41;

=head2 show&#40;&#41;

Will raise the log window. Note that this function is ignored if its called
before display&#40;&#41;.

=head1 About Puppet::* classes

Puppet classes are a set of utility classes which can be used by any object.
If you use directly the Puppet::*Body class, you get the plain functionnality.
And if you use the Puppet::* class, you can get the same functionnality and
a Tk Gui to manage it. 

The basic idea is when you construct a Puppet::* object, you have all
the functionnality of the object without the GUI. Then, when the need
arises, you may &#40;or the class may decide to&#41; open the GUI of the
object.  On the other hand, if the need does not arise, you may create
a lot of objects without cluttering your display.

=head1 AUTHOR

Dominique Dumont, Dominique_Dumont@grenoble.hp.com

Copyright &#40;c&#41; 1998-1999 Dominique Dumont. All rights reserved.  This
program is free software; you can redistribute it and/or modify it
under the same terms as Perl itself.

=head1 SEE ALSO

perl&#40;1&#41;, Puppet::LogBody&#40;3&#41;, Tk&#40;3&#41;, Tk::Multi::Text&#40;3&#41;, Tk::Multi::Manager&#40;3&#41;

=cut
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> log.t</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"># Before `make install&#39; is performed this script should be runnable with
# `make test&#39;. After `make install&#39; it should work as `perl test.pl&#39;

######################### We start with some black magic to print on failure.

# Change 1..1 below to 1..last_test_to_print .
# &#40;It may become useful if the test is moved to ./t subdirectory.&#41;

BEGIN
{
  $| = 1;
  print &#34;1..10\n&#34;;
}

END
{
  print &#34;not ok 1\n&#34; unless&#40;$loaded&#41;;
}

use Tk;
use ExtUtils::testlib;
use Tk::Multi::Manager;
use Puppet::Log;
$loaded = 1;
my $idx = 1;
print &#34;ok &#34;, $idx++, &#34;\n&#34;;
my $trace = shift || 0;

######################### End of black magic.

# Insert your test code below &#40;better if it prints &#34;ok 13&#34;
# &#40;correspondingly &#34;not ok 13&#34;&#41; depending on the success of chunk 13
# of the test code&#41;:

use strict ;
my $mw = MainWindow-&gt; new ;

my $w_menu = $mw-&gt;Frame&#40;-relief =&gt; &#34;raised&#34;, -borderwidth =&gt; 2&#41;-&gt;pack&#40;-fill =&gt; &#34;x&#34;&#41;;

my $f = $w_menu-&gt;Menubutton&#40;-text =&gt; &#34;File&#34;, -underline =&gt; 0&#41;-&gt;pack&#40;-side =&gt; &#34;left&#34;&#41;;

$f-&gt;command&#40;-label =&gt; &#34;Quit&#34;, -command =&gt; sub { $mw-&gt;destroy; }&#41;;

print &#34;creating manager\n&#34; if&#40;$trace&#41;;
my $wmgr = $mw -&gt;MultiManager&#40;-title =&gt; &#39;log test&#39;, -menu =&gt; $w_menu&#41;-&gt;pack&#40;-expand =&gt; 1, -fill =&gt; &#39;both&#39;&#41;;

print &#34;ok &#34;, $idx++, &#34;\n&#34;;

print &#34;Creating new log\n&#34; if&#40;$trace&#41;;
my $log = new Puppet::Log&#40;title =&gt; &#34;log test&#34;, fullName =&gt; &#34;big test&#34;&#41;;

print &#34;ok &#34;, $idx++, &#34;\n&#34;;

print &#34;inserting some text in log\n&#34; if&#40;$trace&#41;;
$log -&gt; log&#40;&#34;This text was logged but not printed&#34;&#41;;
$log -&gt; log&#40;&#34;This text was logged and printed&#34;, how =&gt; &#34;print&#34;&#41; if&#40;$trace&#41;;
$log -&gt; log&#40;&#34;This text was also logged and warned&#34; , how =&gt; &#34;warn&#34;&#41;;

print &#34;ok &#34;, $idx++, &#34;\n&#34;;

print &#34;requiring display on log\n&#34; if&#40;$trace&#41;;
$log -&gt;display&#40;$wmgr, 1&#41;;
$log -&gt; log&#40;&#34;\nYou may display the 2nd log with menu: &#39;log test&#39;-&gt;&#39;log2 test&#39;-&gt;show&#34;&#41;;

print &#34;ok &#34;, $idx++, &#34;\n&#34;;

print &#34;calling show on log\n&#34; if&#40;$trace&#41;;
$log -&gt;show&#40;&#41;;
print &#34;ok &#34;, $idx++, &#34;\n&#34;;

print &#34;Creating new log2\n&#34; if&#40;$trace&#41;;
my $log2 = new Puppet::Log&#40;title =&gt; &#34;log2 test&#34;, help =&gt; &#34;log2 dummy help&#34;&#41;;

print &#34;ok &#34;, $idx++, &#34;\n&#34;;

print &#34;inserting some text in log2\n&#34; if&#40;$trace&#41;;
$log2 -&gt; log&#40;&#34;This text was also logged but not printed&#34;&#41;;

print &#34;ok &#34;, $idx++, &#34;\n&#34;;

print &#34;requiring display on log\n&#34; if&#40;$trace&#41;;
$log2 -&gt;display&#40;$wmgr, 1&#41;;

print &#34;ok &#34;, $idx++, &#34;\n&#34;;


MainLoop; # Tk&#39;s

print &#34;ok &#34;, $idx++, &#34;\n&#34;;
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> top_log.t</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"># Before `make install&#39; is performed this script should be runnable with
# `make test&#39;. After `make install&#39; it should work as `perl test.pl&#39;

######################### We start with some black magic to print on failure.

# Change 1..1 below to 1..last_test_to_print .
# &#40;It may become useful if the test is moved to ./t subdirectory.&#41;

BEGIN
{
  $| = 1;
  print &#34;1..6\n&#34;;
}

END
{
  print &#34;not ok 1\n&#34; unless&#40;$loaded&#41;;
}

use Tk;
use ExtUtils::testlib;
use Tk::Multi::Manager;
use Puppet::Log;
$loaded = 1;
my $idx = 1;
print &#34;ok &#34;, $idx++, &#34;\n&#34;;
my $trace = shift || 0;

######################### End of black magic.

# Insert your test code below &#40;better if it prints &#34;ok 13&#34;
# &#40;correspondingly &#34;not ok 13&#34;&#41; depending on the success of chunk 13
# of the test code&#41;:

use strict ;
my $mw = MainWindow-&gt; new;
$mw-&gt;withdraw;

print &#34;Creating orphan log window\n&#34; if&#40;$trace&#41;;
my $orphan = new Puppet::Log&#40;title =&gt; &#34;orphan&#34;&#41;;

print &#34;ok &#34;, $idx++, &#34;\n&#34;;

my $orphanb = new Puppet::Log&#40;title =&gt; &#34;orphan2&#34;&#41;;

print &#34;ok &#34;, $idx++, &#34;\n&#34;;

my $bmgr = $orphan-&gt;display&#40;$mw&#41;;
$orphan-&gt;log&#40;&#34;This log was not attached to an existing Multi::Manager and so created its own&#34;&#41;;
print &#34;ok &#34;, $idx++, &#34;\n&#34;;

$orphanb-&gt;display&#40;$bmgr&#41;;
$orphanb-&gt;log&#40;&#34;This log was attached to the Multi::Manager created by the &#39;orphan&#39; log&#34;&#41;;

print &#34;ok &#34;, $idx++, &#34;\n&#34;;


MainLoop ; # Tk&#39;s

print &#34;ok &#34;, $idx++, &#34;\n&#34;;
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Makefile.PL</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">use ExtUtils::MakeMaker;
# See lib/ExtUtils/MakeMaker.pm for details of how to influence
# the contents of the Makefile that is written.
WriteMakefile
&#40;
  NAME =&gt; &#39;Puppet::Log&#39;,
  VERSION_FROM =&gt; &#39;Log.pm&#39;,  # finds $VERSION
  dist =&gt; {COMPRESS =&gt; &#39;gzip -9f&#39;, SUFFIX =&gt; &#39;gz&#39;},
  &#40;
    &#40;$] &gt;= 5.005&#41;
      ?
    &#40;ABSTRACT =&gt; &#34;Log facility based on Tk&#34;,
     AUTHOR =&gt; &#39;Dominique Dumont &#40;domi@barrayar.grenoble.hp.com&#41;&#39;&#41;
      :
    &#40;&#41;
  &#41;,
  PREREQ_PM =&gt; { &#39;Tk&#39; =&gt; 0,
                 &#39;Puppet::LogBody&#39; =&gt; 0,
                 &#39;Tk::Multi::Manager&#39; =&gt; &#34;2.001&#34;,
                 &#39;Tk::Multi::Toplevel&#39; =&gt; &#34;0&#34;,
                 &#39;Tk::Multi::Text&#39; =&gt; &#34;2.001&#34;,
               }
&#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;23&nbsp;03:33:31&nbsp;2006</span>
    <span class="description">DDUMONT [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">30 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Wow, it&#39;s been a while since I have not looked at this module.

Anyway, I&#39;ve fixed Log.pm so default help is &#39;&#39; and not undef. This
prevent Tk::RoText from dying.

I&#39;ve also fixed the tests that still used old Tk option without
leading dashes.

The fixes are in  Puppet-Log-1.012 &#40;on its way to CPAN&#41;

Cheers
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;23&nbsp;03:33:32&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;23&nbsp;03:33:33&nbsp;2006</span>
    <span class="description">DDUMONT [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
