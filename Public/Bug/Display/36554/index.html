<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #36554 for URI: t/heuristic.t : failure during &#39;make test&#39;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #36554 for URI: t/heuristic.t : failure during &#39;make test&#39;</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=URI">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=URI">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=URI">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=URI">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/URI">URI CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">36554</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=URI">URI</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jkeenan [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-34672-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-34673-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=36554">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-471375" href="/Public/Bug/Display.html?id=36554#txn-471375">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;07&nbsp;17:42:55&nbsp;2008</span>
    <span class="description">jkeenan [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> t/heuristic.t : failure during &#39;make test&#39;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/471375/232440/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/232440">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 699b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I tried to install LWP::Simple today, for which URI is a prerequisite.  The following error during 
URI&#39;s &#39;make test&#39; prevented installation of both URI and LWP::Simple:

$ prove -v t/heuristic.t 
t/heuristic....1..15
ok 1
ok 2
ok 3
ok 4
ok 5
not ok 6
ok 7
ok 8
ok 9
ok 10
ok 11
ok 12
ok 13
ok 14
ok 15
FAILED test 6
        Failed 1/15 tests, 93.33% okay
Failed Test   Stat Wstat Total Fail  List of Failed
-----------------------------------------------------------------------
--------
t/heuristic.t               15    1  6
Failed 1/1 test scripts. 1/15 subtests failed.
Files=1, Tests=15,  0 wallclock secs &#40; 0.06 cusr +  0.03 csys =  0.09 CPU&#41;
Failed 1/1 test programs. 1/15 subtests failed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-471378" href="/Public/Bug/Display.html?id=36554#txn-471378">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;07&nbsp;17:43:59&nbsp;2008</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/471378/232443/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/232443">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 78b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I should have added:

perl -v

This is perl, v5.10.0 built for darwin-2level
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-471380" href="/Public/Bug/Display.html?id=36554#txn-471380">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;07&nbsp;17:44:01&nbsp;2008</span>
    <span class="description">jkeenan [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-471381" href="/Public/Bug/Display.html?id=36554#txn-471381">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;07&nbsp;17:46:48&nbsp;2008</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/471381/232445/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/232445">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 255b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jun 07 17:42:55 2008, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; $ prove -v t/heuristic.t
&gt; t/heuristic....1..15
&gt; ok 1
&gt; ok 2
&gt; ok 3
&gt; ok 4
&gt; ok 5
&gt; not ok 6
</div>
The test fails because it searches for <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.com/camel.gif">http://www.perl.com/camel.gif</a></span>, which is no longer found 
on that page.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-471383" href="/Public/Bug/Display.html?id=36554#txn-471383">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;07&nbsp;17:46:49&nbsp;2008</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/471383/232447/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/232447">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 255b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jun 07 17:42:55 2008, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; $ prove -v t/heuristic.t
&gt; t/heuristic....1..15
&gt; ok 1
&gt; ok 2
&gt; ok 3
&gt; ok 4
&gt; ok 5
&gt; not ok 6
</div>
The test fails because it searches for <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.com/camel.gif">http://www.perl.com/camel.gif</a></span>, which is no longer found 
on that page.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-471778" href="/Public/Bug/Display.html?id=36554#txn-471778">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;09&nbsp;02:20:29&nbsp;2008</span>
    <span class="description">GAAS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> GAAS [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/471778/232640/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/232640">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 96b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">All that&#39;s &#40;normally&#41; needed for this test to pass is that
&#39;www.perl.com&#39; resolves.  Doesn&#39;t it?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-471901" href="/Public/Bug/Display.html?id=36554#txn-471901">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;09&nbsp;08:23:38&nbsp;2008</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jkeenan [...] cpan.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/471901/232710/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/232710">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 541b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 09 02:20:29 2008, GAAS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; All that&#39;s &#40;normally&#41; needed for this test to pass is that
&gt; &#39;www.perl.com&#39; resolves.  Doesn&#39;t it?
</div>
I reported exactly what I got.  If it had successfully resolved, the test would have passed and I 
would never have opened the bug ticket in the first place.

Note that it is failing test #6 &#40;MYCOUNTRY = &#39;bv&#39;&#41; but passing in #7 &#40;MYCOUNTRY = &#39;uk&#39;.

&#40;Also, if this test had been written with Test::More descriptions, it would have been easier to 
diagnose.&#41;

Thanks for looking into this.

Jim Keenan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-514963" href="/Public/Bug/Display.html?id=36554#txn-514963">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;01&nbsp;08:04:36&nbsp;2008</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/514963/256636/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/256636">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 09 08:23:38 2008, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Jun 09 02:20:29 2008, GAAS wrote:
<div class="message-stanza open">&gt; &gt; All that&#39;s &#40;normally&#41; needed for this test to pass is that
&gt; &gt; &#39;www.perl.com&#39; resolves.  Doesn&#39;t it?
</div>&gt; 
&gt; I reported exactly what I got.  If it had successfully resolved, the
&gt; test would have passed and I
&gt; would never have opened the bug ticket in the first place.
&gt; 
&gt; Note that it is failing test #6 &#40;MYCOUNTRY = &#39;bv&#39;&#41; but passing in #7
&gt; &#40;MYCOUNTRY = &#39;uk&#39;.
&gt; 
&gt; &#40;Also, if this test had been written with Test::More descriptions, it
&gt; would have been easier to
&gt; diagnose.&#41;
&gt; 
&gt; Thanks for looking into this.
&gt; 
</div>
I also saw a failure in t/heuristics.t today, and these CPAN tester
reports seems to have the same problem:

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.cpan.testers/2008/06/msg1758058.html">http://www.nntp.perl.org/group/perl.cpan.testers/2008/06/msg1758058.html</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.cpan.testers/2008/06/msg1803494.html">http://www.nntp.perl.org/group/perl.cpan.testers/2008/06/msg1803494.html</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.cpan.testers/2008/07/msg1870857.html">http://www.nntp.perl.org/group/perl.cpan.testers/2008/07/msg1870857.html</a></span>

Suggestion, without knowing any details of this test: the test is only
done if www.netscape.com resolves. Theoretically it is possible due to
DNS problems that www.netscape.com resolves, but www.perl.com and/or
www.perl.org not. So maybe check whether www.perl.com/org resolves, and
otherwise skip the test?

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-515074" href="/Public/Bug/Display.html?id=36554#txn-515074">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;01&nbsp;14:05:05&nbsp;2008</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/515074/256738/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/256738">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 01 08:04:36 2008, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Jun 09 08:23:38 2008, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; On Mon Jun 09 02:20:29 2008, GAAS wrote:
<div class="message-stanza open">&gt; &gt; &gt; All that&#39;s &#40;normally&#41; needed for this test to pass is that
&gt; &gt; &gt; &#39;www.perl.com&#39; resolves.  Doesn&#39;t it?
</div>&gt; &gt; 
&gt; &gt; I reported exactly what I got.  If it had successfully resolved, the
&gt; &gt; test would have passed and I
&gt; &gt; would never have opened the bug ticket in the first place.
&gt; &gt; 
&gt; &gt; Note that it is failing test #6 &#40;MYCOUNTRY = &#39;bv&#39;&#41; but passing in #7
&gt; &gt; &#40;MYCOUNTRY = &#39;uk&#39;.
&gt; &gt; 
&gt; &gt; &#40;Also, if this test had been written with Test::More descriptions, it
&gt; &gt; would have been easier to
&gt; &gt; diagnose.&#41;
&gt; &gt; 
&gt; &gt; Thanks for looking into this.
&gt; &gt; 
</div>&gt; 
&gt; I also saw a failure in t/heuristics.t today, and these CPAN tester
&gt; reports seems to have the same problem:
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.cpan.testers/2008/06/msg1758058.html">http://www.nntp.perl.org/group/perl.cpan.testers/2008/06/msg1758058.html</a></span>
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.cpan.testers/2008/06/msg1803494.html">http://www.nntp.perl.org/group/perl.cpan.testers/2008/06/msg1803494.html</a></span>
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.cpan.testers/2008/07/msg1870857.html">http://www.nntp.perl.org/group/perl.cpan.testers/2008/07/msg1870857.html</a></span>
&gt; 
&gt; Suggestion, without knowing any details of this test: the test is only
&gt; done if www.netscape.com resolves. Theoretically it is possible due to
&gt; DNS problems that www.netscape.com resolves, but www.perl.com and/or
&gt; www.perl.org not. So maybe check whether www.perl.com/org resolves, and
&gt; otherwise skip the test?
&gt; 
</div>
Right now I can reproduce the failure:

$ perl -Mblib -MURI::Heuristic=uf_urlstr -e &#39;$URI::Heuristic::MY_COUNTRY
= &#34;bv&#34;; warn uf_urlstr&#40;&#34;perl/camel.gif&#34;&#41;&#39;
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.bv/camel.gif">http://www.perl.bv/camel.gif</a></span> at -e line 1.

And really, on my machine www.perl.bv seems to exist:

$ host www.perl.bv
www.perl.bv has address 64.236.172.120
Host www.perl.bv not found: 3&#40;NXDOMAIN&#41;

On another machine it does not resolve:

$ host www.perl.bv
Host www.perl.bv not found: 3&#40;NXDOMAIN&#41;

If I type in the URL in my browser, then I get a catchall page from my
internet provider. Argh! They are doing nasty things!

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-518293" href="/Public/Bug/Display.html?id=36554#txn-518293">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;10&nbsp;11:57:15&nbsp;2008</span>
    <span class="description">toddr [...] cpanel.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> todd.e.rinaldo [...] jpmorgan.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/518293/258654/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/258654">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 183b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">hi, tests 6-8 require that your DNS server can look them up I believe. 
As a result, my test on this is failing behind a firewall with a proxy. 
Do we think these tests are important?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-611121" href="/Public/Bug/Display.html?id=36554#txn-611121">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;28&nbsp;05:57:47&nbsp;2009</span>
    <span class="description">nygel [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/611121/310005/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/310005">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 239b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Encountered this bug this morning.  Isn&#39;t this just a case of setting
the country code to blank in heuristic.t or alternatively altering the
regex line to check for .bv instead of the .com|.org as it cuurently
seems to.  Easy fix surely.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-611124" href="/Public/Bug/Display.html?id=36554#txn-611124">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;28&nbsp;07:09:28&nbsp;2009</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/611124/310008/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/310008">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 796b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu May 28 05:57:47 2009, NYGEL wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Encountered this bug this morning.  Isn&#39;t this just a case of setting
&gt; the country code to blank in heuristic.t or alternatively altering the
&gt; regex line to check for .bv instead of the .com|.org as it cuurently
&gt; seems to.  Easy fix surely.
&gt; 
</div>
Perhaps it is.  But if so, I would have expected the maintainer to do
this last year.  Instead, the situation is unchanged as of today:

$ prove -v t/heuristic.t 
t/heuristic....
1..15
ok 1
ok 2
ok 3
ok 4
ok 5
not ok 6
ok 7
ok 8
ok 9
ok 10
ok 11
ok 12
ok 13
ok 14
ok 15
 Failed 1/15 subtests 

Test Summary Report
-------------------
t/heuristic &#40;Wstat: 0 Tests: 15 Failed: 1&#41;
  Failed test:  6
Files=1, Tests=15,  1 wallclock secs &#40; 0.04 usr  0.01 sys +  0.06 cusr 
0.02 csys =  0.13 CPU&#41;
Result: FAIL
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-611127" href="/Public/Bug/Display.html?id=36554#txn-611127">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;28&nbsp;07:19:19&nbsp;2009</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/611127/310010/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/310010">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 796b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jun 07 17:42:55 2008, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I tried to install LWP::Simple today, for which URI is a prerequisite.
&gt; The following error during
&gt; URI&#39;s &#39;make test&#39; prevented installation of both URI and LWP::Simple:
&gt; 
&gt; $ prove -v t/heuristic.t
&gt; t/heuristic....1..15
&gt; ok 1
&gt; ok 2
&gt; ok 3
&gt; ok 4
&gt; ok 5
&gt; not ok 6
&gt; ok 7
</div>
Test #7 passes for reasons that will probably cause trouble in the future.

    $URI::Heuristic::MY_COUNTRY = &#34;uk&#34;;    print &#34;not &#34; unless
uf_urlstr&#40;&#34;perl/camel.gif&#34;&#41; =~
m,^<span class="clickylink"><a target="new" rel="nofollow" href="http://www">http://www</a></span>\.perl\.&#40;org|co&#41;\.uk/camel\.gif$,;
    print &#34;ok 7\n&#34;;

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.co.uk/camel.gif">http://www.perl.co.uk/camel.gif</a></span>  takes you to what appears to be a
domain squatter.

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.org.uk/camel.gif">http://www.perl.org.uk/camel.gif</a></span> doesn&#39;t resolve.  But
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.org.uk">http://www.perl.org.uk</a></span> takes you to a site being squatted by a tech
company called SCINETIQ.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-627513" href="/Public/Bug/Display.html?id=36554#txn-627513">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;02&nbsp;20:35:00&nbsp;2009</span>
    <span class="description">toddr [...] cpanel.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> todd.e.rinaldo [...] jpmorgan.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/627513/319417/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/319417">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 418b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Right now, you&#39;re doing the tests if gethostbyname&#40;&#34;www.netscape.com&#34;&#41; 
succeeds. 

For some strange reason, we&#39;re behind a firewall, but netscape is 
resolving. 

I suggest this patch so it&#39;s disabled if proxy is enabled.

- if &#40;gethostbyname&#40;&#34;www.netscape.com&#34;&#41; &#38;&#38; !gethostbyname
&#40;&#34;example.xyz&#34;&#41;&#41; 
+ if &#40;gethostbyname&#40;&#34;www.netscape.com&#34;&#41; &#38;&#38; !gethostbyname
&#40;&#34;example.xyz&#34;&#41; &#38;&#38; !$ENV{http_proxy} &#38; !$ENV{HTTP_PROXY}&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-635100" href="/Public/Bug/Display.html?id=36554#txn-635100">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;19&nbsp;21:44:51&nbsp;2009</span>
    <span class="description">jjnapiork [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/635100/323680/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/323680">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Jul 02 20:35:00 2009, todd_rinaldo wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Right now, you&#39;re doing the tests if gethostbyname&#40;&#34;www.netscape.com&#34;&#41; 
&gt; succeeds. 
&gt; 
&gt; For some strange reason, we&#39;re behind a firewall, but netscape is 
&gt; resolving. 
&gt; 
&gt; I suggest this patch so it&#39;s disabled if proxy is enabled.
&gt; 
&gt; - if &#40;gethostbyname&#40;&#34;www.netscape.com&#34;&#41; &#38;&#38; !gethostbyname
&gt; &#40;&#34;example.xyz&#34;&#41;&#41; 
&gt; + if &#40;gethostbyname&#40;&#34;www.netscape.com&#34;&#41; &#38;&#38; !gethostbyname
&gt; &#40;&#34;example.xyz&#34;&#41; &#38;&#38; !$ENV{http_proxy} &#38; !$ENV{HTTP_PROXY}&#41;
&gt; 
&gt; 
</div>
Got this as well today.  Strangely it seemed fine the first time or two
I installed it, but have been testing a deployment script and wiping it
clean after each go.  Suddenly I got this error.

Now, this particular error appears to be the cause of most of the cpan
failures reported, and considering how many other packages depend on URI
now would be great if we could do something...

I&#39;m not sure exactly what this test is trying to do, but it&#39;s reliance
of some dubious hosts names is problematic.  I guess when this test was
written the author assumed &#39;www.netscape.com&#39; was pretty safe.  I&#39;d say
change it to www.google.com, but that would mess up since so many
countries block google from time to time.

I don&#39;t completely understand what this test is hoping to achieve, but
it seems totally wrong to say:

  $URI::Heuristic::MY_COUNTRY = &#34;bv&#34;;

and then try to match on a .com or something.  Maybe .bv was handled
differently all those years ago.  The docs say something about if the
country is two letters, assume is the default country, but that is not
clear at all to me what it means.

We should probably just skip this test for now since I don&#39;t see what is
going to get hurt.  My guess is all the passes have more to do with
netscape.com being unresolvable for most people.  Or we can set the dns
lookup to an ENV var and skip the test if it&#39;s not present.  That way
the authors can set it for developing if there is some logic there which
is important to fix.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-635225" href="/Public/Bug/Display.html?id=36554#txn-635225">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;20&nbsp;09:52:24&nbsp;2009</span>
    <span class="description">jjnapiork [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/635225/323743/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/323743">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 582b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Even stranger and stranger.  On my work Mac &#40;perl 5.8.8&#41; with latest URI
I get:

perl -e &#39;use URI::Heuristic qw&#40;uf_urlstr uf_url&#41;;
$URI::Heuristic::MY_COUNTRY = &#34;bv&#34;; warn uf_urlstr&#40;&#34;perl/camel.gif&#34;&#41;&#39;
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.com/camel.gif">http://www.perl.com/camel.gif</a></span> at -e line 1.

which passes the test.  But on my home ubuntu linux with perl 5.10 I get

perl -e &#39;use URI::Heuristic qw&#40;uf_urlstr uf_url&#41;;
$URI::Heuristic::MY_COUNTRY = &#34;bv&#34;; warn uf_urlstr&#40;&#34;perl/camel.gif&#34;&#41;&#39;
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.bv/camel.gif">http://www.perl.bv/camel.gif</a></span> at -e line 1.

So there is definitely something going on for the more modern Perls and
modules.  I&#39;ll dig a bit
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-635233" href="/Public/Bug/Display.html?id=36554#txn-635233">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;20&nbsp;10:19:22&nbsp;2009</span>
    <span class="description">jjnapiork [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/635233/323746/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/323746">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry for spamming the bug queue, but I don&#39;t see any other place to
discuss this.

So basically if you turn on debugging, the problem becomes clear:

-----
john-napiorkowskis-computer:~ jjn1056$ perl -e &#39;use URI::Heuristic
qw&#40;uf_urlstr&#41;; $URI::Heuristic::MY_COUNTRY = &#34;bv&#34;;
$URI::Heuristic::DEBUG=1; warn uf_urlstr&#40;&#34;perl/camel.gif&#34;&#41;&#39;
uf_uristr: resolving perl/camel.gif
uf_uristr: gethostbyname&#40;&#39;www.perl.bv.&#39;&#41;...no
uf_uristr: gethostbyname&#40;&#39;www.perl.com.&#39;&#41;...yes
uf_uristr: ==&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.com/camel.gif">http://www.perl.com/camel.gif</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.com/camel.gif">http://www.perl.com/camel.gif</a></span> at -e line 1.
-----

This is from my work computer, which is passing the test.  Now, from my
ubuntu box at home I get:

----- 
uf_uristr: resolving perl/camel.gif
uf_uristr: gethostbyname&#40;&#39;www.perl.bv.&#39;&#41;...yes
-----

So, as someone said earlier up in this conversation, sometimes
&#39;www.perl.bv&#39; is gettable.  From work it&#39;s not, but at home it is.  I&#39;m
not sure why that is the case but the solution here is that the test
needs to skip if &#34;gethostbyname&#40;&#39;www.perl.bv&#39;&#41;&#34; is true.  that would be
a minimal fix that should stop the problem.  This tests expect
gethostbyname&#40;&#39;www.perl.bv&#39;&#41; to fail since when the author wrote it,
that host did not exist.

A better long term fix is to allow all these test host names be
overridable via %ENV.  That way if we choose bad ones we can at least
override then via distroprefs while waiting for a fix.

john
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-635827" href="/Public/Bug/Display.html?id=36554#txn-635827">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;21&nbsp;09:09:01&nbsp;2009</span>
    <span class="description">jjnapiork [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/635827/324095/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/324095">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jul 20 10:19:22 2009, JJNAPIORK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sorry for spamming the bug queue, but I don&#39;t see any other place to
&gt; discuss this.
&gt; 
&gt; So basically if you turn on debugging, the problem becomes clear:
&gt; 
&gt; -----
&gt; john-napiorkowskis-computer:~ jjn1056$ perl -e &#39;use URI::Heuristic
&gt; qw&#40;uf_urlstr&#41;; $URI::Heuristic::MY_COUNTRY = &#34;bv&#34;;
&gt; $URI::Heuristic::DEBUG=1; warn uf_urlstr&#40;&#34;perl/camel.gif&#34;&#41;&#39;
&gt; uf_uristr: resolving perl/camel.gif
&gt; uf_uristr: gethostbyname&#40;&#39;www.perl.bv.&#39;&#41;...no
&gt; uf_uristr: gethostbyname&#40;&#39;www.perl.com.&#39;&#41;...yes
&gt; uf_uristr: ==&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.com/camel.gif">http://www.perl.com/camel.gif</a></span>
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.com/camel.gif">http://www.perl.com/camel.gif</a></span> at -e line 1.
&gt; -----
&gt; 
&gt; This is from my work computer, which is passing the test.  Now, from my
&gt; ubuntu box at home I get:
&gt; 
&gt; ----- 
&gt; uf_uristr: resolving perl/camel.gif
&gt; uf_uristr: gethostbyname&#40;&#39;www.perl.bv.&#39;&#41;...yes
&gt; -----
&gt; 
&gt; So, as someone said earlier up in this conversation, sometimes
&gt; &#39;www.perl.bv&#39; is gettable.  From work it&#39;s not, but at home it is.  I&#39;m
&gt; not sure why that is the case but the solution here is that the test
&gt; needs to skip if &#34;gethostbyname&#40;&#39;www.perl.bv&#39;&#41;&#34; is true.  that would be
&gt; a minimal fix that should stop the problem.  This tests expect
&gt; gethostbyname&#40;&#39;www.perl.bv&#39;&#41; to fail since when the author wrote it,
&gt; that host did not exist.
&gt; 
&gt; A better long term fix is to allow all these test host names be
&gt; overridable via %ENV.  That way if we choose bad ones we can at least
&gt; override then via distroprefs while waiting for a fix.
&gt; 
&gt; john
</div>
For anyone interested, there&#39;s a git clone with a pending merge request
at:  <span class="clickylink"><a target="new" rel="nofollow" href="http://gitorious.org/~jnapiorkowski/perl-uri/uri-heuristicstest-fix">http://gitorious.org/~jnapiorkowski/perl-uri/uri-heuristicstest-fix</a></span>

which patches the test to explicit check that www.perl.bv is
unreachable, and skips a single test if for some reason it is.  I&#39;ve
messaged the maintainers regarding the merge request, but if you are
experiencing the error it would be great if you could test the clone to
verify it fixes it for you.  Fixed it for me, but that&#39;s just one box.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-639920" href="/Public/Bug/Display.html?id=36554#txn-639920">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;26&nbsp;17:15:59&nbsp;2009</span>
    <span class="description">jjnapiork [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/639920/326923/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/326923">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jul 21 09:09:01 2009, JJNAPIORK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Jul 20 10:19:22 2009, JJNAPIORK wrote:
<div class="message-stanza open">&gt; &gt; Sorry for spamming the bug queue, but I don&#39;t see any other place to
&gt; &gt; discuss this.
&gt; &gt; 
&gt; &gt; So basically if you turn on debugging, the problem becomes clear:
&gt; &gt; 
&gt; &gt; -----
&gt; &gt; john-napiorkowskis-computer:~ jjn1056$ perl -e &#39;use URI::Heuristic
&gt; &gt; qw&#40;uf_urlstr&#41;; $URI::Heuristic::MY_COUNTRY = &#34;bv&#34;;
&gt; &gt; $URI::Heuristic::DEBUG=1; warn uf_urlstr&#40;&#34;perl/camel.gif&#34;&#41;&#39;
&gt; &gt; uf_uristr: resolving perl/camel.gif
&gt; &gt; uf_uristr: gethostbyname&#40;&#39;www.perl.bv.&#39;&#41;...no
&gt; &gt; uf_uristr: gethostbyname&#40;&#39;www.perl.com.&#39;&#41;...yes
&gt; &gt; uf_uristr: ==&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.com/camel.gif">http://www.perl.com/camel.gif</a></span>
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.com/camel.gif">http://www.perl.com/camel.gif</a></span> at -e line 1.
&gt; &gt; -----
&gt; &gt; 
&gt; &gt; This is from my work computer, which is passing the test.  Now, from my
&gt; &gt; ubuntu box at home I get:
&gt; &gt; 
&gt; &gt; ----- 
&gt; &gt; uf_uristr: resolving perl/camel.gif
&gt; &gt; uf_uristr: gethostbyname&#40;&#39;www.perl.bv.&#39;&#41;...yes
&gt; &gt; -----
&gt; &gt; 
&gt; &gt; So, as someone said earlier up in this conversation, sometimes
&gt; &gt; &#39;www.perl.bv&#39; is gettable.  From work it&#39;s not, but at home it is.  I&#39;m
&gt; &gt; not sure why that is the case but the solution here is that the test
&gt; &gt; needs to skip if &#34;gethostbyname&#40;&#39;www.perl.bv&#39;&#41;&#34; is true.  that would be
&gt; &gt; a minimal fix that should stop the problem.  This tests expect
&gt; &gt; gethostbyname&#40;&#39;www.perl.bv&#39;&#41; to fail since when the author wrote it,
&gt; &gt; that host did not exist.
&gt; &gt; 
&gt; &gt; A better long term fix is to allow all these test host names be
&gt; &gt; overridable via %ENV.  That way if we choose bad ones we can at least
&gt; &gt; override then via distroprefs while waiting for a fix.
&gt; &gt; 
&gt; &gt; john
</div>&gt; 
&gt; For anyone interested, there&#39;s a git clone with a pending merge request
&gt; at:  <span class="clickylink"><a target="new" rel="nofollow" href="http://gitorious.org/~jnapiorkowski/perl-uri/uri-heuristicstest-fix">http://gitorious.org/~jnapiorkowski/perl-uri/uri-heuristicstest-fix</a></span>
&gt; 
&gt; which patches the test to explicit check that www.perl.bv is
&gt; unreachable, and skips a single test if for some reason it is.  I&#39;ve
&gt; messaged the maintainers regarding the merge request, but if you are
&gt; experiencing the error it would be great if you could test the clone to
&gt; verify it fixes it for you.  Fixed it for me, but that&#39;s just one box.
</div>
Sorry, but one more bit of information.  This problem is not related to
a Perl install or the way hosts or DSN works on a given machine.  From
my notebook computer when at work the test works properly, but when I am
at home the test fails.  So exact same computer, exact some perl and
network setup, just a different internet provider.

I guess you could say the internet providers need to fix whatever they
are doing, and that would also be correct.  However given the fact this
causes 9/11 cpan testers failures for the current version, I&#39;d argue
strongly for the presented patch.  It definitely won&#39;t hurt anything and
from what I gather, the hueristics matching ability of URI is one of the
more underused features in anycase.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-647119" href="/Public/Bug/Display.html?id=36554#txn-647119">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;12&nbsp;15:44:02&nbsp;2009</span>
    <span class="description">GAAS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/647119/331171/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/331171">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 915b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve now applied <span class="clickylink"><a target="new" rel="nofollow" href="http://gitorious.org/perl-">http://gitorious.org/perl-</a></span>
uri/mainline/commit/bc44119c3693063e8c72fb47d8146c244ed2c573

commit bc44119c3693063e8c72fb47d8146c244ed2c573
Author: Gisle Aas &lt;gisle@aas.no&gt;
Date:   Wed Aug 12 21:41:06 2009 +0200

    Test exactly the DNS names we care about [RT#36554]

diff --git a/t/heuristic.t b/t/heuristic.t
index cbaea73..1b21de4 100755
--- a/t/heuristic.t
+++ b/t/heuristic.t
@@ -41,8 +41,8 @@ print &#34;not &#34; unless uf_urlstr&#40;&#34;C:\\CONFIG.SYS&#34;&#41; eq &#34;file:C:\\CONFIG.SYS&#34;;
 }
 print &#34;ok 5\n&#34;;
 
-if &#40;gethostbyname&#40;&#34;www.netscape.com&#34;&#41; &#38;&#38; !gethostbyname&#40;&#34;example.xyz&#34;&#41;&#41; {
-    # DNS probably work, lets run test 6..8
+if &#40;gethostbyname&#40;&#34;www.perl.com&#34;&#41; &#38;&#38; gethostbyname&#40;&#34;www.perl.org.uk&#34;&#41; &#38;&#38; 
!gethostbyname&#40;&#34;perl.bv&#34;&#41;&#41; {
+    # DNS work, lets run test 6..8
 
     $URI::Heuristic::MY_COUNTRY = &#34;bv&#34;;
     print &#34;not &#34; unless uf_urlstr&#40;&#34;perl/camel.gif&#34;&#41; =~ 
m,^<span class="clickylink"><a target="new" rel="nofollow" href="http://www">http://www</a></span>\.perl\.&#40;com|org&#41;/camel\.gif$,;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-647121" href="/Public/Bug/Display.html?id=36554#txn-647121">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;12&nbsp;15:44:04&nbsp;2009</span>
    <span class="description">GAAS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-647717" href="/Public/Bug/Display.html?id=36554#txn-647717">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;14&nbsp;02:50:47&nbsp;2009</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/647717/331535/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/331535">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Aug 12 15:44:02 2009, GAAS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve now applied <span class="clickylink"><a target="new" rel="nofollow" href="http://gitorious.org/perl-">http://gitorious.org/perl-</a></span>
&gt; uri/mainline/commit/bc44119c3693063e8c72fb47d8146c244ed2c573
&gt; 
&gt; commit bc44119c3693063e8c72fb47d8146c244ed2c573
&gt; Author: Gisle Aas &lt;gisle@aas.no&gt;
&gt; Date:   Wed Aug 12 21:41:06 2009 +0200
&gt; 
&gt;     Test exactly the DNS names we care about [RT#36554]
&gt; 
&gt; diff --git a/t/heuristic.t b/t/heuristic.t
&gt; index cbaea73..1b21de4 100755
&gt; --- a/t/heuristic.t
&gt; +++ b/t/heuristic.t
&gt; @@ -41,8 +41,8 @@ print &#34;not &#34; unless uf_urlstr&#40;&#34;C:\\CONFIG.SYS&#34;&#41; eq
&gt; &#34;file:C:\\CONFIG.SYS&#34;;
&gt;  }
&gt;  print &#34;ok 5\n&#34;;
&gt; 
&gt; -if &#40;gethostbyname&#40;&#34;www.netscape.com&#34;&#41; &#38;&#38;
&gt; !gethostbyname&#40;&#34;example.xyz&#34;&#41;&#41; {
&gt; -    # DNS probably work, lets run test 6..8
&gt; +if &#40;gethostbyname&#40;&#34;www.perl.com&#34;&#41; &#38;&#38; gethostbyname&#40;&#34;www.perl.org.uk&#34;&#41;
&gt; &#38;&#38;
&gt; !gethostbyname&#40;&#34;perl.bv&#34;&#41;&#41; {
&gt; +    # DNS work, lets run test 6..8
&gt; 
&gt;      $URI::Heuristic::MY_COUNTRY = &#34;bv&#34;;
&gt;      print &#34;not &#34; unless uf_urlstr&#40;&#34;perl/camel.gif&#34;&#41; =~
&gt; m,^<span class="clickylink"><a target="new" rel="nofollow" href="http://www">http://www</a></span>\.perl\.&#40;com|org&#41;/camel\.gif$,;
</div>
Unfortunately it happened again with 1.39. Maybe it&#39;s better to replace
example.xyz with www.example.xyz, because my provider &#40;HanseNet Alice&#41;
only &#34;helpfully&#34; resolves hostnames beginning with &#34;www.&#34;:

$ host example.xyz
Host example.xyz not found: 3&#40;NXDOMAIN&#41;

$ host www.example.xyz
www.example.xyz has address 206.222.226.17
Host www.example.xyz not found: 3&#40;NXDOMAIN&#41;

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-647718" href="/Public/Bug/Display.html?id=36554#txn-647718">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;14&nbsp;02:50:49&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-648011" href="/Public/Bug/Display.html?id=36554#txn-648011">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;14&nbsp;13:35:22&nbsp;2009</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/648011/331688/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/331688">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 908b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Aug 14 02:50:47 2009, SREZIC wrote:

&lt;snip /&gt;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Unfortunately it happened again with 1.39. Maybe it&#39;s better to replace
&gt; example.xyz with www.example.xyz, because my provider &#40;HanseNet Alice&#41;
&gt; only &#34;helpfully&#34; resolves hostnames beginning with &#34;www.&#34;:
&gt; 
&gt; $ host example.xyz
&gt; Host example.xyz not found: 3&#40;NXDOMAIN&#41;
&gt; 
&gt; $ host www.example.xyz
&gt; www.example.xyz has address 206.222.226.17
&gt; Host www.example.xyz not found: 3&#40;NXDOMAIN&#41;
&gt; 
&gt; Regards,
&gt;     Slaven
</div>
For whatever it&#39;s worth, Comcast.net returns:

$ host perl.bv
Host perl.bv not found: 3&#40;NXDOMAIN&#41;

$ host www.perl.bv
www.perl.bv has address 208.68.139.38
Host www.perl.bv not found: 3&#40;NXDOMAIN&#41;

$ host example.xyz
Host example.xyz not found: 3&#40;NXDOMAIN&#41;

$ host www.example.xyz
Host www.example.xyz not found: 3&#40;NXDOMAIN&#41;

and not surprisingly URI 1.39 t/heuristic.t test 6 fails. If only our
ISPs would be less &#34;helpful.&#34; Sigh.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-648065" href="/Public/Bug/Display.html?id=36554#txn-648065">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;14&nbsp;15:44:52&nbsp;2009</span>
    <span class="description">GAAS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/648065/331708/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/331708">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 42b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">2nd attempt and URI-1.40 uploaded to CPAN.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-648067" href="/Public/Bug/Display.html?id=36554#txn-648067">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;14&nbsp;15:44:53&nbsp;2009</span>
    <span class="description">GAAS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 1.029824</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
