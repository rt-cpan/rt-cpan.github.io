<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #80157 for Digest-SHA: [RT #85932]: VMS VAX &#40;V7.3&#41; build of Perl 5.12.3 hangs at sha.c</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #80157 for Digest-SHA: [RT #85932]: VMS VAX &#40;V7.3&#41; build of Perl 5.12.3 hangs at sha.c</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Digest-SHA/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Digest-SHA/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Digest-SHA/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Digest-SHA/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Digest-SHA">Digest-SHA CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">80157</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time estimated">
    <td class="label">Estimated:</td>
    <td class="value">1 hour (60 min)

</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">1 hour (60 min)

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Digest-SHA/Active/">Digest-SHA</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">mshelor [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
sms [...] antinode.info

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
craig.a.berry [...] gmail.com

<br />
jkeenan [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-11544-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
5.72    </td>
  </tr>
  <tr id="CF-11545-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
5.73    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;12&nbsp;20:02:51&nbsp;2012</span>
    <span class="description">jkeenan [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> jkeenan [...] cpan.org, craig.a.berry [...] gmail.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [RT #85932]: VMS VAX &#40;V7.3&#41; build of Perl 5.12.3 hangs at sha.c</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The following bug was reported in the Perl 5 bug queue at
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/rt3//Ticket/Display.html?id=85932">https://rt.perl.org/rt3//Ticket/Display.html?id=85932</a></span> by &#34;Steven M.
Schweda&#34; &lt;sms@antinode.info&gt; on Fri, 11 Mar 2011 14:53:34 -0600 &#40;CST&#41;.

On the recommendation of Craig A. Berry, I am moving this bug to the
Digest-SHA queue.  I am including the original post as well as Craig&#39;s
most recent post.

# Steven Schweda
#####
Greetings:

Lately I&#39;ve been trying to build Perl 5.12.3 on my &#40;old, slow&#41; VAX
using what I believe is the latest &#40;last?&#41; DEC/Compaq/HP C compiler:

GIMP $ cc /version
Compaq C V6.4-005 on OpenVMS VAX V7.3

As with &#34;md5.c&#34; &#40;&#34;[.CPAN.DIGEST-MD5]MD5.C&#34;&#41;, &#34;sha.c&#34;
&#40;&#34;[.CPAN.DIGEST-SHA]SHA.C&#34;&#41; needs some special help to work around a
known compiler bug, namely, &#34;/OPTIMIZE = NODISJOINT&#34;. &#40;With normal
optimization, the compiler loops.&#41; Sadly, while the builder parts for
&#34;md5.c&#34; &#40;&#34;[.CPAN.DIGEST-MD5]MAKEFILE.PL&#34;&#41; include this accommodation,
there seems to be no such help for &#34;sha.c&#34;, so the build hangs where it
tries to compile that module.

If I understood Perl well enough to puzzle out the details of these
&#34;makefile.pl&#34; files, then I might be able to offer an actual patch, but
I don&#39;t, and the two &#34;makefile.pl&#34; files are not identical enough to let
me be confident in a guess.

None of this matters much, but for completeness:

GIMP $ perl &#34;-V&#34;

Summary of my perl5 &#40;revision 5 version 12 subversion 3&#41; configuration:

Platform:
osname=VMS, osvers=V7.3, archname=VMS_VAX
uname=&#39;VMS gimp V7.3 VAX 4000-200&#39;
config_args=&#39;&#39;
hint=none, useposix=false, d_sigaction=define
useithreads=undef, usemultiplicity=undef
useperlio=define, d_sfio=undef, uselargefiles=undef, usesocks=undef
use64bitint=undef, use64bitall=undef, uselongdouble=undef
usemymalloc=undef, bincompat5005=undef
Compiler:
cc=&#39;CC/DECC&#39;, ccflags
=&#39;/Include=[]/Standard=Relaxed_ANSI/Prefix=All/Obj=.obj &#39;,
optimize=&#39;/NoList&#39;,
cppflags=&#39;undef&#39;
ccversion=&#39;60490005&#39;, gccversion=&#39;&#39;, gccosandvers=&#39;undef&#39;
intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=1234
d_longlong=undef, longlongsize=0, d_longdbl=define, longdblsize=8
ivtype=&#39;long&#39;, ivsize=4, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;int&#39;, lseeksize=4
alignbytes=8, prototype=define
Linker and Libraries:
ld=&#39;Link/nodebug&#39;, ldflags =&#39;/NoTrace/NoMap&#39;
libpth=/sys$share /sys$library
libs=
perllibs=
libc=&#40;DECCRTL&#41;, so=exe, useshrplib=true, libperl=undef
gnulibc_version=&#39;undef&#39;
Dynamic Linking:
dlsrc=dl_vms.c, dlext=exe, d_dlsymun=undef, ccdlflags=&#39;&#39;
cccdlflags=&#39;&#39;, lddlflags=&#39;/Share&#39;


Characteristics of this PERLSHR image:
Compile-time options: DECCRTL_SOCKETS PERL_DONT_CREATE_GVSV
PERL_MALLOC_WRAP USE_PERLIO USE_PERL_ATOF
VMS_DO_SOCKETS
Built under VMS
Compiled at Mar 3 2011 17:39:00
%ENV:
PERLSHR=&#34;PERL_ROOT:[000000]PERLSHR.EXE&#34;
PERL_ROOT=&#34;GIMP$DUA0:[PERL-5_12_3.]&#34;
@INC:
perl_root:[lib.site_perl.VMS_VAX]
perl_root:[lib.site_perl]
perl_root:[lib.VMS_VAX.5_12_3]
perl_root:[lib]
.
#####

# Craig Berry:
#####
It should really be forwarded upstream to the Digest::SHA queue.  The
following should do the trick, though I don&#39;t currently have a working
VAX build environment to test it.

--- Makefile.PL;-0      2012-09-25 05:45:07 -0500
+++ Makefile.PL 2012-10-12 08:54:03 -0500
@@ -26,6 +26,12 @@ if &#40;$Config{archname} =~ /^i[3456]86/&#41; {

 my $define = join&#40;&#39; &#39;, @defines&#41;;

+my @optimize = &#40;&#41;;
+if &#40;$^O eq &#39;VMS&#39; &#38;&#38; $Config{archname} =~ m/VMS_VAX/&#41; {
+    # VAX compiler optimizer even as late as v6.4 gets stuck
+    push&#40;@optimize, &#39;OPTIMIZE&#39; =&gt; &#39;/Optimize=&#40;NODISJOINT&#41;&#39;&#41;;
+}
+
 my %att = &#40;
        &#39;NAME&#39;          =&gt; &#39;Digest::SHA&#39;,
        &#39;VERSION_FROM&#39;  =&gt; $PM,
@@ -34,6 +40,7 @@ my %att = &#40;
        &#39;INC&#39;           =&gt; &#39;-I.&#39;,
        &#39;EXE_FILES&#39;     =&gt; [ &#39;shasum&#39; ],
        &#39;INSTALLDIRS&#39;   =&gt; &#40;$] &gt;= 5.010 and $] &lt; 5.011&#41; ? &#39;perl&#39; : &#39;site&#39;,
+        @optimize,
 &#41;;

 my $MMversion = $ExtUtils::MakeMaker::VERSION || 0;
[end]
#####

Thank you very much.
Jim Keenan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;13&nbsp;04:58:13&nbsp;2012</span>
    <span class="description">mshelor [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Oct 12 20:02:51 2012, JKEENAN wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; # Craig Berry:
&gt; #####
&gt; It should really be forwarded upstream to the Digest::SHA queue.  The
&gt; following should do the trick, though I don&#39;t currently have a working
&gt; VAX build environment to test it.
&gt; 
&gt; --- Makefile.PL;-0    2012-09-25 05:45:07 -0500
&gt; +++ Makefile.PL       2012-10-12 08:54:03 -0500
&gt; @@ -26,6 +26,12 @@ if &#40;$Config{archname} =~ /^i[3456]86/&#41; {
&gt; 
&gt;  my $define = join&#40;&#39; &#39;, @defines&#41;;
&gt; 
&gt; +my @optimize = &#40;&#41;;
&gt; +if &#40;$^O eq &#39;VMS&#39; &#38;&#38; $Config{archname} =~ m/VMS_VAX/&#41; {
&gt; +    # VAX compiler optimizer even as late as v6.4 gets stuck
&gt; +    push&#40;@optimize, &#39;OPTIMIZE&#39; =&gt; &#39;/Optimize=&#40;NODISJOINT&#41;&#39;&#41;;
&gt; +}
&gt; +
&gt;  my %att = &#40;
&gt;       &#39;NAME&#39;          =&gt; &#39;Digest::SHA&#39;,
&gt;       &#39;VERSION_FROM&#39;  =&gt; $PM,
&gt; @@ -34,6 +40,7 @@ my %att = &#40;
&gt;       &#39;INC&#39;           =&gt; &#39;-I.&#39;,
&gt;       &#39;EXE_FILES&#39;     =&gt; [ &#39;shasum&#39; ],
&gt;       &#39;INSTALLDIRS&#39;   =&gt; &#40;$] &gt;= 5.010 and $] &lt; 5.011&#41; ? &#39;perl&#39; : &#39;site&#39;,
&gt; +        @optimize,
&gt;  &#41;;
&gt; 
&gt;  my $MMversion = $ExtUtils::MakeMaker::VERSION || 0;
&gt; [end]
&gt; #####
</div>
In Digest::MD5, Gisle&#39;s workaround for the compiler bug has an extra bit
of logic, viz.

if &#40;$^O eq &#39;VMS&#39;&#41; {
    if &#40;defined&#40;$Config{ccname}&#41;&#41; {
        if &#40;grep&#40;/VMS_VAX/, @INC&#41; &#38;&#38; &#40;$Config{ccname} eq &#39;DEC&#39;&#41;&#41; {
            # VAX compiler optimizer even as late as v6.4 gets stuck
            push&#40;@extra, OPTIMIZE =&gt; &#34;/Optimize=&#40;NODISJOINT&#41;&#34;&#41;;
        }
    }
}

Once I get a rationale for which is the better patch, I&#39;ll be happy to
include it in the next release of Digest::SHA.  Also, some assurance
should be provided that the logic is indeed restrictive enough so as not
to break builds that are currently compiling just fine.

Regards, Mark Shelor
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;13&nbsp;04:58:14&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;13&nbsp;11:00:05&nbsp;2012</span>
    <span class="description">craig.a.berry [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> sms [...] antinode.info, jkeenan [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #80157] [RT #85932]: VMS VAX &#40;V7.3&#41; build of Perl 5.12.3 hangs at sha.c</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 13 Oct 2012 09:59:53 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Digest-SHA [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Craig A. Berry&#34; &lt;craig.a.berry [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, Oct 13, 2012 at 3:58 AM, Mark Shelor via RT
&lt;bug-Digest-SHA@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80157">https://rt.cpan.org/Ticket/Display.html?id=80157</a></span> &gt;
&gt;
&gt; On Fri Oct 12 20:02:51 2012, JKEENAN wrote:
&gt;
<div class="message-stanza open">&gt;&gt; # Craig Berry:
&gt;&gt; #####
&gt;&gt; It should really be forwarded upstream to the Digest::SHA queue.  The
&gt;&gt; following should do the trick, though I don&#39;t currently have a working
&gt;&gt; VAX build environment to test it.
&gt;&gt;
&gt;&gt; --- Makefile.PL;-0    2012-09-25 05:45:07 -0500
&gt;&gt; +++ Makefile.PL       2012-10-12 08:54:03 -0500
&gt;&gt; @@ -26,6 +26,12 @@ if &#40;$Config{archname} =~ /^i[3456]86/&#41; {
&gt;&gt;
&gt;&gt;  my $define = join&#40;&#39; &#39;, @defines&#41;;
&gt;&gt;
&gt;&gt; +my @optimize = &#40;&#41;;
&gt;&gt; +if &#40;$^O eq &#39;VMS&#39; &#38;&#38; $Config{archname} =~ m/VMS_VAX/&#41; {
&gt;&gt; +    # VAX compiler optimizer even as late as v6.4 gets stuck
&gt;&gt; +    push&#40;@optimize, &#39;OPTIMIZE&#39; =&gt; &#39;/Optimize=&#40;NODISJOINT&#41;&#39;&#41;;
&gt;&gt; +}
&gt;&gt; +
&gt;&gt;  my %att = &#40;
&gt;&gt;       &#39;NAME&#39;          =&gt; &#39;Digest::SHA&#39;,
&gt;&gt;       &#39;VERSION_FROM&#39;  =&gt; $PM,
&gt;&gt; @@ -34,6 +40,7 @@ my %att = &#40;
&gt;&gt;       &#39;INC&#39;           =&gt; &#39;-I.&#39;,
&gt;&gt;       &#39;EXE_FILES&#39;     =&gt; [ &#39;shasum&#39; ],
&gt;&gt;       &#39;INSTALLDIRS&#39;   =&gt; &#40;$] &gt;= 5.010 and $] &lt; 5.011&#41; ? &#39;perl&#39; : &#39;site&#39;,
&gt;&gt; +        @optimize,
&gt;&gt;  &#41;;
&gt;&gt;
&gt;&gt;  my $MMversion = $ExtUtils::MakeMaker::VERSION || 0;
&gt;&gt; [end]
&gt;&gt; #####
</div>&gt;
&gt; In Digest::MD5, Gisle&#39;s workaround for the compiler bug has an extra bit
&gt; of logic, viz.
&gt;
&gt; if &#40;$^O eq &#39;VMS&#39;&#41; {
&gt;     if &#40;defined&#40;$Config{ccname}&#41;&#41; {
&gt;         if &#40;grep&#40;/VMS_VAX/, @INC&#41; &#38;&#38; &#40;$Config{ccname} eq &#39;DEC&#39;&#41;&#41; {
&gt;             # VAX compiler optimizer even as late as v6.4 gets stuck
&gt;             push&#40;@extra, OPTIMIZE =&gt; &#34;/Optimize=&#40;NODISJOINT&#41;&#34;&#41;;
&gt;         }
&gt;     }
&gt; }
&gt;
&gt; Once I get a rationale for which is the better patch, I&#39;ll be happy to
&gt; include it in the next release of Digest::SHA.  Also, some assurance
&gt; should be provided that the logic is indeed restrictive enough so as not
&gt; to break builds that are currently compiling just fine.
&gt;
&gt; Regards, Mark Shelor
</div>
The check for the definedness of $Config{ccname} doesn&#39;t do any harm
but is probably overkill as I added that variable to the VMS
configuration process way back in
&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://perl5.git.perl.org/perl.git/commit/414b89ccea265fe71267b799abd1b083fb5c443d?f=configure.com">http://perl5.git.perl.org/perl.git/commit/414b89ccea265fe71267b799abd1b083fb5c443d?f=configure.com</a></span>&gt;.
 The check for $Config{ccname} itself presupposes that someone could
be using a compiler other than DEC C, which is pretty unlikely but
theoretically possible.  Adding C&lt;&#38;&#38; $Config{ccname} eq &#39;DEC&#39;&gt; at the
end of the check I posted earlier would be a reasonable defensive
programming strategy.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;13&nbsp;13:23:30&nbsp;2012</span>
    <span class="description">mshelor [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;13&nbsp;13:37:24&nbsp;2012</span>
    <span class="description">mshelor [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> gisle [...] ActiveState.com, jkeenan [...] cpan.org, craig.a.berry [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">OK, what I plan to do is apply Gisle&#39;s DEC compiler bug workaround to
the Digest::SHA Makefile.  His Digest::MD5 module has gotten very wide
and heavy usage since the workaround was applied in 1999.  One can be
reasonably confident that it&#39;s robust and won&#39;t cause inadvertent breakage.

If I don&#39;t receive any further comments or replies, I&#39;ll assume
everyone&#39;s happy with this approach.

Mark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;13&nbsp;15:30:59&nbsp;2012</span>
    <span class="description">craig.a.berry [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> gisle [...] activestate.com, jkeenan [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #80157] [RT #85932]: VMS VAX &#40;V7.3&#41; build of Perl 5.12.3 hangs at sha.c</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 13 Oct 2012 14:30:40 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Digest-SHA [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Craig A. Berry&#34; &lt;craig.a.berry [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, Oct 13, 2012 at 12:37 PM, Mark Shelor via RT
&lt;bug-Digest-SHA@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80157">https://rt.cpan.org/Ticket/Display.html?id=80157</a></span> &gt;
&gt;
&gt; OK, what I plan to do is apply Gisle&#39;s DEC compiler bug workaround to
&gt; the Digest::SHA Makefile.  His Digest::MD5 module has gotten very wide
&gt; and heavy usage since the workaround was applied in 1999.  One can be
&gt; reasonably confident that it&#39;s robust and won&#39;t cause inadvertent breakage.
&gt;
&gt; If I don&#39;t receive any further comments or replies, I&#39;ll assume
&gt; everyone&#39;s happy with this approach.
</div>
I&#39;m happy with that approach but do note you can&#39;t simply drop in the
Digest::MD5 code verbatim as it&#39;s using an @extra array that includes
both defines and optimization options.  My patch added @optimize as a
separate array since you&#39;re handling defines somewhat differently.
Maybe that&#39;s too obvious to mention, but I&#39;m mentioning it anyway on
the better safe than sorry principle.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;19&nbsp;22:35:15&nbsp;2012</span>
    <span class="description">mshelor [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">60 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> craig.a.berry [...] gmail.com, jkeenan [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Oct 13 15:30:59 2012, craig.a.berry@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat, Oct 13, 2012 at 12:37 PM, Mark Shelor via RT
&gt; &lt;bug-Digest-SHA@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80157">https://rt.cpan.org/Ticket/Display.html?id=80157</a></span> &gt;
&gt; &gt;
&gt; &gt; OK, what I plan to do is apply Gisle&#39;s DEC compiler bug workaround
</div>&gt; to
<div class="message-stanza open">&gt; &gt; the Digest::SHA Makefile.  His Digest::MD5 module has gotten very
</div>&gt; wide
<div class="message-stanza open">&gt; &gt; and heavy usage since the workaround was applied in 1999.  One can
</div>&gt; be
<div class="message-stanza open">&gt; &gt; reasonably confident that it&#39;s robust and won&#39;t cause inadvertent
</div>&gt; breakage.
<div class="message-stanza open">&gt; &gt;
&gt; &gt; If I don&#39;t receive any further comments or replies, I&#39;ll assume
&gt; &gt; everyone&#39;s happy with this approach.
</div>&gt; 
&gt; I&#39;m happy with that approach but do note you can&#39;t simply drop in the
&gt; Digest::MD5 code verbatim as it&#39;s using an @extra array that includes
&gt; both defines and optimization options.  My patch added @optimize as a
&gt; separate array since you&#39;re handling defines somewhat differently.
&gt; Maybe that&#39;s too obvious to mention, but I&#39;m mentioning it anyway on
&gt; the better safe than sorry principle.
</div>

I prepared a trial version of Digest::SHA to workaround the DEC compiler
bug, but there seems to be no one with a functioning VAX/Perl
environment who can actually confirm whether it works.

Untested changes aren&#39;t acceptable in a core module, so I&#39;m rejecting
the bug report until someone can test the workaround.

Mark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;19&nbsp;22:35:16&nbsp;2012</span>
    <span class="description">mshelor [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;20&nbsp;08:49:25&nbsp;2012</span>
    <span class="description">craig.a.berry [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> sms [...] antinode.info, jkeenan [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #80157] [RT #85932]: VMS VAX &#40;V7.3&#41; build of Perl 5.12.3 hangs at sha.c</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 20 Oct 2012 07:49:16 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Digest-SHA [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Craig A. Berry&#34; &lt;craig.a.berry [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, Oct 19, 2012 at 9:35 PM, Mark Shelor via RT
&lt;bug-Digest-SHA@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80157">https://rt.cpan.org/Ticket/Display.html?id=80157</a></span> &gt;
&gt;
&gt; On Sat Oct 13 15:30:59 2012, craig.a.berry@gmail.com wrote:
<div class="message-stanza open">&gt;&gt; On Sat, Oct 13, 2012 at 12:37 PM, Mark Shelor via RT
&gt;&gt; &lt;bug-Digest-SHA@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt;&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80157">https://rt.cpan.org/Ticket/Display.html?id=80157</a></span> &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; OK, what I plan to do is apply Gisle&#39;s DEC compiler bug workaround
</div>&gt;&gt; to
<div class="message-stanza open">&gt;&gt; &gt; the Digest::SHA Makefile.  His Digest::MD5 module has gotten very
</div>&gt;&gt; wide
<div class="message-stanza open">&gt;&gt; &gt; and heavy usage since the workaround was applied in 1999.  One can
</div>&gt;&gt; be
<div class="message-stanza open">&gt;&gt; &gt; reasonably confident that it&#39;s robust and won&#39;t cause inadvertent
</div>&gt;&gt; breakage.
<div class="message-stanza open">&gt;&gt; &gt;
&gt;&gt; &gt; If I don&#39;t receive any further comments or replies, I&#39;ll assume
&gt;&gt; &gt; everyone&#39;s happy with this approach.
</div>&gt;&gt;
&gt;&gt; I&#39;m happy with that approach but do note you can&#39;t simply drop in the
&gt;&gt; Digest::MD5 code verbatim as it&#39;s using an @extra array that includes
&gt;&gt; both defines and optimization options.  My patch added @optimize as a
&gt;&gt; separate array since you&#39;re handling defines somewhat differently.
&gt;&gt; Maybe that&#39;s too obvious to mention, but I&#39;m mentioning it anyway on
&gt;&gt; the better safe than sorry principle.
</div>&gt;
&gt;
&gt; I prepared a trial version of Digest::SHA to workaround the DEC compiler
&gt; bug, but there seems to be no one with a functioning VAX/Perl
&gt; environment who can actually confirm whether it works.
&gt;
&gt; Untested changes aren&#39;t acceptable in a core module,
</div>
As I explained in private e-mail, I *have* tested the change by
simulating the architecture name on another system.  It&#39;s not a
perfect test, but it&#39;s not a bad one either.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; so I&#39;m rejecting
&gt; the bug report until someone can test the workaround.
</div>
And in doing so you&#39;re preferring a  state of affairs that is 100%
guaranteed to fail over a state of affairs that is 99.9% guaranteed to
succeed.  I don&#39;t get it.

I have been tinkering with getting a VAX build going again and may
eventually succeed.  It would have a higher chance of succeeding if
this change were already there when I get that far.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;20&nbsp;08:49:26&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;20&nbsp;10:01:07&nbsp;2012</span>
    <span class="description">mshelor [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> craig.a.berry [...] gmail.com, jkeenan [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Oct 20 08:49:25 2012, craig.a.berry@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri, Oct 19, 2012 at 9:35 PM, Mark Shelor via RT
&gt; &lt;bug-Digest-SHA@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80157">https://rt.cpan.org/Ticket/Display.html?id=80157</a></span> &gt;
&gt; &gt;
&gt; &gt; On Sat Oct 13 15:30:59 2012, craig.a.berry@gmail.com wrote:
<div class="message-stanza open">&gt; &gt;&gt; On Sat, Oct 13, 2012 at 12:37 PM, Mark Shelor via RT
&gt; &gt;&gt; &lt;bug-Digest-SHA@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt;&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80157">https://rt.cpan.org/Ticket/Display.html?id=80157</a></span> &gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; OK, what I plan to do is apply Gisle&#39;s DEC compiler bug workaround
</div>&gt; &gt;&gt; to
<div class="message-stanza open">&gt; &gt;&gt; &gt; the Digest::SHA Makefile.  His Digest::MD5 module has gotten very
</div>&gt; &gt;&gt; wide
<div class="message-stanza open">&gt; &gt;&gt; &gt; and heavy usage since the workaround was applied in 1999.  One can
</div>&gt; &gt;&gt; be
<div class="message-stanza open">&gt; &gt;&gt; &gt; reasonably confident that it&#39;s robust and won&#39;t cause inadvertent
</div>&gt; &gt;&gt; breakage.
<div class="message-stanza open">&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; If I don&#39;t receive any further comments or replies, I&#39;ll assume
&gt; &gt;&gt; &gt; everyone&#39;s happy with this approach.
</div>&gt; &gt;&gt;
&gt; &gt;&gt; I&#39;m happy with that approach but do note you can&#39;t simply drop in the
&gt; &gt;&gt; Digest::MD5 code verbatim as it&#39;s using an @extra array that includes
&gt; &gt;&gt; both defines and optimization options.  My patch added @optimize as a
&gt; &gt;&gt; separate array since you&#39;re handling defines somewhat differently.
&gt; &gt;&gt; Maybe that&#39;s too obvious to mention, but I&#39;m mentioning it anyway on
&gt; &gt;&gt; the better safe than sorry principle.
</div>&gt; &gt;
&gt; &gt;
&gt; &gt; I prepared a trial version of Digest::SHA to workaround the DEC compiler
&gt; &gt; bug, but there seems to be no one with a functioning VAX/Perl
&gt; &gt; environment who can actually confirm whether it works.
&gt; &gt;
&gt; &gt; Untested changes aren&#39;t acceptable in a core module,
</div>&gt; 
&gt; As I explained in private e-mail, I *have* tested the change by
&gt; simulating the architecture name on another system.  It&#39;s not a
&gt; perfect test, but it&#39;s not a bad one either.
&gt; 
<div class="message-stanza open">&gt; &gt; so I&#39;m rejecting
&gt; &gt; the bug report until someone can test the workaround.
</div>&gt; 
&gt; And in doing so you&#39;re preferring a  state of affairs that is 100%
&gt; guaranteed to fail over a state of affairs that is 99.9% guaranteed to
&gt; succeed.  I don&#39;t get it.
&gt; 
&gt; I have been tinkering with getting a VAX build going again and may
&gt; eventually succeed.  It would have a higher chance of succeeding if
&gt; this change were already there when I get that far.
</div>

You now have a trial fix.  When and if you get around to having an
actual test environment rather than a simulated one, you can try it out
and report back to me.  I&#39;ll then publish it.  

But I&#39;ll need two transcripts: the first showing a failed build prior to
the fix, and the second showing success with the fix applied.

Issuing trouble tickets is a formal process with requirements for
precision.  You&#39;re using it instead as a means of convenience for
getting something that might be useful to you in the future.

Even though no one provided an actual failure report as part of the
trouble ticket, I prepared a trial fix anyway and submitted it
informally for test.  If you can&#39;t arrange to actually find someone with
a working environment, then I&#39;ll have to assume that the problem is
marginal at best and of no real interest to anyone.

Mark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;20&nbsp;10:01:09&nbsp;2012</span>
    <span class="description">mshelor [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;26&nbsp;14:38:15&nbsp;2012</span>
    <span class="description">craig.a.berry [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> sms [...] antinode.info, jkeenan [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #80157] [RT #85932]: VMS VAX &#40;V7.3&#41; build of Perl 5.12.3 hangs at sha.c</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 26 Oct 2012 13:38:03 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Digest-SHA [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Craig A. Berry&#34; &lt;craig.a.berry [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, Oct 20, 2012 at 9:01 AM, Mark Shelor via RT
&lt;bug-Digest-SHA@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80157">https://rt.cpan.org/Ticket/Display.html?id=80157</a></span> &gt;
&gt;
&gt; On Sat Oct 20 08:49:25 2012, craig.a.berry@gmail.com wrote:
<div class="message-stanza open">&gt;&gt; On Fri, Oct 19, 2012 at 9:35 PM, Mark Shelor via RT
&gt;&gt; &lt;bug-Digest-SHA@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt;&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80157">https://rt.cpan.org/Ticket/Display.html?id=80157</a></span> &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; On Sat Oct 13 15:30:59 2012, craig.a.berry@gmail.com wrote:
<div class="message-stanza open">&gt;&gt; &gt;&gt; On Sat, Oct 13, 2012 at 12:37 PM, Mark Shelor via RT
&gt;&gt; &gt;&gt; &lt;bug-Digest-SHA@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt;&gt; &gt;&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80157">https://rt.cpan.org/Ticket/Display.html?id=80157</a></span> &gt;
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; OK, what I plan to do is apply Gisle&#39;s DEC compiler bug workaround
</div>&gt;&gt; &gt;&gt; to
<div class="message-stanza open">&gt;&gt; &gt;&gt; &gt; the Digest::SHA Makefile.  His Digest::MD5 module has gotten very
</div>&gt;&gt; &gt;&gt; wide
<div class="message-stanza open">&gt;&gt; &gt;&gt; &gt; and heavy usage since the workaround was applied in 1999.  One can
</div>&gt;&gt; &gt;&gt; be
<div class="message-stanza open">&gt;&gt; &gt;&gt; &gt; reasonably confident that it&#39;s robust and won&#39;t cause inadvertent
</div>&gt;&gt; &gt;&gt; breakage.
<div class="message-stanza open">&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; If I don&#39;t receive any further comments or replies, I&#39;ll assume
&gt;&gt; &gt;&gt; &gt; everyone&#39;s happy with this approach.
</div>&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; I&#39;m happy with that approach but do note you can&#39;t simply drop in the
&gt;&gt; &gt;&gt; Digest::MD5 code verbatim as it&#39;s using an @extra array that includes
&gt;&gt; &gt;&gt; both defines and optimization options.  My patch added @optimize as a
&gt;&gt; &gt;&gt; separate array since you&#39;re handling defines somewhat differently.
&gt;&gt; &gt;&gt; Maybe that&#39;s too obvious to mention, but I&#39;m mentioning it anyway on
&gt;&gt; &gt;&gt; the better safe than sorry principle.
</div>&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; I prepared a trial version of Digest::SHA to workaround the DEC compiler
&gt;&gt; &gt; bug, but there seems to be no one with a functioning VAX/Perl
&gt;&gt; &gt; environment who can actually confirm whether it works.
&gt;&gt; &gt;
&gt;&gt; &gt; Untested changes aren&#39;t acceptable in a core module,
</div>&gt;&gt;
&gt;&gt; As I explained in private e-mail, I *have* tested the change by
&gt;&gt; simulating the architecture name on another system.  It&#39;s not a
&gt;&gt; perfect test, but it&#39;s not a bad one either.
&gt;&gt;
<div class="message-stanza open">&gt;&gt; &gt; so I&#39;m rejecting
&gt;&gt; &gt; the bug report until someone can test the workaround.
</div>&gt;&gt;
&gt;&gt; And in doing so you&#39;re preferring a  state of affairs that is 100%
&gt;&gt; guaranteed to fail over a state of affairs that is 99.9% guaranteed to
&gt;&gt; succeed.  I don&#39;t get it.
&gt;&gt;
&gt;&gt; I have been tinkering with getting a VAX build going again and may
&gt;&gt; eventually succeed.  It would have a higher chance of succeeding if
&gt;&gt; this change were already there when I get that far.
</div>&gt;
&gt;
&gt; You now have a trial fix.  When and if you get around to having an
&gt; actual test environment rather than a simulated one, you can try it out
&gt; and report back to me.  I&#39;ll then publish it.
&gt;
&gt; But I&#39;ll need two transcripts: the first showing a failed build prior to
&gt; the fix
</div>
A transcript for a problem that produces no output makes no sense.  I
did reproduce the compiler getting stuck as reported by the OP.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;, and the second showing success with the fix applied.
</div>
Here ya go.

$ perl -v

This is perl 5, version 17, subversion 6 &#40;v5.17.6
&#40;v5.17.5-51-g6c1c521&#41;&#41; built for VMS_VAX

Copyright 1987-2012, Larry Wall

Perl may be copied only under the terms of either the Artistic License or the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using &#34;man perl&#34; or &#34;perldoc perl&#34;.  If you have access to the
Internet, point your browser at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.org/">http://www.perl.org/</a></span>, the Perl Home Page.

$ cc/vers
Compaq C V6.4-005 on OpenVMS VAX V7.3
$ search [.lib.Digest]*.pm &#34;$VERSION =&#34;

******************************
DUA1:[CRAIG.DIGEST-SHA-5_73.LIB.DIGEST]SHA.PM;1

$VERSION = &#39;5.73&#39;;
$ perl Makefile.PL
Checking if your kit is complete...
Looks good
Writing Descrip.MMS for Digest::SHA
Writing MYMETA.yml and MYMETA.json
$ mmk
Skip [.blib.lib.digest]sha.pm &#40;unchanged&#41;
MCR dua1:[craig.blead]ndbgperl.exe.2 perl_root:[lib.ExtUtils]xsubpp
-nolinenumbers -typemap perl_root:[lib.ExtUtils]typemap -typema
p typemap SHA.xs &gt;SHA.C
CC/DECC /Include=[]/Standard=Relaxed_ANSI/Prefix=All/Obj=.obj
/NAMES=&#40;SHORTENED&#41;/FLOAT=G_FLOAT/Define=&#40;SHA_PERL_MODULE,&#34;VERSION=&#34;&#34;5.
73&#34;&#34;&#34;,&#34;XS_VERSION=&#34;&#34;5.73&#34;&#34;&#34;&#41;/Include=&#40;perl_root:[lib.VMS_VAX.5_17_6.CORE],[]&#41;/Optimize=&#40;NODISJOINT&#41;
 SHA.c
If F$Search&#40;&#34;[.BLIB.ARCH.AUTO.DIGEST.SHA]SHA.OLB&#34;&#41;.eqs.&#34;&#34; Then
Library/Object/Create [.BLIB.ARCH.AUTO.DIGEST.SHA]SHA.OLB
Library/Object/Replace [.BLIB.ARCH.AUTO.DIGEST.SHA]SHA.OLB SHA.OBJ
If F$TrnLNm&#40;&#34;DBGPerlShr&#34;&#41;.eqs.&#34;&#34; Then Define/NoLog/User DBGPerlShr
Sys$Share:DBGPerlShr.exe
Link /Debug/Trace/Map
/Shareable=[.BLIB.ARCH.AUTO.DIGEST.SHA]PL_DIGEST__SHA.EXE
SHA.opt/Option,perl_root:[lib.VMS_VAX.5_17_6.CORE]pe
rlshr_attr.opt/Option
Running Mkbootstrap for Digest::SHA &#40;&#41;
MCR dua1:[craig.blead]ndbgperl.exe.2 &#34;-MExtUtils::Command&#34; -e &#34;chmod&#34;
&#34;--&#34; 644 SHA.BS
MCR dua1:[craig.blead]ndbgperl.exe.2 &#34;-MExtUtils::Command&#34; -e &#34;cp&#34;
&#34;--&#34; SHA.bs [.BLIB.ARCH.AUTO.DIGEST.SHA]SHA.BS
MCR dua1:[craig.blead]ndbgperl.exe.2 &#34;-MExtUtils::Command&#34; -e &#34;chmod&#34;
&#34;--&#34; 644 [.BLIB.ARCH.AUTO.DIGEST.SHA]SHA.BS
MCR dua1:[craig.blead]ndbgperl.exe.2 &#34;-MExtUtils::Command&#34; -e &#34;cp&#34;
&#34;--&#34; shasum [.blib.script]shasum
MCR dua1:[craig.blead]ndbgperl.exe.2 &#34;-MExtUtils::MY&#34; -e
&#34;MY-&gt;fixin&#40;shift&#41;&#34; &#34;--&#34; [.blib.script]shasum
$ mmk test
MCR dua1:[craig.blead]ndbgperl.exe.2 &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34;
&#34;test_harness&#40;0, &#39;[.blib.lib]&#39;, &#39;[.blib.arch]&#39;&#41;&#34; t/*.t
t/allfcns.t .... ok
t/base64.t ..... ok
t/bitbuf.t ..... ok
t/dumpload.t ... ok
t/fips180-4.t .. ok
t/fips198.t .... ok
t/gg.t ......... ok
t/gglong.t ..... ok
t/hmacsha.t .... ok
t/ireland.t .... ok
t/methods.t .... ok
t/nistbit.t .... ok
t/nistbyte.t ... ok
t/pod.t ........ skipped: Test::Pod 1.00 required for testing POD
t/podcover.t ... skipped: Test::Pod::Coverage 0.08 required for
testing POD coverage
t/rfc2202.t .... ok
t/sha1.t ....... ok
t/sha224.t ..... ok
t/sha256.t ..... ok
t/sha384.t ..... ok
t/sha512.t ..... ok
t/woodbury.t ... ok
All tests successful.
Files=22, Tests=126, 1415 wallclock secs &#40;16.43 usr +  0.00 sys = 16.43 CPU&#41;
Result: PASS

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Issuing trouble tickets is a formal process with requirements for
&gt; precision.  You&#39;re using it instead as a means of convenience for
&gt; getting something that might be useful to you in the future.
</div>
Whoa.  I&#39;m not attacking your way of life and I&#39;m sorry you got that impression.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Even though no one provided an actual failure report as part of the
&gt; trouble ticket,
</div>
Well, the OP said, &#34;the compiler loops&#34; and &#34;the build hangs&#34;.   If
you can&#39;t even get the extension to compile, and the compiler doesn&#39;t
produce any error messages because it&#39;s stuck in a cpu-bound loop,
then you obviously won&#39;t see any test failures either.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;I prepared a trial fix anyway and submitted it
&gt; informally for test.  If you can&#39;t arrange to actually find someone with
&gt; a working environment, then I&#39;ll have to assume that the problem is
&gt; marginal at best and of no real interest to anyone.
</div>
It was interesting enough to the OP that he reported it and provided
the compiler flag that fixed the problem.  It was interesting enough
to me that I provided changes to the Makefile.PL that would produce
that compiler flag and tested those changes, and then tested your
slightly inferior but still workable alternative changes, and have now
done a third test demonstrating that when we know the compiler flag
works and we know that generating the compiler flags works, lo and
behold, the combination also works.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;26&nbsp;14:38:16&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;26&nbsp;18:48:31&nbsp;2012</span>
    <span class="description">mshelor [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> sms [...] antinode.info, craig.a.berry [...] gmail.com, jkeenan [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Oct 26 14:38:15 2012, craig.a.berry@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat, Oct 20, 2012 at 9:01 AM, Mark Shelor via RT
&gt; &lt;bug-Digest-SHA@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80157">https://rt.cpan.org/Ticket/Display.html?id=80157</a></span> &gt;
&gt; &gt;
&gt; &gt; On Sat Oct 20 08:49:25 2012, craig.a.berry@gmail.com wrote:
<div class="message-stanza open">&gt; &gt;&gt; On Fri, Oct 19, 2012 at 9:35 PM, Mark Shelor via RT
&gt; &gt;&gt; &lt;bug-Digest-SHA@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt;&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80157">https://rt.cpan.org/Ticket/Display.html?id=80157</a></span> &gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; On Sat Oct 13 15:30:59 2012, craig.a.berry@gmail.com wrote:
<div class="message-stanza open">&gt; &gt;&gt; &gt;&gt; On Sat, Oct 13, 2012 at 12:37 PM, Mark Shelor via RT
&gt; &gt;&gt; &gt;&gt; &lt;bug-Digest-SHA@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt;&gt; &gt;&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80157">https://rt.cpan.org/Ticket/Display.html?id=80157</a></span> &gt;
&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt; OK, what I plan to do is apply Gisle&#39;s DEC compiler bug
</div></div></div></div></div>&gt; workaround
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; &gt;&gt; to
<div class="message-stanza open">&gt; &gt;&gt; &gt;&gt; &gt; the Digest::SHA Makefile.  His Digest::MD5 module has gotten
</div></div></div>&gt; very
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; &gt;&gt; wide
<div class="message-stanza open">&gt; &gt;&gt; &gt;&gt; &gt; and heavy usage since the workaround was applied in 1999.  One
</div></div></div>&gt; can
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; &gt;&gt; be
<div class="message-stanza open">&gt; &gt;&gt; &gt;&gt; &gt; reasonably confident that it&#39;s robust and won&#39;t cause
</div></div></div>&gt; inadvertent
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; &gt;&gt; breakage.
<div class="message-stanza open">&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt; If I don&#39;t receive any further comments or replies, I&#39;ll
</div></div></div>&gt; assume
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; &gt;&gt; &gt; everyone&#39;s happy with this approach.
</div>&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; I&#39;m happy with that approach but do note you can&#39;t simply drop
</div></div>&gt; in the
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; &gt;&gt; Digest::MD5 code verbatim as it&#39;s using an @extra array that
</div></div>&gt; includes
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; &gt;&gt; both defines and optimization options.  My patch added @optimize
</div></div>&gt; as a
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; &gt;&gt; separate array since you&#39;re handling defines somewhat
</div></div>&gt; differently.
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; &gt;&gt; Maybe that&#39;s too obvious to mention, but I&#39;m mentioning it
</div></div>&gt; anyway on
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; &gt;&gt; the better safe than sorry principle.
</div>&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; I prepared a trial version of Digest::SHA to workaround the DEC
</div></div>&gt; compiler
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; &gt; bug, but there seems to be no one with a functioning VAX/Perl
&gt; &gt;&gt; &gt; environment who can actually confirm whether it works.
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; Untested changes aren&#39;t acceptable in a core module,
</div>&gt; &gt;&gt;
&gt; &gt;&gt; As I explained in private e-mail, I *have* tested the change by
&gt; &gt;&gt; simulating the architecture name on another system.  It&#39;s not a
&gt; &gt;&gt; perfect test, but it&#39;s not a bad one either.
&gt; &gt;&gt;
<div class="message-stanza open">&gt; &gt;&gt; &gt; so I&#39;m rejecting
&gt; &gt;&gt; &gt; the bug report until someone can test the workaround.
</div>&gt; &gt;&gt;
&gt; &gt;&gt; And in doing so you&#39;re preferring a  state of affairs that is 100%
&gt; &gt;&gt; guaranteed to fail over a state of affairs that is 99.9% guaranteed
</div></div>&gt; to
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; succeed.  I don&#39;t get it.
&gt; &gt;&gt;
&gt; &gt;&gt; I have been tinkering with getting a VAX build going again and may
&gt; &gt;&gt; eventually succeed.  It would have a higher chance of succeeding if
&gt; &gt;&gt; this change were already there when I get that far.
</div>&gt; &gt;
&gt; &gt;
&gt; &gt; You now have a trial fix.  When and if you get around to having an
&gt; &gt; actual test environment rather than a simulated one, you can try it
</div>&gt; out
<div class="message-stanza open">&gt; &gt; and report back to me.  I&#39;ll then publish it.
&gt; &gt;
&gt; &gt; But I&#39;ll need two transcripts: the first showing a failed build
</div>&gt; prior to
<div class="message-stanza open">&gt; &gt; the fix
</div>&gt; 
&gt; A transcript for a problem that produces no output makes no sense.  I
&gt; did reproduce the compiler getting stuck as reported by the OP.
&gt; 
<div class="message-stanza open">&gt; &gt;, and the second showing success with the fix applied.
</div>&gt; 
&gt; Here ya go.
&gt; 
&gt; $ perl -v
&gt; 
&gt; This is perl 5, version 17, subversion 6 &#40;v5.17.6
&gt; &#40;v5.17.5-51-g6c1c521&#41;&#41; built for VMS_VAX
&gt; 
&gt; Copyright 1987-2012, Larry Wall
&gt; 
&gt; Perl may be copied only under the terms of either the Artistic License
&gt; or the
&gt; GNU General Public License, which may be found in the Perl 5 source
&gt; kit.
&gt; 
&gt; Complete documentation for Perl, including FAQ lists, should be found
&gt; on
&gt; this system using &#34;man perl&#34; or &#34;perldoc perl&#34;.  If you have access to
&gt; the
&gt; Internet, point your browser at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.org/">http://www.perl.org/</a></span>, the Perl Home
&gt; Page.
&gt; 
&gt; $ cc/vers
&gt; Compaq C V6.4-005 on OpenVMS VAX V7.3
&gt; $ search [.lib.Digest]*.pm &#34;$VERSION =&#34;
&gt; 
&gt; ******************************
&gt; DUA1:[CRAIG.DIGEST-SHA-5_73.LIB.DIGEST]SHA.PM;1
&gt; 
&gt; $VERSION = &#39;5.73&#39;;
&gt; $ perl Makefile.PL
&gt; Checking if your kit is complete...
&gt; Looks good
&gt; Writing Descrip.MMS for Digest::SHA
&gt; Writing MYMETA.yml and MYMETA.json
&gt; $ mmk
&gt; Skip [.blib.lib.digest]sha.pm &#40;unchanged&#41;
&gt; MCR dua1:[craig.blead]ndbgperl.exe.2 perl_root:[lib.ExtUtils]xsubpp
&gt; -nolinenumbers -typemap perl_root:[lib.ExtUtils]typemap -typema
&gt; p typemap SHA.xs &gt;SHA.C
&gt; CC/DECC /Include=[]/Standard=Relaxed_ANSI/Prefix=All/Obj=.obj
&gt; /NAMES=&#40;SHORTENED&#41;/FLOAT=G_FLOAT/Define=&#40;SHA_PERL_MODULE,&#34;VERSION=&#34;&#34;5.
&gt;
</div>73&#34;&#34;&#34;,&#34;XS_VERSION=&#34;&#34;5.73&#34;&#34;&#34;&#41;/Include=&#40;perl_root:[lib.VMS_VAX.5_17_6.CORE],[]&#41;/Optimize=&#40;NODISJOINT&#41;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  SHA.c
&gt; If F$Search&#40;&#34;[.BLIB.ARCH.AUTO.DIGEST.SHA]SHA.OLB&#34;&#41;.eqs.&#34;&#34; Then
&gt; Library/Object/Create [.BLIB.ARCH.AUTO.DIGEST.SHA]SHA.OLB
&gt; Library/Object/Replace [.BLIB.ARCH.AUTO.DIGEST.SHA]SHA.OLB SHA.OBJ
&gt; If F$TrnLNm&#40;&#34;DBGPerlShr&#34;&#41;.eqs.&#34;&#34; Then Define/NoLog/User DBGPerlShr
&gt; Sys$Share:DBGPerlShr.exe
&gt; Link /Debug/Trace/Map
&gt; /Shareable=[.BLIB.ARCH.AUTO.DIGEST.SHA]PL_DIGEST__SHA.EXE
&gt; SHA.opt/Option,perl_root:[lib.VMS_VAX.5_17_6.CORE]pe
&gt; rlshr_attr.opt/Option
&gt; Running Mkbootstrap for Digest::SHA &#40;&#41;
&gt; MCR dua1:[craig.blead]ndbgperl.exe.2 &#34;-MExtUtils::Command&#34; -e &#34;chmod&#34;
&gt; &#34;--&#34; 644 SHA.BS
&gt; MCR dua1:[craig.blead]ndbgperl.exe.2 &#34;-MExtUtils::Command&#34; -e &#34;cp&#34;
&gt; &#34;--&#34; SHA.bs [.BLIB.ARCH.AUTO.DIGEST.SHA]SHA.BS
&gt; MCR dua1:[craig.blead]ndbgperl.exe.2 &#34;-MExtUtils::Command&#34; -e &#34;chmod&#34;
&gt; &#34;--&#34; 644 [.BLIB.ARCH.AUTO.DIGEST.SHA]SHA.BS
&gt; MCR dua1:[craig.blead]ndbgperl.exe.2 &#34;-MExtUtils::Command&#34; -e &#34;cp&#34;
&gt; &#34;--&#34; shasum [.blib.script]shasum
&gt; MCR dua1:[craig.blead]ndbgperl.exe.2 &#34;-MExtUtils::MY&#34; -e
&gt; &#34;MY-&gt;fixin&#40;shift&#41;&#34; &#34;--&#34; [.blib.script]shasum
&gt; $ mmk test
&gt; MCR dua1:[craig.blead]ndbgperl.exe.2 &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34;
&gt; &#34;test_harness&#40;0, &#39;[.blib.lib]&#39;, &#39;[.blib.arch]&#39;&#41;&#34; t/*.t
&gt; t/allfcns.t .... ok
&gt; t/base64.t ..... ok
&gt; t/bitbuf.t ..... ok
&gt; t/dumpload.t ... ok
&gt; t/fips180-4.t .. ok
&gt; t/fips198.t .... ok
&gt; t/gg.t ......... ok
&gt; t/gglong.t ..... ok
&gt; t/hmacsha.t .... ok
&gt; t/ireland.t .... ok
&gt; t/methods.t .... ok
&gt; t/nistbit.t .... ok
&gt; t/nistbyte.t ... ok
&gt; t/pod.t ........ skipped: Test::Pod 1.00 required for testing POD
&gt; t/podcover.t ... skipped: Test::Pod::Coverage 0.08 required for
&gt; testing POD coverage
&gt; t/rfc2202.t .... ok
&gt; t/sha1.t ....... ok
&gt; t/sha224.t ..... ok
&gt; t/sha256.t ..... ok
&gt; t/sha384.t ..... ok
&gt; t/sha512.t ..... ok
&gt; t/woodbury.t ... ok
&gt; All tests successful.
&gt; Files=22, Tests=126, 1415 wallclock secs &#40;16.43 usr +  0.00 sys =
&gt; 16.43 CPU&#41;
&gt; Result: PASS
&gt; 
<div class="message-stanza open">&gt; &gt; Issuing trouble tickets is a formal process with requirements for
&gt; &gt; precision.  You&#39;re using it instead as a means of convenience for
&gt; &gt; getting something that might be useful to you in the future.
</div>&gt; 
&gt; Whoa.  I&#39;m not attacking your way of life and I&#39;m sorry you got that
&gt; impression.
&gt; 
<div class="message-stanza open">&gt; &gt; Even though no one provided an actual failure report as part of the
&gt; &gt; trouble ticket,
</div>&gt; 
&gt; Well, the OP said, &#34;the compiler loops&#34; and &#34;the build hangs&#34;.   If
&gt; you can&#39;t even get the extension to compile, and the compiler doesn&#39;t
&gt; produce any error messages because it&#39;s stuck in a cpu-bound loop,
&gt; then you obviously won&#39;t see any test failures either.
&gt; 
<div class="message-stanza open">&gt; &gt;I prepared a trial fix anyway and submitted it
&gt; &gt; informally for test.  If you can&#39;t arrange to actually find someone
</div>&gt; with
<div class="message-stanza open">&gt; &gt; a working environment, then I&#39;ll have to assume that the problem is
&gt; &gt; marginal at best and of no real interest to anyone.
</div>&gt; 
&gt; It was interesting enough to the OP that he reported it and provided
&gt; the compiler flag that fixed the problem.  It was interesting enough
&gt; to me that I provided changes to the Makefile.PL that would produce
&gt; that compiler flag and tested those changes, and then tested your
&gt; slightly inferior but still workable alternative changes, and have now
&gt; done a third test demonstrating that when we know the compiler flag
&gt; works and we know that generating the compiler flags works, lo and
&gt; behold, the combination also works.
</div>
On more careful consideration of the issue, motivated of course by the
tone of your reply, I&#39;m now rejecting this bug for the simple reason
that it&#39;s not up to potentially myriad client applications to compensate
for bugs originating at an external source.

The more appropriate course for achieving a workaround is handle the
problem in the build generator &#40;e.g. ExtUtils::MakeMaker&#41; so that all
client applications can inherit it.

Also, if you want to regard the more careful and restricted changes as
&#34;inferior,&#34; then you should take that up with Gisle.  At the risk of
contradicting you, his version strikes me as superior in that it
prevents the flags from possibly being misapplied.  In addition, his
version has been around since 1999, so it&#39;s well tested.

Mark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;26&nbsp;18:48:32&nbsp;2012</span>
    <span class="description">mshelor [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;27&nbsp;15:48:49&nbsp;2012</span>
    <span class="description">craig.a.berry [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> sms [...] antinode.info, jkeenan [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #80157] [RT #85932]: VMS VAX &#40;V7.3&#41; build of Perl 5.12.3 hangs at sha.c</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 27 Oct 2012 14:48:37 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Digest-SHA [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Craig A. Berry&#34; &lt;craig.a.berry [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, Oct 26, 2012 at 5:48 PM, Mark Shelor via RT
&lt;bug-Digest-SHA@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80157">https://rt.cpan.org/Ticket/Display.html?id=80157</a></span> &gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On more careful consideration of the issue, motivated of course by the
&gt; tone of your reply, I&#39;m now rejecting this bug
</div>
I don&#39;t know where your animosity comes from.  Where my &#34;tone&#34; comes
from is my growing frustration with your unreasonable demands, moving
goalposts, and from having done work based on a commitment you made
only to break shortly thereafter.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; for the simple reason
&gt; that it&#39;s not up to potentially myriad client applications to compensate
&gt; for bugs originating at an external source.
&gt;
&gt; The more appropriate course for achieving a workaround is handle the
&gt; problem in the build generator &#40;e.g. ExtUtils::MakeMaker&#41; so that all
&gt; client applications can inherit it.
</div>
Be serious.  All portable code has workarounds for various
environments and you already have a comparable workaround for x86
architectures.  The fix in question here just uses the supported
mechanism in MakeMaker to do exactly what it was intended to.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Also, if you want to regard the more careful and restricted changes as
&gt; &#34;inferior,&#34; then you should take that up with Gisle.  At the risk of
&gt; contradicting you, his version strikes me as superior in that it
&gt; prevents the flags from possibly being misapplied.  In addition, his
&gt; version has been around since 1999, so it&#39;s well tested.
</div>
It&#39;s not Gisle&#39;s version and it wasn&#39;t 1999.  The workaround was
written by a domain expert &#40;Peter Prymmer&#41; and submitted to blead in
2001, where it was applied without question by Jarkko.   I made
further revisions to it in 2002.  It has a workaround for a Configure
bug I fixed in 2001 so it&#39;s not as concise as we could make it now,
but there&#39;s nothing really wrong with it &#40;that&#39;s why I said
&#34;*slightly* inferior&#34;&#41;.

Finally &#40;also in 2002&#41; Gisle simply synched up with what was in the
core and released version 2.21 of Digest::MD5
&#40;&lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/gisle/digest-md5/commit/2eb8d88434ab4345c254a0bdf43dfffcb97775f4">https://github.com/gisle/digest-md5/commit/2eb8d88434ab4345c254a0bdf43dfffcb97775f4</a></span>&gt;&#41;.

Which is a great example of how to do things and one that you can now
easily follow since I&#39;ve pushed the fix to blead as Digest::SHA
5.72_01:

&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://perl5.git.perl.org/perl.git/commit/560a4009bab00b294a28f584f9b812b7c1273d94">http://perl5.git.perl.org/perl.git/commit/560a4009bab00b294a28f584f9b812b7c1273d94</a></span>&gt;

If the next CPAN release version has the fix in it, I&#39;ll be happy to
integrate it into blead for you.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;27&nbsp;15:48:50&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;27&nbsp;21:06:08&nbsp;2012</span>
    <span class="description">mshelor [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Oct 27 15:48:49 2012, craig.a.berry@gmail.com wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If the next CPAN release version has the fix in it, I&#39;ll be happy to
&gt; integrate it into blead for you.
</div>
OK, good.  I see that you went with the version I submitted rather than
your original code, which contained no check for the compiler being used.

Your original code ran the risk of possibly breaking VAX VMS builds that
don&#39;t use the DEC compiler.  Even if such builds don&#39;t occur now, they
may do so in the future.  It&#39;s impossible to accept your argument that
the more careful version of the code &#40;which DOES check on the compiler
being used&#41; is in ANY way inferior, be it slight or otherwise.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;31&nbsp;19:54:07&nbsp;2012</span>
    <span class="description">mshelor [...] cpan.org -  TimeEstimated changed from &#40;no value&#41; to &#39;60&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;31&nbsp;19:54:07&nbsp;2012</span>
    <span class="description">mshelor [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;31&nbsp;19:54:08&nbsp;2012</span>
    <span class="description">mshelor [...] cpan.org -  Fixed in 5.73 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;31&nbsp;19:54:08&nbsp;2012</span>
    <span class="description">mshelor [...] cpan.org -  Severity Wishlist added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;31&nbsp;19:54:08&nbsp;2012</span>
    <span class="description">mshelor [...] cpan.org -  Broken in 5.72 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
