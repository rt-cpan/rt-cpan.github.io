<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #22808 for Perl-Critic: bugs</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #22808 for Perl-Critic: bugs</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Perl-Critic">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Perl-Critic">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Perl-Critic">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Perl-Critic">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/Perl-Critic/Perl-Critic/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Perl-Critic">Perl-Critic CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">22808</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Perl-Critic">Perl-Critic</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
lkwg82 [...] gmx.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-25198-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-25199-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




lars.gohlke.vcf<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/259383/112583/lars.gohlke.vcf">
Mon Nov 06 09:09:29 2006 (132b) by lkwg82 [...] gmx.de
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/258891/112285/lars.gohlke.vcf">
Fri Nov 03 23:12:26 2006 (124b) by lkwg82 [...] gmx.de
</a>
</font></li>
</ul>


test_critic.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/258891/112284/test_critic.pl">
Fri Nov 03 23:12:26 2006 (5.2k) by lkwg82 [...] gmx.de
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=22808">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-258891" href="/Public/Bug/Display.html?id=22808#txn-258891">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;03&nbsp;23:12:26&nbsp;2006</span>
    <span class="description">lkwg82 [...] gmx.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> bugs</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 04 Nov 2006 11:11:40 +0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Lars K.W. Gohlke&#34; &lt;lars.gohlke [...] student.sgu.ac.id&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/258891/112283/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/112283">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

hallo

Dist    : Perl-Critic-0.2
PerlVer : This is perl, v5.8.8 built for i586-linux-thread-multi


BUG     : false positive

* Expression form of &#34;eval&#34; &#40; occurrences:1, policy :
BuiltinFunctions::ProhibitStringyEval&#41;
 explanation:
    The string form of `eval&#39; is recompiled every time it is executed,
    whereas the block form is only compiled once. Also, the string form
    doesn&#39;t give compile-time warnings.

      eval &#34;print $foo&#34;;        #not ok
      eval {print $foo};        #ok

[file:_test_sig-code.pl,line:14,col:3]
code: eval &#40; &#39;$SIG{&#39;.$_.&#39;} = sub {print &#40;&#34;das war &#39;.$_.&#39;!\n&#34;&#41;;}&#39; &#41;;

P.S. attached usefull script

- ------------------------
Mit freundlichen Grüßen
Lars K.W. Gohlke
mailto:lkwg82@gmx.de
- -------------------------
Visit <span class="clickylink"><a target="new" rel="nofollow" href="http://www.lars-gohlke.de.vu">http://www.lars-gohlke.de.vu</a></span>

03.11.2006 19:32 &#40;MESZ+5,MEZ+6&#41;

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 &#40;MingW32&#41; - GPGrelay v0.959

iD8DBQFFTCEOAAomYJ1taN8RApa4AJ9m55URoBr0RQLwwHrttSWDyksd9ACdFb07
t3/IG1lR6b2GotXQAFCQQoI=
=LSTS
-----END PGP SIGNATURE-----
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/258891/112284/test_critic.pl">Download test_critic.pl</a><br />
<span class="downloadcontenttype">text/x-perl 5.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!perl

use strict;
use warnings;
use Data::Dumper;

use File::Find;
use Perl::Critic;
use Perl::Critic::Utils;
use Term::ANSIColor qw&#40;:constants&#41;;

$Term::ANSIColor::AUTORESET = 1;

our $serverity = 5;
my $statistics = {};

# caching results for a small performance boost
use File::Spec;
my $cache_path = File::Spec-&gt;catdir&#40;File::Spec-&gt;tmpdir,
									&#34;test-perl-critic-cache-$ENV{USER}&#34;&#41;;
if &#40;!-d $cache_path&#41; {
   mkdir $cache_path, oct 700;
}
require PPI::Cache;
PPI::Cache-&gt;import&#40;path =&gt; $cache_path&#41;;
# /end caching


if &#40;scalar&#40;@ARGV&#41; == 1&#41;{
	&#38;checkCritic&#40;$ARGV[0]&#41;
}
else{
	find&#40;\&#38;check,&#39;.&#39;&#41;;
}

print &#34;-&#34;x50,&#34;\n&#34;;
print &#34;* stats *\n&#34;;
print &#34;-&#34;x50,&#34;\n&#34;;
grep{
	if &#40; $_ eq &#39;violation&#39;&#41;{
		my $key = $_;
		print &#34;* voilations sorted desc \n&#34;;
		grep{
			print YELLOW sprintf&#40;&#34;%5s%-50s&#34;,&#34;&#34;,$_&#41;;
			print RED	sprintf&#40;&#34;%10d\n&#34;,$statistics-&gt;{$key}{$_}&#41;;
		}sort {$statistics-&gt;{$key}{$b} &lt;=&gt; $statistics-&gt;{$key}{$a}}&#40;keys %{$statistics-&gt;{$key}}&#41;;
		print &#34;*\n&#34;;
	}
	else{
		print YELLOW sprintf&#40;&#34;%-55s&#34;,$_&#41;;
		print RED sprintf&#40;&#34;%10d\n&#34;,$statistics-&gt;{$_}&#41;;
	}
}sort &#40;keys %{$statistics}&#41;;



sub check{
	&#40; local $_ = $File::Find::name&#41;  =~ s/^\.\///;

	# not touch .hidden files and not self
	&#38;checkCritic&#40;$_&#41; if &#40;!&#40;/^\./&#41; &#38;&#38; &#40;/\.pl/&#41; &#38;&#38; &#40;$_ ne $0 &#41;&#41;;
}

sub checkCritic{
	my $file = shift;

	my $delimiter		= &#39;_#Â§Â§#_&#39;;
	my @format_string;
	grep{ push&#40;@format_string,&#34;$_:\%$_&#34;&#41;; }qw/m f l c e d r P p s/;
	my $format_string	= join&#40; $delimiter,@format_string&#41;;

	my $opts_ref	= {
						&#39;-verbose&#39;	=&gt; $format_string,#&#34;%m \\n LOC: %r \\n &#40;file: %f, line: %l, column: %c, severity: %s; policy: %p&#41; \\n Explanation: \\n %d \\n&#34;,
						&#39;-severity&#39; =&gt; $serverity
					};

	my $critic = Perl::Critic-&gt;new&#40; %$opts_ref &#41;;
	my @violations = $critic-&gt;critique&#40;$file&#41;;
	render_report&#40; $file, $opts_ref, @violations &#41;;

	my $viol_count	= scalar&#40;@violations&#41;;

	$statistics-&gt;{&#39;violations&#39;} += $viol_count;
	$statistics-&gt;{&#39;checked files&#39;}++;

	if &#40; $viol_count&gt;0 &#41;{
		print &#34;=&#34;x80,&#34;\n&#34;;
		print BOLD YELLOW $file.&#34; &#34;;
		print &#34;&#40; &#34;;
		print RED $viol_count;
		print &#34; warnings, serverity: $serverity &#41;\n&#34;;
	}

	my $space	= length&#40;$viol_count&#41;;

	my %viol;
	grep{
		my %data;
		grep{
			&#40;my $multiline  =$_ &#41; =~ s/^&#40;.*?&#41;\ *\://o;
			$data{$1} = $multiline;
		}split /$delimiter/, $_;
		push&#40; @{$viol{$data{&#39;f&#39;}}},\%data&#41;;
	}@violations;

	grep{
		my $file		= $_;
		my @warnings	= @{$viol{$file}};

		# helping
		my $i			= 0;
		my $old_msg		=  &#34;&#34;;
		my %_sorted_messages = &#40;&#41;;
		my %policies	= &#40;&#41;;
		my %explanation	= &#40;&#41;;


		grep{
			push&#40;@{$_sorted_messages{$_-&gt;{&#39;m&#39;}}},$_&#41;;

			$policies{$_-&gt;{&#39;m&#39;}}	= $_-&gt;{&#39;p&#39;};
			$explanation{$_-&gt;{&#39;m&#39;}}= $_-&gt;{&#39;d&#39;};
		}sort {$a-&gt;{&#39;m&#39;} cmp $b-&gt;{&#39;m&#39;} }@warnings;

		#print Dumper&#40; keys %_sorted_messages &#41;;

		grep{
			my $msg		= $_;
			my $isSame	= &#40; $msg eq $old_msg &#41;;

			my @data	= @{$_sorted_messages{$msg}};
			$statistics-&gt;{&#39;violation&#39;}{$msg} += scalar&#40;@data&#41;;

			print BOLD RED &#39;* &#39;;
			print GREEN $msg;
			print &#34; &#40; occurrences:&#34;.scalar&#40;@data&#41;.&#34;, policy : &#34;.$policies{$msg}.&#34;&#41;\n&#34;;
			print BLUE &#34; explanation: \n&#34;;
			print YELLOW $explanation{$msg}.&#34;\n\n&#34;;


			grep{

				#print BLUE sprintf&#40;&#34;%4d &#34;, ++$i&#41;;
				print RED &#34;[&#34;;
				print CYAN &#34;file:&#34;;
				print YELLOW $_-&gt;{&#39;f&#39;};
				print &#34;,&#34;;
				print CYAN &#34;line:&#34;;
				print YELLOW $_-&gt;{&#39;l&#39;};
				print &#34;,&#34;;
				print CYAN &#34;col:&#34;;
				print YELLOW $_-&gt;{&#39;c&#39;};
				print RED &#34;]\t&#34;;
				print GREEN $_-&gt;{&#39;r&#39;};


				print &#34;\n&#34;;

				#  %m        Brief description of the violation
				#  %f        Name of the file where the violation occurred.
				#  %l        Line number where the violation occurred
				#  %c        Column number where the violation occurred
				#  %e        Explanation of violation or page numbers in PBP
				#  %d        Full diagnostic discussion of the violation
				#  %r        The string of source code that caused the violation
				#  %P        Name of the Policy module that created the violation
				#  %p        Name of the Policy without the Perl::Critic::Policy:: prefix
				#  %s        The severity level of the violation

				#print BOLD YELLOW $data{&#39;m&#39;},&#34;\n&#34;;

			}sort {$a-&gt;{&#39;l&#39;} &lt;=&gt; $b-&gt;{&#39;l&#39;}}@data;
			#

			if &#40; !$isSame &#41;{
				print BLUE &#34;-&#34;x80,&#34;\n&#34;x2;
			}

			$old_msg = $msg;
		}sort &#40;keys %_sorted_messages&#41;;
	}sort &#40;keys %viol&#41;;

	#print Dumper&#40; $critic-&gt;config&#40;&#41; &#41;;
	print &#34;\n&#34;;
}

# taken from perlcritic

#-----------------------------------------------------------------------------

sub render_report {

    my &#40; $file, $opts_ref, @violations &#41; = @_;


    if&#40; !@violations &#38;&#38; !$opts_ref-&gt;{-quiet} &#41; {
        if &#40; ! ref $file &#41; {
            print &#34;$file &#34;;
        }
        print &#34;source OK&#34;;
        return 0;
    }


    $file = -f $file ? $file : &#39;stdin&#39;;
    my $fmt = _get_format&#40; $opts_ref-&gt;{-verbose} || 5 &#41;;
    $fmt =~ s{ \%f }{$file}mxg;  #HACK! Violation objects don&#39;t know the file
    Perl::Critic::Violation::set_format&#40; $fmt &#41;;

    #print @violations;
    return \@violations;
}


#-----------------------------------------------------------------------------

sub _get_format {
    my &#40; $verbosity &#41; = @_;
    my $is_integer = $verbosity =~ m{ \A [+-]? \d+ \z }mx;
    return $is_integer ? verbosity_to_format&#40;$verbosity&#41;
                       : _interpolate&#40;$verbosity&#41;;
}


#-----------------------------------------------------------------------------

sub _interpolate {
    my &#40; $literal &#41; = @_;
    return eval &#34;\&#34;$literal\&#34;&#34;;  ## no critic &#39;StringyEval&#39;;
}

</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/258891/112285/lars.gohlke.vcf">Download lars.gohlke.vcf</a><br />
<span class="downloadcontenttype">text/x-vcard 124b</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-259019" href="/Public/Bug/Display.html?id=22808#txn-259019">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;04&nbsp;20:08:59&nbsp;2006</span>
    <span class="description">jeffrey_thalhammer [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #22808] bugs </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 4 Nov 2006 17:08:46 -0800 &#40;PST&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeffrey Thalhammer &lt;jeffrey_thalhammer [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/259019/112349/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/112349">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Lars-

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [file:_test_sig-code.pl,line:14,col:3]
&gt; code: eval &#40; &#39;$SIG{&#39;.$_.&#39;} = sub {print &#40;&#34;das
</div>war&#39;.$_.&#39;!\n&#34;&#41;;}&#39; &#41;;

Even though part of it eventually evaluates to an
anonymous subroutine, the argument to C&lt;eval&gt; is still
an expression.   Specifically, the expression is just
a series of concatenated literals.  So technically, it
really does violate the ProhibitStringyEval policy. 
For me, it is pretty hard to read this code because I
have to mentally keep track of which parts will be
evaluated now and which parts will be evaluated later.

If I understand the code correctly, it creates a
signal handler that prints the name of the signal. 
And it looks like you might be trying to do this for
several differnt types of signals.  Since the name of
the signal is always the first argument to the
handler, it can be done without using C&lt;eval&gt; at all. 
 For example, this would let you know when any signal
is received:

  for &#40;keys %SIG&#41; {
     $SIG{$_} = sub {print &#34;das war $_[0]!\n&#34;};
  }

Please let me know if I have misunderstood the problem
somehow.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; P.S. attached usefull script
</div>
Thanks.  Conicidentally, the next release of
perlcritic will also have colorized output, but it
won&#39;t be quite as colorful as yours :&#41;  Apparently,
you like to have the violations presented in a very
particular way.  Tell me more about your ideas and
maybe we can add some of them to Perl::Critic.

Cheers!

-Jeff




 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">____________________________________________________________________________________
Low, Low, Low Rates! Check out Yahoo! Messenger&#39;s cheap PC-to-Phone call rates 
&#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://voice.yahoo.com">http://voice.yahoo.com</a></span>&#41;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-259020" href="/Public/Bug/Display.html?id=22808#txn-259020">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;04&nbsp;20:09:01&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-259383" href="/Public/Bug/Display.html?id=22808#txn-259383">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;06&nbsp;09:09:29&nbsp;2006</span>
    <span class="description">lkwg82 [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #22808] bugs</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 06 Nov 2006 08:59:11 +0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Lars K.W. Gohlke&#34; &lt;lars.gohlke [...] student.sgu.ac.id&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/259383/112582/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/112582">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

hallo

I thing you got it and I did not really understood the error message

sorry.

P.S. here the newest version

<span class="clickylink"><a target="new" rel="nofollow" href="https://svn.sourceforge.net/svnroot/sguds/branch/helpertools/test_critic.pl">https://svn.sourceforge.net/svnroot/sguds/branch/helpertools/test_critic.pl</a></span>

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;Jeffrey Thalhammer via RT schrieb:
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=22808">http://rt.cpan.org/Ticket/Display.html?id=22808</a></span> &gt;
&gt;
&gt; Hello Lars-
&gt;
<div class="message-stanza open">&gt;&gt; [file:_test_sig-code.pl,line:14,col:3]
&gt;&gt; code: eval &#40; &#39;$SIG{&#39;.$_.&#39;} = sub {print &#40;&#34;das
</div>&gt; war&#39;.$_.&#39;!\n&#34;&#41;;}&#39; &#41;;
&gt;
&gt; Even though part of it eventually evaluates to an
&gt; anonymous subroutine, the argument to C&lt;eval&gt; is still
&gt; an expression.   Specifically, the expression is just
&gt; a series of concatenated literals.  So technically, it
&gt; really does violate the ProhibitStringyEval policy.
&gt; For me, it is pretty hard to read this code because I
&gt; have to mentally keep track of which parts will be
&gt; evaluated now and which parts will be evaluated later.
&gt;
&gt; If I understand the code correctly, it creates a
&gt; signal handler that prints the name of the signal.
&gt; And it looks like you might be trying to do this for
&gt; several differnt types of signals.  Since the name of
&gt; the signal is always the first argument to the
&gt; handler, it can be done without using C&lt;eval&gt; at all.
&gt;  For example, this would let you know when any signal
&gt; is received:
&gt;
&gt;   for &#40;keys %SIG&#41; {
&gt;      $SIG{$_} = sub {print &#34;das war $_[0]!\n&#34;};
&gt;   }
&gt;
&gt; Please let me know if I have misunderstood the problem
&gt; somehow.
&gt;
&gt;
<div class="message-stanza open">&gt;&gt; P.S. attached usefull script
</div>&gt;
&gt; Thanks.  Conicidentally, the next release of
&gt; perlcritic will also have colorized output, but it
&gt; won&#39;t be quite as colorful as yours :&#41;  Apparently,
&gt; you like to have the violations presented in a very
&gt; particular way.  Tell me more about your ideas and
&gt; maybe we can add some of them to Perl::Critic.
&gt;
&gt; Cheers!
&gt;
&gt; -Jeff
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
</div><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">____________________________________________________________________________________
<div class="message-stanza open">&gt; Low, Low, Low Rates! Check out Yahoo! Messenger&#39;s cheap PC-to-Phone
</div>call rates
<div class="message-stanza open">&gt; &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://voice.yahoo.com">http://voice.yahoo.com</a></span>&#41;
&gt;
&gt;
&gt;
&gt;
</div>

- ------------------------
Mit freundlichen Grüßen
Lars K.W. Gohlke
mailto:lkwg82@gmx.de
- -------------------------
Visit <span class="clickylink"><a target="new" rel="nofollow" href="http://www.lars-gohlke.de.vu">http://www.lars-gohlke.de.vu</a></span>

06.11.2006 08:45 &#40;MESZ+5,MEZ+6&#41;


-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 &#40;MingW32&#41; - GPGrelay v0.959

iD8DBQFFTqUHAAomYJ1taN8RAlbNAJ93RMMoAS7Z7zMtoavNhv0Tl/CrQQCgyLIX
NhaB+27JhaJo41FqlfbZrAE=
=/WMN
-----END PGP SIGNATURE-----
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/259383/112583/lars.gohlke.vcf">Download lars.gohlke.vcf</a><br />
<span class="downloadcontenttype">text/x-vcard 132b</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-261030" href="/Public/Bug/Display.html?id=22808#txn-261030">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;11&nbsp;03:27:00&nbsp;2006</span>
    <span class="description">thaljef [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.371042</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
