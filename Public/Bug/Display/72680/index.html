<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #72680 for Math-BigInt: bigint adding boolean false</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #72680 for Math-BigInt: bigint adding boolean false</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Math-BigInt">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Math-BigInt">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Math-BigInt">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Math-BigInt">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Math-BigInt">Math-BigInt CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">72680</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Math-BigInt">Math-BigInt</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
user42 [...] zip.com.au

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-20500-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-20501-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=72680">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1003528" href="/Public/Bug/Display.html?id=72680#txn-1003528">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;23&nbsp;18:59:12&nbsp;2011</span>
    <span class="description">user42 [...] zip.com.au -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> bigint adding boolean false</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 24 Nov 2011 10:59:23 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1003528/522881/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/522881">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 334b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">With recent debian Math::BigInt 1.997 and perl 5.10.1 a program 

    use Math::BigInt;
    my $x = Math::BigInt-&gt;new&#40;123&#41;;
    my $false = ! 1;
    $x += $false;
    print &#34;$x\n&#34;;

prints

    NaN

where I hoped that it would be 123.  Adding a boolean false to a plain
perl number works, it could be good if BigInt allowed the same.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1003693" href="/Public/Bug/Display.html?id=72680#txn-1003693">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;24&nbsp;08:11:12&nbsp;2011</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1003693/522976/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/522976">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 189b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you for the report. The Math::Big&#40;Int|Rat|Float&#41; and 
big&#40;num|int|rat&#41; modules have different semantics than core Perl in many 
cases, giving unexpected results. I am working on this.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1003696" href="/Public/Bug/Display.html?id=72680#txn-1003696">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;24&nbsp;08:11:13&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1097327" href="/Public/Bug/Display.html?id=72680#txn-1097327">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;09&nbsp;14:48:36&nbsp;2012</span>
    <span class="description">BBYRD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1097327/576929/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/576929">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 50b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is still returning NaN on the latest version.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1348126" href="/Public/Bug/Display.html?id=72680#txn-1348126">#</a>      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;08&nbsp;10:34:12&nbsp;2014</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1348126/715429/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/715429">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 389b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jul 09 14:48:36 2012, BBYRD wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This is still returning NaN on the latest version.
</div>
This has been the behaviour all the way since at least version 1.35. My worry is that changing this behaviour would break the code for those who base their code on the fact that Math::BigInt represents invalid input as NaN. I believe that changing this behaviour would require a clear warning.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1350099" href="/Public/Bug/Display.html?id=72680#txn-1350099">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;13&nbsp;06:51:47&nbsp;2014</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #72680] bigint adding boolean false</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 13 Apr 2014 06:51:35 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Tels&#34; &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1350099/716414/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/716414">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 811b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Tue, April 8, 2014 10:34 am, Peter John Acklam via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Math-BigInt
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=72680">https://rt.cpan.org/Ticket/Display.html?id=72680</a></span> &gt;
&gt;
&gt; On Mon Jul 09 14:48:36 2012, BBYRD wrote:
<div class="message-stanza open">&gt;&gt; This is still returning NaN on the latest version.
</div>&gt;
&gt; This has been the behaviour all the way since at least version 1.35. My
&gt; worry is that changing this behaviour would break the code for those who
&gt; base their code on the fact that Math::BigInt represents invalid input as
&gt; NaN. I believe that changing this behaviour would require a clear warning.
</div>
As far as I remember, the idea was that invalid inputs are be NaN &#40;Not a
number&#41;. I have missed the first part of the bug report, but why should
that be changed? What is the alternative?

All the best,

tels


-- 
<span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/galleries/">http://bloodgate.com/galleries/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1350181" href="/Public/Bug/Display.html?id=72680#txn-1350181">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;13&nbsp;13:24:18&nbsp;2014</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1350181/716466/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/716466">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Apr 13 06:51:47 2014, nospam-abuse@bloodgate.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; As far as I remember, the idea was that invalid inputs are be NaN &#40;Not a
&gt; number&#41;. I have missed the first part of the bug report, but why should
&gt; that be changed? What is the alternative?
</div>
The idea is good, but the downside is that the semantics are different than that of Perl itself, which comes as a surprise to many users.

When Perl converts a string to a number, it parses as much as it can, and if there is anything left, it gives a warning:

$ perl -wle &#39;print 5 + &#34;2.3.4&#34;&#39;
Argument &#34;2.3.4&#34; isn&#39;t numeric in addition &#40;+&#41; at -e line 1.
7.3

$ perl -wle &#39;print 5 + &#34;&#34;&#39;
Argument &#34;&#34; isn&#39;t numeric in addition &#40;+&#41; at -e line 1.
5

On the other hand, Math::Big&#40;Int|Flaot&#41; parses the entire string, and unless the entire string is a valid number, it returns a &#34;NaN&#34;:

$ perl -MMath::BigFloat -wle &#39;print Math::BigFloat -&gt; new&#40;&#34;5&#34;&#41; + &#34;2.3.4&#34;&#39;
NaN

$ perl -MMath::BigFloat -wle &#39;print Math::BigFloat -&gt; new&#40;&#34;5&#34;&#41; + &#34;&#34;&#39;
NaN

Several of the bug reports for the Math::Big&#40;Int|Float&#41; modules are related to this difference. People don&#39;t expect the semantics of Math::Big&#40;Int|Float&#41; to be different than that of core Perl.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1355541" href="/Public/Bug/Display.html?id=72680#txn-1355541">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;27&nbsp;05:09:35&nbsp;2014</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #72680] bigint adding boolean false</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 27 Apr 2014 05:09:19 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Tels&#34; &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1355541/719429/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/719429">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 8.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear Peter,

On Sun, April 13, 2014 1:24 pm, Peter John Acklam via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Math-BigInt
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=72680">https://rt.cpan.org/Ticket/Display.html?id=72680</a></span> &gt;
&gt;
&gt; On Sun Apr 13 06:51:47 2014, nospam-abuse@bloodgate.com wrote:
<div class="message-stanza open">&gt;&gt;
&gt;&gt; As far as I remember, the idea was that invalid inputs are be NaN &#40;Not a
&gt;&gt; number&#41;. I have missed the first part of the bug report, but why should
&gt;&gt; that be changed? What is the alternative?
</div>&gt;
&gt; The idea is good, but the downside is that the semantics are different
&gt; than that of Perl itself, which comes as a surprise to many users.
&gt;
&gt; When Perl converts a string to a number, it parses as much as it can, and
&gt; if there is anything left, it gives a warning:
&gt;
&gt; $ perl -wle &#39;print 5 + &#34;2.3.4&#34;&#39;
&gt; Argument &#34;2.3.4&#34; isn&#39;t numeric in addition &#40;+&#41; at -e line 1.
&gt; 7.3
&gt;
&gt; $ perl -wle &#39;print 5 + &#34;&#34;&#39;
&gt; Argument &#34;&#34; isn&#39;t numeric in addition &#40;+&#41; at -e line 1.
&gt; 5
&gt;
&gt; On the other hand, Math::Big&#40;Int|Flaot&#41; parses the entire string, and
&gt; unless the entire string is a valid number, it returns a &#34;NaN&#34;:
&gt;
&gt; $ perl -MMath::BigFloat -wle &#39;print Math::BigFloat -&gt; new&#40;&#34;5&#34;&#41; + &#34;2.3.4&#34;&#39;
&gt; NaN
&gt;
&gt; $ perl -MMath::BigFloat -wle &#39;print Math::BigFloat -&gt; new&#40;&#34;5&#34;&#41; + &#34;&#34;&#39;
&gt; NaN
&gt;
&gt; Several of the bug reports for the Math::Big&#40;Int|Float&#41; modules are
&gt; related to this difference. People don&#39;t expect the semantics of
&gt; Math::Big&#40;Int|Float&#41; to be different than that of core Perl.
</div>
Thank you for your explanation, that makes more sense to me. Please let me
expand a bit from the history of the rewrite &#40;and my subsequent
interpretion of the original code of BigInt&#41;. Please excuse the lenghty
and late reply.

Short version:

The intention was to make Math::BigInt &#34;correct&#34;, and not always replicate
the semantics of Perl. E.g. if you pass something to it that is not
interpretable as an integer or inf, it is NaN.

E.g. anything that is not an integer &#40;or float for BigFloat&#41; SHOULD be a
NaN &#40;or inf as it may be&#41;, not silently 0. If one wants the semantics of
Perl, the bignum modules are for it.

Or in other words, Math::BigInt-&gt;new&#40; something-not-an-integer &#41; should
always result in NaN.


I probably muddled the waters by treating undef as special cases, tho,
because that gives the impression it should work for everything you throw
at it. And clearly I never thought about !false and other wierd cases as
my knowledge of Perl was more limited at that time. So some of them might
work by accident.


The reasons for BigInt using NaN and not 0 are manyfold, foremost
consistency:

Perl is quite inconsistent in some places, you can f.i. &#34;increment&#34; &#39;a&#39;,
but not add 1 to to it, and neither can you add &#34;a&#34; to 1:

 te@te:$ perl -wle &#39;my $a = &#34;a&#34;; print $a++&#39;
 a
 te@te:$ perl -wle &#39;my $a = &#34;a&#34;; print $a + 1&#39;
 Argument &#34;a&#34; isn&#39;t numeric in addition &#40;+&#41; at -e line 1.
 1

&#40;There is Math::String, which attempts to get it right, but it is rarely
used, I guess&#41;

Likewise differences about undef &#40;which warns or not&#41;:

 te@te:$ perl -wle &#39;my $a = undef; print $a + 1&#39;
 Use of uninitialized value $a in addition &#40;+&#41; at -e line 1.
 1
 te@te:$ perl -wle &#39;my $a = undef; print ++$a&#39;
 1

Replicating all these special cases would probably be a nightmare.

Then there is the case of overloading: The magic of adding different
things together works with overloading, but it again causes problems like
that the order of the arguments influences the result:

  result = ClassA + ClassB    operation is handled by ClassA
  result = ClassB + ClassA    operation is handled by ClassB

This means that either ClassA and ClassB need to be aware of each other
&#40;which is the model BigInt and BigFloat use, but is quite a big pain&#41; or
the result will differ, which is clearly unexpected in cases like:

  result = 1 + 2.5;          vs.
  result = 2.5 + 1;

Which by extension also means that BigInt needs to know about floats &#40;and
any special case that BigFloat knows about&#41;, because it needs to know when
to pass &#40;upgrade&#41; to BigFloat. That makes it more complicated, too.

And there are special cases like:

  for &#40; Math::BigInt-&gt;new&#40;1&#41; .. 10 &#41;

which only work in more recent versions of Perl. Frankly, I&#39;m still amazed
that overloading actually works - but I digres :&#41;

Anyway, I&#39;ve gone to great lenghts to hide BigInt under overloading &#40;and
thus make BigInt appear to work like Perl&#41;, but it doesn&#39;t always work. So
my idea was to not even attempt it, and only attempt to hide all that away
with &#34;bignum&#34;, which adds a few more special cases &#40;and is thus be
slower&#41;.

So, my intention was to have it work like this:

  Math::BigInt-&gt;new&#40; notanumber &#41; =&gt; NaN
  -mbignum  notanumber + x        =&gt; NaN
  -mbignum  specialcase + x       =&gt; do what Perl does, as much as possible


Now, if the consensus is that this model is rubbish, and
Math::BigInt-&gt;new&#40;&#41; should do what Perl does, and also be consistent with
bignum, then well, I can&#39;t hardly argue against it. But I&#39;d still like to
point out that changing the semantics of Math::BigInt-&gt;new&#40;&#41; might not be
the best idea or even work 100%.

The argumentation against changing Math::BigInt-&gt;new&#40;&#41; in some cases is
that you lose the ability to check a string against &#34;being an
integer/number&#34; as opposed to being &#34;interpreted as number by Perl&#34;.


So at least it should be thought about what exactly the goal should be.

Here are a few examples where the differences currently show:

Floats:

 $ perl -MMath::BigInt -wle &#39;my $a = Math::BigInt-&gt;new&#40;1.5&#41;; print $a + 1&#39;
 NaN
 $ perl -MMath::BigInt -wle &#39;my $a = Math::BigInt-&gt;new&#40;1.5&#41;; print $a + 1&#39;
 NaN
 $ perl -wle &#39;my $a = 1.5; print $a + 1&#39;
 2.5
 $ perl -Mbigint -wle &#39;my $a = 1.5; print $a + 1&#39;
 2
 $ perl -Mbignum -wle &#39;my $a = 1.5; print $a + 1&#39;
 2.5

And these are oddly enough already consistent &#40;minus the warnings&#41;:

undef:

 $ perl -MMath::BigInt -wle &#39;my $a = Math::BigInt-&gt;new&#40;undef&#41;; print $a + 1&#39;
 1
 $ perl -wle &#39;my $a = undef; print $a + 1&#39;
 Use of uninitialized value $a in addition &#40;+&#41; at -e line 1.
 1
 $ perl -Mbigint -wle &#39;my $a = undef; print $a + 1&#39;
 1
 $ perl -Mbignum -wle &#39;my $a = undef; print $a + 1&#39;
 1

NaN:

 $ perl -MMath::BigInt -wle &#39;my $a = Math::BigInt-&gt;new&#40;NaN&#41;; print $a + 1&#39;
 NaN
 $ perl -wle &#39;my $a = NaN; print $a + 1&#39;
 nan
 $ perl -Mbigint -wle &#39;my $a = NaN; print $a + 1&#39;
 NaN
 $ perl -Mbignum -wle &#39;my $a = NaN; print $a + 1&#39;
 NaN

inf:

 $ perl -MMath::BigInt -wle &#39;my $a = Math::BigInt-&gt;new&#40;inf&#41;; print $a + 1&#39;
 Unquoted string &#34;inf&#34; may clash with future reserved word at -e line 1.
 inf
 $ perl -wle &#39;my $a = inf; print $a + 1&#39;
 Unquoted string &#34;inf&#34; may clash with future reserved word at -e line 1.
 inf
 $ perl -Mbigint -wle &#39;my $a = inf; print $a + 1&#39;
 inf
 $ perl -Mbignum -wle &#39;my $a = inf; print $a + 1&#39;
 inf

!false: &#40;here at least bigint and bignum are incorrect IMHO&#41;

 $ perl -wle &#39;my $a = ! &#40;3&lt;5&#41;; print $a + 1&#39;
 1
 $ perl -MMath::BigInt -wle &#39;my $a=Math::BigInt-&gt;new&#40;!&#40;3&lt;5&#41;&#41;; print $a + 1&#39;
 NaN
 $ perl -Mbigint -wle &#39;my $a = Math::BigInt-&gt;new&#40;!&#40;3&lt;5&#41;&#41;; print $a + 1&#39;
 NaN
 $ perl -Mbignum -wle &#39;my $a = Math::BigInt-&gt;new&#40;!&#40;3&lt;5&#41;&#41;; print $a + 1&#39;
 NaN

Oddly enought, true &#40;as in &#40;3&lt;4&#41; works:

 $ perl -wle &#39;print +&#40;3&lt;4&#41; + 1&#39;;
 2
 $ perl -MMath::BigInt -wle &#39;print Math::BigInt-&gt;new&#40; &#40;3&lt;4&#41; &#41; + 1&#39;;
 2
 $ perl -Mbigint -wle &#39;print +&#40;3&lt;4&#41; + 1&#39;;
 2
 $ perl -Mbignum -wle &#39;print +&#40;3&lt;4&#41; + 1&#39;;
 2

Here is another special case:

 $ perl -MMath::BigInt -wle &#39;my $a = &#34;++0&#34;; print $a + 1&#39;
 Argument &#34;++0&#34; isn&#39;t numeric in addition &#40;+&#41; at -e line 1.
 1
 $ perl -MMath::BigInt -wle &#39;my $a = Math::BigInt-&gt;new&#40;&#34;++0&#34;&#41;; print $a + 1&#39;
 NaN
 $ perl -Mbignum -wle &#39;my $a = &#34;++0&#34;; print $a + 1&#39;
 NaN
 $ perl -Mbigint -wle &#39;my $a = &#34;++0&#34;; print $a + 1&#39;
 NaN

Again, bigint and bignum should probably handle this case as Perl does
&#40;minus the warning as usual&#41;.

&#40;It might be an idea to add the ability to emit all these warnings, but
that is sep. from the discussion about the actual result.&#41;

Another case would be dual-vars:

 $ perl -wle &#39;open &#40;my $i, &#34;&lt;&#34;, &#34;foo&#34;&#41;; print $! + 1&#39;;
 3
 $ perl -Mbigint -wle &#39;open &#40;my $i, &#34;&lt;&#34;, &#34;foo&#34;&#41;; print $! + 1&#39;;
 NaN
 $ perl -Mbignum -wle &#39;open &#40;my $i, &#34;&lt;&#34;, &#34;foo&#34;&#41;; print $! + 1&#39;;
 NaN
 $ perl -MMath::BigInt -wle &#39;open &#40;my $i, &#34;&lt;&#34;, &#34;foo&#34;&#41;; print
Math::BigInt-&gt;new&#40;$!&#41; + 1&#39;;
 NaN

bigint and bignum should print 3, too. But I&#39;m not sure about BigInt. Both
cases could be argued for, afterall, $! is both a string and a number at
the same time. I&#39;d lean towards 3 for BigInt, tho.

Please let me know what you think of that.

Best regards,

Tels
-- 
<span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/galleries/">http://bloodgate.com/galleries/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1355690" href="/Public/Bug/Display.html?id=72680#txn-1355690">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;27&nbsp;17:14:23&nbsp;2014</span>
    <span class="description">user42 [...] zip.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #72680] bigint adding boolean false</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 28 Apr 2014 07:13:13 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1355690/719512/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/719512">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 833b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;nospam-abuse@bloodgate.com via RT&#34; &lt;bug-Math-BigInt@rt.cpan.org&gt; writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Oddly enought, true &#40;as in &#40;3&lt;4&#41; works:
&gt;
&gt;  $ perl -wle &#39;print +&#40;3&lt;4&#41; + 1&#39;;
&gt;  2
&gt;  $ perl -MMath::BigInt -wle &#39;print Math::BigInt-&gt;new&#40; &#40;3&lt;4&#41; &#41; + 1&#39;;
&gt;  2
&gt;  $ perl -Mbigint -wle &#39;print +&#40;3&lt;4&#41; + 1&#39;;
&gt;  2
&gt;  $ perl -Mbignum -wle &#39;print +&#40;3&lt;4&#41; + 1&#39;;
&gt;  2
</div>
My original report concerned boolean false, which adapting this bit
shows up as different

perl -wle &#39;print +&#40;3&gt;4&#41; + 1&#39;;
perl -MMath::BigInt -wle &#39;print Math::BigInt-&gt;new&#40; &#40;3&gt;4&#41; &#41; + 1&#39;;
perl -Mbigint -wle &#39;print +&#40;3&gt;4&#41; + 1&#39;;
perl -Mbignum -wle &#39;print +&#40;3&gt;4&#41; + 1&#39;;
=&gt;
1
NaN
NaN
NaN

I thought perhaps each might print &#34;1&#34;, ie. that BigInt+false would be
the given BigInt unchanged.

Arithmetic with booleans is fairly reasonable.  Perhaps it would mean
BigInt taking an empty string &#34;&#34; to mean zero.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1355826" href="/Public/Bug/Display.html?id=72680#txn-1355826">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;28&nbsp;04:56:17&nbsp;2014</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1355826/719577/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/719577">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 559b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">In my opinion, it is not relevant to bring the increment and decrement operator into this discussions. Incrementation and addition are two different operators, so it should be no surprise that they behave differently. Claiming that this difference is inconsistent is misleading, I think.

As for changing the semantics of Math::BigInt-&gt;new&#40;&#41;, I&#39;m not going to insist on doing this change. I just though it was a good idea to make Math::BigInt behave the way people expect. Anywa, there are other problems with Math::Big&#40;Int|Float|Rat&#41; that are more important.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1357785" href="/Public/Bug/Display.html?id=72680#txn-1357785">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;02&nbsp;05:09:59&nbsp;2014</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #72680] bigint adding boolean false</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 2 May 2014 05:09:48 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Tels&#34; &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1357785/720637/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/720637">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Daer Kevin,

On Sun, April 27, 2014 5:14 pm, Kevin Ryde via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Math-BigInt
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=72680">https://rt.cpan.org/Ticket/Display.html?id=72680</a></span> &gt;
&gt;
&gt; &#34;nospam-abuse@bloodgate.com via RT&#34; &lt;bug-Math-BigInt@rt.cpan.org&gt; writes:
<div class="message-stanza open">&gt;&gt;
&gt;&gt; Oddly enought, true &#40;as in &#40;3&lt;4&#41; works:
&gt;&gt;
&gt;&gt;  $ perl -wle &#39;print +&#40;3&lt;4&#41; + 1&#39;;
&gt;&gt;  2
&gt;&gt;  $ perl -MMath::BigInt -wle &#39;print Math::BigInt-&gt;new&#40; &#40;3&lt;4&#41; &#41; + 1&#39;;
&gt;&gt;  2
&gt;&gt;  $ perl -Mbigint -wle &#39;print +&#40;3&lt;4&#41; + 1&#39;;
&gt;&gt;  2
&gt;&gt;  $ perl -Mbignum -wle &#39;print +&#40;3&lt;4&#41; + 1&#39;;
&gt;&gt;  2
</div>&gt;
&gt; My original report concerned boolean false, which adapting this bit
&gt; shows up as different
&gt;
&gt; perl -wle &#39;print +&#40;3&gt;4&#41; + 1&#39;;
&gt; perl -MMath::BigInt -wle &#39;print Math::BigInt-&gt;new&#40; &#40;3&gt;4&#41; &#41; + 1&#39;;
&gt; perl -Mbigint -wle &#39;print +&#40;3&gt;4&#41; + 1&#39;;
&gt; perl -Mbignum -wle &#39;print +&#40;3&gt;4&#41; + 1&#39;;
&gt; =&gt;
&gt; 1
&gt; NaN
&gt; NaN
&gt; NaN
&gt;
&gt; I thought perhaps each might print &#34;1&#34;, ie. that BigInt+false would be
&gt; the given BigInt unchanged.
&gt;
&gt; Arithmetic with booleans is fairly reasonable.  Perhaps it would mean
&gt; BigInt taking an empty string &#34;&#34; to mean zero.
</div>
I&#39;m trying to clarify this again, please bear with me &#40;as I&#39;m still trying
to order my thoughts&#41;:

BigInt-&gt;new&#40;&#41; does two things:

* it checks that the input is a correct integer &#40;and what a &#34;correct&#34;
integer is or looks like is the debate here, I think&#41;
* it creates a new BigInt object

Likewise, BigInt does two things at the same time:

* it implements &#34;correct&#34; integer math
* AND it provides overloading operators for overloading magic

It is of course sensible that the overloading magic does emulate what Perl
does, esp. as &#34;bigint&#34;, &#34;bignum&#34; etc. use that overloading magic directly
to make the differences vanish.

However, care should be take to not modify the part of &#34;do correct integer
math&#34;. IMHO correct is f.i. that if you add x to NaN, you get NaN, not x.

And in light of this, if I get you correctly, you propose that false is
treated as 0 when passed to -&gt;new&#40;&#41;.

The point I was trying to make is that fixing/changing the overload math
would necessarily result in a change to new&#40;&#41; - and that might not be the
best way or desirable.

OTOH, I can&#39;t think of a good way to change the overload semantics w/o
changing new&#40;&#41;.

Anyway, here is a &#40;probably incomplete&#41; list of things that
BigInt/BigFloat might &#40;or might not&#41; treat as numeric/integer:

* undef =&gt; 0  &#40;this already works AFAIK&#41;
* false =&gt; 0
* true =&gt; 1 &#40;this already works AFAIK&#41;
* dual-var =&gt; whatever the integer portion says
* &#34;NaN&#34; =&gt; NaN
* &#34;inf&#34; =&gt; inf

So, false =&gt; 0 sounds sensible given the list above.

Unfortunately, there are quite a few more things that Perl treats as
numeric, f.i. &#34;000a&#34; =&gt; 0 and changing new&#40;&#41; to accept this would break
things that use new&#40;&#41; to check for valid integers.

And then there is the curios reverse situation in that BigInt accepts the
string &#34;000_001&#34; as 1, while Perl does not:

 $ perl -MMath::BigInt -wle &#39;print  Math::BigInt-&gt;new&#40;&#34;000_001&#34;&#41; + 1&#39;
 2
 $ perl -wle &#39;print &#34;000_001&#34; + 1&#39;
 Argument &#34;000_001&#34; isn&#39;t numeric in addition &#40;+&#41; at -e line 1.
 1
 $ perl -wle &#39;print 000_001 + 1&#39;
 2

Resolving all this might be a bit messy. But perhaps starting with !&#40;3&lt;5&#41;
would be a first step.

Best regards,

Tels

-- 
<span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/galleries/">http://bloodgate.com/galleries/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1357796" href="/Public/Bug/Display.html?id=72680#txn-1357796">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;02&nbsp;05:23:25&nbsp;2014</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #72680] bigint adding boolean false</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 2 May 2014 05:23:15 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Tels&#34; &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1357796/720643/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/720643">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear Peter,

On Mon, April 28, 2014 4:56 am, Peter John Acklam via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Math-BigInt
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=72680">https://rt.cpan.org/Ticket/Display.html?id=72680</a></span> &gt;
&gt;
&gt; In my opinion, it is not relevant to bring the increment and decrement
&gt; operator into this discussions. Incrementation and addition are two
&gt; different operators, so it should be no surprise that they behave
&gt; differently. Claiming that this difference is inconsistent is misleading,
&gt; I think.
</div>
It was just the first example I could think of. However, both inc and dec
operators use new&#40;&#41; to construct their arguments and if the difference is
how new&#40;&#41; treats its argument, then the operators cannot be properly
emulated as &#34;being different&#34; because both would get the same argument and
had no way to differentiate between the two cases.

  $a = !&#40;3&lt;5&#41; ++;
  $a = !&#40;3&lt;5&#41; --;
  $a = !&#40;3&lt;5&#41; + 1;

will be all something like:

  Math::BigInt-&gt;new&#40; !&#40;3&lt;5&#41; &#41;-&gt;binc&#40;&#41;;
  Math::BigInt-&gt;new&#40; !&#40;3&lt;5&#41; &#41;-&gt;badd&#40;&#41;;
  Math::BigInt-&gt;new&#40; !&#40;3&lt;5&#41; &#41;-&gt;badd&#40; Math::BigInt-&gt;new&#40;1&#41; &#41;;

A different example would be perhaps:

 $ perl -MMath::BigInt -wle &#39;print Math::BigInt-&gt;new&#40;&#34;000_001&#34;&#41; + 1&#39;
 2
 $ perl -wle &#39;print &#34;000_001&#34; + 1&#39;
 Argument &#34;000_001&#34; isn&#39;t numeric in addition &#40;+&#41; at -e line 1.
 1
 $ perl -wle &#39;print 000_001 + 1&#39;
 2

Here emulating Perl seems an impossible change.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As for changing the semantics of Math::BigInt-&gt;new&#40;&#41;, I&#39;m not going to
&gt; insist on doing this change. I just though it was a good idea to make
&gt; Math::BigInt behave the way people expect.
</div>
Just in case it wasn&#39;t clear, I wasn&#39;t strictly against the change, just
trying to advocate to take care not to change new&#40;&#41; too much so that it no
longer rejects invalid integer inputs.

Given that Math::BigInt-&gt;new&#40; !!&#40;3&lt;5&#41; &#41; works, I think that
Math::BigInt-&gt;new&#40; !&#40;3&lt;5&#41; &#41; should work, too.

This here doesn&#39;t seem right as it is inconsistent:

 $ perl -Mbignum -wle &#39;my $a = !!&#40;3&lt;5&#41;; print +&#40;$a + 1&#41; / 3&#39;
 0.6666666666666666666666666666666666666667
 $ perl -Mbignum -wle &#39;my $a = !&#40;3&lt;5&#41;; print +&#40;$a + 1&#41; / 3&#39;
 NaN

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;Anywa, there are other problems with Math::Big&#40;Int|Float|Rat&#41; that are
</div>more important.

I&#39;d like again to apologise for leaving this mess behind. If there is
anything I can do to help, please point me in the right direction.

best regards,

tels

-- 
<span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/galleries/">http://bloodgate.com/galleries/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1358935" href="/Public/Bug/Display.html?id=72680#txn-1358935">#</a>      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;04&nbsp;18:39:18&nbsp;2014</span>
    <span class="description">user42 [...] zip.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #72680] bigint adding boolean false</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 05 May 2014 08:38:25 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1358935/721242/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/721242">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 550b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;nospam-abuse@bloodgate.com via RT&#34; &lt;bug-Math-BigInt@rt.cpan.org&gt; writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; * undef =&gt; 0  &#40;this already works AFAIK&#41;
</div>
Maybe, though some of the undef handling in plain scalars seem like a
sort of &#34;auto-vivify&#34; if I remember rightly.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; * false =&gt; 0
</div>
Yes, that was my only original posting.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; * dual-var =&gt; whatever the integer portion says
</div>
You&#39;d be slightly tempted to take the string part since the integer or
nv part may be a value truncated from a long string of digits.  Of
course in practice the string part is often text instead of number.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1359676" href="/Public/Bug/Display.html?id=72680#txn-1359676">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;06&nbsp;03:58:08&nbsp;2014</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1359676/721678/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/721678">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello again, Tels

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  $ perl -MMath::BigInt -wle &#39;print Math::BigInt-&gt;new&#40;&#34;000_001&#34;&#41; + 1&#39;
&gt;  2
&gt;  $ perl -wle &#39;print &#34;000_001&#34; + 1&#39;
&gt;  Argument &#34;000_001&#34; isn&#39;t numeric in addition &#40;+&#41; at -e line 1.
&gt;  1
&gt;  $ perl -wle &#39;print 000_001 + 1&#39;
&gt;  2
&gt; 
&gt; Here emulating Perl seems an impossible change.
</div>
I&#39;m not sure what you mean by &#34;impossible change&#34;. Technically, it is not a problem to alter the behaviour so it becomes like this:

$ perl -MMath::BigInt -wle &#39;print Math::BigInt-&gt;new&#40;&#34;000_001&#34;&#41; + 1&#39;
Argument &#34;000_001&#34; isn&#39;t numeric at -e line 1.
1

But is it a good idea? I&#39;m not sure. Perhaps numbers &#40;strings, to be more precise&#41; that are valid numbers, except for underscores, should be treated just like today.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Just in case it wasn&#39;t clear, I wasn&#39;t strictly against the change, just
&gt; trying to advocate to take care not to change new&#40;&#41; too much so that it no
&gt; longer rejects invalid integer inputs.
</div>
I&#39;m afraid I don&#39;t see why Math::BigInt should reject invalid input when core Perl doesn&#39;t. The change I have proposed will accept &#34;invalid&#34; input like undef, &#34;&#34;, &#34;2.3.4.5&#34;, but in all cases a warning will be issued, just like core Perl does when these values are used in a numerical context.

Perhaps I should make the change and distribute it as perl-2.000-TRIAL1.tar.gz or something like that, so people can play with it and say what they think.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1360716" href="/Public/Bug/Display.html?id=72680#txn-1360716">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;08&nbsp;15:48:20&nbsp;2014</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #72680] bigint adding boolean false</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 8 May 2014 15:48:09 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Tels&#34; &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1360716/722313/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/722313">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear Peter,

On Tue, May 6, 2014 3:58 am, Peter John Acklam via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Math-BigInt
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=72680">https://rt.cpan.org/Ticket/Display.html?id=72680</a></span> &gt;
&gt;
&gt; Hello again, Tels
&gt;
<div class="message-stanza open">&gt;&gt;  $ perl -MMath::BigInt -wle &#39;print Math::BigInt-&gt;new&#40;&#34;000_001&#34;&#41; + 1&#39;
&gt;&gt;  2
&gt;&gt;  $ perl -wle &#39;print &#34;000_001&#34; + 1&#39;
&gt;&gt;  Argument &#34;000_001&#34; isn&#39;t numeric in addition &#40;+&#41; at -e line 1.
&gt;&gt;  1
&gt;&gt;  $ perl -wle &#39;print 000_001 + 1&#39;
&gt;&gt;  2
&gt;&gt;
&gt;&gt; Here emulating Perl seems an impossible change.
</div>&gt;
&gt; I&#39;m not sure what you mean by &#34;impossible change&#34;. Technically, it is not
&gt; a problem to alter the behaviour so it becomes like this:
&gt;
&gt; $ perl -MMath::BigInt -wle &#39;print Math::BigInt-&gt;new&#40;&#34;000_001&#34;&#41; + 1&#39;
&gt; Argument &#34;000_001&#34; isn&#39;t numeric at -e line 1.
&gt; 1
</div>
But it would be incorrect, &#34;000_0001&#34; is a valid integer as BigInt does
not &#40;and should not IMO&#41; make a distinction between &#34;string&#34; and &#34;integer&#34;
form input &#40;dual-vars a border-case, because one has to decide for one of
them&#41;.

And it would create inconsistencies. Why should &#34;2&#34; be not different from
2, but &#34;000_0001&#34; be treated different from 000_0001.

&#40;Actually, I think that Perl itself makes that distinction is odd -
shouldn&#39;t it treat both the same way? But I digres.&#41;

As for the &#34;it might be impossible&#34;, I was refering to the fact that it
might be hard to decide if the input is a string, or a number, without
somehow peeking at the internals. &#40;You probably know better than me if it
is technical possible at all&#41;.

The &#34;peaking at the internals&#34; would also be the line of reasoning against
the change,  if it looks like an int, it behaves like an int. If it is a
int-in-string-form, we still take it as int.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; But is it a good idea? I&#39;m not sure. Perhaps numbers &#40;strings, to be more
&gt; precise&#41; that are valid numbers, except for underscores, should be treated
&gt; just like today.
</div>
Sorry if I don&#39;t understand this fully, but do you say that &#34;2&#34; should be
2, but &#34;000_002&#34; should not be 2? Or that it should stay like it is at the
moment?

Changing it: I&#39;m pretty sure that would break code that gets numbers from
text &#40;like files&#41; and uses BigInt to parse them. I&#39;m not sure that such
code exists, but that seems quite a drastic change to me. And making
backwards-incompatible changes like that seemed always a no-no in core
Perl to me.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Just in case it wasn&#39;t clear, I wasn&#39;t strictly against the change, just
&gt;&gt; trying to advocate to take care not to change new&#40;&#41; too much so that it
&gt;&gt; no
&gt;&gt; longer rejects invalid integer inputs.
</div>&gt;
&gt; I&#39;m afraid I don&#39;t see why Math::BigInt should reject invalid input when
&gt; core Perl doesn&#39;t. The change I have proposed will accept &#34;invalid&#34; input
&gt; like undef, &#34;&#34;, &#34;2.3.4.5&#34;, but in all cases a warning will be issued, just
&gt; like core Perl does when these values are used in a numerical context.
</div>
Because you lose the correctness-test like:

  if &#40;Math::BigInt-&gt;new&#40;&#39;abc&#39;&#41;-&gt;is_nan&#40;&#41;&#41; { ... }

&#39;abc&#39; is not a number, so it absolutely should result in NaN, not &#34;0 plus
a warning&#34;. Likewise for things like &#34;2.3.4.5&#34;. That isn&#39;t valid number
input.

Another reason would be because BigInt does not try to emulate the
behavior of Perl - instead it implements big integer math the correct way,
which is a slightly different goal. &#34;bigint&#34; OTOH does emulate Perl more
closely &#40;it should be as transparentas possible&#41;.

It is probably very easy to expect BigInt to behave exactly like Perl.
&#40;I&#39;m not saying that making the mistake is bad, I&#39;m trying to say that the
expectation is wrong IMO&#41;.

And afterall, there will always be differences between BigInt and Perl
&#40;like the accuracy&#41;. So I&#39;m a bit undecided if it is really necessary to
bring BigInt closer to Perl for invalid inputs.

As for the actual bug report, I&#39;m leaning towards treating &#34;false&#34; as 0,
because it is actually more like a number, and less like &#34;Invalid input&#34;.

But the lines are certainly blurred on the entire subject.

Hope this explains my POV a bit more.

Best regards,

Tels

-- 
<span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/galleries/">http://bloodgate.com/galleries/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1360739" href="/Public/Bug/Display.html?id=72680#txn-1360739">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;08&nbsp;17:11:54&nbsp;2014</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #72680] bigint adding boolean false</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 8 May 2014 17:11:44 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Tels&#34; &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1360739/722325/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/722325">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear Peter,

here is one more example which shows the inconsistencies that the Perl
treatment of &#34;numbers&#34; vs. strings sometimes creates, and how bigint
emulates it, and BigInt does not, but instead does the consistent &#40;and
from the point of mathematics &#34;right&#34;&#41; thing:

And in my opionion that inconsistency is wrong, but can&#39;t be changed for
historical reasons. But if I&#39;d design mathematical operators I&#39;d make it
more consistent and that is why BigInt does not emulate all of Perl&#39;s
little things.

Some other languages &#40;like Javascript&#41; have the same problem, because they
consider &#34;+&#34; to be addition and string concatenation, and while it sounds
neat that you can &#34;add&#34; strings together, it creates all suprising
problems &#40;read bugs in software&#41; in the real world, like &#34;1&#34; + 1 suddenly
being &#34;11&#34; and not 2, depending on where the first variable came from.

Back to Perl: Depending on input &#40;string/integer&#41; and operator &#40;++ vs. +&#41;:

 $ perl -wle &#39;my $a = 000_001; $a++; print $a + 1;&#39;
 3
 $ perl -wle &#39;my $a = 000001; $a++; print $a + 1;&#39;
 3
 $ perl -wle &#39;my $a = &#34;000001&#34;; $a++; print $a + 1;&#39;
 3
 $ perl -wle &#39;my $a = &#34;000_001&#34;; $a++; print $a + 1;&#39;
 2

bigint emulates this:

 $ perl -Mbigint -wle &#39;my $a = 000_001; $a++; print $a + 1;&#39;
 3
 $ perl -Mbigint -wle &#39;my $a = 000001; $a++; print $a + 1;&#39;
 3
 $ perl -Mbigint -wle &#39;my $a = &#34;000001&#34;; $a++; print $a + 1;&#39;
 3
 $ perl -Mbigint -wle &#39;my $a = &#34;000_001&#34;; $a++; print $a + 1;&#39;
 2

BigInt does not and this is by design:

 $ perl -MMath::BigInt -wle &#39;my $a = Math::BigInt-&gt;new&#40;000_001&#41;; $a++;
print $a + 1;&#39;
 3
 $ perl -MMath::BigInt -wle &#39;my $a = Math::BigInt-&gt;new&#40;000001&#41;; $a++;
print $a + 1;&#39;
 3
 $ perl -MMath::BigInt -wle &#39;my $a = Math::BigInt-&gt;new&#40;&#34;000001&#34;&#41;; $a++;
print $a + 1;&#39;
 3
 $ perl -MMath::BigInt -wle &#39;my $a = Math::BigInt-&gt;new&#40;&#34;000_001&#34;&#41;; $a++;
print $a + 1;&#39;
 3

So please be careful to change such assumptions about what BigInt
consideres valid.

@Kevin: Sorry for hijacking your bugreport.

Best regards,

tels
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.604466</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
