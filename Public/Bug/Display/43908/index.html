<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #43908 for Perl-Critic: Add MANIFEST to the repository</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #43908 for Perl-Critic: Add MANIFEST to the repository</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Perl-Critic">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Perl-Critic">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Perl-Critic">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Perl-Critic">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/Perl-Critic/Perl-Critic/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Perl-Critic">Perl-Critic CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">43908</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Perl-Critic">Perl-Critic</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mschwern [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Unimportant    </td>
  </tr>
  <tr id="CF-25198-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.097_002    </td>
  </tr>
  <tr id="CF-25199-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=43908">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-573992" href="/Public/Bug/Display.html?id=43908#txn-573992">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;06&nbsp;13:43:26&nbsp;2009</span>
    <span class="description">mschwern [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Add MANIFEST to the repository</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/573992/289782/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/289782">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 472b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The MANIFEST is missing from the repository.  I&#39;m sure this is
deliberate so I didn&#39;t just go ahead and commit it.  Normally this would
be a religious argument as to whether a generated file should be
committed, but it&#39;s a static generated file &#40;ie. its the same for
everyone&#41; and there&#39;s tests that don&#39;t work without it &#40;00_modules,
00_config and 05_utils&#41;.  So from a purely practical view it would be
very nice if it were there so things work straight from a checkout.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-573995" href="/Public/Bug/Display.html?id=43908#txn-573995">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;06&nbsp;13:46:18&nbsp;2009</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/573995/289785/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/289785">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 377b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Case in point, I did a &#34;make manifest&#34; and now 00_modules fails.

t/00_modules..................................2213/2081 # Looks like you
planned 2081 tests but ran 2214.
t/00_modules.................................. Dubious, test returned
255 &#40;wstat 65280, 0xff00&#41;
 All 2081 subtests passed 

Did the MANIFEST get generated wrong?  Did it pull in too many files? 
Who knows?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-573997" href="/Public/Bug/Display.html?id=43908#txn-573997">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;06&nbsp;13:46:20&nbsp;2009</span>
    <span class="description">mschwern [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-574176" href="/Public/Bug/Display.html?id=43908#txn-574176">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;06&nbsp;19:49:17&nbsp;2009</span>
    <span class="description">perl [...] galumph.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43908] Add MANIFEST to the repository</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 06 Mar 2009 18:49:02 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;perl [...] galumph.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/574176/289888/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/289888">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 233b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Michael G Schwern via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Did the MANIFEST get generated wrong?  Did it pull in too many files? 
&gt; Who knows?
</div>
We support EU::MM for install, but not for development.  If you use M::B, the MANIFEST will be there when needed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-574179" href="/Public/Bug/Display.html?id=43908#txn-574179">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;06&nbsp;19:50:18&nbsp;2009</span>
    <span class="description">perl [...] galumph.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43908] Add MANIFEST to the repository</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 06 Mar 2009 18:50:08 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;perl [...] galumph.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/574179/289891/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/289891">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 254b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Michael G Schwern via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The MANIFEST is missing from the repository.  I&#39;m sure this is
&gt; deliberate so I didn&#39;t just go ahead and commit it.
</div>
Yup.  It&#39;s deliberate.  I don&#39;t see the point of putting stuff into source control that is generated.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-574314" href="/Public/Bug/Display.html?id=43908#txn-574314">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;07&nbsp;05:15:50&nbsp;2009</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/574314/289977/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/289977">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I reran with Build.PL.  00_modules still failing.  Still don&#39;t know why.

t/00_modules..................................2212/2081 # Looks like you
planned 2081 tests but ran 2214.
t/00_modules.................................. Dubious, test returned
255 &#40;wstat 65280, 0xff00&#41;
 All 2081 subtests passed 

The reason you don&#39;t commit generated files is because typically they
change per user&#39;s environment.  Things like Makefiles and config files
and the like.  The MANIFEST remains exactly the same from computer to
computer.  It&#39;s supposed to be static.  That it&#39;s generated is just a
convenience.

Regenerating the MANIFEST as part of the build process defeats the point
of the MANIFEST.  The MANIFEST exists to guarantee to the user that they
got the complete source distribution.  If the distribution regenerates
the MANIFEST based on what they downloaded and unpacked this guarantee
is lost.  If any files are added to the distribution directory they may
clog the MANIFEST.

All of which leads to a non-static MANIFEST file and I&#39;m left with a
test that fails and I don&#39;t know why.  This is not worth upholding the
purity of not checking in any generated files.  It&#39;s just one more thing
that can go wrong.

I also noticed MANIFEST is deleted as part of the clean target.  This is
a terrible idea as it wipes out part of the source distribution.  The
clean target should keep the distribution intact.  After a user runs
build clean they will be unable to check the integrity of their
distribution.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-574374" href="/Public/Bug/Display.html?id=43908#txn-574374">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;07&nbsp;09:09:04&nbsp;2009</span>
    <span class="description">perl [...] galumph.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43908] Add MANIFEST to the repository</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 07 Mar 2009 08:08:19 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;perl [...] galumph.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/574374/290024/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290024">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 997b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Michael G Schwern via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Regenerating the MANIFEST as part of the build process defeats the
&gt; point of the MANIFEST.  The MANIFEST exists to guarantee to the user
&gt; that they got the complete source distribution.  If the distribution
&gt; regenerates the MANIFEST based on what they downloaded and unpacked
&gt; this guarantee is lost.
</div>
The MANIFEST is included in the distribution tarball.  It is already present at configuration time on users&#39; machines and therefore any warnings about missing files will correctly appear.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If any files are added to the distribution directory they may clog
&gt; the MANIFEST.
</div>
Not if MANIFEST.SKIP is correct.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I also noticed MANIFEST is deleted as part of the clean target.  This
&gt; is a terrible idea as it wipes out part of the source distribution.
</div>
The problem is that the automatic MANIFEST generation doesn&#39;t delete files that have been removed.  I got sick and tired of having to delete the damn file by hand every time I wanted the file regenerated.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-574380" href="/Public/Bug/Display.html?id=43908#txn-574380">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;07&nbsp;09:17:24&nbsp;2009</span>
    <span class="description">perl [...] galumph.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43908] Add MANIFEST to the repository</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 07 Mar 2009 08:16:56 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;perl [...] galumph.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/574380/290029/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290029">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 541b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Michael G Schwern via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Perl-Critic
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=43908">https://rt.cpan.org/Ticket/Display.html?id=43908</a></span> &gt;
&gt; 
&gt; I reran with Build.PL.  00_modules still failing.  Still don&#39;t know why.
&gt; 
&gt; t/00_modules..................................2212/2081 # Looks like you
&gt; planned 2081 tests but ran 2214.
&gt; t/00_modules.................................. Dubious, test returned
&gt; 255 &#40;wstat 65280, 0xff00&#41;
&gt;  All 2081 subtests passed 
</div>
Whoops.  My bad on not updating the test count for is_enabled&#40;&#41; testing on Policies.  Fixed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-574526" href="/Public/Bug/Display.html?id=43908#txn-574526">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;07&nbsp;16:08:51&nbsp;2009</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43908] Add MANIFEST to the repository</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 07 Mar 2009 13:02:17 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/574526/290124/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290124">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Elliot Shank via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=43908">https://rt.cpan.org/Ticket/Display.html?id=43908</a></span> &gt;
&gt; 
&gt; Michael G Schwern via RT wrote:
<div class="message-stanza open">&gt;&gt; Regenerating the MANIFEST as part of the build process defeats the
&gt;&gt; point of the MANIFEST.  The MANIFEST exists to guarantee to the user
&gt;&gt; that they got the complete source distribution.  If the distribution
&gt;&gt; regenerates the MANIFEST based on what they downloaded and unpacked
&gt;&gt; this guarantee is lost.
</div>&gt; 
&gt; The MANIFEST is included in the distribution tarball.  It is already present at configuration time on users&#39; machines and therefore any warnings about missing files will correctly appear.
</div>
It will be untrusted after the first build and cannot be used to recheck the
distribution &#40;Build distcheck&#41;.  Also since the tests use it it might cause
tests to fail.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; If any files are added to the distribution directory they may clog
&gt;&gt; the MANIFEST.
</div>&gt; 
&gt; Not if MANIFEST.SKIP is correct.
</div>
It can&#39;t predict all the possible junk that might wind up in there.  For
example, you&#39;re missing anything having to do with git.  If I check out using
git-svn, which I usually do, its going to wind up a mess.

Which reminds me, it should be using #!include_default so it can take
advantage of updates to the default skips... but it can&#39;t because its going to
be regenerated on user&#39;s machines which might not have a new enough
ExtUtils::Manifest to recognize #!include_default or their default
MANIFEST.SKIP might be out of date.

Plugging holes in the MANIFEST.SKIP is an expensive game to play to keep from
checking in one file.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; I also noticed MANIFEST is deleted as part of the clean target.  This
&gt;&gt; is a terrible idea as it wipes out part of the source distribution.
</div>&gt; 
&gt; The problem is that the automatic MANIFEST generation doesn&#39;t delete files that have been removed.  I got sick and tired of having to delete the damn file by hand every time I wanted the file regenerated.
</div>
I figured it was something like that.

Simply customize the manifest target, and allllll this goes away.

sub ACTION_manifest {
    my $self = shift;

    unlink &#39;MANIFEST&#39; or die &#34;Can&#39;t unlink MANIFEST: $!&#34;;

    return $self-&gt;SUPER::ACTION_manifest&#40;@_&#41;;
}

Poof!


-- 
87. If the thought of something makes me giggle for longer than 15
    seconds, I am to assume that I am not allowed to do it.
    -- The 213 Things Skippy Is No Longer Allowed To Do In The U.S. Army
           <span class="clickylink"><a target="new" rel="nofollow" href="http://skippyslist.com/list/">http://skippyslist.com/list/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-574740" href="/Public/Bug/Display.html?id=43908#txn-574740">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;08&nbsp;09:24:44&nbsp;2009</span>
    <span class="description">perl [...] galumph.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43908] Add MANIFEST to the repository</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 08 Mar 2009 08:24:09 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;perl [...] galumph.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/574740/290260/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290260">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 262b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Michael G Schwern via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It can&#39;t predict all the possible junk that might wind up in there.
&gt; For example, you&#39;re missing anything having to do with git.  If I
&gt; check out using git-svn, which I usually do, its going to wind up a
&gt; mess.
</div>
Git is evil.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-574743" href="/Public/Bug/Display.html?id=43908#txn-574743">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;08&nbsp;09:33:11&nbsp;2009</span>
    <span class="description">perl [...] galumph.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43908] Add MANIFEST to the repository</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 08 Mar 2009 08:32:44 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;perl [...] galumph.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/574743/290263/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290263">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 236b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Michael G Schwern via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It will be untrusted after the first build and cannot be used to recheck the
&gt; distribution &#40;Build distcheck&#41;.
</div>
If it gets regenerated, nothing is going to be missing, so there&#39;s no need for distcheck.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-574746" href="/Public/Bug/Display.html?id=43908#txn-574746">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;08&nbsp;10:00:22&nbsp;2009</span>
    <span class="description">perl [...] galumph.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43908] Add MANIFEST to the repository</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 08 Mar 2009 08:59:50 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;perl [...] galumph.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/574746/290266/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290266">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 634b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Michael G Schwern via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Plugging holes in the MANIFEST.SKIP is an expensive game to play to
&gt; keep from checking in one file.
</div>
Not really.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; I also noticed MANIFEST is deleted as part of the clean target.
&gt;&gt;&gt; This is a terrible idea as it wipes out part of the source
&gt;&gt;&gt; distribution.
</div>&gt;&gt;
&gt;&gt; The problem is that the automatic MANIFEST generation doesn&#39;t
&gt;&gt; delete files that have been removed.  I got sick and tired of
&gt;&gt; having to delete the damn file by hand every time I wanted the file
&gt;&gt; regenerated.
</div>&gt; 
&gt; I figured it was something like that.
</div>
Also, if something is being regenerated, you shouldn&#39;t keep it around.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-766449" href="/Public/Bug/Display.html?id=43908#txn-766449">#</a>      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;21&nbsp;22:22:23&nbsp;2010</span>
    <span class="description">ELLIOTJS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1042097" href="/Public/Bug/Display.html?id=43908#txn-1042097">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;24&nbsp;21:54:27&nbsp;2012</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1042097/544252/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/544252">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m reopening this because I&#39;m again working on Perl-Critic from the
repository and, once again, the tests are failing because of the missing
MANIFEST.  Once I generate the MANIFEST tests are still failing and I
can&#39;t tell if it&#39;s because the MANIFEST was generated incorrectly or if
something else is wrong.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Also, if something is being regenerated, you shouldn&#39;t keep it around.
</div>
That&#39;s garbled version control dogma.  The actual rule is if something
is being generated **differently on different machines** you shouldn&#39;t
check it in.  For example MakeMaker&#39;s Makefile.

There&#39;s nothing wrong with checking in a generated file which is
supposed to be the same for everybody &#40;ex. MANIFEST and META.*&#41;.  In
fact it&#39;s beneficial.

* Like any other file in the distribution, it is useful to track
  its contents at different points in the history for historical
  bug investigations.

* It avoids mistakes resulting from differing build environments.

Most importantly, it removes a barrier to new developers.  Ease of use
should trump version control dogma.  As much as possible, the code
should work straight out of the repository.

I would request somebody other than Elliot in the Perl::Critic project
respond please.  His selective single line responses are dismissive and
disrespectful.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1042099" href="/Public/Bug/Display.html?id=43908#txn-1042099">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;24&nbsp;21:54:28&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1042130" href="/Public/Bug/Display.html?id=43908#txn-1042130">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;24&nbsp;23:40:55&nbsp;2012</span>
    <span class="description">jeff [...] imaginative-software.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43908] Add MANIFEST to the repository</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 24 Feb 2012 20:40:43 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeffrey Thalhammer &lt;jeff [...] imaginative-software.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1042130/544271/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/544271">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 797b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Feb 24, 2012, at 6:54 PM, Michael G Schwern via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I would request somebody other than Elliot in the Perl::Critic project respond please.
</div>
I can see both sides of the argument.  But I have been bitten by the lack of MANIFEST a few times recently &#40;and I do use M::B rather than EU::MM, so I&#39;m not sure why&#41;.  So I&#39;m ok with stashing the MANIFEST in the repository.

Since Schwern is the only person actively working on Perl::Critic right now, I don&#39;t mind accommodating his preferences.  When/if Schwern moves on and Elliot comes back in, then we can switch it back.  Let&#39;s just do the transition in one commit so it is easy to revert.

For argument&#39;s sake though, how is this different from using Dist::Zilla?  With DZ, you don&#39;t have a MANIFEST at all until you make a build.

-Jeff
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1042130/544272/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/544272">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.6k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1042168" href="/Public/Bug/Display.html?id=43908#txn-1042168">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;25&nbsp;01:21:51&nbsp;2012</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1042168/544292/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/544292">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 505b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Feb 24 23:40:55 2012, jeff@imaginative-software.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; On Feb 24, 2012, at 6:54 PM, Michael G Schwern via RT wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; I would request somebody other than Elliot in the Perl::Critic
</div>&gt;    project respond please.
</div>
OK.

Occasionally I fall over the lack of a MANIFEST, usually when adding
modules. Or when I update and someone else has added a module.

When that happens, I grumble, do a realclean, then run Build.PL, and
./Build manifest. So far, that has always straightened things out.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1042417" href="/Public/Bug/Display.html?id=43908#txn-1042417">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;25&nbsp;12:17:12&nbsp;2012</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43908] Add MANIFEST to the repository</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 25 Feb 2012 09:17:01 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1042417/544455/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/544455">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2012.2.24 8:40 PM, Jeffrey Thalhammer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I can see both sides of the argument.  But I have been bitten by the lack
&gt; of MANIFEST a few times recently &#40;and I do use M::B rather than EU::MM,
&gt; so I&#39;m not sure why&#41;.  So I&#39;m ok with stashing the MANIFEST in the repository.
&gt;
&gt; Since Schwern is the only person actively working on Perl::Critic right
&gt; now, I don&#39;t mind accommodating his preferences.  When/if Schwern moves
&gt; on and Elliot comes back in, then we can switch it back.
</div>
While I&#39;m happy about the conclusion, I&#39;m not so happy about the &#34;do whatever
the current developer wants&#34; rationale.

The principle driving this should be about ease of use for new and existing
developers.  There&#39;s three counts of missing MANIFEST frustration &#40;you, me and
Tom&#41; with little benefit for not checking it in.  Under the cockroach law that
means there&#39;s probably dozens more who have been stymied and never said anything.

Tailoring the dev workflow to the particular quirks of whatever single
developer happens to be working on it at the moment is a great way to ensure
that you only ever have a single developer working on the project.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Let&#39;s just do the transition in one commit so it is easy to revert.
</div>
I figure all that needs to be done is add the MANIFEST and then delete it to
revert.  Is there something else?


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; For argument&#39;s sake though, how is this different from using Dist::Zilla?
&gt;  With DZ, you don&#39;t have a MANIFEST at all until you make a build.
</div>
I don&#39;t use Dist::Zilla much, so I can&#39;t really comment on that.  Though
I do gripe about similar issues with Dist::Zilla distributions: the normal
CPAN module workflow does not work fresh out of the repository and requires
special setup.

What I can say for Perl::Critic is neither `Build` nor `Build test` build the
MANIFEST which leaves the tests in an unrunable state.  A build which leaves
the tests broken would clearly be considered a failure were this argument not
muddled by VCS dogma.  Maybe I don&#39;t have an &#34;author&#34; flag set, but that&#39;s yet
more complexity devs have to deal with just to avoid checking in a file.

This could be minimally resolved by having the build step generate the
MANIFEST if it&#39;s missing, but this would lose the benefit of having a
historical log of MANIFEST changes and retain the disadvantage that the
MANIFEST might be generated incorrectly by each developer.


-- 
Hating the web since 1994.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1042497" href="/Public/Bug/Display.html?id=43908#txn-1042497">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;25&nbsp;20:26:16&nbsp;2012</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1042497/544503/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/544503">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Feb 25 12:17:12 2012, schwern@pobox.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; The principle driving this should be about ease of use for new and
&gt; existing developers.  There&#39;s three counts of missing MANIFEST
&gt; frustration &#40;you, me and Tom&#41; with little benefit for not checking
&gt; it in.  Under the cockroach law that means there&#39;s probably dozens
&gt; more who have been stymied and never said anything.
</div>
Well, I would have called it an occasional minor inconvenience, rather
than frustration. I have never been, or felt, blocked.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Tailoring the dev workflow to the particular quirks of whatever
&gt; single developer happens to be working on it at the moment is a
&gt; great way to ensure that you only ever have a single developer
&gt; working on the project.
</div>
Exactly right. My take on it is that it is Jeff&#39;s sandbox. He has
allowed me to play in it. If I do not like his games and his toys, the
civilized thing for me to do is to thank him kindly, and go home. Well,
OK, maybe try to convince him my game or my toy is better -- but
remembering that it is, after all, his sandbox, and trying to accord him
the same consideration that I would like if he were playing in mine.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; This could be minimally resolved by having the build step generate the
&gt; MANIFEST if it&#39;s missing, but this would lose the benefit of having a
&gt; historical log of MANIFEST changes and retain the disadvantage that
&gt; the MANIFEST might be generated incorrectly by each developer.
</div>
I don&#39;t know that I have ever felt that the MANIFEST was generated
incorrectly. There have been times when something I did rendered it
incorrect, but a reset &#40;spelled &#34;./Build realclean&#34;&#41; generally seems to
fix things up.

As for MANIFEST history, it seems to me that if it&#39;s derived, the
history of the MANIFEST is less interesting than the project it&#39;s
derived from -- at least under SVN. Under CVS, it&#39;s a different story,
because commits are per-file. Under SVN, if the history says I added or
deleted a file, it will say that whether or not MANIFEST is tracked.

Development requires Module::Build. I find that its documentation seems
to be written for everyone but me, but withal it seems to be pretty
protean. I can think of at least two alternatives to hard-coding the
MANIFEST:

* Override the default target &#40;whatever that is&#41; to make it depend on
the &#39;makemanifest&#39; target &#40;whatever it&#39;s called&#41;;

* Generate the MANIFEST using code in Build.PL.

As for Dist::Zilla, I don&#39;t use it either. Every time I look at it, I
come away with the impression of a Procrustean,
all-your-distribution-are-belong-to-us behemoth that can&#39;t wait to
scribble all over my source. But I know that Jeff is looking into it,
and if he works out the details and gets it going to his satisfaction, I
will at least try letting it scribble all over his files.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1042522" href="/Public/Bug/Display.html?id=43908#txn-1042522">#</a>      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;26&nbsp;01:16:22&nbsp;2012</span>
    <span class="description">jeff [...] imaginative-software.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43908] Add MANIFEST to the repository</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 25 Feb 2012 22:16:10 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeffrey Thalhammer &lt;jeff [...] imaginative-software.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1042522/544512/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/544512">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 526b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Feb 25, 2012, at 9:17 AM, Michael G Schwern via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; While I&#39;m happy about the conclusion, I&#39;m not so happy about the &#34;do whatever
&gt; the current developer wants&#34; rationale.
</div>
I should have said that differently.

The custom handling of the MANIFEST file contradicts the workflow implied by M::B and EU::MM.  Our customization is not without merit, nor are M::B and EU::MM the final word on development workflows.  But on the principle of least astonishment, I declare the MANIFEST shall be in the repository.

-Jeff
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1042522/544513/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/544513">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.3k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1042548" href="/Public/Bug/Display.html?id=43908#txn-1042548">#</a>      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;26&nbsp;02:51:26&nbsp;2012</span>
    <span class="description">thaljef [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1042548/544533/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/544533">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 161b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">All dists now stash a their MANIFEST in the repos.  This issue is now
resolved.

-- 
Jeffrey Thalhammer
Imaginative Software Systems
www.imaginative-software.com
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1042551" href="/Public/Bug/Display.html?id=43908#txn-1042551">#</a>      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;26&nbsp;02:51:27&nbsp;2012</span>
    <span class="description">thaljef [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1042960" href="/Public/Bug/Display.html?id=43908#txn-1042960">#</a>      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;26&nbsp;18:48:14&nbsp;2012</span>
    <span class="description">dolmen [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1042960/544785/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/544785">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 312b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le 2012-02-26 08:51:26, THALJEF a Ã©critÂ :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; All dists now stash a their MANIFEST in the repos.  This issue is now
&gt; resolved.
</div>
The committed MANIFEST is incomplete. It lacks generated files:
- META.yml
- META.json
- README
- lib/Perl/Critic/PolicySummary.pod

-- 
Olivier MenguÃ© - <span class="clickylink"><a target="new" rel="nofollow" href="http://perlresume.org/DOLMEN">http://perlresume.org/DOLMEN</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1042963" href="/Public/Bug/Display.html?id=43908#txn-1042963">#</a>      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;26&nbsp;18:48:15&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1043052" href="/Public/Bug/Display.html?id=43908#txn-1043052">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;27&nbsp;00:53:51&nbsp;2012</span>
    <span class="description">jeff [...] imaginative-software.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43908] Add MANIFEST to the repository</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 26 Feb 2012 21:53:25 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeffrey Thalhammer &lt;jeff [...] imaginative-software.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1043052/544838/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/544838">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Feb 26, 2012, at 3:48 PM, Olivier MenguÃ© via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The committed MANIFEST is incomplete. It lacks generated files:
</div>
Ugh.  This is probably why we generated the MANIFEST in the first place :-/

So I&#39;ve got to put all these files in the repo too, I guess.  Now I&#39;m starting to feel like the EU::MM and M::B workflow really is just broken.

With M::B anyway, it seems to view authors and users as the same.  But when an author makes a build, he/she may want certain files generated, and then removed upon cleanup.  But for the user, those files should already be present &#40;e.g. MANIFEST&#41; and not removed on cleanup.  Trouble is, the targets all do the same thing, no matter who you are.

I think Elliot was trying to address all this, but the limitations of M::B may have gotten in the way.

This is one reason I like Dist::Zilla.  It establishes a distinct authoring phase *before* building where you can automate stuff, and you don&#39;t have to expose your users to how all that happened.  Maybe I&#39;ll just bite the bullet and move the project to D::Z now, rather than trying to rig up M::B in a way that makes everyone happy.

-Jeff
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1043052/544839/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/544839">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1043147" href="/Public/Bug/Display.html?id=43908#txn-1043147">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;27&nbsp;04:49:33&nbsp;2012</span>
    <span class="description">dolmen [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> schwern [...] pobox.com, perl [...] galumph.com, jeff [...] imaginative-software.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1043147/544893/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/544893">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le 2012-02-27 06:53:51, jeff@imaginative-software.com a Ã©critÂ :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; On Feb 26, 2012, at 3:48 PM, Olivier MenguÃ© via RT wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; The committed MANIFEST is incomplete. It lacks generated files:
</div>&gt; 
&gt; Ugh.  This is probably why we generated the MANIFEST in the first
&gt;    place :-/
&gt; 
&gt; So I&#39;ve got to put all these files in the repo too, I guess.  Now I&#39;m
&gt;    starting to feel like the EU::MM and M::B workflow really is just
&gt;    broken.
&gt; 
&gt; With M::B anyway, it seems to view authors and users as the same.
</div>
That&#39;s a great feature for open source projects.

Unfortunately SubVersion does not treat authors &#40;commiters&#41; and users
&#40;patch writers&#41; contrary to Git &#40;where non-committers can easily write a
patch as multiple committed step and submit that&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; But
&gt;    when an author makes a build, he/she may want certain files
&gt;    generated, and then removed upon cleanup.  But for the user, those
&gt;    files should already be present &#40;e.g. MANIFEST&#41; and not removed on
&gt;    cleanup.  Trouble is, the targets all do the same thing, no matter
&gt;    who you are.
</div>
The M::B solution would be to override the &#39;test&#39; action to run
&#39;manifest&#39; when missing and override &#39;manifest&#39; to require &#39;policysummary&#39;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This is one reason I like Dist::Zilla.  It establishes a distinct
&gt;    authoring phase *before* building where you can automate stuff, and
&gt;    you don&#39;t have to expose your users to how all that happened.
&gt;    Maybe I&#39;ll just bite the bullet and move the project to D::Z now,
&gt;    rather than trying to rig up M::B in a way that makes everyone
&gt;    happy.
</div>
The tricky part with D::Z is this: embedding in the distribution itself
some D::Z plugins that are part of the build process &#40;generation of the
PolicySummary&#41;. The trick is to use &#39;=&#39; as a prefix to load plugins
using absolute names. For example, use [=inc::PolicySummary] in dist.ini
to load inc/PolicySummary.pm.

Also, one problem that D::Z will create is that it is really slow. And
re-generating &#34;PolicySummary.pod&#34; and MANIFEST for every &#34;dzil test&#34;
will make that much worse.

-- 
Olivier MenguÃ© - <span class="clickylink"><a target="new" rel="nofollow" href="http://perlresume.org/DOLMEN">http://perlresume.org/DOLMEN</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1043392" href="/Public/Bug/Display.html?id=43908#txn-1043392">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;27&nbsp;14:21:28&nbsp;2012</span>
    <span class="description">jeff [...] imaginative-software.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43908] Add MANIFEST to the repository</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 27 Feb 2012 11:21:17 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeffrey Thalhammer &lt;jeff [...] imaginative-software.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1043392/545060/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/545060">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Feb 27, 2012, at 1:49 AM, Olivier MenguÃ© via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The M::B solution would be to override the &#39;test&#39; action to run
&gt; &#39;manifest&#39; when missing and override &#39;manifest&#39; to require &#39;policysummary&#39;.
</div>
I&#39;ve been thinking about this all morning.  I think it all boils down to whether you feel you should be able to do the default build cycle directly on the code as it comes from the repository &#40;e.g. &#34;perl Build.PL; ./Build test&#34;&#41;.

For simple projects you can get away with using the default build cycle, but it is only by accident.  More complex projects &#40;like Perl::Critic&#41; need certain things to happen before you can actually make a build.  As I see it, this is what the &#34;dist&#34; action is for.

The &#34;dist&#34; action is where you generate all the bits that have to be present for packaging.  In other words, this is when you make something that can be built.  So this is when the MANIFEST, META, PolicySummary, etc. should be created.  By the time you &#40;or a user&#41; runs the &#34;test&#34; action, those files must already be present.

The key implication here is that authors can&#39;t really expect to use the &#34;test&#34; and &#34;clean&#34; actions on the code in the repository.  Rather, you need to use &#34;disttest&#34; and &#34;distclean&#34; if you really want to run the build cycle properly.

The more I think about it, the more convinced I am that this is exactly how the M::B workflow is supposed to go.  It&#39;s just that I &#40;and perhaps others&#41; have fallen into the habit of using the &#34;test&#34; and &#34;clean&#34; actions because it saves a bit of time.  But that time is a necessary step in the package/build/test cycle for Perl::Critic.

For those of you who are more seasoned developers, this all may be obvious to you.  But I am just now coming to this realization.  Ironically, I think this leads me back to *not* stashing the MANIFEST in the repository.

-Jeff
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1043392/545061/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/545061">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.7k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1043558" href="/Public/Bug/Display.html?id=43908#txn-1043558">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;27&nbsp;22:46:32&nbsp;2012</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1043558/545141/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/545141">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 855b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Feb 27 14:21:28 2012, jeff@imaginative-software.com wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; For those of you who are more seasoned developers, this all may be
&gt;    obvious to you.  But I am just now coming to this realization.
&gt;    Ironically, I think this leads me back to *not* stashing the
&gt;    MANIFEST in the repository.
</div>
Go for it. Or revert for it. Either way is good with me.

However it was originally decided not to have the MANIFEST in the
repository, the current situation seems to be that putting it there is
not as simple as it originally appeared.

FWIW, I always use &#39;realclean&#39;, but mostly because when I&#39;m cleaning at
all I&#39;m starting from scratch. I do &#39;test&#39;, except that I always
&#39;disttest&#39; as part of actually making a distribution.

I suspect the recent spate of releases of Net::SSLeay to be an example
of what happens when you _don&#39;t_ &#39;disttest&#39;.

Tom
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1043598" href="/Public/Bug/Display.html?id=43908#txn-1043598">#</a>      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;28&nbsp;01:29:24&nbsp;2012</span>
    <span class="description">jeff [...] imaginative-software.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43908] Add MANIFEST to the repository</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 27 Feb 2012 22:28:36 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeffrey Thalhammer &lt;jeff [...] imaginative-software.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1043598/545160/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/545160">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Feb 27, 2012, at 1:49 AM, Olivier MenguÃ© via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The tricky part with D::Z is this: embedding in the distribution itself
&gt; some D::Z plugins that are part of the build process &#40;generation of the
&gt; PolicySummary&#41;. The trick is to use &#39;=&#39; as a prefix to load plugins
&gt; using absolute names. For example, use [=inc::PolicySummary] in dist.ini
&gt; to load inc/PolicySummary.pm.
</div>
I haven&#39;t adopted the habit of putting D::Z plugins in my distribution.  And I doubt I ever will.

This whole discussion about the MANIFEST leads me to think that the development model for M::B and EU::MM is somewhat out of date.  Both of them treat the distribution as something that can be re-packaged and re-released.  In the past that was usually true, and it helped the open source community build itself.

But these days, modern development uses a lot of tools to generate code.  So the code that is in the distribution could be a long way from what was actually authored.  Unless I ship the distribution with all the authoring tools that I used, then users can&#39;t re-package the code without getting those same tools for themselves.

I don&#39;t think this is evil -- it&#39;s just progress.  The development process is more sophisticated and the tool chain is longer than it used to be.  But I don&#39;t think I&#39;d want to ship my dist with D::Z plugins for the same reasons that I don&#39;t ship it with make or vim.

These days, patching is done against the VCS, not the distribution[1].   So I feel that aspiring to make your distribution re-packagable to end users is a noble goal, but it is increasingly impractical.  In that light, I don&#39;t feel so guilty about contorting the default M::B and EU::MM workflow to suit our needs.  As long as it builds &#34;the right way&#34; for end users, then all is well.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Also, one problem that D::Z will create is that it is really slow. And
&gt; re-generating &#34;PolicySummary.pod&#34; and MANIFEST for every &#34;dzil test&#34;
&gt; will make that much worse.
</div>
The performance is unfortunate, but not so bad that I want to abandon good engineering principles.  So after much though, I&#39;ve concluded that I do not agree with Schwern about these so-called &#34;static generated files&#34;.  I generally do believe the in &#34;version control dogma&#34; that you should never commit something that you can generate.  I think the real debate here is more about *who* should be generating these files and *when* they should be doing it.

My career as a software engineer is relatively short, and my career in open source is even shorter.  So I welcome enlightenment from those of you with more experience and insight.  But at this moment, all the above best describes my point of view.

[1] This is one reason I found the RequireVcsKeywords policy helpful -- so that end users know where to get the actual &#40;human-authored&#41; source code if they want to make a patch.  But that is another story.

Thanks for letting me bend your ear.

-Jeff
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1043598/545161/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/545161">with headers</a>
<br />
<span class="downloadcontenttype">text/html 4.4k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1043633" href="/Public/Bug/Display.html?id=43908#txn-1043633">#</a>      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;28&nbsp;05:23:22&nbsp;2012</span>
    <span class="description">dolmen [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> jeff [...] imaginative-software.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1043633/545182/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/545182">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le 2012-02-28 07:29:24, jeff@imaginative-software.com a Ã©critÂ :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I haven&#39;t adopted the habit of putting D::Z plugins in my
&gt;    distribution.  And I doubt I ever will.
</div>
This doesn&#39;t have to be a habit.
But it is the right and only way to make distribution content generation
as part of a D::Z build process. Bundling custom D::Z plugins in inc/ is
the D::Z counterpart of M::B subclassing.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This whole discussion about the MANIFEST leads me to think that the
&gt;    development model for M::B and EU::MM is somewhat out of date.
&gt;    Both of them treat the distribution as something that can be re-
&gt;    packaged and re-released.  In the past that was usually true, and
&gt;    it helped the open source community build itself.
&gt; 
&gt; But these days, modern development uses a lot of tools to generate
&gt;    code.  So the code that is in the distribution could be a long way
&gt;    from what was actually authored.  Unless I ship the distribution
&gt;    with all the authoring tools that I used, then users can&#39;t re-
&gt;    package the code without getting those same tools for themselves.
</div>
The CPAN archive is the only thing I trust because I know it will be
kept forever. But I usually do not trust an author source code
repository due to its relative lifetime. Just see how hundreds of Marcel
GrÃ¼nauer repositories disappeared one day from GitHub because he decided
to quit. Or see how an author may change of VCS because he prefers it
&#40;at one point Dave Rolsky used Mercurial which almost nobody else is
using in the Perl community&#41;.

So I think that any CPAN distribution should be rebuildable from its own
content plus the BackPAN.

This is why I was describing how to do that with D::Z in a way that
still makes the distribution usable and rebuildable without direct
access to the source code repository.
The current M::B-based process is fine too. I have no problem with it
&#40;except that extending M::B for authoring purpose makes the maintenance
of M::B harder&#41;. I&#39;m using that myself for my Number::Phone::FR
distribution &#40;which also has code generation&#41; until the day I will take
time to migrate it to D::Z.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I don&#39;t think this is evil -- it&#39;s just progress.  The development
&gt;    process is more sophisticated and the tool chain is longer than it
&gt;    used to be.  But I don&#39;t think I&#39;d want to ship my dist with D::Z
&gt;    plugins for the same reasons that I don&#39;t ship it with make or vim.
</div>
The current trend is to separate the build tools from the install tool.
Our install tools are now big beasts because they are also authoring tools.
I have good hope for Module::Build::Tiny. I plan to work on that at the
QA Hackathon.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; These days, patching is done against the VCS, not the distribution[1].
&gt;    So I feel that aspiring to make your distribution re-packagable to
&gt;    end users is a noble goal, but it is increasingly impractical.  In
&gt;    that light, I don&#39;t feel so guilty about contorting the default
&gt;    M::B and EU::MM workflow to suit our needs.  As long as it builds
&gt;    &#34;the right way&#34; for end users, then all is well.
</div>
You seem to separate the world in two categories:
- committers
- &#34;end users&#34;: users of the CPAN distribution

I think that you omit one important category: the occasionnal patch
submitter like myself. &#40;S&#41;He&#39;s not a committer on the project. &#40;S&#41;He may
not be familiar with the VCS you are using.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So after much though, I&#39;ve concluded
&gt;    that I do not agree with Schwern about these so-called &#34;static
&gt;    generated files&#34;.  I generally do believe the in &#34;version control
&gt;    dogma&#34; that you should never commit something that you can
&gt;    generate.
</div>
I&#39;m also of this point of view.
And especially because the generated file depends on the version of the
tool that generates it. For example, META.json is not created by M::B if
you have no JSON module, and so will not be in MANIFEST in that
environment. Think also to differences of default end-of-line
&#40;PolicySummaryGenerator use platform EOL instead of using a fixed Unix
style, so the build toolchain is not portable on Win32&#41;.
So generated files in a VCS are painful when different developers have
different tool versions that you can&#39;t control.
Of course committing those files can also help to be aware of those
differences, but often with pain.

-- 
Olivier MenguÃ© - <span class="clickylink"><a target="new" rel="nofollow" href="http://perlresume.org/DOLMEN">http://perlresume.org/DOLMEN</a></span>
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 1.232611</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
