<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #91947 for DBIx-Class: Tests failling with latest Moose</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #91947 for DBIx-Class: Tests failling with latest Moose</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=DBIx-Class">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=DBIx-Class">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=DBIx-Class">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=DBIx-Class">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBIx-Class">DBIx-Class CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">91947</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=DBIx-Class">DBIx-Class</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
frankschwach [...] yahoo.de

<br />
mjd [...] plover.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-10410-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.08250    </td>
  </tr>
  <tr id="CF-10411-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.08260    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




use_early.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1309696/694067/use_early.patch">
Wed Jan 08 08:54:37 2014 (723b) by zefram [...] fysh.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=91947">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1309656" href="/Public/Bug/Display.html?id=91947#txn-1309656">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;08&nbsp;07:35:43&nbsp;2014</span>
    <span class="description">frankschwach [...] yahoo.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Tests failling with latest Moose</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1309656/694043/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/694043">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 874b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">My system:
Linux precise-dev64 3.2.0-57-virtual

My Perl:
v5.10.1 &#40;*&#41; built for x86_64-linux

Trying to install DBIx::Class 0.08250 fails in
t/storage/replicated.t
at line 140 &#40;after test4&#41;

with

The method &#39;connect_info&#39; was not found in the inheritance hierarchy for DBIx::Class::Storage::DBI::Replicated

The problematic code block is this &#34;around&#34; modifier:in t/storage/replicated.t
 around connect_info =&gt; sub {
      my &#40;$next, $self, $info&#41; = @_;
      $info-&gt;[3]{master_option} = 1;
      $self-&gt;$next&#40;$info&#41;;
    };

It fails with Moose 2.1200 but DBIx::Class installs without problems with Moose 5.1005 on the same machine.

The &#34;connect_info&#34; method is added to DBIx::Class::Storage::DBI::Replicated using 

 __PACKAGE__-&gt;meta-&gt;add_method

It seems that this is not working or acting too late for the above &#34;around&#34; modification in the latest Moose version&#40;?&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1309696" href="/Public/Bug/Display.html?id=91947#txn-1309696">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;08&nbsp;08:54:37&nbsp;2014</span>
    <span class="description">zefram [...] fysh.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #91947] Tests failling with latest Moose</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 8 Jan 2014 13:54:26 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1309696/694066/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/694066">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 187b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The test is faulty: it doesn&#39;t load classes early enough, specifically
DBIx::Class::Storage::DBI::Replicated which it tries to augment before
it&#39;s loaded.  Attached patch fixes.

-zefram
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1309696/694067/use_early.patch">Download use_early.patch</a><br />
<span class="downloadcontenttype">text/x-diff 723b</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1309697" href="/Public/Bug/Display.html?id=91947#txn-1309697">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;08&nbsp;08:54:40&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1309768" href="/Public/Bug/Display.html?id=91947#txn-1309768">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;08&nbsp;18:09:44&nbsp;2014</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #91947] Tests failling with latest Moose</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 8 Jan 2014 23:09:33 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Frank Schwach via RT &lt;bug-DBIx-Class [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Peter Rabbitson &lt;ribasushi [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1309768/694115/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/694115">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 516b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Jan 08, 2014 at 07:35:46AM -0500, Frank Schwach via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Wed Jan 08 07:35:43 2014: Request 91947 was acted upon.
&gt; Transaction: Ticket created by fschwach
&gt;        Queue: DBIx-Class
&gt;      Subject: Tests failling with latest Moose
&gt;    Broken in: 0.08250
&gt;     Severity: Important
&gt;        Owner: Nobody
&gt;   Requestors: frankschwach@yahoo.de
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=91947">https://rt.cpan.org/Ticket/Display.html?id=91947</a></span> &gt;
&gt; 
&gt; 
</div>
This is fixed in 0.08250_03, will show up on CPAN this weekend.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1309836" href="/Public/Bug/Display.html?id=91947#txn-1309836">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;09&nbsp;04:35:09&nbsp;2014</span>
    <span class="description">frankschwach [...] yahoo.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #91947] Tests failling with latest Moose</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 09 Jan 2014 09:34:59 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBIx-Class [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Frank Schwach &lt;frankschwach [...] yahoo.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1309836/694162/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/694162">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 666b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks a lot!

On 08/01/14 23:09, Peter Rabbitson via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=91947">https://rt.cpan.org/Ticket/Display.html?id=91947</a></span> &gt;
&gt;
&gt; On Wed, Jan 08, 2014 at 07:35:46AM -0500, Frank Schwach via RT wrote:
<div class="message-stanza open">&gt;&gt; Wed Jan 08 07:35:43 2014: Request 91947 was acted upon.
&gt;&gt; Transaction: Ticket created by fschwach
&gt;&gt;         Queue: DBIx-Class
&gt;&gt;       Subject: Tests failling with latest Moose
&gt;&gt;     Broken in: 0.08250
&gt;&gt;      Severity: Important
&gt;&gt;         Owner: Nobody
&gt;&gt;    Requestors: frankschwach@yahoo.de
&gt;&gt;        Status: new
&gt;&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=91947">https://rt.cpan.org/Ticket/Display.html?id=91947</a></span> &gt;
&gt;&gt;
&gt;&gt;
</div>&gt; This is fixed in 0.08250_03, will show up on CPAN this weekend.
&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1311248" href="/Public/Bug/Display.html?id=91947#txn-1311248">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;12&nbsp;14:46:00&nbsp;2014</span>
    <span class="description">ribasushi [...] leporine.io -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1311737" href="/Public/Bug/Display.html?id=91947#txn-1311737">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;13&nbsp;11:41:54&nbsp;2014</span>
    <span class="description">mjd [...] plover.com - Ticket #92112:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> DBIx-Class-0.08250 t/storage/replicated.t failed with perl 5.18.2</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 09 Jan 2014 18:17:07 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> mst [...] shadowcatsystems.co.uk</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Jason Dominus &lt;mjd [...] plover.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1311737/695171/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/695171">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 6.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
The README file for DBIx-Class-0.08250 claims that bug reports are
always welcome, but doesn&#39;t give any usable submission address for bug
reports. It suggests sending &#34;plain bug reports either via RT or the
Mailing list&#34; but it doesn&#39;t include the RT URL, the RT email address,
or the mailing list address.  

It does include the URL for a web page describing the mailing list,
and that page advertises &#34;To post a message to all the list members,
send email to dbix-class@lists.scsys.co.uk.&#34;  But non-subscribers
can&#39;t actually do that; the submission bounces.

----------------------------------------------------------------

perl -Ilib t/storage/replicated.t produces:

# Using Moose version 2.1200 and MooseX::Types version 0.41
ok 1 - use DBIx::Class::Storage::DBI::Replicated::Pool;
ok 2 - use DBIx::Class::Storage::DBI::Replicated::Balancer;
ok 3 - use DBIx::Class::Storage::DBI::Replicated::Replicant;
ok 4 - use DBIx::Class::Storage::DBI::Replicated;
The method &#39;connect_info&#39; was not found in the inheritance hierarchy for DBIx::Class::Storage::DBI::Replicated at /vol/home/mjd/.plenv/versions/5.18.2/lib/perl5/site_perl/5.18.2/x86_64-linux/Moose/Exception.pm line 38
        Moose::Exception::_build_trace&#40;&#39;Moose::Exception::MethodNameNotFoundInInheritanceHierarchy=HASH&#40;0x3c97f08&#41;&#39;&#41; called at reader Moose::Exception::trace &#40;defined at /vol/home/mjd/.plenv/versions/5.18.2/lib/perl5/site_perl/5.18.2/x86_64-linux/Moose/Exception.pm line 12&#41; line 7
        Moose::Exception::trace&#40;&#39;Moose::Exception::MethodNameNotFoundInInheritanceHierarchy=HASH&#40;0x3c97f08&#41;&#39;&#41; called at /vol/home/mjd/.plenv/versions/5.18.2/lib/perl5/site_perl/5.18.2/x86_64-linux/Moose/Exception.pm line 50
        Moose::Exception::BUILD&#40;&#39;Moose::Exception::MethodNameNotFoundInInheritanceHierarchy=HASH&#40;0x3c97f08&#41;&#39;, &#39;HASH&#40;0x3c92928&#41;&#39;&#41; called at /vol/home/mjd/.plenv/versions/5.18.2/lib/perl5/site_perl/5.18.2/x86_64-linux/Class/MOP/Method.pm line 131
        Class::MOP::Method::execute&#40;&#39;Moose::Meta::Method=HASH&#40;0x4034168&#41;&#39;, &#39;Moose::Exception::MethodNameNotFoundInInheritanceHierarchy=HASH&#40;0x3c97f08&#41;&#39;, &#39;HASH&#40;0x3c92928&#41;&#39;&#41; called at /vol/home/mjd/.plenv/versions/5.18.2/lib/perl5/site_perl/5.18.2/x86_64-linux/Moose/Object.pm line 59
        Moose::Object::BUILDALL&#40;&#39;Moose::Exception::MethodNameNotFoundInInheritanceHierarchy=HASH&#40;0x3c97f08&#41;&#39;, &#39;HASH&#40;0x3c92928&#41;&#39;&#41; called at /vol/home/mjd/.plenv/versions/5.18.2/lib/perl5/site_perl/5.18.2/x86_64-linux/Moose/Meta/Class.pm line 285
        Moose::Meta::Class::new_object&#40;&#39;Moose::Meta::Class=HASH&#40;0x3fd2888&#41;&#39;, &#39;HASH&#40;0x3c92928&#41;&#39;&#41; called at /vol/home/mjd/.plenv/versions/5.18.2/lib/perl5/site_perl/5.18.2/x86_64-linux/Moose/Object.pm line 30
        Moose::Object::new&#40;&#39;Moose::Exception::MethodNameNotFoundInInheritanceHierarchy&#39;, &#39;class&#39;, &#39;Moose::Meta::Class=HASH&#40;0x3b93180&#41;&#39;, &#39;method_name&#39;, &#39;connect_info&#39;&#41; called at /vol/home/mjd/.plenv/versions/5.18.2/lib/perl5/site_perl/5.18.2/x86_64-linux/Moose/Util.pm line 54
        Moose::Util::throw_exception&#40;&#39;MethodNameNotFoundInInheritanceHierarchy&#39;, &#39;class&#39;, &#39;Moose::Meta::Class=HASH&#40;0x3b93180&#41;&#39;, &#39;method_name&#39;, &#39;connect_info&#39;&#41; called at /vol/home/mjd/.plenv/versions/5.18.2/lib/perl5/site_perl/5.18.2/x86_64-linux/Class/MOP/Class.pm line 1065
        Class::MOP::Class::__ANON__&#40;&#39;Moose::Meta::Class=HASH&#40;0x3b93180&#41;&#39;, &#39;connect_info&#39;&#41; called at /vol/home/mjd/.plenv/versions/5.18.2/lib/perl5/site_perl/5.18.2/x86_64-linux/Class/MOP/Class.pm line 1112
        Class::MOP::Class::add_around_method_modifier&#40;&#39;Moose::Meta::Class=HASH&#40;0x3b93180&#41;&#39;, &#39;connect_info&#39;, &#39;CODE&#40;0x3b565e8&#41;&#39;&#41; called at /vol/home/mjd/.plenv/versions/5.18.2/lib/perl5/site_perl/5.18.2/x86_64-linux/Moose/Util.pm line 282
        Moose::Util::add_method_modifier&#40;&#39;Moose::Meta::Class=HASH&#40;0x3b93180&#41;&#39;, &#39;around&#39;, &#39;ARRAY&#40;0x3df4288&#41;&#39;&#41; called at /vol/home/mjd/.plenv/versions/5.18.2/lib/perl5/site_perl/5.18.2/x86_64-linux/Moose.pm line 92
        Moose::around&#40;undef, &#39;connect_info&#39;&#41; called at /vol/home/mjd/.plenv/versions/5.18.2/lib/perl5/site_perl/5.18.2/x86_64-linux/Moose/Exporter.pm line 408
        Moose::around&#40;&#39;connect_info&#39;, &#39;CODE&#40;0x3b565e8&#41;&#39;&#41; called at t/storage/replicated.t line 140
# Auto checked 0 references for leaks - none detected
# Tests were run but no plan was declared and done_testing&#40;&#41; was not seen.
# Looks like your test exited with 255 just after 4.

----------------------------------------------------------------

perl -V produces:

Summary of my perl5 &#40;revision 5 version 18 subversion 2&#41; configuration:
   
  Platform:
    osname=linux, osvers=2.6.32-359-ec2, archname=x86_64-linux
    uname=&#39;linux reporting 2.6.32-359-ec2 #72-ubuntu smp wed nov 13 12:04:06 utc 2013 x86_64 gnulinux &#39;
    config_args=&#39;-Dprefix=/vol/home/mjd/.plenv/versions/5.18.2 -de -Dusedevel -A&#39;eval:scriptdir=/vol/home/mjd/.plenv/versions/5.18.2/bin&#39;&#39;
    hint=recommended, useposix=true, d_sigaction=define
    useithreads=undef, usemultiplicity=undef
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=define, use64bitall=define, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;cc&#39;, ccflags =&#39;-fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64&#39;,
    optimize=&#39;-O2&#39;,
    cppflags=&#39;-fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include&#39;
    ccversion=&#39;&#39;, gccversion=&#39;4.4.3&#39;, gccosandvers=&#39;&#39;
    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
    ivtype=&#39;long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;, lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;cc&#39;, ldflags =&#39; -fstack-protector -L/usr/local/lib&#39;
    libpth=/usr/local/lib /lib/../lib /usr/lib/../lib /lib /usr/lib /lib64 /usr/lib64
    libs=-lnsl -ldb -ldl -lm -lcrypt -lutil -lc
    perllibs=-lnsl -ldl -lm -lcrypt -lutil -lc
    libc=/lib/libc-2.11.1.so, so=so, useshrplib=false, libperl=libperl.a
    gnulibc_version=&#39;2.11.1&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags=&#39;-Wl,-E&#39;
    cccdlflags=&#39;-fPIC&#39;, lddlflags=&#39;-shared -O2 -L/usr/local/lib -fstack-protector&#39;


Characteristics of this binary &#40;from libperl&#41;: 
  Compile-time options: HAS_TIMES PERLIO_LAYERS PERL_DONT_CREATE_GVSV
                        PERL_HASH_FUNC_ONE_AT_A_TIME_HARD PERL_MALLOC_WRAP
                        PERL_PRESERVE_IVUV PERL_SAWAMPERSAND PERL_USE_DEVEL
                        USE_64_BIT_ALL USE_64_BIT_INT USE_LARGE_FILES
                        USE_LOCALE USE_LOCALE_COLLATE USE_LOCALE_CTYPE
                        USE_LOCALE_NUMERIC USE_PERLIO USE_PERL_ATOF
  Built under linux
  Compiled at Jan  9 2014 08:09:43
  @INC:
    /vol/home/mjd/.plenv/versions/5.18.2/lib/perl5/site_perl/5.18.2/x86_64-linux
    /vol/home/mjd/.plenv/versions/5.18.2/lib/perl5/site_perl/5.18.2
    /vol/home/mjd/.plenv/versions/5.18.2/lib/perl5/5.18.2/x86_64-linux
    /vol/home/mjd/.plenv/versions/5.18.2/lib/perl5/5.18.2
    .

----------------------------------------------------------------

Moose is 2.1200 in case that matters.  Let me know if you want me to
run any other tests or report any other information.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1311752" href="/Public/Bug/Display.html?id=91947#txn-1311752">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;13&nbsp;12:26:47&nbsp;2014</span>
    <span class="description">ribasushi [...] leporine.io - Ticket #92112:  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1311752/695180/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/695180">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 14b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dupe. Merging.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1311753" href="/Public/Bug/Display.html?id=91947#txn-1311753">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;13&nbsp;12:26:49&nbsp;2014</span>
    <span class="description">The RT System itself - Ticket #92112:  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1311756" href="/Public/Bug/Display.html?id=91947#txn-1311756">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;13&nbsp;12:26:50&nbsp;2014</span>
    <span class="description">ribasushi [...] leporine.io - Ticket #92112:  Merged into ticket #91947</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1311757" href="/Public/Bug/Display.html?id=91947#txn-1311757">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;13&nbsp;12:26:50&nbsp;2014</span>
    <span class="description">ribasushi [...] leporine.io -  Merged into ticket #91947</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1311758" href="/Public/Bug/Display.html?id=91947#txn-1311758">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;13&nbsp;12:29:00&nbsp;2014</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1311758/695183/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/695183">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 817b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Update as per ML [1]:

This is a known issue <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=91947">https://rt.cpan.org/Ticket/Display.html?id=91947</a></span> 
and dev release 0.08250_03 [2] already addresses it. A new version will 
be sent to CPAN pending either the extra pending fixes, or backing out a 
number of changes which are not ready for official release.

A more robust dev-model, with multiple stable branches is being worked 
on in order to not land us in this situation again. The extra delays are 
due to severe lack of careful developers to share the load of maintaining 
this complex beast without lapses in quality.

Sorry for the inconvenience. In the meantime it is safe to force this test.

Cheers

[1] <span class="clickylink"><a target="new" rel="nofollow" href="http://lists.scsys.co.uk/pipermail/dbix-class/2014-January/011581.html">http://lists.scsys.co.uk/pipermail/dbix-class/2014-January/011581.html</a></span>
[2] <span class="clickylink"><a target="new" rel="nofollow" href="http://cpan.metacpan.org/authors/id/R/RI/RIBASUSHI/DBIx-Class-0.08250_03.tar.gz">http://cpan.metacpan.org/authors/id/R/RI/RIBASUSHI/DBIx-Class-0.08250_03.tar.gz</a></span> 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1319389" href="/Public/Bug/Display.html?id=91947#txn-1319389">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;29&nbsp;09:39:30&nbsp;2014</span>
    <span class="description">ribasushi [...] leporine.io -  Fixed in 0.08260 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1319390" href="/Public/Bug/Display.html?id=91947#txn-1319390">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;29&nbsp;09:39:30&nbsp;2014</span>
    <span class="description">ribasushi [...] leporine.io -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.592344</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
