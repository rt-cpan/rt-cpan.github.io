<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #53292 for Net-Pcap: Net::Pcap 0.16 doesn&#39;t build on Win32 with libpcap 1.0</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #53292 for Net-Pcap: Net::Pcap 0.16 doesn&#39;t build on Win32 with libpcap 1.0</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Net-Pcap">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Net-Pcap">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Net-Pcap">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Net-Pcap">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-Pcap">Net-Pcap CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">53292</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">patched</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">3 hours (180 min)

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Net-Pcap">Net-Pcap</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
corion [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-22994-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.16    </td>
  </tr>
  <tr id="CF-22995-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




0001-Add-.gitignore.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/912966/473547/0001-Add-.gitignore.patch">
Tue Mar 22 17:16:50 2011 (965b) by corion [...] cpan.org
</a>
</font></li>
</ul>


0002-Add-a-sanity-self-check-for-have_functions.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/912966/473548/0002-Add-a-sanity-self-check-for-have_functions.patch">
Tue Mar 22 17:16:50 2011 (907b) by corion [...] cpan.org
</a>
</font></li>
</ul>


0003-Make-have_functions-work-on-Win32-as-well.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/912966/473550/0003-Make-have_functions-work-on-Win32-as-well.patch">
Tue Mar 22 17:16:50 2011 (2.1k) by corion [...] cpan.org
</a>
</font></li>
</ul>


0004-Use-the-Windows-name-for-dev-null.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/912966/473549/0004-Use-the-Windows-name-for-dev-null.patch">
Tue Mar 22 17:16:50 2011 (690b) by corion [...] cpan.org
</a>
</font></li>
</ul>


0005-On-Win32-avoid-duplicate-HAVE_REMOVE-compilation-for.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/912966/473551/0005-On-Win32-avoid-duplicate-HAVE_REMOVE-compilation-for.patch">
Tue Mar 22 17:16:50 2011 (777b) by corion [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=53292">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-714307" href="/Public/Bug/Display.html?id=53292#txn-714307">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;02&nbsp;14:41:44&nbsp;2010</span>
    <span class="description">corion [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Net::Pcap 0.16 doesn&#39;t build on Win32 with libpcap 1.0</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/714307/368647/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/368647">with headers</a>
<br />
<span class="downloadcontenttype">text/html 5.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza">Hi,<br>

<br>

I'm trying to build Net::Pcap on Win32 with Strawberry Perl 5.10 and dmake, but it fails for me like the attached session. There only is one pcap.h on my machine, the one that belongs to the (one) installed Pcap library. I've copied the include and lib files into C:\Strawberry\c\include resp. C:\Strawberry\c\lib, where they get picked up.<br>

<br>

I&nbsp;don't know how to proceed here, as this doesn't look like the &quot;usual&quot;&nbsp;Win32 failures. Could it be that Net::Pcap has a problem with current versions of libpcap?<br>

<br>

-max<br>

<br>

C:\strawberry\cpan\build\Net-Pcap-0.16-UsJ4ct&gt;padre Makefile.PL<br>

<br>

C:\strawberry\cpan\build\Net-Pcap-0.16-UsJ4ct&gt;perl Makefile.PL INC=-IC:/Strawberry/C/inc &quot;LIBS=-LC:/Strawberry/C/lib -lwpcap&quot;<br>

socket.h patched... ok<br>

looking for -lwpcap... yes<br>

checking for pcap_lib_version() in -lwpcap... yes<br>

detecting available functions... ok<br>

Writing Makefile for Net::Pcap<br>

<br>

C:\strawberry\cpan\build\Net-Pcap-0.16-UsJ4ct&gt;dmake<br>

gcc -c&nbsp; -IC:/Strawberry/C/inc&nbsp;&nbsp; -s -O2 -DWIN32 -DHAVE_DES_FCRYPT -DPERL_IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS -fno-strict-aliasing -D<br>

PERL_MSVCRT_READFIX -s -O2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -DVERSION=\&quot;0.16\&quot;&nbsp;&nbsp;&nbsp; -DXS_VERSION=\&quot;0.16\&quot;&nbsp; &quot;-IC:\strawberry\perl\lib\CORE&quot;&nbsp; -DWINSOCK2_H_REQUEST<br>

ED -DWPCAP -DHAVE_REMOTE -DHAVE_BLANK -DHAVE_PCAP_LIB_VERSION Pcap.c<br>

In file included from Pcap.xs:43:<br>

stubs.inc:85:2: warning: #warning &quot;the function pcap_findalldevs() is not available, but will be emulated&quot;<br>

In file included from Pcap.xs:43:<br>

stubs.inc:91: error: redefinition of `struct pcap_if'<br>

stubs.inc:113:2: warning: #warning &quot;the function pcap_breakloop() is not available&quot;<br>

stubs.inc:127:2: warning: #warning &quot;the function pcap_setnonblock() is not available&quot;<br>

stubs.inc:142:2: warning: #warning &quot;the function pcap_getnonblock() is not available&quot;<br>

stubs.inc:157:2: warning: #warning &quot;the function pcap_dump_file() is not available&quot;<br>

stubs.inc:172:2: warning: #warning &quot;the function pcap_dump_flush() is not available&quot;<br>

stubs.inc:187:2: warning: #warning &quot;the function pcap_list_datalinks() is not available&quot;<br>

stubs.inc:202:2: warning: #warning &quot;the function pcap_set_datalink() is not available&quot;<br>

stubs.inc:217:2: warning: #warning &quot;the function pcap_datalink_name_to_val() is not available&quot;<br>

stubs.inc:232:2: warning: #warning &quot;the function pcap_datalink_val_to_name() is not available&quot;<br>

stubs.inc:247:2: warning: #warning &quot;the function pcap_datalink_val_to_description() is not available&quot;<br>

stubs.inc:262:2: warning: #warning &quot;the function pcap_compile_nopcap() is not available&quot;<br>

stubs.inc:267: error: conflicting types for 'pcap_compile_nopcap'<br>

c:/strawberry//c/bin/../lib/gcc/mingw32/3.4.5/../../../../include/pcap/pcap.h:319: error: previous declaration of 'pcap_compile_nopc<br>

ap' was here<br>

stubs.inc:267: error: conflicting types for 'pcap_compile_nopcap'<br>

c:/strawberry//c/bin/../lib/gcc/mingw32/3.4.5/../../../../include/pcap/pcap.h:319: error: previous declaration of 'pcap_compile_nopc<br>

ap' was here<br>

stubs.inc:277:2: warning: #warning &quot;the function pcap_get_selectable_fd() is not available&quot;<br>

stubs.inc:292:2: warning: #warning &quot;the function pcap_next_ex() is not available&quot;<br>

stubs.inc:307:2: warning: #warning &quot;the function pcap_sendpacket() is not available&quot;<br>

stubs.inc:322:2: warning: #warning &quot;the function pcap_createsrcstr() is not available&quot;<br>

stubs.inc:337:2: warning: #warning &quot;the function pcap_parsesrcstr() is not available&quot;<br>

stubs.inc:352:2: warning: #warning &quot;the function pcap_open() is not available&quot;<br>

stubs.inc:357: error: redefinition of `struct pcap_rmtauth'<br>

stubs.inc:373:2: warning: #warning &quot;the function pcap_setbuff() is not available&quot;<br>

stubs.inc:388:2: warning: #warning &quot;the function pcap_setuserbuffer() is not available&quot;<br>

stubs.inc:403:2: warning: #warning &quot;the function pcap_setmode() is not available&quot;<br>

stubs.inc:418:2: warning: #warning &quot;the function pcap_setmintocopy() is not available&quot;<br>

stubs.inc:433:2: warning: #warning &quot;the function pcap_sendqueue_alloc() is not available&quot;<br>

stubs.inc:438: error: redefinition of `struct pcap_send_queue'<br>

stubs.inc:455:2: warning: #warning &quot;the function pcap_sendqueue_destroy() is not available&quot;<br>

stubs.inc:469:2: warning: #warning &quot;the function pcap_sendqueue_queue() is not available&quot;<br>

stubs.inc:484:2: warning: #warning &quot;the function pcap_sendqueue_transmit() is not available&quot;<br>

stubs.inc:499:2: warning: #warning &quot;the function pcap_event() is not available&quot;<br>

stubs.inc:514:2: warning: #warning &quot;the function pcap_setsampling() is not available&quot;<br>

stubs.inc:519: error: redefinition of `struct pcap_samp'<br>

Pcap.c: In function `XS_Net__Pcap_strerror':<br>

Pcap.c:1572: warning: assignment discards qualifiers from pointer target type<br>

dmake:&nbsp; Error code 129, while making 'Pcap.o'<br>

<br>

C:\strawberry\cpan\build\Net-Pcap-0.16-UsJ4ct&gt;<br>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-843245" href="/Public/Bug/Display.html?id=53292#txn-843245">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;15&nbsp;04:32:52&nbsp;2010</span>
    <span class="description">Sagarkha [...] hcl.in -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sagarkha [...] hcl.in</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/843245/436628/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/436628">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 163b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am getting the same warning mesaages...see this perl monk node for 
more details. 

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.perlmonks.org/?node_id=863878">http://www.perlmonks.org/?node_id=863878</a></span>. 

Do we have a solution for it?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-843248" href="/Public/Bug/Display.html?id=53292#txn-843248">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;15&nbsp;04:32:52&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-912966" href="/Public/Bug/Display.html?id=53292#txn-912966">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;22&nbsp;17:16:50&nbsp;2011</span>
    <span class="description">corion [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">180 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/912966/473546/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/473546">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 231b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The problem was in the function have_function&#40;&#41;, which did not work on
Win32. The attached patches make Net::Pcap 0.16+ compile and pass most
tests against Winpcap 4.1.2 &#40;libpcap 2.4&#41;.

The meat of the patch is in patch 0003.

-max
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0001-Add-.gitignore.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/912966/473547/0001-Add-.gitignore.patch">Download 0001-Add-.gitignore.patch</a><br />
<span class="downloadcontenttype">text/x-diff 965b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From d940cd604bc37e130a4dbd30a367722c40b73b0b Mon Sep 17 00:00:00 2001
From: Max Maischein &lt;corion@corion.net&gt;
Date: Tue, 22 Mar 2011 21:56:19 +0100
Subject: [PATCH 1/5] Add .gitignore

---
 .gitignore |   19 +++++++++++++++++++
 MANIFEST   |    1 +
 2 files changed, 20 insertions&#40;+&#41;, 0 deletions&#40;-&#41;
 create mode 100644 .gitignore

diff --git a/.gitignore b/.gitignore
new file mode 100644
index 0000000..7cb4276
--- /dev/null
+++ b/.gitignore
@@ -0,0 +1,19 @@
+Makefile
+Makefile.old
+*.tar.gz
+*.bak
+pm_to_blib
+blib/
+Net-Pcap-*
+.releaserc
+cover_db
+Pcap.c
+Pcap.def
+*.o
+const-c.inc
+const-xs.inc
+funcs.txt
+macros.all
+Pcap.bs
+dll.exp
+dll.base
\ No newline at end of file
diff --git a/MANIFEST b/MANIFEST
index c0aaa7a..015cc36 100644
--- a/MANIFEST
+++ b/MANIFEST
@@ -47,3 +47,4 @@ t/portfs.t
 t/README
 t/samples/ping-ietf-20pk-be.dmp
 t/samples/ping-ietf-20pk-le.dmp
+.gitignore
\ No newline at end of file
-- 
1.6.5.1.1367.gcd48

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0002-Add-a-sanity-self-check-for-have_functions.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/912966/473548/0002-Add-a-sanity-self-check-for-have_functions.patch">Download 0002-Add-a-sanity-self-check-for-have_functions.patch</a><br />
<span class="downloadcontenttype">text/x-diff 907b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 0da347aae6e66e95c7dfa847598798c6de1db292 Mon Sep 17 00:00:00 2001
From: Max Maischein &lt;corion@corion.net&gt;
Date: Tue, 22 Mar 2011 21:56:46 +0100
Subject: [PATCH 2/5] Add a sanity self-check for have_functions&#40;&#41;

---
 Makefile.PL |    3 +++
 1 files changed, 3 insertions&#40;+&#41;, 0 deletions&#40;-&#41;

diff --git a/Makefile.PL b/Makefile.PL
index 26ab13e..b966faa 100644
--- a/Makefile.PL
+++ b/Makefile.PL
@@ -104,6 +104,9 @@ REASON
 # missing functions with croaking stubs. 
 # We also store the list of available functions in a file for skipping the 
 # corresponding tests. 
+my $sanity_check = have_functions&#40;&#39;pcap_open_live&#39;&#41;;
+die &#34;Couldn&#39;t find pcap_open_live&#40;&#41;. Something is very wrong.&#34;
+    unless $sanity_check;
 my @funcs = have_functions&#40;find_functions&#40;&#41;&#41;;
 $options{DEFINE} .= cpp_defines&#40;@funcs&#41;;
 open&#40;FUNCS, &#39;&gt;funcs.txt&#39;&#41; or warn &#34;warning: can&#39;t write &#39;funcs.txt&#39;: $!\n&#34;;
-- 
1.6.5.1.1367.gcd48

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0004-Use-the-Windows-name-for-dev-null.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/912966/473549/0004-Use-the-Windows-name-for-dev-null.patch">Download 0004-Use-the-Windows-name-for-dev-null.patch</a><br />
<span class="downloadcontenttype">text/x-diff 690b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From e1525c5cdae88dbed165394a821aa0e3ff207844 Mon Sep 17 00:00:00 2001
From: Max Maischein &lt;corion@corion.net&gt;
Date: Tue, 22 Mar 2011 21:58:10 +0100
Subject: [PATCH 4/5] Use the Windows-name for /dev/null

---
 Makefile.PL |    2 +-
 1 files changed, 1 insertions&#40;+&#41;, 1 deletions&#40;-&#41;

diff --git a/Makefile.PL b/Makefile.PL
index ca76b8e..c8cab5b 100644
--- a/Makefile.PL
+++ b/Makefile.PL
@@ -290,7 +290,7 @@ BEGIN {
     $has_Win32 = !$@;
     $is_Win32 = &#40;$^O eq &#39;MSWin32&#39;&#41;;
     if &#40;$is_Win32&#41; {
-        $DEVNULL = &#39;DEVNULL&#39;;
+        $DEVNULL = &#39;NUL:&#39;;
     } else {
         $DEVNULL = eval { File::Spec-&gt;devnull };
         if &#40;$@&#41; { $DEVNULL = &#39;/dev/null&#39; }
-- 
1.6.5.1.1367.gcd48

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0003-Make-have_functions-work-on-Win32-as-well.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/912966/473550/0003-Make-have_functions-work-on-Win32-as-well.patch">Download 0003-Make-have_functions-work-on-Win32-as-well.patch</a><br />
<span class="downloadcontenttype">text/x-diff 2.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From b10564cf443e6357c300ca716522e7f88bff7c8a Mon Sep 17 00:00:00 2001
From: Max Maischein &lt;corion@corion.net&gt;
Date: Tue, 22 Mar 2011 21:57:16 +0100
Subject: [PATCH 3/5] Make have_functions&#40;&#41; work on Win32 as well

---
 Makefile.PL |   33 ++++++++++++++++++++++++++++-----
 1 files changed, 28 insertions&#40;+&#41;, 5 deletions&#40;-&#41;

diff --git a/Makefile.PL b/Makefile.PL
index b966faa..ca76b8e 100644
--- a/Makefile.PL
+++ b/Makefile.PL
@@ -4,6 +4,7 @@ use Cwd;
 use ExtUtils::MakeMaker;
 eval &#34;use ExtUtils::MakeMaker::Coverage&#34;;
 use File::Spec;
+use File::Basename;
 
 
 my &#40;$DEBUG, %options, $DEVNULL, $is_Win32, $has_Win32&#41;;
@@ -533,13 +534,35 @@ sub have_functions {
     my @funcs = &#40;&#41;;
     print &#34;detecting available functions... &#34;;
 
-    my @paths = DynaLoader::dl_findfile&#40;qw&#40;-lpcap&#41;&#41;;
-    my $libref = DynaLoader::dl_load_file&#40;$paths[0]&#41;;
-
+    my @paths = DynaLoader::dl_findfile&#40;split /\s+/, $options{LIBS}&#41;;
+    die &#34;Couldn&#39;t find any library file satisfying &#39;$options{LIBS}&#39;&#34;
+        unless @paths;
+    my $libfile = $paths[0];
+    
+    # On Win32, we assume that the lib file will not be statically linked
+    # but will be a thin wrapper for a similarly named .dll file.
+    # This is not universal but works in many cases
+    # This assumes that a library -l$foo will map to lib$foo.a
+    # through DynaLoader. We then try to find and load $foo.dll in $ENV{PATH}
+    if &#40;$has_Win32&#41; {        
+        &#40;my $dll = basename $libfile&#41; =~ s/\.\w+$//;
+        $dll =~ s/^lib//;
+        $dll .= &#39;.dll&#39;;
+        
+        &#40;$libfile&#41; = grep { -f } map { File::Spec-&gt;catfile&#40;$_,$dll&#41; } File::Spec-&gt;path;
+        die &#34;&#39;$dll&#39; not found in PATH&#34;
+            unless $libfile;
+    };
+    warn &#34;Using &#39;$libfile&#39; as potential symbol candidate&#34;;
+
+    my $libref = DynaLoader::dl_load_file&#40;$libfile&#41;;
+    warn &#34;Couldn&#39;t load $libfile via DynaLoader &#40;$^E&#41;&#34;
+        unless $libref;
     for my $func &#40;@_&#41; {
         my $symref = DynaLoader::dl_find_symbol&#40;$libref, $func&#41;;
-        push @funcs, $func if defined $symref
-    }
+        push @funcs, $func if defined $symref;
+        #print &#34;$func&#34;, $symref ? &#34;&#34; : &#34; NOT&#34;, &#34; found\n&#34;;
+    };
 
     print &#34;ok\n&#34;;
     return @funcs
-- 
1.6.5.1.1367.gcd48

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0005-On-Win32-avoid-duplicate-HAVE_REMOVE-compilation-for.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/912966/473551/0005-On-Win32-avoid-duplicate-HAVE_REMOVE-compilation-for.patch">Download 0005-On-Win32-avoid-duplicate-HAVE_REMOVE-compilation-for.patch</a><br />
<span class="downloadcontenttype">text/x-diff 777b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From a090a70d3247361c2bdd1303411b8428f7f3eccf Mon Sep 17 00:00:00 2001
From: Max Maischein &lt;corion@corion.net&gt;
Date: Tue, 22 Mar 2011 22:11:41 +0100
Subject: [PATCH 5/5] On Win32, avoid duplicate HAVE_REMOVE compilation for stubs

---
 stubs.inc |    3 +++
 1 files changed, 3 insertions&#40;+&#41;, 0 deletions&#40;-&#41;

diff --git a/stubs.inc b/stubs.inc
index 2cc292e..8ac5400 100644
--- a/stubs.inc
+++ b/stubs.inc
@@ -516,10 +516,13 @@ HANDLE pcap_getevent&#40;pcap_t *p&#41; {
 #ifdef _MSC_VER
 #pragma message&#40; &#34;Warning: the function pcap_setsampling&#40;&#41; is not available&#34; &#41;
 #endif
+
+#ifndef HAVE_REMOTE
 struct pcap_samp {
     int method;
     int value;
 };
+#endif
 
 struct pcap_samp *pcap_setsampling&#40;pcap_t *p&#41;;
 struct pcap_samp *pcap_setsampling&#40;pcap_t *p&#41; {
-- 
1.6.5.1.1367.gcd48

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-912968" href="/Public/Bug/Display.html?id=53292#txn-912968">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;22&nbsp;17:16:51&nbsp;2011</span>
    <span class="description">corion [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.48763</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
