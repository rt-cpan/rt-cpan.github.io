<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #46944 for DBD-ODBC: DBD::ODBC doesn&#39;t find iodbc correctly &#40;with patch&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #46944 for DBD-ODBC: DBD::ODBC doesn&#39;t find iodbc correctly &#40;with patch&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-ODBC/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-ODBC/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-ODBC/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-ODBC/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-ODBC">DBD-ODBC CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">46944</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-ODBC/Active/">DBD-ODBC</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
REHSACK [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10188-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.21    </td>
  </tr>
  <tr id="CF-10189-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.22_3    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




patch-aa<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/618723/314437/patch-aa">
Mon Jun 15 05:06:18 2009 (3.1k) by REHSACK [...] cpan.org
</a>
</font></li>
</ul>


signature.asc<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/619437/314895/signature.asc">
Tue Jun 16 04:19:47 2009 (834b) by rehsack [...] web.de
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/619037/314643/signature.asc">
Mon Jun 15 13:55:35 2009 (834b) by rehsack [...] web.de
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/618750/314462/signature.asc">
Mon Jun 15 05:40:54 2009 (834b) by rehsack [...] web.de
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;15&nbsp;05:06:18&nbsp;2009</span>
    <span class="description">REHSACK [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> DBD::ODBC doesn&#39;t find iodbc correctly &#40;with patch&#41;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

sorry that I missed instantly reporting. During packaging DBD::ODBC for
pkgsrc &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.pkgsrc.org/&#41;">http://www.pkgsrc.org/&#41;</a></span> I encounter some problems with iodbc and
with some interactive feedback.

I fixed the iodbc detection and comment out the interactive feedback.
For the latter one I suggest using options like DBD::Sybase does - and
maybe a dry test, if possible.

Thanks in advance,
Jens
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> patch-aa</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/618723/314437/patch-aa">Download patch-aa</a><br />
<span class="downloadcontenttype">application/octet-stream 3.1k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;15&nbsp;05:23:16&nbsp;2009</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 15 05:06:18 2009, REHSACK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; sorry that I missed instantly reporting. During packaging DBD::ODBC for
&gt; pkgsrc &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.pkgsrc.org/&#41;">http://www.pkgsrc.org/&#41;</a></span> I encounter some problems with iodbc and
&gt; with some interactive feedback.
&gt; 
&gt; I fixed the iodbc detection and comment out the interactive feedback.
&gt; For the latter one I suggest using options like DBD::Sybase does - and
&gt; maybe a dry test, if possible.
&gt; 
&gt; Thanks in advance,
&gt; Jens
</div>
Thanks Jens.

What exactly was wrong with the interactive feedback:

-    prompt&#40;&#34;Press return to continue...&#34;&#41;;

and what do you mean by &#34;a dry test&#34; like DBD::Sybase?

Why did you move unixodbc after iODBC:

-    $myodbc = &#39;unixodbc&#39;
-               if !$myodbc &#38;&#38; glob &#34;$odbchome/lib/libodbc.*&#34;;
-
     $myodbc = &#39;iodbc&#39;
                if !$myodbc &#38;&#38; &#40;&#40;glob &#34;$odbchome/*iodbc*&#34;&#41; ||
                                     &#40;glob &#34;$odbchome/lib/*iodbc*&#34;&#41;&#41;;
 
+    $myodbc = &#39;unixodbc&#39;
+               if !$myodbc &#38;&#38; glob &#34;$odbchome/lib/libodbc.*&#34;;
+
     $myodbc = &#39;empress&#39;
                if !$myodbc &#38;&#38; glob &#34;$odbchome/lib/libempodbc.*&#34;;
 
Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;15&nbsp;05:23:16&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;15&nbsp;05:40:54&nbsp;2009</span>
    <span class="description">rehsack [...] web.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46944] DBD::ODBC doesn&#39;t find iodbc correctly &#40;with patch&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 15 Jun 2009 09:31:24 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-ODBC [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jens Rehsack &lt;rehsack [...] web.de&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Martin J Evans via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=46944">https://rt.cpan.org/Ticket/Display.html?id=46944</a></span> &gt;
&gt; 
&gt; On Mon Jun 15 05:06:18 2009, REHSACK wrote:
<div class="message-stanza open">&gt;&gt; Hi,
&gt;&gt;
&gt;&gt; sorry that I missed instantly reporting. During packaging DBD::ODBC for
&gt;&gt; pkgsrc &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.pkgsrc.org/&#41;">http://www.pkgsrc.org/&#41;</a></span> I encounter some problems with iodbc and
&gt;&gt; with some interactive feedback.
&gt;&gt;
&gt;&gt; I fixed the iodbc detection and comment out the interactive feedback.
&gt;&gt; For the latter one I suggest using options like DBD::Sybase does - and
&gt;&gt; maybe a dry test, if possible.
&gt;&gt;
&gt;&gt; Thanks in advance,
&gt;&gt; Jens
</div>&gt; 
&gt; Thanks Jens.
&gt; 
&gt; What exactly was wrong with the interactive feedback:
&gt; 
&gt; -    prompt&#40;&#34;Press return to continue...&#34;&#41;;
</div>
Packaging often runs non-interactive. pkgsrc has the philosophy that all
switches for the packages has to be made in mk.conf - I can&#39;t fight against
the packaging system here.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; and what do you mean by &#34;a dry test&#34; like DBD::Sybase?
</div>
No - DBD::Sybase doesn&#39;t provide a dry test, but the provide a Getopt::Long
featured list of switches which allow to answer all &#34;prompt&#34; requests by the
packager.
A &#34;dry test&#34; is another feature - as packager I usually don&#39;t want to
install a full ODBC environment including configuring test databases etc.
for a &#34;make test&#34; run. But other native interfaces &#40;e.g. DBD::Oracle etc.&#41;
doesn&#39;t support tests without databases, too. So maybe forget the &#34;dry test&#34;
idea :&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Why did you move unixodbc after iODBC:
&gt; 
&gt; -    $myodbc = &#39;unixodbc&#39;
&gt; -             if !$myodbc &#38;&#38; glob &#34;$odbchome/lib/libodbc.*&#34;;
&gt; -
&gt;      $myodbc = &#39;iodbc&#39;
&gt;               if !$myodbc &#38;&#38; &#40;&#40;glob &#34;$odbchome/*iodbc*&#34;&#41; ||
&gt;                                      &#40;glob &#34;$odbchome/lib/*iodbc*&#34;&#41;&#41;;
&gt;
&gt; +    $myodbc = &#39;unixodbc&#39;
&gt; +             if !$myodbc &#38;&#38; glob &#34;$odbchome/lib/libodbc.*&#34;;
&gt; +
&gt;      $myodbc = &#39;empress&#39;
&gt;               if !$myodbc &#38;&#38; glob &#34;$odbchome/lib/libempodbc.*&#34;;
</div>
iodbc provides a libodbc.${shlibext}, too. So unixodbc detection will
succeed there, even if iodbc is installed.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Martin
</div>
Jens
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/618750/314462/signature.asc">Download signature.asc</a><br />
<span class="downloadcontenttype">application/pgp-signature 834b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;15&nbsp;06:27:26&nbsp;2009</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 15 05:40:54 2009, rehsack@web.de wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; What exactly was wrong with the interactive feedback:
&gt; &gt; 
&gt; &gt; -    prompt&#40;&#34;Press return to continue...&#34;&#41;;
</div>&gt; 
&gt; Packaging often runs non-interactive. pkgsrc has the philosophy that all
&gt; switches for the packages has to be made in mk.conf - I can&#39;t fight
</div>against
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; the packaging system here.
</div>
But prompt only prompts if Makefile.PL is running interactively - see
prompt in ExtUtils::MakeMaker:

If &#34;prompt&#40;&#41;&#34; detects that it is not running interactively and there is
nothing on STDIN or if the PERL_MM_USE_DEFAULT environment variable is
set to true, the $default will be used without prompting.  This prevents
automated processes from blocking on user input.

This all works fine for all those people doing DPAN::Reporter::Smoker
etc. prompt is the recognised way of doing this.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; and what do you mean by &#34;a dry test&#34; like DBD::Sybase?
</div>&gt; 
&gt; No - DBD::Sybase doesn&#39;t provide a dry test, but the provide a
</div>Getopt::Long
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; featured list of switches which allow to answer all &#34;prompt&#34; requests
</div>by the
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; packager.
</div>
There are no prompt requests in DBD::ODBC only calls to prompt to make
sure you&#39;ve read important information &#40;see above&#41;.
 
I thought DBD::ODBC already had switches for the rest &#40;NONE of which are
prompted for&#41;:

-o to set ODBCHOME
-u for unicode/non unicode
-g for debug

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; A &#34;dry test&#34; is another feature - as packager I usually don&#39;t want to
&gt; install a full ODBC environment including configuring test databases etc.
&gt; for a &#34;make test&#34; run. But other native interfaces &#40;e.g. DBD::Oracle etc.&#41;
&gt; doesn&#39;t support tests without databases, too. So maybe forget the &#34;dry
</div>test&#34;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; idea :&#41;
</div>
The dry test works with DBD::ODBC if you don&#39;t define DBI_DSN. Look at
the hundreds of cpan smoker test results for DBD::ODBC. These all a&#41; run
non-interactively but the prompt knows this and b&#41; all succeed but don&#39;t
actually run any database tests.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
<div class="message-stanza open">&gt; &gt; Why did you move unixodbc after iODBC:
&gt; &gt; 
&gt; &gt; -    $myodbc = &#39;unixodbc&#39;
&gt; &gt; -           if !$myodbc &#38;&#38; glob &#34;$odbchome/lib/libodbc.*&#34;;
&gt; &gt; -
&gt; &gt;      $myodbc = &#39;iodbc&#39;
&gt; &gt;             if !$myodbc &#38;&#38; &#40;&#40;glob &#34;$odbchome/*iodbc*&#34;&#41; ||
&gt; &gt;                                      &#40;glob &#34;$odbchome/lib/*iodbc*&#34;&#41;&#41;;
&gt; &gt;
&gt; &gt; +    $myodbc = &#39;unixodbc&#39;
&gt; &gt; +           if !$myodbc &#38;&#38; glob &#34;$odbchome/lib/libodbc.*&#34;;
&gt; &gt; +
&gt; &gt;      $myodbc = &#39;empress&#39;
&gt; &gt;             if !$myodbc &#38;&#38; glob &#34;$odbchome/lib/libempodbc.*&#34;;
</div>&gt; 
&gt; iodbc provides a libodbc.${shlibext}, too. So unixodbc detection will
&gt; succeed there, even if iodbc is installed.
</div>
So if I do this it will work nicely for iODBC &#40;a minority of users&#41; but
it will break unixODBC &#40;the majority of users&#41;. I think a different
solution is in order.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;15&nbsp;13:55:34&nbsp;2009</span>
    <span class="description">rehsack [...] web.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46944] DBD::ODBC doesn&#39;t find iodbc correctly &#40;with patch&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 15 Jun 2009 17:46:04 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-ODBC [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jens Rehsack &lt;rehsack [...] web.de&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Martin J Evans via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=46944">https://rt.cpan.org/Ticket/Display.html?id=46944</a></span> &gt;
&gt; 
&gt; On Mon Jun 15 05:40:54 2009, rehsack@web.de wrote:
&gt; 
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; What exactly was wrong with the interactive feedback:
&gt;&gt;&gt;
&gt;&gt;&gt; -    prompt&#40;&#34;Press return to continue...&#34;&#41;;
</div>&gt;&gt; Packaging often runs non-interactive. pkgsrc has the philosophy that all
&gt;&gt; switches for the packages has to be made in mk.conf - I can&#39;t fight
</div>&gt; against
<div class="message-stanza open">&gt;&gt; the packaging system here.
</div>&gt; 
&gt; But prompt only prompts if Makefile.PL is running interactively - see
&gt; prompt in ExtUtils::MakeMaker:
&gt; 
&gt; If &#34;prompt&#40;&#41;&#34; detects that it is not running interactively and there is
&gt; nothing on STDIN or if the PERL_MM_USE_DEFAULT environment variable is
&gt; set to true, the $default will be used without prompting.  This prevents
&gt; automated processes from blocking on user input.
&gt; 
&gt; This all works fine for all those people doing DPAN::Reporter::Smoker
&gt; etc. prompt is the recognised way of doing this.
</div>
But what if the user does a &#34;pkg_rolling-replace -u&#34;? There is a STDIN but
&#40;s&#41;he expects that the updates are running unattended.
I try to use the PERL_MM_USE_DEFAULT environment variable - I neither know
prompt&#40;&#41; nor PERL_MM_USE_DEFAULT ;&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; and what do you mean by &#34;a dry test&#34; like DBD::Sybase?
</div>&gt;&gt; No - DBD::Sybase doesn&#39;t provide a dry test, but the provide a
</div>&gt; Getopt::Long
<div class="message-stanza open">&gt;&gt; featured list of switches which allow to answer all &#34;prompt&#34; requests
</div>&gt; by the
<div class="message-stanza open">&gt;&gt; packager.
</div>&gt; 
&gt; There are no prompt requests in DBD::ODBC only calls to prompt to make
&gt; sure you&#39;ve read important information &#40;see above&#41;.
&gt;  
&gt; I thought DBD::ODBC already had switches for the rest &#40;NONE of which are
&gt; prompted for&#41;:
&gt; 
&gt; -o to set ODBCHOME
&gt; -u for unicode/non unicode
&gt; -g for debug
</div>
Seen \o/

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; A &#34;dry test&#34; is another feature - as packager I usually don&#39;t want to
&gt;&gt; install a full ODBC environment including configuring test databases etc.
&gt;&gt; for a &#34;make test&#34; run. But other native interfaces &#40;e.g. DBD::Oracle etc.&#41;
&gt;&gt; doesn&#39;t support tests without databases, too. So maybe forget the &#34;dry
</div>&gt; test&#34;
<div class="message-stanza open">&gt;&gt; idea :&#41;
</div>&gt; 
&gt; The dry test works with DBD::ODBC if you don&#39;t define DBI_DSN. Look at
&gt; the hundreds of cpan smoker test results for DBD::ODBC. These all a&#41; run
&gt; non-interactively but the prompt knows this and b&#41; all succeed but don&#39;t
&gt; actually run any database tests.
</div>
Yes. The longer I think about it, the more I see what nonsense the &#34;improved
dry test&#34; request must be.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; Why did you move unixodbc after iODBC:
&gt;&gt;&gt;
&gt;&gt;&gt; -    $myodbc = &#39;unixodbc&#39;
&gt;&gt;&gt; -           if !$myodbc &#38;&#38; glob &#34;$odbchome/lib/libodbc.*&#34;;
&gt;&gt;&gt; -
&gt;&gt;&gt;      $myodbc = &#39;iodbc&#39;
&gt;&gt;&gt;             if !$myodbc &#38;&#38; &#40;&#40;glob &#34;$odbchome/*iodbc*&#34;&#41; ||
&gt;&gt;&gt;                                      &#40;glob &#34;$odbchome/lib/*iodbc*&#34;&#41;&#41;;
&gt;&gt;&gt;
&gt;&gt;&gt; +    $myodbc = &#39;unixodbc&#39;
&gt;&gt;&gt; +           if !$myodbc &#38;&#38; glob &#34;$odbchome/lib/libodbc.*&#34;;
&gt;&gt;&gt; +
&gt;&gt;&gt;      $myodbc = &#39;empress&#39;
&gt;&gt;&gt;             if !$myodbc &#38;&#38; glob &#34;$odbchome/lib/libempodbc.*&#34;;
</div>&gt;&gt; iodbc provides a libodbc.${shlibext}, too. So unixodbc detection will
&gt;&gt; succeed there, even if iodbc is installed.
</div>&gt; 
&gt; So if I do this it will work nicely for iODBC &#40;a minority of users&#41; but
&gt; it will break unixODBC &#40;the majority of users&#41;. I think a different
&gt; solution is in order.
</div>
Well - why does it break unixODBC? If &#34;$odbchome/lib/*iodbc*&#34; doesn&#39;t match,
&#34;$odbchome/lib/libodbc.*&#34; is tried.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Martin
</div>
Jens
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/619037/314643/signature.asc">Download signature.asc</a><br />
<span class="downloadcontenttype">application/pgp-signature 834b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;16&nbsp;03:46:43&nbsp;2009</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have applied a variation on your patch. It does not include removing
the prompt &#40;although I&#39;d be interested in your findings using
PERL_MM_USE_DEFAULT&#41;, and I didn&#39;t change the ordering of unixodbc/iodbc
though as you state it should not make any difference.

I do not intend releasing this immediately since I have a pile of
changes waiting in the wings to finish off. I do not have iODBC to test
against and am frankly quite surprised that anyone is using it over
unixODBC. However, if you would like to test the patched version please
let me know by mailing my cpan address mjevans dot cpan dot org and I&#39;ll
send you a copy.

Thanks for your contribution to the DBD::ODBC project.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;16&nbsp;04:19:47&nbsp;2009</span>
    <span class="description">rehsack [...] web.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46944] DBD::ODBC doesn&#39;t find iodbc correctly &#40;with patch&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 16 Jun 2009 08:10:14 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-ODBC [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jens Rehsack &lt;rehsack [...] web.de&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Martin J Evans via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=46944">https://rt.cpan.org/Ticket/Display.html?id=46944</a></span> &gt;
&gt; 
&gt; I have applied a variation on your patch. It does not include removing
&gt; the prompt &#40;although I&#39;d be interested in your findings using
&gt; PERL_MM_USE_DEFAULT&#41;,
</div>
agreed

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; and I didn&#39;t change the ordering of unixodbc/iodbc
&gt; though as you state it should not make any difference.
</div>
Incorrect! It makes a difference!
Both - iodbc and unixodbc - creates a file $prefix/lib/libodbc.${shlib}.
While it&#39;s possible to prove the existence of lib/libiodbc.${shlib} first to
ensure the installed libodbc.${shlib} belongs to iodbc, it&#39;s not possible
with the current logic to first find unixodbc and later iodbc.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I do not intend releasing this immediately since I have a pile of
&gt; changes waiting in the wings to finish off. I do not have iODBC to test
&gt; against
</div>
You can use pkgsrc, if you want &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.pkgsrc.org/&#41;">http://www.pkgsrc.org/&#41;</a></span>. It works on nearly
any OS and provides both, unixodbc and iodbc.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; and am frankly quite surprised that anyone is using it over
&gt; unixODBC. However, if you would like to test the patched version please
&gt; let me know by mailing my cpan address mjevans dot cpan dot org and I&#39;ll
&gt; send you a copy.
</div>
Sure - send me a copy to sno@netbsd.org

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks for your contribution to the DBD::ODBC project.
</div>
Best regards,
Jens
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/619437/314895/signature.asc">Download signature.asc</a><br />
<span class="downloadcontenttype">application/pgp-signature 834b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;16&nbsp;04:36:56&nbsp;2009</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jun 16 04:19:47 2009, rehsack@web.de wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Martin J Evans via RT wrote:
<div class="message-stanza open">&gt; &gt; and I didn&#39;t change the ordering of unixodbc/iodbc
&gt; &gt; though as you state it should not make any difference.
</div>&gt; 
&gt; Incorrect! It makes a difference!
&gt; Both - iodbc and unixodbc - creates a file $prefix/lib/libodbc.${shlib}.
&gt; While it&#39;s possible to prove the existence of lib/libiodbc.${shlib}
</div>first to
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ensure the installed libodbc.${shlib} belongs to iodbc, it&#39;s not possible
&gt; with the current logic to first find unixodbc and later iodbc.
</div>
Appologies, I missed your point originally - I have changed this to the
way you had it. I had not appreciated iODBC installed a libodbc.xx now
as well as a libiodbc.xx.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You can use pkgsrc, if you want &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.pkgsrc.org/&#41;">http://www.pkgsrc.org/&#41;</a></span>. It works on
</div>nearly
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; any OS and provides both, unixodbc and iodbc.
</div>
I&#39;ll take a quick look at that.
 
A copy is on its way to you later today.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;21&nbsp;05:47:30&nbsp;2009</span>
    <span class="description">bohica [...] ntlworld.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;21&nbsp;05:47:31&nbsp;2009</span>
    <span class="description">bohica [...] ntlworld.com -  Fixed in 1.22_3 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
