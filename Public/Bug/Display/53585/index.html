<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #53585 for Net-SSLeay: Test failure on 64-bit &#40;x86_64&#41; MS Windows + gcc4 compiler</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #53585 for Net-SSLeay: Test failure on 64-bit &#40;x86_64&#41; MS Windows + gcc4 compiler</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Net-SSLeay">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Net-SSLeay">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Net-SSLeay">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Net-SSLeay">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-SSLeay">Net-SSLeay CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">53585</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">1.2 hours (70 min)

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Net-SSLeay">Net-SSLeay</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">MIKEM [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
kmx [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-44414-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-44415-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




0001-Use-XS-pointer-macros-for-storing-pointers-in-SVs.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/980593/510535/0001-Use-XS-pointer-macros-for-storing-pointers-in-SVs.patch">
Thu Sep 22 17:42:52 2011 (7.3k) by DOUGDUDE [...] cpan.org
</a>
</font></li>
</ul>


0002-Use-XS-pointer-macros-for-storing-pointers-in-SVs.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/980671/510584/0002-Use-XS-pointer-macros-for-storing-pointers-in-SVs.patch">
Thu Sep 22 21:39:34 2011 (6.6k) by DOUGDUDE [...] cpan.org
</a>
</font></li>
</ul>


0003-Change-function-signatures-to-be-const-correct.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/980916/510743/0003-Change-function-signatures-to-be-const-correct.patch">
Fri Sep 23 14:22:24 2011 (3.3k) by DOUGDUDE [...] cpan.org
</a>
</font></li>
</ul>


0004-Handle-some-function-signatures-that-changed-in-Open.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/980997/510793/0004-Handle-some-function-signatures-that-changed-in-Open.patch">
Sat Sep 24 03:18:17 2011 (1.4k) by DOUGDUDE [...] cpan.org
</a>
</font></li>
</ul>


0005-Fix-a-function-signature-for-0.9.8k.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/981016/510812/0005-Fix-a-function-signature-for-0.9.8k.patch">
Sat Sep 24 04:21:22 2011 (1.1k) by DOUGDUDE [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=53585">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-718392" href="/Public/Bug/Display.html?id=53585#txn-718392">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;11&nbsp;05:09:18&nbsp;2010</span>
    <span class="description">kmx [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Test failure on 64-bit &#40;x86_64&#41; MS Windows + gcc4 compiler</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/718392/370834/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/370834">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I have experienced a failure when trying to install Net::SSLeay &#40;SVN
version from 2009/11/26&#41; - see enclosed log.

The issue is somehow related to pointer size on 64-bit MS Windows platform.

Just for your info on 64-bit MS Windows we have:
&#39;void *&#39; len: 4
&#39;unsigned long int&#39; len: 8

Thanks for any feedback on this issue.

--
kmx

t/handle/local/05_use.t ........ ok
# compiling test program with: gcc -o t\local\ptr_cast_test
t\local\ptr_cast_test.c 

#   Failed test &#39;STDERR empty after compiling&#39;
#   at t/local/00_ptr_cast.t line 35.
#          got: &#39;t\local\ptr_cast_test.c: In function &#39;main&#39;:

# t\local\ptr_cast_test.c:29: warning: cast from pointer to integer of
different size

# t\local\ptr_cast_test.c:30: warning: cast to pointer from integer of
different size

# t\local\ptr_cast_test.c:31: warning: cast to pointer from integer of
different size

# t\local\ptr_cast_test.c:37: warning: cast to pointer from integer of
different size

# &#39;
#     expected: &#39;&#39;
# Looks like you failed 1 test of 5.
t/local/00_ptr_cast.t .......... 
Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/5 subtests 
t/local/01_pod.t ............... skipped: Test::Pod 1.00 required for
testing POD
t/local/02_pod_coverage.t ...... skipped: currently disabled
t/local/03_use.t ............... ok
t/local/04_basic.t ............. ok
t/local/05_passwd_cb.t ......... ok
t/local/06_tcpecho.t ........... ok
t/local/07_sslecho.t ........... ok
t/local/08_pipe.t .............. skipped: pipes not properly supported
on Windows
t/local/15_bio.t ............... ok
t/local/20_autoload.t .......... skipped: Some tests need Test::Exception
t/local/30_error.t ............. skipped: Requires Test::Exception,
Test::Warn and Test::NoWarnings
t/local/31_rsa_generate_key.t .. skipped: Test::Exception required
t/local/35_ephemeral.t ......... ok
t/local/50_digest.t ............ ok
t/local/kwalitee.t ............. skipped: Needs Test::Kwalitee

Test Summary Report
-------------------
t/local/00_ptr_cast.t        &#40;Wstat: 256 Tests: 5 Failed: 1&#41;
  Failed test:  2
  Non-zero exit status: 1
Files=17, Tests=132,  4 wallclock secs &#40; 0.06 usr +  0.11 sys =  0.17 CPU&#41;
Result: FAIL
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-718406" href="/Public/Bug/Display.html?id=53585#txn-718406">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;11&nbsp;05:26:12&nbsp;2010</span>
    <span class="description">kmx [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/718406/370847/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/370847">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 109b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry for typo - the right sizeofs on 64-bit MSWin:

sizeof&#40;void *&#41; : 8
sizeof&#40;unsigned long int&#41; : 4

--
kmx
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-718408" href="/Public/Bug/Display.html?id=53585#txn-718408">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;11&nbsp;05:26:14&nbsp;2010</span>
    <span class="description">kmx [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-718435" href="/Public/Bug/Display.html?id=53585#txn-718435">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;11&nbsp;06:23:29&nbsp;2010</span>
    <span class="description">kmx [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/718435/370864/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/370864">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 453b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">And one totally insignificant patch to t/local/ptr_cast_test.c 

-  printf&#40;&#34;# %s: &#39;%s&#39; len: %ul, &#39;%s&#39; len: %ul.\n&#34;, argv[0], FROMTYPESTR,
-        &#40;int&#41;sizeof&#40;TOTYPE&#41;, TOTYPESTR, &#40;int&#41;sizeof&#40;char *&#41;&#41;;
+  printf&#40;&#34;# %s: &#39;%s&#39; len: %ul, &#39;%s&#39; len: %ul.\n&#34;, argv[0], TOTYPESTR,
+        &#40;int&#41;sizeof&#40;TOTYPE&#41;, FROMTYPESTR, &#40;int&#41;sizeof&#40;FROMTYPE&#41;&#41;;

Currently the output sizes are swapped &#40;which is absolutely harmless; it
just confused me a little bit&#41;.

--
kmx
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-726954" href="/Public/Bug/Display.html?id=53585#txn-726954">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;30&nbsp;16:42:59&nbsp;2010</span>
    <span class="description">rafl [...] debian.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-727803" href="/Public/Bug/Display.html?id=53585#txn-727803">#</a>      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;02&nbsp;03:16:32&nbsp;2010</span>
    <span class="description">kmx [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/727803/375881/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/375881">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza">Sorry for reopening this ticket again but the main issue is still present in Net-SSLeay-1.36<br>

<br>

The problem is the following failing test which fails only on 64-bit MS&nbsp;Windows:<br>

<br>

t/local/00_ptr_cast.t .......... # compiling test program with: gcc -o t\local\ptr_cast_test t\local\ptr_cast_test.c<br>

t/local/00_ptr_cast.t .......... 1/5<br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">#&nbsp;&nbsp; Failed test 'STDERR empty after compiling'<br>

#&nbsp;&nbsp; at t/local/00_ptr_cast.t line 35.<br>

#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; got: 't\local\ptr_cast_test.c: In function 'main':<br>

# t\local\ptr_cast_test.c:29: warning: cast from pointer to integer of different size<br>

# t\local\ptr_cast_test.c:30: warning: cast to pointer from integer of different size<br>

# t\local\ptr_cast_test.c:31: warning: cast to pointer from integer of different size<br>

# t\local\ptr_cast_test.c:37: warning: cast to pointer from integer of different size<br>

# '<br>

#&nbsp;&nbsp;&nbsp;&nbsp; expected: ''<br>

# Looks like you failed 1 test of 5.<br>
</div>t/local/00_ptr_cast.t .......... Dubious, test returned 1 (wstat 256, 0x100)<br>

<br>

The reason is that on 64-bit MS Windows the size of &quot;unsigned long int&quot; and &quot;void *&quot; are not the same<br>

- 'void *' has size 8 bytes<br>

- 'unsigned long int' has size 4 bytes<br>

<br>

So trying to assign a pointer to 'unsigned long int' variable ends up with the warning:<br>

warning: cast from pointer to integer of different size<br>

<br>

To be honest I do not know what is the reason for this kind of test as Net::SSLeay module does not seem to use assignments between pointers and integers. As for the openssl library at least version 1.0.0 is officially supported on 64-bit MS Windows (I am using 64bit compiler by mingw-w64.sf.net project) so it obviously has to count with this differences in pointer vs. int sizes.<br>

<br>

Maybe there are some reasons for this test when using openssl 0.9.x - in that case I propose to skip this test when using openssl-1.0.0.<br>

<br>

--<br>

kmx<br>

<br>

<br>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-727805" href="/Public/Bug/Display.html?id=53585#txn-727805">#</a>      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;02&nbsp;03:16:35&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-901882" href="/Public/Bug/Display.html?id=53585#txn-901882">#</a>      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;23&nbsp;02:48:35&nbsp;2011</span>
    <span class="description">kmx [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/901882/467781/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/467781">with headers</a>
<br />
<span class="downloadcontenttype">text/html 210b</span>
</div>
<div class="messagebody">
<div class="message-stanza">Hi, it is more than a year since I have reported this issue.<br>

<br>

Would it be possible to make some progress?<br>

<br>

Can I help somehow?<br>

<br>

Thanks.<br>

<br>

--<br>

kmx<br>

<br>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980593" href="/Public/Bug/Display.html?id=53585#txn-980593">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;22&nbsp;17:42:52&nbsp;2011</span>
    <span class="description">DOUGDUDE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/980593/510534/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/510534">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 125b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">For those who are interested, I have attached a patch here that will
handle pointers using perl XS macros instead of casting.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0001-Use-XS-pointer-macros-for-storing-pointers-in-SVs.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/980593/510535/0001-Use-XS-pointer-macros-for-storing-pointers-in-SVs.patch">Download 0001-Use-XS-pointer-macros-for-storing-pointers-in-SVs.patch</a><br />
<span class="downloadcontenttype">text/x-diff 7.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From e774610c2310c25816e36306f45caaa8e40780a3 Mon Sep 17 00:00:00 2001
From: Douglas Christopher Wilson &lt;doug@somethingdoug.com&gt;
Date: Thu, 22 Sep 2011 17:30:05 -0400
Subject: [PATCH] Use XS pointer macros for storing pointers in SVs

Fix the typemap so that pointer types are of type T_PTR which
generates XS code using the INT2PTR and PTR2IV macros which store
pointers in an IV. Since an IV is guaranted to be at least the
size of a pointer, no information is lost.

Previously the pointers were cast to unsigned long int which
resulted in a loss on 64-bit systems where long int was only
4 bytes.

Also removed the pointer cast test since pointers are not being
cast anymore and are handled by the macros designed for the job.
---
 MANIFEST                |    2 -
 SSLeay.xs               |    4 +-
 t/local/00_ptr_cast.t   |   43 ---------------------
 t/local/ptr_cast_test.c |   43 ---------------------
 typemap                 |   94 +++++++++++++++++++++++-----------------------
 5 files changed, 49 insertions&#40;+&#41;, 137 deletions&#40;-&#41;
 delete mode 100644 t/local/00_ptr_cast.t
 delete mode 100644 t/local/ptr_cast_test.c

diff --git a/MANIFEST b/MANIFEST
index 4512a5d..099063a 100644
--- a/MANIFEST
+++ b/MANIFEST
@@ -55,7 +55,6 @@ t/external/15_altnames.t
 t/handle/external/10_destroy.t
 t/handle/external/50_external.t
 t/handle/local/05_use.t
-t/local/00_ptr_cast.t
 t/local/01_pod.t
 t/local/02_pod_coverage.t
 t/local/03_use.t
@@ -71,6 +70,5 @@ t/local/31_rsa_generate_key.t
 t/local/35_ephemeral.t
 t/local/50_digest.t
 t/local/kwalitee.t
-t/local/ptr_cast_test.c
 TODO
 typemap
diff --git a/SSLeay.xs b/SSLeay.xs
index f9d1caa..1e7cf26 100644
--- a/SSLeay.xs
+++ b/SSLeay.xs
@@ -182,7 +182,7 @@ ssleay_verify_callback_invoke &#40;int ok, X509_STORE_CTX* x509_store&#41; {
 	PUSHMARK&#40;sp&#41;;
 	EXTEND&#40; sp, 2 &#41;;
 	PUSHs&#40; sv_2mortal&#40;newSViv&#40;ok&#41;&#41; &#41;;
-	PUSHs&#40; sv_2mortal&#40;newSViv&#40;&#40;unsigned long int&#41;x509_store&#41;&#41; &#41;;
+	PUSHs&#40; sv_2mortal&#40;newSViv&#40;PTR2IV&#40;x509_store&#41;&#41;&#41; &#41;;
 	PUTBACK;
 
 	PR&#40;&#34;About to call verify callback.\n&#34;&#41;;
@@ -2863,7 +2863,7 @@ SSL_CTX_set1_param&#40;ctx, vpm&#41;
 
 int
 SSL_set1_param&#40;ctx, vpm&#41;
-     SSL_CTX *          ctx
+     SSL *              ctx
      X509_VERIFY_PARAM *vpm
 
 #endif
diff --git a/t/local/00_ptr_cast.t b/t/local/00_ptr_cast.t
deleted file mode 100644
index 6293de6..0000000
--- a/t/local/00_ptr_cast.t
+++ /dev/null
@@ -1,43 +0,0 @@
-#!/usr/bin/perl
-
-use strict;
-use warnings;
-use File::Spec;
-use Test::More tests =&gt; 5;
-use Symbol qw&#40;gensym&#41;;
-use IPC::Open3;
-use Config;
-
-my $input  = File::Spec-&gt;catfile&#40;qw&#40; t local ptr_cast_test.c &#41;&#41;;
-my $output = File::Spec-&gt;catfile&#40;qw&#40; t local ptr_cast_test   &#41;&#41;;
-
-unlink $output;
-
-my $out = gensym&#40;&#41;;
-my $err = gensym&#40;&#41;;
-
-my @extraargs;
-my $cmd;
-if&#40;$^O eq &#39;MSWin32&#39; &#38;&#38; $Config{cc} eq &#39;cl&#39;&#41; {
-  push&#40;@extraargs, &#39;/nologo &#39; . $Config{libs}&#41;;
-  $cmd = &#34;$Config{cc} /Fe$output $input &#34; . join&#40;&#39; &#39;, @extraargs&#41;;
-}
-else {
-    push&#40;@extraargs, &#39;-Zexe&#39;&#41; if $^O eq &#39;os2&#39;;
-    $cmd = &#34;$Config{cc} $Config{ccflags} -o $output $input &#34; . join&#40;&#39; &#39;, @extraargs&#41;
-}
-diag&#40; &#34;compiling test program with: $cmd&#34; &#41;;
-my $pid = open3&#40;undef, $out, $err, $cmd&#41;;
-waitpid $pid, 0;
-
-is&#40; $?, 0, &#39;compiling ptr_cast_test.c&#39; &#41;;
-
-is&#40; do { local $/ = undef; &lt;$err&gt;}, &#39;&#39;, &#39;STDERR empty after compiling&#39; &#41;;
-
-$pid = open3&#40;undef, $out, $err, &#34;./$output&#34;&#41;;
-waitpid $pid, 0;
-
-is&#40; $?, 0, &#39;./ptr_cast_test exited with 0&#39; &#41;;
-
-like&#40; do { local $/ = undef; &lt;$out&gt; }, qr/ptr_cast_test:\s+ok\s+/, &#39;casting pointer integer and back worked&#39; &#41;;
-ok&#40; !do { local $/ = undef; &lt;$err&gt; }, &#39;STDERR empty after running&#39; &#41;;
diff --git a/t/local/ptr_cast_test.c b/t/local/ptr_cast_test.c
deleted file mode 100644
index 15084b7..0000000
--- a/t/local/ptr_cast_test.c
+++ /dev/null
@@ -1,43 +0,0 @@
-#include &lt;stdlib.h&gt;
-#include &lt;stdio.h&gt;
-
-/* test if a pointer can be cast to an unsigned long int and back
-   &#40;aspa@hip.fi&#41;
-
-   tested on: HP-UX B.10.20, AIX 4.3, IRIX 5.3, OSF1 v4.0B and SunOS 5.6
-   with both gcc and native compilers, and linux/gcc &#40;i686&#41; +
-   linux/gcc &#40;alpha&#41;.
-
-*/
-
-#define FROMTYPE void *
-#define FROMTYPESTR &#34;void *&#34;
-#define TOTYPE unsigned long int
-#define TOTYPESTR &#34;unsigned long int&#34;
-
-int main&#40;argc, argv&#41;
-     int argc; /* e.g. HP-UX cc doesn&#39;t support ISO C by default */
-     char *argv[];
-{
-  /* heap should be near the end of process&#39;s address space */
-  FROMTYPE bufptr = &#40;FROMTYPE&#41; malloc&#40;500&#41;;
-  volatile TOTYPE i; /* prevent optimization */
-
-  printf&#40;&#34;# %s: &#39;%s&#39; len: %ul, &#39;%s&#39; len: %ul.\n&#34;, argv[0], FROMTYPESTR,
-	 &#40;int&#41;sizeof&#40;TOTYPE&#41;, TOTYPESTR, &#40;int&#41;sizeof&#40;char *&#41;&#41;;
-
-  i = &#40;TOTYPE&#41;bufptr;
-  if&#40; &#40;&#40;FROMTYPE&#41;i&#41; != bufptr &#41; {
-    printf&#40;&#34;# %s: failed: &#40;%p != %p&#41;.\n&#34;, argv[0], &#40;FROMTYPE&#41;i, bufptr&#41;;
-    printf&#40;&#34;# ERROR: a &#39;%s&#39; can&#39;t be cast to a &#39;%s&#39; and back \n&#34;,
-	   FROMTYPESTR, TOTYPESTR&#41;;
-    printf&#40;&#34;# ERROR: without loss of information on this architecture.\n&#34;&#41;;
-    exit&#40;1&#41;;
-  } else {
-    printf&#40;&#34;# ptr_cast_test: ok &#40;%p == %p&#41;.\n&#34;, &#40;FROMTYPE&#41;i, bufptr&#41;;
-    exit&#40;0&#41;;
-  }
-
-  exit&#40;1&#41;;
-}
-
diff --git a/typemap b/typemap
index 47c4f75..b7852f5 100644
--- a/typemap
+++ b/typemap
@@ -1,53 +1,53 @@
 TYPEMAP
-SSL_METHOD *	T_IV
-SSL_CTX *	T_IV
-SSL_SESSION *	T_IV
-SSL *		T_IV
-RSA *		T_IV
-DH *		T_IV
-X509 *		T_IV
-X509_CRL *	T_IV
-X509_LOOKUP *	T_IV
-X509_NAME *	T_IV
-X509_EXTENSION *	T_IV
-BIO *           T_IV
-BIO_METHOD *    T_IV
-EVP_PKEY *      T_IV
-const EVP_MD *  T_IV
-CERT *          T_IV
-LHASH *         T_IV
-struct lhash_st_SSL_SESSION *	T_IV
-struct cert_st * T_IV
-X509_STORE_CTX * T_IV
-ASN1_UTCTIME *   T_IV
-ASN1_OCTET_STRING *   T_IV
-EVP_PKEY *       T_IV
+SSL_METHOD *	T_PTR
+SSL_CTX *	T_PTR
+SSL_SESSION *	T_PTR
+SSL *		T_PTR
+RSA *		T_PTR
+DH *		T_PTR
+X509 *		T_PTR
+X509_CRL *	T_PTR
+X509_LOOKUP *	T_PTR
+X509_NAME *	T_PTR
+X509_EXTENSION *	T_PTR
+BIO *           T_PTR
+BIO_METHOD *    T_PTR
+EVP_PKEY *      T_PTR
+const EVP_MD *  T_PTR
+CERT *          T_PTR
+LHASH *         T_PTR
+struct lhash_st_SSL_SESSION *	T_PTR
+struct cert_st * T_PTR
+X509_STORE_CTX * T_PTR
+ASN1_UTCTIME *   T_PTR
+ASN1_OCTET_STRING *   T_PTR
+EVP_PKEY *       T_PTR
 const char *	 T_PV
 const unsigned char * T_PV
-CRYPTO_EX_new *  T_IV
-CRYPTO_EX_dup *  T_IV
-CRYPTO_EX_free * T_IV
-SSL_CIPHER *     T_IV
-int *		 T_IV
-COMP_METHOD *	 T_IV
-X509_STORE *	 T_IV
-X509_NAME_STACK *   T_IV
-X509_VERIFY_PARAM * T_IV
-X509_POLICY_LEVEL * T_IV
-X509_POLICY_TREE *  T_IV
-X509_POLICY_NODE *  T_IV
-STACK_OF&#40;X509_POLICY_NODE&#41; *  T_IV
-STACK_OF&#40;POLICYQUALINFO&#41; * T_IV
-ASN1_OBJECT *       T_IV
-STACK_OF&#40;ASN1_OBJECT&#41; * T_IV
-ENGINE *         T_IV
-pem_password_cb *  T_IV
-generate_key_cb *  T_IV
-callback_ret_int * T_IV
-callback_no_ret *  T_IV
-cb_ssl_int_int_ret_void *  T_IV
-cb_ssl_int_int_ret_RSA *  T_IV
-cb_ssl_int_int_ret_DH  *  T_IV
+CRYPTO_EX_new *  T_PTR
+CRYPTO_EX_dup *  T_PTR
+CRYPTO_EX_free * T_PTR
+SSL_CIPHER *     T_PTR
+int *		 T_PTR
+COMP_METHOD *	 T_PTR
+X509_STORE *	 T_PTR
+X509_NAME_STACK *   T_PTR
+X509_VERIFY_PARAM * T_PTR
+X509_POLICY_LEVEL * T_PTR
+X509_POLICY_TREE *  T_PTR
+X509_POLICY_NODE *  T_PTR
+STACK_OF&#40;X509_POLICY_NODE&#41; *  T_PTR
+STACK_OF&#40;POLICYQUALINFO&#41; * T_PTR
+ASN1_OBJECT *       T_PTR
+STACK_OF&#40;ASN1_OBJECT&#41; * T_PTR
+ENGINE *         T_PTR
+pem_password_cb *  T_PTR
+generate_key_cb *  T_PTR
+callback_ret_int * T_PTR
+callback_no_ret *  T_PTR
+cb_ssl_int_int_ret_void *  T_PTR
+cb_ssl_int_int_ret_RSA *  T_PTR
+cb_ssl_int_int_ret_DH  *  T_PTR
 perl_filehandle_t T_PERL_IO_HANDLE
 
 INPUT
-- 
1.7.6.msysgit.0

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980624" href="/Public/Bug/Display.html?id=53585#txn-980624">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;22&nbsp;18:34:17&nbsp;2011</span>
    <span class="description">MIKEM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">10 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/980624/510558/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/510558">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 728b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Sep 22 17:42:52 2011, DOUGDUDE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; For those who are interested, I have attached a patch here that will
&gt; handle pointers using perl XS macros instead of casting.
</div>
Hi Doug,

thanks for the patch, but I am a but undertain as to some of the 
contents. There seem to be some unnecessary changes.

I can see the change that uses PTR2IV instead of unsigned long int, 
but there is also a change in the argument to SSL_set1_param from SSL 
to SSL_CTX. That look OK, but its a different topic.

You have also removed 2 test files: is that correct?

I can see in typemap you change the type of many args, but there is 
also a line 54 deleted that contains a -, however that is not in my 
source.

Can you clarify?

Cheers.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980671" href="/Public/Bug/Display.html?id=53585#txn-980671">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;22&nbsp;21:39:33&nbsp;2011</span>
    <span class="description">DOUGDUDE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/980671/510583/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/510583">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Sep 22 18:34:17 2011, MIKEM wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Thu Sep 22 17:42:52 2011, DOUGDUDE wrote:
<div class="message-stanza open">&gt; &gt; For those who are interested, I have attached a patch here that will
&gt; &gt; handle pointers using perl XS macros instead of casting.
</div>&gt; 
&gt; Hi Doug,
&gt; 
&gt; thanks for the patch, but I am a but undertain as to some of the 
&gt; contents. There seem to be some unnecessary changes.
&gt; 
&gt; I can see the change that uses PTR2IV instead of unsigned long int, 
&gt; but there is also a change in the argument to SSL_set1_param from SSL 
&gt; to SSL_CTX. That look OK, but its a different topic.
&gt;
</div>Yes, sorry, the SSL_set1_param change made it into the patch by mistake.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You have also removed 2 test files: is that correct?
&gt;
</div>Correct, the patch removes them. From looking over the code, it came to
my understanding the purpose of the test files was to determine if &#40;void
*&#41; could be cast to &#40;unsigned long int&#41; and back again without data
loss. Since all the XS code stores the pointers into an IV using the
macros PTR2IV and back again with INT2PTR. Since perl guarantees that
the IV will be at least the size of a pointer on the platform, Perl is
guaranteeing that there will be no information loss when
storing/retrieving the pointer.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I can see in typemap you change the type of many args, but there is 
&gt; also a line 54 deleted that contains a -, however that is not in my 
&gt; source.
&gt; 
&gt; Can you clarify?
&gt; 
</div>That &#34;--&#34; below INPUT is actually is a marker for the end off the diff
that git outputs. At the top of the diff for typemap you can see it show
53 lines in both before and after.

Also, the reason their types where changed is that a type of T_PTR will
cause xsubpp to generate the proper code that uses the PTR2IV and
INT2PTR macros.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Cheers.
&gt; 
</div>
I&#39;ve attached a path here without the SSL_set1_param change. This new
patch also applies to SVN revision 275 instead of the CPAN release.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0002-Use-XS-pointer-macros-for-storing-pointers-in-SVs.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/980671/510584/0002-Use-XS-pointer-macros-for-storing-pointers-in-SVs.patch">Download 0002-Use-XS-pointer-macros-for-storing-pointers-in-SVs.patch</a><br />
<span class="downloadcontenttype">text/x-diff 6.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From c49af36bb2f94582c1bd14f9ec7acead49315b55 Mon Sep 17 00:00:00 2001
From: Douglas Christopher Wilson &lt;doug@somethingdoug.com&gt;
Date: Thu, 22 Sep 2011 17:30:05 -0400
Subject: [PATCH] Use XS pointer macros for storing pointers in SVs

Fix the typemap so that pointer types are of type T_PTR which
generates XS code using the INT2PTR and PTR2IV macros which store
pointers in an IV. Since an IV is guaranted to be at least the
size of a pointer, no information is lost.

Previously the pointers were cast to unsigned long int which
resulted in a loss on 64-bit systems where long int was only
4 bytes.

Also removed the pointer cast test since pointers are not being
cast anymore and are handled by the macros designed for the job.
---
 SSLeay.xs               |    2 +-
 t/local/00_ptr_cast.t   |   43 ---------------------
 t/local/ptr_cast_test.c |   43 ---------------------
 typemap                 |   94 +++++++++++++++++++++++-----------------------
 4 files changed, 48 insertions&#40;+&#41;, 134 deletions&#40;-&#41;
 delete mode 100644 t/local/00_ptr_cast.t
 delete mode 100644 t/local/ptr_cast_test.c

diff --git a/SSLeay.xs b/SSLeay.xs
index 5fbbc5f..7fa0fe6 100644
--- a/SSLeay.xs
+++ b/SSLeay.xs
@@ -182,7 +182,7 @@ ssleay_verify_callback_invoke &#40;int ok, X509_STORE_CTX* x509_store&#41; {
 	PUSHMARK&#40;sp&#41;;
 	EXTEND&#40; sp, 2 &#41;;
 	PUSHs&#40; sv_2mortal&#40;newSViv&#40;ok&#41;&#41; &#41;;
-	PUSHs&#40; sv_2mortal&#40;newSViv&#40;&#40;unsigned long int&#41;x509_store&#41;&#41; &#41;;
+	PUSHs&#40; sv_2mortal&#40;newSViv&#40;PTR2IV&#40;x509_store&#41;&#41;&#41; &#41;;
 	PUTBACK;
 
 	PR&#40;&#34;About to call verify callback.\n&#34;&#41;;
diff --git a/t/local/00_ptr_cast.t b/t/local/00_ptr_cast.t
deleted file mode 100644
index 6293de6..0000000
--- a/t/local/00_ptr_cast.t
+++ /dev/null
@@ -1,43 +0,0 @@
-#!/usr/bin/perl
-
-use strict;
-use warnings;
-use File::Spec;
-use Test::More tests =&gt; 5;
-use Symbol qw&#40;gensym&#41;;
-use IPC::Open3;
-use Config;
-
-my $input  = File::Spec-&gt;catfile&#40;qw&#40; t local ptr_cast_test.c &#41;&#41;;
-my $output = File::Spec-&gt;catfile&#40;qw&#40; t local ptr_cast_test   &#41;&#41;;
-
-unlink $output;
-
-my $out = gensym&#40;&#41;;
-my $err = gensym&#40;&#41;;
-
-my @extraargs;
-my $cmd;
-if&#40;$^O eq &#39;MSWin32&#39; &#38;&#38; $Config{cc} eq &#39;cl&#39;&#41; {
-  push&#40;@extraargs, &#39;/nologo &#39; . $Config{libs}&#41;;
-  $cmd = &#34;$Config{cc} /Fe$output $input &#34; . join&#40;&#39; &#39;, @extraargs&#41;;
-}
-else {
-    push&#40;@extraargs, &#39;-Zexe&#39;&#41; if $^O eq &#39;os2&#39;;
-    $cmd = &#34;$Config{cc} $Config{ccflags} -o $output $input &#34; . join&#40;&#39; &#39;, @extraargs&#41;
-}
-diag&#40; &#34;compiling test program with: $cmd&#34; &#41;;
-my $pid = open3&#40;undef, $out, $err, $cmd&#41;;
-waitpid $pid, 0;
-
-is&#40; $?, 0, &#39;compiling ptr_cast_test.c&#39; &#41;;
-
-is&#40; do { local $/ = undef; &lt;$err&gt;}, &#39;&#39;, &#39;STDERR empty after compiling&#39; &#41;;
-
-$pid = open3&#40;undef, $out, $err, &#34;./$output&#34;&#41;;
-waitpid $pid, 0;
-
-is&#40; $?, 0, &#39;./ptr_cast_test exited with 0&#39; &#41;;
-
-like&#40; do { local $/ = undef; &lt;$out&gt; }, qr/ptr_cast_test:\s+ok\s+/, &#39;casting pointer integer and back worked&#39; &#41;;
-ok&#40; !do { local $/ = undef; &lt;$err&gt; }, &#39;STDERR empty after running&#39; &#41;;
diff --git a/t/local/ptr_cast_test.c b/t/local/ptr_cast_test.c
deleted file mode 100644
index 15084b7..0000000
--- a/t/local/ptr_cast_test.c
+++ /dev/null
@@ -1,43 +0,0 @@
-#include &lt;stdlib.h&gt;
-#include &lt;stdio.h&gt;
-
-/* test if a pointer can be cast to an unsigned long int and back
-   &#40;aspa@hip.fi&#41;
-
-   tested on: HP-UX B.10.20, AIX 4.3, IRIX 5.3, OSF1 v4.0B and SunOS 5.6
-   with both gcc and native compilers, and linux/gcc &#40;i686&#41; +
-   linux/gcc &#40;alpha&#41;.
-
-*/
-
-#define FROMTYPE void *
-#define FROMTYPESTR &#34;void *&#34;
-#define TOTYPE unsigned long int
-#define TOTYPESTR &#34;unsigned long int&#34;
-
-int main&#40;argc, argv&#41;
-     int argc; /* e.g. HP-UX cc doesn&#39;t support ISO C by default */
-     char *argv[];
-{
-  /* heap should be near the end of process&#39;s address space */
-  FROMTYPE bufptr = &#40;FROMTYPE&#41; malloc&#40;500&#41;;
-  volatile TOTYPE i; /* prevent optimization */
-
-  printf&#40;&#34;# %s: &#39;%s&#39; len: %ul, &#39;%s&#39; len: %ul.\n&#34;, argv[0], FROMTYPESTR,
-	 &#40;int&#41;sizeof&#40;TOTYPE&#41;, TOTYPESTR, &#40;int&#41;sizeof&#40;char *&#41;&#41;;
-
-  i = &#40;TOTYPE&#41;bufptr;
-  if&#40; &#40;&#40;FROMTYPE&#41;i&#41; != bufptr &#41; {
-    printf&#40;&#34;# %s: failed: &#40;%p != %p&#41;.\n&#34;, argv[0], &#40;FROMTYPE&#41;i, bufptr&#41;;
-    printf&#40;&#34;# ERROR: a &#39;%s&#39; can&#39;t be cast to a &#39;%s&#39; and back \n&#34;,
-	   FROMTYPESTR, TOTYPESTR&#41;;
-    printf&#40;&#34;# ERROR: without loss of information on this architecture.\n&#34;&#41;;
-    exit&#40;1&#41;;
-  } else {
-    printf&#40;&#34;# ptr_cast_test: ok &#40;%p == %p&#41;.\n&#34;, &#40;FROMTYPE&#41;i, bufptr&#41;;
-    exit&#40;0&#41;;
-  }
-
-  exit&#40;1&#41;;
-}
-
diff --git a/typemap b/typemap
index 47c4f75..b7852f5 100644
--- a/typemap
+++ b/typemap
@@ -1,53 +1,53 @@
 TYPEMAP
-SSL_METHOD *	T_IV
-SSL_CTX *	T_IV
-SSL_SESSION *	T_IV
-SSL *		T_IV
-RSA *		T_IV
-DH *		T_IV
-X509 *		T_IV
-X509_CRL *	T_IV
-X509_LOOKUP *	T_IV
-X509_NAME *	T_IV
-X509_EXTENSION *	T_IV
-BIO *           T_IV
-BIO_METHOD *    T_IV
-EVP_PKEY *      T_IV
-const EVP_MD *  T_IV
-CERT *          T_IV
-LHASH *         T_IV
-struct lhash_st_SSL_SESSION *	T_IV
-struct cert_st * T_IV
-X509_STORE_CTX * T_IV
-ASN1_UTCTIME *   T_IV
-ASN1_OCTET_STRING *   T_IV
-EVP_PKEY *       T_IV
+SSL_METHOD *	T_PTR
+SSL_CTX *	T_PTR
+SSL_SESSION *	T_PTR
+SSL *		T_PTR
+RSA *		T_PTR
+DH *		T_PTR
+X509 *		T_PTR
+X509_CRL *	T_PTR
+X509_LOOKUP *	T_PTR
+X509_NAME *	T_PTR
+X509_EXTENSION *	T_PTR
+BIO *           T_PTR
+BIO_METHOD *    T_PTR
+EVP_PKEY *      T_PTR
+const EVP_MD *  T_PTR
+CERT *          T_PTR
+LHASH *         T_PTR
+struct lhash_st_SSL_SESSION *	T_PTR
+struct cert_st * T_PTR
+X509_STORE_CTX * T_PTR
+ASN1_UTCTIME *   T_PTR
+ASN1_OCTET_STRING *   T_PTR
+EVP_PKEY *       T_PTR
 const char *	 T_PV
 const unsigned char * T_PV
-CRYPTO_EX_new *  T_IV
-CRYPTO_EX_dup *  T_IV
-CRYPTO_EX_free * T_IV
-SSL_CIPHER *     T_IV
-int *		 T_IV
-COMP_METHOD *	 T_IV
-X509_STORE *	 T_IV
-X509_NAME_STACK *   T_IV
-X509_VERIFY_PARAM * T_IV
-X509_POLICY_LEVEL * T_IV
-X509_POLICY_TREE *  T_IV
-X509_POLICY_NODE *  T_IV
-STACK_OF&#40;X509_POLICY_NODE&#41; *  T_IV
-STACK_OF&#40;POLICYQUALINFO&#41; * T_IV
-ASN1_OBJECT *       T_IV
-STACK_OF&#40;ASN1_OBJECT&#41; * T_IV
-ENGINE *         T_IV
-pem_password_cb *  T_IV
-generate_key_cb *  T_IV
-callback_ret_int * T_IV
-callback_no_ret *  T_IV
-cb_ssl_int_int_ret_void *  T_IV
-cb_ssl_int_int_ret_RSA *  T_IV
-cb_ssl_int_int_ret_DH  *  T_IV
+CRYPTO_EX_new *  T_PTR
+CRYPTO_EX_dup *  T_PTR
+CRYPTO_EX_free * T_PTR
+SSL_CIPHER *     T_PTR
+int *		 T_PTR
+COMP_METHOD *	 T_PTR
+X509_STORE *	 T_PTR
+X509_NAME_STACK *   T_PTR
+X509_VERIFY_PARAM * T_PTR
+X509_POLICY_LEVEL * T_PTR
+X509_POLICY_TREE *  T_PTR
+X509_POLICY_NODE *  T_PTR
+STACK_OF&#40;X509_POLICY_NODE&#41; *  T_PTR
+STACK_OF&#40;POLICYQUALINFO&#41; * T_PTR
+ASN1_OBJECT *       T_PTR
+STACK_OF&#40;ASN1_OBJECT&#41; * T_PTR
+ENGINE *         T_PTR
+pem_password_cb *  T_PTR
+generate_key_cb *  T_PTR
+callback_ret_int * T_PTR
+callback_no_ret *  T_PTR
+cb_ssl_int_int_ret_void *  T_PTR
+cb_ssl_int_int_ret_RSA *  T_PTR
+cb_ssl_int_int_ret_DH  *  T_PTR
 perl_filehandle_t T_PERL_IO_HANDLE
 
 INPUT
-- 
1.7.6.msysgit.0

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980674" href="/Public/Bug/Display.html?id=53585#txn-980674">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;22&nbsp;22:24:20&nbsp;2011</span>
    <span class="description">DOUGDUDE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/980674/510587/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/510587">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 319b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Also as a clarification, the changes in this patch should not affect
backwards compatibility as the pointers are still stored in the exact
same manor: in the IV part of a SV. This just changes the method of
converting the pointer to an IV &#40;changing it to work no matter what the
size of the pointers on a platform are&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980682" href="/Public/Bug/Display.html?id=53585#txn-980682">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;22&nbsp;22:43:45&nbsp;2011</span>
    <span class="description">MIKEM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">30 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/980682/510594/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/510594">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 480b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Doug,

thanks.
I have now uploaded a new 1.40 with your patches.
Let me know how you go.

Cheers.

On Thu Sep 22 22:24:20 2011, DOUGDUDE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Also as a clarification, the changes in this patch should not affect
&gt; backwards compatibility as the pointers are still stored in the 
</div>exact
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; same manor: in the IV part of a SV. This just changes the method of
&gt; converting the pointer to an IV &#40;changing it to work no matter what 
</div>the
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; size of the pointers on a platform are&#41;.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980685" href="/Public/Bug/Display.html?id=53585#txn-980685">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;22&nbsp;22:43:46&nbsp;2011</span>
    <span class="description">MIKEM [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980696" href="/Public/Bug/Display.html?id=53585#txn-980696">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;22&nbsp;23:10:59&nbsp;2011</span>
    <span class="description">DOUGDUDE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/980696/510604/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/510604">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 374b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Sep 22 22:43:45 2011, MIKEM wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Doug,
&gt; 
&gt; thanks.
&gt; I have now uploaded a new 1.40 with your patches.
&gt; Let me know how you go.
&gt; 
&gt; Cheers.
&gt; 
</div>
Thank you for the quick responses &#40;: version 1.40 successfully installed
on my 64-bit perl+ubuntu, 32-bit perl+ubuntu and on 64-bit perl+windows.
I can only hope that the patch goes through smooth on all systems.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980699" href="/Public/Bug/Display.html?id=53585#txn-980699">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;22&nbsp;23:11:00&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980716" href="/Public/Bug/Display.html?id=53585#txn-980716">#</a>      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;23&nbsp;03:14:56&nbsp;2011</span>
    <span class="description">kmx [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/980716/510620/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/510620">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza">Hi,<br>

<br>

thanks for your effort. Version 1.40 installs fine on MS Windows 64bit Strawberry perl.<br>

<br>

There are just some compiler warnings:<br>

<br>

SSLeay.c: In function 'XS_Net__SSLeay_SSLv3_method':<br>

SSLeay.c:4804: warning: assignment discards qualifiers from pointer target type<br>

SSLeay.c: In function 'XS_Net__SSLeay_TLSv1_method':<br>

SSLeay.c:4825: warning: assignment discards qualifiers from pointer target type<br>

SSLeay.c: In function 'XS_Net__SSLeay_get_ssl_method':<br>

SSLeay.c:4870: warning: assignment discards qualifiers from pointer target type<br>

SSLeay.c: In function 'XS_Net__SSLeay_get_current_cipher':<br>

SSLeay.c:6086: warning: assignment discards qualifiers from pointer target type<br>

SSLeay.c: In function 'XS_Net__SSLeay_X509_VERIFY_PARAM_lookup':<br>

SSLeay.c:8665: warning: assignment discards qualifiers from pointer target type<br>

SSLeay.c: In function 'XS_Net__SSLeay_X509_policy_node_get0_policy':<br>

SSLeay.c:8858: warning: assignment discards qualifiers from pointer target type<br>

SSLeay.c: In function 'XS_Net__SSLeay_X509_policy_node_get0_parent':<br>

SSLeay.c:8902: warning: assignment discards qualifiers from pointer target type<br>

<br>

which is IMHO only related to 'SSL_METHOD *' vs 'const SSL_METHOD *' issue.<br>

<br>

Anyway thanks for your time.<br>

<br>

--<br>

kmx<br>

<br>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980905" href="/Public/Bug/Display.html?id=53585#txn-980905">#</a>      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;23&nbsp;13:32:18&nbsp;2011</span>
    <span class="description">DOUGDUDE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/980905/510732/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/510732">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Sep 23 03:14:56 2011, KMX wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; thanks for your effort. Version 1.40 installs fine on MS Windows 64bit
&gt; Strawberry perl.
&gt; 
&gt; There are just some compiler warnings:
&gt; 
&gt; SSLeay.c: In function &#39;XS_Net__SSLeay_SSLv3_method&#39;:
&gt; SSLeay.c:4804: warning: assignment discards qualifiers from pointer
&gt; target type
&gt; SSLeay.c: In function &#39;XS_Net__SSLeay_TLSv1_method&#39;:
&gt; SSLeay.c:4825: warning: assignment discards qualifiers from pointer
&gt; target type
&gt; SSLeay.c: In function &#39;XS_Net__SSLeay_get_ssl_method&#39;:
&gt; SSLeay.c:4870: warning: assignment discards qualifiers from pointer
&gt; target type
&gt; SSLeay.c: In function &#39;XS_Net__SSLeay_get_current_cipher&#39;:
&gt; SSLeay.c:6086: warning: assignment discards qualifiers from pointer
&gt; target type
&gt; SSLeay.c: In function &#39;XS_Net__SSLeay_X509_VERIFY_PARAM_lookup&#39;:
&gt; SSLeay.c:8665: warning: assignment discards qualifiers from pointer
&gt; target type
&gt; SSLeay.c: In function &#39;XS_Net__SSLeay_X509_policy_node_get0_policy&#39;:
&gt; SSLeay.c:8858: warning: assignment discards qualifiers from pointer
&gt; target type
&gt; SSLeay.c: In function &#39;XS_Net__SSLeay_X509_policy_node_get0_parent&#39;:
&gt; SSLeay.c:8902: warning: assignment discards qualifiers from pointer
&gt; target type
&gt; 
&gt; which is IMHO only related to &#39;SSL_METHOD *&#39; vs &#39;const SSL_METHOD *&#39;
&gt; issue.
&gt; 
&gt; Anyway thanks for your time.
&gt; 
&gt; --
&gt; kmx
</div>
Yea. I looked into that, but I&#39;m not sure how to fix it. The problem is
that those functions return constant pointers, but the assignment is to
a non-constant. Even then, the constantness would be stripped anyway
when it was changed into an IV in Perl, so there isn&#39;t a way I know of
for the XS to be constant-correct there.

Since I do not know the answer and the warnings to not harm the
functionality &#40;plus they have been there for a long time&#41; I didn&#39;t have
time to spend trying to see how to silence them &#40;plus they don&#39;t hurt
the functionality&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980916" href="/Public/Bug/Display.html?id=53585#txn-980916">#</a>      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;23&nbsp;14:22:24&nbsp;2011</span>
    <span class="description">DOUGDUDE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/980916/510742/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/510742">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 550b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">KMX, after further investigation it turned out when I was trying to
correct those warnings, I was changing code that did not apply to the
version of OpenSSL I have installed, and thus why I never saw results.

I have attached a patch here which changes those function signatures to
be constant. I have only tests these changes on OpenSSL 1.0.0, though,
so I am not sure if they will break anything in older versions &#40;though I
doubt it&#41;. Before I changed any of the signatures, I checked with the
OpenSSL header files to be sure the signature matched.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0003-Change-function-signatures-to-be-const-correct.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/980916/510743/0003-Change-function-signatures-to-be-const-correct.patch">Download 0003-Change-function-signatures-to-be-const-correct.patch</a><br />
<span class="downloadcontenttype">text/x-diff 3.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From f87d4c9a4f85694c3643be41ff5c0a0a16a0be33 Mon Sep 17 00:00:00 2001
From: Douglas Christopher Wilson &lt;doug@somethingdoug.com&gt;
Date: Fri, 23 Sep 2011 14:17:40 -0400
Subject: [PATCH] Change function signatures to be const-correct

There were various function signatures where OpenSSL returned a
constant pointer but that was not honored in the XS code. These
functions signatures have been changed to look for a const.
---
 SSLeay.xs |   30 +++++++++++++++---------------
 typemap   |    7 +++++--
 2 files changed, 20 insertions&#40;+&#41;, 17 deletions&#40;-&#41;

diff --git a/SSLeay.xs b/SSLeay.xs
index 7fa0fe6..0943c50 100644
--- a/SSLeay.xs
+++ b/SSLeay.xs
@@ -1916,24 +1916,24 @@ RIPEMD160&#40;data&#41;
 #ifndef OPENSSL_NO_SSL2 
 #if OPENSSL_VERSION_NUMBER &lt; 0x10000000L
 
-SSL_METHOD *
+const SSL_METHOD *
 SSLv2_method&#40;&#41;
 
 #endif
 #endif
 
-SSL_METHOD *
+const SSL_METHOD *
 SSLv3_method&#40;&#41;
 
-SSL_METHOD *
+const SSL_METHOD *
 TLSv1_method&#40;&#41;
 
 int
 SSL_set_ssl_method&#40;ssl, method&#41;
-     SSL *          ssl
-     SSL_METHOD *   method
+     SSL *               ssl
+     const SSL_METHOD *  method
 
-SSL_METHOD *
+const SSL_METHOD *
 SSL_get_ssl_method&#40;ssl&#41;
      SSL *          ssl
 
@@ -2045,13 +2045,13 @@ SSL_check_private_key&#40;ctx&#41;
 
 char *
 SSL_CIPHER_description&#40;cipher,buf,size&#41;
-     SSL_CIPHER *  cipher
+     const SSL_CIPHER *  cipher
      char *	buf
      int 	size
 
 int	
 SSL_CIPHER_get_bits&#40;c,alg_bits&#41;
-     SSL_CIPHER *	c
+     const SSL_CIPHER *	c
      int *	alg_bits
 
 int 
@@ -2176,7 +2176,7 @@ SSL_CTX_set_quiet_shutdown&#40;ctx,mode&#41;
 int 
 SSL_CTX_set_ssl_version&#40;ctx,meth&#41;
      SSL_CTX *	ctx
-     SSL_METHOD *	meth
+     const SSL_METHOD *	meth
 
 long 
 SSL_CTX_set_timeout&#40;ctx,t&#41;
@@ -2221,7 +2221,7 @@ SSL *
 SSL_dup&#40;ssl&#41;
      SSL *	ssl
 
-SSL_CIPHER *
+const SSL_CIPHER *
 SSL_get_current_cipher&#40;s&#41;
      SSL *	s
 
@@ -2944,7 +2944,7 @@ int
 X509_VERIFY_PARAM_add0_table&#40;param&#41;
     X509_VERIFY_PARAM *param
 
-X509_VERIFY_PARAM *
+const X509_VERIFY_PARAM *
 X509_VERIFY_PARAM_lookup&#40;name&#41;
     const char *name
 
@@ -2981,17 +2981,17 @@ X509_policy_level_get0_node&#40;level, i&#41;
     X509_POLICY_LEVEL *level
     int i
 
-ASN1_OBJECT *
+const ASN1_OBJECT *
 X509_policy_node_get0_policy&#40;node&#41;
-    X509_POLICY_NODE *node
+    const X509_POLICY_NODE *node
 
 STACK_OF&#40;POLICYQUALINFO&#41; *
 X509_policy_node_get0_qualifiers&#40;node&#41;
     X509_POLICY_NODE *node
 
-X509_POLICY_NODE *
+const X509_POLICY_NODE *
 X509_policy_node_get0_parent&#40;node&#41;
-    X509_POLICY_NODE *node
+    const X509_POLICY_NODE *node
 
 #endif
 
diff --git a/typemap b/typemap
index b7852f5..5734b4f 100644
--- a/typemap
+++ b/typemap
@@ -1,5 +1,5 @@
 TYPEMAP
-SSL_METHOD *	T_PTR
+const SSL_METHOD *	T_PTR
 SSL_CTX *	T_PTR
 SSL_SESSION *	T_PTR
 SSL *		T_PTR
@@ -27,18 +27,21 @@ const unsigned char * T_PV
 CRYPTO_EX_new *  T_PTR
 CRYPTO_EX_dup *  T_PTR
 CRYPTO_EX_free * T_PTR
-SSL_CIPHER *     T_PTR
+const SSL_CIPHER *     T_PTR
 int *		 T_PTR
 COMP_METHOD *	 T_PTR
 X509_STORE *	 T_PTR
 X509_NAME_STACK *   T_PTR
 X509_VERIFY_PARAM * T_PTR
+const X509_VERIFY_PARAM * T_PTR
 X509_POLICY_LEVEL * T_PTR
 X509_POLICY_TREE *  T_PTR
 X509_POLICY_NODE *  T_PTR
+const X509_POLICY_NODE *  T_PTR
 STACK_OF&#40;X509_POLICY_NODE&#41; *  T_PTR
 STACK_OF&#40;POLICYQUALINFO&#41; * T_PTR
 ASN1_OBJECT *       T_PTR
+const ASN1_OBJECT *       T_PTR
 STACK_OF&#40;ASN1_OBJECT&#41; * T_PTR
 ENGINE *         T_PTR
 pem_password_cb *  T_PTR
-- 
1.7.6.msysgit.0

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980961" href="/Public/Bug/Display.html?id=53585#txn-980961">#</a>      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;23&nbsp;17:05:34&nbsp;2011</span>
    <span class="description">MIKEM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">30 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/980961/510765/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/510765">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 845b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Douglas,

thanks for this patch.
It does indeed fix the warnings in 1.0, but introduces some when 
compiled against 0.9.8.
Nevertheless, I have added your patch to svn. It will appear in a 
forthcoming release.

Cheers.

On Fri Sep 23 14:22:24 2011, DOUGDUDE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; KMX, after further investigation it turned out when I was trying to
&gt; correct those warnings, I was changing code that did not apply to 
</div>the
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; version of OpenSSL I have installed, and thus why I never saw 
</div>results.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I have attached a patch here which changes those function signatures 
</div>to
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; be constant. I have only tests these changes on OpenSSL 1.0.0, 
</div>though,
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; so I am not sure if they will break anything in older versions 
</div>&#40;though I
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; doubt it&#41;. Before I changed any of the signatures, I checked with 
</div>the
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; OpenSSL header files to be sure the signature matched.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980964" href="/Public/Bug/Display.html?id=53585#txn-980964">#</a>      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;23&nbsp;17:05:36&nbsp;2011</span>
    <span class="description">MIKEM [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980989" href="/Public/Bug/Display.html?id=53585#txn-980989">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;24&nbsp;02:58:31&nbsp;2011</span>
    <span class="description">DOUGDUDE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/980989/510785/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/510785">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 489b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Sep 23 17:05:34 2011, MIKEM wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Douglas,
&gt; 
&gt; thanks for this patch.
&gt; It does indeed fix the warnings in 1.0, but introduces some when 
&gt; compiled against 0.9.8.
&gt; Nevertheless, I have added your patch to svn. It will appear in a 
&gt; forthcoming release.
&gt; 
&gt; Cheers.
&gt; 
</div>
MIKEM,

Unless you end up needing to release it quickly, if you want to wait for
a bit, I&#39;m going to get the 0.9.8 OpenSSL libraries and link against
them and see what is causing the new warnings there.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980992" href="/Public/Bug/Display.html?id=53585#txn-980992">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;24&nbsp;02:58:34&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-980997" href="/Public/Bug/Display.html?id=53585#txn-980997">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;24&nbsp;03:18:17&nbsp;2011</span>
    <span class="description">DOUGDUDE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/980997/510792/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/510792">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 245b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ok. The reason those warnings popped up is because 2 methods before
1.0.0 took an SSL_METHOD pointer not as a const while in 1.0.0 they are
const. I&#39;ve attached a patch that chooses the correct signature. This is
tested against 1.0.0 and 0.9.8q.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0004-Handle-some-function-signatures-that-changed-in-Open.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/980997/510793/0004-Handle-some-function-signatures-that-changed-in-Open.patch">Download 0004-Handle-some-function-signatures-that-changed-in-Open.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 26a50987f7a9ad81954752490b92734d1d34138d Mon Sep 17 00:00:00 2001
From: Douglas Christopher Wilson &lt;doug@somethingdoug.com&gt;
Date: Sat, 24 Sep 2011 03:12:12 -0400
Subject: [PATCH] Handle some function signatures that changed in OpenSSL
 1.0.0

---
 SSLeay.xs |   22 ++++++++++++++++++++++
 typemap   |    1 +
 2 files changed, 23 insertions&#40;+&#41;, 0 deletions&#40;-&#41;

diff --git a/SSLeay.xs b/SSLeay.xs
index 62cde30..57bc238 100644
--- a/SSLeay.xs
+++ b/SSLeay.xs
@@ -1873,11 +1873,22 @@ SSLv3_method&#40;&#41;
 const SSL_METHOD *
 TLSv1_method&#40;&#41;
 
+#if OPENSSL_VERSION_NUMBER &lt; 0x10000000L
+
+int
+SSL_set_ssl_method&#40;ssl, method&#41;
+     SSL *         ssl
+     SSL_METHOD *  method
+
+#else
+
 int
 SSL_set_ssl_method&#40;ssl, method&#41;
      SSL *               ssl
      const SSL_METHOD *  method
 
+#endif
+
 const SSL_METHOD *
 SSL_get_ssl_method&#40;ssl&#41;
      SSL *          ssl
@@ -2118,11 +2129,22 @@ SSL_CTX_set_quiet_shutdown&#40;ctx,mode&#41;
      SSL_CTX *	ctx
      int 	mode
 
+#if OPENSSL_VERSION_NUMBER &lt; 0x10000000L
+
+int
+SSL_CTX_set_ssl_version&#40;ctx,meth&#41;
+     SSL_CTX *	ctx
+     SSL_METHOD *	meth
+
+#else
+
 int 
 SSL_CTX_set_ssl_version&#40;ctx,meth&#41;
      SSL_CTX *	ctx
      const SSL_METHOD *	meth
 
+#endif
+
 long 
 SSL_CTX_set_timeout&#40;ctx,t&#41;
      SSL_CTX *	ctx
diff --git a/typemap b/typemap
index 5734b4f..3af0c5a 100644
--- a/typemap
+++ b/typemap
@@ -1,4 +1,5 @@
 TYPEMAP
+SSL_METHOD *	T_PTR
 const SSL_METHOD *	T_PTR
 SSL_CTX *	T_PTR
 SSL_SESSION *	T_PTR
-- 
1.7.5.4

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-981002" href="/Public/Bug/Display.html?id=53585#txn-981002">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;24&nbsp;03:29:46&nbsp;2011</span>
    <span class="description">MIKEM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/981002/510798/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/510798">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 580b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Douglas,

nearly there, only one warning when I compile against OpenSSL-0.9.8i:

SSLeay.c: In function â€˜XS_Net__SSLeay_CIPHER_descriptionâ€™:
SSLeay.c:5386: warning: passing argument 1 of â€˜SSL_CIPHER_descriptionâ€™ 
discards qualifiers from pointer target type

Cheers.

On Sat Sep 24 03:18:17 2011, DOUGDUDE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Ok. The reason those warnings popped up is because 2 methods before
&gt; 1.0.0 took an SSL_METHOD pointer not as a const while in 1.0.0 they 
</div>are
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; const. I&#39;ve attached a patch that chooses the correct signature. 
</div>This is
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; tested against 1.0.0 and 0.9.8q.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-981016" href="/Public/Bug/Display.html?id=53585#txn-981016">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;24&nbsp;04:21:21&nbsp;2011</span>
    <span class="description">DOUGDUDE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/981016/510811/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/510811">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 424b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Sep 24 03:29:46 2011, MIKEM wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Douglas,
&gt; 
&gt; nearly there, only one warning when I compile against OpenSSL-0.9.8i:
&gt; 
&gt; SSLeay.c: In function â€˜XS_Net__SSLeay_CIPHER_descriptionâ€™:
&gt; SSLeay.c:5386: warning: passing argument 1 of â€˜SSL_CIPHER_descriptionâ€™ 
&gt; discards qualifiers from pointer target type
&gt; 
&gt; Cheers.
&gt; 
</div>
Looks like SSL_CIPHER_description added const in 0.9.8k. Here is a patch
for that.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0005-Fix-a-function-signature-for-0.9.8k.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/981016/510812/0005-Fix-a-function-signature-for-0.9.8k.patch">Download 0005-Fix-a-function-signature-for-0.9.8k.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From c7d901123eb6dd2a336bab39193d41445c0b5d0b Mon Sep 17 00:00:00 2001
From: Douglas Christopher Wilson &lt;doug@somethingdoug.com&gt;
Date: Sat, 24 Sep 2011 04:20:02 -0400
Subject: [PATCH] Fix a function signature for &lt; 0.9.8k

---
 SSLeay.xs |   12 ++++++++++++
 typemap   |    1 +
 2 files changed, 13 insertions&#40;+&#41;, 0 deletions&#40;-&#41;

diff --git a/SSLeay.xs b/SSLeay.xs
index a041ca6..cbf4b5f 100644
--- a/SSLeay.xs
+++ b/SSLeay.xs
@@ -2054,12 +2054,24 @@ int
 SSL_check_private_key&#40;ctx&#41;
      SSL *	ctx
 
+#if OPENSSL_VERSION_NUMBER &lt; 0x009080bfL
+
+char *
+SSL_CIPHER_description&#40;cipher,buf,size&#41;
+     SSL_CIPHER *	cipher
+     char *	buf
+     int 	size
+
+#else
+
 char *
 SSL_CIPHER_description&#40;cipher,buf,size&#41;
      const SSL_CIPHER *  cipher
      char *	buf
      int 	size
 
+#endif
+
 int	
 SSL_CIPHER_get_bits&#40;c,alg_bits&#41;
      const SSL_CIPHER *	c
diff --git a/typemap b/typemap
index 3af0c5a..270deb0 100644
--- a/typemap
+++ b/typemap
@@ -28,6 +28,7 @@ const unsigned char * T_PV
 CRYPTO_EX_new *  T_PTR
 CRYPTO_EX_dup *  T_PTR
 CRYPTO_EX_free * T_PTR
+SSL_CIPHER *     T_PTR
 const SSL_CIPHER *     T_PTR
 int *		 T_PTR
 COMP_METHOD *	 T_PTR
-- 
1.7.6.msysgit.0

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-981029" href="/Public/Bug/Display.html?id=53585#txn-981029">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;24&nbsp;06:32:44&nbsp;2011</span>
    <span class="description">MIKEM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/981029/510815/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/510815">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 600b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Nice work Douglas,

no more warnings on 0.9.8i
On Sat Sep 24 04:21:21 2011, .

Ill push out a new release tomorrow.

Cheers.


DOUGDUDE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat Sep 24 03:29:46 2011, MIKEM wrote:
<div class="message-stanza open">&gt; &gt; Hi Douglas,
&gt; &gt; 
&gt; &gt; nearly there, only one warning when I compile against 
</div></div>OpenSSL-0.9.8i:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; 
&gt; &gt; SSLeay.c: In function â€˜XS_Net__SSLeay_CIPHER_descriptionâ€™:
&gt; &gt; SSLeay.c:5386: warning: passing argument 1 
</div></div>of â€˜SSL_CIPHER_descriptionâ€™ 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; discards qualifiers from pointer target type
&gt; &gt; 
&gt; &gt; Cheers.
&gt; &gt; 
</div>&gt; 
&gt; Looks like SSL_CIPHER_description added const in 0.9.8k. Here is a 
</div>patch
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; for that.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-981166" href="/Public/Bug/Display.html?id=53585#txn-981166">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;24&nbsp;18:11:06&nbsp;2011</span>
    <span class="description">MIKEM [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-981167" href="/Public/Bug/Display.html?id=53585#txn-981167">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;24&nbsp;18:12:23&nbsp;2011</span>
    <span class="description">MIKEM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/981167/510895/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/510895">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 837b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Douglas,

OK, now have clean compiles with 0.9.8a through to 1.0.0.
Thanks!
New version 1.41 has been uploaded to CPAN.

Cheers.

On Sat Sep 24 06:32:44 2011, MIKEM wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Nice work Douglas,
&gt; 
&gt; no more warnings on 0.9.8i
&gt; On Sat Sep 24 04:21:21 2011, .
&gt; 
&gt; Ill push out a new release tomorrow.
&gt; 
&gt; Cheers.
&gt; 
&gt; 
&gt; DOUGDUDE wrote:
<div class="message-stanza open">&gt; &gt; On Sat Sep 24 03:29:46 2011, MIKEM wrote:
<div class="message-stanza open">&gt; &gt; &gt; Hi Douglas,
&gt; &gt; &gt; 
&gt; &gt; &gt; nearly there, only one warning when I compile against 
</div></div>&gt; OpenSSL-0.9.8i:
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; 
&gt; &gt; &gt; SSLeay.c: In function â€˜XS_Net__SSLeay_CIPHER_descriptionâ€™:
&gt; &gt; &gt; SSLeay.c:5386: warning: passing argument 1 
</div></div>&gt; of â€˜SSL_CIPHER_descriptionâ€™ 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; discards qualifiers from pointer target type
&gt; &gt; &gt; 
&gt; &gt; &gt; Cheers.
&gt; &gt; &gt; 
</div>&gt; &gt; 
&gt; &gt; Looks like SSL_CIPHER_description added const in 0.9.8k. Here is a 
</div>&gt; patch
<div class="message-stanza open">&gt; &gt; for that.
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-981170" href="/Public/Bug/Display.html?id=53585#txn-981170">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;24&nbsp;18:12:25&nbsp;2011</span>
    <span class="description">MIKEM [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 1.036453</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
