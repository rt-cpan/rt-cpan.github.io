<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #81368 for Method-Signatures: miscellaneous parsing bugs</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #81368 for Method-Signatures: miscellaneous parsing bugs</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Method-Signatures">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Method-Signatures">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Method-Signatures">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Method-Signatures">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Method-Signatures">Method-Signatures CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">81368</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Method-Signatures">Method-Signatures</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
MAUKE [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-219986-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
20120523    </td>
  </tr>
  <tr id="CF-219987-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=81368">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1146046" href="/Public/Bug/Display.html?id=81368#txn-1146046">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;23&nbsp;04:13:17&nbsp;2012</span>
    <span class="description">MAUKE [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> miscellaneous parsing bugs</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1146046/602690/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/602690">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 6.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">$ cat parse1
#!perl
use Method::Signatures;

my $f = func &#40;&#41; {} 1;
__END__
$ perl -MO=Deparse parse1
Too many arguments for main::func at parse1 line 4, near &#34;1;&#34;
parse1 had compilation errors.
use Method::Signatures;
BEGIN {
    $^H{&#39;Devel::Pragma&#39;} = &#39;1&#39;;
    $^H{&#39;METHOD_SIGNATURES_compile_at_BEGIN&#39;} = &#39;1&#39;;
}
my $f = &#38;func&#40;sub {
    &#39;Method::Signatures&#39;-&gt;too_many_args_error&#40;0&#41; if @_ &gt; 0;
}
, 1&#41;;
__DATA__

This should be a syntax error.

$ cat parse2
#!perl
use Method::Signatures;

my $f = func &#40;&#41; {} ? &#39;ok&#39; : &#39;not ok&#39;;
__END__
$ perl -MO=Deparse parse2
Use of ?PATTERN? without explicit operator is deprecated at parse2 line 4.
Search pattern not terminated or ternary operator parsed as search
pattern at parse2 line 4.
use Method::Signatures;

This should not be a syntax error. Bonus problem:

$ perl parse2
Use of ?PATTERN? without explicit operator is deprecated at parse2 line 4.
Search pattern not terminated or ternary operator parsed as search
pattern at parse2 line 4.
*** glibc detected *** perl: double free or corruption &#40;fasttop&#41;:
0x08fc6268 ***
======= Backtrace: =========
/lib/i686/cmov/libc.so.6&#40;+0x6af71&#41;[0xb763df71]
/lib/i686/cmov/libc.so.6&#40;+0x6c7c8&#41;[0xb763f7c8]
/lib/i686/cmov/libc.so.6&#40;cfree+0x6d&#41;[0xb76428ad]
perl&#40;Perl_op_free+0xa3&#41;[0x8063513]
======= Memory map: ========
08048000-0818c000 r-xp 00000000 08:01 9979965    /home/mauke/usr/bin/perl
0818c000-0818f000 rw-p 00144000 08:01 9979965    /home/mauke/usr/bin/perl
08fab000-09193000 rw-p 00000000 00:00 0          [heap]
b7100000-b7121000 rw-p 00000000 00:00 0 
b7121000-b7200000 ---p 00000000 00:00 0 
b723a000-b7253000 r-xp 00000000 08:01 9978052   
/home/mauke/usr/lib/libgcc_s.so.1
b7253000-b7254000 rw-p 00019000 08:01 9978052   
/home/mauke/usr/lib/libgcc_s.so.1
b7254000-b7257000 r-xp 00000000 08:01 11288579  
/home/mauke/usr/lib/perl5/site_perl/5.16.2/i686-linux/auto/Devel/Pragma/Pragma.so
b7257000-b7258000 rw-p 00002000 08:01 11288579  
/home/mauke/usr/lib/perl5/site_perl/5.16.2/i686-linux/auto/Devel/Pragma/Pragma.so
b7258000-b725a000 r-xp 00000000 08:01 11272210  
/home/mauke/usr/lib/perl5/site_perl/5.16.2/i686-linux/auto/B/Hooks/OP/Annotation/Annotation.so
b725a000-b725b000 rw-p 00001000 08:01 11272210  
/home/mauke/usr/lib/perl5/site_perl/5.16.2/i686-linux/auto/B/Hooks/OP/Annotation/Annotation.so
b725b000-b7265000 r-xp 00000000 08:01 11264610  
/home/mauke/usr/lib/perl5/site_perl/5.16.2/i686-linux/auto/Data/Alias/Alias.so
b7265000-b7266000 rw-p 00009000 08:01 11264610  
/home/mauke/usr/lib/perl5/site_perl/5.16.2/i686-linux/auto/Data/Alias/Alias.so
b7266000-b7268000 r-xp 00000000 08:01 10527226  
/home/mauke/usr/lib/perl5/site_perl/5.16.1/i686-linux/auto/Sub/Name/Name.so
b7268000-b7269000 rw-p 00001000 08:01 10527226  
/home/mauke/usr/lib/perl5/site_perl/5.16.1/i686-linux/auto/Sub/Name/Name.so
b7269000-b726c000 r-xp 00000000 08:01 10520143  
/home/mauke/usr/lib/perl5/site_perl/5.16.1/i686-linux/auto/Params/Util/Util.so
b726c000-b726d000 rw-p 00002000 08:01 10520143  
/home/mauke/usr/lib/perl5/site_perl/5.16.1/i686-linux/auto/Params/Util/Util.so
b726d000-b7273000 r-xp 00000000 08:01 11102281  
/home/mauke/usr/lib/perl5/site_perl/5.16.1/i686-linux/auto/Variable/Magic/Magic.so
b7273000-b7274000 rw-p 00005000 08:01 11102281  
/home/mauke/usr/lib/perl5/site_perl/5.16.1/i686-linux/auto/Variable/Magic/Magic.so
b7274000-b73d1000 r--p 001ec000 08:01 6710223   
/usr/lib/locale/locale-archive
b73d1000-b75d1000 r--p 00000000 08:01 6710223   
/usr/lib/locale/locale-archive
b75d1000-b75d3000 rw-p 00000000 00:00 0 
b75d3000-b7713000 r-xp 00000000 08:01 4923415   
/lib/i686/cmov/libc-2.11.3.so
b7713000-b7714000 ---p 00140000 08:01 4923415   
/lib/i686/cmov/libc-2.11.3.so
b7714000-b7716000 r--p 00140000 08:01 4923415   
/lib/i686/cmov/libc-2.11.3.so
b7716000-b7717000 rw-p 00142000 08:01 4923415   
/lib/i686/cmov/libc-2.11.3.so
b7717000-b771a000 rw-p 00000000 00:00 0 
b771a000-b771c000 r-xp 00000000 08:01 4923406   
/lib/i686/cmov/libutil-2.11.3.so
b771c000-b771d000 r--p 00001000 08:01 4923406   
/lib/i686/cmov/libutil-2.11.3.so
b771d000-b771e000 rw-p 00002000 08:01 4923406   
/lib/i686/cmov/libutil-2.11.3.so
b771e000-b7727000 r-xp 00000000 08:01 4923400   
/lib/i686/cmov/libcrypt-2.11.3.so
b7727000-b7728000 r--p 00008000 08:01 4923400   
/lib/i686/cmov/libcrypt-2.11.3.so
b7728000-b7729000 rw-p 00009000 08:01 4923400   
/lib/i686/cmov/libcrypt-2.11.3.so
b7729000-b7750000 rw-p 00000000 00:00 0 
b7750000-b7774000 r-xp 00000000 08:01 4923397   
/lib/i686/cmov/libm-2.11.3.so
b7774000-b7775000 r--p 00023000 08:01 4923397   
/lib/i686/cmov/libm-2.11.3.so
b7775000-b7776000 rw-p 00024000 08:01 4923397   
/lib/i686/cmov/libm-2.11.3.so
b7776000-b7777000 rw-p 00000000 00:00 0 
b7777000-b7779000 r-xp 00000000 08:01 4923396   
/lib/i686/cmov/libdl-2.11.3.so
b7779000-b777a000 r--p 00001000 08:01 4923396   
/lib/i686/cmov/libdl-2.11.3.so
b777a000-b777b000 rw-p 00002000 08:01 4923396   
/lib/i686/cmov/libdl-2.11.3.so
b777b000-b778e000 r-xp 00000000 08:01 4923399   
/lib/i686/cmov/libnsl-2.11.3.so
b778e000-b778f000 r--p 00012000 08:01 4923399   
/lib/i686/cmov/libnsl-2.11.3.so
b778f000-b7790000 rw-p 00013000 08:01 4923399   
/lib/i686/cmov/libnsl-2.11.3.so
b7790000-b7792000 rw-p 00000000 00:00 0 
b7794000-b779b000 r-xp 00000000 08:01 11109083  
/home/mauke/usr/lib/perl5/site_perl/5.16.1/i686-linux/auto/Devel/Declare/Declare.so
b779b000-b779c000 rw-p 00006000 08:01 11109083  
/home/mauke/usr/lib/perl5/site_perl/5.16.1/i686-linux/auto/Devel/Declare/Declare.so
b779c000-b779d000 r-xp 00000000 08:01 10453002  
/home/mauke/usr/lib/perl5/site_perl/5.16.1/i686-linux/auto/B/Hooks/OP/Check/Check.so
b779d000-b779e000 rw-p 00001000 08:01 10453002  
/home/mauke/usr/lib/perl5/site_perl/5.16.1/i686-linux/auto/B/Hooks/OP/Check/Check.so
b779e000-b77a3000 r-xp 00000000 08:01 11223554  
/home/mauke/usr/lib/perl5/5.16.2/i686-linux/auto/List/Util/Util.so
b77a3000-b77a4000 rw-p 00004000 08:01 11223554  
/home/mauke/usr/lib/perl5/5.16.2/i686-linux/auto/List/Util/Util.so
b77a4000-b77a6000 rw-p 00000000 00:00 0 
b77a6000-b77a7000 r-xp 00000000 00:00 0          [vdso]
b77a7000-b77c2000 r-xp 00000000 08:01 4907447    /lib/ld-2.11.3.so
b77c2000-b77c3000 r--p 0001b000 08:01 4907447    /lib/ld-2.11.3.so
b77c3000-b77c4000 rw-p 0001c000 08:01 4907447    /lib/ld-2.11.3.so
bfa05000-bfa1a000 rw-p 00000000 00:00 0          [stack]
Aborted
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1146350" href="/Public/Bug/Display.html?id=81368#txn-1146350">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;23&nbsp;19:44:35&nbsp;2012</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #81368] miscellaneous parsing bugs</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 23 Nov 2012 16:44:16 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Method-Signatures [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1146350/602849/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/602849">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2012.11.23 1:13 AM, Lukas Mai via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; $ cat parse1
&gt; #!perl
&gt; use Method::Signatures;
&gt; 
&gt; my $f = func &#40;&#41; {} 1;
&gt; __END__
&gt; $ perl -MO=Deparse parse1
&gt; Too many arguments for main::func at parse1 line 4, near &#34;1;&#34;
&gt; parse1 had compilation errors.
&gt; use Method::Signatures;
&gt; BEGIN {
&gt;     $^H{&#39;Devel::Pragma&#39;} = &#39;1&#39;;
&gt;     $^H{&#39;METHOD_SIGNATURES_compile_at_BEGIN&#39;} = &#39;1&#39;;
&gt; }
&gt; my $f = &#38;func&#40;sub {
&gt;     &#39;Method::Signatures&#39;-&gt;too_many_args_error&#40;0&#41; if @_ &gt; 0;
&gt; }
&gt; , 1&#41;;
&gt; __DATA__
&gt; 
&gt; This should be a syntax error.
</div>
That&#39;s a tough one and it has to do with the limits of our ability to rewrite
the code.  We can&#39;t get rid of the &#34;func&#34; part which means it compiles to this:

    sub func &#40;&#38;&#41; { return $_[0] }
    my $f = func  {Method::Signatures-&gt;too_many_args_error&#40;0&#41; if @_ &gt; 0; } 1;

We could compile it to this:

    sub func &#40;&#38;&#41; { return $_[0] }
    my $f = func sub {Method::Signatures-&gt;too_many_args_error&#40;0&#41; if @_ &gt; 0; } 1;

But unfortunately that breaks Perl&#39;s parsing of things like this.

    my $a = [ func &#40;&#41; {}, 1 ];

$ perl -wle &#39;sub func&#40;&#38;&#41; { return $_[0] } $a = [ func {}, 1 ];  print $a-&gt;[0]&#39;
CODE&#40;0x10082e440&#41;

$ perl -wle &#39;sub func&#40;&#38;&#41; { return $_[0] } $a = [ func sub {}, 1 ];  print $a-&gt;[0]&#39;
Too many arguments for main::func at -e line 1, near &#34;1 ]&#34;
Execution of -e aborted due to compilation errors.

See t/larna.t for the relevant tests.

So we&#39;re kinda stuck.

The important thing is its a compile time error.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; $ cat parse2
&gt; #!perl
&gt; use Method::Signatures;
&gt; 
&gt; my $f = func &#40;&#41; {} ? &#39;ok&#39; : &#39;not ok&#39;;
&gt; __END__
&gt; $ perl -MO=Deparse parse2
&gt; Use of ?PATTERN? without explicit operator is deprecated at parse2 line 4.
&gt; Search pattern not terminated or ternary operator parsed as search
&gt; pattern at parse2 line 4.
&gt; use Method::Signatures;
&gt; 
&gt; This should not be a syntax error. Bonus problem:
</div>
Yeah, that&#39;s related to how perl is parsing

    sub func &#40;&#38;&#41; { return $_[0] }
    my $f = func {} ? &#39;ok&#39; : &#39;not ok&#39;;

The only thing which works is this:

    sub func &#40;&#38;&#41; { return $_[0] }
    my $f = func&#40; sub {} &#41; ? &#39;ok&#39; : &#39;not ok&#39;;

Which would probably work, and not trip the larna.t tests, but it requires
more coordination.  inject_if_block&#40;&#41; would add &#34;&#40; sub&#34; before and
Devel::Declare::Context::Simple-&gt;inject_scope would be overridden to add &#34;&#41;&#34;
at the end but only for anonymous routines.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; $ perl parse2
&gt; Use of ?PATTERN? without explicit operator is deprecated at parse2 line 4.
&gt; Search pattern not terminated or ternary operator parsed as search
&gt; pattern at parse2 line 4.
&gt; *** glibc detected *** perl: double free or corruption &#40;fasttop&#41;:
&gt; 0x08fc6268 ***
</div>
Not even touching it.


-- 
164. There is no such thing as a were-virgin.
    -- The 213 Things Skippy Is No Longer Allowed To Do In The U.S. Army
           <span class="clickylink"><a target="new" rel="nofollow" href="http://skippyslist.com/list/">http://skippyslist.com/list/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1146353" href="/Public/Bug/Display.html?id=81368#txn-1146353">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;23&nbsp;19:44:36&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.236253</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
