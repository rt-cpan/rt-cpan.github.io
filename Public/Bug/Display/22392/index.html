<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #22392 for DateTime: t/20infinite.t fails &#40;maybe due to 64 bit Perl&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #22392 for DateTime: t/20infinite.t fails &#40;maybe due to 64 bit Perl&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DateTime/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DateTime/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DateTime/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DateTime/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/houseabsolute/DateTime.pm/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/DateTime">DateTime CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">22392</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DateTime/Active/">DateTime</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
FANY [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-9734-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.34    </td>
  </tr>
  <tr id="CF-9735-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.39    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;21&nbsp;09:15:42&nbsp;2006</span>
    <span class="description">FANY [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> t/20infinite.t fails &#40;maybe due to 64 bit Perl&#41;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">See output of &#34;make test TEST_VERBOSE=1 TEST_FILES=t/20infinite.t&#34; attached.

Please note that I use a Perl interpreter with 64 bit integers and long
doubles:

ubook:/private/var/local/spool/perl/CPAN/build/DateTime-0.34 fany$ perl
-VSummary of my perl5 &#40;revision 5 version 8 subversion 8&#41; configuration:
 Platform:    osname=darwin, osvers=8.5.0,
archname=darwin-64int-ld-2level    uname=&#39;darwin ubook.wlan 8.5.0 darwin
kernel version 8.5.0: sun jan 22 10:38:46 pst 2006;
root:xnu-792.6.61.obj~1release_ppc power macintosh powerpc &#39;   
config_args=&#39;&#39;    hint=recommended, useposix=true, d_sigaction=define  
 usethreads=undef use5005threads=undef useithreads=undef
usemultiplicity=undef    useperlio=define d_sfio=undef
uselargefiles=define usesocks=undef    use64bitint=define
use64bitall=undef uselongdouble=define    usemymalloc=n,
bincompat5005=undef  Compiler:    cc=&#39;cc&#39;, ccflags =&#39;-fno-common
-DPERL_DARWIN -no-cpp-precomp -fno-strict-aliasing -pipe
-Wdeclaration-after-statement&#39;,    optimize=&#39;-O3&#39;,   
cppflags=&#39;-no-cpp-precomp -fno-common -DPERL_DARWIN -no-cpp-precomp
-fno-strict-aliasing -pipe -Wdeclaration-after-statement&#39;   
ccversion=&#39;&#39;, gccversion=&#39;4.0.1 &#40;Apple Computer, Inc. build 5250&#41;&#39;,
gccosandvers=&#39;&#39;    intsize=4, longsize=4, ptrsize=4, doublesize=8,
byteorder=87654321    d_longlong=define, longlongsize=8,
d_longdbl=define, longdblsize=16    ivtype=&#39;long long&#39;, ivsize=8,
nvtype=&#39;long double&#39;, nvsize=16, Off_t=&#39;off_t&#39;, lseeksize=8   
alignbytes=8, prototype=define  Linker and Libraries:    ld=&#39;env
MACOSX_DEPLOYMENT_TARGET=10.3 cc&#39;, ldflags =&#39;&#39;    libpth=/usr/lib   
libs=-ldbm -ldl -lm -lc    perllibs=-ldl -lm -lc   
libc=/usr/lib/libc.dylib, so=dylib, useshrplib=false, libperl=libperl.a
   gnulibc_version=&#39;&#39;  Dynamic Linking:    dlsrc=dl_dlopen.xs,
dlext=bundle, d_dlsymun=undef, ccdlflags=&#39; &#39;    cccdlflags=&#39; &#39;,
lddlflags=&#39; -bundle -undefined dynamic_lookup&#39;Characteristics of this
binary &#40;from libperl&#41;:   Compile-time options: PERL_MALLOC_WRAP
USE_64_BIT_INT USE_LARGE_FILES                        USE_LONG_DOUBLE
USE_PERLIO  Built under darwin
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> typescript</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;21&nbsp;13:54:16&nbsp;2006</span>
    <span class="description">autarch [...] urth.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #22392] t/20infinite.t fails &#40;maybe due to 64 bit Perl&#41; </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 21 Oct 2006 12:53:56 -0500 &#40;CDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> via RT &lt;bug-DateTime [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dave Rolsky &lt;autarch [...] urth.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, 21 Oct 2006,  via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;     Subject: t/20infinite.t fails &#40;maybe due to 64 bit Perl&#41;
</div>
That seems pretty likely. Unfortunately I don&#39;t have access to a 64-bit 
Perl myself. I&#39;m signing up for Sourceforge&#39;s compile farm. Hopefully 
they&#39;ll have something I can use.


-dave

/*===================================================
VegGuide.Org                        www.BookIRead.com
Your guide to all that&#39;s veg.       My book blog
===================================================*/
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;21&nbsp;13:54:18&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;22&nbsp;01:27:26&nbsp;2006</span>
    <span class="description">autarch [...] urth.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #22392] t/20infinite.t fails &#40;maybe due to 64 bit Perl&#41; </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 22 Oct 2006 00:27:10 -0500 &#40;CDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;autarch [...] urth.org via RT&#34; &lt;bug-DateTime [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dave Rolsky &lt;autarch [...] urth.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, 21 Oct 2006, autarch@urth.org via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; That seems pretty likely. Unfortunately I don&#39;t have access to a 64-bit
&gt; Perl myself. I&#39;m signing up for Sourceforge&#39;s compile farm. Hopefully
&gt; they&#39;ll have something I can use.
</div>
I tested this on the Sourceforge compile farm with a 64-bit Perl 5.8.5, 
and the tests passed. I think it&#39;s a platform issue. It seems like on 
non-Linux OSs, the handling of infinite numbers &#40;at least in Perl&#41; is 
different than what I see on Linux.


-dave

/*===================================================
VegGuide.Org                        www.BookIRead.com
Your guide to all that&#39;s veg.       My book blog
===================================================*/
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;18&nbsp;11:22:07&nbsp;2007</span>
    <span class="description">DROLSKY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Oct 21 09:15:42 2006, FANY wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; See output of &#34;make test TEST_VERBOSE=1 TEST_FILES=t/20infinite.t&#34;
</div>attached.

I just released a new version of DateTime.pm &#40;0.36&#41; that tweaks how
infinity is defined. Could you try it out and see if this fixes the problem.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;20&nbsp;11:12:02&nbsp;2007</span>
    <span class="description">martin [...] sluka.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #22392] t/20infinite.t fails</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 20 Jan 2007 17:11:33 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> via RT &lt;bug-DateTime [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Martin H. Sluka&#34; &lt;martin [...] sluka.de&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I just released a new version of DateTime.pm &#40;0.36&#41; that tweaks how
&gt; infinity is defined. Could you try it out and see if this fixes the problem.
</div>
thanks, but unfortunately I still get errors during this
test on my iBook &#40;please see output attached&#41;.

Regards,
fany

-- 
_________________________________________                     _
Martin H. Sluka  \ tel +49-700-19751024 /       ASCII ribbon &#40; &#41;
Breite Straße 3   \ &lt;martin@sluka.de&gt;  /  campaign - against  X
D-90552 Röthenbach \ &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://unf.ug/">http://unf.ug/</a></span>&gt; /  HTML email &#38; vcards / \
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;20&nbsp;11:14:07&nbsp;2007</span>
    <span class="description">martin [...] sluka.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #22392] t/20infinite.t fails</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 20 Jan 2007 17:13:48 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> via RT &lt;bug-DateTime [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Martin H. Sluka&#34; &lt;martin [...] sluka.de&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve just written:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; thanks, but unfortunately I still get errors during this
&gt; test on my iBook &#40;please see output attached&#41;.
</div>
Well.. Maybe I should attach it. :-&#41;

-- 
_________________________________________                     _
Martin H. Sluka  \ tel +49-700-19751024 /       ASCII ribbon &#40; &#41;
Breite Straße 3   \ &lt;martin@sluka.de&gt;  /  campaign - against  X
D-90552 Röthenbach \ &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://unf.ug/">http://unf.ug/</a></span>&gt; /  HTML email &#38; vcards / \
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;22&nbsp;19:49:53&nbsp;2007</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> MSCHWERN [...] cpan.org</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Let me throw in a &#34;me too!&#34;  I&#39;ve got Perl compiled on a Redhat Linux ES3
machine &#40;a 32 bit native system&#41; with long doubles and 64 bit ints. 
Similar problem.  Test and perl -V output attached.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;22&nbsp;19:51:56&nbsp;2007</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This may help:

  DB&lt;2&gt; x $pos
0  DateTime::Infinite::Future=HASH&#40;0x85babf8&#41;
   &#39;local_c&#39; =&gt; HASH&#40;0x88c4cf0&#41;
      &#39;day&#39; =&gt; &#39;-2&#39;
      &#39;day_of_quarter&#39; =&gt; &#39;-2&#39;
      &#39;day_of_week&#39; =&gt; &#39;-2&#39;
      &#39;day_of_year&#39; =&gt; &#39;-2&#39;
      &#39;hour&#39; =&gt; 86399
      &#39;minute&#39; =&gt; 86399
      &#39;month&#39; =&gt; &#39;-2&#39;
      &#39;quarter&#39; =&gt; &#39;-2&#39;
      &#39;second&#39; =&gt; 86399
      &#39;year&#39; =&gt; &#39;-2&#39;
   &#39;local_rd_days&#39; =&gt; &#39;-2&#39;
   &#39;local_rd_secs&#39; =&gt; 86399
   &#39;rd_nanosecs&#39; =&gt; &#39;9.99999999999999999e+1999&#39;
   &#39;tz&#39; =&gt; DateTime::TimeZone::Floating=HASH&#40;0x8825844&#41;
      &#39;name&#39; =&gt; &#39;floating&#39;
      &#39;offset&#39; =&gt; 0
   &#39;utc_rd_days&#39; =&gt; &#39;-2&#39;
   &#39;utc_rd_secs&#39; =&gt; 86399
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;22&nbsp;19:56:19&nbsp;2007</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Note that there is a real way to indicate Infinity and NaN in Perl.  Its
the strings &#34;Infinity&#34; and &#34;NaN&#34;.  I&#39;m experimenting with using them
rather than the Very Large Numbers currently used in DateTime.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;22&nbsp;20:07:54&nbsp;2007</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [PATCH] t/20infinite.t fails &#40;maybe due to 64 bit Perl&#41;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">  NEWBIE: How do you DO that?
  SIMON: It&#39;s simple.  I have an infinite number of monkeys.  Actually,
  it&#39;s only a MAXINT number of monkeys, but it&#39;s a good first-order
  approximation.

The attached patch fixes the problem.  Instead if 100 ** 1000 which is
infinitely far away from being infinity, we use Perl&#39;s built in &#34;inf&#34;
and &#34;nan&#34; values.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -ru DateTime-0.36/lib/DateTime.pm /home/schwern/.cpan/build/DateTime-0.36/lib/DateTime.pm
--- DateTime-0.36/lib/DateTime.pm	2007-01-13 18:30:15.000000000 -0500
+++ /home/schwern/.cpan/build/DateTime-0.36/lib/DateTime.pm	2007-02-22 20:01:58.000000000 -0500
@@ -74,9 +74,10 @@
 
 use constant MAX_NANOSECONDS =&gt; 1_000_000_000;  # 1E9 = almost 32 bits
 
-use constant INFINITY     =&gt;       100 ** 1000;
-use constant NEG_INFINITY =&gt; -1 * &#40;100 ** 1000&#41;;
-use constant NAN          =&gt; INFINITY - INFINITY;
+# We want the exact string used by Perl.
+use constant INFINITY     =&gt; &#39;Infinity&#39; - 1;
+use constant NEG_INFINITY =&gt; -1 * INFINITY;
+use constant NAN          =&gt; &#34;NaN&#34; - 1;
 
 use constant SECONDS_PER_DAY =&gt; 86400;
 
Only in /home/schwern/.cpan/build/DateTime-0.36/lib: DateTime.pm~
Only in /home/schwern/.cpan/build/DateTime-0.36/: perl_V
diff -ru DateTime-0.36/t/07compare.t /home/schwern/.cpan/build/DateTime-0.36/t/07compare.t
--- DateTime-0.36/t/07compare.t	2007-01-13 18:29:30.000000000 -0500
+++ /home/schwern/.cpan/build/DateTime-0.36/t/07compare.t	2007-02-22 19:56:58.000000000 -0500
@@ -81,7 +81,7 @@
 ok&#40;$date1-&gt;compare&#40;$date2&#41; == 1, &#39;Comparison $a &gt; $b, 1 year diff&#39;&#41;;
 
 
-my $infinity = 100 ** 1000;
+my $infinity = DateTime::INFINITY;
 
 ok&#40;$date1-&gt;compare&#40;$infinity&#41; == -1, &#39;Comparison $a &lt; inf&#39;&#41;;
 
Only in /home/schwern/.cpan/build/DateTime-0.36/t: 07compare.t~
diff -ru DateTime-0.36/t/20infinite.t /home/schwern/.cpan/build/DateTime-0.36/t/20infinite.t
--- DateTime-0.36/t/20infinite.t	2007-01-13 18:29:42.000000000 -0500
+++ /home/schwern/.cpan/build/DateTime-0.36/t/20infinite.t	2007-02-22 19:58:31.000000000 -0500
@@ -8,11 +8,11 @@
 
 my $pos = DateTime::Infinite::Future-&gt;new;
 my $neg = DateTime::Infinite::Past-&gt;new;
-my $posinf = 100 ** 1000;
-my $neginf = -1 * $posinf;
+my $posinf = DateTime::INFINITY;
+my $neginf = DateTime::NEG_INFINITY;
 # used to use abs&#40;&#41; which broke some Win32 platforms but may have
 # fixed others - will wait for bug reports
-my $nan_string = &#40;$posinf - $posinf&#41; . &#39;&#39;;
+my $nan_string = DateTime::NAN;
 
 # infinite date math
 {
Only in /home/schwern/.cpan/build/DateTime-0.36/t: 20infinite.t~
Only in /home/schwern/.cpan/build/DateTime-0.36/: test.out
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;23&nbsp;04:18:34&nbsp;2007</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">It turns out using the string &#34;inf&#34; as infinity was broken in some
versions of Perl, 5.8.6 for example.  This revised patch tries several
ways to produce infinity.

1&#41; &#39;inf&#39; - 1
This is the safest, most direct way to get infinity and is tried first.
 -1 to reveal if &#39;inf&#39; is really being treated as Infinity.  If not it
will be -1.

2&#41; 2**2**31
A really big number will return &#39;inf&#39; and 2 to the 2**31 is really big.
 But there&#39;s the risk of causing a floating point error and some systems
which don&#39;t follow the IEEE conventions might not work.  See
t/op/arith.t in the perl core for the gory details.

3&#41; Math::BigInt-&gt;binf 
If all else fails, use Math::BigInt.  This is done last to avoid loading
a module unnecessarily and because binf&#40;&#41; was introduced in 2001 and
might not be there in older Perls.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -ru DateTime-0.36/lib/DateTime.pm /home/schwern/.cpan/build/DateTime-0.36/lib/DateTime.pm
--- DateTime-0.36/lib/DateTime.pm	2007-01-13 18:30:15.000000000 -0500
+++ /home/schwern/.cpan/build/DateTime-0.36/lib/DateTime.pm	2007-02-22 20:01:58.000000000 -0500
@@ -74,9 +74,10 @@
 
 use constant MAX_NANOSECONDS =&gt; 1_000_000_000;  # 1E9 = almost 32 bits
 
-use constant INFINITY     =&gt;       100 ** 1000;
-use constant NEG_INFINITY =&gt; -1 * &#40;100 ** 1000&#41;;
-use constant NAN          =&gt; INFINITY - INFINITY;
+# We want the exact string used by Perl.
+use constant INFINITY     =&gt; &#39;Infinity&#39; - 1;
+use constant NEG_INFINITY =&gt; -1 * INFINITY;
+use constant NAN          =&gt; &#34;NaN&#34; - 1;
 
 use constant SECONDS_PER_DAY =&gt; 86400;
 
Only in /home/schwern/.cpan/build/DateTime-0.36/lib: DateTime.pm~
Only in /home/schwern/.cpan/build/DateTime-0.36/: perl_V
diff -ru DateTime-0.36/t/07compare.t /home/schwern/.cpan/build/DateTime-0.36/t/07compare.t
--- DateTime-0.36/t/07compare.t	2007-01-13 18:29:30.000000000 -0500
+++ /home/schwern/.cpan/build/DateTime-0.36/t/07compare.t	2007-02-22 19:56:58.000000000 -0500
@@ -81,7 +81,7 @@
 ok&#40;$date1-&gt;compare&#40;$date2&#41; == 1, &#39;Comparison $a &gt; $b, 1 year diff&#39;&#41;;
 
 
-my $infinity = 100 ** 1000;
+my $infinity = DateTime::INFINITY;
 
 ok&#40;$date1-&gt;compare&#40;$infinity&#41; == -1, &#39;Comparison $a &lt; inf&#39;&#41;;
 
Only in /home/schwern/.cpan/build/DateTime-0.36/t: 07compare.t~
diff -ru DateTime-0.36/t/20infinite.t /home/schwern/.cpan/build/DateTime-0.36/t/20infinite.t
--- DateTime-0.36/t/20infinite.t	2007-01-13 18:29:42.000000000 -0500
+++ /home/schwern/.cpan/build/DateTime-0.36/t/20infinite.t	2007-02-22 19:58:31.000000000 -0500
@@ -8,11 +8,11 @@
 
 my $pos = DateTime::Infinite::Future-&gt;new;
 my $neg = DateTime::Infinite::Past-&gt;new;
-my $posinf = 100 ** 1000;
-my $neginf = -1 * $posinf;
+my $posinf = DateTime::INFINITY;
+my $neginf = DateTime::NEG_INFINITY;
 # used to use abs&#40;&#41; which broke some Win32 platforms but may have
 # fixed others - will wait for bug reports
-my $nan_string = &#40;$posinf - $posinf&#41; . &#39;&#39;;
+my $nan_string = DateTime::NAN;
 
 # infinite date math
 {
Only in /home/schwern/.cpan/build/DateTime-0.36/t: 20infinite.t~
Only in /home/schwern/.cpan/build/DateTime-0.36/: test.out
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;15&nbsp;03:23:03&nbsp;2007</span>
    <span class="description">sthoenna [...] efn.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #22392] t/20infinite.t fails &#40;maybe due to 64 bit  Perl&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 15 Apr 2007 00:22:51 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DateTime [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Yitzchak Scott-Thoennes&#34; &lt;sthoenna [...] efn.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Just ran into this bug myself, trying to build with long doubles.

I&#39;d suggest just the attached patch, using the inf value successfully
in use by B::Deparse.  While it would be nice to support the systems
that raise an FPE or don&#39;t actually support ieee-like infinite values,
there&#39;s not an easy fix for that.

FWIW, the weird values reported for $pos:

0 DateTime::Infinite::Future=HASH&#40;0x85babf8&#41;
&#39;local_c&#39; =&gt; HASH&#40;0x88c4cf0&#41;
&#39;day&#39; =&gt; &#39;-2&#39;
&#39;day_of_quarter&#39; =&gt; &#39;-2&#39;
&#39;day_of_week&#39; =&gt; &#39;-2&#39;
&#39;day_of_year&#39; =&gt; &#39;-2&#39;
&#39;hour&#39; =&gt; 86399
&#39;minute&#39; =&gt; 86399
&#39;month&#39; =&gt; &#39;-2&#39;
&#39;quarter&#39; =&gt; &#39;-2&#39;
&#39;second&#39; =&gt; 86399
&#39;year&#39; =&gt; &#39;-2&#39;
&#39;local_rd_days&#39; =&gt; &#39;-2&#39;
&#39;local_rd_secs&#39; =&gt; 86399
&#39;rd_nanosecs&#39; =&gt; &#39;9.99999999999999999e+1999&#39;
&#39;tz&#39; =&gt; DateTime::TimeZone::Floating=HASH&#40;0x8825844&#41;
&#39;name&#39; =&gt; &#39;floating&#39;
&#39;offset&#39; =&gt; 0
&#39;utc_rd_days&#39; =&gt; &#39;-2&#39;
&#39;utc_rd_secs&#39; =&gt; 86399

are due to using &#39;use integer&#39; or SvIV on UV values.  This is quite
possibly my fault: I used to think use integer was a neat idea, and
used it in the old Date::ICal code.  If the idea of using it came
from there, I apologize for leading astray - use integer on arbitrary
types of input values is a really bad idea.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;15&nbsp;03:27:38&nbsp;2007</span>
    <span class="description">sthoenna [...] efn.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> bug-datetime [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #22392] t/20infinite.t fails &#40;maybe due to 64 bit  Perl&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 15 Apr 2007 00:26:59 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Yitzchak Scott-Thoennes&#34; &lt;sthoenna [...] efn.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Yitzchak Scott-Thoennes&#34; &lt;sthoenna [...] efn.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun, April 15, 2007 12:22 am, Yitzchak Scott-Thoennes wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;d suggest just the attached patch, using the inf value successfully
&gt; in use by B::Deparse.
</div>
Now with 100% more attachments!
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;15&nbsp;08:53:31&nbsp;2007</span>
    <span class="description">autarch [...] urth.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #22392] t/20infinite.t fails &#40;maybe due to 64 bit Perl&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 15 Apr 2007 07:53:01 -0500 &#40;CDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Yitzchak Scott-Thoennes via RT &lt;bug-DateTime [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dave Rolsky &lt;autarch [...] urth.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun, 15 Apr 2007, Yitzchak Scott-Thoennes via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; are due to using &#39;use integer&#39; or SvIV on UV values.  This is quite
&gt; possibly my fault: I used to think use integer was a neat idea, and
&gt; used it in the old Date::ICal code.  If the idea of using it came
&gt; from there, I apologize for leading astray - use integer on arbitrary
&gt; types of input values is a really bad idea.
</div>
So are you suggesting I remove all use of &#34;use integer&#34; from the 
DateTime.pm code?


-dave

/*===================================================
VegGuide.Org                        www.BookIRead.com
Your guide to all that&#39;s veg.       My book blog
===================================================*/
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;19&nbsp;04:18:21&nbsp;2007</span>
    <span class="description">sthoenna [...] efn.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #22392] t/20infinite.t fails &#40;maybe due to 64 bit  Perl&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 19 Apr 2007 01:18:03 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Dave Rolsky&#34; &lt;autarch [...] urth.org&gt;, bug-DateTime [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Yitzchak Scott-Thoennes&#34; &lt;sthoenna [...] efn.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun, 15 Apr 2007, Dave Rolsky wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So are you suggesting I remove all use of &#34;use integer&#34; from the
&gt; DateTime.pm code?
</div>
Or validate that your inputs are within the range of an IV.
If not, you&#39;d need to add some int&#40;&#41;s, and think about floating
point lack of precision.

And in XS, you&#39;d need to avoid SvIVs.  For instance, both versions of
_normalize_tai_seconds are broken in the same way for finite numbers
greater than IV_MAX &#40; ~0 &gt;&gt; 1 in non-use-integer pure perl &#41;, though
the XS version obviously doesn&#39;t have a &#34;use integer&#34; in it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;22&nbsp;21:51:01&nbsp;2007</span>
    <span class="description">sthoenna [...] efn.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #22392] t/20infinite.t fails &#40;maybe due to 64 bit  Perl&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 22 Apr 2007 18:50:45 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Dave Rolsky&#34; &lt;autarch [...] urth.org&gt;, bug-datetime [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Yitzchak Scott-Thoennes&#34; &lt;sthoenna [...] efn.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, April 19, 2007 1:18 am, Yitzchak Scott-Thoennes wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun, 15 Apr 2007, Dave Rolsky wrote:
&gt;
<div class="message-stanza open">&gt;&gt; So are you suggesting I remove all use of &#34;use integer&#34; from the
&gt;&gt; DateTime.pm code?
&gt;&gt;
</div>&gt;
&gt; Or validate that your inputs are within the range of an IV.
&gt; If not, you&#39;d need to add some int&#40;&#41;s, and think about floating
&gt; point lack of precision.
&gt;
&gt; And in XS, you&#39;d need to avoid SvIVs.  For instance, both versions of
&gt; _normalize_tai_seconds are broken in the same way for finite numbers
&gt; greater than IV_MAX &#40; ~0 &gt;&gt; 1 in non-use-integer pure perl &#41;, though the XS
&gt; version obviously doesn&#39;t have a &#34;use integer&#34; in it.
</div>
If it wasn&#39;t clear, this is all a side issue that only relates to this
bug ticket in that the existing expression for INFINITY is finite under
long doubles, and when perl attempts to get an integer value for it,
it gives UV_MAX, which, when cast to an IV via &#34;use integer&#34; or an
SvIV that ignores SvIsUV, is -1.

The fix for *this* bug #22392 is just to use a better expression for
infinitity, as the suggested patch does.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;16&nbsp;21:13:03&nbsp;2007</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> DAGOLDEN [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Apr 22 21:51:01 2007, sthoenna@efn.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The fix for *this* bug #22392 is just to use a better expression for
&gt; infinitity, as the suggested patch does.
</div>
I can confirm that Yitzchak&#39;s patch fixes this bug for 0.38 on Perl
5.8.8 i686-linux-64int-ld &#40;a Core 2 Duo&#41;, whereas the unpatched 0.38
fails t/20inifinite.t.

Dave -- could we please get a 0.39 release soon with this patch? 
DateTime has become a fairly common dependency, I believe.  Thank you
very much.

Regards,
David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;26&nbsp;23:40:54&nbsp;2009</span>
    <span class="description">YSTH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Apr 15 03:27:38 2007, sthoenna@efn.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun, April 15, 2007 12:22 am, Yitzchak Scott-Thoennes wrote:
<div class="message-stanza open">&gt; &gt; I&#39;d suggest just the attached patch, using the inf value successfully
&gt; &gt; in use by B::Deparse.
</div>&gt; 
&gt; Now with 100% more attachments!
</div>
This patch was put in some time ago; this bug should be closed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;27&nbsp;00:22:09&nbsp;2009</span>
    <span class="description">DROLSKY [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;27&nbsp;00:22:09&nbsp;2009</span>
    <span class="description">DROLSKY [...] cpan.org -  Fixed in 0.39 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
